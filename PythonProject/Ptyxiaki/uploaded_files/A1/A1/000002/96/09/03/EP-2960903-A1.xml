<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960903-A1" country="EP" doc-number="2960903" kind="A1" date="20151230" family-id="51178839" file-reference-id="313851" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451428" ucid="EP-2960903-A1"><document-id><country>EP</country><doc-number>2960903</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14306023-A" is-representative="YES"><document-id mxw-id="PAPP193865824" load-source="patent-office" format="original"><country>EP</country><doc-number>14306023.4</doc-number><date>20140627</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193865825" load-source="docdb" format="epo"><country>EP</country><doc-number>14306023</doc-number><kind>A</kind><date>20140627</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162035218" ucid="EP-14306023-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>14306023</doc-number><kind>A</kind><date>20140627</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988526425" load-source="docdb">G10L  19/008       20130101AFI20141217BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1815393382" load-source="docdb" scheme="CPC">H04S2400/11        20130101 LA20170511BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1815393383" load-source="docdb" scheme="CPC">H04S2420/11        20130101 LA20170511BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1815393384" load-source="docdb" scheme="CPC">G10L  19/008       20130101 FI20170512BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1815393385" load-source="docdb" scheme="CPC">H04S   7/30        20130101 LI20170511BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545750" lang="DE" load-source="patent-office">Verfahren und Vorrichtung zur Bestimmung der Komprimierung einer HOA-Datenrahmendarstellung einer niedrigsten Ganzzahl von Bits zur Darstellung nichtdifferentieller Verstärkungswerte</invention-title><invention-title mxw-id="PT165545751" lang="EN" load-source="patent-office">Method and apparatus for determining for the compression of an HOA data frame representation a lowest integer number of bits required for representing non-differential gain values</invention-title><invention-title mxw-id="PT165545752" lang="FR" load-source="patent-office">Procédé et appareil de détermination de la compression d'une représentation d'une trame de données HOA du plus petit nombre entier de bits nécessaires pour représenter des valeurs de gain non différentielles</invention-title><citations><patent-citations><patcit mxw-id="PCIT377598384" load-source="docdb" ucid="EP-13305558-A" dnum-type="application"><document-id format="epo"><country>EP</country><doc-number>13305558</doc-number><kind>A</kind><date>20130429</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT377611294" load-source="docdb" ucid="EP-13305986-A" dnum-type="application"><document-id format="epo"><country>EP</country><doc-number>13305986</doc-number><kind>A</kind><date>20130711</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962027" load-source="docdb" ucid="EP-2665208-A1"><document-id format="epo"><country>EP</country><doc-number>2665208</doc-number><kind>A1</kind><date>20131120</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962028" load-source="docdb" ucid="EP-2743922-A1"><document-id format="epo"><country>EP</country><doc-number>2743922</doc-number><kind>A1</kind><date>20140618</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>"WD1-HOA Text of MPEG-H 3D Audio", 107. MPEG MEETING;13-1-2014 - 17-1-2014; SAN JOSE; (MOTION PICTURE EXPERT GROUP OR ISO/IEC JTC1/SC29/WG11),, no. N14264, 21 February 2014 (2014-02-21), XP030021001</text><sources><source mxw-id="PNPL63883875" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>B. RAFAELY: "Plane-wave decomposition of the sound field on a sphere by spherical convolution", J. ACOUST. SOC. AM., vol. 4, no. 116, October 2004 (2004-10-01), pages 2149 - 2157</text><sources><source mxw-id="PNPL71920433" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>E.G. WIL-LIAMS: "Applied Mathematical Sciences", vol. 93, 1999, ACADEMIC PRESS, article "Fourier Acoustics"</text><sources><source mxw-id="PNPL63883877" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>J. DANIEL: "PhD thesis", 2001, article "Représentation de champs acoustiques, application a la transmission et a la reproduction de scenes sonores complexes dans un contexte multimédia"</text><sources><source mxw-id="PNPL63883878" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>J. FLIEGE; U. MAIER: "A two-stage approach for computing cubature formulae for the sphere", TECHNICAL REPORT, FACHBEREICH MATHEMATIK, 1999, Retrieved from the Internet &lt;URL:http://www.mathematik.uni-dortmund.de/lsx/research/projects /fliege/nodes/nodes.html&gt;</text><sources><source mxw-id="PNPL63883879" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103338086" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>THOMSON LICENSING</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR1103343601" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>THOMSON LICENSING</last-name></addressbook></applicant><applicant mxw-id="PPAR1101644237" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Thomson Licensing</last-name><iid>101463287</iid><address><street>1-5 Rue Jeanne d'Arc</street><city>92130 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103344027" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KORDON SVEN</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103329158" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KORDON, SVEN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101641747" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KORDON, SVEN</last-name><address><street>Mühlenkampstrasse 50 A</street><city>31515 Wunstorf</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103303954" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KRUEGER ALEXANDER</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103305859" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KRUEGER, ALEXANDER</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650751" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KRUEGER, ALEXANDER</last-name><address><street>Feuerbachstrasse 16</street><city>30655 Hannover</city><country>DE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101643591" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hartnack, Wolfgang</last-name><iid>100037536</iid><address><street>Deutsche Thomson OHG European Patent Operations Karl-Wiechert-Allee 74</street><city>30625 Hannover</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660689186" load-source="docdb">AL</country><country mxw-id="DS660684715" load-source="docdb">AT</country><country mxw-id="DS660689195" load-source="docdb">BE</country><country mxw-id="DS660609984" load-source="docdb">BG</country><country mxw-id="DS660783265" load-source="docdb">CH</country><country mxw-id="DS660684647" load-source="docdb">CY</country><country mxw-id="DS660684648" load-source="docdb">CZ</country><country mxw-id="DS660609361" load-source="docdb">DE</country><country mxw-id="DS660689196" load-source="docdb">DK</country><country mxw-id="DS660689197" load-source="docdb">EE</country><country mxw-id="DS660606337" load-source="docdb">ES</country><country mxw-id="DS660609985" load-source="docdb">FI</country><country mxw-id="DS660609986" load-source="docdb">FR</country><country mxw-id="DS660609362" load-source="docdb">GB</country><country mxw-id="DS660689198" load-source="docdb">GR</country><country mxw-id="DS660609367" load-source="docdb">HR</country><country mxw-id="DS660684649" load-source="docdb">HU</country><country mxw-id="DS660783266" load-source="docdb">IE</country><country mxw-id="DS660689203" load-source="docdb">IS</country><country mxw-id="DS660609995" load-source="docdb">IT</country><country mxw-id="DS660689204" load-source="docdb">LI</country><country mxw-id="DS660609368" load-source="docdb">LT</country><country mxw-id="DS660684716" load-source="docdb">LU</country><country mxw-id="DS660609996" load-source="docdb">LV</country><country mxw-id="DS660609369" load-source="docdb">MC</country><country mxw-id="DS660684717" load-source="docdb">MK</country><country mxw-id="DS660684718" load-source="docdb">MT</country><country mxw-id="DS660689205" load-source="docdb">NL</country><country mxw-id="DS660609379" load-source="docdb">NO</country><country mxw-id="DS660689206" load-source="docdb">PL</country><country mxw-id="DS660609997" load-source="docdb">PT</country><country mxw-id="DS660684650" load-source="docdb">RO</country><country mxw-id="DS660609998" load-source="docdb">RS</country><country mxw-id="DS660689211" load-source="docdb">SE</country><country mxw-id="DS660783267" load-source="docdb">SI</country><country mxw-id="DS660609380" load-source="docdb">SK</country><country mxw-id="DS660609381" load-source="docdb">SM</country><country mxw-id="DS660684723" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479798" lang="EN" load-source="patent-office"><p id="pa01" num="0001">When compressing an HOA data frame representation, a gain control (15, 151) is applied for each channel signal before it is perceptually encoded (16). The gain values are transferred in a differential manner as side information. However, for starting decoding of such streamed compressed HOA data frame representation absolute gain values are required, which should be coded with a minimum number of bits. For determining such lowest integer number (β<sub>e</sub>) of bits the HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) is rendered in spatial domain to virtual loudspeaker signals lying on a unit sphere, followed by normalisation of the HOA data frame representation (<b><i>C</i></b>(<i>k</i>)). Then the lowest integer number of bits is set to β<sub>e</sub> = ┌log<sub>2</sub> (┌log<sub>2</sub> (<i>K</i><sub>MAX</sub> · <i>0</i>)┐ + 1)┐.
<img id="iaf01" file="imgaf001.tif" wi="119" he="95" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759610" lang="EN" source="EPO" load-source="docdb"><p>When compressing an HOA data frame representation, a gain control (15, 151) is applied for each channel signal before it is perceptually encoded (16). The gain values are transferred in a differential manner as side information. However, for starting decoding of such streamed compressed HOA data frame representation absolute gain values are required, which should be coded with a minimum number of bits. For determining such lowest integer number (² e ) of bits the HOA data frame representation (  C  ( k )) is rendered in spatial domain to virtual loudspeaker signals lying on a unit sphere, followed by normalisation of the HOA data frame representation (  C  ( k )). Then the lowest integer number of bits is set to ² e  = ”Œlog 2  (”Œlog 2  ( K  MAX  ·  0 )”� + 1)”�.</p></abstract><description mxw-id="PDES98404499" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>Technical field</u></heading><p id="p0001" num="0001">The invention relates to a method and to an apparatus for determining for the compression of an HOA data frame representation a lowest integer number of bits required for representing non-differential gain values associated with channel signals of specific ones of said HOA data frames.</p><heading id="h0002"><u>Background</u></heading><p id="p0002" num="0002">Higher Order Ambisonics denoted HOA offers one possibility to represent three-dimensional sound. Other techniques are wave field synthesis (WFS) or channel based approaches like 22.2. In contrast to channel based methods, the HOA representation offers the advantage of being independent of a specific loudspeaker set-up. However, this flexibility is at the expense of a decoding process which is required for the playback of the HOA representation on a particular loudspeaker set-up. Compared to the WFS approach, where the number of required loudspeakers is usually very large, HOA may also be rendered to set-ups consisting of only few loudspeakers. A further advantage of HOA is that the same representation can also be employed without any modification for binaural rendering to head-phones.</p><p id="p0003" num="0003">HOA is based on the representation of the spatial density of complex harmonic plane wave amplitudes by a truncated Spherical Harmonics (SH) expansion. Each expansion coefficient is a function of angular frequency, which can be equivalently represented by a time domain function. Hence, without loss<!-- EPO <DP n="2"> --> of generality, the complete HOA sound field representation actually can be assumed to consist of <i>O</i> time domain functions, where <i>O</i> denotes the number of expansion coefficients. These time domain functions will be equivalently referred to as HOA coefficient sequences or as HOA channels in the following.</p><p id="p0004" num="0004">The spatial resolution of the HOA representation improves with a growing maximum order <i>N</i> of the expansion. Unfortunately, the number of expansion coefficients <i>O</i> grows quad-ratically with the order <i>N,</i> in particular <i>O</i> = (<i>N</i> + 1)<sup>2</sup>. For example, typical HOA representations using order <i>N = 4</i> require <i>O</i> = 25 HOA (expansion) coefficients. The total bit rate for the transmission of HOA representation, given a desired single-channel sampling rate <i>f<sub>s</sub></i> and the number of bits <i>N</i><sub>b</sub> per sample, is determined by <i>O · f<sub>s</sub> · N</i><sub>b</sub>. Transmitting an HOA representation of order <i>N</i> = 4 with a sampling rate of <i>f</i><sub>s</sub> = 48kHz employing <i>N</i><sub>b</sub> = 16 bits per sample results in a bit rate of 19.2 MBits/s, which is very high for many practical applications, e.g. streaming. Thus, compression of HOA representations is highly desirable.</p><p id="p0005" num="0005">Previously, the compression of HOA sound field representations was proposed in <patcit id="pcit0001" dnum="EP2665208A1"><text>EP 2665208 A1</text></patcit>, <patcit id="pcit0002" dnum="EP2743922A1"><text>EP 2743922 A1</text></patcit>, <patcit id="pcit0003" dnum="EP13305558A"><text>EP 13305558.2</text></patcit>, cf. <nplcit id="ncit0001" npl-type="s"><text>ISO/IEC JTC1/SC29/WG11, N14264, WD1-HOA Text of MPEG-H 3D Audio, January 2014</text></nplcit>. These approaches have in common that they perform a sound field analysis and decompose the given HOA representation into a directional component and a residual ambient component. The final compressed representation is on one hand assumed to consist of a number of quantised signals, resulting from the perceptual coding of directional and vector-based signals as well as relevant coefficient sequences of the ambient HOA component. On the other hand it comprises additional side information related to the quantised signals, which side information is required<!-- EPO <DP n="3"> --> for the reconstruction of the HOA representation from its compressed version.</p><p id="p0006" num="0006">Before being passed to the perceptual encoder, these intermediate time-domain signals are required to have a maximum amplitude within the value range [-1,1[ , which is a requirement arising from the implementation of currently available perceptual encoders. In order to satisfy this requirement when compressing HOA representations, a gain control processing unit (see <patcit id="pcit0004" dnum="EP13305986A"><text>EP 13305986.5</text></patcit> and the above-mentioned ISO/IEC JTC1/SC29/WG11 N14264 document) is used ahead of the perceptual encoders, which smoothly attenuates or amplifies the input signals. The resulting signal modification is assumed to be invertible and to be applied frame-wise, where in particular the change of the signal amplitudes between successive frames is assumed to be a power of '2'. For facilitating inversion of this signal modification in the HOA decompressor, corresponding normalisation side information is included in total side information. This normalisation side information can consist of exponents to base '2', which exponents describe the relative amplitude change between two successive frames. These exponents are coded using a run length code according to the above-mentioned ISO/IEC JTC1/ SC29/WG11 N14264 document, since minor amplitude changes between successive frames are more probable than greater ones.</p><heading id="h0003"><u>Summary of invention</u></heading><p id="p0007" num="0007">Using differentially coded amplitude changes for reconstructing the original signal amplitudes in the HOA decompression is feasible e.g. in case a single file is decompressed from the beginning to the end without any temporal jumps. However, to facilitate random access, independent access units have to be present in the coded representation<!-- EPO <DP n="4"> --> (which is typically a bit stream) in order to allow starting of the decompression from a desired position (or at least in the vicinity of it), independently of the information from previous frames. Such an independent access unit has to contain the total absolute amplitude change (i.e. a non-differential gain value) caused by the gain control processing unit from the first frame up to a current frame. Assuming that amplitude changes between two successive frames are a power of '2', it is sufficient to also describe the total absolute amplitude change by an exponent to base '2'. For an efficient coding of this exponent, it is essential to know the potential maximum gains of the signals before the application of the gain control processing unit. However, this knowledge is highly dependent on the specification of constraints on the value range of the HOA representations to be compressed. Unfortunately, the MPEG-H 3D audio document ISO/IEC JTC1/SC29/WG11 N14264 does only provide a description of the format for the input HOA representation, without setting any constraints on the value ranges.</p><p id="p0008" num="0008">A problem to be solved by the invention is to provide a lowest integer number of bits required for representing the non-differential gain values. This problem is solved by the method disclosed in claim 1. An apparatus that utilises this method is disclosed in claim 2.</p><p id="p0009" num="0009">Advantageous additional embodiments of the invention are disclosed in the respective dependent claims.</p><p id="p0010" num="0010">The invention establishes an inter-relation between the value range of the input HOA representation and the potential maximum gains of the signals before the application of the gain control processing unit within the HOA compressor. Based on that inter-relation, the amount of required bits is determined - for a given specification for the value range<!-- EPO <DP n="5"> --> of an input HOA representation - for an efficient coding of the exponents to base '2' for describing within an access unit the total absolute amplitude changes (i.e. a non-differential gain value) of the modified signals caused by the gain control processing unit from the first frame up to a current frame.<br/>
Further, once the rule for the computation of the amount of required bits for the coding of the exponent is fixed, the invention uses a processing for verifying whether a given HOA representation satisfies the required value range constraints such that it can be compressed correctly.</p><p id="p0011" num="0011">In principle, the inventive method is suited for determining for the compression of an HOA data frame representation a lowest integer number β<sub>e</sub> of bits required for representing non-differential gain values for channel signals of specific ones of said HOA data frames, wherein each channel signal in each frame comprises a group of sample values and wherein to each channel signal of each one of said HOA data frames a differential gain value is assigned and such differential gain value causes a change of amplitudes of the sample values of a channel signal in a current HOA data frame with respect to the sample values of that channel signal in the previous HOA data frame, and wherein such gain adapted channel signals are encoded in an encoder,<br/>
and wherein said HOA data frame representation was rendered in spatial domain to <i>O</i> virtual loudspeaker signals <i>w<sub>j</sub></i>(<i>t</i>), where the positions of the virtual loudspeakers are lying on a unit sphere and are targeted to be distributed uniformly on that unit sphere, said rendering being represented by a matrix multiplication <b><i>w</i></b>(<i>t</i>) = (Ψ)<sup>-1</sup> · <b><i>c</i></b>(<i>t</i>), wherein <b><i>w</i></b>(<i>t</i>) is a vector containing all virtual loudspeaker signals, Ψ is a virtual loudspeaker positions mode matrix, and <b><i>c</i></b>(t) is a vector of the corresponding HOA coefficient sequences of said HOA data<!-- EPO <DP n="6"> --> frame representation,<br/>
and wherein said HOA data frame representation was normalised such that <maths id="math0001" num=""><math display="inline"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>=</mo><munder><mi mathvariant="italic">max</mi><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi></mrow></munder><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><mi>t</mi></mfenced></mfenced><mo>≤</mo><mn>1</mn><mspace width="2em"/><mo>∀</mo><mi>t</mi><mo>,</mo></math><img id="ib0001" file="imgb0001.tif" wi="64" he="11" img-content="math" img-format="tif" inline="yes"/></maths><br/>
said method including the steps:
<ul><li>forming said channel signals by one or more of substeps a), b), c) from said normalised HOA data frame representation:
<ol><li>a) for representing predominant sound signals in said channel signals, multiplying said vector of HOA coefficient sequences <b><i>c</i></b>(<i>t</i>) by a mixing matrix <b><i>A</i></b>, the Euclidean norm of which mixing matrix <b><i>A</i></b> is not greater than '1', wherein mixing matrix <b><i>A</i></b> represents a linear combination of coefficient sequences of said normalised HOA data frame representation;</li><li>b) for representing an ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>) in said channel signals, subtracting said predominant sound signals from said normalised HOA data frame representation, and selecting at least part of the coefficient sequences of said ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>), wherein ∥<b><i>c</i></b><sub>AMB</sub>(<i>t</i>)∥<sub>2</sub><sup>2</sup> ≤ ∥<b>c</b>(<i>t</i>)∥<sub>2</sub><sup>2</sup>, and transforming the resulting minimum ambient component <i>c</i><sub>AMB,MIN</sub>(<i>t</i>) by computing <maths id="math0002" num=""><math display="inline"><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>⋅</mo><msub><mi mathvariant="bold-italic">c</mi><mrow><mi>AMB</mi><mo>,</mo><mi>MIN</mi></mrow></msub><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0002" file="imgb0002.tif" wi="59" he="9" img-content="math" img-format="tif" inline="yes"/></maths> wherein <maths id="math0003" num=""><math display="inline"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>&lt;</mo><mn>1</mn></math><img id="ib0003" file="imgb0003.tif" wi="26" he="8" img-content="math" img-format="tif" inline="yes"/></maths>and Ψ<sub>MIN</sub> is a mode matrix for said minimum ambient component <b><i>c</i><sub>AMB,MIN</sub>(<i>t</i>);</b></li><li>c) selecting part of said HOA coefficient sequences <b><i>c</i></b>(<i>t</i>);</li></ol></li><li>setting said lowest integer number β<sub>e</sub> of bits required for representing said non-differential gain values for said channel signals to β<sub>e</sub>=┌log2(┌log<sub>2</sub>(K<sub>MAX·</sub>0)┐+1)┐,<br/>
wherein <maths id="math0004" num=""><math display="inline"><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mo>,</mo></math><img id="ib0004" file="imgb0004.tif" wi="80" he="11" img-content="math" img-format="tif" inline="yes"/></maths> <i>N</i> is the order, <i>N</i><sub>MAX</sub> is a maximum order of interest, <maths id="math0005" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></math><img id="ib0005" file="imgb0005.tif" wi="26" he="8" img-content="math" img-format="tif" inline="yes"/></maths> are directions of said virtual loudspeakers, <i>O</i> = (<i>N</i> + 1)<sup>2</sup> is the number of HOA coefficient sequences, and <i>K</i> is a ratio between the squared Euclidean norm ∥Ψ∥<sub>2</sub><sup>2</sup> Of said mode matrix and <i>O</i>.</li></ul><!-- EPO <DP n="7"> --></p><p id="p0012" num="0012">In principle the inventive apparatus is suited for determining for the compression of an HOA data frame representation a lowest integer number β<sub>e</sub> of bits required for representing non-differential gain values for channel signals of specific ones of said HOA data frames, wherein each channel signal in each frame comprises a group of sample values and wherein to each channel signal of each one of said HOA data frames a differential gain value is assigned and such differential gain value causes a change of amplitudes of the sample values of a channel signal in a current HOA data frame with respect to the sample values of that channel signal in the previous HOA data frame, and wherein such gain adapted channel signals are encoded in an encoder,<br/>
and wherein said HOA data frame representation was rendered in spatial domain to <i>O</i> virtual loudspeaker signals <i>w<sub>j</sub></i>(<i>t</i>), where the positions of the virtual loudspeakers are lying on a unit sphere and are targeted to be distributed uniformly on that unit sphere, said rendering being represented by a matrix multiplication <i><b>w</b>(t</i>) = (Ψ)<sup>-1</sup> · <b><i>c</i></b>(<i>t</i>), wherein <b><i>w</i></b>(<i>t</i>) is a vector containing all virtual loudspeaker signals, Ψ is a virtual loudspeaker positions mode matrix, and <b><i>c</i></b>(<i>t</i>) is a vector of the corresponding HOA coefficient sequences of said HOA data frame representation,<br/>
and wherein said HOA data frame representation was normalised such that <maths id="math0006" num=""><math display="inline"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>=</mo><munder><mi mathvariant="italic">max</mi><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi></mrow></munder><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><mi>t</mi></mfenced></mfenced><mo>≤</mo><mn>1</mn><mspace width="2em"/><mo>∀</mo><mi>t</mi><mo>,</mo></math><img id="ib0006" file="imgb0006.tif" wi="65" he="9" img-content="math" img-format="tif" inline="yes"/></maths><br/>
said apparatus including:
<ul><li>means which form said channel signals by one or more of the operations a), b), c) from said normalised HOA data frame representation:
<ol><li>a) for representing predominant sound signals in said channel signals, multiplying said vector of HOA coefficient sequences <b><i>c</i></b>(<i>t</i>) by a mixing matrix <b><i>A</i></b>, the Euclidean norm of which mixing matrix <b><i>A</i></b> is not greater than '1', wherein mixing<!-- EPO <DP n="8"> --> matrix <b><i>A</i></b> represents a linear combination of coefficient sequences of said normalised HOA data frame representation;</li><li>b) for representing an ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>) in said channel signals, subtracting said predominant sound signals from said normalised HOA data frame representation, and selecting at least part of the coefficient sequences of said ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>), wherein ∥<b><i>c</i></b><sub>AMB</sub>(<i>t</i>)∥<sup>2</sup><sub>2</sub> ≤ ∥<b><i>c</i></b>(<i>t</i>)∥<sub>2</sub><sup>2</sup>, and transforming the resulting minimum ambient component <b><i>c</i></b><sub>AMB,MIN</sub>(<i>t</i>) by computing <maths id="math0007" num=""><math display="inline"><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>⋅</mo><msub><mi mathvariant="bold-italic">c</mi><mrow><mi>AMB</mi><mo>,</mo><mi>MIN</mi></mrow></msub><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0007" file="imgb0007.tif" wi="58" he="9" img-content="math" img-format="tif" inline="yes"/></maths> wherein <maths id="math0008" num=""><math display="inline"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>&lt;</mo><mn>1</mn></math><img id="ib0008" file="imgb0008.tif" wi="27" he="8" img-content="math" img-format="tif" inline="yes"/></maths> and Ψ<sub>MIN</sub> is a mode matrix for said minimum ambient component <b><i>c</i></b><sub>AMB,MIN</sub>(<i>t</i>);</li><li>c) selecting part of said HOA coefficient sequences <b><i>c</i></b>(<i>t</i>);</li></ol></li><li>means which set said lowest integer number β<sub>e</sub> of bits required for representing said non-differential gain values for said channel signals to β<sub>e</sub>=┌log<sub>2</sub>(┌log<sub>2</sub>(<i>K</i><sub>MAX</sub>·<sub>0</sub>)┐+ 1)┐, wherein <maths id="math0009" num=""><math display="inline"><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mo>,</mo></math><img id="ib0009" file="imgb0009.tif" wi="81" he="13" img-content="math" img-format="tif" inline="yes"/></maths> <i>N</i> is the order, <i>N</i><sub>MAX</sub> is a maximum order of interest, <maths id="math0010" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></math><img id="ib0010" file="imgb0010.tif" wi="26" he="8" img-content="math" img-format="tif" inline="yes"/></maths> are directions of said virtual loudspeakers, <i>O</i> = (<i>N</i> + 1)<sup>2</sup> is the number of HOA coefficient sequences, and <i>K</i> is a ratio between the squared Euclidean norm ∥Ψ∥<sup>2</sup><sub>2</sub> of said mode matrix and <i>O</i>.</li></ul></p><heading id="h0004"><u>Brief description of drawings</u></heading><p id="p0013" num="0013">Exemplary embodiments of the invention are described with reference to the accompanying drawings, which show in:
<dl id="dl0001" compact="compact"><dt>Fig. 1</dt><dd>HOA compressor;</dd><dt>Fig. 2</dt><dd>HOA decompressor;</dd><dt>Fig. 3</dt><dd>Scaling values <i>K</i> for virtual directions <i><b>Ω</b><sub>j</sub></i><sup>(<i>N</i>)</sup>, 1 ≤ <i>j</i> ≤ <i>O</i>, for HOA orders <i>N</i> = 1, ...,29;</dd><dt>Fig. 4</dt><dd>Euclidean norms of inverse mode matrices <b><i>Ψ</i></b><sup>-1</sup> for virtual directions Ω<sub>MiN,<i>d</i></sub>, <i>d</i> = 1,...,<i>O</i><sub>MIN</sub> for HOA orders<!-- EPO <DP n="9"> --> <i>N</i><sub>MIN</sub> = 1, ...,9;</dd><dt>Fig. 5</dt><dd>Determination of maximally allowed magnitude <i>γ</i><sub>dB</sub> of signals of virtual loudspeakers at positions <i><b>Ω</b><sub>j</sub></i><sup>(<i>N</i>)</sup>, 1 ≤ <i>j</i> ≤ <i>0,</i> where <i>0</i> = (<i>N</i> + 1)<sup>2</sup>;</dd><dt>Fig. 6</dt><dd>Spherical coordinate system.</dd></dl></p><heading id="h0005"><u>Description of embodiments</u></heading><p id="p0014" num="0014">Even if not explicitly described, the following embodiments may be employed in any combination or sub-combination.</p><p id="p0015" num="0015">In the following the principle of HOA compression and decompression is presented in order to provide a more detailed context in which the above-mentioned problem occurs. The basis for this presentation is the processing described in the MPEG-H 3D audio document ISO/IEC JTC1/SC29/WG11 N14264, see also <patcit id="pcit0005" dnum="EP2665208A1"><text>EP 2665208 A1</text></patcit>, <patcit id="pcit0006" dnum="EP13305558A"><text>EP 13305558.2</text></patcit> and <patcit id="pcit0007" dnum="EP2743922A1"><text>EP 2743922 A1</text></patcit>. In N14264 the 'directional component' is extended to a 'predominant sound component'. As the directional component, the predominant sound component is assumed to be partly represented by directional signals, meaning monaural signals with a corresponding direction from which they are assumed to imping on the listener, together with some prediction parameters to predict portions of the original HOA representation from the directional signals. Additionally, the predominant sound component is supposed to be represented by 'vector based signals', meaning monaural signals with a corresponding vector which defines the directional distribution of the vector based signals.</p><heading id="h0006"><i>HOA compression</i></heading><p id="p0016" num="0016">The overall architecture of the HOA compressor described in <patcit id="pcit0008" dnum="EP13305558A"><text>EP 13305558.2</text></patcit> is illustrated in <figref idrefs="f0001">Fig. 1</figref>. It has a spatial HOA<!-- EPO <DP n="10"> --> encoding part depicted in <figref idrefs="f0001">Fig. 1A</figref> and a perceptual and source encoding part depicted in <figref idrefs="f0001">Fig. 1B</figref>. The spatial HOA encoder provides a first compressed HOA representation consisting of I signals together with side information describing how to create an HOA representation thereof. In perceptual and side information source coders the I signals are perceptually encoded and the side information is subjected to source encoding, before multiplexing the two coded representations.</p><heading id="h0007"><i>Spatial HOA encoding</i></heading><p id="p0017" num="0017">In a first step, a current <i>k</i>-th frame <i>C</i>(<i>k</i>) of the original HOA representation is input to a direction and vector estimation processing step or stage 11, which is assumed to provide the tuple sets <i>M</i><sub>DIR</sub>(k) and <i>M</i><sub>VEC</sub>(<i>k</i>). The tuple set <i>M</i><sub>DIR</sub>(k) consists of tuples of which the first element denotes the index of a directional signal and the second element denotes the respective quantised direction. The tuple set <i>M</i><sub>VEC</sub>(<i>k</i>) consists of tuples of which the first element indicates the index of a vector based signal and the second element denotes the vector defining the directional distribution of the signals, i.e. how the HOA representation of the vector based signal is computed.<br/>
Using both tuple sets <i>M</i><sub>DIR</sub>(<i>k</i>) and <i>M</i><sub>VEC</sub>(<i>k</i>), the initial HOA frame <b><i>C</i></b>(<i>k</i>) is decomposed in a HOA decomposition step or stage 12 into the frame <b><i>X</i></b><sub>PS</sub>(<i>k</i> - 1) of all predominant sound (i.e. directional and vector based) signals and the frame <b><i>C</i></b><sub>AMB</sub>(<i>k</i> - 1) of the ambient HOA component. Note the delay of one frame which is due to overlap-add processing in order to avoid blocking artefacts. Furthermore, the HOA decomposition step/ stage 12 is assumed to output some prediction parameters ζ(<i>k</i> - 1) describing how to predict portions of the original HOA representation from the directional signals, in order to<!-- EPO <DP n="11"> --> enrich the predominant sound HOA component. Additionally a target assignment vector ν<sub>A,T</sub>(<i>k</i> - 1) containing information about the assignment of predominant sound signals, which were determined in the HOA Decomposition processing step or stage 12, to the I available channels is assumed to be provided. The affected channels can be assumed to be occupied, meaning they are not available to transport any coefficient sequences of the ambient HOA component in the respective time frame.</p><p id="p0018" num="0018">In the ambient component modification processing step or stage 13 the frame C<sub>AMB</sub>(<i>k</i> - 1) of the ambient HOA component is modified according to the information provided by the target assignment vector <i>v<sub>A,T</sub>(k - 1).</i> In particular, it is determined which coefficient sequences of the ambient HOA component are to be transmitted in the given I channels, depending (amongst other aspects) on the information (contained in the target assignment vector ν<sub>A,T</sub>(<i>k</i> - 1)) about which channels are available and not already occupied by predominant sound signals. Additionally, a fade-in and fade-out of coefficient sequences is performed if the indices of the chosen coefficient sequences vary between successive frames.<br/>
Furthermore, it is assumed that the first <i>O</i><sub>MIN</sub> coefficient sequences of the ambient HOA component <b>C</b><sub>AMB</sub>(<i>k</i> -2) are always chosen to be perceptually coded and transmitted, where <i>O</i><sub>MIN</sub> = (<i>N</i><sub>MIN</sub> + 1)<sup>2</sup> with <i>N</i><sub>MIN</sub> ≤ <i>N</i> being typically a smaller order than that of the original HOA representation. In order to de-correlate these HOA coefficient sequences, they can be transformed in step/stage 13 to directional signals (i.e. general plane wave functions) impinging from some predefined directions Ω<sub>MIN</sub>,<i><sub>d</sub></i>, <i>d</i> = 1, ..., <i>O</i><sub>MIN</sub>.<br/>
Along with the modified ambient HOA component <b><i>C</i></b><sub>M,A</sub>(<i>k</i> - 1) a temporally predicted modified ambient HOA component <b><i>C</i></b><sub>P,M,A</sub>(<i>k-</i>1) is computed in step/stage 13 and is used in gain control<!-- EPO <DP n="12"> --> processing steps or stages 15, 151 in order to allow a reasonable look-ahead, wherein the information about the modification of the ambient HOA component is directly related to the assignment of all possible types of signals to the available channels in channel assignment step or stage 14. The final information about that assignment is assumed to be contained in the final assignment vector <i>v</i><sub>A</sub>(<i>k</i> - 2). In order to compute this vector in step/stage 13, information contained in the target assignment vector <i>v</i><sub>A,T</sub>(<i>k</i> - 1) is exploited.<br/>
The channel assignment in step/stage 14 assigns with the information provided by the assignment vector <i>v</i><sub>A</sub>(<i>k</i> - 2) the appropriate signals contained in frame <b><i>X</i></b><sub>PS</sub>(<i>k</i> - 2) and that contained in frame <b><i>C</i></b><sub>M,A</sub>(<i>k</i> - 2) to the <i>I</i> available channels, yielding the signal frames <i><b>y</b><sub>i</sub></i>(<i>k</i> - 2), <i>i</i> = 1, ..., <i>I</i>. Further, appropriate signals contained in frame <b><i>X</i></b>PS(<i>k</i> - 1) and in frame <b><i>C</i></b><sub>P,AMB</sub>(<i>k</i> - 1) are also assigned to the <i>I</i> available channels, yielding the predicted signal frames <b><i>y</i></b><sub>P,<i>i</i></sub>(<i>k</i> - 1), <i>i</i> = 1,..., <i>I</i>.<br/>
Each of the signal frames <i><b>y</b><sub>i</sub></i>(<i>k</i> - 2), <i>i</i> = 1, ..., <i>I</i> is finally processed by the gain control 15, 151 resulting in exponents <i>e<sub>i</sub></i>(<i>k</i> - 2) and exception flags β<i><sub>i</sub></i>(<i>k</i> - 2), <i>i</i> = 1, ..., <i>I</i> and in signals <i><b>z</b><sub>i</sub></i>(<i>k</i> - 2), <i>i</i> = 1,..., <i>I</i>, in which the signal gain is smoothly modified such as to achieve a value range that is suitable for the perceptual encoder steps or stages 16. Steps/stages 16 output corresponding encoded signal frames <img id="ib0011" file="imgb0011.tif" wi="4" he="4" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 2), <i>i</i> = 1, ..., <i>I</i>. The predicted signal frames <b><i>y</i></b><sub>P,<i>i</i></sub>(<i>k</i> - 1), <i>i</i> = 1, ..., <i>I</i> allow a kind of look-ahead in order to avoid severe gain changes between successive blocks. The side information data <i>M</i><sub>DIR</sub>(<i>k</i> - 1), <i>M</i><sub>VEC</sub>(<i>k</i> - 1), <i>e<sub>i</sub></i>(<i>k</i> - 2), <i>β</i><sub>i</sub>(<i>k</i> - 2), ζ(<i>k</i> - 1) and <i>v</i><sub>A</sub>(<i>k</i> - 2) are source coded in side information source coder step or stage 17, resulting in encoded side information frame <img id="ib0012" file="imgb0012.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> <i>(k -2).</i> In a multiplexer 18 the encoded signals <img id="ib0013" file="imgb0013.tif" wi="4" he="4" img-content="character" img-format="tif" inline="yes"/> (<i>k -</i> 2) of frame (<i>k</i> - 2) and<!-- EPO <DP n="13"> --> the encoded side information data <img id="ib0014" file="imgb0014.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 2) for this frame are combined, resulting in output frame <img id="ib0015" file="imgb0015.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 2).</p><p id="p0019" num="0019">In a spatial HOA decoder the gain modifications in steps/ stages 15, 151 are assumed to be reverted by using the gain control side information, consisting of the exponents <i>e<sub>i</sub></i>(<i>k</i> - 2) and the exception flags β<i><sub>i</sub></i>(<i>k</i> - 2), <i>i</i> = 1, ..., <i>I</i>.</p><heading id="h0008"><i>HOA decompression</i></heading><p id="p0020" num="0020">The overall architecture of the HOA decompressor described in EP 13305558.2 is illustrated in <figref idrefs="f0002">Fig. 2</figref>. It consists of the counterparts of the HOA compressor components, which are arranged in reverse order and include a perceptual and source decoding part depicted in <figref idrefs="f0002">Fig. 2A</figref> and a spatial HOA decoding part depicted in <figref idrefs="f0002">Fig. 2B</figref>.<br/>
In the perceptual and source decoding part (representing a perceptual and side info source decoder) a demultiplexing step or stage 21 receives input frame <img id="ib0016" file="imgb0016.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>) from the bit stream and provides the perceptually coded representation<img id="ib0017" file="imgb0017.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>), <i>i</i> = 1,..., <i>I</i> of the <i>I</i> signals and the coded side information data <img id="ib0018" file="imgb0018.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>) describing how to create an HOA representation thereof. The <img id="ib0019" file="imgb0019.tif" wi="4" he="4" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>) signals are perceptually decoded in a perceptual decoder step or stage 22, resulting in decoded signals <b><i><o>ẑ</o></i></b><sub>i</sub>(<i>k</i>), <i>i</i> = 1,..., <i>I</i>. The coded side information data <img id="ib0020" file="imgb0020.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>) are decoded in a side information source decoder step or stage 23, resulting in data sets <i>M</i><sub>DIR</sub>(<i>k</i> + 1), <i>M</i><sub>VEC</sub> (<i>K</i>+1), exponents <i>e<sub>i</sub></i>(<i>k</i>), exception flags β<i><sub>i</sub></i>(<i>k</i>), prediction parameters ζ(<i>k</i> + 1) and an assignment vector <b><i>v</i></b><sub>AMB</sub>,<sub>ASSIGN</sub>(<i>k</i>). Regarding the difference between <b><i>v</i></b><sub>A</sub> and <b><i>v</i></b><sub>AMB,ASSIGN</sub>, see the above-mentioned MPEG document N14264.</p><heading id="h0009"><i>Spatial HOA decoding</i></heading><p id="p0021" num="0021">In the spatial HOA decoding part, each of the perceptually decoded signals <b><i>ẑ<sub>i</sub></i></b>(<i>k</i>), <i>i</i> = 1,...,<i>I</i>, is input to an inverse gain<!-- EPO <DP n="14"> --> control processing step or stage 24, 241 together with its associated gain correction exponent <i>e<sub>i</sub></i>(<i>k</i>) and gain correction exception flag β<i><sub>i</sub></i>(<i>k</i>). The <i>i</i>-th inverse gain control processing step/stage provides a gain corrected signal frame <b><i>ŷ</i></b><i><sub>i</sub></i>(<i>k</i>).<br/>
All <i>I</i> gain corrected signal frames <b><i>ŷ</i></b><i><sub>i</sub></i>(<i>k</i>), <i>i</i> = 1,...,<i>I</i>, are fed together with the assignment vector <b><i>v</i></b><sub>AMB,ASSIGN</sub>(<i>k</i>) and the tuple sets <i>M</i><sub>DIR</sub>(<i>k</i> + 1) and <i>M</i><sub>VEC</sub>(<i>k</i> + 1) to a channel reassignment step or stage 25, cf. the above-described definition of the tuple sets <i>M</i><sub>DIR</sub>(<i>k</i> + 1) and <i>M</i><sub>VEC</sub>(<i>k</i> + 1). The assignment vector <b><i>v</i></b><sub>AMB</sub>,<sub>ASSIGN</sub>(<i>k</i>) consists of <i>I</i> components which indicate for each transmission channel whether it contains a coefficient sequence of the ambient HOA component and which one it contains. In the channel reassignment step/stage 25 the gain corrected signal frames <b><i>ŷ</i></b><i><sub>i</sub></i>(<i>k</i>) are re-distributed in order to reconstruct the frame <b><i>X̂</i></b><sub>PS</sub>(<i>k</i>) of all predominant sound signals (i.e. all directional and vector based signals) and the frame <b><i>C</i></b><sub>I,AMB</sub>(<i>k</i>) of an intermediate representation of the ambient HOA component. Additionally, the set <i>J</i><sub>AMB,ACT</sub>(<i>k</i>) of indices of coefficient sequences of the ambient HOA component active in the <i>k</i>-th frame, and the data sets <img id="ib0021" file="imgb0021.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1), <img id="ib0022" file="imgb0022.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1) and<img id="ib0023" file="imgb0023.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1) of coefficient indices of the ambient HOA component, which have to be enabled, disabled and to remain active in the (<i>k</i> - 1)-th frame, are provided.<br/>
In a predominant sound synthesis step or stage 26 the HOA representation of the predominant sound component <b><i>Ĉ</i></b><sub>PS</sub>(<i>k</i> - 1) is computed from the frame <b><i>X̂</i></b><i><sub>PS</sub></i>(<i>k</i>) of all predominant sound signals using the tuple set <i>M</i><sub>DIR</sub>(<i>k</i> + 1), the set ζ(<i>k</i> + 1) of prediction parameters, the tuple set <i>M</i><sub>VEC</sub>(<i>k</i> + 1) and the data sets <img id="ib0024" file="imgb0024.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1), <img id="ib0025" file="imgb0025.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1) and <img id="ib0026" file="imgb0026.tif" wi="6" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i> - 1).<br/>
In an ambience synthesis step or stage 27 the ambient HOA component frame <b><i>Ĉ</i></b><sub>AMB</sub>(<i>k</i> - 1) is created from the frame <b><i>C</i></b><sub>I,AMB</sub>(<i>k</i>) of the intermediate representation of the ambient HOA component,<!-- EPO <DP n="15"> --> using the set <img id="ib0027" file="imgb0027.tif" wi="17" he="5" img-content="character" img-format="tif" inline="yes"/> (<i>k</i>) of indices of coefficient sequences of the ambient HOA component which are active in the <i>k</i>-th frame. The delay of one frame is introduced due to the synchronisation with the predominant sound HOA component. Finally in an HOA composition step or stage 28 the ambient HOA component frame <b><i>Ĉ</i></b><sub>AMB</sub>(<i>k</i> - 1) and the frame <b><i>Ĉ</i></b><sub>PS</sub>(<i>k</i>- 1) of predominant sound HOA component are superposed so as to provide the decoded HOA frame <b><i>Ĉ</i></b>(<i>k</i> - 1).<br/>
Thereafter the spatial HOA decoder creates from the <i>I</i> signals and the side information the reconstructed HOA representation.<br/>
In case at encoding side the ambient HOA component was transformed to directional signals, that transform is inversed at decoder side in step/stage 27.</p><p id="p0022" num="0022">The potential maximum gains of the signals before the gain control processing steps/stages 15, 151 within the HOA compressor are highly dependent on the value range of the input HOA representation. Hence, at first a meaningful value range for the input HOA representation is defined, followed by concluding on the potential maximum gains of the signals before entering the gain control processing steps/stages.</p><heading id="h0010"><i>Normalisation of the input HOA representation</i></heading><p id="p0023" num="0023">For using the inventive processing a normalisation of the (total) input HOA representation signal is to be carried out before. For the HOA compression a frame-wise processing is performed, where the <i>k</i>-th frame <b><i>C</i></b>(<i>k</i>) of the original input HOA representation is defined with respect to the vector <b>c</b>(<i>t</i>) of time-continuous HOA coefficient sequences specified in equation (54) in section Basics of Higher Order Ambisonics as <maths id="math0011" num="(1)"><math display="block"><mi mathvariant="bold-italic">C</mi><mfenced><mi>k</mi></mfenced><mo>:</mo><mo>=</mo><mfenced open="[" close="]"><mtable><mtr><mtd><mi mathvariant="bold-italic">c</mi><mo>⁢</mo><mfenced separators=""><mfenced separators=""><mi mathvariant="italic">kL</mi><mo>+</mo><mn>1</mn></mfenced><mo>⁢</mo><msub><mi>T</mi><mi mathvariant="normal">S</mi></msub></mfenced></mtd><mtd><mtable><mtr><mtd><mrow><mi mathvariant="bold-italic">c</mi><mo>⁢</mo><mfenced separators=""><mfenced separators=""><mi mathvariant="italic">kL</mi><mo>+</mo><mn>2</mn></mfenced><mo>⁢</mo><msub><mi>T</mi><mi mathvariant="normal">S</mi></msub></mfenced></mrow></mtd><mtd><mtable><mtr><mtd><mrow><mo>…</mo></mrow></mtd><mtd><mi mathvariant="bold-italic">c</mi><mo>⁢</mo><mfenced separators=""><mfenced separators=""><mi mathvariant="italic">k</mi><mo>+</mo><mn>1</mn></mfenced><mo>⁢</mo><mi>L</mi><mo>⁢</mo><msub><mi>T</mi><mi mathvariant="normal">S</mi></msub></mfenced></mtd></mtr></mtable></mtd></mtr></mtable></mtd></mtr></mtable></mfenced><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><mi>O</mi><mo>×</mo><mi>L</mi></mrow></msup><mo>,</mo></math><img id="ib0028" file="imgb0028.tif" wi="150" he="15" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="16"> --> where <i>k</i> denotes the frame index, <i>L</i> the frame length (in samples), <i>O</i> = (<i>N</i> + 1)<sup>2</sup> the number of HOA coefficient sequences and <i>T</i><sub>S</sub> indicates the sampling period.<br/>
As mentioned in <patcit id="pcit0009" dnum="EP13305986A"><text>EP 13305986.5</text></patcit>, a meaningful normalisation of an HOA representation viewed from a practical perspective is not achieved by imposing constraints on the value range of the individual HOA coefficient sequences <maths id="math0012" num=""><math display="inline"><msubsup><mi>c</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0029" file="imgb0029.tif" wi="15" he="9" img-content="math" img-format="tif" inline="yes"/></maths> since these time-domain functions are not the signals that are actually played by loudspeakers after rendering. Instead, it is more convenient to consider the 'equivalent spatial domain representation', which is obtained by rendering the HOA representation to <i>O</i> virtual loudspeaker signals <i>w<sub>j</sub></i>(<i>t</i>), 1 ≤ <i>j</i> ≤ <i>O</i>. The respective virtual loudspeaker positions are assumed to be expressed by means of a spherical coordinate system, where each position is assumed to lie on the unit sphere and to have a radius of '1'. Hence, the positions can be equivalently expressed by order dependent directions <i>Ω<sub>j</sub></i><sup>(<i>N</i>)</sup> = (<i>θ</i><sub>j</sub><sup>(<i>N</i>)</sup>,φ<i><sub>j</sub></i><sup>(<i>N</i>)</sup>, 1 ≤ <i>j</i> ≤ 0, where <i>θ<sub>j</sub></i><sup>(<i>N</i>)</sup> and <i>φ<sub>j</sub></i><sup>(<i>N</i>)</sup> denote the inclinations and azimuths, respectively (see also <figref idrefs="f0004">Fig. 6</figref> and its description for the definition of the spherical coordinate system). These directions should be distributed on the unit sphere as uniform as possible, see e.g. <nplcit id="ncit0002" npl-type="s"><text>J. Fliege, U. Maier, "A two-stage approach for computing cubature formulae for the sphere", Technical report, Fachbereich Mathematik, University of Dortmund, 1999. Node numbers are found at http://www.mathematik.uni-dortmund.de/lsx/research/projects /fliege/nodes/nodes.html</text></nplcit> for the computation of specific directions. These positions are in general dependent on the kind of definition of 'uniform distribution on the sphere', and hence, are not unambiguous.<br/>
The advantage of defining value ranges for virtual loudspeaker signals over defining value ranges for HOA coefficient sequences is that the value range for the former can<!-- EPO <DP n="17"> --> be set intuitively equally to the interval [-1,1[ as is the case for conventional loudspeaker signals assuming PCM representation. This leads to a spatially uniformly distributed quantisation error, such that advantageously the quantisation is applied in a domain that is relevant with respect to actual listening. An important aspect in this context is that the number of bits per sample can be chosen to be as low as it typically is for conventional loudspeaker signals, i.e. 16, which increases the efficiency compared to the direct quantisation of HOA coefficient sequences, where usually a higher number of bits (e.g. 24 or even 32) per sample is required.<br/>
For describing the normalisation process in the spatial domain in detail, all virtual loudspeaker signals are summarised in a vector as <maths id="math0013" num="(2)"><math display="block"><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>:</mo><mo>=</mo><msup><mfenced open="[" close="]" separators=""><msub><mi>w</mi><mn>1</mn></msub><mfenced><mi>t</mi></mfenced><mspace width="1em"/><mo>…</mo><mspace width="1em"/><msub><mi>w</mi><mi>O</mi></msub><mfenced><mi>t</mi></mfenced></mfenced><mi>T</mi></msup><mo>,</mo></math><img id="ib0030" file="imgb0030.tif" wi="110" he="9" img-content="math" img-format="tif"/></maths> where (•)<i><sup>T</sup></i> denotes transposition. Denoting the mode matrix with respect to the virtual directions Ω<i><sub>j</sub></i><sup>(<i>N</i>)</sup>, 1 ≤ <i>j</i> ≤ <i>O</i>, by Ψ, which is defined by <maths id="math0014" num="(3)"><math display="block"><mi mathvariant="bold-italic">Ψ</mi><mo>:</mo><mo>=</mo><mfenced open="[" close="]" separators=""><msub><mi>S</mi><mn>1</mn></msub><mspace width="1em"/><mo>…</mo><mspace width="1em"/><msub><mi>S</mi><mi>O</mi></msub></mfenced><mo>∈</mo><msup><mi mathvariant="double-struck">R</mi><mrow><mi>O</mi><mo>×</mo><mi>O</mi></mrow></msup></math><img id="ib0031" file="imgb0031.tif" wi="113" he="8" img-content="math" img-format="tif"/></maths> with <maths id="math0015" num="(4)"><math display="block"><msub><mi>S</mi><mi>j</mi></msub><mo>:</mo><mo>=</mo></math><img id="ib0032" file="imgb0032.tif" wi="151" he="10" img-content="math" img-format="tif"/></maths> <maths id="math0016" num=""><math display="inline"><msup><mfenced open="[" close="]"><mtable><mtr><mtd><msubsup><mi>S</mi><mn>0</mn><mn>0</mn></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd><mtd><msubsup><mi>S</mi><mn>1</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd><mtd><msubsup><mi>S</mi><mn>1</mn><mn>0</mn></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd><mtd><msubsup><mi>S</mi><mn>1</mn><mn>1</mn></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd><mtd><mo>…</mo></mtd><mtd><msubsup><mi>S</mi><mi>N</mi><mrow><mi>N</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd><mtd><msubsup><mi>S</mi><mi>N</mi><mi>N</mi></msubsup><mfenced><msup><msub><mi mathvariant="bold-italic">Ω</mi><mi>j</mi></msub><mfenced><mi>N</mi></mfenced></msup></mfenced></mtd></mtr></mtable></mfenced><mi>T</mi></msup><mo>,</mo></math><img id="ib0033" file="imgb0033.tif" wi="152" he="9" img-content="math" img-format="tif" inline="yes"/></maths> the rendering process can be formulated as a matrix multiplication <maths id="math0017" num="(5)"><math display="block"><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><msup><mfenced><mi mathvariant="bold-italic">Ψ</mi></mfenced><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>⋅</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mn>.</mn></math><img id="ib0034" file="imgb0034.tif" wi="132" he="9" img-content="math" img-format="tif"/></maths><br/>
Using these definitions, a reasonable requirement on the virtual loudspeaker signals is: <maths id="math0018" num="(6)"><math display="block"><mrow><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>=</mo><munder><mi mathvariant="italic">max</mi><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi></mrow></munder><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced></mfenced><mo>⁢</mo><mn>1</mn><mspace width="1em"/><mo>∀</mo><mi>l</mi></mrow><mo>,</mo></math><img id="ib0035" file="imgb0035.tif" wi="117" he="13" img-content="math" img-format="tif"/></maths> which means that the magnitude of each virtual loudspeaker signal is required to lie within the range [-1,1[ . A time instant of time <i>t</i> is represented by a sample index <i>l</i> and a sample period <i>T</i><sub>S</sub> of the sample values of said HOA data frames.</p><p id="p0024" num="0024">The total power of the loudspeaker signals consequently satisfies the condition <maths id="math0019" num="(7)"><math display="block"><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>=</mo><mstyle displaystyle="false"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>O</mi></munderover></mstyle><msup><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced></mfenced><mn>2</mn></msup><mo>≤</mo><mi>O</mi><mspace width="2em"/><mo>∀</mo><mi>l</mi><mn>.</mn></math><img id="ib0036" file="imgb0036.tif" wi="110" he="11" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="18"> --></p><p id="p0025" num="0025">The rendering and the normalisation of the HOA data frame representation is carried out upstream of the input <b><i>C</i></b>(<i>k</i>) of <figref idrefs="f0001">Fig. 1A</figref>.</p><p id="p0026" num="0026"><i>Consequences for the signal value range before gain control</i> Assuming that the normalisation of the input HOA representation is performed according to the description in section <i>Normalisation of the input HOA representation,</i> the value range of the signals <i><b>y</b><sub>i</sub></i>, <i>i</i> = 1,..., <i>I</i>, which are input to the gain control processing unit 15, 151 in the HOA compressor, is considered in the following. These signals are created by the assignment to the available <i>I</i> channels of one or more of the HOA coefficient sequences, or predominant sound signals <b><i>x</i></b><sub>PS,<i>d</i></sub>, <i>d</i> = 1,...,<i>D</i>, and/or particular coefficient sequences of the ambient HOA component <b><i>c</i></b><sub>AMB,<i>n</i></sub>, <i>n</i> = 1, ..., 0, to part of which a spatial transform is applied. Hence, it is necessary to analyse the possible value range of these mentioned different signal types under the normalisation assumption in equation (6). Since all kind of signals are intermediately computed from the original HOA coefficient sequences, a look at their possible value ranges is taken.<br/>
The case in which only one or more HOA coefficient sequences are contained in the I channels is not depicted in <figref idrefs="f0001">Fig. 1A</figref> and <figref idrefs="f0002">Fig. 2B</figref>, i.e. in such case the HOA decomposition, ambient component modification and the corresponding synthesis blocks are not required.</p><p id="p0027" num="0027"><i>Consequences for the value range of the HOA representation</i> The time-continuous HOA representation is obtained from the virtual loudspeaker signals by <maths id="math0020" num="(8)"><math display="block"><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><mi mathvariant="bold-italic">Ψ</mi><mo>⁢</mo><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0037" file="imgb0037.tif" wi="85" he="8" img-content="math" img-format="tif"/></maths> which is the inverse operation to that in equation (5). Hence, the total power of all HOA coefficient sequences is bounded as follows:<!-- EPO <DP n="19"> --> <maths id="math0021" num="(9)"><math display="block"><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>≤</mo><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>⋅</mo><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>≤</mo><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>⋅</mo><mi>O</mi><mo>,</mo></math><img id="ib0038" file="imgb0038.tif" wi="136" he="10" img-content="math" img-format="tif"/></maths> using equations (8) and (7) .<br/>
Under the assumption of N3D normalisation of the Spherical Harmonics functions, the squared Euclidean norm of the mode matrix can be written by <maths id="math0022" num="(10a)"><math display="block"><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>=</mo><mi>K</mi><mo>⋅</mo><mi>O</mi><mo>,</mo></math><img id="ib0039" file="imgb0039.tif" wi="100" he="10" img-content="math" img-format="tif"/></maths> where <maths id="math0023" num="(10b)"><math display="block"><mi>K</mi><mo>=</mo><mfrac><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mi>O</mi></mfrac></math><img id="ib0040" file="imgb0040.tif" wi="149" he="11" img-content="math" img-format="tif"/></maths> denotes the ratio between the squared Euclidean norm of the mode matrix and the number <i>O</i> of HOA coefficient sequences. This ratio is dependent on the specific HOA order <i>N</i> and the specific virtual loudspeaker directions <maths id="math0024" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>j</mi><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo></math><img id="ib0041" file="imgb0041.tif" wi="12" he="10" img-content="math" img-format="tif" inline="yes"/></maths> 1 ≤ <i>j</i> ≤ 0, which can be expressed by appending to the ratio the respective parameter list as follows: <maths id="math0025" num="(10c)"><math display="block"><mi>K</mi><mo>=</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mn>.</mn></math><img id="ib0042" file="imgb0042.tif" wi="117" he="10" img-content="math" img-format="tif"/></maths> <figref idrefs="f0003">Fig. 3</figref> shows the values of <i>K</i> for virtual directions Ω<i><sub>j</sub></i><sup>(<i>N</i>)</sup>, 1 ≤ <i>j</i> ≤ <i>0</i>, according to the above-mentioned Fliege et al. article for HOA orders <i>N</i> = 1, ...,29.</p><p id="p0028" num="0028">Combining all previous arguments and considerations provides an upper bound for the magnitude of HOA coefficient sequences as follows: <maths id="math0026" num="(11)"><math display="block"><mrow><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mo>≤</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi></mrow><mo>,</mo></math><img id="ib0043" file="imgb0043.tif" wi="123" he="11" img-content="math" img-format="tif"/></maths> wherein the first inequality results directly from the norm definitions.</p><p id="p0029" num="0029">It is important to note that the condition in equation (6) implies the condition in equation (11), but the opposite does <i>not</i> hold, i.e. equation (11) does <i>not</i> imply equation (6) .</p><p id="p0030" num="0030">A further important aspect is that under the assumption of nearly uniformly distributed virtual loudspeaker positions the column vectors of the mode matrix Ψ, which represent the mode vectors with respect to the virtual loudspeaker positions, are nearly orthogonal to each other and have an Euclidean<!-- EPO <DP n="20"> --> norm of <i>N</i> + 1 each. This property means that the spatial transform nearly preserves the Euclidean norm except for a multiplicative constant, i.e. <maths id="math0027" num="(12)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mo>≈</mo><mfenced separators=""><mi>N</mi><mo>+</mo><mn>1</mn></mfenced><mo>⁢</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>.</mn></math><img id="ib0044" file="imgb0044.tif" wi="121" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0031" num="0031">The true norm ∥<b><i>c</i></b>(<i>lT</i><sub>S</sub>)∥<sub>2</sub> differs the more from the approximation in equation (12) the more the orthogonality assumption on the mode vectors is violated.</p><p id="p0032" num="0032"><i>Consequences for the value range of predominant sound signals</i> Both types of predominant sound signals (directional and vector-based) have in common that their contribution to the HOA representation is described by a single vector <b><i>v</i></b><sub>1</sub> ∈<img id="ib0045" file="imgb0045.tif" wi="7" he="5" img-content="character" img-format="tif" inline="yes"/> with Euclidean norm of <maths id="math0028" num="(13)"><math display="block"><mi>N</mi><mo>+</mo><mn>1</mn><mo>,</mo><mspace width="1em"/><mi>i</mi><mn>.</mn><mi mathvariant="normal">e</mi><mn>.</mn><mspace width="1em"/><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">v</mi><mn>1</mn></msub><mo>‖</mo></mrow><mn>2</mn></msub><mo>=</mo><mi>N</mi><mo>+</mo><mn>1.</mn></math><img id="ib0046" file="imgb0046.tif" wi="106" he="7" img-content="math" img-format="tif"/></maths> In case of the directional signal this vector corresponds to the mode vector with respect to a certain signal source direction Ω<sub>S,1</sub>, i.e. <maths id="math0029" num="(15)"><math display="block"><mtable><mtr><mtd><msub><mi mathvariant="bold-italic">v</mi><mn>1</mn></msub></mtd><mtd columnalign="left"><mo>=</mo><mi mathvariant="bold-italic">S</mi><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd columnalign="left"><mo>:</mo><mo>=</mo><msup><mfenced open="[" close="]"><mtable><mtr><mtd><msubsup><mi>S</mi><mn>0</mn><mn>0</mn></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd><mtd><mtable><mtr><mtd><mrow><msubsup><mi>S</mi><mn>1</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mrow></mtd><mtd><msubsup><mi>S</mi><mn>1</mn><mn>0</mn></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd><mtd><msubsup><mi>S</mi><mn>1</mn><mn>1</mn></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd><mtd><mtable><mtr><mtd><mrow><mo>…</mo></mrow></mtd><mtd><msubsup><mi>S</mi><mi>N</mi><mrow><mi>N</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd><mtd><msubsup><mi>S</mi><mi>N</mi><mi>N</mi></msubsup><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd></mtr></mtable></mtd></mtr></mtable></mtd></mtr></mtable></mfenced><mi>T</mi></msup></mtd></mtr></mtable></math><img id="ib0047" file="imgb0047.tif" wi="165" he="18" img-content="math" img-format="tif"/></maths></p><p id="p0033" num="0033">This vector describes by means of an HOA representation a directional beam into the signal source direction Ω<sub>S,1</sub>. In the case of a vector-based signal, the vector <b><i>v</i></b><sub>1</sub> is not constrained to be a mode vector with respect to any direction, and hence may describe a more general directional distribution of the monaural vector based signal.</p><p id="p0034" num="0034">In the following is considered the general case of <i>D</i> predominant sound signals <i><b>x</b><sub>d</sub></i>(<i>t</i>), <i>d</i> = 1,...,<i>D</i>, which can be collected in the vector x(t) according to <maths id="math0030" num="(16)"><math display="block"><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><msup><mfenced open="[" close="]"><mtable><mtr><mtd><msub><mi>x</mi><mn>1</mn></msub><mfenced><mi>t</mi></mfenced></mtd><mtd><mtable><mtr><mtd><mrow><msub><mi>x</mi><mn>2</mn></msub><mfenced><mi>t</mi></mfenced></mrow></mtd><mtd><mtable><mtr><mtd><mo>…</mo></mtd><mtd><msub><mi>x</mi><mi>D</mi></msub></mtd></mtr></mtable><mfenced><mi>t</mi></mfenced></mtd></mtr></mtable></mtd></mtr></mtable></mfenced><mi>T</mi></msup><mn>.</mn></math><img id="ib0048" file="imgb0048.tif" wi="130" he="8" img-content="math" img-format="tif"/></maths> These signals have to be determined based on the matrix <maths id="math0031" num="(17)"><math display="block"><mi mathvariant="bold-italic">V</mi><mo>:</mo><mo>=</mo><mfenced open="[" close="]"><mtable><mtr><mtd><msub><mi>v</mi><mn>1</mn></msub></mtd><mtd><mtable><mtr><mtd><mrow><msub><mi>v</mi><mn>2</mn></msub></mrow></mtd><mtd><mtable><mtr><mtd><mrow><mo>…</mo></mrow></mtd><mtd><msub><mi>v</mi><mi>D</mi></msub></mtd></mtr></mtable></mtd></mtr></mtable></mtd></mtr></mtable></mfenced></math><img id="ib0049" file="imgb0049.tif" wi="114" he="8" img-content="math" img-format="tif"/></maths> which is formed of all vectors <i><b>v</b><sub>d</sub></i>, <i>d</i> = 1,...,<i>D</i>, representing the directional distribution of the monaural predominant<!-- EPO <DP n="21"> --> sound signals <i>x<sub>d</sub></i>(<i>t</i>), <i>d</i> = 1, ...,<i>D.</i></p><p id="p0035" num="0035">For a meaningful extraction of the predominant sound signals <b><i>x</i></b>(<i>t</i>) the following constraints are formulated:
<ol><li>a) Each predominant sound signal is obtained as a linear combination of the coefficient sequences of the original HOA representation, i.e. <maths id="math0032" num="(18)"><math display="block"><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><mi mathvariant="bold-italic">A</mi><mo>⋅</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0050" file="imgb0050.tif" wi="92" he="9" img-content="math" img-format="tif"/></maths> where <b><i>A</i></b> ∈ <img id="ib0051" file="imgb0051.tif" wi="11" he="5" img-content="character" img-format="tif" inline="yes"/> denotes the mixing matrix.</li><li>b) The mixing matrix <b><i>A</i></b> should be chosen such that its Euclidean norm does not exceed the value of '1', i.e. <maths id="math0033" num="(19)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">A</mi><mo>‖</mo></mrow><mn>2</mn></msub><mo>⁢</mo><mover><mo>≤</mo><mo>!</mo></mover><mo>⁢</mo><mn>1</mn><mo>,</mo></math><img id="ib0052" file="imgb0052.tif" wi="104" he="11" img-content="math" img-format="tif"/></maths><br/>
<i>and</i> such that the squared Euclidean norm (or equivalently power) of the residual between the original HOA representation and that of the predominant sound signals is not greater than the squared Euclidean norm (or equivalently power) of the original HOA representation, i.e. <maths id="math0034" num="(20)"><math display="block"><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>-</mo><mi mathvariant="bold-italic">V</mi><mo>⋅</mo><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mo>⁢</mo><mover><mo>≤</mo><mo>!</mo></mover><mo>⁢</mo><msup><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>2</mn></msup><mn>.</mn></math><img id="ib0053" file="imgb0053.tif" wi="121" he="11" img-content="math" img-format="tif"/></maths><br/>
By inserting equation (18) into equation (20) it can be seen that equation (20) is equivalent to the constraint <maths id="math0035" num="(21)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">I</mi><mo>-</mo><mi mathvariant="bold-italic">V</mi><mo>⋅</mo><mi mathvariant="bold-italic">A</mi><mo>‖</mo></mrow><mn>2</mn></msub><mo>⁢</mo><mover><mo>≤</mo><mo>!</mo></mover><mo>⁢</mo><mn>1</mn><mo>,</mo></math><img id="ib0054" file="imgb0054.tif" wi="107" he="11" img-content="math" img-format="tif"/></maths><br/>
where <b><i>I</i></b> denotes the identity matrix.<br/>
From the constraints in equation (18) and in (19) and from the compatibility of the Euclidean matrix and vector norms, an upper bound for the magnitudes of the predominant sound signals is found by <maths id="math0036" num="(22)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">x</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≈</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">x</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0055" file="imgb0055.tif" wi="116" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0037" num="(23)"><math display="block"><mo>≤</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">A</mi><mo>‖</mo></mrow><mn>2</mn></msub><mo>⁢</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0056" file="imgb0056.tif" wi="98" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0038" num="(24)"><math display="block"><mo>≤</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi><mo>,</mo></math><img id="ib0057" file="imgb0057.tif" wi="98" he="9" img-content="math" img-format="tif"/></maths><br/>
using equations (18) , (19) and (11). Hence, it is ensured that the predominant sound signals stay in the same range as the original HOA coefficient sequences (compare equation (11)), i.e. <maths id="math0039" num="(25)"><math display="block"><mrow><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">x</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi></mrow><mn>.</mn></math><img id="ib0058" file="imgb0058.tif" wi="145" he="11" img-content="math" img-format="tif"/></maths></li></ol><!-- EPO <DP n="22"> --></p><heading id="h0011"><i>Example for choice of mixing matrix</i></heading><p id="p0036" num="0036">An example of how to determine the mixing matrix satisfying the constraint (20) is obtained by computing the predominant sound signals such that the Euclidean norm of the residual after extraction is minimised, i.e. <maths id="math0040" num="(26)"><math display="block"><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><msub><mi>argmin</mi><mrow><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced></mrow></msub><mo>⁢</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">V</mi><mo>⋅</mo><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>-</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>.</mn></math><img id="ib0059" file="imgb0059.tif" wi="129" he="9" img-content="math" img-format="tif"/></maths> The solution to the minimisation problem in equation (26) is given by <maths id="math0041" num="(27)"><math display="block"><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><msup><mi mathvariant="bold-italic">V</mi><mo>+</mo></msup><mo>⁢</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0060" file="imgb0060.tif" wi="141" he="9" img-content="math" img-format="tif"/></maths> where (·)<sup>+</sup> indicates the Moore-Penrose pseudo-inverse. By comparison of equation (27) with equation (18) it follows that, in this case, the mixing matrix is equal to the Moore-Penrose pseudo inverse of the matrix <b><i>V</i></b>, i.e. <b><i>A</i></b> = <i>V</i><sup>+</sup>.</p><p id="p0037" num="0037">Nevertheless, matrix <b><i>V</i></b> still has to be chosen to satisfy the constraint (19), i.e. <maths id="math0042" num="(28)"><math display="block"><mrow><msub><mrow><mo>‖</mo><msup><mi mathvariant="bold-italic">V</mi><mo>+</mo></msup><mo>‖</mo></mrow><mn>2</mn></msub><mo>⁢</mo><mover><mo>≤</mo><mo>!</mo></mover><mo>⁢</mo><mn>1</mn></mrow><mn>.</mn></math><img id="ib0061" file="imgb0061.tif" wi="108" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0038" num="0038">In case of only directional signals, where matrix <b><i>V</i></b> is the mode matrix with respect to some source signal directions Ω<sub>S,<i>d</i></sub>, <i>d</i> = 1,...,<i>D,</i> i.e. <maths id="math0043" num="(29)"><math display="block"><mi mathvariant="bold-italic">V</mi><mo>=</mo><mfenced open="[" close="]"><mtable><mtr><mtd><mi mathvariant="bold-italic">S</mi><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>1</mn></mrow></msub></mfenced></mtd><mtd><mtable><mtr><mtd><mrow><mi mathvariant="bold-italic">S</mi><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mn>2</mn></mrow></msub></mfenced></mrow></mtd><mtd><mtable><mtr><mtd><mrow><mo>…</mo></mrow></mtd><mtd><mi mathvariant="bold-italic">S</mi><mfenced><msub><mi mathvariant="bold-italic">Ω</mi><mrow><mi mathvariant="normal">S</mi><mo>,</mo><mi>D</mi></mrow></msub></mfenced></mtd></mtr></mtable></mtd></mtr></mtable></mtd></mtr></mtable></mfenced><mo>,</mo></math><img id="ib0062" file="imgb0062.tif" wi="113" he="9" img-content="math" img-format="tif"/></maths> the constraint (28) can be satisfied by choosing the source signal directions Ω<sub>S,<i>d</i></sub>, <i>d</i> = 1,...,<i>D</i>, such that the distance of any two neighboring directions is not too small.</p><heading id="h0012"><i>Consequences for the value range of coefficient sequences of the ambient HOA component</i></heading><p id="p0039" num="0039">The ambient HOA component is computed by subtracting from the original HOA representation the HOA representation of the predominant sound signals, i.e. <maths id="math0044" num="(30)"><math display="block"><msub><mi mathvariant="bold-italic">c</mi><mi>AMB</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>-</mo><mi mathvariant="bold-italic">V</mi><mo>⋅</mo><mi mathvariant="bold-italic">x</mi><mfenced><mi>t</mi></mfenced><mn>.</mn></math><img id="ib0063" file="imgb0063.tif" wi="72" he="9" img-content="math" img-format="tif"/></maths> If the vector of predominant sound signals <b><i>x</i></b>(<i>t</i>) is determined according to the criterion (20), it can be concluded that <maths id="math0045" num="(31)"><math display="block"><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">c</mi><mi>AMB</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">c</mi><mi>AMB</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0064" file="imgb0064.tif" wi="138" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0046" num="(32)"><math display="block"><mover><mo>=</mo><mfenced><mn>30</mn></mfenced></mover><mo>⁢</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>-</mo><mi mathvariant="bold-italic">V</mi><mo>⋅</mo><mi mathvariant="bold-italic">x</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0065" file="imgb0065.tif" wi="113" he="11" img-content="math" img-format="tif"/></maths> <maths id="math0047" num="(33)"><math display="block"><mover><mo>≤</mo><mfenced><mn>20</mn></mfenced></mover><mo>⁢</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0066" file="imgb0066.tif" wi="113" he="13" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="23"> --> <maths id="math0048" num="(34)"><math display="block"><mover><mo>=</mo><mfenced><mn>11</mn></mfenced></mover><mo>⁢</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi><mn>.</mn></math><img id="ib0067" file="imgb0067.tif" wi="114" he="13" img-content="math" img-format="tif"/></maths></p><heading id="h0013"><i>Value range of spatially transformed coefficient sequences of the ambient HOA component</i></heading><p id="p0040" num="0040">A further aspect in the HOA compression processing proposed in <patcit id="pcit0010" dnum="EP2743922A1"><text>EP 2743922 A1</text></patcit> and in the above-mentioned MPEG document N14264 is that the first <i>O</i><sub>MIN</sub> coefficient sequences of the ambient HOA component are always chosen to be assigned to the transport channels, where <i>O</i><sub>MIN</sub> = (<i>N</i><sub>MIN</sub> + 1)<sup>2</sup> with <i>N</i><sub>MIN</sub> ≤ <i>N</i> being typically a smaller order than that of the original HOA representation. In order to de-correlate these HOA coefficient sequences, they can be transformed to virtual loudspeaker signals impinging from some predefined directions Ω<sub>MIN,<i>d</i></sub>, <i>d</i> = 1,...,<i>O</i><sub>MIN</sub> (in analogy to the concept described in section <i>Normalisation of the input HOA representation</i>). Defining the vector of all coefficient sequences of the ambient HOA component with order index <i>n</i> ≤ <i>N</i><sub>MIN</sub> by <b>c</b><sub>AMB,MIN</sub>(<i>t</i>) and the mode matrix with respect to the virtual directions Ω<sub>MIN,<i>d</i></sub>, <i>d</i> = 1,..., <i>O</i><sub>MIN</sub>, by Ψ <sub>MIN</sub>, the vector of all virtual loudspeaker signals (defined by) <b><i>w</i></b><sub>MIN</sub>(<i>t</i>) is obtained by <maths id="math0049" num="(35)"><math display="block"><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>⋅</mo><msub><mi mathvariant="bold-italic">c</mi><mrow><mi>AMB</mi><mo>,</mo><mi>MIN</mi></mrow></msub><mfenced><mi>t</mi></mfenced><mn>.</mn></math><img id="ib0068" file="imgb0068.tif" wi="123" he="8" img-content="math" img-format="tif"/></maths> Hence, using the compatibility of the Euclidean matrix and vector norms, <maths id="math0050" num="(36)"><math display="block"><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0069" file="imgb0069.tif" wi="126" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0051" num="(37)"><math display="block"><mover><mo>≤</mo><mfenced><mn>35</mn></mfenced></mover><mo>⁢</mo><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>⋅</mo><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">c</mi><mrow><mi>AMB</mi><mo>,</mo><mi>MIN</mi></mrow></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0070" file="imgb0070.tif" wi="101" he="13" img-content="math" img-format="tif"/></maths> <maths id="math0052" num="(38)"><math display="block"><mover><mo>≤</mo><mfenced><mn>34</mn></mfenced></mover><mo>⁢</mo><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>⋅</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi><mn>.</mn></math><img id="ib0071" file="imgb0071.tif" wi="101" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0041" num="0041">In the above-mentioned MPEG document N14264 the virtual directions Ω<sub>MIN,<i>d</i></sub>, <i>d</i> = 1, ..., <i>O</i><sub>MIN</sub>, are chosen according to the above-mentioned Fliege et al. article. The respective Euclidean norms of the inverse of the mode matrices Ψ<sub>MIN</sub> are illustrated in <figref idrefs="f0003">Fig. 4</figref> for orders <i>N</i><sub>MIN</sub> = 1, ...,9. It can be seen that <maths id="math0053" num="(39)"><math display="block"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>&lt;</mo><mn>1</mn><mspace width="1em"/><mi>for</mi><mspace width="1em"/><msub><mi>N</mi><mi>MIN</mi></msub><mo>=</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>9.</mn></math><img id="ib0072" file="imgb0072.tif" wi="151" he="8" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="24"> --></p><p id="p0042" num="0042">However, this does in general not hold for <i>N</i><sub>MIN</sub> &gt; 9, where the values of <maths id="math0054" num=""><math display="inline"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub></math><img id="ib0073" file="imgb0073.tif" wi="18" he="9" img-content="math" img-format="tif" inline="yes"/></maths> are typically much greater than '1'. Nevertheless, at least for 1 ≤ <i>N</i><sub>MIN</sub> ≤ 9 the amplitudes of the virtual loudspeaker signals are bounded by <maths id="math0055" num="(40)"><math display="block"><mrow><msub><mrow><mo>‖</mo><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>⁢</mo><mover><mo>≤</mo><mrow><mfenced><mn>38</mn></mfenced><mo>,</mo><mi>Fig</mi><mn>.4</mn></mrow></mover><mo>⁢</mo><msqrt><mi>K</mi></msqrt><mo>⋅</mo><mi>O</mi><mspace width="1em"/><mi>for</mi><mspace width="1em"/><mn>1</mn><mo>≤</mo><msub><mi>N</mi><mi>MIN</mi></msub><mo>≤</mo><mn>9</mn></mrow><mn>.</mn></math><img id="ib0074" file="imgb0074.tif" wi="137" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0043" num="0043">By constraining the input HOA representation to satisfy the condition (6), which requires the amplitudes of the virtual loudspeaker signals created from this HOA representation not to exceed a value of '1', it can be guaranteed that the amplitudes of the signals before gain control will not exceed the value √K·0 (see equations (25), (34) and (40)) under the following conditions:
<ol><li>a) The vector of all predominant sound signals <i>x</i>(<i>t</i>) is computed according to the equation/constraints (18), (19) and (20);</li><li>b) The minimum order <i>N</i><sub>MIN</sub>, that determines the number <i>O</i><sub>MIN</sub> of first coefficient sequences of the ambient HOA component to which a spatial transform is applied, has to be lower than '9', if as virtual loudspeaker positions those defined in the above-mentioned Fliege et al. article are used.</li></ol></p><p id="p0044" num="0044">It can be further concluded that the amplitudes of the signals before gain control will not exceed the value <i>K</i><sub>MAX</sub> · <i>O</i> for any order <i>N</i> up to a maximum order <i>N</i><sub>MAX</sub> of interest, i.e. <maths id="math0056" num="(41a)"><math display="block"><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub><mo>,</mo><mspace width="1em"/><mi>where</mi><mspace width="1em"/><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mn>.</mn></math><img id="ib0075" file="imgb0075.tif" wi="154" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0045" num="0045">In particular, it can be concluded from <figref idrefs="f0003">Fig. 3</figref> that if the virtual loudspeaker directions <maths id="math0057" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>j</mi><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi><mo>,</mo></math><img id="ib0076" file="imgb0076.tif" wi="32" he="9" img-content="math" img-format="tif" inline="yes"/></maths> for the initial spatial transform are assumed to be chosen according to the distribution in the Fliege et al. article, and if additionally the maximum order of interest is assumed to be <i>N</i><sub>MAX</sub> = 29<!-- EPO <DP n="25"> --> (as e.g. in MPEG document N14264), then the amplitudes of the signals before gain control will not exceed the value 1.5 <i>O</i>, since <i>K</i><sub>MAX</sub> &lt; 1.5 in this special case. I.e., <i>K</i><sub>MAX</sub> = 1.5 can be selected.</p><p id="p0046" num="0046"><i>K</i><sub>MAX</sub> is dependent on the maximum order of interest <i>N</i><sub>MAX</sub> and the virtual loudspeaker directions <maths id="math0058" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>j</mi><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi><mo>,</mo></math><img id="ib0077" file="imgb0077.tif" wi="31" he="9" img-content="math" img-format="tif" inline="yes"/></maths> which can be expressed by <maths id="math0059" num="(41b)"><math display="block"><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>K</mi><mi>MAX</mi></msub><mfenced><mfenced open="{" close="}" separators=""><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup><mrow><mo>|</mo><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub></mrow></mfenced></mfenced><mn>.</mn></math><img id="ib0078" file="imgb0078.tif" wi="130" he="11" img-content="math" img-format="tif"/></maths></p><p id="p0047" num="0047">Hence, the minimum gain applied by the gain control to ensure that the signals before perceptual coding lie within the interval [-1,1] is given by 2<sup><i>e</i>MIN</sup>, where <maths id="math0060" num="(41c)"><math display="block"><msub><mi>e</mi><mi>MIN</mi></msub><mo>=</mo><mo>-</mo><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mfenced separators=""><msub><mi>K</mi><mi>MAX</mi></msub><mo>⋅</mo><mi>O</mi></mfenced><mo>⌉</mo><mo>&lt;</mo><mn>0.</mn></math><img id="ib0079" file="imgb0079.tif" wi="123" he="9" img-content="math" img-format="tif"/></maths> In case the amplitudes of the signals before the gain control are too small, it is proposed in MPEG document N14264 that it is possible to smoothly amplify them with a factor up to 2<sup><i>e</i>MAX</sup>, where <i>e</i><sub>MAX</sub> ≥ 0 is transmitted as side information within the coded HOA representation.<br/>
Thus, each exponent to base '2', describing within an access unit the total absolute amplitude change of a modified signal caused by the gain control processing unit from the first up to a current frame, can assume any integer value within the interval [<i>e</i><sub>MIN</sub>,<i>e</i><sub>MAX</sub>]. Consequently, the (lowest integer) number β<sub>e</sub> of bits required for coding it is given by <maths id="math0061" num="(42)"><math display="block"><msub><mi>β</mi><mi mathvariant="normal">e</mi></msub><mo>=</mo><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mo>⁢</mo><mfenced separators=""><mfenced open="|" close="|"><msub><mi>e</mi><mi>MIN</mi></msub></mfenced><mo>+</mo><msub><mi>e</mi><mi>MAX</mi></msub><mo>+</mo><mn>1</mn></mfenced><mo>⌉</mo><mo>=</mo><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mo>⁢</mo><mfenced separators=""><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mfenced separators=""><msub><mi>K</mi><mi>MAX</mi></msub><mo>⋅</mo><mi>O</mi></mfenced><mo>⌉</mo><mo>+</mo><msub><mi>e</mi><mi>MAX</mi></msub><mo>+</mo><mn>1</mn></mfenced><mo>⌉</mo><mn>.</mn></math><img id="ib0080" file="imgb0080.tif" wi="156" he="10" img-content="math" img-format="tif"/></maths> In case the amplitudes of the signals before the gain control are not too small, equation (42) can be simplified: <maths id="math0062" num="(42a)"><math display="block"><msub><mi>β</mi><mi mathvariant="normal">e</mi></msub><mo>=</mo><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mo>⁢</mo><mfenced separators=""><mfenced open="|" close="|"><msub><mi>e</mi><mi>MIN</mi></msub></mfenced><mo>+</mo><mn>1</mn></mfenced><mo>⌉</mo><mo>=</mo><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mo>⁢</mo><mfenced separators=""><mo>⌈</mo><msub><mi>log</mi><mn>2</mn></msub><mfenced separators=""><msub><mi>K</mi><mi>MAX</mi></msub><mo>⋅</mo><mi>O</mi></mfenced><mo>⌉</mo><mo>+</mo><mn>1</mn></mfenced><mo>⌉</mo><mn>.</mn></math><img id="ib0081" file="imgb0081.tif" wi="143" he="10" img-content="math" img-format="tif"/></maths> This number of bits β<sub>e</sub> can be calculated at the input of the gain control steps/stages 15,...,151.</p><p id="p0048" num="0048">Using this number β<sub>e</sub> of bits for the exponent ensures that all possible absolute amplitude changes caused by the HOA compressor gain control processing units 15, ..., 151 can be captured, allowing the start of the decompression at some<!-- EPO <DP n="26"> --> predefined entry points within the compressed representation.</p><p id="p0049" num="0049">When starting decompression of the compressed HOA representation in the HOA decompressor, the non-differential gain values representing the total absolute amplitude changes assigned to the side information for some data frames and received from demultiplexer 21 out of the received data stream<img id="ib0082" file="imgb0082.tif" wi="5" he="5" img-content="character" img-format="tif" inline="yes"/> are used in inverse gain control steps or stages 24,..., 241 for applying a correct gain control, in a manner inverse to the processing that was carried out in gain control steps/stages 15,...,151.</p><heading id="h0014"><i>Further embodiment</i></heading><p id="p0050" num="0050">When implementing a particular HOA compression / decompression system as described in sections <i>HOA compression, Spatial HOA encoding, HOA decompression</i> and <i>Spatial HOA decoding</i>, the amount β<sub>e</sub> of bits for the coding of the exponent has to be set according to equation (42) in dependence on a scaling factor <i>K</i><sub>MAX,DES</sub>, which itself is dependent on a desired maximum order <i>N</i><sub>MAX,DES</sub> of HOA representations to be compressed and certain virtual loudspeaker directions <maths id="math0063" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mi>O</mi></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo></math><img id="ib0083" file="imgb0083.tif" wi="35" he="11" img-content="math" img-format="tif" inline="yes"/></maths>1 ≤ <i>N</i> ≤ <i>N</i><sub>MAX</sub>.<br/>
For instance, when assuming <i>N</i><sub>MAX</sub>,<sub>DES</sub>=29 and choosing the virtual loudspeaker directions according to the Fliege et al. article, a reasonable choice would be <i>K</i><sub>MAX</sub>,<sub>DES</sub>=1-5 . In that situation the correct compression is guaranteed for HOA representations of order <i>N</i> with 1 ≤ <i>N</i> ≤ <i>N</i><sub>MAX</sub> which are normalised according to section <i>Normalisation of the input HOA representation</i> using the same virtual loudspeaker directions <maths id="math0064" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mi>O</mi></mrow><mfenced><mi>N</mi></mfenced></msubsup><mn>.</mn></math><img id="ib0084" file="imgb0084.tif" wi="35" he="9" img-content="math" img-format="tif" inline="yes"/></maths> However, this guarantee cannot be given in case of an HOA representation which is also (for efficiency reasons) equivalently represented by virtual loudspeaker signals in PCM format, but where the directions <maths id="math0065" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>j</mi><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo></math><img id="ib0085" file="imgb0085.tif" wi="11" he="9" img-content="math" img-format="tif" inline="yes"/></maths> 1 ≤ <i>j</i> ≤ <i>0</i>,<!-- EPO <DP n="27"> --> of the virtual loudspeakers are chosen to be different to the virtual loudspeaker directions <maths id="math0066" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mi>O</mi></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo></math><img id="ib0086" file="imgb0086.tif" wi="35" he="11" img-content="math" img-format="tif" inline="yes"/></maths> assumed at the system design stage.<br/>
Due to this different choice of virtual loudspeaker positions, even though the amplitudes of these virtual loudspeaker signals lie within interval [1,1[ , it cannot be guaranteed anymore that the amplitudes of the signals before gain control will not exceed the value <i>K</i><sub>MAX,DES ·</sub><i>O</i>. And hence it cannot be guaranteed that this HOA representation has the proper normalisation for the compression according to the processing described in MPEG document N14264.<br/>
In this situation it is advantageous to have a system which provides, based on the knowledge of the virtual loudspeaker positions, the maximally allowed amplitude of the virtual loudspeaker signals in order to ensure the respective HOA representation to be suitable for compression according to the processing described in MPEG document N14264. In <figref idrefs="f0004">Fig. 5</figref> such a system is illustrated. It takes as input the virtual loudspeaker positions <maths id="math0067" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>j</mi><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo></math><img id="ib0087" file="imgb0087.tif" wi="11" he="10" img-content="math" img-format="tif" inline="yes"/></maths> 1 ≤ <i>j</i> ≤ <i>O</i>, where 0 = (<i>N</i> + 1)<sup>2</sup> with <i>N</i> ∈ <img id="ib0088" file="imgb0088.tif" wi="8" he="5" img-content="character" img-format="tif" inline="yes"/> and provides as output the maximally allowed amplitude γ<sub>dB</sub> (measured in decibels) of the virtual loudspeaker signals. In step or stage 51 the mode matrix Ψ with respect to the virtual loudspeaker positions is computed according to equation (3). In a following step or stage 52 the Euclidean norm ∥Ψ∥<sub>2</sub> of the mode matrix is computed. In a third step or stage 53 the amplitude γ is computed as the minimum of '1' and the quotient between the product of the square root of the number of the virtual loudspeaker positions and <i>K</i><sub>MAX,DES</sub> and the Euclidean norm of the mode matrix, i.e. <maths id="math0068" num="(43)"><math display="block"><mi>γ</mi><mo>=</mo><mi>min</mi><mfenced><mn>1</mn><mfrac><mrow><msqrt><mi>O</mi></msqrt><mo>⋅</mo><msub><mi>K</mi><mrow><mi>MAX</mi><mo>,</mo><mi>DES</mi></mrow></msub></mrow><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub></mfrac></mfenced><mn>.</mn></math><img id="ib0089" file="imgb0089.tif" wi="165" he="12" img-content="math" img-format="tif"/></maths> The value in decibels is obtained by <maths id="math0069" num="(44)"><math display="block"><msub><mi mathvariant="normal">γ</mi><mi>dB</mi></msub><mo>=</mo><mn>20</mn><mo>⁢</mo><msub><mi>log</mi><mn>10</mn></msub><mfenced><mi mathvariant="normal">γ</mi></mfenced><mn>.</mn></math><img id="ib0090" file="imgb0090.tif" wi="69" he="10" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="28"> --> For explanation: from the derivations above it can be seen that if the magnitude of the HOA coefficient sequences does not exceed a value K<sub>MAX,DES</sub> · <i>O</i>, i.e. if <maths id="math0070" num="(45)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msub><mi>K</mi><mrow><mi>MAX</mi><mo>,</mo><mi>DES</mi></mrow></msub><mo>⋅</mo><mi>O</mi><mo>,</mo></math><img id="ib0091" file="imgb0091.tif" wi="114" he="9" img-content="math" img-format="tif"/></maths> all the signals before the gain control processing units 15, 151 will accordingly not exceed this value, which is the requirement for a proper HOA compression.</p><p id="p0051" num="0051">From equation (9) it is found that the magnitude of the HOA coefficient sequences is bounded by <maths id="math0071" num="(46)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mo>≤</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub><mo>⋅</mo><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mn>.</mn></math><img id="ib0092" file="imgb0092.tif" wi="132" he="10" img-content="math" img-format="tif"/></maths> Consequently, if γ is set according to equation (43) and the virtual loudspeaker signals in PCM format satisfy <maths id="math0072" num="(47)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>≤</mo><mi>γ</mi><mo>,</mo></math><img id="ib0093" file="imgb0093.tif" wi="111" he="8" img-content="math" img-format="tif"/></maths> it follows from equation (7) that <maths id="math0073" num="(48)"><math display="block"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>‖</mo></mrow><mn>2</mn></msub><mo>≤</mo><mi>γ</mi><mo>⋅</mo><msqrt><mi>O</mi></msqrt></math><img id="ib0094" file="imgb0094.tif" wi="79" he="9" img-content="math" img-format="tif"/></maths> and that the requirement (45) is satisfied. I.e., the maximum magnitude value of '1' in equation (6) is replaced by maximum magnitude value γ in equation (47).</p><heading id="h0015"><i>Basics of Higher Order Ambisonics</i></heading><p id="p0052" num="0052">Higher Order Ambisonics (HOA) is based on the description of a sound field within a compact area of interest, which is assumed to be free of sound sources. In that case the spatiotemporal behaviour of the sound pressure <i>p</i>(<i>t</i>,<i>x</i>) at time t and position <i>x</i> within the area of interest is physically fully determined by the homogeneous wave equation. In the following a spherical coordinate system as shown in <figref idrefs="f0004">Fig. 6</figref> is assumed. In the used coordinate system the <i>x</i> axis points to the frontal position, the <i>y</i> axis points to the left, and the <i>z</i> axis points to the top. A position in space <i>x</i> = (<i>r</i>, θ, φ)<i><sup>T</sup></i> is represented by a radius <i>r</i> &gt; 0 (i.e. the distance to the coordinate origin), an inclination angle θ E [0,π] measured from the polar axis <i>z</i> and an azimuth angle φ ∈ [0,2π[ measured counter-clockwise in the <i>x - y</i> plane from the <i>x</i> axis. Further, (·)<i><sup>T</sup></i><!-- EPO <DP n="29"> --> denotes the transposition.<br/>
Then, it can be shown from the "Fourier Acoustics" text book that the Fourier transform of the sound pressure with respect to time denoted by <i>F</i><sub>t</sub>(·), i.e. <maths id="math0074" num="(49)"><math display="block"><mi>P</mi><mfenced><mi>ω</mi><mi>x</mi></mfenced><mo>=</mo><msub><mi>F</mi><mi>t</mi></msub><mfenced separators=""><mi>p</mi><mfenced><mi>t</mi><mi>x</mi></mfenced></mfenced><mo>=</mo><msubsup><mo>∫</mo><mrow><mo>-</mo><mi>∞</mi></mrow><mi>∞</mi></msubsup><mo>⁢</mo><mi>p</mi><mfenced><mi>t</mi><mi>x</mi></mfenced><mo>⁢</mo><msup><mi>e</mi><mrow><mo>-</mo><mi mathvariant="normal">i</mi><mo>⁢</mo><mi>ω</mi><mo>⁢</mo><mi>t</mi></mrow></msup><mo>ⅆ</mo><mi>t</mi></math><img id="ib0095" file="imgb0095.tif" wi="136" he="9" img-content="math" img-format="tif"/></maths> with ω denoting the angular frequency and <i>i</i> indicating the imaginary unit, may be expanded into the series of Spherical Harmonics according to <maths id="math0075" num="(50)"><math display="block"><mi>P</mi><mfenced separators=""><mi>ω</mi><mo>=</mo><mi>k</mi><mo>⁢</mo><msub><mi>c</mi><mi mathvariant="normal">s</mi></msub><mo>,</mo><mi>r</mi><mo>,</mo><mi>θ</mi><mo>,</mo><mi>ϕ</mi></mfenced><mo>=</mo><mstyle displaystyle="false"><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>N</mi></munderover></mstyle><mstyle displaystyle="false"><munderover><mo>∑</mo><mrow><mi>m</mi><mo>=</mo><mo>-</mo><mi>n</mi></mrow><mi>n</mi></munderover></mstyle><msubsup><mi>A</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced><mo>⁢</mo><msub><mi>j</mi><mi>n</mi></msub><mfenced><mi mathvariant="italic">kr</mi></mfenced><mo>⁢</mo><msubsup><mi>S</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>θ</mi><mi>ϕ</mi></mfenced><mo>,</mo></math><img id="ib0096" file="imgb0096.tif" wi="147" he="9" img-content="math" img-format="tif"/></maths> wherein <i>c</i><sub>s</sub> denotes the speed of sound and <i>k</i> denotes the angular wave number, which is related to the angular frequency ω by <maths id="math0076" num=""><math display="inline"><mi>k</mi><mo>=</mo><mfrac><mi>ω</mi><msub><mi>c</mi><mi>s</mi></msub></mfrac><mn>.</mn></math><img id="ib0097" file="imgb0097.tif" wi="16" he="10" img-content="math" img-format="tif" inline="yes"/></maths> Further, <i>j<sub>n</sub></i>(·) denote the spherical Bessel functions of the first kind and <maths id="math0077" num=""><math display="inline"><msubsup><mi>S</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>θ</mi><mi>ϕ</mi></mfenced></math><img id="ib0098" file="imgb0098.tif" wi="18" he="9" img-content="math" img-format="tif" inline="yes"/></maths> denote the real valued Spherical Harmonics of order <i>n</i> and degree <i>m</i>, which are defined in section <i>Definition of real valued Spherical Harmonics.</i> The expansion coefficients <maths id="math0078" num=""><math display="inline"><msubsup><mi>A</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced></math><img id="ib0099" file="imgb0099.tif" wi="13" he="8" img-content="math" img-format="tif" inline="yes"/></maths> only depend on the angular wave number <i>k</i>. Note that it has been implicitly assumed that the sound pressure is spatially band-limited. Thus the series is truncated with respect to the order index <i>n</i> at an upper limit <i>N</i>, which is called the order of the HOA representation. If the sound field is represented by a superposition of an infinite number of harmonic plane waves of different angular frequencies ω arriving from all possible directions specified by the angle tuple (θ,φ), it can be shown (see <nplcit id="ncit0003" npl-type="s"><text>B. Rafaely, "Plane-wave decomposition of the sound field on a sphere by spherical convolution", J. Acoust. Soc. Am., vol.4(116), pages 2149-2157, October 2004</text></nplcit>) that the respective plane wave complex amplitude function <i>C</i>(ω,θ,φ) can be expressed by the following Spherical Harmonics expansion <maths id="math0079" num="(51)"><math display="block"><mi>C</mi><mfenced separators=""><mi>ω</mi><mo>=</mo><mi>k</mi><mo>⁢</mo><msub><mi>c</mi><mi mathvariant="normal">s</mi></msub><mo>,</mo><mi>θ</mi><mo>,</mo><mi>ϕ</mi></mfenced><mo>=</mo><mstyle displaystyle="false"><munderover><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi>N</mi></munderover></mstyle><mstyle displaystyle="false"><munderover><mo>∑</mo><mrow><mi>m</mi><mo>=</mo><mo>-</mo><mi>n</mi></mrow><mi>n</mi></munderover></mstyle><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced><mo>⁢</mo><msubsup><mi>S</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>θ</mi><mi>ϕ</mi></mfenced><mo>,</mo></math><img id="ib0100" file="imgb0100.tif" wi="143" he="10" img-content="math" img-format="tif"/></maths> where the expansion coefficients <maths id="math0080" num=""><math display="inline"><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced></math><img id="ib0101" file="imgb0101.tif" wi="13" he="7" img-content="math" img-format="tif" inline="yes"/></maths> are related to the expansion coefficients <maths id="math0081" num="(52)"><math display="block"><msubsup><mi>A</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced><mspace width="2em"/><mi>by</mi><mspace width="3em"/><msubsup><mi>A</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced><mo>=</mo><msup><mi mathvariant="normal">i</mi><mi>n</mi></msup><mo>⁢</mo><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>k</mi></mfenced><mn>.</mn></math><img id="ib0102" file="imgb0102.tif" wi="105" he="12" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="30"> --></p><p id="p0053" num="0053">Assuming the individual coefficients <maths id="math0082" num=""><math display="inline"><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced separators=""><mi>k</mi><mo>=</mo><mi>ω</mi><mo>/</mo><msub><mi>c</mi><mi>s</mi></msub></mfenced></math><img id="ib0103" file="imgb0103.tif" wi="29" he="7" img-content="math" img-format="tif" inline="yes"/></maths> to be functions of the angular frequency ω, the application of the inverse Fourier transform (denoted by <i>F</i><sup>-1</sup>(·)) provides time domain functions <maths id="math0083" num="(53)"><math display="block"><msubsup><mi>c</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi>F</mi><mi>t</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced separators=""><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced separators=""><mi>ω</mi><mo>/</mo><msub><mi>c</mi><mi>s</mi></msub></mfenced></mfenced><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mo>⁢</mo><mi>π</mi></mrow></mfrac><mo>⁢</mo><msubsup><mo>∫</mo><mrow><mo>-</mo><mi>∞</mi></mrow><mi>∞</mi></msubsup><mo>⁢</mo><msubsup><mi>C</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mfrac><mi>ω</mi><msub><mi>c</mi><mi>s</mi></msub></mfrac></mfenced><mo>⁢</mo><msup><mi>e</mi><mrow><mi mathvariant="normal">i</mi><mo>⁢</mo><mi>ω</mi><mo>⁢</mo><mi>t</mi></mrow></msup><mo>ⅆ</mo><mi>ω</mi></math><img id="ib0104" file="imgb0104.tif" wi="130" he="11" img-content="math" img-format="tif"/></maths> for each order <i>n</i> and degree <i>m</i>. These time domain functions are referred to as continuous-time HOA coefficient sequences here, which can be collected in a single vector <b><i>c</i></b>(<i>t</i>) by <maths id="math0084" num="(54)"><math display="block"><mi mathvariant="bold-italic">c</mi><mfenced><mi>t</mi></mfenced><mo>=</mo><msup><mfenced open="[" close="]" separators=""><mrow><msubsup><mi>c</mi><mn>0</mn><mn>0</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>1</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>1</mn><mn>0</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>1</mn><mn>1</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>2</mn><mrow><mo>-</mo><mn>2</mn></mrow></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>2</mn><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>2</mn><mn>0</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>2</mn><mn>1</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mrow><msubsup><mi>c</mi><mn>2</mn><mn>2</mn></msubsup><mfenced><mi>t</mi></mfenced></mrow><mspace width="1em"/><mo>⋅</mo><mo>⋅</mo><mo>⋅</mo><mspace width="1em"/><mtable><mtr><mtd><msubsup><mi>c</mi><mi>N</mi><mrow><mi>N</mi><mo>-</mo><mn>1</mn></mrow></msubsup><mfenced><mi>t</mi></mfenced><mspace width="1em"/></mtd><mtd><msubsup><mi>c</mi><mi>N</mi><mi>N</mi></msubsup><mfenced><mi>t</mi></mfenced><mspace width="1em"/></mtd></mtr></mtable></mfenced><mi>T</mi></msup></math><img id="ib0105" file="imgb0105.tif" wi="165" he="20" img-content="math" img-format="tif"/></maths></p><p id="p0054" num="0054">The position index of an HOA coefficient sequence <maths id="math0085" num=""><math display="inline"><msubsup><mi>c</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>t</mi></mfenced></math><img id="ib0106" file="imgb0106.tif" wi="13" he="7" img-content="math" img-format="tif" inline="yes"/></maths> within vector <b><i>c</i></b>(<i>t</i>) is given by <i>n</i>(<i>n</i> + 1) + 1 + <i>m</i>. The overall number of elements in vector <b><i>c</i></b>(<i>t</i>) is given by <i>0</i> = (<i>N</i> + 1)<sup>2</sup>.</p><p id="p0055" num="0055">The final Ambisonics format provides the sampled version of <b><i>c</i></b>(<i>t</i>) using a sampling frequency <i>f</i><sub>S</sub> as <maths id="math0086" num="(55)"><math display="block"><msub><mfenced open="{" close="}" separators=""><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">lT</mi><mi mathvariant="normal">S</mi></msub></mfenced></mfenced><mrow><mi>l</mi><mo>∈</mo><mi>N</mi></mrow></msub><mo>=</mo><mfenced open="{" close="}" separators=""><mi mathvariant="bold-italic">c</mi><mfenced><msub><mi mathvariant="italic">T</mi><mi mathvariant="normal">S</mi></msub></mfenced><mo>,</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mrow><mn>2</mn><mo>⁢</mo><mi mathvariant="italic">T</mi></mrow><mi mathvariant="normal">S</mi></msub></mfenced><mo>,</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mrow><mn>3</mn><mo>⁢</mo><mi mathvariant="italic">T</mi></mrow><mi mathvariant="normal">S</mi></msub></mfenced><mo>,</mo><mi mathvariant="bold-italic">c</mi><mfenced><msub><mrow><mn>4</mn><mo>⁢</mo><mi mathvariant="italic">T</mi></mrow><mi mathvariant="normal">S</mi></msub></mfenced><mo>,</mo><mo>…</mo></mfenced></math><img id="ib0107" file="imgb0107.tif" wi="135" he="10" img-content="math" img-format="tif"/></maths> where <i>T</i><sub>S</sub> = 1/<i>f</i><sub>S</sub> denotes the sampling period. The elements of <b><i>c</i></b>(<i>lT</i><sub>S</sub>) are referred to as discrete-time HOA coefficient sequences, which can be shown to always be real-valued. This property also holds for the continuous-time versions <maths id="math0087" num=""><math display="inline"><msubsup><mi>c</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>t</mi></mfenced><mn>.</mn></math><img id="ib0108" file="imgb0108.tif" wi="15" he="9" img-content="math" img-format="tif" inline="yes"/></maths></p><heading id="h0016"><i>Definition of real valued Spherical Harmonics</i></heading><p id="p0056" num="0056">The real-valued spherical harmonics <maths id="math0088" num=""><math display="inline"><msubsup><mi>S</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>θ</mi><mi>ϕ</mi></mfenced></math><img id="ib0109" file="imgb0109.tif" wi="19" he="6" img-content="math" img-format="tif" inline="yes"/></maths> (assuming SN3D normalisation according to <nplcit id="ncit0004" npl-type="b"><text>J. Daniel, "Representation de champs acoustiques, application à la transmission et à la reproduction de scenes sonores complexes dans un contexte multimedia", PhD thesis, Université Paris, 6, 2001, chapter 3.1</text></nplcit>) are given by <maths id="math0089" num="(56)"><math display="block"><msubsup><mi>S</mi><mi>n</mi><mi>m</mi></msubsup><mfenced><mi>θ</mi><mi>ϕ</mi></mfenced><mo>=</mo><msqrt><mfenced separators=""><mn>2</mn><mo>⁢</mo><mi>n</mi><mo>+</mo><mn>1</mn></mfenced><mo>⁢</mo><mfrac><mrow><mfenced separators=""><mi>n</mi><mo>-</mo><mfenced open="|" close="|"><mi>m</mi></mfenced></mfenced><mo>!</mo></mrow><mrow><mfenced separators=""><mi>n</mi><mo>+</mo><mfenced open="|" close="|"><mi>m</mi></mfenced></mfenced><mo>!</mo></mrow></mfrac></msqrt><mspace width="1em"/><msub><mi>P</mi><mrow><mi>n</mi><mo>,</mo><mfenced open="|" close="|"><mi>m</mi></mfenced></mrow></msub><mfenced><mi mathvariant="italic">cosθ</mi></mfenced><mo>⁢</mo><msub><mi>trg</mi><mi>m</mi></msub><mfenced><mi>ϕ</mi></mfenced></math><img id="ib0110" file="imgb0110.tif" wi="142" he="13" img-content="math" img-format="tif"/></maths> with<!-- EPO <DP n="31"> --> <maths id="math0090" num="(57)"><math display="block"><msub><mi>trg</mi><mi>m</mi></msub><mfenced><mi>ϕ</mi></mfenced><mo>=</mo><mrow><mo>{</mo><mtable><mtr><mtd><msqrt><mn>2</mn></msqrt><mo>⁢</mo><mi mathvariant="italic">cos</mi><mfenced separators=""><mi>m</mi><mo>⁢</mo><mi>ϕ</mi></mfenced></mtd><mtd><mi>m</mi><mo>&gt;</mo><mn>0</mn></mtd></mtr><mtr><mtd><mn>1</mn></mtd><mtd><mi>m</mi><mo>=</mo><mn>0</mn></mtd></mtr><mtr><mtd><mo>-</mo><msqrt><mn>2</mn></msqrt><mo>⁢</mo><mi mathvariant="italic">sin</mi><mfenced separators=""><mi>m</mi><mo>⁢</mo><mi>ϕ</mi></mfenced></mtd><mtd><mi>m</mi><mo>&lt;</mo><mn>0</mn></mtd></mtr></mtable></mrow><mn>.</mn></math><img id="ib0111" file="imgb0111.tif" wi="130" he="24" img-content="math" img-format="tif"/></maths></p><p id="p0057" num="0057">The associated Legendre functions <i>P</i><sub><i>n</i>,<i>m</i></sub>(<i>x</i>) are defined as <maths id="math0091" num="(58)"><math display="block"><msub><mi>P</mi><mrow><mi>n</mi><mo>,</mo><mi>m</mi></mrow></msub><mfenced><mi>x</mi></mfenced><mo>=</mo><msup><mfenced separators=""><mn>1</mn><mo>-</mo><msup><mi>x</mi><mn>2</mn></msup></mfenced><mrow><mi>m</mi><mo>/</mo><mn>2</mn></mrow></msup><mo>⁢</mo><mfrac><msup><mi mathvariant="normal">d</mi><mi>m</mi></msup><mrow><mi mathvariant="normal">d</mi><mo>⁢</mo><msup><mi>x</mi><mi>m</mi></msup></mrow></mfrac><mo>⁢</mo><msub><mi>p</mi><mi>n</mi></msub><mfenced><mi>x</mi></mfenced><mo>,</mo><mi>m</mi><mo>≥</mo></math><img id="ib0112" file="imgb0112.tif" wi="127" he="11" img-content="math" img-format="tif"/></maths> with the Legendre polynomial <i>P<sub>n</sub>(x)</i> and, unlike in <nplcit id="ncit0005" npl-type="b"><text>E.G. Williams, "Fourier Acoustics", vol.93 of Applied Mathematical Sciences, Academic Press, 1999</text></nplcit>, without the Condon-Shortley phase term (-1)<i><sup>m</sup></i>.</p><p id="p0058" num="0058">The inventive processing can be carried out by a single processor or electronic circuit, or by several processors or electronic circuits operating in parallel and/or operating on different parts of the inventive processing.<br/>
The instructions for operating the processor or the processors can be stored in one or more memories.</p></description><claims mxw-id="PCLM90459435" lang="EN" load-source="patent-office"><!-- EPO <DP n="32"> --><claim id="c-en-0001" num="0001"><claim-text>Method for determining for the compression of an HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) a lowest integer number β<sub>e</sub> of bits required for representing non-differential gain values (2<i><sup>e</sup></i>) for channel signals of specific ones of said HOA data frames, wherein each channel signal in each frame comprises a group of sample values and wherein to each channel signal (<b><i>y</i></b><sub>1</sub>(<i>k</i> - 2), ... ,<i><b>y</b><sub>I</sub></i>(<i>k -</i> 2)) of each one of said HOA data frames a differential gain value is assigned and such differential gain value causes a change of amplitudes (15, 151) of the sample values of a channel signal in a current HOA data frame ((<i>k</i> - 2)) with respect to the sample values of that channel signal in the previous HOA data frame ((<i>k</i> - 3)), and wherein such gain adapted channel signals are encoded in an encoder (16),<br/>
and wherein said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) was rendered in spatial domain to <i>0</i> virtual loudspeaker signals <i>w<sub>j</sub></i>(<i>t</i>), where the positions of the virtual loudspeakers are lying on a unit sphere and are targeted to be distributed uniformly on that unit sphere, said rendering being represented by a matrix multiplication <b><i>w</i></b>(<i>t</i>) = (Ψ<i>)</i><sup>-1</sup> · <b><i>c</i></b>(<i>t</i>), wherein <b><i>w</i></b>(<i>t</i>) is a vector containing all virtual loudspeaker signals, Ψ is a virtual loudspeaker positions mode matrix, and <b><i>c</i></b>(<i>t</i>) is a vector of the corresponding HOA coefficient sequences of said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)),<br/>
and wherein said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) was normalised such that <maths id="math0092" num=""><math display="inline"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>=</mo><munder><mi mathvariant="italic">max</mi><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi></mrow></munder><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><mi>t</mi></mfenced></mfenced><mo>≤</mo><mn>1</mn><mspace width="2em"/><mo>∀</mo><mi>t</mi><mo>,</mo></math><img id="ib0113" file="imgb0113.tif" wi="65" he="11" img-content="math" img-format="tif" inline="yes"/></maths><br/>
said method including the steps:
<claim-text>- forming said channel signals (<b><i>y</i></b><sub>1</sub>(<i>k</i> - 2), ... , <b><i>y</i></b><sub>1</sub>(<i>k</i> - 2)) by one or more of substeps a), b), c) from said normalised HOA<!-- EPO <DP n="33"> --> data frame representation (<b><i>C</i></b>(<i>k</i>)) :
<claim-text>a) for representing predominant sound signals (<b><i>x</i></b>(<i>t</i>)) in said channel signals, multiplying said vector of HOA coefficient sequences <b><i>c</i></b>(<i>t</i>) by a mixing matrix <b><i>A</i></b>, the Euclidean norm of which mixing matrix <b><i>A</i></b> is not greater than '1', wherein mixing matrix <b><i>A</i></b> represents a linear combination of coefficient sequences of said normalised HOA data frame representation;</claim-text>
<claim-text>b) for representing an ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>) in said channel signals, subtracting said predominant sound signals from said normalised HOA data frame representation (<b><i>C</i></b>(<i>k</i>)), and selecting at least part of the coefficient sequences of said ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>), wherein ∥<b><i>c</i></b><sub>AMB</sub>(<i>t</i>)∥<sub>2</sub><sup>2</sup> ≤ ∥<b><i>c</i></b>(<i>t</i>)∥<sub>2</sub><sup>2</sup>, and transforming the resulting minimum ambient component <b><i>c</i></b><sub>AMB,MIN</sub>(<i>t</i>) by computing <maths id="math0093" num=""><math display="inline"><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>⋅</mo></math><img id="ib0114" file="imgb0114.tif" wi="34" he="8" img-content="math" img-format="tif" inline="yes"/></maths> wherein <maths id="math0094" num=""><math display="inline"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>&lt;</mo><mn>1</mn></math><img id="ib0115" file="imgb0115.tif" wi="28" he="8" img-content="math" img-format="tif" inline="yes"/></maths> and Ψ<sub>MIN</sub> is a mode matrix for said minimum ambient component <b><i>c</i></b><sub>AMB</sub>,<sub>MIN</sub>(<i>t</i>) ;</claim-text>
<claim-text>c) selecting part of said HOA coefficient sequences <b><i>c</i></b>(<i>t</i>);</claim-text></claim-text>
<claim-text>- setting said lowest integer number β<sub>e</sub> of bits required for representing said non-differential gain values (2<i><sup>e</sup></i>) for said channel signals to βe = ┌log<sub>2</sub>(┌log<sub>2</sub>(<i>K</i><sub>MAX</sub> · <i>O</i>)┐ + 1)┐,</claim-text>
wherein <maths id="math0095" num=""><math display="inline"><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mi>MAX</mi></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mo>,</mo></math><img id="ib0116" file="imgb0116.tif" wi="80" he="11" img-content="math" img-format="tif" inline="yes"/></maths>, <i>N</i> is the order, <i>N</i><sub>MAX</sub> is a maximum order of interest, <maths id="math0096" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></math><img id="ib0117" file="imgb0117.tif" wi="26" he="7" img-content="math" img-format="tif" inline="yes"/></maths> are directions of said virtual loudspeakers, <i>O</i> = (<i>N</i> + 1)<sup>2</sup> is the number of HOA coefficient sequences, and <i>K</i> is a ratio between the squared Euclidean norm ∥Ψ∥<sub>2</sub><sup>2</sup> of said mode matrix and <i>O</i>.</claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>Apparatus for determining for the compression of an HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) a lowest integer number<!-- EPO <DP n="34"> --> β<sub>e</sub> of bits required for representing non-differential gain values (2<i><sup>e</sup></i>) for channel signals of specific ones of said HOA data frames, wherein each channel signal in each frame comprises a group of sample values and wherein to each channel signal (<b><i>y</i></b><sub>1</sub> (<i>k</i> - 2), ... ,<i><b>y</b><sub>I</sub></i>(<i>k</i> - 2)) of each one of said HOA data frames a differential gain value is assigned and such differential gain value causes a change of amplitudes (15, 151) of the sample values of a channel signal in a current HOA data frame ((<i>k</i> - 2)) with respect to the sample values of that channel signal in the previous HOA data frame ((<i>k</i> - 3)), and wherein such gain adapted channel signals are encoded in an encoder (16),<br/>
and wherein said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) was rendered in spatial domain to <i>O</i> virtual loudspeaker signals <i>w<sub>j</sub></i>(<i>t</i>), where the positions of the virtual loudspeakers are lying on a unit sphere and are targeted to be distributed uniformly on that unit sphere, said rendering being represented by a matrix multiplication <b><i>w</i></b>(<i>t</i>) = (Ψ)<sup>-1</sup> · <b><i>c</i></b>(<i>t</i>), wherein <b>w</b>(<i>t</i>) is a vector containing all virtual loudspeaker signals, Ψ is a virtual loudspeaker positions mode matrix, and <b><i>c</i></b>(<i>t</i>) is a vector of the corresponding HOA coefficient sequences of said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)),<br/>
and wherein said HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) was normalised such that <maths id="math0097" num=""><math display="inline"><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">w</mi><mfenced><mi>t</mi></mfenced><mo>‖</mo></mrow><mi>∞</mi></msub><mo>=</mo><munder><mi mathvariant="italic">max</mi><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>O</mi></mrow></munder><mfenced open="|" close="|" separators=""><msub><mi>w</mi><mi>j</mi></msub><mfenced><mi>t</mi></mfenced></mfenced><mo>≤</mo><mn>1</mn><mspace width="2em"/><mo>∀</mo><mi>t</mi><mo>,</mo></math><img id="ib0118" file="imgb0118.tif" wi="64" he="9" img-content="math" img-format="tif" inline="yes"/></maths> said apparatus including:
<claim-text>- means (12, 13, 14) which form said channel signals (<b><i>y</i></b><sub>1</sub>(<i>k</i> - 2), <i>..., <b>y</b><sub>I</sub></i>(<i>k</i> - 2)) by one or more of the operations a), b), c) from said normalised HOA data frame representation (<b><i>C</i></b>(<i>k</i>)) :
<claim-text>a) for representing predominant sound signals (<b><i>x</i></b>(<i>t</i>)) in said channel signals, multiplying said vector of HOA<!-- EPO <DP n="35"> --> coefficient sequences <b><i>c</i></b>(<i>t</i>) by a mixing matrix <b><i>A</i></b>, the Euclidean norm of which mixing matrix <b><i>A</i></b> is not greater than '1', wherein mixing matrix <b><i>A</i></b> represents a linear combination of coefficient sequences of said normalised HOA data frame representation;</claim-text>
<claim-text>b) for representing an ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>) in said channel signals, subtracting said predominant sound signals from said normalised HOA data frame representation (<b><i>C</i></b>(<i>k</i>)), and selecting at least part of the coefficient sequences of said ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>), wherein ∥<b><i>c</i></b><sub>AMB</sub>(<i>t</i>)∥<sub>2</sub><sup>2</sup> ≤ ∥<b><i>c</i></b>(<i>t</i>)∥<sub>2</sub><sup>2</sup>, and transforming the resulting minimum ambient component <b><i>c</i></b><sub>AMB,MIN</sub>(<i>t</i>) by computing <maths id="math0098" num=""><math display="inline"><msub><mi mathvariant="bold-italic">w</mi><mi>MIN</mi></msub><mfenced><mi>t</mi></mfenced><mo>=</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>⋅</mo><msub><mi mathvariant="bold-italic">c</mi><mrow><mi>AMB</mi><mo>,</mo><mi>MIN</mi></mrow></msub><mfenced><mi>t</mi></mfenced><mo>,</mo></math><img id="ib0119" file="imgb0119.tif" wi="58" he="9" img-content="math" img-format="tif" inline="yes"/></maths> wherein <maths id="math0099" num=""><math display="inline"><msub><mrow><mo>‖</mo><msubsup><mi mathvariant="bold-italic">Ψ</mi><mi>MIN</mi><mrow><mo>-</mo><mn>1</mn></mrow></msubsup><mo>‖</mo></mrow><mn>2</mn></msub><mo>&lt;</mo><mn>1</mn></math><img id="ib0120" file="imgb0120.tif" wi="27" he="8" img-content="math" img-format="tif" inline="yes"/></maths> and Ψ<sub>MIN</sub> is a mode matrix for said minimum ambient component <b><i>c</i></b><sub>AMB,MIN</sub> (<i>t</i>) ;</claim-text>
<claim-text>c) selecting part of said HOA coefficient sequences <b><i>c</i></b>(<i>t</i>);</claim-text></claim-text>
<claim-text>- means (15,...,151) which set said lowest integer number β<i><sub>e</sub></i> of bits required for representing said non-differential gain values (2<i><sup>e</sup></i>) for said channel signals to β<sub>e</sub> = ┌log<sub>2</sub>(┌log<sub>2</sub>(<i>K</i><sub>MAX·</sub><i>O</i>┐)+1)┐,</claim-text>
wherein <maths id="math0100" num=""><math display="inline"><msub><mi>K</mi><mi>MAX</mi></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mrow><mi>MAX</mi><mspace width="1em"/></mrow></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mo>,</mo></math><img id="ib0121" file="imgb0121.tif" wi="80" he="10" img-content="math" img-format="tif" inline="yes"/></maths> <i>N</i> is the order, <i>N</i><sub>MAX</sub> is a maximum order of interest, <maths id="math0101" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mn>1</mn><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mi>O</mi><mfenced><mi>N</mi></mfenced></msubsup></math><img id="ib0122" file="imgb0122.tif" wi="26" he="9" img-content="math" img-format="tif" inline="yes"/></maths> are directions of said virtual loudspeakers, <i>O</i> = (<i>N</i> + 1)<sup>2</sup> is the number of HOA coefficient sequences, and K is a ratio between the squared Euclidean norm ∥Ψ∥<sub>2</sub><sup>2</sup> of said mode matrix and <i>O</i>.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>Method according to claim 1, or apparatus according to claim 2 wherein, in addition to said transformed minimum ambient component, non-transformed ambient coefficient sequences of said ambient component <b><i>c</i></b><sub>AMB</sub>(<i>t</i>) are contained in said channel signal (<b><i>y</i></b><sub>1</sub>(<i>k</i> - 2), ... , <i><b>y</b><sub>I</sub></i>(<i>k -</i> 2)) .<!-- EPO <DP n="36"> --></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>Method according to the method of claim 1 or 3, or apparatus according to the apparatus of claim 2 or 3, wherein said non-differential gain values (2<i><sup>e</sup></i>) associated with said channel signals of specific ones of said HOA data frames are transferred as side information wherein each one of them is represented by β<sub>e</sub> bits.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>Method according to the method of one of claims 1, 3 and 4, or apparatus according to the apparatus of one of claims 2 to 4, wherein said lowest integer number β<sub>e</sub> of bits is set to β<sub>e</sub> = ┌log<sub>2</sub>(<i>K</i><sub>MAX</sub> · <i>O</i>)┐ + <i>e</i><sub>MAX</sub> + 1)┐, wherein <i>e</i><sub>MAX</sub> &gt; 0 serves for increasing said number of bits β<sub>e</sub> in case the amplitudes of the sample values of a channel signal before gain control (15, 151) are too small.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>Method according to the method of one of claims 1 and 3 to 5, or apparatus according to the apparatus of one of claims 2 to 5, wherein <i>K</i><sub>MAX</sub> = 1.5.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>Method according to the method of one of claims 1 and 3 to 6, or apparatus according to the apparatus of one of claims 2 to 6, wherein said mixing matrix <b><i>A</i></b> is determined such as to minimise the Euclidean norm of the residual between the original HOA representation and that of the predominant sound signals, by taking the Moore-Penrose pseudo inverse of the mode matrix formed of all vectors representing directional distribution of monaural predominant sound signals.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>Method according to the method of one of claims 1 and 3 to 7, or apparatus according to the apparatus of one of claims 2 to 7, wherein the positions of said <i>O</i> virtual loudspeaker signals do not match those assumed for the<!-- EPO <DP n="37"> --> computation of β<sub>e</sub>, including:
<claim-text>- computing (51) the mode matrix Ψ for these virtual loudspeaker positions;</claim-text>
<claim-text>- computing (52) the Euclidean norm ∥Ψ∥<sub>2</sub> of this mode matrix;</claim-text>
<claim-text>- computing (53) a maximally allowed amplitude value <maths id="math0102" num=""><math display="inline"><mi>γ</mi><mo>=</mo><mi>min</mi><mfenced><mn>1</mn><mfrac><mrow><msqrt><mi>O</mi></msqrt><mo>⋅</mo><msub><mi>K</mi><mrow><mi>MAX</mi><mo>,</mo><mi>DES</mi></mrow></msub></mrow><msub><mrow><mo>‖</mo><mi mathvariant="bold-italic">Ψ</mi><mo>‖</mo></mrow><mn>2</mn></msub></mfrac></mfenced></math><img id="ib0123" file="imgb0123.tif" wi="47" he="12" img-content="math" img-format="tif" inline="yes"/></maths> which replaces the maximum allowed amplitude '1' in said normalising,<br/>
wherein <maths id="math0103" num=""><math display="inline"><msub><mi>K</mi><mrow><mi mathvariant="italic">MAX</mi><mo>,</mo><mi mathvariant="italic">DES</mi></mrow></msub><mo>=</mo><msub><mi>max</mi><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><msub><mi>N</mi><mrow><mi>MAX</mi><mo>,</mo><mi>DES</mi></mrow></msub></mrow></msub><mo>⁢</mo><mi>K</mi><mfenced><mi>N</mi><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>…</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mi>O</mi></mrow><mfenced><mi>N</mi></mfenced></msubsup></mfenced><mo>,</mo></math><img id="ib0124" file="imgb0124.tif" wi="100" he="9" img-content="math" img-format="tif" inline="yes"/></maths> is the order, <i>O</i> = (<i>N</i> + 1)<sup>2</sup> is the number of HOA coefficient sequences, <i>K</i> is a ratio between the squared Euclidean norm of said mode matrix and <i>O</i>, and where <i>N</i><sub>MAX,DES</sub> is the order of interest and <maths id="math0104" num=""><math display="inline"><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup><mo>,</mo><mo>…</mo><mo>,</mo><msubsup><mi mathvariant="bold-italic">Ω</mi><mrow><mi>DES</mi><mo>,</mo><mn>1</mn></mrow><mfenced><mi>N</mi></mfenced></msubsup></math><img id="ib0125" file="imgb0125.tif" wi="32" he="9" img-content="math" img-format="tif" inline="yes"/></maths> are for each order the directions of the virtual loudspeakers that were assumed for the implementation of said compression of said HOA data frame representation (C(k)), such that β<i><sub>e</sub></i> was chosen by βe = ┌log<sub>2</sub>(┌log<sub>2</sub>(<i>K<sub>MAX,DES</sub></i>·<i>O</i>) + 1)┐ in order to code the exponents (<i>e</i>) to base '2' of said non-differential gain values.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>Coded HOA data frame representation (<img id="ib0126" file="imgb0126.tif" wi="4" he="6" img-content="character" img-format="tif" inline="yes"/> ) that includes non-differential gain values of which the lowest integer number (β<sub>e</sub>) of bits required for representing these non-differential gain values is determined according to the method of one of claims 1 and 3 to 8.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>Storage medium that contains or stores, or has recorded on it, a coded HOA data frame representation (<img id="ib0127" file="imgb0127.tif" wi="3" he="8" img-content="character" img-format="tif" inline="yes"/> ) according to claim 9.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>Computer program product comprising instructions which, when carried out on a computer, perform the method of<!-- EPO <DP n="38"> --> one of claims 1 and 3 to 8.</claim-text></claim></claims><drawings mxw-id="PDW20422162" load-source="patent-office"><!-- EPO <DP n="39"> --><figure id="f0001" num="1A,1B"><img id="if0001" file="imgf0001.tif" wi="165" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0002" num="2A,2B"><img id="if0002" file="imgf0002.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0003" num="3,4"><img id="if0003" file="imgf0003.tif" wi="151" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0004" num="5,6"><img id="if0004" file="imgf0004.tif" wi="165" he="199" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="162" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
