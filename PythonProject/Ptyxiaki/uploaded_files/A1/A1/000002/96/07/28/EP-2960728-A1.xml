<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960728-A1" country="EP" doc-number="2960728" kind="A1" date="20151230" family-id="51391150" file-reference-id="241031" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451549" ucid="EP-2960728-A1"><document-id><country>EP</country><doc-number>2960728</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14753807-A" is-representative="YES"><document-id mxw-id="PAPP193866066" load-source="patent-office" format="original"><country>EP</country><doc-number>14753807.8</doc-number><date>20140212</date><lang>JA</lang></document-id><document-id mxw-id="PAPP193866067" load-source="docdb" format="epo"><country>EP</country><doc-number>14753807</doc-number><kind>A</kind><date>20140212</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162027513" ucid="JP-2013032322-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2013032322</doc-number><kind>A</kind><date>20130221</date></document-id></priority-claim><priority-claim mxw-id="PPC162033405" ucid="JP-2014053178-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014053178</doc-number><kind>W</kind><date>20140212</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1928720833" load-source="docdb">G05B  11/36        20060101AFI20160601BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1928730888" load-source="docdb">G05B  11/42        20060101ALI20160601BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1928734848" load-source="docdb">G05B  17/02        20060101ALI20160601BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1981010797" load-source="docdb" scheme="CPC">G05B  11/36        20130101 LI20160122BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1981011421" load-source="docdb" scheme="CPC">G05B  11/42        20130101 FI20160121BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1981016079" load-source="docdb" scheme="CPC">G05B  17/02        20130101 LI20140919BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987768478" load-source="docdb" scheme="CPC">G05B2219/23217     20130101 LA20151120BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546113" lang="DE" load-source="patent-office">STEUERUNGSVORRICHTUNG</invention-title><invention-title mxw-id="PT165546114" lang="EN" load-source="patent-office">CONTROL DEVICE</invention-title><invention-title mxw-id="PT165546115" lang="FR" load-source="patent-office">DISPOSITIF DE COMMANDE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103338689" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOYOTA MOTOR CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103326740" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR1101643661" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name><iid>101357811</iid><address><street>1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103317825" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>UNIV NAGOYA NAT UNIV CORP</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103341886" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>NATIONAL UNIVERSITY CORPORATION NAGOYA UNIVERSITY</last-name></addressbook></applicant><applicant mxw-id="PPAR1101650612" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>National University Corporation Nagoya University</last-name><iid>101122680</iid><address><street>1 Furo-cho Chikusa-ku Nagoya-shi</street><city>Aichi 464-8601</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103340977" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SATA KOTA</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103317462" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SATA, KOTA</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650169" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SATA, KOTA</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1 Toyota-cho</street><city>Toyota-shi Aichi 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332219" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KAKO JUNICHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310243" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KAKO, JUNICHI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648886" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KAKO, JUNICHI</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1 Toyota-cho</street><city>Toyota-shi Aichi 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310688" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>WATANABE SATORU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103333922" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>WATANABE, SATORU</last-name></addressbook></inventor><inventor mxw-id="PPAR1101646299" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>WATANABE, SATORU</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1 Toyota-cho</street><city>Toyota-shi Aichi 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103316740" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>SUZUKI YUTA</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313276" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>SUZUKI, YUTA</last-name></addressbook></inventor><inventor mxw-id="PPAR1101647680" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>SUZUKI, YUTA</last-name><address><street>c/o National University Corporation Nagoya University, 1, Furo-cho, Chikusa-ku,</street><city>Nagoya-shi, Aichi-ken, 464-8601</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103334192" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>EDAHIRO MASATO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103305495" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>EDAHIRO, MASATO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650726" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>EDAHIRO, MASATO</last-name><address><street>c/o National University Corporation Nagoya University, 1, Furo-cho, Chikusa-ku,</street><city>Nagoya-shi, Aichi-ken, 464-8601</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101646474" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Intes, Didier Gérard André</last-name><suffix>et al</suffix><iid>100042673</iid><address><street>Cabinet Beau de Loménie 158, rue de l'Université</street><city>75340 Paris Cedex 07</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2014053178-W"><document-id><country>JP</country><doc-number>2014053178</doc-number><kind>W</kind><date>20140212</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014129355-A1"><document-id><country>WO</country><doc-number>2014129355</doc-number><kind>A1</kind><date>20140828</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660687519" load-source="docdb">AL</country><country mxw-id="DS660689028" load-source="docdb">AT</country><country mxw-id="DS660687521" load-source="docdb">BE</country><country mxw-id="DS660611515" load-source="docdb">BG</country><country mxw-id="DS660607328" load-source="docdb">CH</country><country mxw-id="DS660693947" load-source="docdb">CY</country><country mxw-id="DS660689029" load-source="docdb">CZ</country><country mxw-id="DS660611973" load-source="docdb">DE</country><country mxw-id="DS660687522" load-source="docdb">DK</country><country mxw-id="DS660693948" load-source="docdb">EE</country><country mxw-id="DS660783867" load-source="docdb">ES</country><country mxw-id="DS660611516" load-source="docdb">FI</country><country mxw-id="DS660611517" load-source="docdb">FR</country><country mxw-id="DS660611974" load-source="docdb">GB</country><country mxw-id="DS660687523" load-source="docdb">GR</country><country mxw-id="DS660611983" load-source="docdb">HR</country><country mxw-id="DS660693949" load-source="docdb">HU</country><country mxw-id="DS660607329" load-source="docdb">IE</country><country mxw-id="DS660687524" load-source="docdb">IS</country><country mxw-id="DS660611518" load-source="docdb">IT</country><country mxw-id="DS660687525" load-source="docdb">LI</country><country mxw-id="DS660611984" load-source="docdb">LT</country><country mxw-id="DS660689030" load-source="docdb">LU</country><country mxw-id="DS660611985" load-source="docdb">LV</country><country mxw-id="DS660611986" load-source="docdb">MC</country><country mxw-id="DS660689035" load-source="docdb">MK</country><country mxw-id="DS660689036" load-source="docdb">MT</country><country mxw-id="DS660689037" load-source="docdb">NL</country><country mxw-id="DS660607330" load-source="docdb">NO</country><country mxw-id="DS660689038" load-source="docdb">PL</country><country mxw-id="DS660783868" load-source="docdb">PT</country><country mxw-id="DS660689043" load-source="docdb">RO</country><country mxw-id="DS660783869" load-source="docdb">RS</country><country mxw-id="DS660689044" load-source="docdb">SE</country><country mxw-id="DS660612000" load-source="docdb">SI</country><country mxw-id="DS660607335" load-source="docdb">SK</country><country mxw-id="DS660607336" load-source="docdb">SM</country><country mxw-id="DS660687526" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479919" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A control device according to the present invention includes a plurality of arithmetic units that operate in parallel. A sensor value of the control amount is input to the first arithmetic unit in a signal transmission sequence, and a correction amount for the manipulation amount is output from the last arithmetic unit in the signal transmission sequence. The first arithmetic unit has a controller that produces an output by processing the input sensor value, and the arithmetic units other than the first arithmetic unit has a delay element that delays an input by a predetermined number of steps and a controller that produces an output by processing the delayed input.<img id="iaf01" file="imgaf001.tif" wi="98" he="58" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759731" lang="EN" source="EPO" load-source="docdb"><p>A control device according to the present invention includes a plurality of arithmetic units that operate in parallel. A sensor value of the control amount is input to the first arithmetic unit in a signal transmission sequence, and a correction amount for the manipulation amount is output from the last arithmetic unit in the signal transmission sequence. The first arithmetic unit has a controller that produces an output by processing the input sensor value, and the arithmetic units other than the first arithmetic unit has a delay element that delays an input by a predetermined number of steps and a controller that produces an output by processing the delayed input.</p></abstract><description mxw-id="PDES98404620" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">The present invention relates to a control device and particularly to a control device that handles a physical phenomenon. In particular, it relates to a control device that determines a manipulation amount of a control object by feedback control.</p><heading id="h0002">Background Art</heading><p id="p0002" num="0002">Computational power of a computing device can be improved by increasing the operational frequency of the core. Depending on the environment of the computing device, however, the operational frequency may be unable to be increased. And from the viewpoint of power efficiency, there is a limit to improving the performance by increasing the operational frequency. In recent years, as disclosed in <patcit id="pcit0001" dnum="JP2010160537A"><text>Japanese Patent Laid-Open No. 2010-160537</text></patcit>, multi-core parallel computing devices with a plurality of cores mounted on a single semiconductor chip have been attracting attention. The multi-core parallel computing devices require lower operational frequency than single-core computing devices, provided that the amount of computation is the same. In addition, since tasks to be processed are allocated to the plurality of cores for parallel computation, the operating time can be reduced compared with the case where a single core performs the computation.</p><p id="p0003" num="0003">Advantageous applications of such a parallel computing device include a real-time control device. To control the operation or state of a complicated control object, the real-time control device uses a control algorithm that involves many numerical calculations. In particular, with a vehicle control device, which is a kind of the real-time control device, the control algorithm has becoming larger in scale and becoming more complicated year by year in order to meet the market and regulatory requirements. Thus, the operational load is increasing, and a single-core central processing unit (CPU) will probably become unable to complete the computation in the control period. Application of the parallel computing device to the real-time control device is expected as effective means for avoiding such a situation.</p><heading id="h0003">Citation List</heading><!-- EPO <DP n="2"> --><heading id="h0004">Patent Literature</heading><heading id="h0005">Patent Literature 1</heading><p id="p0004" num="0004"><patcit id="pcit0002" dnum="JP2010160537A"><text>Japanese Patent Laid-Open No. 2010-160537</text></patcit></p><heading id="h0006">Summary of Invention</heading><heading id="h0007">Technical Problem</heading><p id="p0005" num="0005">However, simply applying the parallel computing device to the control device is not sufficient to satisfactorily improve the performance of the control device. Conventionally, the control algorithm is parallelized in the software design phase. However, if the control algorithm is highly sequential, there is a limit to parallelization in the software design phase, that is, parallelization at the source code level. According to Amdahl's law, supposing that a program, the rate of the execution time of the part of which that can be parallelized is a, is executed using N cores, the rate S of performance improvement as a whole is expressed as S = 1/((1 - a) + a/N). As can be seen from this formula, with a program only a small part of which can be parallelized, the performance is difficult to improve in one step. In addition, since an actuator output occurs in response to a sensor input in each step, it is also difficult to take advantage of the parallelism of multiple cores to perform stream processing of the input data. In addition, since the parallelization involves an overhead, there is also a limit to parallelization based on division of the task into fine-grain tasks with a reduced amount of computation on a plan or module basis or to parallelization based on division of the loop. This is because, as the number of divisions increases, the cost of computation synchronization between the cores, communication of the computation results and the like increases, so that the expected performance becomes unable to be achieved by the parallel computation.</p><p id="p0006" num="0006">The difficulty of the parallelization at the source code level of a control algorithm that is highly sequential can be specifically described with reference to a real-time control device and, in particular, a control logic of a control device that handles a physical phenomenon. Control objects of such a control device have more or less a dead time, so that a control theory applicable to a time delay system can be used as the control algorithm. A representative time delay system control is an internal model control (IMC) that uses a prediction model, which is a model of a control object, to perform feedback control. In the following, a control logic of the internal model control used for a conventional control device and problems with parallelization of the control logic will be described.<!-- EPO <DP n="3"> --></p><p id="p0007" num="0007"><figref idrefs="f0004">Figure 6</figref> is a block diagram showing a control logic of a typical internal model control used for a conventional control device. A control object 2 has a dead time L, and a transfer function thereof can be expressed by Pe<sup>-Ls</sup>. In the internal model control, a feedback system including a prediction model 102, which is a model of the control object 2, and an IMC filter 101 is built. The prediction model 102 is a model of the control object 2 including the dead time L, so that a transfer function thereof can be expressed as Me<sup>-Ls</sup>. Although the transfer function Me<sup>-Ls</sup> of the prediction model 102 and the true transfer function Pe<sup>-Ls</sup> of the control object 2 ideally perfectly agree with each other, there is actually a modeling error between the transfer functions. A transfer function Cimc of the IMC filter 101 is defined as an inverse of a minimum phase element of the transfer function of the prediction model 102. The IMC filter 101 calculates a manipulation amount u for an actuator of the control object 2 based on a target value r of a control amount. The manipulation amount u and a disturbance d are input to the control object 2, and a sensor value y of the control amount affected by the disturbance d is obtained from the control object 2. The "sensor value" means a measurement value of the control amount measured by a sensor. The prediction model 102 is arranged in parallel with the control object 2, and the manipulation amount u is also input to the prediction model 102. A difference between the sensor value y and an output of the prediction model 102 is fed back to the target value r through a disturbance compensator 103, which is shown as a transfer function Cdis.</p><p id="p0008" num="0008">In the control logic shown in <figref idrefs="f0004">Figure 6</figref>, operations of the three controllers, the prediction model 102, the IMC filter 101 and the disturbance compensator 103, are sequential. The operational sequentiality can be shown by arranging the processings of the controllers on the time axis. <figref idrefs="f0004">Figure 7</figref> is a diagram showing a temporal relationship between the operations of the controllers in a case where the control logic described above is implemented in a conventional single-core computing device. In <figref idrefs="f0004">Figure 7</figref>, the horizontal axis is the time axis, and the processings in one step are arranged on the time axis. As shown in this drawing, output of the manipulation amount u to the control object 2, operation according to the prediction model (Me<sup>-Ls</sup>) 102, subtraction of the sensor value y, operation by the disturbance compensator (Cdis) 103, subtraction of the target value r, and operation by the IMC filter (Cimc) 101 are sequentially performed to calculate a manipulation amount u' for the next step.</p><p id="p0009" num="0009"><!-- EPO <DP n="4"> --> The control logic described above can be implemented in a multi-core computing device. When the control logic described above is implemented in a multi-core computing device, the processings in one step need to be divided into a plurality of tasks, and the tasks need to be allocated to the cores. In this example, discretization is performed on the basis of the three controllers, and then, the resulting tasks are allocated to the three cores. The addition and subtraction of the sensor value y and the addition and subtraction of the target value r are included in the preceding or following task. <figref idrefs="f0004">Figure 8</figref> is a diagram showing a temporal relationship between the processings in a case where the processings are allocated to a plurality of cores in this way. Each core has only to process a part of the tasks, so that the operating time of each core is reduced compared with the case where a single core performs all the processings. However, even if a plurality of cores is used for processing, the operational sequentiality is maintained, so that any task for any controller cannot be started before the task for the preceding controller is completed. That is, the plurality of cores is not allowed to perform the respective tasks at the same time, so that the processing of one step cannot be sped up as a whole of the computing device. As can be seen from the above description, even if the control logic described above is implemented in a multi-core computing device, parallelization is allowed only at the source code level, so that the operating time cannot be substantially reduced by such parallelization.</p><p id="p0010" num="0010">Another possibility is parallelization at the control logic level rather than the source code level. An update formula for the manipulation amount in the internal model control is considered. The following formula (1) is an update formula for the manipulation amount for the control logic shown in <figref idrefs="f0004">Figure 6</figref>. The variables and transfer functions in the update formula correspond to the variables and transfer functions of the controllers in the control logic shown in <figref idrefs="f0004">Figure 6</figref>.<br/>
[Formula 1] <maths id="math0001" num="(1)"><math display="block"><mrow><mi mathvariant="normal">u</mi><mo>=</mo><mfenced open="{" close="}" separators=""><mi mathvariant="normal">r</mi><mo>-</mo><mfenced separators=""><mi mathvariant="normal">y</mi><mo>-</mo><mi mathvariant="normal">u</mi><mo>*</mo><mi mathvariant="normal">M</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>⁢</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ls</mi></mrow></msup></mfenced><mo>*</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mfenced><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mrow></math><img id="ib0001" file="imgb0001.tif" wi="84" he="6" img-content="math" img-format="tif"/></maths></p><p id="p0011" num="0011">As can be seen from the update formula, the operational sequentiality involved with inputs and outputs between the tasks shown in <figref idrefs="f0004">Figure 8</figref> is caused by the parenthesization of the additions and subtractions in the update formula. That is, although additions and subtractions performed on a plurality of elements are implicitly synchronized between the cores, a sequential order occurs between the tasks once the additions and subtractions are parenthesized. Thus, to eliminate the sequentiality caused by the parenthesization, the<!-- EPO <DP n="5"> --> formula is expanded into terms relating to the variables r, y and u. Such a transformation of the formula (1) results in another update formula expressed by the following formula (2).<br/>
[Formula 2] <maths id="math0002" num="(2)"><math display="block"><mrow><mi mathvariant="normal">u</mi><mo>=</mo><mi mathvariant="normal">r</mi><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>-</mo><mi mathvariant="normal">y</mi><mo>*</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>+</mo><mi mathvariant="normal">u</mi><mo>*</mo><mi mathvariant="normal">M</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>⁢</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ls</mi></mrow></msup><mo>*</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mrow></math><img id="ib0002" file="imgb0002.tif" wi="124" he="6" img-content="math" img-format="tif"/></maths></p><p id="p0012" num="0012"><figref idrefs="f0005">Figure 9</figref> is a block diagram showing a control logic that corresponds to the formula (2). As can be seen from the relationship between the formulas (1) and (2), the control logic shown in <figref idrefs="f0005">Figure 9</figref> is an equivalent transformation of the control logic shown in <figref idrefs="f0004">Figure 6</figref>. In the equivalent transformation, one disturbance compensator (Cdis) and two IMC filters (Cimc) are duplicated. According to the control logic shown in <figref idrefs="f0005">Figure 9</figref>, the manipulation amount u is fed back to the manipulation amount u itself through the prediction model (Me<sup>-Ls</sup>) 112, the disturbance compensator (Cdis) 113 and the IMC filter (Cimc) 114, and at the same time, the sensor value y is fed back to the manipulation amount u through the disturbance compensator (Cdis) 115 and the IMC filter (Cimc) 116.</p><p id="p0013" num="0013">Operations of the terms relating to the variables r, y and u that are not parenthesized in the formula (2) are divided as separate tasks, and the tasks are allocated to the three cores. In addition, the additions and subtractions for calculating the manipulation amount u' for the next step from the outputs of the tasks are allocated to any of the cores. <figref idrefs="f0005">Figure 10</figref> is a diagram showing a temporal relationship between the processings in a case where the processings are allocated to the plurality of cores in this way. In <figref idrefs="f0005">Figure 10</figref>, the horizontal axis is the time axis, and the processings in one step are arranged on the time axis. In this drawing, a task 1 is allocated to a core 1, tasks 2 and 3 are allocated to a core 2, and tasks 4, 5 and 6 are allocated to a core 3. Since what is input to each core for the task(s) is a different one of the variables r, y and u, so that any core can start processing the task(s) without waiting for another core to complete its task(s). That is, when the control logic shown in <figref idrefs="f0005">Figure 9</figref> is implemented in a multi-core computing device, the cores can start operation in parallel.</p><p id="p0014" num="0014">However, in actual, the operating time per step in the flow shown in <figref idrefs="f0005">Figure 10</figref> is not shorter than the operating time per step in the flow shown in <figref idrefs="f0004">Figure 7 or 8</figref>. This is because the task relating to the term of the manipulation amount u includes operations relating to all the controllers. Specifically, the task includes the operation according to the prediction model (Me<sup>-Ls</sup>) (task 4), the operation by the disturbance compensator (Cdis) (task 5) and the operation by the IMC filter (Cimc) (task 6). Thus, the process is no more efficient than the process of the conventional single core computing device. On the<!-- EPO <DP n="6"> --> contrary, the operating time per step may increase since the results of the operations of the tasks by the cores are gathered at one core to perform additions and subtractions and therefore the cost increases.</p><p id="p0015" num="0015">Furthermore, the task relating to the term of the sensor value y includes the operation by the disturbance compensator (Cdis) (task 2) and the operation by the IMC filter (Cimc) (task 3). Therefore, the time required for processing of the task relating to the term of the sensor value y is the second longest after the time required for processing of the task relating to the term of the manipulation amount u. If the time required for processing of the task relating to the term of the manipulation amount u can be reduced, the next problem is to reduce the time required for processing of the task relating to the term of the sensor value y. If the tasks are distributed among a plurality of cores to perform parallel operation, it is desirable that the task allocated to each core is as small as possible, and the tasks are allocated to the cores as uniformly as possible.</p><p id="p0016" num="0016">The present invention has been devised in view of the problems described above. An object of the present invention is to provide a control device that determines a manipulation amount of a control object by feedback control so as to bring a control amount of the control object closer to a target value and reduces an operating time by parallelizing an operation involved with the feedback control.</p><heading id="h0008">Solution to Problem</heading><p id="p0017" num="0017">A control device according to the present invention is configured to determine a manipulation amount of a control object by feedback control so as to bring a control amount of the control object closer to a target value. The feedback control according to the present invention may be PI control, PID control, internal model control or control by Smith method, for example.</p><p id="p0018" num="0018">The control device according to the present invention includes a plurality of arithmetic units that operate in parallel. Preferably, the control device according to the present invention is implemented in a multi-core processor that has a plurality of cores, and a different core is used as each of the plurality of arithmetic units. Alternatively, each of the plurality of arithmetic units may be configured as a single core or a multi-core processor.</p><p id="p0019" num="0019"><!-- EPO <DP n="7"> --> The arithmetic units are configured so that a signal is sequentially transmitted by the arithmetic units. Furthermore, the arithmetic units are configured so that a sensor value of the control amount is input to the first arithmetic unit in a signal transmission sequence, and a correction amount for the manipulation amount is output from the last arithmetic unit in the signal transmission sequence. That is, the arithmetic units form a closed loop that feeds the sensor value of the control amount back to the manipulation amount for the next step.</p><p id="p0020" num="0020">The first arithmetic unit in the signal transmission sequence has a controller that produces an output by processing the sensor value of the control amount. The other arithmetic units have a delay element that delays an input by a predetermined number of steps and a controller that produces an output by processing the input delayed by the delay element. The number of steps by which each delay element delays the input is preferably one. The total delay time of the signal transmitted by the arithmetic units is determined by the total number of delay elements and the control period of the control device. The total delay time is a delay time newly introduced by the present invention for parallel operation of the controllers. A conventional control system comprising a control device and a control object inherently has a potential delay time including a dead time of the control object. With the arithmetic units of the control device according to the present invention, the total delay time for parallelization is selected not to cause a problem in control performance. Specifically, the total delay time for parallelization is preferably as small as possible. In particular, the total delay time for parallelization is preferably equal to or less than a half the setting time.</p><p id="p0021" num="0021">Preferably, the arithmetic units are configured so that the amount of operation of the controller is uniform between the arithmetic units. When the feedback control according to the present invention is the internal model control or an equivalent transformation thereof, the controller can include an element such as an IMC filter or a disturbance compensator.</p><p id="p0022" num="0022">When the feedback control according to the present invention is the internal model control or an equivalent transformation thereof, the control device preferably includes the second closed loop described below.</p><p id="p0023" num="0023">The second closed loop includes a plurality of arithmetic units that operate in parallel and is configured so that a signal is sequentially transmitted by the arithmetic units.<!-- EPO <DP n="8"> --> Furthermore, the second closed loop is configured so that the manipulation amount of the control object is input to the first arithmetic unit in the signal transmission sequence, and the correction amount for the manipulation amount is output from the last arithmetic unit in the signal transmission sequence.</p><p id="p0024" num="0024">Each of the arithmetic units forming the second closed loop has a delay element that delays an input by a predetermined number of steps and a controller that produces an output by processing the input delayed by the delay element. The number of steps by which each delay element delays the input is preferably one. The total delay time of the signal transmitted by the arithmetic units is determined by the total number of delay elements and the control period of the control device. The arithmetic units of the second closed loop are configured so that the sum of the total delay time of the delay elements and the total dead time of the controllers is equal to the sum of the dead time of the control object and the total delay time of the delay elements of the first closed loop.</p><p id="p0025" num="0025">The arithmetic units forming the second closed loop are preferably configured so that the amount of operation of the controller is uniform between the arithmetic units. The controller can include an element such as a prediction model of the control object that ignores the dead time, a dead time element, an IMC filter and a disturbance compensator. The dead time of the dead time element is the sum of the dead time of the control object and the total delay time of the delay elements of the first closed loop minus the total delay time of the delay elements of the second closed loop. An appropriate combination of these elements forms the controller. Preferably, a controller including the prediction model that ignores the dead time, a controller including the dead time element, a controller including the IMC filter and a controller including the disturbance compensator are separately provided.</p><heading id="h0009">Advantageous Effects of Invention</heading><p id="p0026" num="0026">As described above, with the control device according to the present invention, operations involved with the feedback control are allocated to a plurality of arithmetic units in a distributed manner. Furthermore, delay elements for a predetermined number of steps are introduced to the second and following arithmetic units in the signal transmission sequence, and the output of another arithmetic unit for a step preceding the current step by the predetermined number of steps is input to the controller of each of these arithmetic units. Therefore, the arithmetic units can start their respective operations at the<!-- EPO <DP n="9"> --> same time without waiting for another arithmetic unit to complete its operation. That is, with the control device according to the present invention, the operating time of the whole of the control device is reduced by parallelization of the operations by the feedback control.</p><heading id="h0010">Brief Description of the Drawings</heading><p id="p0027" num="0027"><ul><li>[<figref idrefs="f0001">Figure 1] Figure 1</figref> is a block diagram showing a control logic of an internal model control of a control device according to an embodiment of the present invention.</li><li>[<figref idrefs="f0001">Figure 2] Figure 2</figref> is a conceptual diagram showing a breakdown of a potential delay time of the whole of a control system.</li><li>[<figref idrefs="f0002">Figure 3] Figure 3</figref> is a diagram showing a temporal relationship between operations of controllers in a case where the control logic shown in <figref idrefs="f0001">Figure 1</figref> is implemented in a multi-core computing device.</li><li>[<figref idrefs="f0003">Figure 4] Figure 4</figref> is a block diagram showing a control logic of an internal model control of a control device examined in the course of creation of the present invention.</li><li>[<figref idrefs="f0003">Figure 5] Figure 5</figref> is a diagram showing a temporal relationship between operations of controllers in a case where the control logic shown in <figref idrefs="f0003">Figure 4</figref> is implemented in a multi-core computing device.</li><li>[<figref idrefs="f0004">Figure 6] Figure 6</figref> is a block diagram showing a control logic of a typical internal model control used for a conventional control device.</li><li>[<figref idrefs="f0004">Figure 7] Figure 7</figref> is a diagram showing a temporal relationship between operations of controllers in a case where the control logic shown in <figref idrefs="f0004">Figure 6</figref> is implemented in a single-core computing device.</li><li>[<figref idrefs="f0004">Figure 8] Figure 8</figref> is a diagram showing a temporal relationship between operations of controllers in a case where the control logic shown in <figref idrefs="f0004">Figure 6</figref> is implemented in a multi-core computing device.</li><li>[<figref idrefs="f0005">Figure 9] Figure 9</figref> is a block diagram showing a control logic of an internal model control obtained by equivalent transformation of the control logic shown in <figref idrefs="f0004">Figure 6</figref>.</li><li>[<figref idrefs="f0005">Figure 10] Figure 10</figref> is a diagram showing a temporal relationship between operations of controllers in a case where the control logic shown in <figref idrefs="f0005">Figure 9</figref> is implemented in a multi-core computing device.</li></ul></p><heading id="h0011">Description of Embodiment</heading><p id="p0028" num="0028"><!-- EPO <DP n="10"> --> First, before describing an embodiment of the present invention, a control device (referred to as a reference device, hereinafter) examined in the course of creation of the present invention will be described.</p><p id="p0029" num="0029">In the examination of a control logic of an internal model control of the reference device, attention is focused on the term of the manipulation amount u in the formula (2) described above. The term of the manipulation amount u includes the transfer function Me<sup>-Ls</sup> of the prediction model, and the transfer function Me<sup>-Ls</sup> of the prediction model includes the dead time L. Supposing that the dead time L is longer than three control periods T, an update formula of the manipulation amount u expressed by the following formula (3) is obtained by deriving three e<sup>-Ts</sup> from e<sup>-Ls</sup> in the formula (2) and distributing the three e<sup>-Ts</sup> to the elements. Note that it is assumed that all the transfer functions involved with the internal model control are linear transfer functions.<br/>
[Formula 3] <maths id="math0003" num="(3)"><math display="block"><mrow><mi mathvariant="normal">u</mi><mo>=</mo><mi mathvariant="normal">r</mi><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>-</mo><mi mathvariant="normal">y</mi><mo>*</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>+</mo><mi mathvariant="normal">u</mi><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">M</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>⁢</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mfenced separators=""><mi mathvariant="normal">L</mi><mo>-</mo><mn mathvariant="normal">4</mn><mo>⁢</mo><mi mathvariant="normal">T</mi></mfenced><mo>⁢</mo><mi mathvariant="normal">s</mi></mrow></msup><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mrow></math><img id="ib0003" file="imgb0003.tif" wi="155" he="6" img-content="math" img-format="tif"/></maths></p><p id="p0030" num="0030"><figref idrefs="f0003">Figure 4</figref> is a block diagram showing the control logic of the internal model control of the reference device. The control logic shown in <figref idrefs="f0003">Figure 4</figref> corresponds to the formula (3) described above. As can be seen from the relationship between the formulas (2) and (3), the control logic shown in <figref idrefs="f0003">Figure 4</figref> is an equivalent transformation of the control logic shown in <figref idrefs="f0005">Figure 9</figref>.</p><p id="p0031" num="0031">With the reference device, a target value r of a control amount is input to an IMC filter (Cimc) 11. The IMC filter 11 outputs a manipulation amount u, and the manipulation amount u and a disturbance d are input to a control object (Pe<sup>-Ls</sup>) 2, which is to be controlled. In the reference device, two closed loops are formed. A first closed loop is a closed loop that calculates a correction amount from a sensor value y of the control amount output from the control object 2 and feeds the correction amount back to the manipulation amount u for the next step. A second closed loop is a closed loop that calculates a correction amount from the manipulation amount u yet to be input to the control object 2 and feeds the correction amount back to the manipulation amount u for the next step.</p><p id="p0032" num="0032">The second closed loop includes a first arithmetic unit 31, a second arithmetic unit 32, a third arithmetic unit 33 and a fourth arithmetic unit 34 viewed in a signal transmission sequence. The manipulation amount u is input to the first arithmetic unit 31,<!-- EPO <DP n="11"> --> and the correction amount for the manipulation amount u for the next step is output from the fourth arithmetic unit 34. The first arithmetic unit 31 comprises a delay element (D) 18 and a controller (M) 12. The second arithmetic unit 32 comprises a delay element (D) 19 and a controller (e<sup>-(L-4T)s</sup>) 13. The third arithmetic unit 33 comprises a delay element (D) 20 and a controller (Cdis) 14. The fourth arithmetic unit 34 comprises a delay element (D) 21 and a controller (Cimc) 15.</p><p id="p0033" num="0033">The delay elements (D) 18, 19, 20 and 21 are elements that delay an input signal by one step and output the delayed signal. e<sup>-Ts</sup> in the formula (3) is replaced with the delay element (D) as a result of discretization in the process of implementation. With such a configuration, the manipulation amount u for the preceding step is input to the controller 12, an output of the controller 12 for the preceding step is input to the controller 13, an output of the controller 13 for the preceding step is input to the controller 14, and an output of the controller 14 for the preceding step is input to the controller 15. The controller 12 is equivalent to the prediction model (Me<sup>-Ls</sup>) from which a dead time element (e<sup>-LS</sup>) has been separated. That is, the controller 12 is a prediction model that ignores the dead time element (e<sup>-LS</sup>). The controller 13 is equivalent to the dead time element (e<sup>-LS</sup>) from which delay elements (e<sup>-TS</sup>) for four control periods have been separated. The controller 13 is the dead time element (e<sup>-(L-4T)s</sup>) converted into a rational function by Pade approximation. The controller 14 is corresponds to the disturbance compensator, and the controller 15 corresponds to the IMC filter.</p><p id="p0034" num="0034">The first closed loop includes a fifth arithmetic unit 35. The fifth arithmetic unit 35 comprises a controller (Cdis) 16 and a controller (Cimc) 17. The controller 16 corresponds to the disturbance compensator, and the controller 17 corresponds to the IMC filter. The sensor value y is input to the controller 16, and the controller 17 outputs a correction amount for the manipulation amount u for the next step. In the fifth arithmetic unit 35, the controllers 16 and 17 sequentially perform operations.</p><p id="p0035" num="0035">The reference device is implemented in a multi-core computing device. In the implementation, the IMC filter 11, the first arithmetic unit 31, the second arithmetic unit 32, the third arithmetic unit 33, the fourth arithmetic unit 34 and the fifth arithmetic unit 35 are embodied as separate cores. That is, the operation by the IMC filter to convert the target value r into the manipulation amount u, the operation of the transfer function of the second closed loop to feed back the manipulation amount u and the operation of the transfer function of the first closed loop to feed back the sensor value y are separated as<!-- EPO <DP n="12"> --> different tasks, and the operation of the transfer function of the second closed loop is divided into separate tasks of the operations relating to the four controllers, and the resulting tasks are allocated to six cores in total.</p><p id="p0036" num="0036"><figref idrefs="f0003">Figure 5</figref> is a diagram showing a temporal relationship between operations of the controllers in a case where the control logic shown in <figref idrefs="f0003">Figure 4</figref> is implemented in a multi-core computing device. In <figref idrefs="f0003">Figure 5</figref>, the horizontal axis is the time axis, and the processings in one step are arranged on the time axis. In this drawing, a task 1 relating to the operation by the IMC filter 11 is allocated to a core 1, and the target value r is input for the task 1. A task 2 relating to the operation by the controller 16 and a task 3 relating to the operation by the controller 17 are allocated to a core 2, and the sensor value y is input for the tasks 2 and 3. In the core 2, the tasks 2 and 3 are sequentially processed.</p><p id="p0037" num="0037">Tasks relating to the operations by the four controllers of the second closed loop are allocated to cores 3, 4, 5 and 6 in a distributed manner. A task 4 relating to the operation by the controller 12 is allocated to the core 3. For the task 4, the manipulation amount u delayed by one step by the delay element 18, that is, the previous value of the manipulation amount u, is input. A task 5 relating to the operation by the controller 13 is allocated to the core 4. For the task 5, an output of the task 4 delayed by one step by the delay element 19 is input. A task 6 relating to the operation by the controller 14 is allocated to the core 5. For the task 6, an output of the task 5 delayed by one step by the delay element 20 is input. A task 7 relating to the operation by the controller 15 is allocated to the core 6. For the task 7, an output of the task 6 delayed by one step by the delay element 21 is input. Additions and subtractions for calculating the manipulation amount u' for the next step from the outputs of the tasks 1, 3 and 7 are allocated to any one of the cores, preferably, the core that performs the smallest amount of operation. In the example shown in <figref idrefs="f0003">Figure 5</figref>, the core 5 performs the additions and subtractions for calculating the manipulation amount u'.</p><p id="p0038" num="0038">At the start of the step, the target value r is read via an input port for the task 1, and the sensor value y is read via the input port for the task 2. In addition, at the start of the step, the previous values of the outputs of the delay elements are read for the tasks 4, 5, 6 and 7. In the first step, however, a value set as an initial value at a time 0 is read from the delay elements for the tasks 4, 5, 6 and 7. In any case, with the operations by the cores 3, 4, 5, and 6, as with the operations by the cores 1 and 2, any task can be started without waiting for another core to complete its task(s). Therefore, as with the cores 1 and 2, the<!-- EPO <DP n="13"> --> cores 3, 4, 5 and 6 can start operations in parallel without waiting for another core to complete its operation.</p><p id="p0039" num="0039">With the reference device described above, the operations involved with the internal model control, or more specifically, the operations of the second closed loop to feed back the manipulation amount u are distributed among the cores 3, 4, 5 and 6, and the cores 3, 4, 5 and 6 perform operations in parallel. Therefore, the reference device can reduce the operating time required for processing of one step and improve the operating speed as a whole of the device, compared with conventional devices.</p><p id="p0040" num="0040">However, the reference device can be further improved. In <figref idrefs="f0003">Figure 5</figref>, the core 2 sequentially processes the tasks 2 and 3. The task 2 requires basically the same amount of operation as the task 6 processed by the core 5, and the task 3 requires basically the same amount of operation as the task 7 processed by the core 6. Therefore, comparing the amount of operation between the cores shows that the core 2 requires a markedly larger amount of operation than the other cores. Thus, the operating speed of the whole of the reference device is determined by the operating time of the core 2. This means that, if the operating time of the core 2 can be reduced, the operating speed of the whole of the device can be further improved.</p><p id="p0041" num="0041">A control device according to an embodiment of the present invention is an improvement of the reference device in which the operating speed of the whole of the device is further improved.</p><p id="p0042" num="0042">First, points of improvement of the control device according to this embodiment will be generally described.</p><p id="p0043" num="0043">The term of the sensor value y in the formula (3) described above includes two elements expressed by the transfer functions Cdis and Cimc. These elements have a sequentiality, so that a delay time needs to be introduced in order to allow parallelization. However, the term of the sensor value y includes no dead time element, and therefore, a delay time cannot be derived from the dead time element, unlike the term of the manipulation amount u.</p><p id="p0044" num="0044">In this regard, this embodiment focuses attention on a potential delay time that inherently exists in a conventional control system. <figref idrefs="f0001">Figure 2</figref> is a conceptual diagram<!-- EPO <DP n="14"> --> showing a breakdown of a potential delay time of the whole of the control system. As shown in this drawing, in a common control system, there are various kinds of delays in addition to a dead time (Plant) of the control object. For example, a sensor delay ("sensor") and an A/D conversion delay ("A/D") are delays caused by hardware, and a platform delay ("P/F"), a task activation delay ("A") and a dead time modeling error are delays caused by software.</p><p id="p0045" num="0045">In general, dividing a sequential term relating to the sensor value read via the input port into n elements requires a delay time that is (n - 1) times as long as a control period T. Delay elements for one control period are disposed between the elements, and an output for the preceding step of the preceding element is used as an input to each of the second and following elements. As a result, each element can start its operation without waiting for another element to complete its operation, so that operations of the n divisional elements can be performed in parallel. If the delay time newly introduced for parallelization is sufficiently smaller than the potential delay time of the whole of the control system, the effect of the introduced delay time on the control performance can be reduced. In the case of the update formula (3), the term of the sensor value y can be divided into two elements, so that the introduced delay time can be one control period. The delay time of one control period is sufficiently smaller than the potential delay time, and therefore, the effect of the delay time on the control performance can be regarded as falling within an acceptable error range.</p><p id="p0046" num="0046">In this case, the input value processed by the actual control device is the sensor value y delayed by one control period. To reduce the effect of the introduced delay time on the control performance, an equal delay time is desirably introduced into the term of the manipulation amount u, which is in a parallel relationship with the term of the sensor value y. This can be achieved by modifying the dead time of the prediction model by the introduced delay time and modifying the transfer function of the prediction model from Me<sup>-Ls</sup> to Me<sup>-(L + T)s</sup>. In addition, the transfer function Cdis of the disturbance compensator needs to be redesigned to these modifications. The transfer function of the redesigned disturbance compensator is denoted as Cdis2.</p><p id="p0047" num="0047">Making the modifications described above to the formula (3) results in a new update formula expressed by the following formula (4).<br/>
[Formula 4]<!-- EPO <DP n="15"> --> <maths id="math0004" num="(4)"><math display="block"><mrow><mrow><mrow><mi mathvariant="normal">u</mi><mo>=</mo><mi mathvariant="normal">r</mi><mo>*</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>-</mo><mi mathvariant="normal">y</mi><mo>*</mo><mi mathvariant="normal">Cdis</mi><mo>⁢</mo><mn>2</mn><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mrow></mrow><mo>+</mo><mi mathvariant="normal">u</mi><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">M</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mfenced separators=""><mfenced separators=""><mi mathvariant="normal">L</mi><mo>-</mo><mn mathvariant="normal">4</mn><mo>⁢</mo><mi mathvariant="normal">T</mi></mfenced><mo>+</mo><mi mathvariant="normal">T</mi></mfenced><mo>⁢</mo><mi mathvariant="normal">s</mi></mrow></msup><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">Cdis</mi><mfenced><mi mathvariant="normal">s</mi></mfenced><mo>*</mo><msup><mi mathvariant="normal">e</mi><mrow><mo>-</mo><mi mathvariant="normal">Ts</mi></mrow></msup><mo>⁢</mo><mi mathvariant="normal">Cimc</mi><mfenced><mi mathvariant="normal">s</mi></mfenced></mrow></math><img id="ib0004" file="imgb0004.tif" wi="101" he="15" img-content="math" img-format="tif"/></maths></p><p id="p0048" num="0048"><figref idrefs="f0001">Figure 1</figref> is a block diagram showing a control logic of an internal model control of the control device according to this embodiment. The control logic shown in <figref idrefs="f0001">Figure 1</figref> corresponds to the formula (4) described above. As can be seen from the relationship between the formulas (3) and (4), the control logic shown in <figref idrefs="f0001">Figure 1</figref> is a modification of the control logic of the reference device shown in <figref idrefs="f0003">Figure 4</figref>. In the control logic shown in <figref idrefs="f0001">Figure 1</figref>, elements denoted by the same reference numerals as those of the control logic shown in <figref idrefs="f0003">Figure 4</figref> are elements configured the same as those of the reference device.</p><p id="p0049" num="0049">As with the reference device, in the control device according to this embodiment, two closed loops are formed. A first closed loop is a closed loop that calculates a correction amount from a sensor value y of a control amount output from a control object 2 and feeds the correction amount back to a manipulation amount u for the next step. A second closed loop is a closed loop that calculates a correction amount from the manipulation amount u yet to be input to the control object 2 and feeds the correction amount back to the manipulation amount u for the next step.</p><p id="p0050" num="0050">The second closed loop includes a first arithmetic unit 41, a second arithmetic unit 42, a third arithmetic unit 43 and a fourth arithmetic unit 44 viewed in the signal transmission sequence. Of these arithmetic units, the first arithmetic unit 41 and the fourth arithmetic unit 44 are common to the first arithmetic unit 31 and the fourth arithmetic unit 34 of the reference device shown in <figref idrefs="f0003">Figure 4</figref> and are not different from those arithmetic units of the reference device. However, the second arithmetic unit 42 and the third arithmetic unit 43 include a modification from the second arithmetic unit 32 and the third arithmetic unit 33 of the reference device. A controller 24 of the second arithmetic unit 42 has a dead time element e<sup>-((L-4T)+T)s</sup>, which is the dead time element e<sup>-(L-4T)s</sup> of the controller 13 of the reference device plus a delay element e<sup>-Ts</sup> for one control period. A controller 25 of the third arithmetic unit 43 uses the transfer function Cdis2 of the modified disturbance compensator.</p><p id="p0051" num="0051">The first closed loop includes a fifth arithmetic unit 45 and a sixth arithmetic unit 46 viewed in the signal transmission sequence. The sensor value is input to the fifth arithmetic unit 45, and the sixth arithmetic unit 46 outputs a correction amount for the manipulation amount u for the next step. The fifth arithmetic unit 45 comprises only a controller (Cdis2) 23. The controller 23 corresponds to the modified disturbance<!-- EPO <DP n="16"> --> compensator. On the other hand, the sixth arithmetic unit 46 comprises a delay element (D) 22 and a controller (Cimc) 17. The delay element 22 is an element that delays an input signal by one step and outputs the delayed signal. e<sup>-Ts</sup> of the term of y in the formula (4) is replaced with the delay element as a result of discretization in the process of implementation. With such a configuration, an output of the controller 23 for the preceding step is input to the controller 17.</p><p id="p0052" num="0052">The control device according to this embodiment is implemented in a multi-core computing device. In the implementation, the IMC filter 11, the first arithmetic unit 41, the second arithmetic unit 42, the third arithmetic unit 43, the fourth arithmetic unit 44, the fifth arithmetic unit 45 and the sixth arithmetic unit 46 are embodied as separate cores. That is, the operation by the IMC filter to convert the target value r into the manipulation amount u, the operations relating to the four controllers of the second closed loop and the operations relating to the two controllers of the first closed loop are separated as different tasks, and the tasks are allocated to seven cores in total.</p><p id="p0053" num="0053"><figref idrefs="f0002">Figure 3</figref> is a diagram showing a temporal relationship between operations of the controllers in a case where the control logic shown in <figref idrefs="f0001">Figure 1</figref> is implemented in a multi-core computing device. In <figref idrefs="f0002">Figure 3</figref>, the horizontal axis is the time axis, and the processings in one step are arranged on the time axis. In this drawing, a task 1 relating to the operation by the IMC filter 11 is allocated to a core 1, and the target value r read via an input port is input for the task 1.</p><p id="p0054" num="0054">Tasks relating to the operations by the two controllers of the first closed loop are allocated to cores 2 and 3 in a distributed manner. A task 2 relating to the operation by the controller 23 is allocated to the core 2, and the sensor value y read via the input port is input for the task 2. A task 5 relating to the operation by the controller 17 is allocated to the core 3. An output of the task 2 delayed by one step by the delay element 22 is input for the task 3.</p><p id="p0055" num="0055">Tasks relating to the operations by the four controllers of the second closed loop are allocated to cores 4, 5, 6 and 7 in a distributed manner. For the task 4 relating to the operation by the controller 12 allocated to the core 4, the manipulation amount u delayed by one step by the delay element 18 is input. For the task 5 relating to the operation by the controller 24 allocated to the core 5, an output of the task 4 delayed by one step by the delay element 19 is input. For the task 6 relating to the operation by the controller 25<!-- EPO <DP n="17"> --> allocated to the core 6, an output of the task 5 delayed by one step by the delay element 20 is input. For the task 7 relating to the operation by the controller 15 allocated to the core 7, an output of the task 6 delayed by one step by the delay element 21 is input. Additions and subtractions for calculating the manipulation amount u' for the next step from the outputs of the tasks 1, 3 and 7 are allocated to any one of the cores, preferably, the core that performs the smallest amount of operation. In the example shown in <figref idrefs="f0002">Figure 3</figref>, the core 3 performs the additions and subtractions for calculating the manipulation amount u'.</p><p id="p0056" num="0056">At the start of the step, the target value r is read via the input port for the task 1, and the sensor value y is read via the input port for the task 2. In addition, at the start of the step, the previous values of the outputs of the delay elements are read for the tasks 3, 4, 5, 6 and 7. In the first step, however, a value set as an initial value at a time 0 is read from the delay elements for the tasks 3, 4, 5, 6 and 7. In any case, any core does not need to wait for another core to complete its task before starting its task; and all the cores can start operations in parallel in each step.</p><p id="p0057" num="0057">As described above, with the control device according to this embodiment, operations by the first closed loop that feeds back the sensor value y are distributed among the cores 2 and 3, and operations by the second closed loop that feeds back the manipulation amount u are distributed among the cores 4, 5, 6 and 7, and all the cores including these cores perform operations in parallel. The tasks are distributed in such a manner that substantially equal amounts of operation are allocated to the cores, so that the operating time of a core is prevented from being markedly longer than the operating times of the other cores. Therefore, with the control device according to this embodiment, the operating time required for processing of one step can be reduced compared with the operating time of the reference device, and the operating speed of the whole of the device can be further improved.</p><p id="p0058" num="0058">The control object of the control device according to this embodiment may be an internal combustion engine of an automobile. The internal combustion engine may be a spark ignition engine or a diesel engine. For example, if the control object is the spark ignition engine, the control amount may be torque, and the manipulation amount may be throttle. Alternatively, if the control object is the spark ignition engine, the control amount may be torque, and the manipulation amount may be fuel injection amount. If the control object is a supercharged engine, the control amount may be supercharging pressure, and the manipulation amount may be waist gate valve opening or variable nozzle opening.<!-- EPO <DP n="18"> --> Furthermore, if the control object is an engine provided with an EGR device, the control amount may be EGR rate, and the manipulation amount may be EGR opening.</p><p id="p0059" num="0059">When the control object is an internal combustion engine, the control period T of the control device can be changed in synchronization with the combustion cycle of the internal combustion engine. Of course, the control period T of the control device may be a fixed value. For example, the control period T may be set with respect to the combustion cycle at the time of maximum permissible rotation of the internal combustion engine.</p><p id="p0060" num="0060">Furthermore, the control object of the control device according to this embodiment is not limited to the internal combustion engine. For example, the control device according to this embodiment can be applied to a hybrid system of an internal combustion engine and an electric motor or a fuel cell system. The control device according to this embodiment is suitable for a control object that requires real-time online control. In particular, the control device according to this embodiment is suitable for controlling a power unit of a mobile body and particularly suitable as a control device mounted on a mobile body. Of course, the control device according to this embodiment can be applied not only to the power unit of a mobile body but also to a wide variety of control objects including stationary installations.</p><p id="p0061" num="0061">The present invention is not limited to the embodiment described above, and various modifications can be made without departing form the spirit of the present invention. For example, if all the transfer functions involved with the internal model control are linear transfer functions, the controller 23 of the fifth arithmetic unit 45 and the controller 17 of the sixth arithmetic unit 46 can be interchanged. Furthermore, the controllers 12, 24, 25 and 15 of the first to fourth arithmetic units 41, 42, 43 and 44 are also interchanged.</p><p id="p0062" num="0062">Although the number of steps by which the delay element 22 of the first closed loop delays the input is preferably one as described in the above embodiment, the delay element 22 may delay the input by a plurality of steps. Similarly, the number of steps by which the delay elements 18, 19, 20 and 21 of the second closed loop delay the respective inputs is also preferably one as described in the above embodiment, the delay elements 18, 19, 20 and 21 may delay the respective inputs by a plurality of steps by adjusting the dead time of the controller 24. In that case, it is necessary only that the sum of the total delay time of<!-- EPO <DP n="19"> --> the delay elements 17, 18 and 19 and the dead time of the controller 12 is equal to the sum of the dead time of the control object 2 and the delay time of the delay element 22 of the first closed loop.</p><p id="p0063" num="0063">Although the present invention is applied to the control device that determines the manipulation amount of the control object by internal model control in the embodiment described above, the control algorithm to which the present invention can be applied is not limited to the internal model control. The present invention can be applied to control according to Smith method, which is capable of equivalent transformation with the internal model control, as well as to various kinds of feedback controls such as PI control and PID control.</p><heading id="h0012">Reference Signs List</heading><p id="p0064" num="0064"><dl id="dl0001" compact="compact"><dt>2</dt><dd>control object</dd><dt>11</dt><dd>IMC filter</dd><dt>12, 15, 17, 23, 24, 25</dt><dd>controller</dd><dt>18, 19, 20, 21, 22</dt><dd>delay element</dd><dt>41, 42, 43, 44, 45, 46</dt><dd>arithmetic unit</dd></dl></p></description><claims mxw-id="PCLM90459561" lang="EN" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-en-0001" num="0001"><claim-text>A control device that determines a manipulation amount of a control object by feedback control so as to bring a control amount of the control object closer to a target value, comprising:
<claim-text>a plurality of arithmetic units that operate in parallel,</claim-text>
<claim-text>wherein the plurality of arithmetic units are configured so that a signal is sequentially transmitted by the arithmetic units, a sensor value of the control amount is input to the first arithmetic unit in a signal transmission sequence, and a correction amount for the manipulation amount is output from the last arithmetic unit in the signal transmission sequence,</claim-text>
<claim-text>the first arithmetic unit has a controller that produces an output by processing the sensor value of the control amount, and</claim-text>
<claim-text>the arithmetic units other than the first arithmetic unit have a delay element that delays an input by a predetermined number of steps and a controller that produces an output by processing the input delayed by the delay element.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The control device according to claim 1, wherein the control device is implemented in a multi-core processor that has a plurality of cores, and<br/>
a different core is used as each of the plurality of arithmetic units.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The control device according to claim 1 or 2, wherein the plurality of arithmetic units are configured so that the amount of operation of the controller is uniform between the arithmetic units.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The control device according to any one of claims 1 to 3, wherein the control device is configured to determine the manipulation amount of the control object by internal model control, and<br/>
any one of the controllers of the plurality of arithmetic units includes an IMC filter.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The control device according to any one of claims 1 to 4, wherein the control device is configured to determine the manipulation amount of the control object by internal model control, and<br/>
any one of the controllers of the plurality of arithmetic units includes a disturbance compensator.<!-- EPO <DP n="21"> --></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The control device according to any one of claims 1 to 5, wherein the control object is an internal combustion engine, and a control period of the control device is set with respect to a combustion cycle of the internal combustion engine at the time of maximum permissible rotation.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The control device according to any one of claims 1 to 5, wherein the control object is an internal combustion engine, and a control period of the control device is changed in synchronization with a combustion cycle of the internal combustion engine.</claim-text></claim></claims><drawings mxw-id="PDW20422283" load-source="patent-office"><!-- EPO <DP n="22"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="155" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0002" num="3"><img id="if0002" file="imgf0002.tif" wi="141" he="160" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0003" num="4,5"><img id="if0003" file="imgf0003.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0004" num="6,7,8"><img id="if0004" file="imgf0004.tif" wi="165" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0005" num="9,10"><img id="if0005" file="imgf0005.tif" wi="165" he="179" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="164" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
