<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960757-A1" country="EP" doc-number="2960757" kind="A1" date="20151230" family-id="53476771" file-reference-id="305902" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451520" ucid="EP-2960757-A1"><document-id><country>EP</country><doc-number>2960757</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-15173280-A" is-representative="YES"><document-id mxw-id="PAPP193866008" load-source="docdb" format="epo"><country>EP</country><doc-number>15173280</doc-number><kind>A</kind><date>20150623</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193866009" load-source="patent-office" format="original"><country>EP</country><doc-number>15173280.7</doc-number><date>20150623</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162034676" ucid="JP-2014131710-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014131710</doc-number><kind>A</kind><date>20140626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988525706" load-source="docdb">G06F   3/044       20060101ALI20151014BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526607" load-source="docdb">G06F   3/041       20060101AFI20151014BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1898973537" load-source="docdb" scheme="CPC">G06F   3/0418      20130101 LI20160906BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984697799" load-source="docdb" scheme="CPC">G06F   3/044       20130101 LI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984700326" load-source="docdb" scheme="CPC">G09G2354/00        20130101 LA20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984701021" load-source="docdb" scheme="CPC">G06F2203/04104     20130101 LA20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703923" load-source="docdb" scheme="CPC">G09G   3/20        20130101 FI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984705775" load-source="docdb" scheme="CPC">G09G2380/10        20130101 LA20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546026" lang="DE" load-source="patent-office">EINGABEVORRICHTUNG MIT BERÜHRUNGSBILDSCHIRM</invention-title><invention-title mxw-id="PT165546027" lang="EN" load-source="patent-office">TOUCH-TYPE INPUT DEVICE</invention-title><invention-title mxw-id="PT165546028" lang="FR" load-source="patent-office">DISPOSITIF D'ENTREE DE TYPE TACTILE</invention-title><citations><patent-citations><patcit mxw-id="PCIT335741827" load-source="docdb" ucid="JP-2010009321-A"><document-id format="epo"><country>JP</country><doc-number>2010009321</doc-number><kind>A</kind><date>20100114</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335741972" load-source="docdb" ucid="JP-4994489-B2"><document-id format="epo"><country>JP</country><doc-number>4994489</doc-number><kind>B2</kind><date>20120808</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335739310" load-source="docdb" ucid="US-20120293447-A1"><document-id format="epo"><country>US</country><doc-number>20120293447</doc-number><kind>A1</kind><date>20121122</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT411611342" load-source="docdb" ucid="US-20130038573-A1"><document-id format="epo"><country>US</country><doc-number>20130038573</doc-number><kind>A1</kind><date>20130214</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT411611343" load-source="docdb" ucid="US-20140092033-A1"><document-id format="epo"><country>US</country><doc-number>20140092033</doc-number><kind>A1</kind><date>20140403</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335745073" load-source="docdb" ucid="US-20140139478-A1"><document-id format="epo"><country>US</country><doc-number>20140139478</doc-number><kind>A1</kind><date>20140522</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT411611344" load-source="docdb" ucid="US-20140160038-A1"><document-id format="epo"><country>US</country><doc-number>20140160038</doc-number><kind>A1</kind><date>20140612</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103310632" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOKAI RIKA CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103306496" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO</last-name></addressbook></applicant><applicant mxw-id="PPAR1101647700" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO</last-name><iid>100154227</iid><address><street>260, Toyota 3-chome, Ohguchi-cho</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103341361" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>TOYOTA MOTOR CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103314450" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR1101644952" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Toyota Jidosha Kabushiki Kaisha</last-name><iid>101467229</iid><address><street>1, Toyota-cho</street><city>Toyota-shi, Aichi 471-8571</city><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103343008" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>SMK KK</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103336785" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>SMK CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR1101651833" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>SMK Corporation</last-name><iid>100223373</iid><address><street>5-5, Togoshi 6-chome, Shinagawa-ku</street><city>Tokyo 142</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103316336" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>IMAI TAKAO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103304978" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>IMAI, TAKAO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101643196" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>IMAI, TAKAO</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103322445" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>UENO TORU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103321477" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>UENO, TORU</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648329" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>UENO, TORU</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103340534" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>MURASE KEIJI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313058" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>MURASE, KEIJI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101642377" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>MURASE, KEIJI</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103303901" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>TAKAI YUJI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103327299" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>TAKAI, YUJI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101653412" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>TAKAI, YUJI</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103336836" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>NORITAKE HIROKI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103326587" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>NORITAKE, Hiroki</last-name></addressbook></inventor><inventor mxw-id="PPAR1101644256" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>NORITAKE, Hiroki</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103315420" load-source="docdb" sequence="6" format="epo"><addressbook><last-name>SHIKATA HIROSHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103331654" load-source="docdb" sequence="6" format="intermediate"><addressbook><last-name>SHIKATA, HIROSHI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101651403" load-source="patent-office" sequence="6" format="original"><addressbook><last-name>SHIKATA, HIROSHI</last-name><address><street>c/o TOYOTA JIDOSHA KABUSHIKI KAISHA 1, Toyota-cho,</street><city>Toyota-shi,, Aichi 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313275" load-source="docdb" sequence="7" format="epo"><addressbook><last-name>KAMIYA NAOKI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103307005" load-source="docdb" sequence="7" format="intermediate"><addressbook><last-name>KAMIYA, NAOKI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101643574" load-source="patent-office" sequence="7" format="original"><addressbook><last-name>KAMIYA, NAOKI</last-name><address><street>c/o KABUSHIKI KAISHA TOKAI RIKA DENKI SEISAKUSHO 260, Toyota 3-chome, Ohguchi-cho,</street><city>Niwa-gun, Aichi 480-0195</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103344323" load-source="docdb" sequence="8" format="epo"><addressbook><last-name>YOSHIKAWA OSAMU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103302612" load-source="docdb" sequence="8" format="intermediate"><addressbook><last-name>YOSHIKAWA, OSAMU</last-name></addressbook></inventor><inventor mxw-id="PPAR1101643968" load-source="patent-office" sequence="8" format="original"><addressbook><last-name>YOSHIKAWA, OSAMU</last-name><address><street>c/o SMK CORPORATION 5-5, Togoshi 6-chome</street><city>Shinagawa-ku,, Tokyo 142-8511</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101641009" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TBK-Patent</last-name><iid>100061560</iid><address><street>Bavariaring 4-6</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660686347" load-source="docdb">AL</country><country mxw-id="DS660606885" load-source="docdb">AT</country><country mxw-id="DS660686348" load-source="docdb">BE</country><country mxw-id="DS660692685" load-source="docdb">BG</country><country mxw-id="DS660611090" load-source="docdb">CH</country><country mxw-id="DS660688558" load-source="docdb">CY</country><country mxw-id="DS660688563" load-source="docdb">CZ</country><country mxw-id="DS660685752" load-source="docdb">DE</country><country mxw-id="DS660686349" load-source="docdb">DK</country><country mxw-id="DS660686350" load-source="docdb">EE</country><country mxw-id="DS660611561" load-source="docdb">ES</country><country mxw-id="DS660692686" load-source="docdb">FI</country><country mxw-id="DS660692703" load-source="docdb">FR</country><country mxw-id="DS660685753" load-source="docdb">GB</country><country mxw-id="DS660686383" load-source="docdb">GR</country><country mxw-id="DS660685754" load-source="docdb">HR</country><country mxw-id="DS660688564" load-source="docdb">HU</country><country mxw-id="DS660611099" load-source="docdb">IE</country><country mxw-id="DS660686384" load-source="docdb">IS</country><country mxw-id="DS660692704" load-source="docdb">IT</country><country mxw-id="DS660686385" load-source="docdb">LI</country><country mxw-id="DS660685759" load-source="docdb">LT</country><country mxw-id="DS660606886" load-source="docdb">LU</country><country mxw-id="DS660692705" load-source="docdb">LV</country><country mxw-id="DS660685760" load-source="docdb">MC</country><country mxw-id="DS660606891" load-source="docdb">MK</country><country mxw-id="DS660606892" load-source="docdb">MT</country><country mxw-id="DS660611562" load-source="docdb">NL</country><country mxw-id="DS660783722" load-source="docdb">NO</country><country mxw-id="DS660611567" load-source="docdb">PL</country><country mxw-id="DS660606893" load-source="docdb">PT</country><country mxw-id="DS660611100" load-source="docdb">RO</country><country mxw-id="DS660606894" load-source="docdb">RS</country><country mxw-id="DS660611568" load-source="docdb">SE</country><country mxw-id="DS660688565" load-source="docdb">SI</country><country mxw-id="DS660783723" load-source="docdb">SK</country><country mxw-id="DS660783724" load-source="docdb">SM</country><country mxw-id="DS660692706" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479890" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A touch-type input device (10) includes a touch panel (11) including drive electrodes (12) and sensor electrodes (13). Capacitors (C) are formed at intersections of the drive electrodes (12) and sensor electrodes (13). A controller (21) determines whether a conductive foreign matter exists on the touch panel (11) from raw data values indicating changes in the capacitances of the capacitors (C) from initial reference values. The controller (21) determines touching of the touch panel (11) from control data values indicating changes in the capacitances of the capacitors (C) from control reference values changed when a conductive foreign matter exists. When the raw data values indicate existence of a conductive foreign matter, the controller (21) sets the control reference value of each capacitor (C) to a raw data reference value corresponding to the present raw data value. The controller (21) updates the initial reference value when the touch-type input device (10) is activated and updates the control reference value when the control reference value is erroneous.
<img id="iaf01" file="imgaf001.tif" wi="78" he="65" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759702" lang="EN" source="EPO" load-source="docdb"><p>A touch-type input device (10) includes a touch panel (11) including drive electrodes (12) and sensor electrodes (13). Capacitors (C) are formed at intersections of the drive electrodes (12) and sensor electrodes (13). A controller (21) determines whether a conductive foreign matter exists on the touch panel (11) from raw data values indicating changes in the capacitances of the capacitors (C) from initial reference values. The controller (21) determines touching of the touch panel (11) from control data values indicating changes in the capacitances of the capacitors (C) from control reference values changed when a conductive foreign matter exists. When the raw data values indicate existence of a conductive foreign matter, the controller (21) sets the control reference value of each capacitor (C) to a raw data reference value corresponding to the present raw data value. The controller (21) updates the initial reference value when the touch-type input device (10) is activated and updates the control reference value when the control reference value is erroneous.</p></abstract><description mxw-id="PDES98404591" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">The present invention relates to a touch-type input device.</p><p id="p0002" num="0002">Japanese Laid-Open Patent Publication No. <patcit id="pcit0001" dnum="JP2010009321A"><text>2010-9321</text></patcit> describes a touch-type input device including a touch panel that is touched to operate virtual buttons shown on a display. In the touch-type input device, for example, a user touches an operation surface of the touch panel to select one of a plurality of functional items presented on the display. This allows the user to view the desired interface on the display or operate an onboard device. Such touching of the touch panel includes, in addition to a simple touch of the operation surface, swiping or flicking of the operation surface in which a finger is moved along the operation surface in a single direction. By swiping or flicking the operation surface, the interface shown on the display is scrolled.</p><p id="p0003" num="0003">Such a touch panel may implement projected capacitive technology. A projected capacitance type touch panel includes drive electrodes and sensor electrodes that are arranged in a grid-shaped pattern. Capacitors are formed at the intersecting points of the drive electrodes and the sensor electrodes. Touching of the touch panel is detected from the capacitance of each capacitor. A mutual capacitance type touch panel detects a touched position based on changes in the capacitance of each capacitor. The mutual capacitance type touch panel is advantageous in that a number of touch positions may be simultaneously detected.</p><p id="p0004" num="0004">A conductive foreign matter such as a water droplet or a coin may contact or collect on the operation surface of the touch panel. The contact of such a foreign matter needs to be distinguished from a finger that touches the operation surface. In a mutual capacitance type touch panel, when a finger contacts the operation surface, the capacitance of each capacitor in the area touched by the finger changes from a reference value (zero), which corresponds to a condition in which there is no object contacting the operation surface, toward a first polarity side (e.g., positive). In contrast, when a foreign matter contacts the operation surface, the capacitance of each capacitor in the area that is in contact with the foreign matter changes toward a second polarity side (e.g., negative). Japanese Patent No. <patcit id="pcit0002" dnum="JP4994489B"><text>4994489</text></patcit> describes a touch-type input device that takes this into consideration. The touch-type input device computes the distribution of the amount of change in capacitance of the capacitors. When the peak value of the changed amount distribution is less than or equal to a predetermined negative threshold value, the touch-type input device determines that a foreign matter is contacting the operation surface.</p><p id="p0005" num="0005">When a conductive foreign matter is left in contact with the operation surface of the touch panel, each capacitor in the area contacting the foreign matter remains changed from the reference value. Thus, it becomes difficult to correctly detect touching of the touch panel. In addition to contact with a foreign matter, the ambient environment, such as the temperature, or wear may change the electrostatic capacitance (parasitic capacitance) from the reference value. It would also be difficult to correctly detect touching of the touch panel in such a case.<!-- EPO <DP n="2"> --></p><p id="p0006" num="0006">It is an object of the present invention to provide a touch-type input device that detects touching of an operation panel even when the capacitance changes from the reference value.</p><p id="p0007" num="0007">One embodiment of the present invention is a touch-type input device including a touch panel and a controller. The touch panel includes a sensor array and an operation surface. The sensor array includes drive electrodes and sensor electrodes insulated from and stacked on the drive electrodes. The drive electrodes and the sensor electrodes are arranged in a grid-shaped pattern that forms capacitors at intersections of the drive electrodes and the sensor electrodes. The controller applies a drive signal to the drive electrodes and detects touching of the operation surface of the touch panel from changes in a capacitance of each capacitor. The controller determines whether or not a conductive foreign matter exists on the operation surface from raw data values, each indicating a change amount in the capacitance of each capacitor from an initial reference value that is set in advance for each capacitor. The controller determines whether or not the operation surface has been touched from control data values, each indicating a change amount in the capacitance of each capacitor from a control reference value that is changed for each capacitor in accordance with whether or not the conductive foreign matter exists. When the controller determines from the raw data values that the conductive foreign matter exists on the operation surface, the controller sets the control reference value of each capacitor to a raw data reference value corresponding to the present raw data value. When the controller determines from the raw data values that the conductive foreign matter does not exist on the operation surface, the controller sets the control reference value of each capacitor to the initial reference value. The controller updates the initial reference value, when the touch-type input device is activated, to correctly determine whether or not the operation surface has been touched. The controller updates the control reference value when determining that the control reference value is erroneous.</p><p id="p0008" num="0008">According to the touch-type input device of the present invention, touching of an operation panel can be detected even when the capacitance changes from the reference value.</p><p id="p0009" num="0009">Other embodiments and advantages of the present invention will become apparent from the following description, taken in conjunction with the accompanying drawings, illustrating by way of example the principles of the invention.</p><p id="p0010" num="0010">The invention, together with objects and advantages thereof, may best be understood by reference to the following description of the presently preferred embodiments together with the accompanying drawings in which:
<ul><li><figref idrefs="f0001">Fig. 1</figref> is a perspective view showing a touch-type input device installed in a vehicle;</li><li><figref idrefs="f0001">Fig. 2</figref> is a plan view showing an operation surface of a touch panel in the touch-type input device;</li><li><figref idrefs="f0002">Fig. 3</figref> is a cross-sectional view taken along line 3-3 in <figref idrefs="f0001">Fig. 2</figref>;</li><li><figref idrefs="f0002">Fig. 4</figref> is a schematic block diagram of the touch-type input device;</li><li><figref idrefs="f0003">Fig. 5</figref> is a schematic diagram showing the shifting of operational states in the touch-type input device of <figref idrefs="f0001">Fig. 1</figref>;<!-- EPO <DP n="3"> --></li><li><figref idrefs="f0004">Fig. 6</figref> is a flowchart showing the procedures for updating the reference value in the first embodiment;</li><li><figref idrefs="f0005">Fig. 7</figref> is a graph showing the condition for updating the reference value;</li><li><figref idrefs="f0006">Fig. 8</figref> is a flowchart showing the procedures for detecting touching of the touch panel;</li><li><figref idrefs="f0007">Fig. 9A</figref> is a schematic diagram showing the touch panel when a conductive foreign matter is contacting the operation surface;</li><li><figref idrefs="f0007">Fig. 9B</figref> is a graph plotted from raw data values taken under the condition shown in <figref idrefs="f0007">Fig. 9A</figref>;</li><li><figref idrefs="f0007">Fig. 9C</figref> is a graph plotted from control data values taken under the condition shown in <figref idrefs="f0007">Fig. 9A</figref>;</li><li><figref idrefs="f0007">Fig. 10A</figref> is a schematic diagram showing the touch panel when a finger touches a conductive foreign matter on the operation surface;</li><li><figref idrefs="f0007">Fig. 10B</figref> is a graph plotted from raw data values taken under the condition shown in <figref idrefs="f0007">Fig. 10A</figref>;</li><li><figref idrefs="f0007">Fig. 10C</figref> is a graph plotted from control data values taken under the condition shown in <figref idrefs="f0007">Fig. 10A</figref>;</li><li><figref idrefs="f0008">Fig. 11</figref> is a flowchart showing the procedures for updating the reference value in a second embodiment; and</li><li><figref idrefs="f0008">Fig. 12</figref> is a graph showing the conditions for updating a control reference value.</li></ul></p><heading id="h0001">First Embodiment</heading><p id="p0011" num="0011">A first embodiment of a touch-type input device will now be described with reference to <figref idrefs="f0001 f0002 f0003 f0004 f0005 f0006 f0007">Figs. 1 to 10C</figref>.</p><p id="p0012" num="0012">Referring to <figref idrefs="f0001">Fig. 1</figref>, a dashboard 1 includes a central portion (center cluster) where a display 2 is set. A center console 4 includes a shift lever 5 and a touch-type input device 10. The touch-type input device 10 includes a touch panel 11 that is set on the center console 4 at the rear side of the shift lever 5. The touch panel 11 includes an operation surface 11a. In the first embodiment, the touch-type input device 10 is installed in a vehicle but may be installed in other machines. A user touches the operation surface 11 a of the touch panel 11 with a conductor, such as a finger or a stylus, to select the desired functional item shown on the display 2 and accordingly operate an onboard device, such as an air conditioner or a car navigation system. Touching of the touch panel 11 includes, in addition to a simple touch of the operation surface 11 a, swiping or flicking of the operation surface 11a in which a finger is moved along the operation surface in a single direction.</p><p id="p0013" num="0013">As shown in <figref idrefs="f0001">Fig. 2</figref>, the touch panel 11 includes a sensor array 14. The sensor array 14 includes drive electrodes 12 and sensor electrodes 13, which are stacked on and insulated from the drive electrodes 12. The drive electrodes 12 and the sensor electrodes 13 are arranged in a grid-shaped pattern that forms capacitors at the intersections of the drive electrodes 12 and the sensor electrodes 13. For the sake of brevity, <figref idrefs="f0001">Fig. 2</figref> shows only seven of the drive electrodes 12 and five of the sensor electrodes 13.</p><p id="p0014" num="0014">Referring to <figref idrefs="f0002">Fig. 3</figref>, the drive electrodes 12 are arranged on a drive substrate 15. The sensor electrodes 13 are arranged on a sensor substrate 16, which is stacked on the drive<!-- EPO <DP n="4"> --> substrate 15. A cover 17 is set on the sensor substrate 16. The drive substrate 15, the sensor substrate 16, and the cover 17 are each formed from an insulative material. The cover 17 includes an upper surface that partially forms the operation surface 11a of the touch panel 11.</p><p id="p0015" num="0015">The drive electrodes 12 and the sensor electrodes 13 are each formed from strips of a conductive material. The drive electrodes 12 are arranged adjacent and parallel to one another in a first direction (X direction) within the area of the drive substrate 15 that corresponds to the operation surface 11a. The sensor electrodes 13 are arranged adjacent and parallel to one another in a second direction (Y direction), which is orthogonal to the first direction, within the area of the sensor substrate 16 that corresponds to the operation surface 11a. Consequently, the drive electrodes 12 and the sensor electrodes 13 form the sensor array 14, which has a grid-shaped pattern, in the operation surface 11 a. Further, as shown by the broken lines in <figref idrefs="f0002">Fig. 3</figref>, the intersections of the drive electrodes 12 and the sensor electrodes 13 form capacitors C. In the first embodiment, an adhesive agent 18 is used to fix the drive electrodes 12 to the drive substrate 15 and the sensor electrodes 13 to the sensor substrate 16.</p><p id="p0016" num="0016">As shown in <figref idrefs="f0002">Fig. 4</figref>, the touch-type input device 10 further includes a controller 21 that applies a drive signal (pulse signal) to the sensor array 14 to detect a touch, that is, touching of the operation surface 11 a of the touch panel 11. The controller 21 of the first embodiment employs the mutual capacitance technology and detects a touched position based on a charge-discharge current generated when the capacitance of each capacitor C changes.</p><p id="p0017" num="0017">The controller 21 includes a drive unit 22, which is connected to the drive electrodes 12, a detection unit 23, which is connected to the sensor electrodes 13, and a control unit 24, which controls the drive unit 22 and the detection unit 23. The drive unit 22 selects the drive electrodes 12 at least one at a time in response to a control signal from the control unit 24 and applies a drive signal to the selected drive electrode 12. The detection unit 23 selects the sensor electrodes 13 at least one at a time in response to control signals from the control unit 24 to receive the charge-discharge current flowing through the selected electrode 13 as an output signal in accordance with the drive signal applied to the selected drive electrode 12. Further, the detection unit 23 detects the capacitance of each capacitor C based on the output signal from the corresponding sensor electrode 13 and outputs a detection signal, which indicates a detection value of the capacitance of the capacitor C, to the control unit 24. Then, the control unit 24 detects a touch and a touched position (coordinates) from the detection signal and outputs the detection result to the display 2.</p><p id="p0018" num="0018">The control unit 24 is capable of detecting a touch even when a conductive foreign matter, such as a water droplet or a coin, is contacting the operation surface 11 a. In the first embodiment, the capacitance changes toward the positive side when a finger or the like contacts the operation surface 11 a, and the capacitance changes toward the negative side when a conductive foreign matter contacts the operation surface 11 a.</p><p id="p0019" num="0019">The control unit 24 includes a memory 24a. The memory 24a stores an initial<!-- EPO <DP n="5"> --> reference value, which is set in advance for each capacitor C. The initial reference value is the electrostatic capacitance when there is no object contacting the operation surface 11 a. That is, the initial reference value is set to 0 (zero). However, wear or the ambient environment, such as the temperature, may change the electrostatic capacitance (parasitic capacitance) of each capacitor C. It is thus preferred that the initial reference value be updated. For example, when the touch-type input device 10 is activated, the initial reference value of each capacitor C may be updated in accordance with changes in the capacitance caused by wear or the ambient environment. Thus, the memory 24a stores a control reference value for each capacitor C. In accordance with whether or not a foreign matter exists on the touch panel 11, the control reference value of each capacitor C is set to the initial reference value or changed to a reference value that is set based on the detection value of the capacitance output from the detection unit 23. However, an erroneous control reference value may be obtained. Further, the control reference value may not be correctly changed. In the first embodiment, the control unit 24 determines whether there is an abnormality (error) in the control reference value and updates the control reference value when there is an error.</p><p id="p0020" num="0020">When the control unit 24 obtains the capacitance (detection signal) of each capacitor C from the detection unit 23, the control unit 24 determines whether or not a conductive foreign matter exists on the touch panel 11, that is, whether or not a foreign matter is contacting the operation surface 11a based on raw data values, each indicating the change amount of the capacitance of each capacitor C from the initial reference value. For example, the control unit 24 determines the existence of a foreign matter when at least one of the raw data values is less than or equal to a foreign matter determination threshold value. The foreign matter determination threshold value is set to a predetermined negative value. When the control unit 24 determines from the raw data values that a foreign matter exists on the touch panel 11, the control unit 24 acquires the capacitance (detection signal) of each capacitor C again from the detection unit 23. Then, the control unit 24 determines from control data values, each indicating the change amount of the capacitance of each capacitor C from the corresponding control reference value, whether or not another conductive foreign matter exists on the touch panel 11, that is, whether or not another foreign matter is contacting the operation surface 11 a. For example, the control unit 24 determines the existence of a foreign material when at least one of the control data values is less than or equal to the foreign matter determination threshold value. Further, the control unit 24 determines whether or not the touch panel 11 has been touched based on the control data values. For example, the control unit 24 determines that the touch panel 11 has been touched when at least one of the control data values is greater than or equal to a touch determination threshold value. The touch determination threshold value is set to a predetermined positive value. The control unit 24 may also determine that the touch panel 11 has been touched based on the raw data values.</p><p id="p0021" num="0021">When the control unit 24 determines from the raw data values that a foreign matter exists on the operation surface 11 a, the control unit 24 sets the control reference value for each capacitor C to the same value as the capacitance corresponding to the present raw data value (hereafter, referred to as the raw data reference value). When the control reference value is set to the raw data reference value corresponding to the raw data for<!-- EPO <DP n="6"> --> each capacitor C, the control unit 24 assumes that the capacitance for each capacitor C is zero (0) under a situation in which the foreign matter is in contact with the operation surface 11a. Then, the control unit 24 acquires new control data values indicating the change amounts in the capacitances of the capacitors C from the corresponding control reference values. When the control unit 24 determines from the raw data values that there is no foreign matter on the operation surface 11a, the control unit 24 sets the control reference value of each capacitor C to the initial reference value.</p><p id="p0022" num="0022">Further, when the control unit 24 determines from the control data values that a foreign matter exists on the operation surface 11a, the control unit 24 sets a new control reference value for each capacitor C to the same value as the capacitance corresponding to the present control data value (hereafter, referred to as the control data reference value). When the control reference value is set to the control data reference value corresponding to the control data value of each capacitor C, the control unit 24 assumes that the capacitance for each capacitor C is zero (0) under a situation in which a foreign matter is in contact with the operation surface 11 a. Then, the control unit 24 acquires new control data values indicating the change amounts in the capacitances of the capacitors C from the corresponding new control reference values. When the control unit 24 determines from the control data values that there is no foreign matter on the operation surface 11a, the control unit 24 sets a new control reference value for each capacitor C to the corresponding raw data reference value.</p><p id="p0023" num="0023">The shifting of operational states in the touch-type input device 10 will now be described with reference to <figref idrefs="f0003">Fig. 5</figref>.</p><p id="p0024" num="0024">As shown in <figref idrefs="f0003">Fig. 5</figref>, when the power goes ON and the touch-type input device 10 is activated, the controller 21 shifts to an initial setting state (step S100). In the initial setting state, the control unit 24 of the controller 21 sets an electrostatic detection IC (detection unit 23) and corrects the parasitic capacitance (change in capacitance) of each capacitor C. That is, the control unit 24 acquires the present capacitance of each capacitor C as the reference value (initial reference value or control reference value). When the acquisition of the reference value is completed, the controller 21 shifts to a detection standby state and waits for the detection of touching of the operation surface 11 a (step S101).</p><p id="p0025" num="0025">In a touch OFF state (step S102) in which the operation surface 11a is not touched, the control unit 24 performs the detection of noise and foreign matter and the detection of a touch. The capacitance of each capacitor C is changed by the temperature of the ambient environment. Accordingly, in the touch OFF state, the control unit 24 updates the reference value (initial reference value or control reference value) to a value corresponding to the temperature change. Then, when determining from the raw data values that a foreign matter exists on the operation surface 11a, the control unit 24 shifts to a noise and foreign matter detection state (step S103). In the noise and foreign matter detection state, the control unit 24 determines from the control data values indicating the change amounts of the capacitances of the capacitors C from the corresponding control reference values whether or not a conductive foreign matter exists, that is, whether or not another foreign matter is contacting the operation surface 11a. When determining that there is no foreign<!-- EPO <DP n="7"> --> matter, the control unit 24 shifts to a touch OFF state (step S102).</p><p id="p0026" num="0026">In the touch OFF state (step S102), when the control unit 24 determines that the operation surface 11a is being touched from the control data values, the control unit 24 shifts to a touch ON state (step S104). Then, the control unit 24 obtains the coordinates of the location where the operation surface 11a has been touched and outputs the coordinates to the display 2.</p><p id="p0027" num="0027">In the noise and foreign matter detection state (step S103), while detecting the existence of a foreign matter, when the control unit 24 determines that the operation surface 11a has been touched from the control data values, the control unit 24 shifts to the touch ON state (step S104). Then, the control unit 24 obtains the coordinates of the location where the operation surface 11a has been touched and outputs the coordinates to the display 2.</p><p id="p0028" num="0028">The control unit 24 shifts to the initial setting state (step S100) when a reference value updating condition is satisfied in any one of the touch OFF state (step S102), the noise and foreign matter detection state (step S103), and the touch ON state (step S104). The reference value updating condition is the determination of an error in the reference values. For example, in the first embodiment, when a situation in which the width of fluctuations in the raw data values or the control data values is within a predetermined range W continues for a predetermined time T, the control unit 24 determines that the reference value updating condition has been satisfied.</p><p id="p0029" num="0029">The procedures taken by the control unit 24 to update the reference values will now be described with reference to <figref idrefs="f0004">Fig. 6</figref>. The control unit 24 determines whether or not the reference values need to be updated in each of the touch OFF state (step S102), the noise and foreign matter detection state (step S103), and the touch ON state (step S104).</p><p id="p0030" num="0030">As shown in <figref idrefs="f0004">Fig. 6</figref>, when the control unit 24 receives the detection value of the capacitance of each capacitor C from the detection unit 23 (step S21), the control unit 24 determines whether or not the fluctuation width of the detection values is within the predetermined range W (step S22). More specifically, the control unit 24 determines whether or not the fluctuation width in the raw data values or the control data values is within the predetermined range W. The predetermined width W is smaller than the touch determination threshold value used to detect touching and is, for example, one-tenth of the touch determination value or smaller. For example, the fluctuation width of the detection values would be within the predetermined range W under a situation in which the capacitances of the operation surface 11a does not change when the user touches the operation surface 11 a, when there is external noise, or when a foreign matter exists on the operation surface 11a.</p><p id="p0031" num="0031">When the control unit 24 determines that the fluctuation width of the detection values is larger than the predetermined range W (step S22: NO), the control unit 24 resets a timer (step S26) and proceeds to step S25. The timer is arranged in, for example, the control unit 24.<!-- EPO <DP n="8"> --></p><p id="p0032" num="0032">When the control unit 24 determines that the fluctuation width of the detection values is within the predetermined range W (step S22: YES), the control unit 24 performs a count-up with the timer (step S23). The predetermined time T is, for example, twenty seconds, and is the time a situation in which the fluctuation width is within the predetermined range would not continue as long as normal touching is performed. The control unit 24 determines whether or not a situation in which the fluctuation width is within the predetermined range W has continued for the predetermined time T (step S24).</p><p id="p0033" num="0033">When the control unit 24 determines that a situation in which the fluctuation width is within the predetermined range W has not continued for the predetermined time T (step S24: NO), the control unit 24 determines that there is no need to update the reference value (initial reference value or control reference value). That is, when the fluctuation width of the detection values exceeds the predetermined range W, the touching, external noise, and/or foreign matter are being properly detected. Thus, the control unit 24 does not update the reference value and performs the normal processing in step S103 or S104 (step S25).</p><p id="p0034" num="0034">When the control unit 24 determines that a situation in which the fluctuation width is within the predetermined range W has continued for the predetermined time T (step S24: YES), the control unit 24 determines that the reference value is erroneous and shifts to an initial setting state (step S100) to perform a reference value acquisition process (step S27). Then, the control unit 24 updates the control reference value based on a detection signal output from the detection unit 23. In the first embodiment, the control unit 24 determines whether or not the reference value needs to be updated for each intersection (capacitor C) in the sensor array 14. Accordingly, the control unit 24 is able to determine with high accuracy whether or not there is an error in the reference value, which is used to detect changes in the capacitance.</p><p id="p0035" num="0035">A case in which touching of the operation surface 11 a is detected when one of the reference values is erroneous in the touch-type input device 10 will now be described with reference to <figref idrefs="f0005">Fig. 7</figref>. The sensor detection values shown in <figref idrefs="f0005">Fig. 7</figref> are capacitances of capacitors C at the intersections of the sensor array 14 and indicate change amounts of the capacitances from the corresponding control reference values. In this example, two capacitors C (sensors A and B) will be described.</p><p id="p0036" num="0036">As shown in <figref idrefs="f0005">Fig. 7</figref>, with regard to sensor A, a situation in which the fluctuation width of the detection value is within the predetermined width W continues for the predetermined time T. In this case, the control unit 24 determines that the control reference value is erroneous. As for sensor B, a situation in which the fluctuation width of the detection value is within the predetermined width W does not continue for the predetermined time T. Accordingly, the control unit 24 determines that touching of the operation surface 11a by the user, external noise, or foreign matter has been detected at the location corresponding to sensor B.</p><p id="p0037" num="0037">The procedures taken by the control unit 24 to detect touching of the touch panel 11<!-- EPO <DP n="9"> --> will now be described with reference to the flowchart of <figref idrefs="f0006">Fig. 8</figref>. The control unit 24 executes the detection process in predetermined sampling cycles (detection cycles) to detect touching of the touch panel 11.</p><p id="p0038" num="0038">When the control unit 24 receives a detection signal from the detection unit 23 (step S1), the control unit 24 determines from the raw data values whether or not a conductive foreign matter exists on the operation surface 11a (step S2). When the control unit 24 determines that a foreign matter exists on the operation surface 11a (step S3: YES), the control unit 24 determines whether or not a flag is set to indicate that the control reference value differs from the initial reference value (step S4). The flag is stored in the memory 24a. When the flag is not set (step S4: NO), the control unit 24 sets the control reference value to the raw data reference value for each capacitor C (step S5) and sets the flag (step S6).</p><p id="p0039" num="0039">Then, the control unit 24 determines from the control data values whether or not a conductive foreign matter exists on the touch panel 11 (step S7). When the flag is set (step S4: YES), the control unit 24 skips steps S5 and S6 and proceeds to step S7 to perform a foreign matter determination based on the control data values. When the control unit 24 determines that another foreign matter exists on the operation surface 11a (step S8: YES), the control unit 24 sets the control reference value to the control data reference value for each capacitor C (step S9). Then, the control unit 24 detects whether or not the touch panel 11 has been touched based on the control data values (step S10). When the control unit 24 determines from the control data values that there is no foreign matter on the operation surface 11 a (step S8: NO), the control unit 24 skips step S9 and proceeds to step S10 to detect touching of the touch panel 11 from the control data values.</p><p id="p0040" num="0040">When the control unit 24 determines from the raw data values that there is no foreign matter on the operation surface 11 a (step S3: NO), the control unit 24 sets the control reference value to the initial reference value (step S11) and clears the flag (step S12). Then, the control unit 24 proceeds to step S10 and detects touching of the touch panel 11 from the control data values.</p><p id="p0041" num="0041">The detection of a touch when a foreign matter is contacting the operation surface 11 a of the touch panel 11 will now be described with reference to <figref idrefs="f0007">Figs. 9A to 10C</figref>.</p><p id="p0042" num="0042">Referring to <figref idrefs="f0007">Fig. 9A</figref>, when a foreign matter contacts the operation surface 11 a of the touch panel 11, the raw data values (capacitances of capacitors C) in the area contacting the foreign matter are changed to negative values, as shown in <figref idrefs="f0007">Fig. 9B</figref>. Further, the raw data values around the foreign matter are changed to positive values. When each control reference value is set to the initial reference value, the control data values would be the same as the raw data values as shown by the double-dashed line in <figref idrefs="f0004">Fig. 6C</figref>. To facilitate understanding, <figref idrefs="f0007">Figs. 9B and 9C</figref> use dots to show the raw data values and the control data values obtained along a single line (X direction) extending through the foreign matter. When a foreign matter exists on the operation surface 11 a as shown in <figref idrefs="f0007">Fig. 9A</figref>, at least one of the raw data values is less than or equal to the foreign matter determination threshold value. Accordingly, the control unit 24 determines that a foreign matter exists on the<!-- EPO <DP n="10"> --> operation surface 11a and sets each control reference value to the raw data reference value, that is, the same value as the capacitance corresponding to the present raw data value. When the capacitance of each capacitor C is newly obtained under this situation, as shown by the bold line in <figref idrefs="f0007">Fig. 9C</figref>, the control data value would be zero. Accordingly, if the touch panel 11 is touched under a situation in which a foreign matter exists on the operation surface 11 a, the control data values obtained from the area touched by a finger change to positive values. This allows for touching of the touch panel 11 to be correctly detected.</p><p id="p0043" num="0043">Under the situation shown in <figref idrefs="f0007">Fig. 9A</figref>, when another foreign matter (not shown) contacts the operation surface 11 a, the control data values change, for example, as shown by the double-dashed line shown in <figref idrefs="f0007">Fig. 9C</figref>. Accordingly, the control unit 24 determines from the control data values that another foreign matter exists on the operation surface 11a and sets each control data reference value to the control data value, that is, the same value as the capacitance corresponding to the present control data value. When the capacitance of each capacitor C is newly obtained under this situation, as shown by the bold line in <figref idrefs="f0007">Fig. 9C</figref>, the control data value is zero. Accordingly, if the touch panel 11 is touched when a foreign matter exists on the operation surface 11 a, the control data values obtained from the area touched by a finger change to positive values. This allows for touching of the touch panel 11 to be correctly detected.</p><p id="p0044" num="0044"><figref idrefs="f0007">Fig. 10A</figref> shows a situation in which a finger contacts a foreign matter on the operation surface 11a. In this case, as shown in <figref idrefs="f0007">Fig. 10B</figref>, the raw data values in the area in which the finger and the foreign matter are located change to positive values. In other words, the raw data values change in substantially the same manner as when a large finger touches the operation surface 11a. Under the situation shown in <figref idrefs="f0007">Fig. 10A</figref>, the raw data values are greater than the foreign matter threshold value. Accordingly, the control unit 24 determines from the raw data values that there is no foreign matter on the operation surface 11a and sets each control reference value to the initial reference value (refer to step S11 in <figref idrefs="f0006">Fig. 8</figref>). Consequently, as shown by the bold line in <figref idrefs="f0007">Fig. 10C</figref>, the newly acquired control data values each show the amount of change in the capacitance of the corresponding capacitor C from the initial reference value. That is, the control data values are the same as the raw data values. If the control reference values have been set to the raw data reference values, the control data values would be as shown by the double-dashed line in <figref idrefs="f0007">Fig. 10C</figref>.</p><p id="p0045" num="0045">The first embodiment has the advantages described below.
<ol><li>(1) When the control unit 24 determines from the raw data values that a conductive foreign matter exists on the operation surface 11a, the control unit 24 sets the control reference values to the raw data reference values corresponding to the raw data values. The control data values acquired from the raw data reference values indicate the change amounts of the capacitances of the capacitors C from when a foreign matter contacts the operation surface 11a. This allows the control unit 24 to accurately recognize changes in the capacitances of the capacitors C and correctly detect when a finger or the like touches the operation surface 11a even if a foreign matter is contacting the operation surface 11a. Further, the control unit 24 updates the initial reference value when activated. Thus, the control unit 24 acquires reference values corresponding to changes in the electrostatic<!-- EPO <DP n="11"> --> capacitance (parasitic capacitance) caused by wear or the ambient environment such as the temperature. As a result, touching of the operation surface 11a is detected based on appropriate reference values. However, the reference values acquired or updated when the control unit 24 is activated may be erroneous. In this case, when determining that a control reference value is erroneous, the control unit 24 updates the control reference value and correctly detects touching of the operation surface 11a.</li><li>(2) When a situation in which the fluctuation width of the control data values, which indicate the change amounts of capacitances from the control reference values, is within the predetermined range W continues for the predetermined time T, for example, an erroneous control reference value may be acquired when touching or external noise is detected or a foreign matter may be contacting the operation surface 11 a. In this case, the control unit 24 determines that the control reference value is erroneous and updates the control reference value. This allows touching of the operation surface 11a to be correctly detected.</li><li>(3) The existence of a foreign matter is determined from the control data values. Thus, after a certain time from when determining contact of the foreign matter with the operation surface 11 a, the control unit 24 is able to determine whether or not a further foreign matter is contacting the operation surface 11a. When the control unit 24 determines from the control data values that there is a foreign matter on the operation surface 11 a, new control reference values are set to control data reference values corresponding to the present control data values. The control data values newly acquired from the control data reference values indicate the change amounts of the capacitances of the capacitors C from a situation in which more than one foreign matter is contacting the operation surface 11 a. In this manner, even when more than one foreign matter is contacting the operation surface 11a, the control unit 24 is able to accurately recognize changes in the capacitances of the capacitors and correctly detect when a finger or the like touches the operation surface 11a.</li></ol></p><heading id="h0002">Second Embodiment</heading><p id="p0046" num="0046">A second embodiment of the touch-type input device 10 will now be described with reference to <figref idrefs="f0008">Figs. 11 and 12</figref>. The touch-type input device 10 of the second embodiment differs from that of the first embodiment in the reference value updating condition. Otherwise, the touch-type input device 10 of the second embodiment is the same as the first embodiment (refer to <figref idrefs="f0002">Fig. 4</figref>). The description hereafter will focus on the differences from the first embodiment.</p><p id="p0047" num="0047">Referring to <figref idrefs="f0003">Fig. 5</figref>, the control unit 24 determines whether or not the reference values need to be updated in each of the touch OFF state (step S102), the noise and abnormality detection state (step S103), and the touch ON state (step S104). When the reference value updating condition is satisfied, the control unit 24 proceeds to the initial setting state (step S100). The reference value updating condition is the determination that a reference value includes an error. In the second embodiment, the operation surface 11a of the touch panel 11 is divided into a plurality of detection areas (sensor areas). Each detection area includes one or more sensors (capacitors C). The control unit 24 determines from the<!-- EPO <DP n="12"> --> control data values whether or not the operation surface 11 a has been touched. When the location of the touched detection area does not shift over a predetermined time T, the control unit 24 determines that the control reference value is erroneous and updates the reference values.</p><p id="p0048" num="0048">The procedures taken by the control unit 24 to update the reference values will now be described with reference to <figref idrefs="f0008">Fig. 11</figref>. When the control unit 24 receives the detection value of the capacitance of each capacitor C from the detection unit 23 (step S21), the control unit 24 determines whether or not the sign of a detection value has changed (step S32). In other words, the control unit 24 determines whether or not the signs of the control data values have changed. When changes are detected in the capacitances (control data value) but the signs of the control data value do not change over the predetermined time T, the set control reference values may be erroneous. A change in the sign of a control data value may be in a direction that is the same as when a finger (touching) is operated or in an opposite direction.</p><p id="p0049" num="0049">When the control unit 24 determines that the signs of the control data values have changed (step S32: NO), the control unit 24 resets the timer (step S26) and proceeds to step S25.</p><p id="p0050" num="0050">When the control unit 24 determines that the signs of the control data values have not changed (step S32: YES), the control unit 24 performs a count-up with the timer (step S23). Then, the control unit 24 determines whether or not a situation in which signs of the control data values do not change has continued for a predetermined time T (step S24).</p><p id="p0051" num="0051">When a situation in which signs of the control data values do not change does not continue for the predetermined time T, that is, when determining that the location of the touched detection area has shifted (step S24: NO), the control unit 24 determines that there is no need to update the control reference values. In this case, touching, external noise, and/or foreign matter are being properly detected. Thus, the control unit 24 does not update the control reference values and performs normal processing in step S103 or S104 (step S25).</p><p id="p0052" num="0052">When a situation in which signs of the control data values do not change has continued for a predetermined time T, that is, when determining that the location of the touched detection area has not shifted (step S24: YES), the control unit 24 determines that the reference values include an error and proceeds to the initial setting state (step S100) to perform a reference value acquisition process (step S27). Then, the control unit 24 updates the control reference values based on the detection signals output from the detection unit 23. In the second embodiment, the control unit 24 determines whether or not the signs of the control data values have changed for each detection area. This reduces the processed amount of data compared to when determining whether or not the reference value needs to be updated for each intersection (capacitor C) in the sensor array 14.</p><p id="p0053" num="0053">A case in which touching is directed when the touch-type input device 10 includes an error will now be described with reference to <figref idrefs="f0008">Fig. 12</figref>. The operation surface 11 a of the<!-- EPO <DP n="13"> --> touch panel 11 is divided to form a grid-shaped pattern of detection areas (sensor areas). The detection areas where touching is detected are indicated by dots and diagonal lines.</p><p id="p0054" num="0054">As shown in <figref idrefs="f0008">Fig. 12</figref>, in sensor area 3b, a situation in which the signs do not change in the control data value continues for the predetermined time T. Thus, the control unit 24 determines that the control reference values in sensor area 3b include an error. In sensor area 2c, the signs change in the control data value. Thus, the control unit 24 determines that the control reference values in sensor area 2c do not include an error.</p><p id="p0055" num="0055">In addition to advantages (1) and (3) of the first embodiment, the second embodiment has the advantages described below.</p><p id="p0056" num="0056">(4) In the detection areas (sensor areas) obtained by dividing the operation surface 11 a, if the location of the touched detection area does not shift over the predetermined time T, erroneous reference control values may have been acquired when touching or external noise was detected in that area or a foreign matter may be contacting that detection area. In this case, the control unit 24 determines that the control reference values in the detection area include an error and updates the control reference values. This allows for correct detection of touching of the operation surface 11a.</p><p id="p0057" num="0057">It should be apparent to those skilled in the art that the present invention may be embodied in many other specific forms without departing from the spirit or scope of the invention. Particularly, it should be understood that the present invention may be embodied in the following forms.</p><p id="p0058" num="0058">In each of the above embodiments, the control unit 24 shifts to the initial setting state (step S100) when the reference value updating condition is satisfied in each of the touch OFF state (step S102), the noise and foreign matter detection state (step S103), and the touch ON state (step S104). However, the control unit 24 may shift to the initial setting state when the reference value updating condition is satisfied only in, for example, the touch ON state. Alternatively, the control unit 24 may shift to the initial setting state when the reference value updating condition is satisfied only in the touch OFF state. As another option, the control unit 24 may shift to the initial setting state when the reference value updating condition is satisfied only in the noise and foreign matter detection state.</p><p id="p0059" num="0059">In each of the above embodiments, the control unit 24 may be configured not to perform foreign matter determination based on the control data values. More specifically, steps S7 to S9 may be omitted from the flowchart of <figref idrefs="f0006">Fig. 8</figref>. In this case, whenever the control unit 24 determines from the raw data values that a foreign matter exists, the control reference value for each capacitor C may be set to the raw data reference value corresponding to the present raw data.</p><p id="p0060" num="0060">In each of the above embodiments, the control unit 24 determines that a foreign matter exists when at least one of the raw data values is less than or equal to the foreign matter determination threshold value. For example, the control unit 24 may determine that a foreign matter exists when at least one of the raw data values is less than or equal to the<!-- EPO <DP n="14"> --> foreign matter determination threshold value and, at the same time, at least one of the negative raw data values is greater than or equal to the threshold value. In the same manner, foreign matter determination may be performed based on the control data values under other conditions. The same applies to the touching detection, and touching may be detected when a condition that is satisfied is one other that at least one of the control data values being greater than or equal to the touch determination threshold.</p><p id="p0061" num="0061">In each of the above embodiments, the raw data reference values are set to be the same as the raw data values taken when determining that a foreign matter is in contact with the operation surface 11 a. However, the raw data reference values do not have to be values that are completely the same as the raw data values as long as they correspond to the control data values. Further, the initial reference values do not have to be values that are completely the same as the capacitances when there is no object contacting the operation surface 11a.</p><p id="p0062" num="0062">The present examples and embodiments are to be considered as illustrative and not restrictive, and the invention is not to be limited to the details given herein.</p><p id="p0063" num="0063">A touch-type input device (10) includes a touch panel (11) including drive electrodes (12) and sensor electrodes (13). Capacitors (C) are formed at intersections of the drive electrodes (12) and sensor electrodes (13). A controller (21) determines whether a conductive foreign matter exists on the touch panel (11) from raw data values indicating changes in the capacitances of the capacitors (C) from initial reference values. The controller (21) determines touching of the touch panel (11) from control data values indicating changes in the capacitances of the capacitors (C) from control reference values changed when a conductive foreign matter exists. When the raw data values indicate existence of a conductive foreign matter, the controller (21) sets the control reference value of each capacitor (C) to a raw data reference value corresponding to the present raw data value. The controller (21) updates the initial reference value when the touch-type input device (10) is activated and updates the control reference value when the control reference value is erroneous.</p></description><claims mxw-id="PCLM90459531" lang="EN" load-source="patent-office"><!-- EPO <DP n="15"> --><claim id="c-en-0001" num="0001"><claim-text>A touch-type input device (10) comprising:
<claim-text>a touch panel (11) including a sensor array (14) and an operation surface (11a), wherein the sensor array (11) includes drive electrodes (12) and sensor electrodes (13) insulated from and stacked on the drive electrodes (12), wherein the drive electrodes (12) and the sensor electrodes (13) are arranged in a grid-shaped pattern that forms capacitors (C) at intersections of the drive electrodes (12) and the sensor electrodes (13); and</claim-text>
<claim-text>a controller (21) that applies a drive signal to the drive electrodes (12) and detects touching of the operation surface (11a) of the touch panel (11) from changes in a capacitance of each capacitor (C),</claim-text>
<claim-text>the touch-type input device (10) being <b>characterized in that</b> the controller (21) is configured so that:
<claim-text>the controller (21) determines whether or not a conductive foreign matter exists on the operation surface (11a) from raw data values, each indicating a change amount in the capacitance of each capacitor (C) from an initial reference value that is set in advance for each capacitor (C);</claim-text>
<claim-text>the controller (21) determines whether or not the operation surface (11a) has been touched from control data values, each indicating a change amount in the capacitance of each capacitor (C) from a control reference value that is changed for each capacitor (C) in accordance with whether or not the conductive foreign matter exists;</claim-text>
<claim-text>when the controller (21) determines from the raw data values that the conductive foreign matter exists on the operation surface (11a), the controller (21) sets the control reference value of each capacitor (C) to a raw data reference value corresponding to the present raw data value;</claim-text>
<claim-text>when the controller (21) determines from the raw data values that the conductive foreign matter does not exist on the operation surface (11a), the controller (21) sets the control reference value of each capacitor (C) to the initial reference value;</claim-text>
<claim-text>the controller (21) updates the initial reference value, when the touch-type input device (10) is activated, to correctly determine whether or not the operation surface (11a) has been touched; and</claim-text>
<claim-text>the controller (21) updates the control reference value when determining that the control reference value is erroneous.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The touch-type input device (10) according to claim 1, wherein the controller (21) is configured to determine that the control reference value is erroneous when a situation in which a fluctuation width of the control data values is within a predetermined width continues for a predetermined time (T).</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The touch-type input device (10) according to claim 1, wherein<br/>
the operation surface (11a) of the touch panel (11) is divided into a plurality of detection areas, and<br/>
the controller (21) is configured to determine that the control reference value is erroneous when the location of the detection area that is touched does not shift over a<!-- EPO <DP n="16"> --> predetermined time (T).</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The touch-type input device (10) according to any one of claims 1 to 3, wherein the controller (21) is further configured so that:
<claim-text>when the controller (21) determines from the raw data values that the conductive foreign matter exists on the operation surface (11a), the controller (21) determines from the control data values whether or not a further conductive foreign matter exists on the operation surface (11a);</claim-text>
<claim-text>when the controller (21) determines from the control data values that the further conductive foreign matter exists on the operation surface (11a), the controller (21) sets the control reference value of each capacitor (C) to the control data reference value corresponding to the present control data value; and</claim-text>
<claim-text>when the controller (21) determines from the control data values that the further conductive foreign matter does not exist on the operation surface (11 a), the controller (21) sets the control reference value of each capacitor (C) to the raw data reference value corresponding to the capacitor (C).</claim-text></claim-text></claim></claims><drawings mxw-id="PDW20422254" load-source="patent-office"><!-- EPO <DP n="17"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="151" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="18"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="156" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0003" num="5"><img id="if0003" file="imgf0003.tif" wi="165" he="100" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="165" he="146" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0005" num="7"><img id="if0005" file="imgf0005.tif" wi="165" he="92" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0006" num="8"><img id="if0006" file="imgf0006.tif" wi="146" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0007" num="9A,9B,9C,10A,10B,10C"><img id="if0007" file="imgf0007.tif" wi="165" he="108" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0008" num="11,12"><img id="if0008" file="imgf0008.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="164" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="164" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
