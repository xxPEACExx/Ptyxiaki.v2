<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960766-A1" country="EP" doc-number="2960766" kind="A1" date="20151230" family-id="52282474" file-reference-id="315472" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451511" ucid="EP-2960766-A1"><document-id><country>EP</country><doc-number>2960766</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14199521-A" is-representative="YES"><document-id mxw-id="PAPP193865990" load-source="docdb" format="epo"><country>EP</country><doc-number>14199521</doc-number><kind>A</kind><date>20141219</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193865991" load-source="patent-office" format="original"><country>EP</country><doc-number>14199521.7</doc-number><date>20141219</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028073" ucid="JP-2014131850-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014131850</doc-number><kind>A</kind><date>20140626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988523436" load-source="docdb">G06F   3/0484      20130101AFI20151015BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988524987" load-source="docdb">G06F   3/0481      20130101ALI20151015BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988525563" load-source="docdb">G06F   3/0488      20130101ALI20151015BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1617141551" load-source="docdb" scheme="CPC">G06F   3/0488      20130101 LI20180712BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1617141552" load-source="docdb" scheme="CPC">G06F   3/0481      20130101 LI20180712BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984701830" load-source="docdb" scheme="CPC">G06F   3/04845     20130101 LI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984701875" load-source="docdb" scheme="CPC">G06F   3/041       20130101 FI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984704177" load-source="docdb" scheme="CPC">G06F   3/04842     20130101 LI20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545999" lang="DE" load-source="patent-office">Endgerät</invention-title><invention-title mxw-id="PT165546000" lang="EN" load-source="patent-office">Terminal device</invention-title><invention-title mxw-id="PT165546001" lang="FR" load-source="patent-office">Dispositif de terminal</invention-title><citations><patent-citations><patcit mxw-id="PCIT335740205" load-source="docdb" ucid="JP-2011034538-A"><document-id format="epo"><country>JP</country><doc-number>2011034538</doc-number><kind>A</kind><date>20110217</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335739755" load-source="docdb" ucid="US-20100156813-A1"><document-id format="epo"><country>US</country><doc-number>20100156813</doc-number><kind>A1</kind><date>20100624</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335741175" load-source="docdb" ucid="US-20110285636-A1"><document-id format="epo"><country>US</country><doc-number>20110285636</doc-number><kind>A1</kind><date>20111124</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103313825" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GUNGHO ONLINE ENTERTAINMENT INC</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103321110" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GungHo Online Entertainment, Inc.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101645118" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>GungHo Online Entertainment, Inc.</last-name><iid>101498961</iid><address><street>Sumitomo Fudosan Marunouchi Bldg. 3-8-1 Marunouchi</street><city>Chiyoda-ku Tokyo 100-0005</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103326795" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SAWADA AKIRA</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310159" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SAWADA, AKIRA</last-name></addressbook></inventor><inventor mxw-id="PPAR1101652601" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SAWADA, AKIRA</last-name><address><street>c/o GungHo Online Entertainment, Inc. Sumitomo Fudosan Marunouchi Bldg., 3-8-1 Marunouchi Chiyoda-Ku</street><city>Tokyo, Tokyo 100-0005</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101653650" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Plougmann &amp; Vingtoft A/S</last-name><iid>101215840</iid><address><street>Rued Langgaards Vej 8</street><city>2300 Copenhagen S</city><country>DK</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660606796" load-source="docdb">AL</country><country mxw-id="DS660686149" load-source="docdb">AT</country><country mxw-id="DS660606798" load-source="docdb">BE</country><country mxw-id="DS660611465" load-source="docdb">BG</country><country mxw-id="DS660610998" load-source="docdb">CH</country><country mxw-id="DS660688363" load-source="docdb">CY</country><country mxw-id="DS660686150" load-source="docdb">CZ</country><country mxw-id="DS660783677" load-source="docdb">DE</country><country mxw-id="DS660606803" load-source="docdb">DK</country><country mxw-id="DS660688364" load-source="docdb">EE</country><country mxw-id="DS660692432" load-source="docdb">ES</country><country mxw-id="DS660611466" load-source="docdb">FI</country><country mxw-id="DS660611471" load-source="docdb">FR</country><country mxw-id="DS660606804" load-source="docdb">GB</country><country mxw-id="DS660606805" load-source="docdb">GR</country><country mxw-id="DS660606806" load-source="docdb">HR</country><country mxw-id="DS660688365" load-source="docdb">HU</country><country mxw-id="DS660611007" load-source="docdb">IE</country><country mxw-id="DS660606811" load-source="docdb">IS</country><country mxw-id="DS660611472" load-source="docdb">IT</country><country mxw-id="DS660688366" load-source="docdb">LI</country><country mxw-id="DS660783678" load-source="docdb">LT</country><country mxw-id="DS660686155" load-source="docdb">LU</country><country mxw-id="DS660783679" load-source="docdb">LV</country><country mxw-id="DS660783680" load-source="docdb">MC</country><country mxw-id="DS660685619" load-source="docdb">MK</country><country mxw-id="DS660685620" load-source="docdb">MT</country><country mxw-id="DS660692433" load-source="docdb">NL</country><country mxw-id="DS660611473" load-source="docdb">NO</country><country mxw-id="DS660692434" load-source="docdb">PL</country><country mxw-id="DS660611474" load-source="docdb">PT</country><country mxw-id="DS660692443" load-source="docdb">RO</country><country mxw-id="DS660611479" load-source="docdb">RS</country><country mxw-id="DS660692444" load-source="docdb">SE</country><country mxw-id="DS660611008" load-source="docdb">SI</country><country mxw-id="DS660685621" load-source="docdb">SK</country><country mxw-id="DS660685622" load-source="docdb">SM</country><country mxw-id="DS660688371" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479881" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The purpose is to provide a terminal device that can be operated by a virtual operation key which is easy to use. The terminal device according to an aspect of the present invention comprises a display unit for displaying a virtual operation key, a touch panel for detecting contact by an inputting object on the virtual operation key, and a control unit for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.
<img id="iaf01" file="imgaf001.tif" wi="120" he="104" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759693" lang="EN" source="EPO" load-source="docdb"><p>The purpose is to provide a terminal device that can be operated by a virtual operation key which is easy to use. The terminal device according to an aspect of the present invention comprises a display unit for displaying a virtual operation key, a touch panel for detecting contact by an inputting object on the virtual operation key, and a control unit for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</p></abstract><description mxw-id="PDES98404582" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>TECHNICAL FIELD</u></heading><p id="p0001" num="0001">The present invention relates to a terminal device capable of operating, via a touch panel, a virtual operation key displayed on a display unit.</p><heading id="h0002"><u>BACKGROUND ART</u></heading><p id="p0002" num="0002">There are conventionally known terminal devices provided with a liquid crystal display or other display and a touch panel disposed so as to cover the display unit, as typified by a smartphone, wherein a directional pad or other virtual operation key such as that used in games is displayed on the display, and the display of other characters displayed on the display can be controlled.</p><p id="p0003" num="0003">For example, Patent Reference 1 indicates that when an operation button for instructing the direction of movement of a character displayed on the display is displayed and a user makes finger contact at a desired position on the touch panel corresponding to the operation button, a command corresponding to the position is generated to control the movement direction of the character.</p><heading id="h0003">PRIOR ART REFERENCES</heading><heading id="h0004">PATENT REFERENCES</heading><p id="p0004" num="0004"><ul><li>Patent Reference 1: Japanese Laid-open Patent Application No. <patcit id="pcit0001" dnum="JP2011034538A"><text>2011-034538</text></patcit></li></ul></p><heading id="h0005"><u>SUMMARY OF THE INVENTION</u></heading><heading id="h0006"><u>PROBLEMS TO BE SOLVED BY THE INVENTION</u></heading><p id="p0005" num="0005">However, in a conventional terminal device, once the display position of the virtual operation key has been determined, the display position of the virtual operation key is fixed during the operation thereof, and it is not necessarily easy to use. If, for example, when executing a game program on the terminal device, a user continuously has their left thumb on the virtually displayed directional pad, the user may inadvertently move their finger from the directional pad due to being absorbed in the progress of the game such as the movement of the character, and the character would unintentionally come to a stop.</p><p id="p0006" num="0006"><!-- EPO <DP n="2"> --> In view of the above, the present invention provides, via various embodiments of the present invention, a terminal device that can be operated by a more user-friendly virtual operation key.</p><heading id="h0007"><u>MEANS USED TO SOLVE THE ABOVE-MENTIONED PROBLEMS</u></heading><p id="p0007" num="0007">A terminal device according to an embodiment of the present invention comprises a display unit for displaying a virtual operation key, a touch panel for detecting contact by an inputting object on the virtual operation key, and a control unit for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</p><p id="p0008" num="0008">A program according to an embodiment of the present invention causes a computer to function as a control unit for displaying a virtual operation key on a display unit, assessing whether a drag operation by an inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel provided to a terminal device, and controlling the display position of the virtual operation key, wherein the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</p><p id="p0009" num="0009">A method for controlling display of a virtual operation key according to an embodiment of the present invention comprises a step for displaying a virtual operation key on a display unit, a step for detecting contact by an inputting object on the display unit via a touch panel, and a step for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein the display position of the virtual operation key is modified in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</p><p id="p0010" num="0010"><!-- EPO <DP n="3"> --> There is provided, via various embodiments of the present invention, a terminal device that can be operated by a more user-friendly virtual operation key.</p><heading id="h0008"><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></heading><p id="p0011" num="0011"><ul><li>[<figref idrefs="f0001">FIG. 1] FIG. 1</figref> shows the state of usage by a user of the terminal device according to an embodiment of the present invention;</li><li>[<figref idrefs="f0001">FIG. 2] FIG. 2</figref> shows an example of a screen displayed on the display unit of the terminal device according to an embodiment of the present invention;</li><li>[<figref idrefs="f0002">FIG. 3] FIG. 3</figref> is a block view showing a configuration of the terminal device according to an embodiment of the present invention;</li><li>[<figref idrefs="f0003">FIG. 4] FIG. 4</figref> illustrates the method for determining the distance and direction of a contact position in a virtual joystick 131 as viewed from a reference position;</li><li>[<figref idrefs="f0003">FIG. 5] FIG. 5</figref> illustrates a method for controlling display of the virtual joystick 131;</li><li>[<figref idrefs="f0004">FIG. 6] FIG. 6</figref> illustrates a method for controlling display of the virtual joystick 131;</li><li>[<figref idrefs="f0005">FIG. 7] FIG. 7</figref> is a flowchart of the flow of processing carried out in the control unit 110 of the terminal device 100;</li><li>[<figref idrefs="f0006">FIG. 8] FIG. 8</figref> is a schematic view of a screen example brought about by executing the program according to the present embodiment;</li><li>[<figref idrefs="f0007">FIG. 9] FIG. 9</figref> is a schematic view of a screen example according to another embodiment showing the display position of the virtual joystick 131;</li><li>[<figref idrefs="f0007">FIG. 10] FIG. 10</figref> is a schematic view of a screen example of when the terminal device 100 is used in portrait orientation;</li><li>[<figref idrefs="f0008">FIG. 11] FIG. 11</figref> is a schematic view of a screen example of when the terminal device 100 is connected to the external display device 200;</li><li>[<figref idrefs="f0008">FIG. 12] FIG. 12</figref> is a schematic view of a screen example of when a virtual directional pad is used as the virtual operation key; and</li><li>[<figref idrefs="f0009">FIG. 13] FIG. 13</figref> is a schematic view of a screen example of when a key imitating a bow and arrow is used as the virtual operation key.</li></ul></p><heading id="h0009"><u>DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</u></heading><p id="p0012" num="0012">Embodiments of the present invention will be described with reference to the appended drawings. The same reference symbols with be used for constituent elements common among the drawings.<!-- EPO <DP n="4"> --></p><heading id="h0010">&lt;Summary of an embodiment of the present invention&gt;</heading><p id="p0013" num="0013">A terminal device 100 (mobile telephone, smartphone, mobile game machine, mobile information terminal, PDA, wireless controller terminal, desktop personal computer, laptop personal computer, arcade game terminal or the like installed in a game arcade, and the like) having a touch panel capable of executing a program according to the present embodiment will be described in detail as an example of the terminal device according to an embodiment of the present invention.</p><p id="p0014" num="0014"><figref idrefs="f0001">FIG. 1</figref> shows the state of usage by a user of the terminal device 100 according to an embodiment of the present invention. In <figref idrefs="f0001">FIG. 1</figref>, the user is using the terminal device 100 in landscape orientation and is grasping the two ends thereof with the left and right hands. A "virtual joystick" 131 that virtually imitates a joystick, or a movable object 132 is displayed on a display unit 113 when the program according to the present embodiment is executed by the control unit 110. The virtual joystick 131 is operated by, e.g., the left thumb via the touch panel to control the movement of the displayed movable object 132. A virtual operation button A133 and/or a virtual operation button B134 is operated by the right thumb via the touch panel to control the display of a weapon held by the movable object 132. In addition to people, animals, monsters, and other characters, the movable object 132 may also include all objects that move in an imaginary space during execution of a program.</p><p id="p0015" num="0015">In the present embodiment, an example is described in which a finger is used as an inputting object and contact by the finger is detected by a touch panel, but there is no limitation to using a finger as an inputting object. A stylus pen or other known inputting objects suited to various schemes may be used in accordance with the touch panel scheme to be used.</p><p id="p0016" num="0016">The program according to the present embodiment is exemplified by a game program, but no limitation is imposed thereby. Any program requiring operation by a virtual operation key such as that shown in <figref idrefs="f0001">FIG. 1</figref> may be used. Such a program is stored in advance in a memory unit 114 of the terminal device 100, but it is also possible to receive the program from a server (not shown) via a communication processing unit 111. Also, the program may be stored in a predetermined cartridge to be connected to the terminal device 100 via a connector 124, whereupon the control unit 110 may read out the program from the cartridge. It is furthermore possible to store the program on a server and then download and execute the program in<!-- EPO <DP n="5"> --> the terminal device 100 in similar fashion to a program referred to as a "native app."</p><p id="p0017" num="0017">Furthermore, in the present embodiment, a description is provided for the case in which the program is executed in the control unit 110 of the terminal device 100, but it is also possible to store the program in an external server, to carry out processing by the program in the server in accordance with instructions/commands transmitted from the terminal device 100 in accordance with the progress of the program, and then to transmit the results to the terminal device 100 in similar fashion to a program referred to as a web app to thereby implement the display according to the present embodiment.</p><p id="p0018" num="0018"><figref idrefs="f0001">FIG. 2</figref> shows an example of a screen displayed on the display unit of the terminal device according to an embodiment of the present invention, and shows a state in which the user is operating the virtual joystick 131. The virtual joystick 131 functioning as a virtual operation key is displayed on the display unit 113 of the terminal device 100 in a fixed position determined in advance. The virtual joystick 131 is formed as a circle around a reference position C0. An operative object 135 formed as a circle around a contact position C1 of the user's finger is displayed on the display unit 113 in order to explicitly ascertain the position on the display unit 113 contacted by the user's finger.</p><p id="p0019" num="0019">The virtual joystick 131 and operative object 135 to be displayed in the present embodiment are displayed semitransparently, and the movable object 132 can be visually confirmed even when, e.g., the display is superimposed on the movable object 132.</p><p id="p0020" num="0020"><figref idrefs="f0001">FIG. 2</figref> shows a state in which the user has made finger-contact with a desired position on the virtual joystick 131, and has thereafter dragged the finger in a desired direction to move to the position of contact position C1. A direction A0 of the contact position C1 as viewed from the reference position C0 is determined from the coordinate value of the reference position C0 and the coordinate value of the contact position C1 and the distance D0 between the two positions is determined. A movement direction Ax and a movement distance Dx of the display position of the movable object 132 are determined on the basis of the direction A0 and the distance D0 thus determined. As a result, the movable object 132 is moved by the distance Dx in the direction Ax determined from the initially<!-- EPO <DP n="6"> --> displayed position (in the drawing, the position of the movable object 132 indicated by a broken line), and then displayed.</p><p id="p0021" num="0021">In the present embodiment, The virtual joystick 131 and operative object 135 are displayed semitransparently as described above, but the virtual joystick 131 and the operative object 135 are not necessarily required to be constantly displayed. Although not particularly shown in the drawings, as an example, these objects may be displayed from the initial time at which the inputting object makes contact with the touch panel 116. The area corresponding to the virtual joystick 131 and the operative object 135 may be provided in an imaginary fashion in a corresponding position of the touch panel without these objects being explicitly displayed on the display unit 113.</p><heading id="h0011">&lt;Terminal Device&gt;</heading><p id="p0022" num="0022"><figref idrefs="f0002">FIG. 3</figref> is a block view showing a configuration of the terminal device 100 according to an embodiment of the present invention. The terminal device 100 according to the present embodiment is not required to be provided with all the constituent elements shown in <figref idrefs="f0002">FIG. 3</figref>, and it is also possible to omit a portion thereof from the configuration.</p><p id="p0023" num="0023">The terminal device 100 according to an embodiment of the present invention comprises a control unit 110, a wireless communication processing unit 111 connected to an antenna 112, a display unit 113, a memory unit 114, an operation unit 115 comprising a touch panel 116 and a hard key 117, an audio processing unit 118 connected to a speaker 119 and a microphone 120, a detection unit 121 comprising an acceleration sensor 122 and/or a GPS sensor 123, a connector 124, and an image processing unit 125 connected to a camera 126. These constituent elements are electrically connected to each other via a control line and a data line.</p><p id="p0024" num="0024">The control unit 110 is composed of a CPU (microcomputer) and controls the display of various image information stored in the memory unit 114 to the display unit 113 on the basis of coordinate information inputted by contact on the touch panel 116. The control unit 110 reads out from the memory unit 114 the program according to the present embodiment stored in the memory unit 114, and controls the progress of the application according to the present embodiment. In other words, the control unit 110 controls the other connected constituent elements on the basis of various programs stored in the memory unit 114.<!-- EPO <DP n="7"> --></p><p id="p0025" num="0025">The control unit 110 may be composed of one or more CPUs. It is also possible to separately provide image processing, i.e., a GPU specialized for display control of the display unit 113.</p><p id="p0026" num="0026">The wireless communication processing unit 111 performs modulation, demodulation, and various other processes for transmitting information stored in the memory unit 114 to another remotely established terminal and for receiving information transmitted from another terminal, via a connected wireless communication antenna 112. For example, when the program according to the present embodiment is to be received from a server, the wireless communication processing unit 111 controls receiving from the server or the like in a single process at the start of execution or in a progressive manner in accordance with the progress of processing, and also controls transmission of various processing or results obtained by execution of the program to the server.</p><p id="p0027" num="0027">The wireless communication processing unit 111 carries out processing on the basis of a wideband wireless communication scheme typified by wideband-code division multiple access (W-CDMA), but it is also possible to carry out processing on the basis of a scheme related to narrowband wireless communication such as wireless LAN or Bluetooth (registered trademark) as typified by IEEE 802.11.</p><p id="p0028" num="0028">The display unit 113 displays, on the basis of, e.g., image information stored in the memory unit 114, a movable object, a virtual joystick, or another virtual operation key indicated by the control unit for executing a predetermined program. The display unit is composed of, e.g., a liquid crystal display. The terminal device according to the present embodiment is provided with a single display unit, but it is also possible to provide two or more display units.</p><p id="p0029" num="0029">The memory unit 114 is composed of ROM, RAM, nonvolatile memory, or the like. ROM is, e.g., memory for storing the program according to the present embodiment. The control unit 110 loads the program to execute various processing. RAM is memory used for reading and writing data while various commands generated by executing the program stored in ROM are being processed by the control unit 110. The nonvolatile memory is used for reading and writing of data by execution of the program, and the data written therein is saved even after execution of the program has ended.<!-- EPO <DP n="8"> --></p><p id="p0030" num="0030">The operation unit 115 is composed of a touch panel 116, a hard key 117, and the like, and receives various instructions from the user.</p><p id="p0031" num="0031">The touch panel 116 is disposed so as to cover the display unit 113 and is used for outputting to the control unit 110 position coordinate data corresponding to image data to be displayed on the display unit 113. Touch panel schemes that may be used include a resistive film scheme, a capacitive coupling scheme, an ultrasonic surface acoustic wave scheme, and other known schemes. Contact with the touch panel by a finger, a stylus pen, or other known inputting object is detected in accordance with the scheme to be used.</p><p id="p0032" num="0032">The hard key 117 controls signal on/off by the physical pressing of a switch and is composed of a power source key, a volume key, or the like. A hard key 117 such as noted above controls the terminal device power source on/off, the volume of background music during program execution, or other control. In addition to a virtual operation key, it is also possible to provide various keys to be used in a game.</p><p id="p0033" num="0033">The detection unit 121 is composed of an acceleration sensor 122 and/or a GPS sensor 123. The acceleration sensor detects the acceleration of the terminal device 100 in three axial directions to detect, e.g., the rotation of the terminal device 100.</p><p id="p0034" num="0034">The connector 124 accepts insertion of a cartridge or storage medium in which, e.g., the program according the present embodiment is stored, and mediates reading and writing by the control unit 110. A terminal unit for outputting image information to, e.g., a liquid crystal television or other external display device may also be included.</p><p id="p0035" num="0035">The audio processing unit 118 encodes audio information inputted from the microphone 120 for storage in the memory unit 114. The audio processing unit 118 decodes and outputs background music and other audio information stored in the memory unit 114 from the speaker 119.</p><p id="p0036" num="0036">The image processing unit 125 is connected to the camera 126, converts images taken by the camera 126 to a data format suitable for storage, and stores the images in the memory unit 114.<!-- EPO <DP n="9"> --></p><heading id="h0012">&lt;Summary of operating the virtual joystick&gt;</heading><p id="p0037" num="0037"><figref idrefs="f0003">FIG. 4</figref> illustrates the method for determining the distance and direction of the contact position in a virtual joystick 131 as viewed from the reference position.</p><p id="p0038" num="0038"><figref idrefs="f0003">FIG. 4</figref> shows the relationship between the virtual joystick 131 displayed on the display unit 113 and the contact position of the inputting object. First, the virtual joystick 131 is formed as a circle around the reference position C0. The initial display position of the virtual joystick 131 is determined in advance to be a desired coordinate position on the display unit 113, and a circle showing the virtual joystick 131 is displayed on the coordinate position together with execution of the program. The display unit coordinate system is correlated so as to match the touch panel coordinate system.</p><p id="p0039" num="0039">In the present embodiment, the reference position serves as a reference when the direction and distance of the contact position of the inputting object on the touch panel is to be determined, and is the center (point C0) of the circle forming the virtual joystick 131. The reference position is not necessarily required to be the center (median point) of the operation key when, e.g., the virtual operation key is not formed as a circle, as long as the reference position can be a reference used when determining the direction and distance of the contact position as noted above. Since the reference position can be used as a reference, the reference position may be any position determined in advance.</p><p id="p0040" num="0040">The user brings his/her finger into contact with any position inside the virtual joystick 131 displayed in advance on the display unit 113, and drags the inner part of the virtual joystick 131 in any direction to move the contact position. At this time, the touch panel 116 detects the position coordinate of the contact position during or after movement, and reports the position coordinate to the control unit 110. In <figref idrefs="f0003">FIG. 4</figref>, the position coordinate (X2, Y2) of the contact position C2 or the position coordinate (X3, Y3) of the contact position C3 is reported to the control unit 110 as the contact position of the finger during or after a drag operation.</p><p id="p0041" num="0041">The control unit 110 determines the length and angle formed by line segments A2 and A3 formed by the position coordinate (X0, Y0) of the<!-- EPO <DP n="10"> --> reference position C0 determined in advance, the acquired position coordinate (X2, Y2) of the contact position C2 or the position coordinate (X3, Y3) of the contact position C3. By "angle" is meant the direction of the contact positions C2 and C3 as viewed from the reference position C0. By "length" is meant the distance between the reference position C0 and the contact positions C2 and C3.</p><p id="p0042" num="0042">The angle (direction) and length (distance) can be determined using a known method. Following is an example. Using the line segment A2 as an example, first, the angle (direction) is calculated with the following formula (formula 1) using the length L2 of the line segment A2 and the angle θ2 formed by the line segment A2 with respect to X-axis in an imaginary XY coordinate system in which the reference position C0 is the origin.</p><heading id="h0013">[Formula 1]</heading><p id="p0043" num="0043">Angle θ2 formed by the line segment A2 formed by the reference position and the contact position: <maths id="math0001" num=""><math display="block"><mi mathvariant="normal">Cos θ</mi><mo>⁢</mo><mn mathvariant="normal">2</mn><mo>=</mo><mfenced separators=""><mi mathvariant="normal">X</mi><mo>⁢</mo><mn mathvariant="normal">2</mn><mo>-</mo><mi mathvariant="normal">X</mi><mo>⁢</mo><mn mathvariant="normal">0</mn></mfenced><mo>/</mo><mi mathvariant="normal">L</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></math><img id="ib0001" file="imgb0001.tif" wi="57" he="9" img-content="math" img-format="tif"/></maths> where L2 is the length of the line segment</p><p id="p0044" num="0044">Length L2 of the line segment A2 formed between the reference position and the contact position: <maths id="math0002" num=""><math display="block"><mi mathvariant="normal">L</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><msqrt><msup><mfenced separators=""><mi>X</mi><mo>⁢</mo><mn>2</mn><mo>-</mo><mi>X</mi><mo>⁢</mo><mn>0</mn></mfenced><mn>2</mn></msup><mo>+</mo><msup><mfenced separators=""><mi>Y</mi><mo>⁢</mo><mn>2</mn><mo>-</mo><mi>Y</mi><mo>⁢</mo><mn>0</mn></mfenced><mn>2</mn></msup></msqrt></math><img id="ib0002" file="imgb0002.tif" wi="71" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0045" num="0045">A table is stored in the memory unit 114, the table containing the angle and length of the line segments A2 and A3 formed by the position coordinate (X0, Y0) of the reference position C0, the position coordinate (X2, Y2) of the contact position C2 or the position coordinate (X3, Y3) of the contact position C3, in other words, the direction of the contact positions C2 and C3 as viewed from the reference position C0 and the distance between the reference position C0 and the contact positions C2 and C3, and also containing the correspondence between the movement direction and movement distance of the movable object 132. The control unit 110 determines the movement direction and movement distance of the movable object 132 from the determined direction of the contact positions C2 and C3 as viewed from the reference position C0 and the distance between the reference position C0 and the contact positions C2 and C3, and controls displaying of the movable object in accordance therewith.</p><p id="p0046" num="0046"><!-- EPO <DP n="11"> --> A table was used in the example described above, but it is also possible to store a predetermined relational expression and determine the movement direction and movement distance of the movable object on the basis thereof, and the determination method may be any known method. The method for determining the movement distance of the movable object may be, e.g., speed during movement or distance moved, and may be selected, as appropriate.</p><p id="p0047" num="0047"><figref idrefs="f0003">FIG. 5</figref> illustrates the method for controlling display of the virtual joystick 131. First, in the virtual joystick 131 according to the present embodiment, an operation detection area 136 is set in advance on the touch panel 116 in correspondence with the display area of the virtual joystick 131. The operation detection area 136 is used by the control unit to recognize a contact operation by the inputting object in the operation detection area as an operation on the virtual joystick 131.</p><p id="p0048" num="0048"><figref idrefs="f0003">FIG. 5(a)</figref> shows the case in which the same area as the display area of the virtual joystick 131 formed as a circle is set as the operation detection area 136. The operation detection area 136 and the display area of the virtual joystick 131 are perfectly identical corresponding areas. The contact position C1 shows the position where the user has operated the inputting object, dragged the virtual joystick 131, and moved the inputting object. When the user operates and furthermore drags the inputting object away from the reference position C0, which is the center of the virtual joystick 131, the contact position C1 of the inputting object exceeds the display area of the virtual joystick 131, i.e., the operation detection area 136.</p><p id="p0049" num="0049">At this time, the control unit 110 controls the display position of the virtual joystick 131 so that the display position is modified in accordance with the exceeded contact position C1 of the inputting object. In other words, the control unit 110 controls the virtual joystick 131 so as to be displayed tracking in the inputting object movement direction. For example, the control unit 110 begins moving the display position of the virtual joystick 131 when the contact position C1 of the inputting object has exceeded the display area of the virtual joystick 131 by a predetermined distance D1. The control unit then performs tracking display control of the virtual joystick 131 so that the distance between the outer periphery of the display area of the virtual joystick 131 and C1-1, which is the contact position of the inputting object, is maintained at the<!-- EPO <DP n="12"> --> distance D1. In other words, the control unit 110 controls displaying so that the position C1-1, which is the contact position of the inputting object and the center of the circle forming the operative object 135, is positioned on the outer side of the display area of the virtual joystick 131, i.e., the circle forming the virtual joystick 131 when the contact position of the inputting object has exceeded the display area of the virtual joystick 131 due to a drag operation by the inputting object.</p><p id="p0050" num="0050">Providing the distance D1 to tracking display in this manner makes it possible to provide the user with a trailing perception rather than the perception that the display area of the virtual joystick 131 itself is being moved.</p><p id="p0051" num="0051">In the above case, the contact position of the inputting object is actually C1-1. In such a case, the angle and length of the line segment A1, which is determined on the basis of the reference position C0 and the contact position of the inputting object, is determined on the basis of the reference position C0 and the position at which the line segment connecting the reference position C0 and the contact position C1-1 intersects the outer periphery of the display area of the virtual joystick 131.</p><p id="p0052" num="0052"><figref idrefs="f0003">FIGS. 5(b) and 5(c)</figref> show another example of the control of the display of the virtual joystick 131. In <figref idrefs="f0003">FIG. 5(b)</figref>, the display area of the operation detection area 136 is set in advance to be slightly greater than the display area of the virtual joystick 131. In such a case, even were the contact position of the inputting object to be outside of the display area of the virtual joystick 131, the contact can be recognized to be an operation on the virtual joystick 131. Also, the control unit 110 does not immediately cause the display of the virtual joystick 131 to be tracked even when contact position C1 of the inputting object exceeds the display area of the virtual joystick 131, but does start tracking display control for modifying the display position of the virtual joystick 131 in accordance with the contact position C1 of the inputting object once the operation detection area 136 has been exceeded. Since some drift in the target position can be accommodated when the user contacts the operation key with the inputting object, operability by user is further improved. Also, in the same manner as <figref idrefs="f0003">FIG. 5(a)</figref>, providing "play" in the time and distance to tracking display further improves operability by the user after the drag operation has started.</p><p id="p0053" num="0053"><!-- EPO <DP n="13"> --> In <figref idrefs="f0003">FIG. 5(c)</figref>, an area smaller than the display area of the virtual joystick 131 is set in advance. In such a case, the control unit 110 starts tracking of the virtual joystick 131 at the point when the operation detection area 136 has been exceeded as a result of the drag operation of the inputting object. In other words, tracking display is started even though the contact position of the inputting object is in the display area of the virtual joystick 131. Doing so makes it possible to achieve a reliable perception that contact is constant because the contact position of the inputting object by the user is never away from the display area of the virtual joystick.</p><p id="p0054" num="0054">This tracking display control of the virtual joystick 131 to the contact position can be used in any of the modes shown in <figref idrefs="f0003">FIG. 5(a) to 5(c)</figref>, and can be set, as appropriate.</p><p id="p0055" num="0055"><figref idrefs="f0004">FIG. 6</figref> illustrates the method for controlling display of the virtual joystick 131. In the present embodiment, the virtual operation button A133 and/or the virtual operation button B134 is displayed on the right side of the display unit 113. When the drag operation by the inputting object exceeds the display area of the virtual joystick 131 or the operation detection area 136 and thereby causes the virtual joystick 131 to be displayed so as to track the contact position of the inputting object, the control unit 110 causes the display unit to perform a display such that tracking display is temporarily stopped when the display position of the virtual joystick 131 exceeds the predetermined area.</p><p id="p0056" num="0056">In the specific case that the display unit 113 has been divided into a right area and a left area about the center (line A-A') of the display unit 113, the area in which the virtual joystick 131 is displayed (the right-side area in <figref idrefs="f0004">FIG. 6</figref>) is set as a movement-allowed area 137. In other words, in <figref idrefs="f0004">FIG. 6</figref>, the area on the side in which a fixed position determined in advance is present is set as the movement-allowed area 137, the fixed position being the position in which the virtual joystick 131 is displayed prior to the start of operation of the virtual joystick 131. The movement-allowed area 137 is an area determined in advance for moving (tracking display) the display position of the virtual joystick 131 when the display position of the virtual joystick 131 is in the movement-allowed area, and displaying the virtual joystick 131 so as to stop on the boundary between the movement-allowed area of the display unit 113 and other areas when the area has been exceeded. In other words, an area divided in half about the<!-- EPO <DP n="14"> --> center of the display unit 113 is not necessarily required to be set as the movement-allowed area 137 as long as the area is greater than the display area of the virtual joystick 131 and the operation detection area 136. For example, the area can be modified, as appropriate, in accordance with the arrangement of other virtual keys or the arrangement of the movable object to be displayed. When the user's finger is used as the inputting object, the movement-allowed area 137 can be set in a range that allows the finger as an inputting object to make relative contact while the terminal device is being grasped.</p><p id="p0057" num="0057">In <figref idrefs="f0004">FIG. 6</figref>, when the display position of the virtual joystick 131 (e.g., the reference position C0 inside the virtual joystick 131) exceeds the movement-allowed area 137 as a result of the tracking display of the virtual joystick 131 being controlled, the virtual joystick 131 is displayed so as to stop on the boundary 139 between the movement-allowed area 137 and other areas 138 of the display unit. In the example of <figref idrefs="f0004">FIG. 6</figref>, the virtual joystick 131 is displayed so as to stop at the position where the boundary 139 intersects the line 140 parallel to the outer periphery of the display unit 113 which passes through the contact position C1 of the inputting object. Therefore, when the inputting object is dragged up or down inside the other areas 138, the virtual joystick 131 is displayed so as to move up or down along the boundary line.</p><p id="p0058" num="0058"><figref idrefs="f0004">FIG. 6</figref> shows an example in which the virtual joystick 131 is displayed so as to stop on the boundary 139 when the display position of the virtual joystick 131 exceeds the movement-allowed area 137 as a result of the tracking display of the virtual joystick 131 being controlled, but no limitation is imposed thereby. For example, in a case such as the above, the control unit 110 may also control the display so that the display position of the virtual joystick returns to a predetermined fixed position where the virtual joystick 131 was originally displayed.</p><heading id="h0014">&lt;Virtual joystick control flow&gt;</heading><p id="p0059" num="0059"><figref idrefs="f0005">FIG. 7</figref> is a flowchart showing the flow of processing carried out in the control unit 110 of the terminal device 100 by execution of the program according to the present invention. The processing flow is started when the control unit 110 executes the program according to the present embodiment stored in the memory unit 114. Contact by the user's inputting object on the virtual joystick 131 is detected via the touch panel 116 (S101). The control unit 110 next assesses whether the contact position is<!-- EPO <DP n="15"> --> still inside the display area of the virtual joystick 131 (S102). As illustrated in <figref idrefs="f0003">FIG. 5</figref>, it is also possible to use the operation detection area 136 in place of the display area of the virtual joystick 131 as a reference for assessment in S102.</p><p id="p0060" num="0060">When the contact position of the inputting object has been assessed to be inside the virtual joystick in S102, the direction of the contact position as viewed from the reference position and the distance between the reference position and the contact position are determined on the basis of the contact position and the reference position set inside the virtual joystick (S103 and S104). The control unit 110 then, on the basis of the direction and distance thus determined, determines the movement direction and movement distance of the movable object displayed on the display unit 113 from a reference table stored in the memory unit 114 and controls the movement display of the movable object (S105).</p><p id="p0061" num="0061">Next, it is subsequently assessed whether contact by the inputting object on the touch panel is continuous, i.e., whether a drag operation is being carried out (S106). As a result, when it is assessed that contact is continuous and that a drag operation is being carried out, the process returns again to S102, and assesses whether there is a contact position inside the display area of the virtual joystick 131 on the basis of the contact position after the drag operation.</p><p id="p0062" num="0062">In S102, the process proceeds to S107 when it has been assessed that the contact position is not inside the display area of the virtual joystick 131, i.e., when the contact position of the inputting object has not exceeded the display area of the virtual joystick 131 due to a drag operation.</p><p id="p0063" num="0063">Next, in S107, the control unit 110 assesses whether the display position of the virtual joystick 131 is inside the movement-allowed area 137 (S107). When the contact position is assessed to still be inside the movement-allowed area 137, the control unit 110 modifies the display position of the virtual joystick 131 in accordance with the contact position (S108). In other words, the control unit 110 controls display so that the virtual joystick 131 follows to the contact position.</p><p id="p0064" num="0064">Next, in S109 and S110, the direction of the contact position as viewed from the reference position and the distance between the contact<!-- EPO <DP n="16"> --> position and the reference position is determined on the basis of the contact position of the inputting object and the reference position provided inside the virtual joystick. The contact position is used for determining distance, but the distance may also be determined on the basis of the reference position and the position at which the line determined on the basis of the reference position and the contact position of the inputting object intersects the outer periphery of the display area of the virtual joystick 131.</p><p id="p0065" num="0065">On the basis of the direction and the distance thus determined, the control unit 110 determines the movement direction and movement distance of the movable object displayed on the display unit 113 from the reference table stored in the memory unit 114, and controls the movement and display of the movable object (S111).</p><p id="p0066" num="0066">In S106, the control unit 110 assesses whether contact by the inputting object on the touch panel is continuous, i.e., whether a drag operation is being carried out (S106). As a result, the control unit 110 returns to S102 when it has been assessed that a drag operation is continuing. At this point, in the same manner as above, the process proceeds to S107 when the control unit 110 has assessed that the display area of the virtual joystick 131 has been exceeded.</p><p id="p0067" num="0067">In S107, the control unit 110 assesses whether the display position of the virtual joystick 131 is within the movement-allowed area 137 (S107), and the process carried out by the control unit 110 proceeds to S112 when the display position has been assessed to have exceeded the movement-allowed area.</p><p id="p0068" num="0068">In S112, the control unit 110 modifies the display position of the virtual joystick 131 to be on the boundary 139 between the movement-allowed area 137 and the other areas 138 of the display unit 113. In S113 and S114, the direction of the contact position as viewed from the reference position and the distance between the contact position and the reference position is determined on the basis of the contact position of the inputting object and the reference position provided inside the virtual joystick. In this case, the contact position is used for determining distance, but in lieu of the contact position, it is preferred that the distance be determined on the basis of the reference position and the position at which the line determined on the basis of the reference position and the contact position<!-- EPO <DP n="17"> --> of the inputting object intersects the outer periphery of the display area of the virtual joystick 131.</p><p id="p0069" num="0069">On the basis of the direction and the distance thus determined, the control unit 110 determines the movement direction and movement distance of the movable object displayed on the display unit 113 from the reference table stored in the memory unit 114, and controls the movement and display of the movable object (S115).</p><p id="p0070" num="0070">Returning again to S106, it is assessed whether contact by the inputting object on the touch panel is continuous, i.e., whether a drag operation is being carried out. When it has been assessed in S106 that the inputting object has been separated from the touch panel, the processing flow ends.</p><heading id="h0015">&lt;Screen transition&gt;</heading><p id="p0071" num="0071"><figref idrefs="f0006">FIG. 8</figref> is a schematic view of a screen example brought about by execution of the program according to the present embodiment. Referring to <figref idrefs="f0006">FIG. 8(a)</figref>, the control unit 110 of the terminal device 100 starts execution of the program according to the present embodiment, and the virtual joystick 131 and movable object 132 are then displayed in a predetermined fixed position of the display unit 113. In addition to people, animals, monsters, and other characters, the movable object 132 may also include weapons, rocks, and all other objects that move in an imaginary space during execution of a program.</p><p id="p0072" num="0072">Further referring to <figref idrefs="f0006">FIG. 8(a)</figref>, the operative object 135 for explicitly ascertaining the position on the touch panel 116 contacted by the user's finger is displayed on the display unit 113. The operative object 135 moves display position together with the movement of the inputting object so that the touch position made by the inputting object is in the center of the operative object 135.</p><p id="p0073" num="0073">In <figref idrefs="f0006">FIG 8(a)</figref>, since the user has not carried out a contact operation on the touch panel 116 using the inputting object, the virtual joystick 131 and the movable object 132 are both displayed in a fixed position determined in advance. Specifically, the reference position C0 of the virtual joystick 131 and the center of the operative object 135 indicating the contact position are display so as to be superimposed on each other.</p><p id="p0074" num="0074"><!-- EPO <DP n="18"> --><figref idrefs="f0006">FIG. 8(b)</figref> is a schematic view of a screen example of when the user is carrying out a drag operation on the virtual joystick 131 using the inputting object when the display shown in <figref idrefs="f0006">Fig. 8(a)</figref> is being performed. Referring to <figref idrefs="f0006">FIG. 8(b)</figref>, contact is made by the inputting object in the position of the contact position C1, whereby the display position is moved together with the operative object 135. The direction of the contact position C1 and the distance to the contact position C1 are determined on the basis of the reference position C0 and the contact position C1, and the display position of the movable object 132 is moved on the basis of the direction and distance thus determined using the determined direction and distance. At this time, the contact position of the inputting object has not exceeded the display area of the virtual joystick 131, and the control unit 110 therefore performs control so that the display position of the virtual joystick 131 is in a fixed position and does not perform tracking control for the display position.</p><p id="p0075" num="0075"><figref idrefs="f0006">FIG. 8(c)</figref> is a schematic view of a screen example of when the user is carrying out a drag operation on the virtual joystick 131 using the inputting object when the display shown in <figref idrefs="f0006">Fig. 8(a)</figref> is being performed, and the contact position has exceeded the display area of the virtual joystick 131. In this example, the determination as to whether to perform control for tracking display of the virtual joystick 131 is made based on the display area thereof, but it is also possible to use the operation detection area 136. Referring to <figref idrefs="f0006">FIG. 8(c)</figref>, control for tracking display of the virtual joystick 131 is being carried out, and the display area of the virtual joystick 131 is therefore moving together with the movement of the contact position. The direction of the contact position C1 and the distance to the contact position C1 are determined on the basis of the reference position C0 and the contact position C1, and the display position of the movable object 132 is being moved on the basis of the direction and distance thus determined using the determined direction and distance.</p><p id="p0076" num="0076">In similar fashion to <figref idrefs="f0006">FIG. 8(c), FIG. 8(d)</figref> is a schematic view of a screen example of when the user is carrying out a drag operation on the virtual joystick 131 using the inputting object when the display shown in <figref idrefs="f0006">Fig. 8(a)</figref> is being performed, and the contact position has exceeded the display area of the virtual joystick 131. As illustrated in <figref idrefs="f0006">FIG. 8(c)</figref>, control of tracking display of the virtual joystick 131 is being carried out. Also, the movable object 132 is moving a greater distance than the<!-- EPO <DP n="19"> --> case of <figref idrefs="f0006">FIG. 8(c)</figref> together with the passage of operation time on the virtual operative object 131, which was in a fixed position.</p><p id="p0077" num="0077">In similar fashion to <figref idrefs="f0006">FIG. 8(c) and 8(d), FIG. 8(e)</figref> is a schematic view of a screen example of when the user is carrying out a drag operation on the virtual joystick 131 using the inputting object when the display shown in <figref idrefs="f0006">Fig. 8(a)</figref> is being performed, and the contact position has exceeded the display area of the virtual joystick 131. At this point, in the example of <figref idrefs="f0006">FIG. 8(e)</figref>, the display unit 113 is divided into a left area and a right area about center (line A-A') of the display unit 113 and the area in which the virtual joystick 131 is being displayed (the left-side area in <figref idrefs="f0004">FIG. 6</figref>) is set as the movement-allowed area 137. The contact position C1 indicating the contact position of the inputting object has exceeded the movement-allowed area 137 and the display position of the virtual joystick 131 (specifically, the reference position C0) is about to exceed the movement-allowed area 137. Therefore, the virtual operative object 131 is displayed so that the reference position C0 comes onto the boundary 139 between the movement-allowed area 137 and the other areas 138. At this point, the reference position C0 is made to stop on the boundary line, but as shall be apparent, it is also possible for the reference position to be displayed so as to stop on the boundary line when the outer periphery of the display area of the virtual joystick 131 nearest to the boundary 139 has exceeded the movement-allowed area 137.</p><p id="p0078" num="0078">As described above, in the present embodiment, the display position of the virtual joystick 131 moves, i.e., tracking display is carried out, on the basis of the contact position when the contact position of the inputting object has exceeded the virtual joystick 131 or the operation detection area 136, and it is possible to prevent the inconvenience of the position of the finger as the inputting object from unknowingly moving from the virtual joystick 131 due to the user concentrating on, e.g., the movement of the character or other movable object being moved. Since the display position of the virtual operative object 131 is displayed so as to stop on the boundary between the movement-allowed area 137 and the other areas 138 when the movement-allowed area 137 has been exceeded, tracking control within a range in which input is relatively possible is carried out from the position of the finger as the inputting object, and operation that is not uncomfortable to the user can be carried out.</p><heading id="h0016">&lt;Other embodiments of the present invention&gt;</heading><!-- EPO <DP n="20"> --><p id="p0079" num="0079">Other embodiments of the present invention will be described. A description of the portions that achieve the same function as the terminal device 100 according to the embodiment described above will be omitted. The embodiment described above and other embodiments described below can be combined wholly or in part, as appropriate.</p><heading id="h0017">1. Display position of the virtual joystick 131</heading><p id="p0080" num="0080">In the embodiment described above, the case was described in which, when the program according to the embodiment described above is executed, the virtual joystick 131 is displayed in a fixed position determined in advance, and the inputting object contacts the virtual operative object 131 to thereby start processing. However, in lieu thereof, it is also possible to start processing by bringing the inputting object into contact with the touch panel in any position.</p><p id="p0081" num="0081">As a specific example thereof, <figref idrefs="f0007">FIG. 9</figref> is a schematic view of a screen example according to another embodiment showing the display position of the virtual joystick 131. Referring to <figref idrefs="f0007">FIG. 9</figref>, the virtual joystick 131 is displayed in a fixed position by execution of the program (indicated by a broken like in <figref idrefs="f0007">FIG. 9</figref>). When contact is thereafter made by the inputting object in a desired position, the virtual joystick 131 is moved to a display position about the reference position C0 using the contact position as the reference position C0. Control for displaying the movable object using the virtual joystick 131 in the position after movement and control for tracking display of the virtual operative object 131 are carried out. The specific processing flow and the like are the same as that carried out in the embodiment described above.</p><p id="p0082" num="0082">Setting the display position in this manner makes it possible to further improve user convenience.</p><heading id="h0018">2. Control when the terminal device 100 is used in a portrait orientation.</heading><p id="p0083" num="0083">The terminal device 100 according to the present embodiment is provided with an acceleration sensor 122. The rotation of the terminal device 100 can be detected by a known method using the acceleration sensor 122. Described in the embodiment above is the case in which the terminal device 100 is used in the landscape direction, but the display of the display unit 113 is switched when the user repositions the terminal device 100 in portrait orientation and the rotation of the terminal device 100 is detected by the acceleration sensor 122 in the present embodiment.<!-- EPO <DP n="21"> --></p><p id="p0084" num="0084">As a specific example thereof, <figref idrefs="f0007">FIG. 10</figref> is a schematic view of a screen example of when the terminal device 100 is used in portrait orientation. Referring to <figref idrefs="f0007">FIG. 10(a)</figref>, the movable object 132 or the like displayed in accompaniment with the progress of the program is displayed in the upper part of the display unit 113 and the virtual operation keys, i.e., the virtual joystick 131, the virtual operation button A133, and the virtual operation button B134 are displayed in the lower part. In other words, when the terminal device 100 is used in the landscape orientation, the virtual joystick 131 and other virtual operation keys are superimposed and displayed on the display object, which may change at any time together with the progress of the program, but when the terminal device 100 is used in portrait orientation, the display is controlled so that the virtual operation keys are displayed in different display area.</p><p id="p0085" num="0085"><figref idrefs="f0007">FIG. 10(b)</figref> is a schematic view of a screen example in which display control is performed through tracking of the virtual joystick 131 in the contact position by the inputting object. The tracking display control method is the same as the tracking display described in the embodiment above.</p><p id="p0086" num="0086"><figref idrefs="f0007">FIG. 10(c)</figref> is a schematic view of a screen example of when the contact position by the inputting object has been dragged beyond the movement-allowed area 137. In <figref idrefs="f0007">FIG. 10(c)</figref>, the lower left of the display unit 113 is set as the movement-allowed area 137 with consideration given to the arrangement of the virtual operation button A133 and virtual operation button B134 and the contactable range of the left thumb to be used as an inputting object. Since the contact position C1 has moved beyond the movement-allowed area 137, the display position of the virtual joystick 131 is brought to a stop on the boundary of the movement-allowed area 137 set in the lower left of the display unit 113.</p><p id="p0087" num="0087">Switching the display mode of the virtual operation keys together with switching the display mode of the display unit 113 on the basis of the output of the acceleration sensor 122 makes it possible to provide a greater variety of operation methods to a user.</p><p id="p0088" num="0088">In the embodiment described above, the virtual joystick 131 and the operative object 135 were semitransparently displayed, but in the present embodiment, the display areas thereof and the display areas of the movable<!-- EPO <DP n="22"> --> object 132 and the like are set as separate display areas, and the virtual joystick 131 and the operative object 135 are therefore not necessarily required to be semitransparently displayed.</p><heading id="h0019">3. Control when the terminal device 100 is connected to an external display device 200</heading><p id="p0089" num="0089">Described in the embodiment described above was the case in which a display object, which may change at any time together with the progress of the program, is displayed on the display unit 113 of the terminal device 100, but it is also possible to connect to a liquid-crystal television or other external display device and display the display object and other image information, which may change at any time together with the progress of the program, on an external display device.</p><p id="p0090" num="0090"><figref idrefs="f0008">FIG. 11</figref> is a schematic view of a screen example of when the terminal device 100 is connected to the external display device 200. According to <figref idrefs="f0008">FIG. 11</figref>, the terminal device 100 is connected to an external display device 200 by way of a wireless connection, and the display object or other image information, which may change at any time together with the progress of the program, is outputted. This connection may use a wireless LAN or a scheme related to narrowband wireless compunction such as Bluetooth (registered trademark) by way of a wireless communication processing unit 111. It is also possible to use a wired connection that makes use of HDMI (registered trademark) or the like via a connector 124 provided to the terminal device 100.</p><p id="p0091" num="0091">Referring to <figref idrefs="f0008">FIG. 11</figref>, virtual operation keys that include the virtual joystick 131 are displayed on the display unit 113 of the terminal device 100, and display objects that include the movable object 132 and vary as the game progresses are displayed on the external display device 200. Display control of the movable object 132 in which the virtual joystick 131 is used and tracking control for the virtual joystick 131 are the same as in the embodiment described above.</p><p id="p0092" num="0092">Using such a configuration make it possible to use the terminal device 100 as a controller dedicated to operation and to provide the user with a more realistic feeling.</p><p id="p0093" num="0093">In the embodiment described above, the virtual joystick 131 and the operative object 135 are semitransparently displayed, but in the present<!-- EPO <DP n="23"> --> embodiment, the display areas thereof and the display areas of the movable object 132 and the like are set as separate display areas, and the virtual joystick 131 and the operative object 135 are therefore not necessarily required to be semitransparently displayed.</p><heading id="h0020">4. Other examples of virtual operation keys</heading><p id="p0094" num="0094">Described in the embodiment above is a case where the virtual joystick 131 is used as a virtual operation key. However, virtual operation keys in which the present invention can be applied are not limited to the virtual joystick 131. For example, the present invention may be applied to a virtual operation key in which contact must be continuously made for fixed period of time or greater.</p><p id="p0095" num="0095"><figref idrefs="f0008">FIG. 12</figref> is a schematic view of a screen example of when a virtual directional pad is used as the virtual operation key. Referring to <figref idrefs="f0008">FIG. 12</figref>, a virtual directional pad 151 is displayed on the display unit 113 of the terminal device 100 in a predetermined position. The user can control the movement of the movable object 132 by making contact with the virtual operation key in the four directions of up, down, left, and right as provided by the virtual directional pad 151.</p><p id="p0096" num="0096">In the case of the virtual directional pad 151, the user must more meticulously operate the inputting object because there is a plurality of more detailed virtual keys in comparison with the virtual joystick 131. Naturally, it is therefore possible to start tracking control for the virtual directional pad 151 when the contact position of the inputting object exceeds the display area of the individual virtual operation keys constituting the virtual directional pad 151. However, it is more desirable for the operation detection area 136 having a greater display area than the virtual directional pad 151 to be set and tracking control for the virtual directional pad 151 to be carried out on the basis of the operation detection area 136.</p><p id="p0097" num="0097"><figref idrefs="f0009">FIG. 13</figref> is a schematic view of a screen example of when a key imitating a bow and arrow is used as the virtual operation key. Described in the embodiment described above is the case in which the virtual joystick 131 is used as a virtual operation key. In other words, the case in which the virtual operation key is formed by a circle and the center of the circle is set as a reference position was described. However, the reference position is not limited to being the center or median point of<!-- EPO <DP n="24"> --> the virtual operation key, and any position may be set as the reference position.</p><p id="p0098" num="0098">Referring to <figref idrefs="f0009">FIG. 13</figref>, a virtual operation key 161 imitating a bow and arrow is displayed. The user performs an operation so as to draw the bow of the virtual operation key 161, i.e., make contact on the arrow using the inputting object, drags the virtual operation key in a predetermined direction while the inputting object is kept in contact with the virtual operation key, and the releases contact, whereupon the control unit 110 controls display so that an arrow flies through virtual space. In such a case, the reference position serving as a reference for determining the direction and distance of the contact position can be set, as appropriate, in any position C4. As for the area serving as a reference for determining whether to perform tracking control for the virtual operation key 161, any area can be set as the operation detection area 136 rather than the display area of the virtual operation key 161.</p><p id="p0099" num="0099">Using such a configuration makes it possible to express a greater variety of virtual operation keys.</p><p id="p0100" num="0100">The processing and procedures described in the present embodiment can be implemented not only by the configuration explicitly described above in the embodiments, but also by software, hardware, or combinations thereof. Specifically, the processing and procedures described in the present specification can be implemented by mounting logic corresponding to the processing in integrated circuitry, volatile memory, nonvolatile memory, a magnetic disk, optical storage, or other medium. Also, the processing and procedures described in the present specification can be mounted as a computer program and the processing and procedures can be executed in various types of computers.</p><p id="p0101" num="0101">It has been described that the processing and procedures described in the present specification are executed in a single device, software unit, component, and module, but such processing and procedures may be executed by a plurality of devices, a plurality of software units, a plurality of components, and/or a plurality of modules. Also, it has been described that the data, table, or database described in the present specification is stored in a single memory, but such data, table, or database may be stored in a plurality of memories provided to a single device or dispersively stored in a plurality of memories dispersively disposed in a plurality of<!-- EPO <DP n="25"> --> devices. The software and hardware elements described in the present specification can be consolidated in a smaller number of constituent elements or distributed among a higher number of constituent elements. Key
<dl id="dl0001" compact="compact"><dt>100</dt><dd>Terminal device</dd><dt>110</dt><dd>Control unit</dd><dt>113</dt><dd>Display unit</dd><dt>116</dt><dd>Touch panel</dd><dt>200</dt><dd>External display device</dd></dl></p></description><claims mxw-id="PCLM90459522" lang="EN" load-source="patent-office"><!-- EPO <DP n="26"> --><claim id="c-en-0001" num="0001"><claim-text>A terminal device comprising<br/>
a display unit for displaying a virtual operation key,<br/>
a touch panel for detecting contact by an inputting object on the virtual operation key, and<br/>
a control unit for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein<br/>
the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The terminal device according to Claim 1, wherein the touch panel is provided with an operation detection area for detecting operation on the virtual operation key in correlation to the display area of the virtual operation key, and<br/>
the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds the operation detection area due to the drag operation.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The terminal device according to Claim 2, wherein the operation detection area is the display area of the virtual operation key.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The terminal device according to Claim 1, wherein the display unit displays a predetermined movable object, and<br/>
the control unit determines the movement direction of the movable object on the basis of a predetermined reference position and the direction obtained from the contact position of the inputting object.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The terminal device according to Claim 1, wherein the display unit displays a predetermined movable object, and<br/>
the control unit determines the movement distance of the movable object on the basis of the distance between a predetermined reference position and the contact position of the inputting object.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text><!-- EPO <DP n="27"> --> The terminal device according to Claim 4, wherein the reference position is present in the operation detection area, and<br/>
if the contact position of the inputting object has exceeded the operation detection area due to the drag operation, the control unit determines the movement direction and the movement distance of the movable object on the basis of the distance between the reference position and the position at which a line connecting the reference position and the contact position intersects the outer periphery of the display area of the virtual operation key.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The terminal device according to Claim 1, wherein the control unit, if the display position exceeds the movement-allowed area by modifying the display position of the virtual operation key, displays the virtual operation key on the boundary between a movement-allowed area set in advance and other areas in the display unit in the case that</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The terminal device according to Claim 7, wherein the control unit displays the virtual operation key in a fixed position set in advance prior to detection of a drag operation on the virtual operation key.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The terminal device according to Claim 8, wherein the movement-allowed area is an area in which the fixed position is present if the display unit has been divided into a left area and a right area along the center of the display unit.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The terminal device according to Claim 8, wherein the control unit displays the virtual operation key in the fixed position, and, once contact on the touch panel by the inputting object is detected, subsequently displays the virtual operation key in the contact position.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The terminal device according to Claim 4, wherein the virtual operation key is formed as a circle, and<br/>
the reference position is the center of the circle formed by the virtual operation key.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The terminal device according to Claim 11, wherein the control unit displays on the display unit an operative object showing the contact position of the inputting object, and modifies the display position of the operative object in accordance with the movement of the contact position.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text><!-- EPO <DP n="28"> --> The terminal device according to Claim 12, wherein the operative object is formed as a circle, and<br/>
if the contact position of the inputting object has exceeded the display area of the virtual operation key due to the drag operation, the control unit controls the display position of the virtual operation key so that the center of the circle forming the operative object is positioned outside the circle forming the virtual operation key.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The terminal device according to Claim 1, wherein the virtual operation key is semitransparently displayed.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The terminal device according to Claim 1, wherein the virtual operation key is a virtual joystick, which virtually imitates a joystick.</claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>A program for causing a computer to function as a control unit for displaying a virtual operation key on a display unit, assessing whether a drag operation by an inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via a touch panel provided to a terminal device, and controlling the display position of the virtual operation key, wherein<br/>
the control unit modifies the display position of the virtual operation key in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>A method for controlling display of a virtual operation key, comprising<br/>
a step for displaying a virtual operation key on a display unit,<br/>
a step for detecting contact by an inputting object on the display unit via a touch panel, and<br/>
a step for assessing whether a drag operation by the inputting object has been carried out on the basis of contact with the virtual operation key by the inputting object detected via the touch panel and controlling the display position of the virtual operation key, wherein the display position of the virtual operation key is modified in accordance with the contact position of the inputting object if the contact position of the inputting object exceeds a display area of the virtual operation key due to the drag operation.</claim-text></claim></claims><drawings mxw-id="PDW20422245" load-source="patent-office"><!-- EPO <DP n="29"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="123" he="190" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0002" num="3"><img id="if0002" file="imgf0002.tif" wi="165" he="146" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0003" num="4,5(a),5(b),5(c)"><img id="if0003" file="imgf0003.tif" wi="165" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="124" he="93" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0005" num="7"><img id="if0005" file="imgf0005.tif" wi="165" he="181" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0006" num="8(a),8(b),8(c),8(d),8(e)"><img id="if0006" file="imgf0006.tif" wi="165" he="202" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0007" num="9,10(a),10(b),10(c)"><img id="if0007" file="imgf0007.tif" wi="165" he="202" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0008" num="11,12"><img id="if0008" file="imgf0008.tif" wi="165" he="215" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0009" num="13(a),13(b)"><img id="if0009" file="imgf0009.tif" wi="165" he="77" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
