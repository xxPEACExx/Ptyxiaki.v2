<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960622-A1" country="EP" doc-number="2960622" kind="A1" date="20151230" family-id="51176996" file-reference-id="318329" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451665" ucid="EP-2960622-A1"><document-id><country>EP</country><doc-number>2960622</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14306021-A" is-representative="YES"><document-id mxw-id="PAPP193866298" load-source="patent-office" format="original"><country>EP</country><doc-number>14306021.8</doc-number><date>20140627</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193866299" load-source="docdb" format="epo"><country>EP</country><doc-number>14306021</doc-number><kind>A</kind><date>20140627</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028320" ucid="EP-14306021-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>14306021</doc-number><kind>A</kind><date>20140627</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988525230" load-source="docdb">G01S  11/12        20060101ALI20141031BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526528" load-source="docdb">G01S   5/16        20060101ALI20141031BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526572" load-source="docdb">G01C   3/06        20060101AFI20141031BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526658" load-source="docdb">G01C   3/22        20060101ALI20141031BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1836132350" load-source="docdb" scheme="CPC">G01S  11/12        20130101 LI20170311BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1836132351" load-source="docdb" scheme="CPC">G01C   3/22        20130101 LI20170311BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1836132352" load-source="docdb" scheme="CPC">G01C   3/06        20130101 LI20170311BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984700919" load-source="docdb" scheme="CPC">H04W   4/025       20130101 LI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984704286" load-source="docdb" scheme="CPC">G06K   9/00671     20130101 FI20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546461" lang="DE" load-source="patent-office">Verfahren zur Schätzung eines Abstands von einer ersten Kommunikationsvorrichtung zu einer zweiten Kommunikationsvorrichtung und zugehörige Kommunikationsvorrichtungen, Server und System</invention-title><invention-title mxw-id="PT165546462" lang="EN" load-source="patent-office">A method for estimating a distance from a first communication device to a second communication device, and corresponding communication devices, server and system.</invention-title><invention-title mxw-id="PT165546463" lang="FR" load-source="patent-office">Procédé permettant d'estimer une distance depuis un premier dispositif de communication vers un second dispositif de communication et dispositifs de communication correspondants, serveur et système</invention-title><citations><patent-citations><patcit mxw-id="PCIT335962297" load-source="docdb" ucid="US-20070206175-A1"><document-id format="epo"><country>US</country><doc-number>20070206175</doc-number><kind>A1</kind><date>20070906</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT379461954" load-source="docdb" ucid="US-20100157135-A1"><document-id format="epo"><country>US</country><doc-number>20100157135</doc-number><kind>A1</kind><date>20100624</date></document-id><sources><source name="SEA" category="IY" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962299" load-source="docdb" ucid="US-20120117193-A1"><document-id format="epo"><country>US</country><doc-number>20120117193</doc-number><kind>A1</kind><date>20120510</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962300" load-source="docdb" ucid="US-20120209513-A1"><document-id format="epo"><country>US</country><doc-number>20120209513</doc-number><kind>A1</kind><date>20120816</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962296" load-source="docdb" ucid="US-6711293-B1"><document-id format="epo"><country>US</country><doc-number>6711293</doc-number><kind>B1</kind><date>20040323</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>YING-HAO YU ET AL.: "Relative Distance Estimation for Indoor Multi-Robot Control Using Monocular Digital Camera", PROCEEDINGS OF THE 3RD INTERNATIONAL WORKSHOP ON ARTIFICIAL INTELLIGENCE IN SCIENCE AND TECHNOLOGY, 2009, pages 1 - 6</text><sources><source mxw-id="PNPL62360128" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103321969" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>THOMSON LICENSING</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR1103320727" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>THOMSON LICENSING</last-name></addressbook></applicant><applicant mxw-id="PPAR1101640962" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Thomson Licensing</last-name><iid>101463287</iid><address><street>1-5 Rue Jeanne d'Arc</street><city>92130 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103313502" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FONTAINE PATRICK</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103333235" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FONTAINE, PATRICK</last-name></addressbook></inventor><inventor mxw-id="PPAR1101642707" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>FONTAINE, PATRICK</last-name><address><street>TECHNICOLOR, Technicolor R&amp;D France 975, avenue des Champs Blancs ZAC des Champs Blancs CS 176 16</street><city>35 576 Cesson Sévigné</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103315004" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>GOUACHE STEPHANE</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343005" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>GOUACHE, STEPHANE</last-name></addressbook></inventor><inventor mxw-id="PPAR1101651352" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>GOUACHE, STEPHANE</last-name><address><street>TECHNICOLOR, Technicolor R&amp;D France 975, avenue des Champs Blancs ZAC des Champs Blancs CS 176 16</street><city>35 576 Cesson Sévigné</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343474" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>DEMOULIN VINCENT</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103308949" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>DEMOULIN, VINCENT</last-name></addressbook></inventor><inventor mxw-id="PPAR1101649556" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>DEMOULIN, VINCENT</last-name><address><street>TECHNICOLOR, Technicolor R&amp;D France 975, avenue des Champs Blancs ZAC des Champs Blancs CS 176 16</street><city>35 576 Cesson Sévigné</city><country>FR</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101652983" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Browaeys, Jean-Philippe</last-name><suffix>et al</suffix><iid>101187942</iid><address><street>Technicolor 1, rue Jeanne d'Arc</street><city>92443 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660784434" load-source="docdb">AL</country><country mxw-id="DS660612917" load-source="docdb">AT</country><country mxw-id="DS660784436" load-source="docdb">BE</country><country mxw-id="DS660691111" load-source="docdb">BG</country><country mxw-id="DS660697212" load-source="docdb">CH</country><country mxw-id="DS660609248" load-source="docdb">CY</country><country mxw-id="DS660612918" load-source="docdb">CZ</country><country mxw-id="DS660784437" load-source="docdb">DE</country><country mxw-id="DS660609249" load-source="docdb">DK</country><country mxw-id="DS660609250" load-source="docdb">EE</country><country mxw-id="DS660688858" load-source="docdb">ES</country><country mxw-id="DS660691112" load-source="docdb">FI</country><country mxw-id="DS660691113" load-source="docdb">FR</country><country mxw-id="DS660784438" load-source="docdb">GB</country><country mxw-id="DS660609263" load-source="docdb">GR</country><country mxw-id="DS660784439" load-source="docdb">HR</country><country mxw-id="DS660612927" load-source="docdb">HU</country><country mxw-id="DS660697213" load-source="docdb">IE</country><country mxw-id="DS660784440" load-source="docdb">IS</country><country mxw-id="DS660691114" load-source="docdb">IT</country><country mxw-id="DS660609264" load-source="docdb">LI</country><country mxw-id="DS660690183" load-source="docdb">LT</country><country mxw-id="DS660612928" load-source="docdb">LU</country><country mxw-id="DS660690184" load-source="docdb">LV</country><country mxw-id="DS660690185" load-source="docdb">MC</country><country mxw-id="DS660613318" load-source="docdb">MK</country><country mxw-id="DS660613327" load-source="docdb">MT</country><country mxw-id="DS660612929" load-source="docdb">NL</country><country mxw-id="DS660688863" load-source="docdb">NO</country><country mxw-id="DS660697214" load-source="docdb">PL</country><country mxw-id="DS660690195" load-source="docdb">PT</country><country mxw-id="DS660612930" load-source="docdb">RO</country><country mxw-id="DS660690196" load-source="docdb">RS</country><country mxw-id="DS660612935" load-source="docdb">SE</country><country mxw-id="DS660690197" load-source="docdb">SI</country><country mxw-id="DS660688864" load-source="docdb">SK</country><country mxw-id="DS660697263" load-source="docdb">SM</country><country mxw-id="DS660613328" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166480035" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The invention concerns a method for estimating a distance from a first communication device to a second communication device. According to an aspect of the invention, the method comprises:<br/>
- Taking (31) a picture of the second communication device by the first communication device;<br/>
- Obtaining (32) a description of the second communication device;<br/>
- Identifying (33) the second communication device in the picture, by using said description;<br/>
- Estimating (34) a distance from the first communication device to the second communication device by using the description of the second communication device, camera parameters used for taking the picture of the second communication device, and dimensions of the second communication device identified in the picture.
<img id="iaf01" file="imgaf001.tif" wi="143" he="86" img-content="drawing" img-format="tif"/>
<img id="iaf02" file="imgaf002.tif" wi="78" he="150" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759847" lang="EN" source="EPO" load-source="docdb"><p>The invention concerns a method for estimating a distance from a first communication device to a second communication device. According to an aspect of the invention, the method comprises: 
- Taking (31) a picture of the second communication device by the first communication device; 
- Obtaining (32) a description of the second communication device; 
- Identifying (33) the second communication device in the picture, by using said description; 
- Estimating (34) a distance from the first communication device to the second communication device by using the description of the second communication device, camera parameters used for taking the picture of the second communication device, and dimensions of the second communication device identified in the picture.</p></abstract><description mxw-id="PDES98404736" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">1. <b>Field of the invention</b></heading><p id="p0001" num="0001">The invention relates to the field of communication devices, notably, but non exclusively, in a context of distributed cooperative applications. More precisely, the invention relates to a method for estimating the relative distance between two communication devices located within line of sight.</p><heading id="h0002">2. <b>Background</b></heading><p id="p0002" num="0002">There are several known techniques for estimating the relative distance between two communication devices.</p><p id="p0003" num="0003">When both devices are equipped with a GPS (for "Global Positioning System") module, the GPS signal may be used for such a purpose. However, the GPS signal is not available in an indoor context.</p><p id="p0004" num="0004">It is also possible to use triangulation techniques, based for example on Wi-Fi<sup>®</sup> signals. However, the accuracy of the measurement is poor. The same drawback is encountered when using position sensors, such as accelerometers or gyroscopes, embedded in the communication devices.</p><p id="p0005" num="0005">Communication devices, such as smartphones, are more and more frequently equipped with a camera. An interesting approach could hence make use of the camera to derive a method for estimating the relative distance between two communication devices on the basis of pictures taken by one of the devices.</p><p id="p0006" num="0006">Distance evaluation from pictures has been widely studied in the past. Among the numerous methods, which were suggested, <nplcit id="ncit0001" npl-type="s"><text>Ying-Hao Yu et al. described in 2009 in "Relative Distance Estimation for Indoor Multi-Robot Control Using Monocular Digital Camera", The University of Tasmania, Tasmania, Australia, pp. 1-6, Proceedings of the 3rd International Workshop on Artificial Intelligence in Science and Technology</text></nplcit><i>,</i> an approach relying on a single picture taken with known camera parameters, in which a checkerboard with known physical dimensions was first inserted in the scene, prior to taking the picture.<!-- EPO <DP n="2"> --></p><p id="p0007" num="0007">More precisely, in this article, the authors describe a relative distance measurement algorithm for monocular cameras. By detecting 2D labels on the top of indoor robots, and by assuming that the floor is flat, the algorithm can estimate the relative distance between robots by calculating the perspective projection image ratio (PIPR) of labels.</p><p id="p0008" num="0008">A similar method is used in the application called RulerPhone (see http://benkamens.com/rulerphone/), which may be downloaded on smartphones, and which allows the user to measure any object his/her smartphone can take a picture of. To this purpose, the user needs to place any card with the exact dimensions of a credit card next to or in front of the object he/she would like to measure. He/she then needs to align the card with a blue card placeholder that RulerPhone displays on the screen, and, if needed, he/she must zoom the image until the card in the picture is the same size as the RulerPhone's blue card placeholder. Once the cards are aligned, the smartphone takes a picture, and uses the known dimensions of the card to estimate the dimensions of the object the user wishes to measure.</p><p id="p0009" num="0009">Such a method does not aim at estimating a distance between two objects, but rather at estimating the dimensions of an object. It is however close from the method described by Ying-Hao Yu et al., in that it relies on a picture taken by a monocular camera, and on the use of an object with known physical dimensions to make some measurement.</p><p id="p0010" num="0010">Though interesting, a drawback of both methods is that it is necessary to insert an object with known physical dimensions in the scene. The use of such methods is therefore restricted to a limited number of cases, where either an object with known physical dimensions is present in the scene, or where a user may interact with the method to insert such a known object in the scene, prior to taking a picture.</p><p id="p0011" num="0011">Moreover, it may be cumbersome for the user to align precisely the reference object with known physical dimensions with the object he/she wants to measure.</p><p id="p0012" num="0012">It would hence be desirable to provide a method for estimating the distance between communication devices showing improvements over the prior art.<!-- EPO <DP n="3"> --></p><p id="p0013" num="0013">Notably, it would be desirable to provide such a method, which would not rely on any action from a user, and would thus particularly fit Machine-to-Machine applications.</p><p id="p0014" num="0014">It would also be desirable to provide such a method, which would not rely on any pre-existing knowledge about the object, whose distance is to be measured.</p><heading id="h0003">3. <b>Summary</b></heading><p id="p0015" num="0015">In one particular embodiment of the invention, a method for estimating a distance from a first communication device to a second communication device is proposed, which comprises:
<ul><li>Taking a picture of the second communication device by the first communication device;</li><li>Obtaining a description of the second communication device, said description comprising at least one piece of information about the second communication device;</li><li>Identifying at least part of the second communication device in said picture, by using said description;</li><li>Estimating a distance from the first communication device to the second communication device by using:
<ul><li>∘ said at least one piece of information about the second communication device,</li><li>∘ at least one camera parameter used for taking the picture of the second communication device, and</li><li>∘ dimensions of said at least part of the second communication device identified in said picture.</li></ul></li></ul></p><p id="p0016" num="0016">The present invention thus relies on a novel and inventive approach of the distance estimation between two devices. Actually, such a method does not rely on any pre-existing knowledge about the second communication device, whose distance is to be measured. It makes an advantageous use of some communication means embedded in the first communication device to acquire information about the distant second<!-- EPO <DP n="4"> --> communication device, as well as of the camera sensor, which is nowadays embedded in most of the communication devices.</p><p id="p0017" num="0017">By communication device, it is meant here and throughout this document, any device equipped with a communication module, whatever the technology or standard used by such a communication module. Among others, such a communication module could be of the WiFi<sup>®</sup> type, Bluetooth, zigbee, NFC, etc. As a mere example, such a communication device could be a smartphone, a TV set, a pad, a computer, a domestic appliance...</p><p id="p0018" num="0018">According to an embodiment of the present invention, said description of the second communication device comprises at least one reference picture of at least part of the second communication device and at least one piece of information on dimensions of at least part of the second communication device. Said at least one piece of information on dimensions of at least part of the second communication device is used when estimating a distance from the first communication device to the second communication device.</p><p id="p0019" num="0019">Such a reference picture may be a 2D or a 3D picture, such as, for example, a 3D model of the second communication device.</p><p id="p0020" num="0020">According to an embodiment of the present invention, said description of the second communication device is received by the first communication device through a wireless link established between said first and said second communication devices. The description of the second communication device is embedded in the second device itself, and it is transmitted to the first communication device when needed. The first communication device does not need to have any pre-existing knowledge about the second communication device, contrarily to the known prior art techniques. It may easily receive the description of the second communication device through a wireless link, for example of the WiFi<sup>®</sup> type.</p><p id="p0021" num="0021">According to another embodiment of the present invention, said first communication device sends a request for said description to the second communication device. Such an embodiment is advantageous when the first communication device is associated through a wireless protocol with the second<!-- EPO <DP n="5"> --> communication device before starting the measurement process according to the present invention. The first communication device can then directly request the description of the second communication device. It is also interesting when the first communication device knows an identifier of the second communication device (e.g. MAC address, IP address, phone number, ...): it can then directly request a full description of the second communication device through a wireless protocol.</p><p id="p0022" num="0022">According to another embodiment of the present invention, said first communication device broadcasts a request for description, and receives at least one description response from at least one second communication device. In this alternative embodiment, the first communication device is not associated to the second communication device, and broadcasts a request for description towards all the communication devices surrounding it. Such a request may be based on a discovery protocol (Bonjour, Network Service Discovery, ...), or on a Publish/subscribe Protocol (XMPP, Qeo Data Model, ...) or on a proprietary format protocol. Such a request can include a field "object description request".</p><p id="p0023" num="0023">The second communication device receives the request and responds to the first communication device with its description response. If multiple objects receive the description request, the first communication device may then receive multiple responses.</p><p id="p0024" num="0024">By description response, it is meant here and throughout the present document, a response to the description request broadcasted by the first communication device. Such a description response may consist in a description of the second communication device. It may also consist in an identification parameter of the second communication device, such as, for example, an RF ID.</p><p id="p0025" num="0025">Actually, according to an embodiment of the invention, the first communication device retrieves said description of the second communication device from a database, which it addresses on the basis of an identification parameter of said second communication device. Hence, when receiving a description request from the first communication device, the second communication device responds with an identification parameter, and the first communication device will retrieve the<!-- EPO <DP n="6"> --> description of the second communication device on a distant database, based on the ID of the second communication device.</p><p id="p0026" num="0026">According to an embodiment of the invention, such a description comprises at least one of the following elements:
<ul><li>a three-dimensional model of at least part of the second communication device;</li><li>a physical length of the second communication device;</li><li>a physical width of the second communication device;</li><li>a physical height of the second communication device;</li><li>a reference picture of at least part of the second communication device;</li><li>a scale associated with the reference picture;</li><li>a type of the second communication device;</li><li>a network interface of the second communication device;</li><li>information on a position of the second communication device;</li><li>information on a mobility feature of the second communication device.</li></ul></p><p id="p0027" num="0027">Such a description may preferably contain a picture (i.e. a view of part of or of the entire second communication device, in one angle) and an associated scale (in order to determine the real dimensions of the second communication device). A description may of course also contain more than one picture and associated scale (in different angles or for different parts of the device). Among the pictures contained in the description, it is advantageous, but not compulsory, if one of the pictures contains a part of the object that fits in one (2D) plane.</p><p id="p0028" num="0028">According to yet another embodiment of the invention, the step of identifying at least part of the second communication device implements an object recognition algorithm on the basis of said at least one reference picture. The first communication device hence runs an object recognition algorithm using one or several views of the second communication device provided in its description. Such an object-recognition algorithm may rely on an edge-matching method, such as, for example the Canny edge detection, or on a Divide-and-Conquer search. It must be noted that any object recognition algorithm may be used in the context of the present embodiment of the invention and that the methods cited above are mere examples.<!-- EPO <DP n="7"> --></p><p id="p0029" num="0029">According to yet another embodiment, the method also comprises:
<ul><li>matching a portion of said at least part of the second communication device identified in said picture with a portion of said reference picture comprised in said description; and</li><li>computing a number of pixels associated to the matched portion in said picture.</li></ul></p><p id="p0030" num="0030">Hence, a portion of the device in the picture is directly matched with a portion of its description (which means that the device has been recognized in the picture). As an alternate embodiment, the second communication device is first recognized in the picture taken by the first communication device, and then, the latter more precisely matches a portion of the second communication device in the picture with a portion of its description. In yet another embodiment, several portions of the description may be used to match corresponding portions of the device in the picture which was taken.</p><p id="p0031" num="0031">In all these embodiments, for example, the first communication device matches an edge of the smartphone in the picture with the same edge in the received description, taking into account their orientation in both pictures. It then computes the number of pixels of the edge on the picture it has taken, and associates this number of pixels to the real dimensions of the edge, as known from the description.</p><p id="p0032" num="0032">According to yet another embodiment, estimating the distance d from the first communication device to the second communication device uses the pinhole projection formula: <maths id="math0001" num=""><math display="block"><mi>d</mi><mo>=</mo><mi>f</mi><mo>×</mo><mfrac><mi>X</mi><mi>x</mi></mfrac></math><img id="ib0001" file="imgb0001.tif" wi="24" he="15" img-content="math" img-format="tif"/></maths><br/>
where:
<ul><li><i>f</i> is a focal length of the camera,</li><li><i>X</i> is a real height of said matched portion, of the second communication device,</li><li><i>x</i> is a height of said matched portion in said picture.</li></ul></p><p id="p0033" num="0033"><i>d</i>, <i>f</i>, <i>X</i>, <i>x</i> are expressed in millimeters. The height <i>x</i> of the matched portion in the picture in millimeters may be derived from the height of the matched portion in the picture expressed in number of pixels, knowing both the image height expressed in number of pixels and the camera sensor height expressed in millimeters.<!-- EPO <DP n="8"> --></p><p id="p0034" num="0034">According to yet another embodiment, said at least one camera parameter belongs to the group comprising:
<ul><li>a focal of said camera;</li><li>a lens size of said camera;</li><li>an orientation of said camera;</li><li>a time at which said camera took the picture.</li></ul></p><p id="p0035" num="0035">In a particular embodiment of the present invention, the method also comprises:
<ul><li>receiving from said second communication device an estimated distance from the second communication device to the first communication device;</li><li>comparing said estimated distance received from said second communication device with the distance estimated by said first communication device.</li></ul></p><p id="p0036" num="0036">Thus, the first communication device can improve the accuracy of the distance estimation, or it can disambiguate between multiple second communication devices in range. If both estimated distances fit, the first communication device may validate its distance estimation. Otherwise, if the estimated distances notably differ from each other, the first communication device may try to connect to another second communication device in range. It may also try to match the second communication device in another part of the picture.</p><p id="p0037" num="0037">In an embodiment of the present invention, the steps of taking a picture, identifying and estimating a distance are carried out for several second communication devices, and the method comprises a step of computing a distance between at least two of said second communication devices.</p><p id="p0038" num="0038">Actually, on the basis of the estimated distances between the first communication device and several second communication devices, the first communication device can derive an estimated distance between any two second communication devices, which may be interesting, for example, in a case where all communication devices take part together to an interactive game. Such a computation may advantageously use an angle between the different estimated distances, which may be obtained using a gyroscope embedded in the first communication device.<!-- EPO <DP n="9"> --></p><p id="p0039" num="0039">In another embodiment of the present invention, which may be an alternative or a complement to the previous one, the steps of taking a picture, identifying and estimating a distance are carried out for several second communication devices, and the method comprises a step of estimating a position of said first communication device on the basis of the distances estimated between said first communication device and each of said second communication devices.</p><p id="p0040" num="0040">Actually, on the basis of the estimated distances between the first communication device and several second communication devices, the first communication device can derive its own position in the room or the environment in which it is located. Such a position may consist in a relative positioning, or be of the type "closer to this than...". If positions of the second devices in a reference are known (for example, known in advance, or present in the description), triangulation techniques may allow deriving an absolute position of the first device in this reference.</p><p id="p0041" num="0041">According to another embodiment of the invention, the steps of identifying at least part of a second communication device and of estimating a distance are carried out for at least two second communication devices, and the method also comprises presenting said at least two communication devices to a user in order for him/her to select a preferred second communication device.</p><p id="p0042" num="0042">Hence, in the case where at least two descriptions match in the picture, the relative distances to the first communication device can be computed for each second communication device. If the application needs to identify only one object, the user can select the correct second communication device. To this purpose, the first communication device may either present to the user a list of the two or more second communications devices with their names (which may be retrieved from the descriptions), or may highlight the identified objects in the picture displayed on the first communication device's screen, in order for the user to select the correct second communication device on the screen.</p><p id="p0043" num="0043">According to another embodiment of the invention, the steps of identifying at least part of a second communication device and of estimating a distance are carried out by said first communication device or by a remote server.<!-- EPO <DP n="10"> --></p><p id="p0044" num="0044">Hence, aspects of the method for estimating a distance according to the present invention may either be wholly implemented in the first communication device, or may be partly offloaded from the first communication device to a distant server, in order to implement a server assisted distance computation. This alternate embodiment is interesting when the processing unit of the first communication device is not powerful enough.</p><p id="p0045" num="0045">The present invention furthermore relates to a communication device comprising a camera and a communication module, which also comprises:
<ul><li>a memory for at least temporarily memorizing a picture of a second communication device taken by the camera;</li><li>a recognition module for identifying at least part of the second communication device in said picture, by using a description of the second communication device,<br/>
said description comprising at least one piece of information about the second communication device;
<ul><li>an estimation module for estimating a distance from the first communication device to the second communication device by using:
<ul><li>∘ said at least one piece of information about the second communication device,</li><li>∘ at least one camera parameter used for taking the picture of the second communication device, and</li><li>∘ dimensions of said at least part of the second communication device identified in said picture,</li></ul></li></ul></li></ul>
and said communication module comprises a receiver for receiving said description.</p><p id="p0046" num="0046">All features of the description of the second communication device described above in relation to embodiments of the method of estimating a distance also apply to such a communication device.</p><p id="p0047" num="0047">The present invention furthermore relates to a server for estimating a distance from a first communication device to a second communication device, which comprises:<!-- EPO <DP n="11"> -->
<ul><li>a receiver for receiving from a first communication device a picture taken by the first communication device, a distance measurement request and at least one camera parameter used for taking the picture;</li><li>a database comprising at least one description of at least one second communication device, said description comprising at least one piece of information about the second communication device;</li><li>a recognition module for identifying in said picture at least part of at least one second communication device, which description is comprised in said database, by using said description of the second communication device,
<ul><li>an estimation module for estimating a distance from the first communication device to every second communication device at least partly identified in said picture, said estimation module using:
<ul><li>∘ said at least one piece of information about the second communication device,</li><li>∘ said at least one camera parameter used for taking the picture of the second communication device, and</li><li>∘ dimensions of said at least part of the second communication device identified in said picture;</li></ul></li><li>a transmitter for transmitting to the first communication device a list of every second communication device at least partly identified in said picture associated to a corresponding estimated distance.</li></ul></li></ul></p><p id="p0048" num="0048">All features of the description of the second communication device described above in relation to embodiments of the method of estimating a distance also apply to such a server.</p><p id="p0049" num="0049">The present invention furthermore relates to a system for estimating a distance from a first communication device to a second communication device, which comprises:
<ul><li>said first communication device comprising:
<ul><li>∘ a camera for taking a picture of the second communication device;</li><li>∘ a communication module comprising a receiver for receiving a description of the second communication device, said description<!-- EPO <DP n="12"> --> comprising at least one piece of information about the second communication device;</li><li>∘ a recognition module for identifying at least part of the second communication device in said picture, by using said description;</li><li>∘ an estimation module for estimating a distance from the first communication device to the second communication device by using:
<ul><li>■ said at least one piece of information about the second communication device,</li><li>■ at least one camera parameter used for taking the picture of the second communication device, and</li><li>■ dimensions of said at least part of the second communication device identified in said picture, and</li></ul></li></ul></li><li>a second communication device comprising a communication module comprising a receiver for receiving a description request from said first communication device, and a transmitter for transmitting to said first communication device said description or an identifier of said second communication device.</li></ul></p><p id="p0050" num="0050">All features of the description of the second communication device described above in relation to embodiments of the method of estimating a distance also apply to such a system.</p><p id="p0051" num="0051">The present invention furthermore relates to a computer program product downloadable from a communications network and/or stored in a computer-readable carrier and/or executable by a microprocessor, which comprises program code instructions for the execution of the method for estimating a distance as described above, when it is executed on a computer.</p><heading id="h0004">4. <b>Brief description of the drawings</b></heading><p id="p0052" num="0052">The invention can be better understood with reference to the following description and drawings, given by way of example and not limiting the scope of protection, and in which:<!-- EPO <DP n="13"> -->
<ul><li><figref idrefs="f0001">Figure 1</figref> illustrates the general principle of a method for estimating a distance between two communication devices, according to an embodiment of the invention;</li><li><figref idrefs="f0001">Figure 2</figref> illustrates the step of obtaining a description of the second communication de vice, according to the embodiment of <figref idrefs="f0001">figure 1</figref>;</li><li><figref idrefs="f0002">Figure 3</figref> shows a flow chart of the successive steps implemented by a first communication device according to the embodiment of <figref idrefs="f0001">figure 1</figref>;</li><li><figref idrefs="f0001">Figure 4</figref> illustrates the principle of an object recognition algorithm implemented by the first communication device in the embodiment of <figref idrefs="f0002">figure 3</figref>;</li><li><figref idrefs="f0002">Figure 5</figref> shows a flow chart of the successive steps implemented by a first communication device according to an alternative embodiment relying on a server assisted distance computation;</li><li><figref idrefs="f0003">Figure 6</figref> shows a flow chart of the successive steps implemented by a remote server according to the embodiment of <figref idrefs="f0002">figure 5</figref>;</li><li><figref idrefs="f0002">Figure 7</figref> presents a simplified structure of a communication device, implementing the method for estimating a distance according to <figref idrefs="f0002">figure 3</figref>.</li></ul></p><p id="p0053" num="0053">The components in the figures are not necessarily to scale, emphasis instead being placed upon illustrating the principles of the invention.</p><heading id="h0005">5. <b>Detailed description</b></heading><p id="p0054" num="0054">The method for estimating the relative distance between two communication devices according to the present invention relies on the assumption that most communication devices are nowadays equipped with both a camera and a communication module. It thus makes an advantageous use of both features to implement a solution, in which a first communication device takes a picture of a second communication device, acquires information about this distant device, and combines both to estimate the distance between both devices.</p><p id="p0055" num="0055"><figref idrefs="f0001"><b>Figure 1</b></figref> illustrates schematically this general principle. A user 10 is equipped with a first communication device 11, for example a touch pad. He/she is located in a<!-- EPO <DP n="14"> --> room, where several other communication devices are also present, such as a smartphone 12 and a laptop 13. Though particularly interesting in an indoor context, it must be noted that the method according to embodiments of the invention may also apply in an outdoor context.</p><p id="p0056" num="0056">According to an embodiment of the invention, the user 10 uses its touchpad 11 to take a picture of the smartphone 12, in order to estimate the distance d between the touchpad 11 and the smartphone 12. In the same way, and though not illustrated on <figref idrefs="f0001">figure 1</figref>, the user 10 could use its touchpad 11 to take a picture of the laptop 13, in order to estimate the distance d between the touchpad 11 and the laptop 13.</p><p id="p0057" num="0057">It must be assumed that the touchpad 11 and either the smartphone 12 or the laptop 13 is in line of sight.</p><p id="p0058" num="0058">When taking the picture, the touchpad 11 memorizes some camera sensor's information, such as its orientation, the time, and some camera parameters.</p><p id="p0059" num="0059">As illustrated by <figref idrefs="f0001"><b>figure 2</b></figref>, the smartphone 12 sends its description DESCR to the touchpad 11, through a wireless link. Such a description DESCR may be embedded in the smartphone 12 itself, and transmitted upon request from the touchpad 11. It can include the real dimensions (length, width, height) of the smartphone 12, as well as a 3D model, and pictures of different views of the smartphone 12. In the example of <figref idrefs="f0001">figure 2</figref>, such a description includes the real height H of the smartphone 12 in a closed position.</p><p id="p0060" num="0060">Advantageously, the description DESCR contains pairs of:
<ul><li>a picture (view of part or entire smartphone 12 in one angle);</li><li>an associated scale (in order to determine real dimensions of the smartphone 12).</li></ul></p><p id="p0061" num="0061">It is convenient if the pictures contained in the description DESCR contain a part of the smartphone 12 that fits in one (2D) plane. The description DESCR may also contain additional information, such as the type of the smartphone, the network interface it comprises, .... Such information may be useful to discriminate between several communication devices, which would appear on the picture taken by the touchpad 11. The description DESCR may also contain a position indication of the smartphone 12, for example in the form of coordinates, as well as an indication on the<!-- EPO <DP n="15"> --> smartphone mobility (i.e. an indication on whether the smartphone 12 is a fixed or a mobile object).</p><p id="p0062" num="0062"><figref idrefs="f0002"><b>Figure 3</b></figref> illustrates in more details the steps implemented by the touch pad 11 according to an embodiment of the invention.</p><p id="p0063" num="0063">After an initializing step INIT 30, the touchpad 11 takes 31 a picture of the smartphone 12. It then requests 32 an object description of the smartphone 12.</p><p id="p0064" num="0064">According to a first embodiment, the touchpad 11 is associated with the smartphone 12, through a wireless protocol (Bluetooth, zigbee, wifi°, ...), before starting the measuring process. The touchpad 11 can hence directly request the description DESCR of the smartphone 12.</p><p id="p0065" num="0065">According to a variant of this first embodiment, the touchpad 11 knows an identifier of the smartphone 12 (e.g. MAC address, IP address, name of the smartphone, phone number, RF ID...); it can hence also directly request a full description of the smartphone 12 through a wireless protocol.</p><p id="p0066" num="0066">According to a second embodiment, the touchpad 11 is not associated with the smartphone 12, and broadcasts a request 32 for description to all the devices within its reach. The request can be:
<ul><li>based on a discovery protocol (such as Bonjour, Network Service Discovery, Wi-Fi P2P service discovery, Bluetooth ...);</li><li>based on a Publish/Subscribe protocol (XMPP, Qeo Data Model, ...);</li><li>based on a proprietary format.</li></ul></p><p id="p0067" num="0067">The request 32 can include a field "object description request". The smartphone 12 then receives the request, and responds with its description DESCR. More generally, all the other communication devices within reach of the touchpad 11 (for example the laptop 13) receive the request 32 and respond with their description DESCR.</p><p id="p0068" num="0068">According to a variant of this second embodiment, the smartphone 12 responds with a unique ID, and the touchpad 11 will retrieve the description DESCR of the smartphone 12 on a distant database, on the basis of this unique ID. According to another variant, the touchpad 11 directly requests 32 a unique ID through a RFID<!-- EPO <DP n="16"> --> protocol, instead of requesting a description, and retrieves the associated description DESCR on a remote database.</p><p id="p0069" num="0069">At the end of step 32 of obtaining a description, the touchpad 11 has received or retrieved at least one description DESCR, and may have received multiple responses in case multiple second communication devices are in range.</p><p id="p0070" num="0070">The touchpad 11 then identifies 33 the smartphone 12 in the picture taken at step 31. To this purpose, the touchpad 11 runs an object recognition algorithm using one or several views of the smartphone 12 provided in the description DESCR. Such an object recognition algorithm may be, for example, based on the matching of interest points, as described in <patcit id="pcit0001" dnum="US6711293B"><text>US 6,711,293</text></patcit> patent document.</p><p id="p0071" num="0071">The touch pad 11 more precisely matches a part of the smartphone 12 in the picture with a part of the description DESCR. For example, it matches an edge of the smartphone 12 in the picture with the same edge in the picture received in the description DESCR. To this purpose, it takes account of the orientation of the smartphone in both pictures. It also computes the number of pixels associated with the matched edge in the picture taken at step 31. This number of pixels will be used in step 34 of computing a relative distance, which will be described hereafter in more details.</p><p id="p0072" num="0072"><figref idrefs="f0001"><b>Figure 4</b></figref> illustrates in more details the matching process described above. The right side of <figref idrefs="f0001">figure 4</figref> shows a picture 40 taken at step 31 by the touchpad 11. Such a picture 40 shows a chair, on which several objects are set, such as a book 401, a pack of rice 402 and a pack of cookies 403. The left side of <figref idrefs="f0001">figure 4</figref> shows the description of the object, which the touch pad 11 must recognize on picture 40. In this peculiar example, given as a mere illustrative purpose, such an object is not a communication device but rather the pack of cookies 403. The touch pad 11 uses a simple recognition algorithm, based on local features detection of the pack of cookies 403: such features are shown as circles on picture 40. Such local features are matched between picture 41 and picture 40. The zone of picture 40 in which most circles are detected and matched is indicated by a rectangle 42, which corresponds to the detection in picture 40 of the pack of cookies 403.<!-- EPO <DP n="17"> --></p><p id="p0073" num="0073">Once the smartphone 12 has been identified in the picture at step 33, the touchpad 11 computes 34 the relative distance between the smartphone 12 and the touchpad 11, by using the real dimensions of the smartphone provided in the description DESCR, the size of the smartphone or part of the smartphone identified in the picture (expressed in number of pixels) and some camera information (focal, lens size...). Such a computation 34 can be based on the pinhole projection formula: <maths id="math0002" num=""><math display="block"><mfrac><mi>x</mi><mi>f</mi></mfrac><mo>=</mo><mfrac><mi>X</mi><mi>d</mi></mfrac></math><img id="ib0002" file="imgb0002.tif" wi="17" he="14" img-content="math" img-format="tif"/></maths><br/>
where:
<ul><li>d is the distance to the smartphone 12 expressed in mm,</li><li>f is the focal length of the camera expressed in mm,</li><li>X is the real height of the smartphone 12 expressed in mm,</li><li><i>x</i> is the height of the smartphone 12 in the picture, expressed in mm.</li></ul></p><p id="p0074" num="0074">The height of the smartphone 12 in the picture, <i>x</i>, may also be expressed as:
<ul><li><i>x</i> =image height (pixel) / object height (pixel) / sensor height (mm).</li></ul></p><p id="p0075" num="0075">In the case where the touchpad 11 is not associated with the smartphone 12 prior to the distance evaluation (according to the second embodiment described above), and as already stated, the touchpad 11 may receive or retrieve multiple object descriptions at step 32. In such a case, the object recognition algorithm can be run for each description DESCR at step 33.</p><p id="p0076" num="0076">If only one description DESCR matches in the picture, the smartphone 12 has been duly identified, and the relative distance between the smartphone 12 and the touchpad 11 can be estimated, as described above.</p><p id="p0077" num="0077">However, if at least two descriptions DESCR match in the picture, the touch pad 11 may compute the relative distances for each. This may occur for example if there are two similar smartphones on the picture (same brand, same model). If the application running on the touchpad 11, and which needs to know the estimated distance to the smartphone 12, needs to identify only one object in the picture taken at step 31, the user 10 can select the correct object. The touchpad 11 may display on its screen a list of the two (or more) objects with their name (retrieved from the description DESCR) or it<!-- EPO <DP n="18"> --> may highlight the identified objects in the picture taken at step 31; the user 10 can then select the correct one.</p><p id="p0078" num="0078">In an alternative embodiment, the object recognition algorithm implemented at step 33 starts when the user 10 selects a part of the picture, by touching it on the touchpad's screen. The area pointed by the user 10 can help the recognition algorithm reduce the search area in the picture, which may help avoid that multiple descriptions match in the selected area.</p><p id="p0079" num="0079">According to another interesting embodiment of the invention, the method for estimating a distance of <figref idrefs="f0002"><b>figure 3</b></figref> is also implemented by the smartphone 12, which takes a picture of the touchpad 11, obtains its description DESCR, identifies it in the picture it has taken, estimates a relative distance to the touchpad 11 and sends it to the touchpad 11.</p><p id="p0080" num="0080">The touchpad 11 may hence compare both estimated distances, respectively computed by the touchpad 11 and by the smartphone 12. Such a comparison may help the touchpad 11 improve the accuracy of the estimated distance.</p><p id="p0081" num="0081">In case where multiple smartphones 12 are in range, such a comparison allows the touchpad 11 to disambiguate between these smartphones: if both estimated distances are close to each other, the distance estimation is validated. Otherwise, the touchpad 11 must try to connect to another device in range.</p><p id="p0082" num="0082">According to another interesting embodiment of the invention, the smartphone 12 may also display a notification, which can help for identification/disambiguation. This behavior can be triggered by:
<ul><li>every description request 32 from the touchpad 11;</li><li>a specific request from the touchpad 11;</li><li>periodically, for a certain period of time (for example, when an application is running on the smartphone).</li></ul></p><p id="p0083" num="0083">This notification can be used to better identify the distant object. For example, if two identical descriptions DESCR are received by the touchpad 11, the touchpad 11 can send an additional request to the two distant smartphones. It can request the first distant smartphone 12 to switch on a red LED and request the second distant<!-- EPO <DP n="19"> --> smartphone to switch on a green LED. This can be further used to uniquely identify the object in the picture. Such an identification request may be sent by the touchpad 11 prior to the step 31 of taking a picture.</p><p id="p0084" num="0084">The touchpad 11 may iterate the steps of the flow chart of <figref idrefs="f0002"><b>figure 3</b></figref> to successively estimate multiple distances with multiple objects in the room (recording orientation sensors). Then it can estimate its own position in the room, it can also calculate the relative distances between these objects.</p><p id="p0085" num="0085">If the received description DESCR includes a position of the associated object, an absolute position of the touchpad 11 can be computed.</p><p id="p0086" num="0086"><figref idrefs="f0002"><b>Figures 5</b></figref><b>and</b><figref idrefs="f0003"><b>6</b></figref> show an alternative embodiment of the present invention, according to which the distance estimation is offloaded from the touchpad 11 to a remote server without prior knowledge about the communication devices surrounding it.</p><p id="p0087" num="0087">As shown on <figref idrefs="f0002"><b>figure 5</b></figref>, after an initializing step 50, the touchpad 11 takes a picture at step 51. It then sends a distance measurement request to a remote server, at step 52: this request contains the captured picture, along with some camera parameters, comprising at least the sensor dimensions and the focal length. The remote server then implements the steps shown on the flow chart of <figref idrefs="f0003"><b>figure 6</b></figref>, which will be described in close detail hereafter. At step 53, the touchpad 11 receives a list of communication devices, picture regions, and corresponding estimated distances.</p><p id="p0088" num="0088">As shown on <figref idrefs="f0003"><b>figure 6</b></figref><b>,</b> after an initializing step 60, the remote server receives the distance measurement request sent by the touchpad 11 at step 61. At initializing step 60, the objects, regions and distances lists of the remote server are empty.</p><p id="p0089" num="0089">Upon reception 61 of the request, the server iterates over all the object descriptions found in its database to find matching objects in the picture. Hence, at step 62, it picks an object description in its database. At step 63, it runs an object recognition algorithm to identify the object in the picture (same process as that described previously<!-- EPO <DP n="20"> --> for the touchpad 11). If there is no match at step 64, the server gets back to step 62 to pick the next object description in its database.</p><p id="p0090" num="0090">The request received by the server at step 61 may of course also concern several objects, if the touchpad 11 is interested in knowing the distance to several distinct communication devices.</p><p id="p0091" num="0091">For each matching object, the server computes the relative distance at step 65, using the object attributes and the received camera parameters, in the same manner as for the algorithm of <figref idrefs="f0002"><b>figure 3</b></figref>. At step 66, the server appends the matched object, the picture region in which it is located and the associated estimated distance to a list. Once all objects in the database have been searched for in the picture (test at step 67), the server returns the list of matched objects and their distance, optionally including the coordinates of the objects' bounding rectangle (or region) in the picture, at step 68.</p><p id="p0092" num="0092"><figref idrefs="f0002"><b>Figure 7</b></figref> presents a simplified structure of a communication device, implementing the method for estimating a distance according to an embodiment of the invention.</p><p id="p0093" num="0093">Regarding <figref idrefs="f0002"><b>figure 7</b></figref>, a communication device according to the invention comprises a memory 74 comprising a buffer memory RAM, a processing unit 73 equipped for example with a microprocessor µP and driven by the computer program 75 implementing the method for estimating a distance according to the invention.</p><p id="p0094" num="0094">At initialization, the code instructions of the computer program 75 are for example loaded into a RAM and then executed by the processor of the processing unit 73.</p><p id="p0095" num="0095">According to an embodiment of the invention, the microprocessor of the processing unit 73 implements the steps of the method for estimating a distance described here above according to the instructions of the computer program 75. To this end, the communication device comprises a camera 71 operable to shoot at least one picture of a second communication device. The picture is at least temporarily memorized in a memory module, which may be the RAM 74 or another memory module (not illustrated). The communication device also comprises a wireless communication module 72 comprising a receiver for receiving a description DESCR of the second<!-- EPO <DP n="21"> --> communication device, said description comprising at least one reference picture of at least part of the second communication device and at least one piece of information on dimensions of the second communication device. The communication device also comprises a recognition module 76 for identifying at least part of the second communication device in said picture, by using said description, and an estimation module 77 for estimating a distance from the first communication device to the second communication device by using:
<ul><li>∘ information on dimensions of the second communication device,</li><li>∘ camera parameters used for taking the picture of the second communication device, and</li><li>∘ dimensions of at least part of the second communication device identified in said picture.</li></ul></p><p id="p0096" num="0096">Theses modules are controlled by the microprocessor of the processing unit 73; they may be hardware or software modules or a combination of both hardware and software elements.</p><p id="p0097" num="0097">There are many applications, which may run on a communication device, and which may make use of the relative distance(s) which may be estimated according to embodiments of the invention.</p><p id="p0098" num="0098">As mere examples, one can think of an inertial navigation system (INS) based on sensors (accelerometer, gyroscope, ...), in which the initial position of a smartphone can be determined by taking one picture. The relative distance to two or more objects enables triangulation, provided that the object description contains also position coordinates. With time, the error in positioning will increase; by taking a picture of an object along the path, the position of the smartphone can be adjusted.</p><p id="p0099" num="0099">Another application of the method according to an embodiment of the invention relies on a multimedia system with multiple displays, in which the relative distance to a screen can be computed by taking a picture. The video stream displayed on that screen can be adjusted, according to the distance between the user and the screen, estimated by the user's smartphone, to save bandwidth without noticeable degradation of the quality by the user.<!-- EPO <DP n="22"> --></p><p id="p0100" num="0100">Another interesting use of the method according to the invention lies in the field of interactive games with multiple smartphones, where the relative distance between the smartphones can be determined by taking a picture of the other smartphone.</p><p id="p0101" num="0101">The method for estimating relative distance according to embodiments of the invention may also find application for an autonomous robotic vacuum cleaner, which can position itself in the room by taking picture of interactive objects surrounding it.</p><p id="p0102" num="0102">More generally, the described method may be implemented as a software solution, relying solely on the widely available camera sensor of communication devices and on communication means embedded in the device to acquire information about a distant object. This approach particularly fits the coming Machine-to-machine world, and can be used in all applications where a notion of proximity is needed e.g. for directing a message, a stream, a content to the nearest device. If multiple measurements are available and the location of the identified objects is known, they can be combined to estimate the device's location.</p></description><claims mxw-id="PCLM90459679" lang="EN" load-source="patent-office"><!-- EPO <DP n="23"> --><claim id="c-en-0001" num="0001"><claim-text>A method for estimating a distance from a first communication device (11) to a second communication device (12),<br/>
wherein the method comprises:
<claim-text>- Taking (31; 51) a picture of the second communication device by the first communication device;</claim-text>
<claim-text>- Obtaining (32) a description (DESCR) of the second communication device, said description comprising at least one piece of information about the second communication device;</claim-text>
<claim-text>- Identifying (33; 63) at least part of the second communication device in said picture, by using said description;</claim-text>
<claim-text>- Estimating (34; 65) a distance (d) from the first communication device to the second communication device by using:
<claim-text>∘ said at least one piece of information about the second communication device,</claim-text>
<claim-text>∘ at least one camera parameter used for taking the picture of the second communication device, and</claim-text>
<claim-text>∘ dimensions of said at least part of the second communication device identified in said picture.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, wherein said description (DESCR) comprises at least one reference picture of at least part of the second communication device and at least one piece of information on dimensions of at least part of the second communication device, and wherein estimating (34; 65) a distance from the first communication device to the second communication device uses said at least one piece of information on dimensions of at least part of the second communication device.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 1 or 2, wherein said description (DESCR) of the second communication device (12) is received by the first communication device (11) through a wireless link established between said first and said second communication devices.<!-- EPO <DP n="24"> --></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of claim 1, wherein said description of the second communication device is retrieved by the first communication device from a database, which it addresses on the basis of an identification parameter of said second communication device.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any preceding claim, wherein said step of identifying at least part of the second communication device implements an object recognition algorithm on the basis of said at least one reference picture.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 2, wherein it also comprises:
<claim-text>- matching a portion of said at least part of the second communication device identified in said picture with a portion of said reference picture comprised in said description; and</claim-text>
<claim-text>- computing a number of pixels associated to the matched portion in said picture.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 6, wherein estimating the distance <i>d</i> from the first communication device to the second communication device uses the pinhole projection formula: <maths id="math0003" num=""><math display="block"><mi>d</mi><mo>=</mo><mi>f</mi><mo>×</mo><mfrac><mi>X</mi><mi>x</mi></mfrac></math><img id="ib0003" file="imgb0003.tif" wi="27" he="18" img-content="math" img-format="tif"/></maths><br/>
where:
<claim-text><i>f</i> is a focal length of the camera,</claim-text>
<claim-text><i>X</i> is a real height of said matched portion of the second communication device,</claim-text>
<claim-text><i>x</i> is a height of said matched portion in said picture.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method according to any preceding claim, wherein it also comprises:
<claim-text>- receiving from said second communication device an estimated distance from the second communication device to the first communication device;</claim-text>
<claim-text>- comparing said estimated distance received from said second communication device with the distance estimated by said first communication device.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of any preceding claim, wherein the steps of taking a picture, obtaining a description, identifying and estimating a distance are carried out for several second communication devices,<br/>
and wherein said method comprises a step of computing a distance between at least two of said second communication devices.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of any preceding claim, wherein the steps of taking a picture, obtaining a description, identifying and estimating a distance are carried out for several second communication devices,<br/>
and wherein said method comprises a step of estimating a position of said first communication device on the basis of the distances estimated between said first communication device and each of said second communication devices.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method of claim 1, wherein the steps of obtaining a description, identifying at least part of a second communication device and of estimating a distance are carried out by said first communication device or by a remote server.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A communication device (11) comprising a camera (71) and a communication module (72),<br/>
wherein said communication device comprises:
<claim-text>- a memory (74) for at least temporarily memorizing a picture of a second communication device taken by the camera;</claim-text>
<claim-text>- a recognition module (76) for identifying at least part of the second communication device in said picture, by using a description of the second communication device,<br/>
said description comprising at least one piece of information about the second communication device;</claim-text>
<claim-text>- an estimation module (77) for estimating a distance from the first communication device to the second communication device by using:
<claim-text>∘ said at least one piece of information about the second communication device,</claim-text>
<claim-text>∘ at least one camera parameter used for taking the picture of the second communication device, and</claim-text>
<claim-text>∘ dimensions of said at least part of the second communication device identified in said picture,</claim-text></claim-text>
and wherein said communication module comprises a receiver for receiving said description.<!-- EPO <DP n="26"> --></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A server for estimating a distance from a first communication device to a second communication device,<br/>
wherein the server comprises:
<claim-text>- a receiver for receiving (61) from a first communication device a picture taken by the first communication device, a distance measurement request and at least one camera parameter used for taking the picture;</claim-text>
<claim-text>- a database comprising at least one description of at least one second communication device, said description comprising at least one piece of information about the second communication device;</claim-text>
<claim-text>- a recognition module for identifying (63) in said picture at least part of at least one second communication device, which description is comprised in said database, by using said description of the second communication device,
<claim-text>- an estimation module for estimating (65) a distance from the first communication device to every second communication device at least partly identified in said picture, said estimation module using:
<claim-text>∘ said at least one piece of information about the second communication device,</claim-text>
<claim-text>∘ said at least one camera parameter used for taking the picture of the second communication device, and</claim-text>
<claim-text>∘ dimensions of said at least part of the second communication device identified in said picture;</claim-text></claim-text>
<claim-text>- a transmitter for transmitting (68) to the first communication device a list of every second communication device at least partly identified in said picture associated to a corresponding estimated distance.</claim-text></claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A system for estimating a distance from a first communication device (11) to a second communication device (12),<br/>
wherein the system comprises:
<claim-text>- said first communication device comprising:
<claim-text>∘ a camera (71) for taking a picture of the second communication device;<!-- EPO <DP n="27"> --></claim-text>
<claim-text>∘ a communication module (72) comprising a receiver for receiving a description of the second communication device, said description comprising at least one piece of information about the second communication device;</claim-text>
<claim-text>∘ a recognition module (76) for identifying at least part of the second communication device in said picture, by using said description;</claim-text>
<claim-text>∘ an estimation module (77) for estimating a distance from the first communication device to the second communication device by using:
<claim-text>■ said at least one piece of information about the second communication device,</claim-text>
<claim-text>■ at least one camera parameter used for taking the picture of the second communication device, and</claim-text>
<claim-text>■ dimensions of said at least part of the second communication device identified in said picture, and</claim-text></claim-text></claim-text>
<claim-text>- a second communication device comprising a communication module comprising a receiver for receiving a description request from said first communication device, and a transmitter for transmitting to said first communication device said description or an identifier of said second communication device.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>Computer program product downloadable from a communications network and/or stored in a computer-readable carrier and/or executable by a microprocessor, <b>characterized in that</b> it comprises program code instructions for the execution of the method for estimating a distance according to at least one of the claims 1 to 11, when it is executed on a computer.</claim-text></claim></claims><drawings mxw-id="PDW20422398" load-source="patent-office"><!-- EPO <DP n="28"> --><figure id="f0001" num="1,2,4"><img id="if0001" file="imgf0001.tif" wi="163" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0002" num="3,5,7"><img id="if0002" file="imgf0002.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0003" num="6"><img id="if0003" file="imgf0003.tif" wi="140" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="162" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="162" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
