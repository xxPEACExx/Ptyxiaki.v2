<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960830-A1" country="EP" doc-number="2960830" kind="A1" date="20151230" family-id="37533241" file-reference-id="318244" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451447" ucid="EP-2960830-A1"><document-id><country>EP</country><doc-number>2960830</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-15178070-A" is-representative="NO"><document-id mxw-id="PAPP193865862" load-source="docdb" format="epo"><country>EP</country><doc-number>15178070</doc-number><kind>A</kind><date>20060905</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193865863" load-source="patent-office" format="original"><country>EP</country><doc-number>15178070.7</doc-number><date>20060905</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162031835" ucid="EP-05108123-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>05108123</doc-number><kind>A</kind><date>20050905</date></document-id></priority-claim><priority-claim mxw-id="PPC162035322" ucid="EP-06793252-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>06793252</doc-number><kind>A</kind><date>20060905</date></document-id></priority-claim><priority-claim mxw-id="PPC162034594" ucid="EP-15178070-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>15178070</doc-number><kind>A</kind><date>20060905</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988521016" load-source="docdb">G06K   9/00        20060101AFI20151027BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988523323" load-source="docdb">G07D   7/20        20060101ALI20151027BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1987771837" load-source="docdb" scheme="CPC">G07D   7/121       20130101 FI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987775569" load-source="docdb" scheme="CPC">G06K   9/6203      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987778278" load-source="docdb" scheme="CPC">G06K   9/6857      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987782929" load-source="docdb" scheme="CPC">G06K   9/00577     20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987788269" load-source="docdb" scheme="CPC">G07D   7/20        20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987793269" load-source="docdb" scheme="CPC">G06K   9/3208      20130101 LI20130101BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545807" lang="DE" load-source="patent-office">MITTEL ZUR VERWENDUNG EINER MIKROSTRUKTUR AUS MATERIALOBERFLÄCHE ALS EINDEUTIGE KENNUNG</invention-title><invention-title mxw-id="PT165545808" lang="EN" load-source="patent-office">MEANS FOR USING MICROSTRUCTURE OF MATERIALS SURFACE AS A UNIQUE IDENTIFIER</invention-title><invention-title mxw-id="PT165545809" lang="FR" load-source="patent-office">MOYEN PERMETTANT D'UTILISER UNE MICROSTRUCTURE DE SURFACE DE MATERIAUX COMME IDENTIFICATEUR UNIQUE</invention-title></technical-data><related-documents><relation type="division"><child-doc ucid="EP-15178070-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>15178070</doc-number><kind>A</kind><date>20060905</date></document-id><document-id load-source="patent-office" format="original"><country>EP</country><doc-number>15178070.7</doc-number><date>20060905</date></document-id></child-doc><parent-doc ucid="EP-06793252-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>06793252</doc-number><kind>A</kind><date>20060905</date></document-id><document-id load-source="patent-office" format="original"><country>EP</country><doc-number>06793252.5</doc-number><date>20060905</date></document-id><parent-grant-document ucid="EP-2024899-B1"><document-id><country>EP</country><doc-number>2024899</doc-number><kind>B1</kind><date>20151104</date></document-id></parent-grant-document></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR1103335415" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ALPVISION SA</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR1103328468" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ALPVISION SA</last-name></addressbook></applicant><applicant mxw-id="PPAR1101652880" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Alpvision SA</last-name><iid>100075171</iid><address><street>Rue du Clos, 12</street><city>1800 Vevey</city><country>CH</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103316115" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>JORDAN FRÉDÉRIC</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103317340" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>JORDAN, Frédéric</last-name></addressbook></inventor><inventor mxw-id="PPAR1101643436" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>JORDAN, Frédéric</last-name><address><street>Route des Vérolys 86</street><city>1619 Les Paccots</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103334967" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KUTTER MARTIN</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342966" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KUTTER, MARTIN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101645593" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KUTTER, MARTIN</last-name><address><street>Chemin des Lapiès 4</street><city>1617 Remaufens</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1108627659" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>DI VENUTO DAYER CÉLINE</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1107015474" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>DI VENUTO DAYER, CÉLINE</last-name></addressbook></inventor><inventor mxw-id="PPAR1101649237" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>DI VENUTO, Céline</last-name><address><street>Route des Biolley 41</street><city>1615 Bossonnens</city><country>CH</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101644346" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Leman Consulting S.A.</last-name><iid>100833764</iid><address><street>Chemin de Précossy 31</street><city>1260 Nyon</city><country>CH</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660687349" load-source="docdb">AT</country><country mxw-id="DS660783354" load-source="docdb">BE</country><country mxw-id="DS660610123" load-source="docdb">BG</country><country mxw-id="DS660689861" load-source="docdb">CH</country><country mxw-id="DS660606452" load-source="docdb">CY</country><country mxw-id="DS660687350" load-source="docdb">CZ</country><country mxw-id="DS660783355" load-source="docdb">DE</country><country mxw-id="DS660606453" load-source="docdb">DK</country><country mxw-id="DS660606454" load-source="docdb">EE</country><country mxw-id="DS660684847" load-source="docdb">ES</country><country mxw-id="DS660610124" load-source="docdb">FI</country><country mxw-id="DS660610125" load-source="docdb">FR</country><country mxw-id="DS660783356" load-source="docdb">GB</country><country mxw-id="DS660606455" load-source="docdb">GR</country><country mxw-id="DS660687355" load-source="docdb">HU</country><country mxw-id="DS660689862" load-source="docdb">IE</country><country mxw-id="DS660606456" load-source="docdb">IS</country><country mxw-id="DS660610126" load-source="docdb">IT</country><country mxw-id="DS660606457" load-source="docdb">LI</country><country mxw-id="DS660610286" load-source="docdb">LT</country><country mxw-id="DS660687356" load-source="docdb">LU</country><country mxw-id="DS660610299" load-source="docdb">LV</country><country mxw-id="DS660610300" load-source="docdb">MC</country><country mxw-id="DS660687357" load-source="docdb">NL</country><country mxw-id="DS660690059" load-source="docdb">PL</country><country mxw-id="DS660610301" load-source="docdb">PT</country><country mxw-id="DS660687358" load-source="docdb">RO</country><country mxw-id="DS660690060" load-source="docdb">SE</country><country mxw-id="DS660610139" load-source="docdb">SI</country><country mxw-id="DS660684848" load-source="docdb">SK</country><country mxw-id="DS660684985" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479817" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present application concerns the visual identification of materials or documents for tracking purpose.</p><p id="pa02" num="0002">The invention proposes a method to automatically identify an object by the following steps :<br/>
- digitally acquiring a two-dimensional image through sampling on a uniformly spaced orthogonal grid of at least one color component of an area of interest of its surface illuminated by a non-coherent light which location, resolution, imaging angle and lighting angle are optimized for a given image matching metric,<br/>
- comparing the acquired image to stored digital images of the same area, such comparison including the steps of :<br/>
o preprocessing the image,<br/>
o flattening the image,<br/>
o applying a rotation compensation procedure,<br/>
o applying a translation compensation procedure,<br/>
o masking the areas of interest<br/>
o computing a metric according to a deterministic convergence behavior when the mean square error between the acquired and recorded image tends towards a constant, such metric being dependent on the acquired and stored image resolutions and enabling the identification from the recorded images of a matching set of images for a given object image, the metric and threshold having the property that the cardinality of said matching set converges towards singleton when the resolution increases.<br/>
 <br/>
  
<img id="iaf01" file="imgaf001.tif" wi="90" he="49" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759629" lang="EN" source="EPO" load-source="docdb"><p>The present application concerns the visual identification of materials or documents for tracking purpose.  The invention proposes a method to automatically identify an object by the following steps : 
- digitally acquiring a two-dimensional image through sampling on a uniformly spaced orthogonal grid of at least one color component of an area of interest of its surface illuminated by a non-coherent light which location, resolution, imaging angle and lighting angle are optimized for a given image matching metric, 
- comparing the acquired image to stored digital images of the same area, such comparison including the steps of : 
o preprocessing the image, 
o flattening the image, 
o applying a rotation compensation procedure, 
o applying a translation compensation procedure, 
o masking the areas of interest 
o computing a metric according to a deterministic convergence behavior when the mean square error between the acquired and recorded image tends towards a constant, such metric being dependent on the acquired and stored image resolutions and enabling the identification from the recorded images of a matching set of images for a given object image, the metric and threshold having the property that the cardinality of said matching set converges towards singleton when the resolution increases. 
  
</p></abstract><description mxw-id="PDES98404518" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>INTRODUCTION</b></heading><p id="p0001" num="0001">The present application concerns the visual identification of materials or documents for tracking purpose.</p><heading id="h0002"><b>STATE OF THE ART</b></heading><p id="p0002" num="0002">This patent addresses the problem of counterfeiting, tampering and traceability. Each of these three security issues are generally addressed using a specific approach:
<ul><li>For counterfeiting, approaches are based on special markings (like holograms, DNA codes, optically variable inks, Cryptoglyph, etc) where the operator checks if the marking is there or not. Such solutions are useful mainly against counterfeiting (and tampering in some cases) and their security solely relies on the complexity to counterfeit the mark.</li><li>For tampering, solutions are either based on a redundant encoding strategy or on a tamper evident approach. Redundant security is based on a double encoding of critical information (like the name on a passport which is also encoded in the attached magnetic strip or the hash of a text which is printed on a document which should not be modified). Tamper evidence can also be achieved using various physical or chemical means which enable to detect modifications performed to a document or to a package. Such means include special paper treatments which enable it to be immediately colored by solvents or ultrasonic detection systems which are capable to detect an overlay of a thin piece of paper.</li><li>Traceability is achieved using a unique identification of each item. This type of system typically uses a central database which maintains a record of information for each numbered item. It should be noted that unique identification potentially enables to address all security issues like counterfeiting, tampering and diversion. The following section details the state of the art of this approach</li></ul><!-- EPO <DP n="2"> --></p><p id="p0003" num="0003">For carton and paper application, unique identification is often performed by ink-jet printing (DOD or continuous) of an alphanumeric string or a barcode.</p><p id="p0004" num="0004">In the case of tampering detection, the goal is to guarantee that data printed in clear text on a document has not been illegally modified (for instance a check value is increased). One simple way to reach this objective is to uniquely identify the document (using barcode or hexadecimal string) with an identification number printed on the document. This number gives access through a look-up table to the data also printed in clear text on the document. It is then possible to check if the data printed on the document matches with the data stored in the loop-up table (Optical Character Recognition may be used for automating the comparison process). There exists many way to implement this idea for specific problems, for instance a solution for integrity check of identity documents is described in <patcit id="pcit0001" dnum="US6920437B"><text>US6920437</text></patcit>, another for passport documents is given in <patcit id="pcit0002" dnum="US6565000B"><text>US6565000</text></patcit>.</p><p id="p0005" num="0005">Traceability is particularly important for finding parallel import of goods, but also for other security purposes, in the following we choose to focus on the specific diversion problem for the sake of clarity. Unique identifiers for each package sent to a given country A and by a given distributor, are listed in a database. In case of gray market, the good is re-imported in a country B. By using this code it is then possible to trace back the origin of the good. A particular system architecture (comprising a central server, database and client applications) of such an approach using central database is described in patent <patcit id="pcit0003" dnum="US6922687B"><text>US6922687</text></patcit>, another system architecture is given in <patcit id="pcit0004" dnum="US6547137B"><text>US6547137</text></patcit> (where the identifier is printed on a label attached to the product). For the pharmaceutical industry, this solution can also be implemented by marking the identifier directly on a label or a pill as described in <patcit id="pcit0005" dnum="US6776341B"><text>US6776341</text></patcit>. For the electronic industry <patcit id="pcit0006" dnum="US6629061B"><text>US6629061</text></patcit> describes a solution where the identifier is printed on the circuit board and embedded in the memory device (another approach for fighting gray market in this industry is given in <patcit id="pcit0007" dnum="US6459175B"><text>US 6459175</text></patcit> with power supplies). For the clothing industry, <patcit id="pcit0008" dnum="US6461987B"><text>US6461987</text></patcit> describes a solution where unique identification is obtained by the means of micro label strips.<!-- EPO <DP n="3"> --></p><p id="p0006" num="0006">In the case of counterfeit detection, identifiers of all the produced packages or documents are kept in a central database. For each product it is then possible to interrogate the database and know:
<ul><li>If the identifier belongs to the database. If so, then it is the proof that this is a valid identifier, i.e. it has not been invented by a counterfeiter (identification numbers are randomly chosen using a secret algorithm).</li><li>If another request has already been sent for the same identifier. If so, it would prove that several counterfeit copies of the same product are circulating.</li></ul></p><p id="p0007" num="0007">Some of the patent applications listed in the above section on traceability also describe solutions for counterfeit detection. Hence, counterfeit is also described in <patcit id="pcit0009" dnum="US6776341B"><text>US6776341</text></patcit> (using labels, as described above) and <patcit id="pcit0010" dnum="US6461987B"><text>US6461987</text></patcit> (using micro label strips for the clothing industry, see above). The marking of the code can be performed either by means of printing or engraving as described in <patcit id="pcit0011" dnum="US6706314B"><text>US6706314</text></patcit> (in this case a laser can be used for reading) for traceability and anti-counterfeit applications. It can also be used special light sources with material reacting to specific wavelengths. Although this approach is generally more used as a yes/no answer (since it is capable of generating a very limited number of different identifiers), <patcit id="pcit0012" dnum="US6384409B"><text>patents US6384409</text></patcit> and <patcit id="pcit0013" dnum="US6030657A"><text>US6030657</text></patcit> (where the material is a biological marker) mention fighting gray market using this approach. The same stands for the analog magnetic reader described in <patcit id="pcit0014" dnum="US5975581A"><text>US5975581</text></patcit>.</p><p id="p0008" num="0008">The unique identification method described above is therefore a powerful approach that enables to solve three different security issues: tampering, tracking and counterfeiting.</p><p id="p0009" num="0009">So far, we have investigated only unique identification relying on a marking of the product. There exists also a totally different approach enabling unique identification without marking (both approaches are described in <figref idrefs="f0001">Figure 1</figref>).</p><p id="p0010" num="0010">Indeed, it is also possible to measure precisely some features of a document or product and use it to characterize the product uniquely. For instance, Ingenia Technology discloses an invention where the micro topology of carton and paper is measured using a coherent light (typically produced by a laser) and used for unique identification purposes in <patcit id="pcit0015" dnum="GB0418138A"><text>GB0418138.4</text></patcit>, <patcit id="pcit0016" dnum="GB0418173A"><text>GB0418173.1</text></patcit>, <patcit id="pcit0017" dnum="GB0418178A"><text>GB0418178.0</text></patcit> and <patcit id="pcit0018" dnum="GB0509635A"><text>GB0509635.9</text></patcit>. This technology may be directly embedded in printer devices (as described in <patcit id="pcit0019" dnum="GB2005000903W"><text>PCT/GB2005/000903</text></patcit>). This technology can basically be used on any chaotic surface,<!-- EPO <DP n="4"> --> using an array of laser sources enabling to probe the material surface at various incidences (as described in <patcit id="pcit0020" dnum="GB2005000922W"><text>PCT/GB2005/000922</text></patcit>). A similar approach was also described in application <patcit id="pcit0021" dnum="GB2221870A"><text>GB2221870</text></patcit> from De La Rue Company Plc, where the scattering of a coherent light was used for detection. Another solution is described in <patcit id="pcit0022" dnum="US6584214B"><text>US6584214</text></patcit> by the MIT where the whole 3D chaotic structure of a material is used to generate a unique identifier. The 3D structure is acquired using devices which are based on coherent light (for transparent material) or ultrasound and X-rays (for non-transparent materials). Another approach using ultrasonic measurement is described in <patcit id="pcit0023" dnum="US5454045A"><text>US5454045</text></patcit>, where features (either macroscopic or microscopic) are measured inside a material, stored and subsequently compared with new measurements for match test. However, all of these approaches use specific acquisition devices in order to ease the detection of unique features required for unique identification applications. The current application describes solutions for using standard imaging devices.</p><p id="p0011" num="0011">In published patent <patcit id="pcit0024" dnum="US20050075984A"><text>US20050075984</text></patcit> (also in <patcit id="pcit0025" dnum="US20030014647A1"><text>US20030014647-A1</text></patcit> and <patcit id="pcit0026" dnum="US20030712659A"><text>US20030712659</text></patcit>) an original method based on random set of micro bubbles inserted in a transparent medium is described. The detection is based on measurement of shadows and reflections to determine a unique signature for each set of bubbles. The transparent medium is then physically affixed to the product or document to be identified. This approach is unusual as it is somehow between the two processes described in <figref idrefs="f0001">Figure 1</figref>: on the one hand it is an analog random process but on the other hand it requires to be physically applied on the product which is conceptually the same approach as printing out a serial number.</p><p id="p0012" num="0012">Another family of solutions is based on the creation of a digital signature using the random and chaotic nature of materials. Such a digital signature can be used for authentication purposes, for encryption purposes or for tampering detection. Applications related to authentication are for instance disclosed in <patcit id="pcit0027" dnum="BY9900011W"><text>PCT/BY99/00011</text></patcit> (where the signature is encrypted and printed on the material itself). Two patent applications disclosed by the company Signoptic Technologies focus on the generation and use of a digital signature using material microstructure. In document <patcit id="pcit0028" dnum="WO2005122100A"><text>WO2005/122100</text></patcit>, different applications are described where the signature is used to encrypt data.<!-- EPO <DP n="5"> --> The document <patcit id="pcit0029" dnum="WO2006078651A"><text>WO2006/078651</text></patcit> focuses specifically on signatures obtained from fibrous materials for authentication purposes.</p><p id="p0013" num="0013">However, those approaches do not address the so-called mass-serialization application. This strategy is used today in many industries and consists in individually marking each product which enables to track of each of them. Such marks typically represent variable barcodes or alphanumeric codes which are digitally printed (using Drop On Demand on continuous inkjet) or engraved (using for instance laser marking). The solutions disclosed in the current application enable to provide all the functionality offered by mass-serialization but without the need of any marking, by only using images of their microstructure. It describes in particular solutions in order to provide automatic high speed recording and identification of products.</p><heading id="h0003"><b>SHORT DESCRIPTION OF THE INVENTION</b></heading><p id="p0014" num="0014">The invention describes how to perform a reliable identification of a product by uniquely using an optical image of the microstructure of its surface. The randomness of this microstructure, from one product to the other is used to identify uniquely each product. The identification is performed by a match between the acquired image and a database of previously recorded images for the microstructure of all the products of a given production line.</p><p id="p0015" num="0015">In the following, some cases of materials are specifically analyzed but the described method is not limited to these materials and can be applied easily to other types of materials and detected features for any person skilled in the art of image processing and physics of materials.</p><p id="p0016" num="0016">The present invention proposes a method to automatically identify an object as defined in claim 1.</p><p id="p0017" num="0017">The main fields of applications of the presented technology include tracking, identification and counterfeit detection. Three versions of the technology are described, each covering parts or all of the fields of application:
<ul><li>The first level is named "unique fingerprint" in this document. With this technique it is possible to identify, to track uniquely and to detect counterfeiting for some valuable item or<!-- EPO <DP n="6"> --> document. This technology is based on the unique microstructure of the surface of each item.</li><li>The second level is the named microscopic fingerprint in the present document. With this technology it is possible to detect counterfeited items but not to trace them or to identify them uniquely. This technology is based on the microstructure of the object used to make the item, for example a mould or an offset sheet, depending on the material in which the item is made.</li><li>The third level is named macroscopic fingerprint in the present document. This allows detecting coarsely counterfeited items, such as fake medicines that are sold on the internet.</li></ul></p><p id="p0018" num="0018">This technology is based on the macroscopic structure of the item to protect.<br/>
Examples of usage of this technology are watch traceability and anti-counterfeiting, authentication and anti-counterfeiting of paper document, label or package, authentication of containers, retrieval of advertisements in newspaper pages and so on. It can be used for example in watch industry, pharmaceutical industry, food industry or newspaper industry and more generally for any industry which requires identification of items without marking. This technology has been named "fingerprint" as it is based on concepts which are similar to those used for the human fingerprint technologies. In fact, the inside surface of hands and feet of humans (all primates in fact) contains tiny ridges with furrows in between which are unique for each individual. This is also true for the majority of materials like wood, paper, metal or other coated materials.</p><heading id="h0004"><b>SHORT DESCRIPTION OF THE FIGURES</b></heading><p id="p0019" num="0019">The invention will be better understood thanks to the attached drawings in which:
<ul><li><figref idrefs="f0001">Figure 1</figref>: Two different processes enabling a unique identification. Process 1: an analog random process 11 (like the microstructure of a paper) is digitized with 12 and the resulting data is stored an unique identifier 13. In process 2, a generator 14 provide a digital random (or pseudorandom) value that is stored as a unique identifier 15 and finally printed 16.<!-- EPO <DP n="7"> --></li><li><figref idrefs="f0001">Figure 2</figref>: Picture a magnified portion of office paper showing the important randomness of the paper structure. The height of the picture is approximately 1 mm. The image has been processed to enhance the contrast.</li><li><figref idrefs="f0002">Figure 3</figref>: A portion of a metallic logo of a back of watch. The height of the image is approximately 1 mm. The picture has been processed to enhance the contrast. Picture was taken with an office digital scanner at 4'800 dpi.</li><li><figref idrefs="f0002">Figure 4</figref>: A portion of molded plastic. The height of the picture is approximately 5mm. The image has been processed to enhance contrast. Picture was taken with as scanner at 2'400 dpi.</li><li><figref idrefs="f0003">Figure 5</figref>: A part of a printed area on a paper label. The height of the picture is approximately 5mm. The image has been processed to enhance the contrast. Picture was taken with a scanner at 2'400 dpi.</li><li><figref idrefs="f0003">Figure 6</figref>: A part of a coated dial of a watch. The height of the picture is about 1 mm. The image was processed to enhance contrast. Picture was taken with a microscope at about 10'000 dpi.</li><li><figref idrefs="f0004">Figure 7</figref>: Diagram showing how the captured data can be increase to prevent possible false positive or false negative detections.</li><li><figref idrefs="f0004">Figure 8</figref>: Contours of the same text printed with industrial roto-gravure technology (scale ∼1 mm height) for two successive samples of the same production batch.</li><li><figref idrefs="f0004">Figure 9</figref>: Image of a uniform tint area of color printed in offset (scale ∼1 mm for image height).</li><li><figref idrefs="f0005">Figure 10</figref>: Difference between structure of the chemically engraved logo of two different watches from the same model. Picture has been processed to enhance contrast. The field of view is of about 5mm and the dpi is 4'800. 101 is the engraved logo of one watch. 102 is the engraved logo of the other watch.</li><li><figref idrefs="f0005">Figure 11</figref>: Picture showing how to retrieve the angle of rotation of an item. 111 is the Fourier transform of a specific item. 112 is the additions of the values on an axis of 111 at each angle.</li><li><figref idrefs="f0005">Figure 12</figref>: Schema of image acquisition with diffuse light and 2D CCD. 121 is the image acquisition device. 122 represents the diffuse light, 123 is the light box and 124 is the item to verify.<!-- EPO <DP n="8"> --></li><li><figref idrefs="f0006">Figure 13</figref>: Schema of image acquisition with specular light. 131 is the image acquisition device, 132 represents the specular light, 133 represents the reflected light and 134 is the item to verify.</li><li><figref idrefs="f0006">Figure 14</figref>: Schema of image acquisition with diffuse light and 1 D CCD. 141 is the item to verify, 142 is a sheet of glass, 143 is a moving light, 144 is a moving mirror, 145 is a fixed mirror and 146 is a 1 D CCD.</li><li><figref idrefs="f0007">Figure 15</figref>: Picture of a coated dial observed with specular axial light. Picture has been processed to enhance the contrast. The field of view is about 2 x 3 mm and the dpi is about 10'000.</li><li><figref idrefs="f0007">Figure 16</figref>: Picture of the same dial than in <figref idrefs="f0007">Figure 15</figref> but taken with a 1 D CCD diffuse light. Picture has been processed to enhance the contrast. The field of view is about 5mm and the dpi is 4'800.</li><li><figref idrefs="f0008">Figure 17</figref>: Picture of a coated dial observed with specular axial light. Picture has been processed to enhance the contrast. The field of view is about 2 x 3 mm and the dpi is about 10'000.</li><li><figref idrefs="f0008">Figure 18</figref>: Picture of the same dial than in <figref idrefs="f0008">Figure 17</figref> but taken with a 1 D CCD diffuse light. Picture has been processed to enhance the contrast. The field of view is about 5mm and the dpi is 4'800.</li><li><figref idrefs="f0009">Figure 19</figref>: Schema depicting the difference between the three levels of fingerprint technology. 191 is the axis for the technology, 192 is the axis for the dpi. 193 represents the macroscopic fingerprint, 194 represents the microscopic fingerprint and 195 represents the unique fingerprint. White area are best area for the given technology whereas gray area are possible extensions of the area for the given technology. Resolutions in dpi corresponding to each area depends on the materials properties.</li><li><figref idrefs="f0009">Figure 20</figref>: Picture of two different back of watches that are stamped. The field of view is about 0.4 x 0.6 mm for a dpi of 10'837. 201 is the stamped structure of one watch, 202 is the one from the other.<!-- EPO <DP n="9"> --></li><li><figref idrefs="f0010">Figure 21</figref>: Picture of two different back of watches that are brushed. The field of view is about 0.4 x 0.6 mm for a dpi of 10'837. 211 is the brushed structure of one watch, 212 is the brushed structure of the other one. Picture has been processed to enhance the contrast.</li><li><figref idrefs="f0010">Figure 22</figref>: Picture of cross-correlation of brushed watches. The template is a picture from the same watch than 211. 221 is the cross-correlation of 211 with the template and 222 is the cross-correlation of 212 with the template.</li><li><figref idrefs="f0010">Figure 23</figref>: Picture of two different coated dials of watches. 231 is the microstructures of the coated dial of one watch and 232 of the other. Picture has been processed to enhance contrast. The field of view is about 1x1 mm and the dpi is 10'837.</li><li><figref idrefs="f0011">Figure 24</figref>: Picture of three different caps. 241 and 242 comes from the same mould whereas 243 comes from another mould. Picture has been processed to enhance contrast. The field of view is about 5 x 5 mm and the dpi is 2'400.</li><li><figref idrefs="f0011">Figure 25</figref>: Pictures of three different labels. 251 and 252 comes from the same printer and the same position on the offset sheet. 253 comes from another printer. Pictures have been processed to enhance contrast. The field of view is about 2.5x2.5 mm an the dpi is 2'400.</li><li><figref idrefs="f0011">Figure 26</figref>: Pictures of uniform microstructures and its Fourier Transform. 261 is a picture with uniform microstructures. 262 is its Fourier Transform. The field of view is about 2.5 x 2.5 mm and the dpi is 2'400.</li><li><figref idrefs="f0012">Figure 27</figref>: diagram showing the difference between the stored image 271 and the acquired image 272. 273 and 275 are a logo or a macroscopic zone on 271 and 272 respectively. 274 and 276 are the microscopic zone of interest on 271 and 272 respectively.</li><li><figref idrefs="f0012">Figure 28</figref>: schema showing the different steps of image detection. 281 is the location and rotation retrieval, 282 is the masking operation, 283 is the image pre-processing and 284 is the image-matching.</li><li><figref idrefs="f0013">Figure 29</figref>: Pictures of uniform microstructures. 291 and 293 are pictures without flattening. 292 and 294 are pictures with flattening. Cross-correlations of the each image with the template (which matches image 294) are shown on the right.<!-- EPO <DP n="10"> --></li><li><figref idrefs="f0014">Figure 30</figref>: Diagram describing the detection strategy progressively increasing cross-correlation sizes.</li><li><figref idrefs="f0015">Figure 31</figref>: Pictures depicting the importance of padding disturbing elements to the mean value. 311 is the template, without padding. 312 is another picture matching with the template, without padding. 313 is a picture from another item, without padding. 314 is the cross-correlation between the 311 and 312. 315 is the cross-correlation between 311 and 313. 316 is the image 311 padded. 317 is 312 padded. Image 318 is the image 313 after padding. 319 is the cross-correlation between 316 and 317. 3110 is the cross-correlation between 316 and 318.</li><li><figref idrefs="f0016">Figure 32</figref>: Scheme representing the transform between to spaces. 321 is a circular donut around a point of interest. 322 is the donut in the transformed space.</li></ul></p><heading id="h0005"><b>DETAILED DESCRIPTION OF THE INVENTION</b></heading><heading id="h0006"><b>MICROSTRUCTURE IMAGES</b></heading><heading id="h0007">IMAGE ACQUISITION DEVICE</heading><p id="p0020" num="0020">An image of the surface is acquired by means of a digital imaging device, which can be a digital scanner, a digital camera, a mobile phone with integrated camera (possibly using a special macroscopic lens), a microscope, etc... Such device typically outputs a matrix of values corresponding to a color component sampled along a uniform orthogonal grid. The image acquisition can be done by reflection or transparence, depending of the product (paper, carton, metal, coating or polymer for instance) and the particular properties of the material. In the case of imaging by reflection, different types of imperfections may be imaged depending on the position of the lighting source. The different lighting orientations can be used to further increase the detection rate (successful finding of a match with a recorded image) and decrease the false positive detections (wrongly identifying a counterfeit product with an image of the database). Different light wavelength may also be used to acquire several pictures of the same area (with same or different wavelength for lighting and imaging). In particular objects may be images in different color spaces which are appropriate to highlight the microstructure (RGB, HSV, Lab, etc). This application<!-- EPO <DP n="11"> --> focuses specifically on the processing of 1 color, but all described processes can also be applied to the case of object images acquired with several color components. More generally, additional imaging conditions may be chosen for a given imaged product if a risk of false positive/negative is identified based on the images recorded in the database for the previous products. A diagram illustrating this process is shown in <figref idrefs="f0004">Figure 7</figref>. Similarly, it is also possible to systematically acquire several images (or other parameters) for a given area and remove, a <i>posteriori,</i> images from the database if they are not required to avoid false positive or false negative detections.</p><p id="p0021" num="0021">The acquisition device should be chosen such that relevant details can be seen. The diagram for acquisition by diffuse reflection with 2D CCD can be seen in <figref idrefs="f0005">Figure 12</figref>. The image acquisition device (121) can be anything but a digital camera is a good candidate. The item to verify (124) is put in a light box. The light box (123) is used to diffuse the light (122). It can also be modeled by an annular flash. This can reveal some interesting details. In <figref idrefs="f0006">Figure 14</figref>, the diagram for acquisition by diffuse reflection with 1 D CCD can be seen. The acquisition device can be anything but a scanner is a good candidate. The item to verify (141) is put on a sheet of glass (142). A moving light (143) and a moving mirror (144) are working together to reflect the light on a fixed mirror (145), which reflects it on a 1D CCD. This reveals other interesting details. In <figref idrefs="f0006">Figure 13</figref>, the diagram for acquisition by specular reflection can be seen. The acquisition device (131) can be anything but a microscope (either optical or electronic) is a good candidate. Another possibility consists in modifying a digital scanner, by moving the CCD or the lighting part. The light (132) is coming from a known direction and is reflected (133) by the item to verify (134) in another direction that can be computed with the Descartes Law. The Descartes Law insures that the incidence angle is the same than the reflected angle. This can reveal different details than the diffuse light. In <figref idrefs="f0007">Figure 15</figref> and <figref idrefs="f0008">Figure 17</figref>, the details of a coated dial of two different watches are shown with specular axial light at about 10'000 dpi. In <figref idrefs="f0007">Figure 16</figref> and <figref idrefs="f0008">Figure 18</figref>, the details of the same watches are shown with diffuse light with 1 D CCD (scanner) at 4'800 dpi. It can be seen in these figures that for the first watch it is better to use diffuse light as there are more details in <figref idrefs="f0007">Figure 16</figref> than in <figref idrefs="f0007">Figure 15</figref>. On the contrary, for the second watch it is better to use specular light as there are more details in <figref idrefs="f0008">Figure 17</figref> than in <figref idrefs="f0008">Figure 18</figref>.<!-- EPO <DP n="12"> --></p><p id="p0022" num="0022">Finally, it should be mentioned that acquisition device may be capable to produce images needed for rotation/translation synchronization in addition to the images used for fingerprint. As is shown later in the application rotation/translation synchronizations are typically performed using images of the object that include with specific feature points. Such feature points can be acquired using imaging devices with large field of views or by using motored multi-axis stages enabling to drive the sample at precise locations.</p><heading id="h0008">RESOLUTIONS REQUIREMENTS</heading><p id="p0023" num="0023">It is basically possible to use any sufficiently random structure to uniquely identify a product. In particular it is possible to use the microstructure of a graphical design (in particular the barcode, text, logo, artistic designs, lines, etc) printed on a product as a random identifying structure (use of barcode has also been described for counterfeit detection in <patcit id="pcit0030" dnum="US6869015B"><text>US6869015</text></patcit>, using a system based on particles mixed with the barcode) or to use the microstructure of the underlying material. However, the resolution of the imaging device should be adapted to the characteristics of the microstructure. An example of such a microstructure is given in <figref idrefs="f0001">Figure 2</figref>. It shows the typical microstructure (the word "imperfection" is also used with an equivalent meaning in this document) of regular paper as seen with an equivalent resolution of about 11,000 dpi, which corresponds to a resolution of a few micrometers. In practice, it is considered that for standard paper and carton, the random structures have a size that rarely extends above a few millimeters (however, some special material may have much larger random structures or highly anisotropic structure sizes). Typically, the considered structure size will be below 1 mm or even below 100 um. Standard imaging devices listed above can reach such level of details. For instance a 1200 dpi scanner can theoretically resolve structures of 21 □m. Other type of materials, like polymer, metal, coating or glass for instance, may exhibit different types of microstructures requiring either lower resolution (and thus larger field of view in order to keep the same quantity of image information) or higher resolution. In <figref idrefs="f0002">Figure 3</figref>, the microstructure of a metallic part is shown at 4'800 dpi. The size of the microstructure elements are about 47 um. The field of view is about 10mm x 10mm. In <figref idrefs="f0002">Figure 4</figref>, the microstructure of a piece of polymer is shown at 2'400 dpi. The size of the defaults is about 349 um and the field of view is<!-- EPO <DP n="13"> --> 50mm x 50mm. In <figref idrefs="f0003">Figure 5</figref> the microstructure of an offset printed label is shown at 2'400dpi. The size of the defaults is about 42 um and the field of view is 2.5mm x 2.5mm. In <figref idrefs="f0003">Figure 6</figref> the coated part of a dial is shown at 10'837 dpi. The size of the details is about 58 um and the field of view is 1.2mm x 1.2mm. For all these materials the details are uniformly spread across the image. Thanks to some image processing steps that are described in more details in the next sections, it is possible to obtain a uniform variation of the microstructures inside an image. Furthermore it was noticed that these microstructures were randomly spread on the item. This insures randomness from item to item.</p><p id="p0024" num="0024">Generally speaking, it appears that a resolution of 2400 dpi or higher is often required to characterize a unique fingerprint. However, some materials exhibit unique fingerprints with significantly lower resolutions, this is particularly common for textures which have been designed, on purpose, with a noisy and variable pattern. In the case of a microscopic fingerprint, a lower resolution may be sufficient. Finally, macroscopic fingerprints can be performed with resolution of 300 dpi or lower. <figref idrefs="f0009">Figure 19</figref> is the schema representing the different dpi necessary for each level of the fingerprint. The different technologies are represented on the vertical axis (191) and the different dpi's are represented on the horizontal axis (192). There are always gray zones and white zones for each technology. The white zone represents the best dpi zone for the technology whereas the gray zone shows up to where it is possible to extend it. Unique fingerprint (195) has no upper boundary as the dpi to identify an item uniquely depends on the size of its microstructures. Unique fingerprint may also extend in some cases in the lower resolutions area (like leather for instance and more generally any natural material). Microscopic fingerprint (194) and macroscopic fingerprint (193) are basically two times the same technology. The only difference is that, in microscopic fingerprint, microstructures are considered whereas in macroscopic fingerprint macrostructures are considered. An upper boundary is therefore necessary because it defines the boundary between microscopic and unique and between macroscopic and microscopic. For the same reasons a down boundary is also required.<!-- EPO <DP n="14"> --></p><heading id="h0009">MICROSTRUCTURE OF PRINTED PAPER</heading><p id="p0025" num="0025">A particular type of randomness can be observed in the contours of a printed shape or inside a tint area or at locations where several colors are applied. For instance <figref idrefs="f0004">Figure 8</figref> shows the contours of text printed in rotogravure technology and how they vary between two successive prints. In this case, these contours have some features which are common between two contours (like 81 and 83 for instance) but also features which are different (like 82 and 84). Common features (i.e. micro fingerprint) typically have sizes that extend on a larger area than different features (i.e. unique fingerprint). This means in particular that contour matching can be performed using high frequencies of the signal. The similar large features come from cells location on the cylinder and the variation between two prints comes from the texture of the paper and how the ink deposits on the surface.</p><p id="p0026" num="0026">More generally, the print randomness depends on several parameters, including the location of the cells engraved on the cylinder, the viscosity of the ink, the printing speed and the micro structure of the carton, the ink filling of the cylinder cells, etc. on one hand and the ink absorption on the paper on the other hand. All these parameters have an influence on the randomization of the shape contours or tint area. It is this randomness that can be used to identify individual products but also production batches, individual cylinder used for production or the printing works. It is also possible to deduce the aging of the cylinder (and hence at which approximate time a product was printed) from the images (for instance, the doctor blade that pushes the ink in a rotogravure cylinder progressively wears the engraved cells after millions of rotations). In particular, the common features of the 2 images of <figref idrefs="f0004">Figure 8</figref> come from the fact that they have been printed with the same cylinder; another cylinder engraved with slightly different parameters would provide substantially different contours. All these techniques are not limited to rotogravure and also applied to any printing technology. Another example is shown in <figref idrefs="f0004">Figure 9</figref> with a tint area printed with industrial offset (the original image was yellow and was later processed to enhance the contrast). The image is clearly not uniform and will always differ between two different prints.<!-- EPO <DP n="15"> --></p><heading id="h0010">RANDOM MICROSTRUCTURE OF OTHER MATERIALS</heading><heading id="h0011">• Microstructure of chemical etching</heading><p id="p0027" num="0027">For example when a logo is engraved at the back of a watch, it can be done chemically. So each engraved logo is unique as it can be seen in <figref idrefs="f0005">Figure 10</figref>. 101 is a part of a chemically engraved logo of a back of a watch and 102 is the same part of the same logo on another watch of the same model. This is an example of unique fingerprint. Chemical etching is usually done on metallic surfaces but can also be applied to any other material.</p><heading id="h0012">• Microstructure of stamped material</heading><p id="p0028" num="0028">The back of the watch can also be stamped instead of chemically engraved. For this kind of material, the field of view of the acquisition device should be much lower than in the preceding case for the same dpi. If the field of view is not little enough, it will only be possible to distinguish the stamp used to stamp the surface. But it is shown in <figref idrefs="f0009">Figure 20</figref> that with a sufficiently big ratio between the dpi and the field of view, it is possible to see differences between the two items. Here the field of view is about 0.4 x 0.6 mm and the dpi is 10'837. So the ratio is about 25'000. This is an example of unique fingerprint. Again, stamping is usually done on metallic material but it can also be done on any other material.</p><heading id="h0013">• Microstructure of brushed material</heading><p id="p0029" num="0029">Another standard surface finishing is brushing, typically on metallic surfaces (like watch case for instance) but brushing finish may also apply for many other materials. Again the ratio between the dpi and the field of view has to be high enough to see details. In <figref idrefs="f0010">Figure 21</figref> it is difficult to see the details to the naked eye because the brushing is very present. But the microstructures are here. It is shown in <figref idrefs="f0010">Figure 22</figref> that the cross-correlation is not damaged by the brushing. The peak is a bit stretched out but as there is no peak when two different items are compared, this is not a problem. This is an example of unique fingerprint. Brushing is often done on metallic surfaces but can be applied to any other material.<!-- EPO <DP n="16"> --></p><p id="p0030" num="0030">More generally any surface treatment or machining process resulting in noisy images or images with sufficient entropy may be used as a template for image retrieval. This includes in particular surface sanding, milling, spinning, drilling, etc...</p><heading id="h0014">• Microstructure of coating</heading><p id="p0031" num="0031">Another example of unique fingerprint is the case of coating, like the one on dials of watches. <figref idrefs="f0010">Figure 23</figref> shows the difference of microstructures of coating at about 10'000 dpi with a 1x1 mm field of view. Coating can be applied to any material.</p><heading id="h0015">• Microstructure of molded materials</heading><p id="p0032" num="0032">If a material is molded, (particularly if it is molded with a sanded mould which creates "sanded finish" appearance), the microstructure of each molded part will look similar. So if the dpi is chosen carefully, all the items that come out of a same mould will feature similar surface, whereas those who come out of some different moulds will look completely different. This is shown is <figref idrefs="f0011">Figure 24</figref>. 241 and 242 come out of the same mould and have the same microstructures whereas 243 comes out of another mould and has other microstructures. Pictures were taken at 2'400 dpi with a field of view of 5x5mm.An example of that is the case of cover of some containers. This is a typical example of microscopic fingerprint.</p><heading id="h0016">• Microstructure of ink deposit on non-porous materials</heading><p id="p0033" num="0033">If ink is deposited on a non porous material, for example glazed paper, each drop has its own shape and location. Labels are taken as an example. A label will be the same than all the other labels that are printed with the same printer on the same position of the offset sheet. On the contrary, a label printed by another printer or in another position of the offset sheet will look different. This is shown in <figref idrefs="f0011">Figure 25</figref>. 251 and 252</p><p id="p0034" num="0034">are printed with the same printer and the same position on the offset sheet. 253 is printed with another printer. This is again an example of microscopic fingerprint.</p><p id="p0035" num="0035">At the extreme, this technology can be extended by reducing the dpi in order to check if the overall graphical design of a box matches with the original design. This approach is for instance applicable<!-- EPO <DP n="17"> --> to fake medicines that are sold on the Internet. This is a particular example of macroscopic fingerprint.</p><heading id="h0017"><b>IMAGE</b> RECORDING</heading><heading id="h0018">GENERAL STRATEGY</heading><p id="p0036" num="0036">First of all, a specific area has to be defined; the same area will be used for recording and future comparisons. The location of this area is optimal when its microstructures are uniformly spread out the image. Such an area can be retrieved automatically. Indeed, this area should match some specific mathematical requirements enabling to maximize detection rate and minimize false detections. In particular, images having statistics of uniform noise have proven to perform particularly well. Many approaches are available in the literature which enable the measurement of noise characteristics and may be used here. One example is to analyze the Fourier transform of the image, for instance white noise is known for having a flat spectrum. It is also possible to derive the optimal dpi resolution by analyzing with part of the Fourier spectrum characterizes a noise signal. This is shown in <figref idrefs="f0011">Figure 26</figref>. 262 is the uniform Fourier Transform of 261 which contains microstructures that are uniformly spread out the image. It is possible to take one or two images at two different levels of details for pre-processing steps purpose. This depends on the future processing and can be determined by the material, the shape and the application.</p><heading id="h0019">STORAGE ISSUE</heading><p id="p0037" num="0037">Once the microstructure has been digitized, the corresponding image has to be stored and will constitute the record set (typically accessed through database tools). The basic requirement is to obtain an image of the microstructures that contains a sufficient amount of details to enable a unique identification (knowing that the total amount data will also increase with the database size). This amount of details is of course directly linked to the image size and to the microstructure element sizes. A theoretical boundary of the minimum image size for a given database size may be computed in the particular case of black and white image. Indeed, for a 5x5 pixels image, the number of different possible images would be 2^25 ∼ 33 millions. This means that an ideal random<!-- EPO <DP n="18"> --> black and white structure could be uniquely identified in a database of 33 millions reference images. In practice much larger images (up to a size of 100 times more in each dimension) have to be used and database size may become an issue.</p><p id="p0038" num="0038">Various lossy compression schemes may be used to decrease the volume of the image database. Indeed, even though such compression alters the image, experiments show that this image matching can be performed successfully even for high compression ratios (compression may be performed on both the reference and the tested image or only on the reference image). For instance, many experiments have shown that compression ratios of 50 to 100 can be applied using for instance compression scheme based on the DCT (Discrete Cosine Transform). Therefore, a 100 by 100 pixels grayscale image, which represents 10 kilobytes, can be compressed down to 0.1 kilobyte. For storing scans of 10 millions of items, hard disk capacity of 1 gigabyte is therefore sufficient (similarly 1000 by 1000 pixels images would require 100 gigabyte of space, which is really reasonable). The use of wavelet compression may also be useful, as it would benefit to the image retrieval task. Indeed the image retrieval can then be hierarchically performed on increasing wavelets frequencies of the images (thus speeding up the retrieval process for instance). Other information may also be stored in place or in complement of the scanned images. For instance, invariant features (image moments for example, statistical properties, etc), parameters related to contours, minutiae features or any other information able to speed up the retrieval process or increase the matching reliability.</p><heading id="h0020">LOCATION OF SNAPSHOT</heading><p id="p0039" num="0039">It should be noted that in the case of brand protection, it might be particularly interesting to exploit the microstructure of areas that are close to the logo (or any brand identification means). Indeed, parallel importers often try to destroy traceability information (like UV codes or datamatrix). They typically achieve this by scratching the surface or painting over the code. Surprisingly, doing so is often not illegal. However, altering the logo is illegal. (Moreover it clearly alters the product merchantability). Therefore, using microstructure of the logo or the underlying medium may help to protect from pirates alterations. Finally, the logo is a simple identifiable feature, which makes it<!-- EPO <DP n="19"> --> convenient for inspecting purposes (in case the inspection process explicitly requires imaging a given area of an item). This idea is not limited to the logo and also applies to any trademark, copyright protected design or, more generally, to any design protected by the law, printed on packages or documents.</p><heading id="h0021">IMAGE DETECTION</heading><heading id="h0022">GENERAL STRATEGY</heading><p id="p0040" num="0040">The general strategy is depicted in the schema of <figref idrefs="f0012">Figure 28</figref>. When the picture is taken, its position and rotation in respect to the original image is not known. The new coordinates x' and y' have to be deduced from the translation vector, the angle of rotation and the old x and y coordinates. This is illustrated in <figref idrefs="f0012">Figure 27</figref>. The rotation can be retrieved by a Fourier transform. The location can be retrieved by a 1 D projection for example. Then, masking (282) has to be computed, depending on the size of the field of view and on the size of the microstructures. After that all the pre-processing operations (283), such as flattening can be computed. Finally, the image matching (284) is performed. After image matching, a metric enables to decide that one or several images from the record set do actually match to a certain level. Ultimately, the number of images belonging to this matching set should be 1 (cardinality equal to singleton). Depending on the application, this image will identify a unique object (and any useful side information, typically by using a database access) or set of objects with common features. For instance, in the case of micro fingerprint applications, such common feature can be a mould identifier. Another example, for macro fingerprint applications, may be a genuine printed package.</p><heading id="h0023">ROTATION COMPENSATION</heading><p id="p0041" num="0041">The rotation angle can be found if the picture includes some anisotropic visual information which is identical for all items. For instance, if there is a line across the picture, it will be possible to use this information in order to exactly find the rotation angle. Of course this line will be a drawback for cross-correlation purposes. That is why it is possible to take different pictures from the item to verify, even at different resolutions. Each image can then be assigned to a specific operation.<!-- EPO <DP n="20"> --> Transform domains may be used to aid the extraction and characterization of anisotropic information. For instance, the Hough transform or the Fourier transform may be used. In the case of the Fourier transform, the spatial anisotropy of the image will result in a line in the modulus of the Fourier transform of this image. This is shown in <figref idrefs="f0005">Figure 11</figref>. 111 shows the Fourier transform and 112 shows the angle, which is a radial sum of the value of the Fourier Transform related to each angle. One solution for finding the main anisotropic direction is to compute the following equation: <maths id="math0001" num=""><math display="block"><mrow><mi>p</mi><mfenced><mi>θ</mi></mfenced><mo>=</mo><msubsup><mrow><mo>∫</mo></mrow><mn>0</mn><mi>R</mi></msubsup><mo>⁢</mo><mi>l</mi><mfenced separators=","><mi>r</mi><mo>⁢</mo><mi>θ</mi></mfenced><mn>.</mn><mi mathvariant="italic">dr</mi></mrow></math><img id="ib0001" file="imgb0001.tif" wi="36" he="10" img-content="math" img-format="tif"/></maths> where l(r,theta) is the value of the modulus of the Fourier transform at the polar coordinates r and theta, l() the modulus of the Fourier transform, and p() is the value of the accumulated modules for a given angle (112).</p><p id="p0042" num="0042">This angle is actually determined with a 180° accuracy because of Fourier transform properties. Moreover, the spatial anisotropy of the image may contain several main directions (for instance a square contains two main direction which are perpendicular) which results in different candidate angles. The right angle can be determined by testing each of the possible angles. When the spatial anisotropy contains only one main direction, this direction is perpendicular to the angle found by the sum over the axes. That is why, in <figref idrefs="f0005">Figure 11</figref>, the sum is done over an angle "a" in 111 and the result is displayed for an angle "a+90". A testing procedure consists in cross-correlation with a reference image.</p><p id="p0043" num="0043">It should be noted that the image used for rotation detection (and the corresponding reference image) may be taken at resolution (dpi) and at a location that is different from the image used to characterize the microstructure of a surface. Finally the angle value can be more precisely determined by a trial error procedure around the angle previously found. For instance, it is possible to iterate between -1 to +1 degrees by steps 0.1 degrees, computing the SNR for each angle, and keep the angle that results in the best SNR.</p><p id="p0044" num="0044">Once the rotation angle is known, it is easy to retrieve the location of the specific pattern to cross-correlate. In fact, it could be possible to store in the database the coordinates and size of the<!-- EPO <DP n="21"> --> pattern relative to a certain angle. In <figref idrefs="f0012">Figure 27</figref>, x and y are stored in the database. X' and y' can be retrieved easily once the displacement and rotation is known.</p><p id="p0045" num="0045">It is also possible to adopt a totally different strategy that avoids computing the rotation angle: the basic idea consists in taking a circular shape around a point of interest and unwarping to a rectangular shape. <figref idrefs="f0016">Figure 32</figref> describes this process. 321 is the circular donut around a point of interest that has to be cut. The cut is done in AB. A is the origin and B is the end of the new image. The circular shape is then mapped (or unwarped) on a rectangular (322) shape using standard image interpolation methods. Such image can be compared (for instance using cross-correlation) with a template image that has been generated using the same process. The location of cross-correlation peak will vary with the rotation angle, but the SNR value will not be affected. Therefore this technique enables to detect matching images without the need for a prior compensation in rotation.</p><heading id="h0024">TRANSLATION COMPENSATION</heading><p id="p0046" num="0046">A general approach to compensate for translation is to use image that include feature points. In practice, one approach is to acquire a low resolution image of the object. The cross-correlation of this image with a recorded template (that will be unique for the whole database) enables to find exactly the X/Y position of the snapshot and therefore to determine the location of the region of interest that should be acquired at higher resolution.</p><heading id="h0025">PREPROCESSING [CDV1]</heading><p id="p0047" num="0047">The cross-correlation is typically computed on flattened images. One way to do flattening is to do a mathematical operation that consists in taking the difference between an image and its frequency low-passed version. The goal of this operation is to remove macroscopic color variations across the image and which are not significant, like lighting variations for instance. In particular enables to set all the borders of the image to the same value, which avoid border effects during a cross-correlation based on Fourier Transform (FFT based correlation implicitly tiles the image, artificially creating border effects between tiles if image is not uniform). In <figref idrefs="f0013">Figure 29</figref>, the effect of flattening is shown. 291 and 293 are images that have not been flattened. 292 and 294 are the same images<!-- EPO <DP n="22"> --> after flattening. In this example, the cross-correlations are computed with a template image that should match with the image 293 but that should not match with the image 291. The cross-correlations for each image are shown on the right side. It can be seen that the cross-correlation image 295 and 296 show no correlation peak, which is normal. The image 297 does not show a clear cross-correlation peak although the image should normally match with the template. The cross-correlation of the flattened image 298 shows a clear cross-correlation peak.</p><p id="p0048" num="0048">As a rule of the thumb, when using a Gaussian blur as a low-pass filtering strategy for flattening, the blurring radius (in pixels) will typically have a value close to the microstructures size measured in pixels.</p><heading id="h0026">MASKING</heading><p id="p0049" num="0049">If the field of view has a size that implies that some non interesting details are visible, they should be masked. One possibility to do the masking is to put all the value that have not to be taken into account to the mean value of the image.</p><p id="p0050" num="0050">The importance of masking disturbing elements is shown in <figref idrefs="f0015">Figure 31</figref>. It is shown that, without masking, the cross-correlation (314) of a template (311) and another picture of the same item (312) is not better than the cross-correlation (315) of the template (311) with a picture of another item (313). Even worse, the cross-correlation (315) of the template (311) and the picture of the other item (313) has a good peak because of macroscopic cross-correlation. This kind of mismatching is a false-positive detection that must be absolutely avoided. It is shown that it is possible to prevent such mismatch by padding to the mean value the disturbing element. When the template padded (316) is cross-correlated with another picture of the same item padded (317), the peak of cross-correlation (319) is visible. When the template padded (316) is cross-correlated with a picture of another item (318), there is no more peak (3110) of cross-correlation. This example illustrates how a masking approach can help to avoid false-positive detection and also improve the detection rate. Such mask may be recorded in the database.<!-- EPO <DP n="23"> --></p><heading id="h0027">OVERVIEW OF MATCHING ALGORITHMS</heading><p id="p0051" num="0051">The image matching purpose is to define a metric which enables to decide if two images are similar. A perfect similarity can be characterized by a null Mean Square Error between two images and a matching metric will typically converge to a known value in this case. Image matching can be performed using cross-correlation or matching in transform domains (Hough or Fourier spaces for instance) possibly enhanced by log-polar transforms in order to be invariant with scale or rotation. It is also possible to use spatially transform domain in order to map the image in a way that is more efficient for matching purposes. For instance, it is possible to compute a 1 D profile corresponding to the sum of color intensity along each line and use such 1 D function in conjunction with 1 D signal matching algorithms for fast retrieval (possibly refined with a vertical profile). Another spatially transform domain was shown in previous section and illustrated in <figref idrefs="f0016">Figure 32</figref>. The so-called "minutiae" approach used in fingerprint matching can also be used. Its principle is to use only a limited number of localized feature points instead of using the whole image.</p><p id="p0052" num="0052">In the case where microstructure of printed area is used (like in <figref idrefs="f0004">Figure 8</figref>), it is also possible to use matching techniques based on contours of the printed shape. State of the art contour matching techniques may then be used as for instance Fourier descriptors or 1 D cross-correlation (the contour being converted to a 1 D signal).</p><p id="p0053" num="0053">Artificial neural networks may also be used in order to perform the image matching or the contour matching operation. More generally, let the image be described by a given set of parameters. Any classifier may be used to find the best match in a database. The choice of the best classifier will depend on the computational requirements, the image statistics, etc.</p><p id="p0054" num="0054">In order to help the image matching operation, the knowledge of the original design may also be used. For instance <figref idrefs="f0004">Figure 8</figref> corresponds to a letter which orientation, scale and spatial position on the item to verify is known. Therefore an automatic scanning system may be able to locate this letter with a low-resolution scan, then rescan the letter with a high resolution and finally compensate for the rotation.<!-- EPO <DP n="24"> --></p><heading id="h0028">MATCHING BY CROSS-CORRELATION</heading><p id="p0055" num="0055">The cross-correlation is particularly suitable for matching images which contain noise. Indeed, it can be used basically for any kind of uniform noise without special tuning or adaptations.</p><p id="p0056" num="0056">The equation used to compute it is: <maths id="math0002" num=""><math display="block"><mrow><msub><mi>φ</mi><mrow><mi>x</mi><mo>,</mo><mi>y</mi></mrow></msub><mfenced separators=","><mi>k</mi><mo>⁢</mo><mi>l</mi></mfenced><mo>=</mo><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi mathvariant="italic">kʹ</mi><mo>=</mo><mo>-</mo><mi>∞</mi></mrow><mi>∞</mi></munderover></mrow></mstyle><mrow><mrow><mstyle displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi mathvariant="italic">lʹ</mi><mo>=</mo><mo>-</mo><mi>∞</mi></mrow><mi>∞</mi></munderover></mrow></mstyle><mrow><mi>x</mi><mfenced separators=","><mi mathvariant="italic">kʹ</mi><mo>⁢</mo><mi mathvariant="italic">lʹ</mi></mfenced><mo>⁢</mo><mi>y</mi><mo>⁢</mo><mfenced separators=""><mi mathvariant="italic">kʹ</mi><mo>+</mo><mi>k</mi><mo>,</mo><mi mathvariant="italic">lʹ</mi><mo>+</mo><mi>l</mi></mfenced></mrow></mrow></mrow></mrow></mrow></math><img id="ib0002" file="imgb0002.tif" wi="67" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0057" num="0057">It should be noted that several variations of cross-correlations exist which can also perform efficiently in the case of microstructure. This is for instance the case of phase correlation and cross-correlation with special padding strategy. Indeed, in the above formula the indices k'+k or l'+l may exceed the image size in the finite case and a strategy has to be followed to define which values should be used in such cases. Some of these strategies include padding the image with values varying symmetrically or anti-symmetrically (left/right and up/down) across their borders, or padding with a fixed value (the mean value for instance).</p><p id="p0058" num="0058">A measure representing the matching quality between 2 images can be defined with: <maths id="math0003" num=""><math display="block"><mrow><mi>SNR</mi><mo>=</mo><mn>20</mn><mo>*</mo><mi>log</mi><mfenced separators=""><mi>max</mi><mo>/</mo><mi>mean</mi></mfenced></mrow></math><img id="ib0003" file="imgb0003.tif" wi="47" he="6" img-content="math" img-format="tif"/></maths></p><p id="p0059" num="0059">This value characterizes the signal to noise ratio (SNR) of the cross-correlation image and is measured in decibels (dB). When several cross-correlations are computed (using several images of the same area or from different areas), the SNR can be very significantly increased by the multiplication of two cross-correlations aligned on their peaks. It is also possible to take morphological criteria into account, such as opening and closing operations on the cross-correlation image.</p><p id="p0060" num="0060">It has to be noted that the cross-correlation is robust against some modifications of the item. In particular it is robust against adding adhesive or static layer, adding dust, damaging by scratching and all other damage that let up to half of the information. It also has to be noticed that this method is robust throughout glasses, even watch glass, flat or convex, with or without anti-reflective coating on it.</p><p id="p0061" num="0061">The size in pixel of the images to cross-correlate as well as their dpi has to be chosen depending on the size and the number of the microstructures.<!-- EPO <DP n="25"> --></p><p id="p0062" num="0062">According to the invention, in order to speed up the detection process, use is made of downsampled versions of the templates. For instance if the image size is 1024x1024 and if there are 10'000'000 items in the database, performing all cross-correlations with all template may take a significant amount of time (up to 1 hour in some cases). A detection strategy consists in performing the detection in several stages. A first stage is performed with downsampled versions of the snapshot and template images and then the next stage use larger versions of the snapshots and templates. This is illustrated by diagram of <figref idrefs="f0014">Figure 30</figref>: cross-correlations are first computed with a set of X0 templates using an image size of 2<sup>n</sup> x 2<sup>n</sup> pixels (the same method may of course be used for non square images or non integer power of 2 image sizes). A number X12 of cross-correlation images have an SNR over a given threshold t1 and are then selected as candidates for a second test with larger image size 2<sup>n+1</sup>. The same procedure continues with threshold t2 and with increasing image sizes and thresholds until the original image size 2<sup>n+x</sup> is reached resulting in one unique candidate Xx2 = 1 which corresponds to the snapshot. Such strategy is not limited to the case of cross-correlation and can potentially be applied with any matching metric.</p><p id="p0063" num="0063">A practical example is given in order to illustrate this process. In an experiment n=3 and x=10 were used for cross-correlations of X0=10,000,000 templates with a test image. The following number of candidates was then obtained: X12=112539, X22=1234, X32=2, X42=1, X52=1.</p></description><claims mxw-id="PCLM90459454" lang="EN" load-source="patent-office"><!-- EPO <DP n="26"> --><claim id="c-en-0001" num="0001"><claim-text>Method to identify objects by uniquely using an optical image of the microstructure of their surface comprising a parameter settings phase, an acquisition phase and an identification phase, the parameter setting phase comprising the steps of:
<claim-text>- defining for a given set of objects, a resolution, a type of non-coherent light illumination and a location, called area of interest, having a random identifying microstructure,<br/>
the acquisition phase comprising the steps of , for each object to be later identified:</claim-text>
<claim-text>- digitally acquiring a two-dimensional template image of the object containing an identifying microstructure, said acquisition being based on the parameter settings and using sampling on a uniformly spaced orthogonal grid of at least one color component,</claim-text>
<claim-text>- preprocessing the image in order to remove macroscopic color variations by applying a flattening function on said template,</claim-text>
<claim-text>- storing in a reference database the preprocessed template image,<br/>
the identification phase comprising the steps of, for an object to be identified :</claim-text>
<claim-text>- digitally acquiring a two-dimensional snapshot image of the object to be identified and according to the parameters as the template image,</claim-text>
<claim-text>- preprocessing the said snapshot image by applying a flattening function in order to remove macroscopic color variations,</claim-text>
<claim-text>- cross-correlating the 2D flattened snapshot image with the flattened template stored in the reference database regardless of the relative position in translation, and thus identifying the object by finding the best corresponding template which signal to noise ratio value of said cross-correlation is above a predefined threshold.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>Method of claim 1, <b>characterized in that</b>, it comprises the steps of, during the acquisition phase :
<claim-text>- storing at least one downsampled template version of the preprocessed template image in the reference database with the preprocessed template image,<br/>
during the identification phase :</claim-text>
<claim-text>- generating at least one downsampled version of the flattened snapshot image with resolution according to the resolution during the acquisition phase,</claim-text>
<claim-text>- cross-correlating the 2D downsampled version of the flattened snapshot image with the corresponding downsampled template versions stored in the reference database regardless of the<!-- EPO <DP n="27"> --> relative position in translation, and selecting template versions according to the value of the signal to noise ratio of said cross-correlation images,</claim-text>
<claim-text>- cross-correlating the 2D flattened snapshot image with the flattened template stored in the reference database for the selected template versions.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>Method of claim 1, <b>characterized in that</b>, it comprises the steps of, during the acquisition phase :
<claim-text>- storing at least two downsampled template version having two resolutions of the preprocessed template image in the reference database with the preprocessed template image,<br/>
during the identification phase :</claim-text>
<claim-text>- generating at least two downsampled versions of the flattened snapshot image with resolutions according to the resolutions during the acquisitions phase,</claim-text>
<claim-text>- cross-correlating the 2D most downsampled version of the flattened snapshot image with the corresponding downsampled templates version stored in the reference database regardless of the relative position in translation, and selecting a set of templates according to the value of the signal to noise ratio of said cross-correlation images,</claim-text>
<claim-text>- for the selected templates, cross-correlating the 2D downsampled version of next resolution level of the flattened snapshot image with the downsampled versions of same resolution level of flattened template stored in the reference database which have been chosen in previous stage regardless of the relative position in translation, and selecting a set of templates according to the value of the signal to noise ratio of said cross-correlation images,</claim-text>
<claim-text>- repeating previous stage for all available downsampled resolutions.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>Method of any of the claims 1 to 3, <b>characterized in that</b> in the identification phase a rotation compensation is applied to the snapshot image prior to computing the cross-correlation.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>Method of claim 4, <b>characterized in that</b> the rotation compensation is achieved by acquiring another image of the object and applying a Fourier transform to the said image in order to measure anisotropic information and use it to compute the rotation compensation angle,</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>Method of any of the claims 1 to 5, <b>characterized in that</b> the parameter settings phase and the identification phase are modified as follows:
<claim-text>- the parameter settings phase comprise an additional step consisting in defining for a given set of objects at least one visual feature whose distance to the X/Y position of the region of interest is known,</claim-text>
<claim-text>- creating a mask image by acquiring a two-dimensional image of feature points,<br/>
the identification phase comprising preliminary steps of :<!-- EPO <DP n="28"> --></claim-text>
<claim-text>- digitally acquiring a two-dimensional image of the feature points of the object,</claim-text>
<claim-text>- cross-correlating the acquired image with mask image in order to retrieve the location of the region of interest where the snapshot image will be acquired.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>Method of claims 1 to 6, <b>characterized in that</b> the template identified can serve to authenticate a plurality of objects having the same microstructure.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>Method of claims 1 to 7, <b>characterized in that</b> no template identified allows detecting a counterfeited object.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>Method of claims 1 to 8, <b>characterized in that</b> the parameter settings, acquisition and identification phases are modified as follow in order to successfully match corresponding template and snapshot images having different angles of rotation:
<claim-text>the parameter settings phase having an additional step of defining the shape and location of a circular donut inside the region of interest,</claim-text>
<claim-text>the acquisition phase comprising the steps of :
<claim-text>- extracting from the acquired image the circular donut region,</claim-text>
<claim-text>- unwarping the donut in a rectangular shape in order to define the template image,</claim-text></claim-text>
<claim-text>the identification phase comprising the steps of:
<claim-text>- extracting from the acquired image the circular donut region,</claim-text>
<claim-text>- unwarping the donut in a rectangular shape in order to define the snapshot image.</claim-text></claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>Method of any of the previous claims, wherein the acquisition phase is carried out by a mobile phone with integrated camera.</claim-text></claim></claims><drawings mxw-id="PDW20422181" load-source="patent-office"><!-- EPO <DP n="29"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="191" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="125" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="125" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0004" num="7,8,9"><img id="if0004" file="imgf0004.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0005" num="10,11,12"><img id="if0005" file="imgf0005.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0006" num="13,14"><img id="if0006" file="imgf0006.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0007" num="15,16"><img id="if0007" file="imgf0007.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0008" num="17,18"><img id="if0008" file="imgf0008.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0009" num="19,20"><img id="if0009" file="imgf0009.tif" wi="165" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0010" num="21,22,23"><img id="if0010" file="imgf0010.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0011" num="24,25,26"><img id="if0011" file="imgf0011.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0012" num="27,28"><img id="if0012" file="imgf0012.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0013" num="29"><img id="if0013" file="imgf0013.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0014" num="30"><img id="if0014" file="imgf0014.tif" wi="165" he="138" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0015" num="31"><img id="if0015" file="imgf0015.tif" wi="165" he="222" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0016" num="32"><img id="if0016" file="imgf0016.tif" wi="165" he="83" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="160" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
