<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960857-A1" country="EP" doc-number="2960857" kind="A1" date="20151230" family-id="51843369" file-reference-id="313851" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451824" ucid="EP-2960857-A1"><document-id><country>EP</country><doc-number>2960857</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14791807-A" is-representative="YES"><document-id mxw-id="PAPP193866616" load-source="patent-office" format="original"><country>EP</country><doc-number>14791807.2</doc-number><date>20140313</date><lang>JA</lang></document-id><document-id mxw-id="PAPP193866617" load-source="docdb" format="epo"><country>EP</country><doc-number>14791807</doc-number><kind>A</kind><date>20140313</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028228" ucid="JP-2013095430-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2013095430</doc-number><kind>A</kind><date>20130430</date></document-id></priority-claim><priority-claim mxw-id="PPC162033677" ucid="JP-2014056711-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014056711</doc-number><kind>W</kind><date>20140313</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1915427877" load-source="docdb">G06T   3/00        20060101AFI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915429752" load-source="docdb">G06T   3/40        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915429863" load-source="docdb">H04N   5/225       20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915429988" load-source="docdb">H04N   5/77        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915430073" load-source="docdb">G06T   1/00        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915430109" load-source="docdb">H04N   1/387       20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915432018" load-source="docdb">H04N 101/00        20060101ALN20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915433012" load-source="docdb">H04N   5/232       20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915435658" load-source="docdb">H04N   5/92        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915436360" load-source="docdb">H04N   9/82        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915437206" load-source="docdb">H04N   9/804       20060101ALI20160725BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1730488755" load-source="docdb" scheme="CPC">G06T   3/0012      20130101 LI20171121BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1734634211" load-source="docdb" scheme="CPC">H04N   1/3876      20130101 LI20171104BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1734635891" load-source="docdb" scheme="CPC">H04N   5/772       20130101 LI20171104BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1734638536" load-source="docdb" scheme="CPC">H04N   9/8227      20130101 LI20171104BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1734640992" load-source="docdb" scheme="CPC">H04N   9/8047      20130101 LI20171104BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962082635" load-source="docdb" scheme="CPC">H04N   5/23293     20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962083412" load-source="docdb" scheme="CPC">H04N   5/2621      20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962089782" load-source="docdb" scheme="CPC">H04N   5/23238     20130101 FI20160311BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962091354" load-source="docdb" scheme="CPC">G06T  11/60        20130101 LI20160310BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546938" lang="DE" load-source="patent-office">BILDVERARBEITUNGSVORRICHTUNG, BILDVERARBEITUNGSVERFAHREN UND PROGRAMM</invention-title><invention-title mxw-id="PT165546939" lang="EN" load-source="patent-office">IMAGE PROCESSING DEVICE, IMAGE PROCESSING METHOD AND PROGRAM</invention-title><invention-title mxw-id="PT165546940" lang="FR" load-source="patent-office">DISPOSITIF DE TRAITEMENT D'IMAGE, PROCÉDÉ DE TRAITEMENT D'IMAGE ET PROGRAMME</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103319247" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SONY CORP</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103343853" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SONY CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR1101653476" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Sony Corporation</last-name><iid>100830309</iid><address><street>1-7-1 Konan Minato-ku</street><city>Tokyo 108-0075</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103313717" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KIMURA ATSUSHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103335610" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KIMURA, ATSUSHI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101651386" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KIMURA, ATSUSHI</last-name><address><street>c/o Sony Corporation 1-7-1 Konan Minato-ku</street><city>Tokyo 108-0075</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101646200" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>D Young &amp; Co LLP</last-name><iid>101533551</iid><address><street>120 Holborn</street><city>London EC1N 2DY</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2014056711-W"><document-id><country>JP</country><doc-number>2014056711</doc-number><kind>W</kind><date>20140313</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014178233-A1"><document-id><country>WO</country><doc-number>2014178233</doc-number><kind>A1</kind><date>20141106</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660691275" load-source="docdb">AL</country><country mxw-id="DS660693361" load-source="docdb">AT</country><country mxw-id="DS660691277" load-source="docdb">BE</country><country mxw-id="DS660615121" load-source="docdb">BG</country><country mxw-id="DS660615503" load-source="docdb">CH</country><country mxw-id="DS660693481" load-source="docdb">CY</country><country mxw-id="DS660693362" load-source="docdb">CZ</country><country mxw-id="DS660702136" load-source="docdb">DE</country><country mxw-id="DS660693482" load-source="docdb">DK</country><country mxw-id="DS660693487" load-source="docdb">EE</country><country mxw-id="DS660785235" load-source="docdb">ES</country><country mxw-id="DS660615122" load-source="docdb">FI</country><country mxw-id="DS660615131" load-source="docdb">FR</country><country mxw-id="DS660691278" load-source="docdb">GB</country><country mxw-id="DS660693488" load-source="docdb">GR</country><country mxw-id="DS660691291" load-source="docdb">HR</country><country mxw-id="DS660693367" load-source="docdb">HU</country><country mxw-id="DS660615504" load-source="docdb">IE</country><country mxw-id="DS660691292" load-source="docdb">IS</country><country mxw-id="DS660615132" load-source="docdb">IT</country><country mxw-id="DS660693489" load-source="docdb">LI</country><country mxw-id="DS660702137" load-source="docdb">LT</country><country mxw-id="DS660693368" load-source="docdb">LU</country><country mxw-id="DS660702138" load-source="docdb">LV</country><country mxw-id="DS660702155" load-source="docdb">MC</country><country mxw-id="DS660611215" load-source="docdb">MK</country><country mxw-id="DS660611216" load-source="docdb">MT</country><country mxw-id="DS660615133" load-source="docdb">NL</country><country mxw-id="DS660785236" load-source="docdb">NO</country><country mxw-id="DS660615134" load-source="docdb">PL</country><country mxw-id="DS660611217" load-source="docdb">PT</country><country mxw-id="DS660615139" load-source="docdb">RO</country><country mxw-id="DS660611218" load-source="docdb">RS</country><country mxw-id="DS660615140" load-source="docdb">SE</country><country mxw-id="DS660611227" load-source="docdb">SI</country><country mxw-id="DS660615505" load-source="docdb">SK</country><country mxw-id="DS660615506" load-source="docdb">SM</country><country mxw-id="DS660702157" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166480194" lang="EN" load-source="patent-office"><p id="pa01" num="0001">[Object] To generate display data for displaying a thumbnail image that offers better visibility for a panoramic image.</p><p id="pa02" num="0002">[Solution] Any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data is selected for displaying a thumbnail. In addition, display data for displaying a thumbnail is generated with any of the first thumbnail image data and the second thumbnail image data in accordance with the selection.<img id="iaf01" file="imgaf001.tif" wi="78" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166760006" lang="EN" source="EPO" load-source="docdb"><p>[Object] To generate display data for displaying a thumbnail image that offers better visibility for a panoramic image.  [Solution] Any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data is selected for displaying a thumbnail. In addition, display data for displaying a thumbnail is generated with any of the first thumbnail image data and the second thumbnail image data in accordance with the selection.</p></abstract><description mxw-id="PDES98404895" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">The present technology relates to an image processing device, an image processing method, and a program for implementing the image processing device and the image processing method. In particular, the present technology relates to image processing suited for displaying a thumbnail of panoramic image data.</p><heading id="h0002">Citation List</heading><heading id="h0003">Patent Literature</heading><p id="p0002" num="0002">Patent Literature 1: <patcit id="pcit0001" dnum="JP2012099906A"><text>JP 2012-99906A</text></patcit></p><heading id="h0004">Background Art</heading><p id="p0003" num="0003">For example, a user can acquire a large number of captured images (frame image data) while horizontally sweeping a camera, and acquire a so-called panoramic image by combining the acquired captured images.</p><p id="p0004" num="0004">Additionally, the wording "sweep" refers to an operation of an image capturing device to rotationally move in an image capturing direction in capturing an image in order to acquire pieces of frame image data for generating a panoramic image. For example, if the image capturing direction is moved in the horizontal direction, the sweep direction refers to the horizontal direction.</p><p id="p0005" num="0005">Image capturing devices such as digital still cameras are configured to generate thumbnail images even for panoramic images as for general still images, and to list and display, for example, the generated thumbnail images.<!-- EPO <DP n="2"> --></p><p id="p0006" num="0006">A technique of displaying a thumbnail of a three dimensions (3D) image has been devised as described in Patent Literature 1 for displaying a thumbnail.</p><heading id="h0005">Summary of Invention</heading><heading id="h0006">Technical Problem</heading><p id="p0007" num="0007">The panoramic image is horizontally far longer (or vertically longer) than the general still image. Accordingly, a thumbnail image simply reduced (subjected to resolution conversion) while the image aspect ratio is maintained consequently diminishes the visibility of users considerably in some cases especially when a plurality of thumbnails are listed and displayed. However, a thumbnail image subjected to the resolution conversion certainly represents an entire panoramic image.</p><p id="p0008" num="0008">Meanwhile, the technique described in Patent Literature 1 for 3D thumbnail images can make thumbnail images easier to view even when the respective thumbnail images are listed and displayed. The 3D thumbnail image does not, however, represent the entire panoramic image directly, but it is necessary to exert display control such as rotating the 3D thumbnail image, resulting in a heavier processing load.</p><p id="p0009" num="0009">A thumbnail image easy for users to recognize depends on the ratio of height to width and size of a display screen or display area for a thumbnail image, the number of thumbnail images, and the like.</p><p id="p0010" num="0010">In view of such circumstances, an object of the present technology is to more appropriately present a thumbnail image for panoramic image data to a user.</p><heading id="h0007">Solution to Problem</heading><p id="p0011" num="0011">First, an image processing device according to the present technology includes: a thumbnail selecting section configured to select, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution<!-- EPO <DP n="3"> --> conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and a display data generating section configured to generate display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection of the thumbnail selecting section.</p><p id="p0012" num="0012">Accordingly, it is possible to display a thumbnail image with one of the first thumbnail image data subjected to the resolution conversion and second thumbnail image data subjected to the aspect ratio adjustment processing that is more appropriate in accordance with a variety of circumstances for displaying thumbnail image data for the panoramic image data.</p><p id="p0013" num="0013">Second, it is desirable that, in the image processing device according to the present technology, the display data generating section reads out, from a recording medium, any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section, and generates the display data with the read-out thumbnail image data.</p><p id="p0014" num="0014">This makes it possible to generate display data for display with the selected thumbnail image data.</p><p id="p0015" num="0015">Third, it is desirable that, in the image processing device according to the present technology, the display data generating section generates any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section with the panoramic image data, and generates display data for displaying a thumbnail with the generated thumbnail image data.</p><p id="p0016" num="0016">This also makes it possible to generate display data for display with the selected thumbnail image data.</p><p id="p0017" num="0017">Fourth, it is desirable that, in the image processing device according to the present technology, the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with an aspect ratio of a display area of a display device that supplies the display data.<!-- EPO <DP n="4"> --></p><p id="p0018" num="0018">The first thumbnail image data and the second thumbnail image data are selected in accordance with the aspect ratio of the display area, thereby making it possible to select one of the first thumbnail image data and the second thumbnail data that is easier to view in accordance with a circumstance of the display area.</p><p id="p0019" num="0019">Fifth, in the image processing device according to the present technology, the display area refers to an entire screen of the display device.</p><p id="p0020" num="0020">This is appropriate when a thumbnail image is displayed with the entire screen of the display device.</p><p id="p0021" num="0021">Sixth, in the image processing device according to the present technology, the display area refers to an area in a screen of the display device in which a thumbnail is displayed.</p><p id="p0022" num="0022">This is appropriate when a thumbnail image is displayed with a part of the screen of the display device.</p><p id="p0023" num="0023">Seventh, it is desirable that, in the image processing device according to the present technology, the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a size of a display area of a display device that supplies the display data.</p><p id="p0024" num="0024">Thumbnail images easy to view vary in accordance with the display area sizes, so that it is necessary to support such a situation.</p><p id="p0025" num="0025">Eighth, it is desirable that, in the image processing device according to the present technology, the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a number of pieces of thumbnail image data included in the display data.</p><p id="p0026" num="0026">If a plurality of thumbnail images are, for example, listed and displayed, thumbnail images easy to view vary in accordance with the number of thumbnail images. Accordingly, it is necessary to support such a situation.</p><p id="p0027" num="0027">An image processing method according to the present technology includes: a thumbnail selecting procedure of selecting, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic<!-- EPO <DP n="5"> --> image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and a display data generating procedure of generating display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection made in the thumbnail selecting procedure.</p><p id="p0028" num="0028">A program according to the present technology causes an operation processing device to execute processing in each procedure.</p><p id="p0029" num="0029">These make it possible to implement a device that selectively displays the first thumbnail image data subjected to the resolution conversion and the second thumbnail image data subjected to the aspect ratio adjustment processing for a single piece of panoramic image data.</p><heading id="h0008">Advantageous Effects of Invention</heading><p id="p0030" num="0030">According to the present technology, if first thumbnail image data subjected to resolution conversion and second thumbnail image data subjected to aspect ratio adjustment processing are selected to display a thumbnail image for panoramic image data, it is possible to display an appropriate thumbnail image in accordance with a circumstance for displaying a thumbnail image of the panoramic image data, and to advantageously improve a user's recognizability of the thumbnail.</p><heading id="h0009">Brief Description of Drawings</heading><p id="p0031" num="0031"><ul><li>[<figref idrefs="f0001">FIG. 1] FIG. 1</figref> is an explanatory diagram for describing that a panoramic image is captured in accordance with an embodiment of the present technology.</li><li>[<figref idrefs="f0002">FIG. 2] FIG. 2</figref> is an explanatory diagram of panoramic image combination according to an embodiment.</li><li>[<figref idrefs="f0003">FIG. 3] FIG. 3</figref> is an explanatory diagram of a panoramic image according to an embodiment.</li><li>[<figref idrefs="f0004">FIG. 4] FIG. 4</figref> is an explanatory diagram for describing that a thumbnail image is<!-- EPO <DP n="6"> --> displayed for a panoramic image in accordance with an embodiment.</li><li>[<figref idrefs="f0005">FIG. 5] FIG. 5</figref> is a block diagram of an image processing device according to an embodiment.</li><li>[<figref idrefs="f0006">FIG. 6] FIG. 6</figref> is a flowchart of processing performed by an image processing device according to an embodiment.</li><li>[<figref idrefs="f0007">FIG. 7] FIG. 7</figref> is a block diagram of an image capturing device according to an embodiment.</li><li>[<figref idrefs="f0008">FIG. 8] FIG. 8</figref> is an explanatory diagram of panoramic image generation processing performed by an image capturing device according to an embodiment.</li><li>[<figref idrefs="f0009">FIG. 9] FIG. 9</figref> is an explanatory diagram of thumbnail image generation processing performed by an image capturing device according to an embodiment.</li><li>[<figref idrefs="f0010">FIG. 10] FIG. 10</figref> is an explanatory diagram of a viewpoint position for generating a thumbnail image through columnar projection and spherical projection in accordance with an embodiment.</li><li>[<figref idrefs="f0011">FIG. 11] FIG. 11</figref> is an explanatory diagram of an aspect ratio adjustment thumbnail image according to an embodiment.</li><li>[<figref idrefs="f0012">FIG. 12] FIG. 12</figref> is an explanatory diagram of an aspect ratio adjustment thumbnail image according to an embodiment.</li><li>[<figref idrefs="f0013">FIG. 13] FIG. 13</figref> is a flowchart of a thumbnail generation processing example according to an embodiment.</li><li>[<figref idrefs="f0014">FIG. 14] FIG. 14</figref> is a flowchart of a thumbnail generation processing example according to an embodiment.</li><li>[<figref idrefs="f0015">FIG. 15] FIG. 15</figref> is a flowchart of a thumbnail generation processing example according to an embodiment.</li><li>[<figref idrefs="f0016">FIG. 16] FIG. 16</figref> is an explanatory diagram of a posture of an image capturing device determined in accordance with an embodiment.</li><li>[<figref idrefs="f0017">FIG. 17] FIG. 17</figref> is an explanatory diagram of an example in which thumbnail images are listed and displayed in accordance with an embodiment.</li><li>[<figref idrefs="f0018">FIG. 18] FIG. 18</figref> is an explanatory diagram of an example in which a single thumbnail image is displayed in accordance with an embodiment.</li><li>[<figref idrefs="f0019">FIG. 19] FIG. 19</figref> is an explanatory diagram of a display area determined in<!-- EPO <DP n="7"> --> accordance with an embodiment.</li><li>[<figref idrefs="f0020">FIG. 20] FIG. 20</figref> is a flowchart of a display processing example according to an embodiment.</li><li>[<figref idrefs="f0021">FIG. 21] FIG. 21</figref> is a flowchart of a display processing example according to an embodiment.</li><li>[<figref idrefs="f0022">FIG. 22] FIG. 22</figref> is a flowchart of a display processing example according to an embodiment.</li><li>[<figref idrefs="f0023">FIG. 23] FIG. 23</figref> is a flowchart of a display processing example according to an embodiment.</li><li>[<figref idrefs="f0024">FIG. 24] FIG. 24</figref> is a block diagram of a computer device according to an embodiment.</li></ul></p><heading id="h0010">Description of Embodiments</heading><p id="p0032" num="0032">Embodiments will be described below in the following order.</p><p id="p0033" num="0033">Examples of an image processing device, an image capturing device having the image processing device built therein, a computer device that functions as the image processing device, and a program will be described as the embodiments.
<ul><li>&lt;1. Overview of Panorama Combination and Reproduction&gt;</li><li>&lt;2. First Embodiment (Image Processing Device)&gt;</li><li>&lt;3. Second Embodiment (Image Capturing Device)&gt;</li><li>[3-1: Configuration of Image Capturing Device]</li><li>[3-2: Panorama Combination Processing]</li><li>[3-3: Thumbnail Image Generation and Type]</li><li>[3-4: Image Processing Example]</li><li>[3-5: Thumbnail Display Area]</li><li>[3-6: Thumbnail Display Processing Example]</li><li>&lt;4. Third Embodiment (Computer Device and Program)&gt;</li><li>&lt;5. Modifications&gt;</li></ul></p><heading id="h0011">&lt;1. Overview of Panorama Combination and Reproduction&gt;</heading><!-- EPO <DP n="8"> --><p id="p0034" num="0034">First of all, the overview of panorama combination will be described.</p><p id="p0035" num="0035">An image capturing device 50 according to an embodiment described below and recent general image capturing devices (digital still cameras) can generate a wide angle (up to 360 degrees) panoramic image by performing combination processing on a plurality of still images (frame image data) that a photographer has captured while rotating the image capturing device 50 around a certain rotation axis.</p><p id="p0036" num="0036"><figref idrefs="f0001">FIG. 1A</figref> illustrates the movement of the image capturing device 50 for capturing a panoramic image. Since a disparity between the background and the foreground makes the joint of combined images unnatural in the panoramic image, it is desirable to use a point specific to a lens referred to as nodal point, at which no disparity is observed, as the rotation center for capturing an image. The rotation of the image capturing device 50 for capturing a panoramic image is referred to as "sweep."</p><p id="p0037" num="0037"><figref idrefs="f0001">FIG. 1B</figref> is a schematic diagram illustrating that a plurality of still images acquired through a sweep of the image capturing device 50 are appropriately aligned.</p><p id="p0038" num="0038">This figure illustrates the respective captured still images in chronological order from the first captured image. That is to say, pieces of frame image data captured from time 0 to time (n-1) are referred to as pieces of frame image data FM#0, FM#1 ... FM#(n-1).</p><p id="p0039" num="0039">If a panoramic image is generated from n still images, combination processing is performed on a series of n pieces of frame image data FM#0 to FM#(n-1) consecutively captured as illustrated in the figure.</p><p id="p0040" num="0040">Aligning the respective pieces of frame image data generally results in slight movement not only in the sweep direction, but also in the direction vertical to the sweep direction. This is a discrepancy caused by a camera shake of a photographer to perform a sweep operation.</p><p id="p0041" num="0041">As illustrated in <figref idrefs="f0001">FIG. 1B</figref>, each piece of captured frame image data necessarily has to overlap with the adjacent piece of frame image data in part.<!-- EPO <DP n="9"> --> Accordingly, time intervals for the image capturing device 50 to capture pieces of frame image data and an upper limit of a photographer's sweep velocity have to be appropriately set.</p><p id="p0042" num="0042">A group of frame image data aligned in this way has a large number of overlapping parts, so that it is necessary to decide an area of each piece of frame image data to be used for a final panoramic image. In other words, this is the same as deciding a joint (seam) of images in panorama combination processing.</p><p id="p0043" num="0043"><figref idrefs="f0002">FIGS. 2A and 2B</figref> each illustrate an example of a seam SM.</p><p id="p0044" num="0044">A seam includes a straight line vertical to the sweep direction as illustrated in <figref idrefs="f0002">FIG. 2A</figref> and a non-straight line (such as a curve) as illustrated in <figref idrefs="f0002">FIG. 2B</figref>.</p><p id="p0045" num="0045">A seam SM0 represents a joint between pieces of frame image data FM#0 and FM#1, a seam SM1 represents a joint between pieces of frame image data FM#1 and FM#2, ... a seam SM(n-2) represents a joint between pieces of frame image data FM#(n-2) and FM#(n-1) in <figref idrefs="f0002">FIGS. 2A and 2B</figref>.</p><p id="p0046" num="0046">Additionally, if these seams SM0 to SM(n-2) are used as joints between combined adjacent images, shaded image areas in the respective pieces of frame image data are not used for a final panoramic image.</p><p id="p0047" num="0047">When panorama combination is conducted, blend processing is performed on an image area around a seam in some cases in order to improve the unnaturalness of the image around the seam.</p><p id="p0048" num="0048">Blend processing is widely performed on parts common to the respective pieces of frame image data to bond the respective pieces of frame image data on one hand. Each pixel contributing to a panoramic image is selected from the common parts on the other hand. In these cases, there is no clear joint, but such a wide bonded part will also be treated as a seam in the present description.</p><p id="p0049" num="0049">Deciding seams of the respective pieces of frame image data, bonding the respective pieces of frame image data by bonding the border areas or performing blend processing on the border areas, and finally trimming unnecessary parts in the<!-- EPO <DP n="10"> --> direction vertical to a sweep on the basis of the amount of a camera shake offer a wide angle panoramic image having the sweep direction as the longitudinal direction as illustrated in <figref idrefs="f0003">FIG. 3</figref>.</p><p id="p0050" num="0050"><figref idrefs="f0003">FIG. 3</figref> illustrates seams in vertical lines, and schematically illustrates that n pieces of frame image data FM#0 to FM#(n-1) are bonded at seams SM0 to SM(n-2) to generate a panoramic image.</p><p id="p0051" num="0051">A specific example of an operation performed by a user with the image capturing device 50 in order to acquire such a panoramic image will be described.</p><p id="p0052" num="0052">First of all, a user sets the image capturing device 50 to a panoramic image capturing mode, and further sets a maximum image capturing angle of view. A user can select, for example, 120 degrees, 180 degrees, and 360 degrees as the maximum image capturing angle of view. If a user selects 360 degrees, it is possible to capture a so-called whole circumference image including all the scenes around the user.</p><p id="p0053" num="0053">Next, a photographer presses down the shutter button of the image capturing device 50 to begin to capture a panoramic image, and performs a sweep operation. If a termination condition of panoramic image capturing is satisfied thereafter, panoramic image capturing is finished. For example, the termination conditions are as follows:
<ul><li>* A preset maximum image capturing angle of view is reached,</li><li>* A sweep operation performed by a user is stopped,</li><li>* A user presses down the shutter button again,</li><li>* A user lifts his or her finger from the shutter button (in the specifications that the shutter button remains pressed down while a panoramic image is being captured), and</li><li>* Some error occurs.</li></ul></p><p id="p0054" num="0054">The panorama combination processing is automatically started after image capturing is completed. The combination of a panoramic image is completed after<!-- EPO <DP n="11"> --> some time, and the panoramic image data is stored in a recording device.</p><p id="p0055" num="0055">In addition, thumbnail image data is generated from the panoramic image data, for example, by performing reduction processing such as resolution conversion, and stored in the recording device in association with the panoramic image data.</p><p id="p0056" num="0056">It is possible thereafter to display the panoramic image data in the same way as a general still image, and to list and display thumbnail images.</p><p id="p0057" num="0057"><figref idrefs="f0004">FIG. 4A</figref> illustrates an example in which a panoramic image is normally displayed on a display panel 105a of the image capturing device 50, and <figref idrefs="f0004">FIG. 4B</figref> illustrates an example in which a plurality of thumbnail images TM1 are listed and displayed.</p><p id="p0058" num="0058">A large number of the thumbnail images TM1 generated by performing the reduction processing such as resolution conversion are listed and displayed in the example of <figref idrefs="f0004">FIG. 4B</figref>, but the thumbnail images TM1 represent pieces of reduced and horizontally (or vertically) long panoramic image data arranged on a screen as illustrated in the figure. Accordingly, the visibility of the panoramic image is considerably diminished.</p><p id="p0059" num="0059">Image processing devices 1 and 2, the image capturing device 50, and a computer device 70 according to an embodiment discussed below thus use thumbnail images TM2 generated by performing the aspect ratio adjustment processing as illustrated in <figref idrefs="f0004">FIG. 4C</figref> to list and display thumbnail images. Although described below in detail, the thumbnail images TM2 subjected to the aspect ratio adjustment processing refer to the following:
<ul><li>* A thumbnail image generated by performing processing of rendering an image acquired by texture-mapping a panoramic image to a three-dimensional model of a projection surface of panoramic image data,</li><li>* A thumbnail image generated by performing processing of applying polar coordinate transformation to a panoramic image,</li><li>* A thumbnail image generated by performing processing of reducing a panoramic image by using a determination result of the importance of a pixel in the panoramic image, and<!-- EPO <DP n="12"> --></li><li>* A thumbnail image generated by cutting out (trimming) a part of a panoramic image.</li></ul></p><p id="p0060" num="0060">These thumbnail images TM2 generated by performing the aspect ratio adjustment processing have aspect ratios different from the aspect ratio of the original panoramic image data, and will be generically referred to as "aspect ratio adjustment thumbnail images."</p><p id="p0061" num="0061">Meanwhile, the thumbnail images TM 1 generated by applying the resolution conversion will be referred to as "normal thumbnail images" to be distinguished from the thumbnail images TM2.</p><p id="p0062" num="0062">Additionally, the reference numeral TM2 will also be used, and image data for displaying an aspect ratio adjustment thumbnail image will be referred to as "aspect ratio adjustment thumbnail image data TM2" for convenience of description. In the same way, the reference numeral TM1 will also be used, and image data for displaying a normal thumbnail image will be referred to as "normal thumbnail image data TM1."</p><p id="p0063" num="0063"><figref idrefs="f0004">FIG. 4B</figref> illustrates that the visibility of the normal thumbnail image TM1 is diminished, but some circumstances of the display area (such as the aspect ratio of the screen, the posture of the display device, the display area size, and the number of thumbnails to be listed and displayed) make the visibility of the normal thumbnail image TM1 satisfactory. The normal thumbnail image TM1 represents the simply reduced original panoramic image, and includes the entire image content of the original panoramic image.</p><p id="p0064" num="0064">To the contrary, the aspect ratio adjustment thumbnail image TM2 is acquired by adjusting the aspect ratio in order to improve the visibility, but does not apparently show the entire original panoramic image.</p><p id="p0065" num="0065">Accordingly, in a variety of situations, the normal thumbnail image TM1 is sometimes more suited for display, and at other times the aspect ratio adjustment thumbnail image TM2 is more suited for display.</p><p id="p0066" num="0066">According to the present embodiment, it is possible to use one of the normal<!-- EPO <DP n="13"> --> thumbnail image TM1 and the aspect ratio adjustment thumbnail image TM2 in accordance with a situation.</p><heading id="h0012">&lt;2. First Embodiment (Image Processing Device)&gt;</heading><p id="p0067" num="0067">Configuration examples of the image processing devices 1 and 2 according to an embodiment will be described.</p><p id="p0068" num="0068">The image processing device 1 generates both the normal thumbnail image TM1 and the aspect ratio adjustment thumbnail image TM2 from panoramic image data PD.</p><p id="p0069" num="0069">The image processing device 2 generates display data Dd by selectively using the normal thumbnail image TM1 and the aspect ratio adjustment thumbnail image TM2.</p><p id="p0070" num="0070">First of all, <figref idrefs="f0005">FIG. 5A</figref> illustrates a panorama combining section 10 and the image processing device 1. The panorama combining section 10 and the image processing device 1 may be integrally installed in the same device or separately installed in different devices.</p><p id="p0071" num="0071">The panorama combining section 10 generates the panoramic image data PD from an input image group FMS. The input image group FMS refers to a series of pieces of frame image data FM acquired by a photographer capturing images while performing a sweep operation in a panoramic image capturing mode. The panorama combining section 10 uses the pieces of frame image data FM serving as the input image group FMS to generate the panoramic image data PD as described with reference to <figref idrefs="f0001 f0002 f0003">FIGS. 1 to 3</figref>.</p><p id="p0072" num="0072">The image processing device 1 includes a normal thumbnail generating section 1a and an aspect ratio adjustment thumbnail generating section 1b.</p><p id="p0073" num="0073">The normal thumbnail generating section 1a applies resolution conversion to the panoramic image data PD generated by combining a plurality of captured images to generate first thumbnail image data (normal thumbnail image data TM1).</p><p id="p0074" num="0074">The aspect ratio adjustment thumbnail generating section 1b performs the<!-- EPO <DP n="14"> --> aspect ratio adjustment processing on the panoramic image data PD to generate second thumbnail image data (aspect ratio adjustment thumbnail image data TM2).</p><p id="p0075" num="0075">The image processing device 1 is configured in this way to generate and output both the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 from the single piece of panoramic image data PD.</p><p id="p0076" num="0076"><figref idrefs="f0006">FIG. 6A</figref> illustrates an example of processing performed by the image processing device 1.</p><p id="p0077" num="0077">In step F1, the image processing device 1 obtains the panoramic image data PD from the panorama combining section 10.</p><p id="p0078" num="0078">In step F2, the image processing device 1 uses the function of the normal thumbnail generating section 1a to generate the normal thumbnail image data TM1.</p><p id="p0079" num="0079">In step F3, the image processing device 1 uses the function of the aspect ratio adjustment thumbnail generating section 1b to generate the aspect ratio adjustment thumbnail image data TM2.</p><p id="p0080" num="0080">In step F4, the image processing device 1 outputs the generated normal thumbnail image data TM1 and aspect ratio adjustment thumbnail image data TM2 for recording or transmission. For example, the pieces of thumbnail image data TM1 and TM2 are transmitted and output from a communication section not illustrated to an external device not illustrated, or supplied to a recording device not illustrated and the recording device records the pieces of thumbnail image data TM1 and TM2 in a recording medium.</p><p id="p0081" num="0081">If this image processing device 1 is used, it is possible to prepare the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 in a manner that an appropriate thumbnail image is displayed in a variety of circumstances for displaying the panoramic image data PD.</p><p id="p0082" num="0082"><figref idrefs="f0005">FIG. 5B</figref> illustrates a configuration example in which a storage section 11, the image processing device 2, and a display section 12 are included. The storage section 11, the image processing device 2, and the display section 12 are may be<!-- EPO <DP n="15"> --> integrally installed in the same device or separately installed in different devices.</p><p id="p0083" num="0083">The storage section 11 stores the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 generated by the image processing device 1 illustrated in <figref idrefs="f0005">FIG. 5A</figref>, for example, for the single piece of panorama image data PD.</p><p id="p0084" num="0084">The image processing device 2 includes a thumbnail selecting section 2a and a display data generating section 2b.</p><p id="p0085" num="0085">The thumbnail selecting section 2a performs processing of selecting which of the normal thumbnail image data TM1 generated by applying the resolution conversion to the panoramic image data PD generated by combining a plurality of captured images and the aspect ratio adjustment thumbnail image data TM2 generated by performing the aspect ratio adjustment processing on the panoramic image data PD is used for displaying a thumbnail.</p><p id="p0086" num="0086">The display data generating section 2b generates the display data Dd for displaying a thumbnail with any one of the normal thumbnail image data TM 1 and the aspect ratio adjustment thumbnail image data TM2 in accordance with the selection of the thumbnail selecting section 2a.</p><p id="p0087" num="0087">Specifically, the display data generating section 2b reads out, from the storage section 11, any one of the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 selected by the thumbnail selecting section 2a, and generates the display data Dd by using the read-out thumbnail image data.</p><p id="p0088" num="0088">The display section 21 includes a liquid crystal panel, an organic electroluminescence (EL) panel, a plasma display panel, a cathode ray tube (CRT), another display device and a display drive section for this display device, and performs various kinds of display.</p><p id="p0089" num="0089">This display section 21 is supplied with the display data Dd from the image processing device 2, and performs a display operation based on the display data Dd. For example, the display section 12 executes display including a thumbnail image on<!-- EPO <DP n="16"> --> the basis of the display data Dd. For example, a plurality of thumbnail images are listed and displayed, and a single thumbnail image is displayed.</p><p id="p0090" num="0090"><figref idrefs="f0006">FIG. 6B</figref> illustrates an example of processing performed by the image processing device 2.</p><p id="p0091" num="0091">In step F10, the image processing device 2 uses the function of the thumbnail selecting section 2a to check selection criterion information. For example, the image processing device 2 checks predetermined selection criterion information such as the posture (aspect ratio of a display area according to the posture) of the display device including the display section 12, the aspect ratio of the display screen, the display area size, and the number of thumbnails to be listed and displayed. In step F11, the normal thumbnail image data TM1 or the aspect ratio adjustment thumbnail image data TM2 is selected in accordance with the selection criterion information as a thumbnail image used for displaying the panoramic image data PD.</p><p id="p0092" num="0092">In step F12, the image processing device 2 reads out the thumbnail image data (any one of TM1 and TM2) selected in step F11 from the storage section 11. The image processing device 2 then uses the function of the display data generating section 2b to generate the display data Dd in step F13. That is to say, the image processing device 2 uses the thumbnail image data read out from the storage section 11 to generate the display data Dd.</p><p id="p0093" num="0093">In step F14, the image processing device 2 outputs the generated display data Dd to the display section 12.</p><p id="p0094" num="0094">Accordingly, it is possible to display a thumbnail image with one of the first thumbnail image data subjected to the resolution conversion and second thumbnail image data subjected to the aspect ratio adjustment processing that is more appropriate in accordance with a variety of circumstances for displaying thumbnail image data for the panoramic image data.</p><p id="p0095" num="0095">That is to say, if the thumbnail selecting section 2a selects any one of the first thumbnail image data and the second thumbnail image data in accordance with<!-- EPO <DP n="17"> --> the posture (aspect ratio of the display area according to the posture) of the display device including the display section 12, the aspect ratio of the display screen, the aspect ratio of the display area, the display area size, the number of thumbnails to be listed and displayed that serve as the selection criterion information, it is possible to display a thumbnail suited for a display situation.</p><p id="p0096" num="0096">In this case, if the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 generated by the image processing device 1 as illustrated in <figref idrefs="f0005">FIG. 5B</figref> have been stored in the storage section 11, the display data generating section 2b only has to read out the selected thumbnail image data, resulting in a lighter processing load on the image processing device 2.</p><p id="p0097" num="0097">As illustrated in <figref idrefs="f0005">FIG. 5B, FIG. 5C</figref> illustrates a configuration example in which the storage section 11, the image processing device 2, and the display section 12 are included. However, let us assume that the panoramic image data PD is stored in the storage section 11.</p><p id="p0098" num="0098">The thumbnail selecting section 2a operates in the same way in the image processing device 2, but the display data generating section 2b generates any one of the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 selected by the thumbnail selecting section 2a by using the panoramic image data PD, and generates the display data Dd for displaying a thumbnail by using the generated thumbnail image data.</p><p id="p0099" num="0099"><figref idrefs="f0006">FIG. 6C</figref> illustrates an example of processing performed by the image processing device 2 in this case.</p><p id="p0100" num="0100">In step F20, the image processing device 2 uses the function of the thumbnail selecting section 2a to check selection criterion information. In step F21, the normal thumbnail image data TM1 or the aspect ratio adjustment thumbnail image data TM2 is selected in accordance with the selection criterion information as a thumbnail image used for displaying the panoramic image data PD.</p><p id="p0101" num="0101">In step F22, the image processing device 2 uses the function of the display data generating section 2b to generate the thumbnail image data (any one of TM 1 and<!-- EPO <DP n="18"> --> TM2) selected in step F21. That is to say, the image processing device 2 reads out the panoramic image data PD from the storage section 11, performs any one of the resolution conversion processing and the aspect ratio adjustment processing on the panoramic image data PD, and generates the thumbnail image data (any one of TM1 and TM2). The image processing device 2 uses the thumbnail image data generated in this way to generate the display data Dd in step F23.</p><p id="p0102" num="0102">In step F24, the image processing device 2 outputs the generated display data Dd to the display section 12.</p><p id="p0103" num="0103">This configuration makes it possible to display a thumbnail suited for a display situation even if the image processing device 1 illustrated in <figref idrefs="f0005">FIG. 5A</figref> does not generate the two types of thumbnail image data TM1 and TM2.</p><p id="p0104" num="0104">Additionally, the image processing device 1 and the image processing device 2 illustrated in <figref idrefs="f0005">FIG. 5</figref> are configured not only as a single device, but may also be built in, for example, a digital still camera, a video camera, a mobile phone, a computer device, a portable information processing device, an image editing device, an image reproducing device, an image recording device, or the like.</p><p id="p0105" num="0105">For example, if a cloud computing system is used, it is conceivable that the image processing device 1 and the image processing device 2 are not devices used by users, but are installed on a network.</p><heading id="h0013">&lt;3. Second Embodiment (Image Capturing Device)&gt;</heading><heading id="h0014">[3-1: Configuration of Image Capturing Device]</heading><p id="p0106" num="0106">Next, an image capturing device 50 including structural elements corresponding to the image processing devices 1 and 2 will be described as a second embodiment.</p><p id="p0107" num="0107"><figref idrefs="f0007">FIG. 7</figref> illustrates a configuration example of the image capturing device 50.</p><p id="p0108" num="0108">The image capturing device 50 includes a lens unit 100, an image sensor 101, an image processing section 102, a graphics processing section 103, a recording device section 104, a display section 105, a communication section 106, a storage<!-- EPO <DP n="19"> --> section 107, a control section 108, an operation section 109, and a sensor section 110.</p><p id="p0109" num="0109">The image processing section 102, the graphics processing section 103, the recording device section 104, the display section 105, the communication section 106, the storage section 107, the control section 108, the operation section 109, and the sensor section 110 are connected to each other via a bus 111, and image data, a control signal and the like are exchanged therebetween.</p><p id="p0110" num="0110">The lens unit 100 collects an optical image of an object. The lens unit 100 includes a mechanism of adjusting a focal distance, an object distance, a diaphragm, and the like in accordance with an instruction from the control section 103 in a manner that an appropriate image can be acquired. The lens unit 100 further includes an image stabilizing mechanism for optically preventing an image from being blurred.</p><p id="p0111" num="0111">The image sensor 101 photoelectrically converts an optical image collected by the lens unit 100 into an electrical signal. Specifically, the image sensor 101 is implemented by a charge coupled device (CCD) image sensor, a complementary metal oxide semiconductor (CMOS) image sensor, or the like.</p><p id="p0112" num="0112">The image processing section 102 includes a sampling circuit that samples an electrical signal from the image sensor 101, an A/D conversion circuit that converts an analog signal into a digital signal, and an image processing circuit that performs predetermined image processing on a digital signal. This image processing section 102 herein performs processing of combining a panorama image and processing of generating thumbnail image data (TM1 and TM2) in addition to processing of acquiring frame image data captured by the image sensor 101.</p><p id="p0113" num="0113">This image processing section 102 includes not only a dedicated hardware circuit, but also a central processing unit (CPU) and a digital signal processor (DSP), and can perform software processing to support flexible image processing.</p><p id="p0114" num="0114">The graphics processing section 103 is hardware for generating 2D and 3D<!-- EPO <DP n="20"> --> graphics at high speed, and is generally referred to as graphics processing unit (GPU). The GPU includes not only a hardware circuit dedicated to a specific function, but also a programmable processor, and can perform flexible graphics processing. The characteristics of the programmable processor allows the computing performance of the GPU to be used for purposes other than graphics, and the use of the GPU in this way is generally referred to as general purpose computing on GPU (GPGPU).</p><p id="p0115" num="0115">The recording device 104 includes recording media such as semiconductor memory including flash memory, a magnetic disk, an optical disc and a magnetooptical disk, and a recording and reproducing system circuit and mechanism for these recording media.</p><p id="p0116" num="0116">This recording device 104 records, in the recording medium, JPEG image data encoded by the image processing section 102 into the Joint Photographic Experts Group (JPEG) format and stored in the storage section 107 when the image capturing device 50 captures an image.</p><p id="p0117" num="0117">The recording device 104 reads out the JPEG image data saved in the recording medium when the JPEG image data is reproduced. The JPEG image data is read by the storage section 107, and the image processing section 102 performs decoding processing on the JPEG image data. The decoded image data can be displayed on the display section 105 or transmitted and output to an external device by the communication section 106.</p><p id="p0118" num="0118">The display section 105 includes a D/A conversion circuit that converts, into an analog, the image data processed by the image processing section 102 and stored in the storage section 107, a video encoder that encodes an image signal converted into an analog into a video signal in a format adapted to a downstream display device, and a display panel (display panel 105a illustrated in <figref idrefs="f0004">FIG. 4</figref>) that displays an image corresponding to the input video signal.</p><p id="p0119" num="0119">The display panel 105a is implemented, for example, by a liquid crystal display (LCD), an organic electroluminescence (EL) panel, or the like, and also has the function of a viewfinder.<!-- EPO <DP n="21"> --></p><p id="p0120" num="0120">The communication section 106 communicates with an external device and performs network communication. Specifically, the communication section 106 includes a mobile communication system referred to as 3G or 4G communication for a mobile phone system, and a module that performs wireless communication with a wireless local area network (LAN) supported by IEEE802.11 series or performs wired communication with a wired LAN, a universal serial bus (USB), or Thunderbolt. This makes it possible to exchange data with a device such as an external personal computer, a mobile phone, a smartphone and a tablet, and a variety of servers via the Internet.</p><p id="p0121" num="0121">Additionally, various examples of transmission paths for communication performed by the communication section 106 are possible, and both of a wireless transmission path with radio waves, infrared rays, or the like, and a wired transmission path with a cable connection may be, for example, used. Any signal format can also be used, and digital electrical signal communication, analog electrical signal communication, optical communication, or the like is possible.</p><p id="p0122" num="0122">The storage section 107 includes semiconductor memory such as dynamic random access memory (DRAM), and temporarily records the image data processed by the image processing section 102, and a control program and various kinds of data for the control section 108.</p><p id="p0123" num="0123">The control section 108 includes a CPU and a control program, and controls each section of the image capturing device 50. The control program in itself is actually stored in the memory section 105, and executed by the CPU.</p><p id="p0124" num="0124">Additionally, the processing (processing for generating a thumbnail and displaying a thumbnail) performed by the image processing devices 1 and 2 is executed by the control section 108, the image processing section 102, and the graphics processing section 103. That is to say, the structural elements corresponding to the image processing devices 1 and 2 are implemented by the control section 108, the image processing section 102, and the graphics processing<!-- EPO <DP n="22"> --> section 103 in an embodiment in which the image capturing device 50 is used.</p><p id="p0125" num="0125">The operation section 109 includes an input device such as a hardware key including a shutter button, an up/down/left/right arrow key, an enter key and a cancel key, an operation dial, a touch panel, and a zoom lever, detects an input operation of a photographer (user), and delivers the detected input operation to the control section 108. The control section 108 decides the operation of the image capturing device 50 in accordance with an input operation of a user, and exerts control in a manner that each section performs a necessary operation.</p><p id="p0126" num="0126">The sensor section 110 includes a gyro sensor, an acceleration sensor, a geomagnetic sensor and a global positioning system (GPS) sensor, and detects various kinds of information. These kinds of information are added to captured image data as metadata, and are further used for various kinds of image processing and control processing.</p><heading id="h0015">[3-2: Panorama Combination Processing]</heading><p id="p0127" num="0127">Next, the panorama combination processing performed by the image capturing device 50 will be described in detail.</p><p id="p0128" num="0128"><figref idrefs="f0008">FIG. 8</figref> illustrates processing performed by the image processing section 102 and the control section 108 for the panorama combination processing as a functional configuration, and processing (algorithm flow) executed in the functional configuration component.</p><p id="p0129" num="0129">As illustrated in the figure, pre-processing 200, image registration processing 201, moving object detection processing 202, detection and recognition processing 203, re-projection processing 204, seam decision processing 205, and stitch processing 208 are performed for the panorama combination processing.</p><p id="p0130" num="0130">Each processing will be described.</p><p id="p0131" num="0131">As described with reference to <figref idrefs="f0001">FIG. 1</figref>, the input image group FMS to be subjected to the pre-processing 200 represents pieces of frame image data FM#0, FM#1, FM#2 ... sequentially acquired while a photographer is capturing a<!-- EPO <DP n="23"> --> panoramic image with the image capturing device 50.</p><p id="p0132" num="0132">First of all, the panorama combining section 10 performs the pre-processing 200 for panorama combination on images (each piece of frame image data) captured through a photographer's panoramic image capturing operation. Additionally, let us here assume that the frame image data FM has been subjected to the same image processing as the image processing performed when normal images are captured.</p><p id="p0133" num="0133">The input image has been affected by an aberration based on the characteristics of the lens unit 100. In particular, the distortion aberration of the lens negatively affects the image registration processing 201, and decreases the accuracy of alignment. Furthermore, an artifact occurs around a seam in a combined panoramic image, so that the distortion aberration is corrected in this pre-processing 200. The correction of the distortion aberration advantageously increases the accuracy of the moving object detection processing 202 and the detection and recognition processing 203.</p><p id="p0134" num="0134">Next, the image registration processing 201, the moving object detection processing 202, and the detection and recognition processing 203 are performed on the frame image data subjected to the pre-processing 200.</p><p id="p0135" num="0135">It is necessary to convert pieces of frame image data into coordinates in a single coordinate system for panorama combination, and this single coordinate system will be referred to as panoramic coordinate system.</p><p id="p0136" num="0136">Two consecutive pieces of frame image data are input and aligned in the panorama coordinate system in the image registration processing 201. Information on the two pieces of frame image data acquired in the image registration processing 201 is merely a relationship between the coordinates of the two images. However, if one of the coordinate systems of images (e.g. coordinate system of the first piece of frame image data) is chosen and the chosen coordinate system is fixed as the panoramic coordinate system, the coordinate systems of all the pieces of frame image data can be converted into the panoramic coordinate system.</p><p id="p0137" num="0137">Specific processing performed in the image registration processing 201 is<!-- EPO <DP n="24"> --> roughly divided into two as follows:
<ol><li>1. Detecting local movement in an image, and</li><li>2. Obtaining the global movement of the entire image from the detected local movement information.</li></ol></p><p id="p0138" num="0138">In the processing 1, the following is generally used:
<ul><li>* Block matching, and</li><li>* Feature point extraction and feature point matching such as Harris, Hessian, SIFT, SURF, and FAST.</li></ul></p><p id="p0139" num="0139">In addition, the local vectors of the feature points of the image are obtained.</p><p id="p0140" num="0140">A local vector group obtained in the processing 1 is used as an input in the processing 2, and the following robust estimation techniques are used:
<ul><li>* Least square method,</li><li>* M-Estimator,</li><li>* Least median square (LMedS) method, and</li><li>* RANdom SAmple Consensus (RANSAC).</li></ul></p><p id="p0141" num="0141">An affine transformation matrix or a projection transformation matrix (homography) optimal for describing a relationship between the coordinate systems of two pieces of frame image data is obtained. These kinds of information will be herein referred to as image registration information.</p><p id="p0142" num="0142">Pieces of frame image data are combined as a characteristic of the panorama combination processing. Accordingly, a moving object in a captured scene causes a part of the moving object to be separated or blurred, resulting in image failure or degraded image quality. It is thus desirable to detect a moving object, and then decide a seam (joint) of the panorama avoiding the moving object.</p><p id="p0143" num="0143">Two or more consecutive pieces of frame image data are input, and a moving object is detected in the moving object detection processing 202. Specifically, for example, if a differential value between pixels of the two pieces of<!-- EPO <DP n="25"> --> frame image data that have been actually aligned on the basis of the image registration information acquired in the image registration processing 201 is greater than or equal to a given threshold, the pixels are determined as a moving object.</p><p id="p0144" num="0144">Alternatively, feature point information determined as an outlier in the robust estimation in the image registration processing 201 may be used to make a determination.</p><p id="p0145" num="0145">Positional information on a human face or body, an animal, or the like in the captured frame image data is detected in the detection and recognition processing 203. People and animals are quite likely to be moving objects. Even if people and animals are not moving, a panoramic seam decided thereon more frequently feels visually strange than a seam decided on other objects. Accordingly, it is desirable to decide a seam avoiding these objects. That is to say, the information acquired in this detection and recognition processing 203 is used for supplementing information from the moving object detection processing 202.</p><p id="p0146" num="0146">A seam is decided in the seam decision processing 207 discussed below on the basis of the information acquired in the moving object detection processing 202 and the detection and recognition processing 203.</p><p id="p0147" num="0147">All the pieces of frame image data are projected onto a single plane surface or a single curved surface such as a cylindrical surface and a spherical surface in the re-projection processing 204 on the basis of the image registration information acquired in the image registration processing 201. At the same time, projection processing is performed on the same plane surface or curved surface on the basis of the moving object information and the detection and recognition information. The projection surface may be automatically selected on the basis of an angle of view for capturing an image or the like, or may also be set in accordance with a user operation.</p><p id="p0148" num="0148">The re-projection processing 204 may be performed on the frame image data on the basis of the optimization of pixel processing as processing preceding the stitch processing 206 or a part of the stitch processing 206. The re-projection processing 204 may be simply performed prior to the image registration processing<!-- EPO <DP n="26"> --> 201 (e.g. as a part of the pre-processing 200). More simply, the re-projection processing 204 does not have to be performed, but may be treated as an approximation of cylindrical projection processing.</p><p id="p0149" num="0149">The image data from the re-projection processing 204, the image registration information from the image registration processing 201, the moving object information from the moving object detection processing 202, and the detection and recognition information from the detection and recognition processing 203 are used as inputs, and an appropriate seam SM (seams SM0 to SM(n-2) described with reference to <figref idrefs="f0002">FIGS. 2</figref> and <figref idrefs="f0003">3</figref>) that causes less failure in a panoramic image is decided in the seam decision processing 205.</p><p id="p0150" num="0150">First of all, a cost function for an overlapping area between adjacent pieces of frame image data is defined from the input information in the seam decision processing 205.</p><p id="p0151" num="0151">For example, the total value acquired by suitably weighting each pixel in the overlapping area in accordance with each of the moving object information from the moving object detection processing 202 and the detection and recognition information from the detection and recognition processing 203 is used as a function value.</p><p id="p0152" num="0152">In this case, a higher cost function value means that more objects such as moving objects and human bodies are present on the point. Accordingly, a set of points having lower cost function values are used as a seam in order to maximally prevent failure in a panoramic image.</p><p id="p0153" num="0153">If n images (pieces of frame image data) are used for panoramic image combination, there are n-1 overlapping areas. Accordingly, n-1 cost functions are defined. A combination in which these n-1 cost functions are minimized is thus obtained in order to choose optimal seams as the entire panoramic image. This is generally referred to as combinatorial optimization problem, and the following solutions are known:<!-- EPO <DP n="27"> -->
<ul><li>* Methods for obtaining an exact solution
<ul><li>Branch and bound</li><li>Memoization</li><li>Dynamic programming</li><li>Graph cut</li></ul></li><li>* Methods for obtaining an approximate solution
<ul><li>Local search (hill climbing)</li><li>Simulated annealing</li><li>Tabu search</li><li>Genetic algorithm</li></ul></li></ul></p><p id="p0154" num="0154">It is possible to obtain all the seams SM1 to SM(n-2) with any one of these methods.</p><p id="p0155" num="0155">All the seams SM1 to SM(n-2) decided in this way and the respective pieces of frame image data FM#0 to FM#(n-1) are used to combine a final panoramic image in the stitch processing 206.</p><p id="p0156" num="0156">Blend processing is performed on an area around the seam in order to improve the unnaturalness of the joint, while pixel values are simply copied for the other areas or the other areas are just re-sampled to the panorama coordinate system. In addition, all the images are bonded.</p><p id="p0157" num="0157">An unnecessary part of the combined image in the direction vertical to the sweep direction is finally trimmed on the basis of the amount of a camera shake, offering a wide angle panoramic image (panoramic image data PD) having the sweep direction as the long-side direction.</p><heading id="h0016">[3-3: Thumbnail Image Generation and Type]</heading><p id="p0158" num="0158">Next, the generation of thumbnail image data (TM1 and TM2) will be described.</p><p id="p0159" num="0159">Thumbnail image data for simply displaying a panoramic image at high speed or displaying a panoramic image at a reduced size is created for the panoramic image data PD generated as discussed above. The normal thumbnail image data<!-- EPO <DP n="28"> --> TM1 and the aspect ratio adjustment thumbnail image data TM2 are created for the single piece of panoramic image data PD especially in the present embodiment. The image capturing device 50 can generate the pieces of thumbnail image data TM1 and TM2 by performing the processing illustrated in <figref idrefs="f0009">FIG. 9</figref> mainly with the image processing section 102, the graphics processing section 103, and the control section 108. Alternatively, the image capturing device 50 can also generate one of the pieces of thumbnail image data TM 1 and TM2 as necessary.</p><p id="p0160" num="0160"><figref idrefs="f0009">FIG. 9</figref> illustrates the overview of a thumbnail creation flow.</p><p id="p0161" num="0161">As illustrated in <figref idrefs="f0009">FIG. 9A</figref>, processing of reducing the resolution of high-resolution panoramic image data PD into such resolution that the panoramic image data PD is easier to simply display or display at a reduced size is performed on the panoramic image data PD, and the normal thumbnail image data TM1 is created in reduction processing 300.</p><p id="p0162" num="0162">In light of general aspect ratios of 4:3, 16:9, 3:2, and the like, the thumbnail resolution is defined, for example, within the ranges of 640 pixels × 480 pixels or 1920 pixels × 1080 pixels.</p><p id="p0163" num="0163">The single piece of normal thumbnail image data TM 1 alone may be created, or a plurality of normal thumbnail images having various kinds of resolution may be created in accordance with the purposes of use.</p><p id="p0164" num="0164">The normal thumbnail image data TM1 created in this way is displayed in a display area having a general aspect ratio of 4:3, 16:9, 3:2, or the like. However, since the number of pixels of a panoramic image is very different on its short side and long side, the panoramic image becomes considerably elongate and small as illustrated in <figref idrefs="f0004">FIG. 4B</figref> and the visibility is diminished. There are many areas on which nothing is displayed, resulting in the poor use efficiency of the display areas.</p><p id="p0165" num="0165">The aspect ratio adjustment thumbnail image TM2 is also created in the present embodiment in preparation for such a situation.</p><p id="p0166" num="0166">That is to say, as illustrated in <figref idrefs="f0009">FIG. 9A</figref>, aspect ratio adjustment conversion processing 301 is performed on the panoramic image data PD as illustrated in <figref idrefs="f0009">FIG.<!-- EPO <DP n="29"> --> 9A</figref>. For example, the panoramic image data PD having a large ratio of height to width is transformed into an image having a suitable aspect ratio of 4:3, 16:9, 3:2, 1:1, or the like in the aspect ratio adjustment conversion processing 301.</p><p id="p0167" num="0167">Several specific examples of the aspect ratio adjustment conversion processing 301 will be shown below.</p><heading id="h0017">* Processing Example I</heading><p id="p0168" num="0168">First of all, the description will be made for processing of rendering an image acquired by texture-mapping a panoramic image to a three-dimensional model of a projection surface of panoramic image data.</p><p id="p0169" num="0169">An image having a converted aspect ratio can be acquired by texture-mapping a panoramic image to a 3D model of a re-projection surface such as a cylindrical surface or a spherical surface used in the re-projection processing 204 and performing processing of rendering the panoramic image onto a screen having a general aspect ratio of 4:3 or the like.</p><p id="p0170" num="0170">A viewpoint position for rendering is set in a manner that the 3D model is overlooked from the outside. For example, <figref idrefs="f0010">FIGS. 10A and 10B</figref> are schematic diagrams of 3D model arrangement for cylindrical projection and spherical projection, respectively. Rendering is performed for cylindrical projection from a viewpoint position P1 illustrated in <figref idrefs="f0010">FIG. 10A</figref>, so that it is possible to create an image having a general aspect ratio as illustrated in <figref idrefs="f0011">FIG. 11A</figref>. Rendering is performed for spherical projection from a viewpoint position P1 illustrated in <figref idrefs="f0010">FIG. 10B</figref>, so that it is possible to create an image having a general aspect ratio as illustrated in <figref idrefs="f0011">FIG. 11B</figref>.</p><heading id="h0018">* Processing Example II</heading><p id="p0171" num="0171">It is conceivable that processing of applying polar coordinate transformation is performed on a panoramic image.</p><p id="p0172" num="0172">It is known that the coordinate system of a panoramic image is transformed from the orthogonal coordinate system (x, y) to a square image of the polar coordinate conversion (r, θ), thereby making it possible to transform the panoramic image into a planetary image as illustrated in <figref idrefs="f0011">FIG. 11C</figref>. This processing can<!-- EPO <DP n="30"> --> transform the panoramic image into an image having an aspect ratio of 1:1.</p><heading id="h0019">* Processing Example III</heading><p id="p0173" num="0173">It is conceivable that processing of reducing a panoramic image by using a determination result of the importance of a pixel in the panoramic image is performed.</p><p id="p0174" num="0174">Seam Carving for Content-Aware Image Resizing (<nplcit id="ncit0001" npl-type="s"><text>ACM Transactions on Graphics-Proceedings of ACM SIGGRAPH 2007, Volume 26 Issue 3, July 2007</text></nplcit>) defines the importance of a pixel as an energy function, and provides a technique of removing a pixel so as to minimize energy loss and reducing the resolution while maintaining the content.</p><p id="p0175" num="0175">This technique makes it possible to create an image having the aspect ratio changed into 4:3 or the like while maintaining the content of a panoramic image.</p><p id="p0176" num="0176"><figref idrefs="f0012">FIG. 12B</figref> illustrates an example of an image having an aspect ratio adjusted into 4:3 in this processing from the panoramic image illustrated in <figref idrefs="f0012">FIG. 12A</figref>. This is not a simple reduction, but pixels poor in features such as the sky and the earth are preferentially removed in a manner that as many pixels of high importance as possible are retained. This offers a reduced image having a feature part of the image content reflected thereon.</p><heading id="h0020">* Processing Example IV</heading><p id="p0177" num="0177">It is desirable in aspect ratio adjustment and conversion processing to retain information on an entire panorama image, and then change the aspect ratio as described for the processing examples I to III. However, this processing requires a given computing resource. If no computing resource can be assigned to the aspect ratio conversion processing, it is also possible to create an image having an adjusted aspect ratio by cutting out a partial area of a panoramic image at a desired aspect ratio.</p><p id="p0178" num="0178">For example, a part of the panoramic image illustrated in <figref idrefs="f0012">FIG. 12B</figref> is cut out (trimmed) as processing of creating an image as illustrated in <figref idrefs="f0012">FIG. 12C</figref>.</p><p id="p0179" num="0179">Additionally, it is not possible to retain information on the entire panoramic<!-- EPO <DP n="31"> --> image in this trimmed image. However, if a part cut out from the panoramic image includes an area detected through processing such as facial detection, human body detection, general object detection, and main object detection, it is possible to generate a trimmed image including as many areas as possible that seem to be important.</p><p id="p0180" num="0180">Specific examples of the aspect ratio adjustment conversion processing 301 have been shown as the processing examples I to IV. It is possible in all of the examples to acquire image data having aspect ratios adjusted into 4:3, 16:9, 3:2, and the like, which is the general aspect ratios of display devices.</p><p id="p0181" num="0181">It is possible in the processing examples I, II, and III to generate thumbnail image data having higher advantageous visual effects than an image subjected to the aspect ratio adjustment processing such as simply cutting out a part of a panoramic image.</p><p id="p0182" num="0182">The image data generated in this aspect ratio adjustment conversion processing 301 will be subjected to reduction processing 302 illustrated in <figref idrefs="f0009">FIG. 9A</figref>.</p><p id="p0183" num="0183">The image data processed in aspect ratio adjustment processing 301 is reduced to create the aspect ratio adjustment thumbnail image data TM2 in the reduction processing 302. The same processing as the reduction processing 300 is performed to reduce the resolution.</p><p id="p0184" num="0184">The normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 are generated through the processing illustrated in <figref idrefs="f0009">FIG. 9A</figref>.</p><p id="p0185" num="0185">Additionally, the processing as illustrated in <figref idrefs="f0009">FIG. 9B</figref> may also be used. That is to say, the panoramic image data PD may be first reduced in the reduction processing 302, and then subjected to the aspect ratio adjustment conversion processing 301 in order to generate the aspect ratio adjustment thumbnail image data TM2.</p><p id="p0186" num="0186"><!-- EPO <DP n="32"> --> Some specific examples of the aspect ratio adjustment conversion processing 301 have been described. The single piece of aspect ratio adjustment thumbnail image data TM2 may be created, or some types of aspect ratio adjustment thumbnail image data TM2 may also be created in accordance with the purposes. For example, the aspect ratio adjustment thumbnail image data TM2 according to the processing example I and the aspect ratio adjustment thumbnail image data TM2 according to the processing example III are created.</p><p id="p0187" num="0187">In the same way as the normal thumbnail image data TM1, a single piece of aspect ratio adjustment thumbnail image data having a given resolution may be generated or pieces of aspect ratio adjustment thumbnail image data having different resolutions may be generated as the same type of aspect ratio adjustment thumbnail image data TM2.</p><p id="p0188" num="0188">A thumbnail image created with the 3D model in the processing example I of the aspect ratio adjustment conversion processing 301 is an image rendered from a specific viewpoint. In addition, a plurality of rendered images corresponding to consecutive viewpoint movement may be created to make the entire panoramic image easier to recognize. The pieces of aspect ratio adjustment thumbnail image data TM2 are generated for a plurality of viewpoint positions such as the viewpoint positions P1, P2 ... illustrated in <figref idrefs="f0010">FIG. 10</figref>.</p><p id="p0189" num="0189">This makes it possible to rotate a 3D model with thumbnail images alone, improving the visibility of the entire panoramic image.</p><p id="p0190" num="0190">The image capturing device 50 converts, into data in an appropriate format such as the JPEG format, the panoramic image data PD created through the panorama combination processing as described above, and the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 generated through the thumbnail generation processing, and records them in the recording device 104. The image capturing device 50 then records the type of projection surface (types such as a cylindrical surface and a spherical surface) selected in the re-projection processing 204 as metadata. When recording the<!-- EPO <DP n="33"> --> metadata, the image capturing device 50 may embed the metadata into image data in the same way as exchangeable image file format (EXIF) or record the metadata as a file independent from the image data.</p><heading id="h0021">[3-4: Image Processing Example]</heading><p id="p0191" num="0191">Various examples of image processing executed by the image capturing device 50 on the basis of control exerted by the control section 108 will be described below as processing including the panorama generation and the thumbnail generation with reference to <figref idrefs="f0013">FIGS. 13</figref>, <figref idrefs="f0014">14</figref>, and <figref idrefs="f0015">15</figref>. The following examples of the figures are shown as control processing performed by the control section 108.</p><p id="p0192" num="0192">The processing example of <figref idrefs="f0013">FIG. 13A</figref> will be described.</p><p id="p0193" num="0193">The control section 108 controls panoramic image capturing processing in step F101. A user performs a panoramic image capturing operation, thereby allowing the image processing section 102 to acquire the input image group FMS. This input image group FMS is subjected to the processing described with reference to <figref idrefs="f0008">FIG. 8</figref> in accordance with the control exerted by the control section 108 and the operation of the image processing section 102, and the panoramic image data PD is generated.</p><p id="p0194" num="0194">In step F102, the control section 108 exerts control to generate the normal thumbnail image data TM1. That is to say, for example, the reduction processing 300 illustrated in <figref idrefs="f0009">FIG. 9A</figref> is executed as the processing performed by the image processing section 102 and the graphics processing section 103 in accordance with control exerted by the control section 108, and then the normal thumbnail image data TM1 is generated.</p><p id="p0195" num="0195">In step F103, the control section 108 exerts control to generate the aspect ratio adjustment thumbnail image data TM2. That is to say, for example, the aspect ratio adjustment conversion processing 301 and the reduction processing 302 illustrated in <figref idrefs="f0009">FIG. 9A</figref> are executed as the processing performed by the image processing section 102 and the graphics processing section 103 in accordance with<!-- EPO <DP n="34"> --> control exerted by the control section 108, and then the aspect ratio adjustment thumbnail image data TM2 is generated. Additionally, steps F102 and F103 may also be executed inversely or in parallel.</p><p id="p0196" num="0196">In step F104, the control section 108 causes the recording device 104 to record the panoramic image data PD, the normal thumbnail image data TM1, and the aspect ratio adjustment thumbnail image data TM2 created in the respective steps in the recording medium.</p><p id="p0197" num="0197">Additionally, the panoramic image data PD, the normal thumbnail image data TM1, and the aspect ratio adjustment thumbnail image data TM2 are recorded in the recording medium in step F104 in this processing example, but the panoramic image data PD, the normal thumbnail image data TM1, and the aspect ratio adjustment thumbnail image data TM2 generated in steps F101, F102, and F103, respectively, may also be recorded in the recording medium when each of them is generated.</p><p id="p0198" num="0198">Furthermore, in F104, each piece of image data (PD, TM1, and TM2) may be not recorded in the recording medium of the recording device 104, but transmitted from the communication section 106 to an external device. For example, a device of a communication destination records each piece of image data in the recording medium.</p><p id="p0199" num="0199">If the pieces of thumbnail image data TM1 and TM2 are generated along with the single piece of panoramic image data PD as illustrated in <figref idrefs="f0013">FIG. 13A</figref>, it is possible to prepare some types of thumbnail image data in a manner that a more appropriate type of thumbnail image data can be selected in accordance with a variety of circumstance for displaying a thumbnail image of the panoramic image data PD.</p><p id="p0200" num="0200">Processing is performed in a manner that both the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 are recorded in the recording medium as thumbnail image data corresponding to the panoramic image data PD, thereby making it possible to select the normal thumbnail image data<!-- EPO <DP n="35"> --> TM1 and the aspect ratio adjustment thumbnail image data TM2 when a thumbnail image of the panoramic image data PD is displayed later.</p><p id="p0201" num="0201">Such processing makes a display method possible in which the more appropriate thumbnail image is displayed in accordance with a circumstance for displaying a thumbnail, and a user's recognizability of the thumbnail is improved.</p><p id="p0202" num="0202">The processing example of <figref idrefs="f0013">FIG. 13B</figref> will be described.</p><p id="p0203" num="0203">The processing that has already been described will be denoted with the same step number, and repeated description will be omitted in the following description of a flowchart.</p><p id="p0204" num="0204">This processing illustrated <figref idrefs="f0013">FIG. 13B</figref> is acquired by adding step F110 to the processing illustrated in <figref idrefs="f0013">FIG. 13A</figref>. In step F110, the control section 108 decides the type of aspect ratio adjustment thumbnail image data TM2 to be generated. That is to say, a variety of examples such as the processing examples I to IV are possible as the aspect ratio adjustment conversion processing 301 illustrated in <figref idrefs="f0009">FIG. 9</figref>, but the processing to be used among them is selected in step F110.</p><p id="p0205" num="0205">Specifically, the control section 108 makes a determination regarding a processing selection condition, and selects, for example, any one of the processing examples I to IV.</p><p id="p0206" num="0206">Examples of the processing selection condition include a projection processing type condition, a panoramic angle-of-view condition, an object condition, and a user setting condition, or a combination thereof. Examples of the processing in step F110 according to these processing selection conditions will be shown.</p><p id="p0207" num="0207">If the projection processing type condition is used as a processing selection condition, the aspect ratio adjustment thumbnail image data TM2 is generated in accordance with the projection surface used in the re-projection processing 204.</p><p id="p0208" num="0208">For example, projection processing is performed on a cylindrical surface in the re-projection processing 204 to generate the panoramic image data PD, processing of rendering an image acquired by texture-mapping a panoramic image to<!-- EPO <DP n="36"> --> a three-dimensional model of the cylindrical surface is selected as the processing example I and the aspect ratio adjustment thumbnail image data TM2 as illustrated in <figref idrefs="f0011">FIG. 11A</figref> is generated.</p><p id="p0209" num="0209">Similarly to what has been discussed in the processing example I, projection processing is performed on a spherical surface in the re-projection processing 204 to generate the panoramic image data PD, processing of rendering an image acquired by texture-mapping a panoramic image to a three-dimensional model of the spherical surface is selected and the aspect ratio adjustment thumbnail image data TM2 as illustrated in <figref idrefs="f0011">FIG. 11B</figref> is generated.</p><p id="p0210" num="0210">If the panoramic angle-of-view condition is used as a processing selection condition, processing may be selected, for example, in accordance with whether or not the panoramic image data PD has a 360-degree angle of view.</p><p id="p0211" num="0211">For example, if the angle of view is 360 degrees, the aspect ratio adjustment thumbnail image data TM2 as illustrated in <figref idrefs="f0011">FIG. 11A or 11B</figref> is generated through the processing example I. Alternatively, polar coordinate transformation may also be used in the processing example II (see <figref idrefs="f0011">FIG. 11C</figref>).</p><p id="p0212" num="0212">To the contrary, if the angle of view is not 360 degrees, the processing example III or IV is used. This is because a thumbnail image generated through the processing example I as illustrated in <figref idrefs="f0011">FIGS. 11A and 11B</figref> includes a part in which no object is present and the image quality may be degraded if the angle of view is less than 360 degrees.</p><p id="p0213" num="0213">It is conceivable as the object condition serving as a processing selection condition that processing is selected, for example, in accordance with whether or not a human face of body is included as an object.</p><p id="p0214" num="0214">If a human face or body larger than a given size is included, that part serves as a feature and it becomes easier for a user to recognize the image content. Thus, for example, the processing examples III and IV are performed to generate the aspect ratio adjustment thumbnail image data TM2 showing the facial part or the like. Meanwhile, if a landscape alone is included, but no face or human body is present, or<!-- EPO <DP n="37"> --> if a person or a human face is certainly included, but its size is considerably small, the processing example I or II is selected.</p><p id="p0215" num="0215">If the user setting condition is used as a processing selection condition, any one of the processing examples I to IV is selected in accordance with a setting operation of a user.</p><p id="p0216" num="0216">The control section 108 decides a method of the aspect ratio adjustment conversion processing 301 illustrated in <figref idrefs="f0009">FIG. 9</figref>, for example, in accordance with such a processing selection condition. In step F103 illustrated in <figref idrefs="f0013">FIG. 13</figref>, the selected processing method is executed to generate the aspect ratio adjustment thumbnail image data TM2. In step F104, the recording device 104 records the created panoramic image data PD and normal thumbnail image data TM1 in the recording medium.</p><p id="p0217" num="0217">In this way, in the example of <figref idrefs="f0013">FIG. 13B</figref>, the type of aspect ratio adjustment processing (aspect ratio adjustment conversion processing 301 in this case) is selected among some kinds of aspect ratio adjustment processing on the basis of a processing selection condition, and the aspect ratio adjustment thumbnail image data TM2 is generated through the decided aspect ratio adjustment processing.</p><p id="p0218" num="0218">A variety of processing methods are possible as the aspect ratio adjustment conversion processing 301, and appropriate aspect ratio adjustment processing is selected as a processing selection condition in the example to generate an appropriate thumbnail in which, for example, easy processing is prioritized, retaining the image quality is prioritized, a user's easy recognition of panoramic image content is prioritized, or the preference of a user is prioritized as a thumbnail image.</p><p id="p0219" num="0219">The processing example of <figref idrefs="f0014">FIG. 14A</figref> will be described.</p><p id="p0220" num="0220">The processing illustrated in <figref idrefs="f0014">FIG. 14A</figref> is an example in which the pieces of aspect ratio adjustment thumbnail image data TM2 are generated through different kinds of aspect ratio adjustment processing.<!-- EPO <DP n="38"> --></p><p id="p0221" num="0221">That is to say, the processing in steps F101 and F102 is performed in the same way as those of <figref idrefs="f0013">FIG. 13A</figref>, and then the control section 108 generates some types of aspect ratio adjustment thumbnail image data TM2 in step F103A. For example, the aspect ratio adjustment thumbnail image data TM2 illustrated in <figref idrefs="f0010">FIG. 10A</figref> is generated in accordance with the processing example I, and the aspect ratio adjustment thumbnail image data TM2 illustrated in FIG. 10C is generated in accordance with the processing example II. In step F104A, the recording device 104 records the created panoramic image data PD, normal thumbnail image data TM1, and aspect ratio adjustment thumbnail image data TM2 of some types in the recording medium.</p><p id="p0222" num="0222">Some types of aspect ratio adjustment thumbnail image data TM2 are generated and prepared, thereby allowing the scope of choices to be widened in accordance with a variety of circumstances for displaying a thumbnail of the panoramic image data PD.</p><p id="p0223" num="0223">Additionally, the aspect ratio adjustment thumbnail image data TM2 according to any one of the processing examples I to III may be selected and generated with the processing selection conditions, and the aspect ratio adjustment thumbnail image data TM2 trimmed in the processing example IV may be additionally generated. This is because the processing example IV is simple cutting-out processing, and generating some types of aspect ratio adjustment thumbnail image data TM2 does not impose a very heavy processing load.</p><p id="p0224" num="0224">It has been described that the pieces of aspect ratio adjustment thumbnail image data TM2 are generated through different kinds of aspect ratio adjustment processing in step F103A, but an example is also possible as this processing in which the "pieces of aspect ratio adjustment thumbnail image data TM2 are generated through the same aspect ratio adjustment processing."</p><p id="p0225" num="0225">For example, the pieces of aspect ratio adjustment image data TM2 having different viewpoint positions from the viewpoint position of panoramic image data are generated. As discussed above, for example, the aspect ratio adjustment<!-- EPO <DP n="39"> --> thumbnail image data TM2 having a plurality of viewpoint positions such as the viewpoint positions P1, P2 ... illustrated in <figref idrefs="f0010">FIG. 10</figref> are generated as a thumbnail image for a 3D model in the processing example I.</p><p id="p0226" num="0226">If pieces of thumbnail image data having different viewpoint positions have been generated, it is possible to switch and display thumbnails showing the original panoramic image data PD from different viewpoint positions. For example, it is possible to rotate a 3D model with thumbnail images alone, improving the visibility of the entire panoramic image. It is also possible to display thumbnail images just by switching the thumbnail images, not imposing a very heavy processing load.</p><p id="p0227" num="0227">The processing example of <figref idrefs="f0014">FIG. 14B</figref> will be described.</p><p id="p0228" num="0228">The processing illustrated in <figref idrefs="f0014">FIG. 14B</figref> is an example in which an object in the panoramic image data PD is determined to set a viewpoint position, and the aspect ratio adjustment thumbnail image data TM2 is generated through aspect ratio adjustment processing according to the viewpoint position.</p><p id="p0229" num="0229">The control section 108 determines an important object in step F120. For example, a human face and a human body each serving as an object are regarded as an important object, and it is determined whether or not the panoramic image data PD includes an important object.</p><p id="p0230" num="0230">In step F121, the control section 108 sets a viewpoint position in accordance with the presence or absence of an important object. For example, if there is no important object, the control section 108 sets an initial setting position as a viewpoint position, but if there is an important object, the control section 108 sets a viewpoint position on the basis of the position of the object as a criterion. If there are a plurality of important objects, the control section 108 sets a plurality of viewpoint positions on the basis of the positions of the respective important objects. Alternatively, the control section 108 sets a viewpoint position on the basis of the central position of important objects.</p><p id="p0231" num="0231">In step F103B, the control section 108 uses the one or more set viewpoint positions to generate the one or more pieces of aspect ratio adjustment thumbnail<!-- EPO <DP n="40"> --> image data TM2, for example, in the processing example I or the processing example IV.</p><p id="p0232" num="0232">In step F104B, the recording device 104 records the created panoramic image data PD and normal thumbnail image data TM1, and the created one or more pieces of aspect ratio adjustment thumbnail image data TM2 in the recording medium.</p><p id="p0233" num="0233">Determining an object in this way makes it possible to determine an important object in the panoramic image data PD, to set a viewpoint position for a thumbnail image in accordance therewith, and to allow the one or more generated pieces of aspect ratio adjustment thumbnail image data TM2 to appropriately present an important object to a user. This makes the aspect ratio adjustment thumbnail image data TM2 suited for a user to express panoramic image content.</p><p id="p0234" num="0234">Not only face detection or human body detection, but also general object detection, moving object detection, main object detection, or the like may also be used to detect an important object.</p><p id="p0235" num="0235">The processing example of <figref idrefs="f0015">FIG. 15</figref> will be described.</p><p id="p0236" num="0236">The processing illustrated in <figref idrefs="f0015">FIG. 15</figref> is an example in which if image data for which a thumbnail is generated is image data (non-panoramic image) acquired by capturing an normal image, the normal thumbnail image data TM1 is generated, while if image data for which a thumbnail is generated is the panoramic image data PD, both the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 are generated.</p><p id="p0237" num="0237">In step F130, the control section 108 controls processing of capturing a normal still image or processing of capturing a panoramic image. If a normal still image is captured, the control section 108 proceeds to step F131 to step F132, and exerts control to generate the normal thumbnail image data TM1.</p><p id="p0238" num="0238">In step F133, the control section 108 causes the recording device 104 to records image data serving as a normal still image and the normal thumbnail image<!-- EPO <DP n="41"> --> data TM 1 in the recording medium.</p><p id="p0239" num="0239">If a panoramic image is captured in step F130, the control section 108 proceeds from the processing to the processing in step F131 to steps F102, F110, F103, and F104, and performs the same processing as the processing illustrated in <figref idrefs="f0013">FIG. 13B</figref>.</p><p id="p0240" num="0240">This processing allows thumbnail image data to be appropriately generated for each of a captured normal image and a captured panoramic image, and it is, in particular, possible to perform processing of generating the aspect ratio adjustment thumbnail image data TM2 only for a captured panoramic image.</p><heading id="h0022">[3-5: Thumbnail Display Area]</heading><p id="p0241" num="0241">Next, the display of thumbnail images (TM1 and TM2) generated in this way will be described.</p><p id="p0242" num="0242">The image capturing device 50 according to the present embodiment selects and displays any one of the recorded thumbnail images (TM1 and TM2) for the panoramic image data PD. Thus, as discussed above, the functional sections corresponding to the image processing device 2B illustrated in <figref idrefs="f0005">FIG. 5B or 5C</figref> are implemented by the control section 108, the image processing section 102, and the graphics processing section 103.</p><p id="p0243" num="0243">That is to say, the operations of the control section 108, the image processing section 102, and the graphics processing section 103 implement a thumbnail selecting section that selects which of the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 is used for displaying a thumbnail, and a display data generating section that generates display data for displaying a thumbnail with any one of the normal thumbnail image data TM1 and the aspect ratio adjustment thumbnail image data TM2 in accordance with the selection of the thumbnail selecting section.</p><p id="p0244" num="0244">For example, as an operation corresponding to the thumbnail selecting section, one of the thumbnail images (one of TM1 and TM2) to be displayed is<!-- EPO <DP n="42"> --> selected in accordance with the aspect ratio of the display area, the size of the display area, the number of pieces of thumbnail image data included in the display data, and the like.</p><p id="p0245" num="0245">Selecting and displaying an appropriate thumbnail image in accordance with a situation improve the use efficiency and the visibility of the display area.</p><p id="p0246" num="0246">Prior to the description of processing, an example of selective display will be described.</p><p id="p0247" num="0247"><figref idrefs="f0016">FIGS. 16</figref> and <figref idrefs="f0017">17</figref> each illustrate an example of display according to the aspect ratio of the display area. The display area herein refers to the entire display panel 105a of the image capturing device 50. That is to say, let us assume that thumbnail images are listed and displayed or a single thumbnail image is displayed on the entire display panel 105a.</p><p id="p0248" num="0248">If the entire display panel 105a is used as the display area of a thumbnail image, the aspect ratio of the display area is normally fixed. For example, the ratio of height to width is 1280:720 or the like. However, the ratio of height to width visually recognized by a user varies depending on the posture of the image capturing device 50 (how the user holds the image capturing device 50).</p><p id="p0249" num="0249"><figref idrefs="f0016">FIG. 16A</figref> illustrates a standard posture, <figref idrefs="f0016">FIG. 16B</figref> illustrates an inverse posture, <figref idrefs="f0016">FIG. 16C</figref> illustrates a left 90-degree posture, and <figref idrefs="f0016">FIG. 16D</figref> illustrates a right 90-degree posture. Since a user holds the image capturing device 50 in a given posture, the image capturing device 50 is held in these postures. The display area is vertically long in some cases as illustrated in <figref idrefs="f0016">FIGS. 16C and 16D</figref>.</p><p id="p0250" num="0250">That is to say, the aspect ratio (ratio of width to height) of the display area visually recognized by a user is, for example, 1280:720 in one case, and 720:1280 in other cases.</p><p id="p0251" num="0251"><figref idrefs="f0017">FIG. 17</figref> illustrates an example in which t thumbnail images are listed and displayed in accordance with this variation in the aspect ratio of the display area.</p><p id="p0252" num="0252"><figref idrefs="f0017">FIG. 17A</figref> illustrates that the display area has a horizontally long aspect ratio,<!-- EPO <DP n="43"> --> and the aspect ratio adjustment thumbnail image data TM2 is selected in this case for listing and displaying thumbnail images. The aspect ratio adjustment thumbnail image data TM2 is displayed, for example, at an aspect ratio of 4:3 or 1:1, so that images can be vertically and horizontally arranged, and listed and displayed as illustrated in the figure.</p><p id="p0253" num="0253"><figref idrefs="f0017">FIG. 17B</figref> illustrates that the display area has a vertically long aspect ratio, and the normal thumbnail image data TM1 is selected in this case for listing and displaying thumbnail images. If the normal thumbnail image data TM1 has horizontally long images, the respective thumbnail images are vertically arranged as illustrated in the figure. Accordingly, relatively large images can represent a large number of thumbnails.</p><p id="p0254" num="0254"><figref idrefs="f0017">FIGS. 17A and 17B</figref> each illustrate that the display area is efficiently used, and thumbnail image content is easy for a user to view.</p><p id="p0255" num="0255">Next, <figref idrefs="f0018">FIG. 18</figref> is an example in which a single thumbnail image is displayed on the display panel 105a. Here, the aspect ratio adjustment thumbnail image data TM2 is selected and displayed. Additionally, <figref idrefs="f0004">FIG. 4A</figref> illustrates that the normal thumbnail image data TM 1 is selected and displayed.</p><p id="p0256" num="0256">In this case, <figref idrefs="f0018">FIG. 18</figref> illustrates a display area, for example, having an aspect ratio of 1280:720, at which a more interesting image can be displayed more efficiently.</p><p id="p0257" num="0257">An example has been described so far in which the entire display panel 105a is used as the display area of a thumbnail image, but a part of the display panel 105a is sometimes used to display a thumbnail image.</p><p id="p0258" num="0258"><figref idrefs="f0019">FIGS. 19A and 19B</figref> each illustrate that an application image (such as a menu display window) is displayed on the display panel 105a, and a partial shaded area 105b thereof is used as the display area of a thumbnail image.</p><p id="p0259" num="0259">For example, if a part of the display panel 105a is used in this way, the aspect ratio of the display area of a thumbnail image considerably varies. For example, if the display area is vertically long as illustrated in <figref idrefs="f0019">FIG. 19A</figref>, the normal<!-- EPO <DP n="44"> --> thumbnail image data TM1 is, for example, more suited. Meanwhile, if the display area is horizontally long as illustrated in <figref idrefs="f0019">FIG. 19B</figref>, the aspect ratio adjustment thumbnail image data TM2 is, for example, more suited.</p><p id="p0260" num="0260">For example, selecting, in this way, a thumbnail image (TM1 or TM2) to be displayed in accordance with a variety of circumstances for displaying a thumbnail image of the panoramic image data PD such as the aspect ratio of the display area visually recognized by a user makes it possible to efficiently use the display area or to display a thumbnail according to the visibility of a user or the like.</p><heading id="h0023">[3-6: Thumbnail Display Processing Example]</heading><p id="p0261" num="0261">Various examples of image processing executed by the image capturing device 50 on the basis of control exerted by the control section 108 will be described below as thumbnail image display processing with reference to <figref idrefs="f0020">FIGS. 20</figref>, <figref idrefs="f0021">21</figref>, <figref idrefs="f0022">22</figref>, and <figref idrefs="f0023">23</figref>. The following examples of the figures are shown as control processing performed by the control section 108.</p><p id="p0262" num="0262">The processing example of <figref idrefs="f0020">FIG. 20A</figref> will be described. <figref idrefs="f0020">FIG. 20A</figref> is an example in which a thumbnail image is selected and displayed in accordance with the aspect ratio of the display area of the display panel 105a of the image capturing device 50. In particular, <figref idrefs="f0020">FIG. 20A</figref> illustrates a processing example in which thumbnail images are listed and displayed on the entire display panel 105a, and a thumbnail image is selected in accordance with the respective postures of the image capturing device 50 illustrated in <figref idrefs="f0016">FIG. 16</figref>.</p><p id="p0263" num="0263">The control section 108 determines, in step F201, in which of the vertical posture and the horizontal posture the image capturing device 50 is held. This is processing of determining in which posture a user holds the image capturing device 50, or determining the posture of the image capturing device 50. The control section 108 checks detection information, for example, from an acceleration sensor of the sensor section 110 illustrated in <figref idrefs="f0007">FIG. 7</figref>, and can determine the posture of the<!-- EPO <DP n="45"> --> image capturing device 50. It is decided through this processing in which of the standard posture (<figref idrefs="f0016">FIG. 16A</figref>), the inverse posture (<figref idrefs="f0016">FIG. 16B</figref>), the left 90-degree posture (<figref idrefs="f0016">FIG. 16C</figref>), and the right 90-degree posture (<figref idrefs="f0016">FIG. 16D</figref>) the image capturing device 50 is held.</p><p id="p0264" num="0264">In step F202, the control section 108 acquires the aspect ratio of a display area on which a thumbnail image is displayed, from the determination result in step F201 and the resolution of the display panel 105a of the image capturing device 50. For example, if the display panel 105a is a liquid crystal panel having 1280 pixels in width and 720 pixels in height, the aspect ratio determined as the standard posture is 1280:720 and the aspect ratio determined as the right 90-degree posture is 720:1280.</p><p id="p0265" num="0265">In step F203, the control section 108 decides a display mode for a thumbnail image. The display mode herein refers to a display mode in which the normal thumbnail image data TM1 is used or a display mode in which the aspect ratio adjustment thumbnail image data TM2 is used.</p><p id="p0266" num="0266">Specifically, if the aspect ratio of the display area is determined as a vertically long aspect ratio as results of steps F201 and F202, the "normal thumbnail display mode" is used. Meanwhile, if the aspect ratio of the display area is determined as a horizontally long aspect ratio as results of steps F201 and F202, the "aspect ratio adjustment thumbnail display mode" is used.</p><p id="p0267" num="0267">In step F204, the processing branches out in accordance with the decided display mode. The processing proceeds to step F205 for the "normal thumbnail display mode," and the normal thumbnail image data TM1 is read out from the recording medium of the recording device 104 and then read by the storage section 107 for display processing.</p><p id="p0268" num="0268">The processing proceeds to step F206 for the "aspect ratio adjustment thumbnail display mode," and the aspect ratio adjustment thumbnail image data TM2 is read out from the recording medium of the recording device 104 and then read by the storage section 107 for display processing.<!-- EPO <DP n="46"> --></p><p id="p0269" num="0269">In step F207, the control section 108 decodes the JPEG data of the thumbnail image data (TM1 or TM2) read by the storage section 107, and writes the thumbnail image data (TM1 or TM2) into a display data buffer.</p><p id="p0270" num="0270">In step F208, the control section 108 writes all images to be listed and displayed into the display data buffer, and determines whether or not preparations have been made as display data. If there is an image that has not yet been processed, the control section 108 returns to step F204, and performs the processing sequentially.</p><p id="p0271" num="0271">Once all of the thumbnail images are reflected on the display data, the control section 108 proceeds to steps F208 to 209, outputs the respective images set in the display data buffer to the display section 105 as the display data to list and display the respective images on the display section 105.</p><p id="p0272" num="0272">This processing allows, for example, thumbnails to be listed and displayed as illustrated in <figref idrefs="f0017">FIG. 17A or 17B</figref> in accordance with the posture of the image capturing device 50, and it is possible to list and display thumbnails in a manner that a user can easily view the thumbnails and the display area of the display panel 105a can be efficiently used.</p><p id="p0273" num="0273">If the control section 108 displays an image on the display panel 105a of the image capturing device 50, the aspect ratio of the display panel 105a has a known value. Accordingly, it is not always necessary to perform the processing in step F202. For example, it is determined in step F201 in which of the vertically long posture and the horizontally long posture the image capturing device 50 is held, and then a display mode may be decided in step F203 on the basis of a result of the determination alone.</p><p id="p0274" num="0274">Meanwhile, if a part (area 105b) of the display panel 105a is used to list and display thumbnails as illustrated in <figref idrefs="f0019">FIG. 19</figref>, it is necessary in step F202 to detect the aspect ratio of the display area at that time. For this, it is determined which of a vertically long display area and a horizontally long display area the display area visually recognized by a user actually is, on the basis of the number of pixels that the<!-- EPO <DP n="47"> --> display area assigned as a thumbnail display area on a display application executed by the control section 108 has in width and in height and the posture of the image capturing device 50, and a display mode is decided.</p><p id="p0275" num="0275">If the image capturing device 50 transmits the display data to an external display device connected via the communication section 106 or the like, it is appropriate to acquire the aspect ratio of the display area of the external display device and to decide a display mode in accordance therewith in step F202. The same applies to the following processing examples. That is to say, it is possible in each processing example to cause a different display device to display a thumbnail.</p><p id="p0276" num="0276">The processing example of <figref idrefs="f0020">FIG. 20B</figref> will be described.</p><p id="p0277" num="0277"><figref idrefs="f0020">FIG. 20B</figref> is an example in which a thumbnail image is selected and displayed in accordance with the aspect ratio of the display area of the display panel 105a of the image capturing device 50 as with <figref idrefs="f0020">FIG. 20A</figref>, but is also a processing example in which the entire display panel 105a is used to display a single thumbnail image.</p><p id="p0278" num="0278">The processing in steps F201 to F209 is the same as the processing illustrated in <figref idrefs="f0020">FIG. 20A. FIG. 20B</figref> does not include the determination processing in step F208 illustrated in <figref idrefs="f0020">FIG. 20A</figref>, or the loop processing in steps F204 to F207 for step F208. Each step will not be described in detail.</p><p id="p0279" num="0279">That is to say, in the processing illustrated in <figref idrefs="f0020">FIG. 20B</figref>, a thumbnail image for the single piece of panoramic image data PD is selected on the basis of a display mode decided from the posture of the image capturing device 50 and the aspect ratio of the display area, the selected thumbnail image data (TM1 or TM2) is read out from the recording medium, and the display data is generated.</p><p id="p0280" num="0280">Even if a single thumbnail image alone is displayed, this processing causes a thumbnail image that is displayed to be selected in accordance with the aspect ratio of the display area visually recognized by a user.</p><p id="p0281" num="0281">For example, it is possible to perform processing of selecting and displaying<!-- EPO <DP n="48"> --> the aspect ratio adjustment thumbnail image data TM2 if the display area visually recognized by a user is vertically long, while it is possible to perform processing of selecting and displaying the normal thumbnail image data TM1 if the display area visually recognized by a user is horizontally long.</p><p id="p0282" num="0282">Additionally, if a single thumbnail image is displayed, it is also conceivable, the aspect ratio adjustment thumbnail image data TM2 as illustrated in <figref idrefs="f0018">FIG. 18</figref> and the normal thumbnail image data TM1 as illustrated in <figref idrefs="f0004">FIG. 4A</figref> may be switched and displayed, for example, in accordance with an operation of a user. For example, it is conceivable that a user can first display one of the aspect ratio adjustment thumbnail image data TM2 and the normal thumbnail image data TM1 selected in accordance with the aspect ratio of the display area, and then optionally switch the aspect ratio adjustment thumbnail image data TM2 and the normal thumbnail image data TM1 later.</p><p id="p0283" num="0283">The processing illustrated in <figref idrefs="f0021">FIGS. 21A and 21B</figref> will be described.</p><p id="p0284" num="0284"><figref idrefs="f0021">FIGS. 21A and 21B</figref> are processing examples in which thumbnail images are listed and displayed, and a single thumbnail image is displayed as illustrated in <figref idrefs="f0020">FIGS. 20A and 20B</figref>, respectively. However, steps F210 and F211 are executed in <figref idrefs="f0021">FIGS. 21A and 21B</figref> instead of steps F205 and F206. The others are the same.</p><p id="p0285" num="0285">If the "normal thumbnail display mode" is decided in step F203 of each of <figref idrefs="f0021">FIGS. 21A and 21B</figref>, the control section 108 proceeds to step F210 and exerts control to generate the normal thumbnail image data TM1. That is to say, the operations of the control section 108, the image processing section 102, and the graphics processing section 103 execute the reduction processing 300 described with reference to <figref idrefs="f0009">FIG. 9A or 9B</figref> to generate the normal thumbnail image data TM1 from the target panoramic image data PD.</p><p id="p0286" num="0286">Meanwhile, if the "aspect ratio adjustment thumbnail display mode" is decided in step F203, the control section 108 proceeds to step F211 and exerts control to generate the aspect ratio adjustment thumbnail image data TM2. That is<!-- EPO <DP n="49"> --> to say, the operations of the control section 108, the image processing section 102, and the graphics processing section 103 execute the aspect ratio adjustment conversion processing 301 and the reduction processing 302 described with reference to <figref idrefs="f0009">FIG. 9A or 9B</figref> to generate the aspect ratio adjustment thumbnail image data TM2 from the target panoramic image data PD.</p><p id="p0287" num="0287">The control section 208 then proceeds to step F207.</p><p id="p0288" num="0288">That is to say, these processing illustrated in <figref idrefs="f0021">FIGS. 21A and 21B</figref> is an example in which any one of the normal thumbnail image data TM1 and the aspect ratio thumbnail image data TM2 is selected and generated in accordance with the aspect ratio of the display area when a thumbnail image is displayed.</p><p id="p0289" num="0289">The processing example of <figref idrefs="f0022">FIG. 22</figref> will be described. This is an example in which thumbnail images to be listed and displayed are selected in accordance with the size of the display area.</p><p id="p0290" num="0290">The control section 108 acquires the size of the display area in step F220. The control section 208 decides a display mode in step F203A. For example, it is determined in this case whether or not the size of the display area is greater than or equal to a predetermined value, and then it is decided which of the "aspect ratio thumbnail display mode" and the "normal thumbnail display mode" is used, on the basis of a result of the determination.</p><p id="p0291" num="0291">For example, if the size of the display area is small, the "aspect ratio adjustment thumbnail display mode" is selected in order to improve the visibility as much as possible. If the size of the display area is greater than or equal to a predetermined value and there is enough space, the "normal thumbnail display mode" is selected.</p><p id="p0292" num="0292">The following steps F204 to F209 are the same as those of <figref idrefs="f0020">FIG. 20A</figref>. Additionally, steps F210 and F211 illustrated in <figref idrefs="f0021">FIG. 21A</figref> may be executed instead of steps F205 and F206.</p><p id="p0293" num="0293">The processing example of <figref idrefs="f0023">FIG. 23</figref> will be described. This is an example<!-- EPO <DP n="50"> --> in which thumbnail images are selected in accordance with the number of thumbnail images to be displayed.</p><p id="p0294" num="0294">In step F230, the control section 108 first determines that thumbnail images are listed and displayed or a single thumbnail image is displayed, and then causes the processing to branch out on the basis of a result of the determination. If a single thumbnail image is displayed, the control section 108 proceeds to step F205, reads out the normal thumbnail image data TM1 from the recording medium to generate display data, proceeds to steps F207 → F208 → F209, and displays a single thumbnail image.</p><p id="p0295" num="0295">If thumbnail images are listed and displayed, the control section 108 checks the number of thumbnail images to be displayed in step F231. The control section 208 decides a display mode in step F203B. For example, it is determined in this case whether or not the number of thumbnail images to be displayed is greater than or equal to a predetermined value, and then it is decided which of the "aspect ratio thumbnail display mode" and the "normal thumbnail display mode" is used, on the basis of a result of the determination.</p><p id="p0296" num="0296">For example, if the number of thumbnail images to be displayed is less than a predetermined value, even the normal thumbnail image TM1 does not considerably diminishes the visibility. Accordingly, the "normal thumbnail display mode" is selected. To the contrary, if the number of thumbnail images to be displayed is greater than or equal to the predetermined value, the "aspect ratio adjustment thumbnail display mode" is selected in order to improve the visibility as much as possible.</p><p id="p0297" num="0297">The following steps F204 to F209 are the same as those of <figref idrefs="f0020">FIG. 20A</figref>. However, steps F210 and F211 illustrated in <figref idrefs="f0021">FIG. 21A</figref> may be executed instead of steps F205 and F206.</p><p id="p0298" num="0298"><figref idrefs="f0023">FIG. 23</figref> illustrates that the normal thumbnail image data TM1 is unconditionally selected if a single thumbnail image is displayed, but the aspect ratio adjustment thumbnail image data TM2 may also be unconditionally used even if a<!-- EPO <DP n="51"> --> single thumbnail image is displayed. In addition, if a single thumbnail image is displayed, the processing illustrated in <figref idrefs="f0020">FIG. 20B</figref> or <figref idrefs="f0021">21B</figref> may also be performed.</p><p id="p0299" num="0299">Various display processing examples have been described so far.</p><p id="p0300" num="0300">As shown in each example, when thumbnail image data is displayed for the panoramic image data PD, it is possible to display a thumbnail image with one of the normal thumbnail image data TM1 subjected to the resolution conversion and the aspect ratio adjustment thumbnail image data TM2 that is more appropriate in accordance with a variety of circumstances. For example, when thumbnail images are listed and displayed or a single thumbnail image is displayed, it is possible to display a thumbnail image that offers better visibility for a user or efficiently uses the display area.</p><p id="p0301" num="0301">If a thumbnail image (TM1 or TM2) selected in accordance with a decided display mode is read out from the recording medium to generate display data as in steps F205 and F206 illustrated in <figref idrefs="f0020">FIGS. 20A, 20B</figref>, <figref idrefs="f0022">22</figref>, and <figref idrefs="f0023">23</figref>, the display data can be generated with simple processing and it is possible to lighten a processing load for displaying a thumbnail image and to promptly display a thumbnail image.</p><p id="p0302" num="0302">Meanwhile, processing may also be performed to generate a thumbnail image (TM1 or TM2) selected in accordance with a decided display mode as in steps F210 and F211 illustrated in <figref idrefs="f0021">FIGS. 21A and 21B</figref>. In this case, there is no need to perform the processing described with reference to <figref idrefs="f0009">FIG. 9</figref> in advance, for example, when a panoramic image is captured. Since there is no need to have a plurality of thumbnail images (TM1, TM2) recorded in the recording medium, less capacity of the recording medium is consumed.</p><p id="p0303" num="0303">A thumbnail image (TM1 or TM2) to be displayed is selected in accordance with the aspect ratio of the display area, thereby making it possible to display a thumbnail image easy to view in accordance with a circumstance of the display area (vertically or horizontally long). In particular, the posture of the image capturing device 50 is additionally determined, thereby making it possible to improve the<!-- EPO <DP n="52"> --> visibility in accordance with the situation under which a user visually recognize a thumbnail image actually.</p><p id="p0304" num="0304">If the entire display panel 105a is used as the display area, it is possible to display a thumbnail image with a relatively large display area, and further improve the visibility in accordance with the posture of the image capturing device 50.</p><p id="p0305" num="0305">Meanwhile, a part of the display panel 105a may also be used as the display area. If a vertically or horizontally long part of the display panel 105a is selected as the display area, it is possible to display a thumbnail image that offers better visibility from the perspective of displayed design or application or is compatible with the display area set by a user.</p><p id="p0306" num="0306">Selecting a thumbnail image (TM1 or TM2) in accordance with the size of the display area makes it possible to display a thumbnail image that is easy to view in accordance with the display area size.</p><p id="p0307" num="0307">Selecting a thumbnail image (TM1 or TM2) in accordance with the number of thumbnail images to be displayed makes it possible to display a thumbnail image that is easy to view in accordance with the number of thumbnail images to be displayed.</p><p id="p0308" num="0308">As described above, when a thumbnail image is displayed for panoramic image data, it is possible in the present embodiment to display an appropriate thumbnail image in accordance with a circumstance for displaying a thumbnail image of the panoramic image data and to improve a user's thumbnail recognizability. It is further possible to use one of the advantage of the normal thumbnail image data TM1, which shows an entire panoramic image at low resolution, and the advantage of the aspect ratio adjustment thumbnail image data TM2, which is interesting and has an aspect ratio appropriate for display, in accordance with a situation.</p><p id="p0309" num="0309"><figref idrefs="f0014">FIGS. 14A and 14B</figref> illustrate that the pieces of aspect ratio adjustment thumbnail image data TM2 are generated. If the display mode is the "aspect ratio adjustment thumbnail display mode" in the display processing and the pieces of<!-- EPO <DP n="53"> --> aspect ratio adjustment thumbnail image data TM2 are recorded in the recording medium for the target panoramic image data PD, there is a diversity of aspect ratio adjustment thumbnail image data TM2 to be read out.</p><p id="p0310" num="0310">For example, if the pieces of aspect ratio adjustment thumbnail image data TM2 having different aspect ratios are recorded, it is conceivable that the piece of aspect ratio adjustment thumbnail image data TM2 that is the most suited for the current display area is selected and read out.</p><p id="p0311" num="0311">If the pieces of aspect ratio adjustment thumbnail image data TM2 having different resolutions are recorded, the piece of aspect ratio adjustment thumbnail image data TM2 that is suited for the display area assigned for displaying the thumbnail image in accordance with the size, the number of thumbnail images to be displayed, or the like is selected and read out.</p><p id="p0312" num="0312">If some types of aspect ratio adjustment thumbnail image data TM2 having the same aspect ratio are stored, a thumbnail image may be selected, for example, at random or by a user setting the type of aspect ratio adjustment thumbnail image data TM2 to be preferentially displayed.</p><p id="p0313" num="0313">If some types of aspect ratio adjustment thumbnail image data TM2 having different viewpoint positions are stored, a thumbnail image having a viewpoint position closer to the center of the panoramic image data PD may be selected, and then switched to a thumbnail image having a different viewpoint position in accordance with an operation of a user.</p><p id="p0314" num="0314">This selection of the piece of aspect ratio adjustment thumbnail image data TM2 to be displayed from the pieces of aspect ratio adjustment thumbnail image data TM2 can be applied to step F211 illustrated in <figref idrefs="f0021">FIG. 21</figref>. That is to say, in step F211, the processing in steps F110 and F103 illustrated in <figref idrefs="f0013">FIG. 13B</figref> is performed, and used as a processing selection condition in accordance with the aspect ratio and size of the display area, the number of display thumbnails, and the like. The aspect ratio adjustment thumbnail image data TM2 according to the processing selection condition is generated. In this way, there is no need to generate the aspect ratio adjustment thumbnail image data TM2 in advance, and it is possible to display the<!-- EPO <DP n="54"> --> aspect ratio adjustment thumbnail image data TM2 suited for a display situation every time the aspect ratio adjustment thumbnail image data TM2 is displayed.</p><heading id="h0024">&lt;4. Third Embodiment (Computer Device and Program)&gt;</heading><p id="p0315" num="0315">As a third embodiment, an example of the application to a computer device and a program will be described. The processing performed by the image processing devices 1 and 2 can also be executed with hardware or software.</p><p id="p0316" num="0316">A program according to an embodiment causes an operation processing device such as a central processing unit (CPU) and a digital signal processor (DSP) to execute the processing shown in the embodiments.</p><p id="p0317" num="0317">That is to say, a program for implementing the image processing device 1 causes an operation processing device to execute first thumbnail generation processing of generating first thumbnail image data (normal thumbnail image data TM1) by applying the resolution conversion to the panoramic image data PD generated by combining a plurality of captured images, and second thumbnail generation processing of generating second thumbnail image data (aspect ratio adjustment thumbnail image data TM2) by performing the aspect ratio adjustment processing on the panoramic image data PD.</p><p id="p0318" num="0318">Specifically, this program causes an operation processing device to execute the processing illustrated in <figref idrefs="f0006">FIG. 6A</figref>, <figref idrefs="f0013">13A</figref>, <figref idrefs="f0013">13B</figref>, <figref idrefs="f0014">14A</figref>, <figref idrefs="f0014">14B</figref>, or <figref idrefs="f0015">15</figref>.</p><p id="p0319" num="0319">A program for implementing the image processing device 2 causes an operation processing device to execute thumbnail selection processing of selecting any one of first thumbnail image data (normal thumbnail image data TM1) generated by applying the resolution conversion to the panoramic image data PD generated by combining a plurality of captured images or second thumbnail image data (aspect ratio adjustment thumbnail image data TM2) generated by performing the aspect ratio adjustment processing on the panoramic image data PD that is to be used for displaying a thumbnail, and display data generation processing of generating display data for displaying a thumbnail with any one of the first thumbnail image data and<!-- EPO <DP n="55"> --> the second thumbnail image data in accordance with the selection made in that thumbnail selecting procedure.</p><p id="p0320" num="0320">Specifically, this program causes an operation processing device to execute the processing illustrated in <figref idrefs="f0006">FIG. 6B, 6C</figref>, <figref idrefs="f0020">20A, 20B</figref>, <figref idrefs="f0021">21A, 21B</figref>, <figref idrefs="f0022">22</figref>, or <figref idrefs="f0023">23</figref>.</p><p id="p0321" num="0321">These programs make it possible to implement the image processing devices 1 and 2 with an operation processing device.</p><p id="p0322" num="0322">These programs can be recorded in advance in an HDD serving as a recording medium built in a device such as a computer device, an ROM or the like in a microcomputer including a CPU, or the like.</p><p id="p0323" num="0323">Alternatively, these programs can also be temporarily or permanently stored (recorded) in a removable recording medium such as a flexible disc, compact disc read only memory (CD-ROM), a magnet optical (MO) disc, a digital versatile disc (DVD), a Blu-ray Disc (registered trademark), a magnetic disk, semiconductor memory, and a memory card. Such a removable recording medium can be provided as so-called package software.</p><p id="p0324" num="0324">The programs can not only installed on a personal computer and the like from the removable recording medium, but also downloaded from a download site via a network such as a local area network (LAN) and the Internet.</p><p id="p0325" num="0325">These programs are suited for widely providing the image processing devices 1 and 2 according to an embodiment. For example, downloading the programs on a personal computer, a portable information processing device, a mobile phone, a game console, a vide device, a personal digital assistant (PDA), or the like can cause the portable information processing device and the like to serve as the image processing devices 1 and 2.</p><p id="p0326" num="0326">For example, it is possible to cause a computer device as illustrated in <figref idrefs="f0024">FIG. 24</figref> to execute the same processing as the processing performed by the image processing devices 1 and 2 according to an embodiment.</p><p id="p0327" num="0327"><figref idrefs="f0024">FIG. 24</figref> illustrates that a CPU 71 of a computer device 70 executes various<!-- EPO <DP n="56"> --> kinds of processing in accordance with a program stored in ROM 72 or a program loaded from a storage section 78 to RAM 73. The RAM 73 stores, as required, data or the like necessary for the CPU71 to execute various kinds of processing.</p><p id="p0328" num="0328">The CPU 71, the ROM 72, and the RAM 73 are connected to each other via a bus 74. This bus 74 is also connected to an input/output interface 75.</p><p id="p0329" num="0329">The input/output interface 75 is connected to an input section 76 including a keyboard and a mouse, a display including a cathode ray tube (CRT), an LCD, or an organic EL panel, an output section 77 including a speaker, the storage section 78 including a hard disk, and a communication section 79 including a modem. The communication section 79 performs communication processing via a network including the Internet.</p><p id="p0330" num="0330">The input/output interface 75 is connected, as needed, to a drive 80 and has a removable medium 81 such as a magnetic disk, an optical disc, or semiconductor memory mounted thereon as required. A computer program read out therefrom is installed, as needed, on the storage section 78.</p><p id="p0331" num="0331">If the processing performed by the image processing devices 1 and 2 is executed with software, a program included in the software is installed from a network and a recording medium.</p><p id="p0332" num="0332">For example, as illustrated in <figref idrefs="f0024">FIG. 24</figref>, this recording medium includes the removable medium 81 distributed for delivering a program to a user separately from the device body. The removable disk 81 includes, for example, a magnetic disk (including a flexible disc), an optical disc (including a Blu-ray Disc, CD-ROM, and a DVD), a magneto-optical disk (including a mini disc (MD)), or semiconductor memory that stores the programs.</p><p id="p0333" num="0333">Alternatively, the recording medium includes the ROM 72 which is incorporated into the device body in advance when delivered to a user and stores the programs, or a hard disk included in the storage section 78.</p><p id="p0334" num="0334"><!-- EPO <DP n="57"> --> When the panoramic image data PD is input, the CPU 71 executes the functions of the normal thumbnail generating section 1a and the aspect ratio adjustment thumbnail generating section 1b of the image processing device 1 on the basis of the programs, and this computer device 70 executes processing of generating the pieces of thumbnail image data TM1 and TM2 with a reception operation of the communication section 79 or a reproduction operation of the drive 80 (removable medium 81) or the recording section 78.</p><p id="p0335" num="0335">The CPU 71 executes the functions of the thumbnail selecting section 2a and the display data generating section 2b of the image processing device 2 on the basis of the programs in order to display a thumbnail for a panoramic image, and executes selective display processing on the pieces of thumbnail image data TM1 and TM2 in accordance with a situation.</p><heading id="h0025">&lt;5. Modifications&gt;</heading><p id="p0336" num="0336">The embodiments have been described so far, and a variety of modifications are also possible regarding the image processing devices according to the present disclosure.</p><p id="p0337" num="0337">It has been described that the image capturing device 50 has the functions of both the image processing devices 1 and 2, but the image capturing device 50 can also be configured to, for example, function as the image processing device 1 alone, and another reproduction device, display device or the like functions as the image processing device 2. The same applies to the computer device 70.</p><p id="p0338" num="0338">The image processing device 1, the image capturing device 50, and the computer device 70 may generate the aspect ratio adjustment thumbnail image data TM2 with a technique other than the processing examples I to IV.</p><p id="p0339" num="0339">As the normal thumbnail image data TM1, a plurality of thumbnail images having a plurality of resolutions may be generated.</p><p id="p0340" num="0340">Additionally, the present technology may also be configured as below.
<ol><li>(1)<!-- EPO <DP n="58"> --> An image processing device including:
<ul><li>a thumbnail selecting section configured to select, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</li><li>a display data generating section configured to generate display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection of the thumbnail selecting section.</li></ul></li><li>(2) The image processing device according to (1),<br/>
wherein the display data generating section reads out, from a recording medium, any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section, and generates the display data with the read-out thumbnail image data.</li><li>(3) The image processing device according to (1),<br/>
wherein the display data generating section generates any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section with the panoramic image data, and generates display data for displaying a thumbnail with the generated thumbnail image data.</li><li>(4) The image processing device according to any of (1) to (3),<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with an aspect ratio of a display area of a display device that supplies the display data.</li><li>(5) The image processing device according to (4),<br/>
wherein the display area refers to an entire screen of the display device.</li><li>(6) The image processing device according to (4),<br/>
<!-- EPO <DP n="59"> -->wherein the display area refers to an area in a screen of the display device in which a thumbnail is displayed.</li><li>(7) The image processing device according to any of (1) to (3),<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a size of a display area of a display device that supplies the display data.</li><li>(8) The image processing device according to any of (1) to (3),<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a number of pieces of thumbnail image data included in the display data.</li><li>(9) An image processing method including:
<ul><li>a thumbnail selecting procedure of selecting, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</li><li>a display data generating procedure of generating display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection made in the thumbnail selecting procedure.</li></ul></li><li>(10) A program for causing an operation processing device to execute:
<ul><li>thumbnail selection processing of selecting, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</li><li>display data generation processing of generating display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail<!-- EPO <DP n="60"> --> image data in accordance with selection made in the thumbnail selecting procedure.</li></ul></li></ol></p><heading id="h0026">Reference Signs List</heading><p id="p0341" num="0341"><dl id="dl0001" compact="compact"><dt>1, 2</dt><dd>image processing device</dd><dt>1a</dt><dd>normal thumbnail generating section</dd><dt>1b</dt><dd>aspect ratio adjustment thumbnail generating section</dd><dt>2a</dt><dd>thumbnail selecting section</dd><dt>2b</dt><dd>display data generating section</dd><dt>10</dt><dd>panorama combining section</dd><dt>11</dt><dd>storage section</dd><dt>12</dt><dd>display section</dd><dt>50</dt><dd>image capturing device</dd><dt>70</dt><dd>computer device</dd><dt>102</dt><dd>image processing section</dd><dt>103</dt><dd>graphics processing section</dd><dt>104</dt><dd>recording device section</dd><dt>105</dt><dd>display section</dd><dt>107</dt><dd>storage section</dd><dt>108</dt><dd>control section</dd></dl></p></description><claims mxw-id="PCLM90459846" lang="EN" load-source="patent-office"><!-- EPO <DP n="61"> --><claim id="c-en-0001" num="0001"><claim-text>An image processing device comprising:
<claim-text>a thumbnail selecting section configured to select, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</claim-text>
<claim-text>a display data generating section configured to generate display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection of the thumbnail selecting section.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The image processing device according to claim 1,<br/>
wherein the display data generating section reads out, from a recording medium, any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section, and generates the display data with the read-out thumbnail image data.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The image processing device according to claim 1,<br/>
wherein the display data generating section generates any of the first thumbnail image data and the second thumbnail image data selected by the thumbnail selecting section with the panoramic image data, and generates display data for displaying a thumbnail with the generated thumbnail image data.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The image processing device according to claim 1,<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with an aspect ratio of a display area of a display device that supplies the display data.<!-- EPO <DP n="62"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The image processing device according to claim 4,<br/>
wherein the display area refers to an entire screen of the display device.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The image processing device according to claim 4,<br/>
wherein the display area refers to an area in a screen of the display device in which a thumbnail is displayed.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The image processing device according to claim 1,<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a size of a display area of a display device that supplies the display data.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The image processing device according to claim 1,<br/>
wherein the thumbnail selecting section selects any of the first thumbnail image data and the second thumbnail image data in accordance with a number of pieces of thumbnail image data included in the display data.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>An image processing method comprising:
<claim-text>a thumbnail selecting procedure of selecting, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</claim-text>
<claim-text>a display data generating procedure of generating display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail<!-- EPO <DP n="63"> --> image data in accordance with selection made in the thumbnail selecting procedure.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A program for causing an operation processing device to execute:
<claim-text>thumbnail selection processing of selecting, for displaying a thumbnail, any of first thumbnail image data generated by applying resolution conversion to panoramic image data generated by combining a plurality of captured images, and second thumbnail image data generated by performing aspect ratio adjustment processing on the panoramic image data; and</claim-text>
<claim-text>display data generation processing of generating display data for displaying a thumbnail with any of the first thumbnail image data and the second thumbnail image data in accordance with selection made in the thumbnail selecting procedure.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW20422557" load-source="patent-office"><!-- EPO <DP n="64"> --><figure id="f0001" num="1A,1B"><img id="if0001" file="imgf0001.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="65"> --><figure id="f0002" num="2A,2B"><img id="if0002" file="imgf0002.tif" wi="143" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="66"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="118" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="67"> --><figure id="f0004" num="4A,4B,4C"><img id="if0004" file="imgf0004.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="68"> --><figure id="f0005" num="5A,5B,5C"><img id="if0005" file="imgf0005.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="69"> --><figure id="f0006" num="6A,6B,6C"><img id="if0006" file="imgf0006.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="70"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="121" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="71"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="135" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="72"> --><figure id="f0009" num="9A,9B"><img id="if0009" file="imgf0009.tif" wi="165" he="216" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="73"> --><figure id="f0010" num="10A,10B"><img id="if0010" file="imgf0010.tif" wi="165" he="223" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="74"> --><figure id="f0011" num="11A,11B,11C"><img id="if0011" file="imgf0011.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="75"> --><figure id="f0012" num="12A,12B,12C"><img id="if0012" file="imgf0012.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="76"> --><figure id="f0013" num="13A,13B"><img id="if0013" file="imgf0013.tif" wi="165" he="186" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="77"> --><figure id="f0014" num="14A,14B"><img id="if0014" file="imgf0014.tif" wi="165" he="206" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="78"> --><figure id="f0015" num="15"><img id="if0015" file="imgf0015.tif" wi="165" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="79"> --><figure id="f0016" num="16A,16B,16C,16D"><img id="if0016" file="imgf0016.tif" wi="164" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="80"> --><figure id="f0017" num="17A,17B"><img id="if0017" file="imgf0017.tif" wi="157" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="81"> --><figure id="f0018" num="18"><img id="if0018" file="imgf0018.tif" wi="165" he="153" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="82"> --><figure id="f0019" num="19A,19B"><img id="if0019" file="imgf0019.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="83"> --><figure id="f0020" num="20A,20B"><img id="if0020" file="imgf0020.tif" wi="165" he="207" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="84"> --><figure id="f0021" num="21A,21B"><img id="if0021" file="imgf0021.tif" wi="165" he="212" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="85"> --><figure id="f0022" num="22"><img id="if0022" file="imgf0022.tif" wi="165" he="230" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="86"> --><figure id="f0023" num="23"><img id="if0023" file="imgf0023.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="87"> --><figure id="f0024" num="24"><img id="if0024" file="imgf0024.tif" wi="164" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="230" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="228" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
