<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960842-A1" country="EP" doc-number="2960842" kind="A1" date="20151230" family-id="50979644" file-reference-id="297135" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451838" ucid="EP-2960842-A1"><document-id><country>EP</country><doc-number>2960842</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14173552-A" is-representative="YES"><document-id mxw-id="PAPP193866644" load-source="docdb" format="epo"><country>EP</country><doc-number>14173552</doc-number><kind>A</kind><date>20140623</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193866645" load-source="patent-office" format="original"><country>EP</country><doc-number>14173552.2</doc-number><date>20140623</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162030344" ucid="EP-14173552-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>14173552</doc-number><kind>A</kind><date>20140623</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988520872" load-source="docdb">G07C   9/00        20060101ALI20141208BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988524500" load-source="docdb">G06Q  10/10        20120101AFI20141208BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526908" load-source="docdb">G07C   1/00        20060101ALN20141208BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1699660099" load-source="docdb" scheme="CPC">H04W   4/80        20180201 LA20180203BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1836132341" load-source="docdb" scheme="CPC">G07C   9/00111     20130101 LI20141128BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1836132342" load-source="docdb" scheme="CPC">G07C   1/10        20130101 LI20170316BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1922873405" load-source="docdb" scheme="CPC">H04W  12/10        20130101 LI20160707BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1922876394" load-source="docdb" scheme="CPC">H04L  63/123       20130101 LA20160707BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987787022" load-source="docdb" scheme="CPC">G06Q  10/1091      20130101 FI20141128BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546980" lang="DE" load-source="patent-office">Zeiteingabeaufzeichnungssystem</invention-title><invention-title mxw-id="PT165546981" lang="EN" load-source="patent-office">Time entry recording system</invention-title><invention-title mxw-id="PT165546982" lang="FR" load-source="patent-office">Système d'enregistrement d'entrée temporelle</invention-title><citations><patent-citations><patcit mxw-id="PCIT335962555" load-source="docdb" ucid="EP-2453398-A1"><document-id format="epo"><country>EP</country><doc-number>2453398</doc-number><kind>A1</kind><date>20120516</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962556" load-source="docdb" ucid="EP-2487629-A1"><document-id format="epo"><country>EP</country><doc-number>2487629</doc-number><kind>A1</kind><date>20120815</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335962557" load-source="docdb" ucid="GB-2507742-A"><document-id format="epo"><country>GB</country><doc-number>2507742</doc-number><kind>A</kind><date>20140514</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL57937447" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103322283" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>NXP BV</last-name><address><country>NL</country></address></addressbook></applicant><applicant mxw-id="PPAR1103309969" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>NXP B.V.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101646727" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>NXP B.V.</last-name><iid>100810158</iid><address><street>High Tech Campus 60</street><city>5656 AG Eindhoven</city><country>NL</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103320300" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MEYN HAUKE</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103328399" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MEYN, HAUKE</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650267" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MEYN, HAUKE</last-name><address><street>Intellectual Property and Licensing NXP Semiconductors Red Central 60 High Street</street><city>Redhill, Surrey RH1 1SH</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103321670" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>GALLO FRANCESCO</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103331638" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>GALLO, FRANCESCO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101644359" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>GALLO, FRANCESCO</last-name><address><street>Intellectual Property and Licensing NXP Semiconductors Red Central 60 High Street</street><city>Redhill, Surrey RH1 1SH</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103309925" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LESJAK CHRISTIAN MICHAEL</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103328703" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LESJAK, CHRISTIAN MICHAEL</last-name></addressbook></inventor><inventor mxw-id="PPAR1101643134" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LESJAK, CHRISTIAN MICHAEL</last-name><address><street>Intellectual Property and Licensing NXP Semiconductors Red Central 60 High Street</street><city>Redhill, Surrey RH1 1SH</city><country>GB</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101641843" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hardingham, Christopher Mark</last-name><suffix>et al</suffix><iid>101423837</iid><address><street>NXP Semiconductors Intellectual Property and Licensing Red Central 60 High Street</street><city>Redhill, Surrey RH1 1SH</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660691580" load-source="docdb">AL</country><country mxw-id="DS660611796" load-source="docdb">AT</country><country mxw-id="DS660615694" load-source="docdb">BE</country><country mxw-id="DS660702493" load-source="docdb">BG</country><country mxw-id="DS660693478" load-source="docdb">CH</country><country mxw-id="DS660615703" load-source="docdb">CY</country><country mxw-id="DS660615395" load-source="docdb">CZ</country><country mxw-id="DS660691582" load-source="docdb">DE</country><country mxw-id="DS660615704" load-source="docdb">DK</country><country mxw-id="DS660615705" load-source="docdb">EE</country><country mxw-id="DS660693797" load-source="docdb">ES</country><country mxw-id="DS660702494" load-source="docdb">FI</country><country mxw-id="DS660702647" load-source="docdb">FR</country><country mxw-id="DS660691587" load-source="docdb">GB</country><country mxw-id="DS660615706" load-source="docdb">GR</country><country mxw-id="DS660691588" load-source="docdb">HR</country><country mxw-id="DS660615396" load-source="docdb">HU</country><country mxw-id="DS660693483" load-source="docdb">IE</country><country mxw-id="DS660615711" load-source="docdb">IS</country><country mxw-id="DS660702648" load-source="docdb">IT</country><country mxw-id="DS660615712" load-source="docdb">LI</country><country mxw-id="DS660702649" load-source="docdb">LT</country><country mxw-id="DS660611797" load-source="docdb">LU</country><country mxw-id="DS660702650" load-source="docdb">LV</country><country mxw-id="DS660702659" load-source="docdb">MC</country><country mxw-id="DS660611798" load-source="docdb">MK</country><country mxw-id="DS660611803" load-source="docdb">MT</country><country mxw-id="DS660693798" load-source="docdb">NL</country><country mxw-id="DS660785306" load-source="docdb">NO</country><country mxw-id="DS660693803" load-source="docdb">PL</country><country mxw-id="DS660611804" load-source="docdb">PT</country><country mxw-id="DS660693484" load-source="docdb">RO</country><country mxw-id="DS660611805" load-source="docdb">RS</country><country mxw-id="DS660693804" load-source="docdb">SE</country><country mxw-id="DS660615397" load-source="docdb">SI</country><country mxw-id="DS660785307" load-source="docdb">SK</country><country mxw-id="DS660785308" load-source="docdb">SM</country><country mxw-id="DS660702660" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166480208" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A method of operating a time entry recording system, the system comprising a near field communication, NFC, tag associated with a function of the system, an NFC device associated with a user of the system and a computer, the method comprising: the NFC device requesting a message from the NFC tag; the NFC tag generating a message comprising an identifier of the tag and a representation of a counter value; the NFC tag sending the message to the NFC device; the NFC device generating a request comprising the identifier of the tag, an identifier of the user and a representation of the counter value in response to receiving the message; the NFC device sending the request to a computer; and the computer recording a time associated with the function of the system and the identifier of the user on verification of the counter value.
<img id="iaf01" file="imgaf001.tif" wi="88" he="91" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166760020" lang="EN" source="EPO" load-source="docdb"><p>A method of operating a time entry recording system, the system comprising a near field communication, NFC, tag associated with a function of the system, an NFC device associated with a user of the system and a computer, the method comprising: the NFC device requesting a message from the NFC tag; the NFC tag generating a message comprising an identifier of the tag and a representation of a counter value; the NFC tag sending the message to the NFC device; the NFC device generating a request comprising the identifier of the tag, an identifier of the user and a representation of the counter value in response to receiving the message; the NFC device sending the request to a computer; and the computer recording a time associated with the function of the system and the identifier of the user on verification of the counter value.</p></abstract><description mxw-id="PDES98404909" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">The invention relates to the field of time entry recording systems.</p><p id="p0002" num="0002">Time entry recording systems are used, for example, to record the attendance of employees. Typically, an employee will sign in at the beginning of the working day and sign out at the end of his shift.</p><p id="p0003" num="0003">A known way to implement a time recording system is to supply a register book that people can physically sign in and out of. One disadvantage of this method is that the times recorded in the register are determined by the person whose attendance is being recorded and so a late attendee can easily falsify an earlier recorded time of attendance. A further disadvantage of this manual record of attendance is that the information in the register cannot be easily searched or processed. This later disadvantage can be addressed by providing a computer terminal with a spreadsheet or database that people can sign in and out of. In the case where the computer logs the sign in or sign out time, such a solution can also address the above problem of potential deception associated with self-certified time entries.</p><p id="p0004" num="0004">In some computerised systems an electronic swipe card is associated with each user of the system. The user can sign in or out by swiping the card over a dedicated card reader. The system then logs the time of the swipe and the identity of the card swiped.</p><p id="p0005" num="0005">A further problem experienced in the above systems is that people can sign in and sign out on each other's behalf. In the case of swipe cards this may be achieved by users of the system copying the swipe cards, or by lending their cards to one another so that the earliest arrival can sign in on behalf of several people.</p><p id="p0006" num="0006">According to a first aspect of the present invention there is provided a method of operating a time entry recording system, the system comprising a near field communication, NFC, tag associated with a function of the system, an NFC device associated with a user of the system and a computer, the method comprising:
<ul><li>the NFC device requesting a message from the NFC tag;</li><li>the NFC tag generating a message comprising an identifier of the tag and a representation of a counter value;</li><li>the NFC tag sending the message to the NFC device;<!-- EPO <DP n="2"> --></li><li>the NFC device generating a request comprising the identifier of the tag, an identifier of the user and a representation of the counter value in response to receiving the message;</li><li>the NFC device sending the request to a computer; and</li><li>the computer recording a time associated with the function of the system and the identifier of the user on verification of the counter value.</li></ul></p><p id="p0007" num="0007">The function of the system may be to record an arrival (sign in) or a departure (sign out), for example. The NFC device may be provided by a mobile computer or telephone, and may belong to the user of the system. The counter of the tag can be configured to amend the counter value in response to receiving the request from the NFC device according to a predetermined function, which may be as simple as incrementing the counter value. The method can provide that only a phone (and its user) that was in actual physical proximity of the tag, and no other party (such as a hacker or an attacker), is able to access the computer and record a time entry. Users of time entry systems tend not to share their mobile telephones with one another because such devices often contain personal information.</p><p id="p0008" num="0008">The identifier of the user may comprise authentication data. The computer may generate a request for the user authentication data from the NFC device. The request for the user authentication data may comprise a log-on or password screen. The user authentication data may comprise a password, personal identification code or biometric information associated with the user. Biometric information includes a finger or thumb print, iris scan, or voice pattern of the user, for example. The combination of requesting user authentication and the use of a counter provides a more secure system because a registered user can be discouraged from making anonymous requests that contain invalid counter details without risking detection. As such, an attacker can be discouraged from attempting a trial-and-error-type attack in which a large number of anonymous requests with different possible counter values are attempted in order to obtain a service from the computer. This is because such an attack would have to be associated with a registered user in order to have the possibility of obtaining a service and the unsuccessful attempts may be logged so that action can be taken against the user.</p><p id="p0009" num="0009">The method may further comprise the NFC tag obfuscating or encrypting the counter value before generating the message. The NFC tag may apply a hash function to the counter value to provide a hashed counter value. The computer may generate one or more hashed expected values corresponding to one or more expected counter values. The one or more<!-- EPO <DP n="3"> --> expected values may be the subsequent values in a counter value sequence to the most recently received counter value from the tag. The computer may compare the hashed counter value with the one or more hashed expected values in order to determine the counter value from the tag.</p><p id="p0010" num="0010">The counter value may comprise a time or clock function in order to identify when a device has read the tag and delayed sending a request to the server. A request may not be verified if the counter value is lower than (or earlier in a predetermined sequence than) the last verified counter value, or more than a predetermined number of counts greater than (or later in the predetermined sequence than) the last verified counter value. In the case where the counter value provides a time or clock function, the request may not be verified if a predetermined period of time has elapsed since the time indicated by the counter value.</p><p id="p0011" num="0011">The method may further comprise the NFC tag signing the message, or at least the counter value and/or the tag identifier, before sending the message to the NFC device.</p><p id="p0012" num="0012">The message may comprise a uniform resource identifier, URI, for the computer. The URI may include the counter value and the identifier of the tag. The computer may be a remote server on the internet. The uniform resource identifier may be an internet address associated with the computer. An identifier for the computer may be stored on the NFC device.</p><p id="p0013" num="0013">The NFC device may perform the step of requesting a message and/or generating a request using generic software. Generic software may be able to perform a number of non-proprietary functions or may have standard functions for interacting with other software.</p><p id="p0014" num="0014">The message may be an NFC Data Exchange Format, NDEF, message.</p><p id="p0015" num="0015">The method may further comprise the NFC device including sensor data in the message and/or the request. The sensor data may comprise the identifier for the user. The computer may use the sensor data in order to verify the identifier of the user. The method may further comprise the NFC device taking a photograph, such as a photograph of the user, in order to provide the sensor data. The method may further comprise the NFC device recording audio, such as a voice of the user, in order to provide the sensor data. The sensor data may comprise biometric information.<!-- EPO <DP n="4"> --></p><p id="p0016" num="0016">According to a further aspect of the invention there is provided a time entry recording system tag comprising:
<ul><li>a counter for providing a representation of a counter value;</li><li>an identifier of the tag; and</li><li>a message generator configured, in response to receiving a request from a NFC device associated with a user of the time entry recording system, to provide the NFC device with a message comprising the identifier of the tag and the representation of the counter value, and at least a signature-protected counter value and identifier,<br/>
wherein the tag is associated with a function of the time entry recording system.</li></ul></p><p id="p0017" num="0017">According to a further aspect of the invention there is provided a computer for a time entry recording system, configured to:
<ul><li>receive a request from a NFC device, the request comprising:
<ul><li>an identifier of the tag that is associated with a function of a time entry recording system, and</li><li>a representation of a counter value;</li></ul></li><li>verify the counter value; and</li><li>verify the signature value; and</li><li>record a time associated with the function of the system and a user of the NFC device.</li></ul></p><p id="p0018" num="0018">According to a further aspect of the invention there is provided a building comprising a tag as described above mounted on, which includes inside, the building.</p><p id="p0019" num="0019">Also disclosed is a system, for example a time entry recording system, comprising a near field communication, NFC, tag associated with a function of the system, an NFC device associated with a user of the system and a computer.</p><p id="p0020" num="0020">Embodiments will now be described by way of example with reference to the accompanying figure, in which Figure 1 illustrates a time entry recording system that is used to illustrate a method of operating the time entry recording system.</p><p id="p0021" num="0021">Identification products, such as smart cards and RFID tags, are widely used in fields such as transport (ticketing, road tolling, baggage tagging), finance (debit and credit cards, electronic purse, merchant card), communications (SIM card for GSM phone), and tracking (access control, inventory management, asset tracking). RFID is an acronym of radio frequency identification. International standard ISO14443A is the industry standard for<!-- EPO <DP n="5"> --> contactless smart cards. ISO14443A-compliant products such as MIFARE provide RF communication technology for transmitting data between a card or tag and a reader device. For example, in electronic ticketing for public transport, travelers wave their card over a reader at the turnstiles or entry point, benefiting from improved convenience and speed in the ticketing process. Such products are said to be the key to individual mobility in the future, supporting multiple applications including road tolling, airline tickets, access control and many more.</p><p id="p0022" num="0022">Evolving from a combination of contactless identification and networking technologies, near field communication (NFC) is a very short-range wireless technology, for distances measured in centimeters. NFC technology can be applied to consumer electronics devices such as mobile telephones and personal computers, for example.</p><p id="p0023" num="0023">NFC has been described on the website http://www.nxp.com/nfc and in the standard ISO/IEC 18092. NFC technology is optimized for intuitive, easy and secure communication between various devices without the need for manual configuration by a user. In order to make two devices communicate, users bring them close together or make them touch. The devices comprise NFC interfaces that will automatically connect and configure themselves to form a peer-to-peer network. NFC can also bootstrap other protocols like Bluetooth or wireless Ethernet (Wi-Fi) by exchanging configuration and session data. NFC is compatible with contactless smart card platforms. This enables NFC devices to read information from these cards, making contactless smart cards the ideal solution for bringing information and vouchers into the NFC world. NFC devices can also operate like a contactless card or tag, which makes them compatible with the existing infrastructure of ISO14443A-compliant systems.</p><p id="p0024" num="0024">The NFC Forum (http://www.nfc-forum.org/) is a non-profit industry association which promotes the use of NFC short-range wireless interaction in the fields of consumer electronics, mobile devices and personal computers. The NFC Forum promotes the implementation and standardization of NFC technology to ensure interoperability between devices and services.</p><p id="p0025" num="0025">Figure 1 illustrates a time entry recording system. The time entry recording system 100 comprises a near field communication, NFC, tag 102, an NFC device 104 associated with a user of the system 100 and a computer 106. The NFC device 104 may be provided by an NFC enabled smart phone and the computer 106 acts as a backend information system, or server.<!-- EPO <DP n="6"> --></p><p id="p0026" num="0026">The NFC tag 102 is associated with a function of the system 100. Examples of functions of the system include "sign in" and "sign out". The tag 102 in this example is configured to provide a number of NFC functions, including an ID-MIRROR, a COUNTER-ENGINE, a KEY, a SIGNATURE-ENGINE and to generate a NFC data exchange format, NDEF, message. The message is a data structure that may be stored in a computerized memory or transmitted in a network of two or more apparatus.</p><p id="p0027" num="0027">The ID-MIRROR function provides a TAG-ID which acts as an identifier of the tag 102 that enables the tag 102 to be uniquely identified in the context of the system 100. The TAG-ID may be stored in a memory of the tag 102. The TAG-ID can be incorporated into the NDEF message at a predefined location, using the ID-MIRROR functionality.</p><p id="p0028" num="0028">The COUNTER-ENGINE function updates a COUNTER-VALUE (according to a specific rule) upon each tag read and incorporates the COUNTER-VALUE into the NDEF message at a predefined location. The COUNTER-VALUE generated in this example is not in an obvious form. For example, the COUNTER-VALUE may appear to be a pseudo-random number (which is an example of an obfuscated COUNTER-VALUE) or may be encrypted using a secret key (to provide an encrypted COUNTER-VALUE). The obfuscated or encrypted COUNTER-VALUEs are each an example of a representation of a COUNTER-VALUE. The COUNTER-VALUE itself can also be considered to be a representation of the COUNTER-VALUE. An encrypted COUNTER-VALUE can be derived from an internal, private counter within the COUNTER-ENGINE by applying a hash or encryption function. By obfuscating or encrypting the counter value it is harder for an attacker to determine the actual COUNTER-VALUE and easier to keep the number of tag taps, or reads, private.</p><p id="p0029" num="0029">The SIGNATURE-ENGINE calculates a digital signature over a pre-defined memory area of the NDEF message, including the COUNTER-VALUE and TAG-ID, using a pre-defined, secret key. The SIGNATURE-ENGINE then incorporates the SIGNATURE-VALUE into the NDEF message at a predefined location.</p><p id="p0030" num="0030">The SIGNATURE-VALUE can, for example, be based on either:
<ul><li>Asymmetric cryptography, such as elliptic curve digital signature algorithm, ECDSA, where a secret, private key is stored securely inside the tag and the computer 106 knows the corresponding public key (via the TAG-ID), or<!-- EPO <DP n="7"> --></li><li>Symmetric cryptography, such as a hash message authentication code, HMAC (but also any other MAC), where a secret key is stored securely inside the tag and shared with the computer 106 (via the TAG-ID).</li></ul></p><p id="p0031" num="0031">The NFC tag 102 is configured to receive a read command and, in response to being read, generate the NDEF message. The NDEF message generated by the tag 102 therefore comprises the TAG-ID, COUNTER VALUE and SIGNATURE-VALUE. The generated NDEF message is then sent to the NFC device 104 by the tag 102.</p><p id="p0032" num="0032">The device 104 is an NFC Forum device and to is capable of reading the NDEF message according to the NFC Forum Type Tag Operation specification. The device 104 is also capable of generating a REQUEST for sending to the server 106 including information received from the tag 102. That is, the REQUEST includes the TAG-ID, COUNTER VALUE and SIGNATURE-VALUE. The REQUEST also includes an identifier for the user (not shown) which may include data associated with the device 104. The identifier may, for example, be a serial number associated with the device 104 or with a service identification module associated with the device 104. The identifier may comprise user authentication information, which may be requested from the user dynamically or stored on the device. In the case where the information is requested from the user, the information may comprise a password, personal identification code or biometric information associated with the user. In the case where the information is stored on the device, the authentication or identification information may be provided in a secure area of memory of the device 104 to make the device 104 less "clonable" and so the system 100 more secure.</p><p id="p0033" num="0033">The REQUEST to the computer 106 is a data structure that may be stored in a computerized memory or transmitted in a network of two or more apparatus. The REQUEST to the computer 106 may be any kind of internet based communication, such as a request to access a website, download data representative of a specific content, or a communication with a web-service offered by the server. The REQUEST endpoint may either be indicated by a universal resource identifier, URI, which is provided in the NDEF message generated by the NFC tag 102, or may be known to software on the device 104 that processes the data received from the NFC tag 102 and carries out the request.</p><p id="p0034" num="0034">The reading and requesting functionality of the device 104 may be implemented using generic software. The generic software may be able to perform a number of non-proprietary functions or may have standard functions for interacting with other software. The generic software may only use open protocols that are available to the public so that<!-- EPO <DP n="8"> --> third party developers can implement them in software. A web browser is an example of a piece of generic software because the functions of communicating with a web server are the subject of agreed standards; HTML and CSS are examples of open protocols. The NDEF message format is also an example of an open protocol.</p><p id="p0035" num="0035">The computer 106 is configured to receive the REQUEST from the device 104. The REQUEST can be sent to the computer 106 via the internet.</p><p id="p0036" num="0036">For REQUEST verification, the server in this example utilizes a database DB of all TAG-IDs in the system 100 and corresponding cryptographic keys for signature verification, and a set of all COUNTER-VALUEs received from each tag 102. On verification of the COUNTER-VALUE in the request, the computer 106 provides a service that includes recording a time that is associated with both the function of the system (for example "sign in" or "sign out") that corresponds to the tag 102 and the identifier of the user.</p><p id="p0037" num="0037">Using the COUNTER-VALUE, the computer 106 can track the number of tag reads. Each tag read need not necessarily have resulted in a REQUEST being sent to the computer 106. For example, if the reading device 104 was offline, or did not have an application installed to create and send the REQUEST to the computer 106.</p><p id="p0038" num="0038">In order to verify the COUNTER-VALUE, the computer 106 determines the COUNTER-VALUE from the obfuscated COUNTER-VALUE. For a COUNTER-VALUE obfuscated by a hash function, this may be achieved by calculating hash values for one or more, optionally a range of, expected next counter values (depending on previously received COUNTER-VALUES) and comparing the hash values with the received COUNTER-VALUE. If two hash values match, the computer 106 has determined the corresponding COUNTER-VALUE. The corresponding COUNTER-VALUE can be used to verify the REQUEST. The possibility of there being gaps in the received COUNTER-VALUE sequences means that a received COUNTER-VALUE may be a pre-determined number of counts further along the sequence than the last received counter value. For this reason, the computer 106 may compare the received hashed COUNTER-VALUE with a number of potential hashed COUNTER-VALUEs in order to identify the corresponding COUNTER-VALUE. For a COUNTER-VALUE obfuscated by encryption, the computer 106 takes the corresponding secret or public key to recover the actual COUNTER-VALUE. In this case, the actual COUNTER-VALUE can be used to verify the REQUEST.<!-- EPO <DP n="9"> --></p><p id="p0039" num="0039">Multiple REQUESTS with the same COUNTER-VALUE can be rejected as invalid. A record of invalid tag reads by a user may be made so that attempted deception can be determined.</p><p id="p0040" num="0040">The system illustrated in Figure 1 enables a time entry recording system comprising a sign in or sign out tag to be implemented and is discussed below with reference to the numerals 1 to 9.</p><p id="p0041" num="0041">Two dedicated tags 102 can be mounted at the entrance to a building. One tag is associated with the sign in, or "come", function, and the other tag is associated with the sign out, or "leave", function. Once an employee enters the building in the morning, he touches the "come" tag with his smart phone 104, which forwards information regarding his arrival to the backend computer 106. When the employee leaves at the end of the day, he touches the "leave" tag, which forwards information regarding his departure to the backend computer 106. In both cases, the backend computer 106 uses the method presented below to detect potential misuse of, or attacks on, the system 100 such as by an employee lying about when he actually left by using modified phone software that postpones sending the "leave" request to the computer 106 or if an unauthorized user is attempting to interact with the time entry recording system. In this way, the security and integrity of the system is improved.</p><p id="p0042" num="0042">The device 104 sends 1 a read command to initiate the process of reading an NDEF message from the tag 102. As a consequence, the tag 102 dynamically generates the NDEF message in the following steps 2 to 5. The order of steps 2 to 5 can, in general, be varied.</p><p id="p0043" num="0043">The tag 102 incorporates 2 the TAG-ID into the NDEF message using the ID-MIRROR function. The TAG-ID is used by the computer 106 to know which tag 102 was involved and infer the correct function (such as arrive or leave) associated with the tag.</p><p id="p0044" num="0044">The tag 102 changes, by increasing or incrementing for example, the COUNTER-VALUE and incorporates the changed COUNTER-VALUE into the NDEF message using the COUNTER-ENGINE function. The COUNTER-ENGINE function of the tag 102 also saves or overwrites the COUNTER-VALUE that is stored in the memory of the tag 102 with the changed COUNTER-VALUE. The COUNTER-VALUE may comprise time information in order to reduce the risk of a modified device reading the tag 102 and sending a delayed request to the server.<!-- EPO <DP n="10"> --></p><p id="p0045" num="0045">The tag 102 optionally copies 4 additional dynamic data from external sources, such as sensors, into the NDEF message. The sensors may collect biometric data from the user. The sensor data may comprise an image of the user or a sound recording which may be verified as being attributable to the user by the computer 106. In addition or alternatively, the device 104 may obtain the image or sound recordings using built in sensors, as discussed below in step 6.</p><p id="p0046" num="0046">The tag 102 calculates 5 the SIGNATURE-VALUE over a defined area of the NDEF message, covering at least the COUNTER-VALUE and TAG-ID. In general, one more portions of the NDEF message (with the exception of the SIGNATURE-VALUE) may be included into the SIGNATURE-VALUE. The securely stored KEY may be used for the SIGNATURE-VALUE calculation. The SIGNATURE-VALUE is incorporated into the NDEF message.</p><p id="p0047" num="0047">The tag 102 transfers 6 the content of the NDEF message to the device 104. When received, the device 104 builds the REQUEST to be sent to the computer 106. The REQUEST includes the optional DATA, as well as the TAG-ID, COUNTER-VALUE, and the SIGNATURE-VALUE, all as received from the tag 102. The device 104 may also at this stage capture the optional data by recording audio with a microphone or taking a photograph with a camera of the device 104.</p><p id="p0048" num="0048">The device 104 sends 7 the REQUEST to the computer 106. The endpoint (the address of the computer 106) is specified either in an optional universal resource identifier, URI, which may be part of the previously received NDEF message, or in memory associated with the device 104, for example as part of its software configuration. The URI may be a universal resource locator, URL. The URL may comprise the TAG-ID and COUNTER-VALUE.</p><p id="p0049" num="0049">An attacker against a system is anyone who aims to circumvent the intended purpose of the system. An attacker may, for example, attempt to exploit the system by modifying software running on the device 104. Hence, the computer 106 needs to validate incoming REQUESTS in order to determine whether they originate from a legitimate user or from the attacker.</p><p id="p0050" num="0050">The computer 106 receives 8 the REQUEST and validates it, for example, by -
<ul><li>Querying the database (DB) and checking that the TAG-ID is known.<!-- EPO <DP n="11"> --></li><li>Querying the database and retrieving the KEY associated with the SIGNATURE-VALUE.</li><li>Verifying whether the SIGNATURE-VALUE from the REQUEST is correct using the KEY.
<ul><li>o This ensures that the REQUEST is authentic (from the tag 102).</li></ul></li><li>Querying the database DB for previous COUNTER-VALUEs from this TAG-ID and checking that the received COUNTER-VALUE is later in a predetermined sequence of the COUNTER-VALUEs.
<ul><li>o This ensures that the REQUEST is unique and determines the sequence in which tag reads of multiple users are made because no new COUNTER-VALUEs that are smaller than or equal to the last received COUNTER-VALUE are accepted as valid by the computer 106. Furthermore, proximity between the tag 102 and device 104 has been proven because the REQUEST must have been created by the device 104 touching the tag 102 (due to the signature and the ever increasing counter).</li></ul></li><li>If the REQUEST includes the optional DATA, the integrity and authenticity of this DATA is verifiable for the server using, for example, image or voice recognition or other biometric authentication protocols.</li><li>Updating the database DB by adding the newly received COUNTER-VALUE for the TAG-ID.</li><li>If any of the above steps fail, the attempt is logged by the computer 106 and REQUEST is rejected.</li></ul></p><p id="p0051" num="0051">The computer 106 provides 9 the service of recording a time associated with the function of the system and the identifier of the user on verification of the TAG-ID, COUNTER-VALUE and optional DATA. This may optionally comprise sending data to the device 104, such as an acknowledgement, receipt or other information or electronic resource. For example, the computer may indicate to the user via the device 104 that his "come" or "leave" indication has been successfully recorded.</p><p id="p0052" num="0052">It will be appreciated that any reference to "higher than", "greater than, "lower than", or "less than, etc, can refer to the parameter in question being less than or greater than a threshold value, or between two threshold values, depending upon the context.</p></description><claims mxw-id="PCLM90459860" lang="EN" load-source="patent-office"><!-- EPO <DP n="12"> --><claim id="c-en-0001" num="0001"><claim-text>A method of operating a time entry recording system, the system comprising a near field communication, NFC, tag associated with a function of the system, an NFC device associated with a user of the system and a computer, the method comprising:
<claim-text>the NFC device requesting a message from the NFC tag;</claim-text>
<claim-text>the NFC tag generating a message comprising an identifier of the tag and a representation of a counter value;</claim-text>
<claim-text>the NFC tag sending the message to the NFC device;</claim-text>
<claim-text>the NFC device generating a request comprising the identifier of the tag, an identifier of the user and a representation of the counter value in response to receiving the message;</claim-text>
<claim-text>the NFC device sending the request to a computer; and</claim-text>
<claim-text>the computer recording a time associated with the function of the system and the identifier of the user on verification of the counter value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1 wherein the identifier of the user comprises authentication data.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 1 or claim 2 further comprising the NFC tag obfuscating or encrypting the counter value before generating the message.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of claim 3 comprising:
<claim-text>the NFC tag applying a hash function to the counter value to provide a hashed counter value;</claim-text>
<claim-text>the computer generating one or more hashed expected values corresponding to one or more expected counter values; and</claim-text>
<claim-text>the computer comparing the hashed counter value with the one or more hashed expected values in order to determine the counter value from the tag.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of any preceding claim further comprising the NFC tag signing the message (or at least the counter value and the tag identifier) before sending the message to the NFC device.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of any preceding claim wherein the message comprises a uniform resource identifier, URI, for the computer, wherein the URI includes the counter value and the identifier of the tag.<!-- EPO <DP n="13"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of any of claims 6 wherein the computer is a remote server on the internet and the uniform resource identifier is an internet address associated with the computer.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of any of claims 1 to 5 wherein an identifier for the computer is stored on the NFC device.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of any preceding claim wherein the NFC device performs the step of requesting a message and generating the request using generic software.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of any preceding claim wherein the message is an NFC Data Exchange Format, NDEF, message.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method of any preceding claim further comprising:
<claim-text>the NFC device including sensor data in the message and/or the request; and</claim-text>
<claim-text>the computer using the sensor data in order to verify the identifier of the user.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of claim 11 further comprising the NFC device taking a photograph or recording audio in order to provide the sensor data.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A time entry recording system tag comprising:
<claim-text>a counter for providing a representation of a counter value;</claim-text>
<claim-text>an identifier of the tag; and</claim-text>
<claim-text>a message generator configured, in response to receiving a request from a NFC device associated with a user of the time entry recording system, to provide the NFC device with a message comprising the identifier of the tag and the representation of the counter value, and at least a signature-protected counter value and identifier,<br/>
wherein the tag is associated with a function of the time entry recording system.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A computer for a time entry recording system, configured to:
<claim-text>receive a request from a NFC device, the request comprising:
<claim-text>an identifier of the tag that is associated with a function of a time entry recording system, and</claim-text>
<claim-text>a representation of a counter value;</claim-text></claim-text>
<claim-text>verify the counter value; and</claim-text>
<claim-text>verify the signature value; and<!-- EPO <DP n="14"> --></claim-text>
<claim-text>record a time associated with the function of the system and a user of the NFC device upon verification of the counter value and the signature value.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A building comprising a tag according to claim 13 mounted on the building.</claim-text></claim></claims><drawings mxw-id="PDW20422571" load-source="patent-office"><!-- EPO <DP n="15"> --><figure id="f0001" num=","><img id="if0001" file="imgf0001.tif" wi="165" he="172" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
