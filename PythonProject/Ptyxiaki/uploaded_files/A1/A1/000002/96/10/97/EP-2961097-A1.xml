<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961097-A1" country="EP" doc-number="2961097" kind="A1" date="20151230" family-id="48722392" file-reference-id="310637" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451235" ucid="EP-2961097-A1"><document-id><country>EP</country><doc-number>2961097</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13876024-A" is-representative="YES"><document-id mxw-id="PAPP193865438" load-source="patent-office" format="original"><country>EP</country><doc-number>13876024.4</doc-number><date>20130917</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP193865439" load-source="docdb" format="epo"><country>EP</country><doc-number>13876024</doc-number><kind>A</kind><date>20130917</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162032691" ucid="CN-2013083676-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2013083676</doc-number><kind>W</kind><date>20130917</date></document-id></priority-claim><priority-claim mxw-id="PPC162032705" ucid="CN-201310055694-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201310055694</doc-number><kind>A</kind><date>20130221</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1976508063" load-source="docdb">H04L  29/08        20060101ALI20160126BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1976518741" load-source="docdb">H04L  12/24        20060101AFI20160126BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1649372931" load-source="docdb" scheme="CPC">H04L  67/34        20130101 LI20180418BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1649372932" load-source="docdb" scheme="CPC">H04L  41/082       20130101 LI20180418BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1949002634" load-source="docdb" scheme="CPC">G06F   8/65        20130101 FI20160414BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545171" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM FÜR FIRMWARE-AUFRÜSTUNG</invention-title><invention-title mxw-id="PT165545172" lang="EN" load-source="patent-office">FIRMWARE UPGRADE METHOD AND SYSTEM</invention-title><invention-title mxw-id="PT165545173" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME DE MISE À NIVEAU DE MICROLOGICIEL</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103302810" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZTE CORP</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR1103332147" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZTE CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR1101651819" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ZTE Corporation</last-name><iid>101115168</iid><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen, Guangdong 518057</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103318366" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MA MIAOMIAO</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313359" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MA, MIAOMIAO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101653940" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MA, MIAOMIAO</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103306115" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>YANG YONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103304557" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>YANG, YONG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101651274" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>YANG, YONG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103306803" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>YANG SHUANG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310616" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>YANG, SHUANG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101653162" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>YANG, SHUANG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310783" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>YANG QI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103316063" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>YANG, QI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648421" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>YANG, QI</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103306454" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>XU RONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342604" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>XU, RONG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648371" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>XU, RONG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101646430" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Mozzi, Matteo</last-name><suffix>et al</suffix><iid>101212704</iid><address><street>Jacobacci &amp; Partners S.p.A. Via Senato, 8</street><city>20121 Milano</city><country>IT</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2013083676-W"><document-id><country>CN</country><doc-number>2013083676</doc-number><kind>W</kind><date>20130917</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014127628-A1"><document-id><country>WO</country><doc-number>2014127628</doc-number><kind>A1</kind><date>20140828</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660682312" load-source="docdb">AL</country><country mxw-id="DS660684344" load-source="docdb">AT</country><country mxw-id="DS660682314" load-source="docdb">BE</country><country mxw-id="DS660604201" load-source="docdb">BG</country><country mxw-id="DS660782314" load-source="docdb">CH</country><country mxw-id="DS660681754" load-source="docdb">CY</country><country mxw-id="DS660684345" load-source="docdb">CZ</country><country mxw-id="DS660681817" load-source="docdb">DE</country><country mxw-id="DS660681759" load-source="docdb">DK</country><country mxw-id="DS660681760" load-source="docdb">EE</country><country mxw-id="DS660607187" load-source="docdb">ES</country><country mxw-id="DS660604202" load-source="docdb">FI</country><country mxw-id="DS660604211" load-source="docdb">FR</country><country mxw-id="DS660682323" load-source="docdb">GB</country><country mxw-id="DS660682324" load-source="docdb">GR</country><country mxw-id="DS660682325" load-source="docdb">HR</country><country mxw-id="DS660684346" load-source="docdb">HU</country><country mxw-id="DS660782315" load-source="docdb">IE</country><country mxw-id="DS660682326" load-source="docdb">IS</country><country mxw-id="DS660604212" load-source="docdb">IT</country><country mxw-id="DS660681761" load-source="docdb">LI</country><country mxw-id="DS660681818" load-source="docdb">LT</country><country mxw-id="DS660684359" load-source="docdb">LU</country><country mxw-id="DS660681823" load-source="docdb">LV</country><country mxw-id="DS660681824" load-source="docdb">MC</country><country mxw-id="DS660606974" load-source="docdb">MK</country><country mxw-id="DS660606979" load-source="docdb">MT</country><country mxw-id="DS660607188" load-source="docdb">NL</country><country mxw-id="DS660604213" load-source="docdb">NO</country><country mxw-id="DS660607189" load-source="docdb">PL</country><country mxw-id="DS660782316" load-source="docdb">PT</country><country mxw-id="DS660607190" load-source="docdb">RO</country><country mxw-id="DS660782317" load-source="docdb">RS</country><country mxw-id="DS660607191" load-source="docdb">SE</country><country mxw-id="DS660782318" load-source="docdb">SI</country><country mxw-id="DS660606980" load-source="docdb">SK</country><country mxw-id="DS660606981" load-source="docdb">SM</country><country mxw-id="DS660681762" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479605" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Provided are a method and system for upgrading firmware. The method includes: an upgrading control single board receives a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information; the upgrading control single board determines, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and the upgrading control single board acquires, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded. According to the solution, under a power-on state of a bare single board to be upgraded, remote firmware upgrading can be performed for the single board, so that the risk of influence of firmware upgrading operation on normal running of the system is lowered.<img id="iaf01" file="imgaf001.tif" wi="78" he="63" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759417" lang="EN" source="EPO" load-source="docdb"><p>Provided are a method and system for upgrading firmware. The method includes: an upgrading control single board receives a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information; the upgrading control single board determines, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and the upgrading control single board acquires, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded. According to the solution, under a power-on state of a bare single board to be upgraded, remote firmware upgrading can be performed for the single board, so that the risk of influence of firmware upgrading operation on normal running of the system is lowered.</p></abstract><description mxw-id="PDES98404306" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b><u>Technical Field</u></b></heading><p id="p0001" num="0001">The present invention relates to the field of communication, and in particular to a method and system for upgrading firmware.</p><heading id="h0002"><b><u>Background</u></b></heading><p id="p0002" num="0002">With the emergence of information age, popularization of Personal Computers (PC) and wide application of the Internet, computer information technologies have been effectively combined with various walks of life, various emerging technologies and emerging services continuously appear, and requirements of users on data bandwidths increase at the same time. In order to meet a high-bandwidth requirement of an individual user, an operating company requires network equipment to have high capacity and high access and processing performance. In order to meet requirements on high capacity and high access and processing performance, most of network equipment in the related art adopts a distributed system deployed with a large number of Central Processing units (CPU).</p><p id="p0003" num="0003">Firmware is software embedded into a hardware device, and may be updated by a user. Firmware upgrading refers to improving a working program or source code in hardware by virtue of a special upgrading program to achieve an improvement in compatibility, performance or functions. A difference between firmware upgrading and driver updating is that the firmware upgrading is the updating from a bottom layer of a machine, which is more direct and effective, and is more obvious in performance improvement. Along with gradual popularization and large-scale use of a multi-processor distributed system to the telecommunication industry and increase of a requirement of a user on performance of network equipment, the firmware upgrading of a single board must be more frequent.</p><p id="p0004" num="0004">Joint Test Action Group (JTAG) is an international standard test protocol (IEEE 1149.1) which has been widely adopted by electronic enterprises throughout the world. Up to now, almost all large-scale and complicated digital circuits are compatible with IEEE 1149.1. Firmware upgrading by virtue of a JTAG interface also becomes a mainstream gradually.</p><p id="p0005" num="0005">One of the methods for upgrading firmware in a related art is to connect JTAG<!-- EPO <DP n="2"> --> devices of the entire single board into a daisy chain form in series, set one or more JTAG interfaces according to a practical condition and perform scanning and firmware data loading on all the JTAG devices of the single board through a JTAG socket. However, the method has defects as follows:
<ol><li>(1) firmware upgrading data may be loaded only through the JTAG socket, which causes inconvenience in field maintenance; and</li><li>(2) firmware data cannot be remotely upgraded.</li></ol></p><p id="p0006" num="0006">According to another method for upgrading firmware in the related art, information interaction is performed between a subrack management board and a single board to be upgraded, a target file stored by the subrack management board is loaded into a storage component of the single board to be upgraded, and a controller (for example: a single-chip microcomputer) of the single board to be upgraded controls to write the target file into a JTAG device or a JTAG chain to complete scanning and loading of the JTAG device or the JTAG chain. Although remote upgrading is implemented, such a solution still has shortcomings as follows:
<ol><li>(1) firmware upgrading of the subrack management board and the controller of the single board to be upgraded cannot be implemented, and part of the system still cannot be upgraded; and</li><li>(2) the controller of the single board to be upgraded is required to be in a working state, and if the controller is in a failure state for a certain reason, firmware upgrading cannot be performed.</li></ol></p><heading id="h0003"><b><u>Summary</u></b></heading><p id="p0007" num="0007">The embodiments of the present invention provide a method and system for upgrading firmware, so as to at least solve the problem that executing firmware upgrading operation by virtue of a master control single board greatly increases a risk in firmware upgrading operation in the related art.</p><p id="p0008" num="0008">According to one aspect of the embodiments of the present invention, a method for upgrading firmware is provided.</p><p id="p0009" num="0009">The method for upgrading firmware according to the embodiment of the present invention includes that: an upgrading control single board receives a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information; the upgrading control single board determines, according to the firmware upgrading parameter<!-- EPO <DP n="3"> --> information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and the upgrading control single board acquires, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</p><p id="p0010" num="0010">In an example embodiment, before the step that the upgrading control single board receives the firmware upgrading request from the master control single board, the method further includes that: the master control single board receives state information from the upgrading control single board; the master control single board judges, according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and when it is judged by the master control single board that the upgrading control single board is not executing the firmware upgrading operation currently, the master control single board sends the firmware upgrading request to the upgrading control single board.</p><p id="p0011" num="0011">In an example embodiment, the step that the upgrading control single board determines, according to the firmware upgrading parameter information, the sublink to be upgraded includes that: the upgrading control single board acquires, according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and the upgrading control single board determines, according to the physical parameter information, the sublink to be upgraded.</p><p id="p0012" num="0012">In an example embodiment, before the step that the upgrading control single board acquires, from the master control single board, the firmware upgrading data corresponding to the sublink to be upgraded, the method further includes that: the master control single board receives a firmware upgrading data request from the upgrading control single board; and the master control single board searches, according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and sends the firmware upgrading data to the upgrading control single board.</p><p id="p0013" num="0013">In an example embodiment, before the step that the upgrading control single board receives the firmware upgrading request from the master control single board, the method further includes that: current using states of the upgrading control single board and the master control single board are both determined to be active states.</p><p id="p0014" num="0014">According to another aspect of the embodiments of the present invention, a<!-- EPO <DP n="4"> --> system for upgrading firmware is provided.</p><p id="p0015" num="0015">The system for upgrading firmware according to the embodiment of the present invention includes: at least one upgrading control single board, the upgrading control single board including: a first receiving component, configured to receive a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information; a first determination component, configured to determine, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and an upgrading component, configured to acquire, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrade, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</p><p id="p0016" num="0016">In an example embodiment, the system further includes: at least one master control single board, the master control single board including: a second receiving component, configured to receive state information from the upgrading control single board; a judgment component, configured to judge, according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and a first sending component, configured to, when output of the judgment component is that the upgrading control single board is not executing the firmware upgrading operation currently, send the firmware upgrading request to the upgrading control single board.</p><p id="p0017" num="0017">In an example embodiment, the first determination component includes: an acquisition element, configured to acquire, according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and a determination element, configured to determine, according to the physical parameter information, the sublink to be upgraded.</p><p id="p0018" num="0018">In an example embodiment, the master control single board includes: a third receiving component, configured to receive a firmware upgrading data request from the upgrading control single board; and a second sending component, configured to search, according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and send the firmware upgrading data to the upgrading control single board.</p><p id="p0019" num="0019">In an example embodiment, the upgrading control single board further includes: a second determination component, configured to determine that a current using<!-- EPO <DP n="5"> --> state of the upgrading control single board is an active state; and the master control single board further includes: a third determination component, configured to determine that a current using state of the master control single board is an active state.</p><p id="p0020" num="0020">According to the embodiments of the present invention, an upgrading control single board receives a firmware upgrading request from a master control single board, the firmware upgrading request carrying firmware upgrading parameter information; the upgrading control single board determines, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and the upgrading control single board acquires, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded. By virtue of the above technical solution, the problem that executing firmware upgrading operation by virtue of the master control single board greatly increases the risk in firmware upgrading operation in the related art is solved, and the risk in the firmware upgrading operation is further lowered.</p><heading id="h0004"><b><u>Brief Description of the Drawings</u></b></heading><p id="p0021" num="0021">The drawings described here are adopted to provide further understanding of the present invention, and form a part of the present invention. Schematic embodiments of the present invention and description thereof are adopted to explain the present invention and not intended to form improper limits to the present invention. In the drawings:
<ul><li><figref idrefs="f0001">Fig. 1</figref> is a flowchart of a method for upgrading firmware according to an embodiment of the present invention;</li><li><figref idrefs="f0001">Fig. 2</figref> is a structure diagram of a system for upgrading firmware according to an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 3</figref> is a schematic diagram showing a JTAG link structure of an upgrading control single board according to an example embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 4</figref> is a schematic diagram showing a JTAG link structure of a single board to be upgraded according to an example embodiment of the present invention;</li><li><figref idrefs="f0003">Fig. 5</figref> is a structure diagram of a system for upgrading firmware according to an example embodiment of the present invention;<!-- EPO <DP n="6"> --></li><li><figref idrefs="f0003">Fig. 6</figref> is a flowchart of selection of an active upgrading control single board according to an example embodiment of the present invention;</li><li><figref idrefs="f0004">Fig. 7</figref> is a schematic diagram showing an overall JTAG link structure of a firmware upgrading device according to an example embodiment of the present invention;</li><li><figref idrefs="f0004">Fig. 8</figref> is a schematic diagram showing an overall structure of a system for upgrading firmware according to an example embodiment of the present invention; and</li><li><figref idrefs="f0005">Fig. 9</figref> is a flowchart of a method for upgrading firmware for a multi-processor distributed system according to an example embodiment of the present invention.</li></ul></p><heading id="h0005"><b><u>Detailed Description of the Embodiments</u></b></heading><p id="p0022" num="0022">The present invention is described below with reference to the drawings and embodiments in detail. It is important to note that the embodiments in the present invention and characteristics in the embodiments can be combined under the condition of no conflicts.</p><p id="p0023" num="0023"><figref idrefs="f0001">Fig. 1</figref> is a flowchart of a method for upgrading firmware according to an embodiment of the present invention. As shown in <figref idrefs="f0001">Fig. 1</figref>, the method may include the following processing steps:
<ul><li>Step S102: an upgrading control single board receives a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information;</li><li>Step S104: the upgrading control single board determines, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and</li><li>Step S106: the upgrading control single board acquires, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</li></ul></p><p id="p0024" num="0024">In the related art, executing firmware upgrading operation by virtue of the master control single board greatly increases a risk in firmware upgrading operation. According to the method shown in <figref idrefs="f0001">Fig. 1</figref>, the upgrading control single board receives the firmware upgrading request from the master control single board, the firmware upgrading request carrying the firmware upgrading parameter information; the<!-- EPO <DP n="7"> --> upgrading control single board determines, according to the firmware upgrading parameter information, the sublink to be upgraded corresponding to the firmware upgrading parameter information; and the upgrading control single board acquires, from the master control single board, the firmware upgrading data corresponding to the sublink to be upgraded, and upgrades, by adopting the firmware upgrading data, the one or more pieces of firmware on the sublink to be upgraded. With the introduction of the upgrading control single board, the time-consuming operation of loading the firmware upgrading data to a JTAG controller is separated from the master control single board, so that the risk in the firmware upgrading operation is reduced. In addition, a system-level JTAG technology is introduced, and firmware upgrading data burning operation is cooperatively completed by the JTAG controller and a JTAG bridge chip, thereby implementing remote firmware upgrading on one hand, and performing firmware upgrading on one or more JTAG devices on a sublink under a condition that a bare single board to be upgraded is powered-on on the other hand. In this way, the problem that executing firmware upgrading operation by virtue of the master control single board greatly increases the risk in firmware upgrading operation in the related art is solved, and the risk in the firmware upgrading operation is further lowered.</p><p id="p0025" num="0025">In an example embodiment, before the upgrading control single board receives the firmware upgrading request from the master control single board in Step S102, the method may further include the following operation:
<ul><li>Step S1: the master control single board receives state information from the upgrading control single board;</li><li>Step S2: the master control single board judges, according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and</li><li>Step S3: when it is judged by the master control single board that the upgrading control single board is not executing the firmware upgrading operation currently, the master control single board sends the firmware upgrading request to the upgrading control single board.</li></ul></p><p id="p0026" num="0026">In an example embodiment, the master control single board receives a JTAG state registration message from the upgrading control single board so as to acquire the state information of the upgrading control single board, and if the upgrading control single board is performing firmware upgrading operation, the firmware<!-- EPO <DP n="8"> --> upgrading operation is ended; otherwise the master control single board sends the firmware upgrading request to the upgrading control single board, and in addition, the state information of the upgrading control single board is updated, on the master control single board, to being performing firmware upgrading operation.</p><p id="p0027" num="0027">In an example embodiment, the operation that the upgrading control single board determines, according to the firmware upgrading parameter information, the sublink to be upgraded in Step S104 may include the following steps:
<ul><li>Step S4: the upgrading control single board acquires, according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and</li><li>Step S5: the upgrading control single board determines, according to the physical parameter information, the sublink to be upgraded.</li></ul></p><p id="p0028" num="0028">In the example embodiment, the upgrading control single board parses the firmware upgrading request sent by the master control single board to obtain the firmware upgrading parameter information, performs scanning to acquire, according to the firmware upgrading parameter information, the physical parameter information corresponding to the sublink to be upgraded, and further determines, according to the acquired physical parameter information, the sublink to be upgraded.</p><p id="p0029" num="0029">In an example embodiment, before the upgrading control single board acquires, from the master control single board, the firmware upgrading data corresponding to the sublink to be upgraded in Step S106, the method may further include the following operation:
<ul><li>Step S6: the master control single board receives a firmware upgrading data request from the upgrading control single board; and</li><li>Step S7: the master control single board searches, according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and sends the firmware upgrading data to the upgrading control single board.</li></ul></p><p id="p0030" num="0030">In the example embodiment, the upgrading control single board requests for the firmware upgrading data from the master control single board, and loads the firmware upgrading data into a specific storage area of the upgrading control single board, that is, after receiving the firmware upgrading request, the upgrading control single board performs scanning according to a request parameter to acquire the physical parameter information of the sublink to be upgraded, then requests for the firmware<!-- EPO <DP n="9"> --> upgrading data corresponding to the sublink to be upgraded from the master control single board, loads the firmware upgrading data corresponding to the sublink to be upgraded, and stores data acquired by the upgrading control single board into the specific data storage area.</p><p id="p0031" num="0031">In an example embodiment, before the upgrading control single board receives the firmware upgrading request from the master control single board in Step S102, the method may further include the following processing:
<ul><li>Step S8: current using states of the upgrading control single board and the master control single board are both determined to be active states.</li></ul></p><p id="p0032" num="0032">In the example embodiment of the present invention, active and standby states of the master control single board and the upgrading control single board are further introduced, and field upgrading can be performed for the entire subrack, so that the problem that the system cannot be upgraded entirely in the related art is solved.</p><p id="p0033" num="0033"><figref idrefs="f0001">Fig. 2</figref> is a structure diagram of a system for upgrading firmware according to an embodiment of the present invention. As shown in <figref idrefs="f0001">Fig. 2</figref>, the system for upgrading firmware may include: at least one upgrading control single board 10, wherein the upgrading control single board 10 may include: a first receiving component 100, configured to receive a firmware upgrading request from a master control single board, the firmware upgrading request carrying firmware upgrading parameter information; a first determination component 102, configured to determine, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and an upgrading component 104, configured to acquire, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrade, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</p><p id="p0034" num="0034">Due to the adoption of the system shown in <figref idrefs="f0001">Fig. 2</figref>, the problem that executing firmware upgrading operation by virtue of the master control single board greatly increases a risk in firmware upgrading operation in the related art is solved, and the risk in the firmware upgrading operation is further lowered.</p><p id="p0035" num="0035">In the example embodiment, the system may include: two master control single boards, two upgrading control single boards and multiple single boards to be upgraded. According to the technical solution provided by the embodiments of the present invention, a system-level JTAG technology is applied, an embedded test<!-- EPO <DP n="10"> --> controller (for example; a JTAG controller) and a JTAG bridge chip are additionally arranged on each upgrading control single board, and a JTAG bridge chip is additionally arranged on each single board to be upgraded.</p><p id="p0036" num="0036">Structures of each upgrading control single board and each single board to be upgraded are described below with reference to the example embodiments shown in <figref idrefs="f0002">Fig. 3 and Fig. 4</figref> respectively.</p><p id="p0037" num="0037"><figref idrefs="f0002">Fig. 3</figref> is a schematic diagram showing a JTAG link structure of an upgrading control single board according to an example embodiment of the present invention. As shown in <figref idrefs="f0002">Fig. 3</figref>, the link structure may include: a JTAG bridge chip, a sublink n and JTAG devices, wherein each part described above is the same as the JTAG bridge chip, sublink n and JTAG devices of the single board to be upgraded. The JTAG controller is configured to receive firmware upgrading data and instruction transmitted by a CPU, generate a JTAG signal, cooperate with the JTAG bridge chip to complete burning the firmware upgrading data, and is also configured to receive a JTAG signal from the single board to be upgraded and feed back a firmware upgrading result.</p><p id="p0038" num="0038"><figref idrefs="f0002">Fig. 4</figref> is a schematic diagram showing a JTAG link structure of a single board to be upgraded according to an example embodiment of the present invention. As shown in <figref idrefs="f0002">Fig. 4</figref>, the link structure may include: a JTAG bridge chip, which is configured to divide a JTAG bus into multiple JTAG links, called sublink 1, ... and sublink n respectively, and is connected with JTAG devices on the single board according to different classification standards, wherein one JTAG sublink may be connected with multiple JTAG devices in a daisy chain form. The JTAG link structure of the master control single board is the same as the JTAG link structure of other ordinary single boards to be upgraded. The sublink n, as a JTAG link divided from the JTAG bus by the JTAG bridge chip, can be connected with one or more JTAG devices, wherein n is a positive integer, and a maximum value of n is determined by a specific adopted chip. The JTAG devices are equipment or chips supporting a JTAG protocol.</p><p id="p0039" num="0039">It is important to note that the upgrading control single board can upgrade the devices on only one sublink on the single board to be upgraded by executing the upgrading operation once, and the devices on different sublinks can not be upgraded at the same time.</p><p id="p0040" num="0040">In the example embodiment, the upgrading control single board is mainly<!-- EPO <DP n="11"> --> configured to request for and load the firmware upgrading data into a specific storage area of the JTAG controller, and call driving codes of the JTAG controller through the CPU to enable a procedure of loading the firmware upgrading data into the JTAG devices or the JTAG links. After receiving the firmware upgrading request, the upgrading control single board performs scanning according to the request parameter to acquire physical information of the JTAG devices to be upgraded, requests for firmware data to be upgraded from the master control single board, loads the firmware data to be upgraded, and stores the data acquired by the upgrading control single board into a specific data storage area of the JTAG controller. The JTAG controller and the bridge chip of the single board to be upgraded complete loading the firmware data together. In the example embodiment, two upgrading control single boards are additionally provided with the JTAG controller and the JTAG bridge chip, and active and standby states of the single boards are selected by an active and standby logic, so that mutual backup of the active and standby single boards is implemented to improve reliability, and the single boards may be mutually upgraded by active/standby switching. The design of the JTAG bridge chip of the upgrading control single board in a standby state is the same as that of an ordinary single board to be upgraded.</p><p id="p0041" num="0041">In the example embodiment, the JTAG controller is arranged on the upgrading control single board, and cooperates with the JTAG bridge chip to complete burning the firmware upgrading data. The JTAG controller receives the firmware upgrading data and instruction transmitted by the CPU, generates the JTAG signal, and sends the data to the JTAG chips of the single boards to be upgraded through the JTAG bus to complete loading the firmware upgrading data. In addition, the JTAG controller may receive a JTAG signal from the single boards to be upgraded and feed back firmware upgrading results.</p><p id="p0042" num="0042">The JTAG bridge chip is mainly responsible for parsing the received firmware upgrading data, and can divide the JTAG bus entering the single board into multiple JTAG links and connect all the JTAG devices on the single board according to different classification standards, wherein one JTAG sublink can connect multiple JTAG devices in the daisy chain form. The JTAG bridge chip and the JTAG controller may be used in cooperation.</p><p id="p0043" num="0043">The JTAG bus is a firmware upgrading bus on a backboard, and can transmit JTAG signals. The bridge chips of various single boards are connected through the<!-- EPO <DP n="12"> --> JTAG bus, and then the bridge chip of each single board divides the JTAG bus entering the single board into multiple JTAG links and connects all the devices supporting JTAG on the board according to different classification standards. The JTAG controller can access the JTAG devices on the single board through the JTAG bus, thereby implementing firmware upgrading.</p><p id="p0044" num="0044">In an example embodiment, as shown in <figref idrefs="f0003">Fig. 5</figref>, the system may further include: at least one master control single board 20, wherein the master control single board 20 may include: a second receiving component 200, configured to receive state information from the upgrading control single board; a judgment component 202, configured to judge, according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and a first sending component 204, configured to, when output of the judgment component is that the upgrading control single board is not executing the firmware upgrading operation currently, send the firmware upgrading request to the upgrading control single board.</p><p id="p0045" num="0045">In the example embodiment, the master control single board is mainly responsible for controlling a firmware upgrading process. The firmware upgrading data is stored in the master control single board, and a firmware upgrading data management component is installed in the master control single board. The master control single board may perform data interaction with the upgrading control single board to load the firmware upgrading data stored in the master control single board into the upgrading control single board. In an example embodiment, two master control single boards may respectively decide whether the current single board is in an active state or a standby state by virtue of software, and the single board in the standby state is turned into a single board to be upgraded. The active and standby master control single boards synchronize the firmware upgrading data between the active and standby master control single boards through an internal communication network, so that mutual backup of the active and standby single boards is implemented to improve reliability, and the single boards may be mutually upgraded by active/standby switching. When a master control single board is used as a single board to be upgraded, the design of its JTAG chip is the same as that of an ordinary single board to be upgraded.</p><p id="p0046" num="0046">As an example, assuming that there are 10 single boards at present, then the 10 single boards may include: 2 master control single boards, 2 upgrading control single<!-- EPO <DP n="13"> --> boards and 6 single boards to be upgraded, one master control single board in the active state and one upgrading control single board in the active state may be selected, and the other master control single board in the standby state, the other upgrading control single board in the standby state and the 6 single boards to be upgraded are used as single boards to be upgraded in the current system.</p><p id="p0047" num="0047">In an example embodiment, the first determination component 102 may include: an acquisition element (not shown in the drawings), configured to acquire, according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and a determination element (not shown in the drawings), configured to determine, according to the physical parameter information, the sublink to be upgraded.</p><p id="p0048" num="0048">In an example embodiment, as shown in <figref idrefs="f0003">Fig. 5</figref>, the master control single board 20 may further include: a third receiving component 206, configured to receive a firmware upgrading data request from the upgrading control single board; and a second sending component 208, configured to search, according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and send the firmware upgrading data to the upgrading control single board.</p><p id="p0049" num="0049">In an example embodiment, as shown in <figref idrefs="f0003">Fig. 5</figref>, the upgrading control single board 10 may further include: a second determination component 106, configured to determine that a current using state of the upgrading control single board is an active state; and the master control single board 20 may further include: a third determination component 210, configured to determine that a current using state of the master control single board is an active state.</p><p id="p0050" num="0050">In the example embodiment, <figref idrefs="f0003">Fig. 6</figref> is a flowchart of selection of an active upgrading control single board according to an example embodiment of the present invention. As shown in <figref idrefs="f0003">Fig. 6</figref>, an opposite board location signal is taken as an active/standby logic selection signal of the upgrading control single board, and when an in-position signal of the opposite single board transmitted by the opposite single board is high, the local board is in the standby state, and the flow may include the following steps:
<ul><li>Step S602: the upgrading control single board is defaulted to be in the standby state after being powered on and initialized, and the JTAG controller is enabled;</li><li>Step S604: an active/standby working mechanism enabling signal is set after a<!-- EPO <DP n="14"> --> time delay is added according to a preset rule, the single board which sets the signal earlier is determined to be a master single board, and the in-position signal of the opposite single board of the local board is set to be high; and</li><li>Step S606: the standby single board disables the JTAG controller, and enables the JTAG bridge chip.</li></ul></p><p id="p0051" num="0051">The example implementation process is further described below with reference to example implementation modes shown in <figref idrefs="f0004">Fig. 7 and Fig. 8</figref>.</p><p id="p0052" num="0052"><figref idrefs="f0004">Fig. 7</figref> is a schematic diagram showing an overall JTAG link structure of a firmware upgrading device according to an example embodiment of the present invention. As shown in <figref idrefs="f0004">Fig. 7</figref>, the overall structure is as follows: a JTAG bus refers to a firmware upgrading bus on a backboard, and transmits a JTAG signal. Each single board is connected in parallel with the JTAG bus through a JTAG bridge chip, and JTAG devices on a master control single board, an upgrading control single board and single boards to be upgraded are connected in a form of JTAG chain, so that the JTAG controller may access the JTAG devices on each single board to implement the firmware upgrading of the JTAG devices through the JTAG bus.</p><p id="p0053" num="0053"><figref idrefs="f0004">Fig. 8</figref> is a schematic diagram showing an overall structure of a system for upgrading firmware according to an example embodiment of the present invention. As shown in <figref idrefs="f0004">Fig. 8</figref>, the overall structure of the system for upgrading firmware may include:
<ul><li>at least one master control single board, connected with a PC through an Ethernet port to perform information interaction with a user, wherein a system configuration management component, a firmware upgrading control component, a database operation engine and a JTAG controller state information table may be installed on the master control single board; at least one upgrading control single board to which a JTAG controller is newly added, wherein a version management component, a JTAG loading component and a JTAG keeping-alive component are installed on the upgrading control single board; and at least one single board to be upgraded to which a JTAG bridge chip is newly added, wherein JTAG devices are connected to a JTAG sublink. The master control single board, the upgrading control single board and the single board to be upgraded may perform interaction through an internal control plane.</li></ul></p><p id="p0054" num="0054">The system configuration management component is configured to parse and transmit interaction information between the user and an upgrading device.<!-- EPO <DP n="15"> --> Specifically, the system configuration management component is configured to receive and parse a firmware upgrading command in a receiving direction, and parse and transmit various types of error information in a firmware upgrading process in real time in a sending direction.</p><p id="p0055" num="0055">The firmware upgrading control component (including the second receiving component, the judgment component, the first sending component, the third receiving component and the second sending component) is configured to control a firmware upgrading flow. The firmware upgrading control component receives a firmware upgrading parameter from the system configuration management component, calls the database operation engine to query the JTAG controller state information table to acquire state information of the JTAG controller, terminates the current firmware upgrading operation if the JTAG controller is executing firmware upgrading operation; otherwise the firmware upgrading control component sends a firmware upgrading request to the JTAG loading component, and simultaneously updates, through the database operation engine, a state of the JTAG controller in the JTAG controller state information table to be executing firmware upgrading operation. The firmware upgrading control component is further configured to maintain firmware data to be upgraded.</p><p id="p0056" num="0056">The database operation engine is configured to operate and maintain the JTAG controller state information table, including: retrieval, addition and deletion of storage unit data of the JTAG controller state information table.</p><p id="p0057" num="0057">The JTAG controller state information table is configured to store information about a location, state and the like of the JTAG controller.</p><p id="p0058" num="0058">The JTAG loading component (including the first receiving component and the first determination component) is configured to send a request for JTAG controller location and state registration information to the firmware upgrading control component in a starting process of a single board; perform scanning, according to the firmware upgrading request of the firmware upgrading control component, to acquire a physical parameter of equipment to be upgraded, and call the version management component to request for the firmware data to be upgraded from the firmware upgrading control component; after the firmware data to be upgraded is successfully loaded, call a driving code of the JTAG controller to enable a firmware upgrading operation process to complete burning firmware to be upgraded through a CPU; and simultaneously activate the JTAG keeping-alive component to start a JTAG<!-- EPO <DP n="16"> --> keeping-alive function and disable the keeping-alive function after firmware upgrading is completed.</p><p id="p0059" num="0059">The version management component is configured to request to load the firmware data to be upgraded.</p><p id="p0060" num="0060">The JTAG keeping-alive component is controlled by the JTAG loading component, and is configured to activate or deactivate the JTAG keeping-alive function. When the JTAG keeping-alive function is activated, a keeping-alive message is periodically sent to the firmware upgrading control component to ensure that the upgrading control single board is normal in the firmware upgrading process.</p><p id="p0061" num="0061">The JTAG controller (equivalent to the upgrading component) is controlled by the CPU of the upgrading control single board, connects the JTAG bridge chips of each single board in a bus form, and may send JTAG protocol data to the JTAG bridge chips to address the single boards and operate JTAG links on the single boards.</p><p id="p0062" num="0062">The JTAG bridge chips are slave equipment of a JTAG system, multiple bridge chips are mounted on the JTAG bus, and each JTAG bridge chip divides the JTAG bus entering the single board into multiple JTAG links, and connects all the equipment or chips supporting JTAG on the single board according to different classification standards, wherein one JTAG sublink may be connected with multiple devices in a form of daisy chain. The JTAG bridge chips address the single boards by receiving the protocol data from the JTAG controller, and operate the JTAG links on the single boards.</p><p id="p0063" num="0063">Sublinks are JTAG sublinks of the JTAG bridge chips, and may connect the equipment or chips supporting JTAG in a classification manner.</p><p id="p0064" num="0064">The JTAG devices support firmware upgrading in a JTAG manner, and are connected to the JTAG sublinks.</p><p id="p0065" num="0065">The example implementation process is further described with reference to an example implementation mode shown in <figref idrefs="f0005">Fig. 9</figref>.</p><p id="p0066" num="0066"><figref idrefs="f0005">Fig. 9</figref> is a flowchart of a method for upgrading firmware for a multi-processor distributed system according to an example embodiment of the present invention. As shown in <figref idrefs="f0005">Fig. 9</figref>, designs of JTAG bridge chips of a master control single board and an upgrading control single board in a standby state are the same as that of an ordinary single board to be upgraded. The flow may include the following steps:
<ul><li>Step S902: a JTAG loading component sends a JTAG state registration message to a firmware upgrading control component;<!-- EPO <DP n="17"> --></li><li>Step S904: the firmware upgrading control component stores state information of the JTAG loading component;</li><li>Step S906: the firmware upgrading control component returns a message to the JTAG loading component to confirm that the firmware upgrading control component has received the registration message sent by the JTAG loading component;</li><li>Step S908: a user initiates a firmware upgrading request;</li><li>Step S910: a system configuration management component parses a firmware upgrading request, and notifies the firmware upgrading control component to perform firmware upgrading operation;</li><li>Step S912: the firmware upgrading control component queries a JTAG state information table to obtain JTAG state information;</li><li>Step S914: the firmware upgrading control component sends the firmware upgrading request according to the queried JTAG state information (the JTAG state information may include: JTAG loading component location information);</li><li>Step S916: the JTAG loading component acquires an equipment parameter on a single board to be upgraded according to a parameter in the received firmware upgrading request;</li><li>Step S918: the JTAG loading component sends a firmware upgrading data downloading request to a version management component;</li><li>Step S920: the JTAG loading component activates a JTAG keeping-alive component to enable a JTAG keeping-alive function;</li><li>Step S922: the JTAG keeping-alive component periodically sends a keeping-alive message to the firmware upgrading component after being activated;</li><li>Step S924: the version management component sends the firmware upgrading data downloading request to the firmware upgrading control component;</li><li>Step S926: the firmware upgrading control component searches for corresponding upgrading data according to the parameter in the request, and sends a response message to the version management component;</li><li>Step S928: the version management component downloads firmware upgrading data;</li><li>Step S930: after successfully downloading the firmware upgrading data, the version management component notifies firmware upgrading data information to the JTAG loading component to notify the JTAG loading component to start firmware upgrading operation;<!-- EPO <DP n="18"> --></li><li>Step S932: the JTAG loading component loads the firmware upgrading data;</li><li>Step S934: the JTAG loading component disables the JTAG keeping-alive function of the JTAG loading component after completing loading the firmware upgrading data;</li><li>Step S936: the JTAG loading component notifies the firmware upgrading control component that the loading of the firmware upgrading data is completed;</li><li>Step S938: the firmware upgrading control component notifies the system configuration management component that firmware upgrading is completed; and</li><li>Step S940: the system configuration management component parses an upgrading result parameter, and notifies the upgrading result parameter to the user.</li></ul></p><p id="p0067" num="0067">From the above, it can be seen that the embodiments achieves technical effects as follows (it is important to note that the effects may be achieved by some example embodiments): according to the technical solution provided by the embodiments of the present invention, with the introduction of the upgrading control single board, the time-consuming operation of loading the firmware upgrading data to the JTAG controller is separated from the master control single board, so that the risk in the firmware upgrading operation is reduced; and in addition, the system-level JTAG technology is introduced, and firmware upgrading data burning operation is cooperatively completed by the JTAG controller and the JTAG bridge chip, thereby implementing remote firmware upgrading on one hand, and performing firmware upgrading on one or more JTAG devices on a sublink under a condition that a bare single board to be upgraded is powered-on on the other hand. In this way, the problem that executing firmware upgrading operation by virtue of the master control single board greatly increases the risk in firmware upgrading operation in the related art is solved, and the risk in the firmware upgrading operation is further lowered.</p><heading id="h0006"><b><u>Industrial Practicability</u></b></heading><p id="p0068" num="0068">From the above, the method and system for upgrading firmware provided by the embodiments of the present invention has beneficial effects as follows: with the introduction of the upgrading control single board, the time-consuming operation of loading the firmware upgrading data to the JTAG controller is separated from the master control single board, so that the risk in the firmware upgrading operation is reduced; and in addition, the system-level JTAG technology is introduced, and firmware upgrading data burning operation is cooperatively completed by the JTAG<!-- EPO <DP n="19"> --> controller and the JTAG bridge chip, thereby implementing remote firmware upgrading on one hand, and performing firmware upgrading on one or more JTAG devices on a sublink under a condition that a bare single board to be upgraded is powered-on on the other hand, so that the risk in the firmware upgrading operation is further lowered.</p><p id="p0069" num="0069">Obviously, those skilled in the art should know that each component or step of the present invention may be implemented by a universal computing device, and the components or steps can be concentrated on a single computing device or distributed on a network formed by a plurality of computing devices, and may optionally be implemented by programmable codes executable for the computing devices, so that the components or steps may be stored in a storage device for execution with the computing devices, or the shown or described steps may be executed in a sequence different from the sequence here under a certain condition, or the components or steps may form each integrated circuit component, or multiple components or steps therein may form a single integrated circuit component for implementation. As a consequence, the present invention is not limited to any specific hardware and software combination.</p><p id="p0070" num="0070">The above is only the example embodiment of the present invention and not intended to limit the present invention, and for those skilled in the art, the present invention may have various modifications and variations. Any modifications, equivalent replacements, improvements and the like within the principle of the present invention shall fall within the scope of protection defined by the claims of the present invention.</p></description><claims mxw-id="PCLM90459237" lang="EN" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-en-0001" num="0001"><claim-text>A method for upgrading firmware, comprising:
<claim-text>receiving, by an upgrading control single board, a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information;</claim-text>
<claim-text>determining, by the upgrading control single board according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and</claim-text>
<claim-text>acquiring, by the upgrading control single board from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrading, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein before receiving, by the upgrading control single board, the firmware upgrading request from the master control single board, the method further comprises:
<claim-text>receiving, by the master control single board, state information from the upgrading control single board;</claim-text>
<claim-text>judging, by the master control single board according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and</claim-text>
<claim-text>when it is judged by the master control single board that the upgrading control single board is not executing the firmware upgrading operation currently, sending, by the master control single board, the firmware upgrading request to the upgrading control single board.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 1, wherein determining, by the upgrading control single board according to the firmware upgrading parameter information, the sublink to be upgraded comprises:
<claim-text>acquiring, by the upgrading control single board according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and</claim-text>
<claim-text>determining, by the upgrading control single board according to the physical parameter information, the sublink to be upgraded.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 1, wherein before acquiring, by the upgrading control single board from the master control single board, the firmware upgrading<!-- EPO <DP n="21"> --> data corresponding to the sublink to be upgraded, the method further comprises:
<claim-text>receiving, by the master control single board, a firmware upgrading data request from the upgrading control single board; and</claim-text>
<claim-text>searching, by the master control single board according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and sending the firmware upgrading data to the upgrading control single board.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any one of claims 1 to 4, wherein before receiving, by the upgrading control single board, the firmware upgrading request from the master control single board, the method further comprises:
<claim-text>determining current using states of both the upgrading control single board and the master control single board to be active states.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>A system for upgrading firmware, comprising: at least one upgrading control single board,<br/>
the upgrading control single board comprising:
<claim-text>a first receiving component, configured to receive a firmware upgrading request from a master control single board, wherein the firmware upgrading request carries firmware upgrading parameter information;</claim-text>
<claim-text>a first determination component, configured to determine, according to the firmware upgrading parameter information, a sublink to be upgraded corresponding to the firmware upgrading parameter information; and</claim-text>
<claim-text>an upgrading component, configured to acquire, from the master control single board, firmware upgrading data corresponding to the sublink to be upgraded, and upgrade, by adopting the firmware upgrading data, one or more pieces of firmware on the sublink to be upgraded.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The system according to claim 6, further comprising: at least one master control single board, wherein<br/>
the master control single board comprises:
<claim-text>a second receiving component, configured to receive state information from the upgrading control single board;</claim-text>
<claim-text>a judgment component, configured to judge, according to the state information, whether the upgrading control single board is currently executing firmware upgrading operation or not; and</claim-text>
<claim-text>a first sending component, configured to, when output of the judgment<!-- EPO <DP n="22"> --> component is that the upgrading control single board is not executing the firmware upgrading operation currently, send the firmware upgrading request to the upgrading control single board.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The system according to claim 6, wherein the first determination component comprises:
<claim-text>an acquisition element, configured to acquire, according to the firmware upgrading parameter information, physical parameter information corresponding to the sublink to be upgraded; and</claim-text>
<claim-text>a determination element, configured to determine, according to the physical parameter information, the sublink to be upgraded.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The system according to claim 6, wherein the master control single board further comprises:
<claim-text>a third receiving component, configured to receive a firmware upgrading data request from the upgrading control single board; and</claim-text>
<claim-text>a second sending component, configured to search, according to the firmware upgrading data request, for the firmware upgrading data corresponding to the sublink to be upgraded, and send the firmware upgrading data to the upgrading control single board.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The system according to any one of claims 6 to 9, wherein<br/>
the upgrading control single board further comprises:
<claim-text>a second determination component, configured to determine that a current using state of the upgrading control single board is an active state; and</claim-text>
<claim-text>the master control single board further comprises:</claim-text>
a third determination component, configured to determine that a current using state of the master control single board is an active state.</claim-text></claim></claims><drawings mxw-id="PDW20421972" load-source="patent-office"><!-- EPO <DP n="23"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="88" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="144" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0004" num="7,8"><img id="if0004" file="imgf0004.tif" wi="165" he="216" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0005" num="9"><img id="if0005" file="imgf0005.tif" wi="165" he="201" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="228" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
