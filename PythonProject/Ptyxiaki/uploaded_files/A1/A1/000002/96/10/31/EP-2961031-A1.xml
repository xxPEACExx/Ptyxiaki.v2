<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961031-A1" country="EP" doc-number="2961031" kind="A1" date="20151230" family-id="51689192" file-reference-id="313851" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451300" ucid="EP-2961031-A1"><document-id><country>EP</country><doc-number>2961031</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14783390-A" is-representative="YES"><document-id mxw-id="PAPP193865568" load-source="docdb" format="epo"><country>EP</country><doc-number>14783390</doc-number><kind>A</kind><date>20140226</date><lang>JA</lang></document-id><document-id mxw-id="PAPP193865569" load-source="patent-office" format="original"><country>EP</country><doc-number>14783390.9</doc-number><date>20140226</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162033876" ucid="JP-2013084369-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2013084369</doc-number><kind>A</kind><date>20130412</date></document-id></priority-claim><priority-claim mxw-id="PPC162029693" ucid="JP-2014001028-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014001028</doc-number><kind>W</kind><date>20140226</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1853804380" load-source="docdb">H02J  13/00        20060101AFI20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804381" load-source="docdb">H02J   3/32        20060101ALI20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804382" load-source="docdb">H02J   3/28        20060101ALI20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804383" load-source="docdb">H02J   3/24        20060101ALI20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804384" load-source="docdb">H02J   3/00        20060101ALI20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804385" load-source="docdb">G05B  19/10        20060101ALN20170113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853804386" load-source="docdb">G05B  19/042       20060101ALN20170113BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1623799575" load-source="docdb" scheme="CPC">Y04S  10/54        20130101 LA20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1623799576" load-source="docdb" scheme="CPC">H02J2003/003       20130101 LA20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1623799577" load-source="docdb" scheme="CPC">H02J  13/0006      20130101 LA20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1623799578" load-source="docdb" scheme="CPC">H02J   3/24        20130101 LI20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1623799579" load-source="docdb" scheme="CPC">G05B  19/106       20130101 FI20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1623799580" load-source="docdb" scheme="CPC">G05B  19/0423      20130101 LI20180626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1969296697" load-source="docdb" scheme="CPC">G05B2219/25354     20130101 LA20160218BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1969301272" load-source="docdb" scheme="CPC">G05B2219/2639      20130101 LA20160218BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545366" lang="DE" load-source="patent-office">FREQUENZSTEUERUNGSVERFAHREN UND FREQUENZSTEUERUNGSSYSTEM</invention-title><invention-title mxw-id="PT165545367" lang="EN" load-source="patent-office">FREQUENCY CONTROL METHOD AND FREQUENCY CONTROL SYSTEM</invention-title><invention-title mxw-id="PT165545368" lang="FR" load-source="patent-office">PROCÉDÉ DE COMMANDE DE FRÉQUENCE ET SYSTÈME DE COMMANDE DE FRÉQUENCE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103324883" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>PANASONIC IP MAN CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103305662" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>PANASONIC INTELLECTUAL PROPERTY MANAGEMENT CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101644187" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Panasonic Intellectual Property Management Co., Ltd.</last-name><iid>101483884</iid><address><street>1-61, Shiromi 2-chome Chuo-ku</street><city>Osaka-shi, Osaka 540-6207</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103310342" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>STEARNS HODAY</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332210" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>STEARNS, Hoday</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650519" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>STEARNS, Hoday</last-name><address><street>Panasonic Intellectual Property Mgt. Co., Ltd. IP Management Department 7F OBP Panasonic Tower 1-61, Shiromi 2-chome, Chuo-ku</street><city>Osaka-shi, Osaka 540-6207</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103324023" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>WATANABE KENICHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343930" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>WATANABE, KENICHI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101639671" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>WATANABE, KENICHI</last-name><address><street>Panasonic Intellectual Property Mgt. Co., Ltd. IP Management Department 7F OBP Panasonic Tower 1-61, Shiromi 2-chome, Chuo-ku</street><city>Osaka-shi, Osaka 540-6207</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103323975" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>KAJI MITSURU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103334576" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>KAJI, MITSURU</last-name></addressbook></inventor><inventor mxw-id="PPAR1101640775" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>KAJI, MITSURU</last-name><address><street>Panasonic Intellectual Property Mgt. Co., Ltd. IP Management Department 7F OBP Panasonic Tower 1-61, Shiromi 2-chome, Chuo-ku</street><city>Osaka-shi, Osaka 540-6207</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101652267" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Grünecker, Kinkeldey, Stockmair &amp; Schwanhäusser Anwaltssozietät</last-name><iid>100060488</iid><address><street>Leopoldstrasse 4</street><city>80802 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2014001028-W"><document-id><country>JP</country><doc-number>2014001028</doc-number><kind>W</kind><date>20140226</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014167768-A1"><document-id><country>WO</country><doc-number>2014167768</doc-number><kind>A1</kind><date>20141016</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660608159" load-source="docdb">AL</country><country mxw-id="DS660685654" load-source="docdb">AT</country><country mxw-id="DS660608161" load-source="docdb">BE</country><country mxw-id="DS660782627" load-source="docdb">BG</country><country mxw-id="DS660605410" load-source="docdb">CH</country><country mxw-id="DS660607827" load-source="docdb">CY</country><country mxw-id="DS660685843" load-source="docdb">CZ</country><country mxw-id="DS660608162" load-source="docdb">DE</country><country mxw-id="DS660607828" load-source="docdb">DK</country><country mxw-id="DS660607829" load-source="docdb">EE</country><country mxw-id="DS660683072" load-source="docdb">ES</country><country mxw-id="DS660782628" load-source="docdb">FI</country><country mxw-id="DS660605411" load-source="docdb">FR</country><country mxw-id="DS660608167" load-source="docdb">GB</country><country mxw-id="DS660607830" load-source="docdb">GR</country><country mxw-id="DS660608168" load-source="docdb">HR</country><country mxw-id="DS660685844" load-source="docdb">HU</country><country mxw-id="DS660685211" load-source="docdb">IE</country><country mxw-id="DS660607843" load-source="docdb">IS</country><country mxw-id="DS660605412" load-source="docdb">IT</country><country mxw-id="DS660607844" load-source="docdb">LI</country><country mxw-id="DS660782629" load-source="docdb">LT</country><country mxw-id="DS660682816" load-source="docdb">LU</country><country mxw-id="DS660782630" load-source="docdb">LV</country><country mxw-id="DS660782631" load-source="docdb">MC</country><country mxw-id="DS660682817" load-source="docdb">MK</country><country mxw-id="DS660682818" load-source="docdb">MT</country><country mxw-id="DS660682823" load-source="docdb">NL</country><country mxw-id="DS660685845" load-source="docdb">NO</country><country mxw-id="DS660682824" load-source="docdb">PL</country><country mxw-id="DS660607845" load-source="docdb">PT</country><country mxw-id="DS660683073" load-source="docdb">RO</country><country mxw-id="DS660607846" load-source="docdb">RS</country><country mxw-id="DS660682825" load-source="docdb">SE</country><country mxw-id="DS660608170" load-source="docdb">SI</country><country mxw-id="DS660685846" load-source="docdb">SK</country><country mxw-id="DS660685847" load-source="docdb">SM</country><country mxw-id="DS660685212" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479670" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A frequency control method for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource, the frequency control method includes: receiving the power command from the power system operator (S130); obtaining a frequency measurement of the power grid (S131); predicting a next power command using the frequency measurement, before the next power command is received from the power system operator (S132); and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator (S135).<img id="iaf01" file="imgaf001.tif" wi="52" he="114" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759482" lang="EN" source="EPO" load-source="docdb"><p>A frequency control method for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource, the frequency control method includes: receiving the power command from the power system operator (S130); obtaining a frequency measurement of the power grid (S131); predicting a next power command using the frequency measurement, before the next power command is received from the power system operator (S132); and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator (S135).</p></abstract><description mxw-id="PDES98404371" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">[Technical Field]</heading><p id="p0001" num="0001">The present invention relates to a frequency control method, a frequency control system, a frequency control device, or a frequency control program that reduces an influence of communication delay in controlling electric inputs or outputs of power sources so as to control a frequency of a grid.</p><heading id="h0002">[Background Art]</heading><p id="p0002" num="0002">There are many electricity transmission systems and distribution systems operating at a fixed frequency, for example, at 50 Hz or 60 Hz. Grid frequency control systems control resources such as power sources (generators) and energy storage resources.</p><p id="p0003" num="0003">In order to maintain grid frequency stability, grid operators send commands for controlling the amount of power withdrawn from the grid by loads and the amount of power injected to the grid by generators, storage, and renewable energy sources. The power sources and the energy storage resources control inputs or outputs of their power.</p><p id="p0004" num="0004">However, large delay occurs in transmission of command signals from a grid operator's computer to receivers. To overcome the delay, there is a system that creates, at a receiver side, a control signal having a grid frequency, instead of using commands sent from the grid operator (see PTL 1, for example).</p><heading id="h0003">[Citation List]</heading><heading id="h0004">[Patent Literature]</heading><p id="p0005" num="0005">[PTL 1] <patcit id="pcit0001" dnum="JP2005020916A"><text>Japanese Unexamined Patent Application Publication No. 2005-20916</text></patcit><!-- EPO <DP n="2"> --></p><heading id="h0005">[Summary of Invention]</heading><heading id="h0006">[Technical Problem]</heading><p id="p0006" num="0006">However, the system described in PTL 1 doesn't disclose any methods that overcome the delay in transmission from a grid operator's computer to receivers.</p><p id="p0007" num="0007">In view of the above, the present invention provides a frequency control method which includes a control prediction part for reducing an influence of communication delay and predicting a command more accurately in controlling electric inputs or outputs of systems connected to the grid.</p><heading id="h0007">[Solution to Problem]</heading><p id="p0008" num="0008">A frequency control method according to an aspect of the present invention is a frequency control method for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource. The frequency control method includes: receiving the power command from the power system operator; obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0009" num="0009">These general and specific aspects may be implemented using a system, an apparatus, a method, an integrated circuit, a computer program, or a non-transitory computer-readable recording medium<!-- EPO <DP n="3"> --> such as a CD-ROM, or any combination of systems, apparatuses, methods, integrated circuits, computer programs, or computer-readable recording media.</p><heading id="h0008">[Advantageous Effects of Invention]</heading><p id="p0010" num="0010">According to the present invention, it is possible to reduce an influence of communication delay and to predict a command more accurately in controlling electric inputs or outputs of systems connected to a grid.</p><heading id="h0009">[Brief Description of Drawings]</heading><p id="p0011" num="0011"><ul><li>[<figref idrefs="f0001">Fig. 1] FIG. 1</figref> is a diagram showing a system configuration according to an embodiment 1 of the present invention.</li><li>[<figref idrefs="f0002">Fig. 2] FIG. 2</figref> is a diagram showing detailed configurations of a central control system and a local control system according to the embodiment 1 of the present invention.</li><li>[<figref idrefs="f0003">Fig. 3] FIG. 3</figref> is a sequence diagram of an overall system.</li><li>[<figref idrefs="f0004">Fig. 4] FIG. 4</figref> is a flowchart for a procedure of a prediction process algorithm in the central control system.</li><li>[<figref idrefs="f0005">Fig. 5A] FIG. 5A</figref> is a diagram showing an example of a model used for predicting a command using frequency measurements.</li><li>[<figref idrefs="f0005">Fig. 5B] FIG. 5B</figref> is a diagram showing an example of a model used for predicting a command using frequency measurements.</li><li>[<figref idrefs="f0006">Fig. 6] FIG. 6</figref> is a diagram showing examples of a command, a delayed command, and a predicted command as a function of time.</li><li>[<figref idrefs="f0007">Fig. 7] FIG. 7</figref> is a diagram showing detailed configurations of a central control system and a local control system according to an embodiment 2 of the present invention.</li><li>[<figref idrefs="f0008">Fig. 8] FIG. 8</figref> is a flowchart for a procedure of a prediction process algorithm in the central control system according to the embodiment 2.</li><li>[<figref idrefs="f0009">Fig. 9] FIG. 9</figref> is a diagram showing detailed configurations of a central control system and a local control system according to an embodiment 3 of the present invention.<!-- EPO <DP n="4"> --></li><li>[<figref idrefs="f0010">Fig. 10] FIG. 10</figref> is a flowchart for a procedure of a prediction process algorithm in the central control system according to the embodiment 3.</li><li>[<figref idrefs="f0011">Fig. 11] FIG. 11</figref> is a diagram showing detailed configurations of a central control system and a local control system according to the embodiment 1, option 1, of the present invention.</li><li>[<figref idrefs="f0012">Fig. 12] FIG. 12</figref> is a sequence diagram according to the embodiment 1, the option 1 of the present invention.</li></ul></p><heading id="h0010">[Description of Embodiments]</heading><p id="p0012" num="0012">The present invention is a frequency control method for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource. The frequency control method includes: receiving the power command from the power system operator; obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0013" num="0013">For example, the frequency control method may include: calculating communication delay time in the communication network; and controlling the input or output of the at least one distributed power energy resource using the predicted next power command, based on the communication delay time.</p><p id="p0014" num="0014">This reduces an influence of the communication delay, allowing responses of the distributed energy resources to be<!-- EPO <DP n="5"> --> matched more closely to the command sent from the power system operator. The responses of the distributed energy resources can be matched more closely to the command sent from the power system operator, improving controllability and stability of the grid frequency.</p><p id="p0015" num="0015">For example, a difference between a timing at which the power system operator sends the power command and a timing at which the input or output of the at least one distributed power energy resource changes after the predicted next power command is received may be less than a predetermined time.</p><p id="p0016" num="0016">This reduces time from when the command is sent by the power system operator to when the input or output of the distributed energy resource is changed, thereby improving the stability of the frequency of the power grid.</p><p id="p0017" num="0017">For example, the frequency control method may predict the next power command using the frequency measurement and a relationship between the frequency measurement and the power command which are in a memory.</p><p id="p0018" num="0018">This enables the system to predict the command more accurately.</p><p id="p0019" num="0019">For example, the frequency control method may predict the next power command using the frequency measurement, a past received power command, and a model indicating a relationship between the frequency measurement and the power command to be received.</p><p id="p0020" num="0020">This allows the prediction of the command to be more accurate.</p><p id="p0021" num="0021"><!-- EPO <DP n="6"> --> For example, the model may be a regression model.</p><p id="p0022" num="0022">This allows the prediction of the command to be more accurate. In addition, the model is so simple and fast for computation.</p><p id="p0023" num="0023">For example, the frequency control method may include: controlling the input or output of the at least one distributed power energy resource using the power command to be received when the communication delay time is less than a predetermined value, and controlling the input or output of the at least one distributed power energy resource using the predicted next power command when the communication delay time is greater than the predetermined value.</p><p id="p0024" num="0024">Accordingly, it is determined whether or not a negative effect of the transmission delay is large, reducing the influence of a prediction error especially in a small communication delay. Therefore, the input or output of the distributed energy resources can follow the command sent by the power system operator more accurately.</p><p id="p0025" num="0025">For example, the frequency control method may include: calculating a prediction error; controlling the input or output of the at least one distributed power energy resource using the power command to be received when the prediction error is greater than a predetermined value; and controlling the input or output of the at least one distributed power energy resource using the predicted next power command when the prediction error is less than the predetermined value.</p><p id="p0026" num="0026">Accordingly, it is determined whether or not a negative effect of the transmission delay is large, reducing the influence of the prediction error especially in a large prediction error. Therefore, the input or output of the distributed energy resources can follow the command sent by the power system operator more accurately.<!-- EPO <DP n="7"> --></p><p id="p0027" num="0027">For example, the frequency control method may include: calculating a communication state; controlling the input or output of the at least one distributed power energy resource using the frequency measurement and the power command to be received when the communication state is normal; and controlling the input or output of the at least one distributed power energy resource using the frequency measurement when the communication state is abnormal or disconnected.</p><p id="p0028" num="0028">Accordingly, the previously-received power command for making the prediction is used, improving accuracy of the command prediction during the communication network being up. Accordingly, the prediction process can continue even when the network is down, by making the prediction based only on frequency measurements. In this method, predictions based only on frequency measurements is used, allowing the frequency regulation control to still continue even when problems occur in the network communication. In addition, the frequency regulation control is still accurate while the network communication is up.</p><p id="p0029" num="0029">For example, the frequency control method may be executed in the server by the server sending the power command to the local controller.</p><p id="p0030" num="0030">For example, the frequency control method may be executed in the local controller.</p><p id="p0031" num="0031">For example, a program is for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed<!-- EPO <DP n="8"> --> energy resource. The program may cause the frequency control system to execute: receiving the power command from the power system operator; obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0032" num="0032">For example, a frequency control system includes: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource. The frequency control system may executes: receiving the power command from the power system operator; obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0033" num="0033">For example, a server is for use in a frequency control system including: the server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource. The server may include a controller that controls an input or output of the at least one distributed power energy resource. The controller may receive the power command from the power system<!-- EPO <DP n="9"> --> operator; obtain a frequency measurement of the power grid; predict a next power command using the frequency measurement, before the next power command is received from the power system operator; and control the input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0034" num="0034">For example, a local controller is for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and the local controller connected to the server through a communication network and to the at least one distributed energy resource. The local controller may include a controller that controls an input or output of the at least one distributed power energy resource. The controller may receive the power command from the power system operator; obtain a frequency measurement of the power grid; predict a next power command using the frequency measurement, before the next power command is received from the power system operator; and control the input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0035" num="0035">These general and specific aspects may be implemented using a system, an apparatus, a method, an integrated circuit, a computer program, or a non-transitory computer-readable recording medium such as a CD-ROM, or any combination of systems, apparatuses, methods, integrated circuits, computer programs, or computer-readable recording media.</p><p id="p0036" num="0036">Hereinafter, preferred embodiments of the present invention will be described with reference to the drawings. Each of the<!-- EPO <DP n="10"> --> exemplary embodiments described below shows a general or specific example. The numerical values, shapes, materials, structural elements, the arrangement and connection of the structural elements, steps, the processing order of the steps etc. shown in the following exemplary embodiments are mere examples, and therefore do not limit the scope of the appended claims and their equivalents. Therefore, among the structural elements in the following exemplary embodiments, structural elements not recited in any one of the independent claims are described as arbitrary structural elements.</p><heading id="h0011">(Embodiment 1)</heading><p id="p0037" num="0037"><figref idrefs="f0001">FIG. 1</figref> shows an overview of a system configuration according to an embodiment 1 of the present invention.</p><p id="p0038" num="0038">As shown in <figref idrefs="f0001">FIG. 1</figref>, a system according to the embodiment 1 of the present invention includes a power system operator 101, a central control system 102, a frequency sensor 103, a local control system 104, a grid-tie inverter 105, a controllable energy resource 106, and a power grid 107. The central control system 102 may have a frequency sensor 103. The system may have some local control systems 104. The power system operator 101 is connected to the central control system 102 with a single-purpose communication line through a communication medium which is typically a SCADA system.</p><p id="p0039" num="0039">The central control system 102 is connected to the local control system 104 through a communication medium. In the embodiment 1, the communication medium is a switched network between Ethernet (registered trademark) and wireless networks, and may be used for multiple purposes aside from sending control signals. This communication medium causes delay which occurs when the local control system 104 receives information transmitted by the central control system 102. The central control system 102 is connected to the frequency sensor 103 which provides frequency measurements through a communication interface. The frequency sensor 103 is a<!-- EPO <DP n="11"> --> power meter, a power analyzer, or the like. Each of the central control system 102, the local control system 104, the grid-tie inverter 105 and the controllable energy resource 106 may include the frequency sensor 103.</p><p id="p0040" num="0040">The local control system 104 is connected to the grid-tie inverter 105, and can communicate with a controller of the grid-tie inverter 105.</p><p id="p0041" num="0041">The grid-tie inverter 105 is connected to the controllable energy resource 106 and to the power grid 107 through wires through which electric power is transmitted.</p><p id="p0042" num="0042">The controllable energy resource 106 may be an energy storage resource, load resource, or generation resource. In a case when the controllable energy resource 106 is the energy storage resource, the energy storage resource may be a storage battery or a plurality of storage batteries. A type of the storage battery may be a lithium-ion. The energy storage resource may also be pumped-hydro, compressed-air, flywheels, or capacitors. The controllable energy resource 106 may include the local control system 104 and the grid-tie inverter 105.</p><p id="p0043" num="0043">A normal operation of the overall system is described.</p><p id="p0044" num="0044">In the normal operation, the power system operator 101 sends commands to cause the controllable energy resource 106 to raise or lower its power output to the grid 107 or power input from the grid 107. The commands are sent at a fixed period. The central control system 102 receives the commands. The central control system 102 computes prediction of a next command by calculating the commands from the power system operator 101 and the frequency measurements from the frequency sensor 103. The central control system 102 sends the predicted command to the local control system 104 earlier than the<!-- EPO <DP n="12"> --> command sent from the power system operator 101 is received at the local control system 104. In other words, the predicted command is sent early. This will be described in more detail later.</p><p id="p0045" num="0045">Upon receiving the predicted command, the local control system 104 transmits the received command to the grid-tie inverter 105. The grid-tie inverter 105 adjusts power of the controllable energy resource 106 in response to the command. Accordingly, the power is injected to or drawn from the power grid 107.</p><p id="p0046" num="0046">If the central control system 102 is connected to more than one local control systems 104, the central control system 102 calculates a prediction of the next command, and subsequently calculates distribution of the commands to each of the local control systems 104. The distribution of the predicted command allows the desired input or output of an aggregate system to be divided among the controllable energy resources 106, according to the controllable energy resources 106 information such as capacity, max charge/discharge rate, or state of charge.</p><p id="p0047" num="0047"><figref idrefs="f0002">FIG. 2</figref> is a detailed diagram showing configurations of the central control system 102 and the local control system 104 which are described with reference to <figref idrefs="f0001">FIG. 1</figref>.</p><p id="p0048" num="0048">The central control system 102 includes a command receiver 110, a frequency measurement receiver 111, a command predictor 112, a send time predictor 113, and a command sender 114.</p><p id="p0049" num="0049">The command receiver 110 receives commands sent by the power system operator 101.</p><p id="p0050" num="0050">The frequency measurement receiver 111 receives frequency measurements from the frequency sensor 103.</p><p id="p0051" num="0051"><!-- EPO <DP n="13"> --> The command predictor 112 calculates predictions of a command to be received next, using combination of frequency measurements and past received commands, or frequency measurements only.</p><p id="p0052" num="0052">The send time predictor 113 decides an optimal timing to send the predicted command. For example, the send time predictor 113 decides when an influence of the delay is minimized in transmission of the command over the communication medium to the local control system 104.</p><p id="p0053" num="0053">The command sender 114 sends the predicted command to the local control system 104 at the timing decided by the send time predictor 113.</p><p id="p0054" num="0054">The command receiver 110, the frequency measurement receiver 111, and the command sender 114 may be any combination of devices such as ethernet (registered trademark) network interface cards or modems.</p><p id="p0055" num="0055">The local control system 104 includes a command receiver 115 and a local controller 116. The command receiver 115 receives the commands sent from the central control system 102. The local controller 116 sends appropriate commands to the grid-tie inverter 105.</p><p id="p0056" num="0056">A sequence diagram of an overall system is shown in <figref idrefs="f0003">FIG. 3</figref>.</p><p id="p0057" num="0057">The sequence of a method is described as an interaction of three actors: the power system operator 101, the central control system 102, and the local control system 104.</p><p id="p0058" num="0058">The power system operator 101 periodically sends commands to the central control system 102 in a fixed period (S120, S122).<!-- EPO <DP n="14"> --></p><p id="p0059" num="0059">At the same time, the prediction process is executed in the command predictor 112. For example, when the command receiver 110 receives an nth command sent from the power system operator 101, the command predictor 112 calculates the prediction for an n+1th command that is expected to be received from the power system operator 101. This prediction of the n+1th command is sent out of the command sender 114 to the command receiver 115 earlier than the command receiver 115 receives the actual n+1th command, in consideration of the delay in transmission between the central control system 102 and the local control system 104 (S121). For example, a time error between the n+1th command received and the actual n+1th command is less than 0.1 msec. Typical delay times are in the range of 0.1 msec to 1s. The amount of the delay time varies depending on the number of networking hops, distance, and traffic of the network between the central control system 102 and the local control system 104.</p><p id="p0060" num="0060">The command receiver 115 receives the predicted n+1th command, and the local controller 116 controls an input or output of the controllable energy resource 106 (S123).</p><p id="p0061" num="0061">This reduces the influence of the communication delay, thereby enabling responses of the distributed energy resources to be matched more closely to the commands sent from the power system operator 101.</p><p id="p0062" num="0062">A procedure of a prediction process algorithm executed in the central control system 102 will be described in detail with reference to a flowchart shown in <figref idrefs="f0004">FIG. 4</figref>.</p><p id="p0063" num="0063">First, the command receiver 110 receives an nth command (S130). After the nth command is received, the frequency measurement receiver 111 obtains a frequency measurement from a<!-- EPO <DP n="15"> --> frequency measurement source as shown in <figref idrefs="f0001">FIG. 1</figref> (S131). Then, using the received command and a frequency measurement, the command predictor 112 calculates a prediction of an n+1th command, i.e., the next command expected to be received (S132). The send time predictor 113 decides time instant at which the prediction of the n+1th command is sent to the local control system 104 (S133). This subprocess can proceed in parallel with the command prediction process. The command sender 114 waits by the time to send the predicted command (S134), and finally sends the predicted command to the local control system 104 (S135).</p><p id="p0064" num="0064">The entire process is repeated again to allow the n+1th command to be received, and to also allow an n+2th command to be predicted and sent (S136).</p><p id="p0065" num="0065">An algorithm for predicting the command (S132) and an algorithm for deciding when the predicted command is sent (S133) are described in further detail below.</p><p id="p0066" num="0066">The calculation of the predicted command is performed through a model. In a simple example, the prediction of the n+1th command is calculated as a linear combination of the received nth command (C<sub>n</sub>), a measured frequency (f<sub>n</sub>), and offset (d).<maths id="math0001" num="[Expression 1]"><math display="block"><mrow><msub><mi>c</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>=</mo><mi>a</mi><mrow><msub><mi>c</mi><mi>n</mi></msub></mrow><mo>+</mo><mi>b</mi><mrow><msub><mi>f</mi><mi>n</mi></msub></mrow><mo>+</mo><mi>d</mi><mo>,</mo></mrow></math><img id="ib0001" file="imgb0001.tif" wi="42" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0067" num="0067">Here, a, b, and d are model parameters. It is necessary for the model parameters to be set before they are used for prediction. The parameters undergo a process of offline model fitting using collected past command data and past frequency measurements, and subsequently are initialized and set in a memory before the prediction process begins. The parameters are also updated via online periodically, by periodically re-fitting the model, or through an<!-- EPO <DP n="16"> --> adaptive algorithm continuously.</p><p id="p0068" num="0068">For the fitting algorithm, a linear regression may be used.</p><p id="p0069" num="0069">It should be noted that the prediction of the n+1th command can be calculated without using the nth command (in other words, using the frequency measurements only). Alternatively, the prediction of the n+1th command can be calculated using the frequency measurement, received nth command, and one or more of past frequency measurements or past received commands. With this, improvement in the prediction accuracy is also expected. Several other variations of the prediction model include the following.</p><p id="p0070" num="0070">Using past frequency measurements and past commands, the prediction model is expressed as follows.<maths id="math0002" num="[Expression 2]"><math display="block"><mrow><msub><mi mathvariant="italic">c</mi><mrow><mi mathvariant="italic">n</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>=</mo><msub><mi mathvariant="italic">a</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi mathvariant="italic">c</mi><mrow><mi mathvariant="italic">n</mi><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><msub><mi mathvariant="italic">a</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi mathvariant="italic">c</mi><mrow><mi mathvariant="italic">n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi mathvariant="italic">a</mi><mi mathvariant="italic">N</mi></msub><mo>⁢</mo><msub><mi mathvariant="italic">c</mi><mrow><mi mathvariant="italic">n</mi><mo>-</mo><mi mathvariant="italic">N</mi></mrow></msub><mo>+</mo><msub><mi mathvariant="italic">b</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi mathvariant="italic">f</mi><mi mathvariant="italic">n</mi></msub><mo>+</mo><msub><mi mathvariant="italic">b</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi mathvariant="italic">f</mi><mrow><mi mathvariant="italic">n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi mathvariant="italic">b</mi><mi mathvariant="italic">M</mi></msub><mo>⁢</mo><msub><mi mathvariant="italic">f</mi><mrow><mi mathvariant="italic">n</mi><mo>-</mo><mi mathvariant="italic">M</mi></mrow></msub><mo>+</mo><mi>e</mi></mrow></math><img id="ib0002" file="imgb0002.tif" wi="110" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0071" num="0071">Using frequency measurements only, the prediction model is expressed as follows (this model is shown in <figref idrefs="f0005">FIGS. 5A and 5B</figref>).<maths id="math0003" num="[Expression 3]"><math display="block"><mrow><msub><mi>c</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>=</mo><mi>b</mi><mrow><msub><mi>f</mi><mi>n</mi></msub></mrow><mo>+</mo><mi>d</mi></mrow></math><img id="ib0003" file="imgb0003.tif" wi="33" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0072" num="0072">Using a filter of past frequency measurements, the prediction model is expressed as follows:<maths id="math0004" num="[Expression 4]"><math display="block"><mrow><msub><mi>c</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>N</mi></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mi>N</mi><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>f</mi><mi>n</mi></msub><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi>f</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>b</mi><mi>M</mi></msub><mo>⁢</mo><msub><mi>f</mi><mrow><mi>n</mi><mo>-</mo><mi>M</mi></mrow></msub></mrow></math><img id="ib0004" file="imgb0004.tif" wi="128" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0073" num="0073">Using a filter of past frequency measurements and past commands, the prediction model is expressed as follows:<!-- EPO <DP n="17"> --> <maths id="math0005" num="[Expression 5]"><math display="block"><mrow><msub><mi>c</mi><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>N</mi></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mi>N</mi><mo>,</mo><mi mathvariant="italic">predict</mi></mrow></msub><mo>+</mo><msub><mi>d</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>c</mi><mi>n</mi></msub><mo>+</mo><msub><mi>d</mi><mn>1</mn></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>d</mi><mi>N</mi></msub><mo>⁢</mo><msub><mi>c</mi><mrow><mi>n</mi><mo>-</mo><mi>M</mi></mrow></msub><mo>+</mo><msub><mi>b</mi><mn>0</mn></msub><mo>⁢</mo><msub><mi>f</mi><mrow><mi>n</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>b</mi><mi>M</mi></msub><mo>⁢</mo><msub><mi>f</mi><mrow><mi>n</mi><mo>-</mo><mi>M</mi></mrow></msub></mrow></math><img id="ib0005" file="imgb0005.tif" wi="129" he="20" img-content="math" img-format="tif"/></maths></p><p id="p0074" num="0074">It should be noted that values of parameters a, b, d, e, and so on after fitting are not necessarily the same among the models above.</p><p id="p0075" num="0075">An algorithm for deciding when the command is sent is described below.</p><p id="p0076" num="0076">First, an amount of delay in transmitting a command from the central control system 102 to the local control system 104 is estimated. For example, the delay is estimated by sending a ping, waiting until a reply to the ping is received, measuring time difference between the sending of the ping and the receiving of the reply, and dividing the measured time difference by two. An alternative way is to synchronize clocks of the central control system 102 and the local control system 104, and to include a time-stamp in a command when the command is sent to the local control system 104. The local control system 104 then compares the time-stamp in the command packet with a time point at which the local control system 104 has received the packet, so as to compute the delay as the difference. The delay information needs to be communicated back to the central control system 102.</p><p id="p0077" num="0077">When the delay is estimated, the send time predictor 113 decides the time instant to send the predicted command by the following equation.</p><p id="p0078" num="0078">Time at which the n+1th predicted command is sent = Time at which the nth command is received + a time period necessary for the power system operator to send commands - the estimated delay between the central control system 102 and the local control system 104.<!-- EPO <DP n="18"> --></p><p id="p0079" num="0079">Finally, an effect of the present invention will be described with reference to <figref idrefs="f0006">FIG. 6</figref>.</p><p id="p0080" num="0080"><figref idrefs="f0006">FIG. 6</figref> shows an influence of the communication delay on the command signal, an example of the timing to send the predicted command, and an effect of sending the predicted command at the predetermined timing.</p><p id="p0081" num="0081">The first plot (a) is an example of a command sent from the power system operator 101. The graph plots the desired power input in or output from a resource relative to time. The command itself is sent periodically. Assuming that the transmission delay between the power system operator 101 and the central control system 102 is very small, a waveform of the desired input power or output power received at the central control system 102 is almost the same as that shown in the first plot (a).</p><p id="p0082" num="0082">The second plot (b) shows a waveform of commands when they are received. The commands are sent from the central control system 102 and are delayed due to the transmission delay in a communication medium. A horizontal arrow represents the delay time. If the local control system 104 follows this command signal, changes in the input power or output power, which occur in the local control system 104, are late from a point of view of the command signal sent by the power system operator 101.</p><p id="p0083" num="0083">Instead of simply sending the command received from the power system operator 101 to the local control system 104, the central control system 102 makes a prediction of a command signal to be received, and sends the predicted command signal earlier, in the embodiment 1 of the present invention.</p><p id="p0084" num="0084">The third plot (c) and the fourth plot (d) show waveforms of the<!-- EPO <DP n="19"> --> predicted command signal that is the actual command signal temporally shifted from the predicted command signal by the amount of time equal to the estimated transmission delay. The predicted command is sent, and then arrives at the local control system 104 as if the central control system 102 has sent the actually received signal through a communication medium with less delay.</p><p id="p0085" num="0085">Comparing the signal in the first plot (a) with the signal in the fourth plot (d), they are not temporally shifted earlier or later relative to each other.</p><p id="p0086" num="0086">In summary, the effect of the embodiment 1 of the present invention is that the response of the distributed energy resources can be matched more closely to the command sent from the power system operator 101, by reducing the influence of the communication delay.</p><p id="p0087" num="0087">As a result, the power system operator 101 can control the controllable energy resource 106 as intended.</p><heading id="h0012">(Embodiment 2)</heading><p id="p0088" num="0088">An embodiment 2 of the present invention will be described below, with reference to <figref idrefs="f0007">FIGS. 7</figref> and <figref idrefs="f0008">8</figref>.</p><p id="p0089" num="0089">The embodiment 2 is similar to the embodiment 1, except that the embodiment 2 includes a command selector 202 having a function of deciding which one of predicted commands or actually received commands are sent. The command selector 202 sends the predicted command before the command from the power system operator 101 is received, waits until the command from the power system operator 101 is received, and then sends the received command.</p><p id="p0090" num="0090">The overall configuration of a system is the same as that of the embodiment 1, which is shown in <figref idrefs="f0001">FIG. 1</figref>. The local control system 104 is also the same as that of the embodiment 1, which is shown in<!-- EPO <DP n="20"> --> <figref idrefs="f0002">FIG. 2</figref>. A detailed configuration of a central control system is shown in <figref idrefs="f0007">FIG. 7</figref>. A central control system 201 has the same parts as those in the embodiment 1, and thus such parts are not described here.</p><p id="p0091" num="0091">The central control system 201 includes the command selector 202, which is a unique part of the embodiment 2 of the present invention. The command selector 202 includes a prediction error memory 203, a communication delay memory 204, and a communication delay estimator 205. The command sender 114 sends a received or predicted command, which is selected by the command selector 202.</p><p id="p0092" num="0092">The prediction error memory 203 stores past records of prediction errors.</p><p id="p0093" num="0093">The communication delay memory 204 stores past transmission delay.</p><p id="p0094" num="0094">The communication delay estimator 205 estimates present transmission delay, which is a similar function as that of the aforementioned send time predictor 113.</p><p id="p0095" num="0095">The command selector 202 decides whether (i) sending the predicted command before the command is received, or (ii) waiting until the command is received by the central control controller and then sending the received command.</p><p id="p0096" num="0096">When the transmission delay is large, it may be optimal to send the prediction of a command early. However, when the transmission delay is small, it may not be necessary to send the prediction of the command early.</p><p id="p0097" num="0097">On the other hand, when the error in a prediction of the next command is large, it may be better to wait until the command is<!-- EPO <DP n="21"> --> received and then send the received command. When the prediction error is small, it may be better to send the predicted command.</p><p id="p0098" num="0098">The command selector 202 estimates prediction errors using the prediction error memory 203 and estimates transmission delay using the communication delay memory 204 and the communication delay estimator 205. The command selector 202 decides a command to be sent based on the estimated prediction error and the estimated transmission delay (a method for deciding the command to be sent is described in more detail later).</p><p id="p0099" num="0099"><figref idrefs="f0008">FIG. 8</figref> is a flowchart of an algorithm of the central control system 201.</p><p id="p0100" num="0100">When a process starts, the command selector 202 first decides whether or not to send the predicted command (S210). If the command selector 202 decides to send the predicted command (Yes at S210), the remainder of the flowchart is the same as those in the embodiment 1 (shown in <figref idrefs="f0004">FIG. 4</figref>). On the other hand, if the system decides not to send the predicted command (No at S210), the command selector 202 waits until the command receiver 110 receives an n+1th command (S211), and then the command sender 114 sends the received n+1th command to the local control system 104 immediately after the command receiver 110 receives the n+1th command (S212).</p><p id="p0101" num="0101">A method for deciding whether or not to send the predicted command is described below.</p><p id="p0102" num="0102">The command selector 202 decides which one of the predicted command and the received command should be sent for excellent overall system performance.</p><p id="p0103" num="0103">As an example of a criteria for the above, the command selector<!-- EPO <DP n="22"> --> 202 selects whether or not to send the predicted command based on a threshold. For example, if the prediction error of the previous nth command is larger than a threshold value, the command selector 202 selects to send the received n+1th command instead of sending the predicted n+1th command. Alternatively, if the transmission delay of the previous command is larger than the threshold value, the command selector 202 selects to send the predicted n+1th command early instead of waiting to receive the n+1th command.</p><p id="p0104" num="0104">As another example of such criteria, the command selector 202 selects whether or not to send the predicted command or the received command based on which one of them contributes to the regulation service greater. In some regions, contribution to the regulation service depends on performance including several aspects such as command following accuracy.</p><p id="p0105" num="0105">Service providers may be penalized for inaccurate or delayed responses. In these regions, based on a calculation method for an incentive applicable to the predetermined region, the command selector 202 can calculate the incentive to be hypothetically received in the case when a predicted response is sent with an estimated prediction error, and when the received command is sent with delay.</p><p id="p0106" num="0106">In summary, according to the embodiment 2 of the present invention, the local control system 104 can advantageously receive the predicted command or the actual command depending on the situation.</p><p id="p0107" num="0107">As a result, the power system operator 101 may control the controllable energy resource 106 as intended better.</p><heading id="h0013">(Embodiment 3)</heading><p id="p0108" num="0108">An embodiment 3 of the present invention will be described below, with reference to <figref idrefs="f0009">FIGS. 9</figref> and <figref idrefs="f0010">10</figref>.<!-- EPO <DP n="23"> --></p><p id="p0109" num="0109">The embodiment 3 is similar to the embodiment 1, except that the embodiment 3 includes two command predictors based on models different from each other, and a model selector 303. A detailed configuration of a central control system is shown in <figref idrefs="f0009">FIG. 9</figref>. A central control system 301 has the same parts as those in the embodiment 1, and thus they are not described here.</p><p id="p0110" num="0110">The command predictor (model 1) 112 makes command predictions based both on received commands and received frequency measurements (prediction 1). On the other hand, a command predictor 302 (model 2) makes command predictions based only on the received frequency measurements (prediction 2). The model 1 and model 2 may be the same as the models described in the embodiment 1.</p><p id="p0111" num="0111">The model selector 303 selects which one of the command predictions (prediction 1 or prediction 2) is sent to the local control system 104 through the command sender 114. The model selector 303 includes a sensor 304. For example, the sensor 304 may be a method of sensing the condition of a communication network between the power system operator 101 and the central control system 301. If a state of the communication network is normal, the model selector 303 selects to use the prediction 1. If the communication with the power system operator 101 is abnormal or the connection is down, the command predictor 112 cannot receive commands from the power system operator 101 and cannot make the prediction 1, and therefore the model selector 303 selects to use the prediction 2.</p><p id="p0112" num="0112"><figref idrefs="f0010">FIG. 10</figref> shows a flowchart of a prediction process in detail. When the prediction process starts, in the method, it is first decided whether communication network is up (S310). This is implemented by the sensor 304 shown in <figref idrefs="f0009">FIG. 9</figref> through methods. For example, the communication network may be a TCP/IP network, and the sensor<!-- EPO <DP n="24"> --> 304 may be a program used to judge a connection state based on how long ago the last received TCP acknowledge packet was.</p><p id="p0113" num="0113">If the model selector 303 decides that the network is down (No in S310), the command predictor 302 obtains the frequency measurement (S311), and calculates the prediction of an n+1th command with the model 2 (S312). If the model selector 303 decides that the network is up (Yes in S310), the command predictor 112 waits to receive an nth command (S130), obtains a frequency measurement (S131), and calculates the prediction of the n+1th command with the model 1 (S132). The remainder of the flowchart is the same as those in the embodiment 1 (shown in <figref idrefs="f0004">FIG. 4</figref>).</p><p id="p0114" num="0114">The model 1 has an advantage that its predictions are often more accurate, whereas the model 2 has an advantage that it can makes predictions without need for receiving the commands. This means that predictions can be made with the model 2 even when the communication network state is abnormal. Therefore, both the model 1 and the model 2, and a selector are advantageously used for implementing the method, thereby selecting the prediction 1 or the prediction 2 depending on the conditions of the communication network.</p><heading id="h0014">(Option 1)</heading><p id="p0115" num="0115">Option 1 may be used together with any of the embodiments of the present invention. In the option 1, the method described in any of the embodiments is implemented on local control systems 402 of distributed energy resources, instead of on a central control system 401.</p><p id="p0116" num="0116">The overview of a system configuration according to the option 1 is shown in <figref idrefs="f0011">FIG. 11</figref>. This option of the embodiment 1 is the same as the embodiment 1 shown in <figref idrefs="f0002">FIG. 2</figref>, except that a prediction algorithm is used on the local control system 402 instead of the central control<!-- EPO <DP n="25"> --> system 401.</p><p id="p0117" num="0117">The central control system 401 includes a command distribution 403. If there are more than one local control system 402, the command distribution 403 distributes received commands to the local control systems 402.</p><p id="p0118" num="0118">The local control system 402 includes the command receiver 115, the frequency measurement receiver 111, a command predictor 412, a command sender 404, and the send time predictor 113. The command receiver 115 and the frequency measurement receiver 111 are both connected to the command predictor 412, and the command sender 404 is connected to the command predictor 412 and the send time predictor 113. The local control system 402 has a configuration partially identical to that in the embodiment 1.</p><p id="p0119" num="0119">The command predictor 412 makes predictions of a command to be received next from the central control system 401. The command sender 404 sends the predicted commands to controllers of distributed energy resources. The predicted command is sent at an earlier time than the command is received by the central control system 401. More precisely, the time at which the command is sent is decided by the send time predictor 113.</p><p id="p0120" num="0120">The controller of the distributed energy resource mentioned above may be a microcontroller that implements a method of controlling the power input or output of the grid-tie inverter 105 that connects the controllable energy resource 106 to the power grid 107. The controller of the distributed energy resource and the local control system 402, where the method of the present invention is implemented, may be on the same circuit board or different boards physically close to each other, and may be connected through serial or parallel end-to-end connections or buses. Such connection has low latency.<!-- EPO <DP n="26"> --></p><p id="p0121" num="0121">The effect of the option 1 is the same as those in any of the above embodiments: the influence of the communication delay is decreased. There is an additional advantage of the option 1: the prediction process is implemented on the local control system 402 side instead of the central control system 401 side, thereby reducing the time difference between the sampling of the frequency measurement and the arrival of the sent predicted command at the energy resource. This is because that the delay does not incur in transmitting the predicted command through the communication network.</p><p id="p0122" num="0122">The advantage of having less delay between the sampling of the frequency measurement and control action by the energy resource controller is that the system can respond faster to changes in the frequency. This makes the system more effective at controlling grid frequency fluctuations.</p><p id="p0123" num="0123">The detailed sequence of the method according to the option 1 is shown in <figref idrefs="f0012">FIG. 12</figref>.</p><p id="p0124" num="0124">The power system operator 101 sends commands at a fixed period of time (S120). The central control system 401 sends the commands to the local control system 402 as soon as the central control system 401 receives the commands. The time at which the commands arrive at the local control system 402 is delayed due to transmission delay in a communication medium between the central control system 401 and the local control system 402.</p><p id="p0125" num="0125">The prediction process is running on the local control system 402. For example, if the prediction process according to the embodiment 1 (shown in <figref idrefs="f0004">FIG. 4</figref>) is used, the prediction process running on the local control system 402 could be the same as those described in the embodiment 1 (S421). After the prediction, the local control system 402 waits by the time decided to send the predicted<!-- EPO <DP n="27"> --> command, and then sends the predicted command to the grid-tie inverter 105 (S422). As shown in the sequence of <figref idrefs="f0012">FIG. 12</figref>, the prediction of a command n+1 is sent to the grid-tie inverter 105 earlier than the n+1th command is received by the central control system 401. The timing of sending the prediction of the command n+1 is decided so that the prediction arrives at the grid-tie inverter 105 at the same time as the command n+1 is received by the grid-tie inverter 105 in the case when no delay incurs in the communication between the central control system 401 and local control system 402.</p><p id="p0126" num="0126">This option 1 can be incorporated in the embodiment 1, the embodiment 2, and the embodiment 3.</p><p id="p0127" num="0127">Each of the structural elements in each of the above-described embodiments may be configured in the form of an exclusive hardware product, or may be realized by executing a software program suitable for the structural element. Each of the structural elements may be realized by means of a program executing unit, such as a CPU and a processor, reading and executing the software program recorded on a recording medium such as a hard disk or a semiconductor memory. Here, the software program for realizing the system, and the like according to each of the embodiments is a program described below</p><p id="p0128" num="0128">Specifically, the program causes a computer to execute a frequency control method for use in a frequency control system including: a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency; at least one distributed energy resource; and a local controller connected to the server through a communication network and to the at least one distributed energy resource. The frequency control method includes: receiving the power command from the power system operator; obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power<!-- EPO <DP n="28"> --> command is received from the power system operator; and controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</p><p id="p0129" num="0129">Each of the components may be a circuit. These circuits, as a whole, may form a single circuit, or may independently be a single circuit. Each of the circuits may be a general circuit or a dedicated circuit.</p><p id="p0130" num="0130">Although frequency control methods according to one or more embodiments are described in accordance with the embodiments, the present invention is not limited to the embodiments. Forms obtained by various modifications to the exemplary embodiments that can be conceived by a person of skill in the art as well as forms realized by combining structural components in different exemplary embodiments, which are within the scope of the essence of the present disclosure may be included in one or more aspects.</p><p id="p0131" num="0131">For example, processes performed by a specified processing unit may be performed by another processing unit. In addition, the order of a plurality of processes may be changed, and a plurality of processes may be performed in parallel.</p><heading id="h0015">[Industrial Applicability]</heading><p id="p0132" num="0132">The present invention is useful for frequency control in a power system.</p><heading id="h0016">[Reference Signs List]</heading><p id="p0133" num="0133"><dl id="dl0001" compact="compact"><dt>101:</dt><dd>Power system operator</dd><dt>102, 201, 301, 401:</dt><dd>Central control system</dd><dt>103:</dt><dd>Frequency sensor</dd><dt>104, 402:</dt><dd>Local control system<!-- EPO <DP n="29"> --></dd><dt>105:</dt><dd>Grid-tie inverter (Inverter)</dd><dt>106:</dt><dd>Controllable energy resource</dd><dt>107:</dt><dd>Electricity grid</dd><dt>110, 115:</dt><dd>Command receiver</dd><dt>111:</dt><dd>Frequency measurement receiver</dd><dt>112, 302, 412:</dt><dd>Command predictor</dd><dt>113:</dt><dd>Send time predictor</dd><dt>114, 404:</dt><dd>Command sender</dd><dt>116:</dt><dd>Local controller</dd><dt>202:</dt><dd>Command selector</dd><dt>203:</dt><dd>Prediction error memory</dd><dt>204:</dt><dd>Communication delay memory</dd><dt>205:</dt><dd>Communication delay estimator</dd><dt>303:</dt><dd>Model selector</dd><dt>304:</dt><dd>Sensor</dd><dt>403:</dt><dd>Command distribution</dd></dl></p></description><claims mxw-id="PCLM90459304" lang="EN" load-source="patent-office"><!-- EPO <DP n="30"> --><claim id="c-en-0001" num="0001"><claim-text>A frequency control method for use in a frequency control system including:
<claim-text>a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency;</claim-text>
<claim-text>at least one distributed energy resource; and</claim-text>
<claim-text>a local controller connected to the server through a communication network and to the at least one distributed energy resource,</claim-text>
<claim-text>the frequency control method comprising:
<claim-text>receiving the power command from the power system operator;</claim-text>
<claim-text>obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and</claim-text>
<claim-text>controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The frequency control method according to claim 1, comprising:
<claim-text>calculating communication delay time in the communication network; and</claim-text>
<claim-text>controlling the input or output of the at least one distributed power energy resource using the predicted next power command, based on the communication delay time.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The frequency control method according to claim 2<!-- EPO <DP n="31"> --> comprising:
<claim-text>controlling the input or output of the at least one distributed power energy resource using the power command to be received when the communication delay time is less than a predetermined value, and</claim-text>
<claim-text>controlling the input or output of the at least one distributed power energy resource using the predicted next power command when the communication delay time is greater than the predetermined value.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The frequency control method according to any one of claims 1 to 3,<br/>
wherein a difference between a timing at which the power system operator sends the power command and a timing at which the input or output of the at least one distributed power energy resource changes after the predicted next power command is received is less than a predetermined time.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The frequency control method according to any one of claims 1 to 4, comprising:
<claim-text>predicting the next power command using the frequency measurement and a relationship between the frequency measurement and the power command which are in a memory.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The frequency control method according to any one of claims 1 to 5, comprising<br/>
predicting the next power command using the frequency measurement, a past received power command, and a model indicating a relationship between the frequency measurement and the power command to be received.<!-- EPO <DP n="32"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The frequency control method according to claim 6,<br/>
wherein the model is a regression model.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The frequency control method according to any one of claims 1 to 7, comprising:
<claim-text>calculating a prediction error;</claim-text>
<claim-text>controlling the input or output of the at least one distributed power energy resource using the power command to be received when the prediction error is greater than a predetermined value; and</claim-text>
<claim-text>controlling the input or output of the at least one distributed power energy resource using the predicted next power command when the prediction error is less than the predetermined value.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The frequency control method according to any one of claims 1 to 8, comprising:
<claim-text>calculating a communication state; and</claim-text>
<claim-text>controlling the input or output of the at least one distributed power energy resource using the frequency measurement when the communication state is abnormal or disconnected.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The frequency control method according to any one of claims 1 to 9, the method being executed in the server by the server sending the power command to the local controller.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The frequency control method according to any one of claims 1 to 10, the method being executed in the local controller.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A program for use in a frequency control system including:<!-- EPO <DP n="33"> -->
<claim-text>a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency;</claim-text>
<claim-text>at least one distributed energy resource; and</claim-text>
<claim-text>a local controller connected to the server through a communication network and to the at least one distributed energy resource,</claim-text>
<claim-text>the program causing the frequency control system to execute:
<claim-text>receiving the power command from the power system operator;</claim-text>
<claim-text>obtaining a frequency measurement of the power grid; predicting a next power command using the frequency measurement, before the next power command is received from the power system operator; and</claim-text>
<claim-text>controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</claim-text></claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A frequency control system comprising:
<claim-text>a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency;</claim-text>
<claim-text>at least one distributed energy resource; and</claim-text>
<claim-text>a local controller connected to the server through a communication network and to the at least one distributed energy resource,</claim-text>
<claim-text>the frequency control system executing:
<claim-text>receiving the power command from the power system operator;</claim-text>
<claim-text>obtaining a frequency measurement of the power grid;</claim-text>
<claim-text>predicting a next power command using the frequency measurement, before the next power command is received from the<!-- EPO <DP n="34"> --> power system operator; and</claim-text>
<claim-text>controlling an input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</claim-text></claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A server for use in a frequency control system including:
<claim-text>the server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a predetermined frequency;</claim-text>
<claim-text>at least one distributed energy resource; and</claim-text>
<claim-text>a local controller connected to the server through a communication network and to the at least one distributed energy resource,</claim-text>
<claim-text>the server comprising</claim-text>
<claim-text>a controller that controls an input or output of the at least one distributed power energy resource,</claim-text>
<claim-text>wherein the controller:
<claim-text>receives the power command from the power system operator;</claim-text>
<claim-text>obtains a frequency measurement of the power grid;</claim-text>
<claim-text>predicts a next power command using the frequency measurement, before the next power command is received from the power system operator; and</claim-text>
<claim-text>controls the input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</claim-text></claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A local controller for use in a frequency control system including:
<claim-text>a server that receives, from a power system operator, a power command for controlling a frequency of a power grid within a<!-- EPO <DP n="35"> --> predetermined frequency;</claim-text>
<claim-text>at least one distributed energy resource; and</claim-text>
<claim-text>the local controller connected to the server through a communication network and to the at least one distributed energy resource,</claim-text>
<claim-text>the local controller comprising
<claim-text>a controller that controls an input or output of the at least one distributed power energy resource,</claim-text>
<claim-text>wherein the controller</claim-text>
<claim-text>receives the power command from the power system operator;</claim-text>
<claim-text>obtains a frequency measurement of the power grid;</claim-text>
<claim-text>predicts a next power command using the frequency measurement, before the next power command is received from the power system operator; and</claim-text>
<claim-text>controls the input or output of the at least one distributed power energy resource using the predicted next power command, before the next power command is received from the power system operator.</claim-text></claim-text></claim-text></claim></claims><drawings mxw-id="PDW20422037" load-source="patent-office"><!-- EPO <DP n="36"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="124" he="197" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="106" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="135" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="97" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0005" num="5A,5B"><img id="if0005" file="imgf0005.tif" wi="152" he="202" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0006" num="6(a),6(b),6(c),6(d)"><img id="if0006" file="imgf0006.tif" wi="165" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="129" he="219" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="160" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="112" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0010" num="10"><img id="if0010" file="imgf0010.tif" wi="149" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0011" num="11"><img id="if0011" file="imgf0011.tif" wi="123" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0012" num="12"><img id="if0012" file="imgf0012.tif" wi="154" he="224" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="230" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="230" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
