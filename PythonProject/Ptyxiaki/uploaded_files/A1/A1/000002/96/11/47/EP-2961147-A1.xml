<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961147-A1" country="EP" doc-number="2961147" kind="A1" date="20151230" family-id="51022233" file-reference-id="285715" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451195" ucid="EP-2961147-A1"><document-id><country>EP</country><doc-number>2961147</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-15170298-A" is-representative="NO"><document-id mxw-id="PAPP193865358" load-source="docdb" format="epo"><country>EP</country><doc-number>15170298</doc-number><kind>A</kind><date>20150602</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193865359" load-source="patent-office" format="original"><country>EP</country><doc-number>15170298.2</doc-number><date>20150602</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162030600" ucid="EP-14173680-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>14173680</doc-number><kind>A</kind><date>20140624</date></document-id></priority-claim><priority-claim mxw-id="PPC162031334" ucid="EP-15170298-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>15170298</doc-number><kind>A</kind><date>20150602</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988523345" load-source="docdb">H04M   3/428       20060101AFI20151113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988525026" load-source="docdb">H04M   3/42        20060101ALI20151113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988527538" load-source="docdb">G10L  19/018       20130101ALI20151113BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1959453605" load-source="docdb" scheme="CPC">H04M   3/4211      20130101 LI20160316BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1959453606" load-source="docdb" scheme="CPC">G10L  19/018       20130101 LA20160316BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984698281" load-source="docdb" scheme="CPC">H04W   4/16        20130101 LI20151224BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984698743" load-source="docdb" scheme="CPC">H04M   1/72558     20130101 LI20151224BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984700406" load-source="docdb" scheme="CPC">H04M   3/4285      20130101 FI20160106BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165545051" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR EINSTELLUNG VON DETEKTIONSPARAMETERN IN EINER VORRICHTUNG ZUR DETEKTION VON WARTESCHLEIFENMUSIK</invention-title><invention-title mxw-id="PT165545052" lang="EN" load-source="patent-office">METHOD OF SETTING DETECTION PARAMETERS IN AN APPARATUS FOR ON-HOLD MUSIC DETECTION</invention-title><invention-title mxw-id="PT165545053" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME DE RÉGLAGE DES PARAMÈTRES DE DÉTECTION DANS UN APPAREIL DE DÉTECTION DE MUSIQUE D'ATTENTE</invention-title><citations><patent-citations><patcit mxw-id="PCIT335745569" load-source="docdb" ucid="EP-1672898-A2"><document-id format="epo"><country>EP</country><doc-number>1672898</doc-number><kind>A2</kind><date>20060621</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335743868" load-source="docdb" ucid="EP-1755323-A1"><document-id format="epo"><country>EP</country><doc-number>1755323</doc-number><kind>A1</kind><date>20070221</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335741531" load-source="docdb" ucid="US-20030235289-A1"><document-id format="epo"><country>US</country><doc-number>20030235289</doc-number><kind>A1</kind><date>20031225</date></document-id><sources><source name="SEA" category="DA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335742870" load-source="docdb" ucid="US-20070223673-A1"><document-id format="epo"><country>US</country><doc-number>20070223673</doc-number><kind>A1</kind><date>20070927</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335741054" load-source="docdb" ucid="US-20080254774-A1"><document-id format="epo"><country>US</country><doc-number>20080254774</doc-number><kind>A1</kind><date>20081016</date></document-id><sources><source name="SEA" category="DA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335740276" load-source="docdb" ucid="US-20090136014-A1"><document-id format="epo"><country>US</country><doc-number>20090136014</doc-number><kind>A1</kind><date>20090528</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335744134" load-source="docdb" ucid="US-20110228914-A1"><document-id format="epo"><country>US</country><doc-number>20110228914</doc-number><kind>A1</kind><date>20110922</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335738308" load-source="docdb" ucid="US-7136479-B2"><document-id format="epo"><country>US</country><doc-number>7136479</doc-number><kind>B2</kind><date>20061114</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335743506" load-source="docdb" ucid="US-7403605-B1"><document-id format="epo"><country>US</country><doc-number>7403605</doc-number><kind>B1</kind><date>20080722</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335740004" load-source="docdb" ucid="US-8412164-B2"><document-id format="epo"><country>US</country><doc-number>8412164</doc-number><kind>B2</kind><date>20130402</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335743079" load-source="docdb" ucid="WO-2009073035-A1"><document-id format="epo"><country>WO</country><doc-number>2009073035</doc-number><kind>A1</kind><date>20090611</date></document-id><sources><source name="APP" created-by-npl="N"/><source name="SEA" category="DA" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>SCHREINER; SLANEY: "Construction and evaluation of a robust multifeature Speech/Music discriminator", INTERVAL RESEARCH COR.</text><sources><source mxw-id="PNPL57906804" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>SEYERLEHNER; POHLE; SCHEDL; WIDMER, AUTOMATIC MUSIC DETECTION IN TELEVISION PRODUCTIONS, 2007</text><sources><source mxw-id="PNPL57906805" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103310669" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>LAB THOMSON LTD</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR1103314750" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>LABORATORIES THOMSON LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101641072" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Laboratories Thomson Ltd.</last-name><iid>101462485</iid><address><street>Badenerstrasse 569</street><city>8048 Zürich</city><country>CH</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103328317" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KELLER ANTON WERNER</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103334715" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KELLER, ANTON WERNER</last-name></addressbook></inventor><inventor mxw-id="PPAR1101641635" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KELLER, ANTON WERNER</last-name><address><street>Chaelmatt 47</street><city>8905 Arni</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103344126" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>GULDENER ROLF</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103318200" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>GULDENER, ROLF</last-name></addressbook></inventor><inventor mxw-id="PPAR1101640047" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>GULDENER, ROLF</last-name><address><street>Willikon 37</street><city>8618 Oetwil am See</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332404" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>DUBACH STEFAN</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342497" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>DUBACH, Stefan</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650203" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>DUBACH, Stefan</last-name><address><street>Müliweg 76</street><city>5078 Effingen</city><country>CH</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101645984" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Lindemann, Robert</last-name><iid>100827083</iid><address><street>Deutsche Thomson OHG European Patent Operations Karl-Wiechert-Allee 74</street><city>30625 Hannover</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660681313" load-source="docdb">AL</country><country mxw-id="DS660605949" load-source="docdb">AT</country><country mxw-id="DS660683731" load-source="docdb">BE</country><country mxw-id="DS660681188" load-source="docdb">BG</country><country mxw-id="DS660681270" load-source="docdb">CH</country><country mxw-id="DS660683732" load-source="docdb">CY</country><country mxw-id="DS660605950" load-source="docdb">CZ</country><country mxw-id="DS660681335" load-source="docdb">DE</country><country mxw-id="DS660683733" load-source="docdb">DK</country><country mxw-id="DS660683734" load-source="docdb">EE</country><country mxw-id="DS660603759" load-source="docdb">ES</country><country mxw-id="DS660681189" load-source="docdb">FI</country><country mxw-id="DS660681275" load-source="docdb">FR</country><country mxw-id="DS660681336" load-source="docdb">GB</country><country mxw-id="DS660683743" load-source="docdb">GR</country><country mxw-id="DS660681337" load-source="docdb">HR</country><country mxw-id="DS660605963" load-source="docdb">HU</country><country mxw-id="DS660681276" load-source="docdb">IE</country><country mxw-id="DS660683744" load-source="docdb">IS</country><country mxw-id="DS660681190" load-source="docdb">IT</country><country mxw-id="DS660683745" load-source="docdb">LI</country><country mxw-id="DS660681207" load-source="docdb">LT</country><country mxw-id="DS660605328" load-source="docdb">LU</country><country mxw-id="DS660681208" load-source="docdb">LV</country><country mxw-id="DS660681209" load-source="docdb">MC</country><country mxw-id="DS660605329" load-source="docdb">MK</country><country mxw-id="DS660605330" load-source="docdb">MT</country><country mxw-id="DS660603760" load-source="docdb">NL</country><country mxw-id="DS660782112" load-source="docdb">NO</country><country mxw-id="DS660603761" load-source="docdb">PL</country><country mxw-id="DS660681210" load-source="docdb">PT</country><country mxw-id="DS660605964" load-source="docdb">RO</country><country mxw-id="DS660681215" load-source="docdb">RS</country><country mxw-id="DS660603762" load-source="docdb">SE</country><country mxw-id="DS660681277" load-source="docdb">SI</country><country mxw-id="DS660782113" load-source="docdb">SK</country><country mxw-id="DS660782114" load-source="docdb">SM</country><country mxw-id="DS660605335" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479565" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A method of setting detection parameters in an apparatus for on-hold music detection, includes comparing a telephone number dialed with telephone numbers in a database. If the telephone number dialed is found in the database, detection parameters and/or detection software associated with the telephone number are retrieved from the database, and the retrieved detection parameters and/or detection software are provided to an on-hold music detection unit.
<img id="iaf01" file="imgaf001.tif" wi="165" he="70" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759377" lang="EN" source="EPO" load-source="docdb"><p>A method of setting detection parameters in an apparatus for on-hold music detection, includes comparing a telephone number dialed with telephone numbers in a database. If the telephone number dialed is found in the database, detection parameters and/or detection software associated with the telephone number are retrieved from the database, and the retrieved detection parameters and/or detection software are provided to an on-hold music detection unit.</p></abstract><description mxw-id="PDES98404266" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>Field</u></heading><p id="p0001" num="0001">The present invention relates to communications, and, in particular, to audio content handling in telephone calls placed on-hold.</p><heading id="h0002"><u>Background</u></heading><p id="p0002" num="0002">A common telephony feature is placing a user on "hold" or in an "on-hold" state. When a first user places a second user on hold, the connection is maintained while the first user's handset is disconnected from the connection. This allows the first user to take another call or step away from the handset. When the hold feature, or state, is enabled, the second user might be connected to another signal source for the receive signal path, such as broadcast news or a prerecorded message. A very common signal source for the on-hold connection is pre-recorded or broadcast music, termed "on-hold music," where music selections are transmitted to the receiver while the connection is in an on-hold state. The music selections are played out at the second user's handset receiver until the on-hold state is terminated.</p><p id="p0003" num="0003">The second user typically has no means of control over the on-hold music. Some types of on-hold music may be annoying or objectionable. Thus, there is a general desire to replace on-hold music with other content selected by the second user and provided at the second user's side of the connection. This desire has led to the development of various methods and apparatuses allowing for replacing on-hold music in telephone connections.</p><p id="p0004" num="0004">For example, <patcit id="pcit0001" dnum="WO2009073035A"><text>WO 2009/073035</text></patcit> discloses a wireless telephone handset which, while in an on-hold state, allows a user to select one or more sources for play-out of media at a handset receiver, and then be signaled when the on-hold state is terminated. Detection of on-hold state is done by detecting on-hold music or by receiving an on-hold signaling. The media source is located in the<!-- EPO <DP n="2"> --> user's handset or accessed through a separate connection established between the handset and the network.</p><p id="p0005" num="0005">Similarly, <patcit id="pcit0002" dnum="US7136479B"><text>US 7,136,479</text></patcit> discloses a replacing on-hold music with audio content from a local source at a telephone receiver. The local audio content is played to a user while on-hold music is detected.</p><p id="p0006" num="0006">More generally, <patcit id="pcit0003" dnum="US8412164B"><text>US 8,412,164</text></patcit> discloses reproducing various kinds of user-selectable data while a user is placed on hold in a telephone connection.</p><heading id="h0003"><u>Summary of the invention</u></heading><p id="p0007" num="0007">The detection of on-hold music takes noticeable time. Also, different types of on-hold music are available, e.g. single tone 'synthetic' music, or actual music of different genres, like pop, rock, classic, and the like. This makes the on-hold music detection difficult, as these different types and genres need to be recognized equally well, but each one of the different type or genre of music may require different parameters, methods and/or software for optimal recognition results. Even more different parameter sets, methods and/or software may be required in case the on-hold music is watermarked, since in this case recognizing the watermarks may be preferred over recognizing the music. The same is true when flags or other signals are transmitted for indicating on-hold music. Such flags or signals may be transmitted either in-band, similar to the RDS traffic announcements used in FM radio, or over a dedicated control channel. In each of the cases a detector is provided either at the first party's device, or in the network and in communication with the first party's device. The time required for detection may vary between different types of on-hold music detection.</p><p id="p0008" num="0008">Recognition is typically performed by a digital signal processor that is provided with a software and parameters for recognizing. It is a well-known fact that a single set of parameters does not provide optimal recognition results for different types of music, different genres of music, and even more so for watermark detection. In order to prevent having to provide processing power,<!-- EPO <DP n="3"> --> memory, and other elements and components for each conceivable type and genre of music, and for watermark detection, the present invention suggests providing a set of parameters depending on the type or genre of music, or depending on whether or not watermarking is used, that can be expected for a particular telephone number that was dialed.</p><p id="p0009" num="0009">The invention recognizes that the type or genre of music, or use of watermarks, associated with a particular telephone number, changes only very seldom, if ever. Thus, in accordance with the invention a most appropriate parameter set, or even recognition software, is selected from a database in accordance with the telephone number dialed, and provided to an on-hold recognition unit. The on-hold recognition unit typically includes a digital signal processor, which receives the selected parameter set and/or the software. The database can be updated automatically, e.g. over the internet, or through a learning algorithm, or manually.</p><p id="p0010" num="0010">The invention also allows for adding telephone numbers dialed for the very first time to the database, and adding appropriate parameter sets and/or software, once a most appropriate parameter set and/or software has been determined.</p><p id="p0011" num="0011">For example, once a telephone number is dialed, and on-hold music is received, a user can manually trigger a recognition process that tries each of the detection types, for example starting with watermarks and flags. Once a specific type has been detected, the information is stored in the database for later reference. The user interaction can of course be replaced by having the audio signal analysis running permanently, trying to detect on-hold music. Once on-hold music is detected by audio signal analysis, the other methods can be tried for refinement, and the database can be updated based on the result of the analysis.<!-- EPO <DP n="4"> --></p><p id="p0012" num="0012">Generally, determination of parameter sets may be triggered manually, in response to a user input, or automatically, by sequentially trying different parameter sets and/or software while a connection is established.</p><p id="p0013" num="0013">In order to continually improve the detection of on-hold music for each telephone number, the parameter sets may be adaptively tuned for improving detection. Once an improved parameter set has been found, the improved parameter set is stored for the associated telephone number. The tuning may occur 'live', i.e. while a connection with on-hold music is established, or offline. For off-line recognition, a portion of the on-hold music detected under the old parameter set is stored and analyzed at a later time.</p><p id="p0014" num="0014">Determination of parameter sets and/or software may also include obtaining the parameter sets and/or software over a separate data connection. Reception of parameter sets and/or software may be charged separately or may be free of charge.</p><p id="p0015" num="0015">In case the software and/or parameter set is provided at a charge, the charge may be billed depending on the telephone number. For example, when a particular telephone number is dialed, this number may be associated with a separate data connection, over which the parameter set and/or software is provided. The provision may be effected out-of-band or in-band. Such provision over a separate data connection is particularly useful and simple to implement in IP-based telephone networks, i.e. VoIP networks, which are increasingly replacing conventional telephone networks.</p><p id="p0016" num="0016">The invention also allows for preventing the detection mechanism to start working for telephone numbers known not to use on-hold music. This reduces the processing load on a user's device and thus reduces the power consumption. Alternatively, the processing load that is not required can be used for processing other tasks which would otherwise have been delayed.<!-- EPO <DP n="5"> --> A method of setting detection parameters in an apparatus for on-hold music detection in accordance with one aspect of the invention includes comparing a telephone number dialed with telephone numbers in a database. If the telephone number dialed is found in the database, detection parameters for the telephone number are retrieved from the database, and provided to an on-hold music detection unit.</p><p id="p0017" num="0017">Detection of on-hold music can be performed in a telephone device at a first party's side, which is the party that is placed on hold, or in a detector located in the network, in between the first and a second party, which detector has at least listener-access to the connection, and which has some control over the connection for replacing the on-hold music.</p><p id="p0018" num="0018">Likewise the database may be located in the telephone device at the first party's side, or remote.</p><p id="p0019" num="0019">Access to the database and/or the on-hold music detection unit for retrieving parameters and/or software or for providing the parameters and/or the software to the on-hold music detection unit can be established by use of known networking technologies. These known networking technologies include in-band signaling, e.g. using DTMF keys, or out-of-band signaling, e.g. over a separate data connection of generally known type.</p><p id="p0020" num="0020">In an embodiment of the invention the parameters configure the on-hold music detection unit to perform audio signal analysis.</p><p id="p0021" num="0021">In a development of the previous embodiment the audio signal analysis is configured to adaptively self-learn. In accordance with the self-learning the signal analysis parameters are modified during or after a previous telephone connection, for which on-hold music detection was performed, in order to improve the speed, accuracy and/or reliability of on-hold music detection. Once an improved parameter set has been determined, the improved parameter set is stored for the associated telephone number.<!-- EPO <DP n="6"> --></p><p id="p0022" num="0022">The process of adaptively self-learning can be executed while the telephone connection and the on-hold music is active, or can be executed after the telephone connection is terminated. In the latter case at least a portion of on-hold music recognized under the previous parameter set is stored, and accessed later for the self-learning process. The stored portion may also be sent to a device remote from the user's device, for performing the parameter extraction, and only the parameters are received for storage and subsequent use after the processing is terminated.</p><p id="p0023" num="0023">If a telephone number has been dialed for the very first time, the on-hold music detecting unit may operate under an initial parameter set, and may subsequently perform the parameter set optimization in one of the ways described before. In this context it is also possible to record, in response to a user command, passages containing on-hold music, or even the entire communication, for subsequent off-line determination of a parameter set. Once the parameters for this new telephone number are determined both are associated and stored in the database.</p><p id="p0024" num="0024">The adaptive self-learning process may also be executed based on an initial parameter set selected by a user, corresponding to a type of on-hold music, or to on-hold music detection by watermarking.</p><p id="p0025" num="0025">Alternatively, the adaptive self-learning may sequentially try each one of a number of detection methods and/or parameter sets, and select the one that performed best.</p><p id="p0026" num="0026">Judging the software and/or parameter set that performed best may be done automatically, e.g. in accordance with preset thresholds, or in response to a user input.</p><p id="p0027" num="0027">As stated further above different types of on-hold music require different parameters and/or software or algorithms for best recognition results.<!-- EPO <DP n="7"> --> <nplcit id="ncit0001" npl-type="b"><text>Schreiner/Slaney, in "Construction and evaluation of a robust multifeature Speech/Music discriminator", Interval Research Cor., Palo Alto CA</text></nplcit>, and <nplcit id="ncit0002" npl-type="s"><text>Seyerlehner/Pohle/Schedl/Widmer in "Automatic Music Detection in Television Productions", 2007, Kepler University, Austria</text></nplcit>, name many different features of an audio sequence that can be extracted and analyzed to classify an audio sequence. Examples of audio features are: 4 Hz modulation energy, Percentage of "Low-Energy" Frames, Spectral Roll-Off Point, Spectral Centroid, Spectral "Flux", Spectral Entropy, Zero-Crossing Rate, Cepstrum Resynthesis Residual Magnitude, Pulse metric, Linear predictive Coefficients etc.</p><p id="p0028" num="0028">Often for a successful detection several features are analyzed in parallel using different respective methods. In accordance with an aspect of the invention it is preferable to start with the method identified to provide best results for each individual feature when analyzing a phone call. I.e., in case of various features being analyzed simultaneously, different parameter sets and/or software types may be used simultaneously, each parameter or software having previously been identified as best suited for a particular feature.</p><p id="p0029" num="0029">The methods mentioned before have significantly different requirements for the analysis of the audio sequences. This results in different segment analysis window lengths, detection thresholds etc. for an analysis.</p><p id="p0030" num="0030">"Pulse metric" uses long-time filtered autocorrelations to determine the amount of rhythm in a window having a duration of several seconds and detects a strong, driving beat, e.g. techno, salsa, rock music, in the signal. In comparison "Low-Energy" Frames are usually detected by RMS of an audio sequence having a duration of around one second.</p><p id="p0031" num="0031">The best available/optimized parameters for the used methods are stored in the database for priming the next detection process with the best possible<!-- EPO <DP n="8"> --> values for a fast detection. Also, as stated before, the parameters may further be optimized during the next detection process.</p><p id="p0032" num="0032">S/N ratio or a specific noise pattern may be a property of the waiting-queue music used, periods of silence and voice communication. Using known values for these parameters will speed-up the detection process.</p><p id="p0033" num="0033">As each genre of the waiting-queue music has its own specific pattern, e.g. techno, blues, pop, synthesizer music, storing the genre predominantly used in on-hold music for a specific phone number enables making a proper choice of method and parameters.</p><p id="p0034" num="0034">Similarly, transitions between voice and music or music and voice, e.g. silence, clicks, noise, etc. may be characteristic for a particular telephone number. Such transitions can be detected quickly and are good indicators of the beginning and/or end of on-hold music.</p><p id="p0035" num="0035">It is obvious that the reliability of the detecting process is important to the user, since a user will not use a feature that fools him/her regularly. The supervision of each number and the detection process is important. A simple measure of the reliability is tracking the number of manually triggered interruptions of the replacement of the waiting-queue music by the user. A phone number for which manual interrupts are recorded repeatedly is checked in the list and stronger methods and parameters may be applied for detection.</p><p id="p0036" num="0036">Very often, voice announcements are interspersed in the on-hold music, i.e. interrupt the music. This can disturb the on-hold music detection and lead to unwanted interruptions in the reproduction replacing content, notably in case the interspersed announcements provide no additional information or value to the party on hold. Such announcements include, inter alia, generic or standard voice announcements like "please hold the line", "the service agent will be with you momentarily, thank you for your patience", or "all lines are busy, please wait". This type of announcement can be assigned to a group of first type<!-- EPO <DP n="9"> --> voice announcements, which can be ignored in the context of the present invention.</p><p id="p0037" num="0037">Telephone numbers associated with such type of voice announcements can re-prime the recognition mechanism once the initial music recognition has successfully recognized on-hold music.</p><p id="p0038" num="0038">In all aspects of the present invention the functional detection blocks may be implemented by a software program running on a general microprocessor, or on a dedicated audio processor, e.g. implemented in an ASIC or an FPGA, or a combination thereof. Nevertheless, all or parts of the functional blocks may also be implemented by dedicated hardware.</p><p id="p0039" num="0039">It will be readily apparent to the skilled person that the aspects, embodiments and variants described hereinbefore can be combined in various ways.</p><p id="p0040" num="0040">The present invention can be incorporated into many types of communication systems, e.g. conventional telephone systems, cellular telephone systems, VOIP telephone systems, videoconferencing systems and radio communications systems.</p><p id="p0041" num="0041">The present invention also includes a data storage device for non-transitory storing program instructions that, when executed on a system as described hereinbefore, perform one or more aspects of the inventive method described further above.</p><heading id="h0004"><u>Brief description of the drawings</u></heading><p id="p0042" num="0042">In the following the invention will be described with reference to the attached drawings, in which
<dl id="dl0001" compact="compact"><dt>Figure 1</dt><dd>shows a first exemplary and schematic system in accordance with a first aspect of the invention;<!-- EPO <DP n="10"> --></dd><dt>Figure 2</dt><dd>shows a second exemplary and schematic system in accordance with a second aspect of the invention;</dd><dt>Figure 3</dt><dd>shows a third exemplary and schematic system in accordance with a third aspect of the invention;</dd><dt>Figure 4</dt><dd>shows a fourth exemplary and schematic system in accordance with a fourth aspect of the invention;</dd><dt>Figure 5</dt><dd>shows a fifth exemplary and schematic system in accordance with a fifth aspect of the invention;</dd><dt>Figure 6</dt><dd>shows a sixth exemplary and schematic system in accordance with a sixth aspect of the invention;</dd><dt>Figure 7</dt><dd>shows an exemplary block diagram of a first party's device in accordance with the invention; and</dd><dt>Figure 8</dt><dd>shows a flow diagram of a method in accordance with the invention.</dd></dl></p><heading id="h0005"><u>Description of embodiments</u></heading><p id="p0043" num="0043"><figref idrefs="f0001">Figure 1</figref> shows a first exemplary and schematic system in accordance with a first aspect of the invention. At the same time, <figref idrefs="f0001">figure 1</figref> provides an indication of the message and control flow of a method in accordance with the first aspect of the invention.</p><p id="p0044" num="0044">A first party, represented by telephone symbol 101, calls a second party, represented by telephone symbol 102. The dialed telephone number is detected or recognized by dialed number recognition module 103. Depending on the telephone system used, numbers are dialed using pulse trains, DTMF, digital signaling or the like. The way numbers are dialed is irrelevant for the invention; it is only important that the dialed number is made available for the method. Unlike as shown in the figure, telephone 101 and on-hold music detection and replacing apparatus 100 can be integrated in a single device. In such case the dialed telephone number obviously is readily available for use in accordance with the inventive method.<!-- EPO <DP n="11"> --></p><p id="p0045" num="0045">Once the dialed telephone number is available, the telephone number is searched for in database 104, which stores on-hold music recognition parameters and/or software associated with telephone numbers. Database 104 can be integrated in the apparatus, or can be attached separately, e.g. via a local network including USB, Firewire, LAN networks and the like. If the dialed telephone number is found in database 104, database 104 provides according on-hold music recognition parameters and/or software to on-hold music detector 106. On-hold music detector 106 listens to the voice signal transmitted over network 107. In the figure, second party 102 transmits on-hold music, indicated by the music keys, while first party 101 is placed on hold. It is irrelevant whether the on-hold music originates at the second party's side or is injected anywhere in network 107.</p><p id="p0046" num="0046">On-hold music detector 106 controls replacer 108 depending on whether or not on-hold music has been detected so as to replace on-hold music with other content from content source 109. Like database 104 content source 109 can be integrated in the apparatus, or can be attached separately, e.g. via a local network including USB, Firewire, LAN networks and the like, or via an analog audio/video connection.</p><p id="p0047" num="0047"><figref idrefs="f0001">Figure 2</figref> shows a second exemplary and schematic system in accordance with a second aspect of the invention. Like <figref idrefs="f0001">figure 1 figure 2</figref> also provides an indication of the message and control flow of a method in accordance with the second aspect of the invention.</p><p id="p0048" num="0048">The system of <figref idrefs="f0001">figure 2</figref> differs from the one discussed with reference to <figref idrefs="f0001">figure 1</figref> in that database 204 is located remote from the first party's on-hold music detection and replacing apparatus 200. Database 204 may be located anywhere in the network. The dialed telephone number is transmitted to remote database 204 by dialed number recognition module 203. Transmission may be done for example in-band, using DTMF tones, or out-of-band over a separate data connection. If the dialed telephone number is found in database 204, database 204 provides on-hold music recognition parameters and/or<!-- EPO <DP n="12"> --> software to on-hold music detector 206. Again, this transmission can be done in-band or out-of-band.</p><p id="p0049" num="0049">Generally, and applicable to each aspect described in the present specification, in case a voice over IP, or VoIP telephone system is used, an out-of-band transmission of data simple requires sending some additional data packets over an established connection, or in parallel to the established connection using a separate logical connection.</p><p id="p0050" num="0050">The remaining elements and functions of the system of <figref idrefs="f0001">figure 2</figref> correspond to those described in <figref idrefs="f0001">figure 1</figref>.</p><p id="p0051" num="0051"><figref idrefs="f0001">Figure 3</figref> shows a third exemplary and schematic system in accordance with a third aspect of the invention. Like <figref idrefs="f0001">figures 1 and 2 figure 3</figref> also provides an indication of the message and control flow of a method in accordance with the third aspect of the invention.</p><p id="p0052" num="0052">The system of <figref idrefs="f0001">figure 3</figref> differs from the one discussed with reference to <figref idrefs="f0001">figure 2</figref> in that dialed number recognition module 303 is located remote from the first party's on-hold music detection and replacing apparatus 300. Dialed number recognition module 303 may be located anywhere in the network, or may be an integral part of the network; it is obvious that an exchange, or a central office, needs to have knowledge of a dialed telephone number for establishing a telephone connection. When database 304 is also located in the network, or is closely attached thereto, the dialed telephone number is transmitted directly from network 307 to database 304, which in turn provides on-hold music recognition parameters and/or software to on-hold music detector 306. Like described in <figref idrefs="f0001">figure 2</figref>, this transmission can be done in-band or out-of-band.</p><p id="p0053" num="0053">The remaining elements and functions of the system of <figref idrefs="f0001">figure 3</figref> correspond to those described in <figref idrefs="f0001">figure 1 or figure 2</figref>.<!-- EPO <DP n="13"> --></p><p id="p0054" num="0054"><figref idrefs="f0002">Figure 4</figref> shows a fourth exemplary and schematic system in accordance with a fourth aspect of the invention. Like <figref idrefs="f0001">figures 1 to 3</figref> <figref idrefs="f0002">figure 4</figref> also provides an indication of the message and control flow of a method in accordance with the fourth aspect of the invention.</p><p id="p0055" num="0055">In the system of <figref idrefs="f0002">figure 4</figref> replacer 408 is located in the network, as is content source 409. Dialed number recognition module 403 is located at the first party's premises and provides the dialed number to database 404, likewise located at the first party's premises. Like in examples described further above, database 404 can be integrated in the apparatus, or can be attached separately, e.g. via a local network including USB, Firewire, LAN networks and the like. If the dialed telephone number is found in database 404, database 404 provides according on-hold music recognition parameters and/or software to on-hold music detector 406. On-hold music detector 406 is located in the network, has listener-access to the communication between the first and the second party, and controls replacer 408 to replace on-hold music with audio/video content retrieved from content source 409. The type of content used for replacing on-hold music may be preset by the first party, or controlled on a per-call basis. Such control is possible for example through in-band signaling using DTMF tones, or out-of-band signaling in the manner described further above with respect to a related function.</p><p id="p0056" num="0056"><figref idrefs="f0002">Figure 5</figref> shows a fifth exemplary and schematic system in accordance with a fifth aspect of the invention. Like <figref idrefs="f0001 f0002">figures 1 to 4</figref> <figref idrefs="f0002">figure 4</figref> also provides an indication of the message and control flow of a method in accordance with the fifth aspect of the invention.</p><p id="p0057" num="0057">The system of <figref idrefs="f0002">figure 5</figref> differs from the one discussed with reference to <figref idrefs="f0002">figure 4</figref> in that database 504 is located remote from the first party's premises. The only function performed at the first party's premises is recognition of the dialed number in dialed number recognition module 503, and control over the content replacing the on-hold music (not shown in the figure).<!-- EPO <DP n="14"> --></p><p id="p0058" num="0058"><figref idrefs="f0002">Figure 6</figref> shows a sixth exemplary and schematic system in accordance with a sixth aspect of the invention. Like <figref idrefs="f0001 f0002">figures 1 to 5</figref> <figref idrefs="f0002">figure 6</figref> also provides an indication of the message and control flow of a method in accordance with the sixth aspect of the invention.</p><p id="p0059" num="0059">In the system of <figref idrefs="f0002">figure 6</figref> all essential elements are located remote from the first party's premises. The only function performed at the first party's premises is control over the content replacing the on-hold music (not shown in the figure).</p><p id="p0060" num="0060">The dialed telephone number is provided to the database from the network, in a manner as described with reference to <figref idrefs="f0001">figure 3</figref>. The remaining function is very similar to the one described with reference to <figref idrefs="f0002">figure 4</figref>: If the dialed telephone number is found in database 604, database 604 provides according on-hold music recognition parameters and/or software to on-hold music detector 606. On-hold music detector 606 is located in the network, has listener-access to the communication between the first and the second party, and controls replacer 608 to replace on-hold music with audio/video content retrieved from content source 609. The type of content used for replacing on-hold music may be preset by the first party, or controlled on a per-call basis. Such control is possible for example through in-band signaling using DTMF tones, or out-of-band signaling in the manner described further above with respect to a related function.</p><p id="p0061" num="0061"><figref idrefs="f0003">Figure 7</figref> shows an exemplary block diagram of a first party's device 700 in accordance with the invention. Input 730 receives the audio signal, including one or more of on-hold music, announcements, and conversation. Block 732 performs on-hold music detection, e.g. by audio signal analysis, using the parameters and/or software provided in accordance with the dialed telephone number. Block 732 is in connection with block 734, which selects or primes the on-hold music detection block based on a telephone number dialed, e.g. sets filter parameters for on-hold music detection, or selects one of the various ways for on hold music detection, i.e. watermark, flag, or audio signal<!-- EPO <DP n="15"> --> analysis. Blocks 732 and 734 are connected to controller 736, which is also connected to block 738, providing general phone functions, and user interface block 742. User interface block 742 is also connected to block 738. Controller 736 controls music player block 744, which is in connection with content database 746. Music player block 746 may be part of a mobile phone, but may also include any source of content attached to the first party's device. Combiner 748 selects and/or combines audio signals received from phone function block 738 and music player block 744, respectively, under control of controller 736, and provides an audio signal to output 752.</p><p id="p0062" num="0062"><figref idrefs="f0003">Figure 8</figref> shows a flow diagram of a method in accordance with the invention. In step 801 a dialed telephone number is received, and the dialed telephone number is looked up in a database in step 802. If the dialed telephone number is found in the database, 'yes'-branch of step 802, on-hold music recognition parameters and/or software for use by an on-hold music detector, which are stored in the database in connection with the telephone number, are retrieved from the database, step 803. The retrieved parameters and/or software is then provided to the on-hold music detector in step 804, which performs on-hold music detection and replacement accordingly (not shown).</p><p id="p0063" num="0063">If the dialed telephone number is not found in the database, 'no'-branch of step 802, the dialed telephone number is added to the database in step 805, and an initial detection process is started in order to perform on-hold music detection, step 806. If on-hold music is detected, information about the most appropriate detection mechanism, parameters, and/or software is stored in the database for the telephone number, step 807. Likewise, if no on-hold music was detected for any reason, such information may also be stored in the database. Optionally, in the latter case the stored information may include initial parameters and/or software, or an according flag, for triggering the initial detection process in case the telephone number is dialed again at a later time. Alternatively, the stored information may include a flag indicating that no on-hold music detection is to be performed for this telephone number.<!-- EPO <DP n="16"> --></p><p id="p0064" num="0064">Manual interventions such as user pre-selected parameters and/or software are not shown in the figure, but are also encompassed by embodiments of the invention. Likewise, manual activation of the detection and/or database update process are not shown in the figure, but are also encompassed by embodiments of the invention.</p></description><claims mxw-id="PCLM90459196" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-0001" num="0001"><claim-text>A method of controlling an apparatus that replaces on-hold music in a telephone connection with other content from a content source (109; 209; 309; 409), including:
<claim-text>- receiving a dialed telephone number;</claim-text>
<claim-text>- comparing the dialed telephone number with telephone numbers stored in a database (104; 204; 304; 404);</claim-text>
<claim-text>- if the dialed telephone number is found in the database (104; 204; 304; 404), retrieving at least one detection parameter and/or a detection software associated with the telephone number from the database (104; 204; 304; 404), wherein the at least one detection parameter and/or the detection software is optimized for detecting properties of the on-hold music expected to be received from the dialed telephone number, thereby reducing the processing power required for performing on-hold music detection;</claim-text>
<claim-text>- providing the at least one retrieved detection parameter and/or the detection software to an on-hold music detection unit (106; 206; 306; 406);</claim-text>
<claim-text>- performing on-hold music detection in the on-hold music detection unit (106; 206; 306; 406); and</claim-text>
<claim-text>- replacing on-hold music with other content provided by the content source.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, wherein the at least one detection parameter and/or the detection software configure the on-hold music detection unit to perform an audio signal analysis.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 1, wherein the at least one detection parameter and/or the detection software configure the on-hold music detection unit to perform a watermark detection.<!-- EPO <DP n="18"> --></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of claim 1, wherein comparing and/or retrieving include accessing a local database (104) in a user's device or a remote database (204; 304; 404) over a separate data connection.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of claim 2, wherein the audio signal analysis is adaptively self-learning, and wherein signal analysis parameters modified during a previous on-hold music detection are updated in the database (104; 204; 304; 404).</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of claim 5, wherein a telephone number previously not associated with on-hold music is added to the database (104; 204; 304; 404) after the adaptive self-learning audio signal analysis performed in the on-hold music detection unit has identified on-hold music.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 6, wherein the adaptive self-learning audio signal analysis is initialized with an initial detection parameter set and/or detection software.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of claim 7, wherein the initial detection parameter set and/or detection software is selected based upon a user input indicating one of a plurality of detection methods and/or on-hold music types.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of claim 8, wherein the adaptive self-learning audio signal analysis includes sequentially applying each one of the plurality of detection methods, using respective initial detection parameter sets and/or detection software, and selecting the method that performed best.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of any one of the preceding claims, wherein detecting on-hold music is performed in a detector (406) located in a network over which the telephone connection between a first party (101; 201; 301; 401) and a second party (102; 202; 302; 402) is routed, further including:<!-- EPO <DP n="19"> -->
<claim-text>- providing, from the first party (101; 201; 301; 401) to the detector (406), a signal associated with detection parameters and/or detection software to be used for the detection.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method of claim 10, wherein the database (204; 304; 404) is located in the network, and wherein providing a signal associated with detection parameters and/or detection software includes transmitting the dialed telephone number, or enabling access of the detector to the network for obtaining the dialed telephone number.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of claim 10, wherein the database is located at the first party's premises, and wherein providing a signal associated with detection parameters and/or detection software includes transmitting a signal for selecting detection parameters and/or detection software stored in the network in a manner accessible by the detector.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method of claim 10, wherein the database (404) is located at the first party's premises, and wherein providing a signal associated with detection parameters and/or detection software includes transmitting detection parameters and/or detection software from a storage located at the first party's premises.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>System including a telephone, an on-hold music detector, a database storing telephone numbers and detection parameters and/or detection software, wherein the system is adapted to perform the method of any one or more of the preceding claims.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A data storage for non-transitory storing a program instructions which, when executed on a system in accordance with claim 14, perform the method of one or more of claims 1 to 13.</claim-text></claim></claims><drawings mxw-id="PDW20421932" load-source="patent-office"><!-- EPO <DP n="20"> --><figure id="f0001" num="1,2,3"><img id="if0001" file="imgf0001.tif" wi="165" he="210" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0002" num="4,5,6"><img id="if0002" file="imgf0002.tif" wi="165" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0003" num="7,8"><img id="if0003" file="imgf0003.tif" wi="160" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="159" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="159" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
