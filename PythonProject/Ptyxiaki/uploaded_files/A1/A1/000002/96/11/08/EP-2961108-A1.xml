<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961108-A1" country="EP" doc-number="2961108" kind="A1" date="20151230" family-id="51390692" file-reference-id="289472" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451573" ucid="EP-2961108-A1"><document-id><country>EP</country><doc-number>2961108</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13876023-A" is-representative="NO"><document-id mxw-id="PAPP193866114" load-source="docdb" format="epo"><country>EP</country><doc-number>13876023</doc-number><kind>A</kind><date>20130220</date><lang>JA</lang></document-id><document-id mxw-id="PAPP193866115" load-source="patent-office" format="original"><country>EP</country><doc-number>13876023.6</doc-number><date>20130220</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028913" ucid="JP-2013054163-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2013054163</doc-number><kind>W</kind><date>20130220</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1973198162" load-source="docdb">H04L  12/933       20130101ALI20160129BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1973198163" load-source="docdb">H04L  12/46        20060101AFI20160129BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1821548259" load-source="docdb" scheme="CPC">H04L  49/65        20130101 LI20170422BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1821548260" load-source="docdb" scheme="CPC">H04L  49/356       20130101 LI20170422BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1821548261" load-source="docdb" scheme="CPC">H04L  49/25        20130101 LI20170422BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1861378358" load-source="docdb" scheme="CPC">H04L  43/0811      20130101 LI20161230BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987765536" load-source="docdb" scheme="CPC">H04L  49/1507      20130101 FI20151113BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987771181" load-source="docdb" scheme="CPC">H04L  12/4625      20130101 LI20151114BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546185" lang="DE" load-source="patent-office">SCHALTER UND PROGRAMM</invention-title><invention-title mxw-id="PT165546186" lang="EN" load-source="patent-office">SWITCH AND PROGRAM</invention-title><invention-title mxw-id="PT165546187" lang="FR" load-source="patent-office">COMMUTATEUR ET PROGRAMME</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103304698" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FUJITSU LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103303637" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FUJITSU LIMITED</last-name></addressbook></applicant><applicant mxw-id="PPAR1101645080" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Fujitsu Limited</last-name><iid>101071604</iid><address><street>1-1, Kamikodanaka 4-chome Nakahara-ku</street><city>Kawasaki-shi, Kanagawa 211-8588</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103308925" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>NAMIHIRA DAISUKE</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103325834" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>NAMIHIRA, DAISUKE</last-name></addressbook></inventor><inventor mxw-id="PPAR1101654085" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>NAMIHIRA, DAISUKE</last-name><address><street>c/o FUJITSU LIMITED 1-1 Kamikodanaka 4-chome Nakahara-ku</street><city>Kawasaki-shi Kanagawa 211-8588</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101645659" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HOFFMANN EITLE</last-name><iid>100061036</iid><address><street>Patent- und Rechtsanwälte PartmbB Arabellastraße 30</street><city>81925 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2013054163-W"><document-id><country>JP</country><doc-number>2013054163</doc-number><kind>W</kind><date>20130220</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014128859-A1"><document-id><country>WO</country><doc-number>2014128859</doc-number><kind>A1</kind><date>20140828</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660689371" load-source="docdb">AL</country><country mxw-id="DS660783982" load-source="docdb">AT</country><country mxw-id="DS660689373" load-source="docdb">BE</country><country mxw-id="DS660687801" load-source="docdb">BG</country><country mxw-id="DS660612266" load-source="docdb">CH</country><country mxw-id="DS660687494" load-source="docdb">CY</country><country mxw-id="DS660783983" load-source="docdb">CZ</country><country mxw-id="DS660689374" load-source="docdb">DE</country><country mxw-id="DS660687499" load-source="docdb">DK</country><country mxw-id="DS660687500" load-source="docdb">EE</country><country mxw-id="DS660611801" load-source="docdb">ES</country><country mxw-id="DS660687802" load-source="docdb">FI</country><country mxw-id="DS660687807" load-source="docdb">FR</country><country mxw-id="DS660689379" load-source="docdb">GB</country><country mxw-id="DS660687501" load-source="docdb">GR</country><country mxw-id="DS660689380" load-source="docdb">HR</country><country mxw-id="DS660783984" load-source="docdb">HU</country><country mxw-id="DS660612271" load-source="docdb">IE</country><country mxw-id="DS660689381" load-source="docdb">IS</country><country mxw-id="DS660687808" load-source="docdb">IT</country><country mxw-id="DS660687502" load-source="docdb">LI</country><country mxw-id="DS660695099" load-source="docdb">LT</country><country mxw-id="DS660783985" load-source="docdb">LU</country><country mxw-id="DS660695100" load-source="docdb">LV</country><country mxw-id="DS660695101" load-source="docdb">MC</country><country mxw-id="DS660607590" load-source="docdb">MK</country><country mxw-id="DS660607603" load-source="docdb">MT</country><country mxw-id="DS660783986" load-source="docdb">NL</country><country mxw-id="DS660611802" load-source="docdb">NO</country><country mxw-id="DS660612272" load-source="docdb">PL</country><country mxw-id="DS660695103" load-source="docdb">PT</country><country mxw-id="DS660783987" load-source="docdb">RO</country><country mxw-id="DS660695104" load-source="docdb">RS</country><country mxw-id="DS660783988" load-source="docdb">SE</country><country mxw-id="DS660695105" load-source="docdb">SI</country><country mxw-id="DS660611807" load-source="docdb">SK</country><country mxw-id="DS660612273" load-source="docdb">SM</country><country mxw-id="DS660607604" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479943" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A disclosed switch includes: plural ports each of which is connected to another apparatus; a determination unit that determines, for each of the plural ports, whether the port is connected to one of plural switches integrated logically; and a setting unit that sets, for each of the plural ports, a port type or propriety of use based on a result of determination by the determination unit.<img id="iaf01" file="imgaf001.tif" wi="163" he="114" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759755" lang="EN" source="EPO" load-source="docdb"><p>A disclosed switch includes: plural ports each of which is connected to another apparatus; a determination unit that determines, for each of the plural ports, whether the port is connected to one of plural switches integrated logically; and a setting unit that sets, for each of the plural ports, a port type or propriety of use based on a result of determination by the determination unit.</p></abstract><description mxw-id="PDES98404644" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">This technique relates to a technique for setting switches automatically.</p><heading id="h0002">Background Technology</heading><p id="p0002" num="0002">In a cloud service realized in recent data centers or the like, a large number of servers are deployed, and server resources are shared with a large number of customers. Therefore, also in a network directly connected to a large number of servers that has been arranged, a redundant network is to be constructed by arranging a large number of switches and setting plural routes to increase bandwidth.</p><p id="p0003" num="0003">Because a switch at the previous stage of a server is in a network of layer 2, when the redundant network is constructed as it is by setting plural routes, loop configuration occurs. Therefore, it is considered to use STP (Spanning Tree Protocol) or the like. However, when using STP, there is a problem that it is impossible to increase bandwidth because the redundant routes are blocked and cannot be used for communication. Therefore, a switch which is called a Fabric switch has appeared, in which the same kind of plural switches are logically integrated. The Fabric switch can use plural lines as redundant routes by exchanging states inside. By doing so, it becomes possible to construct a redundant network with wide bandwidth without using STP. Here, Fabric represents a network that is constructed by Fabric switches.</p><p id="p0004" num="0004">In switches included in a Fabric, ports connecting to other switches (hereinafter referred to as inner ports) and ports connecting to servers, terminals and other network apparatuses (hereinafter referred to as outer ports) are physically fixed or are defined for each port (an inner port or an outer port is defined for each port), and it is general to construct the Fabric based on them because this Fabric switch logically and virtually integrates plural switches into one.</p><p id="p0005" num="0005">For example, as illustrated in <figref idrefs="f0001">FIG. 1</figref>, switches 1 to 6 are<!-- EPO <DP n="2"> --> Fabric switches, and a Fabric is constructed by these switches. The switches 1 and 2 are connected to a core network, and the switches 3 to 6 are connected to servers or storages. The switches 1 to 6 are connected to each other. Then, a port illustrated by a circle on each switch represents an outer port connected to the core network or the servers, and a port illustrated by a quadrilateral on each switch represents an inner port connecting between the Fabric switches.</p><p id="p0006" num="0006">This is because plural lines are effectively used between inner ports, and an inner port is shown as a special interface for exchanging information inside while an outer port is shown as an ordinary switch port.</p><p id="p0007" num="0007">However, in a Fabric switch that physically distinguishes an inner port from an outer port, it becomes impossible not only to operate the Fabric switch but also to construct Fabric when external apparatuses are connected to inner ports, or other Fabric switches are connected to outer ports, namely, when wrong connections occur. In the example illustrated in <figref idrefs="f0002">FIG. 2</figref>, it is impossible for the switch 6 to communicate with switches 1 and 2 and to join in the Fabric, because the outer ports of the switch 6 is connected to the switch 1 and 2 that are other Fabric switches. The same is true in a case where a port to be set as an inner port is set as an outer port in the switch 6. It takes time to investigate and to handle such connection errors and setting errors.</p><p id="p0008" num="0008">Moreover, in a Fabric switch whose port is set as an inner port or an outer port by a definition, a setting of an inner port or an outer port is carried out individually according to configuration. For example, when all ports are set as inner ports by default, it is impossible to communicate even if the ports are connected to external apparatuses or the like because they are not outer ports. For example, as illustrated in <figref idrefs="f0003">FIG. 3</figref>, it is impossible to communicate as it is because the ports included in the port group A of the switches 1 and 2, which is connected to the core network, and the ports included in the port group B of the switches 3 to 6, which is connected to the servers, are initially set as inner ports. Therefore, initial setting processing becomes complex because the setting of the ports of the switches 1 to 6 are changed.</p><p id="p0009" num="0009">Furthermore, when the ports are defined as outer ports although physical connections between ports were carried out as inner ports (namely, when wrong setting occurs), it means direct connection between<!-- EPO <DP n="3"> --> ports in the same switch because Fabric is logically considered to be one switch. In other words, a loop of layer 2 occurs, and it is impossible to stop the loop until the connections are removed, or the definition is modified. Moreover, when lines are connected between the outer ports due to connection error or the like although ports are set as outer ports and are scheduled to connect to external apparatuses as illustrated by thick line arrows in <figref idrefs="f0004">FIG. 4</figref> (that is, when wrong connection occurs), aloop occurs similarly and it influences communication performance in Fabric.</p><p id="p0010" num="0010">When Fabric switch is applied to a large scale system, the number of switches increases, and a possibility of wrong connection and definition errors dramatically increase. Then, it is a big problem for construction of a system if the loop occurs due to the wrong connection or the definition error and a state of no communication continues for a long time by them, because it is difficult to check the Fabric.</p><heading id="h0003">Prior technical documents</heading><heading id="h0004">Patent Documents</heading><p id="p0011" num="0011"><ul><li>Patent Document 1: <patcit id="pcit0001" dnum="JP11252181A"><text>Japanese Laid-open Patent Publication No. 11-252181</text></patcit></li><li>Patent Document 2: <patcit id="pcit0002" dnum="JP2000196626A"><text>Japanese Laid-open Patent Publication No. 2000-196626</text></patcit></li></ul></p><heading id="h0005">Summary of the Invention</heading><heading id="h0006">Object to be solved by the Invention</heading><p id="p0012" num="0012">Therefore, as one aspect, an object of this technique is to provide a technique for automating setting of Fabric switches.</p><heading id="h0007">Means for solving the Problem</heading><p id="p0013" num="0013">A switch includes relating to this technique includes: (A) plural ports each of which is connected to another apparatus; (B) a determination unit that determines, for each of the plural ports, whether the port is connected to one of plural switches integrated logically; and (C) a setting unit that sets, for each of the plural ports, a port type or propriety of use based on a result of determination by the determination unit.<!-- EPO <DP n="4"> --></p><heading id="h0008">Brief description of the drawings</heading><p id="p0014" num="0014"><ul><li><figref idrefs="f0001">FIG. 1</figref> is a diagram explaining Fabric;</li><li><figref idrefs="f0002">FIG. 2</figref> is a diagram explaining a conventional problem;</li><li><figref idrefs="f0003">FIG. 3</figref> is a diagram explaining a conventional problem;</li><li><figref idrefs="f0004">FIG. 4</figref> is a diagram explaining a conventional problem;</li><li><figref idrefs="f0005">FIG. 5</figref> is a diagram explaining operation of this embodiment;</li><li><figref idrefs="f0006">FIG. 6</figref> is a diagram explaining operation of this embodiment;</li><li><figref idrefs="f0007">FIG. 7</figref> is a diagram depicting configuration of a Fabric switch relating to this embodiment;</li><li><figref idrefs="f0007">FIG. 8</figref> is a diagram depicting an example of a port type setting;</li><li><figref idrefs="f0007">FIG. 9</figref> is a diagram depicting an example of a setting policy when a definition conflict occurs;</li><li><figref idrefs="f0008">FIG. 10</figref> is a diagram depicting a processing flow for operation of a Fabric switch relating to this embodiment;</li><li><figref idrefs="f0009">FIG. 11</figref> is a diagram depicting a processing flow for operation of a Fabric switch relating to this embodiment; and</li><li><figref idrefs="f0010">FIG. 12</figref> is a functional block diagram for a case that a switch is implemented by a computer.</li></ul></p><heading id="h0009">Mode for carrying out the invention</heading><p id="p0015" num="0015">In embodiments of this technique, after the switches 1 to 6 which are Fabric switches are physically connected to each other, or the setting of the switches is changed, the switches 1 to 6 confirm whether a connection destination of each port is a Fabric switch or not in spite of the port setting as schematically illustrated by an array of <figref idrefs="f0005">FIG. 5</figref>. Then, because it is possible to confirm that the connection destination of a port group E of the switches 1 and 2 and the connection destination of a port group F of the switches 3 to 6 are the Fabric switches, the ports are set as inner ports. If the ports are originally set as inner ports, the port groups E and F shift to a usable state.</p><p id="p0016" num="0016">On the other hand, because it is confirmed that the connection destination of a port group C including ports of the switches 1 and 2, which is connected to the core network, and the connection destination of a port group D including ports of the switches 3 to 6, which is connected to the servers and similar, are not the Fabric switches, they are set as outer ports. It means a shift from the state of <figref idrefs="f0005">FIG. 5</figref> to the state of <figref idrefs="f0006">FIG. 6</figref>. If the ports are originally set as outer ports, the port groups C and D shift to a usable state.<!-- EPO <DP n="5"> --></p><p id="p0017" num="0017">When each port is set as an inner port or an outer port in advance and a port type that is different from the port type set in advance is identified, the port may be set as it is identified, or blocking (namely, an unusable state) may be set. When a port is identified as an outer port although the port is set as an inner port and when a case that a port is identified as an inner port although the port is set as an outer port, the port may be set as it is identified or the blocking may be set by a different policy.</p><p id="p0018" num="0018">In the following, configuration and operation of a Fabric switch to execute such operation will be specifically explained.</p><p id="p0019" num="0019"><figref idrefs="f0007">FIG. 7</figref> illustrates an example of configuration of a Fabric switch 100 relating to this embodiment. The Fabric switch 100 includes a controller 110, a memory 120, switch hardware 130, and ports 1 to n. The controller 110 controls whole of the Fabric switch 100 including the switch hardware 130, and includes a determination unit 111 that executes determination processing for a port type and a setting unit 112 that executes setting processing for a port through the switch hardware 130. The controller 110 is realized by a combination of a processor and programs, for example. In this case, the programs stored in the memory 120 or other ROMs (Read Only Memory) are executed by the processor, and the controller 110 is realized. The memory 120 stores data or the like used in processing executed by the controller 110.</p><p id="p0020" num="0020">The switch hardware 130 is a semiconductor apparatus that communicates with other Fabric switches by its original format and that relays frames between ports. The ports 1 to n are connected with cables that connect other Fabric switches, external networks, servers, or the like.</p><p id="p0021" num="0021">Next, by using <figref idrefs="f0007 f0008 f0009">FIGs. 8 to 11</figref>, detail of the processing executed by the Fabric switch 100 relating to this embodiment will be explained.</p><p id="p0022" num="0022">For example, this processing is executed when the Fabric switch 100 is booted. However, when only a specified port is made to be in a state of link up, or when a definition of a port type is changed for only the specified port, this processing is executed for the specified port.</p><p id="p0023" num="0023">For example, assume that ports are set as illustrated in <figref idrefs="f0007">FIG. 8</figref>. A port type is set for each port as illustrated in the example of <figref idrefs="f0007">FIG. 8</figref>. For example, there are not only a case that a port type is directly set for each port of the ports 1 to n but also a case<!-- EPO <DP n="6"> --> that the same data as the example of <figref idrefs="f0007">FIG. 8</figref> is stored in the memory 120. Furthermore, a setting about whether actual connections are prioritized or the blocking is set when a port which has been defined as an inner port is identified as an outer port (namely, whenadefinition conflict occurs) and a setting about whether actual connection is prioritized or the blocking is set when a port which has been defined as an outer port is identified as an inner port (namely, whenadefinition conflict occurs) are stored in the memory 120 as illustrated in <figref idrefs="f0007">FIG. 9</figref>.</p><p id="p0024" num="0024">Then, the controller 110 causes each port on the Fabric switch 100 to be in a state of link up through the switch hardware 130, transmits LLDP (Link Layer Discovery Protocol) frame to each port, and obtains addresses of adjacent apparatuses connected to each port (<figref idrefs="f0008">FIG. 10</figref>: step S1).</p><p id="p0025" num="0025">After that, the determination unit 111 included in the controller 110 identifies an unprocessed port (step S3), and transmits an inquiry about whether it is a Fabric switch to the address obtained for the port by a format interpretable by the Fabric switch (step S5) . As described above, because the switch hardware 130 has a function to communicate with other Fabric switches by its original format, the determination unit 111 let the switch hardware 130 to transmit the inquiry.</p><p id="p0026" num="0026">When a port for which the inquiry is transmitted is connected to the Fabric switch, the Fabric switch which is a connection destination receives the inquiry through a pertinent port and the switch hardware 130, and the controller 110 replies to the inquiry similarly through the switch hardware 130 and the pertinent port.</p><p id="p0027" num="0027">Thus, although the Fabric switch can reply to the inquiry when the port for which the inquiry is transmitted is connected to the Fabric switch, apparatuses other than the Fabric switch cannot reply to the inquiry because the apparatuses cannot understand the inquiry. Therefore, the determination unit 111 determines whether the reply to the inquiry from the identified port is obtained (step S7). When it is determined that the reply is not obtained within a predetermined time, the processing shifts to the processing of <figref idrefs="f0009">FIG. 11</figref> through a terminal A. No reply means that the port is connected to an external apparatuses that cannot understand the inquiry.</p><p id="p0028" num="0028">On the other hand, when it is determined that the reply is obtained, the determination unit 111 determines whether a port type<!-- EPO <DP n="7"> --> of the port for which the inquiry is transmitted is defined as an outer port (step S8). Because obtaining the reply means that the port is connected to the Fabric switch, a definition conflict exists when the port type is defined as an outer port.</p><p id="p0029" num="0029">When it is determined that the port type is defined as an inner port (step S8: No route), the setting unit 112 sets the port for which the inquiry is transmitted as a usable state as it is (step S17). Then, the processing shifts to the step S15. In other words, the port is used as an inner port. This means there was no problem for connections, and the port can be used as it is.</p><p id="p0030" num="0030">On the other hand, when the port type is defined as an outer port (step S8: Yes route), the setting unit 112 determines whether there's a setting that the blocking is set when a definition conflict for the outer port occurs (step S9) . When it is determined that there' s a setting that the port is set according to the actual connections without blocking (step S9: No route), the setting unit 112 changes the port type of the port for which the inquiry is transmitted into an inner port (step S11). Thus, when a conflict between the actual connections and the setting occurs, the setting is preferably changed according to the actual connections. Then, the processing shifts to the step S15.</p><p id="p0031" num="0031">On the other hand, when it is determined that there's a setting that the blocking is set, the setting unit 112 set the port for which the inquiry is transmitted as a blocking port (step S13). In other words, the port is set as the unusable state. Because a problem like a loop can occur when connections are wrong, the port is preferably set as the blocking port. Then, the processing shifts to the step S15.</p><p id="p0032" num="0032">Then, the determination unit 111 determines whether there is an unprocessed port (step S15), and the processing returns to the step S3 when it is determined that there is an unprocessed port. On the other hand, when it is determined that there is no unprocessed port, the processing ends.</p><p id="p0033" num="0033">Shifting to the explanation of the processing of <figref idrefs="f0009">FIG. 11</figref>, the determination unit 111 determines whether the port type of the port for which the inquiry is transmitted is defined as an inner port (step S21). Because no reply within the predetermined time means that the port is connected to an external apparatus, a definition conflict exists when the port type is defined as an inner port.<!-- EPO <DP n="8"> --></p><p id="p0034" num="0034">When it is determined that the port type is defined as an outer port (step S21: No route), the setting unit 112 set the port for which the inquiry is transmitted to a usable state as it is (step S23) . Then, the processing returns to the step S15 of <figref idrefs="f0008">FIG. 10</figref> through a terminal B.</p><p id="p0035" num="0035">On the other hand, when it is determined that the port type is defined as an inner port (step S21: Yes route), the setting unit 112 determines whether there's a setting that the blocking is set when a definition conflict for the inner port occurs (step S25) . When it is determined that there' s a setting that the port is set according to the actual connection without blocking, the setting unit 112 changes the port type of the port for which the inquiry is transmitted into an outer port (step S27) . Thus, when the conflict between the actual connections and the setting, the setting may preferably be changed according to the actual connection. Then, the processing shifts to the step S15 of <figref idrefs="f0008">FIG. 10</figref> through the terminal B.</p><p id="p0036" num="0036">On the other hand, when it is determined that there's a setting that the blocking is set, the setting unit 112 sets the port for which the inquiry is transmitted as the blocking port (step S29) . In other words, the port is set as an unusable state. Because there is a possibility that a problem like a loop occurs when connections are wrong, the port may preferably be set as the blocking port. Then, the processing shifts to the step S15 of <figref idrefs="f0008">FIG. 10</figref> through the terminal B.</p><p id="p0037" num="0037">By executing the processing as described above, it is possible to automatically set a port type based on actual connections regardless of initial setting.</p><p id="p0038" num="0038">In a network peripheral to servers deployed in a data center and a network of a general server system, the number of switches deployed on the preceding stage of servers increases as the number of the servers which have been deployed increases. Then, even if management is simplified by logically showing a switch as a Fabric switch, it takes time to detect a cause of a problem and an introduction cost increases, because it is difficult to decrease connection errors and port definition errors and a system operates even if there are a few definition errors. However, it becomes possible to reduce a cost by executing the processing described above.</p><p id="p0039" num="0039">However, if the blocking is preferable when a definition conflict occurs, it is possible to perform the blocking. Furthermore,<!-- EPO <DP n="9"> --> setting may preferably be performed based only on actual connections. Furthermore, other method than the method as described above may be used to confirm whether an adjacent apparatus is a Fabric switch or not.</p><p id="p0040" num="0040">Although the embodiment of this technique was explained above, this technique is not limited to those. For example, the functional block diagram of the controller 110 in the Fabric switch 100 is a mere example, and the configuration in the functional block diagram does not always correspond to actual program module configuration.</p><p id="p0041" num="0041">As for the processing flow, as long as the processing results do not change, the turns of the steps may be exchanged or the steps may be executed in parallel.</p><p id="p0042" num="0042">In addition, the aforementioned Fabric switch 100 is a computer apparatus as illustrated in <figref idrefs="f0010">FIG. 12</figref>, a memory 2601, CPU 2603, Hard Disk Drive (HDD) 2605, display controller 2607 to be coupled with a display device 2609, drive device 2613 for a removable disk 2611, input unit 2615 and communication controllers 2617 (2617a to 2617c in <figref idrefs="f0010">FIG. 12</figref>) for coupling to a network may be coupled with a bus 2619. Incidentally, according to circumstances, the display controller 2607, display device 2609, drive device 2613 and input unit 2615 may not be included. The OS and application programs for carrying out a processing in these embodiments are stored in the HDD 2605, and read out from the HDD 2605 to the memory 2601 when being executed by the CPU 2603. If necessary, the CPU 2603 controls the display controller 2607, communication controller 2617 and drive device 2613 to carry out necessary operations. Incidentally, data that was inputted through any one of the communication controllers 2617 is outputted through another communication controller 2617. The CPU 2603 controls the communication controllers 2617 to appropriately switch output destinations. In addition, data during the processing is stored in the memory 2601, and stored in the HDD 2605 if necessary. In the embodiments of this technique, the application programs for carrying out the aforementioned processing are distributed by a computer-readable removable disk 2611 storing the application programs, and the application programs are installed into the HDD 2605 through the drive device 2613. The programs may be installed into the HDD 2605 through the communication controller 2617 and the network such as the Internet. Such a computer apparatus realizes the aforementioned various functions by cooperating the hardware such<!-- EPO <DP n="10"> --> as the CPU 2603 , memory 2601 and the like with the OS and the application programs if necessary.</p><p id="p0043" num="0043">The aforementioned embodiment is summarized as follows:</p><p id="p0044" num="0044">A switch relating to this embodiment includes: a memory; and a processor configured to use the memory and execute a process. And the process includes: determining, for each of plural ports each of which is connected to another apparatus, whether the port is connected to one of plural switches integrated logically; and setting, for each of the plural ports, a port type or propriety of use based on a result of the determining. By doing this, it becomes possible to automate setting of a Fabric switch.</p><p id="p0045" num="0045">Moreover, the determining may include: transmitting, for each of the plural ports, an inquiry that can be interpreted by the plural switches integrated logically; and determining, for each of the plural ports, whether a reply to the inquiry was obtained. Because the Fabric switch communicates using a predetermined format among Fabric switches logically integrated, the Fabric switch transmits the inquiry by the predetermined format. Then, it becomes possible to distinguishbecause apparatuses other than the Fabric switch cannot reply to the inquiry.</p><p id="p0046" num="0046">Furthermore, the setting may include: setting a port type of a first port for which the reply was obtained as a first port type that is a port type of a port connected to the plural switches integrated logically. Moreover, the setting may include: setting a port type of a second port for which the reply was not obtained as a second port type that is a port type of a port connected to an external apparatus or an external network. It becomes possible to automatically set when it is preferable to set according to actual connections. In other words, it becomes possible to avoid a problem on constructing the Fabric due to definition errors and wrong connections, and to prevent the loop occurring.</p><p id="p0047" num="0047">Furthermore, the setting may include: upon detecting that a port type of a first port for which the reply was obtained is set as a first port type that is a port type of a port connected to an external apparatus or an external network, causing the first port to be in an unusable state. Moreover, the setting may include: upon detecting that a port type of a second port for which the reply was not obtained is set as a second port type that is a port type of a port connected to the plurality of switches integrated logically in advance, causing the second port to be in the unusable state. It becomes<!-- EPO <DP n="11"> --> possible to avoid errors on constructing the Fabric due to the wrong connections and to prevent the loop occurring.</p><p id="p0048" num="0048">Moreover, the setting may include: upon detecting that a port type of a first port for which the reply was obtained is set as a first port type that is a port type of a port connected to the plurality of switches integrated logically in advance, causing the first port to be in an usable state; and upon detecting that a port type of a second port for which the reply was not obtained is set as a second port type that is a port type of a port connected to an external apparatus or an external network, causing the second port to be in the usable state.</p><p id="p0049" num="0049">Incidentally, it is possible to create a program causing a processor to execute the aforementioned processing, and such a program is stored in a computer readable storage medium or storage device such as a flexible disk, CD-ROM, DVD-ROM, magneto-optic disk, a semiconductor memory, and hard disk. In addition, the intermediate processing result is temporarily stored in a storage device such as a main memory or the like.</p></description><claims mxw-id="PCLM90459585" lang="EN" load-source="patent-office"><!-- EPO <DP n="12"> --><claim id="c-en-0001" num="0001"><claim-text>A switch, comprising:
<claim-text>a plurality of ports each of which is connected to another apparatus;</claim-text>
<claim-text>a determination unit that determines, for eachof the plurality of ports, whether the port is connected to one of a plurality of switches integrated logically; and</claim-text>
<claim-text>a setting unit that sets, for each of the plurality of ports, a port type or propriety of use based on a result of determination by the determination unit.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The switch as set forth in claim 1, wherein the determination unit comprises:
<claim-text>transmitting, for each of the plurality of ports, an inquiry that can be interpreted by the plurality of switches integrated logically; and</claim-text>
<claim-text>determining, for each of the plurality of ports, whether a reply to the inquiry was obtained.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The switch as set forth in claim 2, wherein the setting comprises:
<claim-text>setting a port type of a first port for which the reply was obtained as a first port type that is a port type of a port connected to the plurality of switches integrated logically.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The switch as set forth in claim 2 or 3, wherein the setting comprises:
<claim-text>setting a port type of a second port for which the reply was not obtained as a second port type that is a port type of a port connected to an external apparatus or an external network.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The switch as set forth in claim 2, wherein the setting comprises:
<claim-text>upon detecting that a port type of a first port for which the reply was obtained is set as a first port type that is a port type of a port connected to an external apparatus or an external network, causing the first port to be in an unusable state.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The switch as set forth in claim 5, wherein the setting comprises:
<claim-text>upon detecting that a port type of a second port for which the reply was not obtained is set as a second port type that is a<!-- EPO <DP n="13"> --> port type of a port connected to the plurality of switches integrated logically in advance, causing the second port to be in the unusable state.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The switch as set forth in claim 2, 5, or 6, wherein the setting comprises:
<claim-text>upon detecting that a port type of a first port for which the reply was obtained is set as a first port type that is a port type of a port connected to the plurality of switches integrated logically in advance, causing the first port to be in an usable state; and</claim-text>
<claim-text>upon detecting that a port type of a second port for which the reply was not obtained is set as a second port type that is a port type of a port connected to an external apparatus or an external network, causing the second port to be in the usable state.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A program for executing a process comprising:
<claim-text>determining, for each of a plurality of ports, whether the port is connected to one of a plurality of switches integrated logically; and</claim-text>
<claim-text>setting, for each of the plurality of ports, a port type or propriety of use based on a result of the determining.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW20422307" load-source="patent-office"><!-- EPO <DP n="14"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="15"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="16"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="17"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="18"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="153" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0007" num="7,8,9"><img id="if0007" file="imgf0007.tif" wi="153" he="228" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0008" num="10"><img id="if0008" file="imgf0008.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0009" num="11"><img id="if0009" file="imgf0009.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0010" num="12"><img id="if0010" file="imgf0010.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
