<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2960475-A1" country="EP" doc-number="2960475" kind="A1" date="20151230" family-id="53539494" file-reference-id="312929" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451693" ucid="EP-2960475-A1"><document-id><country>EP</country><doc-number>2960475</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-15174010-A" is-representative="YES"><document-id mxw-id="PAPP193866354" load-source="docdb" format="epo"><country>EP</country><doc-number>15174010</doc-number><kind>A</kind><date>20150626</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193866355" load-source="patent-office" format="original"><country>EP</country><doc-number>15174010.7</doc-number><date>20150626</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162035935" ucid="JP-2014132934-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2014132934</doc-number><kind>A</kind><date>20140627</date></document-id></priority-claim><priority-claim mxw-id="PPC162036018" ucid="JP-2015082467-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2015082467</doc-number><kind>A</kind><date>20150414</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988519684" load-source="docdb">F02P   5/153       20060101ALN20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988519900" load-source="docdb">F02D  41/22        20060101AFI20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988521560" load-source="docdb">G01M  15/08        20060101ALI20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988523977" load-source="docdb">F02B  77/08        20060101ALI20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988524495" load-source="docdb">F02D  41/00        20060101ALN20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988524728" load-source="docdb">G01M   3/00        20060101ALI20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988526225" load-source="docdb">F16J  15/00        20060101ALI20151020BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988527143" load-source="docdb">F02D  35/02        20060101ALI20151020BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1740202038" load-source="docdb" scheme="CPC">Y02T  10/46        20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202039" load-source="docdb" scheme="CPC">F02P   5/153       20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202040" load-source="docdb" scheme="CPC">F02P   5/151       20130101 LI20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202041" load-source="docdb" scheme="CPC">F02P   3/05        20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202042" load-source="docdb" scheme="CPC">F02D2200/101       20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202043" load-source="docdb" scheme="CPC">F02D2041/228       20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202044" load-source="docdb" scheme="CPC">F02D  41/009       20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202045" load-source="docdb" scheme="CPC">F02D  35/028       20130101 LA20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202046" load-source="docdb" scheme="CPC">F02D  35/023       20130101 LI20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1740202047" load-source="docdb" scheme="CPC">F02B  77/088       20130101 LI20171028BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1951066877" load-source="docdb" scheme="CPC">F02P   5/045       20130101 LA20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984698013" load-source="docdb" scheme="CPC">G01M  15/08        20130101 LI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984700808" load-source="docdb" scheme="CPC">F02D  41/3005      20130101 LI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703311" load-source="docdb" scheme="CPC">F02B  77/085       20130101 LI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703551" load-source="docdb" scheme="CPC">F02D  41/22        20130101 FI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984705370" load-source="docdb" scheme="CPC">F02D  41/0002      20130101 LI20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165546545" lang="DE" load-source="patent-office">SYSTEM ZUR ERKENNUNG EINER DICHTUNGSABNORMALITÄT IN EINEM ZYLINDER EINER BRENNKRAFTMASCHINE</invention-title><invention-title mxw-id="PT165546546" lang="EN" load-source="patent-office">SYSTEM FOR DETECTING A SEAL ABNORMALITY WITHIN A CYLINDER OF AN INTERNAL COMBUSTION ENGINE</invention-title><invention-title mxw-id="PT165546547" lang="FR" load-source="patent-office">SYSTÈME POUR DÉTECTER UNE ANOMALITÉ D'UN JOINT DANS UN CYLINDRE D'UN MOTEUR À COMBUSTION INTERNE</invention-title><citations><patent-citations><patcit mxw-id="PCIT335741276" load-source="docdb" ucid="DE-10003613-A1"><document-id format="epo"><country>DE</country><doc-number>10003613</doc-number><kind>A1</kind><date>20010802</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335744789" load-source="docdb" ucid="DE-102004042193-A1"><document-id format="epo"><country>DE</country><doc-number>102004042193</doc-number><kind>A1</kind><date>20060316</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335740588" load-source="docdb" ucid="DE-19734680-A1"><document-id format="epo"><country>DE</country><doc-number>19734680</doc-number><kind>A1</kind><date>19980219</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT367667642" load-source="docdb" ucid="EP-2860380-A1"><document-id format="epo"><country>EP</country><doc-number>2860380</doc-number><kind>A1</kind><date>20150415</date></document-id><sources><source name="SEA" category="P" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT367667643" load-source="docdb" ucid="EP-2910760-A1"><document-id format="epo"><country>EP</country><doc-number>2910760</doc-number><kind>A1</kind><date>20150826</date></document-id><sources><source name="SEA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335745678" load-source="docdb" ucid="JP-2009122076-A"><document-id format="epo"><country>JP</country><doc-number>2009122076</doc-number><kind>A</kind><date>20090604</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335744523" load-source="docdb" ucid="US-20140172277-A1"><document-id format="epo"><country>US</country><doc-number>20140172277</doc-number><kind>A1</kind><date>20140619</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT367667640" load-source="docdb" ucid="WO-2002095191-A2"><document-id format="epo"><country>WO</country><doc-number>2002095191</doc-number><kind>A2</kind><date>20021128</date></document-id><sources><source name="SEA" category="YA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT367667641" load-source="docdb" ucid="WO-2013183163-A1"><document-id format="epo"><country>WO</country><doc-number>2013183163</doc-number><kind>A1</kind><date>20131212</date></document-id><sources><source name="SEA" category="XAY" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT335741521" load-source="docdb" ucid="WO-2014061649-A1"><document-id format="epo"><country>WO</country><doc-number>2014061649</doc-number><kind>A1</kind><date>20140424</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103310007" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOYOTA MOTOR CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR1103337017" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR1101641004" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Toyota Jidosha Kabushiki Kaisha</last-name><iid>101030285</iid><address><street>1 Toyota-cho,</street><city>Toyota-shi, Aichi-ken 471-8571</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103304056" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>YASUDA HIROMICHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103302787" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>YASUDA, HIROMICHI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101639709" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>YASUDA, HIROMICHI</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101653970" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Intes, Didier Gérard André</last-name><suffix>et al</suffix><iid>100042673</iid><address><street>Cabinet Beau de Loménie 158, rue de l'Université</street><city>75340 Paris Cedex 07</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660609611" load-source="docdb">AL</country><country mxw-id="DS660613684" load-source="docdb">AT</country><country mxw-id="DS660609613" load-source="docdb">BE</country><country mxw-id="DS660784581" load-source="docdb">BG</country><country mxw-id="DS660691491" load-source="docdb">CH</country><country mxw-id="DS660613312" load-source="docdb">CY</country><country mxw-id="DS660613685" load-source="docdb">CZ</country><country mxw-id="DS660609614" load-source="docdb">DE</country><country mxw-id="DS660613313" load-source="docdb">DK</country><country mxw-id="DS660613314" load-source="docdb">EE</country><country mxw-id="DS660697931" load-source="docdb">ES</country><country mxw-id="DS660784582" load-source="docdb">FI</country><country mxw-id="DS660690843" load-source="docdb">FR</country><country mxw-id="DS660609619" load-source="docdb">GB</country><country mxw-id="DS660613323" load-source="docdb">GR</country><country mxw-id="DS660609620" load-source="docdb">HR</country><country mxw-id="DS660613686" load-source="docdb">HU</country><country mxw-id="DS660691492" load-source="docdb">IE</country><country mxw-id="DS660613324" load-source="docdb">IS</country><country mxw-id="DS660690844" load-source="docdb">IT</country><country mxw-id="DS660613325" load-source="docdb">LI</country><country mxw-id="DS660784583" load-source="docdb">LT</country><country mxw-id="DS660689264" load-source="docdb">LU</country><country mxw-id="DS660784584" load-source="docdb">LV</country><country mxw-id="DS660784585" load-source="docdb">MC</country><country mxw-id="DS660689265" load-source="docdb">MK</country><country mxw-id="DS660689266" load-source="docdb">MT</country><country mxw-id="DS660697932" load-source="docdb">NL</country><country mxw-id="DS660690845" load-source="docdb">NO</country><country mxw-id="DS660689271" load-source="docdb">PL</country><country mxw-id="DS660691493" load-source="docdb">PT</country><country mxw-id="DS660697933" load-source="docdb">RO</country><country mxw-id="DS660691494" load-source="docdb">RS</country><country mxw-id="DS660689272" load-source="docdb">SE</country><country mxw-id="DS660609621" load-source="docdb">SI</country><country mxw-id="DS660690846" load-source="docdb">SK</country><country mxw-id="DS660689273" load-source="docdb">SM</country><country mxw-id="DS660613326" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166480063" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An internal combustion engine system includes: an in-cylinder pressure sensor 30; a crank angle sensor 42; and a seal portion 34 that seals a space between an outer face of a housing 301 and a wall surface of a cylinder head 32. A slope k that is a ratio of the amount of decrease in a heat release amount Q relative to the amount of increase in a crank angle is calculated in a period during an expansion stroke from a combustion end point θ<sub>max</sub> until an opening timing of an exhaust valve 22. The existence or nonexistence of an abnormality in the sealing function of the seal portion 34 is determined based on whether or not a ratio X of the amount of decrease in the slope k to the amount of increase in an engine speed is greater than a threshold value α.
<img id="iaf01" file="imgaf001.tif" wi="118" he="99" img-content="drawing" img-format="tif"/>
<img id="iaf02" file="imgaf002.tif" wi="144" he="78" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759875" lang="EN" source="EPO" load-source="docdb"><p>An internal combustion engine system includes: an in-cylinder pressure sensor 30; a crank angle sensor 42; and a seal portion 34 that seals a space between an outer face of a housing 301 and a wall surface of a cylinder head 32. A slope k that is a ratio of the amount of decrease in a heat release amount Q relative to the amount of increase in a crank angle is calculated in a period during an expansion stroke from a combustion end point ¸ max  until an opening timing of an exhaust valve 22. The existence or nonexistence of an abnormality in the sealing function of the seal portion 34 is determined based on whether or not a ratio X of the amount of decrease in the slope k to the amount of increase in an engine speed is greater than a threshold value ±.</p></abstract><description mxw-id="PDES98404764" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Background of the invention</b></heading><heading id="h0002"><b>Field of the Invention</b></heading><p id="p0001" num="0001">The present invention relates to an internal combustion engine system.</p><heading id="h0003"><b>Background Art</b></heading><p id="p0002" num="0002">An internal combustion engine including an in-cylinder pressure sensor is already known, as disclosed, for example, in Japanese Patent Laid-Open No. <patcit id="pcit0001" dnum="JP2009122076A"><text>2009-122076</text></patcit>. In the aforementioned conventional internal combustion engine, a seal portion is provided that seals a space between an outer face of the in-cylinder pressure sensor having a cylindrical outer shape and a wall surface of a combustion chamber that surrounds the in-cylinder pressure sensor. With the aforementioned seal portion, sealing is performed by intimate contact between a tapered portion having a tapered shape that is formed on the outer face of the in-cylinder pressure sensor and a tapered portion of the wall surface of the combustion chamber that opposes the tapered portion.</p><p id="p0003" num="0003">A diaphragm (pressure receiving member) that receives an in-cylinder pressure is provided at one end of a cylindrical housing which the aforementioned in-cylinder pressure sensor includes. A detecting element (strain gauge element) is disposed inside the housing. A compressive load that is based on the in-cylinder pressure is input to the detecting element from the diaphragm through a pressure transmitting member, and the detecting element outputs an output in accordance with the input compressive load. The seal portion is provided at a position that is on the side of the aforementioned one end of the housing relative to the detecting element in the axial direction of the housing.</p><p id="p0004" num="0004">The following problem exists in a configuration such as that described in the aforementioned Japanese Patent Laid-Open No. <patcit id="pcit0002" dnum="JP2009122076A"><text>2009-122076</text></patcit> in which a seal portion is provided at a position that is further on a combustion chamber side relative to a detecting element in the axial direction of a housing. That is, with respect to a gap between the housing and the wall surface of the combustion chamber, if the sealing function of the seal portion is normal, high temperature combustion gas enters only as far as a gap that is on the tip side relative to the position at which the seal portion is provided. In contrast, if an abnormality arises in the seal portion and the sealing function declines, high temperature combustion gas will flow in as far as a gap that is further to the inner side than the seal portion. Consequently, the amount of heat received from the combustion gas by a member located along a path on which the compressive load is transmitted from the pressure receiving member to the detecting element increases. As a result, there is an increase in a detection error in the in-cylinder pressure that is attributable to thermal strain of a tip portion of the sensor that is involved in the detection of pressure from the pressure receiving member to the detecting element that is caused by a transient difference between the thermal expansion of a member (housing) on the outer side of the tip portion of the sensor and the thermal expansion of a member on the inner side thereof. Therefore, it is desirable to provide means for enabling a determination as to whether or not there is an abnormality in the sealing function of the seal portion on an actual machine.<!-- EPO <DP n="2"> --></p><heading id="h0004"><b>Summary of the Invention</b></heading><p id="p0005" num="0005">The present invention has been conceived to address the above described problem, and an object of the present invention is to provide an internal combustion engine system configured to enable a determination as to the existence or nonexistence of an abnormality in a sealing function of a seal portion between an in-cylinder pressure sensor and a wall surface of a combustion chamber.</p><p id="p0006" num="0006">An internal combustion engine system according to the present invention includes an in-cylinder pressure sensor, a crank angle sensor, a seal portion, heat release amount calculation means, first ratio calculation means and seal abnormality determination means. The in-cylinder pressure sensor includes: a housing that is formed into a cylindrical shape; a pressure receiving member that is provided at one end of the housing and configured to receive an in-cylinder pressure, the in-cylinder pressure being a pressure of a gas inside a combustion chamber; and a pressure detecting element that is arranged inside the housing and into which a compressive load that is based on the in-cylinder pressure is configured to be input (or is inputted) from the pressure receiving member, the pressure detecting element being configured to emit an output in accordance with the input compressive load. The crank angle sensor is configured to detect a crank angle. The seal portion is configured to seal a space between an outer face of the housing and a wall surface of the combustion chamber that surrounds the housing, at a position that is further on the combustion chamber side than the pressure detecting element in an axial direction of the housing. The heat release amount calculation means for calculating a heat release amount in a cylinder that is an amount of heat released by combustion, based on in-cylinder pressure data that is data regarding an in-cylinder pressure that is detected by the in-cylinder pressure sensor. The first ratio calculation means for calculating a first ratio that is a ratio of an amount of decrease in a heat release amount relative to an amount of increase in a crank angle in a period during an expansion stroke from a crank angle at which the heat release amount that is calculated by the heat release amount calculation means exhibits a maximum value until an opening timing of an exhaust valve. The seal abnormality determination means for determining existence or nonexistence of an abnormality in a sealing function of the seal portion based on the first ratio and an engine speed.</p><p id="p0007" num="0007">Preferably, in a case where a second ratio that is a ratio of an amount of decrease in the first ratio relative to an amount of increase in an engine speed is greater than a first threshold value, the seal abnormality determination means determines that the sealing function of the seal portion is abnormal.</p><p id="p0008" num="0008">Preferably, in a case where the first ratio is greater than a second threshold value that corresponds to an engine speed in a cycle in which in-cylinder pressure data that serves as a basis for calculation of the first ratio is acquired, the seal abnormality determination means determines that the sealing function of the seal portion is abnormal. Preferably, the second threshold value is set so as to become smaller when the engine speed is high in comparison to when the engine speed is low.</p><p id="p0009" num="0009">The internal combustion engine system may further include: burnt mass fraction calculation means for calculating a burnt mass fraction; and ignition delay period calculation means for calculating an ignition delay period using a spark timing and a burnt mass fraction. The ignition<!-- EPO <DP n="3"> --> delay period calculation means may correct a calculated ignition delay period in accordance with a size of the second ratio.</p><p id="p0010" num="0010">In addition, preferably the internal combustion engine system further includes adjustment means for adjusting at least one of a fuel injection amount, an intake air amount and an ignition energy so that a difference between an ignition delay period that is calculated by the ignition delay period calculation means and a target value of the ignition delay period is eliminated.</p><p id="p0011" num="0011">The internal combustion engine system may further include: burnt mass fraction calculation means for calculating a burnt mass fraction; and combustion center calculation means for calculating a combustion center based on a burnt mass fraction. The combustion center calculation means may correct a calculated combustion center in accordance with a size of the second ratio.</p><p id="p0012" num="0012">In addition, preferably the internal combustion engine system further includes spark timing adjustment means for adjusting a spark timing so that a difference between a combustion center that is calculated by the combustion center calculation means and a target combustion center is eliminated.</p><p id="p0013" num="0013">The internal combustion engine system may further include: burnt mass fraction calculation means for calculating a burnt mass fraction; and ignition delay period calculation means for calculating an ignition delay period using a spark timing and a burnt mass fraction. The ignition delay period calculation means may correct a calculated ignition delay period in accordance with a size of the first ratio.</p><p id="p0014" num="0014">In addition, preferably the internal combustion engine system may further include adjustment means for adjusting at least one of a fuel injection amount, an intake air amount and an ignition energy so that a difference between an ignition delay period that is calculated by the ignition delay period calculation means and a target value of the ignition delay period is eliminated.</p><p id="p0015" num="0015">The internal combustion engine system may further include: burnt mass fraction calculation means for calculating a burnt mass fraction; and combustion center calculation means for calculating a combustion center based on a burnt mass fraction. The combustion center calculation means may correct a calculated combustion center in accordance with a size of the first ratio.</p><p id="p0016" num="0016">In addition, preferably the internal combustion engine system further includes spark timing adjustment means for adjusting a spark timing so that a difference between a combustion center that is calculated by the combustion center calculation means and a target combustion center is eliminated.</p><p id="p0017" num="0017">Preferably the seal abnormality determination means makes a determination with respect to an abnormality in the sealing function of the seal portion at a time that an internal combustion engine is operating under a stoichiometric air-fuel ratio.</p><p id="p0018" num="0018">According to the present invention, a first ratio that is a ratio of an amount of decrease in a heat release amount relative to an amount of increase in a crank angle is calculated in a period during an expansion stroke from a crank angle at which a heat release amount exhibits a maximum value until an opening timing of an exhaust valve. A first ratio that is calculated in this manner increases upon receiving the influence of a detection error of an in-cylinder pressure sensor that is caused by thermal strain. In a case where a seal portion is provided at the same position as that of the in-cylinder<!-- EPO <DP n="4"> --> pressure sensor in the present invention, the first ratio will increase if an abnormality arises in the sealing function of the seal portion. The engine speed is the dominant parameter with respect to the first ratio. Accordingly, the existence or nonexistence of an abnormality in the sealing function of the seal portion can be determined based on the first ratio and the engine speed.</p><heading id="h0005"><b>Brief Description of the Drawings</b></heading><p id="p0019" num="0019"><ul><li><figref idrefs="f0001">Fig. 1</figref> is a view for describing the system configuration of an internal combustion engine according to a first embodiment of the present invention;</li><li><figref idrefs="f0001">Fig. 2</figref> is a cross-sectional diagram that schematically illustrates one example of the configuration of a main portion of an in-cylinder pressure sensor;</li><li><figref idrefs="f0002">Figs. 3A and 3B</figref> are views for describing a method by which a seal portion seals a space between an in-cylinder pressure sensor and a wall surface of a combustion chamber;</li><li><figref idrefs="f0003">Figs. 4A to 4D</figref> are views that represent results of analyzing an in-cylinder pressure waveform during combustion;</li><li><figref idrefs="f0004">Fig. 5</figref> is a view that illustrates a comparison between waveforms of an in-cylinder pressure and a thermal strain error at different engine speeds, taking the crank angle as a horizontal axis;</li><li><figref idrefs="f0004">Fig. 6</figref> is a view that illustrates a comparison between waveforms of an in-cylinder pressure and a thermal strain error at different engine speeds, taking time as a horizontal axis;</li><li><figref idrefs="f0005">Fig. 7</figref> is a view that illustrates a relation between a slope k of a heat release amount Q in an expansion stroke and the engine speed;</li><li><figref idrefs="f0005">Fig. 8</figref> is a view that illustrates an example of detecting an abnormality in a sealing function;</li><li><figref idrefs="f0006">Fig. 9</figref> is a flowchart illustrating a routine that is executed in a first embodiment of the present invention;</li><li><figref idrefs="f0007">Fig. 10</figref> is a view for describing a technique for determining an abnormality in a sealing function of a seal portion that is used in a second embodiment of the present invention;</li><li><figref idrefs="f0008">Fig. 11</figref> is a flowchart illustrating a routine that is executed in a second embodiment of the present invention;</li><li><figref idrefs="f0009">Figs. 12A and 12B</figref> are views for describing error detection with respect to an ignition delay period that accompanies the occurrence of an abnormality in a sealing function of a seal portion;</li><li><figref idrefs="f0009">Fig. 13</figref> is a view for describing the manner of setting a threshold value α that is used to determine an abnormality in a sealing function in a third embodiment of the present invention;</li><li><figref idrefs="f0010">Fig. 14</figref> is a view for describing the manner of setting a correction amount for SA-CA10 that is based on a ratio X;</li><li><figref idrefs="f0010">Fig. 15</figref> is a view that represents a relation between SA-CA10 and an air-fuel ratio (A/F);</li><li><figref idrefs="f0011">Fig. 16</figref> is a block diagram for describing an overview of feedback control of a fuel injection amount utilizing SA-CA10;</li><li><figref idrefs="f0012">Fig. 17</figref> is a flowchart illustrating a routine that is executed in a third embodiment of the present invention;<!-- EPO <DP n="5"> --></li><li><figref idrefs="f0013">Fig. 18</figref> is a flowchart illustrating a routine that is executed in the third embodiment of the present invention;</li><li><figref idrefs="f0014">Fig. 19</figref> is a view for describing the manner of setting a correction amount for CA50 based on a ratio X;</li><li><figref idrefs="f0014">Fig. 20</figref> is a block diagram for describing an overview of feedback control of a spark timing using CA50 in a fourth embodiment of the present invention;</li><li><figref idrefs="f0015">Fig. 21</figref> is a flowchart illustrating a routine that is executed in the fourth embodiment of the present invention; and</li><li><figref idrefs="f0016">Fig. 22</figref> is a flowchart illustrating a routine that is executed in the fourth embodiment of the present invention.</li></ul></p><heading id="h0006"><b>Detailed Description of the Preferred embodiments</b></heading><heading id="h0007"><b>First Embodiment</b></heading><heading id="h0008">[System configuration of first embodiment]</heading><p id="p0020" num="0020"><figref idrefs="f0001">Fig. 1</figref> is a view for describing the system configuration of an internal combustion engine 10 in a first embodiment of the present invention. An internal combustion engine system shown in <figref idrefs="f0001">Fig. 1</figref> includes the spark ignition internal combustion engine 10. A piston 12 is provided in each cylinder of the internal combustion engine 10. A combustion chamber 14 is formed at the top side of the piston 12 inside the relevant cylinder. An intake passage 16 and an exhaust passage 18 communicate with the combustion chamber 14.</p><p id="p0021" num="0021">An intake valve 20 that opens and closes an intake port of the intake passage 16 is provided inside the intake port. An exhaust valve 22 that opens and closes an exhaust port of the exhaust passage 18 is provided inside the exhaust port. An electronically controlled throttle valve 24 is also provided in the intake passage 16.</p><p id="p0022" num="0022">Each cylinder of the internal combustion engine 10 is provided with a fuel injection valve 26 for injecting fuel directly into the combustion chamber 14 (into the cylinder), and a spark plug 28 for igniting an air-fuel mixture. An in-cylinder pressure sensor 30 for detecting an in-cylinder pressure that is the pressure of gas inside the combustion chamber 14 is also mounted in each cylinder.</p><p id="p0023" num="0023">The system of the present embodiment also includes an electronic control unit (ECU) 40. The ECU 40 includes a central processing unit (CPU), a memory circuit including a ROM and a RAM or the like, and input/output ports and the like. In addition to the aforementioned in-cylinder pressure sensor 30, various sensors for acquiring the operating state of the internal combustion engine 10 such as a crank angle sensor 42 and an air flow meter 44 are connected to an input port of the ECU 40. The crank angle sensor 42 detects a crank angle. The ECU 40 can acquire the engine speed by utilizing signals of detected crank angles. The air flow meter 44 measures an intake air amount. Various actuators for controlling the operation of the internal combustion engine 10 such as the throttle valve 24, the fuel injection valve 26 and the spark plug 28 are connected to an output port of the ECU 40. A malfunction indicator lamp (MIL) 46 for notifying the driver of an abnormality in a sealing<!-- EPO <DP n="6"> --> function of a seal portion 34 that is described later is also connected to an output port of the ECU 40. The ECU 40 performs predetermined engine control such as fuel injection control and ignition control by driving the above described various actuators based on the outputs of the above described various sensors and predetermined programs. The ECU 40 also has a function of synchronizing an output signal of the in-cylinder pressure sensor 30 with a crank angle, and subjecting the synchronized signal to AD conversion and acquiring the resulting signal. It is thereby possible to detect an in-cylinder pressure at an arbitrary crank angle timing in a range allowed by the AD conversion resolution. In addition, the ECU 40 has a function of calculating, in accordance with the crank angle, a value of an in-cylinder volume that depends on the crank angle position.</p><p id="p0024" num="0024">According to the system of the present embodiment that includes the in-cylinder pressure sensor 30 and the crank angle sensor 42, in-cylinder pressure data (an in-cylinder pressure waveform) can be acquired in synchrony with the crank angle (CA) in each cycle of the internal combustion engine 10 (see <figref idrefs="f0003">Fig. 4(B)</figref> that is described later). A heat release amount Q in the cylinder at an arbitrary crank angle θ can be calculated in accordance with the following equations (1) and (2) using the obtained in-cylinder pressure data and the first law of thermodynamics. Furthermore, a burnt mass fraction (hereunder, referred to as "MFB") at an arbitrary crank angle θ can be calculated in accordance with the following equation (3) using the calculated data of the heat release amount Q in the cylinder. Further, a crank angle at a time that the MFB becomes a predetermined ratio X (%) can be acquired utilizing equation (3). <maths id="math0001" num="(1)"><math display="block"><mrow><mi mathvariant="italic">dQ</mi><mo>/</mo><mi mathvariant="italic">dθ</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>κ</mi><mo>-</mo><mn>1</mn></mrow></mfrac><mo>×</mo><mfenced separators=""><mi>V</mi><mo>×</mo><mfrac><mi mathvariant="italic">dP</mi><mi mathvariant="italic">dθ</mi></mfrac><mo>+</mo><mi>P</mi><mo>×</mo><mi>κ</mi><mo>×</mo><mfrac><mi mathvariant="italic">dV</mi><mi mathvariant="italic">dθ</mi></mfrac></mfenced></mrow></math><img id="ib0001" file="imgb0001.tif" wi="86" he="13" img-content="math" img-format="tif"/></maths> <maths id="math0002" num="(2)"><math display="block"><mrow><mi>Q</mi><mo>=</mo><mi mathvariant="normal">Σ</mi><mo>⁢</mo><mfrac><mi mathvariant="italic">dQ</mi><mi mathvariant="italic">dθ</mi></mfrac></mrow></math><img id="ib0002" file="imgb0002.tif" wi="36" he="11" img-content="math" img-format="tif"/></maths> <maths id="math0003" num="(3)"><math display="block"><mrow><mi mathvariant="italic">MFB</mi><mo>=</mo><mfrac><mrow><mi>Q</mi><mfenced><mi>θ</mi></mfenced><mo>-</mo><mi>Q</mi><mfenced><msub><mi>θ</mi><mi>min</mi></msub></mfenced></mrow><mrow><mi>Q</mi><mfenced><msub><mi>θ</mi><mi>max</mi></msub></mfenced><mo>-</mo><mi>Q</mi><mfenced><msub><mi>θ</mi><mi>min</mi></msub></mfenced></mrow></mfrac><mo>×</mo><mn>100</mn></mrow></math><img id="ib0003" file="imgb0003.tif" wi="71" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0025" num="0025">Where, in the above equation (1), P represents an in-cylinder pressure, V represents an in-cylinder volume and κ represents a ratio of specific heat of in-cylinder gas. Further, in the above equation (3), θ<sub>min</sub> represents a combustion start point (0% combustion point CA0), and θ<sub>max</sub> represents a combustion end point (100% combustion point CA100).</p><heading id="h0009">(Schematic configuration example of in-cylinder pressure sensor)</heading><p id="p0026" num="0026"><figref idrefs="f0001">Fig. 2</figref> is a cross-sectional diagram that schematically illustrates one example of the configuration of a main portion of the in-cylinder pressure sensor 30. The in-cylinder pressure sensor 30 illustrated in <figref idrefs="f0001">Fig. 2</figref> includes a cylindrical housing 301. A diaphragm 302 that is a pressure receiving member that receives an in-cylinder pressure is mounted at one end of the housing 301 (that is, the tip of the in-cylinder pressure sensor 30). A bowl-shaped strain member 303 is disposed at an intermediate site of the housing 301 so as to block off an internal space of the housing 301 on the sensor tip side. A rod-shaped transmitting member 304 is disposed inside the housing 301. The<!-- EPO <DP n="7"> --> transmitting member 304 is interposed between the diaphragm 302 and the strain member 303. According to this configuration, a compressive load that is based on the in-cylinder pressure is transmitted from the diaphragm 302 to the strain member 303 via the transmitting member 304.</p><p id="p0027" num="0027">A strain gauge element 305 is mounted on a surface of the strain member 303 on an opposite side to a surface that the transmitting member 304 contacts. The strain gauge element 305 generates an output in accordance with the amount of strain on the strain member 303 that is caused by the aforementioned compressive load. The output of the strain gauge element 305 has a correlation with the in-cylinder pressure. Therefore, according to the in-cylinder pressure sensor 30, the in-cylinder pressure can be detected based on the output of the strain gauge element 305. Note that, although in this case an example of a configuration that uses the strain gauge element 305 is illustrated, the same basic configuration of the main portion also applies with respect to an in-cylinder pressure sensor that utilizes a piezoelectric element as a pressure detecting element. That is, even in the case of a piezoelectric element, the point that a compressive load based on an in-cylinder pressure is input from a pressure receiving member through an intermediate member such as an electrode or directly to the piezoelectric element and that the piezoelectric element generates an output in accordance with the input compressive load is the same.</p><heading id="h0010">(Seal between in-cylinder pressure sensor and wall surface of combustion chamber)</heading><p id="p0028" num="0028"><figref idrefs="f0002">Figs. 3A and 3B</figref> are views for describing a method by which a seal portion seals a space between the in-cylinder pressure sensor 30 and the wall surface of the combustion chamber 14. The seal portion 34 is provided between the in-cylinder pressure sensor 30 and the wall surface of the combustion chamber 14 (basically, the wall surface of the cylinder head 32) that surrounds the in-cylinder pressure sensor 30. The seal portion 34 seals a space between the in-cylinder pressure sensor 30 and the aforementioned wall surface so that gas inside the cylinder does not leak to the outside through the space. A tapered sealing method or a gasket method is mainly used as a sealing method. In <figref idrefs="f0002">Figs. 3A and 3B</figref>, to facilitate the description, both methods are illustrated together in a single drawing in which a center line of the in-cylinder pressure sensor 30 serves as a boundary. Note that the configuration example of the in-cylinder pressure sensor 30 illustrated in <figref idrefs="f0001">Fig. 2</figref> is an example in which the tapered sealing method is adopted.</p><p id="p0029" num="0029">The sealing methods will now be described taking the in-cylinder pressure sensor 30 as an example. The tapered sealing method is a method that brings a tapered portion 301a and a tapered portion 32a into intimate contact with each other. The tapered portion 301a has a tapered shape that is formed in the outer face of the housing 301. The tapered portion 32a is a portion of the wall surface of the cylinder head 32 that opposes the tapered portion 301a. The gasket method is a method that utilizes a gasket (seal member) that is interposed between the outer face of the housing and the wall surface of the cylinder head.</p><heading id="h0011">(Decline in detection accuracy of in-cylinder pressure due to abnormality in sealing function of seal portion)</heading><!-- EPO <DP n="8"> --><p id="p0030" num="0030">When a seal portion is provided at a position that is further on the combustion chamber side relative to the pressure detecting element in the axial direction of the housing, as in the configuration illustrated in <figref idrefs="f0001">Fig. 2</figref>, there is a problem that the accuracy of detecting the in-cylinder pressure decreases if an abnormality arises in the sealing function of the seal portion.</p><p id="p0031" num="0031"><figref idrefs="f0003">Figs. 4A to 4D</figref> are views that illustrate results of analyzing in-cylinder pressure waveforms during combustion. <figref idrefs="f0003">Fig. 4B</figref> shows a waveform of a detected value of an in-cylinder pressure P obtained using the in-cylinder pressure sensor 30. <figref idrefs="f0003">Fig. 4A</figref> shows a waveform of a calculated value of a rate of heat release (dQ/dθ). <figref idrefs="f0003">Fig. 4C</figref> shows a waveform of a calculated value of a difference between an in-cylinder pressure represented by a thin line and an in-cylinder pressure represented by a thick line in <figref idrefs="f0003">Fig. 4B</figref>, that is, a detection error in an in-cylinder pressure due to the influence of thermal strain (hereunder, referred to simply as "thermal strain error"). <figref idrefs="f0003">Fig. 4D</figref> shows a waveform of a calculated value of a heat release amount Q. Further, a waveform represented by a thin line in the respective drawings of <figref idrefs="f0003">Figs. 4A to 4D</figref> is a waveform at a time when the sealing function of the seal portion 34 is normal and a thermal strain is not being generated (that is, a waveform corresponding to an actual value), while on the other hand a waveform represented by a thick line is a waveform at a time when an abnormality has arisen in the sealing function (time of a large thermal strain).</p><p id="p0032" num="0032">First, a thermal strain of the in-cylinder pressure sensor 30 that is a premise for the aforementioned problem will be described. The sensor tip portion of the in-cylinder pressure sensor 30 is exposed in the combustion chamber 14. Consequently, upon being exposed to high temperature combustion gas inside the combustion chamber 14, a phenomenon occurs whereby the sensor tip portion changes shape (that is, thermal strain). If thermal strain occurs in the diaphragm 302 that is included in the sensor tip portion, the diaphragm 302 expands in a direction away from the transmitting member 304. As a result of this deformation, the amount of force by which the diaphragm 302 presses the strain member 303 via the transmitting member 304 decreases. Further, the mode of transmission of heat from the combustion gas to the sensor tip portion differs between the housing 301 that is a member on the outer side of the sensor tip portion and the transmitting member 304 that is a member on the inner side of the sensor tip portion. More specifically, because of the fact that heat is transmitted to the transmitting member 304 on the inner side slower than to the housing 301 on the outer side, thermal expansion of the transmitting member 304 occurs later than thermal expansion of the housing 301. This transient difference in the thermal expansion makes the decrease prominent in the amount by which the strain member 303 is pressed.</p><p id="p0033" num="0033">If the amount by which the strain member 303 is pressed decreases as a result of thermal strain, a detected value for the in-cylinder pressure P will become a smaller value than a value corresponding to the actual pressure (see thin line in <figref idrefs="f0003">Fig. 4B</figref>). That is, a thermal strain error will arise. The waveform for the rate of heat release (dQ/dθ) in <figref idrefs="f0003">Fig. 4A</figref> shows a heat amount that is received by the sensor tip portion from gas or a flame in the cylinder and also shows a timing at which the heat is received. The heat input to the sensor tip portion reaches a maximum at a timing at which the rate of heat release exhibits a peak. Further, as shown in <figref idrefs="f0003">Fig. 4C</figref>, due to, for example, the influence of a<!-- EPO <DP n="9"> --> delay in the transmission of heat from combustion gas to the sensor tip portion, the thermal strain error increases after a small delay relative to the start of heat release (that is, the start of heat input to the sensor) that is shown in <figref idrefs="f0003">Fig. 4A</figref>.</p><p id="p0034" num="0034">If the detected value of the in-cylinder pressure P is less than the actual pressure due to a thermal strain error, as shown in <figref idrefs="f0003">Fig. 4A</figref>, the rate of heat release sometimes becomes a negative value. If the rate of heat release becomes a negative value, the heat release amount Q obtained by calculating the rate of heat release as shown in the above equation (2) decreases. More specifically, as shown by the thin line in <figref idrefs="f0003">Fig. 4D</figref>, in a case where the sealing function is normal and a thermal strain error has not arisen, the heat release amount Q is constant from the combustion end point θ<sub>max</sub> onwards. On the other hand, if a thermal strain error arises, even if the sealing function is normal, the heat release amount Q starts to decrease from the vicinity of the combustion end point θ<sub>max</sub>. As a result, a slope k arises that is a ratio of the amount of decrease in the heat release amount Q relative to the amount of increase in the crank angle.</p><p id="p0035" num="0035">If an abnormality arises in the sealing function, the amount of decrease in the value detected of the in-cylinder pressure P increases in the manner illustrated by the waveform represented by a thick line in <figref idrefs="f0003">Fig. 4B</figref>. As a result, a detection error in the in-cylinder pressure due to thermal strain increases. The reason is as follows. Namely, with respect to the space between the housing 301 and the wall surface of the combustion chamber 14, if the sealing function of the seal portion 34 is normal, as shown in <figref idrefs="f0002">Fig. 3A</figref>, high temperature combustion gas only flows in a gap on the tip side relative to the position at which the seal portion 34 is provided. In contrast, as shown in <figref idrefs="f0002">Fig. 3B</figref>, in a case where an abnormality arises in the seal portion 34 and the sealing function declines, the high temperature combustion gas flows in a gap on the deep side that is beyond the seal portion 34. As a result, the amount of heat that is supplied from the combustion gas to members (that is, the transmitting member 304 and the strain member 303) that are positioned on the transmission path of the compressive load from the diaphragm 302 to the strain gauge element 305 increases. Consequently, if an abnormality arises in the sealing function, a detection error (that is, a thermal strain error) with respect to the in-cylinder pressure that is due to thermal strain on the sensor tip portion that is involved in detection of the pressure from the diaphragm 302 to the strain gauge element 305 increases. Consequently, as shown by the thick line in <figref idrefs="f0003">Fig. 4D</figref>, if an abnormality arises in the sealing function, the slope k increases in comparison to when the sealing function is normal.</p><p id="p0036" num="0036">Note that, in the case of the tapered sealing method, an abnormality in the sealing function arises when the seal face becomes loose due to stress relaxation in the sealing face or due to foreign matter biting into the sealing face or the like. Further, in the case of the gasket method, an abnormality in the sealing function arises when erosion or damage to the gasket occurs, foreign matter bites into the sealing face, or a large scratch arises in the sealing face. Further, as described above, thermal strain is a phenomenon that arises in an expansion stroke accompanying combustion. A thermal strain error gradually decreases when the heat input to the sensor tip portion ceases after the end of combustion, and is eliminated by the time the next cycle is reached. That is, under<!-- EPO <DP n="10"> --> circumstances in which thermal strain occurs, a process whereby thermal strain arises in the same period as combustion and this thermal strain ends in the cycle in which it arose is repeated. Accordingly, a change in the waveform of the in-cylinder pressure that is caused by thermal strain differs from a time when a leakage of compressed gas occurs within a cylinder due to a reason such as wear of a piston ring, and such a change does not occur during a period from when the intake valve 20 closes until ignition occurs and combustion begins.</p><heading id="h0012">[Determination of abnormality in sealing function of seal portion in first embodiment]</heading><p id="p0037" num="0037">A feature of the system of the present embodiment is that the existence or nonexistence of an abnormality in the sealing function of the seal portion 34 on the actual machine can be determined utilizing the ratio X that is based on the slope k of the heat release amount Q and the engine speed.</p><heading id="h0013">(Technique for actively generating thermal strain error when abnormality arises in sealing function)</heading><p id="p0038" num="0038">In order to enable accurate abnormality determination utilizing the size of the slope k, it is preferable to adopt a configuration so that a sufficient difference between the sizes of the slope k arises between a time when the sealing function is normal and a time when the sealing function is abnormal. As described above, the slope k increases as a result of the heat release amount Q significantly undershooting in an expansion stroke in which the thermal strain error increases. A thermal strain error, for example, can be actively generated at a time that an abnormality arises in the sealing function by using the following technique. Therefore, in order to perform an abnormality determination with respect to the sealing function, it is preferable to adopt a configuration that is in accordance with the following technique.</p><p id="p0039" num="0039">That is, if the seal portion 34 is provided at a position that is further on the combustion chamber 14 side than the strain gauge element 305 in the axial direction of the housing 301, when an abnormality arises in the sealing function, a heat input amount with respect to members (that is, the transmitting member 304 and the strain member 303) that are positioned on the transmission path of the compressive load from the diaphragm 302 to the strain gauge element 305 increases. Therefore, in order to actively generate a thermal strain error, for example, it is conceivable to set the length of an area from the diaphragm 302 to the strain gauge element 305 to a long length. At an initial stage of heat input, a transient thermal expansion difference that is caused by a difference in the ease of heat conduction between the housing 301 that is on the outside and the transmitting member 304 that is on the inside arises. If the length of a member is long, the amount of expansion of the member with respect to a certain temperature rise will increase. Thus, if the length of the aforementioned area is long, the amount of expansion of this area with respect to a certain temperature rise will increase. Therefore, according to the aforementioned setting of the length of the area, when a thermal expansion difference arises, the relative amount of expansion of the housing 301 with respect to the amount of expansion of the transmitting member 304 will increase. Consequently, the thermal strain error will increase. Further, in order to actively generate a thermal strain error, for example, it is conceivable to select the material of the housing 301 and the material of the transmitting member 304 so that a<!-- EPO <DP n="11"> --> coefficient of linear expansion of the housing 301 is greater than a coefficient of linear expansion of the transmitting member 304.</p><p id="p0040" num="0040">A technique for calculating the slope k will now be described. A thermal strain error arises accompanying combustion. A position at which the calculated value of the heat release amount Q begins to decrease due to a thermal strain error is the combustion end point θ<sub>max</sub> in the data for the heat release amount Q (the crank angle at which the heat release amount Q exhibits a maximum value in the data for the heat release amount Q). Therefore, it can be said that as long as the relevant position is during a crank angle period from the combustion end point θ<sub>max</sub> to the opening timing of the exhaust valve 22, the linearity of the waveform of the heat release amount Q is ensured. Therefore, the slope k can be calculated based on data for the heat release amount Q at an arbitrary two points that are synchronized with the crank angle during the relevant crank angle period. Further, the number of items of data for the heat release amount Q that are used to calculate the slope k is not limited to two, and may be three or more. Specifically, for example, a configuration may be adopted that, after calculating a plurality of slopes k by arbitrarily combining two data items among three or more data items, uses an average value of the calculated plurality of slopes k as a final slope k.</p><heading id="h0014">(Properties of slope k)</heading><p id="p0041" num="0041"><figref idrefs="f0004">Fig. 5</figref> is a view that, taking a crank angle as the horizontal axis, illustrates a comparison between waveforms of an in-cylinder pressure and a thermal strain error at different engine speeds. <figref idrefs="f0004">Fig. 6</figref> is a view that, taking time as a horizontal axis, illustrates a comparison between waveforms of an in-cylinder pressure and a thermal strain error at different engine speeds. More specifically, <figref idrefs="f0004">Fig. 5 and Fig. 6</figref> illustrate examples of waveforms when an in-cylinder charged air amount is the same and the engine speeds are different.</p><p id="p0042" num="0042">From <figref idrefs="f0004">Fig. 5</figref> it is found that, when the crank angle is taken as the criterion, in a case where the engine speed is high, a change in the waveform of the thermal strain error is gradual in comparison to when the engine speed is low. On the other hand, from <figref idrefs="f0004">Fig. 6</figref> it is found that, when time is taken as the criterion, even if the engine speed changes, there is no change in the waveform of the thermal strain error. Thermal strain that arises within a combustion cycle is a phenomenon whereby the sensor tip portion undergoes thermal deformation due to momentary heat input caused by contact with high temperature combustion gas or a flame, and thereafter the deformation disappears. Consequently, as will be understood from these drawings, the amount of change in the thermal strain error during a single cycle is a function of time, and not a function of the crank angle. In other words, the characteristic of a change in the thermal strain error during a single cycle depends on a time constant of thermal deformation that is intrinsic to the in-cylinder pressure sensor. Accordingly, the slope k that arises due to thermal strain error when calculating the heat release amount Q using an in-cylinder pressure that is acquired in synchrony with the crank angle can be normalized utilizing the engine speed.</p><p id="p0043" num="0043">A supplementary description will now be given regarding the influence of an in-cylinder charged air amount KL on the thermal strain error. The equation of state of gas is represented by the<!-- EPO <DP n="12"> --> following equation (4), where P represents the in-cylinder pressure, V represents the cylinder volume, n represents the number of moles of the in-cylinder gas (that is, the working gas), R represents the gas constant and T represents the temperature of the in-cylinder gas. The number of moles of the in-cylinder gas is proportional to the in-cylinder charged air amount KL. Therefore, equation (4) can be transformed as shown in equation (5). When the in-cylinder charged air amount KL increases, the in-cylinder pressure increases in proportion thereto. Hence, based on equation (5) it can be said that the temperature T of the in-cylinder gas does not change even if the in-cylinder charged air amount KL increases. That is, the in-cylinder charged air amount KL can be regarded as having almost no influence on a thermal strain error. Additionally, although strictly speaking the temperature T of the in-cylinder gas is influenced in some way by turbulence of an air flow that accompanies an increase in the in-cylinder charged air amount KL, this influence is of an ignorable level. Based on the foregoing facts also, it can be said that the dominant parameter for the slope k among the operating condition parameters relating to the operating conditions of the internal combustion engine 10 is the engine speed. <maths id="math0004" num="(4)"><math display="block"><mrow><mi mathvariant="italic">PV</mi><mo>=</mo><mi mathvariant="italic">nRT</mi></mrow></math><img id="ib0004" file="imgb0004.tif" wi="36" he="6" img-content="math" img-format="tif"/></maths> <maths id="math0005" num="(5)"><math display="block"><mrow><mi>T</mi><mo>∝</mo><mfrac><mrow><mi>P</mi><mo>×</mo><mi>V</mi></mrow><mi mathvariant="italic">KL</mi></mfrac></mrow></math><img id="ib0005" file="imgb0005.tif" wi="36" he="11" img-content="math" img-format="tif"/></maths></p><heading id="h0015">(Overview of abnormality determination technique for sealing function)</heading><p id="p0044" num="0044"><figref idrefs="f0005">Fig. 7</figref> is a view which represents the relation between the slope k of the heat release amount Q in an expansion stroke and the engine speed. Because the slope k has the above described properties, a relation that the ratio X of the amount of decrease in the slope k relative to the amount of increase in the engine speed is a constant value exists between the slope k and the engine speed. The ratio X corresponds to an inclination of a linear approximate curve corresponding to respective plotted points in a case where the slope k is plotted for each predetermined engine speed on an xy-plane for which the engine speed is taken as an x-coordinate value and the slope k is taken as a y-coordinate value.</p><p id="p0045" num="0045">As shown in <figref idrefs="f0005">Fig. 7</figref>, the slope k decreases as the engine speed increases. This is because, as the engine speed increases, a crank angle period that passes while the heat release amount Q decreases by the same amount within a certain time period lengthens. In addition, based on <figref idrefs="f0005">Fig. 7</figref> it is found that when an abnormality has arisen in the sealing function, the ratio X of the amount of decrease in the slope k relative to the amount of increase in the engine speed increases in comparison to when the sealing function is normal (in other words, the inclination of the linear approximate curve described above increases to the minus side).</p><p id="p0046" num="0046">Therefore, in the present embodiment, a configuration is adopted that acquires the value of the slope k for each predetermined engine speed segment during operation of the internal combustion engine 10 and calculates the corresponding ratio X. If the calculated ratio X is larger than a predetermined threshold value α, it is determined that there is an abnormality in the sealing function of the seal portion 34.<!-- EPO <DP n="13"> --></p><p id="p0047" num="0047"><figref idrefs="f0005">Fig. 8</figref> is a view that illustrates an example of detection of a sealing function abnormality. The horizontal axis represents the number of trips of the vehicle in which the internal combustion engine 10 is mounted. During operation of the internal combustion engine 10, in order to calculate the ratio X, calculation of the slope k is performed for each cycle of the internal combustion engine 10 with the exception of an exceptional operating condition that is described later. For each predetermined engine speed segment within a predetermined engine speed range that is the object of calculation, the slope k is stored in a buffer of the ECU 40 in association with an engine speed value that represents the corresponding individual engine speed segment. Acquisition of the slope k in the respective engine speed segments is performed for only a predetermined number of cycles. Specifically, as shown in <figref idrefs="f0005">Fig. 7</figref>, points are plotted on an xy-plane that is defined by the engine speed and the slope k. Subsequently, when data for the predetermined number of cycles has been accumulated in the respective engine speed segments, calculation of the ratio X is performed.</p><p id="p0048" num="0048">In the example illustrated in <figref idrefs="f0005">Fig. 8</figref>, the ratio X is acquired also during test operation prior to shipment of the internal combustion engine 10. According to this example, at the time of shipment, the ratio X is less than the threshold value α. Thereafter, the ratio X is compared with the threshold value α at the time of each trip. According to this example, the ratio X exceeds the threshold value α at the time of the ninth trip. Consequently, at the time of the eighth trip, it is determined that an abnormality has arisen in the sealing function. Further, by performing an abnormality determination at the time of shipment also as in this example, the present determination can be put to practical use for a process of checking whether or not the in-cylinder pressure sensor 30 has been assembled normally.</p><heading id="h0016">(Specific processing in first embodiment)</heading><p id="p0049" num="0049"><figref idrefs="f0006">Fig. 9</figref> is a flowchart illustrating a routine that the ECU 40 executes for realizing an abnormality determination with respect to the sealing function of the seal portion 34 in the first embodiment of the present invention. Note that it is assumed that the present routine is repeatedly executed for each cycle with respect to each in-cylinder pressure sensor 30 (that is, for each cylinder) mounted in the internal combustion engine 10.</p><p id="p0050" num="0050">In the routine illustrated in <figref idrefs="f0006">Fig. 9</figref>, first the ECU 40 acquires the engine speed in the current cycle using the crank angle sensor 42 (step 100). Next, the ECU 40 uses the in-cylinder pressure sensor 30 and the crank angle sensor 42 to acquire in-cylinder pressure data that is synchronized with the crank angle (step 102). Subsequently, the ECU 40 utilizes the acquired in-cylinder pressure data to calculate data for the heat release amount Q that is synchronized with the crank angle (step 104).</p><p id="p0051" num="0051">Next, the ECU 40 determines whether or not the present operating condition of the internal combustion engine 10 is a condition that is an object for calculation of the slope k (step 106). As described above, the engine speed is the dominant operating condition parameter for the slope k. However, under operating conditions in which the burning velocity changes extremely, a change in the burning velocity will affect the slope k. Accordingly, it is desirable not to calculate the slope k under such operating conditions. Specifically, it is preferable that operating conditions in which<!-- EPO <DP n="14"> --> combustion is extremely slow, such as when a large amount of EGR gas is introduced at an EGR rate that is greater than a predetermined value or when lean combustion is performed under an air-fuel ratio that has been made significantly lean, are excluded from the conditions that are an object for calculation of the slope k. Therefore, in the present embodiment, a configuration is adopted so that calculation of the slope k is performed under operating conditions at which combustion is performed at the stoichiometric air-fuel ratio. As a result, an abnormality determination can be performed with respect to the sealing function while reliably avoiding operating conditions in which the combustion state affects the accuracy of the abnormality determination due to the combustion becoming extremely slow. Further, a cycle in which abnormal combustion such as preignition occurred is also excluded from the objects for calculation of the slope k.</p><p id="p0052" num="0052">If the result determined in step 106 is affirmative, the ECU 40 proceeds to step 108 to calculate the slope k. Specifically, from the data for the heat release amount Q calculated in step 104, the ECU 40 acquires a first heat release amount Q<sub>1</sub> and a second heat release amount Q<sub>2</sub> that are data items for the heat release amount Q at a first crank angle θ<sub>1</sub> and a second crank angle θ<sub>2</sub>, respectively (see <figref idrefs="f0003">Fig. 4D</figref> for an acquisition example). The first crank angle θ<sub>1</sub> and the second crank angle θ<sub>2</sub> are previously set as two points in a crank angle period from the combustion end point θ<sub>max</sub> to the opening timing of the exhaust valve 22. The second crank angle θ<sub>2</sub> is a crank angle θ that is further to the retard side relative to the first crank angle θ<sub>1</sub>. The ECU 40 calculates the slope k as a ratio (that is, (Q<sub>1</sub>-Q<sub>2</sub>)/(θ<sub>2</sub>-θ<sub>1</sub>)) of the amount of decrease in the heat release amount Q (that is, Q<sub>1</sub>-Q<sub>2</sub>) with respect to the amount of increase (that is, θ<sub>2</sub>-θ<sub>1</sub>) in the crank angle θ. Note that, as described above, the number of data items of the heat release amount Q that are used to calculate the slope k is not limited to two, and may be three or more. Next, the ECU 40 stores the slope k calculated in step 108 in a buffer that is a temporary storage area of the ECU 40 in a state in which the slope k is associated with the engine speed acquired in step 100 (step 110).</p><p id="p0053" num="0053">Next, the ECU 40 determines whether or not calculation of the ratio X for the current trip of the vehicle has been completed (step 112). If the result determined in step 112 is affirmative, the ECU 40 promptly ends the processing for the current cycle. In contrast, if calculation of the ratio X has not been completed, the ECU 40 determines whether or not a condition for calculating the ratio X is established (step 114). In this manner, calculation of the ratio X is performed once for each trip. As described above, calculation of the slope k is performed for only a predetermined number of cycles for each predetermined engine speed segment within a predetermined engine speed range that is a calculation object. The calculation condition in the present step 114 is established at a time that calculation of the slope k for the predetermined number of cycles in each engine speed segment that is an object has been completed.</p><p id="p0054" num="0054">If the result determined in step 114 is affirmative, the ECU 40 proceeds to step 116. In step 116 the ECU 40 calculates the ratio X utilizing data for the slope k that is stored in the buffer (that is, the slope k associated with the engine speed). The ratio X corresponds to an inclination of a linear approximate curve at respective plotted points of the slope k on an xy-plane for which the engine<!-- EPO <DP n="15"> --> speed is taken as an x-coordinate value and the slope k is taken as a y-coordinate value as shown in <figref idrefs="f0005">Fig. 7</figref>. Therefore, in the present step 116, the ECU 40 applies the method of least squares to the data of the slope k stored in the buffer and calculates the aforementioned approximate straight line. The ECU 40 then calculates an inclination of the calculated approximate straight line as the ratio X. In this case, it can be said that it is possible to calculate the ratio X (inclination of the approximate straight line) as long as there are at least two plotted points. Accordingly, the ratio X may be calculated using, for example, two plotted points. However, utilizing plotted points corresponding to a predetermined number of cycles in many engine speed segments as in the technique described in the present embodiment enables the reliability of the ratio X that is calculated to be favorably secured.</p><p id="p0055" num="0055">Next, the ECU 40 determines whether or not the ratio X calculated in step 116 is greater than the threshold value α (step 118). The threshold value α is a value that is adapted in advance as a value that enables a determination regarding the existence or nonexistence of an abnormality of the sealing function. More specifically, even when the sealing function is normal, a thermal strain error itself exists even though the level thereof is small compared to a time when an abnormality has arisen. Therefore, it is sufficient to ascertain in advance, by experimentation or the like, the ratio X at a time when the sealing function is normal with respect to an in-cylinder pressure sensor mounted in an internal combustion engine, and set the threshold value α by taking the ratio X at a normal time as a reference value. Further, a configuration may also be adopted so as to use the ratio X acquired during trial operation at the time of shipment as a reference value, and perform an abnormality determination based on the magnitude of an amount of change from the reference value. By this means, it is possible to perform a determination that takes into account variations due to individual differences between in-cylinder pressure sensors mounted in an internal combustion engine and variations with respect to assembly of in-cylinder pressure sensors in an internal combustion engine.</p><p id="p0056" num="0056">In a case where the ratio X is equal to or less than the threshold value α, the ECU 40 determines that the sealing function of the seal portion 34 is normal (step 120). On the other hand, in a case where the ratio X is larger than the threshold value α, the ECU 40 determines that an abnormality has arisen in the sealing function of the seal portion 34, and turns a seal abnormality determination flag "on" (step 122). In this case, in order to notify the driver that the sealing function is abnormal, the malfunction indicator lamp 46 is lit or the like.</p><p id="p0057" num="0057">As mentioned previously, the engine speed is the dominant operating condition parameter with respect to the slope k. Further, as shown in <figref idrefs="f0005">Fig. 7</figref>, when an abnormality arises in the sealing function, the ratio X of the amount of decrease in the slope k relative to the amount of increase in the engine speed increases. Consequently, in a case where the ratio X is greater than the threshold value α as in the processing of the routine illustrated in <figref idrefs="f0006">Fig. 9</figref> that is described above, it can be determined that an abnormality has arisen in the sealing function of the seal portion 34. Thus, according to the technique of the present embodiment, by monitoring the thermal response characteristics of the in-cylinder pressure sensor 30 utilizing the ratio X that is an abnormality determination index value that<!-- EPO <DP n="16"> --> is based on the slope k and the engine speed, the existence or nonexistence of an abnormality in the sealing function can be determined.</p><p id="p0058" num="0058">In addition, the size of the slope k itself changes accompanying a change in the heat input amount to the sensor tip portion accompanying a decrease in the sealing performance of the seal portion 34. With respect to the relation with the operating condition parameters, it can be said that the engine speed is the dominant influence on the slope k, and that the slope k basically is not influenced by other operating condition parameters such as the in-cylinder charged air amount KL (however, as described in the foregoing, this excludes operating conditions under which combustion becomes extremely slow, or under which the burning velocity becomes extremely high such as when abnormal combustion occurs). Therefore, by utilizing the ratio X, an abnormality determination index value can be obtained that does not depend on operating condition parameters other than the engine speed. By this means, the number of adaptation steps for determining an abnormality of the sealing function can be kept to a low number.</p><p id="p0059" num="0059">In the above described first embodiment, a configuration is adopted that calculates the ratio X for each trip of the vehicle in which the internal combustion engine 10 is mounted, and compares this ratio X with the threshold value α. However, a configuration may also be adopted so as to perform an abnormality determination with respect to the sealing function of the seal portion in the present invention using the following technique, excluding a case in which an abnormality determination is performed when shipping the internal combustion engine 10. That is, a ratio X calculated during operation of the internal combustion engine 10 is stored as a previous value in the ECU 40 for use when performing an abnormality determination at the time of the next trip. Subsequently, if a difference between the ratio X calculated at the time of the current trip and the previous value is greater than a predetermined determination value, it may be determined that an abnormality has arisen in the sealing function of the seal portion 34. Note that, it can be said that by regarding the sum of the above described determination value and the previous value as a threshold value, this technique also corresponds to one which performs a determination according to the present invention that an abnormality has arisen in the sealing function in a case where the second ratio (ratio X) is greater than the first threshold value.</p><p id="p0060" num="0060">Note that, in the above described first embodiment, "heat release amount calculation means" of the present invention is realized by the ECU 40 executing the above described processing in step 104, "first ratio calculation means" of the present invention is realized by the ECU 40 executing the above described processing in step 108, and "seal abnormality determination means" is realized by the ECU 40 executing the above described processing in steps 116 to 122.</p><heading id="h0017"><b>Second Embodiment</b></heading><p id="p0061" num="0061">Next, a second embodiment of the present invention will be described referring mainly to <figref idrefs="f0007">Fig. 10</figref> and <figref idrefs="f0008">Fig. 11</figref>. The system of the present embodiment can be realized by using the hardware configuration illustrated in <figref idrefs="f0001">Fig. 1</figref>, and causing the ECU 40 to execute the routine shown in <figref idrefs="f0008">Fig. 11</figref>, described later, instead of the routine shown in <figref idrefs="f0006">Fig. 9</figref>.<!-- EPO <DP n="17"> --></p><heading id="h0018">[Determination of abnormality in sealing function of seal portion in second embodiment]</heading><p id="p0062" num="0062"><figref idrefs="f0007">Fig. 10</figref> is a view for describing a technique for determining an abnormality in the sealing function of the seal portion 34 that is used in the second embodiment of the present invention. In the above described first embodiment, an abnormality determination technique was described in which a ratio X of an amount of decrease in the slope k relative to an amount of increase in the engine speed is utilized as an index value.</p><p id="p0063" num="0063">In contrast, according to the abnormality determination technique of the present embodiment, the existence or nonexistence of an abnormality in the sealing function of the seal portion 34 is determined based on whether or not a calculated slope k is greater than a predetermined threshold value P that corresponds to an engine speed in a cycle in which the in-cylinder pressure data that serves as the basis for calculation of this slope k was acquired. Specifically, as shown in <figref idrefs="f0007">Fig. 10</figref>, a case where the engine speed in the cycle in which the slope k was calculated is NE1 is taken as an example, and it is determined that the sealing function is normal in a case where the slope k is equal to or less than a threshold value β1 for the engine speed NE1, such as at a point P1. On the other hand, it is determined that an abnormality has arisen in the sealing function in a case where the slope k is greater than the threshold value β1, such as at a point P2.</p><p id="p0064" num="0064">Based on the same idea as that for the setting of the threshold value α in the first embodiment, with respect to the threshold value P also, it is sufficient to ascertain in advance, by experimentation or the like, the slope k at a time when the sealing function is normal, and set the aforementioned slope k at the normal time as a reference value. Furthermore, as described above referring to <figref idrefs="f0005">Fig. 7</figref>, the slope k decreases as the engine speed increases. In correspondence with this fact, according to the present embodiment, as shown in <figref idrefs="f0007">Fig. 10</figref>, the threshold value β is set so as to decrease as the engine speed increases. By this means, the threshold value β can be set more appropriately in a manner that takes into consideration the relation between the slope k and the engine speed.</p><heading id="h0019">(Specific processing in second embodiment)</heading><p id="p0065" num="0065"><figref idrefs="f0008">Fig. 11</figref> is a flowchart illustrating a routine that the ECU 40 executes for realizing an abnormality determination with respect to the sealing function of the seal portion 34 in the second embodiment of the present invention. In <figref idrefs="f0008">Fig. 11</figref>, steps that are the same as steps shown in <figref idrefs="f0006">Fig. 9</figref> according to the first embodiment are denoted by the same reference numerals, and a description of those steps is omitted or simplified.</p><p id="p0066" num="0066">In the routine shown in <figref idrefs="f0008">Fig. 11</figref>, after calculating the slope k in step 108, the ECU 40 proceeds to step 200. The threshold value β that is set so as to decrease as the engine speed increases as shown in <figref idrefs="f0007">Fig. 10</figref> is stored in the ECU 40. In step 200, the ECU 40 calculates that threshold value β in accordance with the current engine speed that was acquired in step 100. Next, the ECU 40 determines whether or not the slope k is greater than the threshold value β (step 202). If the result determined in the present step 202 is negative, the ECU 40 determines that the sealing function is normal (step 120), while if the result determined in the present step 202 is affirmative, the ECU 40 determines that the sealing function is abnormal (step 122).<!-- EPO <DP n="18"> --></p><p id="p0067" num="0067">According to the processing of the routine illustrated in <figref idrefs="f0008">Fig. 11</figref> that is described above also, by monitoring the thermal response characteristics of the in-cylinder pressure sensor 30 utilizing the relation between the slope k and the engine speed, the existence or nonexistence of an abnormality in the sealing function can be determined.</p><p id="p0068" num="0068">In the above described second embodiment, the threshold value β is set so as to become continuously smaller as the engine speed increases. However, as long as the second threshold value that is set in consideration of the relation between the first ratio (slope k) and the engine speed in the present invention is set so as to become smaller when the engine speed is low in comparison to when the engine speed is high, the threshold value β may be set in a different manner to the manner described above. Specifically, the second threshold value may be set so as to decrease in a stepwise manner in two steps or in three or more steps as the engine speed increases.</p><p id="p0069" num="0069">Further, in the above described second embodiment, a configuration is adopted so that, after calculating the threshold value β that corresponds to the engine speed in the cycle in which the slope k was calculated, the slope k and the threshold value β are compared. Instead of such processing, an abnormality determination technique may be used that is based on the following processing. That is, a configuration is adopted in which a map that stores an abnormality determination variable using the slope k and the engine speed as input axes is provided in the ECU 40. Specifically, the present map has a map region such as the relation illustrated in <figref idrefs="f0007">Fig. 10</figref>, and is a map in which a normal seal region and an abnormal seal region are set by taking the straight line of the threshold value P shown in <figref idrefs="f0007">Fig. 10</figref> as a boundary. An abnormality determination variable is a variable that indicates the existence or nonexistence of an abnormality in the sealing function by using the values 1 and 0, and takes a value of 0 in the normal seal region and a value of 1 in the abnormal seal region. A determination regarding the existence or nonexistence of an abnormality in the sealing function may also be made by referring to the above described map, and determining the existence or nonexistence of an abnormality in the sealing function in accordance with whether the abnormality determination variable is 0 or 1 in the map that corresponds to the slope k and engine speed in a certain cycle.</p><p id="p0070" num="0070">Further, in the case of utilizing the slope k as in the second embodiment also, a configuration may be adopted so as to make a determination using the same concept as in the modification of the first embodiment that utilizes the previous value and current value of the ratio X. Specifically, with regard to the slope k under the same engine speed, a determination of the existence or nonexistence of an abnormality in the sealing function may be made based on whether or not a difference between a value acquired at the time of the previous trip and a value acquired at the time of the current trip is greater than a predetermined determination value.</p><p id="p0071" num="0071">Note that, in the above described second embodiment, "heat release amount calculation means" of the present invention is realized by the ECU 40 executing the above described processing in step 104, "first ratio calculation means" of the present invention is realized by the ECU 40 executing the above described processing in step 108, and "seal abnormality determination means" is realized by the ECU 40 executing the above described processing in steps 200, 202, 120 and 122.<!-- EPO <DP n="19"> --></p><heading id="h0020"><b>Third Embodiment</b></heading><p id="p0072" num="0072">Next, a third embodiment of the present invention will be described referring mainly to <figref idrefs="f0009 f0010 f0011 f0012 f0013">Fig. 12 to Fig. 18</figref>. The system of the present embodiment can be realized by using the hardware configuration illustrated in <figref idrefs="f0001">Fig. 1</figref>, and causing the ECU 40 to execute the routines shown in <figref idrefs="f0012">Fig. 17</figref> and <figref idrefs="f0013">Fig. 18</figref>, described later, instead of the routine shown in <figref idrefs="f0006">Fig. 9</figref>.</p><heading id="h0021">[Erroneous detection of ignition delay period accompanying occurrence of abnormality in sealing function]</heading><p id="p0073" num="0073"><figref idrefs="f0009">Figs. 12A and 12B</figref> are views for describing erroneous detection of an ignition delay period accompanying the occurrence of an abnormality in the sealing function of the seal portion 34. As shown in <figref idrefs="f0009">Fig. 12A</figref>, when an abnormality occurs in the sealing function, due to the influence of thermal strain, the position of the combustion end point θ<sub>max</sub> in the data for the heat release amount Q with respect to which the detected value of the in-cylinder pressure sensor 30 was utilized is advanced in comparison to when the sealing function is normal. As a result, when an abnormality arises in the sealing function, as shown in <figref idrefs="f0009">Fig. 12B</figref>, a rise in the MFB waveform is steep in comparison to when the seal is normal. An ignition delay period can be calculated as a crank angle period (SA-CA10) from a spark timing SA to a 10% combustion point CA10 utilizing a calculated result for the MFB that is based on the data of the heat release amount Q. However, due to the above described change in the MFB waveform, a detected value of CA10 when an abnormality has arisen in the sealing function is acquired as a value on the advanced side in comparison to when the seal is normal. In accompaniment therewith, the ignition delay period (SA-CA10) when an abnormality has arisen in the sealing function is calculated as a shorter value relative to a value when the seal is normal. That is, the ignition delay period is erroneously detected as a shorter period than the actual ignition delay period.</p><heading id="h0022">[Feature portion of third embodiment]</heading><heading id="h0023">(Correction of ignition delay period (SA-CA10) based on ratio X)</heading><p id="p0074" num="0074">When any kind of engine control, determination processing, or estimation processing is performed utilizing an ignition delay period, if an error with respect to the actual value arises in a detected value of the ignition delay period (SA-CA10) (hereunder, may also be referred to simply as an "ignition delay error") due to an increase in the ratio X, the engine control or the like will be affected by the ignition delay error and the accuracy of the control or the like will be unfavorable.</p><p id="p0075" num="0075"><figref idrefs="f0009">Fig. 13</figref> is a view for describing the manner of setting a threshold value α that is used for determining an abnormality in the sealing function according to a third embodiment of the present invention. As shown in <figref idrefs="f0009">Fig. 13</figref>, an ignition delay error increases as the ratio X increases. Accordingly, with the relation illustrated in <figref idrefs="f0009">Fig. 13</figref>, it is possible to ascertain the ignition delay error based on the ratio X. Therefore, the threshold value α for detecting an abnormality in the sealing function is determined in advance as a value corresponding to an upper limit of the ignition delay error within a range in which the effect of the above described engine control or the like of the system of the internal combustion engine 10 can be guaranteed.<!-- EPO <DP n="20"> --></p><p id="p0076" num="0076">The system of the present embodiment is similar to the system of the first embodiment in the respect that it is determined that an abnormality has arisen in the sealing function in a case where the ratio X is greater than the threshold value α. Furthermore, according to the present embodiment, in a case where the ratio X is less than or equal to the threshold value α, SA-CA10 that is an index value of the ignition delay period is corrected in accordance with the value of the ratio X.</p><p id="p0077" num="0077"><figref idrefs="f0010">Fig. 14</figref> is a view for describing the manner of setting the correction amount for SA-CA10 based on the ratio X. As shown in the above described <figref idrefs="f0009">Fig. 13</figref>, the ignition delay error increases as the ratio X increases. In correspondence with this fact, as shown in <figref idrefs="f0010">Fig. 14</figref>, the correction amount of SA-CA10 is set so as to increase as the ratio X increases.</p><heading id="h0024">(Feedback control of air-fuel ratio and the like using SA-CA10)</heading><p id="p0078" num="0078">As one kind of the above described engine control or the like utilizing an ignition delay period based on detected values of the in-cylinder pressure sensor 30, the system of the present embodiment performs feedback control of the air-fuel ratio that utilizes SA-CA10. Specifically, the present feedback control is control that adjusts a fuel injection amount so that a difference between a target SA-CA10 that corresponds to a desired target air-fuel ratio and a detected SA-CA10 becomes zero.</p><p id="p0079" num="0079">In this case, the term "detected SA-CA10" refers to a value for SA-CA10 that is calculated based on detected values of the in-cylinder pressure sensor 30. Note that, the above described feedback control of the air-fuel ratio may be control that adjusts an intake air amount instead of, or as well as, a fuel injection amount. Further, in some cases the ignition delay period can be shortened when the ignition energy is increased. Accordingly, the feedback control of SA-CA10 also includes feedback control of SA-CA10 (that is, the ignition delay period) that is not accompanied by a change in the air-fuel ratio, more specifically, feedback control of SA-CA10 that uses adjustment of the ignition energy. Note that, in this case, it is favorable to perform adjustment of an intake air amount using, for example, a known intake variable valve operating apparatus with which it is possible to control the amount of air that is taken into the cylinders in each cycle with a high level of responsiveness. Further, adjustment of the ignition energy can be performed, for example, by providing a plurality of ignition coils for the spark plug 28 and changing the number of ignition coils that are used for discharge as necessary.</p><p id="p0080" num="0080"><figref idrefs="f0010">Fig. 15</figref> is a view that represents the relation between SA-CA10 and the air-fuel ratio (A/F). Based on <figref idrefs="f0010">Fig. 15</figref> it is found that SA-CA10 has a high correlation with the air-fuel ratio. Further, SA-CA10 favorably maintains linearity with respect to the air-fuel ratio in the vicinity of a lean limit also. Here, the term "lean limit" refers to an air-fuel ratio at a lean combustion limit that is determined from the viewpoint of torque fluctuations of the internal combustion engine 10.</p><p id="p0081" num="0081">It can be said that, for the reasons described hereunder, the degree to which SA-CA10 is representative of the lean limit is higher than the air-fuel ratio itself. That is, although an air-fuel ratio that serves as a lean limit changes according to the operating conditions (for example, increases and decreases in the engine water temperature), SA-CA10 is less liable to change in response to changes in the operating conditions in comparison with the air-fuel ratio. In other words, since the<!-- EPO <DP n="21"> --> air-fuel ratio that serves as a lean limit depends to a large degree on ignition factors of the air-fuel mixture, it can be said that SA-CA10 that represents an ignition delay is less liable to be affected by the operating conditions than the air-fuel ratio itself. However, since a time per a unit crank angle changes if the engine speed changes, preferably the target SA-CA10 that is a target value of SA-CA10 is set in accordance with the engine speed. More preferably, since SA-CA10 also changes depending on the in-cylinder charged air amount, it is good to set the target SA-CA10 in accordance with the in-cylinder charged air amount instead of, or in addition to, the engine speed. Further, statistical processing is necessary in a case where a configuration is adopted so as to control the air-fuel ratio in the vicinity of the lean limit by taking a torque fluctuation value, which is different to SA-CA10, as an index. However, it can be said that the practicality of a technique that utilizes a torque fluctuation value that is based on statistical processing is low since the processing takes time and the technique is hard to be implemented during transient operation. In contrast, by adopting SA-CA10, lean limit control can be performed by a technique that does not depend on statistical processing.</p><p id="p0082" num="0082">Next, the reason why CA10 is preferable in comparison to other combustion points as a combustion point (predetermined crank angle at which the MFB becomes a predetermined burnt mass fraction) that is used to specify a crank angle period as an index of an ignition delay that is a period between this combustion point and the spark timing will be described. Also in the case of utilizing a combustion point that is other than CA10 within an initial combustion period (CAO-CA10) prior to the start of main combustion, it is possible to utilize such combustion point for the feedback control of the present embodiment since the obtained crank angle period will be a period in which the influences of factors that affect ignition will be favorably represented. On the other hand, with regard to the combustion start point (CA0), an error is liable to arise due to the influence of noise that is superimposed on an output signal from the in-cylinder pressure sensor 30 that the ECU 40 acquires. The influence of this noise decreases as the combustion point moves away from the combustion start point (CA0). Therefore, in consideration of noise resistance, it can be said that CA10 is the optimal combustion point with respect to a crank angle period defined as a delay period between a combustion point and the spark timing (SA), as in the present embodiment.</p><p id="p0083" num="0083">As described above, it can be said that SA-CA10 is excellent as an index value when performing feedback control of the air-fuel ratio to control the air-fuel ratio in the vicinity of the lean limit to achieve low fuel efficiency. However, the feedback control of the air-fuel ratio using SA-CA10 itself is not limited to lean combustion, and is also applicable to stoichiometric air-fuel ratio combustion.</p><p id="p0084" num="0084"><figref idrefs="f0011">Fig. 16</figref> is a block diagram for describing an overview of feedback control of a fuel injection amount utilizing SA-CA10. According to this feedback control, as shown in <figref idrefs="f0011">Fig. 16</figref>, the target SA-CA10 is set in accordance with the engine operating state (specifically, the engine speed and the in-cylinder charged air amount). The detected SA-CA10 is calculated for each cycle in each cylinder.</p><p id="p0085" num="0085">According to this feedback control, as one example PI control is used for adjusting the fuel injection amount so as to eliminate a difference between the target SA-CA10 and the detected SA-CA10.<!-- EPO <DP n="22"> --> According to the PI control, a difference between the target SA-CA10 and the detected SA-CA10 as well as a predetermined PI gain (proportional gain and integral gain) are used to calculate a fuel injection amount correction rate that is in accordance with this difference and the size of an integrated value thereof. Further, a fuel injection amount correction rate calculated for each cylinder is reflected in the fuel injection amount of the cylinder that is the object of the PI control. By this means, a fuel injection amount for each cylinder of the internal combustion engine (ENG) 10 is adjusted (corrected) by means of the aforementioned feedback control.</p><heading id="h0025">(Specific processing in third embodiment)</heading><p id="p0086" num="0086">First, a control routine that the ECU 40 executes to realize feedback control of the air-fuel ratio using the aforementioned SA-CA10 will be described referring to the flowchart in <figref idrefs="f0012">Fig. 17</figref>. Note that, it is assumed that the present routine is repeatedly executed for each cycle at a predetermined timing after the end of combustion in each cylinder when operating conditions that are an object of the present feedback control are established. Further, it is assumed that the present routine is executed concurrently with a routine that is illustrated in <figref idrefs="f0013">Fig. 18</figref> that is described later.</p><p id="p0087" num="0087">In the routine illustrated in <figref idrefs="f0012">Fig. 17</figref>, first, the ECU 40 acquires the engine speed and the in-cylinder charged air amount using the crank angle sensor 42 and the air flow meter 44 (step 300). Next, the ECU 40 calculates a target SA-CA10 (step 302). The ECU 40 stores a map (not shown in the drawings) in which values for the target SA-CA10 are predefined using the relation between the engine speed and the in-cylinder charged air amount based on results obtained by experimentation or the like. In the present step 302, the ECU 40 refers to the map to acquire a target SA-CA10 based on the engine speed and the in-cylinder charged air amount acquired in step 300.</p><p id="p0088" num="0088">Next, the ECU 40 acquires in-cylinder pressure data that was measured at a time of combustion utilizing the in-cylinder pressure sensor 30 and the crank angle sensor 42 (step 304). Subsequently, the ECU 40 acquires the spark timing (step 306). The ECU 40 stores a map (not shown in the drawings) that defines a target (required) spark timing (basically, an optimal spark timing) based on the relation between the in-cylinder charged air amount and the engine speed, and in the present step 306 the ECU 40 refers to the map to acquire the spark timing.</p><p id="p0089" num="0089">Next, the ECU 40 calculates a detected SA-CA10 (step 308). Abase value of the detected SA-CA10 is calculated as a crank angle period from a spark timing (SA) acquired in step 306 to CA10 that is obtained as a result of analysis of the in-cylinder pressure data that was acquired in step 304. Additionally, if a correction amount for the detected SA-CA10 is calculated by the processing in step 400 in the routine illustrated in <figref idrefs="f0013">Fig. 18</figref>, this correction amount is added to the aforementioned base value.</p><p id="p0090" num="0090">Next, the ECU 40 calculates a difference between the target SA-CA10 and the detected SA-CA10 that were calculated in steps 302 and 308 (step 310). Subsequently, the ECU 40 uses the difference calculated in step 310 and a predetermined PI gain (proportional gain and integral gain) to calculate a fuel injection amount correction rate in accordance with the difference and the size of an integrated value thereof (step 312). Thereafter, the ECU 40 corrects a fuel injection amount for the<!-- EPO <DP n="23"> --> next cycle based on the calculated fuel injection amount correction rate (step 314). Specifically, According to the relation illustrated in <figref idrefs="f0010">Fig. 15</figref>, for example, a case where the detected SA-CA10 is greater than the target SA-CA10 corresponds to a case where the air-fuel ratio deviates to the lean side relative to the intended value. Hence in such a case, a fuel injection amount is increased relative to the base value of the fuel injection amount in order to correct the air-fuel ratio to the rich side.</p><p id="p0091" num="0091">According to the routine illustrated in <figref idrefs="f0012">Fig. 17</figref> that is described above, feedback control of the fuel injection amount is executed so as to eliminate a difference between the target SA-CA10 and the detected SA-CA10. As mentioned above, SA-CA10 has linearity with respect to the air-fuel ratio even in the vicinity of the lean limit. Consequently, by adjusting the fuel injection amount so as to eliminate a difference between the target SA-CA10 and the detected SA-CA10 by means of the technique of the present embodiment, the air-fuel ratio can be favorably controlled so that a desired target air-fuel ratio is obtained, including a case where the air-fuel ratio is controlled in the vicinity of the lean limit. If a configuration is adopted that, in contrast to the technique of the present embodiment, uses only CA10 to adjust the fuel injection amount so that the detected CA10 becomes a target value, the following problem arises. That is, if the spark timing changes, CA10 will change in accompaniment therewith. In contrast, SA-CA10 that is a crank angle period from the spark timing until CA10 hardly changes even if the spark timing changes. Consequently, by using SA-CA10 as an index for adjusting the fuel injection amount, in comparison to a case of using only CA10, the correlation with the air-fuel ratio can be favorably ascertained in a manner that eliminates the influence of the spark timing.</p><p id="p0092" num="0092">Next, a routine that the ECU 40 executes in order to determine an abnormality in the sealing function of the seal portion 34 and to calculate a correction amount of the detected SA-CA10 will be described referring to the flowchart in <figref idrefs="f0013">Fig. 18</figref>. Note that, in <figref idrefs="f0013">Fig. 18</figref>, steps that are the same as steps shown in <figref idrefs="f0006">Fig. 9</figref> according to the first embodiment are denoted by the same reference numerals, and a description of those steps is omitted or simplified. Further, as described above, the feedback control of the air-fuel ratio using SA-CA10 is favorable as air-fuel ratio control at a time of lean combustion operation in particular. In the first embodiment, a time of stoichiometric air-fuel ratio combustion operation was exemplified as an operating condition that is an object for calculation of the slope k in step 106. However, even in a case where feedback control of the air-fuel ratio using SA-CA10 is performed at a time of lean combustion operation, calculation of the slope k can be accurately performed as long as, as described above, the calculation is performed under circumstances in which the air-fuel ratio is not made lean to the extent that combustion becomes extremely slow.</p><p id="p0093" num="0093">In the routine illustrated in <figref idrefs="f0013">Fig. 18</figref>, after the ratio X is calculated in step 116, the ECU 40 concurrently executes abnormality determination processing based on the ratio X (steps 118 to 122) and processing to calculate a correction amount of the detected SA-CA10 based on the ratio X (step 400). In step 400, as described above referring to <figref idrefs="f0010">Fig. 14</figref>, the ECU 40 calculates the correction amount of the detected SA-CA10 as a value that increases as the ratio X increases.<!-- EPO <DP n="24"> --></p><p id="p0094" num="0094">The detected SA-CA10 is corrected in accordance with the ratio X as a result of the routine illustrated in <figref idrefs="f0013">Fig. 18</figref> being executed together with the routine illustrated in <figref idrefs="f0012">Fig. 17</figref>. By this means, it is possible to suppress the occurrence of a decline in the accuracy of feedback control of the air-fuel ratio that uses the SA-CA10, due to a decline in the sealing performance of the seal portion 34. Further, according to the above described routine, correction of the detected SA-CA10 is performed in parallel with determination of an abnormality in the sealing function. By this means, during fail-safe driving after the occurrence of an abnormality in the sealing function is detected and the malfunction indicator lamp 46 lights, a decrease in the accuracy of feedback control of the air-fuel ratio using SA-CA10 (that is, a deterioration in the fuel efficiency and in the drivability of the internal combustion engine 10) is suppressed as much as possible.</p><p id="p0095" num="0095">In the above described third embodiment, an example has been described in which correction of a detected value of the ignition delay period (SA-CA10) is performed in accordance with the ratio X. However, a configuration may also be adopted in which correction of a detected value of an ignition delay period that is specified using SA-CA10 or the like is performed in combination with the abnormality determination processing described in the second embodiment. That is, for example, the relation between the slope k that is acquired in a specific engine speed segment and an ignition delay period may be ascertained in advance, and a correction amount of the ignition delay period may be calculated in accordance with the slope k that is acquired in the engine speed segment in which this relation was ascertained.</p><p id="p0096" num="0096">Note that, in the above described third embodiment, "burnt mass fraction calculation means" according to the present invention is realized by the ECU 40 calculating a burnt mass fraction using in-cylinder pressure data during a combustion period that was acquired using the in-cylinder pressure sensor 30 and the crank angle sensor 42. Further, in the above described third embodiment, "ignition delay period calculation means" according to the present invention is realized by the ECU 40 executing the above described processing in step 308, and "adjustment means" according to the present invention is realized by the ECU 40 executing the above described processing in steps 310 to 314.</p><heading id="h0026"><b>Fourth Embodiment</b></heading><p id="p0097" num="0097">Next, a fourth embodiment of the present invention will be described referring mainly to <figref idrefs="f0014 f0015 f0016">Fig. 19 to Fig. 22</figref>. The system of the present embodiment can be realized by using the hardware configuration illustrated in <figref idrefs="f0001">Fig. 1</figref>, and causing the ECU 40 to execute the routines shown in <figref idrefs="f0015">Fig. 21</figref> and <figref idrefs="f0016">Fig. 22</figref>, described later, instead of the routine shown in <figref idrefs="f0006">Fig. 9</figref>.</p><heading id="h0027">[Feature portion of fourth embodiment]</heading><p id="p0098" num="0098">As shown in the above described <figref idrefs="f0009">Fig. 12B</figref>, when an abnormality has arisen in the sealing function, not only the 10% combustion point CA10 but also a 50% combustion point CA50 that corresponds to the combustion center is shifted to the advancement side in comparison to a time when the seal is normal. As will be understood from <figref idrefs="f0009">Fig. 12B</figref>, the amount of such a shift is greater for CA50 than for CA10.<!-- EPO <DP n="25"> --></p><heading id="h0028">(Correction of combustion center (CA50) based on ratio X)</heading><p id="p0099" num="0099">When any kind of engine control, determination processing, or estimation processing is performed utilizing the combustion center (CA50), if an error with respect to the actual value arises in a detected value of CA50 due to an increase in the ratio X, the engine control or the like will be affected by the error and the accuracy of the control or the like will be unfavorable.</p><p id="p0100" num="0100"><figref idrefs="f0014">Fig. 19</figref> is a view for describing the manner of setting a correction amount of CA50 based on the ratio X. An error between a detected value and an actual value of CA50 increases as the ratio X. In correspondence with this fact, as shown in <figref idrefs="f0014">Fig. 19</figref>, the correction amount of CA50 is set so as to increase as the ratio X increases.</p><heading id="h0029">(Feedback control of spark timing using CA50)</heading><p id="p0101" num="0101">The system of the present embodiment performs feedback control of the spark timing for which CA50 was utilized, as one of the aforementioned kinds of engine control and the like that utilizes a combustion center (CA50) that is based on detected values of the in-cylinder pressure sensor 30. Specifically, the present feedback control is control that adjusts the spark timing so that a difference between a predetermined target CA50 and a detected CA50 becomes zero. The term "detected CA50" used here refers to a value for CA50 that is calculated based on a detected value of the in-cylinder pressure sensor 30.</p><p id="p0102" num="0102"><figref idrefs="f0014">Fig. 20</figref> is a block diagram for describing an overview of feedback control of the spark timing using CA50 according to the fourth embodiment of the present invention. In order to correct the spark timing so as to eliminate a difference between the target CA50 and the detected CA50, as one example, PI control is also used for feedback control that utilizes the aforementioned CA50. According to the PI control, a difference between the target CA50 and the detected CA50 as well as a predetermined PI gain (proportional gain and integral gain) are used to calculate a spark timing correction amount that is in accordance with this difference and the size of an integrated value of the difference. Further, a spark timing correction amount calculated for the each cylinder is reflected in the spark timing of the cylinder that is the object of the PI control. By this means, the spark timing for each cylinder of the internal combustion engine (ENG) 10 is adjusted (corrected) by means of the aforementioned feedback control.</p><heading id="h0030">(Specific processing in fourth embodiment)</heading><p id="p0103" num="0103">First, a control routine that the ECU 40 executes to realize feedback control of the spark timing using the aforementioned CA50 will be described referring to the flowchart in <figref idrefs="f0015">Fig. 21</figref>. In <figref idrefs="f0015">Fig. 21</figref>, steps that are the same as steps shown in <figref idrefs="f0012">Fig. 17</figref> according to the third embodiment are denoted by the same reference numerals, and a description of those steps is omitted or simplified. Further, it is assumed that the present routine is executed concurrently with a routine that is illustrated in <figref idrefs="f0016">Fig. 22</figref> that is described later.</p><p id="p0104" num="0104">According to the routine illustrated in <figref idrefs="f0015">Fig. 21</figref>, after acquiring the engine speed and the in-cylinder charged air amount in step 300, the ECU 40 proceeds to step 500. In step 500 the ECU 40<!-- EPO <DP n="26"> --> calculates the target CA50. The target CA50 is set based on the engine speed and the in-cylinder charged air amount acquired in step 300.</p><p id="p0105" num="0105">Subsequently, after acquiring in-cylinder pressure data in step 306, the ECU 40 proceeds to step 502. In step 502, the ECU 40 calculates the detected CA50 utilizing the result of analyzing the acquired in-cylinder pressure data. Subsequently, the ECU 40 calculates the difference between the target CA50 and the detected CA50 that were calculated in steps 500 and 502 (step 504).</p><p id="p0106" num="0106">Next, the ECU 40 uses the difference calculated in step 504 and a predetermined PI gain (proportional gain and integral gain) to calculate a spark timing correction amount in accordance with the difference and the size of an integrated value thereof (step 506). Thereafter, the ECU 40 corrects a spark timing for the next cycle based on the calculated spark timing correction amount (step 508). Specifically, there is a substantially one-to-one relation between CA50 and the spark timing. For example, in a case where the target CA50 is greater than the detected CA50 (that is, a case where the detected CA50 is retarded relative to the target CA50), the spark timing is advanced so as to start combustion earlier.</p><p id="p0107" num="0107">According to the routine illustrated in <figref idrefs="f0015">Fig. 21</figref> that is described above, feedback control of the spark timing is executed using CA50. Thus, by adjusting the spark timing, the combustion center (CA50) can be controlled so as to be a position at which appropriate combustion is obtained.</p><p id="p0108" num="0108">Next, a routine that the ECU 40 executes in order to determine an abnormality in the sealing function of the seal portion 34 and to calculate a correction amount of the detected CA50 will be described referring to the flowchart in <figref idrefs="f0016">Fig. 22</figref>. Note that, in <figref idrefs="f0016">Fig. 22</figref>, steps that are the same as steps shown in <figref idrefs="f0006">Fig. 9</figref> according to the first embodiment are denoted by the same reference numerals, and a description of those steps is omitted or simplified.</p><p id="p0109" num="0109">In the routine illustrated in <figref idrefs="f0016">Fig. 22</figref>, after the ratio X is calculated in step 116, the ECU 40 concurrently executes abnormality determination processing based on the ratio X (steps 118 to 122) and processing to calculate a correction amount of the detected CA50 based on the ratio X (step 600). In step 600, as described above referring to <figref idrefs="f0014">Fig. 19</figref>, the ECU 40 calculates the correction amount of the detected CA50 as a value that increases as the ratio X increases.</p><p id="p0110" num="0110">The detected CA50 is corrected in accordance with the ratio X as a result of the routine illustrated in <figref idrefs="f0016">Fig. 22</figref> being executed together with the routine illustrated in <figref idrefs="f0015">Fig. 21</figref>. By this means, it is possible to suppress the occurrence of a decline in the accuracy of feedback control of the spark timing that uses the CA50, due to a decline in the sealing performance of the seal portion 34. Further, according to the above described routine, correction of the detected CA50 is performed in parallel with determination of an abnormality in the sealing function. By this means, during fail-safe driving after the occurrence of an abnormality in the sealing function is detected and the malfunction indicator lamp 46 lights, a decrease in the accuracy of feedback control of the spark timing using CA50 (that is, a deterioration in the fuel efficiency and in the drivability of the internal combustion engine 10) is suppressed as much as possible.<!-- EPO <DP n="27"> --></p><p id="p0111" num="0111">In the above described fourth embodiment, an example has been described in which correction of the detected CA50 is performed in accordance with the ratio X. However, a configuration may also be adopted in which correction of the detected CA50 is performed in combination with the abnormality determination processing described in the second embodiment. That is, for example, the relation between the slope k that is acquired in a specific engine speed segment and the detected CA50 may be ascertained in advance, and a correction amount of the detected CA50 may be calculated in accordance with the slope k that is acquired in the engine speed segment in which this relation was ascertained. Furthermore, correction of the detected CA50 in accordance with the ratio X or the slope k may be performed in combination with correction of a detected value for the ignition delay period (SA-CA10) in accordance with the ratio X or the slope k in the above described third embodiment.</p><p id="p0112" num="0112">Note that, in the above described fourth embodiment, "burnt mass fraction calculation means" according to the present invention is realized by the ECU 40 calculating a burnt mass fraction using in-cylinder pressure data during a combustion period that was acquired using the in-cylinder pressure sensor 30 and the crank angle sensor 42. Further, in the above described fourth embodiment, "combustion center calculation means" according to the present invention is realized by the ECU 40 executing the above described processing in step 502, and "spark timing adjustment means" according to the present invention is realized by the ECU 40 executing the above described processing in steps 504 to 508.</p><p id="p0113" num="0113">In the above described first to fourth embodiments a configuration is adopted which utilizes the heat release amount Q that is calculated in accordance with equation (2) in order to calculate the slope k. However, in the present invention, a configuration may also be adopted in which a parameter PV<sup>κ</sup> that has a correlation with the heat release amount Q is used instead of the heat release amount Q in the processing to determine an abnormality in the sealing function of the seal portion.</p><p id="p0114" num="0114">Further, in the above described first to fourth embodiments, taking the spark ignition internal combustion engine 10 as an example, abnormality determination with respect to the sealing function of the seal portion as well as engine control that utilizes a parameter (ratio X or slope k) that is used for the abnormality determination are described. However, the abnormality determination with respect to the sealing function of the seal portion is not limited to a spark ignition internal combustion engine, and may also be applied to a compression ignition internal combustion engine.</p></description><claims mxw-id="PCLM90459709" lang="EN" load-source="patent-office"><!-- EPO <DP n="28"> --><claim id="c-en-0001" num="0001"><claim-text>An internal combustion engine system, comprising:
<claim-text>an in-cylinder pressure sensor that includes: a housing that is formed into a cylindrical shape; a pressure receiving member that is provided at one end of the housing and configured to receive an in-cylinder pressure, the in-cylinder pressure being a pressure of a gas inside a combustion chamber; and a pressure detecting element that is arranged inside the housing and into which a compressive load that is based on the in-cylinder pressure is configured to be input from the pressure receiving member, the pressure detecting element being configured to emit an output in accordance with the input compressive load;</claim-text>
<claim-text>a crank angle sensor configured to detect a crank angle;</claim-text>
<claim-text>a seal portion configured to, at a position that is further on the combustion chamber side than the pressure detecting element in an axial direction of the housing, seal a space between an outer face of the housing and a wall surface of the combustion chamber that surrounds the housing;</claim-text>
<claim-text>heat release amount calculation means (40) for calculating a heat release amount in a cylinder that is an amount of heat released by combustion, based on in-cylinder pressure data that is data regarding an in-cylinder pressure that is detected by the in-cylinder pressure sensor;</claim-text>
<claim-text>first ratio calculation means (40) for calculating a first ratio (k) that is a ratio of an amount of decrease in a heat release amount relative to an amount of increase in a crank angle in a period during an expansion stroke from an crank angle at which the heat release amount that is calculated by the heat release amount calculation means exhibits a maximum value until an opening timing of an exhaust valve; and</claim-text>
<claim-text>seal abnormality determination means (40) for determining existence or nonexistence of an abnormality in a sealing function of the seal portion based on the first ratio (k) and an engine speed.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The internal combustion engine system according to claim 1, wherein, in a case where a second ratio that is a ratio (x) of an amount of decrease in the first ratio (k) relative to an amount of increase in an engine speed is greater than a first threshold value (x), the seal abnormality determination means determines that the sealing function of the seal portion is abnormal.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The internal combustion engine system according to claim 1,<br/>
wherein in a case where the first ratio (k) is greater than a second threshold value (β) that corresponds to an engine speed in a cycle in which in-cylinder pressure data that serves as a basis for calculation of the first ratio is acquired, the seal abnormality determination means (40) determines that the sealing function of the seal portion is abnormal, and<br/>
wherein the second threshold value (β) is set so as to become smaller when the engine speed is high in comparison to when the engine speed is low.<!-- EPO <DP n="29"> --></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The internal combustion engine system according to claim 2, further comprising:
<claim-text>burnt mass fraction calculation means (40) for calculating a burnt mass fraction; and</claim-text>
<claim-text>ignition delay period calculation means (40) for calculating an ignition delay period using a spark timing and a burnt mass fraction,</claim-text>
<claim-text>wherein the ignition delay period calculation means corrects a calculated ignition delay period in accordance with a size of the second ratio (x).</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The internal combustion engine system according to claim 4, further comprising adjustment means (40) for adjusting at least one of a fuel injection amount, an intake air amount and an ignition energy so that a difference between an ignition delay period that is calculated by the ignition delay period calculation means and a target value of the ignition delay period is eliminated.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The internal combustion engine system according to claim 2, 4, or 5, further comprising:
<claim-text>burnt mass fraction calculation means (40) for calculating a burnt mass fraction; and</claim-text>
<claim-text>combustion center calculation means (40) for calculating a combustion center (CA50) based on a burnt mass fraction,</claim-text>
<claim-text>wherein the combustion center calculation means corrects a calculated combustion center in accordance with a size of the second ratio.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The internal combustion engine system according to claim 6, further comprising spark timing adjustment means (40) for adjusting a spark timing so that a difference between a combustion center that is calculated by the combustion center calculation means and a target combustion center is eliminated.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The internal combustion engine system according to claim 3, further comprising:
<claim-text>burnt mass fraction calculation means (40) for calculating a burnt mass fraction; and</claim-text>
<claim-text>ignition delay period calculation means (40) for calculating an ignition delay period using a spark timing and a burnt mass fraction,</claim-text>
<claim-text>wherein the ignition delay period calculation means corrects a calculated ignition delay period in accordance with a size of the first ratio (k).</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The internal combustion engine system according to claim 8, further comprising adjustment means (40) for adjusting at least one of a fuel injection amount, an intake air amount and an ignition energy so that a difference between an ignition delay period that is calculated by the ignition delay period calculation means and a target value of the ignition delay period is eliminated.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The internal combustion engine system according to claim 3, 8, or 9, further comprising:
<claim-text>burnt mass fraction calculation means (40) for calculating a burnt mass fraction; and<!-- EPO <DP n="30"> --></claim-text>
<claim-text>combustion center calculation means (40) for calculating a combustion center (CA50) based on a burnt mass fraction,</claim-text>
<claim-text>wherein the combustion center calculation means corrects a calculated combustion center in accordance with a size of the first ratio.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The internal combustion engine system according to claim 10, further comprising spark timing adjustment means (40) for adjusting a spark timing so that a difference between a combustion center that is calculated by the combustion center calculation means and a target combustion center is eliminated.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The internal combustion engine system according to any one of claims 1 to 11, wherein the seal abnormality determination means (40) makes a determination with respect to an abnormality in the sealing function of the seal portion at a time that an internal combustion engine is operating under a stoichiometric air-fuel ratio.</claim-text></claim></claims><drawings mxw-id="PDW20422426" load-source="patent-office"><!-- EPO <DP n="31"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="223" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0002" num="3A,3B"><img id="if0002" file="imgf0002.tif" wi="148" he="168" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0003" num="4A,4B,4C,4D"><img id="if0003" file="imgf0003.tif" wi="148" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0004" num="5,6"><img id="if0004" file="imgf0004.tif" wi="135" he="211" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0005" num="7,8"><img id="if0005" file="imgf0005.tif" wi="135" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0006" num="9"><img id="if0006" file="imgf0006.tif" wi="135" he="226" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0007" num="10"><img id="if0007" file="imgf0007.tif" wi="126" he="119" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0008" num="11"><img id="if0008" file="imgf0008.tif" wi="134" he="171" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0009" num="12A,12B,13"><img id="if0009" file="imgf0009.tif" wi="140" he="222" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0010" num="14,15"><img id="if0010" file="imgf0010.tif" wi="128" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0011" num="16"><img id="if0011" file="imgf0011.tif" wi="71" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0012" num="17"><img id="if0012" file="imgf0012.tif" wi="130" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0013" num="18"><img id="if0013" file="imgf0013.tif" wi="141" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0014" num="19,20"><img id="if0014" file="imgf0014.tif" wi="107" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0015" num="21"><img id="if0015" file="imgf0015.tif" wi="114" he="157" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0016" num="22"><img id="if0016" file="imgf0016.tif" wi="141" he="230" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="160" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="160" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
