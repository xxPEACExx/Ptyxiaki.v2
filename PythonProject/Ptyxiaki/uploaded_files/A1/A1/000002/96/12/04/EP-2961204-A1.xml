<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961204-A1" country="EP" doc-number="2961204" kind="A1" date="20151230" family-id="51370454" file-reference-id="315735" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451138" ucid="EP-2961204-A1"><document-id><country>EP</country><doc-number>2961204</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13875742-A" is-representative="YES"><document-id mxw-id="PAPP193865244" load-source="docdb" format="epo"><country>EP</country><doc-number>13875742</doc-number><kind>A</kind><date>20130823</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP193865245" load-source="patent-office" format="original"><country>EP</country><doc-number>13875742.2</doc-number><date>20130823</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162030622" ucid="CN-2013082165-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2013082165</doc-number><kind>W</kind><date>20130823</date></document-id></priority-claim><priority-claim mxw-id="PPC162033013" ucid="CN-201310057679-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201310057679</doc-number><kind>A</kind><date>20130222</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1710175525" load-source="docdb">H04W  88/18        20090101ALN20180104BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1710175526" load-source="docdb">H04W  88/16        20090101ALI20180104BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1710175527" load-source="docdb">H04W   4/12        20090101AFI20180104BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1710175528" load-source="docdb">H04L  12/58        20060101ALN20180104BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1710175529" load-source="docdb">H04L  29/06        20060101ALN20180104BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1710175530" load-source="docdb">H04W  12/06        20090101ALI20180104BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1962084106" load-source="docdb" scheme="CPC">H04L  51/38        20130101 LI20160309BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962084745" load-source="docdb" scheme="CPC">H04L  51/04        20130101 LI20160120BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1981012057" load-source="docdb" scheme="CPC">H04W  88/182       20130101 LA20160121BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987768564" load-source="docdb" scheme="CPC">H04W  12/06        20130101 FI20141218BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987781393" load-source="docdb" scheme="CPC">H04W  88/16        20130101 LA20140919BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987783326" load-source="docdb" scheme="CPC">H04L  63/0846      20130101 LI20141218BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987783907" load-source="docdb" scheme="CPC">H04W   4/12        20130101 LA20140919BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165544880" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNG ZUR DURCHFÜHRUNG EINES SOFORTNACHRICHTENDIENSTES AUF EINER MOBILEN BENUTZERVORRICHTUNG</invention-title><invention-title mxw-id="PT165544881" lang="EN" load-source="patent-office">METHOD AND DEVICE FOR IMPLEMENTING INSTANT MESSAGING OF MOBILE USER EQUIPMENT</invention-title><invention-title mxw-id="PT165544882" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF D'IMPLÉMENTATION DE MESSAGERIE INSTANTANÉE D'ÉQUIPEMENT D'UTILISATEUR MOBILE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103304926" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZTE CORP</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR1103328177" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZTE CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR1101653487" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ZTE Corporation</last-name><iid>101115168</iid><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen, Guangdong 518057</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103338413" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CUI ZHENFENG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103322032" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CUI, ZHENFENG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648262" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>CUI, ZHENFENG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332221" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LU JIANFENG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103327738" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LU, JIANFENG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101640496" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LU, JIANFENG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103312004" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>QIN YANTAO</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103318414" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>QIN, YANTAO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101645087" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>QIN, YANTAO</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen Guangdong 518057</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101642731" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Carangelo, Pierluigi</last-name><suffix>et al</suffix><iid>100990857</iid><address><street>Jacobacci &amp; Partners S.p.A. Via delle Quattro Fontane, 15</street><city>00184 Roma</city><country>IT</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2013082165-W"><document-id><country>CN</country><doc-number>2013082165</doc-number><kind>W</kind><date>20130823</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014127615-A1"><document-id><country>WO</country><doc-number>2014127615</doc-number><kind>A1</kind><date>20140828</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660680369" load-source="docdb">AL</country><country mxw-id="DS660604661" load-source="docdb">AT</country><country mxw-id="DS660680375" load-source="docdb">BE</country><country mxw-id="DS660680399" load-source="docdb">BG</country><country mxw-id="DS660680449" load-source="docdb">CH</country><country mxw-id="DS660604449" load-source="docdb">CY</country><country mxw-id="DS660604662" load-source="docdb">CZ</country><country mxw-id="DS660680376" load-source="docdb">DE</country><country mxw-id="DS660604450" load-source="docdb">DK</country><country mxw-id="DS660604459" load-source="docdb">EE</country><country mxw-id="DS660781824" load-source="docdb">ES</country><country mxw-id="DS660680400" load-source="docdb">FI</country><country mxw-id="DS660680401" load-source="docdb">FR</country><country mxw-id="DS660680377" load-source="docdb">GB</country><country mxw-id="DS660604460" load-source="docdb">GR</country><country mxw-id="DS660680378" load-source="docdb">HR</country><country mxw-id="DS660604667" load-source="docdb">HU</country><country mxw-id="DS660680450" load-source="docdb">IE</country><country mxw-id="DS660604461" load-source="docdb">IS</country><country mxw-id="DS660680402" load-source="docdb">IT</country><country mxw-id="DS660604462" load-source="docdb">LI</country><country mxw-id="DS660681867" load-source="docdb">LT</country><country mxw-id="DS660604668" load-source="docdb">LU</country><country mxw-id="DS660681868" load-source="docdb">LV</country><country mxw-id="DS660681869" load-source="docdb">MC</country><country mxw-id="DS660603465" load-source="docdb">MK</country><country mxw-id="DS660603466" load-source="docdb">MT</country><country mxw-id="DS660680411" load-source="docdb">NL</country><country mxw-id="DS660781825" load-source="docdb">NO</country><country mxw-id="DS660680455" load-source="docdb">PL</country><country mxw-id="DS660603467" load-source="docdb">PT</country><country mxw-id="DS660680412" load-source="docdb">RO</country><country mxw-id="DS660603468" load-source="docdb">RS</country><country mxw-id="DS660680456" load-source="docdb">SE</country><country mxw-id="DS660603469" load-source="docdb">SI</country><country mxw-id="DS660781826" load-source="docdb">SK</country><country mxw-id="DS660680457" load-source="docdb">SM</country><country mxw-id="DS660681887" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479508" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention provides a method and a device for implementing instant messaging for a Mobile User Equipment (M-UE). The method comprises: a Mobile Gateway (M-GW), after receiving a login request from the M-UE, sends a login authentication request which contains information that a temporary password is required to be allocated to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system; after acquiring the authentication result and the temporary password, the M-GW allocates a piece of token information to the M-UE and returns the authentication result and the token information to the M-UE; the M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password and returns the result to the M-UE, to facilitate the M-UE and the instant messaging system to carry out instant messaging; and when the network between the M-GW and the M-UE is abnormal, the M-GW caches a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.<img id="iaf01" file="imgaf001.tif" wi="78" he="63" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759320" lang="EN" source="EPO" load-source="docdb"><p>The present invention provides a method and a device for implementing instant messaging for a Mobile User Equipment (M-UE). The method comprises: a Mobile Gateway (M-GW), after receiving a login request from the M-UE, sends a login authentication request which contains information that a temporary password is required to be allocated to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system; after acquiring the authentication result and the temporary password, the M-GW allocates a piece of token information to the M-UE and returns the authentication result and the token information to the M-UE; the M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password and returns the result to the M-UE, to facilitate the M-UE and the instant messaging system to carry out instant messaging; and when the network between the M-GW and the M-UE is abnormal, the M-GW caches a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</p></abstract><description mxw-id="PDES98404209" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b><u>Technical Field</u></b></heading><p id="p0001" num="0001">The present invention relates to the technical field of communications, in particular to a method and device for implementing instant messaging for Mobile User Equipment (M-UE).</p><heading id="h0002"><b><u>Background</u></b></heading><p id="p0002" num="0002">With the large-scale construction of the 3G network and the popularization of the smart phone, the instant messaging has a wider using space. The existing instant messaging protocol, network architecture and the like are mainly designed for broadband Personal Computer (PC) clients. If being developed directly according to the original communication protocol, the M-UE may consume a lot of network traffic when using the most common functions, such as login, standby and chatting. Moreover, when answering or making a call, the mobile phone may be disconnected from the network frequently if in a place where the signal is weaker or a crowd is gathered; and after being connected with the network, the M-UE may log back in, and the frequent login may cause a large impact on the existing instant messaging system.</p><heading id="h0003"><b><u>Summary</u></b></heading><p id="p0003" num="0003">In order to solve the technical problem that the existing instant messaging protocol and network architecture are not applicable to M-UE, embodiments of the present invention provide a method and device for implementing instant messaging for the M-UE via a Mobile Gateway (M-GW).</p><p id="p0004" num="0004">According to one first aspect, an embodiment of the present invention provides a method for implementing instant messaging for an M-UE, including:
<ul><li>an M-GW, after receiving a login request from the M-UE, sends a login<!-- EPO <DP n="2"> --> authentication request, which contains information that a temporary password is required to be allocated, to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system;</li><li>after acquiring the authentication result and the temporary password, the M-GW allocates a piece of token information to the M-UE and returns the authentication result and the token information to the M-UE;</li><li>the M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password and returns the result to the M-UE, to enable the M-UE and the instant messaging system to carry out instant messaging; and</li><li>when the network between the M-GW and the M-UE is abnormal, the M-GW caches a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</li></ul></p><p id="p0005" num="0005">Preferably, after receiving a login request from the M-UE, the M-GW sends the login authentication request which contains information that a temporary password is required to be allocated to an instant messaging system to acquire the authentication result and the temporary password from the instant messaging system may include:
<ul><li>after receiving the login request which is initiated by the M-UE through a private protocol, the M-GW re-constructs the login request by adding extended information that a temporary password is required to be allocated, and sends the re-constructed login request to the instant messaging system; and</li><li>the instant messaging system allocates and stores the temporary password after the login authentication is passed, and returns the authentication result and the allocated temporary password to the M-GW.</li></ul></p><p id="p0006" num="0006">Preferably, the operation that the M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password may<!-- EPO <DP n="3"> --> include:
<ul><li>the subsequent login flow, which includes acquiring contact information of the M-UE from the instant messaging system and other operation, is implemented by using the temporary password, and the M-UE is notified of the acquired information and the operation result through a private signaling; and</li><li>the M-UE is replaced to initiate a request for keeping the registration, session and link between the M-UE and the instant messaging system live by using the temporary password.</li></ul></p><p id="p0007" num="0007">Preferably, the operation that the M-UE acquires the message cached by the M-GW via the token information may include:
<ul><li>the M-UE initiates a registration recovering request to the M-GW through the private protocol and the carried token information; and</li><li>the M-GW compares whether the token information from the M-UE matches, and if so, the M-UE is notified of the cached message through the private protocol gradually.</li></ul></p><p id="p0008" num="0008">Preferably, the operation that the subsequent login flow, including acquiring contact information of the M-UE from the instant messaging system and other operation, is implemented via the temporary password may include:
<ul><li>the M-GW actively initiates a subsequent login flow request containing the temporary password to the instant messaging system; and</li><li>the instant messaging system authenticates the request from the M-GW via the temporary password stored therein, and returns a processing result related to the request to the M-GW if the authentication is passed.</li></ul></p><p id="p0009" num="0009">Preferably, after caching the message which is sent from the instant messaging system to the M-UE, the M-GW actively constructs a processing result after receiving the message correctly and returns the result to the instant messaging system.</p><p id="p0010" num="0010">Preferably, the instant messaging system is an internet.</p><p id="p0011" num="0011">According to a second aspect, an embodiment of the present invention provides a device for implementing instant messaging for an M-UE, including<!-- EPO <DP n="4"> --> the following components arranged in an M-GW:
<ul><li>a temporary password acquiring component, which is configured to, after the M-GW receives a login request from the M-UE, send a login authentication request which contains information that a temporary password is required to be allocated to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system;</li><li>a token information allocating component, which is configured to, after the M-GW acquires the authentication result and the temporary password, allocate a piece of token information to the M-UE and return the authentication result and the token information to the M-UE;</li><li>a subsequent login and live-keeping component, which is configured for the M-GW to replace the M-UE to complete the subsequent login and live-keeping flow via the temporary password and return the result to the M-UE, to facilitate the M-UE and the instant messaging system to carry out instant messaging; and</li><li>a network abnormality processing component, which is configured to, when the network between the M-GW and the M-UE is abnormal, cache a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</li></ul></p><p id="p0012" num="0012">Preferably, the temporary password acquiring component includes a login request reconstruction element, which is configured to, after the M-GW receives a login request from the M-UE, reconstruct the login request by adding extended information that the temporary password is required to be allocated, and send the reconstructed login request to the instant messaging system.</p><p id="p0013" num="0013">Preferably, the subsequent login and live-keeping component includes: a subsequent login flow processing element, which is configured to implement subsequent login flow, which includes acquiring contact information of the<!-- EPO <DP n="5"> --> M-UE from the instant messaging system and other operation, by using the temporary password, and notify the M-UE of the acquired information and the operation result through a private signaling; and a live-keeping request element, which is configured to replace the M-UE to initiate a request of keeping the registration, session and link between the M-UE and the instant messaging system live via the temporary password.</p><p id="p0014" num="0014">Compared with the prior art, the embodiments of the present invention have the following beneficial effects:
<ol><li>1) The message between M-GW and the existing instant messaging system is authenticated by using the temporary password, and the M-GW may completely replace the M-UE to keep the link, various sessions and other information between the M-UE and the existing instant messaging system live, so that the network flow in the stand-by process of the M-UE is greatly reduced.</li><li>2) When the network between the M-UE and the M-GW is abnormal, the M-GW caches such information as statuses of friends and instant message and notifies the M-UE of the information gradually after the network between the M-UE and the M-GW goes back to normal, so that the problem that the frequent login of the M-UE may cause impact to the existing instant messaging system is solved, and the network traffic of the M-UE is saved.</li></ol></p><heading id="h0004"><b><u>Brief Description of the Drawings</u></b></heading><p id="p0015" num="0015"><ul><li><figref idrefs="f0001">Fig. 1</figref> is a diagram showing the networking of an M-GW sub-system for implementing instant messaging for an M-UE in an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 2</figref> is a diagram of a method for implementing instant messaging for an M-UE in an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 3</figref> is a diagram of a device for implementing instant messaging for an M-UE in an embodiment of the present invention;</li><li><figref idrefs="f0003">Fig. 4</figref> is a flowchart of a login signaling in a method for implementing<!-- EPO <DP n="6"> --> instant messaging for an M-UE in an embodiment of the present invention; and</li><li><figref idrefs="f0004">Fig. 5</figref> is a flowchart of an abnormality recovering signaling in a method for implementing instant messaging for an M-UE in an embodiment of the present invention.</li></ul></p><heading id="h0005"><b><u>Detailed Description of the Embodiments</u></b></heading><p id="p0016" num="0016">To be understood better, the present invention is further described below with combination with the drawings and the embodiments.</p><p id="p0017" num="0017"><figref idrefs="f0001">Fig. 1</figref> shows an M-GW sub-system for implementing instant messaging for an M-UE in an embodiment of the present invention, and the M-GW sub-system includes an M-UE 4, an existing instant messaging system 3 and an M-GW 1 which are connected through an access network 2. The M-UE 4 accesses the existing instant messaging system 3 through the M-GW 1; a customized simplified private protocol is used between the M-UE4 and the M-GW1, and the existing communication protocol is used between the M-GW1 and the existing instant messaging system 3.</p><p id="p0018" num="0018"><figref idrefs="f0002">Fig. 2</figref> shows a method for implementing instant messaging for an M-UE via the M-GW sub-system shown in <figref idrefs="f0001">Fig. 1</figref> in an embodiment of the present invention, the method includes Step A to Step D.
<ul><li>Step A: The M-GW, after receiving a login request from the M-UE, sends a login authentication request, which contains the information that a temporary password is required to be allocated, to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system.</li><li>Step B: After acquiring the authentication result and the temporary password, the M-GW allocates a piece of token information to the M-UE and returns the authentication result and the token information to the M-UE.</li><li>Step C: The M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password and returns the result to the M-UE, to facilitate the M-UE and the instant messaging system to carry out<!-- EPO <DP n="7"> --> instant messaging.</li><li>Step D: When the network between the M-GW and the M-UE is abnormal, the M-GW caches a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</li></ul></p><p id="p0019" num="0019">Step A further includes: after receiving the login request which is initiated by the M-UE through a private protocol, the M-GW reconstructs the login request by adding extended information that a temporary password is required to be allocated, and sends the reconstructed login request to the instant messaging system; and the instant messaging system allocates and stores the temporary password after the login authentication is passed, and returns the authentication result and the allocated temporary password to the M-GW.</p><p id="p0020" num="0020">The operation that the M-GW replaces the M-UE to complete the subsequent login and live-keeping flow via the temporary password may include: the subsequent login flow, which includes acquiring contact information of the M-UE from the instant messaging system and other operation, is implemented by using the temporary password, and the M-UE is notified of the acquired information and the operation result through a private signaling; and the M-UE is replaced to initiate a request for keeping the registration, session and link between the M-UE and the instant messaging system live by using the temporary password.</p><p id="p0021" num="0021">The process that the M-UE acquires the message cached by the M-GW via the token information may include: the M-UE initiates a registration recovering request to the M-GW through the private protocol and the carried token information; and the M-GW compares whether the token information from the M-UE matches, and if so, the M-UE is notified of the cached message gradually through the private protocol.</p><p id="p0022" num="0022">Particularly, the operation that the subsequent login flow, including acquiring contact information of the M-UE from the instant messaging system<!-- EPO <DP n="8"> --> and other operation, is implemented via the temporary password may include: the M-GW actively initiates a subsequent login flow request containing the temporary password to the instant messaging system; and the instant messaging system authenticates the request from the M-GW via the temporary password stored therein, and returns a processing result related to the request to the M-GW if the authentication is passed (namely, the stored temporary password is consistent with that in the request).</p><p id="p0023" num="0023">In addition, after caching the message which is sent from the instant messaging system to the M-UE, the M-GW actively constructs a processing result after receiving the message correctly and returns the result to the instant messaging system.</p><p id="p0024" num="0024">The instant messaging system in the embodiment may be the existing Internet or the similar network.</p><p id="p0025" num="0025"><figref idrefs="f0002">Fig. 3</figref> shows a device for implementing instant message for an M-UE in an embodiment of the present invention, and the device is generally arranged in an M-GW and includes:
<ul><li>a temporary password acquiring component configured to, after the M-GW receives a login request from the M-UE, send a login authentication request, which contains information that a temporary password is required to be allocated, to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system;</li><li>a token information allocating component configured to, after the M-GW acquires the authentication result and the temporary password, allocate a piece of token information to the M-UE and return the authentication result and the token information to the M-UE;</li><li>a subsequent login and live-keeping component configured to replace the M-UE to complete the subsequent login and live-keeping flow by using the temporary password and return the result to the M-UE, to facilitate the M-UE and the instant messaging system to carry out instant messaging; and</li><li>a network abnormality processing component configured to, when the<!-- EPO <DP n="9"> --> network between the M-GW and the M-UE is abnormal, cache a message which is sent from the instant messaging system to the M-UE so that the M-UE acquires the message cached by the M-GW by using the token information after the network between the M-GW and the M-UE goes back to normal.</li></ul></p><p id="p0026" num="0026">Preferably, the temporary password acquiring component may include a login request reconstruction element (not shown), which is configured to, after the M-GW receives the login request from the M-UE, reconstruct the login request by adding extended information that the temporary password is required to be allocated, and send the reconstructed login request to the instant messaging system.</p><p id="p0027" num="0027">In addition, the subsequent login and live-keeping component includes: a subsequent login flow processing element (not shown), which is configured to implement subsequent login flow, which includes acquiring contact information of the M-UE from the instant messaging system and other operation, by using the temporary password, and notify the M-UE of the acquired information and the operation result through a private signaling; and a live-keeping request element (not shown), which is configured to replace the M-UE to initiate a request of keeping the registration, session and link between the M-UE and the instant messaging system live by using the temporary password.</p><p id="p0028" num="0028">In order to fully understand the operation of implementing instant messaging for the M-UE via the M-GW sub-system in the present invention, the instant messaging of the M-UE in the embodiment is further described below in combination with <figref idrefs="f0003">Figs. 4</figref> and <figref idrefs="f0004">5</figref>.</p><p id="p0029" num="0029"><figref idrefs="f0003">Fig. 4</figref> shows a flowchart of a login signaling in a method for implementing instant messaging for an M-UE in an embodiment of the present invention, which is the implementation flow of accessing the existing instant messaging system by the M-UE through the M-GW, including the following steps:
<ul><li>Step 401: The M-UE initiates a login request to an instant messaging system to the M-GW through a simplified private protocol.</li><li>Step 402: The M-GW reconstructs the login request via the existing instant<!-- EPO <DP n="10"> --> messaging protocol, wherein the reconstructed login request carries extended information that a temporary password is required to be allocated, and is sent to the existing instant messaging system.</li><li>Step 403: The existing instant messaging system processes the login request, generates the temporary password as required (the temporary password is used for the authentication of a subsequent request message), and finally sends the authentication result and the temporary password to the M-GW.</li><li>Step 404: The M-GW acquires the temporary password, generates token information for the login of the M-UE (the token information is used for the abnormality recovery of the network), and sends the authentication result and the token information to the M-UE through a private protocol.</li><li>Step 405: The M-GW actively initiates subsequent login flow by using the temporary password information. For example, the M-GW initiates a request of acquiring information and statuses of friends and the like to the existing instant messaging system.</li><li>Step 406: The existing instant messaging system authenticates the login request initiated by the M-GW by using the temporary password, and returns the processing result of the request message from the M-GW if the authentication is passed.</li><li>Step 407: The M-GW, after receiving the processing result, converts the processing result into a private protocol signaling which is sent to the M-UE.</li><li>Steps 408 to 411: A request of adding contacts is initiated for the M-UE, wherein the flow is a typical flow of actively processing the request by UE in the M-GW sub-system.</li><li>Step 408: The M-UE initiates the request of adding contacts to the M-GW through the private protocol.</li><li>Step 409: The M-GW reconstructs the request according to the protocol of the existing instant messaging system, and takes the temporary password as authentication information to initiate the request of adding contacts to the<!-- EPO <DP n="11"> --> instant messaging system.</li><li>Step 410: After passing the authentication via the temporary password, the existing instant messaging system returns the processing result to the M-GW.</li><li>Step 411: The M-GW converts the processing result into the signaling of a private protocol which is returned to the M-UE.</li><li>Steps 412 to 413: The M-GW replaces the M-UE to keep the registration, session, link and other information between the M-UE and the existing instant messaging system live, so that in one aspect, the network traffic of the M-UE is reduced, and in another aspect, the M-UE is still normal in the existing messaging system even the network of the M-UE is abnormal.</li><li>Step 412: The M-GW replaces the M-UE to initiate a request for keeping the registration, session and link between the M-UE and the existing instant messaging system live by using the temporary password.</li><li>Step 413: The existing instant messaging system returns a processing result of the live-keeping request.</li></ul></p><p id="p0030" num="0030">Because most of query request, the subsequent client request, the session live-keeping request and the like need to be authenticated when user equipment logs in, the present invention puts forwards away of authenticating the M-GW and the existing instant messaging system through the temporary password, namely, the problem of insecurity of user information caused by sending the user password to the M-GW is solved, and the network traffic consumed every time the M-UE participates in the authentication is avoided. Most of the functions, such as querying a request, authenticating a request, and reporting an error by a session are implemented by the M-GW when the client logs in, and a private customized simplified communication protocol is used between the M-GW and the M-UE, so that the network flow in the using process of the M-UE is greatly reduced.</p><p id="p0031" num="0031"><figref idrefs="f0004">Fig. 5</figref> shows the flow of an abnormality recovering signaling in a method for implementing instant messaging for an M-UE in an embodiment of the<!-- EPO <DP n="12"> --> present invention, which is the processing flow after the network between the M-UE and the M-GW is abnormal and the network goes back to normal, wherein the method includes the following steps:
<ul><li>Step 501: Due to the instability of the mobile network, the network between the M-UE and the M-GW is usually disconnected, and it is assumed the network is abnormal at the moment.</li><li>Step 502: The M-GW and the existing instant messaging system keep live normally, so that the existing instant messaging system considers that the M-UE is in a normal status; and when the statuses of friends of the M-UE are changed or there is an instant message to be sent to the M-UE, these messages arrive at the M-GW normally.</li><li>Step 503: The M-GW caches the received change of statuses of friends and instant message of the M-UE and actively constructs a correct processing result and returns the result to the existing instant messaging system.</li><li>Step 504: The network between the M-UE and the M-GW is recovered, and the M-UE initiates a login request for recovering abnormality, wherein the request message carries token information.</li><li>Step 505: The M-GW receives the login request for recovering abnormality, verifies whether the token matches, and returns the processing result to the M-UE (if the token does not match, the M-UE may initiate a re-login request, and the specific flow is the same as what is described in <figref idrefs="f0002">Fig. 2</figref>).</li><li>Step 506: If the token information matches, the M-GW notifies the M-UE of the cached status and instant message and other information through a private protocol.</li><li>Step 507: After receiving the information, the M-UE notifies the M-GW of the processing result.</li></ul></p><p id="p0032" num="0032">Due to the instability of the mobile network, the M-GW keeps session and other information live in the M-GW sub-system; when the network is abnormal, the M-GW caches a message transmitted by the existing instant messaging system within a period of time and keeps the M-UE in a correct status in the<!-- EPO <DP n="13"> --> instant messaging system; and after the network goes back to normal, the M-GW notifies the M-UE of the cached information gradually, thus, the problem of frequent login of the client caused by the abnormality of the network is solved, i.e., the impact on the existing instant messaging system caused by the frequent login and the increase of traffic of the client caused by the frequent login.</p><p id="p0033" num="0033">To sum up, the embodiments have the following technical effects:
<ol><li>1) The communication protocol between the M-GW and the existing instant messaging system is nearly unchanged, so that a small change is made to the existing instant messaging system (or even negligible).</li><li>2) A brand-new private communication protocol customized for the M-UE is used between the M-GW and the M-UE, so that the network flow generated in the using process of the M-UE is reduced greatly.</li><li>3) The message between the M-GW and the existing instant messaging system is authenticated by using the temporary password, and the M-GW may completely replace the M-UE to keep the link, various sessions and other information between the M-GW and the existing instant messaging system live, so that the network flow of the M-UE is greatly reduced in the stand-by process.</li><li>4) When the network between the M-UE and the M-GW is abnormal, the M-GW caches such information as statuses of friends and instant message and notifies the M-UE of the information after the network between the M-UE and the M-GW goes back to normal, so that the problem that the frequent login of the M-UE may cause impact to the existing instant messaging system is solved, and the network traffic of the M-UE is saved.</li></ol></p><p id="p0034" num="0034">What said above are only the preferred embodiments of the present invention and not intended to limit the present invention, and any modifications, equivalent replacements, improvements and the like made within the spirit and principle of the present invention shall fall within the scope of protection of the present invention.</p></description><claims mxw-id="PCLM90459137" lang="EN" load-source="patent-office"><!-- EPO <DP n="14"> --><claim id="c-en-0001" num="0001"><claim-text>A method for implementing instant communication for Mobile User Equipment (M-UE), <b>characterized by</b> comprising:
<claim-text>after a Mobile Gateway (M-GW) receives a login request from the M-UE, sending, by the M-GW, a login authentication request, which contains information that a temporary password is required to be allocated, to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system;</claim-text>
<claim-text>after the M-GW acquires the authentication result and the temporary password, M-GW allocating a piece of token information to the M-UE and returning the authentication result and the token information to the M-UE;</claim-text>
<claim-text>the M-GW replacing the M-UE to complete the subsequent login and live-keeping flow by using the temporary password and returning a result to the M-UE to enable the M-UE and the instant messaging system to carry out instant messaging; and</claim-text>
<claim-text>when a network between the M-GW and the M-UE is abnormal, caching, by the M-GW, a message which is sent from the instant messaging system to the M-UE to enable the M-UE to acquire the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, <b>characterized in that</b> after the M-GW receives a login request from the M-UE, sending, by the M-GW, the login authentication request which contains the information that a temporary password is required to be allocated to an instant messaging system to acquire the authentication result and the temporary password from the instant messaging system comprises:
<claim-text>after the M-GW receives the login request which is initiated by the M-UE through a private protocol, the M-GW re-constructing the login request by adding extended information that a temporary password is required to be allocated, and sending the re-constructed login request to the instant<!-- EPO <DP n="15"> --> messaging system; and</claim-text>
<claim-text>the instant messaging system allocating and storing the temporary password after the login authentication is passed, and returning the authentication result and the allocated temporary password to the M-GW.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 2, <b>characterized in that</b> replacing the M-UE with the M-GW to complete the subsequent login and live-keeping flow by using the temporary password comprises:
<claim-text>implementing the subsequent login flow, which comprises acquiring contact information of the M-UE from the instant messaging system, by using the temporary password, and notifying the M-UE of the acquired contact information and an operation result through a private signaling; and</claim-text>
<claim-text>replacing, by using the temporary password, the M-UE to initiate a request for keeping the registration, session and link between the M-UE and the instant messaging system live.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 2, <b>characterized in that</b> acquiring, by the M-UE, the message cached by the M-GW via the token information comprises:
<claim-text>initiating, by the M-UE, a registration recovering request to the M-GW through the private protocol and the carried token information; and</claim-text>
<claim-text>comparing, by the M-GW, whether the token information from the M-UE matches, and if the token information from the M-UE matches, sending respectively to the M-UE the cached message through the private protocol.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to claim 3, <b>characterized in that</b> implementing the subsequent login flow, which comprises acquiring contact information of the M-UE from the instant messaging system, via the temporary password comprises:
<claim-text>actively initiating, by the M-GW, a subsequent login flow request containing the temporary password to the instant messaging system; and</claim-text>
<claim-text>the instant messaging system authenticating the subsequent login flow request from the M-GW by using a temporary password stored in the instant messaging system, and returning a processing result related to the<!-- EPO <DP n="16"> --> subsequent login flow request to the M-GW based on that the authentication is passed.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 3, <b>characterized in that</b> after the M-GW caches the message which is sent from the instant messaging system to the M-UE, the M-GW actively constructing a processing result after receiving the message correctly and returning the processing result to the instant messaging system.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to any one of the claims, <b>characterized in that</b> the instant messaging system is an internet.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A device for implementing instant messaging for an M-UE, <b>characterized by</b> comprising the following components arranged in an M-GW:
<claim-text>a temporary password acquiring component configured to, after the M-GW receives a login request from the M-UE, send a login authentication request which contains information that a temporary password is required to be allocated to an instant messaging system to acquire an authentication result and the temporary password from the instant messaging system;</claim-text>
<claim-text>a token information allocating component configured to, after the M-GW acquires the authentication result and the temporary password, allocate a piece of token information to the M-UE and return the authentication result and the token information to the M-UE;</claim-text>
<claim-text>a subsequent login and live-keeping component configured to replace the M-UE to complete the subsequent login and live-keeping flow via the temporary password and return a result to the M-UE to enable the M-UE and the instant messaging system to carry out instant messaging; and</claim-text>
<claim-text>a network abnormality processing component configured to, when a network between the M-GW and the M-UE is abnormal, cache a message which is sent from the instant messaging system to the M-UE to enable the M-UE to acquire the message cached by the M-GW via the token information after the network between the M-GW and the M-UE goes back to normal.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The device according to claim 8, <b>characterized in that</b> the temporary<!-- EPO <DP n="17"> --> password acquiring component comprises a login request reconstruction element configured to, after the M-GW receives a login request from the M-UE, reconstruct the login request by adding extended information that the temporary password is required to be allocated, and send the reconstructed login request to the instant messaging system.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The device according to claim 9, <b>characterized in that</b> the subsequent login and live-keeping component comprises:
<claim-text>a subsequent login flow processing element configured to implement subsequent login flow, which comprises acquiring contact information of the M-UE from the instant messaging system via the temporary password, and notify the M-UE of the acquired contact information and an operation result through a private signaling; and</claim-text>
<claim-text>a live-keeping request element configured to replace the M-UE to initiate a request of keeping a registration, session and link between the M-UE and the instant messaging system live via the temporary password.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW20421875" load-source="patent-office"><!-- EPO <DP n="18"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="158" he="110" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="165" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0003" num="4"><img id="if0003" file="imgf0003.tif" wi="162" he="192" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0004" num="5"><img id="if0004" file="imgf0004.tif" wi="161" he="194" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="232" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="222" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="165" he="225" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
