<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2961246-A1" country="EP" doc-number="2961246" kind="A1" date="20151230" family-id="50981419" file-reference-id="318329" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160451096" ucid="EP-2961246-A1"><document-id><country>EP</country><doc-number>2961246</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14174562-A" is-representative="YES"><document-id mxw-id="PAPP193865160" load-source="docdb" format="epo"><country>EP</country><doc-number>14174562</doc-number><kind>A</kind><date>20140626</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193865161" load-source="patent-office" format="original"><country>EP</country><doc-number>14174562.0</doc-number><date>20140626</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162035175" ucid="EP-14174562-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>14174562</doc-number><kind>A</kind><date>20140626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1928723774" load-source="docdb">G01R  19/155       20060101ALI20160530BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1928729371" load-source="docdb">G01R  19/00        20060101AFI20160530BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1928730389" load-source="docdb">H05B  33/08        20060101ALI20160530BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1835129721" load-source="docdb" scheme="CPC">H05B  33/0845      20130101 LI20170324BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1835129722" load-source="docdb" scheme="CPC">H05B  33/0815      20130101 LA20170324BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1835129723" load-source="docdb" scheme="CPC">H05B  33/0809      20130101 LI20170324BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984697810" load-source="docdb" scheme="CPC">G01R  19/155       20130101 LI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984698959" load-source="docdb" scheme="CPC">H05B  33/0887      20130101 FI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984702531" load-source="docdb" scheme="CPC">G01R  19/0084      20130101 LI20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165544754" lang="DE" load-source="patent-office">LED-Netzspannungsmessung mit einem Stromspiegel</invention-title><invention-title mxw-id="PT165544755" lang="EN" load-source="patent-office">LED mains voltage measurement using a current mirror</invention-title><invention-title mxw-id="PT165544756" lang="FR" load-source="patent-office">Mesure de tension du réseau de DEL utilisant un miroir de courant</invention-title><citations><patent-citations><patcit mxw-id="PCIT335961631" load-source="docdb" ucid="US-20020190779-A1"><document-id format="epo"><country>US</country><doc-number>20020190779</doc-number><kind>A1</kind><date>20021219</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT373873011" load-source="docdb" ucid="US-20130342125-A1"><document-id format="epo"><country>US</country><doc-number>20130342125</doc-number><kind>A1</kind><date>20131226</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>"ZETEX SM-8 COMPLEMENTARY CURRENT MIRROR, ZDS1009", 31 January 2000 (2000-01-31), pages 1 - 5, XP055162433, Retrieved from the Internet &lt;URL:http://www.diodes.com/datasheets/ZDS1009.pdf&gt; [retrieved on 20150115]</text><sources><source mxw-id="PNPL61363517" load-source="docdb" name="SEA" category="X"/></sources></nplcit><nplcit><text>None</text><sources><source mxw-id="PNPL57937120" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103306270" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DIALOG SEMICONDUCTOR UK LTD</last-name><address><country>GB</country></address></addressbook></applicant><applicant mxw-id="PPAR1103328682" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DIALOG SEMICONDUCTOR (UK) LIMITED</last-name></addressbook></applicant><applicant mxw-id="PPAR1101641998" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dialog Semiconductor (UK) Limited</last-name><iid>101495740</iid><address><street>Tower Bridge House St Katharine's Way</street><city>London E1W 1AA</city><country>GB</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103328087" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KNOEDGEN HORST</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103305621" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KNOEDGEN, HORST</last-name></addressbook></inventor><inventor mxw-id="PPAR1101649452" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KNOEDGEN, HORST</last-name><address><street>c/o Dialog Semiconductor GmbH Industriestrasse 1</street><city>82110 Germering</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103324076" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>TYRRELL JULIAN</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103333078" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>TYRRELL, JULIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648943" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>TYRRELL, JULIAN</last-name><address><street>c/o Dialog Semiconductor Ltd. Delta 200, Welton Road Delta Business Park</street><city>Swindon Wiltshire SN5 7 XB</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR1103333151" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>KOBAYASHI HIDENORI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR1103338814" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>KOBAYASHI, HIDENORI</last-name></addressbook></inventor><inventor mxw-id="PPAR1101645174" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>KOBAYASHI, HIDENORI</last-name><address><street>c/o Dialog Semiconductor K.K. Kamiyacho MT Bldg. 16F</street><city>Toranomon Tokyo 4-3-20</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101642063" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MERH-IP Matias Erny Reichl Hoffmann</last-name><iid>101060911</iid><address><street>Paul-Heyse-Strasse 29</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS660604042" load-source="docdb">AL</country><country mxw-id="DS660603105" load-source="docdb">AT</country><country mxw-id="DS660604052" load-source="docdb">BE</country><country mxw-id="DS660781614" load-source="docdb">BG</country><country mxw-id="DS660603252" load-source="docdb">CH</country><country mxw-id="DS660603148" load-source="docdb">CY</country><country mxw-id="DS660603106" load-source="docdb">CZ</country><country mxw-id="DS660604053" load-source="docdb">DE</country><country mxw-id="DS660603149" load-source="docdb">DK</country><country mxw-id="DS660603150" load-source="docdb">EE</country><country mxw-id="DS660602978" load-source="docdb">ES</country><country mxw-id="DS660781615" load-source="docdb">FI</country><country mxw-id="DS660781616" load-source="docdb">FR</country><country mxw-id="DS660604054" load-source="docdb">GB</country><country mxw-id="DS660603151" load-source="docdb">GR</country><country mxw-id="DS660604063" load-source="docdb">HR</country><country mxw-id="DS660603111" load-source="docdb">HU</country><country mxw-id="DS660603253" load-source="docdb">IE</country><country mxw-id="DS660603152" load-source="docdb">IS</country><country mxw-id="DS660781617" load-source="docdb">IT</country><country mxw-id="DS660603153" load-source="docdb">LI</country><country mxw-id="DS660603900" load-source="docdb">LT</country><country mxw-id="DS660603112" load-source="docdb">LU</country><country mxw-id="DS660603901" load-source="docdb">LV</country><country mxw-id="DS660603902" load-source="docdb">MC</country><country mxw-id="DS660602874" load-source="docdb">MK</country><country mxw-id="DS660602875" load-source="docdb">MT</country><country mxw-id="DS660603113" load-source="docdb">NL</country><country mxw-id="DS660604064" load-source="docdb">NO</country><country mxw-id="DS660603154" load-source="docdb">PL</country><country mxw-id="DS660603904" load-source="docdb">PT</country><country mxw-id="DS660603114" load-source="docdb">RO</country><country mxw-id="DS660603905" load-source="docdb">RS</country><country mxw-id="DS660603155" load-source="docdb">SE</country><country mxw-id="DS660781618" load-source="docdb">SI</country><country mxw-id="DS660604065" load-source="docdb">SK</country><country mxw-id="DS660603156" load-source="docdb">SM</country><country mxw-id="DS660602876" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA166479466" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present document relates to measurement circuits to be used e.g. in solid state lighting (SSL) devices. In particular, the present document relates to measurement circuits which are configured to measure wide ranges of the input voltage of the driver circuits for SSL devices. A measurement circuit (306) configured to provide a sensed input voltage (434) indicative of an input voltage (229) is described. The measurement circuit (306) comprises a first resistor (208) which is configured to be coupled at a first side to the input voltage (229). Furthermore, the measurement circuit comprises current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio. In addition, the measurement circuit comprises a second resistor (409) coupled to the output of the current mirror circuitry and configured to provide the sensed input voltage (434), when the input voltage is coupled to the first side of the first resistor.
<img id="iaf01" file="imgaf001.tif" wi="113" he="64" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA166759278" lang="EN" source="EPO" load-source="docdb"><p>The present document relates to measurement circuits to be used e.g. in solid state lighting (SSL) devices. In particular, the present document relates to measurement circuits which are configured to measure wide ranges of the input voltage of the driver circuits for SSL devices. A measurement circuit (306) configured to provide a sensed input voltage (434) indicative of an input voltage (229) is described. The measurement circuit (306) comprises a first resistor (208) which is configured to be coupled at a first side to the input voltage (229). Furthermore, the measurement circuit comprises current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio. In addition, the measurement circuit comprises a second resistor (409) coupled to the output of the current mirror circuitry and configured to provide the sensed input voltage (434), when the input voltage is coupled to the first side of the first resistor.</p></abstract><description mxw-id="PDES98404167" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Technical Field</b></heading><p id="p0001" num="0001">The present document relates to measurement circuits to be used e.g. in solid state lighting (SSL) devices. In particular, the present document relates to measurement circuits which are configured to measure wide ranges of the input voltage of the driver circuits for SSL devices.</p><heading id="h0002"><b>Background</b></heading><p id="p0002" num="0002">Solid State Lighting (SSL) light bulb assemblies, e.g. Light Emitting Diode (LED) based light bulb assemblies, are currently replacing GLS (General Lighting Service) or incandescent lamps. SSL devices typically comprise a driver circuit and/or power converter in order to convert electric power from a mains supply to electric power suitable for an SSL light source comprised within the SSL device (e.g. an array of LEDs).</p><p id="p0003" num="0003">The driver circuit for an SSL device may be configured to convert the AC mains voltage into a possibly constant load voltage and a load current. In particular, the driver circuits may be configured to control the load voltage (also referred to as the drive voltage) and the load current (also referred to as the SSL current) such that the SSL device emits flicker-free light.</p><p id="p0004" num="0004">SSL devices may be used in conjunction with mains voltages at different levels (e.g. 110V or 230V). It may be beneficial to use the same driver circuit for such different mains voltage levels. Furthermore, it may be beneficial to provide an accurate digital version of the waveform of the mains voltage, e.g. in order to be able to reliably de-modulate information which may be modulated onto the waveform of the mains voltage (e.g. for dimming purposes).<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">The present document addresses the technical problem of providing a measurement circuit, notably for the driver circuit of an SSL device, which allows for an accurate measurement of an input voltage (notably the input voltage of a driver circuit) across a wide range of voltage values.</p><heading id="h0003"><b>Summary</b></heading><p id="p0006" num="0006">According to an aspect, a measurement circuit is described, which is configured to provide a sensed input voltage indicative of an input voltage. The measurement circuit may be implemented as part of a driver circuit for a solid state lighting (SSL) device, in order to provide accurate measurements of the input voltage to the driver circuit (notably in a digital manner). Such accurate measurements may e.g. be beneficial to derive dim level control information from the input voltage (notably dim level control information which may be modulated onto the waveform of the input voltage).</p><p id="p0007" num="0007">The measurement circuit comprises a first resistor which is configured to be coupled at a first side to the input voltage. Furthermore, the measurement circuit comprises current mirror circuitry which is coupled at an input of the current mirror circuitry to a second side of the first resistor, wherein the second side of the first resistor is opposite to the first side of the first resistor. As such, the first resistor and the current mirror circuitry may be implemented in series with respect to one another. In example configurations, the input of the current mirror circuitry may be coupled directly to the second side of the first resistor. The first resistor may correspond to the upper resistor of a voltage divider.</p><p id="p0008" num="0008">The current mirror circuitry is configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio. If the current mirror ratio is greater than one, the current mirror circuitry may be configured to amplify the input current to provide an output current which exceeds the input current by a factor corresponding to the<!-- EPO <DP n="3"> --> current mirror ratio. On the other hand, if the current mirror ratio is smaller than one, the current mirror circuitry may be configured to attenuate the input current to provide an output current which is smaller than the input current by a factor corresponding to the current mirror ratio. In an example configuration, the input current of the current mirror circuitry corresponds to the current through the first resistor.</p><p id="p0009" num="0009">The measurement circuit comprises a second resistor coupled to the output of the current mirror circuitry. The second resistor is configured to provide the sensed input voltage, when the input voltage is coupled to the first side of the first resistor. In particular, the sensed input voltage may depend on (or may correspond to) a voltage drop at the second resistor. For this purpose, the current through the second resistor may correspond to the output current of the current mirror circuitry.</p><p id="p0010" num="0010">As such, the measurement circuit may comprise a modified voltage divider which makes use of current mirror circuitry to adjust the voltage divider ratio. In order to provide varying voltage divider ratios, the current mirror ratio may be adjustable. Using the current mirror circuitry, the measurement circuit may be adapted to different levels of input voltages. In particular, the current mirror circuitry (notably the current mirror ratio) may be adjusted such that the sensed input voltage remains within a pre-determined range (given e.g. by an analog-to-digital converter, ADC) for different ranges of input voltages. By way of example, if the input voltage changes to a range which is K times (e.g. 2 times) higher/lower than a previous range, the current mirror ratio may be adjusted by the same factor K (increased or decreased), in order to ensure that the range of the sensed input voltage remains unchanged.</p><p id="p0011" num="0011">The measurement circuit may comprise control circuitry configured to determine a level or range of the input voltage. The control circuitry may then be configured to adapt the current mirror ratio, in dependence of the determined level or range of<!-- EPO <DP n="4"> --> the input voltage. In particular, the control circuitry may be configured to adjust the current mirror ratio such that a level or range of the sensed input voltage is maintained at a pre-determined level or range, regardless the level or range of the input voltage.</p><p id="p0012" num="0012">The current mirror circuitry may comprise a current mirror with an input transistor, an output transistor, an auxiliary transistor, and an auxiliary switch. The auxiliary transistor may be arranged in series with the auxiliary switch. The serial arrangement of the auxiliary switch and the auxiliary transistor may be arranged in parallel to the input transistor or to the output transistor, when the auxiliary switch is closed. The measurement circuit (notably the control circuitry of the measurement circuit) may be configured to control the auxiliary switch to adjust the current mirror ratio. Hence, by using one or more auxiliary transistors which may be arranged in parallel to the input transistor or to the output transistor of a current mirror, the current mirror ratio of the current mirror circuitry may be adjusted in a flexible and cost effective manner. In particular, this scheme for adjusting the current mirror ratio may be implemented within an integrated circuit.</p><p id="p0013" num="0013">The measurement circuit may further comprise an offset current source configured to provide an offset current. The input current at the input of the current mirror circuitry may be dependent on a current through the first resistor and on the offset current. In particular, the current through the first resistor (which is indicative of the input voltage) may be offset using the offset current. By way of example, the input current to the current mirror circuitry may correspond to the sum of the offset current and the current through the first resistor. As a result of this, the sensed input voltage may be offset. This may be beneficial to adjust (notably to offset) a to-be-measured range of the input voltage to a pre-determined range of the sensed input voltage (which may e.g. be digitized using an analog-to-digital converter).<!-- EPO <DP n="5"> --></p><p id="p0014" num="0014">The current mirror circuitry may comprise a first current mirror which is configured to translate the input current into an intermediate current using a first ratio. Furthermore, the current mirror circuitry may comprise a second current mirror configured to translate the intermediate current into the output current using a second ratio. As outlined above, the first and/or second current mirrors may be adjustable using one or more auxiliary transistors, respectively. The current mirror ratio depends on the first ratio and on the second ratio, e.g. on the product of the first ratio and the second ratio. The first current mirror may comprise n-type metal oxide semiconductor (MOS) transistors, and the second current mirror comprises p-type metal oxide semiconductor transistors.</p><p id="p0015" num="0015">The use of two current mirrors which are arranged in series is beneficial in order to provide a sensed input current at the second resistor, which is related to ground. A second side of the second resistor may be (directly) coupled to ground and a first side of the second resistor may be (directly) coupled to the output of the current mirror circuitry. As a result of this, the current through the second resistor may correspond to the output current of the current mirror circuitry. The sensed input voltage may then be provided as the voltage level at the first side of the second resistor (relative to ground).</p><p id="p0016" num="0016">The measurement circuit may further comprise a source follower circuit which is arranged between the second side of the first resistor and the input of the current mirror circuitry. The source follower circuit may be configured to set a voltage level of the second side of the first resistor to a pre-determined reference voltage. This may be beneficial for stabilizing the measurement circuit (e.g. subject to transients/spikes of the input voltage).</p><p id="p0017" num="0017">The source follower circuit may comprise a source follower transistor (e.g. a p-type MOS transistor) arranged between the second side of the first resistor and the input of the current mirror circuitry. A source-drain current of the source follower transistor may correspond to the current through the first resistor. Furthermore,<!-- EPO <DP n="6"> --> the source follower circuit may comprise an operational amplifier configured to control a voltage level at a gate of the source follower transistor based on a voltage level at a source or drain of the source follower transistor and based on the reference voltage. The voltage level at the source or drain of the source follower transistor may correspond to the voltage level at the second side of the first resistor. By doing this, the voltage level at the second side of the first resistor may be fixed to the reference voltage. As a result of this, the current through the first resistor may be proportional to the difference of the input voltage and the fixed reference voltage.</p><p id="p0018" num="0018">The measurement circuit may further comprise current correction circuitry configured to provide an indication of a voltage drop at the input of the current mirror circuitry. As indicated above, the current mirror circuitry may comprise an input transistor at the input. The input transistor may be used as a transistor diode. In such a case, the voltage drop at the input of the current mirror circuitry may correspond to the gate-source voltage at the transistor diode.</p><p id="p0019" num="0019">The voltage level at the input of the current mirror circuitry may lead to an inaccuracy for measuring the input voltage. In other words, the sensed input voltage may comprise a systematic error due to the voltage level at the input of the current mirror circuitry. The measurement circuit may comprise means for offsetting the sensed input voltage based on the indication of the voltage drop at the input of the current mirror circuitry. As a result of this, the accuracy of the sensed input voltage may be increased.</p><p id="p0020" num="0020">The current correction circuitry may comprise an operational amplifier with a first input being coupled to the second side of the first resistor. Furthermore, the current correction circuitry may comprise a correction transistor with a gate being controlled by an output of the operational amplifier. In addition, the current correction circuitry may comprise a correction resistor which is coupled to a source (or drain) of the correction transistor and to a second input of the operation<!-- EPO <DP n="7"> --> amplifier. As a result of this a drain-source current through the correction transistor may provide an indication of the voltage drop at the input of the current mirror circuitry.</p><p id="p0021" num="0021">As indicated above, the measurement circuit may further comprise an analog-to-digital converter (ADC) which is configured to convert the sensed input voltage into a digital signal. The ADC may exhibit a pre-determined conversion range and the measurement circuit (notably the control circuitry of the measurement circuit) may be configured to adapt the current mirror ratio, in order to map different ranges of the input voltage to the pre-determined conversion range of the ADC.</p><p id="p0022" num="0022">The current mirror circuitry and the second resistor may be implemented as an integrated circuit, and (only) the first resistor may be external to the integrated circuit. As such, the measurement circuit may be implemented in a cost efficient manner. In particular, the adjustment of the current mirror ratio may be implemented in a cost efficient manner.</p><p id="p0023" num="0023">The current mirror circuitry may comprise a first transistor which is configured to couple the second side of the first resistor to ground, and a second transistor which is configured to couple the second resistor to ground. Furthermore, the current mirror circuitry may comprise an operational amplifier which is configured to control gates of the first transistor and of the second transistor based on a reference voltage and based on a voltage level at the second side of the first resistor. The use of such current mirror circuitry may be beneficial, as the second side of the first resistor may be set to a fixed reference voltage. By setting the second side of the first resistor (which is also referred to as the input node) to a fixed reference voltage, the voltage level at the second side of the first resistor remains unchanged, even subject to changes of the level of the input voltage. As a result of this, the influence of a capacitance at the input of the measurement circuit may be removed, thereby increasing the detection speed of the measurement circuit.<!-- EPO <DP n="8"> --></p><p id="p0024" num="0024">The current mirror circuitry may comprise an upper current mirror which is coupled at an input to the second side of the first resistor. The upper current mirror may be operated relative to a supply voltage of the measurement circuit. As such, the upper current mirror may be used for measuring negative input voltages. Furthermore, the current mirror circuitry may comprise a lower current mirror which is coupled at an input to the second side of the first resistor. The lower current mirror may be operated relative to ground. As such, the lower current mirror may be used for measuring positive input voltages. Consequently, the measurement circuit may be configured to measure positive and negative input voltages.</p><p id="p0025" num="0025">According to a further aspect, a controller for a driver circuit of a solid state lighting (SSL) device is described. The SSL device may comprise one or more light emitting diodes (LEDs). The driver circuit may comprise a power converter configured to transfer energy from an input of the driver circuit to the SSL device. The power converter may comprise an isolating or a non-isolating power converter. Alternatively or in addition, the power converter may comprise a linear regulator. By way of example, the power converter may comprise a fly-back power converter.</p><p id="p0026" num="0026">The energy at the input of the driver circuit may be derived from the AC mains voltage at a mains frequency. In particular, the input voltage of the power converter may be derived from a rectified version of the AC (alternating current) mains voltage (also referred to as the (rectified) input voltage). The input voltage may vary in accordance to a cycle frequency (which may be twice the frequency of the mains voltage, i.e. the cycle frequency may be twice the mains frequency). The mains frequency may correspond to 50Hz or 60 Hz. The AC mains voltage may exhibit or may have a waveform comprising a sequence of full-waves. The full-waves may be repeated within the waveform at the mains frequency. Each full-wave may be subdivided into two-half waves.<!-- EPO <DP n="9"> --></p><p id="p0027" num="0027">The controller may be configured to determine a dim level for the SSL device. The dim level may be derived based on information comprised within the waveform of the AC mains voltage (e.g. based on a modulation of the waveform and/or based on a phase-cut angle). Alternatively or in addition, the dim level may be determined based on information which has been received on a separate communication channel (e.g. via Bluetooth or via Wireless LAN).</p><p id="p0028" num="0028">The controller may comprise the measurement circuit described in the present document (or at least parts thereof). In particular, the current mirror circuitry and the second resistor may be implemented as part of the controller. The controller (e.g. the control circuitry of the measurement circuit) may be configured to change the current mirror ratio based on (e.g. in accordance to) the mains frequency. As a result of this, different excerpts of a half wave or full wave of the mains voltage may be mapped to the pre-determined conversion range of the ADC of the measurement circuit, thereby increasing the conversion accuracy and/or reducing the ADC costs. In particular, this allows providing a highly accurate digital version of the half wave / full wave of the input voltage, while using an ADC having a conversion range which corresponds to only a fraction of the range of the half wave / full wave of the input voltage. By way of example, the half wave / full wave of the input voltage may be subdivided into Q (Q greater than 1) section, and the current mirror ratio may be modified Q times within each half wave / full wave, in order to adapt the measurement circuit to the particular excerpt of the half wave / full wave of the input voltage.</p><p id="p0029" num="0029">According to a further aspect, a driver circuit for an SSL device is described, which comprises the controller and/or the measurement circuit described in the present document.</p><p id="p0030" num="0030">According to another aspect, an SSL device is described which comprises the controller and/or the measurement circuit described in the present document.<!-- EPO <DP n="10"> --> According to a further aspect, a method for providing a sensed input voltage indicative of an input voltage is described. The method comprises coupling a first resistor at a first side to the input voltage. Furthermore, the method comprises providing current mirror circuitry which is coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and which is configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio. In addition, the method comprises providing the sensed input voltage using a second resistor which is coupled to the output of the current mirror circuitry.</p><p id="p0031" num="0031">It should be noted that the methods and systems including its preferred embodiments as outlined in the present document may be used stand-alone or in combination with the other methods and systems disclosed in this document. In addition, the features outlined in the context of a system are also applicable to a corresponding method. Furthermore, all aspects of the methods and systems outlined in the present document may be arbitrarily combined. In particular, the features of the claims may be combined with one another in an arbitrary manner.</p><p id="p0032" num="0032">In the present document, the term "couple" or "coupled" refers to elements being in electrical communication with each other, whether directly connected e.g., via wires, or in some other manner.</p><heading id="h0004"><b>Short description of the Figures</b></heading><p id="p0033" num="0033">The invention is explained below in an exemplary manner with reference to the accompanying drawings, wherein
<ul><li><figref idrefs="f0001">Fig. 1</figref> illustrates a block diagram of an example light bulb assembly;</li><li><figref idrefs="f0002">Fig. 2a</figref> shows a block diagram of example components of a driver circuit for a SSL device;</li><li><figref idrefs="f0003">Fig. 2b</figref> shows a block diagram of example components of the controller of a driver circuit;<!-- EPO <DP n="11"> --></li><li><figref idrefs="f0004">Fig. 3</figref> illustrates a circuit diagram of an example driver circuit for a SSL device;</li><li><figref idrefs="f0005">Fig. 4</figref> shows a block diagram of example components of a controller configured to measure the level of the input voltage of the driver circuit;</li><li><figref idrefs="f0006">Fig. 5</figref> shows another block diagram of example components of a controller configured to measure the level of the input voltage of the driver circuit;</li><li><figref idrefs="f0007">Fig. 6</figref> shows another block diagram of example components of a controller configured to measure the level of the input voltage of the driver circuit;</li><li><figref idrefs="f0008">Fig. 7</figref> shows another block diagram of example components of a controller configured to measure the level of the input voltage of the driver circuit;</li><li><figref idrefs="f0009">Fig. 8</figref> shows a flow chart of an example method for measuring the input voltage of a driver circuit; and</li><li><figref idrefs="f0010">Fig. 9</figref> shows another block diagram of example components of a controller configured to measure the level of the input voltage of the driver circuit.</li></ul></p><heading id="h0005"><b>Detailed Description</b></heading><p id="p0034" num="0034">In the present document, a light bulb "assembly" includes all of the components required to replace a traditional incandescent filament-based light bulb, notably light bulbs for connection to the standard electricity supply. In British English (and in the present document), this electricity supply is referred to as "mains" electricity, whilst in US English, this supply is typically referred to as power line. Other terms include AC power, line power, domestic power and grid power. It is to be understood that these terms are readily interchangeable, and carry the same meaning.</p><p id="p0035" num="0035">Typically, in Europe electricity is supplied at 230-240 VAC, at 50Hz and in North America at 110-120 VAC at 60Hz. The principles set out in the present document apply to any suitable electricity supply, including the mains/power line mentioned, and a rectified AC power supply.</p><p id="p0036" num="0036"><figref idrefs="f0001">Fig. 1</figref> is a schematic view of a light bulb assembly. The assembly 1 comprises a bulb housing 2 and an electrical connection module 4. The electrical connection<!-- EPO <DP n="12"> --> module 4 can be of a screw type or of a bayonet type, or of any other suitable connection to a light bulb socket. Typical examples for an electrical connection module 4 are the E11, E14 and E27 screw types of Europe and the E12, E17 and E26 screw types of North America. Furthermore, a light source 6 (also referred to as a SSL device) is provided within the housing 2. Examples for such light sources 6 are a solid state light source or SSL device 6, such as a light emitting diode (LED) or an organic light emitting diode (OLED). The light source 6 may be provided by a single light emitting device, or by a plurality of LEDs. Typical SSL devices 6 comprise a plurality of LEDs arranged in series, such that the on-voltage V<sub>on</sub> of the SSL device results from the sum of on-voltages of the individual LEDs. Typical values for on-voltages of SSL devices are in the range of 100V -150V.</p><p id="p0037" num="0037">Usually, the voltage drop across an SSL device 6 remains substantially constant (at the on-voltage V<sub>on</sub> of the SSL device 6), regardless the intensity of the light emitted by the SSL device 6. The intensity of the light emitted by the SSL device 6 is typically controlled by the drive current through the SSL device 6.</p><p id="p0038" num="0038">Driver circuit 8 is located within the bulb housing 2, and serves to convert supply electricity (i.e. the mains supply) received through the electrical connection module 4 into a controlled drive voltage and drive current for the light source 6. In the case of a solid state light source 6, the driver circuit 8 is configured to provide a controlled direct drive current to the light source 6.</p><p id="p0039" num="0039">The housing 2 provides a suitably robust enclosure for the light source and drive components, and includes optical elements that may be required for providing the desired output light from the assembly. The housing 2 may also provide a heat-sink capability, since management of the temperature of the light source may be important in maximising light output and light source life. Accordingly, the housing is typically designed to enable heat generated by the light source to be conducted away from the light source, and out of the assembly as a whole.<!-- EPO <DP n="13"> --></p><p id="p0040" num="0040"><figref idrefs="f0002">Fig. 2a</figref> illustrates example components of a driver circuit 8, 200 of an SSL device 6, 250. The driver circuit 200 comprises a rectifier 210 which receives alternating current (AC) supply electricity from the mains supply, and delivers a rectified current (DC) at its output. This DC power is received by a power converter 230 which serves to output a controlled DC drive voltage and/or a controlled drive current to the SSL device 250. The voltage and current characteristics of the drive signal (comprising the drive voltage and the drive current) are determined by the type and number of LEDs employed in the light source 6 (i.e. in the SSL device 250). The power supplied to the SSL device 250 is controlled in dependence upon desired operating conditions of the SSL device 250. In one example, the SSL device 250 includes a plurality of LEDs connected in series, and requires a drive signal having a drive voltage of 50V or more. In general, the drive voltage may be in the range of 10V to over 100V depending on the number of LEDs comprised within the SSL device 250.</p><p id="p0041" num="0041">The driver circuit 200 may further comprise a controller 220 configured to control the power converter 230 to generate an appropriate drive signal (i.e. an appropriate drive voltage and an appropriate drive current) as a function of the rectified mains voltage. In particular, the controller 220 may be configured to adapt a voltage conversion ratio of the power converter 230 based on the rectified (but varying) voltage provided by the rectifier 210. The controller 220 may comprise the measurement circuit which is described in the present document, in order to provide accurate information regarding the voltage which is provided by the rectifier 210. Furthermore, the controller 220 may be configured to control the power converter 230 to provide an appropriate drive current to the SSL device 250, thereby controlling the intensity of the light emitted by the SSL device 250.</p><p id="p0042" num="0042">The power converter 230 may comprise an inductive energy storage device (e.g. an inductor or a transformer) and a switch device. The switch device (also referred to as a power switch) may be controlled by the controller 220, and may be provided by a metal oxide semiconductor field effect transistor (MOSFET)<!-- EPO <DP n="14"> --> device, or other device suitable for switching high voltage (for example, tens of volts). It should be noted, however, that the controller 220 may comprise the switch device itself, thereby directly controlling the provisioning of an appropriate drive voltage for the SSL device 250. The power converter 230 may comprise different circuit topology. For example, the power converter 230 may comprise a buck converter circuit, a boost converter circuit, a buck/boost converter circuit, a SEPIC (single-ended primary-inductor converter) circuit, and/or a fly-back converter circuit.</p><p id="p0043" num="0043"><figref idrefs="f0003">Figure 2b</figref> illustrates an example block diagram of a controller 220. The controller 220 includes an event detector unit 42 connected for receiving sensor/feedback signals S (e.g. for receiving the rectified voltage provided by the rectifier 210), an output controller 43 for outputting control signals C (e.g. to the power converter 230), a processing unit 44 for overall control of the system, and a data storage unit 46 for storing data for use by the processing device. A communications input/output unit 48 may be provided for enabling the processing unit 44 to communicate with other devices, for example using a suitable wired or wireless communications protocol. The controller 220 also incorporates a power supply regulator 50, which supplies power to the devices within the controller 220, and a clock signal generator 52 (such as an oscillator circuit) for supplying a reference clock signal to the processing unit 44. The clock signal generator 52 may be configured to generate a clock signal from the sensor/feedback signals S (e.g. from the rectified voltage provided by the rectifier 210), thereby enabling a synchronization of the driver circuit 200 with the mains frequency. In other words, the clock signal generator 52 may make use of the periodicity of the mains cycle, in order to synchronize the driver circuit 200 with the mains cycle.</p><p id="p0044" num="0044">The processing unit 44 operates to generate the control signals C for controlling the switch device or devices in the power converter 230. Typically, the control signals are pulse-width modulated (PWM) signals that control the duty cycle (that is, the ratio of the length of an 'on-state' of the power switch over the length of a<!-- EPO <DP n="15"> --> complete commutation cycle comprising an on-state phase and a succeeding off-state phase) of the switch device in the power converter 230, and hence to control the output drive voltage. In an embodiment, the controller 220 is implemented as a microcontroller or as an integrated circuit. The controller 220 may further comprise the measurement circuit described in the present document.</p><p id="p0045" num="0045"><figref idrefs="f0004">Fig. 3</figref> shows a circuit diagram of an example driver circuit 300, 200, 8 of a light bulb assembly 1. The driver circuit 300 may be used to provide electrical power to a load 309, 250, 6 (which may e.g. be a light emitting diode, LED, or an LED array). The driver circuit 300 comprises an electromagnetic interference (EMI) filter unit 301 and a rectifier 302, 210, in order to generate a rectified input voltage 229 from the mains supply 330 at the capacitor 341. Furthermore, the driver circuit 300 comprises a controller 306 which is configured to control a power converter of the driver circuit 300. The controller 306 may comprise the controller 220 described above and/or the measurement circuit described in the present document. The controller 306 may be started using one or more start-up resistors 315. Furthermore, the controller 306 may be coupled to a supply voltage capacitor (not shown) configured to provide the supply voltage Vcc to the controller 306 (which may be implemented e.g. as an integrated circuit, IC). In the illustrated example, the driver circuit 300 comprises a one-stage power converter 305 comprising a fly-back converter 305. It should be noted, however, that the driver circuit 300 may comprise a multi-stage power converter. Furthermore, it should be noted that the power converter 305 may comprise other types of converters, notably isolated or non-isolated converters. The fly-back converter 305 of <figref idrefs="f0004">Fig. 3</figref> comprises a transformer 307 having a primary coil 320 and a secondary coil 321, and having an additional auxiliary coil 322, e.g. for measurement purposes. The auxiliary coil 322 may be used to provide information to the controller 306 regarding the output voltage 231 (also referred to as the drive voltage) of the driver circuit 300. Furthermore, the driver circuit 300 may comprise an output capacitor (or storage capacitor) 308 which stores the electrical power to be provided to the light source 309. The fly-back converter 305<!-- EPO <DP n="16"> --> comprises a diode 204 which is configured to prevent a reverse energy flow from the output of the fly-back converter 305 to the input of the fly-back converter 305 during an off-state of the switch 202 of the fly-back converter 305.</p><p id="p0046" num="0046">The input voltage to the power converter 305 corresponds to the rectified input voltage 229. The input voltage 229 may be sensed using input voltage sensing means 208, 209, thereby providing the sensed voltage signal 234 to the controller 306. In the illustrated example, the input voltage sensing means 208, 209 are implemented using a voltage divider comprising the resistors 208, 209. Furthermore, a sensed current signal 233 is determined using current sensing means 203, and is provided to the controller 306. The sensed current signal 233 is indicative of the current through the power switch 202 of the fly-back converter 305 or of the inductor current through the primary winding 320 of the transformer 307. In the illustrated example, the current sensing means are implemented using a shunt resistor 203 which is arranged in series with the power switch 202.</p><p id="p0047" num="0047">The controller 306 may be configured to determine a gate control signal 232 for putting the switch 202 of the second converter stage 305 into off-state once the current Is through the switch 202 reaches a pre-determined peak current Ip. The gate control signal 232 may be determined based on the sensed current signal 233 and/or based on a freewheeling signal which may be provided e.g. by the auxiliary winding 322 of the transformer 307. In particular, the gate control signal 232 may be set to put the power switch 202 into off-state, once the sensed current signal 233 has reached a pre-determined threshold value (which is typically dependent on the pre-determined peak current Ip). Furthermore, the gate control signal 232 may be set to put the power switch 202 into on-state, once freewheeling of the primary winding 320 of the fly-back converter 305 has been detected.</p><p id="p0048" num="0048">The driver circuit 300 may be configured to provide a load current or SSL current 403 to the SSL device 309 for generating flicker-free light. Furthermore, the driver circuit 300 may be configured to cover a high power factor and harmonic<!-- EPO <DP n="17"> --> distortion. This should also be achieved in case of dimming of the SSL device, i.e. in cases when the dimming level of the SSL device is modified.</p><p id="p0049" num="0049">The level of the illumination which is emitted by the SSL device 309 may be modified by modifying the average current through the SSL device 309. The average current through the SSL device 309 may be modified in an analog manner, where the level of a substantially continuous current 403 through the SSL device 309 is modified. This may be referred to as analog or linear dimming. Alternatively or in addition, the average current through the SSL device 309 may be modified by providing a pulse width modulated (PWM), substantially discontinuous, current 403 to the SSL device 309. The latter is referred to as PWM dimming. In PWM dimming, the level of the SSL current 403 is typically based on the pulse width and period of a PWM signal, while in analog dimming the level of the SSL current 403 is based on the amplitude of an analog signal.</p><p id="p0050" num="0050">The dim level of an SSL device 309 may be set using a dimmer within the mains supply network. The dimmer may comprise a phase-cut dimmer and/or a digital dimmer. The driver circuit 300 may be configured to determine the dim level based on the waveform of the rectified input voltage 229 (e.g. based on information which is modulated onto the waveform of the input voltage 229). Alternatively or in addition, the dim level may be communicated to the driver circuit 300 using a dedicated communication path (e.g. via Bluetooth or Wireless LAN). The driver circuit 300 may be configured to control the power converter 305 based on the dim level. In particular, the driver circuit 300 may be configured to generate a pulse width modulated SSL current 403 for reducing the average level of the SSL current 403 and for reducing the dim level of the SSL device 309.</p><p id="p0051" num="0051">As shown in <figref idrefs="f0004">Fig. 3</figref>, a voltage divider 208, 209 may be used for measuring the level or waveform of the (rectified) input voltage 229 of the driver circuit 300. Such a voltage divider 208, 209 typically has a fixed divider ratio. If the sensed voltage signal 234 which is provided by the voltage divider 208, 209 is measured<!-- EPO <DP n="18"> --> using an ADC (Analog-to-Digital Converter), a high resolution conversion may be required to provide a reasonable accuracy for a wide range of levels of the input voltage 229 and/or for the complete waveform of the input voltage 229. By way of example, if the driver circuit 300 is to be used for 230V and for 110V input voltages 229, an ADC with a relatively high resolution is required, thereby substantially increasing the cost of the driver circuit 300. In the present document, cost efficient means are described for measuring different levels and/or complete waveforms of the input voltage 229 at high accuracy.</p><p id="p0052" num="0052">In particular, it is proposed to provide a voltage divider with an adjustable current mirror between the upper resistor 208 and the lower resistor 209 of the voltage divider. As a result of this, the divider ratio can be changed on-the-fly as required by the actual level of the input voltage 229. This leads to an increased resolution of an ADC for a wide range of input voltages 229. Furthermore, the use of an adjustable current mirror allows the upper resistor 208 to exhibit an increased permissible value range, thereby easing the overall system design constraints. Additionally, the described structure has an increased robustness against external voltage spikes and high energy pulses.</p><p id="p0053" num="0053">The use of an adjustable current mirror is well adapted to IC (Integrated Circuit) technology, wherein the lower resistor 209 may be implemented within an IC (e.g. within the controller 306). The lower resistor 209 may exhibit a fixed, trimmed value. Furthermore, current mirrors may be implemented in an efficient manner within ICs, notably when using the CMOS process, with relatively high matching accuracy.</p><p id="p0054" num="0054"><figref idrefs="f0005">Fig. 4</figref> shows a block diagram with example components of the controller 306. The controller 306 is used herein as an example of an integrated circuit. The components used for measuring the input voltage 229 may be implemented in an integrated circuit which is separate from the controller 306. As indicated above, the upper resistor 208 may be external to the controller 306 and may be coupled to<!-- EPO <DP n="19"> --> the controller 306 (or measurement circuit) via a pin 400. A first side of the upper resistor 208 may be coupled to the input voltage 229 and the opposed second side of the upper resistor 208 may be coupled to the pin 400. The lower resistor 409 may be implemented within the controller 306. The upper resistor 208 and the lower resistor 409 may be coupled to each other via a current mirror structure (also referred to herein as current mirror circuitry).</p><p id="p0055" num="0055">The current mirror structure of <figref idrefs="f0005">Fig. 4</figref> comprises a first adjustable current mirror 411, 412, 413, 415 which comprises a first input transistor 411 (e.g. a NMOS transistor) and a first output transistor 412. The first mirror ratio of the first current mirror may be adjustable by providing one or more auxiliary output transistors 413 which may be activated using respective auxiliary switches 415. As such, the mirror ratio of the first current mirror may be modified.</p><p id="p0056" num="0056">The current mirror structure of <figref idrefs="f0005">Fig. 4</figref> may comprise a second adjustable current mirror 421, 422, 423, 425 configured to convert the output current of the first current mirror into a current towards ground. In a similar manner to the first current mirror, the second current mirror comprises an input transistor 421 and an output transistor 422. Furthermore, the second current mirror may comprise one or more auxiliary output transistors 423 which may be arranged in parallel to the output transistor 422 using respective one or more auxiliary switches 425.</p><p id="p0057" num="0057">The output current of the second current mirror (i.e. the output current of the current mirror circuitry) may be provided to the lower resistor 409, such that the voltage drop at the lower resistor 409 provides a sensed input voltage 434. The sensed input voltage 434 may be provided to the ADC 406 in order to provide a digital representation of the sensed input voltage 434.</p><p id="p0058" num="0058">If Vin is the input voltage 229 and if Vs is the sensed input voltage 434, with R1 and R2 being the resistances of the upper resistor 208 and of the lower resistor 209, respectively, and with k1 being the mirror ratio of the first current mirror and<!-- EPO <DP n="20"> --> with k2 being the mirror ratio of the second current mirror, the sensed input voltage 434 may be approximated by: Vs=Vin*k1*k2*R2/(R1+ k1*k2*R2). Hence, it can be seen that by adapting the mirror ratios k1 and/or k2, the sensed input voltage 434 can be maintained within a pre-determined range for different levels or ranges of input voltage Vin 229.</p><p id="p0059" num="0059">The circuit of <figref idrefs="f0005">Fig. 4</figref> further comprises a start-up diode 401 which may be used to provide a supply voltage Vcc to the controller 306 upon start-up of the driver circuit 300. In particular, the start-up diode 401 may be coupled to a supply voltage capacitor 402 of the driver circuit 300 (which may be coupled to a supply voltage pin of the controller 306). Hence, the upper resistor 208 may also be used as a start-up resistor, thereby removing the need for start-up resistors 315. Furthermore, the number of pins of the control 306 may be reduced.</p><p id="p0060" num="0060">In addition, the circuit may comprise a current source 404 which is configured to provide an offset current. Using the offset current, the current at the input of the first current mirror 411, 412, 413, 415 may be offset in accordance to the offset current, thereby shifting the level of the sensed input voltage 434 to a different range. This may be beneficial to adapt the range of the sensed input voltage 434 to the available conversion range of the ADC 406.</p><p id="p0061" num="0061">Hence, current mirror circuitry may be used instead of a fixed resistor to form a voltage divider for measuring the input voltage 229. The current mirror circuitry automatically clamps the input voltage 229 to a diode drop (across the input transistor 411 which forms a transistor diode) with the external resistor 208 providing a current limit. In other words, by using current mirror circuitry, the voltage drop across the upper resistor 208 is set to the difference between the input voltage 229 and the voltage at the input of the current mirror circuitry (e.g. the gate-source voltage of the first input transistor 411). The resistance of the upper resistor 208 may be selected to be relatively high. As a result of this, a<!-- EPO <DP n="21"> --> robust protection from voltage spikes, even for surge pulses (in the order of 2kV), is provided.</p><p id="p0062" num="0062">As shown in <figref idrefs="f0005">Fig. 4</figref>, during start-up the external resistor 208 may be used to supply the VCC voltage to start the controller 306 and/or the SSL device. Once operating, a measurement switch 405 may be closed for enabling the measurement of the input voltage 229. The input mirror device 422 may be used to generate a current through the upper resistor 208 that is adjustable to accommodate a wide range of external resistor values and/or input voltage levels. The number of adjustment devices (i.e. the number of auxiliary transistors 413) and associated switches 415 may be used to set the range and accuracy of the allowable external resistor values and/or input voltage levels.</p><p id="p0063" num="0063">The current at the output of the first current mirror 411, 412, 413, 415 (also referred to as the intermediate current) may be mirrored back to a trimmed internal resistor 409 which forms the output half of the divider (also referred to as a potential divider), using the second current mirror 421, 422, 423, 425. The gain setting of the second current mirror may be achieved by using one or more auxiliary transistors 423 and associated switches 425. The second current mirror may comprise PMOS transistors. The number of gain settings may depend on the scaling and the number of devices.</p><p id="p0064" num="0064">The fixed internal resistor 409 may be trimmed for a fixed absolute value and can be designed to have a known temperature characteristic. As such, the temperature may be taken into account when determining the level of the input voltage 229, in order to increase the accuracy of the voltage measurement. The voltage drop at the resistor 409 may be provided as a sensed input voltage 434 for digitization to the ADC 406.</p><p id="p0065" num="0065">The current source 404 may be used to generate a 'zoom' area for the sensed input voltage 434 by applying a fixed voltage / current offset to the measurement. The<!-- EPO <DP n="22"> --> current source 404 may also be used to discharge any external capacitance (e.g. the capacitance 341) when the measurement circuit / controller 306 is turned off.</p><p id="p0066" num="0066"><figref idrefs="f0006">Fig. 5</figref> shows a block diagram of another circuit for measuring the input voltage 229 using e.g. the controller 306. In a similar manner to the circuit of <figref idrefs="f0005">Fig. 4</figref>, the circuit comprises a current mirror comprising an input transistor 502 and an output transistor 503 providing a current 504 at the output of the current mirror 502, 503. The sensed input voltage 434 may be determined based on the current 504 (e.g. using a second resistor 409). The current mirror 502, 503 may correspond to the first current mirror 411, 412, 413, 415 of <figref idrefs="f0005">Fig. 4</figref>. The circuit may further comprise a source follower circuit 501, 521 for setting the voltage level at the pin 400 to a pre-determined reference voltage 522. The source follower circuit comprises a source follower transistor 501 and an operational amplifier 521.</p><p id="p0067" num="0067">Hence, the current mirror 502, 503 may be buffered using the source follower circuit 501, 521 which is controlled by operational amplifier 512 and the reference voltage 522. The source follower circuit 501, 521 maintains the device pin 400 at a constant voltage irrespective of the gate-source voltage Vgs of the input transistor 502 of the current mirror 502, 503. As a result of this, the stability of the measurement may be improved.</p><p id="p0068" num="0068">The circuit of <figref idrefs="f0006">Fig. 5</figref> further comprises circuitry for providing a reference current using a current source 512 arrange in series with a second source follower 511 which is controlled using the operational amplifier 521 and the reference voltage 522. The current provided by the current source 512 may be indicative of the reference voltage 522. As such, the current provided by the current source 512 may be used to compensate the impact of the reference voltage 522 on the sensed input voltage 434.</p><p id="p0069" num="0069">By fixing the pin 400 to the reference voltage Vref, the sensed input voltage Vs 434 may be given by: Vs = (Vin-Vref)*k1 *k2*R2/R1. It can be seen how the<!-- EPO <DP n="23"> --> current mirror ratios k1 and/or k2 may be used to maintain the level of the sensed input voltage Vs 434 fixed for different level of input voltage Vin 229. As indicated above, the current provided by the current source 512 may be used to compensate the impact of the reference voltage 522 on the sensed input voltage 434, thereby providing an accurate indication of the input voltage 229.</p><p id="p0070" num="0070"><figref idrefs="f0007">Fig. 6</figref> shows another measurement circuit for measuring the input voltage 229 which is used in combination with correction circuitry for correcting the input current at the pin 400. The measurement circuit comprises a current mirror 602, 603 comprising an input transistor 602 and an output transistor 603. The current mirror 602, 603 may correspond to the input current mirror 411,412, 413, 415 of <figref idrefs="f0005">Fig. 4</figref>. The current mirror 602, 603 provides the output current 604 at the output transistor 603.</p><p id="p0071" num="0071">Furthermore, the circuit of <figref idrefs="f0007">Fig. 6</figref> comprises current correction circuitry comprising the source follower transistor 611 which is controlled using the operational amplifier 621 and the voltage level at the pin 400. As a result of using the correction circuitry 611, 621, the voltage at the resistor 609 corresponds to the voltage at the pin 400. As a result of this, the current 614 through the source follower transistor 611 is dependent on the voltage at the pin 400, i.e. on the voltage at the input transistor 602 of the current mirror 602, 603 (i.e. on the voltage at the input of the current mirror circuitry).The resistor 609 may be trimmed to a known absolute value (similar to the lower resistor 409).</p><p id="p0072" num="0072">The current 604 at the output of the current mirror 602, 603 may be given by 11 = (Vin - Vgs<sub>N1</sub>)/R1, wherein Vin is the input voltage 229 and wherein Vgs<sub>N1</sub> is the gate-source voltage at the input transistor 602 (when assuming a mirror ratio k1 of one). The gate-source voltage Vgs<sub>N1</sub> is typically substantially smaller than the input voltage Vin 229. The current 614 at the transistor 611 is given by I2 = Vgs<sub>N1</sub>/R3, wherein R3 is the resistance of resistor 609.<!-- EPO <DP n="24"> --></p><p id="p0073" num="0073">I2 may be used to compensate the (small) error on the accuracy of the measurement of the input voltage Vin, which is caused by the gate-source voltage Vgs<sub>N1</sub>. For this purpose, the current I2 may be aligned with the current I1, by adjusting the value of R3 to look like the value of R1 by a current mirror ratio. Then the two currents I1 and I2 may be added together. It can be seen from the above equation that the sum of the two currents I1 and I2 provides an accurate indication of the input voltage Vin, if R1 = R3.</p><p id="p0074" num="0074"><figref idrefs="f0008">Fig. 7</figref> shows a block diagram of a further measurement circuit. In the illustrated example, the arrangement of transistors 701, 711 and of the operational amplifier 721 is used as a current mirror between the upper resistor 208 (also referred to as the first resistor) and the lower resistor 709 (also referred to as the second resistor). The operational amplifier 712 ensures that the voltage at the pin 400 is fixed to a reference voltage Vref 722, thereby providing a current through the upper resistor 208 which corresponds to (Vin-Vref)/R1. This current is mirrored to the second transistor 711 using the operational amplifier 712. A mirror ratio may be given by the size ratios of the first transistor 701 and the second transistor 711. A sensed input voltage 734 (also referred to as an indication 734 of the input voltage 229) is provided at the lower resistor 709 (relative to a pre-determined supply voltage Vcc of the controller 306).</p><p id="p0075" num="0075">The measurement circuit of <figref idrefs="f0008">Fig. 7</figref> is beneficial, as it provides a precise reference due to the operational amplifier 721. In particular, by regulating the input node 400 the effect of an input capacitor may be eliminated, because the input node 400 does not change its voltage level (even subject to a change of the level of the input voltage 229). As a result of this, the speed for the detection of the level of the input voltage 229 may be increased.</p><p id="p0076" num="0076">The measurement circuit may be used for positive and/or negative input voltages 229. <figref idrefs="f0010">Fig. 9</figref> illustrates a measurement circuit which is configured to operate with positive and negative input voltages 229. For measuring the input voltage 229, the<!-- EPO <DP n="25"> --> pin 900 at the first resistor 208 is (directly) coupled to the input node 400. Furthermore, the input node 400 may be coupled to ground via a lower current mirror comprising the transistors 701, 711. The lower current mirror is active in case of positive input voltage 229 and provides an indication 734 of the input voltage 229 at the drain of the transistor 711. The lower current mirror is operated relative to ground.</p><p id="p0077" num="0077">Furthermore, the measurement circuit comprises an upper current mirror formed by the transistors 901, 911. The sources of the transistors 901, 911 are coupled to the supply voltage Vcc. As such, the upper current mirror is operated relative to the supply voltage Vcc of the measurement circuit. An indication 934 of the input voltage 229 is provided at the drain of the transistor 911 (in case of negative input voltages 229). A resistor may be coupled to the drain of the transistor 911 and the indication 934 of the input voltage 229 may correspond to or may depend on a voltage drop at the resistor.</p><p id="p0078" num="0078">Using the measurement circuits described in the present document, input voltages 229 in a relatively large voltage range may be measured. By regulating the voltage level of the input node 400 to a predetermined reference voltage 722, the input node 400 does not modulate, even subject to a change of the input voltage 229. As a result of this, a capacitance at the input of the measurement circuit does not have any influence on the dynamics of the voltage measurement.</p><p id="p0079" num="0079"><figref idrefs="f0009">Fig. 8</figref> shows a flow chart of an example method 800 for providing a sensed input voltage 434 which is indicative of the input voltage 229. The method 800 comprises coupling 801 a first resistor 208 (also referred to herein as the upper resistor) at a first side to the input voltage 229. Furthermore, the method 800 comprises providing 802 current mirror circuitry 411, 412, 413, 415, 421, 422, 423, 425 which is coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor. The current mirror circuitry is configured to translate an input current at the input of the current mirror circuitry<!-- EPO <DP n="26"> --> into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio. In addition, the method 800 comprises providing 803 the sensed input voltage 434 using a second resistor 409 (also referred to herein as the lower resistor) which is coupled to the output of the current mirror circuitry.</p><p id="p0080" num="0080">The measurement circuits described in the present document provide various benefits. The described measurement circuits allow the external resistor value to be accommodated over a wide range of values, compared with a single optimized value of a temperature compensated adjustable internal resistor. The measurement circuits allow for a substantial difference between the start-up current and the measurement range. The internal adjustable resistor 409 may be optimized in the layout of an IC for temperature stabilization. A gain change of the first and/or second current mirrors may be achieved on-the-fly, e.g. for an adjustment between 230V to 110V and/or for an adjustment along the waveform of an AC mains voltage. In addition, the voltage measurements circuits may be used for digital dimmer data extraction, as they allow for accurate peak mains voltage measurement.</p><p id="p0081" num="0081">Furthermore, the described circuits allow limiting the input voltage 229 to low values during high-voltage transients. The sensed input voltage 434 at the output of the measurement circuit may be well protected, and may be directly connected to the internal circuitry of the controller 306, e.g. to an ADC 406 and or sample and hold circuit. The measurement circuits are extremely robust to ESD or transient voltage spikes and parasitic capacitance at the input pin 400 of the IC. A current source 404 may be used to generate an additional zoom area and/or to generate a pull down for discharging parasitic capacitors. The current source 404 may be an adjustable current source related to the measured current, in order to correct the voltage error at the input pin 400 (due to the gate-source voltage at the input transistor 411 of the current mirror).<!-- EPO <DP n="27"> --></p><p id="p0082" num="0082">It should be noted that while the circuits have been described using CMOS technology, the circuits may also be provided in conjunction with other technologies such as bipolar, BCD, etc.</p><p id="p0083" num="0083">It should be noted that the description and drawings merely illustrate the principles of the proposed methods and systems. Those skilled in the art will be able to implement various arrangements that, although not explicitly described or shown herein, embody the principles of the invention and are included within its spirit and scope. Furthermore, all examples and embodiment outlined in the present document are principally intended expressly to be only for explanatory purposes to help the reader in understanding the principles of the proposed methods and systems. Furthermore, all statements herein providing principles, aspects, and embodiments of the invention, as well as specific examples thereof, are intended to encompass equivalents thereof.</p></description><claims mxw-id="PCLM90459095" lang="EN" load-source="patent-office"><!-- EPO <DP n="28"> --><claim id="c-en-0001" num="0001"><claim-text>A measurement circuit (306) configured to provide a sensed input voltage (434) indicative of an input voltage (229), wherein the measurement circuit (306) comprises
<claim-text>- a first resistor (208) which is configured to be coupled at a first side to the input voltage (229);</claim-text>
<claim-text>- current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio; and</claim-text>
<claim-text>- a second resistor (409) coupled to the output of the current mirror circuitry and configured to provide the sensed input voltage (434), when the input voltage is coupled to the first side of the first resistor.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The measurement circuit (306) of claim 1, wherein the current mirror ratio is adjustable.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) comprises a current mirror with an input transistor (411); an output transistor (412); an auxiliary transistor (413); and an auxiliary switch (415); wherein
<claim-text>- the auxiliary transistor (413) is arranged in series with the auxiliary switch (415);<!-- EPO <DP n="29"> --></claim-text>
<claim-text>- the serial arrangement of the auxiliary switch (415) and the auxiliary transistor (413) are arranged in parallel to the input transistor (411) or the output transistor (412), when the auxiliary switch (415) is closed; and</claim-text>
<claim-text>- the measurement circuit (306) is configured to control the auxiliary switch (415) to adjust the current mirror ratio.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The measurement circuit (306) of any previous claim, further comprising an offset current source (404) configured to provide an offset current; wherein the input current at the input of the current mirror circuitry is dependent on a current through the first resistor and on the offset current.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) comprises
<claim-text>- a first current mirror (411, 412, 413, 415) configured to translate the input current into an intermediate current using a first ratio; and</claim-text>
<claim-text>- a second current mirror (421, 422, 423, 425) configured to translate the intermediate current into the output current using a second ratio; wherein the current mirror ratio depends on the first ratio and on the second ratio.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry comprises
<claim-text>- an upper current mirror coupled at an input to the second side of the first resistor; wherein the upper current mirror is operated relative to a supply voltage of the measurement circuit; and</claim-text>
<claim-text>- a lower current mirror coupled at an input to the second side of the first resistor; wherein the lower current mirror is operated relative to ground.</claim-text><!-- EPO <DP n="30"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The measurement circuit (306) of any previous claim, wherein
<claim-text>- the measurement circuit (306) further comprises a source follower circuit (501, 521) arranged between the second side of the first resistor and the input of the current mirror circuitry; and</claim-text>
<claim-text>- the source follower circuit is configured to set a voltage level of the second side of the first resistor to a pre-determined reference voltage (522).</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The measurement circuit (306) of claim 7, wherein the source follower circuit comprises
<claim-text>- a source follower transistor (501) arranged between the second side of the first resistor and the input of the current mirror circuitry; and</claim-text>
<claim-text>- an operational amplifier (521) configured to control a voltage level at a gate of the source follower transistor based on a voltage level at a source of the source follower transistor and based on the reference voltage.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The measurement circuit (306) of any previous claim, further comprising current correction circuitry (609, 611, 621) configured to provide an indication (614) of a voltage drop at the input of the current mirror circuitry.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The measurement circuit (306) of claim 9, wherein the current correction circuitry comprises
<claim-text>- an operational amplifier (621) with a first input being coupled to the second side of the first resistor;</claim-text>
<claim-text>- a correction transistor (611) with a gate being controlled by an output of the operational amplifier (621);</claim-text>
<claim-text>- a correction resistor (609) coupled to a source of the correction transistor (611) and to a second input of the operation amplifier (621); wherein a drain-source current (614) through the correction transistor<!-- EPO <DP n="31"> --> (611) provides an indication of the voltage drop at the input of the current mirror circuitry.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The measurement circuit (306) of any of claims 9 to 10, further comprising means for offsetting the sensed input voltage (434) based on the indication (614) of the voltage drop at the input of the current mirror circuitry.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The measurement circuit (306) of any previous claim, further comprising an analog-to-digital converter (406) configured to convert the sensed input voltage into a digital signal.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry and the second resistor are implemented as an integrated circuit, and wherein the first resistor is external to the integrated circuit.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry comprises
<claim-text>- a first transistor (701) configured to couple the second side of the first resistor to ground;</claim-text>
<claim-text>- a second transistor (711) configured to couple the second resistor to ground;</claim-text>
<claim-text>- an operational amplifier (721) configured to control gates of the first transistor (701) and of the second transistor (711) based on a reference voltage (722) and based on a voltage level at the second side of the first resistor.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A method (800) for providing a sensed input voltage (434) indicative of an input voltage (229), wherein the method (800) comprises
<claim-text>- coupling (801) a first resistor (208) at a first side to the input voltage (229);<!-- EPO <DP n="32"> --></claim-text>
<claim-text>- providing (802) current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio; and</claim-text>
<claim-text>- providing (803) the sensed input voltage (434) using a second resistor (409) which is coupled to the output of the current mirror circuitry.</claim-text></claim-text></claim></claims><amended-claims mxw-id="PCLM90459094" lang="EN" load-source="patent-office" amended-claim-type="EPC"><heading id="h0006">Amended claims in accordance with Rule 137(2) EPC.</heading><claim id="ac-en-0001" num="0001"><claim-text>A measurement circuit (306) configured to provide a sensed input voltage (434) indicative of an input voltage (229), wherein the measurement circuit (306) comprises
<claim-text>- a first resistor (208) which is configured to be coupled at a first side to the input voltage (229);</claim-text>
<claim-text>- current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio; wherein the current mirror ratio is adjustable;</claim-text>
<claim-text>- a second resistor (409) coupled to the output of the current mirror circuitry and configured to provide the sensed input voltage (434), when the input voltage is coupled to the first side of the first resistor;</claim-text>
<claim-text>- an analog-to-digital converter (406) configured to convert the sensed input voltage into a digital signal; wherein the analog-to-digital converter (406) exhibits a pre-determined conversion range; and</claim-text>
<claim-text>- control circuitry configured to
<claim-text>- determine a range of the input voltage; and</claim-text>
<claim-text>- adapt the current mirror ratio in dependence of the determined range of the input voltage, in order to map the determined range of the input voltage to the pre-determined conversion range of the analog-to-digital converter (406).</claim-text></claim-text></claim-text></claim><claim id="ac-en-0002" num="0002"><claim-text>The measurement circuit (306) of claim 1, wherein the current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) comprises a current mirror with an input transistor (411); an output transistor (412); an auxiliary transistor (413); and an auxiliary switch (415); wherein
<claim-text>- the auxiliary transistor (413) is arranged in series with the auxiliary switch (415);</claim-text>
<claim-text>- the serial arrangement of the auxiliary switch (415) and the auxiliary transistor (413) are arranged in parallel to the input transistor (411) or the output transistor (412), when the auxiliary switch (415) is closed; and</claim-text>
<claim-text>- the measurement circuit (306) is configured to control the auxiliary switch (415) to adjust the current mirror ratio.</claim-text></claim-text></claim><claim id="ac-en-0003" num="0003"><claim-text>The measurement circuit (306) of any previous claim, further comprising an offset current source (404) configured to provide an offset current; wherein the input current at the input of the current mirror circuitry is dependent on a current through the first resistor and on the offset current.</claim-text></claim><claim id="ac-en-0004" num="0004"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) comprises
<claim-text>- a first current mirror (411, 412, 413, 415) configured to translate the input current into an intermediate current using a first ratio; and</claim-text>
<claim-text>- a second current mirror (421, 422, 423, 425) configured to translate the intermediate current into the output current using a second ratio; wherein the current mirror ratio depends on the first ratio and on the second ratio.</claim-text></claim-text></claim><claim id="ac-en-0005" num="0005"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry comprises
<claim-text>- an upper current mirror coupled at an input to the second side of the first resistor; wherein the upper current mirror is operated relative to a supply voltage of the measurement circuit; and</claim-text>
<claim-text>- a lower current mirror coupled at an input to the second side of the first resistor; wherein the lower current mirror is operated relative to ground.</claim-text></claim-text></claim><claim id="ac-en-0006" num="0006"><claim-text>The measurement circuit (306) of any previous claim, wherein
<claim-text>- the measurement circuit (306) further comprises a source follower circuit (501, 521) arranged between the second side of the first resistor and the input of the current mirror circuitry; and</claim-text>
<claim-text>- the source follower circuit is configured to set a voltage level of the second side of the first resistor to a pre-determined reference voltage (522).</claim-text></claim-text></claim><claim id="ac-en-0007" num="0007"><claim-text>The measurement circuit (306) of claim 6, wherein the source follower circuit comprises
<claim-text>- a source follower transistor (501) arranged between the second side of the first resistor and the input of the current mirror circuitry; and</claim-text>
<claim-text>- an operational amplifier (521) configured to control a voltage level at a gate of the source follower transistor based on a voltage level at a source of the source follower transistor and based on the reference voltage.</claim-text></claim-text></claim><claim id="ac-en-0008" num="0008"><claim-text>The measurement circuit (306) of any previous claim, further comprising current correction circuitry (609, 611, 621) configured to provide an indication (614) of a voltage drop at the input of the current mirror circuitry.</claim-text></claim><claim id="ac-en-0009" num="0009"><claim-text>The measurement circuit (306) of claim 8, wherein the current correction circuitry comprises
<claim-text>- an operational amplifier (621) with a first input being coupled to the second side of the first resistor;</claim-text>
<claim-text>- a correction transistor (611) with a gate being controlled by an output of the operational amplifier (621);</claim-text>
<claim-text>- a correction resistor (609) coupled to a source of the correction transistor (611) and to a second input of the operation amplifier (621); wherein a drain-source current (614) through the correction transistor (611) provides an indication of the voltage drop at the input of the current mirror circuitry.</claim-text></claim-text></claim><claim id="ac-en-0010" num="0010"><claim-text>The measurement circuit (306) of any of claims 8 to 9, further comprising means for offsetting the sensed input voltage (434) based on the indication (614) of the voltage drop at the input of the current mirror circuitry.</claim-text></claim><claim id="ac-en-0011" num="0011"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry and the second resistor are implemented as an integrated circuit, and wherein the first resistor is external to the integrated circuit.</claim-text></claim><claim id="ac-en-0012" num="0012"><claim-text>The measurement circuit (306) of any previous claim, wherein the current mirror circuitry comprises
<claim-text>- a first transistor (701) configured to couple the second side of the first resistor to ground;</claim-text>
<claim-text>- a second transistor (711) configured to couple the second resistor to ground;</claim-text>
<claim-text>- an operational amplifier (721) configured to control gates of the first transistor (701) and of the second transistor (711) based on a reference voltage (722) and based on a voltage level at the second side of the first resistor.</claim-text></claim-text></claim><claim id="ac-en-0013" num="0013"><claim-text>A method (800) for providing a sensed input voltage (434) indicative of an input voltage (229), wherein the method (800) comprises
<claim-text>- coupling (801) a first resistor (208) at a first side to the input voltage (229);</claim-text>
<claim-text>- determining a range of the input voltage;</claim-text>
<claim-text>- providing (802) current mirror circuitry (411, 412, 413, 415, 421, 422, 423, 425) coupled at an input to a second side of the first resistor, which is opposite to the first side of the first resistor, and configured to translate an input current at the input of the current mirror circuitry into an output current at an output of the current mirror circuitry, such that the output current is proportional to the input current by a current mirror ratio; wherein the current mirror ratio is adjustable;</claim-text>
<claim-text>- providing (803) the sensed input voltage (434) using a second resistor (409) which is coupled to the output of the current mirror circuitry;</claim-text>
<claim-text>- converting the sensed input voltage into a digital signal using an analog-to-digital converter (406); wherein the analog-to-digital converter (406) exhibits a pre-determined conversion range; and</claim-text>
<claim-text>- adapting the current mirror ratio in dependence of the determined range of the input voltage, in order to map the determined range of the input voltage to the pre-determined conversion range of the analog-to-digital converter (406).</claim-text></claim-text></claim></amended-claims><drawings mxw-id="PDW20421833" load-source="patent-office"><!-- EPO <DP n="33"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="105" he="78" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0002" num="2a"><img id="if0002" file="imgf0002.tif" wi="115" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0003" num="2b"><img id="if0003" file="imgf0003.tif" wi="148" he="211" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0004" num="3"><img id="if0004" file="imgf0004.tif" wi="110" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0005" num="4"><img id="if0005" file="imgf0005.tif" wi="130" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0006" num="5"><img id="if0006" file="imgf0006.tif" wi="165" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0007" num="6"><img id="if0007" file="imgf0007.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0008" num="7"><img id="if0008" file="imgf0008.tif" wi="153" he="194" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0009" num="8"><img id="if0009" file="imgf0009.tif" wi="88" he="123" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0010" num="9"><img id="if0010" file="imgf0010.tif" wi="130" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="159" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="159" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
