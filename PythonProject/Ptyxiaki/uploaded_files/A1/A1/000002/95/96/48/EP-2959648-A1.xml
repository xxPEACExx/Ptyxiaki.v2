<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959648-A1" country="EP" doc-number="2959648" kind="A1" date="20151230" family-id="50336361" file-reference-id="306815" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160452528" ucid="EP-2959648-A1"><document-id><country>EP</country><doc-number>2959648</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14711305-A" is-representative="NO"><document-id mxw-id="PAPP193868024" load-source="patent-office" format="original"><country>EP</country><doc-number>14711305.4</doc-number><date>20140203</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193868025" load-source="docdb" format="epo"><country>EP</country><doc-number>14711305</doc-number><kind>A</kind><date>20140203</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028586" ucid="IB-2014058764-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>IB</country><doc-number>2014058764</doc-number><kind>W</kind><date>20140203</date></document-id></priority-claim><priority-claim mxw-id="PPC162029322" ucid="US-201313772240-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201313772240</doc-number><kind>A</kind><date>20130220</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988521518" load-source="docdb">H04L  12/725       20130101AFI20140911BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1987764527" load-source="docdb" scheme="CPC">H04L  69/08        20130101 LI20150806BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987791821" load-source="docdb" scheme="CPC">H04L  45/18        20130101 LI20150806BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987792018" load-source="docdb" scheme="CPC">H04L  45/306       20130101 LI20151026BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987800299" load-source="docdb" scheme="CPC">H04L  45/745       20130101 LI20150806BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987801187" load-source="docdb" scheme="CPC">H04L  41/12        20130101 FI20150806BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165549050" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR MMRP-VERSTÄRKUNG FÜR PROTOKOLLVERNETZUNG</invention-title><invention-title mxw-id="PT165549051" lang="EN" load-source="patent-office">METHOD AND SYSTEM OF ENHANCING MULTIPLE MAC REGISTRATION PROTOCOL (MMRP) FOR PROTOCOL INTERNETWORKING</invention-title><invention-title mxw-id="PT165549052" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME D'AMÉLIORATION DU PROTOCOLE MMRP (MULTIPLE MAC REGISTRATION PROTOCOL) POUR L'INTERCONNEXION DE RÉSEAUX PAR LES PROTOCOLES</invention-title><citations><non-patent-citations><nplcit><text>See references of WO 2014128578A1</text><sources><source mxw-id="PNPL67567834" load-source="docdb" name="SEA"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR1103312218" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ERICSSON TELEFON AB L M</last-name><address><country>SE</country></address></addressbook></applicant><applicant mxw-id="PPAR1103314005" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TELEFONAKTIEBOLAGET L M ERICSSON (PUBL)</last-name></addressbook></applicant><applicant mxw-id="PPAR1101640482" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Telefonaktiebolaget L M Ericsson (publ)</last-name><iid>101537273</iid><address><city>164 83 Stockholm</city><country>SE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103324313" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>Farkas János </last-name><address><country>HU</country></address></addressbook></inventor><inventor mxw-id="PPAR1103338766" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FARKAS, János</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648088" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>FARKAS, János</last-name><address><street>Daróczi köz 9</street><city>H-6000 Kecskemét</city><country>HU</country></address></addressbook></inventor><inventor mxw-id="PPAR1103303756" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>ALLAN DAVID IAN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103306933" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>ALLAN, DAVID IAN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101652192" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>ALLAN, DAVID IAN</last-name><address><street>306 S. 15th Street</street><city>San Jose, California 95112</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342153" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>SALTSIDIS PANAGIOTIS</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103341831" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>SALTSIDIS, PANAGIOTIS</last-name></addressbook></inventor><inventor mxw-id="PPAR1101647056" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>SALTSIDIS, PANAGIOTIS</last-name><address><street>Fatburs Brunnsgata 11</street><city>S-118 28 Stockholm</city><country>SE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101647022" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HOFFMANN EITLE</last-name><iid>100061036</iid><address><street>Patent- und Rechtsanwälte PartmbB Arabellastraße 30</street><city>81925 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="IB-2014058764-W"><document-id><country>IB</country><doc-number>2014058764</doc-number><kind>W</kind><date>20140203</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014128578-A1"><document-id><country>WO</country><doc-number>2014128578</doc-number><kind>A1</kind><date>20140828</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660724930" load-source="docdb">AL</country><country mxw-id="DS660709436" load-source="docdb">AT</country><country mxw-id="DS660703226" load-source="docdb">BE</country><country mxw-id="DS660624713" load-source="docdb">BG</country><country mxw-id="DS660625445" load-source="docdb">CH</country><country mxw-id="DS660703231" load-source="docdb">CY</country><country mxw-id="DS660709437" load-source="docdb">CZ</country><country mxw-id="DS660724948" load-source="docdb">DE</country><country mxw-id="DS660703232" load-source="docdb">DK</country><country mxw-id="DS660703233" load-source="docdb">EE</country><country mxw-id="DS660788725" load-source="docdb">ES</country><country mxw-id="DS660624714" load-source="docdb">FI</country><country mxw-id="DS660625446" load-source="docdb">FR</country><country mxw-id="DS660724949" load-source="docdb">GB</country><country mxw-id="DS660703234" load-source="docdb">GR</country><country mxw-id="DS660724950" load-source="docdb">HR</country><country mxw-id="DS660709438" load-source="docdb">HU</country><country mxw-id="DS660788726" load-source="docdb">IE</country><country mxw-id="DS660703243" load-source="docdb">IS</country><country mxw-id="DS660624723" load-source="docdb">IT</country><country mxw-id="DS660703244" load-source="docdb">LI</country><country mxw-id="DS660624724" load-source="docdb">LT</country><country mxw-id="DS660703163" load-source="docdb">LU</country><country mxw-id="DS660624725" load-source="docdb">LV</country><country mxw-id="DS660624726" load-source="docdb">MC</country><country mxw-id="DS660703164" load-source="docdb">MK</country><country mxw-id="DS660703165" load-source="docdb">MT</country><country mxw-id="DS660624739" load-source="docdb">NL</country><country mxw-id="DS660625455" load-source="docdb">NO</country><country mxw-id="DS660624740" load-source="docdb">PL</country><country mxw-id="DS660788727" load-source="docdb">PT</country><country mxw-id="DS660724964" load-source="docdb">RO</country><country mxw-id="DS660788728" load-source="docdb">RS</country><country mxw-id="DS660624741" load-source="docdb">SE</country><country mxw-id="DS660624009" load-source="docdb">SI</country><country mxw-id="DS660625456" load-source="docdb">SK</country><country mxw-id="DS660625457" load-source="docdb">SM</country><country mxw-id="DS660703245" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139077630" ref-ucid="WO-2014128578-A1" lang="EN" load-source="patent-office"><p num="0000">A method is disclosed to forward Ethernet frames associated with a service instance at a node (a "forwarding node") in a network supporting an implementation of a protocol for creating logical loop-free topologies. The method starts with receiving a number of MMRPDUs at the forwarding node from links in the first network (receiving links), where each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses. Then a service instance identifier (SID) is identified for the service instance and a first set of MAC addresses interested in the service instance is formed. Then a number of MMRPDUs are sent to links associated with the service instance, where each MMRPDU contains a second set of MAC addresses interested in the service instance. The sending may be accompanied by the node installing filtering at the forwarding node accordingly.</p></abstract><abstract mxw-id="PA139544366" ref-ucid="WO-2014128578-A1" lang="EN" source="national office" load-source="docdb"><p>A method is disclosed to forward Ethernet frames associated with a service instance at a node (a "forwarding node") in a network supporting an implementation of a protocol for creating logical loop-free topologies. The method starts with receiving a number of MMRPDUs at the forwarding node from links in the first network (receiving links), where each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses. Then a service instance identifier (SID) is identified for the service instance and a first set of MAC addresses interested in the service instance is formed. Then a number of MMRPDUs are sent to links associated with the service instance, where each MMRPDU contains a second set of MAC addresses interested in the service instance. The sending may be accompanied by the node installing filtering at the forwarding node accordingly.</p></abstract><abstract mxw-id="PA139077631" ref-ucid="WO-2014128578-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention se rapporte à un procédé destiné à l'acheminement par un nœud (un « nœud d'acheminement ») de trames Ethernet associées à une instance de service dans un réseau qui prend en charge une implémentation d'un protocole servant à créer des topologies logiques sans boucle. Ledit procédé comprend tout d'abord la réception par le nœud d'acheminement de plusieurs MMRPDU en provenance de liaisons (des liaisons de réception) au sein du premier réseau, chaque MMRPDU de la première pluralité de MMRPDU contenant une première liste de nœuds intéressés qui inclut un ou plusieurs nœuds intéressés identifiés par des adresses MAC. Ensuite, un identificateur d'instance de service (SID) de l'instance de service est identifié, et un premier ensemble d'adresses MAC intéressées par l'instance de service est formé. Plusieurs MMRPDU sont alors envoyées à des liaisons associées à l'instance de service, chaque MMRPDU contenant un second ensemble d'adresses MAC intéressées par l'instance de service. L'envoi peut être accompagné de l'installation par le nœud d'un filtrage approprié sur le nœud d'acheminement.</p></abstract><abstract mxw-id="PA139544367" ref-ucid="WO-2014128578-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention se rapporte à un procédé destiné à l'acheminement par un nœud (un « nœud d'acheminement ») de trames Ethernet associées à une instance de service dans un réseau qui prend en charge une implémentation d'un protocole servant à créer des topologies logiques sans boucle. Ledit procédé comprend tout d'abord la réception par le nœud d'acheminement de plusieurs MMRPDU en provenance de liaisons (des liaisons de réception) au sein du premier réseau, chaque MMRPDU de la première pluralité de MMRPDU contenant une première liste de nœuds intéressés qui inclut un ou plusieurs nœuds intéressés identifiés par des adresses MAC. Ensuite, un identificateur d'instance de service (SID) de l'instance de service est identifié, et un premier ensemble d'adresses MAC intéressées par l'instance de service est formé. Plusieurs MMRPDU sont alors envoyées à des liaisons associées à l'instance de service, chaque MMRPDU contenant un second ensemble d'adresses MAC intéressées par l'instance de service. L'envoi peut être accompagné de l'installation par le nœud d'un filtrage approprié sur le nœud d'acheminement.</p></abstract><description mxw-id="PDES78477450" ref-ucid="WO-2014128578-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> METHOD AND SYSTEM OF ENHANCING MULTIPLE MAC </p><p id="p0002" num="0002"> REGISTRATION PROTOCOL (MMRP) FOR PROTOCOL </p><p id="p0003" num="0003"> INTERNETWORKING</p><p id="p0004" num="0004">FIELD </p><p id="p0005" num="0005"> The embodiments of the invention are related to the field of frame forwarding in an Ethernet network. More specifically, the embodiments of the invention relate to a method and system for enhancing multiple media access control (MAC) registration protocol (MMRP) for protocol internetworking. </p><p id="p0006" num="0006">BACKGROUND </p><p id="p0007" num="0007"> Today Ethernet is the dominant computer networking technology for local area networks (LANs). As Ethernet gains wide popularity among enterprise, carriers, and cloud service providers, Ethernet architecture has transitioned LAN segments from being implemented as passive shared mediums only to being implemented as actively switched networks. Over the years, numerous protocols have been implemented in actively switched networks for Ethernet frame forwarding. For example, a variety of spanning tree protocols utilizes flood-and-learn schemes, where frame forwarding is carried out largely in a data plane. Later shortest path bridging (SPB) protocol adopts a different approach, where a node in a SPB network contains link states of the network thus frames can be forwarded along a shortest path without resorting to flood-and-learn. As Ethernet is used in more networks, more applications need forward frames across networks supporting different frame forwarding protocols, and internetworking for frame forwarding is a challenge. </p><p id="p0008" num="0008"> Multiple media access control (MAC) registration protocol (MMRP) is an application of multiple registration protocol (MRP), which replaced generic attribute registration protocol (GARP). MMRP operates at the Data Link Layer at the Open Systems Internnection (OSI) model and it registers MAC addresses on network devices in an Ethernet network. MMRP is originally defined in IEEE 802.1ak-2007 and subsequently included in 802.1Q-2011. It replaced the 802. ID based GARP multicast registration protocol (GMRP). MMRP collects information nodes interested in reception of frames destined to a particular MAC address (e.g., a group MAC address), 
<!-- EPO <DP n="3"/>-->
 and frames destined to the particular MAC address within an MMRP compatible network will then be forwarded to all the interested nodes within the network. </p><p id="p0009" num="0009"> As Ethernet grows to become ubiquitous, a frame may go across networks supporting different frame forwarding protocols. An MMRP compatible network needs to be able to forward frames destined to and accept frames sourced from a network that does not support MMRP natively. In other words, MMRP registration information regarding an application needs to be shared with a non-MMRP network. </p><p id="p0010" num="0010"> SUMMARY </p><p id="p0011" num="0011"> A method is disclosed to forward Ethernet frames associated with a service instance at a node (a "forwarding node") in a network supporting an implementation of a protocol for creating logical loop-free topologies. The service instance identifies a service through the first network, where Ethernet frames are forwarded in links associated with the service instance within the first network. Media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol (MMRP), thus nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs). The method starts with receiving a number of MMRPDUs at the forwarding node from links in the first network (receiving links), where each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses. Then a service instance identifier (SID) is identified for the service instance by extracting information from the header of each frame encapsulating an MMRPDU (encapsulating frame) and each MMRPDU itself. Then a first set of MAC addresses interested in the service instance is formed, where the first set of MAC addresses is associated with the forward node and the SID. The method then sends a number of MMRPDUs to links associated with the service instance (transmitting links), where each MMRPDU of the second plurality of MMRPDUs to a transmitting link contains a second set of MAC addresses, the second set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link. The sending may be accompanied by the forwarding node installing filtering such that an Ethernet frame is forwarded at the receiving node to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. 
<!-- EPO <DP n="4"/>-->
 When the forwarding node is at a boundary of the network, where it interconnects with a second network not deploying MMRP, the method may continue with extracting the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses, and then saving the extracted interested nodes and the SID into a control plane database for frame forwarding at the second network based on a protocol compatibility determination at the second network. </p><p id="p0012" num="0012"> A network device serving as a node in a first network supporting an implementation of an enhanced MMRP is disclosed. The network device is configured to forward Ethernet frames associated with a service instance, where the service instance identifies a service through the first network and Ethernet frames are forwarded in links associated with the service instance within the first network. Media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol (MMRP), and nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs), that follow the service instance within the first network. The network device contains a frame interface module configured to receive a number of MMRPDUs from links in the first network (receiving links), where each MMRPDU of the number of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses. The network device also includes a service instance identifier (SID) and frame processor configured to identify a SID for the service instance by extracting information from at least one of: each frame encapsulating an MMRPDU (encapsulating frame), and each MMRPDU itself. The extracted information is stored in a node list database of the network device. The network device also contains an MMRPDU framing module configured to generate a number of MMRPDUs, where the number of MMRPDUs are encapsulated in a set of Ethernet frames. The set of Ethernet frames are sent through the frame interface module to links associated with the service instance (transmitting links). The set of Ethernet frames contains a set of MAC addresses, and the set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link. Note the frame interface module is further configured to install filtering at the node such that an Ethernet frame is forwarded to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. 
<!-- EPO <DP n="5"/>-->
 When the network device is at a boundary between two networks, and where it interconnects with a second network not deploying MMRP, the network device may contain an internetworking module configured to extract the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses. The network device may further contain an internetworking database configured to save the extracted information about interested nodes and the SID for frame forwarding at the second network based on a protocol compatibility determination at the second network. </p><p id="p0013" num="0013">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0014" num="0014"> The present invention is illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings in which like references indicate similar elements. It should be noted that different references to "an" or "one" embodiment in this disclosure are not necessarily to the same embodiment, and such references mean at least one. Further, when a particular feature, structure, or characteristic is described in connection with an embodiment, it is submitted that it is within the knowledge of one skilled in the art to affect such feature, structure, or characteristic in connection with other embodiments whether or not explicitly described. </p><p id="p0015" num="0015"> Figure 1A is a block diagram illustrating one embodiment of a network configuration supporting multiple media access control (MAC) registration protocol (MMRP). </p><p id="p0016" num="0016"> Figure IB is a block diagram illustrating MAC address registration according to one embodiment of MMRP. </p><p id="p0017" num="0017"> Figure 2 is a block diagram illustrating an implementation of an enhanced MMRP implementation according to one embodiment of the invention. </p><p id="p0018" num="0018"> Figure 3 is a flow diagram illustrating an implementation of enhanced MMRP according to one embodiment of the invention. </p><p id="p0019" num="0019"> Figure 4 is a block diagram illustrating a portion of an Ethernet frame encapsulating MMRPDU according to one embodiment of the invention. </p><p id="p0020" num="0020"> Figure 5 is a block diagram illustrating a portion of an Ethernet frame encapsulating MMRPDU according to another embodiment of the invention. 
<!-- EPO <DP n="6"/>-->
 Figure 6 is a block diagram illustrating a network interconnection according to an embodiment of the invention. </p><p id="p0021" num="0021"> Figure 7 is a flow diagram illustrating a method of utilizing information extracted from a boundary node at a network implementing an enhanced MMRP according to one embodiment of the invention. </p><p id="p0022" num="0022"> Figures 8A-C are block diagrams illustrating network interconnections with different frame forwarding schemes according to embodiments of the invention. </p><p id="p0023" num="0023"> Figures 9A-B are block diagrams illustrating internetworking functions with some standard protocol suites according to embodiments of the invention. </p><p id="p0024" num="0024"> Figure 10 is a block diagram illustrating a network device serving as a node implementing enhanced MMRP according to one embodiment of the invention. </p><p id="p0025" num="0025">DETAILED DESCRIPTION </p><p id="p0026" num="0026"> In the following description, numerous specific details are set forth. However, it is understood that embodiments of the invention may be practiced without these specific details. In other instances, well-known circuits, structures and techniques have not been shown in detail in order not to obscure the understanding of this description. It will be appreciated, however, by one skilled in the art that the invention may be practiced without such specific details. Those of ordinary skill in the art, with the included descriptions, will be able to implement appropriate functionality without undue experimentation. </p><p id="p0027" num="0027"> References in the specification to "one embodiment," "an embodiment," "an example embodiment," etc., indicate that the embodiment described may include a particular feature, structure, or characteristic, but every embodiment may not necessarily include the particular feature, structure, or characteristic. Moreover, such phrases are not necessarily referring to the same embodiment. Further, when a particular feature, structure, or characteristic is described in connection with an embodiment, it is submitted that it is within the knowledge of one skilled in the art to effect such feature, structure, or characteristic in connection with other embodiments whether or not explicitly described. </p><p id="p0028" num="0028"> In the following description and claims, the terms "coupled" and "connected," along with their derivatives, may be used. It should be understood that these terms are 
<!-- EPO <DP n="7"/>-->
 not intended as synonyms for each other. "Coupled" is used to indicate that two or more elements, which may or may not be in direct physical or electrical contact with each other, co-operate or interact with each other. "Connected" is used to indicate the establishment of communication between two or more elements that are coupled with each other. </p><p id="p0029" num="0029"> The operations of the flow diagram will be described with reference to the exemplary embodiment of Figure 10. However, it should be understood that the operations of flow diagrams can be performed by embodiments of the invention other than those discussed with reference to Figures 3 and 7, and the embodiments discussed with reference to Figure 10 can perform operations different than those discussed with reference to the flow diagrams of Figures 3 and 7. </p><p id="p0030" num="0030"> As used herein, a network device (e.g., a router, switch, and bridge) is a piece of networking equipment, including hardware and software that communicatively interconnects other equipment on the network (e.g., other network devices, end systems). Some network devices are "multiple services network devices" that provide support for multiple networking functions (e.g., routing, bridging, VLAN (virtual LAN) switching, Layer 2 aggregation, session border control, Quality of Service, and/or subscriber management), and/or provide support for multiple application services (e.g., data, voice, and video). Subscriber end systems (e.g., servers, workstations, laptops, netbooks, palm tops, mobile phones, smartphones, multimedia phones, Voice Over Internet Protocol (VOIP) phones, user equipment, terminals, portable media players, GPS units, gaming systems, set-top boxes) access content/services provided over the Internet and/or content/services provided on virtual private networks (VPNs) overlaid on (e.g., tunneled through) the Internet. The content and/or services are typically provided by one or more end systems (e.g., server end systems) belonging to a service or content provider or end systems participating in a peer to peer service, and may include, for example, public webpages (e.g., free content, store fronts, search services), private webpages (e.g., username/password accessed webpages providing email services), and/or corporate networks over VPNs. Typically, subscriber end systems are coupled (e.g., through customer premise equipment coupled to an access network (wired or wirelessly)) to edge network devices, which are coupled (e.g., through one or more core network devices) to other edge network devices, which are coupled to other 
<!-- EPO <DP n="8"/>-->
 end systems (e.g., server end systems). A network device is generally identified by its media access (MAC) address, Internet protocol (IP) address/subnet, network sockets/ports, and/or upper OSI layer identifiers. </p><p id="p0031" num="0031"> Network devices are commonly separated into a control plane and a data plane (sometimes referred to as a forwarding plane or a media plane). In the case that the network device is a switch/bridge (or is implementing bridge functionality), the control plane typically determines how a frame (e.g., Ethernet frame) is to be forwarded (e.g., the next hop for the frame and the outgoing port for that frame), and the data plane is in charge of forwarding that frame. For example, the control plane typically includes one or more forwarding/routing protocols (e.g., Border Gateway Protocol (BGP), Interior Gateway Protocol(s) (IGP) (e.g., Open Shortest Path First (OSPF), Routing Information Protocol (RIP), Intermediate System to Intermediate System (IS-IS)), Label Distribution Protocol (LDP), Resource Reservation Protocol (RSVP)) that communicate with other network devices to exchange paths and select those paths based on one or more metrics. Note that embodiments of this invention also apply where the control plane and data plane are in separate network devices. </p><p id="p0032" num="0032"> Different embodiments of the invention may be implemented using different combinations of software, firmware, and/or hardware. Thus, the techniques shown in the figures can be implemented using code and data stored and executed on one or more electronic devices (e.g., an end system, a network device). Such electronic devices store and communicate (internally and/or with other electronic devices over a network) code and data using computer-readable media, such as non-transitory computer-readable storage media (e.g., magnetic disks; optical disks; random access memory; read only memory; flash memory devices; phase-change memory) and transitory computer-readable transmission media (e.g., electrical, optical, acoustical or other form of propagated signals - such as carrier waves, infrared signals, digital signals). In addition, such electronic devices typically include a set of one or more processors coupled to one or more other components, such as one or more storage devices (non-transitory machine-readable storage media), user input/output devices (e.g., a keyboard, a touchscreen, and/or a display), and network connections. The coupling of the set of processors and other components is typically through one or more busses and bridges (also termed as bus controllers). Thus, the storage device of a given 
<!-- EPO <DP n="9"/>-->
 electronic device typically stores code and/or data for execution on the set of one or more processors of that electronic device. </p><p id="p0033" num="0033"> Terms </p><p id="p0034" num="0034"> The following terms are used in the description. </p><p id="p0035" num="0035"> Unicast: Sending a frame to a single destination node identified by a unique individual MAC address. </p><p id="p0036" num="0036"> Multicast: Sending a frame to a plurality of destination node simultaneously from a single source node where a unique group MAC address identifies the set of recipients. </p><p id="p0037" num="0037"> Root: A root node (or "root") is the central node (also referred to as the topmost node) of a spanning tree or shortest path tree. In a shortest path tree, for unicast frame forwarding, the root is the destination node; for multicast frame forwarding, the root is the source node. </p><p id="p0038" num="0038"> Service instance (or "Ethernet service instance"): An association of two or more attachment circuits (ACs) over which an Ethernet service is offered to a customer. An AC can be either a user-network interface (UNI) or a network-network interface (NNI). A service instance associated with a frame may be identified through an indication embedded within the frame. </p><p id="p0039" num="0039"> Service instance identifier (SID): Identifying a service instance associated with a frame. A SID may be embedded within a protocol data unit (PDU) of the service instance or a frame encapsulating the PDU of the service instance. </p><p id="p0040" num="0040"> Shortest path bridging - VLAN mode (SPBV): A type of SPB that is VLAN based, i.e., each shortest path tree being defined by a different VLAN Identifier (VID). </p><p id="p0041" num="0041"> Shortest path bridging - MAC mode (SPBM): Another type of SPB in which the shortest path trees are MAC based, i.e., each shortest path tree being identified by a unique MAC address or an abbreviated form of MAC address. VLANs are used to delineate multipath variations. </p><p id="p0042" num="0042"> Equal cost tree (ECT): Sometimes referred to as equal cost multi-tree (ECMT). When multiple equal-cost routes to a root exist, each shortest path tree is an ECT to the root. A node in a SPB network uses specified tie breaking algorithms in the 
<!-- EPO <DP n="10"/>-->
 construction of a specific ECT. An ECT set is identified by an ECT algorithm and VLAN is associated with a unique ECT-algorithm in one embodiment. </p><p id="p0043" num="0043"> Network Configuration and Traditional MMRP Implementation </p><p id="p0044" num="0044"> Figure 1A is a block diagram illustrating one embodiment of a network configuration supporting multiple media access control (MAC) registration protocol (MMRP). Network 100 contains 11 nodes denoted by letters. The 11 nodes are interconnected forming a mesh topology. Each link between two nodes represents a direct connection between the two nodes. Note network 100 is a simplification of an operating Ethernet network. In the real world, an MMRP compatible Ethernet network may scale up to thousands of nodes and provide millions of unique services. Thus, network 100 is used only to illustrate embodiments of frame forwarding within an MMRP network. </p><p id="p0045" num="0045"> Figure IB is a block diagram illustrating MAC address registration according to one embodiment of MMRP. A variety of frame forwarding protocols support MMRP, including spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP), and shortest path bridging (SPB) protocol. In this example, network 100 deploys an implementation of a spanning tree protocol. In network 100, for frame forwarding, redundant paths are disabled thus not shown in Figure IB. For example, the direct link between node A and F in Figure 1A is no longer shown in Figure IB as the path is redundant - in Figure IB, A and F can reach each other through connections A - E - F. The frame forwarding paths shown in Figure IB are bidirectional, thus the "go" and "return" paths between two nodes must be congruent, which is fundamental to traditional Ethernet flood-and-learn data path routing process. </p><p id="p0046" num="0046"> Referring to Figure IB, for MAC address registration for a service instance, a node interested in the service instance issues an MMRP PDU, referred to as multiple MAC registration PDUs (MMRPDUs), following the spanning tree of network 100. Each node receiving the MMRPDUs installs an appropriate filtering for frame forwarding and continues to issue requests to other links (i.e., links other than the one transmitting the MMRPDU) in the spanning tree. In this way, when a node receives MMRP requests for a service instance, it installs filtering to permit frames associated 
<!-- EPO <DP n="11"/>-->
 with the service instance to flow in all directions registering interest of the service instance. </p><p id="p0047" num="0047"> In this example, nodes A, B, and N are interested in a service instance and they are designated with circles around the node identifiers while the other nodes remain being designated with squares in Figure IB. The MMRPDUs are forwarded along the spanning tree. For nodes C, D, and E, the MMRPDUs are received on multiple ports, and these multiple ports are unblocked to allow frames associated with the service instance to be forwarded through. </p><p id="p0048" num="0048"> MMRP registers interests in either multicast addresses or unicast addresses associated with service instances. Frame forwarding per service instance may be denoted as (*, G), which is pronounced star comma G. G is short for group, which is all nodes interested in a service instance (thus forming a group). The star represents all nodes interested in the service instance in the spanning tree. Frame forwarding through a spanning tree of (*, G) is in contrast with frame forwarding through a shortest path tree, denoted as (S, G) (where S is short for source). In a shortest path frame forwarding, the source is the root of the shortest path tree, and multicast/unicast frames interested in a particular service instance are forwarded from the source/root to the interested nodes. </p><p id="p0049" num="0049"> In a traditional MMRP compatible network illustrated in Figure 1, a node does not keep a record of which node is interested in a particular attribute. The node forwards on MMRPDUs it receives and use the information for installing filtering. It does not gather and pass along knowledge about how many nodes are interested in a particular attribute based on received MMRPDUs. For example, referring to Figure IB, node A receives an MMRPDU from node E, and node A knows that node E is interested in the particular attribute. It does not know that nodes further down the tree (nodes B and N in this example) are the actual nodes interested in the particular attribute. In other words, traditional MMRP only registers summarized interests in an attribute associated with a service instance along the spanning tree. </p><p id="p0050" num="0050"> The summarization of registered interest by the traditional MMRP loses source information (thus contains only star comma G information for a given service instance). The "lossy" traditional MMRP presents a challenge in internetworking of an MMRP network and a non-MMRP network. For example, nodes in a spanning tree network (an 
<!-- EPO <DP n="12"/>-->
 MMRP network) and a SPBM network (a non-MMRP network) may be interested in a same attribute within the same service instance and the two networks are interconnected. For the SPBM network to work properly, it needs to know what backbone MAC addresses (B-MACs) and backbone virtual LAN identifier (B-VID) a service instance is associated with when a frame is forwarded from the spanning tree network. Yet, traditional MMRP does not contain the information. </p><p id="p0051" num="0051"> Embodiments of Enhanced MMRP Implementation </p><p id="p0052" num="0052"> Figure 2 is a block diagram illustrating an implementation of an enhanced MMRP implementation according to one embodiment of the invention. Network 200 supports a logical loop-free topology as illustrated (physical links between nodes but not on the logical loop-free topology are not shown). The logical loop-free topology is created through a variety of protocols for frame forwarding, including STP, RSTP, MSTP, and SPB protocols. Note that some proprietary protocols have been implemented in various Ethernet networks and they support MMRP too. Those proprietary protocols may also be benefited from the principle around the enhanced MMRP disclosed herein. </p><p id="p0053" num="0053"> Referring to Figure 2, for MAC address registration for a service instance, a node interested in a MAC address associated with the service instance issues an MMRPDU following the spanning tree of network 200. Each node receiving the MMRPDU installs an appropriate filtering for frame forwarding on the node. In addition, each receiving node identifies the service instance associated with the received MMRPDU, and it forms a set of MAC addresses interested in the service instance from one or more MMRPDUs it receives. The formed set of MAC addresses is the superset of MAC addresses aggregated from one or more MMRPDUs associated with the particular service instance. Then the receiving node issues another set of MMRPDUs to other links (i.e., links other than the one receiving the MMRPDU) in the spanning tree, the other set of MMRPDU includes the superset of MAC addresses associated with the particular service instance in one embodiment. In an alternate embodiment, the other set of MMRPDUs includes the superset of MAC addresses associated with the particular service instance excluding the interested MAC addresses received from the other links - this embodiment reduces the size of MMRPDUs thus preferable in some circumstances. In both embodiments, an enhanced MMRP registers 
<!-- EPO <DP n="13"/>-->
 all MAC addresses interested in a particular service instance and it patches traditional MMRPDUs with source information. </p><p id="p0054" num="0054"> Similar to network 100, network 200 contains 11 nodes and nodes A, B, and N are interested in addresses A, B, N within a service instance and they are designated with circles around the node identifiers while the other nodes remain being designated with squares. The MMRPDUs are forwarded along the spanning tree to all links associated with the service instance while keeping track of MAC addresses interested in the service instance. In Figure 2, the service instance is denoted by "x" and an issued frame for service instance x is denoted by a tuple (S, x), where S denotes the source or sources interested in service instance x. For example, at node E, it receives an MMRPDU of (A, x) at reference 202 and an MMRPDU of (B+N, x) at reference 206. Node E then issues an MMRPDU of (B+N, x) to node A at reference 212 and it issues an MMRPDU of (A, x) to node D at reference 204. Node E does not send over the superset of all received MAC addresses (i.e., A+B+N in this example) to all interested nodes as the superset will make the resulting MMRPDU bigger and take more network transmission and process resources. The other MMRP receiving nodes issue new MMRPDUs similarly to node E and the issued MMRPDUs are illustrated in Figure 2. After all MMRPDUs are processed, each node interested in service instance x knows the full set of MAC addresses interested in service instance x, and they may set frame forwarding filtering accordingly. </p><p id="p0055" num="0055"> The operations in Figure 2 so far focus on interactions among nodes within an MMRP network. For frame forwarding limits within an MMRP network, the gathering of source information of MMRPDUs may not offer extraordinary benefit. Yet the added information is essential for internetworking of the MMRP network with a non MMRP network. Referring to Figure 2, network 200 may optionally interconnect with non-MMRP network 250 at node D (thus node D is a boundary node). The dotted lines denote that the interconnect is optional, and other nodes in network 200 may be an interconnecting node in a different embodiment. </p><p id="p0056" num="0056"> Node Z of non-MMRP network 250 shares interest in service instance x as illustrated at reference 254. The interest of node Z to service instance x may not be expressed in a format understood by MMRP. In this example, the interest of node Z is indicated by a backbone service instance identifier (I-SID) being set to x. At boundary 
<!-- EPO <DP n="14"/>-->
 node D, an internetworking function converts the interest of node Z to a format/protocol understandable by the MMRP network, denoted by (Z, x) at reference 256. With the understood interest of node Z at non-MMRP network 250, node D formulates a superset of MAC addresses interested in group x excluding the transmitting link. The interested group is denoted by (A+B+N, x) at reference 252, and the internetworking function (often referred to as IWF) then may convert the interest in the MMRP network to a format/protocol understandable by non-MMRP network 250. </p><p id="p0057" num="0057"> Thus, with an internetworking function at a boundary node, the enhanced MMRP allows information extraction about nodes interested in a particular service instance in an MMRP network supporting a logical loop-free topology. The boundary node then may save the extracted information from the MMRP in a control plane routing database of a non-MMRP network in a format/protocol understandable by the non-MMRP network, thus frame forwarding over two types of networks becomes operable. </p><p id="p0058" num="0058"> Figure 3 is a flow diagram illustrating an implementation of enhanced MMRP according to one embodiment of the invention. Method 300 can be implemented at a node within a network complying with an implementation of MMRP. The network creates a logical loop-free topology, which may be based on spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP), and shortest path bridging (SPB) protocols. In some embodiments, the deployed STP, RSTP, or MSTP complies with IEEE 802. lah standard. In addition, some Ethernet networks use proprietary protocols to create a logical loop-free topology and they support MMRP for MAC registrations. Those networks may also implement method 300. </p><p id="p0059" num="0059"> Referring to Figure 3, at reference 302, a node receives a number of</p><p id="p0060" num="0060">MMRPDUs at the forwarding node from links in the network (referred to as receiving links). MMRPDU is an MMRP protocol data unit for registration of MAC address for a service instance. Often it is said that MMRPDU is for registering an interest in a multicast group, but the multicast group may contain either a group of MAC addresses (unicast or multicast) or a single MAC address (unicast or multicast). MMRPDU is issued to broadcast a node's interest to a service instance. Each received MMRPDU 
<!-- EPO <DP n="15"/>-->
 contains an interested node list including one or more interested nodes identified by MAC addresses. </p><p id="p0061" num="0061"> Then at reference 304, the node identifies a service instance identifier (SID) for the service instance. The identification may be from the fields within the received MMRPDUs themselves, and it may also be from the Ethernet frames encapsulating the MMRPDUs (referred to as encapsulating frames). In some embodiments, the identification may be based on information from both the PDUs and the encapsulating Ethernet frames. From the MMRPDUs being identified to be associated with a same service instance, a set of MAC addresses interested in the service instance is formed at reference 306. The set of MAC addresses are associated with the SID and stored in the node. Note that the set of MAC addresses is a superset of received MAC addresses that are interested in the specific service instance. In other words, it keeps a record of all the source nodes issuing MMRPDUs for the specific service instance. </p><p id="p0062" num="0062"> Onward to reference 308, the node sends a set of MMRPDUs to links associated with the service instance (transmitting links). The set of MMRPDUs containing a set of MAC addresses are encapsulated in a set of Ethernet frames containing references to the service instance. The set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link. In some embodiments, the references to the service instance are embedded in the MMRPDUs. In alternate embodiments, the set of MAC addresses are stored in the encapsulating frames in a type length value (TLV) field when other protocols are used. </p><p id="p0063" num="0063"> Figure 4 is a block diagram illustrating a portion of an Ethernet frame encapsulating MMRPDU according to one embodiment of the invention. For frame forwarding in a backbone network, the Ethernet frame contains fields for backbone source address (B-SA), backbone destination address (B-DA), and backbone VLAN identifier (B-VID). The Ethernet frame also contains backbone service identifier (I- SID) identifying a service instance the frame is interested in. Furthermore, the Ethernet frame contains fields for customer source address (C-SA) and customer destination address (C-DA). In the encapsulated MMRPDU, it contains the set of MAC addresses (denoted as MAC list in the figure). That is, the set of MAC addresses interested in the service instance is stored in a field of transmitted MMRPDU in this embodiment. 
<!-- EPO <DP n="16"/>-->
 Figure 5 is a block diagram illustrating a portion of an Ethernet frame encapsulating MMRPDU according to another embodiment of the invention. Similar to Figure 4, the Ethernet frame in Figure 5 contains fields for B-SA, B-DA, but not a B- TAG. All the other fields are the same as in Figure 4. </p><p id="p0064" num="0064"> Referring back to Figure 3, note that for reference 308, the set of MAC addresses do not include MAC addresses interested in the service instance when the MAC addresses are received from the transmitting link by the node. In this way, redundant information is not carried in the frame forwarding (as the transmitting link already knows the MAC addresses interested in the service instance it sends out MMRPDU for). It reduces the length of MMRPDU and/or the encapsulating frame. The scheme is akin to "reverse poisoning" of Ethernet frame forwarding where an Ethernet node does not forward a frame back to the port of arrival in frame forwarding to avoid forwarding loops. In an alternate embodiment though, the set of MAC addresses may include all MAC addresses interested in the service instance, regardless of where the interested MAC addresses are received. Even though it takes more transmission and frame processing sources, the alternate embodiment simplifies implementation. </p><p id="p0065" num="0065"> Onward to reference 310, the node installs filtering such that an Ethernet frame is forwarded at the receiving node to its destination if the Ethernet frame is destined to one or more interested nodes identified by the stored set of MAC addresses. </p><p id="p0066" num="0066"> Note that the transmitted MMRPDUs in method 300 may be fragmented into multiple MMRPDUs to comply with a size limit of maximum transmission unit (MTU) of MMRP as defined. </p><p id="p0067" num="0067"> Enhanced MMRP Implementations at Boundary Nodes </p><p id="p0068" num="0068"> As discussed herein above, embodiments of the inventions registers all MAC addresses interested in a particular service instance and it patches traditional MMRPDUs with source information. Yet for frame forwarding limits within as MMRP network, the extra source information of MMRPDUs may not offer extraordinary benefit. The benefit of the extra source information of MMRPDUs is that the information may be used for frame forwarding between an MMRP network and a non- MMRP network. 
<!-- EPO <DP n="17"/>-->
 Figure 6 is a block diagram illustrating a network interconnection according to an embodiment of the invention. Figure 6 illustrates internetworking node 602 interconnects an MMRP network 610 and a non-MMRP network 612. As discussed herein above, an MMRP network is a network utilizing MMRP for registering MAC addresses for a service instance while a non-MMRP does not register MAC addresses for a service instance utilizing MMRP. MMRP network 610 may be a network supporting STP, RSTP, MSTP, or one implementation of SPB protocols (e.g., SPBV). Non-MMRP network 612 may be a network support Ethernet virtual private network (EVPN) protocol, virtual private LAN service (VPLS) protocol, or another implementation of SPB protocol (e.g., SPBM). </p><p id="p0069" num="0069"> Internetworking node 602 is at the boundary between MMRP network 610 and non-MMRP network 612. It contains both MMRP interaction portion and non-MMRP interaction portion. The MMRP interaction portion of receiving and transmitting MMRPDUs and encapsulating frames has been discussed herein above. For non- MMRP interaction portion, it contains an internetworking routing module 620 and internetworking database 622. Internetworking routing module 620 selects itself to represent specific I-SIDs by a criterion (e.g., associated with a B-VID) in one network into two interconnecting networks through a designated forwarder (DF) selection process. Thus through inferring from I-SID at the IWF, internetworking routing module 620 decouples B-VID assignments across networks. Note the internetworking function has been disclosed in a non-provisional U.S. patent application, 13/594,076, entitled "802. laq Support over IETF EVPN" by David Ian Allan, filed on August 24, 2012 (its corresponding provisional U.S. patent application is 61/645,431 with the same title and authorship, filed on May 10, 2012). </p><p id="p0070" num="0070"> At internetwork node 602, an MMRPDU and/or its encapsulating frame are processed, if an extracted service instance from the process is associated with a B-VID that a DF within internetworking routing module 620 is proxy for, internetworking routing module 620 extracts the service instance identifier (e.g., an I-SID) and MAC addresses interested in the service instance identifier and stored in internetworking database 622. Internetworking database 622 may be a frame forwarding database on the control plane, and it may be used for frame forwarding using an implementation of intermediate system - intermediate system (IS-IS) protocol. 
<!-- EPO <DP n="18"/>-->
 Figure 7 is a flow diagram illustrating a method of utilizing information extracted from a boundary node at a network implementing an enhanced MMRP according to one embodiment of the invention. Method 700 is a continuation of method 300, where a set of MAC addresses interested in a service instance is formed and stored, the set of MAC addresses are associated with a service instance identifier identifying the service instance. Method 700 is implemented in a boundary node that interacts with both an MMRP network and a non MMRP network - for example, the bound node may have Ethernet ports facing both an MMRP network and a non MMRP network. </p><p id="p0071" num="0071"> At reference 702, the boundary node extracts information about interested nodes from the stored set of MAC addresses and the SID associated with the stored set of MAC addresses. Then at reference 704, the information about interested nodes and the SID associated with the interested nodes are saved in a control plane database for frame forwarding at an interconnecting network, where the interconnecting network does not use MMRP to register interest to service instances. The saved information may be used for frame forwarding using an IS-IS protocol. Note the either network at the boundary node may support an implementation of SPB protocols, and the implementation of SPB protocols may comply with IEEE 802. laq standard. </p><p id="p0072" num="0072"> Internetworking Utilizing Embodiments of Enhanced MMRP Implementation </p><p id="p0073" num="0073"> The enhanced MMRP embodiment disclosed herein may be used in a variety of internetworking scenario as the extracted registration information for a service instance allows a non-MMRP network translates, maps, or converts to formats/protocols that the non-MMRP network may use for frame forwarding for frames associated with the service instance across its network. The examples herein provide an illustration but by no means exhaustive list of applicable internetworking scenarios. </p><p id="p0074" num="0074"> Figures 8A-C are block diagrams illustrating network interconnections with different frame forwarding schemes according to embodiments of the invention. In Figure 8 A, xSTP network 810 interconnects with SPB network 812 through internetworking node 802. xSTP network 810 can be a network supporting STP, RSTP, or MSTP. In xSTP network 810, MMRP is utilized to register interests in a service instance. xSTP network 810 may comply with IEEE 802. lah standard. SPB network 
<!-- EPO <DP n="19"/>-->
 812 forwards Ethernet frames along shortest path trees and each node within SPB network 812 may contain filtering database (FDB) to guide Ethernet frame forwarding. In other word, each node within SPB network 812 contains a local view of the link state of the network, and it does not need a "flood-and-learn" mechanism for frame forwarding as xSTP network 810 would. </p><p id="p0075" num="0075"> For internetworking between xSTP network 810 and SPB network 812, internetworking node 802 receives an I-TAGed MMRPDU from a port facing xSTP network 810, and extracts the I-SID (identifying a service instance) and associated MAC addresses to save in a control plane database for frame forwarding using an IS-IS protocol for SPB network 812. Node 802 may create SPBM service identifier and unicast sub address TLVs in order to leak the extracted MMRP information into the control plane database for frame forwarding using IS-IS. </p><p id="p0076" num="0076"> At the opposite path, node 802 also originates MMRPDU and encapsulating frames into xSTP network 810 for nodes within SPB network 812, where the nodes are interested in a service instance across xSTP network 810. </p><p id="p0077" num="0077"> In Figure 8B, xSTP network 810 interconnects with EVPN network 814. EVPN network 814 may pass through MMRP information extracted from xSTP network 810. For example, in EVPN network 814, an implementation of border gateway protocol (BGP) may be deployed to pass through the extracted service instances and their associated set of MAC addresses, and the information may be utilized to another network requiring the information for frame forwarding (e.g., a SPBM network), which is illustrated in Figure 8C. The extracted MAC address information has been passed through EVPN network 814. At internetworking node 806, the information is extracted and leaked onto control plane of SPB network 816 for an IS-IS based frame forwarding. </p><p id="p0078" num="0078"> Interconnections illustrated in Figure 8 are for frame forwarding across networks deploying different protocols. These xSTP, SPB, and EVPN networks may follow standard based implementation but they may also use proprietary protocols to simplify protocol implementation or gain competitive advantage. Nevertheless, even for proprietary protocols, the embodiments and principles disclosed for enhancing MMRP apply. 
<!-- EPO <DP n="20"/>-->
 Figures 9A-B are block diagrams illustrating internetworking functions with some standard protocol suites according to embodiments of the invention. Conceptually, internetworking function 900 is implemented for translating, mapping, or converting frames received from one protocol suite to another. In Figure 9A, internetworking function 900 receives a frame complying with IEEE 802. laq protocol suite 912, where in this example the frame indicates interest to a service instance associated with a network complying with IEEE 802. lah protocol suite 914. Internetworking function 900 may originate a MMRPDU and send the MMRPDU to the network complying with IEEE 802. lah protocol suite 914 to announce the interest. The Ethernet frame for the service instance from IEEE 802. laq protocol suite 912 will be passed to the network. </p><p id="p0079" num="0079"> In the reverse direction, Internetworking function 900 receives an MMRPDU and its encapsulating frame complying with IEEE 802. lah protocol suite 912, it extracts the service instance identifier (SID) and the set of MAC addresses associated with the SID. An Ethernet frame goes from the network complying with IEEE 802. lah protocol suite 914 to the network complying with IEEE 802. laq protocol suite 912 may have the OUI overwritten with a source ID of the node implementing internetworking function 900. </p><p id="p0080" num="0080"> Figure 9B illustrates that the internetworking function between different protocol suites may go through networks with pass through only. In Figure 9B, a IEEE 802. laq protocol suite 952 interacts with internetworking function 954, which extract information required to route across networks not supporting IEEE 802. laq. The extracted information may pass through one or more networks, where the one or more networks may perform only a pass through function without processing the extracted information from IEEE 802. laq protocol suite 952. Similarly, in the reverse direction, internetworking function 956 interacts with a networking complying with IEEE 802. lah protocol suite 958. The extracted information may be passed through one or more networks where only pass through function 950 is performed. </p><p id="p0081" num="0081"> Embodiments of Network Devices Implementing Enhanced MMRP </p><p id="p0082" num="0082"> Figure 10 is a block diagram illustrating a network device serving as a node implementing enhanced MMRP according to one embodiment of the invention. In one embodiment, the network device includes a set of one or more line cards/processor 
<!-- EPO <DP n="21"/>-->
 (e.g., frame interface module 1002, MMRPDU framing module 1004), a set of one or more control cards (e.g., SID and frame processor 1020), and optionally a set of one or more service cards (sometimes referred to as resource cards). These cards are coupled together through one or more mechanisms (e.g., a first full mesh coupling the line cards and a second full mesh coupling all of the cards). The set of line cards make up the data plane, while the set of control cards provide the control plane and exchange packets with external network device through the line cards. Note that embodiments of this invention apply where the control plane and data plane are in separate network devices. Not only modules/processors relates to the embodiment are shown for illustration and other modules/processors are required for the node to function properly. </p><p id="p0083" num="0083"> Node 1000 may contain frame interface module 1002 configured to receive MMRPDUs from links in the network (receiving links). Each received MMRPDU may contain an interested node list including one or more interested nodes identified by MAC addresses. Node 1000 also contains a SID processor configured to identify a SID for a service instance. The identification may be performed by extracting information from a received MMRPDU and/or an Ethernet frame encapsulating the received MMRPDU. The extracted information includes both SIDs and a list of MAC addresses interested in the SID. A node list database 1012 within node 1000 is configured to store the extracted list of MAC addresses. Encapsulating frame processor 1006 may also be included within node 1000, it may be utilized to assemble and dissemble encapsulating frames for received MMRPDU. In some embodiments, SID information may be embedded within the encapsulating frame but not in the MMRPDU and encapsulating frame processor 1006 may be configured to perform the function of extracting SID information in these embodiments. Note that various modules can be implemented as a single unit or multiple units can combine two or more units within Node 1000, and these modules can be implemented in software, hardware or a combination thereof. </p><p id="p0084" num="0084"> Node 1000 sends out MMRPDUs and encapsulating Ethernet frames, and MMRPDU framing module 1004 is configured to generate MMRPDUs and encapsulating Ethernet frames. The generated MMRPDUs and encapsulating Ethernet frames are sent through the frame interface module 1002 to links associated with a service instance. The generated MMRPDU contains a set of MAC address which includes MAC addresses interested in a service instance not received from the links. In 
<!-- EPO <DP n="22"/>-->
 some embodiments, the generated MMRPDU contains all MAC addresses interested in the service instance. Note frame interface module is configured to install filtering at the node such that an Ethernet frame is forwarded to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. Node 1000 may be implemented in a network supporting STP, RSTP, MSTP, and SPB protocols. The spanning tree protocols (STP, RSTP, and MSTP) may comply with IEEE 802. lah. </p><p id="p0085" num="0085"> In one embodiment, node 1000 receives MMRPDUs and their encapsulating frames at frame interface module 1002. The received MMRPDUs and their encapsulating frames are forwarded to SID and frame processor 1020 to identify SIDs associated with service instances, along with sets of MAC addresses being associated with the SIDs. The information may be extracted from the encapsulating frames or the MMRPDUs themselves. The identified SIDs and their associated sets of MAC addresses are stored in node list database 1012. Then MMRPDU framing module 1004 generates a set of MMRPDUs and encapsulating frames. The encapsulating frames and MMRPDUs are sent through frame interface module 1002 to links associated with the service instance. Furthermore, the frame interface module 1002 installs filtering at the node such that an Ethernet frame is forwarded to its destination if the Ethernet frame is destined to one or more interested nodes identified by the stored set of MAC addresses. </p><p id="p0086" num="0086"> Node 1000 may be deployed at a boundary of a network supporting MMRP and a second network not supporting MMRP. For node 1000 at the boundary, it may contain an internetworking routing module 1050 and internetworking database 1052. Internetworking routing module 1050 is configured to extract information about the interested nodes from the stored set of MAC addresses and the SID associated with the stored set of MAC addresses. Internetworking database 1052 is configured to save the extracted information about the interested nodes and the SID for frame forwarding at the second network based on a protocol compatibility determination at the second network. The second network may comply with IEEE 802. laq standard. In one embodiment, the second network supports one of EVPN and VPLS protocol. </p><p id="p0087" num="0087"> While the flow diagrams in the figures herein above show a particular order of operations performed by certain embodiments of the invention, it should be understood 
<!-- EPO <DP n="23"/>-->
 that such order is exemplary (e.g., alternative embodiments may perform the operations in a different order, combine certain operations, overlap certain operations, etc.). </p><p id="p0088" num="0088"> While the invention has been described in terms of several embodiments, those skilled in the art will recognize that the invention is not limited to the embodiments described, can be practiced with modification and alteration within the spirit and scope of the appended claims. The description is thus to be regarded as illustrative instead of limiting. 
</p></description><claims mxw-id="PCLM70077722" ref-ucid="WO-2014128578-A1" lang="EN" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="24"/>--><claim-text/><claim-text>CLAIMS </claim-text><claim-text>What is claimed is: </claim-text><claim-text>1. A method to forward Ethernet frames associated with a service instance at a node (a "forwarding node") in a first network supporting an implementation of a protocol for creating logical loop-free topologies, wherein the service instance identifies a service through the first network, wherein Ethernet frames are forwarded in links associated with the service instance within the first network, wherein media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol (MMRP), wherein nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs), that follow the service instance within the first network, the method comprising: receiving (302) a first plurality of MMRPDUs at the forwarding node from links in the first network (receiving links),wherein each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses; </claim-text><claim-text> identifying (304) a service instance identifier (SID) for the service instance by extracting information from at least one of: </claim-text><claim-text> each frame encapsulating an MMRPDU (encapsulating frame) and each MMRPDU itself; </claim-text><claim-text> forming (306) a first set of MAC addresses interested in the service instance, the first set of MAC addresses being associated with the forward node and the SID; </claim-text><claim-text> sending (308) a second plurality of MMRPDUs to links associated with the service instance (transmitting links), wherein the second plurality of MMRPDUs are encapsulated in a set of Ethernet frames identifying the service instance, wherein the set of encapsulated MMRPDUs contains a second set of MAC addresses, the second set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link; and 
<!-- EPO <DP n="25"/>-->
 installing (310) filtering at the forwarding node such that an Ethernet frame is forwarded at the receiving node to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. </claim-text><claim-text>The method of claim 1, wherein the implementation of a protocol for creating logical loop free topologies is one of spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP), and shortest path bridging (SPB) protocol. </claim-text><claim-text>The method of claim 2, wherein the implementation of the one of the spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP) and shortest path bridging (SPB) complies with IEEE 802.1 ah. </claim-text><claim-text>The method of claim 1, wherein the second set of MAC address further includes MAC addresses interested in the service instance received from the transmitting link. </claim-text><claim-text>The method of claim 1, wherein the first set of MAC addresses associated with the forwarding node is contained in a type length value (TLV) field to be attached to a different signaling protocol if the different signaling protocol is used. </claim-text><claim-text>The method of claim 1, wherein a destination address of the Ethernet frame an individual MAC address. </claim-text><claim-text>7. The method of claim 1, wherein a destination address of the Ethernet frame is a group MAC address. 
<!-- EPO <DP n="26"/>-->
</claim-text><claim-text>8. The method of claim 1, wherein the service instance associated with the forwarding node is associated with a backbone service instance identifier (I- SID) identifying the service instance and the encapsulating frame is associated with a backbone service instance tag (I-TAG). </claim-text><claim-text>9. The method of claim 8, wherein the forwarding node is at a boundary between the first network and a second network, wherein a port of the forwarding node faces the second network, the method further comprising: </claim-text><claim-text> extracting (702) information about the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses; and </claim-text><claim-text> saving (704) the extracted information about the interested nodes and the SID into a control plane database for frame forwarding at the second network based on a protocol compatibility determination at the second network. </claim-text><claim-text>10. The method of claim 9, wherein the first network or the second network support an implementation of shortest path bridging (SPB) protocol, and wherein the database is for frame forwarding using an implementation of intermediate system - intermediate system (IS-IS) protocol. </claim-text><claim-text>11. The method of claim 10, wherein the implementation of SPB protocol complies with IEEE 802. laq standard. </claim-text><claim-text>12. The method of claim 9, wherein the second network supports an implementation of Ethernet virtual private network (EVPN) protocol. </claim-text><claim-text>13. The method of claim 9, wherein the second network supports an implementation of virtual private LAN service (VPLS) protocol. 14. The method of claim 1, wherein the MMRPDUs are fragmented to comply with a size limit of maximum transmission unit (MTU) of MMRP. 
<!-- EPO <DP n="27"/>-->
</claim-text><claim-text>15. A network device serving as a node in a first network supporting an implementation of a protocol for creating logical loop-free topologies, the network device configured to forward Ethernet frames associated with a service instance, wherein the service instance identifies a service through the first network, wherein Ethernet frames are forwarded in links associated with the service instance within the first network, wherein media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol (MMRP), wherein nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs), that follow the service instance within the first network, the network device comprising: </claim-text><claim-text> a frame interface module (1002) configured to receive a first plurality of MMRPDUs from links in the first network (receiving links),wherein each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses; </claim-text><claim-text> a service instance identifier (SID) and frame processor (1020) configured to identify a SID for the service instance by extracting information from at least one of: each frame encapsulating an MMRPDU (encapsulating frame) and each MMRPDU itself; </claim-text><claim-text> a node list database (1012) configured to store a first set of MAC addresses interested in the service instance, the first set of MAC addresses being associated with the node and the SID; and </claim-text><claim-text> a MMRPDU framing module (1004) configured to generate a second plurality of MMRPDU, wherein the second plurality of MMRPDUs are encapsulated in a set of Ethernet frames identifying the service instance, wherein the set of Ethernet frames are sent through the frame interface module to links associated with the service instance (transmitting links), wherein the set of encapsulated MMRPDUs contains a second set of MAC addresses, the second set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link, 
<!-- EPO <DP n="28"/>-->
 wherein the frame interface module is further configured to install filtering at the node such that an Ethernet frame is forwarded to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. </claim-text><claim-text>16. The network device of claim 15, wherein the implementation of a protocol for creating logical loop free topologies is one of spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP), and shortest path bridging (SPB) protocol. </claim-text><claim-text>17. The network device of claim 16, wherein the implementation of the one of the spanning tree protocol (STP), rapid spanning tree protocol (RSTP), multiple spanning tree protocol (MSTP) and shortest path bridging (SPB) complies with IEEE 802. lah. </claim-text><claim-text>18. The network device of claim 15, wherein the second set of MAC address further includes MAC addresses interested in the service instance received from the transmitting link. </claim-text><claim-text>19. The network device of claim 15, wherein the first set of MAC addresses associated with the forwarding node is contained in a type length value (TLV) field to be attached to a different signaling protocol if MMRP is not used. </claim-text><claim-text>20. The network device of claim 15, wherein a destination address of the Ethernet frame is an individual MAC address. </claim-text><claim-text>21. The network device of claim 15, wherein a destination address of the Ethernet frame is a group MAC address. 
<!-- EPO <DP n="29"/>-->
</claim-text><claim-text>22. The network device of claim 15, wherein the service instance associated with the forwarding node is associated with a backbone service instance identifier (I- SID) identifying the service instance and the encapsulating frame is associated with a backbone service instance tag (I-TAG). </claim-text><claim-text>23. The network device of claim 15, wherein the network device is at a boundary between the first network and a second network, wherein a port of the forwarding node faces the second network, the network device further comprising: </claim-text><claim-text> internetworking module configured to extract information about the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses; and </claim-text><claim-text> internetworking database configured to save the extracted information about the interested nodes and the SID for frame forwarding at the second network based on a protocol compatibility determination at the second network. </claim-text><claim-text>24. The network device of claim 15, wherein the first network or the second network support an implementation of shortest path bridging (SPB) protocol, and wherein the database is for frame forwarding using an implementation of intermediate system - intermediate system (IS-IS) protocol. </claim-text><claim-text>25. The network device of claim 24, wherein the implementation of SPB protocol complies with IEEE 802. laq standard. </claim-text><claim-text>26. The network device of claim 23, wherein the second network supports an implementation of Ethernet virtual private network (EVPN) protocol. </claim-text><claim-text>27. The network device of claim 23, wherein the second network supports an implementation of virtual private LAN service (VPLS) protocol. </claim-text><claim-text>28. The network device of claim 15, wherein the MMRPDUs are fragmented to comply with a size limit of maximum transmission unit (MTU) of MMRP. 
<!-- EPO <DP n="30"/>-->
</claim-text><claim-text>29. A method to forward Ethernet frames associated with a service instance at a node (a "forwarding node") in a first network supporting an implementation of a protocol for creating logical loop-free topologies, wherein the forwarding node is at a boundary between the first network and a second network, wherein a port of the forwarding node faces the second network, wherein the service instance identifies a service through the first network, wherein Ethernet frames are forwarded in links associated with the service instance within the first network, wherein media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol</claim-text><claim-text>(MMRP), wherein nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs), that follow the service instance within the first network, the method comprising: receiving (302) a first plurality of MMRPDUs at the forwarding node from links in the first network (receiving links),wherein each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses; </claim-text><claim-text> identifying (304) a service instance identifier (SID) for the service instance by extracting information from at least one of: </claim-text><claim-text> each frame encapsulating an MMRPDU (encapsulating frame) and each MMRPDU itself; </claim-text><claim-text> forming (306) a first set of MAC addresses interested in the service instance, the first set of MAC addresses being associated with the forward node and the SID; </claim-text><claim-text> sending (308) a second plurality of MMRPDUs to links associated with the service instance (transmitting links), wherein each MMRPDU of the second plurality of MMRPDUs to a transmitting link contains a second set of MAC addresses, the second set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link; 
<!-- EPO <DP n="31"/>-->
 installing (310) filtering at the forwarding node such that an Ethernet frame is forwarded at the receiving node to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses; </claim-text><claim-text> extracting (702) the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses; and saving (704) the extracted interested nodes and the SID into a control plane database for frame forwarding at the second network based on a protocol compatibility determination at the second network. </claim-text><claim-text>30. A network device serving as a node in a first network supporting an implementation of a protocol for creating logical loop-free topologies, the network device configured to forward Ethernet frames associated with a service instance, wherein the network device is at a boundary between the first network and a second network, wherein a port of the forwarding node faces the second network, wherein the service instance identifies a service through the first network, wherein Ethernet frames are forwarded in links associated with the service instance within the first network, wherein media access control (MAC) address registration with the first network complies with an implementation of multiple MAC registration protocol (MMRP), wherein nodes of the first network with MAC address interests issue MMRP protocol data units (PDUs), multiple MAC registration PDUs (MMRPDUs), that follow the service instance within the first network, the network device comprising: </claim-text><claim-text> a frame interface module (1002) configured to receive a first plurality of MMRPDUs from links in the first network (receiving links),wherein each MMRPDU of the first plurality of MMRPDUs contains a first interested node list including one or more interested nodes identified by MAC addresses; </claim-text><claim-text> a service instance identifier (SID) and frame processor (1020) configured to identify a SID for the service instance by extracting information from at least one of: 
<!-- EPO <DP n="32"/>-->
 each frame encapsulating an MMRPDU (encapsulating frame) and each MMRPDU itself; </claim-text><claim-text>a node list database (1012) configured to store a first set of MAC addresses interested in the service instance, the first set of MAC addresses being associated with the node and the SID; and </claim-text><claim-text>a MMRPDU framing module (1004) configured to generate a second plurality of MMRPDU, the second plurality of MMRPDU being sent through the frame interface module to links associated with the service instance (transmitting links), wherein the second plurality of MMRPDUs are encapsulated in a set of Ethernet frames identifying the service instance, wherein the set of encapsulated MMRPDUs contains a second set of MAC addresses, the second set of MAC addresses includes MAC addresses interested in the service instance not received from the transmitting link; internetworking module (1050) configured to extract the interested nodes from the first set of MAC addresses and the SID associated with the first set of MAC addresses; and </claim-text><claim-text>internetworking database (1052) configured to save the extracted interested nodes and the SID for frame forwarding at the second network based on a protocol compatibility determination at the second network, </claim-text><claim-text> wherein the frame interface module is further configured to install filtering at the forwarding node such that an Ethernet frame is forwarded at the receiving node to its destination if the Ethernet frame is destined to one or more interested nodes identified by the first set of MAC addresses. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
