<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959600-A1" country="EP" doc-number="2959600" kind="A1" date="20151230" family-id="51390478" file-reference-id="313851" date-produced="20180825" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160453484" ucid="EP-2959600-A1"><document-id><country>EP</country><doc-number>2959600</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13875527-A" is-representative="NO"><document-id mxw-id="PAPP193869936" load-source="docdb" format="epo"><country>EP</country><doc-number>13875527</doc-number><kind>A</kind><date>20130222</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193869937" load-source="patent-office" format="original"><country>EP</country><doc-number>13875527.7</doc-number><date>20130222</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162035091" ucid="CN-2013071758-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2013071758</doc-number><kind>W</kind><date>20130222</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1883383581" load-source="docdb">H04J   3/06        20060101AFI20161027BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1705289685" load-source="docdb" scheme="CPC">H04J   3/0667      20130101 LA20180123BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984702587" load-source="docdb" scheme="CPC">H04J   3/0697      20130101 FI20160106BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703153" load-source="docdb" scheme="CPC">H04L   7/0087      20130101 LI20151231BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703258" load-source="docdb" scheme="CPC">H04L   7/0331      20130101 LI20151231BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165551918" lang="DE" load-source="patent-office">ZEITSYNCHRONER EINSTECKBARER SENDER/EMPFÄNGER</invention-title><invention-title mxw-id="PT165551919" lang="EN" load-source="patent-office">TIME SYNCHRONOUS PLUGGABLE TRANSCEIVER</invention-title><invention-title mxw-id="PT165551920" lang="FR" load-source="patent-office">ÉMETTEUR/RÉCEPTEUR ENFICHABLE SYNCHRONE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103313132" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ERICSSON TELEFON AB L M</last-name><address><country>SE</country></address></addressbook></applicant><applicant mxw-id="PPAR1103329075" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TELEFONAKTIEBOLAGET L M ERICSSON (PUBL)</last-name></addressbook></applicant><applicant mxw-id="PPAR1101646143" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Telefonaktiebolaget L M Ericsson (Publ)</last-name><iid>101460901</iid><address><city>164 83 Stockholm</city><country>SE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103336324" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>YANG QINGFENG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103311002" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>YANG, QINGFENG</last-name></addressbook></inventor><inventor mxw-id="PPAR1101647391" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>YANG, QINGFENG</last-name><address><street>China Digital Kingdom Building CDK 2F No. 1 North Road Wang Jing Chao Yang District</street><city>Beijing 100102</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103307271" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>PASIO FRANCESCO</last-name><address><country>IT</country></address></addressbook></inventor><inventor mxw-id="PPAR1103312045" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>PASIO, FRANCESCO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101644959" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>PASIO, FRANCESCO</last-name><address><street>Via Melen 77</street><city>16152 Genova</city><country>IT</country></address></addressbook></inventor><inventor mxw-id="PPAR1103306902" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LEI ZHENDONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103321622" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LEI, Zhendong</last-name></addressbook></inventor><inventor mxw-id="PPAR1101641214" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LEI, Zhendong</last-name><address><street>China Digital Kingdom Building CDK 2F No. 1 North Road Wang Jing Chao Yang District</street><city>Beijing 100102</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103336876" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>RUFFINI STEFANO</last-name><address><country>IT</country></address></addressbook></inventor><inventor mxw-id="PPAR1103323986" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>RUFFINI, STEFANO</last-name></addressbook></inventor><inventor mxw-id="PPAR1101649842" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>RUFFINI, STEFANO</last-name><address><street>Via Moruzzi 1</street><city>I-56100 Pisa</city><country>IT</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101653337" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Stasiewski, Piotr Grzegorz</last-name><iid>100819360</iid><address><street>Ericsson Limited Patent Unit UK Unit 4 Midleton Gate Guildford Business Park</street><city>Guildford, Surrey GU2 8SG</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2013071758-W"><document-id><country>CN</country><doc-number>2013071758</doc-number><kind>W</kind><date>20130222</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014127519-A1"><document-id><country>WO</country><doc-number>2014127519</doc-number><kind>A1</kind><date>20140828</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660641558" load-source="docdb">AL</country><country mxw-id="DS660638862" load-source="docdb">AT</country><country mxw-id="DS660641567" load-source="docdb">BE</country><country mxw-id="DS660728746" load-source="docdb">BG</country><country mxw-id="DS660720578" load-source="docdb">CH</country><country mxw-id="DS660641568" load-source="docdb">CY</country><country mxw-id="DS660793487" load-source="docdb">CZ</country><country mxw-id="DS660718384" load-source="docdb">DE</country><country mxw-id="DS660641569" load-source="docdb">DK</country><country mxw-id="DS660641570" load-source="docdb">EE</country><country mxw-id="DS660751466" load-source="docdb">ES</country><country mxw-id="DS660728751" load-source="docdb">FI</country><country mxw-id="DS660728752" load-source="docdb">FR</country><country mxw-id="DS660718385" load-source="docdb">GB</country><country mxw-id="DS660641575" load-source="docdb">GR</country><country mxw-id="DS660718386" load-source="docdb">HR</country><country mxw-id="DS660793488" load-source="docdb">HU</country><country mxw-id="DS660720587" load-source="docdb">IE</country><country mxw-id="DS660641576" load-source="docdb">IS</country><country mxw-id="DS660728753" load-source="docdb">IT</country><country mxw-id="DS660641577" load-source="docdb">LI</country><country mxw-id="DS660718391" load-source="docdb">LT</country><country mxw-id="DS660638871" load-source="docdb">LU</country><country mxw-id="DS660728754" load-source="docdb">LV</country><country mxw-id="DS660718392" load-source="docdb">MC</country><country mxw-id="DS660638872" load-source="docdb">MK</country><country mxw-id="DS660638873" load-source="docdb">MT</country><country mxw-id="DS660641578" load-source="docdb">NL</country><country mxw-id="DS660718394" load-source="docdb">NO</country><country mxw-id="DS660641583" load-source="docdb">PL</country><country mxw-id="DS660728767" load-source="docdb">PT</country><country mxw-id="DS660793489" load-source="docdb">RO</country><country mxw-id="DS660728768" load-source="docdb">RS</country><country mxw-id="DS660641584" load-source="docdb">SE</country><country mxw-id="DS660720588" load-source="docdb">SI</country><country mxw-id="DS660718399" load-source="docdb">SK</country><country mxw-id="DS660718400" load-source="docdb">SM</country><country mxw-id="DS660638874" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139081280" ref-ucid="WO-2014127519-A1" lang="EN" load-source="patent-office"><p num="0000">A pluggable transceiver module (200) comprising a line receiver (208) connected to a unit interface transmitter (202), a line transmitter (206) connected to a unit interface receiver (204) and a timestamp counter (210) adapted to generate counter values based on clock signals received from an external source and to send the counter values to the line transmitter (206) and to the line receiver (208). The line transmitter (206) and the line receiver (208) are adapted to associate timing packets in a stream of data packets transmitted and received by the pluggable transceiver module (200) with counter values output by the timestamp counter (210).</p></abstract><abstract mxw-id="PA139547627" ref-ucid="WO-2014127519-A1" lang="EN" source="national office" load-source="docdb"><p>A pluggable transceiver module (200) comprising a line receiver (208) connected to a unit interface transmitter (202), a line transmitter (206) connected to a unit interface receiver (204) and a timestamp counter (210) adapted to generate counter values based on clock signals received from an external source and to send the counter values to the line transmitter (206) and to the line receiver (208). The line transmitter (206) and the line receiver (208) are adapted to associate timing packets in a stream of data packets transmitted and received by the pluggable transceiver module (200) with counter values output by the timestamp counter (210).</p></abstract><abstract mxw-id="PA139081281" ref-ucid="WO-2014127519-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention concerne un module émetteur/récepteur (200) comprenant un récepteur de ligne (208) connecté à une interface d'émission d'unité (202), un émetteur de ligne (206) connecté à une interface de réception d'unité (204) et un compteur horodateur (210) conçu pour générer des valeurs de compteur en se basant sur les signaux d'horloge reçus depuis une source externe et envoyer les valeurs de compteur vers l'émetteur de ligne (206) et vers le récepteur de ligne (208). L'émetteur de ligne (206) et le récepteur de ligne (208) sont conçus pour associer des paquets de synchronisation d'un flux de paquets de données émis et reçu par le module d'émetteur/récepteur enfichable (200) à des valeurs de compteur délivrées par le compteur horodateur (210).</p></abstract><abstract mxw-id="PA139547628" ref-ucid="WO-2014127519-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention concerne un module émetteur/récepteur (200) comprenant un récepteur de ligne (208) connecté à une interface d'émission d'unité (202), un émetteur de ligne (206) connecté à une interface de réception d'unité (204) et un compteur horodateur (210) conçu pour générer des valeurs de compteur en se basant sur les signaux d'horloge reçus depuis une source externe et envoyer les valeurs de compteur vers l'émetteur de ligne (206) et vers le récepteur de ligne (208). L'émetteur de ligne (206) et le récepteur de ligne (208) sont conçus pour associer des paquets de synchronisation d'un flux de paquets de données émis et reçu par le module d'émetteur/récepteur enfichable (200) à des valeurs de compteur délivrées par le compteur horodateur (210).</p></abstract><description mxw-id="PDES78478564" ref-ucid="WO-2014127519-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> TIME SYNCHRONOUS PLUGGABLE TRANSCEIVER </p><p id="p0002" num="0002">Technical Field </p><p id="p0003" num="0003"> The present invention relates to synchronisation in a pluggable transceiver module, in general, and in particular to time synchronisation in a small form- factor pluggable transceiver module. </p><p id="p0004" num="0004">Background </p><p id="p0005" num="0005"> Backhaul networks connect core network with smaller edge networks, or network elements. In mobile communications networks an example of a backhaul network (mobile backhaul) is a network connecting wireless base stations to their corresponding base station controllers. Using Ethernet for implementing these backhaul networks is becoming ever more popular solution. </p><p id="p0006" num="0006">Connecting Ethernet links to network devices (e.g. Ethernet switches) can be done via a Small Form-factor Pluggable (SFP) transceiver. Ethernet exists in both optical and electrical formats and SFPs that are present on the market support either electrical or optical Ethernet. Small Form-factor Pluggable transceivers give the flexibility of connecting to network devices electrical or optical Ethernet by using correct SFP, without any change to the network device itself. At one end a SFP comprises an interface for connecting the SFP to a motherboard of a network device, or host device, (e.g. switch). This end is commonly known as unit side. At the other end, also known as line side, the SFP comprises electro- mechanically standardised RJ45 socket for connecting electrical Ethernet cable. If the SFP supports optical Ethernet then instead of RJ45 socket a corresponding optical connector is present. Introduction of SFPs for electrical Ethernet has led to inclusion of an Ethernet PHY (physical layer) into the SFP to pre-process the standard electrical Ethernet signals to the point where they become sufficiently similar to electrical signals converted from optical Ethernet signals. This allows for using identical post processing electronics. 
<!-- EPO <DP n="4"/>-->
 To use Ethernet in mobile backhaul effectively it is necessary to maintain time and frequency synchronisation. The most popular time and frequency synchronisation technologies for Ethernet currently are Precision Time Protocol (PTP) defined in IEEE 1588 standard and synchronous Ethernet (SyncE) as specified in ITU-T Rec. G.8261, ITU-T Rec. G.8262 and ITU-T Rec. G.8264 standards. </p><p id="p0007" num="0007">However, introduction of the processing of Ethernet signals at physical layer in SFPs compromises the Synchronous Ethernet (SyncE) clock chain affecting IEEE 1588 standard performance due to long intra-node path before/after timestamp for </p><p id="p0008" num="0008">ingress/egress messages. </p><p id="p0009" num="0009">Summary </p><p id="p0010" num="0010"> It is the object of the present invention to obviate at least some of the above disadvantages and provide an improved a pluggable transceiver module and a method of time synchronisation in the pluggable transceiver module. </p><p id="p0011" num="0011">Accordingly, the invention seeks to preferably mitigate, alleviate or eliminate one or more of the disadvantages mentioned above singly or in any combination. </p><p id="p0012" num="0012">According to a first aspect of the present invention there is provided a pluggable transceiver module comprising a line receiver connected to a unit interface transmitter and a line transmitter connected to a unit interface receiver. The pluggable transceiver module also comprises a timestamp counter adapted to generate counter values based on clock signals received from an external source and to send the counter values to the line transmitter and to the line receiver. The line transmitter and the line receiver are adapted to associate timing packets in a stream of data packets transmitted and received by the pluggable transceiver module with counter values output by the timestamp counter. 
<!-- EPO <DP n="5"/>-->
 According to a second aspect of the present invention there is provided a pluggable transceiver module comprising a unit interface receiver connected to a line transmitter. The unit interface receiver comprises a first clock and data recovery unit connected to a first jitter attenuator unit. Said first jitter attenuator unit is further connected to the line transmitter. The pluggable transceiver module further comprises a line receiver connected to a unit interface transmitter. The line receiver comprises a second clock and data recovery unit connected to a second jitter attenuator unit. Said second jitter attenuator unit is further connected to the unit interface transmitter. The first and second jitter attenuator units are adapted to reduce jitter in clock signals recovered by corresponding clock and data recovery units and to send output clock signals to the corresponding unit interface transmitter and line transmitter. </p><p id="p0013" num="0013">According to a third aspect of the present invention there is provided a method of synchronising time in a pluggable transceiver module comprising generating in the pluggable transceiver module a counter value based on timing signals received from an external source. The method further comprises sending the counter value to a line receiver and a line transmitter of the pluggable transceiver module and associating timing packets received from and transmitted to a network with received counter values. According to a sixth aspect of the present invention there is provided a method of synchronising time in a pluggable transceiver module. The method comprises generating in the pluggable transceiver module a counter value based on data representative of time of day information, a first clock signal and a second clock signal, wherein the first and second clock signals are received from an external source. The method further comprises sending the counter value to a line receiver and a line transmitter of the pluggable transceiver module and associating timing packets received from and transmitted to a network with received counter values. 
<!-- EPO <DP n="6"/>-->
 According to a fourth aspect of the present invention there is provided a method of recovering Synchronous Ethernet timing in a pluggable transceiver module. The method comprises recovering clock signals from incoming packets in a receiver of the pluggable transceiver module and reducing jitter in said clock signals. The clock signals with reduced jitter are sent to a transmitter of the pluggable transceiver module. The method further comprises using the clock signals with reduced jitter as the reference clocks by the transmitter for Synchronous Ethernet packet transmission. </p><p id="p0014" num="0014">According to a fifth aspect of the present invention there is provided a pluggable transceiver module comprising a unit interface transmitter and a unit interface receiver as well as a line transmitter and a line receiver. The pluggable transceiver module also comprises a non-volatile memory adapted to receive time of day information from an external source and a timestamp counter having an output connected to the line transmitter and to the line receiver. The timestamp counter further comprises a first input for receiving data representative of the time of day information from the nonvolatile memory, a second input for receiving a first clock signal and a third input for receiving a second clock signal. The timestamp counter is adapted to use the first clock signal to generate a counter value and the second clock signal is used to trigger alignment of the counter value with the data representative of the time of day information received from the non- volatile memory. The line transmitter and the line receiver are adapted to associate timing packets with counter values output by the timestamp counter. </p><p id="p0015" num="0015">According to a sixth aspect of the present invention there is provided a method of synchronising time in a pluggable transceiver module. The method comprises generating in the pluggable transceiver module a counter value based on data representative of time of day information, a first clock signal and a second clock signal, wherein the first and second clock signals are received from an external source. The method further comprises sending the counter value to a line receiver and a line 
<!-- EPO <DP n="7"/>-->
 transmitter of the pluggable transceiver module and associating timing packets received from and transmitted to a network with received counter values. </p><p id="p0016" num="0016">Further features of the present invention are as claimed in the dependent claims. </p><p id="p0017" num="0017">Brief description of the drawings </p><p id="p0018" num="0018"> The present invention will be understood and appreciated more fully from the following detailed description taken in conjunction with the drawings in which: FIG. 1 is a diagram illustrating a known pluggable transceiver module; </p><p id="p0019" num="0019">FIG. 2 - FIG. 8 illustrate a pluggable transceiver module in various </p><p id="p0020" num="0020">embodiments of the present invention; FIG. 9 is a diagram illustrating a printed circuit board of the unit side interface of a pluggable transceiver module in one embodiment of the present invention; </p><p id="p0021" num="0021">FIG. 10 is a diagram illustrating a jitter attenuator module in one embodiment of the present invention; </p><p id="p0022" num="0022">FIG. 11 is a diagram illustrating a clock and data recovery unit in one embodiment of the present invention; </p><p id="p0023" num="0023">FIG. 12 is a diagram illustrating a pluggable transceiver module connected to a host device in one embodiment of the present invention; </p><p id="p0024" num="0024">FIG. 13 - FIG. 15 illustrate a method of synchronising time in a pluggable transceiver module in various embodiments of the present invention; 
<!-- EPO <DP n="8"/>-->
 FIG. 16 illustrates a method of recovering Synchronous Ethernet timing in a pluggable transceiver module in one embodiment of the present invention. </p><p id="p0025" num="0025">Detailed description </p><p id="p0026" num="0026"> For the sake of brevity references to Ethernet below refer to electrical Ethernet unless optical Ethernet is specifically mentioned. </p><p id="p0027" num="0027">As discussed earlier, processing of Ethernet signals at physical layer in electrical Ethernet SFPs disrupts Synchronous Ethernet (SyncE) clock chain. This situation is illustrated in Fig. 1, which depicts a basic diagram of a known electrical Ethernet SFP. </p><p id="p0028" num="0028">Pre-processing at physical layer (PHY) in a SFP, this part of the electronics on the printed circuit board of the SFP is marked as 102, has resulted in non-availability of recovered SyncE timing to the near Ethernet line card at the host device of the SFP in the receiving direction. As illustrated in Fig. 1 electrical Ethernet frames 122 arrive at the SFP 100 via RJ45 socket 116. These electrical Ethernet frames 122 carry SyncE timing denoted here as 118. Although the electrical Ethernet frames 122 are propagated through the electronics (line receiver 108 and unit interface transmitter 106) the SyncE timing is interrupted at the line receiver 108. A local oscillator works as internal local reference clock 112 of the PHY and is used to generate timing for the signal 122 transmitted from the unit interface transmitter 106 to the near Ethernet line card. </p><p id="p0029" num="0029">Further, the known solution is not capable of conveying high quality, node locked transmitting SyncE timing 124 to a remote Ethernet line card, i.e. in the opposite direction. Again, the root cause is that local oscillator works as internal local reference clock 112 of the PHY rather than the SyncE timing 124. Ethernet signal 128 traverses the SFP 100 going via unit interface receiver 104, line transmitter 110 and the RJ45 socket 116. The SyncE timing 124 initially received from the unit (e.g. Ethernet switch) is terminated at the unit interface receiver 104. 
<!-- EPO <DP n="9"/>-->
 Using Ethernet for mobile backhaul (MBH) is becoming a popular solution. With increased transmission speed introducing time and frequency synchronisation (timing) for Ethernet tends to be more critical. IEEE1588 is currently the most popular packet based time synch technology. IEEE 1588 is based on exchanging packet timestamp, so it is easy to implement and deploy. But stability of time sync </p><p id="p0030" num="0030">performance is always the weak point for this packet based technology. In practice, the key factor affecting IEEE 1588 time sync performance is the timestamp point. The inventors have realised that to make the Precision Time Protocol, PTP, work well, the timestamp ought to be generated as near as possible to the Line interface, both for the incoming packets and for the outgoing ones. So the SFP is the most ideal point to generate PTP timestamp. With reference to Fig. 2 a pluggable transceiver module 200 in embodiment of the present invention is presented. The pluggable transceiver module 200 comprises a unit interface transmitter 202 and a unit interface receiver 204 on a unit side of the pluggable transceiver module. This side is connected to the hosting unit circuitry, e.g. switch, packet processor, network processor. The module 200 also has a line transmitter 206 and a line receiver 208 on a line side of the pluggable transceiver module. The line side is the side of the module 200 where an Ethernet cable is connected. In a preferred embodiment an RJ45 214 socket is located on the line side for connecting Ethernet cable. An internal wiring connects the RJ45 socket 214 to the line transmitter 206 and line receiver 208 located in physical layer electronics circuitry 250. </p><p id="p0031" num="0031">To address the problem of stability of time sync performance based on applying timestamp to packets/frames needing an accurate estimation of their arrival/departure (e.g. IEEE 1588 packets or ITU-T Y.1731/IEEE 802.1ag OAM Ethernet frames) the pluggable transceiver module 200 also comprises a timestamp counter 210, which is 
<!-- EPO <DP n="10"/>-->
 adapted to generate a counter value that is fed to the line transmitter 206 and the line receiver 208. The timestamp counter is very stable and precise thanks to timing sources it uses to generate the counter value. </p><p id="p0032" num="0032">In addition to the timestamp counter the module 200 comprises a non-volatile memory 212 adapted to receive configuration information, including time of day information, TOD, from an external source. In one embodiment Electrically Erasable Programmable Read-Only Memory (EEPROM) is used as the non- volatile memory 212, but other alternatives can also be used. In a preferred embodiment the time of day data is received by the EEPROM 212 via an I<sup>2</sup>C (Inter-Integrated Circuit) interface, which is especially beneficial in the case of a Small Form Factor Pluggable module because the TOD data can be provided by a CPU (central processing unit) 1202 resided on the host device 1200. The CPU 1202 of the host device 1200 comprises an I<sup>2</sup>C interface and using it to deliver the TOD data to the SFP is straightforward because SFP standards have already standardized the interface to an internal EEPROM for exchanging configuration info between the SFP and the CPU. </p><p id="p0033" num="0033">In the embodiment illustrated in Fig. 2 the physical layer electronics circuitry 250 comprises the line transmitter and receiver 206 and 208 and the unit interface transmitter and receiver 202 and 204 whereas the non- volatile memory 212 and timestamp counter 210 are implemented as separate modules. </p><p id="p0034" num="0034">The timestamp counter 210 further comprises a first input 216 for receiving data representative of the time of day information from the EEPROM memory 212, a second input, Pin 7, for receiving a first clock signal, PTP CLK, and a third input, Pin 9, for receiving a second clock signal, PTP lHz. </p><p id="p0035" num="0035">The timestamp counter, 210, is adapted to use the first clock signal, PTP CLK, to generate a counter value and the second clock signal, PTP lHz, is used to trigger 
<!-- EPO <DP n="11"/>-->
 alignment of the counter value with the data representative of the time of day </p><p id="p0036" num="0036">information received from the EEPROM memory 212. The first clock signal, PTP CLK, ensures that the Timestamp Counter, 210, runs at the right speed whereas the second clock signal, PTP lHz, provides the phase of the counter, i.e. the second clock signal, PTP lHz, aligns the beginning of each second with the beginning of the reference time, i.e. time of day. Given that, it still remains undetermined what is the second that it is beginning when there is the PTP lHz transition (e.g. date + time: 2013.02.04.14.17.45), and this information is provided by the management plane (e.g. the CPU 1202 on the motherboard of the host device 1200) via the I<sup>2</sup>C interface by writing this date and time (with one second resolution) into a text marker inside the EEPROM memory 212 of the SFP 200. Then the rising edge of the second clock signal, PTP lHz, will trigger timestamp counter to load the time data from EEPROM to the timestamp counter 210. </p><p id="p0037" num="0037">When the counter value is generated based on the three timing signals and sent out to the line transmitter 206 and the line receiver 208, the line transmitter 206 and the line receiver 208 associate PTP packets received from and transmitted to a network based on the counter values output by the timestamp counter 210. PTP packets carry timing information in accordance with IEEE 1588. However, in alternative embodiments of this invention updating packet also covers situation that the stream of packets includes timing information different from IEEE 1588 or does not include any </p><p id="p0038" num="0038">timestamps and only after passing through the SFP in one embodiment of this invention the timestamps are applied. </p><p id="p0039" num="0039">In one embodiment the association of a timing packet with a counter value output by the timestamp counter comprises updating or modifying the timing packet by inserting the counter value into the timing packet itself. In an alternative embodiment the timing packet is not modified and the counter value that is associated with this timing packet is sent separately (in a follow-up packet). 
<!-- EPO <DP n="12"/>-->
 In a preferred embodiment the first clock signal, PTP CLK is a signal from a standard PTP clock as defined in IEEE1588 operating at 125MHz. The second clock signal, PTP lHz, which is the phase signal used to trigger the timestamp counter 210 to load the time data from EEPROM to the timestamp counter 210, the second clock operates at IHz. Although the examples given above refer to implementing IEEE 1588 synchronisation based on standard IEEE 1588 clocks it would be clear for a person skilled in the art that the frequencies of the clocks can be different from the examples given above. </p><p id="p0040" num="0040">The timestamp counter, 210, is a counter that increases its value after each cycle, with each tick of the PTP CLK 125MHz clock signal, for IEEE1588 implementation. Alignment of the counter value with TOD is performed with IHz frequency and this is triggered by the rising edge of the PTP lHz signal. The counter values are used as timestamps that are inserted into PTP packets. </p><p id="p0041" num="0041">Preferably a full version of the timestamp is used which is 80 bits in total and can be represented as follows: YY:MM:DD:HH:MM:SS:mm:uu:nn, where </p><p id="p0042" num="0042"> YY - year; SS - second; </p><p id="p0043" num="0043"> MM - month; mm - millisecond; </p><p id="p0044" num="0044"> DD - day; uu - microsecond; </p><p id="p0045" num="0045"> HH - hour; nn - nanosecond. </p><p id="p0046" num="0046"> MM - minute; </p><p id="p0047" num="0047">TOD contains only the bits till the "Second" bit (SS). In this preferred embodiment (full version of the timestamp) the timestamp is 80 bits long and comprises TOD + counter value. </p><p id="p0048" num="0048">In an embodiment illustrated in Fig. 3 the line transmitter 206 of the pluggable transceiver module 200 comprises an first identifier module 302 adapted to identify 
<!-- EPO <DP n="13"/>-->
 timing packets and a first modifier module 304 adapted to update the identified timing packets with timestamps based on information received from the timestamp counter 210 and send the packets for onward transmission towards the line side interface. When a data packet (or Ethernet frame as the data packet is called when on an Ethernet link) is received at the line transmitter 206 and traverses through a first Start Of Frame (SOF) module 350, a first FIFO (First In First Out) module 352 and the first modifier module 304 before it is transmitted via the RJ45 socket 214. The SOF, FIFO and modifier modules are known from prior Small Form Factor Pluggable modules. In order to implement an embodiment of the present invention the first SOF module 350 sends copies of the received Ethernet frames to the first identifier module 302 and forwards the Ethernet frames to the first FIFO module 352 from where the frames after queuing in a first-in-first-out fashion are forwarded to the first modifier module 304. Using information in the frame the first identifier module 302 identifies packets carrying timing information (e.g. PTP or OAM packets) and instructs the first modifier module 304 to update timing information in the identified timing packets using timestamp received from the timestamp counter 210. In operation, a timing packet is received in the first modifier module 304 and when this happens the first identifier module 302 sends a timestamp to the first modifier module 304 which applies the timestamp and sends the timing packet via the RJ45 interface. </p><p id="p0049" num="0049">Similarly, the line receiver 208 of the pluggable transceiver module 200 comprises a second identifier module 306 adapted to identify timing packets and a second modifier module 308 adapted to update the identified timing packets with timestamps based on information received from the timestamp counter 210 and send the packets for onward transmission towards the unit side interface. Operation of the second identifier module 306, second modifier module 308 as well as a second SOF module 354 and a second FIFO module 356 are the same as discussed above in the context of the line transmitter 206. The difference is that in the case of line receiver 208 the Ethernet signals flow from the line side towards the unit side. 
<!-- EPO <DP n="14"/>-->
 IEEE 1588 standard specifies two modes of the synchronisation process: 1-step and 2-step modes. In the 2-step-mode a master clock cyclically sends a synchronisation message with an estimated value of the time to connected slave clocks. Simultaneously the time at which the synchronisation message is sent is determined and recorded as precisely as possible. The master clock then sends this actual transmission time of the </p><p id="p0050" num="0050">synchronisation message to the slave clocks in a follow-up message. A slave clock measures the reception time of the synchronisation message and the follow-up message and can calculates the offset to the master from it. </p><p id="p0051" num="0051">In the 1-step mode the master clock cyclically sends a synchronisation message with precise time to the connected slave, the time inserted into the synchronisation message is the actual time of sending the synchronisation message and it is inserted into the synchronisation message "on-the-fly" by the hardware. There is no follow-up message in 1-step mode. Calculation of the offset is done similarly to the 2-step mode. </p><p id="p0052" num="0052">More details about the IEEE 1588 synchronisation can be found in the standard itself. </p><p id="p0053" num="0053">An embodiment for implementing synchronisation using 1-step or 2 step mode is illustrated in Fig. 4. For the 1-step mode the elements illustrated with dashed lines and connections and signals to and from the dashed elements should be ignored. </p><p id="p0054" num="0054">In an embodiment implementing the 1 -step mode each one of the first and second identifier modules 302 and 306 comprises a detector module, a time stamp module and a regulator module. In particular the first identifier module 302 comprises a first detector module 312 connected to the first SOF module 350. The first detector 
<!-- EPO <DP n="15"/>-->
 module 312 operating on data packets flowing from the unit side towards the line side identifies timing packets and produces a trigger at detection of a timing packet. The trigger is sent to a first timestamp module 324 and to a first regulator module. The first timestamp module 324 generates a timestamp at said trigger from the first detector module 312 and based on information received from the timestamp counter 210. The timestamp counter 210 is connected to the first timestamp module 322. The first regulator module 320 at said trigger received from the first detector module 312 obtains the timestamp from the first timestamp module 324 and a message header information of an identified timing packet. The first regulator module 320 sends said timestamp and said header information to the first modifier module 304. Having the message header information the first modifier 304 can easily identify the right packet and modify this packet with the timestamp received with said message header information from the first regulator module 320. Similar operations are performed in the second identifier module 306 but on data packets flowing from the line side towards the unit side. The second identifier module 306 comprises a second detector module 310 connected to the second SOF module 354. The second detector module 310 identifies timing packets and produces a trigger at detection of a timing packet, which trigger is then sent to a second timestamp module 322 and to a second regulator module 318. The second timestamp module 322, when triggered by the second detector module 310 generates a timestamp based on information received from the timestamp counter 210. In one embodiment generating a timestamp means that in the stream of counter values received from the timestamp counter 210 a counter value current at the time of the trigger is selected. In other word, the trigger causes making a snapshot of the rolling values of the counter and the value of the counter captured by the snapshot is the timestamp. The timestamp counter 210 is also connected to the second timestamp module 322. The second regulator module 318 at said trigger received from the second detector module 310 obtains the timestamp from the second timestamp module 322 and a message header information of an 
<!-- EPO <DP n="16"/>-->
 identified timing packet from the second detector module 310. The second regulator module 318 sends said timestamp and said header information to the second modifier module 308. Similarly to the first modifier module, the second modifier 308 having the message header information identifies the right packet and modifies this packet with the timestamp received with said message header information from the second regulator module 318. </p><p id="p0055" num="0055">In an additional embodiment the dashed elements and lines and signals to and from these dashed elements in Fig. 4 are added to implement operation in the 2-step mode. In this additional embodiment the first identifier module 302 comprises a first handler module 316 connected to the first timestamp module 324. The second identifier module 306 comprises a second handler module 314 connected to the second timestamp module 322. Both the first handler module 316 and the second handler module 314 are connected to the second modifier module 308 in the second identifier module 306 of the line receiver 208. </p><p id="p0056" num="0056">The first handler module 316 collects timestamp from its connected first timestamp module 324 at the time when the first detector module 312 triggers it after a timing packet is detected (PTP packet in the case of IEEE 1588). There are two embodiments allowing for implementation of the 2-step mode. In the first embodiment, the first handler module 316 stores the timestamp and sends it to EEPROM 212, and a CPU (central processing unit) 1202 polls the EEPROM 212 via I2C to obtain this timestamp information. In the second embodiment the first handler module 316 generates a loop-back packet with this timestamp information inserted and sends it to the second modifier 308 to be sent to precision time protocol (PTP) stack on the CPU 1202. </p><p id="p0057" num="0057">In the 2-step mode a timing packet (PTP packet for IEEE 1588) is detected, timestamp generated for this timing packet, but instead of being inserted to said timing 
<!-- EPO <DP n="17"/>-->
 packet the timestamp is stored in the first handler 316. The timing packet is sent to the slave clock at the far end unmodified (it is the synchronisation message) and then a follow-up message is generated by PTP stack on the CPU 1202 containing the timestamp and an identifier of the timing packet with witch the timestamp is associated. In one embodiment message header information of the timing packet can be used as the identifier. Both synchronisation and follow-up messages are then used in the far end slave clock to calculate the offset. </p><p id="p0058" num="0058">In a preferred embodiment the CPU 1202 is installed on the motherboard of the host device. Fig. 12 illustrates in great simplification the pluggable transceiver module 200 connected to a host device 1200. The host device and its components are not part of this invention and will not be described here. However, their functions will be readily understandable for a person skilled in the art. Preferably the pluggable transceiver module 200 is implemented a small form- factor pluggable (SFP) module. The advantage of implementing this invention as a SFP module is that thanks to standardised interfaces it can be used with a large number of switches and other network elements already supporting SFP modules. For the existing SFP/SFP+/Electrical SFP module, there are two optional pins: pin 7 and pin 9. In other word, these two pins can be defined by user for specific function. In embodiments of the present invention these two pins are used to convey the time reference. The high quality first clock signal PTP CLK used to drive the timestamp counter to generate timestamp data is delivered through pin 7. The second clock signal, PTP lHz used to trigger the timestamp counter calibrating its time is delivered through pin 9. In this way the accurate time reference from a central system source, in one embodiment the IEEE1588 chip, is transmitted into SFP and drives the timestamp counter to function. In an alternative embodiment the reverse assignment of the clock signals to the pins is possible. At the same time the existing I<sup>2</sup>C interface can 
<!-- EPO <DP n="18"/>-->
 be used to deliver the TOD signal, pins 4 and 5 are used in the existing SFP/SFP+/Electrical SFP modules for the I<sup>2</sup>C interface. </p><p id="p0059" num="0059">By using these two pins, the high quality, PTP recovered clock and 1PPS signal can be transmitted into SFP as accurate time reference. Then the SFP is able to include the time synch function. </p><p id="p0060" num="0060">The pin description of a Time Synchronous Electrical SFP according to an embodiment of the present invention is presented in table 1. Elements in italic indicate the new functions of pins 7 and 9: </p><p id="p0061" num="0061">Table 1 </p><p id="p0062" num="0062"><img id="imgf000018_0001" he="126" wi="148" file="imgf000018_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0063" num="0063"> Furthermore it is advantageous that the present invention is backward compatible with known SFP solutions. There is an EEPROM inside the Electrical SFP, 
<!-- EPO <DP n="19"/>-->
 with 128 registers. In one embodiment a new extra register, address 96, is used to enable the time synchronisation function and select pin 7 and pin 9 as time reference. Bit 0 of register 96 controls the selecting. </p><p id="p0064" num="0064">In one embodiment the host device can configure this register through the two wire serial ID interface, i.e. I<sup>2</sup>C interface connected through pin 4 and pin 5. In one embodiment of the present invention the default value of bit 0 of register 96 is 1 to select the first clock signal, PTP CLK, from pin 7, and the second clock signal, PTP lHz, from pin 9 as time reference. After power up, the host device can change this register to select to enable pin 7 and pin 9 as time reference or not, which depends on whether this is a Time Synchronous Electrical Ethernet SFP or not. In this way the host devices can accept and operate with devices according to embodiments of the present invention (i.e. Time Synchronous Pluggable Transceiver) as well as with legacy SFPs that do not support solutions based on this invention. </p><p id="p0065" num="0065">The definition of new added register 96 for time reference enable is shown in table 2. </p><p id="p0066" num="0066">Table 2 </p><p id="p0067" num="0067"><img id="imgf000019_0001" he="64" wi="151" file="imgf000019_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0068" num="0068">The Time Synchronous Pluggable Transceiver according to embodiments of the present invention functions in almost the same way as the existing SFP, except for the 
<!-- EPO <DP n="20"/>-->
 ability to select the time reference and enable time synch function and/or SyncE function. In consequence the Time Synchronous Pluggable Transceiver can be used as an alternative for the existing electrical SFP when the host configures the register to select the time reference clock from pin 7 and pin 9. </p><p id="p0069" num="0069">Accurate time of day (TOD) data is firstly saved into a register in EEPROM via the I<sup>2</sup>C interface. The time of day information is a 48 bits long and in one embodiment the EEPROM reserved registers 60-62 and 92-94 can be used to store them. In one embodiment register 60-62 is the high 24 bits of the time of date data and register 92-94 is the low 24 bits of the time of date data. In alternative embodiment the reverse is also possible. As described earlier the second clock signal, PTP lHz, rising edge triggers timestamp counter 210 to load the time data from the EEPROM 212 in the process of generating the timestamp. Table 3 defines the addresses of the EEPROM 212 in one embodiment of the present invention. </p><p id="p0070" num="0070">Table 3 
<!-- EPO <DP n="21"/>-->
 Field </p><p id="p0071" num="0071"> Data Name of </p><p id="p0072" num="0072">Address Size field Description of field </p><p id="p0073" num="0073"> (Bytes) </p><p id="p0074" num="0074"> BASE SO FIELDS </p><p id="p0075" num="0075"> 0 1 identifier Type of serial transceiver (see Table 3.2) </p><p id="p0076" num="0076"> 1 1 Ext. identifier Extended identifier of type of serial transceiver </p><p id="p0077" num="0077"> 2 1 Connector Code for connector type (see Table 33) </p><p id="p0078" num="0078"> 3-10 e Transceiver Code tor electronic compatibility or optical compatibility </p><p id="p0079" num="0079"> {see Tsfcte 3.4) </p><p id="p0080" num="0080"> 11 1 Encoding Code for serial encoding aSgoni m (see Tabie 3.5)</p><p id="p0081" num="0081"> 2 1 BR, Nomina! Nominal bit rate, units of 100 Bits se</p><p id="p0082" num="0082"> 3 1 Reserved </p><p id="p0083" num="0083"> 14 1 LengthOmj - km Link length supported for 9/125 mm fiber units of km</p><p id="p0084" num="0084"> 5 1 Lengtti (9m) Link length supported for 9/125 ma fiber, unite of 100 m </p><p id="p0085" num="0085"> 16 1 Length (50m) Link lengtti supported for 50/125 mm fiber, units of 10 m </p><p id="p0086" num="0086"> 17 1 Length {82.5m} Link length supported for 62,5/125 mm fiber, units of 10 m </p><p id="p0087" num="0087"> 18 1 Length {Copper} Link length supported for<sup>'</sup> copper, units of meters </p><p id="p0088" num="0088"> 19 1 Reserved </p><p id="p0089" num="0089"> 2Q-35 16 Vendor name SFP transceiver vendor name (ASCII) </p><p id="p0090" num="0090"> 36 1 Reserved </p><p id="p0091" num="0091"> 37-39 3 Vendor OU! SFP transceiver vendor IEEE company ID </p><p id="p0092" num="0092"> 40-55 16 Vendor PM Part number provided by SFP transceiver vendor (ASCII) </p><p id="p0093" num="0093"> 56-59 4 Vendor rev Revision level for part number provided by vendor (ASCII) </p><p id="p0094" num="0094"> 60-62 3 ToO_data_l First 24 bits of the time of date data </p><p id="p0095" num="0095"> 63 1 CC_BASE Check code for Base ID Fields (addresses 0 to 62) </p><p id="p0096" num="0096"> EXTENDED !D FIELDS </p><p id="p0097" num="0097"> 64-65 2 Options indicates which optional SFP signals are implemented </p><p id="p0098" num="0098"> (see Tabie 3.6} </p><p id="p0099" num="0099"> 86 1 BR. max Upper bit rate margin, units of % </p><p id="p0100" num="0100"> 67 1 BR, roin Lower bit rale margin, units of % </p><p id="p0101" num="0101"> 68-83 16 Vendor SN Serial number provided by verxfor (ASCII) </p><p id="p0102" num="0102"> 84-9? 8 Date code Vendor's manufacturing date code (see Table 3.7) </p><p id="p0103" num="0103"> 92-94 3 ToD_da¾_2 Last 24 bits of the time of data<sup>,</sup> data </p><p id="p0104" num="0104"> 95 1 CC_EXT Check code for the Extended fD Fields (addresses 64 to 94} </p><p id="p0105" num="0105"> VENDOR SPECiFSC ID F!ELDS </p><p id="p0106" num="0106"> 1 Ref_Tirne._set seiect trie time reference for the SFP </p><p id="p0107" num="0107"> 97-127 31 Read-on !y Vendor specie data, read only </p><p id="p0108" num="0108">Time synchronisation path 502 inside the SFP based on IEEE 1588 packets (or OAM packets) in accordance with embodiments of the present invention is shown in Fig. 5. Line 504 illustrates the loop-back in 2-step mode. </p><p id="p0109" num="0109">PTP is a packet based Layer2/Layer3 time distribution function. And to make the PTP slave locked to its master fast and its local clock stable, the timestamp ought to be generated as close as possible to the wire at both sides. So the SFP is the most ideal 
<!-- EPO <DP n="22"/>-->
 place to generate PTP timestamp. The embodiments of the present invention allow the SFP to generate most accurate timestamps through a time reference made available by an external circuitry of the host device/equipment. In addition to IEEE 1588, the timestamp function in various embodiments of the present invention can also support OAM 1-way and 2-way delay measurement, e.g. MPLS OAM, Ethernet Service OAM. </p><p id="p0110" num="0110">Fig. 6 shows an embodiment of a pluggable transceiver module 400 that enables synchronous Ethernet (SyncE) operation. In one embodiment the PHY closest to the customer traffic path produces the extracted receiver clock and also uses a high quality, node locked, transmit clock in the transmit direction. Embedding the receiver clock and transmit clock into the Tx / Rx data streams in a pluggable transceiver module is very convenient and has minimised system impact. </p><p id="p0111" num="0111">In synchronous Ethernet the SyncE timing is embedded in the incoming data. </p><p id="p0112" num="0112">In one embodiment the pluggable transceiver module 400 comprises a unit interface receiver 404 on a unit side connected to a line transmitter 406 on a line side of the pluggable transceiver module. The unit interface receiver 404 comprising a first clock and data recovery unit (CDR) 410 connected to a first jitter attenuator unit 414. The first jitter attenuator unit 414 is connected to the line transmitter 406. In operation, the CDR 410 recovers the clock from the incoming data and the jitter attenuator 414 reduces the jitter from the recovered clock and outputs a high quality clock signal. This high quality recovered clock is used as the reference clocks by the line transmitter 406. </p><p id="p0113" num="0113">In the opposite direction, a line receiver 408 on the line side of the pluggable transceiver module is connected to a unit interface transmitter 402 on the unit side of the pluggable transceiver module. The line receiver 408 comprises a second clock and data 
<!-- EPO <DP n="23"/>-->
 recovery unit 412 connected to a second jitter attenuator unit 416. The second jitter attenuator unit 416 is further connected to the unit interface transmitter 402. The operation of the chain: receiver - CDR - jitter attenuator - transmitter is the same in both directions. The transmitters, either on unit side or line side, use this high quality recovered clock to be the reference clock for Synch Ethernet packet transmission. </p><p id="p0114" num="0114">SyncE timing path 702 inside an SFP is depicted in Fig. 7; it is continuous, which means that it exchanges the SyncE timing between the unit side and line side successfully. This allows the SFP to meet the SyncE requirements. </p><p id="p0115" num="0115">In a preferred embodiment the first and second jitter attenuators 414 and 416 based on a phased locked loop, PLL. </p><p id="p0116" num="0116">One embodiment of a clock and data recovery CDR module 412 is illustrated in Fig. 11. The CDR 412 extracts embedded clock information and data from an incoming data stream. In one embodiment the clock and data recovery module 412 is </p><p id="p0117" num="0117">implemented as a phase locked loop, PLL, similarly as the jitter attenuator 414, 416. The CDR 412 comprises a first phase detector 1102 receiving as one input incoming data stream and a clock signal produced by a first voltage controlled oscillator 1108. The first phase detector 1102 detects if data transmission occurred within a current sample period and produces a phase error output signal as well as data output (its is the same data as the incoming data, but filtered in the phase detector). This retimed data is propagated across the pluggable module 400 to the transmitter 402, 406. The electrical phase error signal output by the first phase detector 1102 is proportional to phase difference between the clock signal produced by the first VCO 1108 and the clock signal present in the incoming data stream. A charge pump 1104 receives the phase error signal from the first phase detector and is connected to a first low pass filter 1106. The charge pump 1104 working with the first low pass filter 1 106 attenuate jitter. The first low pass filter 1106 produces a tuning electrical signal to control the first voltage controlled oscillator 1108. Output of the first voltage control oscillator 1108 is looped back to the first phase detector 1102. Eventually the frequency and phase of the signal 
<!-- EPO <DP n="24"/>-->
 generated by the first VCO 1108 is the same as the clock in the incoming data stream and the first VCO 1108 is "locked" in the sense that the tuning voltage from the first low pass filter 1106 does not change the frequency or phase of the first VCO 1108. By forming a closed-loop system and using negative feedback, the loop ensures that the input frequency equals the reference frequency and also that the phase of these two signals are fixed with respect to each other. Part of the signal generated by the first VCO 1108 is taped and fed to the jitter attenuator 414, 416. </p><p id="p0118" num="0118">One embodiment of a jitter attenuator, 414, 416, based on a PLL is illustrated in Fig. 10. Phase detector 1002 detects phase error between two clock inputs. One clock input Fig. 10 is the clock extracted by the CDR 410, 412 from the incoming data stream. The other input is a clock signal generated by the voltage controlled oscillator (VCO) 1006. The phase detector 1002 generates an electrical signal depending on phase error (or phase difference between the clock signal the VCO 1006 produces and the clock extracted by the CDR 412 from the incoming data stream). This electrical signal is then fed to a low pass filter 1004. The low pass filter 1004 removes any remaining high frequency noise to produce a tuning voltage to the VCO. The VCO output is looped back to the phase detector via an optional divider 1008. Eventually the frequency and phase of the signal generated by the VCO 1006 is the same as the clock extracted by the CDR from the incoming data stream (i.e. reference clock) and the VCO 1006 is </p><p id="p0119" num="0119"> "locked" in the sense that the tuning voltage from the low pass filter does not change the frequency or phase of the VCO. Part of the signal generated by the VCO 1006 is taped and fed to the transmitter 402 in the pluggable transceiver module 400. In consequence the VCO 1006 clock signal is the same as the one extracted by the CDR, 410, 412 from the incoming data stream, but without the jitter because it is generated anew. </p><p id="p0120" num="0120">The difference of these two phase locked loops is jitter performance. The recovered clock output from CDR 410, 412 does not meet the requirement of Sync and an PLL operating as a jitter attenuator is used. The CDR 410, 412 lock quickly, but the jitter performance is below that of the jitter attenuator 414, 416. The PLL in the jitter attenuator 414, 416 has lower bandwidth and longer lock time, compared with the CDR, but can reduce the jitter more. 
<!-- EPO <DP n="25"/>-->
 In fact jitter can never be removed completely, it can only be reduced. But the low pass filter can filter out the jitter. The bandwidth and damping factor, and other parameter of a low pass filter will affect the jitter attenuator performance. Therefore two different PLLs (CDR 412 and jitter attenuator 416) are preferably used for different applications. Eventually, after the clock signal passed through both PLLs the clock signal meets the requirements of SyncE. </p><p id="p0121" num="0121">In a preferred embodiment illustrated in Fig. 8 the pluggable transceiver module, e.g. a SFP, combines solutions disclosed in embodiments addressing IEEE1588 and SyncE time and frequency synchronisation. The embodiment combines the precise timestamp counter 210 producing timestamps used to calculate offset at the slave clock as described earlier and jitter attenuation in recovered clocks to enable SyncE across a the pluggable transceiver module. </p><p id="p0122" num="0122">Fig. 9 illustrates one embodiment of a printed circuit board of the unit side interface that enables backward compatibility with existing SFP solutions. It is pin to pin compatible with the existing SFP. </p><p id="p0123" num="0123">It will be appreciated by those skilled in the art that the present invention is advantageous over prior art solutions in that it is a truly flexible electrical PTP and/or SyncE design. In particular, in the case of SFP transceivers by using existing interface it is possible to design and manufacture SFP transceivers that are backward compatible with existing host devices and allow for implementing solutions requiring time synchronous Ethernet. Compared to the transceiver illustrated in Fig. 1 the present invention in its various embodiments does not require the local clock 112 because in embodiments related to the SyncE illustrated in Fig. 6, 7 and 8 the jitter attenuator removes/reduces jitter in the timing signal recovered at their respective receivers and feeds this timing to its corresponding transmitters. In consequence the timing is not 
<!-- EPO <DP n="26"/>-->
 interrupted at PHY. Similarly, in the embodiments related to PTP illustrated in Fig. 2 - 5 and 8 the timestamp counter using the external timing signals locally generates counter values used for PTP packets and because it is based on high precision PTP clock from the unit there is no need for local oscillator generating timing pulses. </p><p id="p0124" num="0124">One embodiment of a method of synchronising time in a pluggable transceiver module 200 is illustrated in Fig. 13. The method, implemented in a pluggable transceiver as disclosed in embodiments discussed above and illustrated in figures 2 - 12 comprises generating 1304 in the pluggable transceiver module 200 a counter value, which is based on data representative of time of day information, TOD, a first clock signal, PTP CLK, and a second clock signal, PTP lHz. The first and second clock signals are received from an external source. In a preferred embodiment the first clock signal, PTP CLK, is used to generate a counter value whereas the second clock signal, PTP lHz, is used to trigger alignment of the counter value with the data representative of the time of day information. The TOD information is received by the pluggable module from the CPU (central processing unit) 1202 resided on the host device 1200 and stored in EEPROM memory 212 and then, from the EEPROM memory 212 it is obtained for use in the generation of the counter values. The first clock signal, </p><p id="p0125" num="0125">PTP CLK, ensures that the Timestamp Counter, 210, generatin the counter runs at the right speed whereas the second clock signal, PTP lHz, provides the phase of the counter, i.e. the second clock signal, PTP lHz, aligns the beginning of each second with the beginning of the reference time, i.e. time of day, TOD. The method further comprises sending 1306 the counter value to a line receiver and a line transmitter of the pluggable transceiver module 200. In the line receiver and the line transmitter a step of associating 1308 timing packets received from and transmitted to a network with the received counter values is performed. </p><p id="p0126" num="0126">Preferably, as illustrated in Fig. 14, the step of associating comprises identifying 1410 timing packets in a stream of packets sent to and received from the network. These 
<!-- EPO <DP n="27"/>-->
 timing packets can be, for example PTP packets according to IEEE 1588 or ITU-T Y.1731/IEEE 802. lag OAM Ethernet frames. </p><p id="p0127" num="0127">In one embodiment, (the 2-step mode described earlier), the timing packets are identified and the method comprises associating 1414 these identified timing packets with timestamps based on the received counter values. The association is realised by producing a follow-up packet that includes the timestamp whereas the timing packet is not modified. The timing packet and the follow-up packet are sent separately. In an alternative embodiment, (1-step mode), the step of associating comprises updating 1416 the timing packets based on the received counter values. In this embodiment the association of a timing packet with the counter value comprises updating, or modifying, the timing packet by inserting the counter value into the timing packet itself. </p><p id="p0128" num="0128">Fig. 15 depicts yet another embodiment of the method of synchronising time in a pluggable transceiver module 200. In this embodiment detection of a timing packet 1514 triggers generating of a timestamp 1516 based on the received counter values and sending said timestamp and message header information 1518 of the identified timing packet to a modifier module. In one embodiment generating a timestamp means that in the stream of counter values a counter value current at the time of the trigger is selected. In other word, the trigger (detection of a timing packet) causes making a snapshot of the rolling values of the counter and the value of the counter captured by the snapshot is the timestamp. If the method operates in 1-step mode the embodiment of the method further comprises updating 1416 at the modifier module the timing packet based on the received message header information and using the received timestamp. </p><p id="p0129" num="0129">Alternatively, in the 2-step mode the method comprises sending 1520 said timestamp and message header information of the identified timing packet to a 
<!-- EPO <DP n="28"/>-->
 processor unit which generates 1414 the follow-up message based on the message header information and the timestamp. </p><p id="p0130" num="0130">Figure 16 illustrates an embodiment of a method of recovering Synchronous Ethernet timing in a pluggable transceiver module 400. The method comprises recovering 1602 clock signals from incoming packets in a receiver of the pluggable transceiver module 400 and reducing 1604 jitter in said clock signals. The clock signals are then sent 1606 with reduced jitter to a transmitter of the pluggable transceiver module 400. The transmitter uses 1608 the clock signals with reduced jitter as the reference clocks for Synchronous Ethernet packet transmission. 
</p></description><claims mxw-id="PCLM70078853" ref-ucid="WO-2014127519-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="29"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A pluggable transceiver module comprising: </claim-text><claim-text> - a line receiver connected to a unit interface transmitter; </claim-text><claim-text> - a line transmitter connected to a unit interface receiver; </claim-text><claim-text> - a timestamp counter adapted to generate counter values based on clock signals received from an external source and to send the counter values to the line transmitter and to the line receiver, wherein the line transmitter and the line receiver are adapted to associate timing packets in a stream of data packets transmitted and received by the pluggable transceiver module with counter values output by the timestamp counter. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. A pluggable transceiver module according to claim 1, further comprising: </claim-text><claim-text> - a non- volatile memory adapted to receive time of day information from an external source; wherein </claim-text><claim-text> - the timestamp counter further comprising: </claim-text><claim-text> - a first input for receiving data representative of the time of day information from the non-volatile memory; </claim-text><claim-text> - a second input for receiving a first clock signal; </claim-text><claim-text> - a third input for receiving a second clock signal, </claim-text><claim-text>wherein the timestamp counter is adapted to use the first clock signal to generate a counter value and the second clock signal is used to trigger alignment of the counter value with the data representative of the time of day information received from the non- volatile memory. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The pluggable transceiver module according to claim 1 or claim 2, wherein the line transmitter comprises a first identifier module and a first modifier module, and the line receiver comprises a second identifier module and a second modifier module, wherein the first and second identifier modules are adapted to identify timing packets and the first and second modifier modules are adapted to update the identified timing packets with timestamps based on information received from the timestamp counter. 
<!-- EPO <DP n="30"/>-->
</claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The pluggable transceiver module according to claim 3, wherein the first identifier module comprises: </claim-text><claim-text> - a first detector module adapted to identify timing packets and to produce a trigger at detection of a timing packet; </claim-text><claim-text> - a first timestamp module adapted to generate a timestamp at said trigger from the first detector module and based on information received from the timestamp counter; </claim-text><claim-text> - a first regulator module at said trigger of the first detector module adapted to obtain the timestamp from the first timestamp module and a message header information of an identified timing packet and to send said timestamp and said header information to the first modifier module; and </claim-text><claim-text>wherein the second identifier module comprises: </claim-text><claim-text> - a second detector module adapted to identify timing packets and to produce a trigger at detection of a timing packet; </claim-text><claim-text> - a second timestamp module adapted to generate a timestamp at said trigger from the second detector module and based on information received from the timestamp counter; </claim-text><claim-text> - a second regulator module at said trigger of the second detector module adapted to obtain the timestamp from the second timestamp module and a message header information of an identified timing packet and to send said timestamp and said header information to the second modifier module. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The pluggable transceiver module according to claim 4, wherein the first identifier module comprises a first handler module connected to the first timestamp module and the second identifier module comprises a second handler module connected to the second timestamp module, wherein the first handler module and the second handler module are both connected to the second modifier module. 
<!-- EPO <DP n="31"/>-->
</claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The pluggable transceiver module according to any one of claims 1 - 5 comprising a small form-factor pluggable, SFP, module. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The pluggable transceiver module according to any one of claims 1 - 6, wherein the first clock signal is a 125MHz clock signal. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The pluggable transceiver module according to any one of claims 1 - 7, wherein the second clock signal is a lHz clock signal. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The pluggable transceiver module according to any one of claims 1 - 8, wherein the first clock signal defines the speed the timestamp counter run, whilst the second clock signal provides a phase of the timestamp counter to align beginning of each second with the beginning of the reference time. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. A pluggable transceiver module comprising : </claim-text><claim-text> - a unit interface receiver connected to a line transmitter, the unit interface receiver comprising a first clock and data recovery unit connected to a first jitter attenuator unit; said first jitter attenuator unit is further connected to the line transmitter; </claim-text><claim-text> - a line receiver connected to a unit interface transmitter, the line receiver comprising a second clock and data recovery unit connected to a second jitter attenuator unit; said second jitter attenuator unit is further connected to the unit interface transmitter; </claim-text><claim-text>wherein the first and second jitter attenuator units are adapted to reduce jitter in clock signals recovered by corresponding clock and data recovery units and to send output clock signals to the corresponding unit interface transmitter and line transmitter. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The pluggable transceiver module according to claim 10 comprising a small form- factor pluggable, SFP, module. 
<!-- EPO <DP n="32"/>-->
</claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The pluggable transceiver module according to claim 10 or claim 11 wherein each one of the first jitter attenuator and the second jitter attenuator comprise a phased locked loop circuit. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. A method of synchronising time in a pluggable transceiver module comprising: </claim-text><claim-text> - generating in the pluggable transceiver module a counter value based on timing signals received from an external source; </claim-text><claim-text> - sending the counter value to a line receiver and a line transmitter of the pluggable transceiver module; </claim-text><claim-text> - associating timing packets received from and transmitted to a network with received counter values. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method according to claim 13, wherein the timing signals include data representative of time of day information, a first clock signal defining speed the timestamp counter runs and a second clock signal providing a phase of the timestamp counter to align beginning of each second with the beginning of a reference time. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method according to claim 13 or claim 14, wherein the step of associating comprises: </claim-text><claim-text> - identifying timing packets in a stream of packets sent to and received from the network; and </claim-text><claim-text> - associating the identified timing packets with timestamps based on the received counter values. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The method according to claim 15, wherein the step of associating comprises updating the timing packets based on the received counter values. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method according to claim 16 wherein detection of a timing packet triggers: </claim-text><claim-text> - generating a timestamp based on the received counter values; 
<!-- EPO <DP n="33"/>-->
 - sending said timestamp and a message header information of the identified timing packet to a modifier module; </claim-text><claim-text>wherein the method further comprises updating at the modifier module the timing packet based on the received message header information and using the received timestamp. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method according to claim 15, wherein detection of a timing packet triggers: </claim-text><claim-text> - generating a timestamp based on the received counter values; </claim-text><claim-text> - sending said timestamp and message header information of the identified timing packet to a processor unit; </claim-text><claim-text> - generating a follow-up message based on the message header information and the timestamp. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. A method of recovering Synchronous Ethernet timing in a pluggable transceiver module, the method comprising: </claim-text><claim-text> - recovering clock signals from incoming packets in a receiver of the pluggable transceiver module; </claim-text><claim-text> - reducing jitter in said clock signals; </claim-text><claim-text> - sending the clock signals with reduced jitter to a transmitter of the pluggable transceiver module; </claim-text><claim-text> - using the clock signals with reduced jitter as the reference clocks by the transmitter for Synchronous Ethernet packet transmission. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
