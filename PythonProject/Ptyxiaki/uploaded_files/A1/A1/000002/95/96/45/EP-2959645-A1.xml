<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959645-A1" country="EP" doc-number="2959645" kind="A1" date="20151230" family-id="51533744" file-reference-id="282117" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160452531" ucid="EP-2959645-A1"><document-id><country>EP</country><doc-number>2959645</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14764788-A" is-representative="NO"><document-id mxw-id="PAPP193868030" load-source="docdb" format="epo"><country>EP</country><doc-number>14764788</doc-number><kind>A</kind><date>20140313</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193868031" load-source="patent-office" format="original"><country>EP</country><doc-number>14764788.7</doc-number><date>20140313</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162034692" ucid="CN-2014073343-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2014073343</doc-number><kind>W</kind><date>20140313</date></document-id></priority-claim><priority-claim mxw-id="PPC162029123" ucid="US-201313802329-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201313802329</doc-number><kind>A</kind><date>20130313</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1923981110" load-source="docdb">H04L  12/807       20130101ALI20160630BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1923983291" load-source="docdb">H04L  12/801       20130101ALI20160630BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1923983973" load-source="docdb">H04L  29/06        20060101ALI20160630BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1923984688" load-source="docdb">H04L  12/70        20130101AFI20160630BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1987764940" load-source="docdb" scheme="CPC">H04L  47/193       20130101 FI20140918BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987790767" load-source="docdb" scheme="CPC">H04L  69/163       20130101 LI20140918BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987794581" load-source="docdb" scheme="CPC">H04L  47/27        20130101 LI20150930BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165549059" lang="DE" load-source="patent-office">DYNAMISCHE OPTIMIERUNG VON TCP-VERBINDUNGEN</invention-title><invention-title mxw-id="PT165549060" lang="EN" load-source="patent-office">DYNAMIC OPTIMIZATION OF TCP CONNECTIONS</invention-title><invention-title mxw-id="PT165549061" lang="FR" load-source="patent-office">OPTIMISATION DYNAMIQUE DE CONNEXIONS TCP</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103339817" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR1103305031" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101643730" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>100970540</iid><address><street>Huawei Administration Building Bantian</street><city>LONGGANG DISTRICT SHENZHEN, GUANGDONG 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103327186" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WACLAWSKY JOHN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103310134" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WACLAWSKY, JOHN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648974" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WACLAWSKY, JOHN</last-name><address><street>333 Bradbury Lane</street><city>Barlett, Illinois 60103</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103316318" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>HE XIANJUN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343595" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>HE, Xianjun</last-name></addressbook></inventor><inventor mxw-id="PPAR1101644376" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>HE, Xianjun</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103330418" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>MENG ZECHAO</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR1103318504" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>MENG, Zechao</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650404" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>MENG, Zechao</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101645558" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Goddar, Heinz J.</last-name><iid>100002032</iid><address><street>Boehmert &amp; Boehmert Anwaltspartnerschaft mbB Patentanwälte Rechtsanwälte Pettenkoferstrasse 20-22</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2014073343-W"><document-id><country>CN</country><doc-number>2014073343</doc-number><kind>W</kind><date>20140313</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014139445-A1"><document-id><country>WO</country><doc-number>2014139445</doc-number><kind>A1</kind><date>20140918</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660724973" load-source="docdb">AL</country><country mxw-id="DS660625478" load-source="docdb">AT</country><country mxw-id="DS660724974" load-source="docdb">BE</country><country mxw-id="DS660709477" load-source="docdb">BG</country><country mxw-id="DS660703180" load-source="docdb">CH</country><country mxw-id="DS660624779" load-source="docdb">CY</country><country mxw-id="DS660624780" load-source="docdb">CZ</country><country mxw-id="DS660703270" load-source="docdb">DE</country><country mxw-id="DS660724979" load-source="docdb">DK</country><country mxw-id="DS660724980" load-source="docdb">EE</country><country mxw-id="DS660624076" load-source="docdb">ES</country><country mxw-id="DS660709478" load-source="docdb">FI</country><country mxw-id="DS660709487" load-source="docdb">FR</country><country mxw-id="DS660703275" load-source="docdb">GB</country><country mxw-id="DS660724981" load-source="docdb">GR</country><country mxw-id="DS660703276" load-source="docdb">HR</country><country mxw-id="DS660624781" load-source="docdb">HU</country><country mxw-id="DS660703181" load-source="docdb">IE</country><country mxw-id="DS660724982" load-source="docdb">IS</country><country mxw-id="DS660709488" load-source="docdb">IT</country><country mxw-id="DS660724987" load-source="docdb">LI</country><country mxw-id="DS660703277" load-source="docdb">LT</country><country mxw-id="DS660625483" load-source="docdb">LU</country><country mxw-id="DS660709489" load-source="docdb">LV</country><country mxw-id="DS660703278" load-source="docdb">MC</country><country mxw-id="DS660625484" load-source="docdb">MK</country><country mxw-id="DS660625485" load-source="docdb">MT</country><country mxw-id="DS660624077" load-source="docdb">NL</country><country mxw-id="DS660788739" load-source="docdb">NO</country><country mxw-id="DS660624078" load-source="docdb">PL</country><country mxw-id="DS660709490" load-source="docdb">PT</country><country mxw-id="DS660624083" load-source="docdb">RO</country><country mxw-id="DS660709495" load-source="docdb">RS</country><country mxw-id="DS660624084" load-source="docdb">SE</country><country mxw-id="DS660703182" load-source="docdb">SI</country><country mxw-id="DS660788740" load-source="docdb">SK</country><country mxw-id="DS660788741" load-source="docdb">SM</country><country mxw-id="DS660625486" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139792949" ref-ucid="WO-2014139445-A1" lang="EN" load-source="patent-office"><p num="0000">Transport control protocol (TCP) parameters can be dynamically selected to increase communication network performance. The TCP parameters may be selected before usage or at start-up such that a TCP connection is dynamically configured/re-configured prior to transporting the traffic flow over the network. The TCP connection parameters may be selected in accordance with a traffic characteristic, a network characteristic, a history of traffic activity, expected loads, desired throughput and latency or some other selection criteria. TCP parameters may also be selected after beginning to transport traffic flows over the network. More specifically, transportation of a traffic flow over the network may begin immediately using default TCP parameters, with the TCP parameters being updated or selected only upon the occurrence of a congestion or triggering condition. Further, multiple clients may share a set of persistent time-shared TCP connections.</p></abstract><abstract mxw-id="PA140186106" ref-ucid="WO-2014139445-A1" lang="EN" source="national office" load-source="docdb"><p>Transport control protocol (TCP) parameters can be dynamically selected to increase communication network performance. The TCP parameters may be selected before usage or at start-up such that a TCP connection is dynamically configured/re-configured prior to transporting the traffic flow over the network. The TCP connection parameters may be selected in accordance with a traffic characteristic, a network characteristic, a history of traffic activity, expected loads, desired throughput and latency or some other selection criteria. TCP parameters may also be selected after beginning to transport traffic flows over the network. More specifically, transportation of a traffic flow over the network may begin immediately using default TCP parameters, with the TCP parameters being updated or selected only upon the occurrence of a congestion or triggering condition. Further, multiple clients may share a set of persistent time-shared TCP connections.</p></abstract><abstract mxw-id="PA139792950" ref-ucid="WO-2014139445-A1" lang="FR" load-source="patent-office"><p num="0000">Selon l'invention, des paramètres de protocole de commande de transport (TCP) peuvent être dynamiquement sélectionnés pour augmenter les performances du réseau de communication. Les paramètres TCP peuvent être sélectionnés avant utilisation ou au démarrage de manière qu'une connexion TCP soit dynamiquement configurée/reconfigurée avant de transporter le flux de trafic sur le réseau. Les paramètres de connexion TCP peuvent être sélectionnés en fonction d'une caractéristique de trafic, d'une caractéristique de réseau, d'un historique d'activité de trafic, de charges attendues, d'un débit et d'une latence souhaités ou de certains autres critères de sélection. Des paramètres TCP peuvent également être sélectionnés après avoir commencé à transporter des flux de trafic sur le réseau. Plus spécifiquement, le transport d'un flux de trafic sur le réseau peut commencer immédiatement à l'aide de paramètres TCP par défaut, les paramètres TCP étant mis à jour ou sélectionnés seulement lors de la survenue d'une congestion ou d'une condition de déclenchement. En outre, de multiples clients peuvent partager un ensemble de connexions TCP temporellement partagées persistantes.</p></abstract><abstract mxw-id="PA140186107" ref-ucid="WO-2014139445-A1" lang="FR" source="national office" load-source="docdb"><p>Selon l'invention, des paramètres de protocole de commande de transport (TCP) peuvent être dynamiquement sélectionnés pour augmenter les performances du réseau de communication. Les paramètres TCP peuvent être sélectionnés avant utilisation ou au démarrage de manière qu'une connexion TCP soit dynamiquement configurée/reconfigurée avant de transporter le flux de trafic sur le réseau. Les paramètres de connexion TCP peuvent être sélectionnés en fonction d'une caractéristique de trafic, d'une caractéristique de réseau, d'un historique d'activité de trafic, de charges attendues, d'un débit et d'une latence souhaités ou de certains autres critères de sélection. Des paramètres TCP peuvent également être sélectionnés après avoir commencé à transporter des flux de trafic sur le réseau. Plus spécifiquement, le transport d'un flux de trafic sur le réseau peut commencer immédiatement à l'aide de paramètres TCP par défaut, les paramètres TCP étant mis à jour ou sélectionnés seulement lors de la survenue d'une congestion ou d'une condition de déclenchement. En outre, de multiples clients peuvent partager un ensemble de connexions TCP temporellement partagées persistantes.</p></abstract><description mxw-id="PDES79042380" ref-ucid="WO-2014139445-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Dynamic Optimization of TCP Connections </p><p id="p0002" num="0002"> CROSS-REFERENCE TO RELATED APPLICATIONS </p><p id="p0003" num="0003">[0001] The present application claims priority to U.S. Patent Application No. 13/ 802,329 filed March 13, 2013, and entitled "Dynamic Optimization of TCP Connections," which is incorporated herein by reference as if reproduced in its entirety. </p><p id="p0004" num="0004">FIELD OF INVENTION </p><p id="p0005" num="0005">[0002] The present invention relates generally to communications, and in specific embodiments, to dynamic optimization of communication protocol parameters. </p><p id="p0006" num="0006"> BACKGROUND </p><p id="p0007" num="0007"> [0003] The Transmission Control Protocol (TCP) is a core protocol corresponding to the transport layer of Internet Protocol (IP) suite, which serves as an intermediate layer between the application layer (e.g., the program) and the internet protocol (IP) layer. TCP provides reliable and ordered delivery of data from one program on one computer to another program on another computer, and is used by major Internet applications, e.g., browsing, email, file transfer, etc. </p><p id="p0008" num="0008">[0004] Modern day TCP algorithms are typically designed to address specific issues (e.g., congestion control, throughput, latency, fairness, quality of service (QoS), wireless compatibility, etc.), and consequently may perform better under some network conditions than others. For instance, a faster error recovery (FACK) TCP algorithm designed to effectively control congestion in wire-line networks may not perform well in wireless networks due to being unable to distinguish between congestion related packet loss (e.g., packets dropped from a buffer, etc.) and non- congestion related packet loss (e.g., packet not received correctly due to interference, packet corruption , etc.). Similarly, a detection of out-of-order (DOOR) TCP algorithm designed for 
<!-- EPO <DP n="3"/>-->
 efficiently handling re-ordered packets may be unable to efficiently maintain network objectives related to traffic priority, fairness, and/or Quality of Service. </p><p id="p0009" num="0009"> [0005] Conventional networks implement a single/ static TCP algorithm on a given piece of network equipment (e.g., a router, switch, server, etc.) such that all TCP connections constructed or operated by that piece of network equipment comply with a common set TCP parameters (as defined by the TCP algorithm configured on the device). As a result, conventional TCP networks may be incapable of adapting to constantly changing usage demands which may cause, inter alia, packet flows to cross different networking environments at different times. </p><p id="p0010" num="0010"> SUMMARY </p><p id="p0011" num="0011"> [0006] Technical advantages are generally achieved, by embodiments of this disclosure which describe dynamic optimization of protocols such as TCP over network connections. </p><p id="p0012" num="0012">[0007] In accordance with an embodiment, a method for communicating data is provided. In this example, the method includes receiving a traffic flow and selecting transport control protocol (TCP) parameters for transporting the traffic flow in accordance with a characteristic of the traffic flow or a characteristic of a network. The method further includes transporting the traffic flow over a TCP connection configured in accordance with the selected TCP parameters. An apparatus for performing this method is also provided. </p><p id="p0013" num="0013"> [0008] In accordance with another embodiment, another method for communicating data is provided. In this example, the method includes receiving a traffic flow, and beginning to transmit the traffic flow over a persistent transport control protocol (TCP) connection in accordance with default TCP parameters. The method further includes determining if a congestion or triggering condition is detected prior to completing transmission of the traffic flow over the persistent TCP connection. When the congestion triggering condition is detected, the method includes ceasing 
<!-- EPO <DP n="4"/>-->
 transmission of the traffic flow over the persistent TCP connection, selecting congestion control parameters, and resuming transmission of remaining portions of the traffic flow in accordance with the selected congestion control parameters. When the congestion/triggering condition is not detected, the method further includes completing transmission of the traffic flow over the persistent TCP connection. An apparatus for performing this method is also provided. </p><p id="p0014" num="0014">[0009] In accordance with yet another embodiment, yet another method for communicating data is provided. In this example, the method includes receiving a first portion of a traffic flow carrying a data object or a request for a data object over a first one of a plurality of wide area network (WAN) interfaces, and buffering the first portion of the traffic flow until the entire traffic flow is received. The method further includes transmitting the traffic flow over a local area network (LAN) via a persistent transport control protocol (TCP) connection upon confirming that the entire traffic flow has been received. An apparatus for performing this method is also provided. </p><p id="p0015" num="0015">[0010] In accordance with yet another embodiment, another method for communicating data is provided. In this example, the method includes communicating data over a group of transport control protocol (TCP) connections, collecting collective connection statistics for the group of TCP connections while communicating data over the group of TCP connections, and updating TCP parameters for the group of TCP connections in accordance with the collective connection statistics. An apparatus for performing this method is also provided. </p><p id="p0016" num="0016"> BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0017" num="0017">[0011 ] For a more complete understanding of the present disclosure, and the advantages thereof, reference is now made to the following descriptions taken in conjunction with the accompanying drawings, in which: </p><p id="p0018" num="0018"> [0012] FIG. 1 illustrates a diagram of a conventional network architecture of TCP connections; </p><p id="p0019" num="0019"> [0013] FIG. 2 illustrates a diagram of a typical TCP transmission activity sequence; 
<!-- EPO <DP n="5"/>-->
 [0014] FIG. 3 illustrates a diagram of an embodiment of a network architecture of TCP connections; </p><p id="p0020" num="0020"> [0015] FIG. 4 illustrates a diagram of another embodiment of a network architecture of TCP connections; </p><p id="p0021" num="0021"> [0016] FIG. 5 illustrates a diagram of an embodiment middlebox; </p><p id="p0022" num="0022"> [0017] FIG. 6 illustrates a flowchart of an embodiment method for communicating data; </p><p id="p0023" num="0023"> [0018] FIG. 7 illustrates a flowchart of another embodiment method for communicating data; </p><p id="p0024" num="0024"> [0019] FIG. 8 illustrates a diagram of yet another embodiment of a network architecture of TCP connections; </p><p id="p0025" num="0025"> [0020] FIG. 9 illustrates a flowchart of yet another embodiment method for communicating data; </p><p id="p0026" num="0026"> [0021] FIG. 10 illustrates a diagram of yet another embodiment of a network architecture of</p><p id="p0027" num="0027">TCP connections; </p><p id="p0028" num="0028"> [0022] FIG. 11 illustrates a flowchart of yet another embodiment method for communicating data; </p><p id="p0029" num="0029">[0023] FIGS. 12A-12D illustrate diagrams of a network architecture of TCP connections during different phases of a TCP communications sequence; </p><p id="p0030" num="0030"> [0024] FIG. 13 illustrates a flowchart of yet another embodiment method for communicating data; </p><p id="p0031" num="0031">[0025] FIG. 14 illustrates a flowchart of yet another embodiment method for communicating data; </p><p id="p0032" num="0032">[0026] FIG. 15 illustrates a block diagram of an embodiment communications device. </p><p id="p0033" num="0033">[0027] Corresponding numerals and symbols in the different figures generally refer to corresponding parts unless otherwise indicated. The figures are drawn to clearly illustrate the relevant aspects of the embodiments and are not necessarily drawn to scale. </p><p id="p0034" num="0034"> DETAILED DESCRIPTION </p><p id="p0035" num="0035">[0028] The making and using of embodiments of this disclosure are discussed in detail below. It should be appreciated, however, that the concepts disclosed herein can be embodied in a wide 
<!-- EPO <DP n="6"/>-->
 variety of specific contexts, and that the specific embodiments discussed herein are merely illustrative and do not serve to limit the scope of the claims. Further, it should be understood that various changes, substitutions and alterations can be made herein without departing from the spirit and scope of this disclosure as defined by the appended claims. Aspects of this disclosure may be applied to various communication protocols. Notably, while much of this disclosure is discussed in the context of transmission control protocol (TCP), embodiments discussed herein may be applied to any communication protocol. Indeed, aspects of this disclosure may be particularly useful for protocols in which control/manipulation of communication parameters influences network performance. </p><p id="p0036" num="0036"> [0029] The fundamental nature of the IP (which TCP is typically enveloped) is connectionless, which allows for dynamic re-routing of packets. Accordingly, TCP connections carried by IP can be moved to different network paths dynamically, which affects TCP connection latency, throughput, and other performance characteristics of the TCP connections </p><p id="p0037" num="0037"> [0030] Disclosed herein are various techniques for dynamically optimizing TCP connections to achieve improved network performance. One aspect of this disclosure dynamically configures TCP connection parameters (e.g., parameters associated with; slow start, congestion avoidance, fast-retransmit, fast recovery, etc.) before usage or at start-up, e.g., prior to transporting a traffic flow over the network. More specifically, TCP connection parameters may be selected based on a traffic characteristic, a network characteristic, a history of traffic activity, expected loads, desired throughput and latency or some other characteristic. Once selected, the TCP parameters may be used to configure a new or select and modify an existing TCP connection for transporting the traffic. For instance, a new TCP connection may be constructed using the selected TCP parameters. Alternatively, an existing/persistent TCP connection may be reconfigured using the selected TCP 
<!-- EPO <DP n="7"/>-->
 parameters. As yet a further alternative, the selected TCP parameters may be used to select and/or modify a pre -configured persistent TCP connection from a pool of TCP connections. </p><p id="p0038" num="0038">[0031] Another aspect of this disclosure dynamically configures TCP parameters after beginning to transport traffic flows over the network. In such an embodiment, transportation of the traffic over the network may begin immediately using default TCP parameters, and unique or different TCP parameters may be selected only upon the occurrence of a condition (e.g., occurrence of a congestion condition, detection of a specific traffic pattern in packet arrivals or acknowledgements (ACKs), condition coupled with knowledge of past history, etc.). Immediately transporting the traffic may allow for quicker and/or more efficient handling of short flow data objects, such as Hypertext Transfer Protocol (HTTP) objects. </p><p id="p0039" num="0039"> [0032] Yet another aspect of this disclosure allows multiple clients to share a set of persistent time-shared TCP connections. In one embodiment, client traffic flows are individually transported over a single time-shared TCP connection one at a time. In such embodiments, individual TCP connections carry no more than one client traffic flow at any given instance in time. In other embodiments, client traffic flows may collectively be transported over a group of TCP connections such that individual TCP connections carry multiple client traffic flows at the same time. </p><p id="p0040" num="0040">[0033] Time-sharing TCP connections may be particularly beneficial when an intermediate switching device (e.g., a middlebox, etc.) is switching traffic from a low speed network (e.g., a WAN) to a high speed network (e.g., a LAN). More specifically, WAN connections tend to have much longer round trip times (RTTs) than LAN TCP connections. As a result, traffic is typically received over WAN connections at a much lower rate than it is transmitted over LAN TCP connections. As an example, FIG. 8 (discussed in greater detail below) depicts a network over which many clients share comparatively fewer persistent TCP connections formed over a high- 
<!-- EPO <DP n="8"/>-->
 speed LAN. Conventionally, traffic received over a WAN connection is immediately transmitted over a corresponding LAN TCP connection, which can result in the LAN TCP connection being tied up for long periods, e.g., while the remaining traffic flow is received over the WAN connection. To avoid needlessly tying up LAN resources, aspects of this disclosure buffer traffic flows being received over WAN TCP connections until the traffic flow has been received in its entirety, and thereafter begin transporting the traffic flow over a LAN TCP connection in a single burst. Accumulating the WAN packets before sending them in a burst over the LAN has the added advantage to make sure that an entire request arrives and the user (individual or program entity) really wants the object, for example, a user didn't click off the object request (change the web page which causes a connection reset or end) before asking the server to do processing to retrieve the object from its data store. </p><p id="p0041" num="0041"> [0034] Some aspects of this disclosure may be performed by a middlebox, which may be any switching device configured to dynamically transport TCP traffic over a network. In one example, a middlebox is a stand-alone component positioned between a client device and a source device (e.g., a server). In another embodiment, the middlebox is a module or component located on the client or source device. For instance, the middlebox may be implemented on a network interface card (NIC) on a communications device (e.g., computer, router, server, etc.). </p><p id="p0042" num="0042">[0035] FIG. 1 illustrates a conventional network architecture 100 comprising a plurality of clients 102-104, a network 110, and a server 160. As shown, the client 102 sends/receives data over network 110 via a TCP connection 112, while the client 104 sends/receives data over the network 110 via a TCP connection 114. The TCP connections 112-114 may be constructed and deconstructed each time a TCP session is initiated between the clients 102-104 and the server 160. Further, the TCP connection 112-114 may be operated in accordance with a static set of TCP 
<!-- EPO <DP n="9"/>-->
 parameters, as defined by the TCP algorithm configured on the server 160 and on the clients 102- 104. As a result, as much as sixty percent (or more) of the servers resources may be used to build, operate, manage and tear-down TCP connections. </p><p id="p0043" num="0043"> [0036] TCP algorithms may operate by increasing/decreasing their transmission rate (e.g., window size) to manage or avoid congestion. FIG. 2 illustrates a TCP transmission sequence 200, as may occur between a client and a server. Notably, transmission rates may be expressed in packets per round trip time (RTT), which is the length of time it takes for an acknowledgment to be received following the transmission of a packet. Notably, the TCP transmission sequence 200 is included herein merely as an example of how some TCP parameters affect connection performance, and does not serve to limit the type and/or number of TCP parameters that may be </p><p id="p0044" num="0044">adjusted/modified by aspects of this disclosure. As an example, embodiments of this disclosure may include modifications to TCP and/or other protocols that increase the number of operational phases. Many TCP protocols initialize with a slow start phase, which may include transmitting packets at a low rate (e.g., one-packet/RTT) and thereafter incrementing the rate (exponentially or otherwise) until a congestion event occurs (or until the transmission is completed). The congestion event may include the failure to receive an acknowledge (ACK) message for a transmitted packet (e.g., after a timeout), the reception of a negative acknowledgment (NACK) message, or any other event suggesting that a packet transmission was unsuccessful. The TCP transmission sequence 200 may respond to the congestion event by decrementing the transmission rate to a bottom or floor (e.g., one-packet/RTT) in an attempt to alleviate the perceived congestion. After reaching the bottom or floor, the TCP transmissions sequence 200 may proceed in accordance with a FAST recovery phase, which may include increasing the packet transmission rate (e.g., exponentially or otherwise) for a period of time or until the packet transmission rate reaches a threshold. After the 
<!-- EPO <DP n="10"/>-->
 FAST recovery period, the TCP transmissions sequence 200 may proceed in accordance with a congestion avoidance phase, which may include increasing the packet transmission rate at a slower fixed rate for some time period. </p><p id="p0045" num="0045"> [0037] Conventionally, TCP parameters are statically defined by a TCP algorithm configured on the server. Indeed, as much as sixty percent of server processing capacity may be consumed by managing (e.g., constructing, destructing, etc.) TCP connections. Aspects of this disclosure offload at least some of the responsibility for managing TCP connections to a middlebox, which may be configured to dynamically configure TCP connection parameters based on various realtime characteristics. </p><p id="p0046" num="0046"> [0038] In some embodiments, a single middlebox may be implemented on the server side of the network. FIG. 3 illustrates an embodiment TCP network architecture 300 over which a middlebox 320 manages TCP connections for carrying data between a plurality of clients 302-304 and one or more servers 360. As shown, the clients 302-304 communicate with the middlebox 320 via TCP connections 312-314 spanning a first network 310, while the middlebox 320 </p><p id="p0047" num="0047">communicates with the server 360 via TCP connections 351-358 spanning a second network 350. In some embodiments, the first network 310 has different characteristics than the second network 350. For instance, the first network 310 may be a high latency network, such as a wide area network (WAN), while the second network 350 may be a low latency network, such as a local area network (LAN). Additionally or alternatively, the first network 310 may be less reliable than the second network 350, as might be the case if the first network 310 is a wireless network and the second network 350 is a wire -line network. The TCP connections 351-358 may include a group of non-persistent TCP connections 351-353 as well as a group of persistent TCP connections 356-358. The non-persistent TCP connections 351-353 may be constructed by the middlebox 320 in 
<!-- EPO <DP n="11"/>-->
 accordance with dynamic TCP parameters, while the persistent TCP connections 356-358 may be re-configured with new/updated TCP parameters. </p><p id="p0048" num="0048"> [0039] In other embodiments, middleboxes may be implemented on the client side as well as the server side. FIG. 4 illustrates an embodiment TCP network architecture 400 over which a pair of middleboxes 420-440 manages TCP connections for carrying data between a plurality of clients 401-402 and one or more servers 460. As shown, the clients 401-402 communicate with the middlebox 420 via TCP connections 411-412 spanning a first network 410, the middlebox 420 communicates with the middlebox 440 via TCP connections 431-432 spanning a second network 430, and the middlebox 440 communicates with the server 460 via TCP connections 451 -458 spanning a third network 450. Additionally, the TCP connections 431-432 may be persistent or non-persistent connections managed by the middleboxes 420-440. Similar to the network 310, 350 discussed above, the networks 410, 430, 450 may have different characteristics. </p><p id="p0049" num="0049">[0040] FIG. 5 illustrates an embodiment middlebox 500, as might be implemented in one of the TCP network architectures 300-400. As shown, the middlebox 500 may include an ingress WAN interface 510 and an egress WAN interface 520 for communicating data over a WAN 505, as well as an egress LAN interface 530 and an ingress LAN interface 540 for communicating data over a LAN 555. The middlebox 500 may also include a switching fabric 550 for switching data between the interfaces 510-540. </p><p id="p0050" num="0050"> [0041] Aspects of this disclosure dynamically configure TCP parameters in accordance with traffic and/or network characteristics. In some embodiments, TCP parameters may be dynamically configured when constructing a new/non-persistent TCP connection. FIG. 6 illustrates a method 600 for communicating data while dynamically configuring TCP connection parameters, as may be performed by a switching device (e.g., a middlebox, server, router, etc.). The method 600 begins at 
<!-- EPO <DP n="12"/>-->
 step 610, where the switching device receives a traffic flow. The traffic flow many be any type of traffic, e.g., content request, content reply, etc. In some embodiments, different traffic flows are optimized differently. For example, a traffic flow carrying a request for a data object may be optimized differently than a traffic flow carrying the requested data object. Data object requests tend to be much shorter than data object responses, and the size of the request and response may be used as a basis for adjusting TCP parameter settings so that object requests and responses can have different optimal TCP settings. Thereafter, the method 600 proceeds to step 620, where the switching device selects TCP parameters for transporting the data flow over the network. The TCP parameters may be selected based on a characteristic of the traffic (e.g., data object request, response carrying the data object, etc.), a condition of the network, or some other criteria. </p><p id="p0051" num="0051">[0042] In one embodiment, TCP parameters are selected in accordance with a characteristic of the traffic and/or data object. The characteristic of the data object may include a size of the data object, a traffic type (e.g., isochronous traffic such as voice/video vs. common files) associated with the data object, a special handling instruction for the object, or some other characteristic. For instance a special handling instruction for the object may result from the detection of embedded indicator bits or a recognizable pattern that triggers policy decisions (e.g., decisions determining priority, Quality of Service (QoS), fairness, etc.). </p><p id="p0052" num="0052"> [0043] In some embodiments, TCP parameters may be selected based on a historical characteristic associated with the traffic and/or data object. For instance, the historical </p><p id="p0053" num="0053">characteristic may include a frequency in which the data object is communicated, a source of the data object, a historical variation in size of the data object. As an example, traffic patterns from past flows or a recurring group of flows (e.g., as recorded in a history table) may influence TCP parameter selection. For instance, historical traffic patterns may indicate the presence of wireless 
<!-- EPO <DP n="13"/>-->
 environments associated with particular IP address ranges or particular traffic types. Wireless network environments may bring about the following traffic patterns: (i) wide variations in RTTs; (ii) long RTTs; (iii) sudden drastic increase in RTTs (e.g., delay spike) (iv) out-of-order packets; (v) low throughput (e.g., less than 20 Mbps); and (vi) high retransmission rates; (vii) long disruptions (e.g., in the order of seconds); (viii) unpredictable error rates; (ix) clustered Losses (e.g., multiple packets lost during a short period window); and (x) losses correlated with frame sizes (e.g., longer frames mean more air time and increased likelihood of transmission environment corruption and packet loss). History tables may record various information about traffic flows, and may be sorted by origin address, traffic type, size of packets, congestion detected numbers, reordering counts, etc. </p><p id="p0054" num="0054">[0044] In some embodiments, TCP parameters are selected in accordance with a characteristic of a network, such as congestion frequency, network throughput, network latency, variations in latency and/or throughput, error statistics, etc. In one example, TCP parameters are selected based on network traffic environments between communicating TCP legs. For instance, short flows may be communicated more quickly by increasing the initial window size parameter and/or </p><p id="p0055" num="0055">manipulating other TCP parameters. In an embodiment, each piece of a split connection may be individually optimized such that delay and throughput limitations of short flows are minimized or substantially eliminated for flows traversing split TCP connections. In an embodiment, managing data flows communicated between different speed and/or capacity RTT environments may allow for more efficient use of resources. In an embodiment, managing data flows between different RTT environments may allow a more efficient use of connection flows to persistent LAN or WAN connections. In an embodiment, managing data flows between different RTT environments may allow split TCP connections that carry the same traffic to communicate between TCP legs to share buffer storage or history knowledge. 
<!-- EPO <DP n="14"/>-->
 [0045] After the TCP parameters are selected, the method 600 proceeds to step 630, where the switching device constructs a TCP connection in accordance with the selected TCP parameters. Subsequently, the method 600 proceeds to step 640, where the switching device transports the traffic flow over the TCP connection. </p><p id="p0056" num="0056"> [0046] In other embodiments, TCP parameters may be dynamically configured by reconfiguring TCP parameters of an existing/persistent TCP connection. FIG. 7 illustrates a method 700 for communicating data over a dynamically configured TCP connection, as may be performed by a switching device (e.g., a middlebox, server, router, etc.). The method 700 begins at step 710, where the switching device receives a traffic flow. The traffic flow may be any type of traffic flow, such as a request for a data object or a stream of response packets carrying the requested data object. Different types of traffic flows may be optimized differently. Thereafter, the method 700 proceeds to step 720, where the switching device selects TCP parameters for transporting the data flow over the network. Next, the method 700 proceeds to step 730, where the switching device reconfigures an existing/persistent TCP connection in accordance with the selected TCP parameters. Subsequently, the method 700 proceeds to step 740, where the switching device transports the traffic flow over the reconfigured persistent TCP connection. </p><p id="p0057" num="0057"> [0047] In some implementations, it may be desirable for a pool of users to share re- configurable/persistent TCP connections in a time-shared manner. FIG. 8 illustrates an </p><p id="p0058" num="0058">embodiment TCP network architecture 800 over which a plurality of time-shared TCP connections 851-854 are shared by a plurality of clients 802-804. As shown, the time-shared TCP connections 851-854 are persistent TCP connections extending between a middlebox 820 and a server 860, and are used for communicating data over the network 850. In some embodiments, the time-shared TCP connections 851-854 are re-configurable. For instance, the middlebox 820 may reconfigure 
<!-- EPO <DP n="15"/>-->
 TCP parameters of the time-shared TCP connections 851-854 by binding selected TCP parameters to a traffic flow. </p><p id="p0059" num="0059"> [0048] FIG. 9 illustrates a method 900 for communicating data over reconfigurable time- shared TCP connections, as may be performed by a switching device. The method 900 begins at step 910, where the switching device receives a traffic flow. The traffic flow may be any type of traffic flow (e.g., request, response, etc.), and different types of traffic flows may be optimized differently. Thereafter, the method 900 proceeds to step 920, where the switching device selects TCP parameters for transporting the traffic flow over the network. Next, the method 900 proceeds to step 930, where the switching device binds the selected TCP parameters to the traffic flow. Thereafter, the method 900 proceeds to step 940, where the switching device forwards the traffic over a time-shared TCP connection after re -configuring the time- shared TCP connection. </p><p id="p0060" num="0060">[0049] In some applications, it may be desirable to delay selection of the TCP parameters for a period of time. For instance, immediately transporting a traffic flow over an existing default TCP connection may decrease latency. FIG. 10 illustrates an embodiment TCP network architecture 1000 over which a middlebox 1020 forwards data received from the clients 1002-1004 over one or more TCP connections 1051-1054 to a server 1060. As shown, the TCP connection 1051 is a default TCP connection, while the TCP connections 1052-1054 are configurable connections. The TCP connections 1052-1054 may be re-configurable persistent connections, or configurable non- persistent connections. The middlebox 1020 may be configured to initially forward received data flows over the TCP connection 1051 until a triggering event occurs. The triggering event may be a congestion event (e.g., failure to receive a ACK message) or some other event. For instance, the triggering event may occur upon recognizing that the traffic flow has a certain characteristic, e.g., exceeds a certain size, has a certain QoS requirement, has a certain traffic type, has certain IP 
<!-- EPO <DP n="16"/>-->
 addresses, etc. Upon detecting the triggering event, the middlebox may configure/re -configure one or more of the TCP connections 1052-1054, and thereafter transport the remainder of the traffic flow over the configured/re -configured TCP connection. </p><p id="p0061" num="0061"> [0050] FIG. 11 illustrates a method 1100 for communicating data while delaying the binding of dynamically configured TCP connection parameters to the traffic flow, as may be performed by a switching device (e.g., a middlebox, server, router, etc.). The method 1100 begins at step 1110, where the switching device receives a traffic flow of any kind. For example, a request for a data object or a stream of response packets carrying the requested data object can be optimized differently. Data object requests tend to be much shorter than object responses and the size of the request and response can also be used to adjust TCP parameter settings so that object requests and responses can have different optimal TCP settings. Thereafter, the method 1100 proceeds to step 1120, where the switching device immediately begins transmitting the traffic flow over the default TCP connection. The default TCP connection may be a persistent TCP connection, and the TCP parameters may only be defined up until the point of congestion detection or some other triggering event such as byte or packet counts, etc. For instance, the default TCP parameters may consist of an initial window size and an amount in which the transmission rate is incremented (e.g., exponentially, etc.). Next, the method 1100 proceeds to step 1130, where the switching device determines whether a triggering condition has been detected. If not, the method 1100 proceeds to step 1135, where the switching device continues to transmit the traffic flow over the default TCP connection. After step 1135, the method 1100 proceeds to step 1140, where the switching device determines whether the transmission has been completed. If so, the method 1100 ends. Otherwise, the method 1100 reverts back to step 1130. 
<!-- EPO <DP n="17"/>-->
 [0051] If the switching device determines that the triggering condition has occurred during the step 1130, the method 1100 proceeds to step 1150, where the triggering device selects TCP parameters for transporting the traffic flow. Next, the method 1100 proceeds to step 1160, where the switching device reconfigures an existing/persistent TCP connection, or alternatively, configures a new/non-persistent TCP connection, with the selected TCP parameters. Subsequently, the method 1100 proceeds to step 1170, where the switching device begins to transport the remainder of the traffic flow over the re -configured/newly-configured TCP connection. </p><p id="p0062" num="0062">Subsequently, the method 1100 proceeds to step 1140, where the switching device determines whether or not transmission of the traffic flow is complete. If so, the method 1100 ends. </p><p id="p0063" num="0063">Otherwise, the method 1100 reverts back to step 1130. </p><p id="p0064" num="0064"> [0052] FIGS. 12A-12D depict a network 1200 comprising a client 1202 communicating a sequence of packets to a server 1260 via a middlebox 1220. As shown, the client 1202 </p><p id="p0065" num="0065">communicates with the middlebox 1220 via the WAN 1210, while the middlebox 1220 </p><p id="p0066" num="0066">communicates with server 1260 via the LAN 1250. Hence, the sequence of packets are transported over the WAN 1210 and the LAN 1250 when communicated from the client 1202 to the server 1260. </p><p id="p0067" num="0067"> [0053] Traditionally, a node (such as the middlebox) would immediately begin forwarding packets in the server 1260 upon beginning to receive the sequence of packets over the TCP connection 1211. This traditional approach may unduly tie up bandwidth resources in the LAN 1250, as RTTs for the WAN 1210 may be much longer than RTTs for the LAN 1250. To wit, the middle box 1220 may be capable of transmitting the packets over any of the TCP connections 1251-1255 at a much faster rate than that in which the packets are received over the TCP connection 1211. For example, if the middlebox 1220 transmitted the "START" packet over the 
<!-- EPO <DP n="18"/>-->
 TCP connection 1255 immediately upon beginning to receive the sequence of packets, then the TCP connection 1255 may be reserved while remaining packets in the sequence of packets (e.g., "MID" and "END") are received over the TCP connection 1211. </p><p id="p0068" num="0068"> [0054] Aspects of this disclosure avoid unnecessarily tying up resources in the LAN 1250 by deferring transportation of the "START" packet over the LAN 1250 until the entire sequence of packets has been received over the TCP connection 1211. The packets are then sent to the server 1260 in a single burst. Accumulating the WAN packets before sending them in a burst over the LAN has the added advantage to make sure that an entire request arrives and the user (individual or program entity) really wants the object, for example, a user didn't click off the object request (change the web page causing a connection reset or end) before asking the server to do processing to retrieve the object from its data store. More specifically, and as shown in FIG. 12A, the middle box 1220 places the sequence of packets into the buffer 1225 packet -by-packet as they are received. Once the entire sequence of packets is received (as shown in FIG. 12B), the middlebox 1220 selects one of the TCP connections 1251-1255 for transporting the sequence of packets over the LAN 1250. In this example, the middlebox 1220 selects the TCP connection 1253 for transporting the sequence of packets over the LAN 1250. Thereafter, the middlebox 1220 transports the sequence of packets over the selected TCP connection 1253, as shown in FIGS. 12C-12D. </p><p id="p0069" num="0069">[0055] In addition to conserving bandwidth in the LAN 1250, delaying transportation of packets over the LAN 1250 until the entire sequence has been received over the WAN 1210 may allow the middle box 1220 to more effectively select TCP parameters for transporting the sequence of packets over the LAN 1250. For instance, the middle box 1220 may select one of the TCP connections 1253 based on a characteristic that is not known until the entire sequence of packets has been received, such as the size of the traffic, any traffic carried indicator flags or special bit 
<!-- EPO <DP n="19"/>-->
 sequences, etc. Additionally, the pool of available TCP connections 1251-1255 may change. In this example, the TCP connection 1253 was unavailable when the "START" packet was initially received (as shown in FIG. 12B), but later became available (as shown in FIG. 12C). </p><p id="p0070" num="0070">[0056] In some embodiments, the time-shared TCP connections may be re -configured with selected TCP parameters. FIG. 13 illustrates a method 1300 for communicating a sequence of packets over a network. The method 1300 begins at step 1310, where the switching device begins receiving a sequence of packets. The sequence of packets may include any type of packets, such as packets carrying a request for a data object or a stream of response packets carrying the requested data object. Different types of packets may be optimized differently. For instance, sequences of packets carrying data object requests tend to be much shorter than sequences of packets carrying object responses, and the length of the sequence of packet (or the amount of data carried thereby) may be a basis upon which TCP parameter settings are adjusted. Accordingly, sequences of packets carrying object requests can have different TCP settings than sequences of packets carrying object responses. The sequence of packets may be received over a TCP interface spanning a first network (e.g., a WAN network, etc.). Thereafter, the method 1300 proceeds to step 1320, where the switching device determines whether the entire sequence of packets either a request or response data object has been received. If not, the method 1300 proceeds to step 1325, where the switching device continues to receive packets until the entire data object is received. Once the entire data object has been received, the method 1300 proceeds to step 1330, where the switching device selects TCP parameters for transporting the data flow over the network. Next, the method 1300 proceeds to step 1340, where the switching device reconfigures persistent TCP connections with selected TCP parameters. Thereafter, method 1300 proceeds to step 1350, where the 
<!-- EPO <DP n="20"/>-->
 switching device transports the sequence of packets carrying the data object over the reconfigured TCP connection. </p><p id="p0071" num="0071"> [0057] In other embodiments, the time-shared TCP connections may be preconfigured with different TCP parameters, and the switching device may select one of the pre -configured TCP connections based on the characteristics of the data object and/or the characteristics of the network. FIG. 14 illustrates a method 1400 for communicating a sequence of packets over pre -configured TCP connections. The method 1400 begins at step 1410, where the switching device begins receiving a sequence of packets. The sequence of packets may include any type of packets. The sequence of packets may be received over a TCP interface spanning a first network (e.g., a WAN network, etc.). Thereafter, the method 1400 proceeds to step 1420, where the switching device determines whether the entire data object has been received. If not, the method 1400 proceeds to step 1425, where the switching device continues to receive packets until the entire data object is received. Once the entire data object has been received, the method 1400 proceeds to step 1430, where the switching device selects a pre -configured TCP connection based on characteristics of the data object. Next, the method 1400 proceeds to step 1440, where the switching device transports the sequence of packets carrying the data object over the selected TCP connection. </p><p id="p0072" num="0072">[0058] In aspects of this disclosure, multiple TCP connections may be managed collectively. For instance, a group of TCP connections may share a common set of TCP parameters such that the entire group of TCP connections can be managed collectively. Additionally, TCP parameters may be re -used when creating and/or reconfiguring TCP connections, thereby reducing delays in establishing/re-configuring TCP connections as well as conserving processing resources. The following are just a few examples of situations in which it may be beneficial to group TCP connections: (i) when connections are experiencing similar connection activity from shared origins; 
<!-- EPO <DP n="21"/>-->
 (ii) when connections have a shared ISP environment; (iii) when connections have a shared network element usage; (iv) when connections have a statically configured shared element usage; (v) when connections share a common IP address range; (vi) when connections have a shared service provider (e.g., a wireless provider, China Mobile, with well-known addresses); and (vii) when connections are experiencing activity from shared origins and/or destinations. </p><p id="p0073" num="0073">[0059] FIG. 15 illustrates a block diagram of an embodiment of a communications device 1500, which may be equivalent to one or more devices (e.g., middlebox, etc.) discussed above. The communications device 1500 may include a processor 1504, a memory 1506, ingress TCP interfaces 1510, egress TCP interfaces 1512, and a switching engine 1514, a supplemental wireless interface 1512, and a supplemental interface 1510, which may (or may not) be arranged as shown in FIG. 15. The processor 1504 may be any component capable of performing computations and/or other processing related tasks, and the memory 1506 may be any component capable of storing programming and/or instructions for the processor 1504. The ingress TCP interfaces 1510 may be any component or collection of components that allows the communications device 1500 to receive TCP packets, while the egress TCP interfaces 1512 may be any component or collection of components that allows the communications device 1500 to transmit TCP packets. The switching engine 1514 may be any component or collection of components that allows the communications device 1500 to switch TCP packets between the ingress TCP interfaces 1510 and the egress TCP interfaces 1512. </p><p id="p0074" num="0074"> [0060] Although the description has been described in detail, it should be understood that various changes, substitutions and alterations can be made without departing from the spirit and scope of this disclosure as defined by the appended claims. Moreover, the scope of the disclosure is not intended to be limited to the particular embodiments described herein, as one of ordinary skill 
<!-- EPO <DP n="22"/>-->
 in the art will readily appreciate from this disclosure that processes, machines, manufacture, compositions of matter, means, methods, or steps, presently existing or later to be developed, may perform substantially the same function or achieve substantially the same result as the </p><p id="p0075" num="0075">corresponding embodiments described herein. Accordingly, the appended claims are intended to include within their scope such processes, machines, manufacture, compositions of matter, means, methods, or steps. 
</p></description><claims mxw-id="PCLM70669096" ref-ucid="WO-2014139445-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="23"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method for communicating data, the method comprising: </claim-text><claim-text> receiving a traffic flow; </claim-text><claim-text> selecting transport control protocol (TCP) parameters for transporting the traffic flow in accordance with a characteristic of the traffic flow or a characteristic of a network; and </claim-text><claim-text> transporting the traffic flow over a TCP connection configured in accordance with the selected TCP parameters. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein transporting the traffic flow over the TCP connection configured in accordance with the selected TCP parameters comprises: </claim-text><claim-text> constructing the TCP connection in accordance with the selected TCP parameters; and sending the traffic flow over the TCP connection. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 1, wherein transporting the traffic flow over the TCP connection configured in accordance with the selected TCP parameters comprises: </claim-text><claim-text> re-configuring an existing TCP connection in accordance with the selected TCP parameters; and </claim-text><claim-text> sending the traffic flow over the re-configured TCP connection. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 3, wherein the existing TCP connection is a persistent connection. 
<!-- EPO <DP n="24"/>-->
</claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 4, wherein the existing TCP connection is an egress TCP connection extending from a middlebox to a server, and wherein the egress TCP connection is shared amongst a plurality of ingress connections terminating at the middlebox. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of claim 5, wherein the plurality of ingress connections are TCP connections extending from one or more clients to the middlebox. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 1, wherein the selected TCP parameters are selected in accordance with a characteristic of the traffic flow. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of claim 7, wherein the characteristic of the traffic flow includes at least one of a size of the traffic flow, a traffic type associated with the traffic flow, or handling instructions for the traffic flow. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 7 further comprising selecting the characteristic of the traffic flow by: </claim-text><claim-text> identifying, in a history table, an entry associated with a data object carried by or requested by the traffic flow; and </claim-text><claim-text> determining that the characteristic of the data object is a historical statistic listed in the entry in the history table. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 9, wherein the characteristic of the data object is at least one of a frequency in which the data object is communicated, a source of the data object, a historical variation in size of the data object, or a historical traffic pattern. 
<!-- EPO <DP n="25"/>-->
</claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method of claim 1, wherein the selected TCP parameters are selected in accordance with a characteristic of the network. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method of claim 11, wherein the characteristic of the network comprises at least one of a congestion level, a frequency, a network throughput, a network latency, a variation in network latency, and a variation in network throughput. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. An apparatus for communicating data, the apparatus comprising: </claim-text><claim-text> a processor; and </claim-text><claim-text> a computer readable storage medium storing programming for execution by the processor, the programming including instructions to: </claim-text><claim-text> receive a traffic flow; </claim-text><claim-text> select transport control protocol (TCP) parameters for transporting the traffic flow in accordance with a characteristic of the traffic flow or a characteristic of a network; and transport the traffic flow over a TCP connection configured in accordance with the selected TCP parameters. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The apparatus of claim 13, wherein the instructions to select TCP parameters for transporting the traffic flow include instructions to: </claim-text><claim-text> select TCP parameters in accordance with a characteristic of the traffic flow including at least one of a size of the traffic flow, a traffic type associated with the traffic flow, or handling instructions for the traffic flow. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The apparatus of claim 13, wherein the instructions to select TCP parameters for transporting the traffic flow include instructions to: 
<!-- EPO <DP n="26"/>-->
 select TCP parameters in accordance with a characteristic of the network including at least one of a congestion level, a frequency, a network throughput, a network latency, a variation in network latency, and a variation in network throughput. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. A method for communicating data, the method comprising: </claim-text><claim-text> receiving a traffic flow; </claim-text><claim-text> begin transmitting the traffic flow over a persistent transport control protocol (TCP) connection in accordance with default TCP parameters; and </claim-text><claim-text> if a congestion or triggering condition is detected prior to completing transmission of the traffic flow over the persistent TCP connection, then ceasing transmission of the traffic flow over the persistent TCP connection, selecting congestion control parameters, and resuming </claim-text><claim-text>transmission of remaining portions of the traffic flow in accordance with the selected congestion control parameters, </claim-text><claim-text> otherwise, completing transmission of the traffic flow over the persistent TCP connection. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method of claim 16, wherein the selected congestion control parameters comprise at an initial window size and a rate to increase a transmission window during a fast start period. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method of claim 16, wherein the selected congestion control parameters include at least one of a fast start parameter, a congestion detection parameter, a fast recovery parameter, and a collision avoidance parameter. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The method of claim 16, wherein selecting congestion control parameters comprises: selecting congestion control parameters for transporting the traffic flow in accordance with a characteristic of the traffic flow or a characteristic of a network. 
<!-- EPO <DP n="27"/>-->
</claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The method of claim 16, wherein resuming transmission of the remaining portions of the traffic flow in accordance with the selected congestion control parameters comprises reconfiguring the persistent TCP connection in accordance with the selected congestion control parameters. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The method of claim 16, wherein resuming transmission of the remaining portions of the traffic flow in accordance with the selected congestion control parameters comprises constructing a new TCP connection in accordance with the selected congestion control parameters. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The method of claim 16, wherein resuming transmission of the remaining portions of the traffic flow in accordance with the selected congestion control parameters comprises switching the traffic flow over to a second persistent TCP connection, the second persistent TCP connection being preconfigured with the selected congestion control parameters. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The method of claim 16, wherein resuming transmission of the remaining portions of the traffic flow comprises: begin transmitting the remaining portions of the traffic flow over a first TCP connection, the first TCP connection being configured in accordance with the selected congestion control parameters; detecting a subsequent congestion or triggering condition prior to completing transmission of the remaining portions of the traffic flow over the persistent TCP connection; and switching the remaining portions of the traffic flow from the first TCP connection to a second TCP connection after detecting the subsequent congestion or triggering condition. 
<!-- EPO <DP n="28"/>-->
</claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. A method for communicating data, the method comprising: </claim-text><claim-text> receiving a first portion of a traffic flow carrying a data object or a request for a data object over a first one of a plurality of wide area network (WAN) interfaces; </claim-text><claim-text> buffering the first portion of the traffic flow until the entire traffic flow is received; and upon confirming that the entire traffic flow has been received, transmitting the traffic flow over a local area network (LAN) via a persistent transport control protocol (TCP) connection. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. The method of claim 24, wherein the persistent TCP connection is a time-shared connection that is shared amongst the plurality of WAN interfaces. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The method of claim 24, further comprising: </claim-text><claim-text> upon confirming that the entire traffic flow has been received, selecting TCP parameters in accordance with a characteristic of the data object or a request for a data object or a characteristic of a network; and </claim-text><claim-text> reconfiguring the persistent TCP connection in accordance with the selected TCP parameters prior to transmitting the traffic flow over the LAN via the persistent TCP connection. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. The method of claim 24, further comprising: </claim-text><claim-text> upon confirming that the entire traffic flow has been received, selecting TCP parameters in accordance with a characteristic of the data object or a characteristic of a network; and </claim-text><claim-text> selecting, for transportation of the traffic flow, the persistent TCP connection from a plurality of persistent TCP connections in accordance with the selected TCP parameters, wherein each of the plurality of persistent TCP connections are time-shared connections that are shared amongst the plurality of WAN interfaces. 
<!-- EPO <DP n="29"/>-->
</claim-text></claim><claim id="clm-0028" num="28"><claim-text>28. A method for communicating data, the method comprising: communicating data over a group of transport control protocol (TCP) connections; collecting collective connection statistics for the group of TCP connections while communicating data over the group of TCP connections; and updating TCP parameters for the group of TCP connections in accordance with the collective connection statistics. </claim-text></claim><claim id="clm-0029" num="29"><claim-text>29. An apparatus for communicating data, the apparatus comprising: a processor; and a computer readable storage medium storing programming for execution by the processor, the programming including instructions to: receive a first portion of a traffic flow carrying a data object over a first one of a plurality of wide area network (WAN) interfaces; buffer the first portion of the traffic flow until the entire traffic flow is received; and upon confirming that the entire traffic flow has been received, transmit the traffic flow over a local area network (LAN) via a persistent transport control protocol (TCP) connection. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>30. The apparatus of claim 29, wherein the traffic flow is communicated over the persistent TCP connection in a single burst. </claim-text></claim><claim id="clm-0031" num="31"><claim-text>31. The apparatus of claim 29, wherein the first portion of the traffic flow is buffered for a period exceeding two round trip times (RTTs) on the persistent TCP connection. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
