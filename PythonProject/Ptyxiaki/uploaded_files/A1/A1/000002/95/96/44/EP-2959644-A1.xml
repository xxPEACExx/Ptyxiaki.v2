<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959644-A1" country="EP" doc-number="2959644" kind="A1" date="20151230" family-id="48521201" file-reference-id="315105" date-produced="20180826" status="corrected" lang="FR"><bibliographic-data><publication-reference fvid="160452532" ucid="EP-2959644-A1"><document-id><country>EP</country><doc-number>2959644</doc-number><kind>A1</kind><date>20151230</date><lang>FR</lang></document-id></publication-reference><application-reference ucid="EP-13814894-A" is-representative="NO"><document-id mxw-id="PAPP193868032" load-source="docdb" format="epo"><country>EP</country><doc-number>13814894</doc-number><kind>A</kind><date>20131219</date><lang>FR</lang></document-id><document-id mxw-id="PAPP193868033" load-source="patent-office" format="original"><country>EP</country><doc-number>13814894.5</doc-number><date>20131219</date><lang>FR</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162036193" ucid="EP-2013077327-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2013077327</doc-number><kind>W</kind><date>20131219</date></document-id></priority-claim><priority-claim mxw-id="PPC162030787" ucid="FR-1351468-A" load-source="docdb"><document-id format="epo"><country>FR</country><doc-number>1351468</doc-number><kind>A</kind><date>20130221</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988523236" load-source="docdb">H04L  12/40        20060101AFI20140910BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988524425" load-source="docdb">H04L  12/46        20060101ALI20140910BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1987769772" load-source="docdb" scheme="CPC">H04L2012/40215     20130101 LA20131111BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987771840" load-source="docdb" scheme="CPC">H04L  12/4625      20130101 LI20140825BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987800651" load-source="docdb" scheme="CPC">H04L  12/40156     20130101 FI20140825BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165549062" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNG ZUR RAHMENÜBERTRAGUNG ZWISCHEN CAN-BUSSCHIENEN</invention-title><invention-title mxw-id="PT165549063" lang="EN" load-source="patent-office">METHOD AND DEVICE FOR TRANSMITTING FRAMES BETWEEN TWO CAN BUSES</invention-title><invention-title mxw-id="PT165549064" lang="FR" load-source="patent-office">PROCEDE ET DISPOSITIF DE TRANSMISSION DE TRAMES ENTRE DEUX BUS CAN</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103328685" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>RENAULT SAS</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR1103338325" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>RENAULT S.A.S.</last-name></addressbook></applicant><applicant mxw-id="PPAR1101641128" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Renault s.a.s.</last-name><iid>101089118</iid><address><street>13-15 quai Le Gallo</street><city>92100 Boulogne-Billancourt</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103304608" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CAMPOY-MARTINEZ SERGIO</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103302839" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CAMPOY-MARTINEZ, Sergio</last-name></addressbook></inventor><inventor mxw-id="PPAR1101640967" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>CAMPOY-MARTINEZ, Sergio</last-name><address><street>97 avenue de Verdun</street><city>F-92130 Issy Les Moulineaux</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343271" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>BIDAULT VINCENT</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103316386" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>BIDAULT, Vincent</last-name></addressbook></inventor><inventor mxw-id="PPAR1101653465" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>BIDAULT, Vincent</last-name><address><street>93 rue de la République</street><city>F-92150 Suresnes</city><country>FR</country></address></addressbook></inventor></inventors></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2013077327-W"><document-id><country>EP</country><doc-number>2013077327</doc-number><kind>W</kind><date>20131219</date><lang>FR</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014127866-A1"><document-id><country>WO</country><doc-number>2014127866</doc-number><kind>A1</kind><date>20140828</date><lang>FR</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660624782" load-source="docdb">AL</country><country mxw-id="DS660703284" load-source="docdb">AT</country><country mxw-id="DS660724988" load-source="docdb">BE</country><country mxw-id="DS660625491" load-source="docdb">BG</country><country mxw-id="DS660788742" load-source="docdb">CH</country><country mxw-id="DS660724989" load-source="docdb">CY</country><country mxw-id="DS660703285" load-source="docdb">CZ</country><country mxw-id="DS660624792" load-source="docdb">DE</country><country mxw-id="DS660724990" load-source="docdb">DK</country><country mxw-id="DS660724995" load-source="docdb">EE</country><country mxw-id="DS660624085" load-source="docdb">ES</country><country mxw-id="DS660625492" load-source="docdb">FI</country><country mxw-id="DS660788743" load-source="docdb">FR</country><country mxw-id="DS660624793" load-source="docdb">GB</country><country mxw-id="DS660724996" load-source="docdb">GR</country><country mxw-id="DS660624794" load-source="docdb">HR</country><country mxw-id="DS660703286" load-source="docdb">HU</country><country mxw-id="DS660788744" load-source="docdb">IE</country><country mxw-id="DS660724997" load-source="docdb">IS</country><country mxw-id="DS660625493" load-source="docdb">IT</country><country mxw-id="DS660724998" load-source="docdb">LI</country><country mxw-id="DS660625494" load-source="docdb">LT</country><country mxw-id="DS660709496" load-source="docdb">LU</country><country mxw-id="DS660625499" load-source="docdb">LV</country><country mxw-id="DS660625500" load-source="docdb">MC</country><country mxw-id="DS660709497" load-source="docdb">MK</country><country mxw-id="DS660709498" load-source="docdb">MT</country><country mxw-id="DS660725003" load-source="docdb">NL</country><country mxw-id="DS660624804" load-source="docdb">NO</country><country mxw-id="DS660725004" load-source="docdb">PL</country><country mxw-id="DS660625501" load-source="docdb">PT</country><country mxw-id="DS660703291" load-source="docdb">RO</country><country mxw-id="DS660625502" load-source="docdb">RS</country><country mxw-id="DS660725005" load-source="docdb">SE</country><country mxw-id="DS660788745" load-source="docdb">SI</country><country mxw-id="DS660624805" load-source="docdb">SK</country><country mxw-id="DS660624806" load-source="docdb">SM</country><country mxw-id="DS660709507" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139079354" ref-ucid="WO-2014127866-A1" lang="EN" load-source="patent-office"><p num="0000">A CAN-CAN interconnection device (5) able to transmit data frames received from a first CAN bus (2) to a second CAN bus (3), receives data frames of a first type each comprising an arbitration identifier coded on 11 bits and associated with a priority given to each frame, and data frames of a second type of lower priorities with an identifier coded on 29 bits, stores the data frames of the first type in a RAM memory (51) of MPFO type, stores the data frames of the second type in a RAM memory (52) of FIFO type, transmits the data frames of the first type to the second CAN bus (3) in order of priority as long as the RAM memory (51) of MPFO type is not empty and transmits the data frames of the second type to the second CAN bus (3) in order of arrival, when the RAM memory (51) of MPFO type is empty.</p></abstract><abstract mxw-id="PA139545909" ref-ucid="WO-2014127866-A1" lang="EN" source="national office" load-source="docdb"><p>A CAN-CAN interconnection device (5) able to transmit data frames received from a first CAN bus (2) to a second CAN bus (3), receives data frames of a first type each comprising an arbitration identifier coded on 11 bits and associated with a priority given to each frame, and data frames of a second type of lower priorities with an identifier coded on 29 bits, stores the data frames of the first type in a RAM memory (51) of MPFO type, stores the data frames of the second type in a RAM memory (52) of FIFO type, transmits the data frames of the first type to the second CAN bus (3) in order of priority as long as the RAM memory (51) of MPFO type is not empty and transmits the data frames of the second type to the second CAN bus (3) in order of arrival, when the RAM memory (51) of MPFO type is empty.</p></abstract><abstract mxw-id="PA139079355" ref-ucid="WO-2014127866-A1" lang="FR" load-source="patent-office"><p num="0000">Un dispositif (5) d'interconnexion CAN-CAN apte à transmettre des trames de données reçues d'un premier bus CAN (2) vers un deuxième bus CAN (3), reçoit des trames de données d'un premier type comportant chacune un identifiant d'arbitrage codé sur 11 bits associé à une priorité donnée à chaque trame, et des trames de données d'un deuxième type de moindres priorités avec un identifiant codé sur 29 bits, stocke les trames de données du premier type dans une mémoire RAM (51) de type MPFO, stocke les trames de données du deuxième type dans une mémoire RAM (52) de type FIFO, transmet au deuxième bus CAN (3) les trames de données du premier type par ordre de priorité tant que la mémoire RAM (51) de type MPFO n'est pas vide et transmet au deuxième bus CAN (3), quand la mémoire (51) RAM de type MPFO est vide, les trames de données du deuxième type par ordre d'arrivée.</p></abstract><abstract mxw-id="PA139545910" ref-ucid="WO-2014127866-A1" lang="FR" source="national office" load-source="docdb"><p>Un dispositif (5) d'interconnexion CAN-CAN apte à transmettre des trames de données reçues d'un premier bus CAN (2) vers un deuxième bus CAN (3), reçoit des trames de données d'un premier type comportant chacune un identifiant d'arbitrage codé sur 11 bits associé à une priorité donnée à chaque trame, et des trames de données d'un deuxième type de moindres priorités avec un identifiant codé sur 29 bits, stocke les trames de données du premier type dans une mémoire RAM (51) de type MPFO, stocke les trames de données du deuxième type dans une mémoire RAM (52) de type FIFO, transmet au deuxième bus CAN (3) les trames de données du premier type par ordre de priorité tant que la mémoire RAM (51) de type MPFO n'est pas vide et transmet au deuxième bus CAN (3), quand la mémoire (51) RAM de type MPFO est vide, les trames de données du deuxième type par ordre d'arrivée.</p></abstract><description mxw-id="PDES78477931" ref-ucid="WO-2014127866-A1" lang="FR" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> PROCEDE ET DISPOSITI F DE TRANSMISSI ON DE TRAMES ENTRE DEUX </p><p id="p0002" num="0002"> BUS CAN </p><p id="p0003" num="0003">La présente invention concerne la gestion de la transmission de données entre deux bus CAN reliés entre eux par un dispositif d'interconnexion CAN -CAN. </p><p id="p0004" num="0004"> Le domaine de l'invention concerne plus particulièrement, bien que non exclusivement, le domaine de l'automobile. </p><p id="p0005" num="0005"> Aujourd'hui, les véhicules automobiles sont généralement équipés de plusieurs réseaux CAN (initiales anglo-saxonnes mises pour Controller Area Network) permettant à plusieurs calculateurs de communiquer entre eux. Lorsqu'un calculateur d'un premier réseau CAN doit transmettre des données à un calculateur d'un deuxième réseau CAN, ces données doivent transiter impérativement par un pont CAN-CAN interconnectant les bus CAN des deux réseaux CAN. </p><p id="p0006" num="0006"> A la différence d'une passerelle, le rôle d'un pont CAN-CAN est de recopier sans modification une trame reçue du premier bus dans le deuxième bus, dès que ce deuxième bus est apte à recevoir des données. La figure 1 illustre de façon schématique et simplifiée la structure classique d'un pont d'interconnexion CAN-CAN 1 bi directionnel interconnectant un premier bus CAN 2 et un deuxième bus CAN 3. Pour la transmission des trames CAN du premier bus 2 vers le second bus 3, le pont CAN-CAN 1 comporte généralement une mémoire 10 RAM de type MPFO (initiales anglo-saxonnes mises pour Most Priority First Out) dont le rôle est de stocker les trames CAN reçues du premier bus 2 tant que le deuxième bus 3 est occupé, et de transmettre à nouveau, dès que le deuxième bus 3 est libre, les trames stockées en tenant compte de leur priorité. Par souci de simplification, les éléments du pont 1 permettant de gérer les priorités n'ont pas été représentés. Le pont CAN-CAN 1 comporte également une mémoire 11 RAM du même type pour la transmission des trames dans l'autre sens. </p><p id="p0007" num="0007"> Conformément aux normes ISO 11898, toutes les trames de données CAN ont la même structure, illustrée schématiquement sur la figure 2. Plus précisément, une trame de donnée CAN 4 comporte classiquement sept 
<!-- EPO <DP n="4"/>-->
 champs différents : </p><p id="p0008" num="0008"> - un champ 40 de début de trame ou SOF (initiales anglo-saxonnes mises pour Start Of Frame) composé généralement de 1 bit, </p><p id="p0009" num="0009"> - un champ 41 d'arbitrage de 12 ou 32 bits, comportant un identifiant I D de la trame composé de 11 ou 29 bits, </p><p id="p0010" num="0010"> - un champ 42 de contrôle composé de 6 bits, </p><p id="p0011" num="0011"> - un champ 43 de données composé de 0 à 64 bits, </p><p id="p0012" num="0012"> - un champ 44 de contrôle de redondance ou CRC (initiales anglo- saxonnes mises pour Cyclic Redundancy Check) composé de 16 bits, </p><p id="p0013" num="0013"> - un champ 45 d'acquittement composé de 2 bits, </p><p id="p0014" num="0014"> - un champ 46 de fin de trame ou EOF (initiales anglo-saxonnes mises pour End Of Frame) composé généralement de 7 bits. </p><p id="p0015" num="0015">Dans la structure précédente, c'est l'identifiant ID contenu dans le champ 41 d'arbitrage qui permet d'indiquer la priorité donnée à une trame CAN, et qui permet par suite au pont CAN-CAN 1 de gérer la recopie des trames stockées dans ses mémoires MPFO 10 et 11 selon leurs priorités relatives. Aujourd'hui, dans le domaine de l'automobile, toutes les trames de données possèdent un identifiant codés sur 11 bits, ce qui donne une possibilité d'avoir 2<sup>11</sup> identifiants différents. De plus, la structure des trames de données précédemment décrite est également utilisée pour faire circuler des trames dites de diagnostic, permettant de détecter des pannes spécifiques lors d'un contrôle du véhicule en usine, ou lors de l'entretien du véhicule par un concessionnaire ou un garagiste. Ces trames de diagnostic circulent à la demande d'un outil de diagnostic branché de façon temporaire sur le véhicule. </p><p id="p0016" num="0016"> Les trames diagnostic ne doivent pas être traitées de façon prioritaire pour ne pas venir perturber les autres trames et risquer de détecter des fausses pannes. Une plage de valeurs d'identifiants parmi les 2<sup>11</sup> identifiants possibles est donc réservée aux trames de diagnostic pour leur donner une priorité la plus faible possible. 
<!-- EPO <DP n="5"/>-->
 Or, cette plage réservée à faible priorité est arrivée à épuisement et il est souhaitable dorénavant, comme l'autorisent les normes, de basculer, pour ces trames de diagnostic, à un identifiant codé sur 29 bits et non plus sur 11 bits. </p><p id="p0017" num="0017"> Ce faisant, il est apparu que la structure du pont CAN-CAN 1 tel qu'illustrée sur la figure 1 n'est plus adaptée. Une première solution pourrait consister à dimensionner les mémoires RAM MPFO 10 et 11 pour qu'elles puissent stocker des trames avec un identifiant codé par défaut sur 29 bits, comme illustré schématiquement sur la figure 3a. Cette solution génère un surcoût. De plus, comme ces mémoires devront stocker simultanément des trames de données (identifiant de 11 bits) et des trames de diagnostic (identifiants de 29 bits), le taux d'occupation de la mémoire MPFO ne serait pas optimisé, comme montré schématiquement sur la figure 3b (place perdue représentée dans les zones hachurées). Enfin et surtout, la gestion des priorités par le pont CAN-CAN 1 de la figure 1 devient beaucoup plus complexe à réaliser puisqu'il doit comparer des identifiants codés sur 11 bits avec des identifiants codés sur 29 bits. </p><p id="p0018" num="0018"> La présente invention a pour but de pallier les limitations de l'art antérieur en proposant un procédé de transmission de trames CAN et une structure de dispositif d'interconnexion CAN-CAN adaptés. </p><p id="p0019" num="0019"> Pour ce faire, un premier objet de l'invention est un procédé de transmission de trames d'un premier bus CAN vers un deuxième bus CAN au travers d'un dispositif d'interconnexion CAN-CAN, comportant les étapes suivantes: </p><p id="p0020" num="0020"> -génération et transmission sur le premier bus CAN de trames de données d'un premier type comportant chacune un champ d'arbitrage contenant un identifiant codé sur 11 bits associé à une priorité donnée à chaque trame ; </p><p id="p0021" num="0021"> -génération et transmission sur le premier bus CAN de trames de données d'un deuxième type, de priorités inférieures aux trames de données du premier type, chaque trame de données du deuxième type comportant un champ d'arbitrage contenant un identifiant codé sur 29 bits; 
<!-- EPO <DP n="6"/>-->
 -réception et séparation par le dispositif d'interconnexion CAN-CAN des trames de données de premier type et de deuxième type ; </p><p id="p0022" num="0022"> -stockage des trames de données du premier type reçues dans une mémoire RAM de type MPFO du dispositif d'interconnexion CAN-CAN; </p><p id="p0023" num="0023"> -stockage des trames de données du deuxième type reçues dans une mémoire RAM de type FIFO du dispositif d'interconnexion CAN-CAN; </p><p id="p0024" num="0024"> -transmission au deuxième bus CAN des trames de données du premier type par ordre de priorité tant que la mémoire RAM de type MPFO n'est pas vide; </p><p id="p0025" num="0025"> -transmission au deuxième bus CAN, quand la mémoire RAM de type</p><p id="p0026" num="0026">MPFO est vide, des trames de données du deuxième type par ordre d'arrivée. </p><p id="p0027" num="0027">Selon d'autres particularités possibles additionnelles ou combinées : -le premier et le deuxième bus CAN étant chacun intégré dans un réseau CAN d'un véhicule motorisé, les trames de données de premier type sont relatives à des données applicatives susceptibles d'être échangées entre les réseaux CAN, et les trames de données de deuxième type sont relatives à des données de diagnostic susceptibles d'être demandées par un outil de diagnostic externe connecté au deuxième bus CAN ; </p><p id="p0028" num="0028"> -l'étape de séparation comprend l'extraction du nombre de bits contenus dans le champ d'arbitrage de chaque trame reçue. </p><p id="p0029" num="0029"> - En variante, l'étape de séparation comprend l'extraction de l'identifiant de chaque trame reçue, et la comparaison de l'identifiant extrait avec une liste pré définie d'identifiants réservée aux trames de données de deuxième type. </p><p id="p0030" num="0030"> L'invention a également pour objet un dispositif d'interconnexion CANCAN apte à transmettre des trames de données reçues d'un premier bus CAN vers un deuxième bus CAN, les trames de données reçues étant soit des trames de données d'un premier type comportant chacune un champ d'arbitrage contenant un identifiant codé sur 11 bits associé à une priorité donnée à chaque trame, soit des trames de données d'un deuxième type, de priorités inférieures aux trames de données du premier type, chaque trame de 
<!-- EPO <DP n="7"/>-->
 données du deuxième type comportant un champ d'arbitrage contenant un identifiant codé sur 29 bits, le dispositif comportant : </p><p id="p0031" num="0031"> - un module séparateur des trames de données reçues du premier bus, apte à séparer les trames de données du premier type des trames de données du deuxième type; </p><p id="p0032" num="0032"> - une mémoire RAM de type MPFO apte à stocker les trames de données du premier type issues du module séparateur de trames; </p><p id="p0033" num="0033"> - une mémoire RAM de type FIFO apte à stocker des trames de données du deuxième type issues du module séparateur de trames; </p><p id="p0034" num="0034"> - un module de multiplexage dont les entrées sont connectées aux sorties de la mémoire RAM de type MPFO et de la mémoire RAM de type FIFO, le module de multiplexage étant apte à transmettre au deuxième bus CAN des trames de données du premier type par ordre de priorité tant que la mémoire RAM de type MPFO n'est pas vide et à transmettre au deuxième bus CAN, quand la mémoire RAM de type MPFO est vide, des trames de données du deuxième type par ordre d'arrivée. </p><p id="p0035" num="0035"> Avantageusement, la mémoire RAM de type MPFO peut faire partie d'un premier pont CAN-CAN de type MPFO compris dans le dispositif et la mémoire RAM de type FIFO peut faire partie d'un deuxième pont CAN-CAN de type FIFO compris également dans le dispositif. </p><p id="p0036" num="0036"> L'invention et les avantages qu'elle procure seront mieux compris au vu de la description suivante d'un exemple non limitatif de mise en œuvre de l'invention, faite en référence aux figures annexées, dans lesquelles : </p><p id="p0037" num="0037"> - la figure 1, déjà décrite ci-avant, représente schématiquement la structure d'un pont CAN-CAN bidirectionnel connu; </p><p id="p0038" num="0038"> - la figure 2, déjà décrite ci-avant, représente la structure normalisée d'une trame de données CAN ; </p><p id="p0039" num="0039"> - les figures 3a et 3b, déjà décrites ci-avant, illustrent des exemples de mémoires de type MPFO stockant des trames avec des identifiants codés sur des nombres différents de bits; </p><p id="p0040" num="0040"> - la figure 4 illustre différentes étapes susceptibles d'être mises en œuvre selon l'invention dans le cadre de la transmission de trames de données 
<!-- EPO <DP n="8"/>-->
 et de trames de diagnostic entre deux bus CAN, au travers d'un pont CANCAN; </p><p id="p0041" num="0041"> - la figure 5 représente schématiquement un mode de réalisation possible d'un dispositif d'interconnexion CAN-CAN unidirectionnel apte à être utilisé pour la mise en œuvre du procédé selon la figure 4 ; </p><p id="p0042" num="0042"> - la figure 6 illustre schématiquement un exemple d'occupation des mémoires utilisées dans le dispositif d'interconnexion CAN-CAN de la figure 5. </p><p id="p0043" num="0043">Un procédé de transmission de trames CAN entre un premier bus CAN 2 et un deuxième bus CAN 3 au travers d'un dispositif d'interconnexion CANCAN va à présent être décrit en référence à la figure 4. Par souci d'illustration, on se placera dans le domaine non limitatif de l'automobile, dans lequel on souhaite transmettre par le dispositif d'interconnexion : </p><p id="p0044" num="0044"> - d'une part, des trames de données CAN dites applicatives de priorités diverses ; </p><p id="p0045" num="0045"> - d'autre part, des trames de données CAN de diagnostic, dont les priorités sont inférieures à la priorité d'une quelconque des trames de données CAN applicatives. </p><p id="p0046" num="0046"> Bien entendu, le procédé selon l'invention peut trouver un intérêt dans n'importe quel autre domaine d'application où l'on souhaite transmettre des trames de données CAN de hautes priorités et des trames de données de priorités inférieures. </p><p id="p0047" num="0047"> Conformément au procédé, une étape préalable à la transmission proprement dite au travers du pont d'interconnexion CAN-CAN consiste à générer des trames de données CAN dont le champ d'arbitrage (41 sur la figure 2) est codé sur un nombre différent de bits, selon que les trames sont des trames de données applicatives ou des trames de données de diagnostic (étapes 100 et 110 sur la figure 5, qui peuvent être interverties). De manière préférentielle, les identifiants ID des trames de données applicatives sont codés sur 11 bits, alors que les identifiants ID des trames de données de diagnostic sont codés sur 29 bits. </p><p id="p0048" num="0048"> Lorsque le dispositif d'interconnexion CAN-CAN reçoit les trames générées par le premier bus 2 (étape 120), il les discrimine pour leur affecter 
<!-- EPO <DP n="9"/>-->
 un traitement propre au type de trame reçu. Cette étape de discrimination, référencée 130 sur la figure 5, s'effectue par exemple en extrayant l'identificateur ID de chaque trame reçue et en reconnaissant le nombre de bits utilisés pour le codage de cet identificateur, ou plus simplement en extrayant le nombre de bits contenus dans le champ d'arbitrage. En variante, le dispositif d'interconnexion dispose d'une liste d'identifiants utilisés uniquement pour le diagnostic, et reconnaît si la trame reçue a un identifiant contenu dans cette liste. </p><p id="p0049" num="0049"> Comme cela a été indiqué précédemment, un dispositif d'interconnexion CAN-CAN doit recopier les données qu'il reçoit telles quelles, et les transmettre dès que le deuxième bus est disponible. En attendant la disponibilité du deuxième bus, ces données doivent être stockées dans le dispositif d'interconnexion. Le stockage diffère selon le type de trames de données reçues. Plus précisément, les trames de données applicatives, pour lesquelles l'identificateur ID est codé sur 11 bits, sont stockées dans une mémoire RAM de type MPFO (étape 140). De manière différente, les trames de données de diagnostic, pour lesquelles l'identificateur ID est codé sur 29 bits, sont stockées dans une mémoire RAM de type FIFO (initiales anglo-saxonnes mises pour First I n- First Out) du dispositif d'interconnexion (étape 150). </p><p id="p0050" num="0050"> Les trames de données ainsi stockées sont alors transmises par le dispositif d'interconnexion CAN-CAN au deuxième bus 3 selon les règles suivantes (étape 160) : </p><p id="p0051" num="0051"> - les trames de données applicatives stockées dans la mémoire RAM de type MPFO sont transmises par ordre de priorité et ce, tant que la mémoire de type MPFO n'est pas vide ; </p><p id="p0052" num="0052"> - dès que la mémoire de type MPFO est vide, les trames de données de diagnostic stockées dans la mémoire RAM de type FIFO sont transmises par ordre d'arrivée dans la mémoire. </p><p id="p0053" num="0053"> La figure 5 illustre schématiquement un dispositif 5 d'interconnexion CAN-CAN pour la mise en œuvre des étapes 120 à 160. </p><p id="p0054" num="0054"> Le dispositif 5 comprend essentiellement : 
<!-- EPO <DP n="10"/>-->
 - un module 50 séparateur des trames reçues du premier bus 2, apte à discriminer, par leur identifiant, les trames de données applicatives des trames de données de diagnostic ; </p><p id="p0055" num="0055"> - une mémoire RAM 51 de type MPFO dimensionnée pour stocker des trames de données applicatives avec un identifiant codé sur 11 bits ; </p><p id="p0056" num="0056"> - une mémoire RAM 52 de type FIFO dimensionnée pour stocker des trames de données de diagnostic avec un identifiant codé sur 29 bits ; </p><p id="p0057" num="0057"> - un module 53 de multiplexage dont les entrées sont reliées aux sorties des mémoires 51 et 52, ce module 53 étant apte à transmettre au deuxième bus 3, d'abord les trames de données applicatives, dans leur ordre de priorité, puis, seulement lorsque la mémoire RAM 51 de type MPFO est vide, les trames de données de diagnostic en respectant leur ordre d'arrivée dans le dispositif d'interconnexion. II convient de remarquer que le dispositif 5 décrit sur la figure 6 peut être un composant spécifique comprenant tous les élément ci-dessus, ainsi que les différents modules logiciels (non représentés) permettant d'une part, le traitement des données stockées dans la mémoire 51 par ordre de priorité et, d'autre part, le traitement des données stockées dans la mémoire 52 par ordre d'arrivée, sous la condition d'avoir une mémoire 51 vide. </p><p id="p0058" num="0058"> En variante, le dispositif 5 d'interconnexion CAN-CAN peut être vu comme l'association de deux ponts CAN-CAN déjà connus : </p><p id="p0059" num="0059"> - un premier pont 1 CAN-CAN à gestion des priorités, identique à celui décrit en référence à la figure 1 ; </p><p id="p0060" num="0060"> - un deuxième pont 6 CAN-CAN à gestion FIFO, </p><p id="p0061" num="0061"> auxquels on a rajouté le module 50 séparateur des trames reçues, le module 53 de multiplexage, et un module logiciel (non représenté) de gestion du module 53 de multiplexage pour qu'il soit apte à délivrer les trames selon les règles indiquées ci-avant. </p><p id="p0062" num="0062"> Dans tous les cas, on obtient une bonne gestion de la transmission des trames de données selon leur priorité et selon leur type, tout en optimisant l'occupation des deux mémoires. 
<!-- EPO <DP n="11"/>-->
 Bien entendu, le dispositif d'interconnexion peut être également bi directionnel, auquel cas il comprendra une structure similaire permettant la transmission de trames de données applicatives et de diagnostic du bus 3 vers le bus 2. 
</p></description><claims mxw-id="PCLM70078212" ref-ucid="WO-2014127866-A1" lang="FR" load-source="patent-office"><claim id="clm-0001" num="1"><!-- EPO <DP n="12"/>--><claim-text/><claim-text>REVENDI CATI ONS </claim-text><claim-text> Procédé de transmission de trames d'un premier bus CAN (2) vers un deuxième bus CAN (3) au travers d'un dispositif (5) d'interconnexion CAN-CAN, comportant les étapes suivantes: </claim-text><claim-text> - génération (100) et transmission sur le premier bus CAN (2) de trames de données d'un premier type comportant chacune un champ (41) d'arbitrage contenant un identifiant codé sur 11 bits associé à une priorité donnée à chaque trame ; </claim-text><claim-text> - génération (110) et transmission sur le premier bus CAN (2) de trames de données d'un deuxième type, de priorités inférieures aux trames de données du premier type, chaque trame de données du deuxième type comportant un champ (41) d'arbitrage contenant un identifiant codé sur 29 bits; </claim-text><claim-text> - réception (120) et séparation (130) par le dispositif (5) d'interconnexion CAN-CAN des trames de données de premier type et de deuxième type ; </claim-text><claim-text> - stockage (140) des trames de données du premier type reçues dans une mémoire RAM de type MPFO du dispositif (5) d'interconnexion CANCAN; </claim-text><claim-text> - stockage (150) des trames de données du deuxième type reçues dans une mémoire RAM de type FIFO du dispositif (5) d'interconnexion CAN-CAN; </claim-text><claim-text> - transmission au deuxième bus CAN (3) des trames de données du premier type par ordre de priorité tant que la mémoire RAM de type MPFO n'est pas vide; </claim-text><claim-text> - transmission au deuxième bus CAN (3), quand la mémoire RAM de type MPFO est vide, des trames de données du deuxième type par ordre d'arrivée. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. Procédé de transmission selon la revendication 1, caractérisé en ce que, le premier et le deuxième bus CAN étant chacun intégré dans un réseau 
<!-- EPO <DP n="13"/>-->
 CAN d'un véhicule motorisé, les trames de données de premier type sont relatives à des données applicatives susceptibles d'être échangées entre les réseaux CAN, et les trames de données de deuxième type sont relatives à des données de diagnostic susceptibles d'être demandées par un outil de diagnostic externe connecté au deuxième bus CAN. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. Procédé de transmission selon la revendication 1 ou la revendication 2, caractérisé en ce que l'étape (130) de séparation comprend l'extraction du nombre de bits contenus dans le champ (41) d'arbitrage de chaque trame reçue. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. Procédé de transmission selon la revendication 1 ou la revendication 2, caractérisé en ce que l'étape (130) de séparation comprend l'extraction de l'identifiant de chaque trame reçue, et la comparaison de l'identifiant extrait avec une liste pré définie d'identifiants réservée aux trames de données de deuxième type. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. Dispositif (5) d'interconnexion CAN-CAN apte à transmettre des trames de données reçues d'un premier bus CAN (2) vers un deuxième bus CAN (3), les trames de données reçues étant soit des trames de données d'un premier type comportant chacune un champ (41) d'arbitrage contenant un identifiant codé sur 11 bits associé à une priorité donnée à chaque trame, soit des trames de données d'un deuxième type, de priorités inférieures aux trames de données du premier type, chaque trame de données du deuxième type comportant un champ (41) d'arbitrage contenant un identifiant codé sur 29 bits, le dispositif comportant : </claim-text><claim-text> - un module (50) séparateur des trames de données reçues du premier bus, apte à séparer les trames de données du premier type des trames de données du deuxième type; </claim-text><claim-text> - une mémoire RAM (51) de type MPFO apte à stocker les trames de données du premier type issues du module (50) séparateur de trames; 
<!-- EPO <DP n="14"/>-->
 - une mémoire RAM (52) de type FIFO apte à stocker des trames de données du deuxième type issues du module (50) séparateur de trames; </claim-text><claim-text> - un module (53) de multiplexage dont les entrées sont connectées aux sorties de la mémoire RAM (51) de type MPFO et de la mémoire RAM (52) de type FIFO, le module (53) de multiplexage étant apte à transmettre au deuxième bus CAN (3) des trames de données du premier type par ordre de priorité tant que la mémoire RAM (51) de type MPFO n'est pas vide et à transmettre au deuxième bus CAN (3), quand la mémoire RAM de type MPFO est vide, des trames de données du deuxième type par ordre d'arrivée. </claim-text><claim-text> Dispositif (5) d'interconnexion CAN-CAN selon la revendication 5, caractérisé en ce que les trames de données de premier type sont relatives à des données applicatives susceptibles d'être échangées entre deux réseaux CAN d'un véhicule motorisé, et les trames de données de deuxième type sont relatives à des données de diagnostic susceptibles d'être demandées par un outil de diagnostic externe connecté au deuxième bus CAN. </claim-text><claim-text>Dispositif (5) d'interconnexion CAN-CAN selon la revendication 5 ou la revendication 6, caractérisé en ce que la mémoire RAM (51) de type MPFO fait partie d'un premier pont CAN-CAN de type MPFO compris dans le dispositif et en ce que la mémoire RAM (52) de type FIFO fait partie d'un deuxième pont CAN-CAN de type FIFO compris dans le dispositif. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
