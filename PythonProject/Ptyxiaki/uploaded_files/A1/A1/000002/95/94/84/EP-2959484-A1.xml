<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959484-A1" country="EP" doc-number="2959484" kind="A1" date="20151230" family-id="51351896" file-reference-id="304358" date-produced="20180825" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160453177" ucid="EP-2959484-A1"><document-id><country>EP</country><doc-number>2959484</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13763383-A" is-representative="NO"><document-id mxw-id="PAPP193869322" load-source="docdb" format="epo"><country>EP</country><doc-number>13763383</doc-number><kind>A</kind><date>20130903</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193869323" load-source="patent-office" format="original"><country>EP</country><doc-number>13763383.0</doc-number><date>20130903</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162027580" ucid="US-2013057869-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2013057869</doc-number><kind>W</kind><date>20130903</date></document-id></priority-claim><priority-claim mxw-id="PPC162028639" ucid="US-201314015984-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201314015984</doc-number><kind>A</kind><date>20130830</date></document-id></priority-claim><priority-claim mxw-id="PPC162028580" ucid="US-201361767439-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201361767439</doc-number><kind>P</kind><date>20130221</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988524178" load-source="docdb">G10L  19/24        20130101AFI20140905BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1987773605" load-source="docdb" scheme="CPC">G10L  19/12        20130101 FI20140821BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1987776884" load-source="docdb" scheme="CPC">G10L  19/24        20130101 LI20151120BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165550997" lang="DE" load-source="patent-office">SYSTEME UND VERFAHREN ZUR STEUERUNG EINER DURCHSCHNITTLICHEN CODIERUNGSRATE</invention-title><invention-title mxw-id="PT165550998" lang="EN" load-source="patent-office">SYSTEMS AND METHODS FOR CONTROLLING AN AVERAGE ENCODING RATE</invention-title><invention-title mxw-id="PT165550999" lang="FR" load-source="patent-office">SYSTÈMES ET PROCÉDÉS PERMETTANT DE COMMANDER UN TAUX DE CODAGE MOYEN</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103314905" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>QUALCOMM INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR1103331052" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>QUALCOMM INCORPORATED</last-name></addressbook></applicant><applicant mxw-id="PPAR1101652705" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Qualcomm Incorporated</last-name><iid>101331414</iid><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103302957" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SUBASINGHA SUBASINGHA SHAMINDA</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103324000" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SUBASINGHA, SUBASINGHA SHAMINDA</last-name></addressbook></inventor><inventor mxw-id="PPAR1101653149" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SUBASINGHA, SUBASINGHA SHAMINDA</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103344954" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>RAJENDRAN VIVEK</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103328190" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>RAJENDRAN, VIVEK</last-name></addressbook></inventor><inventor mxw-id="PPAR1101650824" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>RAJENDRAN, VIVEK</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103325769" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>KRISHNAN VENKATESH</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103331182" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>KRISHNAN, VENKATESH</last-name></addressbook></inventor><inventor mxw-id="PPAR1101645709" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>KRISHNAN, VENKATESH</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103344542" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>ATTI VENKATRAMAN SRINIVASA</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332369" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>ATTI, Venkatraman Srinivasa</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648807" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>ATTI, Venkatraman Srinivasa</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101645001" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Loveless, Ian Mark</last-name><suffix>et al</suffix><iid>101262271</iid><address><street>Reddie &amp; Grose LLP 16 Theobalds Road</street><city>London WC1X 8PL</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2013057869-W"><document-id><country>US</country><doc-number>2013057869</doc-number><kind>W</kind><date>20130903</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014130085-A1"><document-id><country>WO</country><doc-number>2014130085</doc-number><kind>A1</kind><date>20140828</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660712514" load-source="docdb">AL</country><country mxw-id="DS660791955" load-source="docdb">AT</country><country mxw-id="DS660712520" load-source="docdb">BE</country><country mxw-id="DS660716372" load-source="docdb">BG</country><country mxw-id="DS660634505" load-source="docdb">CH</country><country mxw-id="DS660721966" load-source="docdb">CY</country><country mxw-id="DS660791956" load-source="docdb">CZ</country><country mxw-id="DS660712521" load-source="docdb">DE</country><country mxw-id="DS660721975" load-source="docdb">DK</country><country mxw-id="DS660721976" load-source="docdb">EE</country><country mxw-id="DS660633333" load-source="docdb">ES</country><country mxw-id="DS660716373" load-source="docdb">FI</country><country mxw-id="DS660716374" load-source="docdb">FR</country><country mxw-id="DS660712522" load-source="docdb">GB</country><country mxw-id="DS660721977" load-source="docdb">GR</country><country mxw-id="DS660712527" load-source="docdb">HR</country><country mxw-id="DS660791957" load-source="docdb">HU</country><country mxw-id="DS660634506" load-source="docdb">IE</country><country mxw-id="DS660721978" load-source="docdb">IS</country><country mxw-id="DS660716379" load-source="docdb">IT</country><country mxw-id="DS660722055" load-source="docdb">LI</country><country mxw-id="DS660741496" load-source="docdb">LT</country><country mxw-id="DS660791958" load-source="docdb">LU</country><country mxw-id="DS660741497" load-source="docdb">LV</country><country mxw-id="DS660741498" load-source="docdb">MC</country><country mxw-id="DS660636246" load-source="docdb">MK</country><country mxw-id="DS660636255" load-source="docdb">MT</country><country mxw-id="DS660791959" load-source="docdb">NL</country><country mxw-id="DS660633334" load-source="docdb">NO</country><country mxw-id="DS660634511" load-source="docdb">PL</country><country mxw-id="DS660741508" load-source="docdb">PT</country><country mxw-id="DS660791960" load-source="docdb">RO</country><country mxw-id="DS660741509" load-source="docdb">RS</country><country mxw-id="DS660634512" load-source="docdb">SE</country><country mxw-id="DS660741510" load-source="docdb">SI</country><country mxw-id="DS660633343" load-source="docdb">SK</country><country mxw-id="DS660634513" load-source="docdb">SM</country><country mxw-id="DS660636256" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139073753" ref-ucid="WO-2014130085-A1" lang="EN" load-source="patent-office"><p num="0000">A method for controlling an average encoding rate by an electronic device is described. The method includes obtaining a speech signal. The method also includes determining a first average rate. The method further includes determining a first threshold based on the first average rate. The method additionally includes controlling the average encoding rate by determining at least one other threshold based on the first threshold. The method also includes sending an encoded speech signal.</p></abstract><abstract mxw-id="PA139541402" ref-ucid="WO-2014130085-A1" lang="EN" source="national office" load-source="docdb"><p>A method for controlling an average encoding rate by an electronic device is described. The method includes obtaining a speech signal. The method also includes determining a first average rate. The method further includes determining a first threshold based on the first average rate. The method additionally includes controlling the average encoding rate by determining at least one other threshold based on the first threshold. The method also includes sending an encoded speech signal.</p></abstract><abstract mxw-id="PA139073754" ref-ucid="WO-2014130085-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention concerne un procédé de commande d'un taux de codage moyen avec un dispositif électronique. Le procédé comprend l'obtention d'un signal de parole. Le procédé comprend également la détermination d'un premier taux moyen. Le procédé comprend en outre la détermination d'un premier seuil en fonction du premier taux moyen. Le procédé comprend par ailleurs la commande du taux de codage moyen en déterminant au moins un autre seuil d'après le premier seuil. Le procédé comprend également l'envoi d'un signal de parole codé.</p></abstract><abstract mxw-id="PA139541403" ref-ucid="WO-2014130085-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention concerne un procédé de commande d'un taux de codage moyen avec un dispositif électronique. Le procédé comprend l'obtention d'un signal de parole. Le procédé comprend également la détermination d'un premier taux moyen. Le procédé comprend en outre la détermination d'un premier seuil en fonction du premier taux moyen. Le procédé comprend par ailleurs la commande du taux de codage moyen en déterminant au moins un autre seuil d'après le premier seuil. Le procédé comprend également l'envoi d'un signal de parole codé.</p></abstract><description mxw-id="PDES78477060" ref-ucid="WO-2014130085-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> SYSTEMS AND METHODS FOR CONTROLLING AN AVERAGE </p><p id="p0002" num="0002"> ENCODING RATE </p><p id="p0003" num="0003">RELATED APPLICATIONS </p><p id="p0004" num="0004"> [0001] This application is related to and claims priority to U.S. Provisional Patent Application Serial No. 61/767,439 filed February 21, 2013, for "SYSTEMS AND METHODS FOR CONTROLLING AN AVERAGE RATE." </p><p id="p0005" num="0005">TECHNICAL FIELD </p><p id="p0006" num="0006"> [0002] The present disclosure relates generally to electronic devices. More specifically, the present disclosure relates to systems and methods for controlling an average encoding rate. </p><p id="p0007" num="0007">BACKGROUND </p><p id="p0008" num="0008"> [0003] In the last several decades, the use of electronic devices has become common. In particular, advances in electronic technology have reduced the cost of increasingly complex and useful electronic devices. Cost reduction and consumer demand have proliferated the use of electronic devices such that they are practically ubiquitous in modern society. As the use of electronic devices has expanded, so has the demand for new and improved features of electronic devices. More specifically, electronic devices that perform new functions and/or that perform functions faster, more efficiently or with higher quality are often sought after. </p><p id="p0009" num="0009"> [0004] Some electronic devices (e.g., cellular phones, smartphones, audio recorders, camcorders, computers, etc.) utilize audio signals. These electronic devices may encode, store and/or transmit the audio signals. For example, a smartphone may obtain, encode and transmit a speech signal for a phone call, while another smartphone may receive and decode the speech signal. </p><p id="p0010" num="0010"> [0005] However, particular challenges arise in encoding, transmitting and/or decoding of audio signals. For example, an electronic device may encode an audio signal at an 
<!-- EPO <DP n="3"/>-->
 undesirable rate, which may occupy too much transmission bandwidth. As can be observed from this discussion, systems and methods that improve encoding may be beneficial. </p><p id="p0011" num="0011">SUMMARY </p><p id="p0012" num="0012"> [0006] A method for controlling an average encoding rate by an electronic device is described. The method includes obtaining a speech signal. The method also includes determining a first average rate. The method further includes determining a first threshold based on the first average rate. The method additionally includes controlling the average encoding rate by determining at least one other threshold based on the first threshold. The method also includes sending an encoded speech signal. The first threshold may classify a frame as a clean frame or a noisy frame. The at least one other threshold may be a threshold set. </p><p id="p0013" num="0013"> [0007] Controlling the average encoding rate may also include determining a frame pattern. A first frame pattern may require a minimum number of high-rate frames between low-rate frames and a second frame pattern may only allow a maximum number of low-rate frames between high-rate frames. </p><p id="p0014" num="0014"> [0008] Determining the at least one other threshold may be further based on a metric. Determining the at least one other threshold may include selecting a first threshold set if the metric is not greater than the first threshold and selecting a second threshold set if the metric is greater than the first threshold. The first threshold set may be a first frame adjustment threshold set and the second threshold set may be a second frame adjustment threshold set. </p><p id="p0015" num="0015"> [0009] Controlling the average encoding rate may include adjusting the first threshold based on the first average rate. Controlling the average encoding rate may include adjusting at least one voicing threshold based on the first average rate. Adjusting the at least one voicing threshold may include selecting a voicing threshold set. </p><p id="p0016" num="0016"> [0010] An electronic device for controlling an average encoding rate is also described. The electronic device includes average rate determination circuitry that determines a first average rate. The electronic device also includes threshold determination circuitry that determines a first threshold based on the first average rate. The electronic device further includes encoding rate controller circuitry that includes the average rate determination 
<!-- EPO <DP n="4"/>-->
 circuitry and the threshold determination circuitry. The encoding rate controller controls the average encoding rate by determining at least one other threshold based on the first threshold. </p><p id="p0017" num="0017"> [0011] A computer-program product for controlling an average encoding rate is also described. The computer-program product includes a non-transitory tangible computer- readable medium with instructions. The instructions include code for causing an electronic device to obtain a speech signal. The instructions also include code for causing the electronic device to determine a first average rate. The instructions further include code for causing the electronic device to determine a first threshold based on the first average rate. The instructions additionally include code for causing the electronic device to control the average encoding rate by determining at least one other threshold based on the first threshold. The instructions also include code for causing the electronic device to send an encoded speech signal. </p><p id="p0018" num="0018"> [0012] An apparatus for controlling an average encoding rate is also described. The apparatus includes means for obtaining a speech signal. The apparatus also includes means for determining a first average rate. The apparatus further includes means for determining a first threshold based on the first average rate. The apparatus additionally includes means for controlling the average encoding rate by determining at least one other threshold based on the first threshold. The apparatus also includes means for sending an encoded speech signal. </p><p id="p0019" num="0019">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0020" num="0020"> [0013] Figure 1 is a block diagram illustrating a general example of an encoder and a decoder; </p><p id="p0021" num="0021"> [0014] Figure 2 is a block diagram illustrating an example of a basic implementation of an encoder and a decoder; </p><p id="p0022" num="0022"> [0015] Figure 3 is a block diagram illustrating one configuration of an electronic device in which systems and methods for controlling an average encoding rate may be implemented; </p><p id="p0023" num="0023"> [0016] Figure 4 is flow diagram illustrating one configuration of a method for controlling an average encoding rate; 
<!-- EPO <DP n="5"/>-->
 [0017] Figure 5 is a flow diagram illustrating one configuration of a method for determining at least one other threshold based on a first threshold and a metric; </p><p id="p0024" num="0024">[0018] Figure 6 is a flow diagram illustrating a more specific configuration of a method for controlling an average encoding rate; </p><p id="p0025" num="0025"> [0019] Figure 7 is a flow diagram illustrating one configuration of a method for decreasing an average encoding rate; </p><p id="p0026" num="0026"> [0020] Figure 8 is a flow diagram illustrating one configuration a method for increasing an average encoding rate; </p><p id="p0027" num="0027"> [0021] Figure 9 is a diagram illustrating examples of voicing threshold sets; </p><p id="p0028" num="0028"> [0022] Figure 10 is a block diagram illustrating one configuration of an encoding rate controller; </p><p id="p0029" num="0029"> [0023] Figure 11 is a flow diagram illustrating another more specific configuration of a method for controlling an average encoding rate; </p><p id="p0030" num="0030"> [0024] Figure 12 is a block diagram illustrating one configuration of a wireless communication device; and </p><p id="p0031" num="0031"> [0025] Figure 13 illustrates various components that may be utilized in an electronic device. </p><p id="p0032" num="0032">DETAILED DESCRIPTION </p><p id="p0033" num="0033"> [0026] Various configurations are now described with reference to the Figures, where like reference numbers may indicate functionally similar elements. The systems and methods as generally described and illustrated in the Figures herein could be arranged and designed in a wide variety of different configurations. Thus, the following more detailed description of several configurations, as represented in the Figures, is not intended to limit scope, as claimed, but is merely representative of the systems and methods. </p><p id="p0034" num="0034">[0027] Figure 1 is a block diagram illustrating a general example of an encoder 104 and a decoder 108. The encoder 104 receives a speech signal 102. The speech signal 102 may be a speech signal in any frequency range. For example, the speech signal 102 may be a full band signal with an approximate frequency range of 0-24 kilohertz (kHz), a superwideband signal with an approximate frequency range of 0-16 kHz, a wideband signal with an approximate frequency range of 0-8 kHz or a narrowband signal with an approximate 
<!-- EPO <DP n="6"/>-->
 frequency range of 0-4 kHz. Other possible frequency ranges for the speech signal 102 include 300-3400 Hz (e.g., the frequency range of the Public Switched Telephone Network (PSTN)), 14-20 kHz, 16-20 kHz and 16-32 kHz. In some configurations, the speech signal 102 may be sampled at 16 kHz and may have an approximate frequency range of 0-8 kHz. </p><p id="p0035" num="0035">[0028] The encoder 104 encodes the speech signal 102 to produce an encoded speech signal 106. In general, the encoded speech signal 106 includes one or more parameters that represent the speech signal 102. One or more of the parameters may be quantized. Examples of the one or more parameters include filter parameters (e.g., weighting factors, line spectral frequencies (LSFs), line spectral pairs (LSPs), immittance spectral frequencies (ISFs), immittance spectral pairs (ISPs), partial correlation (PARCOR) coefficients, reflection coefficients and/or log-area-ratio values, etc.) and parameters included in an encoded excitation signal (e.g., gain factors, pitch lag, (quantized) amplitude information, (quantized) phase information, adaptive codebook indices, adaptive codebook gains, fixed codebook indices and/or fixed codebook gains, etc.). The parameters may correspond to one or more frequency bands. The decoder 108 decodes the encoded speech signal 106 to produce a decoded speech signal 110. For example, the decoder 108 constructs the decoded speech signal 110 based on the one or more parameters included in the encoded speech signal 106. The decoded speech signal 110 may be an approximate reproduction of the original speech signal 102. </p><p id="p0036" num="0036"> [0029] The encoder 104 may be implemented in hardware (e.g., circuitry), software or a combination of both. For example, the encoder 104 may be implemented as an application- specific integrated circuit (ASIC) or as a processor with instructions. Similarly, the decoder 108 may be implemented in hardware (e.g., circuitry), software or a combination of both. For example, the decoder 108 may be implemented as an application-specific integrated circuit (ASIC) or as a processor with instructions. The encoder 104 and the decoder 108 may be implemented on separate electronic devices or on the same electronic device. </p><p id="p0037" num="0037">[0030] In some configurations, the encoder 104 and/or decoder 108 may be included in a speech coding system where speech synthesis is done by passing an excitation signal through a synthesis filter to generate a synthesized speech output (e.g., the decoded speech signal 110). In such a system, an encoder 104 receives the speech signal 102, then windows the speech signal 102 to frames (e.g., 20 millisecond (ms) frames) and generates synthesis 
<!-- EPO <DP n="7"/>-->
 filter parameters and parameters required to generate the corresponding excitation signal. These parameters may be transmitted to the decoder 108 as an encoded speech signal 106. The decoder 108 may use these parameters to generate a synthesis filter (e.g., 1 / A(z)) and the corresponding excitation signal and may pass the excitation signal through the synthesis filter to generate the decoded speech signal 110. Figure 1 may be a simplified block diagram of such a speech encoder/decoder system. </p><p id="p0038" num="0038"> [0031] Figure 2 is a block diagram illustrating an example of a basic implementation of an encoder 204 and a decoder 208. The encoder 204 may be one example of the encoder 104 described in connection with Figure 1. The encoder 204 may include an analysis module 212, a coefficient transform 214, quantizer A 216, inverse quantizer A 218, inverse coefficient transform A 220, an analysis filter 222 and quantizer B 224. One or more of the components of the encoder 204 and/or decoder 208 may be implemented in hardware (e.g., circuitry), software or a combination of both. </p><p id="p0039" num="0039"> [0032] The encoder 204 receives a speech signal 202. It should be noted that the speech signal 202 may include any frequency range as described above in connection with Figure 1 (e.g., an entire band of speech frequencies or a subband of speech frequencies). </p><p id="p0040" num="0040">[0033] In this example, the analysis module 212 encodes the spectral envelope of a speech signal 202 as a set of linear prediction (LP) coefficients (e.g., analysis filter coefficients A(z), which may be applied to produce an all-pole synthesis filter 1/A(z), where z is a complex number). The analysis module 212 typically processes the input signal as a series of non-overlapping frames of the speech signal 202, with a new set of coefficients being calculated for each frame or subframe. In some configurations, the frame period may be a period over which the speech signal 202 may be expected to be locally stationary. One common example of the frame period is 20 ms (equivalent to 160 samples at a sampling rate of 8 kHz, for example). In one example, the analysis module 212 is configured to calculate a set of ten linear prediction coefficients to characterize the formant structure of each 20-ms frame. It is also possible to implement the analysis module 212 to process the speech signal 202 as a series of overlapping frames. </p><p id="p0041" num="0041"> [0034] The analysis module 212 may be configured to analyze the samples of each frame directly, or the samples may be weighted first according to a windowing function (e.g., a Hamming window). The analysis may also be performed over a window that is 
<!-- EPO <DP n="8"/>-->
 larger than the frame, such as a 30-ms window. This window may be symmetric (e.g., 5-20- 5, such that it includes the 5 milliseconds immediately before and after the 20-ms frame) or asymmetric (e.g., 10-20, such that it includes the last 10 ms of the preceding frame). The analysis module 212 is typically configured to calculate the linear prediction coefficients using a Levinson-Durbin recursion or the Leroux-Gueguen algorithm. In another implementation, the analysis module 212 may be configured to calculate a set of cepstral coefficients for each frame instead of a set of linear prediction coefficients. </p><p id="p0042" num="0042">[0035] The output rate of the encoder 204 may be reduced significantly, with relatively little effect on reproduction quality, by quantizing the coefficients. Linear prediction coefficients are difficult to quantize efficiently and are usually mapped into another representation, such as LSFs for quantization and/or entropy encoding. In the example of Figure 2, the coefficient transform 214 transforms the set of coefficients into a corresponding LSF vector (e.g., set of LSFs). Other one-to-one representations of coefficients include LSPs, PARCOR coefficients, reflection coefficients, log- area-ratio values, ISPs and ISFs. For example, ISFs may be used in the GSM (Global System for Mobile Communications) AMR-WB (Adaptive Multirate- Wideband) codec. For convenience, the term "line spectral frequencies," "LSFs," "LSF vectors" and related terms may be used to refer to one or more of LSFs, LSPs, ISFs, ISPs, PARCOR coefficients, reflection coefficients and log-area-ratio values. Typically, a transform between a set of coefficients and a corresponding LSF vector is reversible, but some configurations may include implementations of the encoder 204 in which the transform is not reversible without error. </p><p id="p0043" num="0043"> [0036] Quantizer A 216 is configured to quantize the LSF vector (or other coefficient representation). The encoder 204 may output the result of this quantization as filter parameters 228. Quantizer A 216 typically includes a vector quantizer that encodes the input vector (e.g., the LSF vector) as an index to a corresponding vector entry in a table or codebook. </p><p id="p0044" num="0044"> [0037] As seen in Figure 2, the encoder 204 also generates a residual signal by passing the speech signal 202 through an analysis filter 222 (also called a whitening or prediction error filter) that is configured according to the set of coefficients. The analysis filter 222 may be implemented as a finite impulse response (FIR) filter or an infinite 
<!-- EPO <DP n="9"/>-->
 impulse response (IIR) filter. This residual signal will typically contain perceptually important information of the speech frame, such as long-term structure relating to pitch, that is not represented in the filter parameters 228. Quantizer B 224 is configured to calculate a quantized representation of this residual signal for output as an encoded excitation signal 226. In some configurations, quantizer B 224 includes a vector quantizer that encodes the input vector as an index to a corresponding vector entry in a table or codebook. Additionally or alternatively, quantizer B 224 may be configured to send one or more parameters from which the vector may be generated dynamically at the decoder 208, rather than retrieved from storage, as in a sparse codebook method. Such a method is used in coding schemes such as ACELP (algebraic code-excited linear prediction) and codecs such as 3GPP2 (Third Generation Partnership 2) EVRC (Enhanced Variable Rate Codec). In some configurations, the encoded excitation signal 226 and the filter parameters 228 may be included in an encoded speech signal 106. </p><p id="p0045" num="0045"> [0038] It may be beneficial for the encoder 204 to generate the encoded excitation signal 226 according to the same filter parameter values that will be available to the corresponding decoder 208. In this manner, the resulting encoded excitation signal 226 may already account to some extent for non-idealities in those parameter values, such as quantization error. Accordingly, it may be beneficial to configure the analysis filter 222 using the same coefficient values that will be available at the decoder 208. In the basic example of the encoder 204 as illustrated in Figure 2, inverse quantizer A 218 dequantizes the filter parameters 228. Inverse coefficient transform A 220 maps the resulting values back to a corresponding set of coefficients. This set of coefficients is used to configure the analysis filter 222 to generate the residual signal that is quantized by quantizer B 224. </p><p id="p0046" num="0046">[0039] Some implementations of the encoder 204 are configured to calculate the encoded excitation signal 226 by identifying one among a set of codebook vectors that best matches the residual signal. It is noted, however, that the encoder 204 may also be implemented to calculate a quantized representation of the residual signal without actually generating the residual signal. For example, the encoder 204 may be configured to use a number of codebook vectors to generate corresponding synthesized signals (according to a current set of filter parameters, for example) and to select the codebook vector associated 
<!-- EPO <DP n="10"/>-->
 with the generated signal that best matches the original speech signal 202 in a perceptually weighted domain. </p><p id="p0047" num="0047"> [0040] In some configurations, the encoder 204 may be implemented as a noise-excited linear predictive (NELP) encoder. A NELP encoder may be used to code frames classified as unvoiced speech. NELP coding operates effectively, in terms of signal reproduction, where the speech signal 202 has little or no pitch structure. More specifically, NELP may be used to encode speech that is noise-like in character, such as unvoiced speech or background noise. NELP uses a filtered pseudo-random noise signal to model unvoiced speech. The noise-like character of such speech segments can be reconstructed by generating random signals at the decoder 208 and applying appropriate gains to them. NELP may use a simple model for the coded speech, thereby achieving a lower bit rate. </p><p id="p0048" num="0048">[0041] In some configurations, the encoder 204 may be implemented as a prototype pitch period (PPP) encoder. A PPP encoder may be used to code frames classified as voiced speech. Voiced speech contains slowly time varying periodic components that are exploited by the PPP encoder. The PPP encoder codes a subset of the pitch periods within each frame. The remaining periods of the speech signal 202 are reconstructed by interpolating between these prototype periods. By exploiting the periodicity of voiced speech, the PPP encoder is able to reproduce the speech signal 202 in a perceptually accurate manner. </p><p id="p0049" num="0049">[0042] The decoder 208 may include inverse quantizer B 230, inverse quantizer C 236, inverse coefficient transform B 238 and a synthesis filter 234. Inverse quantizer C 236 dequantizes the filter parameters 228 (an LSF vector, for example), and inverse coefficient transform B 238 transforms the LSF vector into a set of coefficients (for example, as described above with reference to inverse quantizer A 218 and inverse coefficient transform A 220 of the encoder 204). Inverse quantizer B 230 dequantizes the encoded excitation signal 226 to produce an excitation signal 232. Based on the coefficients and the excitation signal 232, the synthesis filter 234 synthesizes a decoded speech signal 210. In other words, the synthesis filter 234 is configured to spectrally shape the excitation signal 232 according to the dequantized coefficients to produce the decoded speech signal 210. In some configurations, the decoder 208 may also provide the excitation signal 232 to another decoder, which may use the excitation signal 232 to derive an excitation signal of another frequency band (e.g., a highband). In some implementations, the decoder 208 may 
<!-- EPO <DP n="11"/>-->
 be configured to provide additional information to another decoder that relates to the excitation signal 232, such as spectral tilt, pitch gain and lag and speech mode. </p><p id="p0050" num="0050">[0043] The system of the encoder 204 and the decoder 208 is a basic example of an analysis-by- synthesis speech codec. Codebook excitation linear prediction coding is one popular family of analysis-by-synthesis coding. Implementations of such coders may perform waveform encoding of the residual, including such operations as selection of entries from fixed and adaptive codebooks, error minimization operations and/or perceptual weighting operations. Other implementations of analysis-by-synthesis coding include code- excited linear prediction (CELP), mixed excitation linear prediction (MELP), ACELP, relaxation CELP (RCELP), regular pulse excitation (RPE), multi-pulse excitation (MPE), multi-pulse CELP (MP-CELP) and vector-sum excited linear prediction (VSELP) coding. Related coding methods include multi-band excitation (MBE) and prototype waveform interpolation (PWI) coding. Examples of standardized analysis-by-synthesis speech codecs include the ETSI (European Telecommunications Standards Institute)-GSM full rate codec (GSM 06.10) (which uses residual excited linear prediction (RELP), the GSM enhanced full rate codec (ETSI-GSM 06.60), the ITU (International Telecommunication Union) standard 11.8 kbps G.729 Annex E coder, the IS (Interim Standard)-641 codecs for IS-136 (a time-division multiple access scheme), the GSM adaptive multirate (GSM-AMR) codecs and the 4GV™ (Fourth-Generation Vocoder™) codec (QUALCOMM Incorporated, San</p><p id="p0051" num="0051">Diego, Calif.). The encoder 204 and corresponding decoder 208 may be implemented according to any of these technologies, or any other speech coding technology (whether known or to be developed) that represents a speech signal as (A) a set of parameters that describe a filter and (B) an excitation signal used to drive the described filter to reproduce the speech signal 202. </p><p id="p0052" num="0052"> [0044] Even after the analysis filter 222 has removed the coarse spectral envelope from the speech signal 202, a considerable amount of fine harmonic structure may remain, especially for voiced speech. Periodic structure is related to pitch, and different voiced sounds spoken by the same speaker may have different formant structures but similar pitch structures. </p><p id="p0053" num="0053"> [0045] Coding efficiency and/or speech quality may be increased by using one or more parameter values to encode characteristics of the pitch structure. One important 
<!-- EPO <DP n="12"/>-->
 characteristic of the pitch structure is the frequency of the first harmonic (also called the fundamental frequency), which is typically in the range of 60 to 400 hertz (Hz). This characteristic is typically encoded as the inverse of the fundamental frequency, also called the pitch lag. The pitch lag indicates the number of samples in one pitch period and may be encoded as one or more codebook indices. Speech signals from male speakers tend to have larger pitch lags than speech signals from female speakers. </p><p id="p0054" num="0054"> [0046] Another signal characteristic relating to the pitch structure is periodicity, which indicates the strength of the harmonic structure or, in other words, the degree to which the signal is harmonic or non-harmonic. Two typical indicators of periodicity are zero crossings and normalized autocorrelation functions (NACFs). Periodicity may also be indicated by the pitch gain, which is commonly encoded as a codebook gain (e.g., a quantized adaptive codebook gain). </p><p id="p0055" num="0055"> [0047] The encoder 204 may include one or more modules configured to encode the long-term harmonic structure of the speech signal 202. In some approaches to CELP encoding, the encoder 204 includes an open-loop LPC analysis module, which encodes the short-term characteristics or coarse spectral envelope, followed by a closed-loop long-term prediction analysis stage, which encodes the fine pitch or harmonic structure. The short- term characteristics are encoded as coefficients (e.g., filter parameters 228), and the long- term characteristics are encoded as values for parameters such as pitch lag and pitch gain. For example, the encoder 204 may be configured to output the encoded excitation signal 226 in a form that includes one or more codebook indices (e.g., a fixed codebook index and an adaptive codebook index) and corresponding gain values. Calculation of this quantized representation of the residual signal (e.g., by quantizer B 224, for example) may include selecting such indices and calculating such values. Encoding of the pitch structure may also include interpolation of a pitch prototype waveform, which operation may include calculating a difference between successive pitch pulses. Modeling of the long-term structure may be disabled for frames corresponding to unvoiced speech, which is typically noise-like and unstructured. </p><p id="p0056" num="0056"> [0048] Some implementations of the decoder 208 may be configured to output the excitation signal 232 to another decoder (e.g., a highband decoder) after the long-term structure (pitch or harmonic structure) has been restored. For example, such a decoder may 
<!-- EPO <DP n="13"/>-->
 be configured to output the excitation signal 232 as a dequantized version of the encoded excitation signal 226. Of course, it is also possible to implement the decoder 208 such that the other decoder performs dequantization of the encoded excitation signal 226 to obtain the excitation signal 232. </p><p id="p0057" num="0057"> [0049] The systems and methods disclosed herein provide approaches for controlling an average encoding rate. For example, some configurations of the systems and methods disclosed herein provide open loop and/or closed loop average encoding rate control for a prototype pitch period (PPP) -based speech encoding system. For clarity, an explanation of some issues that occur in known variable rate encoding systems is given as follows. </p><p id="p0058" num="0058">[0050] In variable rate speech encoding systems, controlling the average encoding rate (e.g., average bit rate, average data rate (ADR), etc.) is utilized to maintain a desired capacity. In a PPP-based speech encoding system, this may be achieved by controlling quarter rate frames (e.g., PPP and/or NELP) frames. For example, Enhanced Variable Rate Codec B (EVRC-B) specifications impose an operating point that has a lower operating bit rate than the desired average encoding rate. Some of the quarter rate PPP frames may be sent in full rate frames until the average encoding rate increases to the desired rate based on last N speech frames. For example, N = 600 frames in EVRC-B specifications. </p><p id="p0059" num="0059">[0051] The operating mode may be selected by setting the PPP and full-rate frame pattern such as QFF, QQF (where Q represents quarter rate PPP frames and F represents full rate frames). In this setting, the lowest rate is dependent on the pattern that yields the highest PPP frame rate. However, increasing the consecutive PPP frames may result in drifting the synthesized waveform from the original. This has potential to create speech artifacts. </p><p id="p0060" num="0060"> [0052] In EVRC-B specifications, a PPP-based encoding system is associated with a rejection mechanism referred to as a "bump-up scheme." In particular, even though the open loop decision-making process classifies a particular frame to be a PPP frame, the bump up mechanism might change the open loop decision, where that frame will be quantized using full rate. For example, the encoder runs a set of checks to verify whether the given frame is suited for the PPP mode of coding. The encoder checks a set of parameters computed in this process against a set of thresholds. These thresholds are referred to as "bump-up" thresholds. If a "bump up" happens, the given frame is encoded 
<!-- EPO <DP n="14"/>-->
 using a higher rate. This increases the average data rate. Accordingly, increasing the PPP frames may not always reduce the rate to the desired lower rate. </p><p id="p0061" num="0061"> [0053] Even when a certain operating point is set, the average rate during last N frames (e.g., 600 frames) can be highly variable. Thus, changing the Q frames to F frames based on past N frames might not result in the desired average encoding rate. Accordingly, the measure of the long-term average rate may be considered in the rate control process. Consequently, changing from one operating point to the next most aggressive operating point to control the average rate may not reduce the rate to the desired level in some cases (e.g., for some languages, in some noisy environments, etc.). In experiments, it was found that using the Q and F frame pattern QFF yields the best quality speech as the two F frames provide enough time to recover from the phase alignment errors due to the quarter rate encoding. </p><p id="p0062" num="0062"> [0054] Some potential issues associated with rate control in a PPP based variable rate speech coding system are given as follows. Even the most aggressive Q and F pattern might not yield the desired average encoding rate due to speech properties and the bump up mechanism. Imposing a more aggressive rate control pattern may cause speech artifacts. The average rate of the past N frames may not represent the next N frames well. The rate during consecutive N frames can be highly variable. </p><p id="p0063" num="0063"> [0055] Figure 3 is a block diagram illustrating one configuration of an electronic device 340 in which systems and methods for controlling an average encoding rate may be implemented. Examples of the electronic device 340 include smartphones, cellular phones, landline phones, headsets, desktop computers, laptop computers, televisions, gaming systems, audio recorders, camcorders, still cameras, automobile consoles, etc. The electronic device 340 may include an encoding rate controller 342, a framing and preprocessing module 350, selectors 354a-b and/or one or more encoders 356a-n. One or more of the components of the electronic device 340 may be implemented in hardware (e.g., circuitry), software or a combination of both. For example, the encoding rate controller 342 may be implemented in hardware (e.g., circuitry), software or a combination of both. It should be noted that lines or arrows in the block diagrams herein may denote couplings between components or elements. For example, the encoding rate controller 342 may be coupled to the framing and preprocessing module 350. 
<!-- EPO <DP n="15"/>-->
 [0056] The electronic device 340 obtains a speech signal 348. For example, the electronic device 340 may capture the speech signal 348 with one or more microphones and/or may receive the speech signal 348 from another device (e.g., a Bluetooth headset). The speech signal 348 may be provided to the framing and preprocessing module 350. </p><p id="p0064" num="0064">[0057] The framing and preprocessing module 350 may divide the speech signal 348 into a series of frames. Each frame may be a particular time period. For example, each frame may correspond to 20 ms of the speech signal 348. The framing and preprocessing module 350 may perform other operations on the speech signal 348, such as noise suppression and filtering (e.g., one or more of low-pass, high-pass and band-pass filtering). Accordingly, the framing and preprocessing module 350 may produce a preprocessed speech signal 362. </p><p id="p0065" num="0065"> [0058] In some configurations, the framing and preprocessing module 350 includes a metric determination module 360. The metric determination module 360 may determine a metric 352 based on the speech signal 348. For example, the metric determination module 360 may determine a signal-to-noise ratio (SNR) based on a frame of the speech signal 348. The metric 352 (e.g., SNR) may be provided to the encoding rate controller 342. </p><p id="p0066" num="0066">[0059] The encoding rate controller 342 may control an average encoding rate. The average encoding rate is a bitrate (in kilobits per second (kbps), for example) of the encoded speech signal 364 based on an average over a number of frames. The encoding rate controller 342 may control the average encoding rate by attempting to match the average encoding rate to a target rate. The target rate may specify a desired bitrate for the encoded speech signal 364. The target rate may be received from another device (e.g., a base station) or may be predetermined. </p><p id="p0067" num="0067"> [0060] The encoding rate controller 342 may control the average encoding rate by selecting encoders 356a-n to encode frames of the preprocessed speech signal 362. For example, the encoding rate controller 342 may provide an encoding rate indicator 366 to the selectors 354a-b. The encoding rate indicator 366 specifies a particular encoder 356, rate and/or frame type. The selectors 354a-b may route the preprocessed speech signal 362 to an encoder 356 for each frame as indicated by the encoding rate indicator 366. </p><p id="p0068" num="0068">[0061] Each of the encoders 356a-n may produce an encoded speech signal 364 based on the preprocessed speech signal 362. One or more of the encoders 356a-n may be 
<!-- EPO <DP n="16"/>-->
 implemented in accordance with one or more of the encoders 104, 204 described above. Examples of the encoders 356a-n include PPP encoders, NELP encoders, CELP encoders (e.g., ACELP encoders), etc. One or more of the encoders 356a-n may provide encoding information 358 to the encoding rate controller 342. Examples of encoding information 358 include encoded waveforms, error metrics (e.g., an amplitude error metric), band gain change metrics (e.g., a low-band gain change metric) and the frame encoding rate used to encode a frame (e.g., an n-th frame). For example, the encoding rate controller 342 may utilize rate information to compute one or more average rates. </p><p id="p0069" num="0069"> [0062] Each encoder 356a-n may produce the encoded speech signal 364 at a particular encoding rate. As used herein, the term "high-rate encoder" and variations thereof may denote an encoder that produces an encoded speech signal with a higher bitrate than the target rate. Additionally, the term "low-rate encoder" and variations thereof may denote an encoder that produces an encoded speech signal with a lower bitrate than the target rate. </p><p id="p0070" num="0070">[0063] Each encoder 356a-n may be utilized to encode one or more frame types. For example, frames may be classified according to frame type based on the speech signal 348 corresponding to each frame. In some configurations, the encoding rate controller 342 may determine whether each frame is a "voiced frame," "unvoiced frame" or other frame (e.g., silence frame, transient frame, down transient frame, etc.). A voiced frame may exhibit voicing characteristics (e.g., more low-band energy, higher SNR, etc.). An unvoiced frame may exhibit noise characteristics (e.g., more high-band energy, lower SNR, etc.). A transient frame may be a frame that occurs between an unvoiced or silence frame and a voiced frame. Accordingly, the encoding rate controller 342 may determine frame type based on one or more thresholds and/or one or more factors (e.g., SNR, zero crossing rate, band energy ratio, etc.). Each frame type may be encoded by one or more encoders 356a-n at one or more encoding rates. A frame that is encoded by a high-rate encoder 356 may be referred to as a "high-rate frame" and a frame that is encoded by a low-rate encoder 356 may be referred to as a "low-rate frame." For example, a frame with an encoding rate that is higher than the target rate may be a "high-rate frame" and a frame with an encoding rate that is lower than the target rate may be a "low-rate frame." </p><p id="p0071" num="0071"> [0064] In one example, assume that the encoders 356a-n include a quarter-rate PPP (QPPP) encoder, a NELP encoder and two ACELP encoders. Further assume that the target 
<!-- EPO <DP n="17"/>-->
 rate is 5.9 kbps. The QPPP encoder may encode some voiced frames (e.g., voiced low-rate frames) with an encoding with a rate of 2.8 kbps. The NELP encoder may encode unvoiced frames with an encoding with a rate of 2.8 kbps. Accordingly, the QPPP encoder and the NELP encoder are low-rate encoders in this example. One ACELP encoder (e.g., a "voiced" ACELP encoder) may encode some voiced frames (e.g., voiced high-rate frames) with an encoding with a rate of 7.2 kbps. Another ACELP encoder (e.g., a "transition" ACELP encoder) may encode transition frames with an encoding rate of 8.0 kbps. Accordingly, the voiced ACELP encoder and the transition ACELP encoder are high-rate encoders in this example. </p><p id="p0072" num="0072"> [0065] In some examples, the terms "full rate" and/or "quarter rate" may be used to describe frame types and/or corresponding encoders. It should be noted that "full rate" may or may not denote a maximum possible bitrate and/or may denote different bitrates based on frame type. For example, a voiced full-rate frame may be encoded at a bitrate of 7.2 kbps by a voiced ACELP encoder, even though a full-rate transition frame may be encoded at a bitrate of 8.0 kbps by a transition ACELP encoder. It should also be noted that "quarter rate" may or may not denote an actual quarter of the full rate. For example, a quarter-rate frame may be encoded at 2.8 kbps, which is not literally one-fourth of a full-rate 7.2 kbps. </p><p id="p0073" num="0073">[0066] The average rate determination module 344 may determine a first average rate. One example of the first average rate includes a long-term average rate (e.g., RJ T ). For instance, the average rate determination module 344 may determine a short-term average rate (e.g., Ri<sub>as</sub>tNframes ^ <sup>an</sup>d/°<sup>r a</sup> long-term average rate. The short-term average rate and the long-term average rate are examples of the average encoding rate. The short-term average rate is an encoding rate averaged over the last N frames (e.g., 600 frames). The average rate determination module 344 may determine the short-term average rate by summing the selected frame encoding rates over N frames and dividing the sum by N. The long-term average rate may be determined (e.g., computed) after each N frame interval in accordance with a smoothing equation given in Equation (1). </p><p id="p0074" num="0074"> R<sub>LT</sub> (n) = oR<sub>LT</sub> (n - 1) + (1 - )R<sub>lastNframes</sub> (I) 
<!-- EPO <DP n="18"/>-->
 In Equation (1), n is a long-term average index and ir is a smoothing factor, ir may be 0.98 in some configurations. The encoding rate controller 342 may utilize the short-term average rate and/or the long-term average rate to control the average encoding rate. </p><p id="p0075" num="0075">[0067] The threshold determination module 346 may determine one or more thresholds. For example, the threshold determination module 346 may adaptively change one or more thresholds based on an average encoding rate. In particular, the threshold determination module 346 may determine a first threshold (e.g., THQ<sub>N</sub> ) based on the first average rate.</p><p id="p0076" num="0076">For example, if the first average rate (e.g.,
<img id="imgf000018_0001" he="5" wi="8" file="imgf000018_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 ) is greater than the target rate (e.g., R<sub>ta</sub>rget</p><p id="p0077" num="0077">), then the threshold determination module 346 may select a first threshold or adjust the first threshold (e.g., increase the first threshold). For example, increasing the first threshold may cause more frames to be classified as clean frames, which may be encoded at a low rate, which causes the average encoding rate to decrease. However, if the first average rate (e.g., Ri ) is less than or equal to the target rate, then the threshold determination module 346 may select a different first threshold or adjust the first threshold differently (e.g., decrease the first threshold). For example, decreasing the first threshold may cause more frames to be classified as noisy frames, which may be encoded at a high rate, which causes the average encoding rate to increase. </p><p id="p0078" num="0078"> [0068] The first threshold (e.g., TH<sub>CN</sub> ) may classify a frame as a clean frame or a noisy frame. More specifically, the encoding rate controller 342 may classify a frame as a clean frame or a noisy frame based on the first threshold. For instance, each voiced frame may be classified as a clean frame or a noisy frame. Clean frames may be encoded with a low-rate encoder 356 (e.g., a QPPP encoder) with high probability, while noisy frames may be encoded with a high-rate encoder 356 (e.g., a voiced ACELP encoder) with high probability. It should be noted that not all noisy frames may be encoded with a high-rate encoder 356, though the probability of encoding a noisy frame using a high-rate encoder 356 is high. Thus, determining the first threshold may affect the number of frames that are encoded with a high-rate encoder 356 versus a low-rate encoder 356, which affects the average encoding rate. </p><p id="p0079" num="0079"> [0069] In one example, the first threshold is an SNR threshold and the metric 352 is an SNR. The SNR may be based on noise estimation performed by the framing and 
<!-- EPO <DP n="19"/>-->
 preprocessing module 350. In this example, the encoding rate controller 342 may classify a frame as a clean frame if the SNR is greater than the SNR threshold or as a noisy frame if the SNR is less than or equal to the SNR threshold. </p><p id="p0080" num="0080"> [0070] The encoding rate controller 342 may control an average encoding rate by determining at least one other threshold based on the first threshold. For example, the encoding rate controller 342 may select different thresholds based on the first threshold. Selecting different thresholds may affect the average encoding rate by increasing an amount of high-rate frames (while decreasing an amount of low-rate frames), which increases the average encoding rate, or by decreasing an amount of high-rate frames (while increasing an amount of low-rate frames), which decreases the average encoding rate. In some configurations, the at least one other threshold may be a threshold set. For example, the encoding rate controller 342 may select a first threshold set or a second threshold set based on the first threshold. As used herein, the term "set" may denote two or more elements. For example, a "threshold set" may include two or more thresholds. </p><p id="p0081" num="0081"> [0071] In some configurations, the at least one other threshold includes at least one frame adjustment threshold. A frame adjustment threshold may indicate whether to adjust a frame type for a given frame. A frame type adjustment may change (e.g., increase or decrease) the encoding rate for a frame. By changing one or more frame adjustment thresholds, the amount of frame type adjustments can be controlled to increase or decrease an average encoding rate. In some configurations, the frame adjustment threshold(s) may be utilized to determine whether there is a significant amount of quantization error between original speech information and quantized speech information (e.g., whether quantized parameters are too dissimilar from unquantized parameters). If the quantization error is too large, the encoded speech quality may be degraded. In these cases, a frame type may be adjusted to be encoded at a higher rate (e.g., higher quality). </p><p id="p0082" num="0082"> [0072] In one example, the encoding rate controller 342 may initially classify a voiced frame as a candidate for low-rate encoding (e.g., QPPP encoding). A low-rate encoder 356 may proceed to encode the voiced frame and may provide encoding information 358 to the encoding rate controller 342. </p><p id="p0083" num="0083"> [0073] The encoding rate controller 342 determines whether to adjust the frame type based on the encoding information 358 and the frame adjustment threshold(s). For example, 
<!-- EPO <DP n="20"/>-->
 the encoding information 358 may include one or more metrics or information for determining one or more metrics. For instance, the one or more metrics may include a first metric that indicates a degree of difference between the original frame and the encoded frame (e.g., an amplitude error metric) and/or a second metric that indicates a degree of change between a previous frame and a current frame (e.g., a low-band gain change metric). The one or more metrics may be determined by an encoder 356 or the encoding rate controller 342. If the one or more metrics are beyond one or more of the frame adjustment thresholds, the encoding rate controller 342 may adjust the frame type. For example, the encoding rate controller 342 may select a different encoder 356 to encode the frame. For instance, the encoding rate controller 342 may select a high-rate encoder 356 instead of a low-rate encoder 356. </p><p id="p0084" num="0084"> [0074] In one example, the at least one threshold is a set of "bump-up" thresholds. The bump-up thresholds indicate whether to adjust (e.g., bump up) a low-rate QPPP frame to a high-rate voiced ACELP frame. For instance, the encoding rate controller 342 may initially classify a voiced frame as a QPPP frame. Accordingly, the encoding rate controller 342 selects a QPPP encoder 356 to encoder the frame. The QPPP encoder 356 encodes the frame and provides encoding information 358 to the encoding rate controller 342. </p><p id="p0085" num="0085">[0075] In this example, the encoding information 358 includes an amplitude error metric and a low-band gain change metric. The amplitude error metric (e.g., amperror) is an average difference between an original PPP signal and a quantized PPP signal as illustrated in Equation (2). </p><p id="p0086" num="0086">amperror =
<img id="imgf000020_0001" he="15" wi="39" file="imgf000020_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0087" num="0087"> M </p><p id="p0088" num="0088"> In Equation (2), PPP(i) is an original PPP signal amplitude for an index i, PPP<sub>Q</sub> (i) is a quantized PPP signal amplitude, M is a number of bins (e.g., bands) used to compute the PPP amplitudes (in amplitude quantization, for example) and amperror is the amplitude error metric. For example, a PPP signal may be quantized by converting the time domain signal to a frequency domain signal and computing amplitudes for different frequency bands. 
<!-- EPO <DP n="21"/>-->
 [0076] The low-band gain change metric (e.g., ALgainE ) is a difference between a current frame low-band energy gain and a previous frame low-band energy gain as illustrated in Equation (3). </p><p id="p0089" num="0089"> ALgainE = currLgainE - prevLgainE (3) </p><p id="p0090" num="0090">In Equation (3), currLgainE is the current frame low-band energy gain, prevLgainE is a previous frame low-band energy gain and ALgainE is the low-band gain change metric. The energy gains may be evaluated over a low-band, which is a frequency range between 0 Hz and an upper limit. For example, the low-band may be between 0 and 1104.5 Hz. </p><p id="p0091" num="0091">[0077] In this example, the set of bump-up thresholds includes an amplitude error threshold (e.g., amperrorT ) and a low-band gain change threshold (e.g., ALgainETH ). In some configurations, amperrorTH = 0.47 and ALgainETH = -0.4 . In this example, the encoding rate controller 342 may adjust (e.g., bump up) the QPPP frame to a voiced ACELP frame if amperror &gt; 0.47 and ALgainE &gt; -0.4 . </p><p id="p0092" num="0092"> [0078] In some configurations, determining the at least one other threshold may be further based on the metric 352. For example, the encoding rate controller 342 may select a first threshold set (e.g., a first rate adjustment threshold set) if the metric 352 is not greater than the first threshold or may select a second threshold set (e.g., a second rate adjustment threshold set) if the metric 352 is greater than the first threshold. For example, the encoding rate controller 342 may determine the at least one other threshold by determining whether the metric 352 (e.g., an SNR) is greater than the first threshold (e.g., SNR threshold). </p><p id="p0093" num="0093">[0079] Manipulating the first threshold (e.g., SNR threshold) and/or the at least one other threshold (e.g., frame adjustment thresholds, bump-up thresholds) may affect how frames are classified, which may affect the average encoding rate, since different frame types may be coded at different rates. For example, the average encoding rate may be based on whether a frame is classified as a clean frame or a clean frame and/or whether the frame is classified as a voiced frame, unvoiced frame or generic frame. Examples of encoding rates corresponding to various frame types are given in Table (1). 
<!-- EPO <DP n="22"/>-->
 Frame Type Rate </p><p id="p0094" num="0094"> QPPP 2.8 kbps </p><p id="p0095" num="0095"> NELP 2.8 kbps </p><p id="p0096" num="0096"> Voiced ACELP 7.2 kbps </p><p id="p0097" num="0097"> Transition ACELP 8.0 kbps </p><p id="p0098" num="0098">Table (1) </p><p id="p0099" num="0099"> [0080] In some configurations, the encoding rate controller 342 may further control the average encoding rate by determining a frame pattern. For example, controlling the average encoding rate may include determining a frame pattern. The frame pattern may specify a ratio of or required amounts of frames of certain frame types. For example, a first frame pattern (e.g., a "rate-increase frame pattern") may require a minimum number of high-rate frames between low-rate frames and a second frame pattern (e.g., a "rate-decrease frame pattern") may only allow a maximum number of low-rate frames between high-rate frames. If the first average rate is below the target rate, the encoding rate controller 342 may select the first frame pattern, which may increase the average encoding rate. If the first average rate is above the target rate, the encoding rate controller 342 may select the second frame pattern, which may decrease the average encoding rate. </p><p id="p0100" num="0100"> [0081] In some configurations, the frame patterns include a "QFF" frame pattern and a "QQF" frame pattern, where "Q" denotes a low-rate frame (e.g., a quarter-rate frame) and "F" denotes a high -rate frame (e.g., a full-rate frame). In these configurations, the QFF frame pattern may require a minimum number of F frames between Q frames. Furthermore, the QQF frame pattern may only allow a maximum number of Q frames between F frames. For example, the QFF pattern may require that at least two F frames occur between Q frames, though more than two consecutive F frames may occur between Q frames. Furthermore, the QQF pattern may only allow a maximum of two consecutive Q frames between F frames, though more than one F frame may occur between Q frames. </p><p id="p0101" num="0101">[0082] In some configurations, the encoding rate controller 342 (e.g., the threshold determination module 346) may further control the average encoding rate by adjusting the at least one other threshold based on the first average rate. For instance, controlling the 
<!-- EPO <DP n="23"/>-->
 average encoding rate may further include adjusting the at least one other threshold based on the first average rate. </p><p id="p0102" num="0102"> [0083] In one example, the at least one other threshold is at least one frame adjustment threshold. In this example, the encoding rate controller 342 may adjust the at least one frame adjustment threshold by selecting a frame adjustment threshold set. For instance, the encoding rate controller 342 may select a first frame adjustment threshold set if the first average rate is greater than the target rate and may select a second frame adjustment threshold set if the first average rate is not greater than the target rate. The first frame adjustment threshold set may be referred to as a "relaxed frame adjustment threshold set." The first frame adjustment threshold set may result in fewer frame adjustments (e.g., bump- ups), which may lower the average encoding rate. For example, one or more of the frame adjustment thresholds in the first frame adjustment threshold set may be higher than one or more corresponding frame adjustment thresholds in the second frame adjustment threshold set. The second frame adjustment threshold set may be referred to as a "tightened frame adjustment threshold set." The second frame adjustment threshold set may result in more frame adjustments (e.g., bump-ups), which may increase the average encoding rate. </p><p id="p0103" num="0103">[0084] In some configurations, the encoding rate controller 342 (e.g., threshold determination module 346) may further control the average encoding rate by adjusting at least one voicing threshold based on the first average rate. For instance, controlling the average encoding rate further includes adjusting at least one voicing threshold based on the first average rate. </p><p id="p0104" num="0104"> [0085] In some configurations, directly adjusting the at least one voicing threshold may be different from determining the at least one other threshold based on the first threshold as described above. For example, directly adjusting the at least one voicing threshold may be based directly on the first average rate (and may not be dictated based on determining another threshold, for instance). </p><p id="p0105" num="0105"> [0086] In one example, the encoding rate controller 342 may adjust the at least one voicing threshold by selecting a voicing threshold set. For instance, the encoding rate controller 342 may select a first voicing threshold set if the first average rate is greater than the target rate and may select a second voicing threshold set if the first average rate is not greater than the target rate. The first voicing threshold set may be referred to as a "relaxed 
<!-- EPO <DP n="24"/>-->
 voicing threshold set." The first voicing threshold set may result in classifying more frames as voiced frames and/or unvoiced frames (e.g., QPPP frames and/or NELP frames), which may lower the average encoding rate. This may lower the average encoding rate because some voiced frames and/or unvoiced frames may be low-rate frames. For example, one voicing threshold in the first voicing threshold set may be higher than a corresponding voicing threshold in the second voicing threshold set and another voicing threshold in the first voicing threshold set may be lower than a corresponding voicing threshold in the second voicing threshold set. The second voicing threshold set may be referred to as a "tightened voicing threshold set." The second voicing threshold set may result in classifying more frames as generic frames. This may result in increasing the average encoding rate, since generic frames (e.g., transition frames) may be high-rate frames. </p><p id="p0106" num="0106">[0087] In some configurations of the systems and methods disclosed herein, the electronic device 340 may control the average encoding rate based on the long-term average rate and the short-term average rate. In particular, some configurations of the systems and methods disclosed herein present an average encoding rate control strategy based on short-term and long-term average rates. Also, controlling the average encoding rate may be based on multiple steps depending on long-term average rate, short-term average rate (e.g., an average rate during the last N frames) and the target rate. A more specific configuration of the systems and methods disclosed herein is given as follows. In this configuration, one or more procedures relating to items (l)-(4) may be utilized to achieve the desired average encoding rate. The potential impact of speech quality increases as the list of items progresses. </p><p id="p0107" num="0107"> [0088] (1) The first threshold (e.g., TH<sub>CN</sub> ) for PPP frames may be changed. In particular, there may be two frame adjustment threshold sets that classify clean frames and noisy frames. In general, these frame adjustment thresholds are more stringent for clean frames. Increasing the first threshold enables consideration of more frames as noisy, which results in fewer frame adjustments (e.g., fewer bump-ups). This may reduce the average encoding rate. (2) A frame pattern may be utilized that generates more low-rate frames. For example, a frame pattern may be set to a first frame pattern and the frame pattern may be changed to a second frame pattern to obtain more low-rate frames, which reduces the average encoding rate. (3) The frame adjustment thresholds may be adjusted (e.g., relaxed). 
<!-- EPO <DP n="25"/>-->
 This may reduce the number of frame adjustments (e.g., bump-ups) so more low-rate frames are possible. (4) At least one voicing threshold may be adjusted to reduce the rate by increasing low-rate frames (e.g., QPPP frames and NELP frames). This may potentially create speech artifacts. </p><p id="p0108" num="0108"> [0089] Apart from average encoding rate reduction mechanisms, the systems and methods disclosed herein may utilize a speech quality improvement strategy if the global rate is less than the target rate by a specific margin. The rate control mechanism used in EVRC-B may be employed to move some percentage of the low-rate frames to high-rate frames, which can increase the speech quality. This may be done by fixing an operating point using a certain Q and F pattern and then moving a certain percentage of Q frame to F frames. EVRC-B picks an operating bit rate that is lower than the target bit rate. Then a ratio (e.g. r%) may be computed such that changing the coding mode of Q frames to F frames by the computed ratio (r%) increases the average rate to the target rate. As some Q frames are instead coded using full rate frames, the overall speech quality improves. </p><p id="p0109" num="0109">[0090] The electronic device 340 may send the encoded speech signal 364. The encoded speech signal 364 and/or the encoding rate indicator 366 may be sent to another device (e.g., electronic device, base station, wireless communication device, etc.) and/or may be sent to memory for storage. For example, the encoded speech signal 364 and the encoding rate indicator 366 may be provided to a radio frequency (RF) transmitter (not shown) included in the electronic device 340. The RF transmitter may then transmit the encoded speech signal 364 to another device using an antenna. </p><p id="p0110" num="0110"> [0091] Figure 4 is flow diagram illustrating one configuration of a method 400 for controlling an average encoding rate. An electronic device 340 obtains 402 a speech signal 348. For example, the electronic device 340 may capture the speech signal 348 with one or more microphones and/or may receive the speech signal 348 from another device (e.g., a Bluetooth headset). </p><p id="p0111" num="0111"> [0092] The electronic device 340 may determine 404 a first average rate. For example, the electronic device 340 may determine a long-term average rate (e.g., R^<sub>j</sub> ) and/or a short-term average rate (e.g., Ri<sub>as</sub>tNframes ) <sup>as</sup> described above in connection with Figure 3. 
<!-- EPO <DP n="26"/>-->
 [0093] The electronic device 340 may determine 406 a first threshold (e.g., TH<sub>QN</sub> ) based on the first average rate. For example, the electronic device 340 may select or adjust a first threshold based on the first average rate as described above in connection with Figure 3. </p><p id="p0112" num="0112"> [0094] The electronic device 340 may control 408 an average encoding rate by determining at least one other threshold based on the first threshold. For example, the encoding rate controller 342 may select different thresholds (e.g., frame adjustment threshold sets) based on the first threshold as described above in connection with Figure 3. </p><p id="p0113" num="0113">[0095] The electronic device 340 may send 410 an encoded speech signal 364. For example, an encoded speech signal 364 and/or an encoding rate indicator 366 may be sent to another device (e.g., electronic device, base station, wireless communication device, etc.) and/or may be sent to memory for storage as described above in connection with Figure 3. </p><p id="p0114" num="0114">[0096] Figure 5 is a flow diagram illustrating one configuration of a method 500 for determining at least one other threshold based on a first threshold and a metric 352. An electronic device 340 may obtain 502 a speech signal 348. This may be accomplished as described above. </p><p id="p0115" num="0115"> [0097] The electronic device 340 may determine 504 an SNR based on the speech signal 348. For example, the electronic device 340 may determine a channel energy estimate and a channel noise energy estimate based on the speech signal 348. The electronic device 340 may then determine 504 an SNR based on a ratio of the channel energy estimate and the channel noise energy estimate. </p><p id="p0116" num="0116"> [0098] The electronic device 340 may determine 506 whether the SNR is greater than the first threshold (e.g., TH<sub>QN</sub> , an SNR threshold). If the SNR is not greater than the first threshold, the electronic device 340 may select 508 a first threshold set (e.g., a first frame adjustment threshold set, a first bump-up threshold set, etc.). If the SNR is greater than the first threshold, the electronic device 340 may select 510 a second threshold set (e.g., a second frame adjustment threshold set, a second bump-up threshold set, etc.). </p><p id="p0117" num="0117">[0099] The method 500 includes one example of changing the first threshold (e.g., item (1) described above in connection with Figure 3). The first threshold (e.g., TH<sub>QN</sub> , SNR threshold, etc.) may be changed adaptively based on the first average rate such that the first 
<!-- EPO <DP n="27"/>-->
 threshold set or the second threshold set is selected. This is one example of indirectly selecting the at least one other threshold (e.g., frame adjustment threshold sets) based on the first threshold and a metric 352 (e.g., SNR). </p><p id="p0118" num="0118"> [00100] Figure 6 is a flow diagram illustrating a more specific configuration of a method 600 for controlling an average encoding rate. An electronic device 340 may start 602 encoding. For example, the electronic device 340 may obtain a speech signal and begin to encode the speech signal. </p><p id="p0119" num="0119"> [00101] The electronic device 340 may set 604 default parameters. Examples of parameters include a first threshold (e.g., THQ<sub>N</sub> ), a frame pattern mode, a frame adjustment threshold mode and/or a voicing threshold mode. The frame pattern mode may indicate a frame pattern (e.g., a first frame pattern, a second frame pattern, etc.). The frame adjustment threshold mode may indicate at least one frame adjustment threshold (e.g., a first frame adjustment threshold set and a second frame adjustment threshold set, etc.). The voicing threshold mode may indicate at least one voicing threshold (e.g., a first voicing threshold set, a second voicing threshold set, etc.). The electronic device 340 may utilize the frame pattern as indicated by the frame pattern mode, the frame adjustment threshold(s) as indicated by the frame adjustment threshold mode and/or the voicing threshold(s) as indicated by the voicing threshold mode in determining an encoding rate (e.g., in classifying frames). In one example, setting 604 default parameters may include setting the first threshold to a first threshold maximum (e.g., ΤΗ^<sub>ΝΗΙΑΧ</sub> ), setting the frame pattern mode to indicate a second frame pattern, setting the frame adjustment threshold mode to indicate a first frame adjustment threshold set (e.g., a relaxed frame adjustment threshold set) and setting the voicing threshold mode to indicate a second voicing threshold set (e.g., a tightened voicing threshold set). </p><p id="p0120" num="0120"> [00102] The electronic device 340 may determine 606 whether an N-frame block has been reached. For example, the electronic device 340 may determine whether N frames have been processed (from the start of encoding or since a previous N-frame block). For instance, a frame may be "processed" if an encoding rate has been determined for that frame and/or if that frame has been encoded. 
<!-- EPO <DP n="28"/>-->
 [00103] If the N-frame block has not been reached, the electronic device 340 may process 608 a next frame. For example, the electronic device 340 may determine an encoding rate for the next frame and/or may encode the next frame. </p><p id="p0121" num="0121"> [00104] If the N-frame block has been reached, the electronic device 340 may determine 610 a first average rate (e.g., a long-term average rate) and a second average rate (e.g., a short-term average rate). This may be accomplished as described above in connection with Figure 3 and/or Figure 4. </p><p id="p0122" num="0122"> [00105] The electronic device 340 may determine 612 if the first average rate is greater than a target rate. If the first average rate is greater than the target rate, the electronic device 340 may utilize 616 a rate decrease algorithm. If the first average rate is not greater than the target rate, the electronic device 340 may utilize 614 a rate increase algorithm. The rate increase algorithm may adjust one or more parameters in an attempt to increase the average encoding rate. For example, the rate increase algorithm may decrease the first threshold, set the frame pattern mode to indicate the first frame pattern (e.g., a rate-increase frame pattern), set the frame adjustment threshold mode to indicate the second frame adjustment threshold set (e.g., the tightened frame adjustment threshold set) and/or set the voicing threshold mode to indicate the second voicing threshold set (e.g., the tightened voicing threshold set). </p><p id="p0123" num="0123"> [00106] If the first average rate is greater than the target rate, the electronic device 340 may utilize 616 a rate decrease algorithm. The rate decrease algorithm may adjust one or more parameters in an attempt to reduce the average encoding rate. For example, the rate decrease algorithm may increase the first threshold, set the frame pattern mode to indicate the second frame pattern (e.g., a rate-decrease frame pattern), set the frame adjustment threshold mode to indicate the first frame adjustment threshold set (e.g., the relaxed frame adjustment threshold set) and/or set the voicing threshold mode to indicate the first voicing threshold set (e.g., the relaxed voicing threshold set). </p><p id="p0124" num="0124"> [00107] The electronic device 340 may process 608 the next frame. For example, the electronic device 340 may process the next N-frame block and return to determine 610 a first average rate and so on. </p><p id="p0125" num="0125"> [00108] Figure 7 is a flow diagram illustrating one configuration of a method 700 for decreasing an average encoding rate. The method 700 may be one example of the rate 
<!-- EPO <DP n="29"/>-->
 decrease algorithm described in connection with Figure 6. For example, the method 700 may be performed when first average rate is greater than the target rate. </p><p id="p0126" num="0126"> [00109] The electronic device 340 may determine 702 if the first threshold (e.g., TH<sub>CN</sub> ) is greater than or equal to a first threshold maximum (e.g., TH<sub>CNmax</sub> ). If the first threshold is not greater than or equal to the first threshold maximum, the electronic device 340 may increase 712 the first threshold. For example, the electronic device 340 may increase the first threshold to the first threshold plus a first threshold size factor. The first threshold size factor may specify an amount (e.g., step size) for increasing the first threshold. The electronic device 340 may then return to process the next frame as described in connection with Figure 6. </p><p id="p0127" num="0127"> [00110] If the first threshold is greater than or equal to the first threshold maximum, the electronic device 340 may determine 704 whether a frame pattern mode indicates a rate- increase frame pattern and whether a second average rate (e.g., short-term average rate) is greater than the target rate. If the frame pattern mode indicates a rate-increase frame pattern and the second average rate is greater than the target rate, then the electronic device 340 may set 714 the frame pattern mode to indicate a rate-decrease frame pattern. The electronic device 340 may then return to process the next frame as described in connection with Figure 6. </p><p id="p0128" num="0128"> [00111] If the frame pattern mode does not indicate a rate-increase frame pattern or the second average rate is not greater than the target rate, then the electronic device 340 may determine 706 whether the frame pattern mode indicates a rate-decrease frame pattern and whether the second average rate is greater than the target rate. If the frame pattern mode does not indicate a rate-decrease frame pattern or the second average rate is not greater than the target rate, then the electronic device 340 may return to process the next frame as described in connection with Figure 6. If the frame pattern mode indicates a rate-decrease frame pattern and the second average rate is greater than the target rate, then the electronic device 340 may set 708 a frame adjustment mode to indicate a first frame adjustment threshold set (e.g., a relaxed frame adjustment threshold set). </p><p id="p0129" num="0129"> [00112] The electronic device 340 may determine 710 if the first average rate is greater than the target rate plus a first rate tolerance. The first rate tolerance specifies an amount above the target rate. If the long-term average rate is greater than a target rate plus the first 
<!-- EPO <DP n="30"/>-->
 rate tolerance, the electronic device 340 may set 716 the voicing threshold mode to indicate a first voicing threshold set (e.g., a relaxed voicing threshold set). The electronic device 340 may return to process the next frame as described in connection with Figure 6. If the long- term average rate is not greater than a target rate plus the first rate tolerance, the electronic device 340 may return to process a next frame as described in connection with Figure 6. </p><p id="p0130" num="0130">[00113] As can be observed in Figure 7, determining the first threshold (and determining the at least one other threshold based on the first threshold), determining a frame pattern, setting a frame adjustment mode (e.g., adjusting frame adjustment thresholds) and/or (directly) adjusting at least one voicing threshold as described in connection with Figure 3 may be implemented cumulatively. For example, if the first average rate is above a target rate, successive and additional procedures may be performed until the target rate is reached. For instance, if performing item (1) does not reach the target rate, items (1) and (2) may be performed and so on until all items (l)-(4) are being performed to reduce the average rate. </p><p id="p0131" num="0131">[00114] Figure 8 is a flow diagram illustrating one configuration a method 800 for increasing an average encoding rate. The method 800 may be one example of the rate increase algorithm described in connection with Figure 6. For example, the method 800 may be performed when first average rate is not greater than the target rate. </p><p id="p0132" num="0132">[00115] The electronic device 340 may set 802 the voicing threshold mode to indicate a second voicing threshold set (e.g., a tightened voicing threshold set). This may result in more generic frames. Generic frames (e.g., transient frames) may be encoded with a high- rate encoder (e.g., a transition ACELP encoder). </p><p id="p0133" num="0133"> [00116] The electronic device 340 may determine 804 whether the frame adjustment threshold mode indicates a first frame adjustment threshold set (e.g., a relaxed frame adjustment threshold set). If the frame adjustment threshold mode indicates a first frame adjustment threshold set, the electronic device 340 may set 814 the frame adjustment threshold mode to indicate a second frame adjustment threshold set (e.g., a tightened frame adjustment threshold set). The electronic device 340 may then return to process the next frame as described in connection with Figure 6. </p><p id="p0134" num="0134"> [00117] If the frame adjustment threshold mode does not indicate a first frame adjustment threshold set, the electronic device 340 may determine 806 whether the frame pattern mode indicates a rate-decrease frame pattern. If the frame pattern mode indicates a 
<!-- EPO <DP n="31"/>-->
 rate-decrease frame pattern, the electronic device 340 may set 816 the frame pattern mode to indicate a rate-increase frame pattern. The electronic device 340 may then return to process the next frame as described in connection with Figure 6. </p><p id="p0135" num="0135"> [00118] If the frame pattern mode does not indicate a rate-decrease frame pattern, the electronic device 340 may determine 808 if the first threshold is greater than or equal to a first threshold minimum. If the first threshold is greater than or equal to the first threshold minimum, the electronic device 340 may decrease 818 the first threshold to the first threshold minus a second threshold size factor. The second threshold size factor may specify an amount (e.g., step size) for decreasing the first threshold. The electronic device 340 may then return to process the next frame as described in connection with Figure 6. </p><p id="p0136" num="0136">[00119] If the first threshold is not greater than or equal to the first threshold minimum, the electronic device 340 may determine 810 if the first average rate is less than the target rate minus a second rate tolerance. The second rate tolerance specifies an amount below the target rate. If the first average rate is not less than the target rate minus the second rate tolerance, the electronic device 340 may return to process a next frame as described in connection with Figure 6. </p><p id="p0137" num="0137"> [00120] If the first average rate is less than the target rate minus the second rate tolerance, the electronic device 340 may move 812 one or more low-rate frames to one or more high-rate frames to increase the average encoding rate. In some configurations, this may be based on an EVRC-B rate control algorithm (as described above, for example). The electronic device 340 may return to process a next frame as described in connection with Figure 6. </p><p id="p0138" num="0138"> [00121] As can be observed in Figure 8, determining the first threshold (and determining the at least one other threshold based on the first threshold), determining a frame pattern, setting the frame adjustment mode (e.g., adjusting frame adjustment thresholds) and/or (directly) adjusting at least one voicing threshold as described in connection with Figure 3 may be implemented cumulatively (to a reverse effect and in reverse order compared to the method 700 described in connection with Figure 7). For example, the method 800 may progressively reverse the measures taken in the method 700 described in connection with Figure 7. For instance, if the first average rate is below a target rate, successive and additional procedures may be performed until the target rate is reached. 
<!-- EPO <DP n="32"/>-->
 [00122] Figure 9 is a diagram illustrating examples of voicing threshold sets 976a-b. The horizontal dimension illustrated in Figure 9 corresponds to a measure of voicing (e.g., a voicing factor). This measure of voicing may not have a unit of measure. The measure of voicing may increase towards the right along the horizontal axes illustrated in Figure 9. In particular, Figure 9 illustrates an example of how voicing thresholds 978, 968 may be adjusted. A first voicing threshold set 976a (e.g., a relaxed voicing threshold set) may include a lower voicing threshold A 978a and an upper voicing threshold A 968a. A second voicing threshold set 976b (e.g., a tightened voicing threshold set) may include a lower voicing threshold A 978a and an upper voicing threshold A 968a. </p><p id="p0139" num="0139"> [00123] The second voicing threshold set 976b may be utilized when the first average rate is within a rate constraint (e.g., when the first average rate is less than or equal to the target rate plus a first tolerance). The first voicing threshold set 976a may increase the number of voiced and unvoiced frames. In other words, the voicing thresholds 978b, 968b included in the second voicing threshold set 976b may be adjusted to the voicing thresholds 978a, 968a included in the first voicing threshold set 976a such that fewer generic frames result. It should be noted that adjusting the voicing thresholds may be one example of direct threshold adjustment. For instance, the adjustment of the voicing threshold set based on the first average rate may be one example of direct adjustment of a threshold set. </p><p id="p0140" num="0140">[00124] The threshold sets 976a-b may be utilized to classify a frame as a voiced frame, an unvoiced frame or a generic frame. As illustrated in Figure 9, the second voicing threshold set 976b provides unvoiced frame range B 970b and voiced frame range B 974b, which are larger than unvoiced frame range A 970a and voiced frame range A 974a provided by the first voicing threshold set 976a. Furthermore, the second voicing threshold set 976b provides a generic frame range B 972b that is larger than the generic frame range A 972a provided by the first voicing threshold set 976a. Accordingly, a frame is more likely to be classified as a voiced frame or an unvoiced frame based on the first voicing threshold set 976a when compared to the second voicing threshold set 976b. </p><p id="p0141" num="0141">[00125] For example, more voiced frames and unvoiced frames may result in more QPPP frames (at 2.8 kbps, for example) for voiced frames and NELP frames for unvoiced frames (at 2.8 kbps, for example), which may reduce the average encoding rate. 
<!-- EPO <DP n="33"/>-->
 Alternatively, more generic frames may result in more transition ACELP frames (at 8.0 kbps, for example), which may increase the average encoding rate. </p><p id="p0142" num="0142"> [00126] Figure 10 is a block diagram illustrating one configuration of an encoding rate controller 1042. The encoding rate controller 1042 described in connection with Figure 10 may be one example of the encoding rate controller 342 described in connection with Figure 3. The encoding rate controller 1042 may include an average rate determination module 1044, a frame pattern determination module 1082, a threshold determination module 1046 and/or an encoding rate determination module 1090. One or more of the components of the encoding rate controller 1042 may be implemented in hardware (e.g., circuitry), software or a combination of both. </p><p id="p0143" num="0143"> [00127] The encoding rate controller 1042 may control an average encoding rate based on a target rate 1080, a metric 1052 and encoding information 1058. The encoding rate controller 1042 may control the average encoding rate by attempting to match the average encoding rate to the target rate 1080. The target rate 1080 may be received from another device (e.g., a base station) or may be predetermined. </p><p id="p0144" num="0144"> [00128] The encoding rate controller 1042 may provide an encoding rate indicator 1066 to select an encoder for encoding a frame of a speech signal. The encoding rate indicator 1066 specifies a particular encoder, rate and/or frame type. One or more encoders may provide encoding information 1058 to the encoding rate controller 1042. For example, the encoding information 1058 may include an amplitude error metric (e.g., amperror) and a low-band gain change metric (e.g., ALgainE ). Alternatively, the encoding rate controller 1042 may determine the amplitude error metric and low-band gain change metric based on the encoding information 1058. In some configurations, the encoding information 1058 may include a frame encoding rate. Additionally or alternatively, the encoding rate controller 1042 may obtain the frame encoding rate as indicated by the encoding rate indicator 1066. </p><p id="p0145" num="0145"> [00129] The average rate determination module 1044 may determine a first average rate (e.g., a long-term average rate or R^<sub>j</sub> ). The average rate determination module 1044 may also determine a short-term average rate (e.g., Ri<sub>as</sub>tN frames ^- This may be accomplished as described above in connection with Figure 3 and/or Equation (1). For instance, the average 
<!-- EPO <DP n="34"/>-->
 rate determination module 1044 may determine the short-term average rate and/or the long- term average rate based on the frame encoding rate utilized for each frame. The encoding rate controller 1042 may utilize the short-term average rate and/or the long-term average rate to control the average encoding rate. </p><p id="p0146" num="0146"> [00130] The threshold determination module 1046 may determine one or more thresholds. For example, the threshold determination module 1046 may include a first threshold determination module 1084, a frame adjustment threshold determination module 1086 and/or a voicing threshold determination module 1088. </p><p id="p0147" num="0147"> [00131] The first threshold determination module 1084 may determine a first threshold (e.g., TH<sub>CN</sub> ) based on the first average rate. This may be accomplished as described above. For example, if the first average rate (e.g., Ru ) is greater than the target rate 1080 (e.g., R<sub>target</sub> ) and the first threshold is less than a first threshold maximum, then the threshold determination module 1046 may increase the first threshold by a first threshold size factor. However, if the first average rate (e.g., Ru ) is less than or equal to the target rate 1080, then the threshold determination module 1046 may decrease the first threshold by a second threshold size factor. The first threshold may be provided to the encoding rate determination module 1090. </p><p id="p0148" num="0148"> [00132] The frame adjustment threshold determination module 1086 may determine a frame adjustment threshold set based on the first threshold and the metric 1052. This may be accomplished as described above. For example, the first threshold may be an SNR threshold and the metric 1052 may be an SNR. If the SNR is greater than the first threshold, the frame adjustment determination module 1086 may select a first frame adjustment threshold set. If the SNR is not greater than the first threshold, the frame adjustment determination module 1086 may select a second frame adjustment threshold set. This is one example of indirectly adjusting a frame adjustment threshold set, since the frame adjustment threshold set is determined based on the first threshold. The frame adjustment threshold set may be provided to the encoding rate determination module 1090. </p><p id="p0149" num="0149">[00133] The frame pattern determination module 1082 may determine a frame pattern. The may be accomplished as described above. For example, if the first average rate is greater than the target rate 1080, if the first threshold is greater than or equal to the first 
<!-- EPO <DP n="35"/>-->
 threshold maximum, if the frame pattern mode indicates a rate-increase frame pattern and if a second average rate (e.g., short-term average rate or Ri<sub>as</sub>tNframes ) *<sup>s</sup> greater than the target rate 1080, then the frame pattern determination module 1082 may set the frame pattern mode to indicate a rate-decrease frame pattern. The frame pattern mode may be provided to the encoding rate determination module 1090. </p><p id="p0150" num="0150"> [00134] The frame adjustment threshold determination module 1086 may adjust the frame adjustment threshold set based on the first average rate. This may be accomplished as described above. For example, if the first average rate is greater than the target rate 1080, if the first threshold is greater than or equal to the first threshold maximum, if the frame pattern mode indicates a rate-decrease frame pattern and the second average rate is greater than the target rate 1080, then the frame adjustment threshold determination module 1086 may set a frame adjustment mode to indicate a first frame adjustment set threshold set. The frame adjustment mode may be provided to the encoding rate determination module 1090. It should be noted that the frame adjustment thresholds may not be controlled directly in some configurations. For example, the frame adjustment thresholds may depend on the first threshold. </p><p id="p0151" num="0151"> [00135] The voicing threshold determination module 1088 may adjust a voicing threshold set based on the first average rate. This may be accomplished as described above. For example, if the first average rate is greater than the target rate 1080, if the first threshold is greater than or equal to the first threshold maximum, if the frame pattern mode indicates a rate-decrease frame pattern and the second average rate is greater than the target rate 1080 and if the first average rate is greater than the target rate 1080 plus a first tolerance, then the voicing threshold determination module 1088 may set the voicing threshold mode to indicate a first voicing threshold set. The voicing threshold mode may be provided to the encoding rate determination module 1090. </p><p id="p0152" num="0152"> [00136] The encoding rate determination module 1090 may determine the encoding rate indicator 1066 based on the metric 1052, the first threshold, the frame pattern mode, the frame adjustment mode, the voicing threshold mode and/or the encoding information 1058. In some configurations, the encoding rate determination module 1090 may first classify a frame as clean or noisy, then voiced or unvoiced. Then, the encoding rate determination module 1090 may impose or enforce the frame pattern. Finally, the encoding rate 
<!-- EPO <DP n="36"/>-->
 determination module 1090 may determine whether to "bump-up" the frame. There may be some instances, however, that a determination in a later state changes an earlier determination. The encoding rate indicator 1066 may be utilized to a select an encoder for encoding the frame as described above. </p><p id="p0153" num="0153"> [00137] Figure 11 is a flow diagram illustrating another more specific configuration of a method 1100 for controlling an average encoding rate. In particular, Figure 11 shows a more specific example of one or more of the methods 400, 600, 700, 800 described above in connection with one or more of Figure 4, Figure 6, Figure 7 and Figure 8. Table (2) provides a summary of the terms and symbols used in Figure 11. </p><p id="p0154" num="0154"> Term/Symbol Description </p><p id="p0155" num="0155"> QQFmode One example of the frame pattern mode. QQFmode = 1 indicates that the rate-decrease frame pattern is utilized. QQFmode = 0 indicates that the rate-increase frame pattern is utilized. </p><p id="p0156" num="0156"> One example of a first threshold.</p><p id="p0157" num="0157"> HCN </p><p id="p0158" num="0158"> One example of a first threshold maximum. </p><p id="p0159" num="0159"><sup>TH</sup>CNmax </p><p id="p0160" num="0160"> One example of a first threshold minimum. </p><p id="p0161" num="0161"><sup>TH</sup>CNmin </p><p id="p0162" num="0162"> RelaxBMPmode One example of a frame adjustment threshold mode. </p><p id="p0163" num="0163"> RelaxBMPmode = 1 indicates that a relaxed frame threshold set is utilized. RelaxBMPmode = 1 indicates that a tightened frame threshold set is utilized. </p><p id="p0164" num="0164"> One example of a long-term average rate. </p><p id="p0165" num="0165"> RLT </p><p id="p0166" num="0166"> One example of a short-term average rate. </p><p id="p0167" num="0167"> RlastNframes </p><p id="p0168" num="0168"> One example of a target rate. </p><p id="p0169" num="0169"> ^target </p><p id="p0170" num="0170"> One example of a first rate tolerance (e.g., set to 0.1 kbps for a 6.1 kbps target rate). </p><p id="p0171" num="0171"> One example of a second rate tolerance (e.g., set to 0.05 kbps for a tol2 </p><p id="p0172" num="0172"> 6.1 kbps target rate). 
<!-- EPO <DP n="37"/>-->
 One example of a first threshold size factor (e.g., an amount for increasing 77¾y). </p><p id="p0173" num="0173">One example of a second threshold size factor (e.g., an amount for th2 </p><p id="p0174" num="0174"> decreasing 77¾y). </p><p id="p0175" num="0175">RelaxVmode One example of a voicing threshold mode. RelaxVmode = 1 </p><p id="p0176" num="0176"> indicates that a relaxed voicing threshold set is utilized (e.g., more QPPP and NELP frames). RelaxVmode = 0 indicates that a </p><p id="p0177" num="0177"> tightened voicing threshold set is utilized. </p><p id="p0178" num="0178">Table (2) </p><p id="p0179" num="0179">[00138] An electronic device 340 may start 1102 coding. For example, the electronic device 340 may obtain a speech signal and begin to encode the speech signal as described above. </p><p id="p0180" num="0180"> [00139] The electronic device 340 may set 1104 the QQFmode = 1, TH <sub>QN</sub> = TH cNmax <sub>&gt;</sub> RelaxBMPmode = 1 and RelaxVmode = 0. This is one example of setting default parameters as described above. </p><p id="p0181" num="0181"> [00140] The electronic device 340 may determine 1106 whether an N-frame block has been reached. This may be accomplished as described above. If the N-frame block has not been reached, the electronic device 340 may process 1108 a next frame. This may be accomplished as described above. </p><p id="p0182" num="0182"> [00141] If the N-frame block has been reached, the electronic device 340 may determine 1110 R<sub>LT</sub> and Ri<sub>astNframes</sub> . R<sub>LT</sub> and Ri<sub>astNframes</sub> may be determined 1110 as described above. </p><p id="p0183" num="0183"> [00142] The electronic device 340 may determine 1112 if RLT <sup>&gt;</sup> ^target■ ^ RLT <sup>&gt;</sup> Rtarget <sub>&gt;</sub> <sup>me</sup> electronic device 340 may determine 1114 if THQ<sub>N</sub>≥ΤΗ^<sub>ΝΗΙΑΧ</sub> . If TH<sub>CN</sub> &lt; TH Nmax <sub>&gt;</sub> <sup>me</sup> electronic device 340 may set 1124 TH<sub>CN</sub> = TH<sub>CN</sub> + A<sub>th</sub> ^ . The electronic device 340 may return to process 1108 the next frame. 
<!-- EPO <DP n="38"/>-->
 [00143] If TH<sub>QN</sub>≥TH cNmax <sup>me</sup> electronic device 340 may determine 1116 whether QQFmode == 0 and whether Ri<sub>as</sub>tN frames &gt; <sup>R</sup>tar get - <sup>If</sup> QQFmode == 0 and RiastNframes <sup>&gt;</sup> Rtarget &gt; <sup>men me</sup> electronic device 340 may set 1126 QQFmode = 1. The electronic device 340 may return to process 1108 the next frame. </p><p id="p0184" num="0184"> [00144] If QQFmode == 1 or Ri<sub>as</sub>tNframes - Rtarget &gt; <sup>men me</sup> electronic device 340 may determine 1118 whether QQFmode == 1 and whether Ri<sub>as</sub>tNframes <sup>&gt;</sup> Rtarget - ^ QQFmode == 0 or RiastNframes— Rtarget &gt; <sup>men</sup> the electronic device 340 may return to process 1108 the next frame. If QQFmode == 1 and RiastNframes <sup>&gt;</sup> Rtarget &gt; <sup>men me</sup> electronic device 340 may set 1120 RelaxBMPmode = 1. </p><p id="p0185" num="0185"> [00145] The electronic device 340 may determine 1122 if R<sub>LT</sub> &gt; R<sub>tar</sub>get <sup>+</sup> ^toll · ^ <sup>me</sup> RLT <sup>&gt;</sup> Rta get <sup>+</sup> ^toll ' <sup>me</sup> electronic device 340 may set 1128 RelaxVmode = 1. The electronic device 340 may return to process 1108 the next frame. If R<sub>LT</sub>≤ R<sub>tar</sub>get <sup>+</sup> ^toll ' the electronic device 340 may return to process 1108 a next frame. </p><p id="p0186" num="0186"> [00146] If RJ ≤ Rtarget <sub>&gt;</sub> <sup>me</sup> electronic device 340 may set 1130 RelaxVmode = 0. The electronic device 340 may determine 1132 whether RelaxBMPmode == 1. If RelaxBMPmode == 1, the electronic device 340 may set 1142 RelaxBMPmode = 0. The electronic device 340 may return to process 1108 the next frame. </p><p id="p0187" num="0187"> [00147] If RelaxBMPmode == 0, the electronic device 340 may determine 1134 whether</p><p id="p0188" num="0188">QQFmode == 1. If QQFmode == 1, the electronic device 340 may set 1144 QQFmode = 0.</p><p id="p0189" num="0189">The electronic device 340 may return to process 1108 the next frame. </p><p id="p0190" num="0190"> [00148] If QQFmode == 0, the electronic device 340 may determine 1136 if</p><p id="p0191" num="0191">TH <sub>CN</sub>≥ TH cNmin · ^ TH <sub>CN</sub>≥ TH <sub>CNMIN</sub> , the electronic device 340 may set 1146</p><p id="p0192" num="0192">TH<sub>CN</sub> = TH<sub>CN</sub> - A<sub>th</sub> 2 - The electronic device 340 may return to process 1108 the next frame. </p><p id="p0193" num="0193"> [00149] If TH <sub>CN</sub> &lt; TH <sub>CNMIN</sub> , the electronic device 340 may determine 1138 if <sup>R</sup>LT &lt; Rtarget <sup>~</sup> tol2■ <sup>If R</sup>LT≥ <sup>R</sup>target + toll &gt; <sup>the</sup> electronic device 340 may return to process 1108 the next frame. 
<!-- EPO <DP n="39"/>-->
 [00150] If R^Y &lt; R-target <sup>~</sup> ^tol2 <sub>&gt;</sub> <sup>me</sup> electronic device 340 may move 1140 one or more low-rate frames to one or more high-rate frames to increase the average encoding rate. In some configurations, this may be based on an EVRC-B rate control algorithm. The electronic device 340 may return to process 1108 the next frame. </p><p id="p0194" num="0194"> [00151] Figure 12 is a block diagram illustrating one configuration of a wireless communication device 1240 in which systems and methods for controlling an average encoding rate may be implemented. The wireless communication device 1240 illustrated in Figure 12 may be an example of at least one of the electronic devices described herein. The wireless communication device 1240 may include an application processor 1211. The application processor 1211 generally processes instructions (e.g., runs programs) to perform functions on the wireless communication device 1240. The application processor 1211 may be coupled to an audio coder/decoder (codec) 1209. </p><p id="p0195" num="0195"> [00152] The audio codec 1209 may be used for coding and/or decoding audio signals. The audio codec 1209 may be coupled to at least one speaker 1201, an earpiece 1203, an output jack 1205 and/or at least one microphone 1207. The speakers 1201 may include one or more electro-acoustic transducers that convert electrical or electronic signals into acoustic signals. For example, the speakers 1201 may be used to play music or output a speakerphone conversation, etc. The earpiece 1203 may be another speaker or electro- acoustic transducer that can be used to output acoustic signals (e.g., speech signals) to a user. For example, the earpiece 1203 may be used such that only a user may reliably hear the acoustic signal. The output jack 1205 may be used for coupling other devices to the wireless communication device 1240 for outputting audio, such as headphones. The speakers 1201, earpiece 1203 and/or output jack 1205 may generally be used for outputting an audio signal from the audio codec 1209. The at least one microphone 1207 may be an acousto-electric transducer that converts an acoustic signal (such as a user's voice) into electrical or electronic signals that are provided to the audio codec 1209. </p><p id="p0196" num="0196">[00153] The audio codec 1209 (e.g., a decoder) may include an encoding rate controller 1242. The encoding rate controller 1242 may be an example of one or more of the encoding rate controllers 342, 1042 described above. In some configurations, the audio codec 1209 may include multiple encoders (e.g., encoders 356a-n). 
<!-- EPO <DP n="40"/>-->
 [00154] The application processor 1211 may also be coupled to a power management circuit 1221. One example of a power management circuit 1221 is a power management integrated circuit (PMIC), which may be used to manage the electrical power consumption of the wireless communication device 1240. The power management circuit 1221 may be coupled to a battery 1223. The battery 1223 may generally provide electrical power to the wireless communication device 1240. For example, the battery 1223 and/or the power management circuit 1221 may be coupled to at least one of the elements included in the wireless communication device 1240. </p><p id="p0197" num="0197"> [00155] The application processor 1211 may be coupled to at least one input device 1225 for receiving input. Examples of input devices 1225 include infrared sensors, image sensors, accelerometers, touch sensors, keypads, etc. The input devices 1225 may allow user interaction with the wireless communication device 1240. The application processor 1211 may also be coupled to one or more output devices 1227. Examples of output devices 1227 include printers, projectors, screens, haptic devices, etc. The output devices 1227 may allow the wireless communication device 1240 to produce output that may be experienced by a user. </p><p id="p0198" num="0198"> [00156] The application processor 1211 may be coupled to application memory 1229. The application memory 1229 may be any electronic device that is capable of storing electronic information. Examples of application memory 1229 include double data rate synchronous dynamic random access memory (DDRAM), synchronous dynamic random access memory (SDRAM), flash memory, etc. The application memory 1229 may provide storage for the application processor 1211. For instance, the application memory 1229 may store data and/or instructions for the functioning of programs that are run on the application processor 1211. </p><p id="p0199" num="0199"> [00157] The application processor 1211 may be coupled to a display controller 1231, which in turn may be coupled to a display 1233. The display controller 1231 may be a hardware block that is used to generate images on the display 1233. For example, the display controller 1231 may translate instructions and/or data from the application processor 1211 into images that can be presented on the display 1233. Examples of the display 1233 include liquid crystal display (LCD) panels, light emitting diode (LED) panels, cathode ray tube (CRT) displays, plasma displays, etc. 
<!-- EPO <DP n="41"/>-->
 [00158] The application processor 1211 may be coupled to a baseband processor 1213. The baseband processor 1213 generally processes communication signals. For example, the baseband processor 1213 may demodulate and/or decode received signals. Additionally or alternatively, the baseband processor 1213 may encode and/or modulate signals in preparation for transmission. </p><p id="p0200" num="0200"> [00159] The baseband processor 1213 may be coupled to baseband memory 1235. The baseband memory 1235 may be any electronic device capable of storing electronic information, such as SDRAM, DDRAM, flash memory, etc. The baseband processor 1213 may read information (e.g., instructions and/or data) from and/or write information to the baseband memory 1235. Additionally or alternatively, the baseband processor 1213 may use instructions and/or data stored in the baseband memory 1235 to perform communication operations. </p><p id="p0201" num="0201"> [00160] The baseband processor 1213 may be coupled to a radio frequency (RF) transceiver 1215. The RF transceiver 1215 may be coupled to a power amplifier 1217 and one or more antennas 1219. The RF transceiver 1215 may transmit and/or receive radio frequency signals. For example, the RF transceiver 1215 may transmit an RF signal using a power amplifier 1217 and at least one antenna 1219. The RF transceiver 1215 may also receive RF signals using the one or more antennas 1219. </p><p id="p0202" num="0202"> [00161] Figure 13 illustrates various components that may be utilized in an electronic device 1340. The illustrated components may be located within the same physical structure or in separate housings or structures. The electronic device 1340 described in connection with Figure 13 may be implemented in accordance with one or more of the electronic devices described herein. The electronic device 1340 includes a processor 1343. The processor 1343 may be a general purpose single- or multi-chip microprocessor (e.g., an ARM), a special purpose microprocessor (e.g., a digital signal processor (DSP)), a microcontroller, a programmable gate array, etc. The processor 1343 may be referred to as a central processing unit (CPU). Although just a single processor 1343 is shown in the electronic device 1340 of Figure 13, in an alternative configuration, a combination of processors (e.g., an ARM and DSP) could be used. </p><p id="p0203" num="0203"> [00162] The electronic device 1340 also includes memory 1337 in electronic communication with the processor 1343. That is, the processor 1343 can read information 
<!-- EPO <DP n="42"/>-->
 from and/or write information to the memory 1337. The memory 1337 may be any electronic component capable of storing electronic information. The memory 1337 may be random access memory (RAM), read-only memory (ROM), magnetic disk storage media, optical storage media, flash memory devices in RAM, on-board memory included with the processor, programmable read-only memory (PROM), erasable programmable read-only memory (EPROM), electrically erasable PROM (EEPROM), registers, and so forth, including combinations thereof. </p><p id="p0204" num="0204"> [00163] Data 1341a and instructions 1339a may be stored in the memory 1337. The instructions 1339a may include one or more programs, routines, sub-routines, functions, procedures, etc. The instructions 1339a may include a single computer-readable statement or many computer-readable statements. The instructions 1339a may be executable by the processor 1343 to implement one or more of the methods, functions and procedures described above. Executing the instructions 1339a may involve the use of the data 1341a that is stored in the memory 1337. Figure 13 shows some instructions 1339b and data 1341b being loaded into the processor 1343 (which may come from instructions 1339a and data 1341a). </p><p id="p0205" num="0205"> [00164] The electronic device 1340 may also include one or more communication interfaces 1347 for communicating with other electronic devices. The communication interfaces 1347 may be based on wired communication technology, wireless communication technology, or both. Examples of different types of communication interfaces 1347 include a serial port, a parallel port, a Universal Serial Bus (USB), an Ethernet adapter, an IEEE 1394 bus interface, a small computer system interface (SCSI) bus interface, an infrared (IR) communication port, a Bluetooth wireless communication adapter, and so forth. </p><p id="p0206" num="0206"> [00165] The electronic device 1340 may also include one or more input devices 1349 and one or more output devices 1353. Examples of different kinds of input devices 1349 include a keyboard, mouse, microphone, remote control device, button, joystick, trackball, touchpad, lightpen, etc. For instance, the electronic device 1340 may include one or more microphones 1351 for capturing acoustic signals. In one configuration, a microphone 1351 may be a transducer that converts acoustic signals (e.g., voice, speech) into electrical or electronic signals. Examples of different kinds of output devices 1353 include a speaker, 
<!-- EPO <DP n="43"/>-->
 printer, etc. For instance, the electronic device 1340 may include one or more speakers 1355. In one configuration, a speaker 1355 may be a transducer that converts electrical or electronic signals into acoustic signals. One specific type of output device which may be typically included in an electronic device 1340 is a display device 1357. Display devices 1357 used with configurations disclosed herein may utilize any suitable image projection technology, such as a cathode ray tube (CRT), liquid crystal display (LCD), light-emitting diode (LED), gas plasma, electroluminescence, or the like. A display controller 1359 may also be provided, for converting data stored in the memory 1337 into text, graphics, and/or moving images (as appropriate) shown on the display device 1357. </p><p id="p0207" num="0207"> [00166] The various components of the electronic device 1340 may be coupled together by one or more buses, which may include a power bus, a control signal bus, a status signal bus, a data bus, etc. For simplicity, the various buses are illustrated in Figure 13 as a bus system 1345. It should be noted that Figure 13 illustrates only one possible configuration of an electronic device 1340. Various other architectures and components may be utilized. </p><p id="p0208" num="0208">[00167] In the above description, reference numbers have sometimes been used in connection with various terms. Where a term is used in connection with a reference number, this may be meant to refer to a specific element that is shown in one or more of the Figures. Where a term is used without a reference number, this may be meant to refer generally to the term without limitation to any particular Figure. </p><p id="p0209" num="0209"> [00168] The term "determining" encompasses a wide variety of actions and, therefore, "determining" can include calculating, computing, processing, deriving, investigating, looking up (e.g., looking up in a table, a database or another data structure), ascertaining and the like. Also, "determining" can include receiving (e.g., receiving information), accessing (e.g., accessing data in a memory) and the like. Also, "determining" can include resolving, selecting, choosing, establishing and the like. </p><p id="p0210" num="0210"> [00169] The phrase "based on" does not mean "based only on," unless expressly specified otherwise. In other words, the phrase "based on" describes both "based only on" and "based at least on." </p><p id="p0211" num="0211"> [00170] It should be noted that one or more of the features, functions, procedures, components, elements, structures, etc., described in connection with any one of the configurations described herein may be combined with one or more of the functions, 
<!-- EPO <DP n="44"/>-->
 procedures, components, elements, structures, etc., described in connection with any of the other configurations described herein, where compatible. In other words, any compatible combination of the functions, procedures, components, elements, etc., described herein may be implemented in accordance with the systems and methods disclosed herein. </p><p id="p0212" num="0212">[00171] The functions described herein may be stored as one or more instructions on a processor-readable or computer-readable medium. The term "computer-readable medium" refers to any available medium that can be accessed by a computer or processor. By way of example, and not limitation, such a medium may comprise RAM, ROM, EEPROM, flash memory, CD-ROM or other optical disk storage, magnetic disk storage or other magnetic storage devices, or any other medium that can be used to store desired program code in the form of instructions or data structures and that can be accessed by a computer. Disk and disc, as used herein, includes compact disc (CD), laser disc, optical disc, digital versatile </p><p id="p0213" num="0213"> ® </p><p id="p0214" num="0214">disc (DVD), floppy disk and Blu-ray disc where disks usually reproduce data magnetically, while discs reproduce data optically with lasers. It should be noted that a computer-readable medium may be tangible and non-transitory. The term "computer- program product" refers to a computing device or processor in combination with code or instructions (e.g., a "program") that may be executed, processed or computed by the computing device or processor. As used herein, the term "code" may refer to software, instructions, code or data that is/are executable by a computing device or processor. </p><p id="p0215" num="0215">[00172] Software or instructions may also be transmitted over a transmission medium. For example, if the software is transmitted from a website, server, or other remote source using a coaxial cable, fiber optic cable, twisted pair, digital subscriber line (DSL), or wireless technologies such as infrared, radio, and microwave, then the coaxial cable, fiber optic cable, twisted pair, DSL, or wireless technologies such as infrared, radio, and microwave are included in the definition of transmission medium. </p><p id="p0216" num="0216"> [00173] The methods disclosed herein comprise one or more steps or actions for achieving the described method. The method steps and/or actions may be interchanged with one another without departing from the scope of the claims. In other words, unless a specific order of steps or actions is required for proper operation of the method that is being described, the order and/or use of specific steps and/or actions may be modified without departing from the scope of the claims. 
<!-- EPO <DP n="45"/>-->
 [00174] It is to be understood that the claims are not limited to the precise configuration and components illustrated above. Various modifications, changes and variations may be made in the arrangement, operation and details of the systems, methods, and apparatus described herein without departing from the scope of the claims. </p><p id="p0217" num="0217">[00175] What is claimed is : 
</p></description><claims mxw-id="PCLM70077327" ref-ucid="WO-2014130085-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="46"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method for controlling an average encoding rate by an electronic device, comprising: </claim-text><claim-text> obtaining a speech signal; </claim-text><claim-text> determining a first average rate; </claim-text><claim-text> determining a first threshold based on the first average rate; </claim-text><claim-text> controlling the average encoding rate by determining at least one other threshold based on the first threshold; and </claim-text><claim-text> sending an encoded speech signal. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein controlling the average encoding rate further comprises determining a frame pattern. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 2, wherein a first frame pattern requires a minimum number of high-rate frames between low-rate frames and a second frame pattern only allows a maximum number of low-rate frames between high-rate frames. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 1, wherein the first threshold classifies a frame as a clean frame or a noisy frame. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 1, wherein the at least one other threshold is a threshold set. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of claim 1, wherein determining the at least one other threshold is further based on a metric. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 6, wherein determining the at least one other threshold comprises: </claim-text><claim-text> selecting a first threshold set if the metric is not greater than the first threshold; and selecting a second threshold set if the metric is greater than the first threshold. 
<!-- EPO <DP n="47"/>-->
</claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of claim 7, wherein the first threshold set is a first frame adjustment threshold set and the second threshold set is a second frame adjustment threshold set. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 1, wherein controlling the average encoding rate further comprises adjusting the first threshold based on the first average rate. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 1, wherein controlling the average encoding rate further comprises adjusting at least one voicing threshold based on the first average rate. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method of claim 10, wherein adjusting the at least one voicing threshold comprises selecting a voicing threshold set. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. An electronic device for controlling an average encoding rate, comprising: </claim-text><claim-text> average rate determination circuitry that determines a first average rate; </claim-text><claim-text> threshold determination circuitry that determines a first threshold based on the first average rate; and </claim-text><claim-text> encoding rate controller circuitry that comprises the average rate determination circuitry and the threshold determination circuitry, wherein the encoding rate controller controls the average encoding rate by determining at least one other threshold based on the first threshold. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The electronic device of claim 12, wherein controlling the average encoding rate further comprises determining a frame pattern. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The electronic device of claim 13, wherein a first frame pattern requires a minimum number of high-rate frames between low-rate frames and a second frame pattern only allows a maximum number of low-rate frames between high-rate frames. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The electronic device of claim 12, wherein the first threshold classifies a frame as a clean frame or a noisy frame. 
<!-- EPO <DP n="48"/>-->
</claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The electronic device of claim 12, wherein the at least one other threshold is a threshold set. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The electronic device of claim 12, wherein determining the at least one other threshold is further based on a metric. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The electronic device of claim 17, wherein determining the at least one other threshold comprises: </claim-text><claim-text> selecting a first threshold set if the metric is not greater than the first threshold; and selecting a second threshold set if the metric is greater than the first threshold. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The electronic device of claim 18, wherein the first threshold set is a first frame adjustment threshold set and the second threshold set is a second frame adjustment threshold set. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The electronic device of claim 12, wherein controlling the average encoding rate further comprises adjusting the first threshold based on the first average rate. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The electronic device of claim 12, wherein controlling the average encoding rate further comprises adjusting at least one voicing threshold based on the first average rate. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The electronic device of claim 21, wherein adjusting the at least one voicing threshold comprises selecting a voicing threshold set. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. A computer-program product for controlling an average encoding rate, comprising a non-transitory tangible computer-readable medium having instructions thereon, the instructions comprising: </claim-text><claim-text> code for causing an electronic device to obtain a speech signal; </claim-text><claim-text> code for causing the electronic device to determine a first average rate; </claim-text><claim-text> code for causing the electronic device to determine a first threshold based on the first average rate; 
<!-- EPO <DP n="49"/>-->
 code for causing the electronic device to control the average encoding rate by determining at least one other threshold based on the first threshold; and code for causing the electronic device to send an encoded speech signal. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The computer-program product of claim 23, wherein controlling the average encoding rate further comprises determining a frame pattern. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. The computer-program product of claim 24, wherein a first frame pattern requires a minimum number of high-rate frames between low-rate frames and a second frame pattern only allows a maximum number of low-rate frames between high-rate frames. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The computer-program product of claim 23, wherein the first threshold classifies a frame as a clean frame or a noisy frame. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. The computer-program product of claim 23, wherein the at least one other threshold is a threshold set. </claim-text></claim><claim id="clm-0028" num="28"><claim-text>28. The computer-program product of claim 23, wherein determining the at least one other threshold is further based on a metric. </claim-text></claim><claim id="clm-0029" num="29"><claim-text>29. The computer-program product of claim 28, wherein determining the at least one other threshold comprises: </claim-text><claim-text> selecting a first threshold set if the metric is not greater than the first threshold; and selecting a second threshold set if the metric is greater than the first threshold. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>30. The computer-program product of claim 29, wherein the first threshold set is a first frame adjustment threshold set and the second threshold set is a second frame adjustment threshold set. </claim-text></claim><claim id="clm-0031" num="31"><claim-text>31. The computer-program product of claim 23, wherein controlling the average encoding rate further comprises adjusting the first threshold based on the first average rate. 
<!-- EPO <DP n="50"/>-->
</claim-text></claim><claim id="clm-0032" num="32"><claim-text>32. The computer-program product of claim 23, wherein controlling the average encoding rate further comprises adjusting at least one voicing threshold based on the first average rate. </claim-text></claim><claim id="clm-0033" num="33"><claim-text>33. The computer-program product of claim 32, wherein adjusting the at least one voicing threshold comprises selecting a voicing threshold set. </claim-text></claim><claim id="clm-0034" num="34"><claim-text>34. An apparatus for controlling an average encoding rate, comprising: </claim-text><claim-text> means for obtaining a speech signal; </claim-text><claim-text> means for determining a first average rate; </claim-text><claim-text> means for determining a first threshold based on the first average rate; </claim-text><claim-text> means for controlling the average encoding rate by determining at least one other threshold based on the first threshold; and </claim-text><claim-text> means for sending an encoded speech signal. </claim-text></claim><claim id="clm-0035" num="35"><claim-text>35. The apparatus of claim 34, wherein controlling the average encoding rate further comprises determining a frame pattern. </claim-text></claim><claim id="clm-0036" num="36"><claim-text>36. The apparatus of claim 35, wherein a first frame pattern requires a minimum number of high-rate frames between low-rate frames and a second frame pattern only allows a maximum number of low-rate frames between high-rate frames. </claim-text></claim><claim id="clm-0037" num="37"><claim-text>37. The apparatus of claim 34, wherein the first threshold classifies a frame as a clean frame or a noisy frame. </claim-text></claim><claim id="clm-0038" num="38"><claim-text>38. The apparatus of claim 34, wherein the at least one other threshold is a threshold set. </claim-text></claim><claim id="clm-0039" num="39"><claim-text>39. The apparatus of claim 34, wherein determining the at least one other threshold is further based on a metric. 
<!-- EPO <DP n="51"/>-->
</claim-text></claim><claim id="clm-0040" num="40"><claim-text>40. The apparatus of claim 39, wherein determining the at least one other threshold comprises: </claim-text><claim-text> selecting a first threshold set if the metric is not greater than the first threshold; and selecting a second threshold set if the metric is greater than the first threshold. </claim-text></claim><claim id="clm-0041" num="41"><claim-text>41. The apparatus of claim 40, wherein the first threshold set is a first frame adjustment threshold set and the second threshold set is a second frame adjustment threshold set. </claim-text></claim><claim id="clm-0042" num="42"><claim-text>42. The apparatus of claim 34, wherein controlling the average encoding rate further comprises adjusting the first threshold based on the first average rate. </claim-text></claim><claim id="clm-0043" num="43"><claim-text>43. The apparatus of claim 34, wherein controlling the average encoding rate further comprises adjusting at least one voicing threshold based on the first average rate. </claim-text></claim><claim id="clm-0044" num="44"><claim-text>44. The apparatus of claim 43, wherein adjusting the at least one voicing threshold comprises selecting a voicing threshold set. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
