<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959479-A1" country="EP" doc-number="2959479" kind="A1" date="20151230" family-id="50151293" file-reference-id="305537" date-produced="20180825" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="160453182" ucid="EP-2959479-A1"><document-id><country>EP</country><doc-number>2959479</doc-number><kind>A1</kind><date>20151230</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-14705785-A" is-representative="NO"><document-id mxw-id="PAPP193869332" load-source="docdb" format="epo"><country>EP</country><doc-number>14705785</doc-number><kind>A</kind><date>20140221</date><lang>EN</lang></document-id><document-id mxw-id="PAPP193869333" load-source="patent-office" format="original"><country>EP</country><doc-number>14705785.5</doc-number><date>20140221</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162028175" ucid="EP-2014053475-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2014053475</doc-number><kind>W</kind><date>20140221</date></document-id></priority-claim><priority-claim mxw-id="PPC162033108" ucid="US-201361767673-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201361767673</doc-number><kind>P</kind><date>20130221</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1988525664" load-source="docdb">G10L  19/16        20130101ALI20140912BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1988525710" load-source="docdb">G10L  19/008       20130101AFI20140912BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1853804305" load-source="docdb" scheme="CPC">G10L  19/167       20130101 LI20170127BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984700498" load-source="docdb" scheme="CPC">H04S2400/01        20130101 LA20160107BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984703587" load-source="docdb" scheme="CPC">H04S2420/03        20130101 LA20160107BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984704259" load-source="docdb" scheme="CPC">H04S   3/008       20130101 LI20160107BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984704580" load-source="docdb" scheme="CPC">H04S2400/03        20130101 LA20160107BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984705507" load-source="docdb" scheme="CPC">G10L  19/008       20130101 FI20160108BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165551012" lang="DE" load-source="patent-office">VERFAHREN ZUR PARAMETRISCHEN MEHRKANALCODIERUNG</invention-title><invention-title mxw-id="PT165551013" lang="EN" load-source="patent-office">METHODS FOR PARAMETRIC MULTI-CHANNEL ENCODING</invention-title><invention-title mxw-id="PT165551014" lang="FR" load-source="patent-office">PROCÉDÉS D'ENCODAGE MULTICANAL PARAMÉTRIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103340748" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DOLBY INT AB</last-name><address><country>NL</country></address></addressbook></applicant><applicant mxw-id="PPAR1103327864" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DOLBY INTERNATIONAL AB</last-name></addressbook></applicant><applicant mxw-id="PPAR1101646263" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dolby International AB</last-name><iid>101245610</iid><address><street>Apollo Building, 3E Herikerbergweg 1-35</street><city>1101 CN Amsterdam Zuid-oost</city><country>NL</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103344854" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FRIEDRICH TOBIAS</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342869" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FRIEDRICH, Tobias</last-name></addressbook></inventor><inventor mxw-id="PPAR1101647331" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>FRIEDRICH, Tobias</last-name><address><street>c/o Dolby Germany GmbH Deutschherrnstrasse 15-19</street><city>90429 Nuremberg</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313955" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MUELLER ALEXANDER</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103308720" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MUELLER, ALEXANDER</last-name></addressbook></inventor><inventor mxw-id="PPAR1101649099" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MUELLER, ALEXANDER</last-name><address><street>c/o Dolby Germany GmbH Deutschherrnstrasse 15-19</street><city>90429 Nuremberg</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103327317" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LINZMEIER KARSTEN</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103318388" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LINZMEIER,Karsten</last-name></addressbook></inventor><inventor mxw-id="PPAR1101651558" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LINZMEIER,Karsten</last-name><address><street>c/o Dolby Germany GmbH Deutschherrnstrasse 15-19</street><city>90429 Nuremberg</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103343417" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>SPENGER CLAUS-CHRISTIAN</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103332964" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>SPENGER, CLAUS-CHRISTIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR1101652418" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>SPENGER, CLAUS-CHRISTIAN</last-name><address><street>c/o Dolby Germany GmbH Deutschherrnstrasse 15-19</street><city>90429 Nuremberg</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103313075" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>WAGENBLASS TOBIAS R</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR1103304486" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>WAGENBLASS, Tobias, R.</last-name></addressbook></inventor><inventor mxw-id="PPAR1101644242" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>WAGENBLASS, Tobias, R.</last-name><address><street>c/o Dolby Germany GmbH Deutschherrnstrasse 15-19</street><city>90429 Nuremberg</city><country>DE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101651509" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dolby International AB Patent Group Europe</last-name><iid>101283339</iid><address><street>Apollo Building, 3E Herikerbergweg 1-35</street><city>1101 CN Amsterdam Zuidoost</city><country>NL</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2014053475-W"><document-id><country>EP</country><doc-number>2014053475</doc-number><kind>W</kind><date>20140221</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014128275-A1"><document-id><country>WO</country><doc-number>2014128275</doc-number><kind>A1</kind><date>20140828</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660741562" load-source="docdb">AL</country><country mxw-id="DS660634568" load-source="docdb">AT</country><country mxw-id="DS660741568" load-source="docdb">BE</country><country mxw-id="DS660722144" load-source="docdb">BG</country><country mxw-id="DS660791982" load-source="docdb">CH</country><country mxw-id="DS660716435" load-source="docdb">CY</country><country mxw-id="DS660634569" load-source="docdb">CZ</country><country mxw-id="DS660712596" load-source="docdb">DE</country><country mxw-id="DS660716436" load-source="docdb">DK</country><country mxw-id="DS660716437" load-source="docdb">EE</country><country mxw-id="DS660636363" load-source="docdb">ES</country><country mxw-id="DS660722145" load-source="docdb">FI</country><country mxw-id="DS660722146" load-source="docdb">FR</country><country mxw-id="DS660741569" load-source="docdb">GB</country><country mxw-id="DS660741570" load-source="docdb">GR</country><country mxw-id="DS660741583" load-source="docdb">HR</country><country mxw-id="DS660634570" load-source="docdb">HU</country><country mxw-id="DS660791983" load-source="docdb">IE</country><country mxw-id="DS660741584" load-source="docdb">IS</country><country mxw-id="DS660722167" load-source="docdb">IT</country><country mxw-id="DS660716438" load-source="docdb">LI</country><country mxw-id="DS660712597" load-source="docdb">LT</country><country mxw-id="DS660634575" load-source="docdb">LU</country><country mxw-id="DS660712598" load-source="docdb">LV</country><country mxw-id="DS660712603" load-source="docdb">MC</country><country mxw-id="DS660633377" load-source="docdb">MK</country><country mxw-id="DS660633378" load-source="docdb">MT</country><country mxw-id="DS660741585" load-source="docdb">NL</country><country mxw-id="DS660722168" load-source="docdb">NO</country><country mxw-id="DS660741586" load-source="docdb">PL</country><country mxw-id="DS660791984" load-source="docdb">PT</country><country mxw-id="DS660741595" load-source="docdb">RO</country><country mxw-id="DS660791985" load-source="docdb">RS</country><country mxw-id="DS660741596" load-source="docdb">SE</country><country mxw-id="DS660791986" load-source="docdb">SI</country><country mxw-id="DS660712605" load-source="docdb">SK</country><country mxw-id="DS660712606" load-source="docdb">SM</country><country mxw-id="DS660716443" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139079835" ref-ucid="WO-2014128275-A1" lang="EN" load-source="patent-office"><p num="0000">The present document relates to audio coding systems. In particular, the present document relates to efficient methods and systems for parametric multi-channel audio coding. An audio encoding system (500) configured to generate a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal is described. The system (500) comprises a downmix processing unit (510) configured to generate the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n. Furthermore, the system (500) comprises a parameter processing unit (520) configured to determine the spatial metadata from the multi-channel input signal (561). In addition, the system (500) comprises a configuration unit (540) configured to determine one or more control settings for the parameter processing unit (520) based on one or more external settings; wherein the one or more external settings comprise a target data-rate for the bitstream (564) and wherein the one or more control settings comprise a maximum data-rate for the spatial metadata.</p></abstract><abstract mxw-id="PA139546390" ref-ucid="WO-2014128275-A1" lang="EN" source="national office" load-source="docdb"><p>The present document relates to audio coding systems. In particular, the present document relates to efficient methods and systems for parametric multi-channel audio coding. An audio encoding system (500) configured to generate a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal is described. The system (500) comprises a downmix processing unit (510) configured to generate the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n. Furthermore, the system (500) comprises a parameter processing unit (520) configured to determine the spatial metadata from the multi-channel input signal (561). In addition, the system (500) comprises a configuration unit (540) configured to determine one or more control settings for the parameter processing unit (520) based on one or more external settings; wherein the one or more external settings comprise a target data-rate for the bitstream (564) and wherein the one or more control settings comprise a maximum data-rate for the spatial metadata.</p></abstract><abstract mxw-id="PA139079836" ref-ucid="WO-2014128275-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention concerne des systèmes de codage audio. En particulier, la présente invention concerne des procédés et des systèmes efficaces pour un codage audio multicanal paramétrique. Un système d'encodage audio (500) configuré pour générer un train de bits (564) indicatif d'un signal de mélange-réduction et des métadonnées spatiales pour générer un signal de mélange-élévation multicanal à partir du signal de mélange-réduction est décrit. Le système (500) comprend une unité de traitement de mélange-réduction (510) configurée pour générer le signal de mélange-réduction à partir d'un signal d'entrée multicanal (561) ; le signal de mélange-réduction comprenant m canaux et le signal d'entrée multicanal (561) comprenant n canaux ; n, m étant des entiers avec m &lt; n. En outre, le système (500) comprend une unité de traitement de paramètres (520) configurée pour déterminer les métadonnées spatiales à partir du signal d'entrée multicanal (561). De plus, le système (500) comprend une unité de configuration (540) configurée pour déterminer un ou plusieurs réglages de commande pour l'unité de traitement de paramètres (520) sur la base d'un ou de plusieurs réglages externes ; le ou les réglages externes comprenant un débit de données cible pour le train de bits (564) et le ou les réglages de commande comprenant un débit de données maximum pour les métadonnées spatiales.</p></abstract><abstract mxw-id="PA139546391" ref-ucid="WO-2014128275-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention concerne des systèmes de codage audio. En particulier, la présente invention concerne des procédés et des systèmes efficaces pour un codage audio multicanal paramétrique. Un système d'encodage audio (500) configuré pour générer un train de bits (564) indicatif d'un signal de mélange-réduction et des métadonnées spatiales pour générer un signal de mélange-élévation multicanal à partir du signal de mélange-réduction est décrit. Le système (500) comprend une unité de traitement de mélange-réduction (510) configurée pour générer le signal de mélange-réduction à partir d'un signal d'entrée multicanal (561) ; le signal de mélange-réduction comprenant m canaux et le signal d'entrée multicanal (561) comprenant n canaux ; n, m étant des entiers avec m &lt; n. En outre, le système (500) comprend une unité de traitement de paramètres (520) configurée pour déterminer les métadonnées spatiales à partir du signal d'entrée multicanal (561). De plus, le système (500) comprend une unité de configuration (540) configurée pour déterminer un ou plusieurs réglages de commande pour l'unité de traitement de paramètres (520) sur la base d'un ou de plusieurs réglages externes ; le ou les réglages externes comprenant un débit de données cible pour le train de bits (564) et le ou les réglages de commande comprenant un débit de données maximum pour les métadonnées spatiales.</p></abstract><description mxw-id="PDES78478069" ref-ucid="WO-2014128275-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> Methods for Parametric Multi-Channel Encoding CROSS-REFERENCE TO RELATED APPLICATIONS </p><p id="p0002" num="0002"> This application claims priority to U.S. provisional patent application No. 61/767,673 filed 21 February 2013 which is hereby incorporated by reference in its entirety. </p><p id="p0003" num="0003">TECHNICAL FIELD </p><p id="p0004" num="0004"> The present document relates to audio coding systems. In particular, the present document relates to efficient methods and systems for parametric multi-channel audio coding. </p><p id="p0005" num="0005">BACKGROUND </p><p id="p0006" num="0006">Parametric multi-channel audio coding system may be used to provide increased listening quality at particularly low data-rates. Nevertheless, there is a need to further improve such parametric multi-channel audio coding systems, notably with respect to bandwidth efficiency, computational efficiency and/or robustness. SUMMARY </p><p id="p0007" num="0007"> According to an aspect an audio encoding system is described which is configured to generate a bitstream indicative of a downmix signal and spatial metadata. The spatial metadata may be used by a corresponding decoding system to generate a multi-channel upmix signal from the downmix signal. The downmix signal may comprise m channels and the multi-channel upmix signal may comprise n channels with n, m being integers and with m&lt;n. In an example, n=6 and m=2. The spatial metadata may allow the corresponding decoding system to generate the n channels of the multi-channel upmix signal from the m channels of the downmix signal. The audio encoding system may be configured to quantize and/or to encode the downmix signal and the spatial metadata and to insert the quantized / encoded data into the bitstream. In particular, the downmix signal may be encoded using a Dolby Digital Plus encoder, and the bitstream may correspond to a Dolby Digital Plus bitstream. The quantized / encoded spatial metadata may be inserted into a data field of the Dolby Digital Plus bitstream. </p><p id="p0008" num="0008">The audio encoding system may comprise a downmix processing unit configured to generate the downmix signal from a multi-channel input signal. The downmix processing unit is also referred to herein as the downmix coding unit. The multi-channel input signal may comprise 
<!-- EPO <DP n="4"/>-->
 n channels, like the multi-channel upmix signal which is re-generated based on the downmix signal. In particular, the multi-channel upmix signal may provide an approximation of the multi-channel input signal. The downmix unit may comprise the above mentioned Dolby Digital Plus encoder. The multi-channel upmix signal and the multi-channel input signal may be 5.1 or 7.1 signals and the downmix signal may be a stereo signal. </p><p id="p0009" num="0009">The audio encoding system may comprise a parameter processing unit configured to determine the spatial metadata from the multi-channel input signal. In particular, the parameter processing unit (which is also referred to as the parameter encoding unit in the present document) may be configured to determined one or more spatial parameters, e.g. a set of spatial parameters, which may be determined based on different combinations of the channels of the multi-channel input signal. A spatial parameter of the set of spatial parameters may be indicative of a cross-correlation between different channels of the multichannel input signal. The parameter processing unit may be configured to determine spatial metadata for a frame of the multi-channel input signal, referred to as a spatial metadata frame. A frame of the multi-channel input signal typically comprises a pre-determined number (e.g. 1536) of samples of the multi-channel input signal. Each spatial metadata frame may comprise one or more sets of spatial parameters. The audio encoding system may further comprise a configuration unit configured to determine one or more control settings for the parameter processing unit based on one or more external settings. The one or more external settings may comprise a target data-rate for the bitstream. Alternatively or in addition, the one or more external settings may comprise one or more of: a sampling rate of the multi-channel input signal, the number m of channels of the downmix signal, the number n of channels of the multi-channel input signal, and/or an update period indicative of a time period required by a corresponding decoding system to synchronize to the bitstream. The one or more control settings may comprise a maximum data-rate for the spatial metadata. In case of spatial metadata frames, the maximum data-rate for the spatial metadata may be indicative of a maximum number of metadata bits for a spatial metadata frame. Alternatively or in addition, the one or more control settings may comprise one or more of: a temporal resolution setting indicative of a number of sets of spatial parameters per spatial metadata frame to be determined, a frequency resolution setting indicative of a number of frequency bands for which spatial parameters are to be determined, 
<!-- EPO <DP n="5"/>-->
 a quantizer setting indicative of a type of quantizer to be used for quantizing the spatial metadata, and an indication whether a current frame of the multi-channel input signal is to be encoded as an independent frame. The parameter processing unit may be configured to determine whether the number of bits of a spatial metadata frame which has been determined in accordance to the one or more control settings exceeds the maximum number of metadata bits. Furthermore, the parameter processing unit may be configured to reduce the number of bits of a particular spatial metadata frame, if it is determined that the number of bits of the particular spatial metadata frame exceeds the maximum number of metadata bits. This reduction of the number of bits may be performed in a resource (processing power) efficient manner. In particular, this reduction of the number of bits may be performed without the need of re-calculating the complete spatial metadata frame. As indicated above, a spatial metadata frame may comprise one or more sets of spatial parameters. The one or more control settings may comprise a temporal resolution setting indicative of a number of sets of spatial parameters per spatial metadata frame to be determined by the parameter processing unit. The parameter processing unit may be configured to determine as many sets of spatial parameters for a current spatial metadata frame, as indicated by the temporal resolution setting. Typically the temporal resolution setting takes on the values of 1 or 2. Furthermore, the parameter processing unit may be configured to discard a set of spatial parameters from the current spatial metadata frame, if the current spatial metadata frame comprises a plurality of sets of spatial parameters and if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. The parameter processing unit may be configured to retain at least one set of spatial parameters per spatial metadata frame. By discarding a set of spatial parameters from the spatial metadata frame, the number of bits of the spatial metadata frame may be reduced with little computational effort and without significantly impacting the perceived listening quality of the multi-channel upmix signal. </p><p id="p0010" num="0010">The one or more sets of spatial parameters are typically associated with corresponding one or more sampling points. The one or more sampling points may be indicative of corresponding one or more time instants. In particular, a sampling point may be indicative of the time instant 
<!-- EPO <DP n="6"/>-->
 at which a decoding system should fully apply the corresponding set of spatial parameters. In other words, a sampling point may be indicative of the time instant for which the </p><p id="p0011" num="0011">corresponding set of spatial parameters has been determined. The parameter processing unit may be configured to discard a first set of spatial parameters from the current spatial metadata frame, wherein the first set of spatial parameters is associated with a first sampling point prior to a second sampling point, if the plurality of sampling points of the current metadata frame is not associated with transients of the multichannel input signal. On the other hand, the parameter processing unit may be configured to discard the second (which is typically the last) set of spatial parameters from the current spatial metadata frame, if the plurality of sampling points of the current metadata frame is associated with transients of the multi-channel input signal. By doing this, the parameter processing unit may be configured to reduce the effect of discarding a set of spatial parameters on the listening quality of the multi-channel upmix signal. </p><p id="p0012" num="0012">The one or more control settings may comprise a quantizer setting indicative of a first type of quantizer from a plurality of pre-determined types of quantizers. The plurality of predetermined types of quantizers may provide different quantizer resolutions, respectively. In particular, the plurality of pre-determined types of quantizers may comprise a fine quantization and a coarse quantization. The parameter processing unit may be configured to quantize the one or more sets of spatial parameters of a current spatial metadata frame in accordance to the first type of quantizer. Furthermore, the parameter processing unit may be configured to re-quantize one, some or all of the spatial parameters of the one or more sets of spatial parameters in accordance to a second type of quantizer having a lower resolution than the first type of quantizer, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. By doing this, the number of bits of the current spatial metadata frame can be reduced, while affecting the quality of the upmix signal only to a limited extent, and while not significantly increasing the </p><p id="p0013" num="0013">computational complexity of the audio encoding system. </p><p id="p0014" num="0014">The parameter processing unit may be configured to determine a set of temporal difference parameters based on the difference of a current set of spatial parameters with respect to a directly preceding set of spatial parameters. In particular, a temporal difference parameter 
<!-- EPO <DP n="7"/>-->
 may be determined by determining the difference of a parameter of the current set of spatial parameters and a corresponding parameter of the directly preceding set of spatial parameters. The set of spatial parameters may comprise e.g. the parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β- , g, k<sub>x</sub> k<sub>2</sub> described in the present document. Typically, only one of the parameters k k<sub>2</sub> may need to </p><p id="p0015" num="0015"> 2 2 </p><p id="p0016" num="0016">be transmitted, as the parameters may be related by the relation k<sub>1</sub> + k<sub>2</sub> = 1. By way of example only the parameter k may be transmitted and the parameter k<sub>2</sub> may be calculated at the receiver. The temporal difference parameters may relate to the difference of </p><p id="p0017" num="0017">corresponding ones of the above mentioned parameters. The parameter processing unit may be configured to encode the set of temporal difference parameters using entropy encoding, e.g. using Huffman codes. Furthermore, the parameter processing unit may be configured to insert the encoded set of temporal difference parameters into the current spatial metadata frame. In addition, the parameter processing unit may be configured to reduce an entropy of the set of temporal difference parameters, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. As a result of this, the number of bits required for entropy encoding the temporal difference parameters may be reduced, thereby reducing the number of bits used for the current spatial metadata frame. By way of example, the parameter processing unit may be configured to set one, some or all of the temporal difference parameters of the set of temporal difference parameters equal to a value having an increased (e.g. the highest) probability of possible values of the temporal difference parameters, in order to reduce the entropy of the set of temporal difference parameters. In particular, the probability may be increased compared to the probability of the temporal difference parameter prior to the setting operation. Typically, the value having the highest probability of possible values of the temporal difference parameters corresponds to zero. </p><p id="p0018" num="0018">It should be noted that temporal differential encoding of the set of spatial parameters typically may not be used for independent frames. As such, the parameter processing unit may be configured to verify whether the current spatial metadata frame is an independent frame, and only apply temporal differential encoding, if the current spatial metadata frame is not an independent frame. On the other hand, the frequency differential encoding described below may also be used for independent frames. 
<!-- EPO <DP n="8"/>-->
 The one or more control settings may comprise a frequency resolution setting, wherein the frequency resolution setting is indicative of a number of different frequency bands for which respective spatial parameters, referred to as band parameters, are to be determined. The parameter processing unit may be configured to determine different corresponding spatial parameters (band parameters) for the different frequency bands. In particular, different parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β- , g, k k<sub>2</sub> for the different frequency bands may be determined. The set of spatial parameters may therefore comprise corresponding band parameters for the different frequency bands. By way of example, the set of spatial parameters may comprise T corresponding band parameters for T frequency bands, T being an integer, e.g. T=7, 9, 12 or 15. </p><p id="p0019" num="0019">The parameter processing unit may be configured to determine a set of frequency difference parameters based on the difference of one or more band parameters in a first frequency band with respect to corresponding one or more band parameters in a second, adjacent, frequency band. Furthermore, the parameter processing unit may be configured to encode the set of frequency difference parameters using entropy encoding, e.g. based on Huffman codes. In addition, the parameter processing unit may be configured to insert the encoded set of frequency difference parameters into the current spatial metadata frame. Furthermore, the parameter processing unit may be configured to reduce an entropy of the set of frequency difference parameters, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. In particular, the parameter processing unit may be configured to set one, some or all of the frequency difference parameters of the set of frequency difference parameters equal to a value (e.g. zero) having an increased probability of possible values of the frequency difference parameters, in order to reduce the entropy of the set of frequency difference parameters. In particular, the probability may be increased compared to the probability of the frequency difference parameter prior to the setting operation. </p><p id="p0020" num="0020">Alternatively or in addition, the parameter processing unit may be configured to reduce the number of frequency bands, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. In addition, the parameter processing unit may be configured to re-determine some or all of the one or more sets of spatial parameters for the current spatial metadata frame using the reduced number of 
<!-- EPO <DP n="9"/>-->
 frequency bands. Typically, a change in the number of frequency bands affects mainly the high frequency bands. As a result, the band parameters of one of more frequencies may not be affected, such that the parameter processing unit may not need to recalculate all the band parameters. </p><p id="p0021" num="0021">As indicated above, the one or more external settings may comprise an update period indicative of a time period required by a corresponding decoding system to synchronize to the bitstream. Furthermore, the one or more control settings may comprise an indication whether a current spatial metadata frame is to be encoded as an independent frame. The parameter processing unit may be configured to determine a sequence of spatial metadata frames for a corresponding sequence of frames of the multi-channel input signal. The configuration unit may be configured to determine the one or more spatial metadata frames from the sequence of spatial metadata frames, which are to be encoded as independent frames, based on the update period. </p><p id="p0022" num="0022">In particular, the one or more independent spatial metadata frames may be determined such that the update period is met (in average). For this purpose, the configuration unit may be configured to determine whether a current frame of the sequence of frames of the multichannel input signal comprises a sample at a time instant (relative of the beginning of the multi-channel input signal) which is an integer multiple of the update period. Furthermore, the configuration unit may be configured to determine that the current spatial metadata frame corresponding to the current frame is an independent frame (as it comprises a sample at a time instant which is an integer multiple of the update period). The parameter processing unit may be configured to encode one or more sets of spatial parameters of a current spatial metadata frame independently from data comprised in a previous (and/or future) spatial metadata frame, if the current spatial metadata frame is to be encoded as an independent frame. Typically, all the sets of spatial parameters of the current spatial metadata are encoded independently from data comprised in a previous (and/or future) spatial metadata frame, if the current spatial metadata frame is to be encoded as an independent frame. </p><p id="p0023" num="0023">According to another aspect, a parameter processing unit is described, which is configured to determine a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal. The downmix signal may comprise m 
<!-- EPO <DP n="10"/>-->
 channels and the multi-channel upmix signal may comprise n channels; n, m being integers with m&lt;n. As outlined above, the spatial metadata frame may comprise one or more sets of spatial parameters. The parameter processing unit may comprise a transform unit configured to determine a plurality of spectra from a current frame and a directly following frame (referred to as a look- ahead frame) of a channel of the multi-channel input signal. The transform unit may make use of a filterbank, e.g. a QMF filterbank. A spectrum of the plurality of spectra may comprise a pre-determined number of transform coefficients in a corresponding pre- determined number of frequency bins. The plurality of spectra may be associated with a corresponding plurality of time bins (or time instants). As such, the transform unit may be configured to provide a time / frequency representation of the current frame and of the look- ahead frame. By way of example, the current frame and the look-ahead frame may comprise K samples each. The transform unit may be configured to determine 2 times K/Q spectra comprising Q transform coefficients each. </p><p id="p0024" num="0024">The parameter processing unit may comprise a parameter determination unit configured to determine the spatial metadata frame for the current frame of the channel of the multi-channel input signal by weighting the plurality of spectra using a window function. The window function may be used to adjust the impact of a spectrum of the plurality of spectra on a particular spatial parameter or on a particular set of spatial parameters. By way of example, the window function may take on values between 0 and 1. </p><p id="p0025" num="0025">The window function may depend on one or more of: a number of sets of spatial parameters comprised within the spatial metadata frame, a presence of one or more transients in the current frame or in the directly following frame of the multi-channel input signal, and/or a time instant of the transient. In other words, the window function may be adapted in accordance to properties of the current frame and/or of the look-ahead frame. In particular, the window function used for determining a set of spatial parameters (referred to as a set- dependent window function) may depend on the properties of the current frame and/or of the look-ahead frame. 
<!-- EPO <DP n="11"/>-->
 As such, the window function may comprise a set-dependent window function. In particular, the window function for determining the spatial parameters of a spatial metadata frame may comprise (or may be made up from) one or more set-dependent window functions for the one or more sets of spatial parameters, respectively. The parameter determination unit may be configured to determine a set of spatial parameters for the current frame of the channel of the multi-channel input signal (i.e. for the current spatial metadata frame) by weighting the plurality of spectra using the set-dependent window function. As outlined above, the set- dependent window function may depend on one or more properties of the current frame. In particular, the set-dependent window function may depend on whether the set of spatial parameters is associated with a transient or not. </p><p id="p0026" num="0026">By way of example, if the set of spatial parameters is not associated with a transient, the set- dependent window function may be configured to provide a phase-in of the plurality of spectra starting from a sampling point of a preceding set of spatial parameters up to a sampling point of the set of spatial parameters. The phase-in may be provided by a window function transiting from 0 to 1. Alternatively or in addition, if the set of spatial parameters is not associated with a transient, the set-dependent window function may include (or may consider fully or may leave unaffected) the plurality of spectra starting from the sampling point of the set of spatial parameters up to a spectrum of the plurality of spectra preceding a sampling point of a following set of spatial parameters, if the following set of spatial parameters is associated with a transient. This may be achieved by a window function having a value of 1. Alternatively or in addition, if the set of spatial parameters is not associated with a transient, the set-dependent window function may cancel out (or may exclude or may attenuate) the plurality of spectra starting from the sampling point of the following set of spatial parameters, if the following set of spatial parameters is associated with a transient.</p><p id="p0027" num="0027">This may be achieved by a window function having a value of 0. Alternatively or in addition, if the set of spatial parameters is not associated with a transient, the set-dependent window function may phase-out the plurality of spectra starting from the sampling point of the set of spatial parameters up to a spectrum of the plurality of spectra preceding a sampling point of a following set of spatial parameters, if the following set of spatial parameters is not associated with a transient. The phase-in may be provided by a window function transiting from 1 to 0. 
<!-- EPO <DP n="12"/>-->
 On the other hand, if the set of spatial parameters is associated with a transient, the set- dependent window function may cancel out (or may exclude or may attenuate) the spectra from the plurality of spectra preceding a sampling point of the set of spatial parameters. </p><p id="p0028" num="0028">Alternatively or in addition, if the set of spatial parameters is associated with a transient, the set-dependent window function may include (or may leave unaffected) the spectra from the plurality of spectra starting from the sampling point of the set of spatial parameters up to the spectrum of the plurality of spectra preceding a sampling point of the following set of spatial parameters and may cancel out (or may exclude or may attenuate) the spectra from the plurality of spectra starting from the sampling point of the following set of spatial parameters, if the sampling point of the following set of spatial parameters is associated with a transient. Alternatively or in addition, if the set of spatial parameters is associated with a transient, the set-dependent window function may include (or may leave unaffected) the spectra of the plurality of spectra from the sampling point of the set of spatial parameters up to the spectrum of the plurality of spectra at an end of the current frame and may provide for a phase-out of (or may progressively attenuate) the spectra of the plurality of spectra from a beginning of the directly following frame up to the sampling point of the following set of spatial parameters, if the following set of spatial parameters is not associated with a transient. </p><p id="p0029" num="0029">According to a further aspect, a parameter processing unit is described, which is configured to determine a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal. The downmix signal may comprise m channels and the multi-channel upmix signal may comprise n channels; n, m being integers with m&lt;n. As discussed above, the spatial metadata frame may comprise a set of spatial parameters. </p><p id="p0030" num="0030">As outlined above, the parameter processing unit may comprise a transform unit. The transform unit may be configured to determine a first plurality of transform coefficients from a frame of a first channel of a multi-channel input signal. Furthermore, the transform unit may be configured to determine a second plurality of transform coefficients from the corresponding frame of a second channel of the multi-channel input signal. The first and second channels may be different. As such, the first and second plurality of transform coefficients provide a first and a second time / frequency representation of the corresponding frames of the first and second channels, respectively. As outlined above, the first and second 
<!-- EPO <DP n="13"/>-->
 time / frequency representations comprise a plurality of frequency bins and a plurality of time bins. </p><p id="p0031" num="0031">Furthermore, the parameter processing unit may comprise a parameter determination unit configured to determine the set of spatial parameters based on the first and second plurality of transform coefficients using fixed point arithmetic. As indicated above, the set of spatial parameters typically comprises corresponding band parameters for different frequency bands, wherein the different frequency bands may comprise different numbers of frequency bins. A particular band parameter for a particular frequency band may be determined based on the transform coefficients from the first and second plurality of transform coefficients of the particular frequency band (typically without considering the transform coefficients of the other frequency bands). The parameter determination unit may be configured to determine a shift which is used by the fixed point arithmetic for determining the particular band parameter in dependence on the particular frequency band. Notably, the shift used by the fixed point arithmetic for determining the particular band parameter for the particular frequency band may depend on the number of frequency bins comprised within the particular frequency band. Alternatively or in addition, the shift used by the fixed point arithmetic for determining the particular band parameter for the particular frequency band may depend on the number of time bins to be considered for determining the particular band parameter. </p><p id="p0032" num="0032">The parameter determination unit may be configured to determine a shift for the particular frequency band such that a precision of the particular band parameter is maximized. This may be achieved by determining the shift needed for each multiply and add operation of the determination process of the particular band parameter. </p><p id="p0033" num="0033">The parameter determination unit may be configured to determine the particular band parameter for the particular frequency band p, by determining a first energy (or energy estimate) E<sub>l</sub> (p) based on the transform coefficients from the first plurality of transform coefficients falling into the particular frequency band p. Furthermore, a second energy (or energy estimate) E<sub>2i2</sub> (p) may be determined based on the transform coefficients from the second plurality of transform coefficients falling into the particular frequency band p. In addition, a cross-product or covariance E<sub>1 2</sub> (p) may be determined based on the transform coefficients from the first and second plurality of transform coefficients falling into the 
<!-- EPO <DP n="14"/>-->
 particular frequency band p. The parameter determination unit may be configured to determine the shift z<sub>p</sub> for the particular band parameter p based on a maximum of the first energy estimate
<img id="imgf000014_0001" he="6" wi="15" file="imgf000014_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 the second energy estimate E<sub>2i2</sub> (p) and the absolute value of the co variance E<sub>1 2</sub> p). </p><p id="p0034" num="0034">According to another aspect, an audio encoding system is described, which is configured to generate a bitstream indicative of a sequence of frames of a downmix signal and a </p><p id="p0035" num="0035">corresponding sequence of spatial metadata frames for generating a corresponding sequence of frames of a multi-channel upmix signal from the sequence of frames of the downmix signal. The system may comprise a downmix processing unit configured to generate the sequence of frames of the downmix signal from a corresponding sequence of frames of a multi-channel input signal. As indicated above, the downmix signal may comprise m channels and the multi-channel input signal may comprise n channels; n, m being integers with m&lt;n. Furthermore, the audio encoding system may comprise a parameter processing unit configured to determine the sequence of spatial metadata frames from the sequence of frames of the multi-channel input signal. </p><p id="p0036" num="0036">In addition, the audio encoding system may comprise a bitstream generation unit configured to generate the bitstream comprising a sequence of bitstream frames, wherein a bitstream frame is indicative of a frame of the downmix signal corresponding to a first frame of the multi-channel input signal and a spatial metadata frame corresponding to a second frame of the multi-channel input signal. The second frame may be different from the first frame. In particular, the first frame may precede the second frame. By doing this, the spatial metadata frame for a current frame may be transmitted along with the frame of a subsequent frame. This ensures that the spatial metadata frame only arrives at the corresponding decoding system when it is needed. The decoding system typically decodes the current frame of the downmix signal and generates a decorrelated frame based on the current frame of the downmix signal. This processing introduces algorithmic delay, and by delaying the spatial metadata frame for the current frame, it is ensured that the spatial metadata frame only arrives at the decoding system, once the decoded current frame and the decorrelated frame are provided. As a result, the processing power and memory requirements of the decoding system can be reduced. 
<!-- EPO <DP n="15"/>-->
 In other words, an audio encoding system configured to generate a bitstream based on a multi-channel input signal is described. As outlined above, the system may comprise a downmix processing unit configured to generate a sequence of frames of a downmix signal from a corresponding sequence of first frames of the multi-channel input signal. The downmix signal may comprise m channels and the multi-channel input signal may comprise n channels; n, m being integers with m&lt;n. Furthermore, the audio encoding system may comprise a parameter processing unit configured to determine a sequence of spatial metadata frames from a sequence of second frames of the multi-channel input signal. The sequence of frames of the downmix signal and the sequence of spatial metadata frames may be used by a corresponding decoding system for generating a multi-channel upmix signal comprising n channels. </p><p id="p0037" num="0037">The audio encoding system may further comprise a bitstream generation unit configured to generate the bitstream comprising a sequence of bitstream frames, wherein a bitstream frame may be indicative of a frame of the downmix signal corresponding to a first frame of the sequence of first frames of the multi-channel input signal and a spatial metadata frame corresponding to a second frame of the sequence of second frames of the multi-channel input signal. The second frame may be different from the first frame. In other words, the framing used for determining the spatial metadata frames and the framing used for determining the frames of the downmix signal may be different. As outlined above, the different framing may be used to ensure that the data is aligned at the corresponding decoding system. </p><p id="p0038" num="0038">The first frame and the second frame typically comprise the same number of samples (e.g. 1536 samples). Some of the samples of the first frame may precede the samples of the second frame. In particular, the first frame may precede the second frame by a pre-determined number of samples. The predetermined number of samples may e.g. correspond to a fraction of the number of samples of a frame. By way of example, the pre-determined number of samples may correspond to 50% or more of the number of samples of a frame. In a particular example, the pre-determined number of samples corresponds to 928 samples. As is shown in the present document, this particular number of samples provides a minimum overall delay and an optimum alignment for a particular implementation of the audio encoding and decoding system. 
<!-- EPO <DP n="16"/>-->
 According to a further aspect, an audio encoding system configured to generate a bitstream based on a multi-channel input signal is described. The system may comprise a downmix processing unit configured to determine a sequence of clipping protection gains (also referred to as clip-gains and/or DRC2 parameters in the present document) for a corresponding sequence of frames of the multi-channel input signal. A current clipping protection gain may be indicative of an attenuation to be applied to a current frame of the multi-channel input signal to prevent a corresponding current frame of a downmix signal from clipping. In a similar manner, the sequence of clipping protection gains may be indicative of the respective attenuation to be applied to the frames of the sequence of frames of the multi-channel input signal to prevent the corresponding frames of a sequence of frames of the downmix signal from clipping. </p><p id="p0039" num="0039">The downmix processing unit may be configured to interpolate the current clipping protection gain and a preceding clipping protection gain of a preceding frame of the multi-channel input signal to yield a clipping protection gain curve. This may be performed in a similar manner for the sequence of clipping protection gains. Furthermore, the downmix processing unit may be configured to apply the clipping protection gain curve to the current frame of the multichannel input signal to yield an attenuated current frame of the multi-channel input signal. Again this may be performed in a similar manner for the sequence of frames of the multi- channel input signal. Furthermore, the downmix processing unit may be configured to generate a current frame of a sequence of frames of the downmix signal from the attenuated current frame of the multi-channel input signal. In a similar manner, the sequence of frames of the downmix signal may be generated. The audio processing system may further comprise a parameter processing unit configured to determine a sequence of spatial metadata frames from the multi-channel input signal. The sequence of frames of the downmix signal and the sequence of spatial metadata frames may be used to generate a multi-channel upmix signal comprising n channels, such that the multichannel upmix signal is an approximation of the multi-channel input signal. In addition, the audio processing system may comprise a bitstream generation unit configured to generate the bitstream indicative of the sequence of clipping protection gains, the sequence of frames of the downmix signal and the sequence of spatial metadata frames, to enable a corresponding 
<!-- EPO <DP n="17"/>-->
 decoding system to generate the multi-channel upmix signal. </p><p id="p0040" num="0040">The clipping protection gain curve may comprise a transition segment, providing a smooth transition from the preceding clipping protection gain to the current clipping protection gain and a flat segment, remaining flat at the current clipping protection gain. The transition segment may extend across a pre-determined number of samples of the current frame of the multi-channel input signal. The pre-determined number of samples may be greater than one and smaller than a total number of samples of the current frame of the multi-channel input signal. In particular, the pre-determined number of samples may correspond to a block of samples (wherein a frame may comprise a plurality of blocks) or to a frame. In a particular example, a frame may comprise 1536 samples and a block may comprise 256 samples. </p><p id="p0041" num="0041">According to a further aspect, an audio encoding system is described, which is configured to generate a bitstream indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal. The system may comprise a downmix processing unit configured to generate the downmix signal from a multi-channel input signal. Furthermore, the system may comprise a parameter processing unit configured to determine a sequence of frames of spatial metadata for a corresponding sequence of frames of the multichannel input signal. </p><p id="p0042" num="0042">Furthermore, the audio encoding system may comprise a configuration unit configured to determine one or more control settings for the parameter processing unit based on one or more external settings. The one or more external settings may comprise an update period indicative of a time period required by a corresponding decoding system to synchronize to the bitstream. The configuration unit may be configured to determine one or more independent frames of spatial metadata from the sequence of frames of spatial metadata, which are to be encoded independently, based on the update period. </p><p id="p0043" num="0043">According to another aspect, a method for generating a bitstream indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal is described. The method may comprise generating the downmix signal from a multichannel input signal. Furthermore, the method may comprise determining one or more control settings based on one or more external settings; wherein the one or more external 
<!-- EPO <DP n="18"/>-->
 settings comprise a target data-rate for the bitstream and wherein the one or more control settings comprise a maximum data-rate for the spatial metadata. In addition, the method may comprise determining the spatial metadata from the multi-channel input signal subject to the one or more control settings. </p><p id="p0044" num="0044">According to a further aspect, a method for determining a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal is described. The method may comprise determining a plurality of spectra from a current frame and a directly following frame of a channel of a multi-channel input signal. Furthermore, the method may comprise weighting the plurality of spectra using a window function to yield a plurality of weighted spectra. In addition, the method may comprise determining the spatial metadata frame for the current frame of the channel of the multi-channel input signal based on the plurality of weighted spectra. The window function may depend on one or more of: a number of sets of spatial parameters comprised within the spatial metadata frame, a presence of a transient in the current frame or in the directly following frame of the multi-channel input signal, and/or a time instant of the transient. </p><p id="p0045" num="0045">According to a further aspect, a method for determining a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal is described. The method may comprise determining a first plurality of transform coefficients from a frame of a first channel of a multi-channel input signal, and determining a second plurality of transform coefficients from the corresponding frame of a second channel of the multi-channel input signal. As outlined above, the first and second plurality of transform coefficients typically provide a first and second time / frequency representation of the corresponding frames of the first and second channels, respectively. The first and second time / frequency representations may comprise a plurality of frequency bins and a plurality of time bins. A set of spatial parameters may comprise corresponding band parameters for different frequency bands comprising different numbers of frequency bins, respectively. The method may further comprise determining a shift to be applied when determining a particular band parameter for a particular frequency band using fixed point arithmetic. The shift may be determined based on the particular frequency band. Furthermore, the shift may be determined based on the number of time bins to be considered for determining the particular band parameter. In addition, the method may comprise 
<!-- EPO <DP n="19"/>-->
 determining the particular band parameter based on the first and second plurality of transform coefficients, which fall within the particular frequency band, using fixed point arithmetic and the determined shift. A method for generating a bitstream based on a multi-channel input signal is described. The method may comprise generating a sequence of frames of a downmix signal from a corresponding sequence of first frames of the multi-channel input signal. Furthermore, the method may comprise determining a sequence of spatial metadata frames from a sequence of second frames of the multi-channel input signal. The sequence of frames of the downmix signal and the sequence of spatial metadata frames may be for generating a multi-channel upmix signal. In addition, the method may comprise generating the bitstream comprising a sequence of bitstream frames. A bitstream frame may be indicative of a frame of the downmix signal corresponding to a first frame of the sequence of first frames of the multichannel input signal and a spatial metadata frame corresponding to a second frame of the sequence of second frames of the multi-channel input signal. The second frame may be different from the first frame. </p><p id="p0046" num="0046">According to a further aspect, a method for generating a bitstream based on a multi-channel input signal is described. The method may comprise determining a sequence of clipping protection gains for a corresponding sequence of frames of the multi-channel input signal. A current clipping protection gain may be indicative of an attenuation to be applied to a current frame of the multi-channel input signal to prevent a corresponding current frame of a downmix signal from clipping. The method may proceed in interpolating the current clipping protection gain and a preceding clipping protection gain of a preceding frame of the multi- channel input signal to yield a clipping protection gain curve. Furthermore, the method may comprise applying the clipping protection gain curve to the current frame of the multichannel input signal to yield an attenuated current frame of the multi-channel input signal. A current frame of a sequence of frames of the downmix signal may be generated from the attenuated current frame of the multi-channel input signal. In addition, the method may comprise determining a sequence of spatial metadata frames from the multi-channel input signal. The sequence of frames of the downmix signal and the sequence of spatial metadata frames may be used for generating a multi-channel upmix signal. The bitstream may be generated such that the bitstream is indicative of the sequence of clipping protection gains, 
<!-- EPO <DP n="20"/>-->
 the sequence of frames of the downmix signal and the sequence of spatial metadata frames, to enable the generation of the multi-channel upmix signal based on the bitstream. </p><p id="p0047" num="0047">According to a further aspect, a method for generating a bitstream indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal is described. The method may comprise generating the downmix signal from a multichannel input signal. Furthermore, the method may comprise determining one or more control settings based on one or more external settings, wherein the one or more external settings comprise an update period indicative of a time period required by a decoding system to synchronize to the bitstream. The method may further comprise determining a sequence of frames of spatial metadata for a corresponding sequence of frames of the multi-channel input signal, subject to one or more control settings. In addition, the method may comprise encoding one or more frames of spatial metadata from the sequence of frames of spatial metadata as independent frames, in accordance to the update period. </p><p id="p0048" num="0048">According to a further aspect, a software program is described. The software program may be adapted for execution on a processor and for performing the method steps outlined in the present document when carried out on the processor. According to another aspect, a storage medium is described. The storage medium may comprise a software program adapted for execution on a processor and for performing the method steps outlined in the present document when carried out on the processor. </p><p id="p0049" num="0049">According to a further aspect, a computer program product is described. The computer program may comprise executable instructions for performing the method steps outlined in the present document when executed on a computer. </p><p id="p0050" num="0050">It should be noted that the methods and systems including its preferred embodiments as outlined in the present patent application may be used stand-alone or in combination with the other methods and systems disclosed in this document. Furthermore, all aspects of the methods and systems outlined in the present patent application may be arbitrarily combined. In particular, the features of the claims may be combined with one another in an arbitrary manner. 
<!-- EPO <DP n="21"/>-->
 SHORT DESCRIPTION OF THE FIGURES </p><p id="p0051" num="0051"> The invention is explained below in an exemplary manner with reference to the </p><p id="p0052" num="0052">accompanying drawings, wherein </p><p id="p0053" num="0053">Fig. 1 shows a generalized block diagram of an example audio processing system for performing spatial synthesis; </p><p id="p0054" num="0054"> Fig. 2 shows an example detail of the system of Fig. 1; </p><p id="p0055" num="0055"> Fig. 3 shows, similarly to Fig. 1, an example audio processing system for performing spatial synthesis; </p><p id="p0056" num="0056"> Fig. 4 shows an example audio processing system for performing spatial analysis; </p><p id="p0057" num="0057">Fig. 5a shows a block diagram of an example parametric multi-channel audio encoding system; </p><p id="p0058" num="0058"> Fig. 5b shows a block diagram of an example spatial analysis and encoding system; </p><p id="p0059" num="0059">Fig. 5c illustrates an example time- frequency representation of a frame of a channel of a multi-channel audio signal; </p><p id="p0060" num="0060"> Fig. 5d illustrates an example time- frequency representation of a plurality of channels of a multi-channel audio signal; </p><p id="p0061" num="0061"> Fig. 5e shows an example windowing applied by a transform unit of the spatial analysis and encoding system shown in Fig. 5b; </p><p id="p0062" num="0062"> Fig. 6 shows a flow diagram of an example method for reducing the data-rate of spatial metadata; </p><p id="p0063" num="0063"> Fig. 7a illustrates example transition schemes for spatial metadata performed at a decoding system; </p><p id="p0064" num="0064">Figs. 7b to 7d illustrate example window functions applied for the determination of spatial metadata; </p><p id="p0065" num="0065"> Fig. 8 shows a block diagram of example processing paths of a parametric multi-channel codec system; </p><p id="p0066" num="0066"> Figs. 9a and 9b show block diagrams of an example parametric multi-channel audio encoding system configured to perform clipping protection and/or dynamic range control; </p><p id="p0067" num="0067">Fig. 10 illustrates an example method for compensating DRC parameters; and </p><p id="p0068" num="0068">Fig. 11 shows an example interpolation curve for clipping protection. 
<!-- EPO <DP n="22"/>-->
 DETAILED DESCRIPTION </p><p id="p0069" num="0069"> As outlined in the introductory section, the present document relates to multi-channel audio coding systems which make use of a parametric multi-channel representation. In the following an example multi-channel audio coding and decoding (codec) system is described. In the context of Figs. 1 to 3, it is described how a decoder of the audio codec system may use a received parametric multi-channel representation to generate an n-channel upmix signal Y (typically n&gt;2) from a received m-channel downmix signal X (e.g. m=2). Subsequently, the encoder related processing of the multi-channel audio codec system is described. In particular, it is described how a parametric multi-channel representation and an m-channel downmix signal may be generated from an n-channel input signal. </p><p id="p0070" num="0070">Fig. 1 illustrates a block-diagram of an example audio processing system 100 which is configured to generate an upmix signal Y from a downmix signal X and from a set of mixing parameters. In particular, the audio processing system 100 is configured to generate the upmix signal solely based on the downmix signal X and the set of mixing parameters. From a bitstream P, an audio decoder 140 extracts a downmix signal X = [l<sub>0</sub> r<sub>0</sub>]<sup>T</sup>and a set of mixing parameters. In the illustrated example, the set of mixing parameters comprises the parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β- , g, k<sub>x</sub> k<sub>2</sub>. The mixing parameters may be included in quantized and/or entropy encoded form in respective mixing parameter data fields in the bitstream P. The mixing parameters may be referred to as metadata (or spatial metadata) which is transmitted along with the encoded downmix signal X. In some instances of the present disclosure, it has been indicated explicitly that some connection lines are adapted to transmit multi-channel signals, wherein these lines have been provided with a cross line adjacent to the respective number of channels. In the system 100 shown in Fig. 1 , the downmix signal X comprises m = 2 channels, and an upmix signal Y to be defined below comprises n = 6 channels (e.g. 5.1 channels). </p><p id="p0071" num="0071">An upmix stage 1 10, the action of which depends parametrically on the mixing parameters, receives the downmix signal. A downmix modifying processor 120 modifies the downmix signal by non-linear processing and by forming a linear combination of the downmix channels, so as to obtain a modified downmix signal D = d<sub>2</sub>]<sup>T</sup> . A first mixing matrix 130 receives the downmix signal X and the modified downmix signal D and outputs an upmix signal Y = [If l<sub>s</sub> <sup>r</sup>f r<sub>s</sub> c lfe]<sup>T</sup> by forming the following linear combination: 
<!-- EPO <DP n="23"/>-->
 
<img id="imgf000023_0001" he="40" wi="138" file="imgf000023_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0072" num="0072">In the above linear combination, the mixing parameter a<sub>3</sub> controls the contribution of a mid- type signal (proportional to l<sub>0</sub> + r<sub>0</sub>) formed from the downmix signal to all channels in the upmix signal. The mixing parameter β<sub>3</sub> controls the contribution of a side-type signal (proportional to l<sub>0</sub>— r<sub>0</sub>) to all channels in the upmix signal. Hence, in a use case, it may be reasonably expected that the mixing parameters a<sub>3</sub> and β<sub>3</sub> will have different statistical properties, which enables more efficient coding. (Considering as a comparison a reference parameterization where independent mixing parameters control respective left-channel and right-channel contributions from the downmix signal to the spatially left and right channels in the upmix signal, it is noted that the statistical observables of such mixing parameters may not differ notably.) </p><p id="p0073" num="0073">Returning to the linear combination shown in the above equation, it is noted, further, that the gain parameters k<sub>lt</sub> k<sub>2</sub> may be dependent on a common single mixing parameter in the </p><p id="p0074" num="0074"> 2 2 bitstream P. Furthermore, the gain parameters may be normalized such that k<sub>1</sub> + k<sub>2</sub> = 1. </p><p id="p0075" num="0075">The contributions from the modified downmix signal to the spatially left and right channels in the upmix signal may be controlled separately by parameters (first modified channel's contribution to left channels) and β<sub>2</sub> (second modified channel's contribution to right channels). Further, the contribution from each channel in the downmix signal to its spatially corresponding channels in the upmix signal may be individually controllable by varying the independent mixing parameter g. Preferably, the gain parameter g is quantized nonuniformly so as to avoid large quantization errors. </p><p id="p0076" num="0076">Referring now additionally to Fig. 2, the downmix modifying processor 120 may perform, in a second mixing matrix 121, the following linear combination (which is a cross mix) of the downmix channels: 
<!-- EPO <DP n="24"/>-->
 
<img id="imgf000024_0001" he="13" wi="75" file="imgf000024_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0077" num="0077">As indicated by the formula, the gains populating the second mixing matrix may depend parametrically on some of the mixing parameters encoded in the bitstream P. The processing carried out by the second mixing matrix 121 results in an intermediate signal Z = [<sup>z</sup>i ¾]<sup>T</sup>, which is supplied to a decorrelator 122. Fig. 1 shows an example in which the decorrelator 122 comprises two sub-decorrelators 123, 124, which may be identically configured (i.e., providing identical outputs in response to identical inputs) or differently configured. As an alternative to this, Fig. 2 shows an example in which all decorrelation-related operations are carried out by a single unit 122, which outputs a preliminary modified downmix signal D' . The downmix modifying processor 120 in Fig. 2 may further include an artifact attenuator 125. In an example embodiment, as outlined above, the artifact attenuator 125 is configured to detect sound endings in the intermediate signal Z and to take corrective action by attenuating, based on the detected locations of the sound endings, undesirable artifacts in this signal. This attenuation produces the modified downmix signal D, which is output from the downmix modifying processor 120. </p><p id="p0078" num="0078">Fig. 3 shows a first mixing matrix 130 of a similar type as the one shown in Fig. 1 and its associated transform stages 301 , 302 and inverse transform stages 31 1 , 312, 313, 314, 315, 316. The transform stages may e.g. comprise filterbanks such as Quadrature Mirror </p><p id="p0079" num="0079">Filterbanks (QMF). Hence, the signals located upstream of the transform stages 301 , 302 are representations in the time domain, as are the signals located downstream of the inverse transform stages 31 1 , 312, 313, 314, 315, 316. The other signals are frequency-domain representations. The time-dependency of the other signals may for instance be expressed as discrete values or blocks of values relating to time blocks into which the signal is segmented. It is noted that Fig. 3 uses alternative notation in comparison with the matrix equations above; one may for instance have the correspondences X<sub>L0</sub>~ l<sub>0</sub>, X<sub>R0</sub>~ r<sub>0</sub>, Y<sub>L</sub>~ If, Y<sub>Ls</sub>~ l<sub>s</sub> and so forth. Further, the notation in Fig. 3 emphasizes the distinction between a time-domain </p><p id="p0080" num="0080">representation X<sub>L0</sub> (t) of a signal and the frequency-domain representation X<sub>L0</sub> ( <sup>"</sup>) of the same signal. It is understood that the frequency-domain representation is segmented into time frames; hence, it is a function both of a time and a frequency variable. 
<!-- EPO <DP n="25"/>-->
 Fig. 4 shows an audio processing system 400 for generating the downmix signal X and the mixing parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β- , g, k<sub>x</sub> k<sub>2</sub> controlling the gains applied by the upmix stage 110. This audio processing system 400 is typically located on an encoder side, e.g., in broadcasting or recording equipment, whereas the system 100 shown in Fig. 1 is typically to be deployed on a decoder side, e.g., in playback equipment. A downmix stage 410 produces an m-channel signal X on the basis of an n-channel signal Y. Preferably, the downmix stage 410 operates on time-domain representations of these signals. A parameter extractor 420 may produce values of the mixing parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β<sub>3</sub>, g, k<sub>x</sub> k<sub>2</sub> by analyzing the n- channel signal Y and taking into account the quantitative and qualitative properties of the downmix stage 410. The mixing parameters may be vectors of frequency-block values, as the notation in Fig. 4 suggests, and may be further segmented into time blocks. In an example implementation, the downmix stage 410 is time-invariant and/or frequency- invariant. By virtue of the time invariance and/or frequency invariance, there is typically no need for a communicative connection between the downmix stage 410 and the parameter extractor 420, but the parameter extraction may proceed independently. This provides great latitude for the implementation. It also gives a possibility to reduce the total latency of the system since several processing steps may be carried out in parallel. As one example, the Dolby Digital Plus format (or Enhanced AC-3) may be used for coding the downmix signal X. The parameter extractor 420 may have knowledge of the quantitative and/or qualitative properties of the downmix stage 410 by accessing a downmix specification, which may specify one of: a set of gain values, an index identifying a predefined downmixing mode for which gains are predefined, etc. The downmix specification may be a data record pre-loaded into memories in each of the downmix stage 410 and the parameter extractor 420. </p><p id="p0081" num="0081">Alternatively or in addition, the downmix specification may be transmitted from the downmix stage 410 to the parameter extractor 420 over a communication line connecting these units. As a further alternative, each of the downmix stage 410 to the parameter extractor 420 may access the downmix specification from a common data source, such as a memory (e.g. of the configuration unit 540 shown in Fig. 5a) in the audio processing system or in a metadata stream associated with the input signal Y. </p><p id="p0082" num="0082">Fig. 5a shows an example multi-channel encoding system 500 for encoding a multi-channel audio input signal 7561 (comprising n channels) using a downmix signal X (comprising m 
<!-- EPO <DP n="26"/>-->
 channels, with m&lt;n) and a parametric representation. The system 500 comprises a downmix coding unit 510 which comprises e.g. the downmix stage 410 of Fig. 4. The downmix coding unit 510 may be configured to provide an encoded version of the downmix signal X. The downmix coding unit 510 may e.g. make use of a Dolby Digital Plus encoder for encoding the downmix signal X. Furthermore, the system 500 comprises a parameter coding unit 510 which may comprise the parameter extractor 420 of Fig. 4. The parameter coding unit 510 may be configured to quantize and encode the set of mixing parameters</p><p id="p0083" num="0083"> , a<sub>2</sub>, a<sub>3</sub>, β<sub>2</sub>, -i, g, k-L (also referred to as spatial parameters) to yield encoded spatial parameters 562. As indicated above, the parameter k<sub>2</sub> may be determined from the parameter k . In addition, the system 500 may comprise a bitstream generation unit 530 which is configured to generate the bitstream P 564 from the encoded downmix signal 563 and from the encoded spatial parameters 562. The bitstream 564 may be encoded in accordance to a pre-determined bitstream syntax. In particular, the bitstream 564 may be encoded in a format conforming to Dolby Digital Plus (DD+ or E-AC-3, Enhanced AC-3). </p><p id="p0084" num="0084">The system 500 may comprise a configuration unit 540 which is configured to determine one or more control settings 552, 554 for the parameter coding unit 520 and/or for downmix coding unit 510. The one or more control settings 552, 554 may be determined based on one or more external settings 551 of the system 500. By way of example, the one or more external settings 551 may comprise an overall (maximum or fixed) data-rate of the bitstream 564. The configuration unit 540 may be configured to determine one or more control settings 552 in dependence on the one or more external settings 551. The one or more control settings 552 for the parameter coding unit 520 may comprise one or more of the following: </p><p id="p0085" num="0085"> • a maximum data-rate for the encoded spatial parameters 562. This control setting is referred to herein as the metadata data-rate setting). </p><p id="p0086" num="0086"> • a maximum number and/or a specific number of parameter sets to be determined by the parameter coding unit 520 per frame of the audio signal 561. This control setting is referred to herein as the temporal resolution setting, as it allows influencing the temporal resolution of the spatial parameters. </p><p id="p0087" num="0087"> • a number of parameter bands for which spatial parameters are to be determined by the parameter coding unit 520. This control setting is referred to herein as the frequency resolution setting, as it allows influencing the frequency resolution of the spatial parameters. 
<!-- EPO <DP n="27"/>-->
 • a resolution of the quantizer used for quantizing the spatial parameters. This control setting is referred to herein as the quantizer setting. </p><p id="p0088" num="0088">The parameter coding unit 520 may use one or more of the above mentioned control settings 552 for determining and/or for encoding the spatial parameters, which are to be included into the bitstream 564. Typically, the input audio signal 7561 is segmented into a sequence of frames, wherein each frame comprises a pre-determined number of samples of the input audio signal 7561. The metadata data-rate setting may indicate the maximum number of bits which are available for encoding the spatial parameters of a frame of the input audio signal 561. The actual number of bits used for encoding the spatial parameters 562 of a frame may be lower than the number of bits allocated by the metadata data-rate setting. The parameter coding unit 520 may be configured to inform the configuration unit 540 about the actually used number of bits 553, thereby enabling the configuration unit 540 to determine the number of bits which are available for encoding the downmix signal X. This number of bits may be communicated to the downmix encoding unit 510 as a control setting 554. The downmix encoding unit 510 may be configured to encode the downmix signal X based on the control setting 554 (e.g. using a multi-channel encoder such as Dolby Digital Plus). As such, bits which have not been used for encoding the spatial parameters may be used for encoding the downmix signal. </p><p id="p0089" num="0089">Fig. 5b shows a block diagram of an example parameter coding unit 520. The parameter coding unit 520 may comprise a transform unit 521 which is configured to determine a frequency representation of the input signal 561. In particular, the transform unit 521 may be configured to transform a frame of the input signal 561 into one or more spectra, each comprising a plurality of frequency bins. By way of example, the transform unit 521 may be configured to apply a filterbank, e.g. a QMF filterbank, to the input signal 561. The filterbank may be a critically sampled filterbank. The filterbank may comprise a pre-determined number Q of filters (e.g. Q = 64 filters). As such, the transform unit 521 may be configured to determined Q subband signals from the input signal 561, wherein each subband signal is associated with a corresponding frequency bin 571. By way of example, a frame of K samples of the input signal 561 may be transformed into Q subband signals with K/Q frequency coefficients per subband signal. In other words, a frame of K samples of the input signal 561 may be transformed into K Q spectra, with each spectrum comprising Q frequency 
<!-- EPO <DP n="28"/>-->
 bins. In a specific example the frame length is K=1536, the number of frequency bins is Q=64 and the number of spectra K/Q=24. </p><p id="p0090" num="0090">The parameter coding unit 520 may comprise a banding unit 522 configured to group one or more frequency bins 571 into frequency bands 572. The grouping of frequency bins 571 into frequency bands 572 may depend on the frequency resolution setting 552. Table 1 illustrates an example mapping of frequency bins 571 to frequency bands 572, wherein the mapping may be applied by the banding unit 522 based on the frequency resolution setting 552. In the illustrated example, the frequency resolution setting 552 may indicate the banding of the frequency bins 571 into 7, 9, 12 or 15 frequency bands. The banding typically models the psychoacoustic behavior of the human ear. As a result of this, the number of frequency bins 571 per frequency band 572 typically increases with increasing frequency. </p><p id="p0091" num="0091"><img id="imgf000028_0001" he="136" wi="131" file="imgf000028_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0092" num="0092"> Table 1 
<!-- EPO <DP n="29"/>-->
 A parameter determination unit 523 of the parameter coding unit 520 (and in particular, the parameter extractor 420) may be configured to determine one or more sets of mixing parameters , a<sub>2</sub>, cc<sub>3</sub>, β , β<sub>2</sub>, β<sub>3</sub>, Q, k<sub>1</sub> k<sub>2</sub> for each of the frequency bands 572. Due to this, the frequency bands 572 may also be referred to as parameter bands. The mixing parameters a<sub>lt</sub> a<sub>2</sub>, cc<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β<sub>3</sub>, g, k k<sub>2</sub> for a frequency band 572 may be referred to as the band parameters. As such, a complete set of mixing parameters typically comprises band parameters for each frequency band 572. The band parameters may be applied in the mixing matrix 130 of Fig. 3 to determine subband versions of the decoded upmix signal. The number of sets of mixing parameters per frame, which are to be determined by the parameter determination unit 523 may be indicated by the time resolution setting 552. By way of example, the time resolution setting 552 may indicate that one or two sets of mixing parameters are to be determined per frame. The determination of a set of mixing parameters comprising band parameters for a plurality of frequency bands 572 is illustrated in Fig. 5c. Fig. 5c illustrates an example set of transform coefficients 580 derived from a frame of the input signal 561. A transform coefficient 580 corresponds to a particular time instant 582 and a particular frequency bin 571. A frequency band 572 may comprise a plurality of transform coefficients 580 from one or more frequency bins 571. As can be seen from Fig. 5c, the transformation of the time domain samples of the input signal 561 provides a time- frequency representation of the frame of the input signal 561. </p><p id="p0093" num="0093">It should be noted that the set of mixing parameters for a current frame may be determined based on the transform coefficients 580 of the current frame and possibly also based on the transform coefficients 580 of a directly following frame (also referred to as the look-ahead frame). </p><p id="p0094" num="0094">The parameter determination unit 523 may be configured to determine mixing parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β<sub>3</sub>, g, k k<sub>2</sub> for each frequency band 572. If the temporal resolution setting is set to one, all the transform coefficients 580 (of the current frame and of the look-ahead frame) of a particular frequency band 572 may be considered for determining the mixing parameters for the particular frequency band 572. On the other hand, the parameter 
<!-- EPO <DP n="30"/>-->
 determination unit 523 may be configured to determine two sets of mixing parameters per frequency band 572 (e.g. when the temporal resolution setting is set to two). In this case, the first temporal half of transform coefficients 580 of the particular frequency band 572 (corresponding e.g. to the transform coefficients 580 of the current frame) may be used for determining the first set of mixing parameters and the second temporal half of transform coefficients 580 of the particular frequency band 572 (corresponding e.g. to the transform coefficients 580 of the look-ahead frame) may be considered for determining the second set of mixing parameters. In general terms, the parameter determination unit 523 may be configured to determine one or more sets of mixing parameters based on the transform coefficients 580 of the current frame and of the look-ahead frame. A window function may be used to define the influence of the transform coefficients 580 on the one or more sets of mixing parameters. The shape of the window function may depend on the number of sets of mixing parameters per frequency band 572 and/or on properties of the current frame and/or the look-ahead frame (e.g. the presence of one or more transients). Example window functions will be described in the context of Fig. 5e and Figs. 7b to 7d. </p><p id="p0095" num="0095">It should be noted that the above may apply in cases where the frame of the input signal 561 does not comprise transient signal portions. The system 500 (e.g. the parameter determination unit 523) may be configured to perform transient detection based on the input signal 561. In case one or more transients are detected, one or more transient indicators 583, 584 may be set, wherein the transient indicators 583, 584 may identify the time instants 582 of the corresponding transients. The transient indicators 583, 584 may also be referred to as sampling points of the respective sets of mixing parameters. In case of a transient, the parameter determination unit 523 may be configured to determine a set of mixing parameters based on the transform coefficients 580 starting from the time instant of the transient (this is illustrated by the differently hatched areas of Fig. 5c). On the other hand, transform coefficients 580 preceding the time instant of the transient may be ignored, thereby ensuring that the set of mixing parameters reflects the multi-channel situation subsequent to the transient. 
<!-- EPO <DP n="31"/>-->
 Fig. 5c illustrates the transform coefficients 580 of a channel of the multi-channel input signal 7561. The parameter coding unit 520 is typically configured to determine transform coefficients 580 for the plurality of channels of the multi-channel input signal 561. Fig. 5d shows example transform coefficients of a first 561-1 and a second 561-2 channel of the input signal 561. A frequency band p 572 comprises the frequency bins 571 ranging from frequency indexes i to j. A transform coefficient 580 of the first channel 561-1 at time instant (or in the spectrum) q and in frequency bin i may be referred to as a<sub>q i</sub>. In a similar manner, a transform coefficient 580 of the second channel 561-2 at time instant (or in the spectrum) q and in frequency bin i may be referred to as b<sub>q i</sub> . The transform coefficients 580 may be complex numbers. The determination of a mixing parameter for the frequency band p may involve the determination of energies and/or co variance of the first and second channels 561- 1 , 561-2 based on the transform coefficients 580. By way of example, the covariance of the transform coefficients 580 of the first and second channels 561-1 , 561-2 in the frequency band p and for the time interval [q,v] may be determined as: </p><p id="p0096" num="0096"> E<sub>li2</sub> (p) =∑<sup>v</sup><sub>t=q</sub>∑<sup>j</sup><sub>f =i</sub> Re{a<sub>tif</sub>}Re{b<sub>tif</sub>] + Im{a<sub>tif</sub>}lm{b<sub>tif</sub>}. </p><p id="p0097" num="0097"> The energy estimate of the transform coefficients 580 of the first channels 561-1 in the frequency band p and for the time interval [q,v] may be determined as: </p><p id="p0098" num="0098"> £<sup>"</sup>I,I (P) =∑<sup>v</sup><sub>t</sub>=q∑f=i Re{a<sub>t</sub> }Re{a<sub>t</sub> } + Im{a<sub>t</sub> }lm{a<sub>t</sub> }. </p><p id="p0099" num="0099">The energy estimate E<sub>2i2</sub> (p) of the transform coefficients 580 of the second channels 561-2 in the frequency band p and for the time interval [q,v] may be determined in a similar manner. </p><p id="p0100" num="0100">As such, the parameter determination unit 523 may be configured to determine one or more sets 573 of band parameters for the different frequency bands 572. The number of frequency bands 572 typically depends on the frequency resolution setting 552 and the number of sets of mixing parameters per frame typically depends on the time resolution setting 552. By way of example, the frequency resolution setting 552 may indicate the use of 15 frequency bands 572 and the time resolution setting 552 may indicate the use of 2 sets of mixing parameters. In this case, the parameter determination unit 523 may be configured to determined two temporally distinct sets of mixing parameters, wherein each set of mixing parameters comprises 15 sets 573 of band parameters (i.e. mixing parameters for the different frequency bands 572). 
<!-- EPO <DP n="32"/>-->
 As indicated above, the mixing parameters for a current frame may be determined based on the transform coefficients 580 of the current frame and based on the transform coefficients 580 of a following look-ahead frame. The parameter determination unit 523 may apply a window to the transform coefficient 580, in order to ensure a smooth transition between the mixing parameters of succeeding frames of the sequence of frames and/or in order to account for disruptive portions within the input signal 561 (e.g. transients). This is illustrated in Fig. 5e which shows the K/Q spectra 589 at corresponding K/Q succeeding time instants 582 of a current frame 585 and of a directly following frame 590 of the input audio signal 561. </p><p id="p0101" num="0101">Furthermore, Fig. 5e shows an example window 586 used by the parameter determination unit 523. The window 586 reflects the influence of the K/Q spectra 589 of the current frame 585 and of the directly following frame 590 (referred to as the look-ahead frame) on the mixing parameters. As will be outlined in further detail below, the window 586 reflects the case where the current frame 585 and the look-ahead frame 590 do not comprise any transients. In this case, the window 586 ensures a smooth phase-in and phase-out of the spectra 589 of the current frame 585 and the look-ahead frame 590, respectively, thereby allowing for a smooth evolution of the spatial parameters. Furthermore, Fig. 5e shows example windows 587 and 588. The dashed window 587 reflects the influence of the K/Q spectra 589 of the current frame 585 on the mixing parameters of the preceding frame. In addition, the dashed window 588 reflects the influence of the K/Q spectra 589 of the directly following frame 590 on the mixing parameters of the directly following frame 590 (in case of smooth interpolation). </p><p id="p0102" num="0102">The one or more sets of mixing parameters may subsequently be quantized and encoded using an encoding unit 524 of the parameter coding unit 520. The encoding unit 524 may apply various encoding schemes. By way of example, the encoding unit 524 may be configured to perform differential encoding of the mixing parameters. The differential encoding may be based on temporal differences (between a current mixing parameter and a preceding corresponding mixing parameter, for the same frequency band 572) or on frequency differences (between the current mixing parameter of a first frequency band 572 and the corresponding current mixing parameter of an adjacent second frequency band 572). </p><p id="p0103" num="0103">Furthermore, the encoding unit 524 may be configured to quantize the set of mixing parameters and/or the temporal or frequency differences of the mixing parameters. The 
<!-- EPO <DP n="33"/>-->
 quantization of the mixing parameters may depend on the quantizer setting 552. By way of example, the quantizer setting 552 may take on two values, a first value indicating a fine quantization and a second value indicating a coarse quantization. As such, the encoding unit 524 may be configured to perform a fine quantization (with a relatively low quantization error) or a coarse quantization (with a relatively increased quantization error) based on the quantization type indicated by the quantizer setting 552. The quantized parameters or parameter differences may then be encoded using an entropy-based code such as a Huffman code. As a result, the encoded spatial parameters 562 are obtained. The number of bits 553 which are used for the encoded spatial parameters 562 may be communicated to the configuration unit 540. </p><p id="p0104" num="0104">In an embodiment, the encoding unit 524 may be configured to first quantize the different mixing parameters (under consideration of the quantizer setting 552), to yield quantized mixing parameters. The quantized mixing parameters may then be entropy encoded (using e.g. Huffman codes) . The entropy encoding may encode the quantized mixing parameters of a frame (without considering preceding frames), frequency differences of the quantized mixing parameters or temporal differences of the quantized mixing parameters. The encoding of temporal differences may not be used in case of so called independent frames, which are encoded independently from preceding frames. </p><p id="p0105" num="0105">Hence, the parameter encoding unit 520 may make use of a combination of differential coding and Huffman coding for the determination of the encoded spatial parameters 562. As outlined above, the encoded spatial parameters 562 may be included as metadata (also referred to as spatial metadata) along with the encoded downmix signal 563 in the bitstream 564. Differential coding and Huffman coding may be used for the transmission of the spatial metadata in order to reduce redundancy and thus increase spare bit-rate available for encoding the downmix signal 563. Since Huffman codes are variable length codes, the size of the spatial metadata can vary largely depending on the statistics of the encoded spatial parameters 562 to be transmitted. The data-rate needed to transmit the spatial metadata deducts from the data-rate available to the core codec (e.g. Dolby Digital Plus) to encode the stereo downmix signal. In order not to compromise the audio quality of the downmix signal, the number of bytes that may be spent for the transmission of the spatial metadata per frame is typically limited. The limit may be subject to encoder tuning considerations, wherein the 
<!-- EPO <DP n="34"/>-->
 encoder tuning considerations may be taken into account by the configuration unit 540. </p><p id="p0106" num="0106">However, due to the variable length characteristic of the underlying differential / Huffman coding of the spatial parameters, it cannot typically be guaranteed without any further means that the upper data-rate limit (reflected e.g. in the metadata data-rate setting 552) will not be exceeded. </p><p id="p0107" num="0107">In the present document, a method for post-processing of the encoded spatial parameters 562 and/or of the spatial metadata comprising the encoded spatial parameters 562 is described. The method 600 for post-processing of the spatial metadata is described in the context of Fig. 6. The method 600 may be applied, when it is determined that the total size of one frame of spatial metadata exceeds the predefined limit indicated e.g. by the metadata data-rate setting 552. The method 600 is directed at reducing the amount of metadata step by step. The reduction of the size of the spatial metadata typically also reduces the precision of the spatial metadata and thus compromises the quality of the spatial image of the reproduced audio signal. However, the method 600 typically guarantees that the total amount of spatial metadata does not exceed the predefined limit and thus allows determining an improved trade-off between spatial metadata (for re-generating the m-channel multi-channel signal) and audio codec metadata (for decoding the encoded downmix signal 563) in terms of overall audio quality. Furthermore, the method 600 for post-processing of the spatial metadata can be implemented at relatively low computational complexity (compared to a complete </p><p id="p0108" num="0108">recalculation of the encoded spatial parameters with modified control settings 552). </p><p id="p0109" num="0109">The method 600 for post-processing of the spatial metadata may comprise one or more of the following steps. As outlined above, a spatial metadata frame may comprise a plurality of (e.g. one or two) parameter sets per frame, where the use of additional parameter sets allows increasing the temporal resolution of the mixing parameters. The use of a plurality of parameter sets per frame can improve audio quality, especially in case of attack-rich (i.e. transient) signals. Even in case of audio signals with a rather slowly changing spatial image, a spatial parameter update with a twice as dense grid of sampling points may improve audio quality. However, the transmission of a plurality of parameter sets per frame leads to an increase of the data-rate by approximately a factor of two. Thus, if it is determined that the data-rate for the spatial metadata exceeds the metadata data-rate setting 552 (step 601), it may be checked whether the spatial metadata frame comprises more than one set of mixing 
<!-- EPO <DP n="35"/>-->
 parameters. In particular, it may be checked if the metadata frame comprises two sets of mixing parameters, which are supposed to be transmitted (step 602). If it is determined that the spatial metadata comprises a plurality of sets of mixing parameters, one or more of the sets exceeding a single set of mixing parameters may be discarded (step 603). As a result of this, the data-rate for the spatial metadata can be significantly reduced (typically by a factor of two, in the case of two sets of mixing parameter), whilst compromising the audio quality only to a relatively low degree. </p><p id="p0110" num="0110">The decision which one of the two (or more) sets of mixing parameters to drop may depend on whether or not the encoding system 500 has detected transient positions ("attack") in the part of the input signal 561 covered by the current frame: If there are multiple transients present in the current frame, the earlier transients are typically more important than the later transients, because of the psychoacoustic post-masking effect of every single attack. Thus, if transients are present, it may be advisable to discard the later (e.g. the second of two) sets of mixing parameters. On the other hand, in case of absence of attacks, the earlier (e.g. the first of two) sets of mixing parameters may be discarded. This may be due to the windowing which is used when calculating the spatial parameters (as illustrated in Fig. 5e). The window 586 which is used to window out the part of the input signal 561, which is used for calculating the spatial parameters for the second set of mixing parameters, typically has its largest impact at the point in time at which the upmix stage 130 places the sampling point for the parameter reconstruction (i.e. at the end of a current frame). On the other hand, the first set of mixing parameters typically has got an offset of half a frame to this point in time. Consequently, the error which is made by dropping the first set of mixing parameters is most likely lower than the error which is made by dropping the second set of mixing. This is shown in Fig. 5e, where it can be seen that the second half of the spectra 589 of a current frame 585 used to determine a second set of mixing parameters is influenced to a higher degree by the samples of the current frame 585 than the first half of the spectra 589 of the current frame 585 (for which the window function 586 has lower values than for the second half of the spectra 589). </p><p id="p0111" num="0111">The spatial cues (i.e. the mixing parameters) calculated in the encoding system 500 are transmitted to the corresponding decoder 100 via a bitstream 562 (which may be part of the bitstream 564 in which the encoded stereo downmix signal 563 is conveyed). Between the 
<!-- EPO <DP n="36"/>-->
 calculation of the spatial cues and their representation in the bitstream 562, the encoding unit 524 typically applies a two-step coding approach: The first step, quantization, is a lossy step, since it adds an error to the spatial cues; the second one, the differential / Huffman coding is a lossless step. As outlined above, the encoder 500 can select between different types of quantization (e.g. two types of quantization): a high-resolution quantization scheme which adds relatively little error but results in a larger number of potential quantization indices, thus requiring larger Huffman code words; and a low-resolution quantization scheme which adds relatively more error but results in a lower number of quantization indices, thus requiring not so large Huffman code words. It should be noted that the different types of quantization may be applicable to some or all mixing parameters. By way of example, the different types of quantization may be applicable to the mixing parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β- , k . On the other hand, the gain g may be quantized with a fixed type of quantization. </p><p id="p0112" num="0112">The method 600 may comprise the step 604 of verifying which type of quantization has been used to quantize the spatial parameters. If it is determined that a relatively fine quantization resolution has been used, the encoding unit 524 may be configured to reduce 605 the quantization resolution to a lower type of quantization. As a result, the spatial parameters are quantized once more. This does not, however, add a significant computational overhead (compared to a re-determination of the spatial parameters using different control settings 552). It should be noted that a different type of quantization may be used for the different spatial parameters a<sub>lt</sub> a<sub>2</sub>, a<sub>3</sub>, β<sub>χ</sub>, β<sub>2</sub>, β<sub>3</sub>, g, k . Hence, the encoding unit 524 may be configured to select the quantizer resolution individually for each type of spatial parameter, thereby adjusting the data-rate of the spatial metadata. The method 600 may comprise the step (not shown in Fig. 6) of reducing the frequency resolution of the spatial parameters. As outlined above, a set of mixing parameters of a frame is typically clustered into frequency bands or parameter bands 572. Each parameter band represents a certain frequency range, and for each band a separate set of spatial cues is determined. Depending on the data-rate available to transmit the spatial metadata, the number of parameter bands 572 may be varied in steps (e.g. 7, 9, 12, or 15 bands). The number of parameter bands 572 approximately stands in linear relation to the data-rate, and thus a reduction of the frequency resolution may significantly reduce the data-rate of the spatial metadata, while only moderately affecting the audio quality. However, such a reduction of 
<!-- EPO <DP n="37"/>-->
 the frequency resolution typically requires a recalculation of a set of mixing parameters, using the altered frequency resolution, and thus would increase the computational complexity. As outlined above, the encoding unit 524 may make use of differential encoding of the</p><p id="p0113" num="0113">(quantized) spatial parameters. The configuration unit 551 may be configured to impose the direct encoding of the spatial parameters of a frame of the input audio signal 561, in order to ensure that transmission errors do not propagate over an unlimited number of frames, and in order to allow a decoder to synchronize to the received bitstream 562 at intermediate time instances. As such, a certain fraction of frames may not make use of differential encoding along the time line. Such frames which do not make use of differential encoding may be referred to as independent frames. The method 600 may comprise the step 606 of verifying whether the current frame is an independent frame and/or whether the independent frame is a forced independent frame. The encoding of the spatial parameters may depend on the result of step 606. </p><p id="p0114" num="0114">As outlined above, differential coding is typically designed such that differences are calculated either between temporal successors or between neighboring frequency bands of the quantized spatial cues. In both cases, the statistics of the spatial cues are such that small differences occur more often than large differences, and thus small differences are represented by shorter Huffman code words compared to large differences. In the present document, it is proposed to perform a smoothing of the quantized spatial parameters (either over time or over frequency). Smoothing the spatial parameters either over time or over frequency typically results in smaller differences and thus in a reduction of data-rate. Due to psychoacoustic considerations, temporal smoothing is usually preferred over smoothing in the frequency direction. If it is determined that the current frame is not a forced independent frame, the method 600 may proceed in performing temporal differential encoding (step 607), possibly in combination with smoothing over time. On the other hand, the method 600 may proceed in performing frequency differential encoding (step 608) and possibly smoothing along the frequency, if the current frame is determined to be an independent frame. </p><p id="p0115" num="0115">The differential encoding in steps 607 may be submitted to a smoothing process over time, in order to reduce the data-rate. The degree of smoothing may vary depending on the amount by 
<!-- EPO <DP n="38"/>-->
 which the data-rate is to be reduced. The most severe kind of temporal "smoothing" corresponds to holding the unaltered previous set of mixing parameters, which corresponds to transmitting only delta values equal to zero. The temporal smoothing of the differential encoding may be performed for one or more (e.g. for all) of the spatial parameters. </p><p id="p0116" num="0116">In a similar manner to temporal smoothing, smoothing over frequency may be performed. In its most extreme form, smoothing over frequency corresponds to transmitting the same quantized spatial parameters for the complete frequency range of the input signal 561. While guaranteeing that the limit set by the metadata data-rate setting is not exceeded, smoothing over frequency may have a relatively high impact on the quality of the spatial image that can be reproduced using the spatial metadata. It may therefore be preferable to apply smoothing over frequency only in case that temporal smoothing is not allowed (e.g. if the current frame is a forced independent frame for which time-differential coding with respect to the previous frame must not be used). </p><p id="p0117" num="0117">As outlined above, the system 500 may be operated subject to one or more external settings 551, such as the overall target data-rate of the bitstream 564 or a sampling rate of the input audio signal 561. There is typically not a single optimum operation point for all combinations of external settings. The configuration unit 540 may be configured to map a valid </p><p id="p0118" num="0118">combination of external settings 551 to a combination of the control settings 552, 554. By way of example, the configuration unit 540 may rely on the results of psychoacoustic listening tests. In particular, the configuration unit 540 may be configured to determine a combination of control settings 552, 554 which ensures (in average) optimum psychoacoustic coding results for a particular combination of external settings 551. </p><p id="p0119" num="0119">As outlined above, a decoding system 100 shall be able to synchronize to the received bitstream 564 within a given period of time. In order to ensure this, the encoding system 500 may encode so called independent frames, i.e. frames which do not depend on knowledge about their predecessors, on a regular basis. The average distance in frames between two independent frames may be given by the ratio between the given maximum time lag for synchronization and the duration of one frame. This ratio does not necessarily have to be an integer number, wherein the distance between two independent frames is always an integer number of frames. 
<!-- EPO <DP n="39"/>-->
 The encoding system 500 (e.g. the configuration unit 540) may be configured to receive a maximum time lag for synchronization or a desired update time period as an external setting 551. Furthermore, the encoding system 500 (e.g. the configuration unit 540) may comprise a timer module which is configured to keep track of the absolute amount of time that has passed since the first encoded frame of the bitstream 564. The first encoded frame of the bitstream 564 is by definition an independent frame. The encoding system 500 (e.g. the configuration unit 540) may be configured to determine whether a next-to-be encoded frame comprises a sample which corresponds to a time instant which is an integer multiple of the desired update period. Whenever the next-to-be-encoded frame comprises a sample at a point in time which is an integer multiple of the desired update period, the encoding system 500 (e.g. the configuration unit 540) may be configured to ensure that the next-to-be-encoded frame is encoded as an independent frame. By doing this, it can be ensured that the desired update time period is maintained, even though the ratio of the desired update time period and the frame length is not an integer number. </p><p id="p0120" num="0120">As outlined above, the parameter determination unit 523 is configured to calculate spatial cues based on a time/frequency representation of the multi-channel input signal 561. A frame of spatial metadata may be determined based on the K/Q (e.g. 24) spectra 589 (e.g. QMF spectra) of a current frame and/or based on the K/Q (e.g. 24) spectra 589 (e.g. QMF spectra) of a look-ahead frame, wherein each spectrum 589 may have a frequency resolution of Q (e.g. 64) frequency bins 571. Depending on whether or not the encoding system 500 detects transients in the input signal 561 , the temporal length of the signal portion which is used for calculating a single set of spatial cues may comprise a different number of spectra 589 (e.g. 1 spectrum to up to 2 times K Q spectra). As shown in Fig. 5c, each spectrum 589 is divided into a certain number of frequency bands 572 (e.g. 7, 9, 12, or 15 frequency bands) which - due to psychoacoustic considerations - comprise a different number of frequency bins 571 (e.g. 1 frequency bin to up to 41 frequency). The different frequency bands p 572 and the different temporal segments [q, v] define a grid on the time/frequency representation of the current frame and the look-ahead frame of the input signal 561. For the different "boxes" in this grid, a different set of spatial cues may be calculated based upon estimates of the energy and/or covariance of at least some of the input channels within the different "boxes", respectively. As outlined above, the energy estimates and/or covariance may be calculated by 
<!-- EPO <DP n="40"/>-->
 summing up the squares of the transform coefficients 580 of one channel and/or by summing up the products of transform coefficients 580 of different channels, respectively (as indicated by the formulas provided above). The different transform coefficients 580 may be weighted in accordance to a window function 586 used for determining the spatial parameters. </p><p id="p0121" num="0121">The calculation of the energy estimates E<sub>l</sub> (p), £2,2 (p) and/or covariance £<sup>"</sup><sub>1 2</sub> (p) may be carried out in fixed point arithmetic. In this case, the different size of the "boxes" of the time/frequency grid may have an impact on the arithmetic precision of the values determined for the spatial parameters. As outlined above, the number of frequency bins (j-i+l) 571 per frequency band 572 and/or the length of the time interval [q, v] of a "box" of the </p><p id="p0122" num="0122">time/frequency grid may vary significantly (e.g. between 1x1x2 and 48x41x2 transform coefficients 580 (e.g. real parts and complex parts of a complex QMF coefficients)). By consequence, the number of products Re{a<sub>t</sub> ]Re{b<sub>t</sub> ] and
<img id="imgf000040_0001" he="7" wi="31" file="imgf000040_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 which need to summed up for determining the energies E<sub>l</sub> (p) / covariance E<sub>1 2</sub> (p) may vary significantly. In order to prevent the result of the calculation from exceeding the range of numbers that can be represented in fixed point arithmetic, the signals may be scaled down by a maximum number of bits (e.g. by 6 bits due to 2<sup>6■</sup> 2<sup>6</sup> = 4096 &gt; 48<sup>■</sup> 41<sup>■</sup> 2). However, this approach results in a significant reduction of arithmetic precision for smaller "boxes" and/or for "boxes" comprising only relatively low signal energy. </p><p id="p0123" num="0123">In the present document, it is proposed to use an individual scaling per "box" of the time/frequency grid. The individual scaling may depend on the number of transform coefficients 580 comprised within the "box" of the time/frequency grid. Typically, a spatial parameter for a particular "box" of the time frequency grid (i.e. for a particular frequency band 572 and for a particular temporal interval [q,v]) is determined only based on the transform coefficients 580 from the particular "box" (and does not depend on transform coefficients 580 from other "boxes"). Furthermore, a spatial parameter is typically only determined based on energy estimate and/or covariance ratios (and is typically not affected by absolute energy estimates and/or covariance). In other words, a single spatial cue typically does not use but energy estimates and/or cross-channel products from one single time/ frequency "box". Furthermore, the spatial cues are typically not affected by absolute energy estimates / covariance but only by energy estimate / covariance ratios. Therefore, it is 
<!-- EPO <DP n="41"/>-->
 possible to use an individual scaling in every single "box". This scaling should be matched for the channels which are contributing to a particular spatial cue. </p><p id="p0124" num="0124">The energy estimates E<sub>1</sub> p), E<sub>2 2</sub> (p) of a first and second channel 561-1 , 561-2 and the covariance E<sub>1 2</sub> (p) between the first and second channels 561-1 , 561-2, for the frequency band p 572 and for the time interval [q,v] may be determined e.g. as indicated by the formulas above. The energy estimates and the covariance may be scaled by a scaling factor s<sub>p</sub>, to provide the scaled energies and covariance: s<sub>p</sub> <sup>■</sup>
<img id="imgf000041_0001" he="6" wi="15" file="imgf000041_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 s<sub>p</sub> <sup>■</sup> E<sub>2 2</sub> p) and s<sub>p</sub> <sup>■</sup> E<sub>1 2</sub> p). The spatial parameter P(p) which is derived based on the energy estimates E<sub>1</sub> p), E<sub>2 2</sub> p) and the covariance E<sub>1 2</sub> (p) typically depends on the ratio of the energies and/or of the covariance, such that the value of the spatial parameter P(p) is independent of the scaling factor s<sub>p</sub> . By consequence, different scaling factors s<sub>p</sub>, s<sub>p+1</sub>, s<sub>p+2</sub> may be used for different frequency bands p, p+1 , p + 2. It should be noted that one or more of the spatial parameters may depend on more than two different input channels (e.g. three different channels). In this case, the one or more spatial parameters may be derived based on energy estimates E<sub>1</sub> p), E<sub>2 2</sub> (p), . .. of the different channels, as well as based on respective covariances between different pairs of the channels, i.e. E<sub>1 2</sub> (p), E<sub>1 3</sub> (p), E<sub>2 3</sub> (p), etc. Also in this case, the value of the one or more spatial parameters is independent of a scaling factor applied to the energy estimates and/or covariances. </p><p id="p0125" num="0125">In particular, the scaling factor s<sub>p</sub> = 2<sup>~z</sup>P for a particular frequency band p, wherein z<sub>p</sub>is a positive integer indicating a shift in the fixed point arithmetic, may be determined such that </p><p id="p0126" num="0126"> 0.5 &lt; s<sub>p</sub> <sup>■</sup>
<img id="imgf000041_0002" he="6" wi="52" file="imgf000041_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 (p) |} &lt; 1.0 and such that the shift z<sub>p</sub> is minimal. By ensuring this individually for each frequency band p and/or for each temporal interval [q,v] for which mixing parameters are determined, an increased (e.g. maximum) precision in fixed point arithmetic may be achieved, while ensuring a valid value range. By way of example, an individual scaling can be implemented by checking for every single MAC (multiply-accumulate) operation whether the result of the MAC operation could exceed 
<!-- EPO <DP n="42"/>-->
 +/-1. Only if this is the case, the individual scaling for the "box" may be increased by one bit. Once this has been done for all channels, the largest scaling for each "box" may be determined, and all the deviating scaling of the "box" may be adapted accordingly. As outlined above, the spatial metadata may comprise one or more (e.g. two) sets of spatial parameters per frame. As such, the encoding system 500 may transmit one or more sets of spatial parameters per frame to a corresponding decoding system 100. Each one of the sets of spatial parameters corresponds to one particular spectrum out of the K/Q temporally subsequent spectra 289 of a frame of spatial metadata. This particular spectrum corresponds to a particular time instant, and the particular time instant may be referred to as a sampling point. Fig. 5c shows two example sampling points 583, 584 of two sets of spatial parameters, respectively. The sampling points 583, 584 may be associated with particular events comprised within the input audio signal 561. Alternatively, the sampling points may be predetermined. </p><p id="p0127" num="0127">The sampling points 583, 584 are indicative of the time instant at which the corresponding spatial parameters should be fully applied by the decoding system 100. In other words, the decoding system 100 may be configured to update the spatial parameters according to the transmitted sets of spatial parameters at the sampling points 583, 584. Furthermore, the decoding system 100 may be configured to interpolate the spatial parameters in between two subsequent sampling points. The spatial metadata may be indicative of a type of transition which is to be performed between succeeding sets of spatial parameters. Examples for types of transitions are a "smooth" and a "steep" transition between the spatial parameters, meaning that the spatial parameters may be interpolated in a smooth (e.g. linear) manner or may be updated abruptly, respectively. </p><p id="p0128" num="0128">In case of "smooth" transitions, the sampling points may be fixed (i.e. pre-determined) and thus do not need to be signaled in the bitstream 564. If the frame of spatial metadata conveys a single set of spatial parameters, the pre-determined sampling point may be the position at the very end of the frame, i.e. the sampling point may correspond to the (K/Q)<sup>th</sup> spectrum 589. If the frame of spatial metadata conveys two sets of spatial parameters, the first sampling point may correspond to the (K/2Q)<sup>th</sup> spectrum 589, the second sampling point may correspond to the (K/Q)<sup>th</sup> spectrum 589. 
<!-- EPO <DP n="43"/>-->
 In case of "steep" transitions, the sampling points 583, 584 may be variable and may be signaled in the bitstream 562. The portion of the bitstream 562 which carries the information about the number of sets of spatial parameters used in one frame, the information about the selection between "smooth" and "steep" transitions, and the information about the positions of the sampling points in case of "steep" transitions may be referred to as the "framing" portion of the bitstream 562. Fig. 7a shows example transition schemes which may be applied by a decoding system 100 depending on the framing information comprised within the received bitstream 562. </p><p id="p0129" num="0129">By way of example, the framing information for a particular frame may indicate a "smooth" transition and a single set 711 of spatial parameters. In this case, the decoding system 100 (e.g. the first mixing matrix 130) may assume the sampling point for the set 711 of spatial parameters to correspond to the last spectrum of the particular frame. Furthermore, the decoding system 100 may be configured to interpolate (e.g. linearly) 701 between the last received set 710 of spatial parameters for the directly preceding frame and the set 711 of spatial parameters for the particular frame. In another example, the framing information for the particular frame may indicate a "smooth" transition and two sets 711, 712 of spatial parameters. In this case, the decoding system 100 (e.g. the first mixing matrix 130) may assume the sampling point for the first set 711 of spatial parameters to correspond to the last spectrum of the first half of the particular frame, and the sampling point for the second set 712 of spatial parameters to correspond to the last spectrum of the second half of the particular frame. Furthermore, the decoding system 100 may be configured to interpolate (e.g. linearly) 702 between the last received set 710 of spatial parameters for the directly preceding frame and the first set 711 of spatial parameters and between the first set 711 of spatial parameters and the second set 712 of spatial parameters. </p><p id="p0130" num="0130">In a further example, the framing information for a particular frame may indicate a "steep" transition, a single set 711 of spatial parameters and a sampling point 583 for the single set 711 of spatial parameters. In this case, the decoding system 100 (e.g. the first mixing matrix 130) may be configured to apply the last received set 710 of spatial parameters for the directly preceding frame until the sampling point 583 and to apply the set 711 of spatial parameters starting from the sampling point 583 (as shown by the curve 703). In another 
<!-- EPO <DP n="44"/>-->
 example, the framing information for a particular frame may indicate a "steep" transition, two sets 711, 712 of spatial parameters and two corresponding sampling points 583, 584 for the two sets 711, 712 of spatial parameters, respectively. In this case, the decoding system 100 (e.g. the first mixing matrix 130) may be configured to apply the last received set 710 of spatial parameters for the directly preceding frame until the first sampling point 583, and to apply the first set 711 of spatial parameters starting from the first sampling point 583 up to the second sampling point 584, and to apply the second set 712 of spatial parameters starting from the second sampling point 584 at least until to the end of the particular frame (as shown by the curve 704). </p><p id="p0131" num="0131">The encoding system 500 should ensure that the framing information matches the signal characteristics, and that the appropriate portions of the input signal 561 are chosen to calculate the one or more sets 711, 712 of spatial parameters. For this purpose, the encoding system 500 may comprise a detector which is configured to detect signal positions at which the signal energy in one or more channels increases abruptly. If at least one such signal position is found, the encoding system 500 may be configured to switch from "smooth" transitioning to "steep" transitioning, otherwise the encoding system 500 may continue with "smooth" transitioning. As outlined above, the encoding system 500 (e.g. the parameter determination unit 523) may be configured to calculate the spatial parameters for a current frame based on a plurality of frames 585, 590 of the input audio signal 561 (e.g. based on the current frame 585 and based on the directly subsequent frame 590, i.e. the so called look-ahead frame). As such, the parameter determination unit 523 may be configured to determine the spatial parameters based on two times K/Q spectra 589 (as illustrated in Fig. 5e). The spectra 589 may be windowed by a window 586 as shown in Fig. 5e. In the present document, it is proposed to adapt the window 586 based on the number of sets 711, 712 of spatial parameters which are to be determined, based on the type of transitioning and/or based on the position of the sampling points 583, 584. By doing this, it can be ensured that the framing information matches the signal characteristics, and that the appropriate portions of the input signal 561 are selected to calculate the one or more sets 711, 712 of spatial parameters. 
<!-- EPO <DP n="45"/>-->
 In the following, example window functions for different encoder / signal situations are described: </p><p id="p0132" num="0132">a) Situation: a single set 711 of spatial parameters, smooth transitioning, no transient in the look-ahead frame 590; </p><p id="p0133" num="0133"> window function 586: Between the last spectrum of the preceding frame and the (K/Q)<sup>th</sup> spectrum 589, the window function 586 may rise linearly from 0 to 1. Between the (K/Q)<sup>th</sup> and the 48<sup>th</sup> spectrum 589, the window function 586 may fall linearly from 1 to 0 (see Fig. 5e). </p><p id="p0134" num="0134">b) Situation: a single set 711 of spatial parameters, smooth transitioning, a transient in the N<sup>th</sup> spectrum (N&gt;K/Q), i.e. a transient in the look-ahead frame 590; </p><p id="p0135" num="0135"> window function 721 as shown in Fig. 7b: Between the last spectrum of the preceding frame and the (K/Q)<sup>th</sup> spectrum, the window function 721 rises linearly from 0 to 1. </p><p id="p0136" num="0136"> Between the (K/Q)<sup>th</sup> and the (N-l)<sup>st</sup> spectrum, the window function 721 remains constant at 1. Between the N<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window function remains constant at 0. The transient at the N<sup>th</sup> spectrum is represented by the transient point 724 (which corresponds to the sampling point for a set of spatial parameters of the directly following frame 590). Furthermore, the complementary window function 722 (which is applied to the spectra of the current frame 585, when determining the one or more sets of spatial parameters for the preceding frame) and the window function 723 (which is applied to the spectra of the following frame 590, when determining the one or more sets of spatial parameters for the following frame) are shown in Fig. 7b. Overall, the window function 721 ensures that in case of one or more transients in the look-ahead frame 590, the spectra of the look-ahead frame preceding the first transient point 724 are fully taken into account for determining the set 711 of spatial parameters for the current frame 585. On the other hand, the spectra of the look-ahead frame 590 which follow the transient point 724 are ignored. </p><p id="p0137" num="0137">c) Situation: a single set 711 of spatial parameters, steep transitioning, a transient in the N<sup>th</sup> spectrum (N&lt;=K/Q), and no transient in the subsequent frame 590; </p><p id="p0138" num="0138"> Window function 731 as shown in Fig. 7c: Between the 1<sup>st</sup> and the (N-l)<sup>st</sup> spectrum, the window function 731 remains constant at 0. Between the N<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window function 731 remains constant at 1. Between the (K/Q)<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window function 731 falls linearly from 1 to 0. Fig. 7c indicates the transient point 734 at the N<sup>th</sup> spectrum (which corresponds to the sampling point for the 
<!-- EPO <DP n="46"/>-->
 single set 711 of spatial parameters). Furthermore, Fig. 7c shows the window function 732 which is applied to the spectra of the current frame 585, when determining the one or more sets of spatial parameters for the preceding frame, and the window function 733 which is applied to the spectra of the following frame 590, when determining the one or more sets of spatial parameters for the following frame. </p><p id="p0139" num="0139">d) Situation: a single set of spatial parameters, steep transitioning, transients in the N<sup>th</sup> and M<sup>th</sup> spectra (N&lt;=K/Q, M&gt;K/Q); </p><p id="p0140" num="0140"> Window function 741 in Fig. 7d: Between the 1<sup>st</sup> and the (N-l)<sup>st</sup> spectrum, the window function 741 remains constant at 0. Between the N<sup>th</sup> and the (M-l)<sup>st</sup> spectrum, the window function 741 remains constant at 1. Between the M<sup>th</sup> and the 48<sup>th</sup> spectrum, the window function remains constant 0. Fig. 7d indicates the transient point 744 at the N<sup>th</sup> spectrum (i.e. the sampling point of the set of spatial parameters) and the transient point 745 at the M<sup>th</sup> spectrum. Furthermore, Fig. 7d shows the window function 742 which is applied to the spectra of the current frame 585, when determining the one or more sets of spatial parameters for the preceding frame, and the window function 743 which is applied to the spectra of the following frame 590, when determining the one or more sets of spatial parameters for the following frame. </p><p id="p0141" num="0141">e) Situation: two sets of spatial parameters, smooth transitioning, no transient in subsequent frame; </p><p id="p0142" num="0142"> Window functions: </p><p id="p0143" num="0143"> i.) 1<sup>st</sup> set of spatial parameters: Between the last spectrum of the preceding frame and the (K/2Q)<sup>th</sup> spectrum, the window rises linearly from 0 to 1. Between the (K/2Q)<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window falls linearly from 1 to 0. Between the (K/Q)<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. </p><p id="p0144" num="0144"> ii.) 2<sup>nd</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (K/2Q)<sup>th</sup> spectrum, the </p><p id="p0145" num="0145"> window remains constant at 0. Between the (K/2Q)<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window rises linearly from 0 to 1. Between the (K/Q)<sup>th</sup> and the (3*K/2Q)<sup>th</sup> spectrum, the window falls linearly from 1 to 0. Between the (3*K/2Q)<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. </p><p id="p0146" num="0146">f) Situation: two sets of spatial parameters, smooth transitioning, transient in the N<sup>th</sup> </p><p id="p0147" num="0147"> spectrum (N&gt;K/Q); </p><p id="p0148" num="0148"> Window functions: 
<!-- EPO <DP n="47"/>-->
 i. ) I<sup>s</sup> set of spatial parameters: Between the last spectrum of the preceding frame and the (K/2Q)<sup>th</sup> spectrum, the window rises linearly from 0 to 1. Between the (K/2Q)<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window falls linearly from 1 to 0. Between the (K/Q)<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. </p><p id="p0149" num="0149"> ii. ) 2<sup>nd</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (K/2Q)<sup>th</sup> spectrum, the </p><p id="p0150" num="0150"> window remains constant at 0. Between the (K/2Q)<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window rises linearly from 0 to 1. Between the (K/Q)<sup>th</sup> and the (N-l)<sup>st</sup> spectrum, the window remains constant at 1. Between the N<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. </p><p id="p0151" num="0151">g) Situation: two sets of parameters, steep transitioning, transients in the N<sup>th</sup> and M<sup>th</sup> spectra (N&lt;M&lt;=K/Q), no transients in subsequent frame; </p><p id="p0152" num="0152"> Window functions: </p><p id="p0153" num="0153"> i. ) 1<sup>st</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (N-l)<sup>st</sup> spectrum, the window remains constant at 0. Between the N<sup>th</sup> and the (M-l)<sup>st</sup> spectrum, the window remains constant at 1. Between the M<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. </p><p id="p0154" num="0154"> ii. ) 2<sup>nd</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (M-l)<sup>st</sup> spectrum, the </p><p id="p0155" num="0155"> window remains constant at 0. Between the M<sup>th</sup> and the (K/Q)<sup>th</sup> spectrum, the window remains constant at 1. Between the (K/Q)<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window falls linearly from 1 to 0. </p><p id="p0156" num="0156">h) Situation: two sets of spatial parameters, steep transitioning, transients in N<sup>th</sup>, M<sup>th</sup> and 0<sup>th</sup> spectra (N&lt;M&lt;=K/Q, OK/Q); </p><p id="p0157" num="0157"> Window functions: </p><p id="p0158" num="0158"> i. ) 1<sup>st</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (N-l)<sup>st</sup> spectrum, the window remains constant at 0. Between the N<sup>th</sup> and the (M-l)<sup>st</sup> spectrum, the window remains constant at 1. Between the M<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant 0. </p><p id="p0159" num="0159"> ii. ) 2<sup>nd</sup> set of spatial parameters: Between the 1<sup>st</sup> and the (M-l)<sup>st</sup> spectrum, the </p><p id="p0160" num="0160"> window remains constant 0. Between the M<sup>th</sup> and the (O-l )<sup>st</sup> spectrum, the window remains constant at 1. Between the 0<sup>th</sup> and the (2*K/Q)<sup>th</sup> spectrum, the window remains constant at 0. 
<!-- EPO <DP n="48"/>-->
 Overall, the following example rules for the window function for determining a current set of spatial parameters may be stipulated: </p><p id="p0161" num="0161"> • if the current set of spatial parameters is not associated with a transient, </p><p id="p0162" num="0162"> - the window function provides for a smooth phase-in of the spectra from the </p><p id="p0163" num="0163"> sampling point of the preceding set of spatial parameters up to the sampling point of the current set of spatial parameters; </p><p id="p0164" num="0164"> - the window function provides for a smooth phase-out of the spectra from the </p><p id="p0165" num="0165"> sampling point of the current set of spatial parameters up to the sampling point of the following set of spatial parameters, if the following set of spatial parameters in not associated with a transient; </p><p id="p0166" num="0166"> - the window function considers fully the spectra from the sampling point of the current set of spatial parameters up to the spectrum preceding the sampling point of the following set of spatial parameters and cancels out the spectra starting from the sampling point of the following set of spatial parameters, if the following set of spatial parameters is associated with a transient; </p><p id="p0167" num="0167"> • if the current set of spatial parameters is associated with a transient, </p><p id="p0168" num="0168"> - the window function cancels out the spectra preceding the sampling point of the current set of spatial parameters; </p><p id="p0169" num="0169"> - the window function considers fully the spectra from the sampling point of the current set of spatial parameters up to the spectrum preceding the sampling point of the following set of spatial parameters and cancels out the spectra starting from the sampling point of the following set of spatial parameters, if the sampling point of the following set of spatial parameters is associated with a transient;</p><p id="p0170" num="0170">- the window function considers fully the spectra from the sampling point of the current set of spatial parameters up to the spectrum at the end of the current frame and provides for a smooth phase-out of the spectra from the beginning of the look- ahead frame up to the sampling point of the following set of spatial parameters, if the following set of spatial parameters in not associated with a transient. In the following, a method for reducing the delay in a parametric multi-channel codec system comprising an encoding system 500 and a decoding system 100 is described. As outlined above, the encoding system 500 comprises several processing paths, such as downmix signal generation and encoding, and parameter determination and encoding. The decoding system 
<!-- EPO <DP n="49"/>-->
 100 typically performs a decoding of the encoded downmix signal and the generation of a decorrelated downmix signal. Furthermore, the decoding system 100 performs a decoding of the encoded spatial metadata. Subsequently, the decoded spatial metadata is applied to the decoded downmix signal and to the decorrelated downmix signal, to generate the upmix signal in the first upmix matrix 130. </p><p id="p0171" num="0171">It is desirable to provide an encoding system 500 which is configured to provide a bitstream 564 which enables the decoding system 100 to generate the upmix signal Y, with reduced delay and/or with reduced buffer memory. As outlined above, the encoding system 500 comprises several different paths that may be aligned so that the encoded data provided to the decoding system 100 within the bitstream 564 matches up correctly at decoding time. As outlined above, the encoding system 500 performs downmixing and encoding of the PCM signal 561. Furthermore, the encoding system 500 determines the spatial metadata from the PCM signal 561. In addition, the encoding system 500 may be configured to determine one or more clip gains (typically one clip gain per frame). The clip gains are indicative of clipping prevention gains that have been applied to the downmix signal X in order to ensure that the downmix signal X does not clip. The one or more clip gains may be transmitted within the bitstream 564 (typically within the spatial metadata frame), in order to enable the decoding system 100 to re-generate the upmix signal Y. In addition, the encoding system 500 may be configured to determine one or more Dynamic Range Control (DRC) values (e.g. one or more DRC values per frame). The one or more DRC values may be used by a decoding system 100 to perform Dynamic Range Control of the upmixed signal Y. In particular, the one or more DRC values may ensure that the DRC performance of the parametric multi-channel codec system described in the present document is similar to (or equal to) the DRC performance of legacy multi-channel codec systems such as Dolby Digital Plus. The one or more DRC values may be transmitted within the downmix audio frame (e.g. within an appropriate field of the Dolby Digital Plus bitstream). </p><p id="p0172" num="0172">As such, the encoding system 500 may comprise at least four signal processing paths. In order to align these four paths, the encoding system 500 may also take into account the delays that are introduced into the system by different processing components which are not directly related to the encoding system 500, such as the core encoder delay, the core decoder delay, 
<!-- EPO <DP n="50"/>-->
 the spatial metadata decoder delay, the LFE filter delay (for filtering an LFE channel) and/or the QMF analysis delay. </p><p id="p0173" num="0173">In order to align the different paths, the delay of the DRC processing path may be considered. The DRC processing delay can typically only be aligned to frames and not on a time sample by sample basis. As such, the DRC processing delay is typically only dependent on the core encoder delay which may be rounded up to the next frame alignment, i.e. DRC processing delay = round up (core encoder delay / frame size). Based on this, the downmix processing delay for generating the downmix signal may be determined, as the downmix processing delay can be delayed on a time sample basis, i.e. downmix processing delay = DRC delay * frame size - core encoder delay. The remaining delays can be calculated by summing up individual delay lines and by ensuring that the delay matches up at the decoder stage, as shown in Fig. 8. By considering the different processing delays when writing the bitstream 564, the processing power (number of input channels- 1 * 1536 less copy operations) as well as the memory at the decoding system 100 can be reduced, when delaying the resulting spatial metadata (number of input channels * 1536 * 4 Byte - 245 Bytes less memory) by one frame instead of delaying the encoded PCM data by 1536 samples. As a result of the delay, all signal paths are aligned exactly by the time sample and are not only matching up roughly. </p><p id="p0174" num="0174">As outlined above, Fig. 8 illustrates the different delays incurred by an example encoding system 500. The numbers in the brackets of Fig. 8 indicate example delays in number of samples of the input signal 561. The encoding system 500 typically comprises a delay 801 caused by filtering the LFE channel of the multi-channel input signal 561. Furthermore, a delay 802 (referred to as "clipgainpcmdelayline") may be caused by determining the clip-gain (i.e. the DRC2 parameter described below), which is to be applied to the input signal 561, in order to prevent the downmix signal from clipping. In particular, this delay 802 may be introduced to synchronize the clip-gain application in the encoding system 500 to the application of the clip-gain in the decoding system 100. For this purpose, the input to the downmix calculation (performed by the downmix processing unit 510) may be delayed by an amount which is equal to the delay 811 of the decoder 140 of the downmix signal (referred to 
<!-- EPO <DP n="51"/>-->
 as the "coredecdelay"). This means that in the illustrated example clipgainpcmdelayline = coredecdelay = 288 samples. </p><p id="p0175" num="0175">The downmix processing unit 510 (comprising e.g. the Dolby Digital Plus encoder) delays the processing path of the audio data, i.e. of the downmix signal, but the downmix processing unit 510 does not delay the processing path of the spatial metadata and the processing path for the DRC / clip-gain data. Consequently, the downmix processing unit 510 should delay calculated DRC gains, clip-gains and spatial metadata. For the DRC gains this delay typically needs to be a multiple of one frame. The delay 807 of the DRC delay line (referred to as "drcdelayline") may be calculated as drcdelayline = ceil ((corencdelay + </p><p id="p0176" num="0176">clipgainpcmdelayline) / frame_size) = 2 frames; wherein "coreencdelay" refers to the delay 810 of the encoder of the downmix signal. </p><p id="p0177" num="0177">The delay of the DRC gains can typically only be a multiple of the frame size. Due to this, an additional delay may need to be added in the downmix processing path, in order to compensate for this and round up to the next multiple of the frame size. The additional downmix delay 806 (referred to as "dmxdelayline") may be determined by dmxdelayline + coreencdelay + clipgainpcmdelayline = drcdelayline * frame size; and dmxdelayline = drcdelayline * frame size - coreencdelay - clipgainpcmdelayline, such that dmxdelayline = 100. </p><p id="p0178" num="0178">The spatial parameters should be in sync with the downmix signal when the spatial parameters are applied in the frequency domain (e.g. in the QMF domain) on the decoder- side. To compensate for the fact that the encoder of the downmix signal does not delay the spatial metadata frame, but delays the downmix processing path, the input to the parameter extractor 420 should be delayed, such that the following condition applies: dmxdelayline + coreencdelay + coredecdelay + aspdecanadelay = aspdelayline+ qmfanadelay + </p><p id="p0179" num="0179">framingdelay. In the above formula, "qmfanadelay" specifies the delay 804 caused by the transform unit 521 and "framingdelay" specifies the delay 805 caused by the windowing of the transform coefficients 580 and the determination of the spatial parameters. As outlined above, the framing calculation makes use of two frames as input, the current frame and a look-ahead frame. Due to the look-ahead, the framing introduces a delay 805 of exactly one frame length. Furthermore, the delay 804 is known, such that the additional delay which is to 
<!-- EPO <DP n="52"/>-->
 be applied to the processing path for determining the spatial metadata is aspdelayline = dmxdelayline + coreencdelay + coredecdelay + aspdecanadelay - qmfanadelay - framingdelay = 1856. Since this delay is bigger than one frame, the memory size of the delayline can be reduced by delaying the calculated bitstream instead of delaying the input PCM data, thereby providing an aspbsdelayline = floor (aspdelayline / frame size) = 1 frame (delay 809) and an asppcmdelayline = aspdelayline - aspbsdelayline * frame size = 320 (delay 803). </p><p id="p0180" num="0180">After the calculation of the one or more clip-gains, the one or more clip-gains are provided to the bitstream generation unit 530. Hence, the one or more clip-gains experience the delay which is applied on the final bitstream by the aspbsdelayline 809. As such, the additional delay 808 for the clip-gain should be: clipgainbsdelayline + aspbsdelayline = dmxdelayline + coreencdelay + coredecdelay, which provides: clipgainbsdelayline = dmxdelayline + coreencdelay + coredecdelay - aspbsdelayline= 1 frame. In other words, it should be ensured that the one or more clip-gains are provided to the decoding system 500 directly subsequent to the decoding of the corresponding frame of the downmix signal, such that the one or more clip-gains can be applied to the downmix signal prior to performing the upmix in the upmix stage 130. Fig. 8 shows further delays incurred at the decoding system 100, such as the delay 812 caused by the time-domain to frequency-domain transforms 301, 302 of the decoding system 100 (referred to as "aspdecanadelay"), the delay 813 caused by the frequency-domain to time- domain transforms 311 to 316 (referred to as "aspdecsyndelay") and further delays 814. As can be seen from Fig. 8, the different processing paths of the codec system comprise processing related delays or alignment delays, which ensure that the different output data from the different processing paths is available at the decoding system 100, when needed. The alignment delays (e.g. the delays 803, 809, 807, 808, 806) are provided within the encoding system 500, thereby reducing the processing power and memory required at the decoding system 100. The total delays for the different processing paths (excluding the LFE filter delay 801 which is applicable to all processing paths) are as follows: </p><p id="p0181" num="0181"> • downmix processing path: sum of the delays 802, 806, 810 = 3072, i.e. two frames;</p><p id="p0182" num="0182">• DRC processing path: delay 807 = 3072, i.e. two frames; 
<!-- EPO <DP n="53"/>-->
 • clip-gain processing path: sum of delays 808, 809, 802 = 3360, which corresponds to the delay of the downmix processing path in addition to the delay 811 of the decoder of the downmix signal; </p><p id="p0183" num="0183"> • spatial metadata processing path: sum of the delays 802, 803, 804, 805, 809 = 4000, which corresponds to the delay of the downmix processing path in addition to the delay 811 of the decoder of the downmix signal and in addition to the delay 812 caused by the time-domain to frequency-domain transform stages 301, 302; </p><p id="p0184" num="0184">Hence, it is ensured that the DRC data is available at the decoding system 100 at time instant 821, that the clip-gain data is available at time instant 822 and that the spatial metadata is available at time instant 823. </p><p id="p0185" num="0185">Furthermore, it can be seen from Fig. 8 that the bitstream generation unit 530 may combine encoded audio data and spatial metadata which may relate to different excerpts of the input audio signal 561. In particular, it can be seen that the downmix processing path, the DRC processing path and the clip-gain processing path have a delay of exactly two frames (3072 samples) up to the output of the encoding system 500 (indicated by the interfaces 831, 832, 833) (when ignoring the delay 801). The encoded downmix signal is provided by interface 831, the DRC gain data is provided by interface 832 and the spatial metadata and the clip- gain data is provided by interface 833. Typically, the encoded downmix signal and the DRC gain data are provided in a conventional Dolby Digital Plus frame, and the clip-gain data and the spatial metadata may be provided in the spatial metadata frame (e.g. in the auxiliary field of the Dolby Digital Plus frame). It can be seen that the spatial metadata processing path at interface 833 has a delay of 4000 samples (when ignoring the delay 801), which is different from the delay of the other processing paths (3072 samples). This means that a spatial metadata frame may relate to a different excerpt of the input signal 561 than a frame of the downmix signal. In particular, it can be seen that in order to ensure an alignment at the decoding system 100, the bitstream generation unit 530 should be configured to generate a bitstream 564 which comprises a sequence of bitstream frames, wherein a bitstream frame is indicative of a frame of the downmix signal corresponding to a first frame of the multi-channel input signal 561 and a spatial metadata frame corresponding to a second frame of the multi-channel input signal 
<!-- EPO <DP n="54"/>-->
 561. The first frame and the second frame of the multi-channel input signal 561 may comprise the same number of samples. Nevertheless, the first frame and the second frame of the multi-channel input signal 561 may be different from one another. In particular, the first and second frames may correspond to different excerpts of the multi-channel input signal 561. Even more particularly, the first frame may comprise samples which precede the samples of the second frame. By way of example, the first frame may comprise samples of the multi-channel input signal 561 which precede the samples of the second frame of the multi-channel input signal 561 by a pre-determined number of samples, e.g. 928 samples. As outlined above, the encoding system 500 may be configured to determine dynamic range control (DRC) and/or clip-gain data. In particular, the encoding system 500 may be configured to ensure that the downmix signal X does not clip. Furthermore, the encoding system 500 may be configured to provide a dynamic range control (DRC) parameter which ensures that the DRC behavior of the multi-channel signal Y, which is encoded using the above mentioned parametric encoding scheme is similar or equal to the DRC behavior of the multi-channel signal Y, which is encoded using a reference multi-channel encoding system (such as Dolby Digital Plus). </p><p id="p0186" num="0186">Fig. 9a shows a block-diagram of an example dual-mode encoding system 900. It should be noted that the portions 930, 931 of the dual-mode encoding system 900 are typically provided separately. The n-channel input signal Y 561 is provided to each of an upper portion 930, which is active at least in a multi-channel coding mode of the encoding system 900, and a lower portion 931 , which is active at least in a parametric coding mode of the system 900. The lower portion 931 of the encoding system 900 may correspond to or may comprise e.g. the encoding system 500. The upper portion 930 may correspond to a reference multi-channel encoder (such as a Dolby Digital Plus encoder). The upper portion 930 generally comprises a discrete-mode DRC analyzer 910 arranged in parallel with an encoder 91 1 , both of which receive the audio signal Y 561 as input. Based on this input signal 561 , the encoder 91 1 outputs an encoded n-channel signal Y, whereas the DRC analyzer 910 outputs one or more post-processing DRC parameters DRC 1 quantifying a decoder-side DRC to be applied. The DRC parameters DRC1 may be "compr" gain (compressor gain) and/or dynrng" gain </p><p id="p0187" num="0187">(dynamic range gain) parameters. The parallel outputs from both units 910, 91 1 are gathered 
<!-- EPO <DP n="55"/>-->
 by a discrete-mode multiplexer 912, which outputs a bitstream P. The bitstream P may have a pre-determined syntax, e.g. a Dolby Digital Plus syntax. </p><p id="p0188" num="0188">The lower portion 931 of the encoding system 900 comprises a parametric analysis stage 922 arranged in parallel with a parametric-mode DRC analyzer 921 receiving, as the parametric analysis stage 922, the n-channel input signal Y. The parametric analysis stage 922 may comprise the parameter extractor 420. Based on the n-channel audio signal Y, the parametric analysis stage 922 outputs one or more mixing parameters (as outlined above), collectively denoted by a in Figs. 9a and 9b, and an m-channel (1 &lt;m &lt; n) downmix signal X, which is next processed by a core signal encoder 923 (e.g. a Dolby Digital Plus encoder), which outputs, based thereon, an encoded downmix signal X. The parametric analysis stage 922 affects a dynamic range limiting in time blocks or frames of the input signal where this may be required. A possible condition controlling when to apply dynamic range limiting may be a 'non-clip condition' or an 'in-range condition', implying, in time block or frame segments where the downmix signal has high amplitude, that the signal is processed so that it fits within the defined range. The condition may be enforced on the basis of one time block or one time frame comprising several time blocks. By way of example, a frame of the input signal 561 may comprise a pre-determined number (e.g. 6) blocks. Preferably, the condition is enforced by applying a broad-spectrum gain reduction rather than truncating only peak values or using similar approaches. </p><p id="p0189" num="0189">Fig. 9b shows a possible implementation of the parametric analysis stage 922, which comprises a pre-processor 927 and a parametric analysis processor 928. The pre-processor 927 is responsible for performing the dynamic range limiting on the n-channel input signal 561 , whereby it outputs a dynamic range limited n-channel signal, which is supplied to the parametric analysis processor 928. The pre-processor 527 further outputs a block- or frame- wise value of the pre-processing DRC parameters DRC2. Together with mixing parameters a and the m-channel downmix signal X from the parametric analysis processor 928, the parameters DRC2 are included in the output from the parametric analysis stage 922. </p><p id="p0190" num="0190">The parameter DRC2 may also be referred to as the clip-gain. The parameter DRC2 may be indicative of the gain which has been applied to the multi-channel input signal 561 , in order to ensure that the downmix signal X does not clip. The one or more channels of the downmix 
<!-- EPO <DP n="56"/>-->
 signal X may be determined from the channels of the input signal Y by determining linear combinations of some or all of the channels of the input signal Y. By way of example, the input signal Y may be a 5.1 multi-channel signal and the downmix signal may be a stereo signal. The samples of the left and right channels of the downmix signal may be generated based on different linear combinations of the samples of the 5.1 multi-channel input signal. </p><p id="p0191" num="0191">The DRC2 parameters may be determined such that the maximum amplitude of the channels of the downmix signal does not exceed a pre-determined threshold value. This may be ensured on a block-by-block basis or on a frame-by- frame basis. A single gain (the clip-gain) per block or frame may be applied to the channels of the multi-channel input signal Y in order to ensure that the above mentioned condition is met. The DRC2 parameter may be indicative of this gain (e.g. of the inverse of the gain). </p><p id="p0192" num="0192">With reference to Fig. 9a, it is noted that the discrete-mode DRC analyzer 910 functions similarly to the parametric-mode DRC analyzer 921 in that it outputs one or more postprocessing DRC parameters DRC 1 quantifying a decoder-side DRC to be applied. As such, the parametric-mode DRC analyzer 921 may be configured to simulate the DRC processing performed by the reference multi-channel encoder 930. The parameters DRC1 provided by the parametric-mode DRC analyzer 921 are typically not included in the bitstream P in the parametric coding mode, but instead undergo compensation so that the dynamic range limiting carried out by the parametric analysis stage 922 is accounted for. For this purpose, a DRC up-compensator 924 receives the post-processing DRC parameters DRC 1 and the preprocessing DRC parameters DRC2. For each block or frame, the DRC up-compensator 924 derives a value of one or more compensated post-processing DRC parameters DRC3, which are such that the combined action of the compensated post-processing DRC parameters</p><p id="p0193" num="0193">DRC3 and the pre-processing DRC parameters DRC2 is quantitatively equivalent to the DRC quantified by the post-processing DRC parameters DRC 1. Put differently, the DRC up- compensator 924 is configured to reduce the post-processing DRC parameters output by the DRC analyzer 921 by that share of it (if any) which has already been effected by the parametric analysis stage 922. It is the compensated post-processing DRC parameters DRC3 that may be included in the bitstream P. 
<!-- EPO <DP n="57"/>-->
 Referring to the lower portion 931 of the system 900, a parametric-mode multiplexer 925 collects the compensated post-processing DRC parameters DRC3, the pre-processing DRC parameters DRC2, the mixing parameters a and the encoded downmix signal X, and forms, based thereon, the bitstream P. As such, the parametric-mode multiplexer 925 may comprise or may correspond to the bitstream generation unit 530. In a possible implementation, the compensated post-processing DRC parameters DRC3 and the pre-processing DRC parameters DRC2 may be encoded in logarithmic form as dB values influencing an amplitude upscaling or downscaling on the decoder side. The compensated post-processing DRC parameters DRC3 may have any sign. However, the pre-processing DRC parameters DRC2, which result from enforcement of a 'non-clip condition' or the like, will typically be represented by a non-negative dB value at all times. </p><p id="p0194" num="0194">Fig. 10 shows example processing which may e.g. be performed in the parametric-mode DRC analyzer 921 and in the DRC up-compensator 924 in order to determine modified DRC parameters DRC3 (e.g. modified "dynrng gain" and/or "compr gain" parameters). </p><p id="p0195" num="0195">The DRC2 and DRC3 parameters may be used to ensure that the decoding system 100 plays back different audio bitstreams at a consistent loudness level. Furthermore, it may be ensured that the bitstreams generated by a parametric encoding system 500 have consistent loudness levels with respect to bitstreams generated by legacy and/or reference encoding systems (such as Dolby Digital Plus). As outlined above, this may be ensured by generating a downmix signal at the encoding system 500 which does not clip (using the DRC2 parameters) and by providing the DRC2 parameters (e.g. the inverse of the attenuation which has been applied for preventing clipping of the downmix signal) within the bitstream, in order to enable the decoding system 100 to recreate the original loudness (when generating an upmix signal). </p><p id="p0196" num="0196">As outlined above, the downmix signal is typically generated based on a linear combination of some or all of the channels of the multi-channel input signal 561. As such, the scaling factor (or attenuation) which is applied to the channels of the multi-channel input signal 561 may depend on all the channels of the multi-channel input signal 561, which have contributed to the downmix signal. In particular, the one or more channels of the downmix signals may be determined based on the LFE channel of the multi-channel input signal 561. By consequence, the scaling factor (or attenuation) which is applied for clipping protection 
<!-- EPO <DP n="58"/>-->
 should also take into account the LFE channel. This is different from other mult i- channel encoding systems (such as Dolby Digital Plus), where the LFE channel is typically not taken into account for clipping protection. By taking into account the LFE channel and/or all channels which have contributed to the downmix signal, the quality of clipping protection may be improved. </p><p id="p0197" num="0197">As such, the one or more DRC2 parameters which are provided to the corresponding decoding system 100 may depend on all the channels of the input signal 561 which have contributed to the downmix signal, in particular, the DRC2 parameters may depend on the LFE channel. By doing so, the quality of clipping protection may be improved. </p><p id="p0198" num="0198">It should be note that the dialnorm parameter may not be taken into account for the calculation of the scaling factor and/or the DRC2 parameter (as illustrated in Fig. 10). As outlined above, the encoding system 500 may be configured to write so called "clip- gains" (i.e. DRC2 parameters) into the spatial metadata frame which indicate which gains have been applied upon the input signal 561, in order to prevent clipping in the downmix signal. The corresponding decoding system 100 may be configured to exactly invert the clip- gains applied in the encoding system 500. However, only sampling points of the clip-gains are transmitted in the bitstream. In other words, the clip-gain parameters are typically determined only on a per- frame or on a per-block basis. The decoding system 100 may be configured to interpolate the clip-gain values (i.e. the received DRC2 parameters) in between the sampling points between neighboring sampling points. An example interpolation curve for interpolating DRC2 parameters for adjacent frames is illustrated in Fig. 11. In particular, Fig. 11 shows a first DRC2 parameter 953 for a first frame and a second DRC2 parameter 954 for a following second frame 950. The decoding system 100 may be configured to interpolate between the first DRC2 parameter 953 and the second DRC2 parameter 954. The interpolation may be performed within a subset 951 of samples of the second frame 950, e.g. within a first block 951 of the second frame 950 (as shown by the interpolation curve 952). The interpolation of the DRC2 parameter ensures a smooth transition between adjacent audio frames, and thereby avoids audible artifacts which may be caused by differences between subsequent DRC2 parameters 953, 954. 
<!-- EPO <DP n="59"/>-->
 The encoding system 500 (in particular the downmix processing unit 510) may be configured to apply the corresponding clip-gain interpolation to the DRC2 interpolation 952 performed by the decoding system 500, when generating the downmix signal. This ensures that the clip- gain protection of the downmix signal is consistently removed when generating an upmix signal. In other words, the encoding system 500 may be configured to simulate the curve of DRC2 values resulting from the DRC2 interpolation 952 applied by the decoding system 100. Furthermore, the encoding system 500 may be configured to apply the exact (i.e. sample-by- sample) inverse of this curve of DRC2 values to the multi-channel input signal 561, when generating the downmix signal. </p><p id="p0199" num="0199">The methods and systems described in the present document may be implemented as software, firmware and/or hardware. Certain components may e.g. be implemented as software running on a digital signal processor or microprocessor. Other components may e.g. be implemented as hardware and or as application specific integrated circuits. The signals encountered in the described methods and systems may be stored on media such as random access memory or optical storage media. They may be transferred via networks, such as radio networks, satellite networks, wireless networks or wireline networks, e.g. the Internet. </p><p id="p0200" num="0200">Typical devices making use of the methods and systems described in the present document are portable electronic devices or other consumer equipment which are used to store and/or render audio signals. 
</p></description><claims mxw-id="PCLM70078353" ref-ucid="WO-2014128275-A1" lang="EN" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="60"/>--><claim-text/><claim-text>CLAIMS </claim-text><claim-text>1) An audio encoding system (500) configured to generate a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal; the system (500) comprising </claim-text><claim-text> - a downmix processing unit (510) configured to generate the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - a parameter processing unit (520) configured to determine the spatial metadata from the multi-channel input signal (561); and </claim-text><claim-text> - a configuration unit (540) configured to determine one or more control settings for the parameter processing unit (520) based on one or more external settings; </claim-text><claim-text> wherein the one or more external settings comprise a target data-rate for the bitstream (564) and wherein the one or more control settings comprise a maximum data-rate for the spatial metadata. </claim-text><claim-text>2) The audio encoding system (500) of claim 1, wherein </claim-text><claim-text> - the parameter processing unit (520) is configured to determine spatial metadata for a frame of the multi-channel input signal (561), referred to as a spatial metadata frame; </claim-text><claim-text> - a frame of the multi-channel input signal (561) comprises a pre-determined </claim-text><claim-text> number of samples of the multi-channel input signal (561); and </claim-text><claim-text> - the maximum data-rate for the spatial metadata is indicative of a maximum </claim-text><claim-text> number of metadata bits for a spatial metadata frame. </claim-text><claim-text>3) The audio encoding system (500) of claim 2, wherein the parameter processing unit (520) is configured to determine whether the number of bits of a spatial metadata frame which has been determined based on the one or more control settings exceeds the maximum number of metadata bits. </claim-text><claim-text>4) The audio encoding system (500) of claim 3, wherein 
<!-- EPO <DP n="61"/>-->
 - a spatial metadata frame comprises one or more sets (711, 712) of spatial parameters; </claim-text><claim-text> - the one or more control settings comprise a temporal resolution setting indicative of a number of sets (711, 712) of spatial parameters per spatial metadata frame to be determined by the parameter processing unit (520); </claim-text><claim-text> - the parameter processing unit (520) is configured to discard a set (711) of spatial parameters from a current spatial metadata frame, if the current spatial metadata frame comprises a plurality of sets (711, 712) of spatial parameters and if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. </claim-text><claim-text>5) The audio encoding system (500) of claim 4, wherein </claim-text><claim-text> - the one or more sets (711, 712) of spatial parameters are associated with </claim-text><claim-text> corresponding one or more sampling points (583, 584); </claim-text><claim-text> - the one or more sampling points (583, 584) are indicative of corresponding one or more time instants; </claim-text><claim-text> - the parameter processing unit (520) is configured to discard a first set (711) of spatial parameters from the current spatial metadata frame, wherein the first set (711) of spatial parameters is associated with a first sampling point (583) prior to a second sampling point (584), if the plurality of sampling points (583, 584) of the current metadata frame is not associated with transients of the multi-channel input signal (561); and </claim-text><claim-text> - the parameter processing unit (520) is configured to discard the second set (712) of spatial parameters from the current spatial metadata frame, if the plurality of sampling points (583, 584) of the current metadata frame is associated with transients of the multi-channel input signal (561). </claim-text><claim-text>6) The audio encoding system (500) of any of claims 4 to 5, wherein </claim-text><claim-text> - the one or more control settings comprise a quantizer setting indicative of a first type of quantizer from a plurality of pre-determined types of quantizers;</claim-text><claim-text>- the parameter processing unit (520) is configured to quantize the one or more sets (711, 712) of spatial parameters in accordance to the first type of quantizer; 
<!-- EPO <DP n="62"/>-->
 - the plurality of pre-determined types of quantizers provides different quantizer resolutions, respectively; </claim-text><claim-text> - the parameter processing unit (520) is configured to re-quantize one, some or all of the spatial parameters of the one or more sets (711, 712) of spatial parameters in accordance to a second type of quantizer having a lower resolution than the first type of quantizer, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. </claim-text><claim-text>7) The audio encoding system (500) of claim 6, wherein the plurality of pre-determined types of quantizers comprises a fine quantization and a coarse quantization. </claim-text><claim-text>8) The audio encoding system (500) of any of claims 4 to 7, wherein the parameter </claim-text><claim-text> processing unit (520) is configured to </claim-text><claim-text> - determine a set of temporal difference parameters based on the difference of a current set (712) of spatial parameters with respect to a directly preceding set (711) of spatial parameters; </claim-text><claim-text> - encode the set of temporal difference parameters using entropy encoding; </claim-text><claim-text> - insert the encoded set of temporal difference parameters in the current spatial metadata frame; and </claim-text><claim-text> - reduce an entropy of the set of temporal difference parameters, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. </claim-text><claim-text>9) The audio encoding system (500) of claim 8, wherein the parameter processing unit (520) is configured to set one, some or all of the temporal difference parameters of the set of temporal difference parameters equal to a value having an increased probability of possible values of the temporal difference parameters, to reduce the entropy of the set of temporal difference parameters. </claim-text><claim-text>10) The audio encoding system (500) of any of claims 4 to 9, wherein </claim-text><claim-text> - the one or more control settings comprise a frequency resolution setting; </claim-text><claim-text> - the frequency resolution setting is indicative of a number of different frequency bands (572); 
<!-- EPO <DP n="63"/>-->
 - the parameter processing unit (520) is configured to determine different spatial parameters, referred to as band parameters, for the different frequency bands (572); and </claim-text><claim-text> - a set of spatial parameters comprises corresponding band parameters for the </claim-text><claim-text> different frequency bands (572). </claim-text><claim-text>11) The audio encoding system (500) of claim 10, wherein the parameter processing unit (520) is configured to </claim-text><claim-text> - determine a set of frequency difference parameters based on the difference of one or more band parameters in a first frequency band (572) with respect to corresponding one or more band parameters in a second, adjacent, frequency band (572); </claim-text><claim-text> - encode the set of frequency difference parameters using entropy encoding; </claim-text><claim-text> - insert the encoded set of frequency difference parameters in the current spatial metadata frame; and </claim-text><claim-text> - reduce an entropy of the set of frequency difference parameters, if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits. </claim-text><claim-text>12) The audio encoding system (500) of claim 11, wherein the parameter processing unit (520) is configured to set one, some or all of the frequency difference parameters of the set of frequency difference parameters equal to a value having an increased probability of possible values of the frequency difference parameters, to reduce the entropy of the set of frequency difference parameters. </claim-text><claim-text>13) The audio encoding system (500) of any of claims 10 to 12, wherein the parameter </claim-text><claim-text> processing unit (520) is configured to </claim-text><claim-text> - reduce the number of frequency bands (572), if it is determined that the number of bits of the current spatial metadata frame exceeds the maximum number of metadata bits; and </claim-text><claim-text> - re-determine the one or more sets of spatial parameters for the current spatial metadata frame using the reduced number of frequency bands (572). 
<!-- EPO <DP n="64"/>-->
 14) The audio encoding system (500) of any previous claim, wherein </claim-text><claim-text> - the one or more external settings further comprise one or more of: a sampling rate of the multi-channel input signal (561), the number m of channels of the downmix signal, the number n of channels of the multi-channel input signal (561), and an update period indicative of a time period required by a corresponding decoding system (100) to synchronize to the bitstream (564); and </claim-text><claim-text> - the one or more control settings further comprise one or more of: a temporal resolution setting indicative of a number of sets (711, 712) of spatial parameters per frame of spatial metadata to be determined, a frequency resolution setting indicative of a number of frequency bands (572) for which spatial parameters are to be determined, a quantizer setting indicative of a type of quantizer to be used for quantizing the spatial metadata, and an indication whether a current frame of the multi-channel input signal (561) is to be encoded as an independent frame. </claim-text><claim-text>15) The audio encoding system (500) of any of claims 2 to 14, wherein </claim-text><claim-text> - the one or more external settings further comprise an update period indicative of a time period required by a corresponding decoding system (100) to synchronize to the bitstream (564); </claim-text><claim-text> - the one or more control settings further comprise an indication whether a current spatial metadata frame is to be encoded as an independent frame; </claim-text><claim-text> - the parameter processing unit (520) is configured to determine a sequence of spatial metadata frames for a corresponding sequence of frames of the multichannel input signal (561); </claim-text><claim-text> - the configuration unit (540) is configured to determine the one or more spatial metadata frames from the sequence of spatial metadata frames, which are to be encoded as independent frames, based on the update period. </claim-text><claim-text>16) The audio encoding system (500) of claim 15, wherein the configuration unit (540) is configured to </claim-text><claim-text> - determine whether a current frame of the sequence of frames of the multi-channel input signal (561) comprises a sample at a time instant which is an integer multiple of the update period; and 
<!-- EPO <DP n="65"/>-->
 - determine that the current spatial metadata frame corresponding to the current frame is an independent frame. </claim-text><claim-text>17) The audio encoding system (500) of claim 15, wherein the parameter processing unit (520) is configured to encode one or more sets of spatial parameters of a current spatial metadata frame independently from data comprised in a previous spatial metadata frame, if the current spatial metadata frame is to be encoded as an independent frame. </claim-text><claim-text>18) The audio encoding system (500) of any previous claim, wherein </claim-text><claim-text> - n=6 and m=2; and/or </claim-text><claim-text> - the multi-channel upmix signal is a 5.1 signal; and/or </claim-text><claim-text> - the downmix signal is a stereo signal; and/or </claim-text><claim-text> - the multi-channel input signal is a 5.1 signal. </claim-text><claim-text>19) The audio encoding system (500) of any previous claim, wherein </claim-text><claim-text> - the downmix processing unit (510) is configured to encode the downmix signal using a Dolby Digital Plus encoder; </claim-text><claim-text> - the bitstream (564) corresponds to a Dolby Digital Plus bitstream; and </claim-text><claim-text> - the spatial metadata is comprised within a data field of the Dolby Digital Plus bitstream. </claim-text><claim-text>20) The audio encoding system (500) of any previous claim, wherein </claim-text><claim-text> - the spatial metadata comprises one or more sets of spatial parameters; and</claim-text><claim-text>- a spatial parameter of the set of spatial parameters is indicative of a cross- correlation between different channels of the multi-channel input signal (561). </claim-text><claim-text>21) A parameter processing unit (520) configured to determine a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal; wherein the downmix signal comprises m channels and wherein the multi-channel upmix signal comprises n channels; n, m being integers with m&lt;n; wherein the spatial metadata frame comprises one or more sets (711, 712) of spatial parameters; the parameter processing unit (520) comprising 
<!-- EPO <DP n="66"/>-->
 - a transform unit (521) configured to determine a plurality of spectra (589) from a current frame (585) and a directly following frame (590) of a channel of a multichannel input signal (561); and </claim-text><claim-text> - a parameter determination unit (523) configured to determine the spatial metadata frame for the current frame of the channel of the multi-channel input signal (561) by weighting the plurality of spectra (589) using a window function (586); </claim-text><claim-text> wherein the window function (586) depends on one or more of: a number of sets (711, 712) of spatial parameters comprised within the spatial metadata frame, a presence of one or more transients in the current frame or in the directly following frame of the multi-channel input signal (561), and/or a time instant of the transient. </claim-text><claim-text>22) The parameter processing unit (520) of claim 21, wherein </claim-text><claim-text> - the window function (586) comprises a set-dependent window function (586);</claim-text><claim-text>- the parameter determination unit (523) is configured to determine a set (711) of spatial parameters for the current frame of the channel of the multi-channel input signal (561) by weighting the plurality of spectra (589) using the set-dependent window function (586); and </claim-text><claim-text> - the set-dependent window function (586) depends on whether the set (711) of spatial parameters is associated with a transient or not. </claim-text><claim-text>23) The parameter processing unit (520) of claim 22, if the set (711) of spatial parameters is not associated with a transient, </claim-text><claim-text> - the set-dependent window function (586) provides for a phase-in of the plurality of spectra from a sampling point of a preceding set (710) of spatial parameters up to a sampling point of the set (711) of spatial parameters; and/or </claim-text><claim-text> - the set-dependent window function (586) includes the plurality of spectra from the sampling point of the set (711) of spatial parameters up to a spectrum of the plurality of spectra preceding a sampling point of a following set (712) of spatial parameters and cancels out the plurality of spectra starting from the sampling point of the following set (712) of spatial parameters, if the following set of spatial parameters is associated with a transient. 
<!-- EPO <DP n="67"/>-->
 24) The parameter processing unit (520) of claim 22, if the set (711) of spatial parameters is associated with a transient, </claim-text><claim-text> - the set-dependent window function (586) cancels out the spectra from the plurality of spectra preceding a sampling point of the set (711) of spatial parameters; and/or</claim-text><claim-text>- the set-dependent window function (586) includes the spectra from the plurality of spectra starting from the sampling point of the set (711) of spatial parameters up to the spectrum of the plurality of spectra preceding a sampling point of the following set (712) of spatial parameters and cancels out the spectra from the plurality of spectra starting from the sampling point of the following set (712) of spatial parameters, if the sampling point of the following set (712) of spatial parameters is associated with a transient; and/or </claim-text><claim-text> - the set-dependent window function (586) includes the spectra of the plurality of spectra from the sampling point of the set (711) of spatial parameters up to the spectrum of the plurality of spectra at an end of the current frame (585) and provides for a phase-out of the spectra of the plurality of spectra from a beginning of the directly following frame (590) up to the sampling point of the following set (712) of spatial parameters, if the following set (712) of spatial parameters is not associated with a transient. </claim-text><claim-text>25) A parameter processing unit (520) configured to determine a spatial metadata frame for generating a frame of a multi-channel upmix signal from a corresponding frame of a downmix signal; wherein the downmix signal comprises m channels and wherein the multi-channel upmix signal comprises n channels; n, m being integers with m&lt;n; wherein the spatial metadata frame comprises a set (711) of spatial parameters; the parameter processing unit (520) comprising </claim-text><claim-text> - a transform unit (521) configured to determine a first plurality of transform </claim-text><claim-text> coefficients (580) from a frame (585) of a first channel (561-1) of a multi-channel input signal (561), and to determine a second plurality of transform coefficients (580) from the corresponding frame of a second (561-2) channel of the multichannel input signal (561); wherein the first (561-1) and second (561-2) channels are different; wherein the first and second plurality of transform coefficients (580) provide a first and second time / frequency representation of the frames (585) of the first and second channels, respectively; wherein the first and second time / 
<!-- EPO <DP n="68"/>-->
 frequency representations comprise a plurality of frequency bins (571) and a plurality of time bins (582); and </claim-text><claim-text> - a parameter determination unit (523) configured to determine the set (711) of spatial parameters based on the first and second plurality of transform coefficients (580) using fixed point arithmetic; wherein the set (711) of spatial parameters comprises corresponding band parameters for different frequency bands (572) comprising different numbers of frequency bins (571); wherein a particular band parameter for a particular frequency band (572) is determined based on the transform coefficients (580) from the first and second plurality of transform coefficients (580) of the particular frequency band (572); and wherein a shift used by the fixed point arithmetic for determining the particular band parameter depends on the particular frequency band (572). </claim-text><claim-text>26) The parameter processing unit (520) of claim 25, wherein the shift used by the fixed point arithmetic for determining the particular band parameter for the particular frequency band (572) depends on a number of frequency bins (571) comprised within the particular frequency band (572). </claim-text><claim-text>27) The parameter processing unit (520) of any of claims 25 to 26, wherein the shift used by the fixed point arithmetic for determining the particular band parameter for the particular frequency band (572) depends on a number of time bins (582) used for determining the particular band parameter. </claim-text><claim-text>28) The parameter processing unit (520) of any of claims 25 to 27, wherein the parameter determination unit (523) is configured to determine for the particular frequency band (572) a corresponding shift which maximizes a precision of the particular band parameter. </claim-text><claim-text>29) The parameter processing unit (520) of any of claims 25 to 28, wherein the parameter determination unit (523) is configured to determine the particular band parameter for the particular frequency band (572), by </claim-text><claim-text> - determining a first energy estimate based on the transform coefficients (580) from the first plurality of transform coefficients (580) falling into the particular frequency band (572); 
<!-- EPO <DP n="69"/>-->
 - determining a second energy estimate based on the transform coefficients (580) from the second plurality of transform coefficients (580) falling into the particular frequency band (572); and </claim-text><claim-text> - determining a co variance based on the transform coefficients (580) from the first and second plurality of transform coefficients (580) falling into the particular frequency band (572); and </claim-text><claim-text> - determining the shift for the particular band parameter based on a maximum of the first energy estimate, the second energy estimate and the covariance. </claim-text><claim-text>30) An audio encoding system (500) configured to generate a bitstream (564) based on a multi-channel input signal (561); the system (500) comprising </claim-text><claim-text> - a downmix processing unit (510) configured to generate a sequence of frames of a downmix signal from a corresponding sequence of first frames of the multichannel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - a parameter processing unit (520) configured to determine a sequence of spatial metadata frames from a sequence of second frames of the multi-channel input signal (561); wherein the sequence of frames of the downmix signal and the sequence of spatial metadata frames are for generating a multi-channel upmix signal comprising n channels; and </claim-text><claim-text> - a bitstream generation unit (503) configured to generate the bitstream (564) </claim-text><claim-text> comprising a sequence of bitstream frames, wherein a bitstream frame is indicative of a frame of the downmix signal corresponding to a first frame of the sequence of first frames of the multi-channel input signal (561) and a spatial metadata frame corresponding to a second frame of the sequence of second frames of the multi-channel input signal (561); wherein the second frame is different from the first frame. </claim-text><claim-text>31) The audio encoding system (500) of claim 30, wherein </claim-text><claim-text> - the first frame and the second frame comprise a same number of samples; and/or</claim-text><claim-text>- the samples of the first frame precede the samples of the second frame. 
<!-- EPO <DP n="70"/>-->
 32) The audio encoding system (500) of any of claims 30 to 31 , wherein the first frame precedes the second frame by a pre-determined number of samples. </claim-text><claim-text>33) The audio encoding system (500) of claim 32, wherein the pre-determined number of samples is 928 samples. </claim-text><claim-text>34) An audio encoding system (500) configured to generate a bitstream (564) based on a multi-channel input signal (561); the system (500) comprising </claim-text><claim-text> - a downmix processing unit (510) configured to </claim-text><claim-text> - determine a sequence of clipping protection gains for a corresponding sequence of frames of the multi-channel input signal (561); wherein a current clipping protection gain (954) is indicative of an attenuation to be applied to a current frame (950) of the multi-channel input signal (561) to prevent a corresponding current frame of a downmix signal from clipping;</claim-text><claim-text>- interpolate the current clipping protection gain (954) and a preceding clipping protection gain (953) of a preceding frame of the multi-channel input signal (561) to yield a clipping protection gain curve (952); </claim-text><claim-text> - apply the clipping protection gain curve (952) to the current frame of the multi-channel input signal (561) to yield an attenuated current frame of the multi-channel input signal (561); and </claim-text><claim-text> - generate a current frame of a sequence of frames of the downmix signal from the attenuated current frame of the multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multichannel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - a parameter processing unit (520) configured to determine a sequence of spatial metadata frames from the multi-channel input signal (561); wherein the sequence of frames of the downmix signal and the sequence of spatial metadata frames are for generating a multi-channel upmix signal comprising n channels; and</claim-text><claim-text>- a bitstream generation unit (503) configured to generate the bitstream (564) </claim-text><claim-text> indicative of the sequence of clipping protection gains, the sequence of frames of the downmix signal and the sequence of spatial metadata frames, to enable a 
<!-- EPO <DP n="71"/>-->
 corresponding decoding system (100) to generate the multi-channel upmix signal. </claim-text><claim-text>35) The audio encoding system (500) of claim 34, wherein the clipping protection gain curve (952) comprises </claim-text><claim-text> - a transition segment, providing a smooth transition from the preceding clipping protection gain (953) to the current clipping protection gain (954); and</claim-text><claim-text>- a flat segment, remaining flat at the current clipping protection gain (954). </claim-text><claim-text>36) The audio encoding system (500) of claim 35, wherein </claim-text><claim-text> - the transition segment extends across a pre-determined number of samples of the current frame of the multi-channel input signal (561); </claim-text><claim-text> - the pre-determined number of samples is greater than one and smaller than a total number of samples of the current frame of the multi-channel input signal (561). </claim-text><claim-text>37) An audio encoding system (500) configured to generate a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal; the system (500) comprising </claim-text><claim-text> - a downmix processing unit (510) configured to generate the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - a parameter processing unit (520) configured to determine a sequence of frames of spatial metadata for a corresponding sequence of frames of the multi-channel input signal (561); and </claim-text><claim-text> - a configuration unit (540) configured to determine one or more control settings for the parameter processing unit (520) based on one or more external settings; </claim-text><claim-text> wherein the one or more external settings comprise an update period indicative of a time period required by a corresponding decoding system (100) to synchronize to the bitstream (564); and wherein the configuration unit (540) is configured to determine one or more frames of spatial metadata from the sequence of frames of spatial metadata, which are to be encoded as independent frames, based on the update period. 
<!-- EPO <DP n="72"/>-->
 38) A method for generating a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal; the method comprising </claim-text><claim-text> - generating the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - determining one or more control settings based on one or more external settings; wherein the one or more external settings comprise a target data-rate for the bitstream (564) and wherein the one or more control settings comprise a maximum data-rate for the spatial metadata; and </claim-text><claim-text> - determining the spatial metadata from the multi-channel input signal (561) subject to the one or more control settings. </claim-text><claim-text>39) A method for determining a spatial metadata frame for generating a frame of a multichannel upmix signal from a corresponding frame of a downmix signal; wherein the downmix signal comprises m channels and wherein the multi-channel upmix signal comprises n channels; n, m being integers with m&lt;n; wherein the spatial metadata frame comprises one or more sets (711, 712) of spatial parameters; the method comprising </claim-text><claim-text> - determining a plurality of spectra (589) from a current frame (585) and a directly following frame (590) of a channel of a multi-channel input signal (561);</claim-text><claim-text>- weighting the plurality of spectra (589) using a window function (586) to yield a plurality of weighted spectra; and </claim-text><claim-text> - determining the spatial metadata frame for the current frame of the channel of the multi-channel input signal (561) based on the plurality of weighted spectra; </claim-text><claim-text> wherein the window function (586) depends on one or more of: a number of sets (711, 712) of spatial parameters comprised within the spatial metadata frame, a presence of one or more transients in the current frame or in the directly following frame of the multi-channel input signal (561), and/or a time instant of the transient. </claim-text><claim-text>40) A method for determining a spatial metadata frame for generating a frame of a multichannel upmix signal from a corresponding frame of a downmix signal; wherein the downmix signal comprises m channels and wherein the multi-channel upmix signal 
<!-- EPO <DP n="73"/>-->
 comprises n channels; n, m being integers with m&lt;n; wherein the spatial metadata frame comprises a set (711) of spatial parameters; the method comprising </claim-text><claim-text> - determining a first plurality of transform coefficients (580) from a frame (585) of a first channel (561-1) of a multi-channel input signal (561); </claim-text><claim-text> - determining a second plurality of transform coefficients (580) from the </claim-text><claim-text> corresponding frame of a second (561-2) channel of the multi-channel input signal (561); wherein the first (561-1) and second (561-2) channels are different; </claim-text><claim-text> wherein the first and second plurality of transform coefficients (580) provide a first and second time / frequency representation of the frames (585) of the first and second channels, respectively; wherein the first and second time / frequency representations comprise a plurality of frequency bins (571) and a plurality of time bins (582); wherein the set (711) of spatial parameters comprises corresponding band parameters for different frequency bands (572) comprising different numbers of frequency bins (571); </claim-text><claim-text> - determining a shift to be applied when determining a particular band parameter for a particular frequency band (572) using fixed point arithmetic; wherein the shift is determined based on the particular frequency band (572); and </claim-text><claim-text> - determining the particular band parameter based on the first and second plurality of transform coefficients (580) falling in the particular frequency band (572) using fixed point arithmetic and the determined shift. </claim-text><claim-text>41) A method for generating a bitstream (564) based on a multi-channel input signal (561); the method comprising </claim-text><claim-text> - generating a sequence of frames of a downmix signal from a corresponding </claim-text><claim-text> sequence of first frames of the multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - determining a sequence of spatial metadata frames from a sequence of second frames of the multi-channel input signal (561); wherein the sequence of frames of the downmix signal and the sequence of spatial metadata frames are for generating a multi-channel upmix signal comprising n channels; and </claim-text><claim-text> - generating the bitstream (564) comprising a sequence of bitstream frames; </claim-text><claim-text> wherein a bitstream frame is indicative of a frame of the downmix signal 
<!-- EPO <DP n="74"/>-->
 corresponding to a first frame of the sequence of first frames of the multi-channel input signal (561) and a spatial metadata frame corresponding to a second frame of the sequence of second frames of the multi-channel input signal (561); wherein the second frame is different from the first frame. </claim-text><claim-text>42) A method for generating a bitstream (564) based on a multi-channel input signal (561); the method comprising </claim-text><claim-text> - determining a sequence of clipping protection gains for a corresponding sequence of frames of the multi-channel input signal (561); wherein a current clipping protection gain (954) is indicative of an attenuation to be applied to a current frame (950) of the multi-channel input signal (561) to prevent a corresponding current frame of a downmix signal from clipping; </claim-text><claim-text> - interpolating the current clipping protection gain (954) and a preceding clipping protection gain (953) of a preceding frame of the multi-channel input signal (561) to yield a clipping protection gain curve (952, 954); </claim-text><claim-text> - applying the clipping protection gain curve (952, 954) to the current frame of the multi-channel input signal (561) to yield an attenuated current frame of the multichannel input signal (561); </claim-text><claim-text> - generating a current frame of a sequence of frames of the downmix signal from the attenuated current frame of the multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - determining a sequence of spatial metadata frames from the multi-channel input signal (561); wherein the sequence of frames of the downmix signal and the sequence of spatial metadata frames are for generating a multi-channel upmix signal comprising n channels; and </claim-text><claim-text> - generating the bitstream (564) indicative of the sequence of clipping protection gains, the sequence of frames of the downmix signal and the sequence of spatial metadata frames, to enable the generation of the multi-channel upmix signal based on the bitstream (564). 
<!-- EPO <DP n="75"/>-->
43) A method for generating a bitstream (564) indicative of a downmix signal and spatial metadata for generating a multi-channel upmix signal from the downmix signal; the method comprising </claim-text><claim-text> - generating the downmix signal from a multi-channel input signal (561); wherein the downmix signal comprises m channels and wherein the multi-channel input signal (561) comprises n channels; n, m being integers with m&lt;n; </claim-text><claim-text> - determining one or more control settings based on one or more external settings; wherein the one or more external settings comprise an update period indicative of a time period required by a decoding system (100) to synchronize to the bitstream (564); </claim-text><claim-text> - determining a sequence of frames of spatial metadata for a corresponding </claim-text><claim-text> sequence of frames of the multi-channel input signal (561), subject to one or more control settings; and </claim-text><claim-text> - encoding one or more frames of spatial metadata from the sequence of frames of spatial metadata as independent frames, based on the update period. </claim-text><claim-text>44) An audio decoder (140) configured to decode a bitstream generated by any one of claims 38, 41-43. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
