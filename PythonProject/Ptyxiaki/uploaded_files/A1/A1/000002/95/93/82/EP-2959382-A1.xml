<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2959382-A1" country="EP" doc-number="2959382" kind="A1" date="20151230" family-id="48795641" file-reference-id="311201" date-produced="20180826" status="corrected" lang="FR"><bibliographic-data><publication-reference fvid="160452587" ucid="EP-2959382-A1"><document-id><country>EP</country><doc-number>2959382</doc-number><kind>A1</kind><date>20151230</date><lang>FR</lang></document-id></publication-reference><application-reference ucid="EP-14705764-A" is-representative="NO"><document-id mxw-id="PAPP193868142" load-source="docdb" format="epo"><country>EP</country><doc-number>14705764</doc-number><kind>A</kind><date>20140219</date><lang>FR</lang></document-id><document-id mxw-id="PAPP193868143" load-source="patent-office" format="original"><country>EP</country><doc-number>14705764.0</doc-number><date>20140219</date><lang>FR</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC162032125" ucid="EP-2014053212-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2014053212</doc-number><kind>W</kind><date>20140219</date></document-id></priority-claim><priority-claim mxw-id="PPC162027636" ucid="FR-1351409-A" load-source="docdb"><document-id format="epo"><country>FR</country><doc-number>1351409</doc-number><kind>A</kind><date>20130219</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1857145897" load-source="ipcr">G06F   9/455       20060101ALI20170109BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1857145898" load-source="ipcr">G06F   9/45        20060101AFI20170109BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1857145899" load-source="ipcr">G06F   9/44        20060101ALI20170109BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1853804325" load-source="docdb" scheme="CPC">G06F   9/4552      20130101 LI20170121BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1853804326" load-source="docdb" scheme="CPC">G06F   9/45504     20130101 LI20170121BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984697915" load-source="docdb" scheme="CPC">G06F   8/443       20130101 FI20160107BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1984698111" load-source="docdb" scheme="CPC">G06F   8/70        20130101 LI20160107BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT165549227" lang="DE" load-source="patent-office">SYSTEM ZUR DYNAMISCHEN KOMPILIERUNG VON MINDESTENS EINEM ANWEISUNGSFLUSS</invention-title><invention-title mxw-id="PT165549228" lang="EN" load-source="patent-office">SYSTEM FOR DYNAMIC COMPILATION OF AT LEAST ONE INSTRUCTION FLOW</invention-title><invention-title mxw-id="PT165549229" lang="FR" load-source="patent-office">SYSTEME DE COMPILATION DYNAMIQUE D'AU MOINS UN FLOT D'INSTRUCTIONS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1103307415" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>COMMISSARIAT À L ÉNERGIE ATOMIQUE ET AUX ÉNERGIES ALTERNATIVES</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR1103317947" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>COMMISSARIAT À L'ÉNERGIE ATOMIQUE ET AUX ÉNERGIESALTERNATIVES</last-name></addressbook></applicant><applicant mxw-id="PPAR1101653355" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Commissariat à l'Énergie Atomique et aux Énergies Alternatives</last-name><iid>101333366</iid><address><street>Bâtiment Le Ponant D 25 Rue Leblanc</street><city>75015 Paris</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR1103303592" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CARBON ALEXANDRE</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103319939" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CARBON, Alexandre</last-name></addressbook></inventor><inventor mxw-id="PPAR1101648434" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>CARBON, Alexandre</last-name><address><street>29 rue du Bois Michel</street><city>F-91440 Bures-sur-yvettes</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103305918" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LHUILLER YVES</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR1103342084" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LHUILLER, Yves</last-name></addressbook></inventor><inventor mxw-id="PPAR1101652102" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LHUILLER, Yves</last-name><address><street>45 allée du Pont des Beaumes</street><city>F-91120 Palaiseau</city><country>FR</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR1101651070" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Priori, Enrico</last-name><suffix>et al</suffix><iid>101413795</iid><address><street>Marks &amp; Clerk France Conseils en Propriété Industrielle Immeuble «Visium» 22, avenue Aristide Briand</street><city>94117 Arcueil Cedex</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2014053212-W"><document-id><country>EP</country><doc-number>2014053212</doc-number><kind>W</kind><date>20140219</date><lang>FR</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2014128153-A1"><document-id><country>WO</country><doc-number>2014128153</doc-number><kind>A1</kind><date>20140828</date><lang>FR</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS660626337" load-source="docdb">AL</country><country mxw-id="DS660625272" load-source="docdb">AT</country><country mxw-id="DS660626343" load-source="docdb">BE</country><country mxw-id="DS660625482" load-source="docdb">BG</country><country mxw-id="DS660704107" load-source="docdb">CH</country><country mxw-id="DS660789014" load-source="docdb">CY</country><country mxw-id="DS660625273" load-source="docdb">CZ</country><country mxw-id="DS660626344" load-source="docdb">DE</country><country mxw-id="DS660789015" load-source="docdb">DK</country><country mxw-id="DS660789016" load-source="docdb">EE</country><country mxw-id="DS660710363" load-source="docdb">ES</country><country mxw-id="DS660625487" load-source="docdb">FI</country><country mxw-id="DS660726109" load-source="docdb">FR</country><country mxw-id="DS660626345" load-source="docdb">GB</country><country mxw-id="DS660789017" load-source="docdb">GR</country><country mxw-id="DS660626346" load-source="docdb">HR</country><country mxw-id="DS660625274" load-source="docdb">HU</country><country mxw-id="DS660704108" load-source="docdb">IE</country><country mxw-id="DS660789018" load-source="docdb">IS</country><country mxw-id="DS660726110" load-source="docdb">IT</country><country mxw-id="DS660789019" load-source="docdb">LI</country><country mxw-id="DS660625488" load-source="docdb">LT</country><country mxw-id="DS660703885" load-source="docdb">LU</country><country mxw-id="DS660625489" load-source="docdb">LV</country><country mxw-id="DS660625490" load-source="docdb">MC</country><country mxw-id="DS660703886" load-source="docdb">MK</country><country mxw-id="DS660703891" load-source="docdb">MT</country><country mxw-id="DS660703892" load-source="docdb">NL</country><country mxw-id="DS660726115" load-source="docdb">NO</country><country mxw-id="DS660703893" load-source="docdb">PL</country><country mxw-id="DS660704109" load-source="docdb">PT</country><country mxw-id="DS660710364" load-source="docdb">RO</country><country mxw-id="DS660704110" load-source="docdb">RS</country><country mxw-id="DS660703894" load-source="docdb">SE</country><country mxw-id="DS660626356" load-source="docdb">SI</country><country mxw-id="DS660726116" load-source="docdb">SK</country><country mxw-id="DS660703899" load-source="docdb">SM</country><country mxw-id="DS660789020" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA139078669" ref-ucid="WO-2014128153-A1" lang="EN" load-source="patent-office"><p num="0000">The subject of the invention is a system (304) for compiling at least one instruction flow (303) for its execution on a target circuit (300), the system comprising a hardware acceleration circuit (306) carrying out the functions of loading a set of at least one portion of said flow to an internal memory inside said circuit and of decoding said set; the instructions resulting from the loading and from the decoding being transmitted to a programmable core (307) operating in parallel with the hardware acceleration circuit, said programmable core (307) carrying out the transcription of the decoded instructions into a machine code suitable to be executed on the target circuit (300).</p></abstract><abstract mxw-id="PA139545224" ref-ucid="WO-2014128153-A1" lang="EN" source="national office" load-source="docdb"><p>The subject of the invention is a system (304) for compiling at least one instruction flow (303) for its execution on a target circuit (300), the system comprising a hardware acceleration circuit (306) carrying out the functions of loading a set of at least one portion of said flow to an internal memory inside said circuit and of decoding said set; the instructions resulting from the loading and from the decoding being transmitted to a programmable core (307) operating in parallel with the hardware acceleration circuit, said programmable core (307) carrying out the transcription of the decoded instructions into a machine code suitable to be executed on the target circuit (300).</p></abstract><abstract mxw-id="PA139078670" ref-ucid="WO-2014128153-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention a pour objet un système de compilation (304) d'au moins un flot d'instructions (303) pour son exécution sur un circuit cible (300), le système comprenant un circuit d'accélération matériel (306) réalisant les fonctions de chargement d'un ensemble d'au moins une portion dudit flot vers une mémoire interne audit circuit et de décodage dudit ensemble; les instructions résultant du chargement et du décodage étant transmises à un cœur programmable (307) fonctionnant en parallèle du circuit d'accélération matériel, ledit cœur programmable (307) réalisant la transcription des instructions décodées en un code machine adapté pour être exécuté sur le circuit cible (300)</p></abstract><abstract mxw-id="PA139545225" ref-ucid="WO-2014128153-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention a pour objet un système de compilation (304) d'au moins un flot d'instructions (303) pour son exécution sur un circuit cible (300), le système comprenant un circuit d'accélération matériel (306) réalisant les fonctions de chargement d'un ensemble d'au moins une portion dudit flot vers une mémoire interne audit circuit et de décodage dudit ensemble; les instructions résultant du chargement et du décodage étant transmises à un cœur programmable (307) fonctionnant en parallèle du circuit d'accélération matériel, ledit cœur programmable (307) réalisant la transcription des instructions décodées en un code machine adapté pour être exécuté sur le circuit cible (300)</p></abstract><description mxw-id="PDES78477649" ref-ucid="WO-2014128153-A1" lang="FR" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> SYSTEME DE COMPILATION DYNAMIQUE D'AU MOINS UN FLOT </p><p id="p0002" num="0002"> D'INSTRUCTIONS </p><p id="p0003" num="0003">L'invention concerne un système de compilation dynamique d'au moins un flot d'instructions et s'applique au domaine de l'informatique embarquée. </p><p id="p0004" num="0004"> La compilation regroupe un ensemble d'opération ayant pour objectif de convertir un ensemble d'instructions lisibles par l'être humain composant un programme informatique en un code machine, c'est-à-dire un ensemble d'instructions lisibles par un dispositif cible. Dans la suite de la description, le dispositif cible est appelé simplement cible et correspond par exemple à un processeur. </p><p id="p0005" num="0005"> La compilation peut être décrite de manière simplifiée comme une succession de trois étapes. Une première étape vérifie la syntaxe du code source et la traduit en une représentation intermédiaire non optimisée. </p><p id="p0006" num="0006"> Une deuxième étape de compilation regroupe un ensemble d'opérations d'optimisation indépendantes de la cible. Un exemple d'optimisation consiste à dérouler les boucles d'instructions de manière à en permettre une exécution séquentielle. Le code ainsi obtenu correspond alors à une représentation intermédiaire optimisée (RIO). </p><p id="p0007" num="0007"> Une troisième étape transforme la représentation intermédiaire optimisée en code machine, par exemple en assembleur. Des optimisations peuvent également être réalisées à ce stade. </p><p id="p0008" num="0008"> Des techniques de compilation dynamique sont aujourd'hui utilisées. Cela signifie qu'une ou plusieurs étapes de compilation sont appliquées au moment de l'exécution du programme informatique par la cible. Ces techniques permettent d'adapter un programme informatique auquel est associé un code source de manière à ce que celui-ci puisse être exécuté sur des cibles différentes nécessitant différents codes machine. Ces techniques permettent également d'adapter un programme informatique afin de l'optimiser en fonction des conditions d'utilisations. La ou les étapes de 
<!-- EPO <DP n="4"/>-->
 compilation mises en œuvre au moment de l'exécution du programme peuvent utiliser en entrée le code source, une représentation intermédiaire optimisée ou non, ou bien un code machine à traduire pour une nouvelle cible nécessitant un code machine différent ou à optimiser pour la cible courante. </p><p id="p0009" num="0009"> Dans le domaine de l'informatique embarquée, certaines contraintes doivent être prises en compte pour l'utilisation d'applications. En effet, un dispositif portatif tel qu'un téléphone portable intelligent présente habituellement des ressources de calcul spécialisées, conséquence d'une conception adaptée à une utilisation spécifique. En outre, sa consommation énergétique doit être optimisée afin de garantir une autonomie suffisante. </p><p id="p0010" num="0010"> Les algorithmes de compilation dynamique présentent une forte irrégularité. En effet, la représentation en mémoire du flot d'instructions à traiter est complexe du fait des optimisations successives qui fragmentent la représentation du flot d'instruction. Il est dès lors souvent difficile de prévoir à l'avance l'emplacement et la nature des différentes instructions constituants le flot d'instructions en entrée. Les processeurs embarqués ne disposent pas des mécanismes permettant de gérer cette irrégularité. Les étapes de chargement et de décodage réalisées sur le flot d'instructions d'entrée sont particulièrement coûteuses en temps d'exécutionsur ces processeurs car elles sont nombreuses et irrégulières. </p><p id="p0011" num="0011"> A titre d'exemple, pour certaines applications dans le domaine de l'embarqué, un code intermédiaire est téléchargé par un terminal mobile. Des exemples de codes intermédiaires sont le code à octet Java bytecode, le code à octet CIL (Common Infrastructure Language) et le code à octet de LLVM (LowLevel Virtual Machine). Après avoir été optimisée et transformée en code machine, l'application peut être directement exécutée sur la cible. Cette solution a comme avantage de minimiser la quantité de mémoire nécessaire au stockage de l'application sur le terminal mobile. En effet, le code intermédiaire peut être adapté de manière à ce qu'il prenne moins de place que le code machine de l'application. En outre, cela évite également de 
<!-- EPO <DP n="5"/>-->
 stocker en mémoire différents code machine pour l'application en mémoire lorsque l'on se trouve dans le cas d'une architecture hétérogène, c'est-à-dire une architecture comportant plusieurs unités de calcul avec des jeux d'instruction différents. </p><p id="p0012" num="0012"> Cependant, la mise en œuvre des techniques de compilation dynamique dans le domaine de l'embarqué implique souvent une dégradation des performances. En particulier, le temps total d'exécution incluant phases de compilation et d'exécution des applications est allongé de par la forte complexité des algorithmes et l'occupation mémoire n'est pas optimisée. </p><p id="p0013" num="0013">Un but de l'invention est notamment de pallier les inconvénients de l'état de la technique et ou d'y apporter des améliorations. </p><p id="p0014" num="0014"> A cet effet l'invention a pour objets un système de compilation d'au moins un flot d'instructions pour son exécution sur un circuit cible, ledit système comprenant un circuit d'accélération matériel réalisant les fonctions de chargement d'un ensemble d'au moins une portion dudit flot vers une mémoire interne audit circuit et de décodage dudit ensemble, les instructions résultant du chargement et du décodage étant transmises à un cœur programmable fonctionnant en parallèle du circuit d'accélération matériel, ledit cœur programmable réalisant la transcription des instructions décodées en un code machine adapté pour être exécuté sur le circuit cible. </p><p id="p0015" num="0015"> Dans un mode de réalisation, le flot d'instruction est une représentation intermédiaire préalablement obtenue à partir du code source d'une application à exécuter. </p><p id="p0016" num="0016"> Dans un mode de réalisation, le flot d'instruction est le code source d'une application à exécuter. </p><p id="p0017" num="0017"> Dans un mode de réalisation, le flot d'instruction est le code machine d'une application à adapter ou optimiser pour un circuit cible donné. </p><p id="p0018" num="0018"> Selon un aspect de l'invention, le circuit d'accélération matériel sélectionne une portion du flot d'instruction, vérifie si cette portion a déjà été 
<!-- EPO <DP n="6"/>-->
 traduite en code machine, si c'est le cas ladite portion n'étant pas chargée par le circuit d'accélération matériel, une autre portion étant alors sélectionnée. La vérification de l'existence d'une traduction antérieure d'une portion de code machine s'effectue, par exemple, par comparaison de l'adresse de la portion à charger par rapport aux adresses des portions traduites contenues dans la mémoire de résultat. </p><p id="p0019" num="0019"> Selon un aspect de l'invention, la vérification de l'existence d'une traduction préalable est mise en œuvre en parcourant la mémoire de résultat à la recherche d'une portion déjà traduite. </p><p id="p0020" num="0020"> Le décodage d'une portion de code correspond par exemple à une décomposition en un ensemble d'opérations simples. </p><p id="p0021" num="0021"> Le code machine généré est par exemple transmis à une mémoire pour être stocké. </p><p id="p0022" num="0022"> La mémoire de résultat du code chargé et décodé est par exemple interne au système. </p><p id="p0023" num="0023"> Dans un mode de réalisation, un mécanisme détermine la durée pendant laquelle un code machine correspondant à une portion de code compilée auparavant par le système de compilation dynamique n'a pas été exécutée, la mémoire utilisée pour stocker ce code machine étant libérée si celui-ci n'a pas été exécuté pendant une durée Te prédéfinie. </p><p id="p0024" num="0024"> Le circuit d'accélération matériel est par exemple de type ASIC. </p><p id="p0025" num="0025"> Le circuit d'accélération matériel, le cœur programmable et la mémoire communiquent par exemple les uns avec les autres à l'aide d'un bus de communication. </p><p id="p0026" num="0026">D'autres caractéristiques et avantages de l'invention apparaîtront à l'aide de la description qui suit donnée à titre illustratif et non limitatif, faite en regard des dessins annexés parmi lesquels : la figure 1 donne un exemple de système mettant en œuvre le principe d'une compilation dynamique ; 
<!-- EPO <DP n="7"/>-->
 la figure 2 est un chronogramme illustrant les améliorations en terme de temps d'exécution obtenues par le système selon l'invention ; </p><p id="p0027" num="0027"> la figure 3 donne un exemple d'architecture embarquée dans laquelle un système de compilation dynamique est utilisé ; la figure 4 présente un mode de réalisation du système de compilation dynamique selon l'invention ; </p><p id="p0028" num="0028"> la figure 5 donne un exemple de mise en œuvre d'un accélérateur matériel pour système de compilation dynamique. </p><p id="p0029" num="0029">La figure 1 donne un exemple de système mettant en œuvre le principe d'une compilation dynamique. </p><p id="p0030" num="0030"> Dans cet exemple, un flot d'instructions mémorisé dans une mémoire générale 100 est utilisé comme entrée d'un dispositif 101 mettant en œuvre la compilation dynamique de ce flux. Ce flot d'instructions correspond par exemple à une représentation intermédiaire obtenue à partir du code source d'une application donnée, au code source lui-même ou à du code machine.</p><p id="p0031" num="0031">Le dispositif de compilation dynamique 101 comprend un module d'acquisition de contexte 102 permettant de localiser l'ensemble des instructions du flot d'opérations à compiler en vue de leur exécution.</p><p id="p0032" num="0032">Lorsqu'une portion de code correspondant à une ou plusieurs instructions est identifiée pour être compilée, celle-ci est chargée et un pointeur d'exécution du code est mis à jour 103. Ce pointeur est par exemple dirigé vers l'adresse du début d'une portion de code à analyser pour éventuellement la compiler ou la recompiler. Dans la suite de la description, cette portion de code est appelée portion de code courante. </p><p id="p0033" num="0033"> Il est ensuite vérifié 104 si la portion de code acquise a déjà été traduite en code machine. Dans cet exemple, le code machine est mémorisé dans une mémoire cache 105 accessible du dispositif 101 . L'étape de vérification 104 est donc mise en œuvre en vérifiant si la portion de code 
<!-- EPO <DP n="8"/>-->
 machine correspondant à la portion de code courante 102 est présente en mémoire cache 105 peut être mise en œuvre. Il est en effet habituel de mémoriser le code machine obtenu après traduction dans une mémoire cache 105. </p><p id="p0034" num="0034"> Si la portion de code courante a déjà été traduite, l'environnement de compilation dynamique pointe 1 13 vers le code machine correspondant de manière à l'exécuter. </p><p id="p0035" num="0035"> Si la portion de code n'a pas encore été traduite, alors la portion de code courante est considérée 106 comme une portion de code à compiler. Le traitement appliqué est alors composé d'une succession d'opérations. Dans un premier temps, la portion de code courante est chargée 107 depuis la mémoire générale 100 vers une mémoire interne au système de compilation dynamique. Ensuite, la portion de code courante est décodée, c'est-à-dire qu'elle est décomposée 108 en informations de base. Cette décomposition correspond par exemple en une identification d'un ensemble d'opérations simples permettant de réaliser la ou les fonctions mises en œuvre par la portion de code courante. Ces opérations simples correspondent par exemple à des additions et des soustractions. Le décodage a également pour objectif d'identifier les données à utiliser comme entrées par ces opérations. Une fois décodé, le code est traduit 109 en code machine directement exécutable par la cible. </p><p id="p0036" num="0036"> Il est alors vérifié 1 10 si au moins une seconde portion de code intermédiaire est liée à la portion courante. Un lien est un branchement vers une autre portion du code intermédiaire mis en œuvre par exemple par un saut d'adresse. S'il existe une portion de code intermédiaire liée, les étapes 107, 108, 109, 1 10 lui sont appliquées. Sinon 1 12, le code machine résultant de la traduction d'une ou plusieurs portions de code est mémorisé 120 dans la mémoire cache 105 pour être ensuite exécuté par la cible 1 13. </p><p id="p0037" num="0037"> Une fois le code machine exécuté 1 13, le pointeur vers le flot d'instructions d'entrée est mis à jour 103 et le traitement de la prochaine portion de code est mis en œuvre. 
<!-- EPO <DP n="9"/>-->
 Le système de compilation dynamique selon l'invention comprend un accélérateur matériel mettant en œuvre un ensemble de fonctions. Cet accélérateur matériel fonctionne en parallèle avec un cœur programmable. L'utilisation combinée de ces deux éléments de traitement a notamment pour objectif d'améliorer les performances en termes d'exécution d'applications utilisant la compilation dynamique. Le système proposé permet d'obtenir des performances comparables à celles obtenues sur un processeur de type généraliste tout en satisfaisant aux contraintes de l'embarqué en termes de consommation, de performance d'exécution et de surface occupée. Avantageusement, la taille mémoire requise pour mémoriser du code machine peut être réduite. En effet, dans le système selon l'invention, le code machine peut être généré plus rapidement. Il est donc possible de libérer de la mémoire allouée aux portions de code les moins utilisées et de régénérer lesdites portions en cas de besoin. </p><p id="p0038" num="0038"> L'utilisation d'un accélérateur matériel permet d'obtenir un gain maximal en termes de temps d'exécution pour les traitements de chargement et de décodage en leur allouant des ressources dédiées spécifiquement développées dans cette optique. L'utilisation d'un cœur programmable pour la transformation en code machine permet au système d'être adaptable à différentes cibles. </p><p id="p0039" num="0039"> Dans un mode de réalisation préféré, l'ensemble de fonctions mis en œuvre par l'accélérateur matériel comprend les fonctions de chargement 107 et de décodage108. L'accélérateur matériel est un circuit dédié spécialement à ces fonctions. Cet accélérateur est par exemple un circuit de type ASIC ( Application-Specific Integrated Circuit,). </p><p id="p0040" num="0040">La figure 2 est un chronogramme illustrant les améliorations en termes de temps d'exécution obtenues par le système selon invention. </p><p id="p0041" num="0041"> Dans cet exemple, il est considéré que quatre portions de code sont traitées. Ces portions de code sont chargées et décodées puis traduites en code machine. 
<!-- EPO <DP n="10"/>-->
 Dans un système classique 200, pour chacune de ces portions de code, les opérations de chargement et de décodage d'une part puis de traduction en code machine d'autre part sont exécutées séquentiellement. Ces opérations sont habituellement mises dans œuvre par un processeur programmable. </p><p id="p0042" num="0042"> De manière simplifiée, et afin d'illustrer au mieux l'un des avantages du système selon l'invention pour ce qui concerne le temps d'exécution, il est considéré que ces deux phases prennent un temps identique T1 quelle que soit la portion de code traitée. Ainsi, pour traiter quatre portions de code, huit plages temporelles de durée T1 sont requises. </p><p id="p0043" num="0043"> Dans le cas d'un système de compilation dynamique selon l'invention 201 , l'utilisation d'un accélérateur matériel pour réaliser les opérations de chargement et de décodage 202 en parallèle avec l'utilisation d'un cœur programmable pour réaliser les opérations de traduction en code machine 203 permet de paralyser ces opérations. Ainsi, une fois que les opérations de chargement et de décodage 204 pour la première portion de code sont effectuées, l'opération de traduction 205 est réalisée par le cœur programmable. En conséquence, l'assistant matériel est disponible pendant ce temps pour réaliser les opérations de chargement et de décodage 206 pour la seconde portion de code à traiter. L'utilisation conjointe de l'assistant matériel et du cœur programmable permet ainsi de traiter quatre portions de code en un temps égal à 5χΤ1 . Ainsi, un gain de temps de 3χΤ1 est obtenu en termes de temps d'exécution. La figure 3 donne un exemple d'architecture embarquée dans laquelle un système de compilation dynamique est utilisé. </p><p id="p0044" num="0044"> Cette architecture comprend un dispositif multi-cœurs 300 comprenant</p><p id="p0045" num="0045">N cœurs utilisés pour l'exécution d'applications. En d'autres termes, le dispositif multi-cœurs 300 correspond à N cibles d'exécution. Ladite architecture comprend également une zone de mémoire permettant de stocker du code machine 302 et au moins un flot d'opérations 303 
<!-- EPO <DP n="11"/>-->
 correspondant à au moins une mémoire de programmes dédiée à la cible. De manière alternative, le code machine généré peut être envoyé dans une zone mémoire. </p><p id="p0046" num="0046"> Un système de compilation dynamique 304 est utilisé pour optimiser les performances du système. Ce système 304 est composé d'un accélérateur matériel 306 et d'un cœur programmable 307. Le cœur programmable correspond par exemple à un processeur RISC (Reduced Instruction Set Computer) et l'accélérateur hardware 306 à un circuit ASIC. </p><p id="p0047" num="0047"> Une mémoire 301 est utilisée pour mémoriser le flot d'instructions à traiter 303 et le code machine 302 exécutable par le cœur. Le flot d'instruction correspond par exemple au code source de l'application, à une représentation intermédiaire, ou à du code machine. Le flot d'instruction est composé d'une ou plusieurs portions de code. </p><p id="p0048" num="0048"> Les trois composants 300, 301 , 304 peuvent communiquer les uns avec les autres à l'aide d'un bus de communication 305. </p><p id="p0049" num="0049">La figure 4 présente un mode de réalisation du système de compilation dynamique. </p><p id="p0050" num="0050"> Le système de compilation dynamique 400 peut communiquer avec au moins une mémoire 401 et une cible 402 à l'aide d'un bus de communications 403. </p><p id="p0051" num="0051"> Le système de compilation dynamique 400 est composé d'un accélérateur matériel 404 et d'un cœur programmable 405. </p><p id="p0052" num="0052"> Dans cet exemple de mise en œuvre, le système fonctionne de la manière suivante lorsque l'exécution d'un programme associé à une application donnée est demandée. Une requête 406 est transmise au cœur programmable 405 et correspond à un ordre de compilation et/ou de recompilation d'une portion de code appartenant à une application donnée. Cette requête est par exemple générée par la cible 402. </p><p id="p0053" num="0053"> Le cœur programmable 405 émet à son tour une requête 407 à destination de l'accélérateur matériel 404. Comme décrit précédemment, 
<!-- EPO <DP n="12"/>-->
 l'accélérateur matériel 404 a pour fonction de charger le flot d'opérations à compiler et de le décoder. Pour cela, l'assistant matériel 404 comprend un module 408 permettant de réaliser ces opérations. Ce module parcourt le flot d'opération à traiter mettant en œuvre l'application à compiler. Ledit module 408 va donc accéder 409 à une zone 410 de la mémoire 401 contenant la portion de code à compiler, la charger et la décoder. Il est à noter qu'une vérification préalable peut être faite, ladite vérification visant à déterminer si la portion de code n'est pas disponible en mémoire de résultat. Cela permet d'éviter de refaire les opérations de chargement et de décodage si celles-ci ont déjà été effectuées. </p><p id="p0054" num="0054"> Le résultat obtenu est par exemple stocké dans une mémoire interne 41 1 à l'accélérateur matériel 404. Cette mémoire interne 41 1 est appelée mémoire de résultats. </p><p id="p0055" num="0055"> Lorsque que le travail de l'assistant matériel 404 est terminé pour la portion de code en cours de traitement, une requête d'acquittement 412 est envoyée au cœur programmable 405. Cette requête 412 indique au cœur programmable 405 que le résultat des opérations de chargement et de décomposition est disponible. Le cœur programmable accède 413 à ce résultat et traduit 414 en code machine directement exploitable par la cible 402 le flot d'opérations décodé. En parallèle, le cœur programmable se met en attente d'une nouvelle requête. Alternativement, il envoie une requête à l'assistant matériel 404 pour traiter la prochaine portion de code à compiler et à exécuter. Le code machine est ensuite transmis 415 et stocké 416 en mémoire 401 . Dans cet exemple, la zone de mémoire 416 est accessible aux différents éléments de l'architecture. La cible 417 peut ainsi accéder au code machine pour son exécution. </p><p id="p0056" num="0056">La figure 5 donne un exemple de mise en œuvre d'accélérateur matériel pour le système de compilation dynamique. Cet assistant matériel est composé d'une mémoire de résultats 501 et d'un module de chargement et de décomposition 502. Le module 502 est composé de trois blocs. Un 
<!-- EPO <DP n="13"/>-->
 premier bloc 503 joue le rôle de contrôleur. Un deuxième bloc 504 joue le rôle de décodeur. Un troisième bloc 505 joue le rôle d'unité de chargement de flots d'instructions. Le contrôleur 503 est en charge de la gestion des requêtes en provenance du cœur programmable. Le contrôleur reçoit les requêtes 506 de compilation et les transmet 507 au décodeur et 508 à l'unité de chargement 505. L'unité de chargement 505 a pour fonction de charger la portion de code à analyser. Pour cela il parcourt le flot d'opérations composant le programme à compiler de manière à identifier et charger au moins une portion de code. En outre, il vérifie que le flot d'opérations n'a pas déjà été chargé et décodé en mémoire de résultat 501 . Si c'est le cas, il est alors possible d'utiliser directement le code déjà décodé et de déclencher via le contrôleur 503 une requête à destination du cœur programmable pour que celui-ci procède à la traduction en code machine. Une requête mémoire 543 pour aller vérifier si la portion de code n'a pas déjà chargée et décodée peut être utilisée. Ainsi, le temps de traitement est réduit car il n'est plus nécessaire de re-décoder l'ensemble du flot d'instructions mettant en œuvre l'application. </p><p id="p0057" num="0057">Une requête mémoire 542 est utilisée pour récupérer la portion de code par exemple en utilisant un bus de communication 509. Le résultat de cette requête 541 peut être aussi acquis via le bus de communication 509. </p><p id="p0058" num="0058"> L'unité de chargement 505 transmet les instructions une à une 510 au bloc de décodage 504. </p><p id="p0059" num="0059"> Lorsqu'une instruction a été décodée, le résultat est envoyé 51 1 et stocké dans la mémoire de résultats 501 . L'instruction décodée peut être également envoyée 512 à l'unité de chargement 505 afin de l'assister dans son parcours du flot d'instructions. Cette information peut être également utilisée lorsque l'ensemble des instructions de la portion de code a été décodé pour informer le contrôleur 503 que l'analyse est terminée et qu'une requête de retour 520 peut être envoyée au cœur programmable via le contrôleur 505 et une requête d'acquittement 540. 
<!-- EPO <DP n="14"/>-->
 Dans un autre mode de réalisation, il est également possible de transmettre 530 la sortie du décodeur 504 à la cible pour une exécution à la volée. Cela est possible à la condition que le décodeur soit choisi tel qu'il puisse fournir directement des instructions de code machine à la cible et donc que l'utilisation d'un cœur programmable pour la traduction ne soit pas requise. 
</p></description><claims mxw-id="PCLM70077928" ref-ucid="WO-2014128153-A1" lang="FR" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="15"/>--><claim-text/><claim-text>REVENDICATIONS </claim-text><claim-text>Système de compilation (304, 400, 500) d'au moins un flot d'instructions (303, 410) pour son exécution sur un circuit cible (300) comprenant : </claim-text><claim-text> • un circuit d'accélération matériel (306, 404, 502) réalisant les fonctions de chargement d'un ensemble d'au moins une portion dudit flot vers une mémoire interne audit circuit et de décodage dudit ensemble ; </claim-text><claim-text> • les instructions résultant du chargement et du décodage étant transmises à un cœur programmable (307, 405, 503) fonctionnant en parallèle du circuit d'accélération matériel, ledit cœur programmable (307, 405, 503) réalisant la transcription des instructions décodées en un code machine adapté pour être exécuté sur le circuit cible (300). </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est une représentation intermédiaire préalablement obtenue à partir du code source d'une application à exécuter. </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est le code source d'une application à exécuter. </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est le code machine d'une application à adapter ou optimiser pour un circuit cible donné. </claim-text><claim-text>Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel (306, 404, 502) sélectionne une portion du flot d'instruction (303, 410), vérifie si cette portion a déjà été traduite en code machine, si c'est le cas ladite portion n'étant pas 
<!-- EPO <DP n="16"/>-->
 chargée par le circuit d'accélération matériel, une autre portion étant alors sélectionnée, la vérification de l'existence d'une traduction antérieure d'une portion de code machine s'effectuant par comparaison de l'adresse de la portion à charger par rapport aux adresses des portions traduites contenues dans la mémoire de résultat. </claim-text><claim-text>6- Système selon l'une des revendications précédentes dans lequel le décodage d'une portion de code correspond à une décomposition en un ensemble d'opérations simples. </claim-text><claim-text>7- Système selon l'une des revendications précédentes dans lequel le code machine généré (416) est transmis à une mémoire (301 , 401 ) pour être stocké. </claim-text><claim-text>8- Système selon la revendication 6 dans lequel la mémoire de résultat (41 1 , 501 ) du code chargé et décodé est interne au système. 9- Système selon l'une des revendications 7 ou 8 comprenant un mécanisme déterminant la durée pendant laquelle un code machine correspondant à une portion de code compilée auparavant par le système de compilation dynamique n'a pas été exécutée, la mémoire (301 , 401 ) utilisée pour stocker ce code machine étant libérée si celui- ci n'a pas été exécuté pendant une durée Te prédéfinie. </claim-text><claim-text>10-Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel est de type ASIC. 1 1 - Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel (306, 404, 502), le cœur programmable (307, 405, 503) et la mémoire (401 ) communiquent les uns avec les autres à l'aide d'un bus de communication (305, 403, 509). 
</claim-text></claim></claims><amended-claims mxw-id="PCLM70077927" ref-ucid="WO-2014128153-A1" lang="FR" load-source="patent-office" amended-claim-type=""><claim id="amd-clm-0001" num="0001"><!-- EPO <DP n="17"/>--><claim-text> REVENDICATIONS MODIFIÉES reçues par le Bureau international le 3 juillet 2014 (3.07.14) </claim-text><claim-text>Système de compilation (304, 400) d'au moins un flot d'instructions (303, 4 0) pour son exécution sur un circuit cible (300) comprenant :</claim-text><claim-text>• un circuit d'accélération matériel (306, 404) réalisant les fonctions de chargement d'un ensemble d'au moins une portion dudit flot vers une mémoire interne audit circuit et de décodage dudit ensemble ; </claim-text><claim-text> • un cœur programmable (307, 405), les instructions résultant du chargement et du décodage étant transmises audit c ur programmable (307, 405) fonctionnant en parallèle du circuit d'accélération matériel, ledit cœur programmable (307, 405) réalisant la transcription des instructions décodées en un code machine adapté pour être exécuté sur le circuit cible (300). </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est une représentation intermédiaire préalablement obtenue à partir du code source d'une application à exécuter. </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est le code source d'une application à exécuter. </claim-text><claim-text>Système selon la revendication 1 dans lequel le flot d'instruction est le code machine d'une application à adapter ou optimiser pour un circuit cible donné. </claim-text><claim-text>Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel (306, 404, 502) sélectionne une portion du flot d'instruction (303, 410), vérifie si cette portion a déjà été traduite en code machine, si c'est le cas ladite portion n'étant pas chargée par le circuit d'accélération matériel, une autre portion étant 
<!-- EPO <DP n="18"/>-->
 alors sélectionnée, la vérification de l'existence d'une traduction antérieure d'une portion de code machine s'effectuant par comparaison de l'adresse de la portion à charger par rapport aux adresses des portions traduites contenues dans une mémoire de résultat (4 1 ) interne au circuit d'accélération matériel (400). </claim-text><claim-text>6- Système selon l'une des revendications précédentes dans lequel le décodage d'une portion de code correspond à une décomposition en un ensemble d'opérations simples. </claim-text><claim-text>7- Système selon l'une des revendications précédentes dans lequel le code machine généré (416) est transmis à une mémoire (301 , 401 ) externe au système de compilation pour être stocké. 8- Système selon la revendication 6 dans lequel la mémoire de résultat (411 , 501 ) du code chargé et décodé est interne au système. </claim-text><claim-text>9- Système selon l'une des revendications 7 ou 8 comprenant un mécanisme déterminant la durée pendant laquelle un code machine correspondant à une portion de code compilée auparavant par le système de compilation dynamique n'a pas été exécutée, la mémoire (301 , 401 ) utilisée pour stocker ce code machine étant libérée si celui- ci n'a pas été exécuté pendant une durée Te prédéfinie. </claim-text><claim-text>10- Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel est de type ASIC. </claim-text><claim-text>11- Système selon l'une des revendications précédentes dans lequel le circuit d'accélération matériel (306, 404, 502), le cœur programmable</claim-text><claim-text>(307, 405, 503) et la mémoire (401 ) communiquent les uns avec les autres à l'aide d'un bus de communication (305, 403, 509). 
</claim-text></claim></amended-claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
