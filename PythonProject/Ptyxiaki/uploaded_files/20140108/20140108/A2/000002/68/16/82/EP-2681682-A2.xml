<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681682-A2" country="EP" doc-number="2681682" kind="A2" date="20140108" family-id="46758448" file-reference-id="318301" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586124" ucid="EP-2681682-A2"><document-id><country>EP</country><doc-number>2681682</doc-number><kind>A2</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12752002-A" is-representative="NO"><document-id mxw-id="PAPP154848316" load-source="docdb" format="epo"><country>EP</country><doc-number>12752002</doc-number><kind>A</kind><date>20120228</date><lang>EN</lang></document-id><document-id mxw-id="PAPP199048057" load-source="docdb" format="original"><country>EP</country><doc-number>12752002.1</doc-number><date>20120228</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140547890" ucid="US-201161447163-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161447163</doc-number><kind>P</kind><date>20110228</date></document-id></priority-claim><priority-claim mxw-id="PPC140557405" ucid="US-2012026873-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026873</doc-number><kind>W</kind><date>20120228</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1937873414" load-source="docdb">F02D  35/02        20060101ALI20160506BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1937873823" load-source="docdb">F02D  41/14        20060101AFI20160506BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1937876332" load-source="docdb">F02D  41/40        20060101ALN20160506BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1919307072" load-source="docdb" scheme="CPC">F02D  41/30        20130101 LI20160714BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1919308536" load-source="docdb" scheme="CPC">F02D  41/1467      20130101 FI20160714BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1919313790" load-source="docdb" scheme="CPC">F02D  35/023       20130101 LI20160714BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1944043745" load-source="docdb" scheme="CPC">F02D  41/40        20130101 LA20160503BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1944049455" load-source="docdb" scheme="CPC">F02D  41/005       20130101 LA20160503BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962108323" load-source="docdb" scheme="CPC">F02D  35/021       20130101 LI20160307BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962108574" load-source="docdb" scheme="CPC">F02D  41/1466      20130101 LI20160305BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962108896" load-source="docdb" scheme="CPC">F02D  41/1497      20130101 LA20160307BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363005" lang="DE" load-source="patent-office">VERWENDUNG EINES IONENSTROMSIGNALS FÜR RUSS UND ZYLINDERINTERNE DIREKTE MESSTECHNIKEN IN VERBRENNUNGSMOTOREN SOWIE VERFAHREN ZU IHRER ANWENDUNG</invention-title><invention-title mxw-id="PT132363006" lang="EN" load-source="patent-office">USING ION CURRENT SIGNAL FOR SOOT AND IN-CYLINDER VARIABLE MEASURING TECHNIQUES IN INTERNAL COMBUSTION ENGINES AND METHODS FOR DOING THE SAME</invention-title><invention-title mxw-id="PT132363007" lang="FR" load-source="patent-office">UTILISATION D'UN SIGNAL DE COURANT IONIQUE POUR DES TECHNIQUES DE MESURE DE SUIE ET D'AUTRES VARIABLES À L'INTÉRIEUR D'UN CYLINDRE DANS DES MOTEURS À COMBUSTION INTERNE ET PROCÉDÉS DE RÉALISATION</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919520958" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>UNIV WAYNE STATE</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919545927" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WAYNE STATE UNIVERSITY</last-name></addressbook></applicant><applicant mxw-id="PPAR919014129" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Wayne State University</last-name><iid>101199486</iid><address><street>656 West Kirby</street><city>Detroit, MI 48202</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919515260" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ESTEFANOUS FADI A</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919506331" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ESTEFANOUS, Fadi, A.</last-name></addressbook></inventor><inventor mxw-id="PPAR919010010" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ESTEFANOUS, Fadi, A.</last-name><address><street>29440 Apolonia Dr.</street><city>Warren, MI 48092</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919516973" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>BADAWY TAMER H</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919544365" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>BADAWY, Tamer, H.</last-name></addressbook></inventor><inventor mxw-id="PPAR919009373" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>BADAWY, Tamer, H.</last-name><address><street>665 W. Warren Ave. Apt. 306</street><city>Detroit, MI 48201</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919531632" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>HENEIN NAEIM A</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919505917" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>HENEIN, NAEIM, A.</last-name></addressbook></inventor><inventor mxw-id="PPAR919018413" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>HENEIN, NAEIM, A.</last-name><address><street>428 Maison Dr.</street><city>Grosse Pointe Farms, MI 48236</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919006997" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Garratt, Peter Douglas</last-name><iid>100020166</iid><address><street>Mathys &amp; Squire LLP 120 Holborn</street><city>London EC1N 2SQ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026873-W"><document-id><country>US</country><doc-number>2012026873</doc-number><kind>W</kind><date>20120228</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118781-A2"><document-id><country>WO</country><doc-number>2012118781</doc-number><kind>A2</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549833480" load-source="docdb">AL</country><country mxw-id="DS549845131" load-source="docdb">AT</country><country mxw-id="DS549833481" load-source="docdb">BE</country><country mxw-id="DS549757242" load-source="docdb">BG</country><country mxw-id="DS549756630" load-source="docdb">CH</country><country mxw-id="DS549834384" load-source="docdb">CY</country><country mxw-id="DS549845132" load-source="docdb">CZ</country><country mxw-id="DS549833486" load-source="docdb">DE</country><country mxw-id="DS549834385" load-source="docdb">DK</country><country mxw-id="DS549834390" load-source="docdb">EE</country><country mxw-id="DS549913395" load-source="docdb">ES</country><country mxw-id="DS549833242" load-source="docdb">FI</country><country mxw-id="DS549757243" load-source="docdb">FR</country><country mxw-id="DS549833487" load-source="docdb">GB</country><country mxw-id="DS549834391" load-source="docdb">GR</country><country mxw-id="DS549833488" load-source="docdb">HR</country><country mxw-id="DS549845133" load-source="docdb">HU</country><country mxw-id="DS549756631" load-source="docdb">IE</country><country mxw-id="DS549834392" load-source="docdb">IS</country><country mxw-id="DS549757244" load-source="docdb">IT</country><country mxw-id="DS549834393" load-source="docdb">LI</country><country mxw-id="DS549833243" load-source="docdb">LT</country><country mxw-id="DS549764672" load-source="docdb">LU</country><country mxw-id="DS549833244" load-source="docdb">LV</country><country mxw-id="DS549833245" load-source="docdb">MC</country><country mxw-id="DS549764681" load-source="docdb">MK</country><country mxw-id="DS549764682" load-source="docdb">MT</country><country mxw-id="DS549757257" load-source="docdb">NL</country><country mxw-id="DS549913396" load-source="docdb">NO</country><country mxw-id="DS549756632" load-source="docdb">PL</country><country mxw-id="DS549764683" load-source="docdb">PT</country><country mxw-id="DS549757258" load-source="docdb">RO</country><country mxw-id="DS549764684" load-source="docdb">RS</country><country mxw-id="DS549756641" load-source="docdb">SE</country><country mxw-id="DS549845138" load-source="docdb">SI</country><country mxw-id="DS549913397" load-source="docdb">SK</country><country mxw-id="DS549756642" load-source="docdb">SM</country><country mxw-id="DS549833254" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99831458" ref-ucid="WO-2012118781-A2" lang="EN" load-source="patent-office"><p num="0000">A system and method is provided for the use of the ion current signal characteristics for onboard cycle-by-cycle, cylinder-by-cylinder measurement, for example soot measurement, load measurement such as indicated or brake mean effective pressure, or fuel consumption measurement in an internal combustion engine. The system may acquire an ion current signal, measures one or more of soot, load, fuel consumption and may control the engine operating parameters accordingly.</p></abstract><abstract mxw-id="PA100328281" ref-ucid="WO-2012118781-A2" lang="EN" source="national office" load-source="docdb"><p>A system and method is provided for the use of the ion current signal characteristics for onboard cycle-by-cycle, cylinder-by-cylinder measurement, for example soot measurement, load measurement such as indicated or brake mean effective pressure, or fuel consumption measurement in an internal combustion engine. The system may acquire an ion current signal, measures one or more of soot, load, fuel consumption and may control the engine operating parameters accordingly.</p></abstract><abstract mxw-id="PA99831459" ref-ucid="WO-2012118781-A2" lang="FR" load-source="patent-office"><p num="0000">L'invention concerne un système et un procédé permettant l'utilisation des caractéristiques d'un signal de courant ionique pour une mesure cylindre par cylindre, cycle par cycle embarquée, par exemple une mesure de suie, une mesure de charge comme la pression moyenne effective sur frein ou la pression moyenne effective indiquée, ou une mesure de la consommation de carburant dans un moteur à combustion interne. Le système peut acquérir un signal de courant ionique, mesurer un ou plusieurs éléments parmi les éléments suivants : suie, charge et consommation de carburant, et commander les paramètres de fonctionnement du moteur en conséquence.</p></abstract><abstract mxw-id="PA100328282" ref-ucid="WO-2012118781-A2" lang="FR" source="national office" load-source="docdb"><p>L'invention concerne un système et un procédé permettant l'utilisation des caractéristiques d'un signal de courant ionique pour une mesure cylindre par cylindre, cycle par cycle embarquée, par exemple une mesure de suie, une mesure de charge comme la pression moyenne effective sur frein ou la pression moyenne effective indiquée, ou une mesure de la consommation de carburant dans un moteur à combustion interne. Le système peut acquérir un signal de courant ionique, mesurer un ou plusieurs éléments parmi les éléments suivants : suie, charge et consommation de carburant, et commander les paramètres de fonctionnement du moteur en conséquence.</p></abstract><description mxw-id="PDES51232595" ref-ucid="WO-2012118781-A2" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> USING ION CURRENT SIGNAL FOR SOOT AND IN-CYLINDER VARIABLE MEASURING TECHNIQUES IN INTERNAL COMBUSTION ENGINES AND METHODS FOR DOING THE SAME</p><p id="p0002" num="0002">BACKGROUND </p><p id="p0003" num="0003"> 1 . Field of the Invention </p><p id="p0004" num="0004">[0001] The present application relates to the use of the characteristics of an ion current sensor signal for onboard measurement of in-cylinder variables such as but not limited to soot, engine load, and fuel consumption, and for the control of different engine parameters accordingly. </p><p id="p0005" num="0005">2. Description of Related Art </p><p id="p0006" num="0006">[0002] One existing technology in quantitative soot measurement utilizes laser techniques in optically accessible engines. These techniques are used in research facilities only and cannot be applied in commercial engines. Another existing technology uses sampling techniques which require very expensive instrumentation and can also only be applied in research labs. Other technologies have provided some results for soot measurement where a sensor is located in the exhaust pipe or within after treatment devices. The problem of this type of sensors is the slow access to the soot measurement data. Furthermore, this type of sensors is unable to predict the amount of soot attributable to each engine cylinder accurately. This brings us to the conclusion that there is no in-cylinder, low cost technology that is capable of quantitatively and adequately predict the amount of soot produced in commercial engines. 
<!-- EPO <DP n="4"/>-->
 [0003] As of engine load and fuel flow, there are several methods for which these parameters can be measured, each with their own advantages, disadvantages and applications. One method is to use the engine speed density. The method involves a manifold absolute pressure sensor (MAP) and intake air temperature. Speed density systems are very sensitive to temperature changes which affect load and fuel calculations. </p><p id="p0007" num="0007">SUMMARY </p><p id="p0008" num="0008"> [0004] A system and method is provided for an onboard in-cylinder soot measurement in an internal combustion engine. The system can be further used in controlling the engine based on a feedback signal from the soot measured. The system acquires an ion current signal and controls the engine operating parameters based on the characteristics of the ion current signal. </p><p id="p0009" num="0009"> [0005] Throughout the application examples will be provided with regard to soot, load, and fuel consumption measurements, however, these principles can be applied to other in-cylinder variables as well and such applications are contemplated herein. </p><p id="p0010" num="0010">[0006] A system and method is provided for onboard engine load such as IMEP (Indicated Mean Effective Pressure), BMEP (Brake Mean Effective Pressure) and fuel consumption (FC) measurement in internal combustion engine based on an acquired ion current signal. ISFC (Indicated Specific Fuel Consumption) and BSFC (Brake Specific Fuel Consumption) can be calculated from the measurements mentioned 
<!-- EPO <DP n="5"/>-->
 above. The system can be further used in controlling the engine based on a feedback signal obtained from the measured engine load fuel consumption. </p><p id="p0011" num="0011">[0007] The new technique gives the ion-current sensor, located inside the engine cylinder, the ability to detect and accurately measure the amount of soot (black smoke), and mean effective pressure produced from the combustion process on a cyclic basis. Fuel consumption (FC) is also measured on a cylinder-by-cylinder and cycle-by-cycle basis using the ion current signal. This fast response measuring technique can be applied in all engine cylinders in order to provide an onboard feedback signal to the contribution of each cylinder to soot formation, produced power, and fuel consumed. </p><p id="p0012" num="0012">[0008] The system offers a new cost effective and simple technique to measure soot, load, and fuel consumption (FC) inside the combustion chamber using the ion- current signal. The system also provides a fast cycle-by-cycle soot prediction technique to accommodate the engine transient operation. The feedback signal is sent to the engine ECU for better engine control, thereby producing less soot to comply with the EPA stringent emissions rules with no modification to the engine. </p><p id="p0013" num="0013">[0009] The system is cost effective as the sensor involved is the ion sensor. The system provides a fast response soot, load, and fuel consumption (FC) measuring technique, as it depends on electron speed. The system is able to measure the disclosed parameters inside the combustion chamber and on a cycle-by-cycle basis. Further, the system is able to measure soot, load, fuel consumption (FC) in every engine cylinder with no modifications required to the engine block. Accordingly, the system is well suited as an on-board tool for soot, load, and fuel consumption (FC) 
<!-- EPO <DP n="6"/>-->
 measurement and provides an efficient, compact design for integration in production models. </p><p id="p0014" num="0014"> [0010] Further objects, features and advantages of this application will become readily apparent to persons skilled in the art after a review of the following description, with reference to the drawings and claims that are appended to and form a part of this specification. </p><p id="p0015" num="0015">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0016" num="0016"> [0011] Aspects of this application will be described by way of examples with reference to the accompanying drawings. They serve to illustrate several aspects of the present application, and together with the description provide explanation of the system principles. In the drawings: </p><p id="p0017" num="0017"> [0012] FIG. 1 is an engine system for controlling engine operating parameters based on ion sensor signal characteristics; </p><p id="p0018" num="0018"> [0013] FIG. 2 is a graph illustrating the ion current and pressure for diesel engine at constant engine load with varying injection pressure; </p><p id="p0019" num="0019"> [0014] FIG. 3 illustrate the analysis of the ion current signal; </p><p id="p0020" num="0020"> [0015] FIG. 4A-C are graphs illustrating the comparison between the measured soot, load and fuel consumption in the engine and the predicted soot, load and fuel consumption based on the analysis of the ion current signal using a full accessed open engine control unit; 
<!-- EPO <DP n="7"/>-->
 [0016] FIG. 5 is a graph illustrating the measured soot in the engine and the predicted soot based on the algorithm used in a closed engine control unit calibrated to emission standards; </p><p id="p0021" num="0021"> [0017] FIG. 6 is a schematic view of an experimental engine layout used to collect the data in the previous graphs and determine the analysis algorithm; </p><p id="p0022" num="0022"> [0018] FIG. 7A-C show a flow charts of a calibration procedure to predict the amount of soot, load, or fuel consumption based on the ion current signal; and </p><p id="p0023" num="0023"> [0019] FIG. 8 is a flow chart of a method for controlling the engine based on the ion current signal characteristics. </p><p id="p0024" num="0024">DETAILED DESCRIPTION </p><p id="p0025" num="0025"> [0020] Now referring to FIG. 1 , a schematic view of a diesel engine 1 10 is provided. For illustrative purposes the schematic shows a single cylinder of an engine, however, it is readily understood that multiple cylinders may be used in combination to form the engine. The cylinder 1 12 houses piston 1 14 allowing for reciprocating motion of the piston 1 14 within the cylinder 1 12. The combustion chamber 1 16 is formed by the cylinder houses 1 12, the piston 1 14, and the cylinder head 1 15. Air, a mixture of air and exhaust gases, or other mixtures of any fluid may be provided into the chamber 1 16 through an intake manifold 1 18. The flow of air or mixtures made through the intake manifold 1 18 may be controlled by intake valve 120. Fuel may be provided into the chamber by a fuel injector 122. A glow plug 124 may be used to facilitate the ignition of the fuel inside the combustion chamber 1 16 causing reciprocating motion of 
<!-- EPO <DP n="8"/>-->
 the piston 1 14. After combustion, the exhaust gases in the chamber may be released through the exhaust manifold 126. Further, the flow of exhaust may be controlled by an exhaust valve 128 located within the exhaust manifold 126. As may be readily understood, combustion in the chamber 1 16 causes the piston 1 14 to move downward causing rotation of the crankshaft 130. The inertia of a flywheel or combustion in other chambers will cause the crankshaft 130 to rotate further thereby causing a reciprocating motion of the piston 1 14 upward. The glow plug 124 can be turned on by the ECU 150 through an electrical command 154. The glow plug 124 may also include a sensor 132 to monitor activity within the combustion chamber 1 16 during the entire cycle of the engine. The sensor 132 includes an ion current sensor, a pressure sensor, an optical sensor, or any combination of the above. These sensors may be standalone or integrated with the glow plug or the fuel injector 122. In case of spark ignition (SI) engines, the ion current sensor can be integrated with a spark plug. The sensor signal 134 may be provided to a combustion module 140. The combustion module 140 includes an acquisition module 142 for acquiring the combustion signal and amplifier 144 for enhancing the combustion signal and a signal analysis module 146 to determine certain combustion characteristics based on the enhanced combustion signal. The combustion parameters 148 are then provided to an engine control module 150. The engine control module 150 may then analyze the combustion parameters and control engine operation parameters based on the combustion parameters. In one implementation, the ion current signal may be used to control the engine operating parameters. 
<!-- EPO <DP n="9"/>-->
 [0021] The engine control unit 150 includes a combustion controller 152, a fuel delivery controller 156 and other engine controllers 158. The combustion controller 152 may act as a master module that provides a control signal to different engine components such as the glow plug 124 heater, the fuel delivery system 162, or the injector 122. The fuel delivery controller 156 provides a fuel delivery control signal 160 to an engine fuel delivery system 162. The engine fuel delivery system controls the delivery of fuel to the injector 122. The fuel from the tank 166 is delivered by the fuel pump 164 to the fuel delivery system 162. The fuel delivery system 162 distributes the supplied fuel based on a signal 160 from the ECU 150. The fuel is further supplied to the injector 122 through a fuel line 168. In addition, the fuel delivery controller 156 is in communication electronically with the fuel injector 122 to control different injection parameters such as number of injection events, injection duration and timing as noted by line 170. In addition, the other engine controllers 158 control other engine parameters such as engine speed, load, amount of exhaust gas recirculation, variable geometry turbocharger, or other units installed to the engine. Further, an output sensor 180 may be in communication with the crankshaft 130 to measure crank shaft position, and engine speed, torque of the crankshaft, or vibration of the crank shaft, and provide the feedback signal to the engine control unit 150 as denoted by line 182. </p><p id="p0026" num="0026">[0022] Referring to FIG. 2, a graph is provided of the pressure and corresponding ion current. The graph was derived from preliminary tests done on a heavy duty diesel engine where the ion current, pressure, and soot in-exhaust were measured at different injection pressure while load is kept constant. The engine was controlled using a full 
<!-- EPO <DP n="10"/>-->
 accessed open engine control unit (ECU), where engine parameters such as injection timing, injection pressure, intake pressure, and engine speed were controlled. In this specific test, the graph of the ion current and in-cylinder pressure is provided for a constant 1 1 bar IMEP load. The injection pressure was varied from 400 bar to 1000 bar in steps. Line 310 is the ion current signal at an injection pressure of 400 bar, while line 320 is the in cylinder pressure at an injection pressure of 400 bar. Line 312 is the ion current and injection pressure of 700 bar, while line 322 is the cylinder pressure at an injection pressure of 700 bar. Finally, line 314 is the ion current signal at an injection pressure of 1000 bar and line 324 is the in cylinder pressure at the injection pressure of 1000 bar. The changes in the injection pressure significantly affect the ion current signal characteristics. Additionally, the amount of soot in the exhaust is measured for each of the cycles described above. As denoted by arrow 330, the soot increases as the injection pressure decreases. Further, the increase in soot as denoted by arrow 330 corresponds closely to the change in the ion current signal 310, 312, and 314. For example, the ion current signal 310 at 400 bar injection pressure provides more soot in the exhaust than the ion current signal 314 at an injection pressure of 1000 bar. </p><p id="p0027" num="0027">[0023] Now referring to FIG. 3, a graph of the pressure trace 424, rate of heat release 422, needle lift signal 420, and ion current signal 426 is provided. Ion current signal parameters are shown in the graph to illustrate an algorithm to control engine operating parameters and indicate in-cylinder variables such as but not limited to amount of soot, engine load, and/or fuel consumption based on the ion current signal. As examples of the parameters deduced from the ion current signal, the start of ion 
<!-- EPO <DP n="11"/>-->
 current signal (SIC) timing, which may be accomplished by various thresholding techniques, the ion current slope (mi , m<sub>2</sub> , m<sub>3</sub>, m ), where mi refers to the rate of ion current rise, m<sub>2</sub> is the rate of ion current decay, m<sub>3</sub> is the rate of the second peak decay, and m is the rate of the ion current second peak rise. More slopes may be added depending on the number of peaks of each cycle-to-cycle ion current signal. The slope may be determined as the slope at which the ion current signal crosses an ion current threshold or may be the slope of the ion current signal at a specific position in degrees of the cycle. In some implementations, the slope may be determined at an offset position relative to an event such as the beginning of the ion current signal, the beginning of an ignition event, or some other characteristic marker of the cycle of the cylinder in which the ion current is measured. Further, the slope may be an instantaneous slope or may be an average slope, for example over a few degrees. The ion current delay (ICD) is another ion current parameter which is determined by a reference point which can be but not limited to the SOI (Start of Injection) (for example, as sensed by ECU) or the TDC (Top Dead Center) (for example, as sensed by the cam shaft sensor).. Another parameter is the ion current amplitude ( , l<sub>2</sub>, l<sub>3</sub>, I<sub>n</sub> in case of different peaks) for example, the first peak and second peak l<sub>2</sub> . The difference between two consecutive amplitudes (Di , D<sub>n</sub> in case of different peaks). The ion current peak to peak distance (Pi , ... , P<sub>n</sub> in case of many peaks). The end of ion current signal timing (EOI), which may be accomplished by various thresholding techniques, and the total area under the curve (Ar) of the ion current signal, the area under the first bump (An), and the area under the second bump (Ar<sub>2</sub>), and (Ar<sub>n</sub>) for the area under the 
<!-- EPO <DP n="12"/>-->
 bump n. Other parameters may be derived and will become readily apparent to persons skilled in the art </p><p id="p0028" num="0028"> [0024] In one example, the relationship used to come up with measured parameters may be expressed as predicted parameter (SOOT, IMEP, BMEP, FC) = (Ai , A<sub>2</sub>, A<sub>3</sub>, A<sub>4</sub>) <sup>*</sup> Fn (SOI) + (Bi , B<sub>2</sub>, B<sub>3</sub>, B<sub>4</sub>) <sup>*</sup> Fn (m) + (Ci , C<sub>2</sub>, C<sub>3</sub>, C<sub>4</sub>) <sup>*</sup> Fn (I) + (Li ,..,L<sub>4</sub>) <sup>*</sup> Fn (P) + (Ei ,..,E<sub>4</sub>) <sup>*</sup> Fn (ICD)+ (Fi ,..,F ) <sup>*</sup> Fn (Ar) + (Hi ,..,H<sub>4</sub>) <sup>*</sup> Fn (EOI) + (K^.,^) <sup>*</sup> Fn(D) + (Yi ,..,Y<sub>4</sub>) <sup>*</sup> Fn (SOI,m) + (Xi , ... ,X<sub>4</sub>) <sup>*</sup> Fn (SOI, m, I) + ... etc. While the forgoing equation is exemplary, additional variables may be readily introduced. Such variables may include peak to peak, peak to end, peak to start, peak to start of injection, peak to top dead center, peak to end of injection, peak to start of combustion, peak amplitudes for each peak, and each of those variable may have their own weighting as indicated above. Each weighting factor A<sub>n</sub>, B<sub>n</sub>, C<sub>n</sub>, , E<sub>n</sub>, F<sub>n</sub>, H<sub>n</sub>, K<sub>n</sub>, ,Y<sub>n</sub>, and X<sub>n</sub> may be different based on the in-cylinder variable being measured. Hence, Ai , Bi , Ci , Xi may be used for soot, while A<sub>2</sub>, B<sub>2</sub>, C<sub>2</sub>, ,X<sub>2</sub> may be used for IMEP as illustrated in Table 1 . In addition, weighting factors such as A<sub>n</sub>, B<sub>n</sub>, C<sub>n</sub>, , E<sub>n</sub>, F<sub>n</sub>, H<sub>n</sub>, K<sub>n</sub> , Y<sub>n</sub>, , X<sub>n</sub> may constants or may vary according to a look up table based on other parameters such as ion current sensor location inside the combustion chamber. Further, it is anticipated that other relationship functions may be developed including linear, quadratic, root, trigonometric, exponential or logarithmic components or any combination thereof. Also note that the correlation between the constants mentioned above and the predicted parameters can be expressed as follows: 
<!-- EPO <DP n="13"/>-->
 TABLE 1 </p><p id="p0029" num="0029"><img id="imgf000013_0001" he="51" wi="171" file="imgf000013_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="yes"/></p><p id="p0030" num="0030"> [0025] In one particular example in accordance with the general equation provided above, soot could be predicted according to a function: </p><p id="p0031" num="0031"> soot = AO + A1 (Pari ) + A2(Par2) + A3(Par3) + A4(Par4) + A5(Par1 <sup>*</sup>Par2) + A6(Par1 <sup>*</sup>Par3) + A7(Par1 <sup>*</sup>Par4) + A8(Par2<sup>*</sup>Par3) + A9(Par2<sup>*</sup>Par4) + </p><p id="p0032" num="0032"> A10(Par1 <sup>*</sup>Par2<sup>*</sup>Par3) + A1 1 (Pari <sup>*</sup>Par3<sup>*</sup>Par4)+ A12( Pari <sup>Λ</sup>2<sup>*</sup> Par2<sup>A</sup>2<sup>*</sup> </p><p id="p0033" num="0033"> Par3<sup>A</sup>2<sup>*</sup>Par4<sup>A</sup>2) </p><p id="p0034" num="0034"> where (Par) stands for an ion current parameter and (A) is a coefficient or weighting. </p><p id="p0035" num="0035"> [0026] Now referring to FIG. 4A, this graph illustrates an engine transient operation at a constant injection pressure where load, intake manifold absolute pressure (MAP), and engine speed vary. As such, the graph represents a comparison between the soot measured in the engine exhaust and the soot predicted by the new technique depending on the function mentioned above. Line 510 represents the measured soot percentage while line 512 represents the expected soot percentage calculated by the algorithm according to the ion current signal. Line 514 represents the speed of the engine. Line 516 represents the intake manifold absolute pressure (MAP) and line 518 is the load of the engine. 
<!-- EPO <DP n="14"/>-->
 [0027] From the graph, it is clear that a good correlation between the measured soot and the predicted soot is achieved. The test was conducted based on a transient engine operating condition where engine speed and load were varying. The engine was operated in transient test via an open ECU. The engine speed varied between 1 150 and 2000 RPM, load varied between 70 and 220 Nm, injection pressure was kept constant at 400 bar, the engine intake pressure (MAP) varied between 1 and 1.3 bar due to an activated VGT (Variable Geometry Turbocharger). </p><p id="p0036" num="0036"> [0028] Now referring to FIG. 4B, this graph illustrates an engine transient operation at various loads, injection pressures, intake pressures, speeds, EGR. As such, the graph represents a comparison between the IMEP (Indicated Mean Effective Pressure) 510 measured in the engine cylinder and the predicted IMEP 512 by the new technique depending on the ion current signal parameters mentioned above. From the graph, it is clear that a good correlation between the measured IMEP and the predicted IMEP is achieved. </p><p id="p0037" num="0037"> [0029] Now referring to FIG. 4C, this graph illustrates an engine transient operation at various loads, injection pressures, intake pressures, speeds, EGR. As such, the graph represents a comparison between the fuel consumption 514 measured for one engine cylinder and the predicted fuel consumption 516 by the new technique depending on the ion current signal parameters mentioned above. From the graph, it is clear that a good correlation between the measured and the predicted fuel consumption is achieved. 
<!-- EPO <DP n="15"/>-->
 [0030] FIG. 5 is a graph of the measured soot and the predicted soot as the engine operating parameters are varied for an engine manufacturer control unit that is closed and calibrated to meet emissions specifications. Line 610 is the predicted soot percentage from the ion current while line 612 is the measured soot percentage in the exhaust port of the engine. </p><p id="p0038" num="0038"> [0031] The original manufacturer ECU used for this test was calibrated by the manufacturer to produce soot emissions within the EPA standards. The test was developed to see if the predicted soot using the new technique is sensitive enough to capture the very low soot levels emitted. The engine speed was kept constant at 1800 RPM, load (IMEP) varied between 12 and 18 bar, injection pressure varied between 950 and 1 150 bar, and intake pressure (MAP) varied between 2.4 and 2.8 bar. The results showed a good match between the measured and predicted soot ranging between 0.05% and 0.6%. The ability to capture the very low soot levels reflects high accuracy and high sensitivity of the described technique. </p><p id="p0039" num="0039"> [0032] Now referring to FIG. 6, a system is provided for determining the calibration between the ion current signal and the measured soot percentage in the exhaust. The system shown in the figure also determines the calibration between the ion current signal and the measured engine load, and fuel consumption. The experiments in figure 1 , 2, 4, 5, and 6 were conducted on a multi-cylinder John Deere diesel engine. The engine is equipped with a common rail injection system and variable geometry turbocharger. The engine specifications are shown in Table 2. 
<!-- EPO <DP n="16"/>-->
 Table 2 </p><p id="p0040" num="0040"><img id="imgf000016_0001" he="27" wi="76" file="imgf000016_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0041" num="0041">[0033] The engine system 700 includes an engine 710 with four cylinders 712. Pistons reciprocate in the cylinders 712 to drive the crankshaft 716. The crankshaft 716 may be connected to a dynamometer 718. The dynamometer provides a load signal 720 to a processor 714 for combustion analyzing and data recording. Fuel is provided to the engine through a fuel rail 722, pressure may be monitored in the fuel rail by a fuel sensor which may provide a fuel pressure signal 724 to the processor 714. The fuel may be provided from the fuel rail 722 to the cylinder 712 through a fuel line 726. The fuel may be provided through a fuel needle 728. As such a needle lift signal 730 may be provided to the processor 714 for further analysis in conjunction with the other engine operating parameters. Further, a fuel flow meter is embedded within the fuel line 726 and is used to measure the fuel flow representing engine fuel consumption. It is understood that different fuel measurement devices could be used in this scenario. </p><p id="p0042" num="0042">[0034] The engine may also include a glow plug 732, however, it is readily understood that a spark plug may have been used for other combustion engines. Further, an ion current sensor 734 may be located within the cylinder 712 to measure ion current. The ion current signal 736 may be provided to the processor 714 from the ion current sensor 734. In addition, an inlet cylinder pressure sensor 742 may be located within the cylinder to measure cylinder pressure. The cylinder pressure signal 
<!-- EPO <DP n="17"/>-->
 744 may be provided to the processor 714 by the pressure sensor 742. The processor 714 uses the cylinder pressure signal 744 to calculate the Indicated Mean Effective Pressure (IMEP) for each engine cylinder. BMEP is also calculated. It is understood that IMEP, BMEP are forms of representation of engine load and accordingly can be predicted using the ion current signal. Further, crank position sensor 738 may be connected to the crankshaft to provide an encoder signal 740 to the processor 714, to track the various engine parameters based on the engine crank angle. In addition, a soot measurement device 746 may be provided in an exhaust outlet 748 for each cylinder 712. A soot measurement signal 750 may be provided to the processor 714 by the soot measurement device 746. In one example, the soot measurement device 746 may be an opacity measurement device to optically determine the amount of soot in the exhaust based on opacity. However, it is understood that other soot measurement devices could be used in this scenario. </p><p id="p0043" num="0043"> [0035] Now referring to FIG. 7A, a flow chart of a calibration procedure for soot measurement using the ion current signal is provided. The method starts in block 810. In block 812, an ion sensor is positioned within the combustion chamber. In block 814, the ion sensor is electrically connected to a power source through a positive terminal having a preset potential. In block 816, the engine body is connected to the power source through a negative terminal. In block 818, the soot measurement device is connected to the engine exhaust port for measuring the actual soot in the exhaust. In block 820, the ion current signal is analyzed and calibrated with the soot measurement device signal. In block 822, a mathematical algorithm is developed for soot prediction 
<!-- EPO <DP n="18"/>-->
 using the ion current signal. In block 824, the algorithm is stored in a storage device for application to the engine control unit. The method ends in block 826. </p><p id="p0044" num="0044">[0036] Now referring to FIG. 7B, a flow chart of a calibration procedure for fuel consumption measurement using the ion current signal is provided. The method starts in block 830. In block 832, an ion sensor is positioned within the combustion chamber. In block 834, the ion sensor is electrically connected to a power source through a positive terminal having a preset potential. In block 836, the engine body is connected to the power source through a negative terminal. In block 838, the fuel consumption measurement device is connected to the engine supply line for measuring the actual fuel consumption. In block 840, the ion current signal is analyzed and calibrated with the fuel consumption measurement device signal. In block 842, a mathematical algorithm is developed for fuel consumption using the ion current signal. In block 844, the algorithm is stored in a storage device for application to the engine control unit. The method ends in block 846. </p><p id="p0045" num="0045"> [0037] Now referring to FIG. 7C, a flow chart of a calibration procedure for load measurement using the ion current signal is provided. The method starts in block 850. In block 852, an ion sensor is positioned within the combustion chamber. In block 854, the ion sensor is electrically connected to a power source through a positive terminal having a preset potential. In block 856, the engine body is connected to the power source through a negative terminal. In block 858, a load cell meter is connected to the engine for measuring the actual load of the engine. In block 860, the ion current signal is analyzed and calibrated with the load measurement signal. In block 862, a 
<!-- EPO <DP n="19"/>-->
 mathematical algorithm is developed for load prediction using the ion current signal. In block 864, the algorithm is stored in a storage device for application to the engine control unit. The method ends in block 866. </p><p id="p0046" num="0046"> [0038] Now referring to FIG. 8, a method for controlling vision parameters based on the ion current signal characteristics is provided. The method 900 starts in block 910. In block 912, the calibration data is accessed by the engine control unit. In block 914, an ion sensor signal is acquired. In block 916, the ion sensor signal is analyzed to determine the weighting factors of the ion sensor pattern. In block 918, the soot prediction algorithm is applied to the ion sensor signal characteristics to estimate the amount of soot during its formation in the combustion chamber. If the estimated soot is not above a first threshold level, the method follows line 928 to block 914, where the ion sensor signal is acquired again. If the estimated soot is above a first threshold level, the method follows line 930 to block 922. In block 922, the engine control unit may change engine operation parameters of the engine to reduce the amount of soot. In block 924, the engine control unit determines if the estimated soot is above a second threshold level. If the estimated soot is not above a second threshold level, the method follows line 928 to block 914 where the ion sensor signal is acquired again and the method continues. If the estimated soot is above the second threshold level, the method follows line 923 to block 926. In block 926, an error code is generated and/or an alert is provided to the user noting that the engine is experiencing emission problems outside of an acceptable range. The method then follows line 928 back to block 914 where the method continues. 
<!-- EPO <DP n="20"/>-->
 [0039] In other embodiments, dedicated hardware implementations, such as application specific integrated circuits, programmable logic arrays and other hardware devices, can be constructed to implement one or more of the methods described herein. Applications that may include the apparatus and systems of various embodiments can broadly include a variety of electronic and computer systems. One or more embodiments described herein may implement functions using two or more specific interconnected hardware modules or devices with related control and data signals that can be communicated between and through the modules, or as portions of an application-specific integrated circuit. Accordingly, the present system encompasses software, firmware, and hardware implementations. </p><p id="p0047" num="0047">[0040] In accordance with various embodiments of the present disclosure, the methods described herein may be implemented by software programs executable by a computer system. Further, in an exemplary, non-limited embodiment, implementations can include distributed processing, component/object distributed processing, and parallel processing. Alternatively, virtual computer system processing can be constructed to implement one or more of the methods or functionality as described herein. </p><p id="p0048" num="0048"> [0041] Further, the methods described herein may be embodied in a computer- readable medium. The term "computer-readable medium" includes a single medium or multiple media, such as a centralized or distributed database, and/or associated caches and servers that store one or more sets of instructions. The term "computer-readable medium" shall also include any medium that is capable of storing, encoding or carrying 
<!-- EPO <DP n="21"/>-->
 a set of instructions for execution by a processor or that cause a computer system to perform any one or more of the methods or operations disclosed herein. </p><p id="p0049" num="0049">[0042] As a person skilled in the art will readily appreciate, the above description is meant as an illustration of the principles of this invention. This description is not intended to limit the scope or application of this invention in that the invention is susceptible to modification, variation and change, without departing from spirit of this invention, as defined in the following claims. 
</p></description><claims mxw-id="PCLM44851747" ref-ucid="WO-2012118781-A2" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="22"/>-->CLAIMS We claim: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1 . A system for controlling an internal combustion engine, the system comprising an ion current sensor and a control unit in communication with the ion current sensor for receiving an ion current signal, the control unit being configured to predict at least one particulate emission level based on the ion current signal. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The system according to claim 1 , wherein the at least one particulate emission level comprises a soot emission level and/or a black smoke emission level. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The system according to claim 1 , wherein the control unit is configured control engine operating parameters based on the predicted particulate emission levels from the ion signal. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The system of claim 1 , wherein the control unit is configured to control engine operating parameters based on a function of one or multiple ion current signal parameters according to the predicted particulate emission levels. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The system of claim 1 , wherein the control unit is configured to control engine operating parameters based on the sum of multiple functions of one or a combination of multiple ion current signal parameters. <!-- EPO <DP n="23"/>--> </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The system of claim 1 , wherein the control unit is configured to control engine operating parameters based on the sum of multiple functions of one or a combination of multiple ion current signal parameters, wherein each function is weighted prior to summing. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The system of claim 1 , wherein the control unit can control different engine parameters including at least one of fuel system parameters, air system parameters, ignition system parameters, turbo-charging and supercharging system parameters, valve train system parameters, EGR (exhaust gases recirculation) system parameters, and after-treatment system parameters based on a function of one or more or a combination of ion current signal parameters. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The system of claim 1 , wherein the ion current sensor is integrated with a glow plug, spark plug, engine gasket , fuel injector, or any electrically insulated probe. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The system of claim 1 , wherein the control unit determines a predicted soot measurement based on a function of one or more or a combination of ion current signal parameters and the control unit is configured to adjust the engine operating parameters if the predicted soot measurement is above a first threshold. <!-- EPO <DP n="24"/>--> </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The system of claim 9, wherein the control unit is configured to generate an error code and or alert if the predicted soot measurement is above a second threshold. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1 . The system according to claim 1 , wherein the control unit is configured to control engine parameters according the predicted particulate emission based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. A system for controlling an internal combustion engine, the method comprising acquiring an ion current signal and controlling engine operating parameters based on a function of one or more or a combination of ion current signal parameters. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The system of claim 12, wherein the engine operating parameters are controlled based a function of one or more or a combination of ion current signal parameters. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The system according to claim 12, wherein the at least one particulate emission level are predicted based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or <!-- EPO <DP n="25"/>--> area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or any combination of the above or related parameters. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The system according to claim 14, wherein the control unit is configured to control engine parameters according the predicted at least one particulate emission level based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. A system for controlling an internal combustion engine, the system comprising an ion current sensor and a control unit in communication with the ion current sensor for receiving an ion current signal, the control unit being configured to predict at least one engine load measurement based on the ion current signal. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The system according to claim 16, wherein the at least one engine load measurement is an engine load profile. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The system according to claim 17, wherein the at least one engine pressure profile comprises an IMEP profile and/or a BMEP profile. <!-- EPO <DP n="26"/>--> </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The system according to claim 17, wherein the engine load profile are predicted based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The system according to claim 17, wherein the control unit is configured to control engine parameters according the predicted engine load based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21 . A system for controlling an internal combustion engine, the system comprising an ion current sensor and a control unit in communication with the ion current sensor for receiving an ion current signal, the control unit being configured to predict at least one fuel consumption measurement based on the ion current signal. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The system according to claim 21 , wherein the at least one fuel consumption measurement is a fuel consumption profile. <!-- EPO <DP n="27"/>--> </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The system according to claim 22, wherein the control unit is configured to calculate an ISFC profile and/or a BSFC profile base on the fuel consumption profile and an IMEP profile and/or a BMEP profile. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The system according to claim 22, wherein the at least one fuel consumption profile are predicted based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. The system according to claim 22, wherein the control unit is configured to control engine parameters according the predicted fuel consumption profile based on ion current signal parameters, for example comprising, start of the ion current signal and/or a slope of the ion current signal and/or area under the curve of the ion current signal and/or ion current amplitude and/or ion current delay and/or a function of any combination of the above or related parameters. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
