<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682756-A2" country="EP" doc-number="2682756" kind="A2" date="20140108" family-id="46261836" file-reference-id="252638" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146584977" ucid="EP-2682756-A2"><document-id><country>EP</country><doc-number>2682756</doc-number><kind>A2</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13165300-A" is-representative="NO"><document-id mxw-id="PAPP154847169" load-source="docdb" format="epo"><country>EP</country><doc-number>13165300</doc-number><kind>A</kind><date>20130425</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220439871" load-source="docdb" format="original"><country>EP</country><doc-number>13165300.8</doc-number><date>20130425</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140547691" ucid="GB-201207238-A" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>201207238</doc-number><kind>A</kind><date>20120425</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2137521863" load-source="docdb">G01N  35/04        20060101ALI20141112BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2137525771" load-source="docdb">G01N  21/03        20060101ALI20141112BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2137530531" load-source="docdb">G06T   7/00        20060101ALI20141112BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2137532414" load-source="docdb">G01N  35/00        20060101AFI20141112BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2137532957" load-source="docdb">G06K   7/10        20060101ALI20141112BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1989628583" load-source="docdb" scheme="CPC">G01N2035/00881     20130101 LA20131203BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989636369" load-source="docdb" scheme="CPC">G01N2035/00752     20130101 LA20131203BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989646968" load-source="docdb" scheme="CPC">G01N  35/00732     20130101 LI20131203BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989647333" load-source="docdb" scheme="CPC">G06K   7/10821     20130101 FI20131114BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359564" lang="DE" load-source="patent-office">Vorrichtung zum Lesen von Strichcodes</invention-title><invention-title mxw-id="PT132359565" lang="EN" load-source="patent-office">Device for reading barcodes</invention-title><invention-title mxw-id="PT132359566" lang="FR" load-source="patent-office">Dispositif pour lire des codes-barres</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919504442" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZIATH LTD</last-name><address><country>GB</country></address></addressbook></applicant><applicant mxw-id="PPAR919523528" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZIATH LTD</last-name></addressbook></applicant><applicant mxw-id="PPAR919014451" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Ziath Ltd</last-name><iid>101377106</iid><address><street>The Studio High Green Great Shelford</street><city>Cambridge, Cambridgeshire CB22 5EG</city><country>GB</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919545357" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DILKS TIMOTHY JOHN</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919510360" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DILKS, TIMOTHY JOHN</last-name></addressbook></inventor><inventor mxw-id="PPAR919013264" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>DILKS, TIMOTHY JOHN</last-name><address><street>47 Alpha Terrace</street><city>Trumpington, Cambridge CB29HS</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919506991" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>DILKS EKATERINA</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919522737" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>DILKS, EKATERINA</last-name></addressbook></inventor><inventor mxw-id="PPAR919009597" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>DILKS, EKATERINA</last-name><address><street>47 Alpha Terrace</street><city>Trumpington, Cambridge CB2 9HS</city><country>GB</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919015809" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Gwilt, Julia Louise</last-name><iid>101036417</iid><address><street>Marks &amp; Clerk LLP 62-68 Hills Road</street><city>Cambridge CB2 1LA</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549812292" load-source="docdb">AL</country><country mxw-id="DS549813247" load-source="docdb">AT</country><country mxw-id="DS549812306" load-source="docdb">BE</country><country mxw-id="DS549740850" load-source="docdb">BG</country><country mxw-id="DS549743236" load-source="docdb">CH</country><country mxw-id="DS549816106" load-source="docdb">CY</country><country mxw-id="DS549813248" load-source="docdb">CZ</country><country mxw-id="DS549813819" load-source="docdb">DE</country><country mxw-id="DS549812307" load-source="docdb">DK</country><country mxw-id="DS549816107" load-source="docdb">EE</country><country mxw-id="DS549742100" load-source="docdb">ES</country><country mxw-id="DS549740851" load-source="docdb">FI</country><country mxw-id="DS549740852" load-source="docdb">FR</country><country mxw-id="DS549813820" load-source="docdb">GB</country><country mxw-id="DS549812308" load-source="docdb">GR</country><country mxw-id="DS549812309" load-source="docdb">HR</country><country mxw-id="DS549816108" load-source="docdb">HU</country><country mxw-id="DS549743241" load-source="docdb">IE</country><country mxw-id="DS549812314" load-source="docdb">IS</country><country mxw-id="DS549740853" load-source="docdb">IT</country><country mxw-id="DS549812315" load-source="docdb">LI</country><country mxw-id="DS549813821" load-source="docdb">LT</country><country mxw-id="DS549813249" load-source="docdb">LU</country><country mxw-id="DS549813830" load-source="docdb">LV</country><country mxw-id="DS549813831" load-source="docdb">MC</country><country mxw-id="DS549813262" load-source="docdb">MK</country><country mxw-id="DS549813263" load-source="docdb">MT</country><country mxw-id="DS549742129" load-source="docdb">NL</country><country mxw-id="DS549907890" load-source="docdb">NO</country><country mxw-id="DS549742130" load-source="docdb">PL</country><country mxw-id="DS549740854" load-source="docdb">PT</country><country mxw-id="DS549742131" load-source="docdb">RO</country><country mxw-id="DS549740855" load-source="docdb">RS</country><country mxw-id="DS549742132" load-source="docdb">SE</country><country mxw-id="DS549743242" load-source="docdb">SI</country><country mxw-id="DS549907891" load-source="docdb">SK</country><country mxw-id="DS549907892" load-source="docdb">SM</country><country mxw-id="DS549813264" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673149" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising: an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged; at least one camera mounted within the enclosure to capture an image through the window; a plurality of light sources mounted within the enclosure to illuminate the window and at least one light blocking element arranged to at least partially block light radiating from at least one of the plurality of light sources, wherein the plurality of light sources and the at least one light blocking element are arranged within the enclosure to provide generally uniform illumination across the whole window and to reduce unwanted reflections.
<img id="iaf01" file="imgaf001.tif" wi="131" he="103" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737298" lang="EN" source="EPO" load-source="docdb"><p>An image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising: an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged; at least one camera mounted within the enclosure to capture an image through the window; a plurality of light sources mounted within the enclosure to illuminate the window and at least one light blocking element arranged to at least partially block light radiating from at least one of the plurality of light sources, wherein the plurality of light sources and the at least one light blocking element are arranged within the enclosure to provide generally uniform illumination across the whole window and to reduce unwanted reflections.</p></abstract><description mxw-id="PDES63959137" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD OF THE INVENTION</heading><p id="p0001" num="0001">This invention relates to an image capture device for example for imaging barcodes located on containers/tubes held in racks and to related methods.</p><heading id="h0002">BACKGROUND TO THE INVENTION</heading><p id="p0002" num="0002">Automated and robotic systems are widely used in research and analysis laboratories in the pharmaceutical, biotechnology and veterinary industries, where large numbers of biological samples such as blood and other human/animal fluids, biological drug candidates or small molecule libraries in powder or liquid form are handled. Increasingly, samples are contained within test tubes or vials that are labelled with unique 2D barcodes generally placed on the base of the tube in order to identify each individual sample. The barcode acts as an identifier to allow a researcher to access information about the sample from a file or database with ease.</p><p id="p0003" num="0003">Such tubes are commonly held in racks that allow samples to be easily transported and enable the barcodes on the base of the tubes to be read. In automated systems, machine vision is used to capture images of the base of a rack and analyse the images to determine the barcode on each tube. In any machine vision application, the quality of the image that is captured is vital to the success of the resulting analysis.</p><p id="p0004" num="0004">In order to capture an image, an image capture device is required. All image capture devices contain an image sensor or sensors. Three types of image sensor are generally used: charged couple devices (CCD); complementary metal-oxide-semiconductor (CMOS); and Contact Image Sensors (CIS). The first two types of image sensor are utilised both in line-scanners and in camera based systems. The third type is only used in line-scanners.</p><p id="p0005" num="0005">Line-scanners (commonly known as flatbed scanners) are the most common image capture devices used in this field. Line-scanner technology works by mechanically moving a 1D image sensor (generally a CIS or a CCD) together with an integrated light source across the object that is to be imaged. The light source is moving with the sensor so that each point of the object is evenly illuminated whereby an evenly<!-- EPO <DP n="2"> --> illuminated image is captured. However, one disadvantage of a line scanner is the time delay while the sensor is capturing the image.</p><p id="p0006" num="0006">An alternative to the line-scanner is a camera based device using one or more CCD or CMOS image sensors which are fixed within the device. The image sensors are 2D sensors that capture a 2D image of the object. One advantage of camera based devices over the line scanner is that they having no moving parts and so they can capture images rapidly. However, it is more difficult to ensure that there is an adequate light source within the device to ensure even illumination and minimal unwanted reflections across the object. Furthermore, the camera based devices are expensive when compared to the line-scanners.</p><p id="p0007" num="0007">Both line-scanners and camera devices are generally too large to incorporate into an automated/robotic system. For example, considering some devices which are currently available in the market place; the smallest scanner that is currently in use is based on the FI-60f available from Fujitsu. This is a flatbed scanner that utilises a CIS sensor to minimise the size of the scanner and provide a fast image capture time. However, even this small scanner is not small enough for all integration situations. Moreover, the CIS sensor that it contains has a very low usable depth of field and is extremely sensitive to ambient light conditions. These restrictions often lead to unreliable operation in the real world.</p><p id="p0008" num="0008">Another imaging system currently in use is the 'AVA6 plus', available from Avision in Taiwan. This system has the advantage that it uses a CCD to capture image leading to a much greater usable depth of field and much less susceptibility to ambient light conditions. This means that its performance in real world conditions is significantly better than the Fi-60f. However, there is a trade-off to achieve better real world performance because the scanner is larger and slower than the Fi-60f. Accordingly, the device is even less suitable for integration. Turning to the camera devices, there are several propriety systems on the market that use various types of camera. However, all these systems have a larger footprint and a much larger height that the line-scanners. Thus, they are also often too large for integration into robotic systems. In addition the camera devices are generally an order of magnitude more expensive to produce because of the expensive cameras that are used.</p><p id="p0009" num="0009">Background prior art can be found in <patcit id="pcit0001" dnum="EP2148291A"><text>EP2148291</text></patcit>.<!-- EPO <DP n="3"> --></p><p id="p0010" num="0010">The present applicant has recognised the need for an alternative device which addresses the requirements of cost effectiveness, speed and a small footprint.</p><heading id="h0003">SUMMARY OF THE INVENTION</heading><p id="p0011" num="0011">According to a first aspect of the invention, there is provided an image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<ul><li>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;</li><li>at least one camera mounted within the enclosure to capture an image through the window;</li><li>a plurality of light sources mounted within the enclosure to illuminate the window and</li><li>at least one light blocking element arranged to at least partially block light radiating from at least one of the plurality of light sources,</li><li>wherein said plurality of light sources and said at least one light blocking element are arranged within the enclosure to provide generally uniform illumination across the whole window and reduce unwanted reflections at the at least one camera.</li></ul></p><p id="p0012" num="0012">It will be appreciated that by providing generally uniform illumination across the window, i.e. across the whole surface of the window, the rack of tubes or other object to be imaged placed in contact or close proximity with the window will also be uniformly illuminated. By generally uniform illumination it is meant that the illumination across the window is within a predefined range which is suitable for the camera and optics being used. Alternatively, generally uniform illumination may be defined as providing illumination that varies by no more than approximately 20% from the maximum illumination. This enables high quality images to be captured and transferred to a host in order decode barcodes present in the images. Typically, the rack of tubes will be placed on top of the window and an image of the base of rack of tubes will be captured. However, it will be appreciated that other arrangements are also possible, for example, if the barcodes are placed on the top of the tubes, the image capture device may be supported with its window above the tube rack. Furthermore, it will be appreciated that whilst the invention is described in the context of capturing an image of a test tube rack, it may also be suitable for capturing images of other objects, such as passports, driving licences or other identification documents.<!-- EPO <DP n="4"> --></p><p id="p0013" num="0013">The illumination provided by the plurality of light sources is predominantly direct illumination, i.e. it travels direct from the light source to the window without being reflected via another component. Some light rays may be reflected off the walls of the enclosure onto the window. However, such light rays will have travelling further to reach the window and thus they will have lower intensity.</p><p id="p0014" num="0014">When a tube rack is placed in contact or in close proximity with or the window, the base of the tube rack will reflect light back to the at least one camera. Similarly, if another object to be imaged is placed on the window, the object will reflect light. The nature of the reflection will depend on the material of the tube rack or object to be imaged. For example, if the base surface of the tube rack is generally matte, incoming light is reflected in a broad range of directions, i.e. there is diffuse reflection. By contrast, if the base surface of the tube rack or other object is generally glossy, there is will a mixture of diffuse reflection and specular reflection. Specular reflection is the mirror-like reflection of light in which light coming from a single incoming direction is reflected in a single outgoing direction. Reflection, in particular specular reflection where the light is directed straight back at the camera, is problematic for barcode reading as it can cause both the background material and the barcode to appear washed out, destroying the contrast that is required in order to read the barcode. For specular reflection, the angle of incidence is equal to the angle of reflection. Accordingly, the angle that light rays from the plurality of light sources strike an object being imaged is also an important factor in minimising reflections that may reduce the contrast between a barcode and a test tube.</p><p id="p0015" num="0015">Light spreads out from a fixed light source at a rate that is inversely proportional to the square of the distance from the light source. Accordingly, the intensity of the light at the object being imaged is affected by the distance between the light source and the object being imaged. Thus, the device of the present invention provides even illumination by appropriate setting of one or more parameters which include distance between the light source and the window, intensity of each of the plurality of light sources, numbers of light sources, angling of light sources and location of the at least one blocking member.</p><p id="p0016" num="0016">The light blocking element may be arranged to block light radiating from at least one of the plurality of light sources having an angle of incidence on the window such that direct (i.e. specular) reflection falls on the at least one camera. In such cases, the light to be blocked may fall on the window at a point which is directly above the approximate<!-- EPO <DP n="5"> --> mid-way between the light source and the camera. The intensity of light diminishes with distance and thus the light blocking element may be arranged to block the shortest rays of light radiating from at least one of the plurality of light sources. Typically, the specular reflection from such rays is most likely to be cause of any wash-out.</p><p id="p0017" num="0017">Said plurality of light sources may comprise a first set of light sources and a second set of light sources which are located within the enclosure so that the first set of light sources illuminates a first section of the window and the second set of light sources illuminates a second section of the window. The first and second sections may at least partially overlap to provide overlap regions in which light rays from both the first and second set of light sources illuminate the window. In this way, the overlap regions will receive a mixture of intensity of light from different sources which assists in providing more even illumination and also light rays at angles that are unlikely not produce the unwanted specular reflections.</p><p id="p0018" num="0018">The first set of light sources may be brighter than the second set of light sources. Together with, or independently from, the use of overlap regions, using a mixture of lights of different intensities means that the window receives a mixture of intensity of light from different sources. The first set of light sources may be located further from the window than the second set of light sources. In this way, light of approximately the same intensity may be reaching the window.</p><p id="p0019" num="0019">Each of said first and second set of light sources may comprise at least one array of light sources. There may be multiple arrays in each set of light sources with different arrays mounted at different locations, e.g. opposed end wall, of the enclosure. The arrays may be arranged symmetrically within the enclosure. Each array may have the same or different numbers of light sources.</p><p id="p0020" num="0020">The first set of light sources and the second set of light sources may be mounted at different angles relative to each other. In this way, the sets of light sources may be arranged to illuminate different sections of the window and again to provide light rays falling at different angles on the window. For example, the first set of light sources may be arranged generally perpendicular to the window. In this way, light from the first set of light sources illuminates a first section of the window which covers at least the central section of the window but does not extend to the end of the window nearest to the first set of light sources. The second set of light sources may be mounted at an angle relative to the window, for example to angle light from the second set of light<!-- EPO <DP n="6"> --> sources on a second section which extends from an end of the window nearest to the second set of light sources.</p><p id="p0021" num="0021">The plurality of light sources may comprise LEDs or other light sources. The intensity of at least one of the plurality of light sources may be adjustable. For example, where appropriate, e.g. for LEDs, the brightness of each light source may be controlled by controlling the amount of current flowing through each light source which may be controlled by appropriate selection of a resistor coupled to the light source. Coupling a high value resistor in parallel with a light source means that less current will flow and the light source will be dimmer than if a low value resistor is used. Accordingly, the brighter light source(s) may be connected in parallel to lower value resistor than the dimmer light source(s).</p><p id="p0022" num="0022">As an alternative to the use of fixed value resistors, the brightness of the light sources may be electronically controlled, for example using a more sophisticated current limiting device. The reflectiveness and contrast of the barcodes used in the tubes differs greatly between manufacturers. Thus, varying the brightness electronically may be particularly useful for adapting the image capture device to different tube racks made by different manufacturers. For example, one manufacturer uses a very reflective white background to print their barcode on and being able to reduce the brightness when using the image capture device for such tube racks may be helpful to improve image quality.</p><p id="p0023" num="0023">The colour of one or more of the plurality of light sources may also be controlled. The light sources may provide white light. Alternatively, the plurality of light sources may comprise a plurality of multi-colour LEDs.</p><p id="p0024" num="0024">The enclosure may be in the form of a generally rectangular enclosure comprising a pair of opposed side walls, a pair of opposed end walls, a base and a top which at least partially comprises the window. The plurality of light sources may be mounted adjacent to at least one end wall, for example, the plurality of light sources may be mounted on or near the at least one end wall. Where the light sources are spaced from the end wall, circuitry and/or cabling may be routed behind the light sources to avoid blocking the cameras.</p><p id="p0025" num="0025">The at least one light blocking element may project from the least one end wall adjacent which the plurality of light sources are mounted for example, the at least one<!-- EPO <DP n="7"> --> element may be a generally planar plate. However, other shapes which provide the desired functionality of, partially block light radiating from at least one of the plurality of light sources, may be also be used.</p><p id="p0026" num="0026">The plurality of light sources may be symmetrically placed within the enclosure with light sources mounted adjacent to both end walls, for example, the first set of light sources may be mounted below the second set of light sources, particularly when the first set is brighter than the second set.</p><p id="p0027" num="0027">There may be at least a pair of light blocking element which are symmetrically placed within the enclosure with one light blocking element projecting from each end wall. The light blocking element may be positioned between the first and second sets of lights whereby the light blocking element blocks light from the first set but does not block light from the second set of lights, particularly when the first set of light sources is brighter than the second set of light sources.</p><p id="p0028" num="0028">There may be at least a first camera and a second camera which are located within the enclosure so that the first camera captures an image through a first section of the window and the second camera captures an image through a second section of the window. There may be four cameras each capturing an image through approximately a quarter of the window. By using four cameras and a fairly wide angle lens, the overall height of the enclosure is kept low whilst still allowing the object to be images at the required resolution.</p><p id="p0029" num="0029">The at least one camera may be a CMOS camera or other similar imaging camera. The illumination of the window is critical to ensure the best possible image is captured. Accordingly, the system described is constructed from cost-effective and small sized CMOS board cameras with light sources carefully arranged to illuminate the object evenly and to direct light rays at an angle that minimises unwanted reflections from the background of the barcodes.</p><p id="p0030" num="0030">The window may have dimensions which are approximately equal to dimensions of a tube rack or other object to be placed on the device. There may be a plurality of positioning elements to assist in correct positioning of a tube rack relative to the window. At least one of the plurality of positioning elements may mask at least some of the plurality of light sources and the at least one light blocking element. Accordingly, the at least one plurality of positioning element may be used to define the size of the<!-- EPO <DP n="8"> --> window. In this way, the overall dimensions of the enclosure may be kept to a minimum. The width of the enclosure may be approximately equal to that of the window, and hence the tube rack. Furthermore, the length of the enclosure may be approximately equal to that of the window together with the length of the positioning element. In other words, a compact enclosure is provided. It will be appreciated that if a different shape of enclosure is used, different types of positioning element could be used with the aim of keeping the size, i.e. footprint, of the enclosure to a minimum. Thus, the image capture device can be integrated onto robotic systems.</p><p id="p0031" num="0031">For enclosures which have a similar dimension to the window, the majority of light rays will directly strike the object being imaged and thus specular problem is a particular problem. For larger enclosures, i.e. enclosures in which the upper surface of the enclosure has a larger surface area than the window, at least some of the light rays will strike the underside of the upper surface. Accordingly, specular reflection does not pose a problem for these areas even when the angle of incidence equals the angle of reflection because these areas fall outside the location where the object to be imaged lies. Specular reflection thus needs to be particularly addressed when the enclosure matches the size of the window (and hence the size of the object being imaged).</p><p id="p0032" num="0032">The image capture device may further comprise a controller which is configured to control capture of an image of a test tube rack by the image capture device. The controller may be housed in a separate housing so that the size of the enclosure of the imager is kept low. Alternatively, the controller may be integrated within the enclosure.</p><p id="p0033" num="0033">The controller may comprise a low powered embedded PC. The controller may be configured to provide several required functions. Firstly, the controller may be configured to provide power for the plurality of light sources. Furthermore, the controller may be configured to turn the lights sources off when not required and/or control their intensity depending on requirements, for example by limiting current flowing to the light sources as described above.</p><p id="p0034" num="0034">Thus according to another aspect of the invention, there is provided an image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<ul><li>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;<!-- EPO <DP n="9"> --></li><li>at least one camera mounted within the enclosure to capture an image through the window;</li><li>a plurality of light sources mounted within the enclosure to illuminate the window; and</li><li>a controller which is configured to control the intensity of the plurality of light sources to provide generally uniform illumination across the whole window.</li></ul></p><p id="p0035" num="0035">The at least one camera may be constantly taking images of the window (and any objects in contact therewith), particular for the cost-effective CMOS cameras. The controller may thus be configured to receive a continuous stream of images from the at least one camera. In this case, the controller may be further configured to act as a buffer for the at least one camera to control when an image is output from the image capture device. Thus, the controller may be configured to control capture of an image of a test tube rack placed on the image capture device by<br/>
receiving a request from a host computer for an image;<br/>
in response to receiving the request, storing the next image from the continuous stream of images; and<br/>
transmitting the stored image to the host computer.</p><p id="p0036" num="0036">The image capture device may be connectable to a host computer to provide an image capture system. Accordingly, the controller may be configured to enable the host computer's I/O bandwidth to be utilised only when required. The controller may thus be configured to enable connectivity to the host computer (for example via Ethernet). The controller may be configured to transfer data to the host computer in the form of raw, unprocessed images whereby no image processing happens on the controller itself. This reduces the processing power requirements of the controller. Alternatively, a more powerful controller could be produced that could do some, or all, of required image processing.</p><p id="p0037" num="0037">It is possible that the light sources may be moveably mounted within the enclosure to adjust the regions illuminated. Any such movement may be controllable by the controller.</p><p id="p0038" num="0038">The host computer may be a desktop PC or a similar computer which allows a user to interact with the image capture device. The host computer may have an interface which allows a user to select the type of rack being imaged. The host computer may<!-- EPO <DP n="10"> --> also provide image processing to transform the high quality images captured by the image capture device in order to decode barcodes present in the images.</p><p id="p0039" num="0039">According to another aspect of the present invention, there is also provided a method of controlling an image capture device and/or system as described above.</p><p id="p0040" num="0040">According to another aspect of the invention, there is provided a method of controlling an image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<ul><li>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;</li><li>at least one camera mounted within the enclosure to capture an image through the window; and</li><li>a plurality of light sources mounted within the enclosure to illuminate the window;</li><li>the method comprising
<ul><li>receiving a continuous stream of images from the at least one camera;</li><li>receiving a request from a host computer for an image;</li><li>in response to receiving the request, storing the next image from the continuous stream of images; and</li><li>transmitting the stored image to the host computer.</li></ul></li></ul></p><p id="p0041" num="0041">According to another aspect of the invention, there is provided an image capture device for capturing an image of an object, the image capture device comprising:
<ul><li>an enclosure comprising a transparent window which, in use, is adjacent the object to be imaged;</li><li>at least one camera mounted within the enclosure to capture an image through the window;</li><li>a plurality of light sources mounted within the enclosure to illuminate the window and</li><li>at least one light blocking element arranged to at least partially block light radiating from at least one of the plurality of light sources,</li><li>wherein said plurality of light sources and said at least one light blocking element are arranged within the enclosure to provide generally uniform illumination across the whole window and reduce unwanted reflections at the at least one camera.</li></ul><!-- EPO <DP n="11"> --></p><p id="p0042" num="0042">The image capture device may comprise the features described above in relation to the first aspect of the invention.</p><p id="p0043" num="0043">The invention further provides processor control code to implement the image capture system described above, for example on an embedded processor. The code may be provided on a carrier such as a disk, CD- or DVD-ROM, programmed memory such as read-only memory (Firmware), or on a data carrier such as an optical or electrical signal carrier. Code (and/or data) to implement embodiments of the invention may comprise source, object or executable code in a conventional programming language (interpreted or compiled) such as C, or assembly code, code for setting up or controlling an ASIC (Application Specific Integrated Circuit) or FPGA (Field Programmable Gate Array), or code for a hardware description language. As the skilled person will appreciate such code and/or data may be distributed between a plurality of coupled components in communication with one another.</p><heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0044" num="0044">The invention is diagrammatically illustrated, by way of example, in the accompanying drawings, in which:
<ul><li><figref idrefs="f0001">Figure 1a</figref> shows an isometric view of an image capture device according to an embodiment of the invention;</li><li><figref idrefs="f0001">Figures 1b</figref> and <figref idrefs="f0002">1c</figref> show isometric views of the device of <figref idrefs="f0001">Figure 1a</figref> with some of the components removed for clarity;</li><li><figref idrefs="f0002">Figures 2a</figref> and <figref idrefs="f0003">2b</figref> respectively show an isometric and side view of an image capture device with side walls removed for illustrative purposes;</li><li><figref idrefs="f0003 f0004">Figure 3a to 3c</figref> show three variations of an image capture device to illustrate the problem of unwanted reflections;</li><li><figref idrefs="f0005 f0006">Figures 3d to 3f</figref> show the level of illumination across an axis of the window in each of the arrangements of <figref idrefs="f0003 f0004">Figures 3a to 3c</figref>, with the maximum level of illumination normalised at 100%;<!-- EPO <DP n="12"> --></li><li><figref idrefs="f0007">Figure 4</figref> shows the location of light sources in an alternative embodiment of the invention;</li><li><figref idrefs="f0007">Figures 5a</figref> and <figref idrefs="f0008">5b</figref> show the base of a tube rack and the areas captured by each camera;</li><li><figref idrefs="f0010">Figure 6</figref> shows a block diagram of the components of the image capture device; and</li><li><figref idrefs="f0011">Figure 7</figref> shows a flow chart of the communication between the host, controller and imager.</li></ul></p><heading id="h0005">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading><p id="p0045" num="0045"><figref idrefs="f0001 f0002">Figures 1a to 1c</figref> show an image capture device 10 according to the present invention. The image capture device 10 comprises an imager enclosure 12 having side walls, a base and a top (also termed imager). The top has a window 16 with dimensions (width and length) which generally match (i.e. is approximately equal to) those of a tube rack to be placed on the device. In this embodiment, the enclosure has the form of a generally rectangular box with the width of the box matching the width of the tube rack. It will be appreciated that other shapes of enclosure may be used provided the device is suitable for capturing an image of a tube rack placed thereon.</p><p id="p0046" num="0046">The enclosure 12 houses a plurality of cameras 14, a plurality of light sources 18 and a plurality of light blocking elements 22. The walls and base of the enclosure are non-transparent in order to block out light from external sources. The top of the enclosure or at least the window 16 is transparent so that a tube rack placed on the top of the device can be illuminated by the light sources and imaged by the cameras within the device.</p><p id="p0047" num="0047">The device also comprises tube rack positioning elements 20 to correctly position a tube rack on the device, more particularly to position the tube rack on the window.. The tube rack positioning elements 20 are arranged around the edges of the window to guide the correct alignment of the tube rack on the window. The tube rack positioning elements 20 each have a tapered or sloped edge which slopes down towards the window to assist in guiding the rack onto the window. In this embodiment, the rack positioning elements 20 comprise two end positioning elements 24 and four side positioning elements 26 although it will be appreciated that different arrangements may<!-- EPO <DP n="13"> --> be used. The four side positioning elements 24 also attach the top of the device 16 to the walls of the enclosure.</p><p id="p0048" num="0048">The four side positioning elements 26 are arranged with a first pair of side elements on one long side of the enclosure and a second pair aligned with the first pair on the opposed long side. The spacing between the elements in opposed pairs is the same as the width of the window and enclosure which is equal to the width of the tube rack. The two end positioning elements 24 are attached at opposed ends of the top of the enclosure with the spacing between the end positioning elements 24 matching the length of a tube rack to be placed on the top of the enclosure. In this way, the enclosure may be slightly longer than a tube rack, e.g. to accommodate light sources but the tube rack positioning elements define the length of the window to match the length of the tube rack. Each of the positioning elements is tapered with a slope towards the window which also assists in placement of the tube rack on the window.</p><p id="p0049" num="0049">The cameras and light sources are removed from <figref idrefs="f0001">Figure 1b</figref> to allow other components to be seen more clearly. The positioning elements 20 are removed for illustrative purposes in <figref idrefs="f0002">Figure 1c</figref> to allow the inside of the image capture device to be seen clearly. As shown in <figref idrefs="f0001">Figures 1b</figref> and <figref idrefs="f0002">1c</figref>, there are four holders 28, one for each camera. Each camera is releasably secured in a respective holder. In this way, a faulty camera may be replaced without needing to replace the whole device. The cameras may be slid into the holders.</p><p id="p0050" num="0050">The image capture device 10 comprises two physical boxes: an imager enclosure as described above and a controller (not shown). The imager and controller are connected via a HDMI cable that carries power from the controller to the cameras and USB signals from the cameras to the controller and a 4-pole mini-din cable, as described in more detail below. The imager enclosure contains multiple CMOS board cameras 14. As shown more clearly in <figref idrefs="f0002">Figure 2a</figref>, four CMOS board cameras 14 are used to capture images of the base of the tube rack. The cameras 14 are arranged two-by-two within the enclosure so that each camera captures an image which covers approximately one-quarter of a tube rack placed on the window. There is slight overlap at the edges of the images to allow for different arrangements of tubes to be better imaged as described in more detail below.</p><p id="p0051" num="0051">In use, the image capture device 10 is connected to a computer and is initialised by opening and running an associated imaging software application. The CMOS board<!-- EPO <DP n="14"> --> cameras 14, may be of the type sold as model C270 available from Logitech International, headquartered in Switzerland, where each camera has a maximum resolution of 1280 (W) by 960 (H). However, many alternative cameras are available for use in the imager. The cameras are supplied with +5V from a USB power source, as described in more detail below, which initialises each camera. Once initialised, each of the four cameras will continuously stream images to the controller.</p><p id="p0052" num="0052">Light spreads out from a fixed light source at a rate that is inversely proportional to the square of the distance from the light source. Accordingly, the intensity of the light at the object being imaged is affected by the distance between the light source and the object being imaged. The three key factors in maximising the quality of an image captured by the cameras are:
<ol><li>a) An even illumination of the object;</li><li>b) The minimising of unwanted reflections from the object being illuminated; and</li><li>c) The quality and dynamic range of the image sensor within the camera used.</li></ol></p><p id="p0053" num="0053">In order to capture the best possible image for the particular application, imaging systems are generally pre-tuned or have user-configurable options that affect the amount of light captured by the sensor. These options include the optical size of the aperture and the exposure time. If the illumination is not evenly spread across the object there may be no single combination of exposure and aperture size that will result in a single image of high-enough quality of image being captured. With high-dynamic range cameras this is less of a problem, but for cost-effective CMOS cameras the dynamic range may not be great enough. Accordingly, for the CMOS cameras uneven illumination can result in total loss of contrast in over-exposed sections of the capture image and conversely total loss of contrast in under-exposed sections of the capture image. In addition, when lighting an object from the side, light rays reach the object from many different angles, which may potentially cause unwanted reflections.</p><p id="p0054" num="0054">The device of the present invention provides even illumination of and controls the reflections from the object being imaged by using a combination of multiple light sources and multiple light blocking elements which are optimally positioned within the enclosure. As shown in <figref idrefs="f0002">Figures 2a</figref> and <figref idrefs="f0003">2b</figref>, the image capture device contains multiple light sources positioned along two facing walls of the device. A first set of light sources 18 comprises an array of LEDs mounted towards the lower edge of a short side wall<!-- EPO <DP n="15"> --> and a second array mounted in a similar position on the opposed short side wall. These arrays are generally perpendicular to the plane of the window. A second set of light sources 30 comprises a first array of LEDs mounted towards the upper edge of a short side wall and a second array mounted in a similar position on the opposed short side wall. These arrays are at an angle of say, 45 degrees, to the plane of the window. The first set of light sources 18 are of a higher brightness than the second set of light sources 30. Each set of light sources comprises an array in the form of a single line of 12 LEDs (each of which comprises four light sources in a single element) although it will be appreciated that different numbers of light sources could be used.</p><p id="p0055" num="0055">White LEDs are used in the current embodiment of the invention as these are a good general light source. However, other colour light sources may also be used in the cases where the use of different colours would improve the contrast of the resulting image such as when the barcode is printed directly onto a translucent tube. In these cases, it may be necessary to use non-white light to best illuminate the barcodes.</p><p id="p0056" num="0056">As an illustration, <figref idrefs="f0003">Figures 3a</figref> and <figref idrefs="f0004">3b</figref> shows the paths of two rays from two bright light sources 18 and illustrate the problem of unwanted reflections causing a loss of contrast in the captured image. A first ray represents the shortest path from each light source to the window and a second ray represents the longest path from each light source to the window. (It will be understood that there are multiple rays from all light sources but they have been removed for clarity). As set out above, the intensity of light decreases with distance from the source and the intensity of light on the window from the second ray of each source is lower than that from the first ray. It will be appreciated that the majority of the illumination on the window is from the light rays which are directly illuminating the window. Some light rays may be reflected off the walls of the enclosure onto the window. However, such light rays will have travelling further to reach the window and thus they will have lower intensity.</p><p id="p0057" num="0057"><figref idrefs="f0003">Figure 3a</figref> shows an image capture device with two light sources 18 positioned near the bottom of the enclosure and no light blocking elements. This arrangement gives rise to a variation in illumination across the window of the enclosure shown in <figref idrefs="f0005">Figure 3d</figref>. The illumination peaks at 100% both ends and gradually dips to have the dullest illumination of approximately 75% at the centre of the window (furthest away from the light sources). Reflection regions 31 are highlighted on the window. These regions 31 extend from each end of the window to approximately one quarter of the length of the window, i.e. from above the light source to above the camera lens. In these regions,<!-- EPO <DP n="16"> --> the shortest rays from the light source have an angle of incidence on the window which is such that when the light ray is reflected in a single direction (specular reflection), the light is reflected directly back to at least one of the cameras. As described above, reflection is a mixture of specular reflection and diffuse reflection and thus the severity of the reflections is dependent on the material of the tubes being imaged. For example, glossy materials cause more unwanted reflections than matt materials. The reflections are particularly problematic for barcode reading systems as the reflections can reduce the contrast between the background material and barcode on the tube, making it difficult to identify and correctly read the barcode.</p><p id="p0058" num="0058"><figref idrefs="f0004">Figure 3b</figref> shows one possible solution to reduce the reflections which is to use light blocking elements 22 to block light from falling in this region. However, as illustrated in <figref idrefs="f0005">Figure 3e</figref>, the disadvantage of this solution is that as well as blocking the unwanted reflections, the light blocking elements 22 also block light from a source reaching the area closest to the source. The regions 31 closest to a source are now only illuminated by dim light from the light source at the other end of the enclosure and thus the illumination level has dropped to approximately 20%. This results in uneven illumination of the window.</p><p id="p0059" num="0059">The present invention is a solution to the problems of both uneven illumination and unwanted reflections. When compared to <figref idrefs="f0004">Figure 3b</figref>, two additional light sources 30 are used. As explained above, the multiple light sources are positioned to illuminate different sections of the window. The bright light sources 18 are positioned further from the window than the dimmer light sources 30. As shown in <figref idrefs="f0006">Figure 3f</figref> the arrangement of light sources and light blocking elements is such that the window and hence a tube rack positioned on the window is subjected to a generally even illumination, i.e. the illumination varies no more than 20% of the maximum value. Furthermore, the unwanted reflections are reduced.</p><p id="p0060" num="0060">The dimmer light sources 30 are closer to the window of the enclosure (and the base of a tube rack 34) and provide the primary illumination for the reflection regions 31. The dimmer light sources 30 are also angled relative to the window so that the light rays are incident at different angles to those of the brighter light sources. The problem of unwanted reflections is also reduced by appropriate angling, for example, the shortest, i.e. brightest, rays from the dimmer light sources have an angle of incidence which is such that they are not directly reflected back at the camera lens where there is specular reflections. Moreover, the rays from the dimmer light source are not as bright<!-- EPO <DP n="17"> --> as from the brightest light source and thus even if they are reflected back at the camera, the fall off in light intensity with distance means that their intensity is low enough to reduce the risk of washout.</p><p id="p0061" num="0061">The difference in intensity is balanced by arranging the light sources to control the regions of overlap 32, i.e. regions of the window which are illuminated by more than one light source. The first ray from the brighter light source and the second ray from the dimmer light source intersect at a point which is approximately one quarter of the length of the enclosure. Thus, light from the different sources will illuminate overlap area 32 which extends from approximately one quarter to one third of the length on the window. It will be appreciated that rays from the brighter light sources on the other (left hand side) of the enclosure will also illuminate this overlap section. The overlap regions 32 will therefore a mixture of intensity of light from different sources which overall gives rise to uniform light illumination on the window.</p><p id="p0062" num="0062">As described above, the unwanted reflections and the extent of the overlap regions are controlled by the use of light blocking members 22 which restrict the light from the bright light sources 18. Each blocking member 22 is in the form of a plate which extends generally perpendicular to the side wall of the enclosure. A blocking member 22 is mounted between the first set of light sources and the second set of light sources to prevent light from the first, brighter array of light sources illuminating the near end of the window. As shown in <figref idrefs="f0004">Figure 3c</figref>, the brighter light source 18 illuminates approximately three quarters of the window with the rays having greatest intensity illuminating the window at a location approximately one quarter of its length.</p><p id="p0063" num="0063">Furthermore, the unwanted reflections and the extent of the overlap regions are controlled by appropriate angling of the light sources. As described above, the brighter light source 18 only illuminates approximately three quarters of the window. The dimmer light sources 30 are positioned on a mounting plate which is set at an angle to the tube rack so that the light is directed towards the near end of the tube rack, which the bright sources on the same side do not illuminate. It is possible that the mounting plate is moveable to adjust the angle of the light source. Furthermore, it is possible that the movement is electronically controlled. In the arrangement shown, the dimmer light sources 30 thus illuminate approximately one third of the window with the rays having greatest intensity illuminating the window from the end closest to the light sources. By directing the light from the bright and dim sources in this way, the desired illumination in terms of intensity and angle of light rays can be achieved across the<!-- EPO <DP n="18"> --> base of the tube rack, preventing over or under exposure in the images captured by the cost-effective cameras of a fairly low dynamic range and in addition preventing unwanted reflections from the background material of the barcodes.</p><p id="p0064" num="0064">The sources are described as brighter and dimmer but it will be appreciated that light sources having the same intensity could be used. The effect of uniform illumination could be achieved by appropriate positioning of the uniform light sources, blocking members and angling of the uniform light sources. Moreover, in the example above, the same number of light sources is used in both the first and second light sources on each side of the enclosure but this is also a parameter which could be adjusted to ensure uniform illumination. As described below, the intensity of the light sources is controlled by controlling the current flow through each of the brighter and dimmer sources via current limiting resistors.</p><p id="p0065" num="0065">As shown in <figref idrefs="f0007">Figure 4</figref>, in an alternative embodiment of the invention, the position of the bright source 18 is different to that of the previous embodiment. In <figref idrefs="f0007">Figure 4</figref>, the bright sources 18 are spaced away from the side walls and raised above the base of the enclosure, so that cables from the light sources to the controller circuitry can be routed behind the sources so that they are prevented from unintentionally blocking the light or cameras. The light blocking member 22 prevents light from the bright source 18 from reaching the near end of the tube rack as before. Raising the bright source 18 above the base of the enclosure places the source 18 closer to the light blocking member 22, thereby blocking the light in the same way as described above without the need to change the length of the light blocking member 22. As before the light sources are predominantly directly illuminating the window.</p><p id="p0066" num="0066"><figref idrefs="f0007">Figures 5a</figref> and <figref idrefs="f0008">5b</figref> show the base 36 of a typical tube rack (in this case, a 96 tube rack), which is the object to be captured by the image capture device. Each circle in the diagram indicates the position of a tube in the rack and the base of each tube 38 is labelled with a barcode (2D or otherwise) which uniquely identifies the sample contained in each tube. As described above, the four CMOS cameras 14 are arranged such that each camera captures a quarter of the base 36 of the tube rack. The cameras may be arranged such that there is no overlap in the images captured. However, as shown in <figref idrefs="f0008">Figure 5b</figref>, there may be overlap between the images captured by each camera. This accounts for the possibility of a barcode being intersected by an image boundary (for example, if the tubes are arranged in a staggered pattern in the<!-- EPO <DP n="19"> --> tube rack). The overlapping image region 42 may be greater than the dimension of a typical barcode so that if the barcode is not completely imaged by one camera, it is completely imaged by another. The area 40 of the image captured by each camera is shown with a dotted line (lower left and upper right cameras) or a dashed line (upper left and lower right cameras). Each area covers an array of seven by four and a half barcodes producing overlapping image regions 42 that are captured by multiple cameras. The overlap section around the short axis shows two columns of whole tubes being captured by at least two cameras, whereas the overlap section around the long axis shows that portions of tubes are captured by at least two cameras. Around the centre of the window, at least portions of the tubes are captured by all four cameras. In each case, analysis must be performed in order to ensure the entirety of the tube rack is imaged and that the barcodes are read on each tube, so that no samples are accidentally missed.</p><p id="p0067" num="0067">The image analysis is performed on a host computer 63. On the host computer 63, the four images captured by each of the four CMOS cameras 14 are combined to make one single image of the tube rack (using an algorithm which receives the images from the four cameras, identifies the camera associated with each image, rotates the images from particular cameras as necessary and combines the images). <figref idrefs="f0008">Figure 5c</figref> shows an example of a single combined image of a 96 (12 by 8) tube rack with overlap regions 42 indicated by dashed lines. Each camera has captured an array of six and a half by four and a half barcodes, producing the overlapping image regions 42. The image analysis uses templates that represent where barcodes in a tube rack are located for different tube rack sizes/arrangements with respect to the top-left hand corner of the single image. The templates are used to select regions of interest for each of the barcodes in the template. For example, there are 96 regions of interest for a 96 tube rack. Each region is then cut out and analysed separately.</p><p id="p0068" num="0068">The template associated with the tube rack to be imaged is selected prior to image capture via the imaging software application associated with the image capture device. A screenshot of example templates available for selection is shown in <figref idrefs="f0009">Figure 5d</figref>; these are the most common templates and if necessary the user interface could be updated to include alternative layouts. In the case of a 48 tube rack, the template inserts a spacing halfway along each axis, where the spacing corresponds to the size and position of the overlap regions 42. The spacing is used by the image analysis software to take into account the overlap when splitting the region into sub-images representing the number of barcodes defined in the template.<!-- EPO <DP n="20"> --></p><p id="p0069" num="0069"><figref idrefs="f0010">Figure 6</figref> shows a block diagram of the layout of the system which comprises a controller 62 which interfaces with an imager 61 (which may be as described above) and a host 63. The imager 61 is connected to the controller 62 by means of two cables; one which connects to the cameras 501, 502, 503, 504 and one which connects to the light sources 2, 3. For example, these cables may be a HDMI cable and a 4-pole mini-din cable. Standard HMDI cables comprise four shielded twisted pairs and several other conducting wires. The four shielded twisted pairs carry the high-frequency USB signals for the USB cameras 501, 502, 503, 504, while the remaining wires are used to carry the +5V needed to power the cameras. This compression of the four USB cables over to the HDMI cable is achieved by a cable board 641 within the imager 61 which is connected to a corresponding cable board 642 within the controller 62. The 4-pole mini-din cable that connects the controller 62 to the imager carries the power required to the lights 2,3.</p><p id="p0070" num="0070">The controller 62 comprises two different value current limiting resistors 610 and 620 to control the brightness of the light sources. The light source which will output brighter light is connected to a low value resistor, such that more current flows through the light source, while the light source which will output dimmer light is connected to a high value resistor that restricts the current flow through the source. The current limiting resistors 610, 620 need not be fixed resistors. Alternative current limiting devices/techniques can be used to allow electronic control of the light source brightness, so that the intensity of light can be altered to suit the reflectivity and contrast of the barcodes used by different barcode manufacturers. For ease of design, the power for each resistor is taken directly from a single USB power port 674, thereby utilising the internal +5V power supply of an embedded system board 65. In the embedded board used, there are two USB EHCI host controllers 651, 652 and one integrated USB hub 653 which connects to four USB ports 671, 672, 673 and 674. Due to the high bandwidth requirements of streaming uncompressed high-resolution video, only two cameras may be connected to one host controller. Accordingly, a first USB EHCI host controller 651 is connected via the internal USB hub 653 and two USB ports 671, 672 to two cameras and a second USB EHCI host controller 652 is connected via an external hub 66 and two USB ports to the other two cameras. It will be appreciated that other arrangements are possible.</p><p id="p0071" num="0071">The low-power embedded computer 65 within the controller 62 may be a TrimSlice, available from Compulab in Israel. However, many other embedded boards are<!-- EPO <DP n="21"> --> available with identical or similar features that can perform a similar function. Communication between the controller 62 and a host computer 63 is achieved using TCP/IP over an Ethernet. This method was utilised as Ethernet connectors are ubiquitous on both low-power embedded computers and the desktop computers which will generally act as a host for this invention. A further enhancement may be to design a proprietary USB connection protocol to enable the host to be connected to the controller by USB.</p><p id="p0072" num="0072">Referring now to the diagram shown in <figref idrefs="f0011">Figure 7</figref>, this diagram shows the communication process between the host 63, controller 62 and imager 61, in particular the steps undertaken within the host 63 and the low-power embedded computer 65 within the controller 61. When the controller 62 is powered up via a 12V external power supply, the operating system (OS) of the low-power embedded computer will start to boot up (step 70). On boot up a web server process (step 71) is started. This provides for simple communication via TCP/IP to be carried out between the controller and the host. The particular operating system used may be the open source Linux-based operating system, such as Ubuntu Linux, and the webserver may be the open source LightHTTPD.</p><p id="p0073" num="0073">The host and controller are thus now linked. At the host 63, a similar initialisation phase is begun with the operating system booting up (step 70) and the client software package being started. When the host wishes to grab an image it connects to the port and IP address of the web server 71 process that is running on the embedded computer 65 and accesses the 'grab' page. This event causes the 'grab' script to be executed on the embedded computer 65 (step 73).</p><p id="p0074" num="0074">The 12V external power supply provides +5V to each of the USB ports 671, 672, 673, 674. The external USB hub 66 requires a separate +5V supply which is taken from USB port 671. As soon as the +5V supply is available the light sources 2 and 3 will turn on in the connected imager 61 and power will be provided to all four of the cameras 501, 502, 503, 504. The cameras will be automatically detected by the OS and become available for initialisation. After receiving a request for a 'grab' script, the controller checks whether the processes that are used to initialise the streaming and buffering of the images from each camera are running on the embedded computer 65. If the processes are not running, the initialisation script (step 72) is then run. The initialisation script starts a single 'capture' process for each of the four cameras. These four capture processes run continuously until the controller 62 is powered off or the cameras are<!-- EPO <DP n="22"> --> disconnected. Each 'capture' process initialises its respective camera in RAW mode at the required resolution and listens for an interrupt.</p><p id="p0075" num="0075">Once the cameras have been initialised and are streaming raw images to their respective process on the embedded computer 65, the system is ready to carry out the 'grab' script. First the controller deletes any existing image files, then the controller sends an interrupt (step 74) to each of the four running 'capture' processes. This interrupt (step 74) calls a function in the 'capture' process that will write the raw image (in YUV format) down to the file system. Accordingly, the next step is to wait for the files to be written (step 75). The controller monitors the progress of this and when all four YUV files have been written it returns a success message (step 76) to the host. If the controller determines that all four files have not been successfully written, it returns an error message to the host (step 76).</p><p id="p0076" num="0076">The host receives the message from the controller and determines whether or not the 'grab' script process was successful. If the process was not successful, an error report is displayed to a user. If the process was successful, the host 63 requests the four images from the web server process (step 77) that is running on the embedded computer 65. The host is now free to carry out the required image analysis (step 78) on the captured image.</p><p id="p0077" num="0077">In brief, the image analysis (step 78) involves a number of sub-steps between receiving the images from the four cameras and outputting a list of barcodes. Firstly, as described above, the four images from the cameras 14 are combined into one single image. This is performed using a template which represented a tube rack of a particular size/type. The template defines the regions of interest (barcodes) with respect to the top left-hand corner of the combined single image. The template defines the region of interest of each barcode in the captured image and is used to split the image into sub-images where one sub-image represents one barcode. Each of these sub-images form the input of the 2D barcode decoder algorithm (commercially available), which outputs the decoded barcode that allows a researcher to easily access information about the sample contained in a particular tube.</p><p id="p0078" num="0078">No doubt many other effective alternatives will occur to the skilled person. It will be understood that the invention is not limited to the described embodiments and encompasses modifications apparent to those skilled in the art lying within the spirit and scope of the claims appended hereto.</p></description><claims mxw-id="PCLM56982162" lang="EN" load-source="patent-office"><!-- EPO <DP n="23"> --><claim id="c-en-0001" num="0001"><claim-text>An image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<claim-text>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;</claim-text>
<claim-text>at least one camera mounted within the enclosure to capture an image through the window;</claim-text>
<claim-text>a plurality of light sources mounted within the enclosure to illuminate the window and</claim-text>
<claim-text>at least one light blocking element arranged to at least partially block light radiating from at least one of the plurality of light sources,</claim-text>
<claim-text>wherein the plurality of light sources and the at least one light blocking element are arranged within the enclosure to provide generally uniform illumination across the whole window and to reduce unwanted reflections.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>An image capture device according to claim 1, wherein the plurality of light sources comprises a first set of light sources and a second set of light sources which are located within the enclosure so that the first set of light sources illuminates a first section of the window and the second set of light sources illuminates a second section of the window.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>An image capture device according to claim 2, wherein the first and second sections at least partially overlap to provide overlap regions.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>An image capture device according to claim 2 or claim 3, wherein the first set of light sources is brighter than the second set of light sources and/or wherein the first set of light sources is located further from the window than the second set of light sources.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>An image capture device according to any one of claims 2 to 6, wherein the first set of light sources and the second set of light sources are mounted at different angles relative to each other.<!-- EPO <DP n="24"> --></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>An image capture device according to any one of claims 2 to 5, wherein the at least one light blocking element is arranged to at least partially block light radiating from only one of the first and second set of light sources.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>An image capture device according to any one of the preceding claims, wherein the plurality of light sources comprise LEDs.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>An image capture device according to any one of the preceding claims, wherein the enclosure comprises a pair of opposed end walls and the plurality of light sources are mounted adjacent to at least one end wall with the at least one light blocking element preferably projecting from the least one end wall adjacent which the plurality of light sources are mounted.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>An image capture device according to claim 11 or claim 12, wherein the plurality of light sources are symmetrically placed within the enclosure with light sources mounted adjacent to both end walls and at least a pair of light blocking elements may be symmetrically placed within the enclosure with one light blocking element projecting from each end wall.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>An image capture device according to any one of the preceding claims wherein the light blocking element is arranged to block light radiating from at least one of the plurality of light sources having an angle of incidence on the window such that direct reflection falls on the at least one camera and/or the light blocking element is arranged to block the shortest rays of light radiating from at least one of the plurality of light sources.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>An image capture device according to any one of the preceding claims, comprising at least a first camera and a second camera which are located within the enclosure so that the first camera captures an image through a first section of the window and the second camera captures an image through a second section of the window.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>An image capture device according to any one of the preceding claims, wherein the enclosure has a face having substantially similar dimensions to the window.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>An image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<claim-text>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;</claim-text>
<claim-text>at least one camera mounted within the enclosure to capture an image through the window;</claim-text>
<claim-text>a plurality of light sources mounted within the enclosure to illuminate the window; and</claim-text>
<claim-text>a controller which is configured to control the intensity of the plurality of light sources to provide generally uniform illumination across the whole window.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A method of controlling an image capture device for capturing an image of a test tube rack comprising a plurality of test tubes each having an individual barcode thereon, the image capture device comprising:
<claim-text>an enclosure comprising a transparent window which, in use, is adjacent the test tube rack to be imaged;</claim-text>
<claim-text>at least one camera mounted within the enclosure to capture an image through the window; and</claim-text>
<claim-text>a plurality of light sources mounted within the enclosure to illuminate the window;</claim-text>
<claim-text>the method comprising
<claim-text>receiving a continuous stream of images from the at least one camera;</claim-text>
<claim-text>receiving a request from a host computer for an image;</claim-text>
<claim-text>in response to receiving the request, storing the next image from the continuous stream of images; and</claim-text>
<claim-text>transmitting the stored image to the host computer.</claim-text></claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>Processor control code which when implemented on a controller causes the controller to carry out the method of claim 14.</claim-text></claim></claims><drawings mxw-id="PDW16670551" load-source="patent-office"><!-- EPO <DP n="26"> --><figure id="f0001" num="1a,1b"><img id="if0001" file="imgf0001.tif" wi="149" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0002" num="1c,2a"><img id="if0002" file="imgf0002.tif" wi="165" he="223" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0003" num="2b,3a"><img id="if0003" file="imgf0003.tif" wi="164" he="224" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0004" num="3b,3c"><img id="if0004" file="imgf0004.tif" wi="164" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0005" num="3d,3e"><img id="if0005" file="imgf0005.tif" wi="149" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0006" num="3f"><img id="if0006" file="imgf0006.tif" wi="165" he="129" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0007" num="4,5a"><img id="if0007" file="imgf0007.tif" wi="155" he="208" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0008" num="5b,5c"><img id="if0008" file="imgf0008.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0009" num="5d"><img id="if0009" file="imgf0009.tif" wi="149" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0010" num="6"><img id="if0010" file="imgf0010.tif" wi="165" he="224" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0011" num="7"><img id="if0011" file="imgf0011.tif" wi="158" he="219" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
