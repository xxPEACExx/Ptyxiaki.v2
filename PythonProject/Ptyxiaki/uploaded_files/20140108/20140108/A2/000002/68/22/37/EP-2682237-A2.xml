<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682237-A2" country="EP" doc-number="2682237" kind="A2" date="20140108" family-id="48782176" file-reference-id="309446" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585979" ucid="EP-2682237-A2"><document-id><country>EP</country><doc-number>2682237</doc-number><kind>A2</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174469-A" is-representative="YES"><document-id mxw-id="PAPP154848171" load-source="docdb" format="epo"><country>EP</country><doc-number>13174469</doc-number><kind>A</kind><date>20130701</date><lang>EN</lang></document-id><document-id mxw-id="PAPP200340171" load-source="docdb" format="original"><country>EP</country><doc-number>13174469.0</doc-number><date>20130701</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553774" ucid="JP-2012151733-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012151733</doc-number><kind>A</kind><date>20120705</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1841949897" load-source="docdb">B25J   9/16        20060101AFI20170218BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1955216915" load-source="docdb" scheme="CPC">G05B2219/40519     20130101 LA20160330BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1955216956" load-source="docdb" scheme="CPC">G05B2219/40454     20130101 LA20160330BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1955221898" load-source="docdb" scheme="CPC">B25J   9/1664      20130101 LI20160331BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001017453" load-source="docdb" scheme="CPC">B25J   9/1633      20130101 FI20140102BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132362570" lang="DE" load-source="patent-office">Robotersteuerungsvorrichtung und Robotersteuerungsverfahren</invention-title><invention-title mxw-id="PT132362571" lang="EN" load-source="patent-office">Robot control apparatus and robot control method</invention-title><invention-title mxw-id="PT132362572" lang="FR" load-source="patent-office">Appareil et procédé de commande de robot</invention-title><citations><patent-citations><patcit mxw-id="PCIT242945674" load-source="docdb" ucid="JP-2011167827-A"><document-id format="epo"><country>JP</country><doc-number>2011167827</doc-number><kind>A</kind><date>20110901</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242945673" load-source="docdb" ucid="JP-4335286-B2"><document-id format="epo"><country>JP</country><doc-number>4335286</doc-number><kind>B2</kind><date>20090930</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919513027" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CANON KK</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919509997" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CANON KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR919016758" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Canon Kabushiki Kaisha</last-name><iid>101093230</iid><address><street>30-2 Shimomaruko 3-chome Ohta-ku</street><city>Tokyo 146-8501</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919540294" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>NAKAJIMA YOHJI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919543474" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>NAKAJIMA, YOHJI</last-name></addressbook></inventor><inventor mxw-id="PPAR919017382" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>NAKAJIMA, YOHJI</last-name><address><street>c/o CANON KABUSHIKI KAISHA 30-2, Shimomaruko 3-chome, Ohta-ku,</street><city>Tokyo,, Tokyo 146-8501</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919007736" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TBK-Patent</last-name><iid>100061560</iid><address><street>Bavariaring 4-6</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549761360" load-source="docdb">AL</country><country mxw-id="DS549832675" load-source="docdb">AT</country><country mxw-id="DS549761378" load-source="docdb">BE</country><country mxw-id="DS549754690" load-source="docdb">BG</country><country mxw-id="DS549755556" load-source="docdb">CH</country><country mxw-id="DS549842358" load-source="docdb">CY</country><country mxw-id="DS549832676" load-source="docdb">CZ</country><country mxw-id="DS549761379" load-source="docdb">DE</country><country mxw-id="DS549842359" load-source="docdb">DK</country><country mxw-id="DS549842360" load-source="docdb">EE</country><country mxw-id="DS549831561" load-source="docdb">ES</country><country mxw-id="DS549754691" load-source="docdb">FI</country><country mxw-id="DS549754692" load-source="docdb">FR</country><country mxw-id="DS549761380" load-source="docdb">GB</country><country mxw-id="DS549842361" load-source="docdb">GR</country><country mxw-id="DS549761413" load-source="docdb">HR</country><country mxw-id="DS549832677" load-source="docdb">HU</country><country mxw-id="DS549755561" load-source="docdb">IE</country><country mxw-id="DS549761414" load-source="docdb">IS</country><country mxw-id="DS549754701" load-source="docdb">IT</country><country mxw-id="DS549842366" load-source="docdb">LI</country><country mxw-id="DS549912705" load-source="docdb">LT</country><country mxw-id="DS549832682" load-source="docdb">LU</country><country mxw-id="DS549912706" load-source="docdb">LV</country><country mxw-id="DS549912707" load-source="docdb">MC</country><country mxw-id="DS549826274" load-source="docdb">MK</country><country mxw-id="DS549826275" load-source="docdb">MT</country><country mxw-id="DS549831566" load-source="docdb">NL</country><country mxw-id="DS549754702" load-source="docdb">NO</country><country mxw-id="DS549831567" load-source="docdb">PL</country><country mxw-id="DS549755562" load-source="docdb">PT</country><country mxw-id="DS549831568" load-source="docdb">RO</country><country mxw-id="DS549755563" load-source="docdb">RS</country><country mxw-id="DS549831569" load-source="docdb">SE</country><country mxw-id="DS549755564" load-source="docdb">SI</country><country mxw-id="DS549826276" load-source="docdb">SK</country><country mxw-id="DS549826277" load-source="docdb">SM</country><country mxw-id="DS549842367" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128674033" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A robot control apparatus controls a robot arm driven by transmitting drive forces to joints from respective electric motors so that the robot arm follows a specified trajectory, based on an instruction value instructed against the electric motors. A movable range of the robot arm is divided into multiple spaces, and constraint conditions including a constraint value of a jerk for each joint, which is determined so that a load torque applied to a transmitting component of the drive force falls within an allowable range in the multiple spaces, is calculated in advance. The constraint conditions are stored in a storage unit. A calculating unit generates the instruction values for the electric motors based on the trajectory by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.
<img id="iaf01" file="imgaf001.tif" wi="124" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128738315" lang="EN" source="EPO" load-source="docdb"><p>A robot control apparatus controls a robot arm driven by transmitting drive forces to joints from respective electric motors so that the robot arm follows a specified trajectory, based on an instruction value instructed against the electric motors. A movable range of the robot arm is divided into multiple spaces, and constraint conditions including a constraint value of a jerk for each joint, which is determined so that a load torque applied to a transmitting component of the drive force falls within an allowable range in the multiple spaces, is calculated in advance. The constraint conditions are stored in a storage unit. A calculating unit generates the instruction values for the electric motors based on the trajectory by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.</p></abstract><description mxw-id="PDES63960021" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">BACKGROUND OF THE INVENTION</heading><heading id="h0002">Field of the Invention</heading><p id="p0001" num="0001">The present invention relates to a robot control APPARATUS and method for controlling a robot arm that is driven to follow a specified trajectory, based on an instruction value to be instructed against a drive source corresponding to each of multiple joints.</p><heading id="h0003">Description of the Related Art</heading><p id="p0002" num="0002">In recent years, industrial robots that perform assembly and the like in a factory have been demanded to adapt to production speed improvement and complex movement, and have been demanded to increase their movement speed. In order to increase the movement speed of a robot, steep acceleration and deceleration is required in joint drive. On the other hand, the robot includes a speed reducer, a belt, a bearing, and the like as transmitting components for transmitting a drive force from a drive source (actuator) to a joint, but particularly the speed reducer generally has low rigidity, and hence vibration easily occurs when steep acceleration and deceleration is performed. When this vibration acts on the transmitting components, those transmitting components are overloaded, which is not preferred from the viewpoint of durability.</p><p id="p0003" num="0003">In view of this, there has been proposed an apparatus configured to estimate the load to be applied to the transmitting component during the robot movement by a disturbance observer, detect the overload through comparison<!-- EPO <DP n="2"> --> with a threshold value, and perform processing of protecting the robot when the overload is detected (see Japanese Patent No. <patcit id="pcit0001" dnum="JP4335286B"><text>4335286</text></patcit>).</p><p id="p0004" num="0004">Further, there has been proposed an apparatus configured to calculate the magnitude of the vibration in the robot based on vibration characteristics, optimize the trajectory by incorporating the magnitude of the vibration in an evaluation function, and control the robot with use of the optimized trajectory (see Japanese Patent Application Laid-Open No. <patcit id="pcit0002" dnum="JP2011167827A"><text>2011-167827</text></patcit>). With this, it is possible to reduce the vibration to be generated during the robot movement.</p><p id="p0005" num="0005">The technology described in Japanese Patent No. <patcit id="pcit0003" dnum="JP4335286B"><text>4335286</text></patcit> can protect the robot, but when the overload is detected during the robot movement, it is necessary to proceed to the processing of protecting the robot, which leads to a problem that the takt time is affected.</p><p id="p0006" num="0006">Further, the technology described in Japanese Patent Application Laid-Open No. <patcit id="pcit0004" dnum="JP2011167827A"><text>2011-167827</text></patcit> can reduce the vibration to be generated during the robot movement, but even if the vibration is reduced, the load torque that acts on the transmitting component is not always reduced. In other words, for example, as the rigidity of the transmitting component becomes higher, the vibration is reduced, and hence the movement speed may increase by the calculating method described in Japanese Patent Application Laid-Open No.<patcit id="pcit0005" dnum="JP2011167827A"><text> 2011-167827</text></patcit>, but when the transmitting component is brittle, the transmitting component may not be able to withstand the increased movement speed. That is, even when the trajectory to reduce the<!-- EPO <DP n="3"> --> vibration is calculated, the load torque to be applied to the transmitting component is not always reduced, and hence there is a problem in that the durability of the robot is not always improved through the reduction of the vibration.</p><heading id="h0004">SUMMARY OF THE INVENTION</heading><p id="p0007" num="0007">In view of the above, the present invention provides a robot control apparatus and method capable of improving durability of a robot without significantly affecting the takt time.</p><p id="p0008" num="0008">According to an exemplary embodiment of the present invention, there is provided a robot control apparatus, which is configured to control a robot arm to be driven by transmitting a drive force to each of multiple joints from each of drive sources corresponding thereto via a transmitting component so that the robot arm follows a specified trajectory, the control being carried out based on an instruction value to be instructed against the each of the drive sources, the robot control apparatus including: a storage unit for storing constraint conditions including a constraint value of a jerk for each of the multiple joints, the constraint conditions being determined so that, when a movable range of the robot arm is divided into multiple spaces, a load torque to be applied to the transmitting component falls within an allowable range in each of the multiple spaces; and a calculating unit for generating the instruction value based on the specified trajectory of the robot arm by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality<!-- EPO <DP n="4"> --> constraint.</p><p id="p0009" num="0009">Further, according to another exemplary embodiment of the present invention, there is provided a robot control method for controlling a robot arm to be driven by transmitting a drive force to each of multiple joints from each of drive sources corresponding thereto via a transmitting component so that the robot arm follows a specified trajectory, the control being carried out based on an instruction value to be instructed against the each of the drive sources, the robot control method including: storing, in a storage unit, constraint conditions including a constraint value of a jerk for each of the multiple joints, the constraint conditions being determined so that, when a movable range of the robot arm is divided into multiple spaces, a load torque to be applied to the transmitting component falls within an allowable range in each of the multiple spaces; and generating, by a calculating unit, the instruction value based on the specified trajectory of the robot arm by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.</p><p id="p0010" num="0010">Further features of the present invention will become apparent from the following description of exemplary embodiments with reference to the attached drawings.</p><heading id="h0005">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0011" num="0011"><figref idrefs="f0001">FIG. 1</figref> is an explanatory diagram illustrating a schematic configuration of a robot apparatus according to the present invention.</p><p id="p0012" num="0012"><figref idrefs="f0002">FIG. 2</figref> is a block diagram illustrating a configuration<!-- EPO <DP n="5"> --> of a robot control apparatus.</p><p id="p0013" num="0013"><figref idrefs="f0003">FIG. 3</figref> is a block diagram illustrating a configuration of a control unit according to a first embodiment of the present invention.</p><p id="p0014" num="0014"><figref idrefs="f0004">FIG. 4</figref> illustrates a relationship between a movable range of a robot arm and divided spaces.</p><p id="p0015" num="0015"><figref idrefs="f0005">FIG. 5</figref> is a flow chart illustrating instruction value calculating processing performed by an optimization calculating unit.</p><p id="p0016" num="0016"><figref idrefs="f0006">FIG. 6A</figref> is a graph showing an instruction value when the robot is controlled by the robot control apparatus according to the present invention to perform a movement.</p><p id="p0017" num="0017"><figref idrefs="f0006">FIG. 6B</figref> is a graph showing instruction acceleration when the robot is controlled by the robot control apparatus according to the present invention to perform a movement.</p><p id="p0018" num="0018"><figref idrefs="f0006">FIG. 6C</figref> is a graph showing instruction jerk when the robot is controlled by the robot control apparatus according to the present invention to perform a movement.</p><p id="p0019" num="0019"><figref idrefs="f0006">FIG. 6D</figref> is a graph showing the moment of inertia when the robot is controlled by the robot control apparatus according to the present invention to perform a movement.</p><p id="p0020" num="0020"><figref idrefs="f0006">FIG. 7</figref> is a graph showing joint torque when the robot is controlled by the robot control apparatus according to the present invention to perform a movement.</p><p id="p0021" num="0021"><figref idrefs="f0007">FIG. 8A</figref> is a graph showing the instruction value when the robot is controlled by a robot control apparatus according to the present invention with a constant jerk constraint value to perform a movement.<!-- EPO <DP n="6"> --></p><p id="p0022" num="0022"><figref idrefs="f0007">FIG. 8B</figref> is a graph showing the instruction acceleration when the robot is controlled by the robot control apparatus according to the present invention with the constant jerk constraint value to perform a movement.</p><p id="p0023" num="0023"><figref idrefs="f0007">FIG. 8C</figref> is a graph showing the instruction jerk when the robot is controlled by the robot control apparatus according to the present invention with the constant jerk constraint value to perform a movement.</p><p id="p0024" num="0024"><figref idrefs="f0007">FIG. 8D</figref> is a graph showing the moment of inertia when the robot is controlled by the robot control apparatus according to the present invention with the constant jerk constraint value to perform a movement.</p><p id="p0025" num="0025"><figref idrefs="f0007">FIG. 9</figref> is a graph showing the joint torque when the robot is controlled by the robot control apparatus with the constant jerk constraint value to perform a movement.</p><p id="p0026" num="0026"><figref idrefs="f0008">FIG. 10</figref> is a block diagram illustrating a configuration of a control unit according to a second embodiment of the present invention.</p><p id="p0027" num="0027"><figref idrefs="f0009">FIG. 11</figref> illustrates a case where teaching points are set to respective divided spaces.</p><p id="p0028" num="0028"><figref idrefs="f0009">FIG. 12</figref> is a table showing the movement pattern when the respective teaching points of <figref idrefs="f0009">FIG. 11</figref> are set to a starting point and an end point.</p><p id="p0029" num="0029"><figref idrefs="f0010">FIG. 13</figref> is a flow chart illustrating instruction value calculating processing according to the second embodiment.</p><p id="p0030" num="0030"><figref idrefs="f0011">FIG. 14</figref> is a block diagram illustrating a configuration of a control unit according to a third embodiment of the present invention.<!-- EPO <DP n="7"> --></p><p id="p0031" num="0031"><figref idrefs="f0012">FIG. 15</figref> is a flow chart illustrating jerk constraint value learning control according to the third embodiment.</p><heading id="h0006">DESCRIPTION OF THE EMBODIMENTS</heading><p id="p0032" num="0032">&lt;First Embodiment&gt;</p><p id="p0033" num="0033">In the following, a first embodiment of the present invention is described with reference to <figref idrefs="f0001 f0002 f0003 f0004 f0005 f0006 f0007">FIGS. 1 to 9</figref>. First, a schematic configuration of a robot apparatus is described. As illustrated in <figref idrefs="f0001">FIG. 1</figref>, a robot apparatus 100 includes a robot arm 200 serving as a multi-joint robot, and a robot control apparatus 300 for controlling the robot arm 200. Further, the robot apparatus 100 includes a teaching pendant 400 serving as a teaching apparatus for sending data of multiple teaching points to the robot control apparatus 300. The teaching pendant 400 is operated by human, and is used to specify movement (trajectory) of the robot arm 200 and operation of the robot control apparatus 300.</p><p id="p0034" num="0034">In this embodiment, the robot arm 200 is a 6-joint robot, for example. The robot arm 200 includes multiple (six) actuators 201 to 206 that rotationally drive joints J1 to J6 about joint axes A1 to A6 thereof, respectively. The robot arm 200 can direct its hand (tip of the robot arm) in an arbitrary three-directional posture at an arbitrary three-dimensional position within a movable range. In general, the position and the posture of the robot arm 200 can be expressed in a coordinate system. To in <figref idrefs="f0001">FIG. 1</figref> represents a coordinate system fixed to a pedestal of the robot arm 200, and Te represents a coordinate system fixed to the hand of the robot arm 200.<!-- EPO <DP n="8"> --></p><p id="p0035" num="0035">In this embodiment, the actuators 201 to 206 include electric motors 211 to 216 and speed reducers 221 to 226 connected to the electric motors 211 to 216, respectively. The speed reducers 221 to 226 are connected to frames to be driven by the joints J1 to J6, respectively, via a belt, a bearing, etc. (not shown). In this specification, those speed reducers 221 to 226, the belt, the bearing, and the like are defined as a "transmitting component" that transmits a drive force of a drive source (that is, the electric motors 211 to 216). Note that, the configuration of each of the actuators 201 to 206 is not limited thereto, and each of the actuators 201 to 206 may be formed of, for example, an artificial muscle.</p><p id="p0036" num="0036">In the first embodiment, a case where the respective joints J1 to J6 are rotary joints is described. In this case, the "joint position" means the angle of the joint. Note that, the respective joints may be prismatic joints. In this case, the "joint position" means the position of the prismatic joint. Similarly, the terms "joint speed," "joint acceleration," and "joint jerk" are used as time derivatives thereof.</p><p id="p0037" num="0037">The robot arm 200 further includes a servo control unit 230 serving as a drive control unit for controlling the drive of the electric motors 211 to 216 of the respective actuators 201 to 206. The servo control unit 230 outputs, based on the input instruction values, current instructions to the respective electric motors 211 to 216 so that the positions of the respective joints J1 to J6 follow the instruction values, to thereby control the operations of the electric motors 211 to 216. Note that, in this embodiment, the servo control unit 230 is<!-- EPO <DP n="9"> --> described as being configured of a single control unit, but servo control units corresponding to the respective electric motors 211 to 216 may be provided.</p><p id="p0038" num="0038">The robot control apparatus 300 receives, from the teaching pendant 400, input instructions of multiple teaching points (teaching point range) (in other words, specification of the trajectory). In order to cause each of the joints J1 to J6 of the robot arm 200 to sequentially follow the multiple teaching points for a movement, the robot control apparatus 300 generates, based on the teaching points, positional instructions to be output to the servo control unit 230 at given time intervals, and outputs the positional instructions at the given time intervals.</p><p id="p0039" num="0039">The teaching point is a vector (teaching point vector) containing the teaching positions of the respective joints (six joints) J1 to J6 as vector components. Further, the positional instruction finally obtained in the robot control apparatus 300 is a vector containing the goal positions of the respective joints (six joints) J1 to J6 as vector components. In this embodiment, the teaching point and the positional instruction are different in number of points, but are in the same dimension (unit).</p><p id="p0040" num="0040">In other words, the robot control apparatus 300 is configured to calculate a CP trajectory based on the input teaching points to generate a number of positional instructions in accordance with the trajectory, and output those positional instruction to the servo control unit 230 at given time intervals.<!-- EPO <DP n="10"> --></p><p id="p0041" num="0041">At this time, as is described in detail later, the robot control apparatus 300 performs optimization processing of adjusting the transit speed of the robot arm 200 on the trajectory determined based on the given teaching point range, within ranges of constraint conditions of speed, acceleration, torque, and the like of the respective joints J1 to J6 of the robot arm 200.</p><p id="p0042" num="0042"><figref idrefs="f0001">FIG. 1</figref> schematically illustrates four teaching points p<sub>1</sub>, p<sub>2</sub>, p<sub>3</sub>, and p<sub>4</sub>. The robot arm 200 moves along the trajectory determined based on the teaching points.</p><p id="p0043" num="0043"><figref idrefs="f0002">FIG. 2</figref> is a block diagram illustrating the configuration of the robot control apparatus 300. The robot control apparatus 300 is a computer including a CPU 301 serving as a calculating unit, a ROM 302, a RAM 303, a hard disk drive (HDD) 304, and a storage disk drive 305 serving as a storage unit, and various interfaces 306 to 309.</p><p id="p0044" num="0044">The CPU 301 is connected to the ROM 302, the RAM 303, the HDD 304, the storage disk drive 305, and the various interfaces 306 to 309 via a bus 310. The ROM 302 has a program 330 stored thereon, for operating the CPU 301. The program 330 is a program for causing respective units (see <figref idrefs="f0003">FIG. 3</figref>) of the CPU 301 to be described in detail later to execute various calculating processing. The RAM 303 is a storage unit for temporarily storing calculating processing results of the CPU 301. The HDD 304 is a storage unit for storing the calculating processing results and various data, and further storing the constraint conditions as a pre-calculated map.</p><p id="p0045" num="0045">The teaching pendant 400 is connected to the interface<!-- EPO <DP n="11"> --> 306, and the CPU 301 receives the input of data of teaching points from the teaching pendant 400 via the interface 306 and the bus 310.</p><p id="p0046" num="0046">The servo control unit 230 of the robot arm 200 is connected to the interface 309, and the CPU 301 outputs the data of the positional instructions at given time intervals to the servo control unit 230 via the bus 310 and the interface 309.</p><p id="p0047" num="0047">The interface 307 is connected to a monitor 321, and the monitor 321 displays various images. The interface 308 can be connected to an external storage unit 322 such as a rewritable non-volatile memory, external HDD, and the like. The storage disk drive 305 can read out various data, program, and the like stored in a storage disk (storage medium) 331. The storage medium having a program stored thereon according to the present invention is not limited to only the storage disk 331, and also includes a non-volatile memory and an external HDD, such as the external storage unit 322.</p><p id="p0048" num="0048">Next, respective functions of a CPU (calculating unit) 301<sub>1</sub> of the first embodiment are described with reference to <figref idrefs="f0003">FIG. 3</figref>. In the first embodiment, the program 330 causes the CPU 301<sub>1</sub> to function as a teaching point range acquiring unit 301a, an optimization calculating unit 301b, a jerk constraint value storing unit 301c, and an instruction value generating unit 301d.</p><p id="p0049" num="0049">The teaching point range acquiring unit 301a acquires information on teaching point range which is range of points including teaching points instructed from the teaching pendant 400 and teaching points, which is generated through complement among the instructed teaching points. The information on the<!-- EPO <DP n="12"> --> teaching point range can also be said as an aggregate of teaching points set for the respective six joints, in other words, data of the trajectory of the robot arm 200.</p><p id="p0050" num="0050">The jerk constraint value storing unit 301c reads out, based on the teaching points acquired by the teaching point range acquiring unit 301a, a jerk constraint value from the constraint conditions stored in the HDD 304. The constraint conditions including the jerk constraint value stored in the HDD 304 are calculated in advance and stored as a map.</p><p id="p0051" num="0051">When the constraint conditions are calculated in advance, the movable range of the robot arm 200 is divided into multiple spaces, and the jerk constraint value of each joint is calculated so that the load torque to be applied to the above-mentioned transmitting component (speed reducer, belt, bearing, etc.) falls within an allowable range in each space. An example of a case where the movable range of the robot arm 200 is divided into four spaces is described.</p><p id="p0052" num="0052">As illustrated in <figref idrefs="f0004">FIG. 4</figref>, the movable range of the robot arm 200 is divided into four spaces 1306A, 1306B, 1306C, and 1306D. The jerk constraint value is calculated for each of the four spaces 1306A, 1306B, 1306C, and 1306D so that the load torque to be generated on the transmitting component, including the moment of inertia based on the posture of the robot arm 200, falls within an allowable range.</p><p id="p0053" num="0053">The moment of inertia generated on the robot arm 200 is small when the robot arm 200 moves in a bent state, and is large when the robot arm 200 moves in an extended state, for example. Therefore, the moment of inertia is calculated in<!-- EPO <DP n="13"> --> detail based on the posture of the robot arm 200.</p><p id="p0054" num="0054">Further, whether or not the load torque to be generated on the transmitting component falls within the allowable range can be calculated based on the rigidity, the brittleness, the elasticity, etc. of each part of the transmitting component, but when the value of durability with respect to the load torque as a product (for example, a catalog value) is known, this value may be used.</p><p id="p0055" num="0055">After the jerk constraint values as constraint conditions for the four spaces 1306A, 1306B, 1306C, and 1306D are calculated in advance as described above, those constraint conditions (jerk constraint values) are stored in the HDD 304 (constraint condition storing step). With this, in the HDD 304, the jerk constraint values adopted when the joints J1 to J6 transit through the respective spaces are set in advance. For example, when a hand 1301 of the robot arm 200 moves to a teaching point 1307, the robot arm 200 moves from the space 1306D to the space 1306B, and hence the jerk constraint values for the respective joints J1 to J6 are switched at a boundary 1308. Note that, in this embodiment, the case where the movable range is divided into four spaces is described, but as a matter of course, as the number of divided spaces increases, further satisfactory constraint conditions can be set.</p><p id="p0056" num="0056">As described above, the jerk constraint value storing unit 301c acquires, based on the teaching point range, the jerk constraint values adopted when the joints J1 to J6 transit through the respective spaces. Then, the optimization calculating unit 301b starts calculation of an optimum<!-- EPO <DP n="14"> --> instruction value of the robot arm 200 based on the teaching point range and the jerk constraint values. When the optimization calculating unit 301b calculates the optimum instruction value, an optimization problem is solved with the acquired jerk constraint values as inequality constraints, and thus the trajectory is calculated. Note that, "solving the optimization problem" means to determine an optimum convergence value pursued to satisfy the durability and the takt time as described in detail later.</p><p id="p0057" num="0057">Specifically, as illustrated in <figref idrefs="f0005">FIG. 5</figref>, the optimization calculating unit 301b first sets a transit time t at each teaching point of the teaching point range (S11). Subsequently, with respect to the set transit time, a position (angle) θ, speed v, acceleration α, jerk Δα, and torque T of the joint for each point are calculated (S12). Note that, the values of the position (angle) θ, the speed v, the acceleration α, and the jerk Δα of the joint for each point may all be expressed by a vector in which the values for all the joints are vertically arranged. Further, the torque T of the joint can be calculated by substituting the position θ, the speed v, and the acceleration α of the joint into an equation of motion of the robot arm 200.</p><p id="p0058" num="0058">Subsequently, it is determined whether or not the jerk Δα satisfies the constraint condition, that is, whether or not the absolute value of the jerk Δα is smaller than the absolute value of the jerk constraint value acquired by the jerk constraint value storing unit 301c (inequality constraint) (S13). When the constraint condition is not satisfied (No in S13), the<!-- EPO <DP n="15"> --> transit time t of the teaching point is adjusted (S14), and the calculation is repeated until the constraint condition is satisfied (that is, the optimization problem is solved). With this, the constraint condition is eventually satisfied (Yes in S13), and thus the instruction value for each of the joints (electric motors 211 to 216) to accomplish the shortest time period for the movement of the robot arm 200 can be obtained (determined) (S15).</p><p id="p0059" num="0059">Then, the determined instruction value is sent to the instruction value generating unit 301d illustrated in <figref idrefs="f0004">FIG. 4</figref>, and the instruction value generating unit 301d that has received the instruction value generates an instruction value to be sent to the servo control unit 230 (see <figref idrefs="f0002">FIG. 2</figref>) (instruction value generating step). The instruction value is instructed against each of the joints (electric motors 211 to 216), to thereby control the robot arm 200 to follow the trajectory instructed by the teaching pendant 400.</p><p id="p0060" num="0060">The effects to be obtained when the robot arm 200 is controlled with the optimized instruction value as described above are verified with reference to <figref idrefs="f0006 f0007">FIGS. 6A to 9</figref>. The case illustrated in <figref idrefs="f0007">FIGS. 8A to 9</figref> is an example of experimental values in a case where the instruction value is calculated with a fixed jerk constraint value in the entire region, and one joint of the robot arm 200 is driven so as to follow a given trajectory. The instruction value (value of the joint angle) at this time changes as shown in <figref idrefs="f0007">FIG. 8A</figref>. Further, at this time, the acceleration αchanges as shown in <figref idrefs="f0007">FIG. 8B</figref>, the jerk changes as shown in <figref idrefs="f0007">FIG. 8C</figref>, and the moment of inertia is generated on<!-- EPO <DP n="16"> --> the joint as shown in <figref idrefs="f0007">FIG. 8D</figref>. In this case, as understood from <figref idrefs="f0007">FIG. 9</figref>, the torque generated on the joint when the joint is accelerated exceeds an allowable range AR, whereas the torque generated on the joint when the joint is decelerated has too much margin with respect to the allowable range AR.</p><p id="p0061" num="0061"><figref idrefs="f0006">FIGS. 6A to 7</figref> show experimental values in a case where the instruction value set by the robot control apparatus 300 according to this embodiment is used to similarly drive one joint of the robot arm 200 so as to follow a given trajectory. The instruction value (value of the joint angle) at this time changes as shown in <figref idrefs="f0006">FIG. 6A</figref>. Further, at this time, the acceleration αchanges as shown in <figref idrefs="f0006">FIG. 6B</figref>, the jerk changes as shown in <figref idrefs="f0006">FIG. 6C</figref>, and the moment of inertia is generated on the joint as shown in <figref idrefs="f0006">FIG. 6D</figref>.</p><p id="p0062" num="0062">That is, as understood from <figref idrefs="f0006">FIG. 6C</figref>, in this embodiment, the jerk value is small when the joint is accelerated, and is large when the joint is decelerated. This is because the constraint conditions stored in advance in the HDD 304 are set so that the jerk constraint value is small when the moment of inertia is large and the jerk constraint value is large when the moment of inertia is small. With this, even when the robot arm 200 is controlled to follow the same trajectory as in the case shown in <figref idrefs="f0007">FIGS. 8A to 9</figref>, as understood from <figref idrefs="f0006">FIG. 7</figref>, the torque generated on the joint falls within the allowable range AR (present within the allowable range). In particular, when the joint is accelerated, the instruction jerk is reduced to suppress the load torque to be generated on the joint, and when the joint is decelerated, the instruction jerk is increased<!-- EPO <DP n="17"> --> within the allowable range AR, so that the deceleration time period can be reduced.</p><p id="p0063" num="0063">As described above, in the robot control apparatus 300, the HDD 304 serving as the storage unit stores the constraint conditions determined so that the load torque to be applied to the transmitting component falls within the allowable range AR. Then, the CPU 301 serving as the calculating unit generates, based on the trajectory of the robot arm 200, the instruction value from the stored constraint conditions. With this, in the robot apparatus 100 controlled with the instruction value, the load torque to be applied to the transmitting component is prevented from exceeding the allowable range AR during movement. Further, it is unnecessary to perform processing of protecting the robot arm 200 during the movement, so that the takt time may be prevented from being significantly affected. Since the load torque to be applied to the transmitting component is prevented from exceeding the allowable range AR during movement, the durability of the robot arm 200 may be improved. Furthermore, the robot arm 200 is controlled to be driven with the optimized instruction value in a state in which the load torque to be applied to the transmitting component falls within the allowable range AR, and hence the shortest takt time can be accomplished without impairing the durability.</p><p id="p0064" num="0064">&lt;Second Embodiment&gt;</p><p id="p0065" num="0065">Subsequently, a second embodiment of the present invention, which is obtained by partially changing the above-mentioned first embodiment, is described with reference to <figref idrefs="f0008 f0009 f0010">FIGS. 10 to 13</figref>. Note that, in the description of the second<!-- EPO <DP n="18"> --> embodiment, parts similar to those of the first embodiment are denoted by the same reference symbols, and description thereof is omitted.</p><p id="p0066" num="0066">The second embodiment differs from the first embodiment in that the robot control apparatus 300 according to the second embodiment is configured to simulate, based on the calculation of the load torque using a dynamics model, whether or not the instruction value calculated in the optimization calculating unit 301b satisfies the constraint conditions. As a result of the simulation using the dynamics model by a dynamics simulator (movement simulator), in a case where the constraint conditions are not satisfied when the robot arm 200 is driven with the instruction value, the constraint conditions (jerk constraint value) are updated.</p><p id="p0067" num="0067">Specifically, as illustrated in <figref idrefs="f0008">FIG. 10</figref>, a CPU 301<sub>2</sub> serving as the calculating unit in the second embodiment functions as the following units in addition to the teaching point range acquiring unit 301a, the optimization calculating unit 301b, the jerk constraint value storing unit 301c, and the instruction value generating unit 301d. That is, the CPU 301<sub>2</sub> functions, between the optimization calculating unit 301b and the instruction value generating unit 301d, as a provisional instruction value generating unit 301e, a dynamics simulator unit 301f, a load torque calculating unit 301g, a condition satisfaction determining unit 301h, and a jerk updating unit 301i.</p><p id="p0068" num="0068">As illustrated in <figref idrefs="f0010">FIG. 13</figref>, when the calculation control of the robot control apparatus 300 is started, first,<!-- EPO <DP n="19"> --> the teaching point range is specified by the teaching pendant 400 (S21). Then, the optimization calculating unit 301b solves the optimization problem similarly to the case of the first embodiment (S11 to S15 of <figref idrefs="f0005">FIG. 5</figref>) to determine the instruction value. Then, the provisional instruction value generating unit 301e generates the instruction value calculated by the optimization calculating unit 301b as a provisional instruction value (S22).</p><p id="p0069" num="0069">Subsequently, the dynamics simulator unit 301f inputs the provisional instruction value into a dynamics simulator including a robot arm model, and the load torque calculating unit 301g calculates and determines the load torque of the transmitting component based on the calculation results of the dynamics simulator (S23).</p><p id="p0070" num="0070">The calculation of the dynamics simulator (simulation) is now described with reference to <figref idrefs="f0009">FIGS. 11 and 12</figref>. As illustrated in <figref idrefs="f0009">FIG. 11</figref>, the movable range of the robot arm 200 is divided into multiple spaces (for example, four spaces), and points 1302, 1303, 1304, and 1305 as center points of the respective spaces 1306A, 1306B, 1306C, 1306D are set as the teaching points.</p><p id="p0071" num="0071">It is impossible to move through all of the spaces in one movement, and hence in order to set optimum jerk constraint values for all of the spaces, multiple movements are required to be simulated. <figref idrefs="f0009">FIG. 12</figref> shows a table in which a starting point and an end point are set so that all of the movements among those center points can be realized.</p><p id="p0072" num="0072">For example, the movement between the teaching point<!-- EPO <DP n="20"> --> 1302 and the teaching point 1303 has different loads of the transmitting component on the way to and from the point. Therefore, for example, when the movable range is divided into four spaces, teaching point ranges (trajectories) for 12 different movements are created, and dynamics simulation calculation for each teaching point range is performed based on a provisional instruction value, whereby the load torque in each of movements 1 to 12 is calculated.</p><p id="p0073" num="0073">After the dynamics simulator unit 301f performs the dynamics simulation calculation as described above to determine the simulated load torque, the condition satisfaction determining unit 301h determines whether or not the constraint conditions are satisfied (S24). The case where the simulated load torque of the transmitting component is out of the tolerance (No in S24) means any one of the case where the load torque of the transmitting component is so large that the durability may be affected, and the case where the load torque of the transmitting component is too small and the movement time period is long.</p><p id="p0074" num="0074">In this case, the jerk updating unit 301i instructs the jerk constraint value storing unit 301c to change (update) the jerk constraint value, to thereby revise the jerk constraint value corresponding to the teaching points range stored in the HDD 304 (S25). Then, the calculation processing of Steps S22 to S24 is performed again, and the calculation is repeated until the jerk constraint value is not revised. The revising amount of the jerk constraint value can be determined with use of the calculation results of the dynamics simulation. With this<!-- EPO <DP n="21"> --> repeated calculation, the optimum jerk constraint value in a space through which the robot arm 200 transits during a certain movement is determined.</p><p id="p0075" num="0075">Then, when the simulated load torque of the transmitting component falls within the tolerance (Yes in S24), the jerk constraint value at this time is stored in the HDD 304 (S26). Further, the instruction value generating unit 301d determines the provisional instruction value at this time as the instruction value (that is, generates the instruction value) (S27), and thus the instruction value calculation control is ended.</p><p id="p0076" num="0076">With this, the robot arm 200 is actually moved with the instruction value determined based on the calculation by the dynamics simulator, and hence the load torque to be applied to the transmitting component is more reliably prevented from exceeding the allowable range AR during the movement. Further, the robot arm 200 is controlled to be driven with the instruction value optimized by the dynamics simulator in a state in which the load torque to be applied to the transmitting component falls within the allowable range AR, and hence the takt time can be set further shorter without impairing the durability.</p><p id="p0077" num="0077">Note that, the configurations, actions, and effects other than the above are similar to those in the first embodiment, and hence description thereof is omitted.</p><p id="p0078" num="0078">&lt;Third Embodiment&gt;</p><p id="p0079" num="0079">Subsequently, a third embodiment of the present invention, which is obtained by partially changing the above-mentioned<!-- EPO <DP n="22"> --> first embodiment, is described with reference to <figref idrefs="f0011">FIGS. 14</figref> and <figref idrefs="f0012">15</figref>. Note that, in the description of the third embodiment, parts similar to those of the first embodiment are denoted by the same reference symbols, and description thereof is omitted.</p><p id="p0080" num="0080">The third embodiment differs from the first embodiment in that the robot control apparatus 300 according to the third embodiment is configured to calculate the torque generated when the robot arm 200 is actually driven, and learn the constraint conditions when the constraint conditions are not achieved.</p><p id="p0081" num="0081">Specifically, as illustrated in <figref idrefs="f0011">FIG. 14</figref>, a CPU 301<sub>3</sub> serving as the calculating unit in the third embodiment functions as the following units in addition to the teaching point range acquiring unit 301a, the optimization calculating unit 301b, the jerk constraint value storing unit 301c, and the instruction value generating unit 301d. That is, the CPU 301<sub>3</sub> functions, after the instruction value generating unit 301d, as an electric motor control value acquiring unit 301j, a generating torque calculating unit 301k, a condition achievement determining unit 301m, and a jerk learning unit 301n.</p><p id="p0082" num="0082">As illustrated in <figref idrefs="f0012">FIG. 15</figref>, when the learning control of the robot control apparatus 300 is started, first, the teaching point range is specified by the teaching pendant 400 (S31). Then, the optimization calculating unit 301b solves the optimization problem similarly to the case of the first embodiment (S11 to S15 of <figref idrefs="f0005">FIG. 5</figref>) to determine the instruction value (S32).</p><p id="p0083" num="0083">Subsequently, the robot control apparatus 300 sends<!-- EPO <DP n="23"> --> the instruction value to the servo control unit 230 so as to control the drive of the electric motors 211 to 216, and causes the robot arm 200 to move so that the robot arm 200 follows the teaching point range (trajectory) specified by the teaching pendant 400. Then, the load torque of each transmitting component (speed reducer, belt, bearing, etc.) during the movement is calculated (S33).</p><p id="p0084" num="0084">Specifically, when the load torque of the transmitting component is calculated, the electric motor control value acquiring unit 301j acquires control values (motor output and motor angle) for the electric motors 211 to 216 based on the instruction value sent to the servo control unit 230. Then, the generating torque calculating unit 301k calculates the torque to be generated on each transmitting component based on the control values for the electric motors 211 to 216, and sets the calculated torque as the load torque.</p><p id="p0085" num="0085">After the generating torque calculating unit 301k determines the load torque actually generated on the robot arm 200 as described above, the condition achievement determining unit 301m determines whether or not the constraint conditions are satisfied (achieved) (S34). The case where the load torque actually generated on the transmitting component is out of the tolerance (No in S34) means any one of the case where the load torque of the transmitting component is so large that the durability may be affected through repetitive execution of the movement, and the case where the load torque of the transmitting component is too small and the movement time period is long.</p><p id="p0086" num="0086">In this case, the jerk learning unit 301n instructs<!-- EPO <DP n="24"> --> the jerk constraint value storing unit 301c to learn (update) the jerk constraint value, to thereby revise the jerk constraint value corresponding to the teaching point range stored in the HDD 304 (S35). The revising amount of the jerk constraint value can be determined with use of the calculation results of the generating torque calculated by the generating torque calculating unit 301k. Such a learning control is repeated to the same movement of the robot arm 200, so that the optimum jerk constraint value in a space through which the robot arm 200 transits during this movement is learned.</p><p id="p0087" num="0087">Further, when the load torque actually generated on the transmitting component falls within the tolerance (Yes in S34), it means that the previous results of the learning control during the movement are satisfactory, and hence the control is directly ended without revising the jerk constraint value.</p><p id="p0088" num="0088">As described above, the learning control is performed with the load torque generated when the robot arm 200 is actually moved, and hence the load torque to be applied to the transmitting component during the subsequent movements can be prevented from exceeding the allowable range AR. Further, the robot arm 200 is controlled to be driven with the instruction value optimized by the learning control in a state in which the load torque to be applied to the transmitting component falls within the allowable range AR, and hence the takt time can be set further shorter without impairing the durability.</p><p id="p0089" num="0089">Note that, the configurations, actions, and effects other than the above are similar to those in the first embodiment, and hence description thereof is omitted.<!-- EPO <DP n="25"> --></p><p id="p0090" num="0090">In the first to third embodiments described above, the case where the jerk constraint value for each joint in each space is set as the constraint conditions is described, but the present invention is not limited thereto, and an acceleration constraint value of each joint, a speed constraint value of each joint, and the like may be added to the constraint conditions. With this, a further optimum instruction value can be determined.</p><p id="p0091" num="0091">Further, as the constraint conditions, the jerk constraint value for each joint with respect to the workpiece weight, the moving distance, and the movement direction for each moving distance may be added. With this setting, a further optimum instruction value may be determined. For example, the workpiece weight may be set as 1 kg, 1.5 kg, and 2 kg, and the movement pattern may be increased up to three times. Through calculation under those settings, the optimum jerk constraint value for each space and weight can be determined.</p><p id="p0092" num="0092">In the first to third embodiments described above, the case where the teaching point range is represented by the positions of the respective joints is described. However, in a case where the teaching point range is represented by the position and posture in a three-dimensional space, the position and posture may be converted into the positions of the respective joints through inverse-kinematic calculation.</p><p id="p0093" num="0093">In the first to third embodiments described above, as a method for optimizing the instruction value (constraint condition), a method of adjusting the transit time for each teaching point and repeating the calculation until the constraint conditions are satisfied is described. It is<!-- EPO <DP n="26"> --> conceivable to use time in the evaluation function for the optimization at this time to determine the trajectory that accomplishes the shortest time period.</p><p id="p0094" num="0094">In the first to third embodiments described above, the case where the movable range of the robot arm 200 is divided into four spaces is described as an example, but it is needless to say that a further optimum trajectory can be determined as the number of divided spaces is increased. Note that, when the number of divided spaces is increased as described above or the number of the constraint conditions (constraint values) is increased, the calculation time period is increased, but the calculation of the constraint condition itself is performed prior to the robot arm movement, and hence the calculation does not affect the time period for the robot arm movement.</p><p id="p0095" num="0095">In the first to third embodiments described above, the case where the robot arm 200 is a 6-joint robot including six joints is described, but the number of joints is not limited thereto. Further, the drive direction of the joint is not limited to drive in the rotational direction, and includes drive in a linear motion direction (extending and contracting drive).</p><p id="p0096" num="0096">Other embodiments</p><p id="p0097" num="0097">Embodiments of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions recorded on a storage medium (e.g., non-transitory computer-readable storage medium) to perform the functions of one or more of the above-described embodiment(s) of the present invention, and by a method performed by the computer of the system or apparatus by,<!-- EPO <DP n="27"> --> for example, reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above-described embodiment(s). The computer may comprise one or more of a central processing unit (CPU), micro processing unit (MPU), or other circuitry, and may include a network of separate computers or separate computer processors. The computer executable instructions may be provided to the computer, for example, from a network or the storage medium. The storage medium may include, for example, one or more of a hard disk, a random-access memory (RAM), a read only memory (ROM), a storage of distributed computing systems, an optical disk (such as a compact disc (CD), digital versatile disc (DVD), or Blu-ray Disc (BD)™), a flash memory device, a memory card, and the like.</p><p id="p0098" num="0098">According to the present invention, the storage unit stores the constraint conditions determined so that the load torque to be applied to the transmitting component falls within the allowable range, and the calculating unit generates, based on the trajectory of the robot arm, the instruction value from the stored constraint conditions. With this, in the robot arm controlled with the generated instruction value, the load torque to be applied to the transmitting component is prevented from exceeding the allowable range during movement, and it is unnecessary to perform processing of protecting the robot arm during the movement. Thus, the takt time may be prevented from being significantly affected. Further, since the load torque to be applied to the transmitting component is prevented from exceeding the allowable range during the movement, the durability of the robot arm may be improved.<!-- EPO <DP n="28"> --></p><p id="p0099" num="0099">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.<br/>
A robot control apparatus controls a robot arm driven by transmitting drive forces to joints from respective electric motors so that the robot arm follows a specified trajectory, based on an instruction value instructed against the electric motors. A movable range of the robot arm is divided into multiple spaces, and constraint conditions including a constraint value of a jerk for each joint, which is determined so that a load torque applied to a transmitting component of the drive force falls within an allowable range in the multiple spaces, is calculated in advance. The constraint conditions are stored in a storage unit. A calculating unit generates the instruction values for the electric motors based on the trajectory by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.</p></description><claims mxw-id="PCLM56983078" lang="EN" load-source="patent-office"><!-- EPO <DP n="29"> --><claim id="c-en-0001" num="0001"><claim-text>A robot control apparatus, which is configured to control a robot arm to be driven by transmitting a drive force to each of multiple joints from each of drive sources corresponding thereto via a transmitting component so that the robot arm follows a specified trajectory, the control being carried out based on an instruction value to be instructed against the each of the drive sources, the robot control apparatus comprising:
<claim-text>a storage unit configured to store constraint conditions including a constraint value of a jerk for each of the multiple joints, the constraint conditions being determined so that, when a movable range of the robot arm is divided into multiple spaces, a load torque to be applied to the transmitting component falls within an allowable range in each of the multiple spaces; and</claim-text>
<claim-text>a calculating unit configured to generate the instruction value based on the specified trajectory of the robot arm by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>A robot control apparatus according to claim 1,<br/>
wherein the calculating unit is configured to allow a performance of a movement simulator that calculates a dynamics model for the each of the multiple spaces to be obtained when the robot arm is controlled based on the instruction value, and to calculate the constraint conditions based on the load torque<!-- EPO <DP n="30"> --> to be applied to the transmitting component, the load torque being determined based on the dynamics model calculated by the movement simulator, and<br/>
wherein the storage unit is configured to update the constraint conditions to the constraint conditions calculated by the movement simulator.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>A robot control apparatus according to claim 1,<br/>
wherein the calculating unit is configured to determine the load torque to be actually applied to the transmitting component when the robot arm is controlled based on the instruction value, and to calculate the constraint conditions based on the load torque to be actually applied to the transmitting component, and<br/>
wherein the storage unit is configured to update the constraint conditions to the constraint conditions calculated based on the load torque to be actually applied to the transmitting component.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>A robot apparatus, comprising:
<claim-text>a robot arm; and</claim-text>
<claim-text>the robot control apparatus according to claim 1, which is configured to control the robot arm.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A robot control method for controlling a robot arm to be driven by transmitting a drive force to each of multiple joints from each of drive sources corresponding thereto via a transmitting component so that the robot arm follows a specified trajectory, the control being carried out based on an<!-- EPO <DP n="31"> --> instruction value to be instructed against the each of the drive sources, the robot control method comprising:
<claim-text>storing, in a storage unit, constraint conditions including a constraint value of a jerk for each of the multiple joints, the constraint conditions being determined so that, when a movable range of the robot arm is divided into multiple spaces, a load torque to be applied to the transmitting component falls within an allowable range in each of the multiple spaces; and</claim-text>
<claim-text>generating, by a calculating unit, the instruction value based on the specified trajectory of the robot arm by solving an optimization problem that uses the constraint conditions stored in the storage unit as an inequality constraint.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>A program for causing a computer to execute the storing of the constraint conditions and the generating of the instruction value of the robot control method according to claim 5.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A computer readable non-transitory storage medium having the program according to claim 6 stored thereon.</claim-text></claim></claims><drawings mxw-id="PDW16671380" load-source="patent-office"><!-- EPO <DP n="32"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="186" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="165" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="172" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="172" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="146" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0006" num="6A,6B,6C,6D,7"><img id="if0006" file="imgf0006.tif" wi="153" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0007" num="8A,8B,8C,8D,9"><img id="if0007" file="imgf0007.tif" wi="156" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0008" num="10"><img id="if0008" file="imgf0008.tif" wi="165" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0009" num="11,12"><img id="if0009" file="imgf0009.tif" wi="165" he="216" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0010" num="13"><img id="if0010" file="imgf0010.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0011" num="14"><img id="if0011" file="imgf0011.tif" wi="165" he="161" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0012" num="15"><img id="if0012" file="imgf0012.tif" wi="165" he="180" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
