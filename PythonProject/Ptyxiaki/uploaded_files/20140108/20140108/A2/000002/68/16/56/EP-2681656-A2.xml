<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681656-A2" country="EP" doc-number="2681656" kind="A2" date="20140108" family-id="44626788" file-reference-id="311163" date-produced="20180822" status="corrected" lang="DE"><bibliographic-data><publication-reference fvid="146586150" ucid="EP-2681656-A2"><document-id><country>EP</country><doc-number>2681656</doc-number><kind>A2</kind><date>20140108</date><lang>DE</lang></document-id></publication-reference><application-reference ucid="EP-11723897-A" is-representative="NO"><document-id mxw-id="PAPP154848342" load-source="docdb" format="epo"><country>EP</country><doc-number>11723897</doc-number><kind>A</kind><date>20110517</date><lang>DE</lang></document-id><document-id mxw-id="PAPP196210816" load-source="docdb" format="original"><country>EP</country><doc-number>11723897.2</doc-number><date>20110517</date><lang>DE</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140551993" ucid="EP-2011057931-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2011057931</doc-number><kind>W</kind><date>20110517</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989320756" load-source="docdb">G06F   9/50        20060101ALI20130502BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989322974" load-source="docdb">G06F   9/48        20060101AFI20130502BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1978019283" load-source="docdb" scheme="CPC">G06F   9/5061      20130101 LI20160123BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1978019284" load-source="docdb" scheme="CPC">G06F   9/4887      20130101 LI20160123BHEP        </classification-cpc><classification-cpc mxw-id="PCL2065211796" load-source="docdb" scheme="CPC">G06F   9/4881      20130101 FI20140320BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363083" lang="DE" load-source="patent-office">MULTICORE HOST-SYSTEM MIT EINER ECHTZEIT-ERWEITERUNG UND VERFAHREN ZUM BETREIBEN EINES SOLCHEN HOST-SYSTEMS</invention-title><invention-title mxw-id="PT132363084" lang="EN" load-source="patent-office">MULTICORE HOST-SYSTEM MIT EINER ECHZEIT-ERWEITERUNG UND VERFAHREN ZUM BETREIBEN EINES SOLCHEN HOST-SYSTEMS</invention-title><invention-title mxw-id="PT132363085" lang="FR" load-source="patent-office">ORDINATEUR HÔTE MULTICOEUR DOTÉ D'UNE EXTENSION TEMPS RÉEL ET PROCÉDÉ DE FONCTIONNEMENT D'UN TEL ORDINATEUR HÔTE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919543372" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SIEMENS AG</last-name><address><country>DE</country></address></addressbook></applicant><applicant mxw-id="PPAR919529244" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SIEMENS AKTIENGESELLSCHAFT</last-name></addressbook></applicant><applicant mxw-id="PPAR919016883" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Siemens Aktiengesellschaft</last-name><iid>101233967</iid><address><street>Wittelsbacherplatz 2</street><city>80333 München</city><country>DE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919508049" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HARTMANN WOLFGANG</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR919533569" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HARTMANN, WOLFGANG</last-name></addressbook></inventor><inventor mxw-id="PPAR919008099" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HARTMANN, WOLFGANG</last-name><address><street>Röthenäcker Str. 11</street><city>91086 Aurachtal</city><country>DE</country></address></addressbook></inventor></inventors></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2011057931-W"><document-id><country>EP</country><doc-number>2011057931</doc-number><kind>W</kind><date>20110517</date><lang>DE</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012155963-A2"><document-id><country>WO</country><doc-number>2012155963</doc-number><kind>A2</kind><date>20121122</date><lang>DE</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549845792" load-source="docdb">AL</country><country mxw-id="DS549833901" load-source="docdb">AT</country><country mxw-id="DS549845793" load-source="docdb">BE</country><country mxw-id="DS549913517" load-source="docdb">BG</country><country mxw-id="DS549765218" load-source="docdb">CH</country><country mxw-id="DS549833570" load-source="docdb">CY</country><country mxw-id="DS549833906" load-source="docdb">CZ</country><country mxw-id="DS549845798" load-source="docdb">DE</country><country mxw-id="DS549833571" load-source="docdb">DK</country><country mxw-id="DS549833572" load-source="docdb">EE</country><country mxw-id="DS549757582" load-source="docdb">ES</country><country mxw-id="DS549913518" load-source="docdb">FI</country><country mxw-id="DS549913519" load-source="docdb">FR</country><country mxw-id="DS549845799" load-source="docdb">GB</country><country mxw-id="DS549833573" load-source="docdb">GR</country><country mxw-id="DS549845800" load-source="docdb">HR</country><country mxw-id="DS549833907" load-source="docdb">HU</country><country mxw-id="DS549765219" load-source="docdb">IE</country><country mxw-id="DS549845801" load-source="docdb">IS</country><country mxw-id="DS549913520" load-source="docdb">IT</country><country mxw-id="DS549833578" load-source="docdb">LI</country><country mxw-id="DS549834677" load-source="docdb">LT</country><country mxw-id="DS549833908" load-source="docdb">LU</country><country mxw-id="DS549834682" load-source="docdb">LV</country><country mxw-id="DS549834683" load-source="docdb">MC</country><country mxw-id="DS549756979" load-source="docdb">MK</country><country mxw-id="DS549756980" load-source="docdb">MT</country><country mxw-id="DS549833909" load-source="docdb">NL</country><country mxw-id="DS549845822" load-source="docdb">NO</country><country mxw-id="DS549833579" load-source="docdb">PL</country><country mxw-id="DS549834684" load-source="docdb">PT</country><country mxw-id="DS549833914" load-source="docdb">RO</country><country mxw-id="DS549834685" load-source="docdb">RS</country><country mxw-id="DS549833580" load-source="docdb">SE</country><country mxw-id="DS549834690" load-source="docdb">SI</country><country mxw-id="DS549845823" load-source="docdb">SK</country><country mxw-id="DS549833581" load-source="docdb">SM</country><country mxw-id="DS549756985" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA102349761" ref-ucid="WO-2012155963-A2" lang="DE" load-source="patent-office"><p num="0000">Gemäß einem exemplarischen Aspekt wird ein Host-System mit einer Mehrzahl von Cores geschaffen, welches derart eingerichtet ist, dass auf jedem der Mehrzahl von Cores jeweils ein Echtzeitprozess und jeweils ein Core-lokaler Timer laufen.</p></abstract><abstract mxw-id="PA102726290" ref-ucid="WO-2012155963-A2" lang="DE" source="national office" load-source="docdb"><p>Gemäß einem exemplarischen Aspekt wird ein Host-System mit einer Mehrzahl von Cores geschaffen, welches derart eingerichtet ist, dass auf jedem der Mehrzahl von Cores jeweils ein Echtzeitprozess und jeweils ein Core-lokaler Timer laufen.</p></abstract><abstract mxw-id="PA102349762" ref-ucid="WO-2012155963-A2" lang="EN" load-source="patent-office"><p num="0000">An example of an embodiment of the invention relates to a host system comprising a plurality of cores, said host system being designed such that one real-time process and one core-local timer is run on each of the plurality of cores.</p></abstract><abstract mxw-id="PA102726291" ref-ucid="WO-2012155963-A2" lang="EN" source="national office" load-source="docdb"><p>An example of an embodiment of the invention relates to a host system comprising a plurality of cores, said host system being designed such that one real-time process and one core-local timer is run on each of the plurality of cores.</p></abstract><abstract mxw-id="PA102349763" ref-ucid="WO-2012155963-A2" lang="FR" load-source="patent-office"><p num="0000">L'invention concerne dans un aspect cité à titre d'exemple un système hôte comprenant plusieurs coeurs, qui est conçu de manière que respectivement un processus en temps réel et un registre d'horloge local de coeur puissent tourner sur chacun des multiples coeurs.</p></abstract><abstract mxw-id="PA102726292" ref-ucid="WO-2012155963-A2" lang="FR" source="national office" load-source="docdb"><p>L'invention concerne dans un aspect cité à titre d'exemple un système hôte comprenant plusieurs coeurs, qui est conçu de manière que respectivement un processus en temps réel et un registre d'horloge local de coeur puissent tourner sur chacun des multiples coeurs.</p></abstract><description mxw-id="PDES52679238" ref-ucid="WO-2012155963-A2" lang="DE" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001">Beschreibung Host-System Die Erfindung betrifft ein Host-System, insbesondere ein</p><p id="p0002" num="0002">Host-System mit einer Echtzeit-Erweiterung . Ferner betrifft die Erfindung ein Verfahren zum Betreiben eines Host- Systems. Darüber hinaus betrifft die Erfindung ein Pro<sup>¬</sup> grammelement und ein computerlesbares Medium. </p><p id="p0003" num="0003">In der Prozessor- und Hardwareentwicklung von Computern besteht ein allgemeines Streben nach immer weiter erhöhter Rechenleistung. Diese fand in der Vergangenheit insbesonde<sup>¬</sup> re auch mittels der Steigerung der Taktfrequenzen der </p><p id="p0004" num="0004">Prozessoren statt. Der Steigerung der Rechenleistung eines Prozessors durch Erhöhung der Taktfrequenz sind jedoch heutzutage insbesondere durch die starke Zunahme der elekt<sup>¬</sup> rischen Verlustleistung (Wärmeerzeugung) Grenzen gesetzt. Eine Steigerung durch Parallelverarbeitung (Multicore- Systeme) wird wirtschaftlicher. Dies gilt nicht nur für</p><p id="p0005" num="0005">Serversysteme sondern auch für alle anderen Computeranwendungen, z.B. auch die industrielle Automatisierungstechnik. </p><p id="p0006" num="0006">Die Anforderungen an die Rechenleistung steigen ständig. Die Integration von Bewegungssteuerung, programmierbare Steuerungen (PLC) und Human Machine Interface (HMI) in einem Gerät sind eine passende Aufgabenstellung für eine Multicore-Architektur . Auch die Virtualisierungstechnik ist ein weiterer Antrieb zur Nutzung solcher Systeme. </p><p id="p0007" num="0007">Die vervielfachte theoretische Rechenleistung (das n-fache bei n Cores) kann in der Realität nie erreicht werden, denn bei der Verteilung von Software, insbesondere eines Echt<sup>¬</sup> zeit-Kernels, von einem Singlecore- auf ein Multicore- System gelten in Bezug auf die Performance des Gesamtsys<sup>¬</sup> tems weiterhin die alten Regeln: 
<!-- EPO <DP n="4"/>-->
Die bekannte Regel "MIPS = k * Speicherbandbreite" bedeutet letztlich, dass eine hohe Speicherbandbreite bei höherer Core-Anzahl lokale L2-Caches erfordert. </p><p id="p0008" num="0008">Lokale Caches lassen Amdahls Gesetz wirksam werden, welches in einer Formulierung lautet: </p><p id="p0009" num="0009"> Wenn zusätzliche Prozessoren verwendet werden, steigen die Vorteile (mehr Arbeitszyklen) höchstens line- ar, </p><p id="p0010" num="0010"> die Kosten (Zugangskonflikte, Serialisierung usw.) quadratisch. </p><p id="p0011" num="0011">Somit verhält sich die Performance des Systems wie </p><p id="p0012" num="0012">C(n) = a<sup>■</sup> n - b<sup>■</sup> n<sup>2</sup> mit n Anzahl der Prozessoren oder physikali- sehe Kerne; </p><p id="p0013" num="0013">denn lokale Caches bedeuten unvermeidbar einen größeren Faktor b. Dies gilt insbesondere für die Verteilung einer Echtzeitlösung auf mehrere Cores oder Kerne, welche im Rahmen von Echtzeit-Erweiterungen notwendig sind. Bei der Verteilung zentraler gemeinsamer Daten wie z.B. Listen,</p><p id="p0014" num="0014">Warteschlangen, (insbesondere Warteschlangen, die doppelt gefädelt sind, z.B. Thread- oder Timerverwaltung) muss auch für den Fall, dass keine Zugangskonflikte (non-contention Fall) auftreten, gezahlt werden, und zwar doppelt. </p><p id="p0015" num="0015">Zum einen muss für die Absicherung ein Spinlock (Prozeßsyn- chonisation, schützt gemeinsam genutzte Ressourcen vor modifizierendem Zugriff) verwendet werden, der letztlich zu einem atomaren RMW- (read-modify-write) Befehl führt, welcher im Bezug auf die Performance des Systems ein sehr teurer Vorgang ist, weil der Cache gesperrt werden muss. Kommt noch ein RFO-Zyklus (Read For Ownership) dazu, wird der negative Einfluss auf die Performance noch vergrößert. Veränderungen an der Verzeigerung invalidieren die entsprechende Information in allen anderen L2-Caches, führen also 
<!-- EPO <DP n="5"/>-->
letztlich zu Fehlzugriffen oder Misses, welche auch einen starken Einfluss auf die Performance haben. </p><p id="p0016" num="0016">Es gibt verschiedene existierende Lösungen für Echtzeit- Erweiterungen. Eine dieser bekannten Lösungen ist Xeno- mai, eine EchtZeiterweiterung für Linux, eine weitere ist IntervalZero RTX®, eine EchtZeiterweiterung für Windows. </p><p id="p0017" num="0017">Zwar ermöglicht beispielsweise Xenomai eine Verteilung der Echtzeit auf mehrere Cores, aber diese Lösung bein<sup>¬</sup> haltet die oben beschriebenen Punkte, welche zu einer nicht optimalen Performance führen. Anhand der Fig. 2 soll eine solche Echtzeit-Erweiterung schematisch am </p><p id="p0018" num="0018">Beispiel eines Standard-Kernels in Multicore-Umgebung beschrieben werden. </p><p id="p0019" num="0019">Fig. 2 zeigt ein Host-System oder Echtzeit-System 200, welches eine Mehrzahl von physikalischen Cores 201 und 202 aufweist. Zwischen den Cores 201 und 202 ist mit einem Doppelpfeil 203 schematisch die Möglichkeit von Cross-Core Notifikationen oder Benachrichtigungen angedeutet, welche verwendet werden, um Signalisierungspfade bereitzustellen, bei denen sich Sender- und Empfängerinstanzen auf verschiedenen physikalischen Cores befinden, bzw. Prozesse auf verschiedenen Cores sind. Hierzu wird ein Inter-</p><p id="p0020" num="0020">Processor- Interrupt (IPI) von einem an den anderen Core gesendet, damit die auszuführende Funktion stellvertretend durch den anderen Core ausgeführt wird. Mit Block 204 ist schematisch ein Betriebssystem dargestellt, welches einen Standardkernel mit einer darin in<sup>¬</sup> tegrierten Echt zeit-Erweiterung 205 zur Verfügung stellt. Die integrierte Echtzeit-Erweiterung verwaltet mit einer zentralen Buchhaltung die globalen Ressourcen des Echt- zeitsystems. Hierbei wird beim Zugriff auf die internen, globalen Datenstrukturen eine Synchronisation mit Hilfe von 
<!-- EPO <DP n="6"/>-->
Spinlocks durchgeführt, welche in Fig. 2 schematisch als Global Lock 206 dargestellt sind. </p><p id="p0021" num="0021">Ferner stellt das Betriebssystem 204 Echtzeit-Timer 207 und 208 für eine Mehrzahl von Echtzeit-Threads 209, 210, 211 und 212 zur Verfügung, welche einer Echtzeit-Applikation 213 zugehörig sind. </p><p id="p0022" num="0022">Um grundsätzliche Echt Zeitanforderungen erfüllen zu kön- nen, wird in bekannten Multicore-Systemen kein zentraler Timer-Baustein verwendet. Das Minimum ist eine corespezi- fische Timer-Verwaltung wie sie auch in Xenomai realisiert ist. Ferner kann, wie beispielsweise bei Xenomai, sicher<sup>¬</sup> gestellt werden, dass bei einer Thread-Migration auch ein möglicher Timer-Request migriert. Damit wird es ermög<sup>¬</sup> licht, dass beim Feuern eines Timers der zu weckende Echt- zeit-Thread auf dem gleichen Core abläuft, der auch den Timer-Interrupt bearbeitet hat. Bisher sind jedoch keine Lösungen bekannt, die bei einer Echtzeit-Erweiterung durch eine optimale Verteilung der Software dafür sorgen, dass ein maximaler Performance- Gewinn und minimale Latenzzeiten das Ergebnis einer auf mehrere Cores verteilten Echtzeitlösung sind. </p><p id="p0023" num="0023">Somit ist es Aufgabe der Erfindung, ein Host-System mit einer Echtzeit-Erweiterung zu schaffen, welches in Hinblick auf die Latenzzeiten und/oder die Performance optimiert ist . </p><p id="p0024" num="0024">Diese Aufgabe wird gelöst durch ein Host-System, ein Verfahren zum Betreiben eines Host-Systems, ein Computerpro<sup>¬</sup> grammelement und durch ein computerlesbares Medium gemäß den unabhängigen Patentansprüchen. Weitere Ausgestaltungen sind in den abhängigen Ansprüchen angegeben. 
<!-- EPO <DP n="7"/>-->
Gemäß einem exemplarischen Aspekt wird ein Host-System mit einer Mehrzahl von Cores geschaffen, welches derart eingerichtet ist, dass auf jedem der Mehrzahl von Cores jeweils ein Echtzeitprozess und jeweils ein Core-lokaler Timer läuft. </p><p id="p0025" num="0025">Das heißt für jeden der Mehrzahl von Kernen oder Cores wird ein getrennter oder separater Echtzeitprozess gestartet. Auch für jeden der Mehrzahl von Cores wird jeweils ein getrennter Core-lokaler Timer gestartet. Die Bereitstellung von getrennten Core-lokalen Timern ermöglicht es, für die gesamte Zeitverwaltung Core-lokale Signalisierungspfade zu verwenden, was wiederum sicherstellt, dass keine oder zumindest weniger Cross-Core Notifikationen, d.h. Benach- richtigungen zwischen verschiedenen Cores des Host-Systems, benötigt werden. Insbesondere werden solche Core-lokalen Timer anstelle eines zentralen genutzten Timers, z.B. eines HPET-Timers, verwendet. Beispielsweise kann bei der Verwen<sup>¬</sup> dung von Linux als Betriebssystem der Core-lokale Timer mittels eines LAPIC Timers realisiert werden. </p><p id="p0026" num="0026">Gemäß einem anderen Aspekt der Erfindung wird ein Verfahren zum Betreiben eines Host-Systems mit einer Echtzeit- Erweiterung geschaffen, wobei das Host-System eine Mehrzahl von Cores aufweist, wobei das Verfahren ein Betreiben eines Echtzeitprozesses je Core der Mehrzahl von Cores und ein Betreiben eines Core-lokalen Timers je Core der Mehrzahl von Cores aufweist. Insbesondere wird unter dem Begriff "Betreiben" auch ein Starten des Echtzeitprozesses und/oder des Core-lokalen Timers verstanden. </p><p id="p0027" num="0027">Gemäß einer anderen Ausführungsform der Erfindung wird ein Programmelement geschaffen, welches derart eingerichtet ist, dass es, wenn es auf einem Prozessor ausgeführt wird, 
<!-- EPO <DP n="8"/>-->
ein Verfahren gemäß einem exemplarischen Aspekt der Erfindung steuert. </p><p id="p0028" num="0028">Gemäß einem weiteren exemplarischen Aspekt der Erfindung wird ein computerlesbares Medium geschaffen, auf welchem ein Computerprogramm gespeichert ist, wobei das Computerprogramm derart eingerichtet ist, dass es, wenn es auf einem Prozessor ausgeführt wird, ein Verfahren gemäß einem exemplarischen Aspekt der Erfindung steuert. </p><p id="p0029" num="0029">Eine Grundidee eines beispielhaften Aspekts ist ein Host- System mit einer Echtzeit-Erweiterung, bei welchem es ermöglicht sei, mittels des Vorsehens mindestens eines Echtzeitprozesses und eines Core-lokalen Timers je Core oder Kern die Anzahl von Cross-Core Notifikationen zu reduzieren oder diese ganz auszuschließen. Beispielsweise kann sich die Anzahl der Cross-Core Notifikationen </p><p id="p0030" num="0030">reduzieren, da bei der Verwendung von Core-lokalen Timern die Zeitverwaltung mittels Core-lokalen </p><p id="p0031" num="0031">Signalisierungspfaden ermöglicht ist. Dies führt dazu, dass die Latenzen und die Gesamtperformance des Host-Systems optimiert wird. </p><p id="p0032" num="0032">Nachfolgend werden Ausführungsbeispiele des Host-System beschrieben. Jedoch gelten die entsprechenden Ausgestaltungen und Merkmale auch für das Verfahren zum Betreiben eines Host-Systems, das Programmelement und das computerlesbare Medium. Gemäß einem Ausführungsbeispiel ist das Host-System derart eingerichtet, dass Core-lokale Interruptsperren verwendbar sind . </p><p id="p0033" num="0033">Insbesondere könnendiese Core-lokalen Interruptsperren anstelle von Spinlocks verwendet oder vorgesehen werden, bzw. diese ersetzen. Hierdurch wird insbesondere die Parti- 
<!-- EPO <DP n="9"/>-->
tionierung von Datenstrukturen, z.B. Core-lokale oder kernlokale Warteschlagen für Echtzeit-Runqueue oder für Timer-Handling, die Verwendung von Spinlocks überflüssig. Somit reicht die Verwendung von Core-lokalen Inter- rupstsperren aus oder gewährleistet, beim Zugriff auf </p><p id="p0034" num="0034">Ressourcen des Host-Systems, welche auf dem Host-System installiert sind oder laufen, eine Synchronisation. </p><p id="p0035" num="0035">Gemäß einem anderen Ausführungsbeispiel ist das Host-System derart eingerichtet, dass Core-lokale Signalisierungspfade implementiert sind. </p><p id="p0036" num="0036">Unter Core-lokalen Signalisierungspfaden mag insbesondere verstanden werden, dass Sender- und Empfangsinstanzen auf dem gleichen Core ablaufen. Beispielsweise können die Core- lokalen Signalisierungspfade logische, d.h. mittels Soft<sup>¬</sup> ware ausgebildete, Pfade sein. Insbesondere sind Interrupts von Echtzeit-Baugruppen immer an den Kern oder Core gebunden, auf welchen auch die entsprechende Echtzeit- Applikation läuft, die durch den entsprechenden Interrupt benachrichtigt wird. Hierdurch werden Cross-Core Notifika<sup>¬</sup> tionen verhinderbar. </p><p id="p0037" num="0037">Gemäß einem anderen Ausführungsbeispiel ist das Host-System derart eingerichtet, dass eine prozessspezifische Verwal<sup>¬</sup> tung von Datenstrukturen ermöglicht wird, d.h. es ist eine prozessspezifische Verwaltung oder anschaulich Buchhaltung, von verschiedenen, bisher typischerweise global verwalteter Datenstrukturen möglich. Beispiele für solche Datenstruktu- ren sind insbesondere eine Echtzeit-Taskliste oder Futex Header sein, im Falle dass ein Betriebssystem des Host- Systems ein Linux-Betriebssystem ist. Dies mag eine organisatorische Maßnahme sein, um eine Verteilung von Echtzeit<sup>¬</sup> prozessen oder -applikationen auf mehrere Kerne zu verbes- sern oder zu ermöglichen. Neben einer prozessspezifischen Verwaltung von Datenstrukturen, welche Core-lokal durchge- 
<!-- EPO <DP n="10"/>-->
führt werden, kann es zur Verwaltung aller Echtzeitprozesse im Gesamtsystem bevorzugt oder auch nötig sein, weiterhin Spinlocks zu verwenden. In spezifischen Ausführungsbeispie<sup>¬</sup> len mögen insbesondere globale Datenstrukturen weiterhin durch Spinlocks abgesichert sein. Hierbei ist jedoch zu beachten, dass diese Spinlocks nicht Bestandteil von echt<sup>¬</sup> zeitkritischen Aufgaben sind, da ein Zugriff nur beim </p><p id="p0038" num="0038">Anmelden bzw. Shutdown eines Echtzeitprozesses notwendig ist . </p><p id="p0039" num="0039">Hierdurch ist es möglich, mehrere Echtzeit-Applikationen zu unterstützen . </p><p id="p0040" num="0040">Gemäß einem anderen Ausführungsbeispiel ist das Host-System derart eingerichtet, dass beim Starten eines echtzeitfähi<sup>¬</sup> gen Systems mittels eines zugehörigen echtzeitfähigen </p><p id="p0041" num="0041">Prozesses eine dem echtzeitfähigen System zugeordnete </p><p id="p0042" num="0042">Echtzeitdomäne eingerichtet wird, wenn der zugehörige echtzeitfähige Prozess der erste echtzeitfähige Prozess ist, der auf dem entsprechenden Core des Host-Systems gestartet wird. </p><p id="p0043" num="0043">Eine Trennung zwischen dem Starten eines Echtzeitprozesses und dem Einrichten einer Echtzeitdomäne erfolgt, insbeson- dere kann die Installation der Echtzeitdomäne immer on- demand erfolgen. Hierbei mag die Installation nur durch den ersten Echtzeitprozess , der auf dem entsprechenden Kern bzw. Core gestartet wird bzw. wurde, geschehen. Gemäß einem anderen Ausführungsbeispiel ist das Host-System derart eingerichtet, dass ein Shutdown der Echtzeitdomäne erfolgt, wenn der letzte Echtzeitprozess terminiert, der auf dem entsprechenden Kern bzw. Core ausgeführt wird. 
<!-- EPO <DP n="11"/>-->
Gemäß einem weiteren Ausführungsbeispiel eines Echtzeitpro<sup>¬</sup> zesses, welcher auf einem der Mehrzahl von Cores läuft, auf einen anderen der Mehrzahl von Cores verhindert ist. Insbesondere kann somit ein Echtzeitprozess oder Echtzeit- Thread immer auf dem Kern ausgeführt werden, den eine </p><p id="p0044" num="0044">Applikation oder das Echtzeitsystem für diesen Echtzeitpro- zess oder Echtzeit-Thread festgelegt hat und somit eine implizite Migration von Echtzeit-Threads auf einen anderen Kern/Core nicht unterstützt werden. Ein Load-Balancing wird somit ausgeschlossen sein, jedoch wird dies dazu führen, dass mehrere echtzeitfähige Prozesse auf einem Host-System ohne Echtzeit-/Performance-Einbußen gegenüber einem System mit nur einem Echtzeitprozess auftreten. Ein solcher Aus- schluss der Migration, d.h. auch ein Ausschluss eines </p><p id="p0045" num="0045"> Lastausgleichs ermöglicht insbesondere eine Performance<sup>¬</sup> steigerung, indem Verwaltungsaufwand reduziert wird, wel<sup>¬</sup> cher mit Cross-Core Notifikationen verbunden ist. Zusammenfassend wird ein exemplarischer Aspekt darin gesehen, dass ein Host-System geschaffen wird, welches ermöglicht mehrere echtzeitfähige Prozesse in einem Host- System zu schaffen, ohne dass Echtzeit-/Performance- Einbußen gegenüber einem System mit nur einem </p><p id="p0046" num="0046">Echtzeitprozess auftreten oder diese zumindest reduziert sind. Das Host-System mag ein Linux-System oder ein </p><p id="p0047" num="0047">Windows-System oder ein System sein, auf welchem ein beliebiges anderes Betriebssystem installiert ist. </p><p id="p0048" num="0048">Insbesondere wird die optimierte Performance dadurch erzielt, dass </p><p id="p0049" num="0049"> je Kern ein Echtzeitprozess mit einer automatischen, aber festen Zuordnung der Ressourcen zur lokalen </p><p id="p0050" num="0050">AblaufVerwaltung der Threads, z.B. Interruptquellen, Timer, Listen, Warteschlagen, des Echtzeitprozesses gestartet wird; 
<!-- EPO <DP n="12"/>-->
 Core-lokale oder kernspezifische Timer anstelle von zentralen Hardware-Timer verwendet werden; </p><p id="p0051" num="0051"> ein Hochfahren bzw. Shutdown von einzelnen </p><p id="p0052" num="0052">Echtzeitprozessen anstelle eines Hochfahrens bzw. Shutdown des gesamten Echtzeitsystems durchgeführt werden. </p><p id="p0053" num="0053"> Eine Echtzeit-Erweiterung ist ermöglicht mit kürzeren Reaktionszeiten und schnellerer Thread-Kommunikation/- Synchronisation für mehr als einen Prozess bei einer Multicore Anwendung. </p><p id="p0054" num="0054">Insbesondere ist es möglich, Beeinträchtigung der Performance durch Cross-Core Notifikationen zu vermindern oder zu verhindern. Diese treten im Stand der Technik immer dann auf, wenn ein Signalisierungspfad (von der Sender- bis zur Empfängerinstanz) nicht Core-lokal oder Core- lokal ist, da dann ein Core einen Inter-Processor Interrupt (IPI) an einen anderen Core senden, damit die auszu<sup>¬</sup> führende Funktion stellvertretend auf dem anderen Core ausgeführt wird. </p><p id="p0055" num="0055">Vorteilhafter Weise werden Latenzen verringert, auf welche bei der Verteilung von Interrupts zu achten ist. </p><p id="p0056" num="0056">Insbesondere wird bei dem beschriebenen Host-System bzw. durch die Software, welche auf diesem Host-System läuft verhindert, dass eine Signalisierung durch einen Interrupt auf einem ersten Prozessor (CPUx) dazu führt, dass sich der zu weckende Thread auf einem zweiten Prozessor (CPUy) befindet. Somit wird verhindert, dass die Benach<sup>¬</sup> richtigung nicht direkt erfolgent, sondern über eine Cross-Core Notifikation initiiert werden muss, was zu größeren Latenzen führen würde. </p><p id="p0057" num="0057">Weiterhin kann im Stand der Technik die Notwendigkeit einer Cross-Core Notifikation bei der Echtzeit-Thread Kommunikation entstehen, wenn sich Sender- und Empfänger Thread auf unterschiedlichen Cores befinden oder wenn 
<!-- EPO <DP n="13"/>-->
sich Sender und Empfänger bei einem I/O-Event auf unter<sup>¬</sup> schiedlichen Cores/Kernen befinden. Auch diese Cross-Core Notifikationen mögen bei einem Host-System gemäß dem beispielhaften Aspekt verringerbar oder verhinderbar sein, wenn Core-lokale Signalpfade und/oder Core-lokale Timer verwendet werden. Mittels der Bereitstellung von Core-lokalen Signalpfaden und/oder Interruptsperren ist es möglich, die Notwendigkeit oder Häufigkeit von Spin- locks oder globalen Kernel-Locks , mit welchen die meisten Datenstrukturen abgesichert sind, zu vermindern, welche globalen Kernel-Locks sich, im Falle dass viele aktive Kerne für das Echtzeit-System verwendet werden, besonders negativ auf die Skalierbarkeit des Multikern-Systems auswirken . </p><p id="p0058" num="0058">Gemäß der Ausgestaltung nach dem exemplarischen Aspekt bleiben im Falle der Verwendung eines Linux- Betriebssystems mit der Ausnahme von POSIX Message-Queues alle Warteschlangen Core-lokal und können mit lokalen Interruptsperren abgesichert werden. Da die POSIX Message- Queues zur Kommunikation zwischen Prozessen (Linux </p><p id="p0059" num="0059">und/oder Echt zeit) verwendet werden, werden diese weiterhin auch unter Verwendung von Spinlocks synchronisiert. Für Futexe, im Falle von Linux, mag gelten, dass - wie bei der Singlecore-Lösung - nur private (prozesslokale) Futexe unterstützt werden. Somit würde eine Umrechnung auf physi<sup>¬</sup> kalische Adressen entfallen, wodurch Semaphore-Funktionen besonders schnell werden. Die oben erläuterten und weitere exemplarische Aspekte und Ausführungsbeispiele werden dem Fachmann durch die </p><p id="p0060" num="0060">nachfolgend erläuterten Ausführungsbeispiele klarer verständlich. Ferner sollte bemerkt werden, dass Merkmale, welche oben im Zusammenhang mit einem bestimmten </p><p id="p0061" num="0061">exemplarischen Aspekt oder Ausführungsbeispiel beschrieben 
<!-- EPO <DP n="14"/>-->
wurden, auch mit anderen exemplarischen Aspekten und </p><p id="p0062" num="0062">Ausführungsbeispielen kombiniert werden können. </p><p id="p0063" num="0063">Fig. 1 zeigt eine schematische Darstellung eines Host- Systems gemäß einem Ausführungsbeispiel. </p><p id="p0064" num="0064">Fig. 2 zeigt eine schematische Darstellung eines Host- Systems gemäß Stand der Technik. Die Darstellungen in den Figuren sind schematisch. Gleiche oder ähnliche Bauteile oder Elemente in den verschiedenen Figuren sind mit gleichen oder ähnlichen Bezugszeichen versehen . Im Folgenden wird anhand der Linux-basierten AuDis Echtzeit-Erweiterung für Multicore-Systeme ein Ausführungsbei<sup>¬</sup> spiel beschrieben, wobei bei der Echtzeit-Erweiterung mittels einer dedizierte Verteilung und Anpassung der Echtzeit-Software vermieden wird, dass die Performance bei einer gesteigerten Anzahl von Gores nicht optimal anwächst. Die Prinzipien können aber auch grundsätzlich auf jede andere Echtzeit-Erweiterung übertragen werden, um damit das Echtzeitverhalten bzw. die Performance bei einer verteilten Echtzeitlösung zu optimieren. </p><p id="p0065" num="0065">Fig. 1 zeigt eine schematische Darstellung eines Host- Systems 100 gemäß einem Ausführungsbeispiel. Das Host- System weist eine Mehrzahl von physikalischen Cores oder Kernen 101 und 102 auf, von welchen der Übersichtlichkeit halber nur zwei gezeigt sind. Im Gegensatz zu den in </p><p id="p0066" num="0066"> Fig. 2 gezeigten Host-System ist zwischen den Cores 101 und 102 keine Möglichkeit von Cross-Core Notifikationen oder Benachrichtigungen angedeutet. Mit Block 104 ist schematisch ein Betriebssystem, z.B. Linux, dargestellt, welches einen Standardkernel mit einer darin integrierten Echtzeit-Erweiterung 105 zur Verfügung stellt. Die integ- 
<!-- EPO <DP n="15"/>-->
rierte Echtzeit-Erweiterung verwaltet mit einer zentralen Buchhaltung die globalen Ressourcen des Echtzeitsystems . </p><p id="p0067" num="0067">Ferner sind in Fig. 1 eine Mehrzahl von Echtzeit- Applikationen 106 und 107 dargestellt, innerhalb derer mehrere Threads 108, 109, 110 und 111 abgearbeitet werden können. Die Echtzeitapplikationen sind ein Teil aller regulären Prozesse, welche abgearbeitet werden. Es ist anzumerken, dass die Anzahl der Cores und die Anzahl der Threads selbstverständlich nicht auf die dargestellte Anzahl beschränkt sind, sondern je nach Ausgestaltung und Bedarf angepasst werden können. Bei einem Ausführungsbeispiel ist ein Echtzeitprozess je Core vorgesehen. In einer Konfiguration, wie sie schematisch in Fig. 1 dargestellt ist, ist es auchmöglich, in einem Host-System auf mehrere Echtzeitprozesse zu erwei<sup>¬</sup> tern, ohne Abstriche an Latenzzeiten/Performance für den Einzelprozess machen zu müssen. Verfügt das Host-System System über genügend physikalische Cores, kann auch eine exklusive Core-Nutzung durch die Echtzeit-Applikation eingestellt werden. Standard-Linux und dessen Anwenderpro<sup>¬</sup> gramme werden dann von diesem Core verbannt, und die maxi- male Latenzzeit wird sich weiter verringern, da ein Adress<sup>¬</sup> raumwechsel verhindert wird. </p><p id="p0068" num="0068">Die beschriebenen Maßnahmen, d.h. das Vorsehen von Core- lokalen Interruptsperren, Core-lokalen Signalpfaden </p><p id="p0069" num="0069">und/oder Core-lokalen Timern werden üblicherweise in zentralen Routinen implementiert und lassen sich damit im Rahmen einer Kernelerzeugung leicht ändern. Wird also maximale Flexibilität in der Verteilung der Aufgaben und nicht bestmögliches Echtzeitverhalten gefordert, so </p><p id="p0070" num="0070">lassen sich auch mit geringem Mehraufwand die folgenden Zuordnungen erreichen. 
<!-- EPO <DP n="16"/>-->
Bei einem spezifischen Ausführungsbeispiel wird ein Echt- zeitprozess mit Threads auf mehreren Cores ausgeführt. </p><p id="p0071" num="0071">Hierbei wird der Echtzeitprozess auf einem Core gestartet, wobei ein Anwender durch Setzen einer Core-Affinity für Echtzeit-Threads erreichen kann, dass ein Echtzeit-Thread auf einem bestimmten Core ausgeführt wird. In diesem Falle mögen lokale Interruptsperren ausreichend sein, wenn es um die Synchronisation von Core-lokalen Warteschlangen geht. Allerdings werden bei diesem Anwendungsfall Signalisie- rungspfade durchlaufen, die eine Synchronisation mit Spin- locks für Prozess-spezifische Warteschlangen benötigen. Es können hierbei auch Signalisierungspfade entstehen, die nicht mehr Core-lokal sind, so dass die Notwendigkeit einer Cross-Core Notifikation entsteht. </p><p id="p0072" num="0072">Bei einem anderen Ausführungsbeispiel werden mehrere Echt<sup>¬</sup> zeitprozesse mit Threads auf mehreren Cores verwirklicht. Hierbei wird der allgemeinste Fall der Verteilung einer Echtzeitaufgabe erreicht. Die Echtzeit-Threads einer Echt<sup>¬</sup> zeit-Applikation weerden auf einem beliebigen Core ausgeführt, jedoch kann diese Eigenschaft durch mehrere Echt<sup>¬</sup> zeit-Applikationen genutzt werden. Bei der bisherigen Singlecore-Lösung auf einem Linux- System ist die Überprüfung auf einen notwendigen Adressraumwechsel nur beim Übergang zwischen Linux-Domain und Echtzeit-Domain notwendig. Werden aber mehrere Echtzeit<sup>¬</sup> prozesse auf einem Core unterstützt, dann muss diese Über- prüfung auch für den Thread-Wechsel innerhalb der Echt<sup>¬</sup> zeit-Domain gemacht werden. Dieses Schema würde auch die Möglichkeit einschließen, dass auf einem Singlecore-System mehrere Echtzeitprozesse gestartet werden können. Die Ausführung der Erfindung ist nicht auf diese Anwendungsfälle und die weiter oben erwähnten Systemkonfigurati- 
<!-- EPO <DP n="17"/>-->
onen beschränkt, sondern ebenso in einer Vielzahl von </p><p id="p0073" num="0073">Abwandlungen möglich, die im Rahmen fachgemäßen Handelns liegen. Ferner sollte darauf hingewiesen werden, dass </p><p id="p0074" num="0074">Bezugszeichen in den Ansprüchen nicht als beschränkend aufzufassen sind, und dass die Begriffe "aufweisen" bzw. "aufweisend" und ähnliche Begriffe nicht das Vorhandensein von weiteren Elementen oder Schritten ausschließt. Auch schließt ein Aufzählen als mehrere Mittel oder Elemente nicht aus, dass diese Mittel oder Elemente als ein einziges Mittel oder Element ausgebildet werden können. 
<!-- EPO <DP n="18"/>-->
</p><p id="p0075" num="0075">Bezugs zeichenliste </p><p id="p0076" num="0076">100 Host-System </p><p id="p0077" num="0077"> 101 Core </p><p id="p0078" num="0078">102 Core </p><p id="p0079" num="0079"> 104 Betriebssystem </p><p id="p0080" num="0080"> 105 Echtzeit-Erweiterung</p><p id="p0081" num="0081">106 Echtzeit-Applikation</p><p id="p0082" num="0082">107 Echtzeit-Applikation 108-111 Echtzeit-Threads</p><p id="p0083" num="0083">200 Host-System </p><p id="p0084" num="0084"> 201 Core </p><p id="p0085" num="0085"> 202 Core </p><p id="p0086" num="0086"> 203 Cross-Core Notifikationen 204 Betriebssystem </p><p id="p0087" num="0087"> 205 Echtzeit-Erweiterung</p><p id="p0088" num="0088">206 Global Lock </p><p id="p0089" num="0089"> 207 Echtzeit-Timer </p><p id="p0090" num="0090"> 208 Echtzeit-Timer </p><p id="p0091" num="0091">209-212 Echtzeit-Threads</p><p id="p0092" num="0092">213 Echtzeit-Applikation 
</p></description><claims mxw-id="PCLM46340182" ref-ucid="WO-2012155963-A2" lang="DE" load-source="patent-office"><claim-statement><!-- EPO <DP n="19"/>-->Patentansprüche </claim-statement><claim id="clm-0001" num="1"><claim-text>1. Host-System (100) mit einer Mehrzahl von Cores (101, 102), welches derart eingerichtet ist, dass auf jedem der</claim-text><claim-text>Mehrzahl von Cores (101, 102) jeweils ein Echtzeitprozess und jeweils ein Core-lokaler Timer läuft. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. Host-System (100) gemäß Anspruch 1, wobei das Host- System (100) derart eingerichtet ist, dass Core-lokale</claim-text><claim-text>Interruptsperren verwendbar sind. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. Host-System (100) gemäß Anspruch 1 oder 2, wobei das Host-System (100) derart eingerichtet ist, dass Core-lokale Signalisierungspfade implementiert sind. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. Host-System (100) gemäß einem der Ansprüche 1 bis 3, wobei das Host-System (100) derart eingerichtet ist, dass eine prozessspezifische Verwaltung von Datenstrukturen ermöglicht wird. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. Host-System (100) gemäß einem der Ansprüche 1 bis 4, wobei das Host-System (100) derart eingerichtet ist, dass beim Starten eines echtzeitfähigen Systems mittels eines zugehörigen echtzeitfähigen Prozesses eine dem echtzeitfä- higen System zugeordnete Echtzeitdomäne eingerichtet wird, wenn der zugehörige echtzeitfähige Prozess der erste echt- zeitfähige Prozess ist, der auf dem entsprechenden Core (101, 102) des Host-Systems gestartet wird. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. Host-System (100) gemäß Anspruch 5, wobei das Host- System ferner eingerichtet ist, dass ein Shutdown der Echtzeitdomäne erfolgt, wenn der letzte Echtzeitprozess terminiert, der auf dem entsprechenden Core (101, 102) bearbeitet wird. <!-- EPO <DP n="20"/>--> </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. Host-System (100) gemäß einem der Ansprüche 1 bis 6, wobei das Host-System (100) derart eingerichtet ist, dass eine Migration eines Echtzeitprozesses , welcher auf einem der Mehrzahl von Cores (101, 102) läuft, auf einem anderen der Mehrzahl von Cores (101, 102 ) verhindert ist. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. Verfahren zum Betreiben eines Host-Systems (100) mit einer Echtzeit-Erweiterung (105), wobei das Host-System (100) eine Mehrzahl von Cores (101, 102) aufweist, wobei das Verfahren aufweist: </claim-text><claim-text> Betreiben eines Echtzeitprozesses je Core (101, 102) der Mehrzahl von Cores; und </claim-text><claim-text> Betreiben eines Core-lokalen Timers je Core (101, 102) der Mehrzahl von Cores. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. Programmelement, welches derart eingerichtet ist, dass es, wenn es auf einem Prozessor ausgeführt wird, ein Verfahren gemäß Anspruch 8 steuert. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. Computerlesbares Medium, auf welchem ein Computerpro<sup>¬</sup> gramm gespeichert ist, wobei das Computerprogramm derart eingerichtet ist, dass es, wenn es auf einem Prozessor ausgeführt wird, ein Verfahren gemäß Anspruch 8 steuert. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
