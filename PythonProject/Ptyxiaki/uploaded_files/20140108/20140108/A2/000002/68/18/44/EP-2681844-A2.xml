<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681844-A2" country="EP" doc-number="2681844" kind="A2" date="20140108" family-id="46718559" file-reference-id="315733" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585660" ucid="EP-2681844-A2"><document-id><country>EP</country><doc-number>2681844</doc-number><kind>A2</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12752654-A" is-representative="NO"><document-id mxw-id="PAPP154847852" load-source="docdb" format="epo"><country>EP</country><doc-number>12752654</doc-number><kind>A</kind><date>20120227</date><lang>EN</lang></document-id><document-id mxw-id="PAPP182063478" load-source="docdb" format="original"><country>EP</country><doc-number>12752654.9</doc-number><date>20120227</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140548685" ucid="IB-2012000467-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>IB</country><doc-number>2012000467</doc-number><kind>W</kind><date>20120227</date></document-id></priority-claim><priority-claim mxw-id="PPC140549297" ucid="US-201161447369-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161447369</doc-number><kind>P</kind><date>20110228</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2107893371" load-source="docdb">H03L   7/099       20060101ALI20150113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2107894447" load-source="docdb">H03L   7/00        20060101AFI20150113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2107894536" load-source="docdb">H03L   7/113       20060101ALI20150113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2107894618" load-source="docdb">H03L   7/16        20060101ALI20150113BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2107898225" load-source="docdb">H03D   3/24        20060101ALI20150113BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2025724476" load-source="docdb" scheme="CPC">H03L   7/0991      20130101 LI20150904BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2025726930" load-source="docdb" scheme="CPC">H03L   7/1976      20130101 FI20150903BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2091439602" load-source="docdb" scheme="CPC">H03L   7/113       20130101 LI20150218BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2091442291" load-source="docdb" scheme="CPC">H03L2207/50        20130101 LA20150218BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2091447212" load-source="docdb" scheme="CPC">H03L   7/16        20130101 LI20150218BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132361613" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNGEN ZUR IMPLEMENTIERUNG EINER VOLLDIGITALEN PHASENREGELSCHLEIFE</invention-title><invention-title mxw-id="PT132361614" lang="EN" load-source="patent-office">METHODS AND DEVICES FOR IMPLEMENTING ALL-DIGITAL PHASE LOCKED LOOP</invention-title><invention-title mxw-id="PT132361615" lang="FR" load-source="patent-office">PROCÉDÉS ET DISPOSITIFS PERMETTANT DE METTRE EN  UVRE UNE BOUCLE À VERROUILLAGE DE PHASE ENTIÈREMENT NUMÉRIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919526816" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MARVELL WORLD TRADE LTD</last-name><address><country>BB</country></address></addressbook></applicant><applicant mxw-id="PPAR919514386" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MARVELL WORLD TRADE LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR919010165" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Marvell World Trade Ltd.</last-name><iid>100993945</iid><address><street>L'Horizon Gunsite Road</street><city>14027 Brittons Hill Saint Michael</city><country>BB</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919522004" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BURG OLIVIER</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR919521747" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>BURG, OLIVIER</last-name></addressbook></inventor><inventor mxw-id="PPAR919011055" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>BURG, OLIVIER</last-name><address><street>Av. Victor-Ruffy 46</street><city>CH-1012 Lausanne</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR919538819" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KIRSCH MIGUEL</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR919539044" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KIRSCH, MIGUEL</last-name></addressbook></inventor><inventor mxw-id="PPAR919013544" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KIRSCH, MIGUEL</last-name><address><street>Ch. Dupuy 8</street><city>CH-1231 Conches</city><country>CH</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919011571" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Grünecker, Kinkeldey, Stockmair &amp; Schwanhäusser Anwaltssozietät</last-name><iid>100060488</iid><address><street>Leopoldstrasse 4</street><city>80802 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="IB-2012000467-W"><document-id><country>IB</country><doc-number>2012000467</doc-number><kind>W</kind><date>20120227</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012117295-A2"><document-id><country>WO</country><doc-number>2012117295</doc-number><kind>A2</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549827881" load-source="docdb">AL</country><country mxw-id="DS549828350" load-source="docdb">AT</country><country mxw-id="DS549827886" load-source="docdb">BE</country><country mxw-id="DS549751623" load-source="docdb">BG</country><country mxw-id="DS549911184" load-source="docdb">CH</country><country mxw-id="DS549822812" load-source="docdb">CY</country><country mxw-id="DS549828351" load-source="docdb">CZ</country><country mxw-id="DS549827887" load-source="docdb">DE</country><country mxw-id="DS549822813" load-source="docdb">DK</country><country mxw-id="DS549822818" load-source="docdb">EE</country><country mxw-id="DS549754579" load-source="docdb">ES</country><country mxw-id="DS549751624" load-source="docdb">FI</country><country mxw-id="DS549750511" load-source="docdb">FR</country><country mxw-id="DS549827888" load-source="docdb">GB</country><country mxw-id="DS549822819" load-source="docdb">GR</country><country mxw-id="DS549827889" load-source="docdb">HR</country><country mxw-id="DS549828352" load-source="docdb">HU</country><country mxw-id="DS549911185" load-source="docdb">IE</country><country mxw-id="DS549822820" load-source="docdb">IS</country><country mxw-id="DS549750512" load-source="docdb">IT</country><country mxw-id="DS549822821" load-source="docdb">LI</country><country mxw-id="DS549751629" load-source="docdb">LT</country><country mxw-id="DS549832042" load-source="docdb">LU</country><country mxw-id="DS549751630" load-source="docdb">LV</country><country mxw-id="DS549751631" load-source="docdb">MC</country><country mxw-id="DS549832043" load-source="docdb">MK</country><country mxw-id="DS549832044" load-source="docdb">MT</country><country mxw-id="DS549827894" load-source="docdb">NL</country><country mxw-id="DS549750525" load-source="docdb">NO</country><country mxw-id="DS549751632" load-source="docdb">PL</country><country mxw-id="DS549911186" load-source="docdb">PT</country><country mxw-id="DS549827895" load-source="docdb">RO</country><country mxw-id="DS549911187" load-source="docdb">RS</country><country mxw-id="DS549751641" load-source="docdb">SE</country><country mxw-id="DS549754580" load-source="docdb">SI</country><country mxw-id="DS549750526" load-source="docdb">SK</country><country mxw-id="DS549751642" load-source="docdb">SM</country><country mxw-id="DS549822826" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99835500" ref-ucid="WO-2012117295-A2" lang="EN" load-source="patent-office"><p num="0000">An all-digital phase locked loop includes a time to digital converter that determines a fractional portion of a phase count. The time to digital converter has a quantization error that may be caused by phase noise, delay errors or skew errors. Several methods and devices may reduce the quantization error. A noise source may add dithering to the reference clock at an input of the time to digital converter. A digital processor may use two successive rising edges of the oscillator signal to count time delays of the time to digital convertor to the reference clock. The digital processor uses these counts to determine a ratio of the time delays and the time period of the oscillator signal for controlling a digitally controlled oscillator. A radio frequency counter circuit detects whether the oscillator signal leads or lags the reference clock because of skew and generates a phase signal to correct the skew.</p></abstract><abstract mxw-id="PA100331310" ref-ucid="WO-2012117295-A2" lang="EN" source="national office" load-source="docdb"><p>An all-digital phase locked loop includes a time to digital converter that determines a fractional portion of a phase count. The time to digital converter has a quantization error that may be caused by phase noise, delay errors or skew errors. Several methods and devices may reduce the quantization error. A noise source may add dithering to the reference clock at an input of the time to digital converter. A digital processor may use two successive rising edges of the oscillator signal to count time delays of the time to digital convertor to the reference clock. The digital processor uses these counts to determine a ratio of the time delays and the time period of the oscillator signal for controlling a digitally controlled oscillator. A radio frequency counter circuit detects whether the oscillator signal leads or lags the reference clock because of skew and generates a phase signal to correct the skew.</p></abstract><abstract mxw-id="PA99835501" ref-ucid="WO-2012117295-A2" lang="FR" load-source="patent-office"><p num="0000">Une boucle à verrouillage de phase entièrement numérique comprend un convertisseur temps-numérique qui détermine une fraction d'un décompte de phase. Ce convertisseur temps-numérique présente une erreur de quantification qui peut être due à un bruit de phase, à des erreurs de retard ou à des erreurs en dentelure. Plusieurs procédés et dispositifs peuvent limiter l'erreur de quantification. Une source de bruit peut ajouter une vibration à l'horloge de référence à l'emplacement d'une entrée du convertisseur temps-numérique. Un processeur numérique peut utiliser deux fronts montants successifs du signal d'oscillateur pour compter les retards du convertisseur temps-numérique par rapport à l'horloge de référence. Ledit processeur numérique utilise ces décomptes pour établir un rapport entre les retards et la période de temps du signal d'oscillateur afin de commander un oscillateur contrôlé numériquement. Un circuit compteur radiofréquence détecte si le signal d'oscillateur est en avance ou en retard sur l'horloge de référence du fait de la dentelure, et il génère un signal de phase afin de corriger la dentelure.</p></abstract><abstract mxw-id="PA100331311" ref-ucid="WO-2012117295-A2" lang="FR" source="national office" load-source="docdb"><p>Une boucle à verrouillage de phase entièrement numérique comprend un convertisseur temps-numérique qui détermine une fraction d'un décompte de phase. Ce convertisseur temps-numérique présente une erreur de quantification qui peut être due à un bruit de phase, à des erreurs de retard ou à des erreurs en dentelure. Plusieurs procédés et dispositifs peuvent limiter l'erreur de quantification. Une source de bruit peut ajouter une vibration à l'horloge de référence à l'emplacement d'une entrée du convertisseur temps-numérique. Un processeur numérique peut utiliser deux fronts montants successifs du signal d'oscillateur pour compter les retards du convertisseur temps-numérique par rapport à l'horloge de référence. Ledit processeur numérique utilise ces décomptes pour établir un rapport entre les retards et la période de temps du signal d'oscillateur afin de commander un oscillateur contrôlé numériquement. Un circuit compteur radiofréquence détecte si le signal d'oscillateur est en avance ou en retard sur l'horloge de référence du fait de la dentelure, et il génère un signal de phase afin de corriger la dentelure.</p></abstract><description mxw-id="PDES51232998" ref-ucid="WO-2012117295-A2" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Methods and Devices for Implementing All-Digital Phase Locked Loop </p><p id="p0002" num="0002">CROSS REFERENCE TO RELATED APPLICATIONS </p><p id="p0003" num="0003">[0001] This application claims the benefit of U.S. Provisional App, No. 61/447,369 for "Methods and Devices for Implementing All-Digital Phase Locked Loop" filed February 28, 201 1, the disclosure of which is incorporated herein by reference. </p><p id="p0004" num="0004"> BACKGROUND </p><p id="p0005" num="0005"> [0002] Particular embodiments generally relate to all-digital phase locked loops. </p><p id="p0006" num="0006">[0003] Unless otherwise indicated herein, the approaches described in this section are not prior art to the claims in this application and are not admitted to be prior art by inclusion in this section. </p><p id="p0007" num="0007"> [0004] Various radio frequency synthesizers are known for use in various devices, such as transceivers. The radio frequency synthesizer generates a local oscillator frequency signal for a carrier. The radio frequency synthesizer may include a digital phase lock loop for generating the local oscillator frequency signal. A time to digital converter determines a time difference between the local oscillator frequency signal and a reference signal and provides a digital control signal to a digital processor. The digital processor generates a control signal for a digitally controlled oscillator that generates the local oscillator frequency signal. </p><p id="p0008" num="0008">[0005] Delays and skews may cause quantization errors in the time to digital converter. The quantization errors may cause the time to digital converter to generate an incorrect time difference and thereby cause the digital processor to provide an erroneous control signal to the digitally controlled oscillator, </p><p id="p0009" num="0009"> SUMMARY </p><p id="p0010" num="0010"> [0006] Embodiments include circuits and methods for implementing a digital phase lock loop. A circuit comprises a digitally controlled oscillator, a digital processor, a phase acquisition circuit, a counter, a dithering circuit, and a time to digital converter. The digitally controlled oscillator is configured to generate an oscillator signal having an output frequency based on a control signal. The digital processor has an output to provide the control signal in response to a reference clock and a timing signal. The phase acquisition circuit has an output to provide the timing signal based on a time difference between the oscillator signal and the reference clock. The counter is configured to count clock signals of a feedback signal of the oscillator signal. The dithering circuit configured to add dithering to the reference clock or 
<!-- EPO <DP n="3"/>-->
 the feedback signal. The time to digital converter is configured to generate the timing signal based on a time difference between the feedback signal and the reference clock. </p><p id="p0011" num="0011">[0007] In some embodiments, the dithering circuit is configured to add dithering to the reference clock. </p><p id="p0012" num="0012">[0008] In some embodiments, the dithering circuit is configured to add dithering to the feedback signal. </p><p id="p0013" num="0013"> [0009] In some embodiments, the dithering is random noise that is distributed within a resolution of the time difference. </p><p id="p0014" num="0014"> [OOiOj In some embodiments, the dithering circuit is configured to shape the dithering to distribute a majority of energy of the dithering outside a bandwidth of the digital processor and the digitally controlled oscillator providing the control signal to the digitally controlled oscillator. </p><p id="p0015" num="0015"> [0011] In some embodiments, the dithering circuit comprises a linear feedback shift register having a plurality of consecutive taps and a summing circuit configured to sum an output signal from each tap using binary weighting. </p><p id="p0016" num="0016"> [0012] In some embodiments, the dithering circuit comprises a differentiator configured to differentiate the summed received outputs, and a scaling circuit configured to scale the differentiated summed received outputs of the taps. </p><p id="p0017" num="0017"> [0013] In some embodiments, the dithering circuit comprises a delay circuit configured to generate the dithering signal based on a programmable delay of the scaled output of the scaling circuit. </p><p id="p0018" num="0018"> [0014] In some embodiments, a method comprises generating a feedback signal from an output signal of a digitally controlled oscillator. Clock signals of the feedback signal are counted. Dithering is added to a reference clock or the feedback signal. A time difference between the feedback signal and the reference clock is determined. A control signal is outputted to control the frequency of the output signal of the digitally controll ed oscillator based on the determined time difference. </p><p id="p0019" num="0019"> [0015] In some embodiments, adding dithering to the reference clock or the feedback signal comprises adding dithering to the reference clock. </p><p id="p0020" num="0020">[00I6| In some embodiments, adding dithering to the reference clock or the feedback signal comprises adding dithering to the feedback signal. </p><p id="p0021" num="0021"> [0017] In some embodiments, the dithering is random noise that is distributed within a resolution of the time difference. 
<!-- EPO <DP n="4"/>-->
 [0018] In some embodiments, shaping the dithering distributes a majority of energy of the dithering outside a bandwidth of a phase lock loop providing the control signal to the digitally controlled oscillator. </p><p id="p0022" num="0022"> [0019] In some embodiments, the dithering is generated. </p><p id="p0023" num="0023">[0020] In some embodiments, generating the dithering comprises receiving an output from each tap of a plurality of consecutive taps of a linear feedback shift register, and summing the received outputs using binary weighting. </p><p id="p0024" num="0024"> [002I| In some embodiments, generating the dithering further comprises differentiating the summed received outputs, and scaling the differentiated summed received outputs of the taps. </p><p id="p0025" num="0025">[0022] In some embodiments, a circuit comprises a decoder, a calculator circuit and a register. The decoder is configured to detect a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, the first and second edges being on successive clock pulses of the oscillator signal, measure a time difference between a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, count a first number of time delays between the first edge of the oscillator signal and an edge of a reference clock, the time delays being delays in a time-to -digital converter, count a second number of time delays between the second edge of the oscillator signal and the edge of the reference clock, and determine a time period of the oscillator signal based on the first number of time delays and the second number of time delays. The calculator circuit is configured to determine a ratio of the time delay and the time period of the oscillator signal based on the first and second number of time delays and the time period of the oscillator signal. The register is configured to provide a phase signal to control a digital processor in the digital phase lock loop based on the ratio of the time delay and the time period of the oscillator signal. </p><p id="p0026" num="0026">[0023] In some embodiments, the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </p><p id="p0027" num="0027"> [0024] In some embodiments, the first and second edges of the oscillator signal are failing transitions of the oscillator signal. </p><p id="p0028" num="0028"> [0025] In some embodiments, the calculator circuit is further configured to determine an average of the first and second numbers of time delays, and determine a reciprocal of the average, </p><p id="p0029" num="0029"> [0026] In some embodiments, the circuit further comprise a digital processor configured to determine whether the phase lock loop is operating in an integer mode, and add a phase offset to the phase signal if the phase lock loop is operating in an integer mode. 
<!-- EPO <DP n="5"/>-->
 [0027J In some embodiments, a method comprises measuring a time difference between a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, the first and second edges being on successive clock pulses of the oscillator signal. A first number of time delays between the first edge of the oscillator signal and an edge of a reference clock is counted. The time delays are delays in a time-to-digital converter. A second number of time delays between the second edge of the oscillator signal and the edge of the reference cl ock is counted. A time period of the oscil lator signal is determined based on the first number of time delays and the second n umber of time delays. A ratio of the time delay and the time period of the oscillator signal is determined based on the first and second number of time delays and the time period of the oscillator signal. A phase signal is outputted to control a digital processor in the digital phase lock loop based on the ratio of the time delay and the time period of the oscillator signal. </p><p id="p0030" num="0030"> [0028] In some embodiments, the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </p><p id="p0031" num="0031">[0029J In some embodiments, the first and second edges of the oscillator signal are falling transitions of the oscillator signal. </p><p id="p0032" num="0032"> [0030] In some embodiments, determining a ratio of the time delay and the time period of the oscillator signal based on the first number of time delays and the second number of time delays comprises determining an average of the first and second numbers of time delays, and determining a reciprocal of the a v erage. </p><p id="p0033" num="0033"> [0031] In some embodiments, the method further comprises determining whether the phase lock loop is operating in an integer mode, and adding a phase offset to the phase signal if the phase lock loop is operating in an integer mode. </p><p id="p0034" num="0034"> [0032] In some embodiments, the time delays in the time-to-digital convertor have a range of zero to 1.5 times the time period of the oscillator signal. </p><p id="p0035" num="0035"> [0033] In some embodiments, a circuit comprises a skew error estimator that is configured to detect a first edge of an oscillator signal in a digital phase lock loop, detect an edge of a reference clock, detect a second edge of the oscillator signal, the second edge of the oscillator signal having a different transition type from the first edge of the oscillator signal, generate a detection signal indicative of the edge of the reference clock being near the first edge of the oscillator signal, based on the first and second edges of the oscillator signal and the edge of the reference clock, and output a phase signal to control a digital processor of the digital phase lock loop based on the detection signal. 
<!-- EPO <DP n="6"/>-->
 [0034J In some embodiments, the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </p><p id="p0036" num="0036"> [0035J In some embodiments, the circuit further comprises a digital processor configured to detect a fractional phase of a time to digital converter of the digital phase lock loop based on the edge of the reference clock and the first edge of the oscillator signal, and add a correction to the phase signal based on the detected fractional phase and the detection signal. </p><p id="p0037" num="0037">[0036] In some embodiments, a method comprises detecting a first edge of an oscillator signal in a digital phase lock loop. An edge of a reference clock is detected. A second edge of the oscillator signal is detected. The second edge of the oscillator signal has a different transition type from the first edge of the oscillator signal. A detection signal indicative of the edge of the reference clock being near the first edge of the oscillator signal is generated based on the first and second edges of the oscillator signal and the edge of the reference clock. A phase signal is outputted to control a digital processor of the digital phase lock loop based on the detection signal. </p><p id="p0038" num="0038">[0037J In some embodiments, the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </p><p id="p0039" num="0039"> [0038] In some embodiments, the method further comprises detecting a fractional phase of a time to digital converter of the digital phase lock loop based on the edge of the reference clock and the first edge of the oscillator signal, and adding a correction to the phase signal based on the detected fractional phase and the detection signal, </p><p id="p0040" num="0040"> [0039] The following detailed description and accompanying drawings provide a better understanding of the nature and advantages of the embodiments described herein. </p><p id="p0041" num="0041"> BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0042" num="0042">[0040] Fig. 1 illustrates an all-digital phase lock loop (ADPLL) according to one embodiment. </p><p id="p0043" num="0043"> [0041] Fig. 2 illustrates a time-to-digital converter and a flip-circuit of the ADPLL of Fig. 1 according to one embodiment. </p><p id="p0044" num="0044"> [0042] Fig. 3 illustrates a graph showing the relationship between an RF counter of the ADPLL of Fig. i, a reference clock, and an oscillator signal. </p><p id="p0045" num="0045">[0043J Fig. 4 illustrates a graph showing the relationship between a delay chain of the time- to-digital convertor of Fig. 2, the reference clock and the oscillator signal. </p><p id="p0046" num="0046">[0044] Fig. 5 illustrates a phase acquisition circuit of the ADPLL of Fig. i according to one embodiment. 
<!-- EPO <DP n="7"/>-->
 [Θ045] Fig. 6 illustrates a phase acquisition circuit of the phase acquisition circuit of Fig. 5 according to one embodiment. </p><p id="p0047" num="0047"> [0046] Fig. 7 illustrates a graph showing the relationship between a reference dither signal, the reference clock and the oscillator signal. </p><p id="p0048" num="0048">[0047] Fig. 8 illustrates a graph showing the relationship between dithering, quantization noise, time and frequency. </p><p id="p0049" num="0049"> [0048] Fig. 9 illustrates a noise generator of the phase acquisition circuit of Fig, 5 according to one embodiment. </p><p id="p0050" num="0050"> [ΘΘ49] Fig. 10 illustrates a graph showing the relationship of the output noise of the ADPLL of Fig. 1 and frequency. </p><p id="p0051" num="0051"> [0050] Fig. i 1 illustrates a simplified flowchart of a method for generating dithering according to one embodiment. </p><p id="p0052" num="0052"> [0051] Fig. 12 illustrates a graph showing the ideal response relationship between the outputs of a time-to-digital converter and a counter of the ADPLL of Fig 1 according to one embodiment. </p><p id="p0053" num="0053"> [Θ052] Fig. 13 illustrates a graph showing the relationship between the outputs of a time-to- digital converter and a counter of the ADPLL of Fig 1 with gain error. </p><p id="p0054" num="0054">[0053] Fig. 14 illustrates a graph showing the relationship between a reference signal, an oscillator signal and delay counts of the ADPLL of Fig. i . </p><p id="p0055" num="0055">[0054] Fig. i 5 illustrates a delay estimator according to one embodiment, </p><p id="p0056" num="0056"> [0055] Figs, 16a, 16b and 16c illustrate graphs showing the relationship between the oscillator signal and a fractional ratio of the time to digital converter resolution to the oscillator period. </p><p id="p0057" num="0057"> [0056] Fig. 17 illustrates an ADPLL using time to digital converter delay estimation according to one embodiment. </p><p id="p0058" num="0058"> [0057] Fig. 18 illustrates a simplified flowchart of a method for generating a ratio of the time to digital converter resolution to the oscillator period according to one embodiment. </p><p id="p0059" num="0059">[0058] Fig. 19 illustrates a graph showing the relationship between the outputs of a time-to- digital converter and a counter of the ADPLL of Fig 1 with slew error. </p><p id="p0060" num="0060">[0059J Fig. 20 illustrates a skew correction circuit according to one embodiment. </p><p id="p0061" num="0061"> [Θ06Θ] Fig. 21 illustrates a graph showing the relationship of skew correction signals when the phase of the reference signal leads the phase of the oscillator signal. </p><p id="p0062" num="0062">[0061] Fig. 22 illustrates a graph showing the relationship of skew correction signals when the phase of the reference signal lags the phase of the oscillator signal. 
<!-- EPO <DP n="8"/>-->
 [Θ062] Fig. 23 illustrates a graph showing the relationship of fractional counts and oscillator fractional phase for negative skew. </p><p id="p0063" num="0063"> [0063] Fig. 24 illustrates a graph showing the relationship of fractional counts and oscillator fractional phase for positive skew. </p><p id="p0064" num="0064">[0064] Fig. 25 illustrates a table showing the relationship of correction applied to the output phase of the time to digital converter and the estimator output. </p><p id="p0065" num="0065"> [0065] Fig, 26 illustrates a simplified flowchart of a method for generating skew correction according to one embodiment. </p><p id="p0066" num="0066"> DETAILED DESCRIPTION </p><p id="p0067" num="0067">[0066] Described herein are techniques for methods and devices for implementing all- digital phase locked loops. In the following description, for purposes of explanation, numerous examples and specific details are set forth in order to provide a thorough understanding of the disclosure. It will be evident, however, to one skilled in the art that the present invention as denned by the cl aims may include some or all of the features in these examples alone or in combination with other features described below, and may further include modifications and equivalents of the features and concepts described herein. </p><p id="p0068" num="0068">[0067] Fig. 1 illustrates an all-digital phase lock loop (ADPLL) 100 according to one embodiment. ADPLL 100 generates an oscillator (OSC) signal at a selected frequency Fosc in response to a reference (REF) clock from an external source (not shown), such as a crystal oscillator, ADPLL 100 is a phase lock loop that determines the time difference between the REF clock and a feedback of the OSC signal to generate OSC signal. </p><p id="p0069" num="0069"> [0068] ADPLL 100 comprises a digital processor 102, a phase acquisition circuit 1 6, and a digitally controlled oscillator (DCO) 108. The feedback loop of ADPLL 100 continuously monitors the OSC signal from DCO 108 and performs a fine adj ustment of the OSC signal to track the frequency F<sub>Ref</sub> of the REF clock. Phase acquisition circuit 106 measures the phase of the OSC signal from DCO 108 at the clock rate of the REF clock. Digital processor 102 processes the phase to lock the frequency of DCO 108 on a multiple of the frequency of the REF clock. The frequency F<sup>'</sup>osc of the OSC signal is a multiple N of the reference clock frequency F<sub>Ref</sub> of the REF clock: </p><p id="p0070" num="0070"> Fosc <sup>:::</sup> X Fiief, where N can be a real number. </p><p id="p0071" num="0071"> [©069] In some embodiments, the frequency Fosc of the OSC frequency signal is in the range of 1.1 to 1.5 GHz. </p><p id="p0072" num="0072"> [0070] Phase acquisition circuit 106 generates a digital control word based on the time difference between the REF clock and the OSC signal and provides the digital control word 
<!-- EPO <DP n="9"/>-->
 to digital processor 102. Digital processor 102 provides a control signal to DCO 108 in response to the REF clock and the digital control word from phase acquisition circuit 106. DCO 108 generates the OSC signal in response to the control signal from digital processor 102. </p><p id="p0073" num="0073">[0071] Phase acquisition circuit 106 comprises a radio frequency (RF) counter 110, a flip- flop circuit 1 12, and a time to digital converter (TDC) 1 14. Although flip-flop circuit 1 12 is described separately from time to digital converter 1 14 for simplicity and clarity, flip-flop circuit 112 may be part of time to digital converter 1 14. RF counter 110 increments at every clock cycle of the OSC signal to provide coarse phase information as integer multiples of the oscillator period Tosc (the reciprocal of the frequency Fosc of the OSC signal). </p><p id="p0074" num="0074"> [0072] Time to digital converter 1 14 provides fine phase information as a fraction of the oscillator period Tosc to flip-flop circuit 1 12. The fine phase information may improve the phase noise performance of ADPLL 100. In some embodiments, time to digital converter 1 14 includes a delay chain. </p><p id="p0075" num="0075">[0073] Time to digital converter 1 14 determines the fractional portion of the phase count. Time to digital converter 1 14 has a quantization error that is a phase noise source and may cause an erroneous phase count. Time to digital converter may reduce tire quantization error as described in conjunction with Figs. 2-11. Time to digital converter 1 14 may also have a delay error that may cause an erroneous phase count. Time to digital converter 1 14 may reduce the delay error as described in conjunction with Figs. 12- 18. RF counter 1 10 and time to digital converter 1 14 may have a skew error. Digital processor 102 may reduce the skew error as described in conjunction with Figs. 19-26. Although the methods and devices are described separately for reducing different types of errors, the methods and devices can be combined to reducing the errors. </p><p id="p0076" num="0076">[0074] Fig. 2 illustrates time to digital converter 1 14 and flip-flop circuit 1 12 according to one embodiment. Time to digital converter 1 14 comprises a delay chain formed a series of delay circuits 202. Each delay circuit 2.02 has a delay Td, which is the resolution of time to digital converter 1 14. Flip-flop circuit 1 12 comprises a series of cascaded flip-flops 204. The output of each delay circuit 202 is coupled to a respective input of flip-flop 204. The REF clock clocks flip-flop 204. The outputs of the flip flops are provided to digital processor 102. </p><p id="p0077" num="0077"> [0075] Fig. 3 illustrates a graph showing the relationship between RF counter 1 1 , the REF clock, and the OSC signal according to one embodiment. RF counter 1 10 provides a coarse count C of clocks of the OSC signal in OSC unit intervals. The coarse count is shown as C-2, 
<!-- EPO <DP n="10"/>-->
 C- 1 , C, C+ 1 - -■ - The REF clock is offset by a fractional phase f from the OSC signal. Time to digital converter 1 14 provides a count to determine the fractional phase f. The overall phase acquisition is a phase C+f. </p><p id="p0078" num="0078"> [0076] Fig. 4 illustrates a graph showing the relationship between delay circuits 202, the REF clock, and the OSC signal according to one embodiment. Delay circuits 202 determine the number of delays Td for the fractional phase f. In the illustrative example of Fig. 4, the sampled pattern is 1 1 100 where the number of ' F indicates the fractional phase of the OSC signal. </p><p id="p0079" num="0079"> [0O77J Time to digital converter 1 14 has a finite phase resolution (e.g., Td/Tosc). Thus, time to digital converter 1 14 acquires phase information with a quantization error. The quantization error is a phase noise source that may be low-pass filtered with noise from the REF clock by ADPLL 100. Because ADPLL 100 is mostly digital, the quantization error of time to digital converter 1 14 is the major in- band phase noise contributor to ADPLL 100 at the output of DCO 108. </p><p id="p0080" num="0080">[0078J In some embodiments, if the oscillator phase sampled by time to digital converter 1 14 is randomly distributed, the quantization noise is uniformly distributed within the resolution of time to digital converter 1 14, thereby generating white quantization noise, and in turn white in-band phase noise at the output of DCO 1 8. In some embodiments, the oscillator frequency Fosc tracks the reference clock frequency F<sub>Ref,</sub> and time to digital converter 1 14 samples the oscillator phase at a reference clock frequency Fref. The phase sampled by time to digital converter 1 14 is a saw-tooth waveform, leading to a strong periodicity in the quantization noise of time to digital converter 1 14. </p><p id="p0081" num="0081">[0079J In the operation of ADPLL 100, the frequency Fosc of the OSC signal of ADPLL 100 is shown by: </p><p id="p0082" num="0082"> Fosc = N x Fref, with N any real number (fractional operation): N = r½rr + KFRAC where the term r T is the integer portion of N, and the term KFRAC is the fractional divide portion of N and is between 0 and 1. </p><p id="p0083" num="0083"> [0080] In an illustrative example of ADPLL 100 being a type IT. phase lock loop (two integrations in the phase lock loop) that provides zero phase error so that DCO 108 also tracks the reference phase, the oscillator phase Pose (in unit intervals of the oscillator) is sampled every reference clock cycle at instants k x Tref (Tref = 1/Fref) and may be expressed as: </p><p id="p0084" num="0084"> P<sub>0SC</sub><sup>k</sup> = k x ( iNT + KFRAC)- 
<!-- EPO <DP n="11"/>-->
 [008I| The oscillator phase sampled by the phase acquisition circuit 106 is a ramp. RF counter 1 10 measures the integer part of Pose, and time to digital converter i 14 receives the fractional divide portion KJRAC of Pose. Therefore, the input of time to digital converter 1 14 at samples k is: </p><p id="p0085" num="0085"> modulo (k x KFRAC, 1). </p><p id="p0086" num="0086"> [0082] The signal input of time to digital converter 1 14 thus has strong periodicity. For small fractional divide portion KFRAC values, the input of time to digital converter 1 14 is a saw-tooth slowly ramping from 0 to 1 periodically every 1 KFRAC samples. Although DCO 108 adds some noise to Pose, the noise typically is quite small so that the actual phase Posc<sup>k</sup> only slightly deviates from the above described behavior of th e noise, </p><p id="p0087" num="0087"> [0083] Because the input of time to digital converter 1 14 is strongly periodic, the quantization error is also a periodic signal. Depending on the fractional KFRAC value, the quantization noise energy can be spectrally concentrated in strong spurious tones in the phase noise spectrum of the OSC signal instead of being spread in a white noise profile. The energy concentration in strong spurious tones occurs for values of the fractional divide portion KFRAC close to rational numbers p/q. </p><p id="p0088" num="0088"> [0084] Fig. 5 illustrates a phase acquisition circuit 500 as one embodiment of phase acquisition circuit 106. Phase acquisition circuit 500 adds noise at the phase input of time to digital converter 1 14 to randomize the quantization noise of time to digital converter 1 14. Phase acquisition circuit 500 comprises RF counter i 10, flip-flop circuit 1 12, time to digital converter 1 14, and a noise generator 502, Noise generator 502 is coupled to the REF clock input to phase acquisition circuit 500, the OSC signal input to phase acquisition circuit 500, or both signal inputs. Noise generator 502 dithers the input phase of time to digital converter 1 14 so as to spread the spurious tones into white noise without degrading the performance of ADPLL 100. </p><p id="p0089" num="0089"> [0085] Noise generator 502 adds a random noise at the phase input of time to digital converter 1 14. The random noise is distributed within the resolution Td of time to digital converter 1 14 to randomize the quantization noise of time to digital converter 1 14, so that the noise becomes white noise instead of being concentrated at spurious tones in the PLL phase noise spectrum. </p><p id="p0090" num="0090"> [0086J In some embodiments, noise generator 502 provides a digitally controlled programmable delay that is controlled by a pseudorandom bit stream. Noise generator 502 is coupled in front of inputs to time to digital converter 1 14. Noise generator 502 modifies the amount of delay each time that time to digital converter 1 14 samples the oscillator phase, 
<!-- EPO <DP n="12"/>-->
 such as ai a sampling rate of the frequency F<sub>Ref</sub> of the REF clock. The value of the delay varies from 0 to the TDC resolution, such as the TDC delay Td. </p><p id="p0091" num="0091">[0087] Although noise generator 502 may be coupled in the path of the OSC signal, coupling noise generator 502 to the REF clock may provide advantages because the jitter of the dithering delay is taken into account at the sampling edges of the REF clock and because the OSC signal is at a much higher frequency. Further, the power consumption is much smaller, because the power is proportional to the driving clock frequency. Also, the timing constraints for the synchronization of the delay control word with the edges of the driving clock typically are easier to maintain at low frequency. </p><p id="p0092" num="0092">[0088] Fig. 6 illustrates a phase acquisition circuit 600 as one embodiment of phase acquisition circuit 500. Phase acquisition circuit 600 comprises RF counter 1 1 , flip-flop circuit 1 12, time to digital converter 1 14, and a noise generator 602. Noise generator 602 dithers the REF clock to generate a Ref Dither signal based on a digitally controlled delay of the REF clock. </p><p id="p0093" num="0093">[0Θ89] Noise generator 602 adds a pseudorandom noise at the phase input of time to digital converter 1 14. The random noise is distributed within the resolution Td of time to digital converter 1 14 to randomize the quantization noise of time to digital converter 114, so that the noise becomes white noise instead of being concentrated at spurious tones in the PEL phase noise spectrum. </p><p id="p0094" num="0094">[0090] Fig. 7 illustrates a graph 700 showing the relationship between the Ref Dither signal, the REF clock and the OSC signal. The edge of the REF cl ock is a phase f after the edge of the OSC signal. The Ref Dither signal has a random delay between 0 and the resolution Td after the edge of the REF clock. </p><p id="p0095" num="0095"> [0091] Fig. 8 illustrates a graph 800 showing the relationship between the phase difference of the OSC signal and the REF clock relative to time for the REF clock and the Ref Dither Signal. A graph 802 shows the relationship that the quantization noise is uniformly distributed random noise over time. A graph 804 shows the TDC quantization noise power is white noise over frequency because of the dithering, </p><p id="p0096" num="0096"> [0092] Fig. 9 illustrates a noise generator 900 as one embodiment of noise generators 502 and 602. Noise generator 900 comprises a linear feedback shift register 902, a differentiator 904 and a controlled delay circuit 906, Linear feedback shift register 902 is a pseudo-random noise generator and comprises a series of flip-flops that generate a pseudo-random noise sequence in a range of zero to 2<sup>m i</sup>. Differentiator 904 differentiates the pseudo-random noise sequence to shape the noise and shift most of the energy of the dithering outside the 
<!-- EPO <DP n="13"/>-->
 bandwidth of ADPLL 100. Controlled delay circuit 906 provides a programmable controlled delay to the REF clock to generate the Ref Dither signal. </p><p id="p0097" num="0097"> [0093] Linear feedback shift register 902 generates a pseudo-random sequence x[n] having a power spectrum similar to white noise at low frequencies by taking several consecutives taps of linear feedback shift register 902 and summing the taps together in a binary-weighted manner. In the illustrative example of Fig. 9, linear feedback shift register 902 has 18 bits. </p><p id="p0098" num="0098">[0094] Differentiator 904 comprises a z<sup>"1</sup> transfer function circuit 922, an adder 924 and a shaper 926. Differentiator 904 differentiates the sequence x[n] using transfer function circuit 922 to multiply the white noise with \z <sup>l</sup>\ in the z-transform domain and adder 924 to subtract the z<sup>"1</sup> factored sequence from the initial sequence x[n] to generate the differentiated sequence (y[n] = x[n]-x[n- i]). in the z-transform domain, the white noise is multiplied by 1- z <sup>[</sup>\. Differentiating the sequence to generate y[n] <sup>:::</sup> x[n]-x[n-l] shifts the noise to higher frequencies, Shaper 926 applies scaling to the sequence y[n] so that the sequence y[n] has the same magnitude as the x[n] sequence. </p><p id="p0099" num="0099">[0095] Controlled delay circuit 906 comprises a plurality of cascaded delay circuits 930. Each delay circuit 930 comprises an inverter 932 and a flip-flop 934. The delay of each inverter 932 may be digitally controlled by a digital control word that can vary the delay in steps between zero and the TDC resolution Td. In some embodiments, the number of steps is selected to provide dithering that behaves close to a uniform random distribution. In some embodiments, inverter 932 is controlled by a 4-bit binary-weighted digital control word. </p><p id="p0100" num="0100"> [0096] Differentiator 904 applies the scaled sequence y[n] to cascaded inverters 932, Flip- flop 934 resynchronizes locally in each delay circuit 930 so that the control signal is stable at the edges of the clock driving each delay. </p><p id="p0101" num="0101"> [0097] In some embodiments, controlled delay circuit 906 has the same or substantially the same topology as delay circuits 202 of time to digital converter i 14. The delay variation of delay circuit 930 substantially equals the delay variation of delays circuits of time to digital converter I i4 due to process or temperature variations. </p><p id="p0102" num="0102"> [0098] Fig. 10 illustrates a graph showing the relationship of the output noise of ADPLL 100 and frequency. The dithering introduced by noise generator 900 is additional noise in ADPLL 100 that adds to the TDC quantization noise. Noise generator 900 shifts most of the energy of the dithering outside the bandwidth of ADPLL 100. A line 1002 illustrates the relationship of the phase noise on the output of the OSC signal contributed by the dithered TDC quantization noise to frequency. The ADPLL 100 functions as a low pass filter. Line 1002 drops off outside the bandwidth of ADPLL 100, but would otherwise be flat. A line 
<!-- EPO <DP n="14"/>-->
 1004 illustrates the relationship between the dithering noise that is added by noise generator 900 and frequency. The noise is shifted outside the bandwidth of ADPLL 100. Line 1004 is filtered and drops off outside the bandwidth of ADPLL 100 but would otherwise rise. </p><p id="p0103" num="0103">Although the dithering noise reduces the quantization errors, the shift of the dithering noise does not contribute to the output phase noise of the OSC signal. </p><p id="p0104" num="0104"> [0099] Fig. 1 1 illustrates a simplified flowchart of a method for generating dithering according to one embodiment. At 1 102, a feedback signal is generated from an output signal of DCO 108. At 1 104, clock signals of the feedback signal are counted by RF counter 1 10. At 1 106, dithering is added to a reference clock or the feedback signal by noise generator 502. The dithering may be random noise that is distributed within a resolution of the time difference. At 1 108, a time difference between the feedback signal and the reference clock is determined by time to digital converter 1 14. At 1110, a control signal is outputted to DCO 108 to control the frequency of the OSC signal based on the determined time difference. </p><p id="p0105" num="0105">[0100] Time to digital converter 1 14 may also have a delay error that may cause an erroneous phase count. Time to digital converter 1 14 may reduce the delay error as described in conjunction with Figs. 3 and 12-18.</p><p id="p0106" num="0106"> 01 1 J Referring again to Fig. 3, time to digital converter 1 14 measures the time difference between the REF clock and the OSC signal in multiples m of the TDC delay Td: </p><p id="p0107" num="0107"> ΔΤ - m x Td. </p><p id="p0108" num="0108">[0102] In some embodiments, digital processor 102 uses the phase in unit intervals of the OSC signal, such as the time difference ΔΤ divided by the oscillator period Tosc: </p><p id="p0109" num="0109"> ΔΤ/Tosc <sup>::::</sup> m x Td/Tosc. </p><p id="p0110" num="0110">[0103] In some embodiments, digital processor 102 estimates the duration of the TDC delays relative to the oscillator period Tosc or uses the delay Td to continuously track the oscillator period Tosc so that the delay TD is an exact sub-multiple of the oscillator period Tosc. </p><p id="p0111" num="0111"> [0104] Fig. 12 illustrates a graph 1200 showing the ideal response relationship between the output of time to digital converter 1 14, the output of RF counter 1 10 and the combined outputs of RF counter 1 10 and time to digital converter 1 14. As an illustrative example, the ratio of the time delays Td and the oscillator period Tosc is <sup>'</sup>¼. Digital processor 102 determines the phase of the OSC signal from the recombination C+f of two independent measurements: the integer part of the phase C from RF counter 1 10 and the fractional part f<sup>:</sup>AT/Tosc<sup>™</sup> m x Td/Tosc from time to digital converter 1 14, 
<!-- EPO <DP n="15"/>-->
 [0105] Time to digital converter 1 14 increments in <sup>'</sup>¼ increments and reaches full scale (1 ) in one oscillator period Tosc. Time to digital converter 1 14 transitions from full scale to zero with the same input phase at which RF counter 1 1 0 increments by one. likewise the input phase is the same for subsequent increments of RF counter i 10. The transitions from full scale to zero of time to digital converter 1 14, the increments of RF counter 1 10 and the phase of time to digital converter 1 14 are aligned. </p><p id="p0112" num="0112"> [0106] If time to digital converter 1 14 does not determine the ratio Td/Tosc precisely, the full scale of time to digital converter 1 14 (e.g., f<sup>:::</sup>L.. . ΔΤ-Tosc) does not coincide with the steps (1 . , .Tosc) of RF<sup>'</sup> counter 1 10. The non-coincidence generates significant quantization error in the phase acquisition, and thereby degrades the performance of the output phase noise of ADPLL 1 00. </p><p id="p0113" num="0113"> [0107] Fig. 13 illustrates a graph 1300 showing the relationship between the output of time to digital converter 1 14, the output of RF counter 1 10 and the combined outputs of RF counter 1 10 and time to digital converter 1 14 with gain error. A gain error a on the ratio Td/Tosc causes an additional quantization error. </p><p id="p0114" num="0114"> [0108] As described above in conjunction with Fig. 4, the input of time to digital converter 1 14 has a strong periodicity and for small fractional divide portion KFRAC, the signal has a saw-tooth. Further, the quantization noise generated by the error in the measurement of Td/Tosc is concentrated in spurious tones in spectrum of the output phase noise of ADPLL 100. </p><p id="p0115" num="0115"> [0109] Fig. 14 illustrates a graph 1400 showing the relationship between the REF clock, the</p><p id="p0116" num="0116">OSC signal, and the delay counts of time to digital converter 1 14. Time to digital converter 1 14 determines the ratio Td/Tosc by measuring the time difference between two identical edges of the OSC signal, which are also used in the oscillator phase measurement. </p><p id="p0117" num="0117">[0110] In some embodiments, the oscillator phase is determined from the time difference between the rising edge of the OSC signal and the REF clock using two consecutive rising edges for estimating Td/Tosc. In some embodiments, the rising edges may be from multiple periods Tosc of the OSC signal.</p><p id="p0118" num="0118"> 0J ί 1| In some embodiments, the oscillator phase is determined from the time difference between the falling edge of the OSC signal and the REF clock using two consecutive falling edges for estimating Td/Tosc. In some embodiments, the failing edges may be from multiple periods Tosc of the OSC signal 
<!-- EPO <DP n="16"/>-->
 [0112] In the illustrative example of Fig. 14, the rising edge of the OSC signal is used to determine phase. The period Tosc of the OSC signal is shown for two consecutive rising edges of the OSC signal. </p><p id="p0119" num="0119"> [0113] The integer multiple n! is the number of TDC delays Td. The time difference ΔΤΊ corresponds to the TDC phase measurement. The time difference ΔΤ1 is the time between the first oscillator signal rising edge of the OSC signal and the REF clock and equals: </p><p id="p0120" num="0120"> ΔΤ1 = nl x Td, where nl is the number of Td delays. </p><p id="p0121" num="0121">[0114] The time difference ΔΤ2 is the time between the second oscillator signal rising edge of the OSC signal and the REF clock, and equals </p><p id="p0122" num="0122"> ΔΤ2 = n2 x Td, where n2 is the number of Td delays. </p><p id="p0123" num="0123"> [0115] The limes ΔΤ1 and ΔΤ2 are extracted from the output of time to digital converter 1 14 in terms of the integer multiple (nl, n2) of the TDC propagation delay Td. Further, the oscillator period Tosc can be expressed by:</p><p id="p0124" num="0124"><img id="imgf000016_0001" he="5" wi="33" file="imgf000016_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0125" num="0125">and the ratio may be expressed by : </p><p id="p0126" num="0126"> ATl/Tosc= nl x Td/Tosc. </p><p id="p0127" num="0127">[0116] The ratio ATd/Tosc may be determined from the average of the multiples nl and n2 and computing the reciprocal of the average. </p><p id="p0128" num="0128"> [0117] Particular embodiments may provide many advantages. For example, determining the ratio Td/ Tosc from measurements between two consecutive rising edges of the Tosc signal is not impacted by the duty-cycle error of DCO 108. As another example, both of the phase measurements ΔΤ/Tosc and the estimation of the ratio Td/ Tosc are based on measuring only the propagation inside time to digital converter 1 14 of rising edges of the OSC signal. Therefore, the oscillator phase measured by time to digital converter 1 14 is not impacted by the difference of propagation delays between rising and falling edges. </p><p id="p0129" num="0129"> [0118] Although the measurement of the ratio Td/Tosc may be done for every sample, the TDC range would be at least twice the oscillator period 2 x Tosc. However, using 1 ½ of the oscillator period (i.e. 1 .5 x Tosc) uses less circuits and thus less area and power. Statistically about 50% of the TDC samples will contain two consecutive rising edges so that the ratio Td/Tosc can be updated often enough from the averaging. </p><p id="p0130" num="0130"> [0119] Fig. 15 illustrates a delay estimator 1500 in RF counter 1 10. Delay estimator 1500 determines the ratio of the time delays Td of time to digital converter 1 14 and the oscillator period Tosc. Delay estimator 1500 is described for detections based on rising edges, but delay estimator 1500 may detect falling edges. 
<!-- EPO <DP n="17"/>-->
 [0120] Delay estimator 1500 comprises a decoder 1502, an accumulator 1504, an average calculator 1506, a counter 1508, a maximum count detector 1 10, and a flip-flop 1512. With a TDC range of 1.5 x T<sup>'</sup>osc, delay estimator 1 00 updates the ratio Td/Tosc whenever the oscillator phase seen by time to digital converter 1 14 falls in a range between 0 and 0.5, or f<sup>:::</sup> ΔΤ/Tosc is within 0 and 0.5 </p><p id="p0131" num="0131"> [0121] For each acquisition from time to digital converter 1 14, decoder 1502 decodes each output pattern from time to digital converter 114. If two sequences "01 " corresponding to the location of an oscillator rising edge are present, decoder 1502 calculates the difference between the location of the "01" transitions nl -n2 and provides the difference to accumulator 1504. Accumulator 1504 adds the differences and provides the count to average calculator 1 06. Decoder 1 502 determines whether two rising edges of the OSC signal are present and provides a signal indicating that two rising edges are present to accumulator 1504 and counter 1508. Counter 1508 increments with two rising edges. </p><p id="p0132" num="0132"> [0122] Accumulator 1 04 provides the accumulated value (ACC) to average calculator 1506, which divides the number of samples N by the accumulated value ACC. When maximum count detector 1510 determines that counter 1508 reaches the desired number of samples N to be used for each averaging of the samples to obtain the ratio of Td/Tosc, maximum count detector 1510 commands flip-flop 1 12 to output the ratio Td/Tosc, which is determined as Td/Tosc <sup>:::</sup> /ACC. Maximum count detector 1510 resets accumulator 1504 and counter 1508 to zero, and the cycle restarts. </p><p id="p0133" num="0133"> [0123] Figs, 16a, 16b and 16c illustrate graphs 1600, 1602, and 1604, respectively, showing the relationship between the OSC signal and the ratio Td/Tosc over a time range of 1.5 Tosc. Fig. 16a shows a ΔΤ/Tosc of zero and two rising edges of the OSC signal in time to digital converter 1 14 during the time range. Fig, 16b shows a ΔΤ/Tosc of 0.5 and two rising edges of the OSC signal in time to digital converter 1 14 during the time range. Fig.</p><p id="p0134" num="0134">16c shows a ΔΤ/Tosc of 0.5 and one rising edge of the OSC signal in time to digital converter 1 14 during the time range. </p><p id="p0135" num="0135"> [0124] Because the oscillator phase Pose is a ramp as described above, two consecutive rising edges are available for ail samples k that satisfy: </p><p id="p0136" num="0136"> Modulo (k x KFRAC, 1) &lt; 0.5 </p><p id="p0137" num="0137"> [0125] For example, a fractional divide portion KFRAC equals 0.25, two consecutive rising edges occurs for 50% of the samples and for the worst case fractional divide portion KFRAC -1/3, two consecutive rising edges occur for 33% of the samples. 
<!-- EPO <DP n="18"/>-->
 [0126] Fig. 1 7 illustrates an ADPLL 1700 using TDC delay estimation. ADPLL 1700 comprises DCO 108, phase acquisition circuit 106, and a digital processor 1702. Time to digital converter 1 14 provides a constant oscillator phase to digital processor 1702 when ADPLL 1700 operates in an integer mode (KFR<sub>A</sub>C = 0). In the integer mode, RF counter 1 10 in phase acquisition circuit 106 increments, hut time to digital converter 1 14 does not increment. ADPLL 1700 adds a phase offset to the phase from phase acquisition circuit 106 to force the constant phase seen by time to digital converter 1 14 to be at a value (e.g., between 0 and 0.5) so that two rising edges are present in time to digital converter 1 14. By forcing the constant phase, ADPLL 1700 forces the ratio Td/Tosc to be updated. </p><p id="p0138" num="0138">[0127] Digital processor 1702 comprises a reference accumulator 1710, adders 1 712 and</p><p id="p0139" num="0139">1714, and a filter 1 71 6. in one embodiment, ADPLL 1 700 is a type IT phase lock loop having zero phase error so that the phase in the feedback loop PFDB will be equal to the reference phase P^<sub>f</sub> provided by accumulator 1710 when the ADPLL 1700 is locked. </p><p id="p0140" num="0140">[0128] Adder 1712 adds an offset to the loop by adding a phase of -0.2.5 to the phase Pose from phase acquisition circuit 106 to generate the feedback loop phase PFDB- Reference accumulator 1710 is initialized to 0 at start-up, and increments by the integer count C (see Fig. 3) to generate the reference phase P<sub>Ref</sub> in response to the REF clock. Adder 1714 subtracts the feedback loop phase PFDB from the reference phase PR»f. The subtraction equals zero in lock from a type II loop. Filter 171 6 filters the output of adder 1714 and applies the filtered output to DCO 108. </p><p id="p0141" num="0141"> [0129] When ADPLL 1700 is in lock, at all samples k, the phase P<sub>osc</sub>(k) - 0.25 = the phase ReXX)- Because the phase Ρι¾Χ) is an integer, the fractional phase of Pose, ΔΤ/Tosc, equals 0.25 within the specified range (0 ... 0.5) at all times. Time to digital converter 1 14 updates the ratio ΔΤ/Tosc at every sample in PLL integer mode. </p><p id="p0142" num="0142">[0130] Fig. 18 illustrates a simplified flowchart of a method for generating a ratio of the time to digital converter resolution to the oscillator period according to one embodiment. At 1802, a time difference between a first edge of the OSC signal and a second edge of the OSC signal is measured. The first and second edges are on successive clock pulses of the OSC signal. The first and second edges may be rising edges. At 1804, a first number n l of time delays between the first edge of the OSC signal and an edge of a reference clock is counted. The time delays are delays in time-to -digital converter 1 14. At 1806, a second number nl of time delays between the second edge of the OSC signal and the edge of the reference clock is counted. 
<!-- EPO <DP n="19"/>-->
 [0131] At 1808, a time period Tosc of the OSC signal is determined based on the first number nl and the second number ii2. of time delays. At 1810, a ratio of the time delays and the time period of the OSC signal is determined based on the first and second number of time delays and the time period Tosc. The ratio may be determined by determining an average of the first number ni and the second number n2 of time delays, and determining a reciprocal of the average. At 1812, a signal is outputted to control digital processor 1 12 based on the ratio of the time delays and the time period of the OSC signal. </p><p id="p0143" num="0143"> [0132] RF counter 1 10 and time to digital converter 114 may have a skew error. Digital processor 102 may reduce the skew error as described in conjunction with Figs. 19-26. </p><p id="p0144" num="0144">[0133] Fig. 19 illustrates a graph showing the relation ship between the outputs of time-to- digital converter 1 14 and RF counter 1 10 with skew error according to one embodiment. As an illustrative example, the ratio of the time delays Td and the oscillator period Tosc is ¼. </p><p id="p0145" num="0145">[0134] As described above in conjunction with Fig. 12, in an ideal response, the transitions from full scale to zero of time to digital converter 1 14, the increments of RF counter 1 10 and the phase of time to digital converter 1 14 are aligned. However, time to digital converter 1 14 and R counter 1 10 may have internal delays or clock paths may have delays so that the transitions may not be aligned. An offset or skew delta in the alignment between the output versus input phase characteristics of time to digital converter 1 14 and RF counter 1 10 may occur. </p><p id="p0146" num="0146">[0135] If time to digital converter 1 14 transitions from full scale to zero before RF counter 1 10 increments, the sum drops a full, count until RF counter 1 10 increments. For example, when time to digital converter 1 14 transitions from full scale to zero and RF counter 110 remains at zero, the sum is zero. When RF counter 1 10 increments, the sum transitions from zero to one. The skew delta may be made small; the resulting recombined phase C+f is erroneous only for a small number of phase values within the oscillator period Tosc. </p><p id="p0147" num="0147"> However, the error in the phase acquisition corresponds to a phase shift of an entire oscillator period Tosc. Thus, even if the occurrence of an error due to the skew is somewhat small, the magnitude of the error is l arge, and the error generates, on average, a significant. T<sup>'</sup>DC quantization error of time to digital converter 1 14. If uncorrected, this error may dramatically degrade the in-band phase noise performance at the output of ADPLL 100. </p><p id="p0148" num="0148"> [0136] RF counter 1 10 detects and corrects the skew delta between the phases of time to digital converter 1 14 and RF counter 110 as described in conjunction with Figs. 20-26. 
<!-- EPO <DP n="20"/>-->
 [0137] Fig. 20 illustrates a skew correction circuit 2000 according to one embodiment. Skew correction circuit 2000 may be part of RF counter 1 10, Skew correction circuit 2000 comprises a resampling circuit 2002 and a skew error estimator 2004, </p><p id="p0149" num="0149">[0138] Resampling circuit 2002 generates a synchronized counter (CNTS) signal that indicates the count of the OSC signal synchronized to the REF clock. </p><p id="p0150" num="0150"> [0139] Skew error estimator 2.004 detects skew between the OSC signal and the REF clock and provides a signal for correcting the skew. Skew error estimator 2004 indicates whether the fractional oscillator phase f= ΔΤ/Tosc is near zero (ΔΤ =0), or near i (ΔΤ <sup>:::</sup>Tosc) independent of the actual fractional phase f<sub>A</sub> measured by time to digital converter 1 14. </p><p id="p0151" num="0151">[Θ14Θ] Skew error estimator 2004 samples the REF clock on the same edge of the OSC signal that clocks resampling circuit 2002 (e.g., the rising edge) to generates a synchronized Refs clock. Skew error estimator 2004 also samples the REF clock on the opposite edge (e.g. the falling edge) of the OSC signal to generate a time shifted reference (REF SB) clock, and then resample the REFSB clock again with the synchronized Refs clock. Skew error estimator 2004 generates an estimator output E that is used to detect errors related to the skew. </p><p id="p0152" num="0152"> [0141] Resampling circuit 2002 comprises a counter 2012, a flip-flop 2014, and a flip-flop 2016. Counter 2012 counts the clocks of the OSC signal to generate a count (CNT) signal Flip-flop 2014 resamples the REF clock with the OSC signal to generate synchronized Refs clock. Flip-flop 2016 samples the count signal in response to the synchronized Refs clock. Flip-flop 2016 samples the RF count at every reference clock edge. </p><p id="p0153" num="0153"> [0142] Flip-flop 2014 may comprise one or more resampling flip-flops cascaded in the path of the REF clock and the synchronized Refs clock. Greater numbers of flip-flops reduce the likelihood of metastability. Although additional flip-flops may generate an offset between the RF counter value of counter 2012 and the sample value, the offset has no impact on the PLL loop operation. For simplicity and clarify, a flip-flop 2014 comprising one flip-flop is described. </p><p id="p0154" num="0154"> [0143] Skew error estimator 2004 comprises a flip-flop 2022, an inverter 2024, and a flip- flop 2026. Because flip-flop 2022 samples the reference clock Ref of the opposite clock edge of the OSC signal, the time shifted signal RefSB is the REF clock time-shifted by about half an oscillator period Tosc/2. When the edge of the REF clock is near the edge of the OSC signal, skew error estimator 2004 can generate the estimator output E. if the edge of the Ref clock leads the edge of the OSC signal, the edge of the synchronized Refs clock is very close to the edge of the REF clock. When flip-flop 2026 samples the time shifted signal RefSB 
<!-- EPO <DP n="21"/>-->
 (and by inverting the sampled data by inverter 2024), skew error estimator 2004 generates an estimator output E of E =1. If the edge of the Ref clock lags the edge of the OSC signal, the edge of the synchronized Refs clock will be time shifted by about one oscillator period. When flip-flop 2026 samples the time shifted signal RefSB (and by inverting the sampled data by inverter 2024), skew error estimator 2004 generates an estimator output E of E<sup>™</sup>0. </p><p id="p0155" num="0155">[0144] Skew error estimator 2004 also detects whether the REF clock leads or lags the OSC signal. If the edge of the Ref clock leads the edge of the OSC signal, the fractional phase f is near ' F, and skew error estimator 2004 generates an estimator output E of E =1. If the edge of the Ref clock lags the edge of the OSC signal, the fractional phase f is near 'Ο', and skew error estimator 2004 generates an estimator output E of E =0. </p><p id="p0156" num="0156"> [0145] As described above, when the fractional phase f is near '0' or ' Γ, there can be a discrepancy of one oscillator unit interval between the phase measurements of time-to-digital converter I i4 and RF counter 1 10 due to skew. Skew error estimator 2.004 determines whether the TDC value f is expected to be near '0' or ' F given the value measured in RF counter 100, independent of the actual phase f<sub>A</sub> measured by time to digital converter 1 14. </p><p id="p0157" num="0157">[0146] Fig. 21 illustrates a graph 2100 showing the relationship of skew correction signals when the phase of the REF clock leads the phase of the OSC signal according to one embodiment. The rising edge of the REF clock leads the count C of the OSC signal by a time e. At the rising edge of the synchronized Refs clock, skew error estimator 2004 generates an estimator output E equaling ' F . During the time period 2102, the actual fraction f<sub>A</sub> output of time to digital converter 1 14 is ideally near ' 1 ' based on the estimator output equaling ' F. However, because of the skew, the actual fraction f<sub>A</sub> output can be near zero. The synchronized count CNTS of resampling circuit 2002 has a count of C-l. The count f of time to digital converter 1 14 is 1 - ε. The combined count of oscillator phases is C+f = C- ε. </p><p id="p0158" num="0158">[0147] Fig. 22 illustrates a graph 2200 showing the relationship of skew correction signals when the phase of the REF clock lags the phase of the OSC signal according to one embodiment. The rising edge of the REF clock lags the count C of the OSC signal by a time ε. Because the rising edge of the synchronized Refs clock has not occurred, skew error estimator 2004 generates an estimator output E equaling Ό'. During the time period 2202, the fraction f<sub>A</sub> output of time to digital converter 1 14 is ideally near '0' based on the estimator output E equaling Ό'. However, because of the skew, the actual fraction f<sub>A</sub> output can be near ' F. The synchronized count CNTS of resampling circuit 2002 has a count of C-l until the synchronized Refs clock rising edge when the count is incremented to C. The count f of time to digital converter 1 14 is ε. The combined count of oscillator phases is C+f = C+ ε. 
<!-- EPO <DP n="22"/>-->
 [0148] Digital processor 102 detects whether there is a discrepancy between the phase C from RF counter i 10 and the actual fraction f<sub>A</sub> output of time to digital converter 1 14 by determining whether the actual fraction f<sub>A</sub> output is consistent with the estimator output E. Digital processor 102 corrects the discrepancy between the phase C from RF counter 1 10 and the fractional phase f<sub>A</sub> from time to digital converter 1 14. If the fractional phase f<sub>A</sub> is near 0 and the estimator output E equals ' Γ, digital processor 102 adds' +1 ' to the combined phase result C+f<sub>A</sub>. On the other hand, if the TDC output f<sub>A</sub> is near ' 1 ' and the estimator output E equals Ό', digital processor 102 adds' -Γ to the combined phase result C+ f<sub>A</sub>. </p><p id="p0159" num="0159">[0149] Fig. 23 illustrates a graph 2.300 sho wing the relationship of fractional counts and oscillator fractional phase for negative skew according to one embodiment. As the negative skew causes the actual TDC output f<sub>A</sub> to fall to Ό', the fall occurs when the estimator output E equals ' Γ. Digital processor 102 adds' +1 ' to the combined phase result C+ f<sub>A</sub> so that the corrected TDC response causes the TDC output f<sub>A</sub> to rise to ' 1 '. </p><p id="p0160" num="0160"> [0150] Fig. 24 illustrates a graph 2400 showing the relationship of fractional counts and oscillator fractional phase for positive skew according to one embodiment. As the positive skew causes the actual TDC output f<sub>A</sub> to rise to ' Γ, the rise occurs when the estimator output E equals Ό'. Digital processor 1 2 adds Γ to the combined phase result C+f<sub>A</sub> so that the corrected TDC response causes the TDC output f<sub>A</sub> to fall to Ό'. </p><p id="p0161" num="0161"> [0151] Fig. 25 illustrates a table 2500 showing the relationship of correction applied to the output phase of time to digital converter 1 14 and the estimator output E according to one embodiment, in some embodiments, the estimator output E may be invalid if the fractional phase f is around 0.5. At this fractional phase, the edge of the REF clock is near the falling edge of the OSC signal that is sampling the REF clock. In some embodiments, additional circuits may be included in skew error estimator 2004 to provide another output if the estimator output E is invalid, in some embodiments, digital processor 102 compares the TDC output f<sub>A</sub> to the estimator output E and provides the correction, if TDC output f<sub>A</sub> is not within a distance TH of either 'Ο' or ' 1 '. The distance TH may be selected to be as far away from '0' or ' 1 ', so as to properly detect and correct the error due to the largest skew when f is near '0' or ' Γ while the estimator output E is valid. Table 2500 illustrates the correction that digital processor 102 applies to the phase correction C+ f<sub>A</sub>. </p><p id="p0162" num="0162"> [0152] Fig. 26 illustrates a simplified flowchart of a method for generating ske correction in RF counter 1 10 according to one embodiment. At 2602, a first edge of the OSC signal in a digital phase lock loop is detected. The first edge may be a rising edge of the OSC signal. At 2604, an edge of the REF clock is detected. The type of edge of the REF clock is the same 
<!-- EPO <DP n="23"/>-->
 type as the first edge of the OSC signal. At 2606, a second edge of the oscillator signal is detected. The second edge of the OSC signal has a different transition type from the first edge of the OSC signal If the first edge is a rising edge, the second edge is a fa ling edge. At 2608, a detection signal (e.g., estimator output E) indicative of the edge of the REF clock being near the first edge of the OSC signal is determined based on the first and second edges of the OSC signal and the edge of the REF clock. At 2610, a phase signal is outputted to control digital processor 102 based on the detection signal. </p><p id="p0163" num="0163"> [0153] Particular embodiments provide many advantages. For example, the detection and correction of the skew may provide a more accurate time detection that can be used to adjust the oscillator output frequency. </p><p id="p0164" num="0164"> [0154] As used in the descriptio herein and throughout the claims that follow, "a", "an", and "the" includes plural references unless the context clearly dictates otherwise. Also, as used in the description herein and throughout the claims that follow, the meaning of "in" includes "in" and "on" unless the context clearly dictates otherwise. </p><p id="p0165" num="0165">[0155] The above description illustrates various embodiments of the present invention along with examples of ho aspects of the present invention may be implemented. The above examples and embodiments should not be deemed to be the only embodiments, and are presented to illustrate the flexibility and advantages of the present invention as defined by the following claims. For example, one or more steps of methods or processes discussed above may be performed in a different order (or concurrently) and still achieve desirable results. Based on the above disclosure and the following claims, other arrangements, embodiments, implementations and equivalents may be employed without departing from the scope of the invention as defined by the claims. 
</p></description><claims mxw-id="PCLM44852164" ref-ucid="WO-2012117295-A2" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="24"/>-->WHAT IS CLAIMED IS: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method comprising: </claim-text><claim-text> generating a feedback signal from an output signal of a digitally controlled oscillator; </claim-text><claim-text> counting clock signals of the feedback signal; </claim-text><claim-text> adding dithering to a reference clock or the feedback signal; </claim-text><claim-text> determining a time difference between the feedback signal and the reference clock; and </claim-text><claim-text> outputting a control signal to control the frequency of the output signal of the digitally controlled oscillator based on the determined time difference. </claim-text></claim><claim id="clm-0002" num="2"><claim-text> 2. The method of claim 1, wherein adding dithering to the reference clock or the feedback signal comprises adding dithering to the reference clock. </claim-text></claim><claim id="clm-0003" num="3"><claim-text> 3. The method of claim 1 , wherein adding dithering to the reference clock or the feedback signal comprises adding dithering to the feedback signal. </claim-text></claim><claim id="clm-0004" num="4"><claim-text> 4. The method of claim 1 , wherein the dithering is random noise that is distributed within a resolution of the time difference. </claim-text></claim><claim id="clm-0005" num="5"><claim-text> 5. The method of claim 1 , further comprising shaping the dithering to distribute a majority of energy of the dithering outside a bandwidth of a phase lock loop providing the control signal to the digitally controlled oscillator. </claim-text></claim><claim id="clm-0006" num="6"><claim-text> 6. The method of claim 1, further comprising generating the dithering.</claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 6, wherein generating the dithering comprises: recei ving an output from each tap of a plurality of consecuti ve taps of a linear feedback shift register; and </claim-text><claim-text> summing the received outputs using binary weighting. </claim-text></claim><claim id="clm-0008" num="8"><claim-text> 8. The method of claim 7, wherein generating the dithering further comprises: </claim-text><claim-text> differentiating the summed received outputs; and </claim-text><claim-text> scaling the differentiated summed received outputs of the taps. </claim-text></claim><claim id="clm-0009" num="9"><claim-text> 9. A circuit comprising: </claim-text><claim-text> a digitally controlled oscillator configured to generate an oscillator signal having an output frequency based on a control signal; <!-- EPO <DP n="25"/>--> a digital processor having an output to provide the control signal in response to a reference clock and a timing signal; </claim-text><claim-text> a phase acquisition circuit having an output to provide the timing signal based on a time difference between the oscillator signal and the reference clock; </claim-text><claim-text> a counter configured to count clock signals of a feedback signal of the oscillator signal; </claim-text><claim-text> a dithering circuit configured to add dithering to the reference clock or the feedback signal; and </claim-text><claim-text> a time to digital converter configured to generate the timing signal based on a time difference between the feedback signal and the reference clock. </claim-text></claim><claim id="clm-0010" num="10"><claim-text> 10. The circuit of claim 9, wherein the dithering circuit is configured to add dithering to the reference clock. </claim-text></claim><claim id="clm-0011" num="11"><claim-text> 1 1. The circuit of claim 9, wherein the dithering circuit is configured to add dithering to the feedback signal. </claim-text></claim><claim id="clm-0012" num="12"><claim-text> 12. The circuit of claim 9, wherein the dithering is random noise that is distributed within a resolution of the time difference. </claim-text></claim><claim id="clm-0013" num="13"><claim-text> 13. The circuit of claim 9, wherein the dithering circuit is configured to shape the dithering to distribute a majority of energy of the dithering outside a bandwidth of the digital processor and the digitally controlled oscil lator providing the control signal to the digitally controlled oscil later. </claim-text></claim><claim id="clm-0014" num="14"><claim-text> 14. The circuit of claim 9, wherein the dithering circuit comprises: </claim-text><claim-text> a linear feedback shift register having a plurality of consecutive taps; and a summing circuit configured to sum an output signal from each tap using binary weighting. </claim-text></claim><claim id="clm-0015" num="15"><claim-text> 15. The circuit of claim 14, wherein the dithering circuit comprises: </claim-text><claim-text> a differentiator configured to differentiate the summed received outputs; and </claim-text><claim-text> a scaling circuit configured to scale the differentiated summed received outputs of the taps. <!-- EPO <DP n="26"/>--> </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The circuit of claim 15, wherein the dithering circuit comprises: </claim-text><claim-text> a delay circuit configured to generate the dithering signal based on a programmable delay of the scaled output of the scaling circuit. </claim-text></claim><claim id="clm-0017" num="17"><claim-text> 17. A method comprising: </claim-text><claim-text> measuring a time difference between a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, the first and second edges being on successive clock pulses of the oscillator signal: </claim-text><claim-text> counting a first number of time delays between the first edge of the oscillator signal and an edge of a reference clock, the time delays being delays in a time-to-digitai convenor; </claim-text><claim-text> counting a second number of time delays between the second edge of the oscillator signal and the edge of the reference clock; </claim-text><claim-text> determining a time period of the oscillator signal based on the first number of time delays and the second number of time delays; </claim-text><claim-text> determining a ratio of the time del ay and the time period of the oscil lator signal based on the first and second number of time delays and the time period of the oscillator signal; and </claim-text><claim-text> outputting a phase signal to control a digital processor in the digital phase lock loop based on the ratio of the time delay and the time period of the oscillator signal. </claim-text></claim><claim id="clm-0018" num="18"><claim-text> 1 8. The method of claim 17, wherein the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </claim-text></claim><claim id="clm-0019" num="19"><claim-text> 19. The method of claim 17, wherein the first and second edges of the oscillator signal are falling transitions of the oscillator signal. </claim-text></claim><claim id="clm-0020" num="20"><claim-text> 20. The method of claim 17, wherein determining a ratio of the time delay and the time period of the oscillator signal based on the first number of time delays and the second number of time delays comprises: </claim-text><claim-text> determining an average of the first and second numbers of time delays; and </claim-text><claim-text> determining a reciprocal of the average. <!-- EPO <DP n="27"/>--> </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The method of claim 17, further comprising: </claim-text><claim-text> determining whether the phase lock loop is operating in an integer mode: and </claim-text><claim-text> adding a phase offset to the phase signal if the phase lock loop is operating in an integer mode. </claim-text></claim><claim id="clm-0022" num="22"><claim-text> 22. The method of claim 17, wherein the time delays in the time-to-digital convertor have a range of zero to 1.5 times the time period of the oscillator signal. </claim-text></claim><claim id="clm-0023" num="23"><claim-text> 23. A circuit comprising: </claim-text><claim-text> a decoder configured to: </claim-text><claim-text> detect a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, the first and second edges being on successive clock pulses of the oscillator signal, </claim-text><claim-text> measure a time difference between a first edge of an oscillator signal and a second edge of the oscillator signal in a digital phase lock loop, </claim-text><claim-text> count a first number of time delays between the first edge of the oscillator signal and an edge of a reference clock, the time delays being delays in a time-to-digital convertor, </claim-text><claim-text> count a second number of time delays between the second edge of the oscillator signal and the edge of the reference clock, and </claim-text><claim-text> determine a time period of the oscillator signal based on the first number of time delays and the second number of time delays; </claim-text><claim-text> a calculator circuit configured to determine a ratio of the time delay and the time period of the oscillator signal based on the first and second number of time delays and the time period of the oscillator signal: and </claim-text><claim-text> a register configured to provide a phase signal to control a digital processor in the digital phase lock loop based on the ratio of the time delay and the time period of the oscillator signal. </claim-text></claim><claim id="clm-0024" num="24"><claim-text> 24. The circuit of claim 23, wherein the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </claim-text></claim><claim id="clm-0025" num="25"><claim-text> 25. The circuit of claim 23, wherein the first and second edges of the oscillator signal are falling transitions of the oscillator signal. <!-- EPO <DP n="28"/>--> </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The circuit of claim 23, wherein the calculator circuit is further configured to: </claim-text><claim-text> determine an average of the first and second numbers of time delays; and determine a reciprocal of the average. </claim-text></claim><claim id="clm-0027" num="27"><claim-text> 27. The circuit of claim 23, further comprising: </claim-text><claim-text> a digital processor configured to: </claim-text><claim-text> determine whether the phase lock loop is operating in an integer mode; and </claim-text><claim-text> add a phase offset to the phase signal if the phase lock loop is operating in an integer mode. </claim-text></claim><claim id="clm-0028" num="28"><claim-text> 28. A method comprising: </claim-text><claim-text> detecting a first edge of an oscillator signal in a digital phase lock loop; </claim-text><claim-text> detecting an edge of a reference clock; </claim-text><claim-text> detecting a second edge of the oscillator signal, the second edge of the oscillator signal having a different transition type from the first edge of the oscillator signal; </claim-text><claim-text> generating a detection signal indicative of the edge of the reference clock being near the first edge of the oscillator signal, based on the first and second edges of the oscillator signal and the edge of the reference clock; and </claim-text><claim-text> outputting a phase signal to control a digital processor of the digital phase lock loop based on the detection signal. </claim-text></claim><claim id="clm-0029" num="29"><claim-text> 29. The method of claim 28, wherem the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </claim-text></claim><claim id="clm-0030" num="30"><claim-text> 30. The method of claim 28, further comprising: </claim-text><claim-text> detecting a fractional phase of a time to digital convenor of the digital phase lock loop based on the edge of the reference clock and the first edge of the oscillator signal; and </claim-text><claim-text> adding a correction to the phase signal based on the detected fractional phase and the detection signal. </claim-text></claim><claim id="clm-0031" num="31"><claim-text> 31. A circuit comprising: </claim-text><claim-text> a skew error estimator configured to: </claim-text><claim-text> detect a first edge of an oscillator signal in a digital phase lock loop: <!-- EPO <DP n="29"/>--> detect an edge of a reference clock; </claim-text><claim-text> detect a second edge of the oscillator signal, the second edge of the oscillator signal having a different transition type from the first edge of the oscillator signal: </claim-text><claim-text> generate a detection signal indicative of the edge of the reference clock being near the first edge of the oscillator signal, based on the first and second edges of the oscillator signal and the edge of the reference clock; and </claim-text><claim-text> output a phase signal to control a digital processor of the digital phase lock loop based on the detection signal. </claim-text></claim><claim id="clm-0032" num="32"><claim-text> 32. The circuit of claim 31 , wherein the first and second edges of the oscillator signal are rising transitions of the oscillator signal. </claim-text></claim><claim id="clm-0033" num="33"><claim-text> 33. The circuit of claim 31 , further comprising: </claim-text><claim-text> a digital processor configured to: </claim-text><claim-text> detect a fractional phase of a time to digital converter of the digital phase lock loop based on the edge of the reference clock and the first edge of the oscillator signal; and </claim-text><claim-text> add a correction to the phase signal based on the detected fractional phase and the detection signal. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
