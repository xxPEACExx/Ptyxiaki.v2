<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681880-A1" country="EP" doc-number="2681880" kind="A1" date="20140108" family-id="46753999" file-reference-id="304356" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586408" ucid="EP-2681880-A1"><document-id><country>EP</country><doc-number>2681880</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11860484-A" is-representative="NO"><document-id mxw-id="PAPP154848600" load-source="docdb" format="epo"><country>EP</country><doc-number>11860484</doc-number><kind>A</kind><date>20110601</date><lang>EN</lang></document-id><document-id mxw-id="PAPP175868200" load-source="docdb" format="original"><country>EP</country><doc-number>11860484.2</doc-number><date>20110601</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140554647" ucid="CA-2011000645-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CA</country><doc-number>2011000645</doc-number><kind>W</kind><date>20110601</date></document-id></priority-claim><priority-claim mxw-id="PPC140549888" ucid="US-201113041019-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113041019</doc-number><kind>A</kind><date>20110304</date></document-id></priority-claim></priority-claims><technical-data><classification-ipc><edition>7</edition><main-classification>H04L  12/56</main-classification></classification-ipc><classifications-ipcr><classification-ipcr mxw-id="PCL-1662927999" load-source="docdb">H04L  12/841       20130101AFI20180228BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1713570448" load-source="docdb" scheme="CPC">Y02D  50/30        20180101 LA20180103BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925902466" load-source="docdb" scheme="CPC">H04L  47/34        20130101 LA20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925902987" load-source="docdb" scheme="CPC">H04L   1/1825      20130101 FI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925903912" load-source="docdb" scheme="CPC">H04L  69/14        20130101 LI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925904141" load-source="docdb" scheme="CPC">H04L  47/283       20130101 LA20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925904703" load-source="docdb" scheme="CPC">H04L   1/1887      20130101 LI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925905547" load-source="docdb" scheme="CPC">H04L   1/1883      20130101 LI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925906016" load-source="docdb" scheme="CPC">H04L  43/10        20130101 LI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925906842" load-source="docdb" scheme="CPC">H04L  47/193       20130101 LA20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925907078" load-source="docdb" scheme="CPC">H04L  47/27        20130101 LI20160624BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925909414" load-source="docdb" scheme="CPC">H04L  69/16        20130101 LA20160624BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363857" lang="DE" load-source="patent-office">STEUERUNG DES VERHALTENS EINER NETZWERKVORRICHTUNG</invention-title><invention-title mxw-id="PT132363858" lang="EN" load-source="patent-office">CONTROLLING NETWORK DEVICE BEHAVIOR</invention-title><invention-title mxw-id="PT132363859" lang="FR" load-source="patent-office">CONTRÔLE DU COMPORTEMENT D'UN DISPOSITIF EN RÉSEAU</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919541001" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BLACKBERRY LTD</last-name><address><country>CA</country></address></addressbook></applicant><applicant mxw-id="PPAR919534718" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>BLACKBERRY LIMITED</last-name></addressbook></applicant><applicant mxw-id="PPAR919009947" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>BlackBerry Limited</last-name><iid>101413722</iid><address><street>2200 University Avenue East</street><city>Waterloo, ON N2K 0A7</city><country>CA</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919514479" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WU WEI</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919546011" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WU, WEI</last-name></addressbook></inventor><inventor mxw-id="PPAR919016122" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WU, WEI</last-name><address><street>2000 Bridge Drive Suite 100 Ext. 63776</street><city>Redwood City, California 94065</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919510393" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LE KHIEM</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919536145" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LE, KHIEM</last-name></addressbook></inventor><inventor mxw-id="PPAR919017857" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LE, KHIEM</last-name><address><street>5000 Riverside Drive Brazos East Suite 100 Ext. 63607</street><city>Irving, Texas 75039</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919514444" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>CHOI NOUN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919522535" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>Choi, Noun</last-name></addressbook></inventor><inventor mxw-id="PPAR919019547" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Choi, Noun</last-name><address><street>5000 Riverside Drive Brazos East Suite 100 Ext. 63763</street><city>Irving, Texas 75036</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919019018" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Bryn-Jacobsen, Caelia</last-name><iid>100051843</iid><address><street>Kilburn &amp; Strode LLP 20 Red Lion Street</street><city>London WC1R 4PJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CA-2011000645-W"><document-id><country>CA</country><doc-number>2011000645</doc-number><kind>W</kind><date>20110601</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012119214-A1"><document-id><country>WO</country><doc-number>2012119214</doc-number><kind>A1</kind><date>20120913</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549914731" load-source="docdb">AL</country><country mxw-id="DS549760597" load-source="docdb">AT</country><country mxw-id="DS549914732" load-source="docdb">BE</country><country mxw-id="DS549770563" load-source="docdb">BG</country><country mxw-id="DS549838359" load-source="docdb">CH</country><country mxw-id="DS549760216" load-source="docdb">CY</country><country mxw-id="DS549760598" load-source="docdb">CZ</country><country mxw-id="DS549914733" load-source="docdb">DE</country><country mxw-id="DS549760221" load-source="docdb">DK</country><country mxw-id="DS549760222" load-source="docdb">EE</country><country mxw-id="DS549837917" load-source="docdb">ES</country><country mxw-id="DS549770564" load-source="docdb">FI</country><country mxw-id="DS549851783" load-source="docdb">FR</country><country mxw-id="DS549914734" load-source="docdb">GB</country><country mxw-id="DS549760223" load-source="docdb">GR</country><country mxw-id="DS549914735" load-source="docdb">HR</country><country mxw-id="DS549760599" load-source="docdb">HU</country><country mxw-id="DS549838360" load-source="docdb">IE</country><country mxw-id="DS549760224" load-source="docdb">IS</country><country mxw-id="DS549851784" load-source="docdb">IT</country><country mxw-id="DS549760229" load-source="docdb">LI</country><country mxw-id="DS549770573" load-source="docdb">LT</country><country mxw-id="DS549838439" load-source="docdb">LU</country><country mxw-id="DS549770574" load-source="docdb">LV</country><country mxw-id="DS549770575" load-source="docdb">MC</country><country mxw-id="DS549838440" load-source="docdb">MK</country><country mxw-id="DS549838441" load-source="docdb">MT</country><country mxw-id="DS549851785" load-source="docdb">NL</country><country mxw-id="DS549837978" load-source="docdb">NO</country><country mxw-id="DS549838361" load-source="docdb">PL</country><country mxw-id="DS549838454" load-source="docdb">PT</country><country mxw-id="DS549851790" load-source="docdb">RO</country><country mxw-id="DS549838455" load-source="docdb">RS</country><country mxw-id="DS549838374" load-source="docdb">SE</country><country mxw-id="DS549760600" load-source="docdb">SI</country><country mxw-id="DS549837979" load-source="docdb">SK</country><country mxw-id="DS549838375" load-source="docdb">SM</country><country mxw-id="DS549770576" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA100074319" ref-ucid="WO-2012119214-A1" lang="EN" load-source="patent-office"><p num="0000">A sender device is able to send packets over a network destined to a receiver device, and the sender device receives response information that is responsive to the packets. A behavior of the sender device with respect to data transmission on plural subflows of a connection is controlled based on the response information.</p></abstract><abstract mxw-id="PA100342117" ref-ucid="WO-2012119214-A1" lang="EN" source="national office" load-source="docdb"><p>A sender device is able to send packets over a network destined to a receiver device, and the sender device receives response information that is responsive to the packets. A behavior of the sender device with respect to data transmission on plural subflows of a connection is controlled based on the response information.</p></abstract><abstract mxw-id="PA100074320" ref-ucid="WO-2012119214-A1" lang="FR" load-source="patent-office"><p num="0000">Selon l'invention, un dispositif émetteur est capable d'envoyer des paquets sur un réseau, destinés à un dispositif récepteur, et le dispositif émetteur reçoit des informations de réponse qui constituent une réponse sensible aux paquets. Le comportement du dispositif émetteur, en ce qui concerne la transmission des données sur plusieurs sous-débits d'une connexion, est contrôlé au moyen des informations de réponse.</p></abstract><abstract mxw-id="PA100342118" ref-ucid="WO-2012119214-A1" lang="FR" source="national office" load-source="docdb"><p>Selon l'invention, un dispositif émetteur est capable d'envoyer des paquets sur un réseau, destinés à un dispositif récepteur, et le dispositif émetteur reçoit des informations de réponse qui constituent une réponse sensible aux paquets. Le comportement du dispositif émetteur, en ce qui concerne la transmission des données sur plusieurs sous-débits d'une connexion, est contrôlé au moyen des informations de réponse.</p></abstract><description mxw-id="PDES51374441" ref-ucid="WO-2012119214-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Controlling Network Device Behavior </p><p id="p0002" num="0002">Background </p><p id="p0003" num="0003"> [0001] In a data network, such as an Internet Protocol (IP) network, a transport protocol can be defined to provide for reliable, ordered delivery of data packets. One example of such a transport protocol is the Transmission Control Protocol (TCP). Data communication using TCP over an IP network is referred to as a TCP/IP communication. </p><p id="p0004" num="0004">[0002] Traditionally, TCP/IP communication over a data network employs a single path for each connection between network devices. More recently, to improve communication performance (in the form of higher data throughput and improved resilience to network failure), Multipath TCP (MPTCP) has been defined to allow for TCP communication using multiple paths for each connection between network devices. However, various issues may exist with respect to MPTCP that may prevent efficient use of MPTCP in some scenarios. </p><p id="p0005" num="0005">Summary </p><p id="p0006" num="0006"> [0003] In accordance with some embodiments, a sender device is able to send packets over a network destined to a receiver device, and the sender device receives response information that is responsive to the packets. A behavior of the sender device with respect to data transmission on plural subflows of a connection is controlled based on the response information. </p><p id="p0007" num="0007">[0004] Other or alternative features will become apparent from the following description, from the drawings, and from the claims. </p><p id="p0008" num="0008">Brief Description Of The Drawings </p><p id="p0009" num="0009"> [0005] Some embodiments are described with respect to the following figures: </p><p id="p0010" num="0010">Fig. 1 is a block diagram illustrating a multipath transport arrangement in which embodiments can be incorporated; 
<!-- EPO <DP n="3"/>-->
 Fig. 2 is a message flow diagram illustrating loss of a packet that prevents other packets from reaching a receiver device; </p><p id="p0011" num="0011">Fig. 3 is a flow diagram of a process of modifying behavior of a sender device in response to feedback from a receiver device, according to some embodiments; </p><p id="p0012" num="0012">Figs. 4A and 4B are message flow diagrams illustrating examples involving lost packets. </p><p id="p0013" num="0013">Fig. 5 is a message flow diagram of a process of a first retransmission solution according to some embodiments; </p><p id="p0014" num="0014">Fig. 6 is a flow diagram of a flow diagram of a process of the first </p><p id="p0015" num="0015">retransmission solution according to further embodiments; </p><p id="p0016" num="0016">Fig. 7 is a timing diagram illustrating various timing relationships; </p><p id="p0017" num="0017">Fig. 8 is a flow diagram of a process of a second retransmission solution, according to alternative embodiments; </p><p id="p0018" num="0018">Fig. 9 is a flow diagram of a congestion window size setting process, according to some embodiments; </p><p id="p0019" num="0019">Figs. 10 and 13 are state diagrams of operations of a receiver device, according to some embodiments; </p><p id="p0020" num="0020">Figs. 1 1 and 2 are flow diagrams of processes of the receiver device, according to some embodiments; </p><p id="p0021" num="0021">Fig. 14 is a state diagram of operation of a sender device according to some embodiments; </p><p id="p0022" num="0022">Figs. 15-16 are flow diagrams of processes of the sender device according to some embodiments; and </p><p id="p0023" num="0023">Fig. 17 is a block diagram of a network device according to some </p><p id="p0024" num="0024">embodiments. 
<!-- EPO <DP n="4"/>-->
 Detailed Description </p><p id="p0025" num="0025"> [0006] In the ensuing discussion, reference is made to the Multipath Transmission Control Protocol (MPTCP), which allows for communication of data in a transport connection between network devices across multiple subflows of a network simultaneously. MPTCP is developed by the Internet Engineering Task Force (IETF). Although reference is made to MPTCP, it is noted that techniques or mechanisms according to some embodiments can be applied to other protocols that allow for a connection between network devices to employ multiple subflows simultaneously. A "connection" between network devices refers to a session that is established using a predefined procedure, such as a procedure defined by MPTCP, TCP (Transfer Control Protocol), or other protocol. A connection between network devices can be established over a network that may have one or multiple </p><p id="p0026" num="0026">intermediate devices, such as middleboxes, routers, switches, firewalls, network address translators, proxies, and so forth. A subflow refers to a stream of packets belong to a connection (e.g., TCP connection) sent over a path. A path refers to a set of links between network devices— a path can be defined by a pair of addresses, such as a source address and a destination address. Multiple subflows of a connection can be provided over multiple paths. </p><p id="p0027" num="0027">[0007] Fig. 1 illustrates an example arrangement that includes a network 102 connected to a first network device 104 and a second network device 106. Although just two network devices are depicted, it is noted that the network 102 can be connected to additional network devices. Examples of network devices include personal digital assistants, mobile telephones, tablet computers, notebook computers, desktop computers, server computers, storage controllers, electronic appliances, or other types of electronic devices. </p><p id="p0028" num="0028">[0008] The example shown in Fig. 1 shows that multiple subflows 108 and 1 10 can be provided in a connection established between the network devices 104 and 106. Although just two subflows 108 and 1 10 are shown for the connection between network devices 104 and 106, note that the connection between network devices can have more than two subflows. It is also possible for the pair of network devices 104 and 106 to establish multiple connections, where each connection can be 
<!-- EPO <DP n="5"/>-->
 associated with its respective set of subflows. In some examples, the first subflow 108 can be part of a path over a mobile communications network, such as a cellular network. The second subflow 1 10 can be over a wireless local area network. In other examples, the subflow 108 or 1 10 can be part of a wired path. </p><p id="p0029" num="0029">[0009] As shown in Fig. 1 , in implementations that employ MPTCP, each of the network devices 104 and 106 includes a respective MPTCP protocol stack 1 2 and 1 4. The protocol stack 1 12 or 1 14 includes an application layer (including application software) and an MPTCP layer (for implementing MPTCP functionality). For each subflow, there is one TCP/IP (Transmission Control Protocol/Internet Protocol) instance 1 16A or 116B in the protocol stack 1 12 or 1 14. Note that there are two TCP/IP instances 1 16A, 1 16B because there are two subflows in the example of Fig. 1. If there are more subflows for the connection between network devices 104 and 106, additional TCP/IP instances would be provided in the protocol stack 112 or 1 14. </p><p id="p0030" num="0030">[0010] Each TCP/IP instance 1 16A or 116B includes a respective TCP layer 1 18A or 1 18B and an IP layer 120A or 120B. The MPTCP layer defines communication over a connection at a connection level (or data level), while each TCP layer defines communication at a subflow level. Versions of IP are described by Request for Comments (RFC) 791 , entitled "Internet Protocol," September 1981 (describing Internet Protocol Version 4 (IPv4)), or by RFC 2460, entitled "Internet Protocol, Version 6 (IPv6)) Specification," dated December 1998. A version of TCP is described in RFC 793, entitled "Transmission Control Protocol," dated September 1981 . Although each protocol stack 1 12 or 1 14 is depicted with an MPTCP layer and TCP/IP instances, it is noted that protocol stacks according to other </p><p id="p0031" num="0031">implementations can include other types of protocol layers. Also, not all layers of the protocol stack 1 12 or 1 14 are depicted; there may be other layers that are not depicted. </p><p id="p0032" num="0032">[0011] MPTCP is designed to be backward compatible with existing network components. In some cases, the network 102 may include one or multiple blocking intermediate devices 120A and 120B, also referred to as sequence hole blocking 
<!-- EPO <DP n="6"/>-->
 middle boxes. Examples of blocking intermediate devices include firewalls, network address translators, proxies (such as performance enhancing proxies), or any other intermediate device that is on the routing path of packets between a sender device and a receiver device and that prevents forwarding of packets to a destination, as an example when the intermediate device detects loss of continuity in sequence numbers in packets received by the intermediate device 120A or 120B. Stated differently, if the blocking intermediate device detects sequence holes in packets received by the intermediate device, then the blocking intermediate device will block the forwarding of packets having sequence numbers after or larger than the missing sequence number to the destination. In alternative implementations, the blocking intermediate device can block the forwarding of packets if the blocking intermediate device detects some other characteristic in a stream of packets from the sender device. A blocking intermediate device is on the path of a subflow when the blocking intermediate device is on the routing path of packets between a sender device and a receiver device. </p><p id="p0033" num="0033">[0012] In the example of Fig. 1 , there are intermediate devices 120A and 120B provided in respective subflows 108 and 110. In alternative examples, a blocking intermediate device is provided in just one of the subflows 108 and 110. As yet another example, one or both of the intermediate devices 120A and 120B can be non-blocking intermediate devices (a non-blocking intermediate device allows packets to be forwarded to the destination even if there is a sequence hole in the packets). Assuming that the intermediate device 120A or 120B is a blocking intermediate device, such blocking intermediate device will block forwarding of packets along the respective subflow (108 or 110) if the blocking intermediate device detects a sequence hole along that subflow. </p><p id="p0034" num="0034">[0013] Fig. 2 illustrates an example message flow diagram that illustrates the issue of packet loss occurring that causes a blocking intermediate device 120 (either 120A or 120B in Fig. 1) to block forwarding of packets. Although reference is made to transmitting packets in the present description, it is noted that "packet" can refer to a byte, a collection of bytes, or any other grouping of data. Note that according to 
<!-- EPO <DP n="7"/>-->
 TCP, sequence numbers are associated with bytes. With other protocols, sequence numbers can be associated with other groupings of data. </p><p id="p0035" num="0035">[0014] As shown in the example of Fig. 2, packet k (with sequence number s(k)) sent by a sender device {e.g., network device 104) is lost (202) before reaching the blocking intermediate device 120. A lost packet includes a packet that is sent by a sender device to a receiver device and is not received by the receiver device. Fig. 2 also shows subsequent transmission of packets k+1 , k+2, k+3, and k+4 from the sender device 104 to the blocking intermediate device 120, having sequence numbers greater than s(k). The packets having respective sequence numbers s(k+1 ) to s(k+4) are blocked (204) by the blocking intermediate device 120, due to the sequence hole resulting from loss of the packet k. </p><p id="p0036" num="0036">[0015] As further shown in Fig. 2, in response to a triggering event, packet k is retransmitted (206), where the retransmitted packet k is received by the intermediate device 120 and forwarded (represented by arrow 208) to the receiver device (e.g., network device 106). After the retransmitted packet k is received by the blocking intermediate device 120, the blocking intermediate device 120 can release (210) packets k+1 , k+2, k+3, and k+4 to receiver device 106. </p><p id="p0037" num="0037">[0016] In a different example, if the packet k was lost after receipt by the blocking intermediate device 120 and after the blocking intermediate device 120 has forwarded the packet having sequence number s(k) to the receiver device 106, the blocking intermediate device 120 will not block the packets having sequence numbers s(k+1 ) to s(k+4), since the blocking intermediate device 120 has already seen the packet having sequence number s(k). </p><p id="p0038" num="0038">[0017] Conventionally, to deal with the possible existence of a blocking </p><p id="p0039" num="0039">intermediate device in a subflow, at least the following rules (referred to as "Rule 1 " and "Rule 2") may be implemented. Rule 1 specifies that a missing packet in a particular subflow should be retransmitted on the same subflow. Thus, according to Rule 1 , if a packet having a particular sequence number was lost in subflow 108, then the packet having the particular sequence number should be retransmitted on subflow 108. Rule 1 can be considered a retransmission rule at the subflow level. 
<!-- EPO <DP n="8"/>-->
 [0018] Rule 2 specifies that a sender device has to keep data in the sender device's send buffer at the MPTCP connection level as long as the data has not been acknowledged at the connection level as well as on all subflows that the data has been sent on. Maintaining the data in the send buffer allows a sender device to retransmit the data if needed, on the same subflow or on a different subflow. Rule 2 can be considered a retransmission rule at the connection level. </p><p id="p0040" num="0040">[0019] As will be described in some examples discussed below, complying with Rule 1 or Rule 2 may be inefficient in some scenarios. Rules 1 and 2 are provided due to the possibility that a blocking intermediate device may be present on a subflow of a connection between network devices. </p><p id="p0041" num="0041">Retransmission Solutions </p><p id="p0042" num="0042">[0020] In accordance with some embodiments, to allow for more efficient use of network resources and to improve network communication throughput, techniques or mechanisms are provided to allow for a sender device (that is communicating with a receiver device over a connection) to change its behavior depending upon feedback received from the receiver device. In some implementations, a first retransmission solution (Retransmission Solution 1 ) is provided. As discussed below, this </p><p id="p0043" num="0043">retransmission solution uses a probing mechanism for determining whether a blocking intermediate device is present. With Retransmission Solution , the sender device uses feedback from the receiver device to either (1 ) affirmatively determine that a blocking intermediate device does not exist in the path of a subflow, or (2) determine that the sender device is without knowledge of whether a blocking intermediate device is in the path of a subflow or cannot determine that a blocking intermediate device is in the path of a subflow. If the sender device detects condition (1 ) (that the sender device has affirmatively determined that a blocking intermediate device does not exist in the path of a subflow), then the sender device modifies its behavior with respect to communication over subflows of a connection between the sender device and the receiver device, by implementing a first behavior with respect to data transmission over subflows of the connection. The first behavior allows the 
<!-- EPO <DP n="9"/>-->
 sender device to operate without having to comply with Rule 1 or Rule 2, or both Rules 1 and 2. </p><p id="p0044" num="0044">[0021] In response to detecting condition (2) above (the sender device is without knowledge of whether a blocking intermediate device is in the path of a subflow), the sender device implements a second behavior, in which the sender device complies with either Rule 1 or Rule 2, or both. </p><p id="p0045" num="0045">[0022] In alternative implementations, a second retransmission solution </p><p id="p0046" num="0046">(Retransmission Solution 2) is provided, in which the probing of Retransmission Solution 1 is not used. With Retransmission Solution 2, since probing is not used, the sender device is unable to affirmatively determine whether a blocking </p><p id="p0047" num="0047">intermediate device exists or not in the path of a subflow, as can be done with Retransmission Solution 1. Instead, with Retransmission Solution 2, based on feedback from the receiver device, the sender device determines one of two conditions is present: (a) no blocking intermediate devices exists in a subflow, or a specific lost packet or any lost packet was lost after being forwarded from a blocking intermediate device; or (b) a blocking intermediate device exists, or all packets with a sequence number greater than the sequence number of a lost packet have been lost before reaching the blocking intermediate device or have been lost after the blocking intermediate device or have been discarded by the blocking intermediate device. </p><p id="p0048" num="0048">[0023] In response to detecting condition (a) above, the sender device implements a first behavior in which the sender device does not have to comply with Rule 1 , but complies with Rule 2. On the other hand, in response to detecting condition (b) above, the sender device implements a second behavior in which the sender device has to comply with both Rule 1 and Rule 2. </p><p id="p0049" num="0049">[0024] With either Retransmission Solution 1 or Retransmission Solution 2 noted above, mechanisms or techniques are provided to allow the sender device to determine that the feedback actually came from the receiver device, and was not generated or altered by some intermediate device. Such mechanisms or techniques are discussed in a section entitled "Receiver Feedback Mechanisms or Techniques" provided further below. 
<!-- EPO <DP n="10"/>-->
 [0025] Fig. 3 illustrates a process according to some embodiments. The sender device sends (at 302) packets over a network, where the packets are destined to a receiver device. The sender device receives (at 304) response information that is responsive to the packets sent by the sender device. The response information is considered the feedback from the receiver device mentioned above. The behavior of the sender device with respect to communication over multiple subflows of a connection is controlled (at 306) based on the response information. Controlling the behavior includes causing the sender device to implement different behaviors (first and second behaviors noted above) with respect to data transmission over subflows of a connection between the sender device and the receiver device, in response to the response information indicating respective different conditions. In some implementations, the sender device implements the first behavior with respect to data transmission over the subflows of a connection in response to the response information indicating condition (1 ) or (a) noted above, and the sender device implements the second, different behavior with respect to data transmission over the subflows of a connection in response to the response information indicating condition (2) or (b) noted above. </p><p id="p0050" num="0050">[0026] Additional details regarding the foregoing Retransmission Solution 1 and Retransmission Solution 2 are discussed further below. </p><p id="p0051" num="0051">[0027] As discussed above, Rule 1 proposed for MPTCP forces the </p><p id="p0052" num="0052">retransmission of lost packets on the same subflow that the lost packets were originally sent over. Fig. 4A illustrates an example packet retransmission scenario that is in accordance with Rule 1 . In Fig. 4A, each packet over a respective subflow includes two sequence numbers: a subflow-level sequence number (SSN) and a data-level (or connection-level) sequence number (DSN). A subflow-level </p><p id="p0053" num="0053">characteristic such as a sequence number is a characteristic that describes the properties of an individual subflow, i.e. a flow of data packets belonging to a path. A data-level or connection-level characteristic such as a sequence number is a characteristic of an MPTCP connection. The SSN is employed by the TCP layer 1 18A or 118B in the protocol stack 1 12 or 114 of Fig. 1. The DSN is used by the 
<!-- EPO <DP n="11"/>-->
 MPTCP layer in the protocol stack 1 12 or 1 14. Sequence numbers are used by each protocol stack to allow for reliable, ordered delivery of packets. </p><p id="p0054" num="0054">[0028] In Fig. 4A, various packets are sent from the sender device to the receiver device along subflows 1 and 2 in transmissions 400. In Fig. 4A, it is assumed that a packet 402 having SSN 201 and DSN 4 was lost in subflow 2. In response to the packets received over subflow 1 , the receiver device sends an acknowledgement (ACK) message 403 to the sender device on subflow 1 , where the ACK message is a cumulative acknowledgement indicating successful receipt of the packets along subflow 1 , including packet 404 containing SSN 102 (as well as packets with SSNs 100 and 101 ). A cumulative acknowledgement is provided by the receiver device to acknowledge that the receiver device correctly received a packet in a stream (which in the example is packet 404 in subflow 1 ) that implicitly informs the sender device that the previous packets (packets with a lower sequence number) were also received correctly. In the ensuing discussion, reference to "ACK" indicates a cumulative acknowledgement. Other types of acknowledgements will be indicated with different abbreviations in the discussion below. </p><p id="p0055" num="0055">[0029] An acknowledgement message 406 provided in subflow 2 acknowledges successful receipt of a packet 408 on subflow 2, which has SSN 200 and DSN 3. Note that subflow 2 in the example of Fig. 4A is the subflow used for acknowledging the data level sequence number of packets received by the receiver device. In the example of Fig. 4A, the acknowledgement message 406 includes a subflow-level ACK:201 to acknowledge successful receipt of a packet (408) without any SSN holes containing SSN 200 along subflow 2, and data-level ACK:4 to acknowledge successful receipt of packets containing DSNs up to 3 (without any DSN holes) along both subflows 1 and 2. </p><p id="p0056" num="0056">[0030] Due to loss of the packet 402 in subflow 2, the acknowledgement message 406 sent from the receiver device to the sender device does not acknowledge the SSN of 202 and DSN of 6 in packet 409, since an SSN hole and DSN hole are present due to loss of the packet 402. 
<!-- EPO <DP n="12"/>-->
 [0031] To comply with Rule 1 discussed above, the lost packet 402 (originally sent on subflow 2) has to be retransmitted on subflow 2 (the lost packet 402 may or may not be retransmitted on subflow 1 in parallel, which depends on the implementation of sender device's retransmission algorithms). In the example shown in Fig. 4A, the lost packet 402 is not retransmitted over subflow 1. The retransmitted packet is designated packet 412 in subflow 2. Fig. 4A also depicts further transmissions 414 of various packets on subflows 1 and 2, including the retransmitted packet 412 in subflow 2. Acknowledgement messages (416) are sent by the receiver device to the sender device in response to the packet transmissions 414. It is assumed that all packets sent in transmissions 414 were successfully received by the receiver device. </p><p id="p0057" num="0057">[0032] The retransmission of the packet 412 over the same subflow of the lost packet 402 is performed to deal with the possibility of the presence of a blocking intermediate device on subflow 2, which does not tolerate sequence holes. If another subflow, such as subflow 1 , is a better choice for sending the retransmitted packet 412 (such as due to subflow 1 having lower congestion), then Rule 1 would cause reduced data throughput performance since the retransmitted packet has to be sent over the same subflow, which may be experiencing higher congestion or have other issues. As another example, it may be the case that subflow 2 may actually be broken, in which case the sender device has to keep resending the lost packet over the same subflow until the sender device determines that subflow 2 is broken, which may take some time and also wastes network resources such as network bandwidth. In specific examples, subflow 2 may be a wireless link, and retransmission of the packet 412 over this wireless link may be expensive in terms of usage of radio bandwidth and radio resources. In some examples, retransmission of a TCP packet may trigger even more redundant radio level retransmissions, such as radio level retransmissions due to poor radio link quality. </p><p id="p0058" num="0058">[0033] Fig. 4B is a message flow diagram illustrating application of Rule 2 discussed above. In the Fig. 4B example, transmissions 400 and 414 are similar to respective transmissions 400 and 414 in Fig. 4A. In Fig. 4B, packet 402 originally sent in subflow 2 was lost, which triggered retransmission of the packet, in the form of retransmitted packet 412 in subflow 2 as well as packet 4 1 in subflow 1. 
<!-- EPO <DP n="13"/>-->
 However, in the example of Fig. 4B, it is assumed that retransmitted packet 412 in subflow 2 was also lost, but the retransmitted packet 411 was received successfully by the receiver device. </p><p id="p0059" num="0059">[0034] In response to packet transmissions 414 over subflows 1 and 2, the receiver device sends respective acknowledgement messages (420) to the sender device. Packets with DSN up to 8 were sent by the sender device and received by the receiver device over one or both of the subflows. As a result, the receiver device sends a data-level cumulative acknowledgement sequence number of 9, as indicated in the acknowledgement message 418. However, note that due to failure to receive the retransmitted packet 412, the SSN of the subflow-level </p><p id="p0060" num="0060">acknowledgment in the acknowledgement message 418 is 201 , to indicate that the last successfully received packet in subflow 2 without an SSN hole has an SSN of 200 (namely packet 408 in the Fig. 4B example). </p><p id="p0061" num="0061">[0035] If Rule 2 does not have to be complied with, the sender device, after receiving the acknowledgement message 418 with a DSN of 9, would have been able to clear packets in the send buffer of the sender device up to DSN 8 at the MPTCP connection level. However, because packets with DSNs 4, 6, and 7 may still have to be retransmitted on subflow 2, due to lost packet 412, the sender device cannot clear its send buffer at the MPTCP connection level for packets with DSN 4, 6, and 7, and such packets would have to be maintained in the send buffer of the sender device, despite the fact that a data-level ACK message has already been sent acknowledging receipt of the DSNs up to DSN 8. This is wasteful of the send buffer storage capacity. </p><p id="p0062" num="0062">[0036] In the case where the receiver device is able to send a selective </p><p id="p0063" num="0063">acknowledgement (SACK) instead of a cumulative ACK (where the selected acknowledgement is able to identify respective DSNs after a sequence hole received by the receiver device), the sender device only has to maintain packet(s) with DSN 4 in the send buffer, and does not have to maintain the packets having DSNs 6 and 7. Even in this latter case, the send buffer of the sender device still has to keep packet(s) having DSN 4, which consumes storage capacity. 
<!-- EPO <DP n="14"/>-->
 [0037] As discussed above, in accordance with some embodiments, techniques or mechanisms are provided to allow the sender device to modify its behavior according to feedback received from the receiver device. In some embodiments, a probing-based solution (Retransmission Solution 1 discussed above) allows the sender device to perform subflow probing to affirmatively determine that a blocking intermediate device does not exists on a subflow between the sender device and the receiver device. Alternatively, Retransmission Solution 2 does not use the probing technique, but the sender device is still able to modify its behavior based on feedback received from the receiver device in response to messaging from the sender device. </p><p id="p0064" num="0064">[0038] Fig. 5 illustrates a probing-based solution (Retransmission Solution 1 ) according to some embodiments. For determining whether there is a blocking intermediate device between the sender device and the receiver device, the sender device creates a sequence number hole in a subflow by holding one or multiple packets (by not transmitting such held one or multiple packets in the sequence of packets to be transmitted in the subflow). Such held packet(s) is (are) also referred to as "probing packet(s)." Based on feedback from the receiver device in response to the sent packets with a sequence number hole, the sender device can determine whether a blocking intermediate device exists on the subflow. </p><p id="p0065" num="0065">[0039] As shown in Fig. 5, the sender device holds packet 502 in subflow 2, thereby creating a sequence number hole in subflow 2. More generally, the sender device holds one or more packets (e.g., packet 502 in Fig. 5) from a subflow belonging to a connection but sends packet(s) with higher DSN(s) (e.g., 512 and 514) to create a sequence number hole in the subflow. The held packet is not sent on any subflow, but rather is stored in a memory, buffer, or other storage of the sender device. </p><p id="p0066" num="0066">[0040] The receiver device sends a data-level acknowledgement to indicate what packets belonging to the connection (on multiple subflows) have been received. The receiver device also sends a subflow-level acknowledgement on the subflow being probed (subflow 2 in Fig. 2) to indicate what packets have been received over the 
<!-- EPO <DP n="15"/>-->
 subflow being probed. More specifically, a subflow-level ACK message 504 in subflow 1 provides a cumulative acknowledgement of packets received in subflow 1 , with the ACK message 504 containing acknowledge SSN 103 to indicate successful receipt of packet 506 containing SSN 102. </p><p id="p0067" num="0067">[0041] An acknowledgement message 508 in subflow 2 uses selective </p><p id="p0068" num="0068">acknowledgement (SACK) at the subflow level. The subflow-level SACK in message 508 allows the receiver device to indicate successful receipt of a packet 510 before the sequence number hole, and packets 512 and 514 after the sequence number hole in subflow 2. The cumulative acknowledgment (ACK) at the connection level in the acknowledgement message 508 provides cumulative acknowledgement of successful receipt of packets containing DSNs up to 3 in both subflows 1 and 2. </p><p id="p0069" num="0069">[0042] The sender device can determine from the acknowledgement message 508 that the receiver device successfully received packets having SSNs having values greater than the value of the SSN (201 ) of the packet 502 that was held by the sender device. From this, the sender device can determine (at 516) that there is no blocking intermediate device between the sender device and the receiver device in subflow 2. On the other hand, if the SACK in the acknowledgement message 508 would have contained just the SSN 200 (and not 202 and 203), the sender device would not be able to determine that there is no blocking intermediate device in subflow 2. In such a scenario, the sender device is without knowledge of whether the blocking intermediate device is in subflow 2. </p><p id="p0070" num="0070">[0043] Further transmissions 518 are sent in the example of Fig. 5, including the release of the held packet (probing packet) 502 after determining that there is no blocking intermediate device. Releasing a held packet refers to removing the held packet from memory, buffer, or other storage and sending the packet to a receiver device. From the receiver device's point of view, the packet 502 looks as if it was delayed by the network. While one or more packets (e.g., packet 502) are being held, the sender device ignores any duplicated ACKs for the packet 502. A duplicated ACK is an ACK repeatedly sent for a packet having sequence number n when the receiver device detects packet(s) having sequence number(s) greater than 
<!-- EPO <DP n="16"/>-->
 n (but the receiver has not yet received packet n). Thus, for example, if the receiver device did not receive packet n, but receives a packet n+1 , the receiver device sends a duplicated ACK for sequence number n. If the receiver device later receives another packet n+2, then the receiver device will send another duplicate ACK for sequence number n. The duplicate ACKs informs the sender device that a sequence hole has been detected at the receiver device. </p><p id="p0071" num="0071">[0044] A similar procedure according to Fig. 5 can be performed for probing subflow 1 to determine whether a blocking intermediate device exists in subflow 1. </p><p id="p0072" num="0072">[0045] If the sender device determines that no blocking intermediate device is present in a particular subflow, then the sender device operates assuming sequence number holes are allowed on the particular subflow in the direction from the sender device to the receiver device. In other words, the sender device can perform data communication over the particular subflow from the sender device to the receiver device without complying with Rule 1 or Rule 2, or both. Thus, if there is no blocking intermediate device in subflow 2, the sender device can retransmit a lost packet on a different subflow {e.g., subflow 1 ) than the subflow where the lost packets were originally sent. As an example, the sender device can choose the subflow with the lowest congestion or other criteria. In addition, if there is no blocking intermediate device, the sender device can release all packets in its send buffer at the connection level as soon as the sender device receives an acknowledgement at the connection level that the packets have been received. By choosing not to comply with Rule 1 or Rule 2, or both, retransmission efficiency can be improved (e.g., to provide improved network throughput), and send buffer usage efficiency at the sender device can also be improved. </p><p id="p0073" num="0073">[0046] On the other hand, if the probing performed according to Fig. 5 indicates that the sender device is without knowledge of whether a blocking intermediate device exists in a subflow, then the sender device would comply with Rule 1 and Rule 2 discussed above for subflow 2. </p><p id="p0074" num="0074">[0047] Fig. 6 is a flow diagram of a process performed by a sender device to perform path probing (Retransmission Solution 1 ) according to some 
<!-- EPO <DP n="17"/>-->
 implementations. The process of Fig. 6 can be performed each time a new subflow is created, or in response to some other event (such as the subflow changing its characteristics). In the Fig. 6 example, it is assumed that there is a predefined maximum number of attempts threshold specifying the maximum number of probes of a subflow allowed at the sender device for each iteration, i.e. that the sender device can send. In the example of Fig. 6, this maximum threshold is expressed as Max_Attempt. Also, a probing attempt counter is provided to count the number of attempts. The maximum threshold Max_Attempt can be a configured value set by configuration of the sender device by the user of the sender device or configured by an operator and delivered by the operator to the sender device with signaling information, where an operator can be the entity deploying the MPTCP solution in the sender device, the receiver device and the network. </p><p id="p0075" num="0075">[0048] In addition, a probing timer is used for each subflow of a connection. The sender device starts the probing timer for a given subflow when the sender device starts the probing and creates a sequence number hole by holding one or more packets. In some examples, it is assumed that the probing timer starts at a non-zero timeout value, and decrements over time until the probing timer reaches a threshold value (such as zero), at which point the probing timer is considered to have expired. In different examples, the probing timer can start at an initial value (such as zero) and increments over time, with the probing timer expiring when the probing timer reaches some upper threshold timeout value. </p><p id="p0076" num="0076">[0049] Initially, the probing attempt counter is set to zero (at 602) when a subflow is established or the subflow characteristics have changed. Next, the process of Fig. 6 determines (at 604) whether the probing attempt counter has a value greater than Max_Attempt. If so, then a determination (at 606) is made that the sender device is without knowledge regarding whether there is a blocking intermediate device and thus retransmission optimization is not performed (in other words Rules 1 and 2 are complied with). In some embodiments, the sender device attempts one or more probing. The sender device increments the value of the probing attempt counter with each attempt. If the probing attempt counter reaches a value greater than </p><p id="p0077" num="0077">Max_Attempt, the sender device does not attempt any further probing for the subflow 
<!-- EPO <DP n="18"/>-->
 in the current iteration. Note, however, that the sender device can attempt probing at a later time. </p><p id="p0078" num="0078">[0050] If the probing attempt counter is not greater than Max_Attempt (as determined at 604), then the sender device holds (at 608) at least one packet having sequence number n, but sends a packet having sequence number n+1 on the subflow to be probed. The held packet having sequence number n is not sent on any other subflow. Also, the sender device starts the probing timer. </p><p id="p0079" num="0079">[0051] The sender device determines (at 610) whether an acknowledgement has been received from the receiver device that selectively acknowledges receipt of packet(s) with sequence number(s) greater than n. If so, then the sender device determines (at 612) that there is no blocking intermediate device on the path of the subflow being probed, and therefore, retransmission optimization is allowed (the sender device does not have to comply with Rule 1 or 2 or both for the subflow being probed). </p><p id="p0080" num="0080">[0052] When holding one or more packets, the sender device should not hold them too long to avoid impacting performance of the subflow. For example, acknowledgements of packets having sequence numbers after n may be lost, delayed or blocked, in which case the sender device may hold the packet(s) for too long if the sender device does not complete the probing process of Fig. 6 until receipt of such acknowledgements. To avoid such issues, the probing timer and the predefined threshold specifying a maximum number of probing attempts </p><p id="p0081" num="0081">(Max_Attempt) are used. The sender device determines how long one or more packets are held by using the probing timer and the predefined threshold specifying a maximum number of probing attempts (Max_Attempt). </p><p id="p0082" num="0082">[0053] If the probing timer expires (as determined at 614) before the sender device has received acknowledgement messages (such as a DACK or a SACK) for packets with a SSN(s) higher than the SSN of the held packet(s), the sender device releases (at 616) the held packet(s) and stops the probing timer. However, if the sender device receives the DACK or SACK as described above before the probing timer expires, then the sender device proceeds to task 612. If the probing timer 
<!-- EPO <DP n="19"/>-->
 expires, the sender device determines that it does not know whether there is a blocking intermediate device and the sender device reattempts the probing at some later time. In some embodiments, the sender device reattempts the probing after a probing reattempt delay, Probing_Reattempt_Delay, configured in the device. When the probing timer expires, the sender device starts a timer Probing_Reattempt_Timer and sets it to the value Probing_Reattempt_Delay. In some embodiments, when the Probing_Reattempt_Timer expires, the sender device reattempts the probing. In other embodiments, the sender device does not reattempt probing before the </p><p id="p0083" num="0083">Probing_Reattempt_Timer expires. In other embodiments, the sender device reattempts the probing at any time after the Probing_Reattempt_Timer expires and does not reattempt the probing before the Probing_Reattempt_Timer expires. </p><p id="p0084" num="0084">[0054] After the probing is done and it is determined that there is no blocking intermediate device in the path of a particular subflow, if some packets are lost in the particular subflow (e.g., subflow 1), but these lost packets were retransmitted over an alternate subflow (e.g. subflow 2) successfully (i.e. Rule 1 not complied with), the sender device does not retransmit the lost packets over subflow 1. In some examples, the sender device uses instead an option (referred to as a "re-sync" option) to instruct the receiver device to skip the packets with certain SSNs by providing the SSNs of the packets to be skipped or the largest SSN of the packet to be skipped, namely the lost packets successfully retransmitted by the sender device and successfully received by the receiver device over the alternate subflow. Upon receiving the "re-sync" option, or upon determining that the sender device uses the "re-sync" option, the receiver device moves the SSN forward to the value indicated by the sender device or to the largest value of the SSNs indicated by the sender device, and does not request retransmission of the missing packets. </p><p id="p0085" num="0085">[0055] Path probing as performed in Fig. 6 for a subflow is repeated if the subflow changes. The subflow change may be visible to the sender device, such as due to an IP address change. Upon determining a subflow change (e.g. a change in the IP address, or a change in the access network such as when the sender device or the receiver device or both move from one access network to another access network, etc.), the sender device performs path probing. In other scenarios, a subflow change 
<!-- EPO <DP n="20"/>-->
 may not be visible to the sender device, such as when Mobile IP is used. In the latter case, the receiver device can send signaling to the sender device so that the sender device can initiate a new probing process. Upon receiving an indication from the receiver device, the sender device initiates path probing. The receiver device can send this signaling or indication to the sender device in a variety of ways. For example, the receiver device sends a new TCP option (in a TCP message) to the sender device to notify the sender device of the subflow change and to provide a reason for the change, e.g., the receiver device moved from one access network to another access network. Upon receiving such signaling, if the sender device </p><p id="p0086" num="0086">determines that the subflow changed (e.g., the IP address of the sender device changed or the sender device received an indication from the receiver device of a path change), the sender device performs path probing according to Figs. 5 and 6. </p><p id="p0087" num="0087">[0056] In some implementations, various constraints can be set with respect to setting a timeout value of the probing timer used in Fig. 6. </p><p id="p0088" num="0088">[0057] According to constraint (1 ) set forth below, the probing timer timeout value should be set at least larger than one round trip time (RTT) (time for data to go from the sender device to the receiver device plus the time for a responsive </p><p id="p0089" num="0089">acknowledgement to go from the receiver device to the sender device) to allow enough time for the sender device to receive the feedback from the receiver device. </p><p id="p0090" num="0090">T probing ^ release &gt; (Ό </p><p id="p0091" num="0091"> where T<sub>probing</sub> is the probing timer value, and </p><p id="p0092" num="0092"> RTT<sub>release</sub> is the RTT value when the probing packet (the held packet) is released. </p><p id="p0093" num="0093">[0058] In the foregoing, it is assumed that the probing timer starts at T<sub>pr0</sub>bing, and decrements to zero, at which point the probing timer expires. </p><p id="p0094" num="0094">[0059] Another constraint, constraint (2), specifies that the probing timer timeout value should not be too large for various reasons. First, the delay in performing the probing should be within acceptable limits, such as per requirements of an </p><p id="p0095" num="0095">application in the sender device. Constraint (2) is expressed as: 
<!-- EPO <DP n="21"/>-->
 T probing ^ ^app ' </p><p id="p0096" num="0096"> where </p><p id="p0097" num="0097"> D<sub>app</sub> is the delay limit per application requirement. (2) </p><p id="p0098" num="0098">[0060] A further constraint, constraint (3), specifies that the probing timer timeout value should be set to avoid an increased likelihood of TCP timeout (which occurs when a sender device fails to receive an acknowledgement of a sent packet within a predefined timeout duration). During the time a packet is held by the sender device during the probing process, there is one less packet transmitted than in the normal case. One less packet transmission may result in one less acknowledgement from the receiver device. In some scenarios of packet loss, one less acknowledgement can make the difference between (1 ) reception of k (where k is a preconfigured number) duplicate acknowledgements and avoidance of timeout, and (2) reception of k-1 duplicate acknowledgements and the sender device timing out. </p><p id="p0099" num="0099">[0061] When a packet having sequence number n is lost, any receipt of packets having subsequent sequence numbers (e.g., n+1 , n+2, etc.) will cause the receiver device to send a duplicate acknowledgement (for sequence number n) with each receipt of such packet(s) with subsequent sequence numbers. Receipt by the sender device of k duplicate acknowledgements of sequence number n is an indication to the sender device of loss of the packet having sequence number n. If the sender device can take steps to address a lost packet in response to receipt of k duplicate acknowledgements of sequence number n, then a fast retransmission mechanism can be performed at the sender device where the sender device does not have to wait for a timeout for retransmission of the lost packet having sequence number n. </p><p id="p0100" num="0100">[0062] To avoid the possibility of timeout at the sender device, the probing timer value should be set according to the following further constraint (3): </p><p id="p0101" num="0101">T probing &lt; <sub>a//</sub> ^ JgN <sub>Pack</sub> <sup>T</sup>remain <sup>"</sup> ^upboun ) . (3) where </p><p id="p0102" num="0102"> Tremain is the remaining time of the timeout timer for an unacknowledged packet, and RTT<sub>U</sub>pbound is the maximum of the past RTT values at the sender device. 
<!-- EPO <DP n="22"/>-->
 [0063] Fig. 7 is a timing diagram to illustrate the timing relationships noted above. Time TO is the time at which a timeout timer for an unacknowledged packet (n-k) is started. The overall timeout duration (Timeout) is represented by 702. If an </p><p id="p0103" num="0103">acknowledgement of packet n-k is not received by time T5 (which is the timeout duration after TO), then timeout will occur at the sender device for packet (n-k). </p><p id="p0104" num="0104">[0064] In the example of Fig. 7, the probing timer is started at Time T1 , when packet (n+1 ) is sent. Note that the probing packet (held packet) is packet n. The probing timer value (T<sub>pr0</sub>bing) is represented by duration 704. The value T<sub>re</sub>main (706) is the remaining time of the timeout timer for unacknowledged packet (n-k), as measured from the start of the probing timer (T1). </p><p id="p0105" num="0105">[0065] As illustrated in Fig. 7, time T2 represents a time when an </p><p id="p0106" num="0106">acknowledgement of packet (n+1) is supposed to be received. If the </p><p id="p0107" num="0107">acknowledgement for packet (n+1) is not received by time T3, which is T<sub>pr0</sub>bing after T1 , then the sender device will release the held packet (packet n). Time T4 represents the time when the acknowledgement for packet n is supposed to be received. </p><p id="p0108" num="0108">[0066] According to constraint (3) noted above, the value of T<sub>pr0</sub>bing should be less than the minimum of (T<sub>rem</sub>ain - RTT<sub>up</sub>bound) for all unacknowledged packets. </p><p id="p0109" num="0109">[0067] It is possible that an appropriate T<sub>probin</sub>g value cannot be found to satisfy constraints (1 ), (2) and (3) above. To avoid such issue and to reduce likelihood of timeout, alternative embodiments involve the sender device splitting a probing packet into two (or more) packets of smaller sizes. The sender holds one of the split packets, and transmits the other(s). In such alternative embodiments, the number of packets transmitted is at least the same as (or greater than) in the normal case, and therefore there is no decrease in robustness with respect to timeout. In such case, the probing timer value only has to satisfy constraints (1) and (2). 
<!-- EPO <DP n="23"/>-->
 [0068] The foregoing describes details regarding some implementation of </p><p id="p0110" num="0110">Retransmission Solution 1. An alternative solution (Retransmission Solution 2) does not employ probing. </p><p id="p0111" num="0111">[0069] In some embodiments according to Retransmission Solution 2, the sender device and the receiver device behave as legacy TCP devices until loss of a packet, such as packet n, occurs. Packet loss is detected as in regular TCP, such as through subflow-level feedback from the receiver device or timeout. The </p><p id="p0112" num="0112">mechanisms described in the section below titled "Feedback Mechanisms or </p><p id="p0113" num="0113">Techniques" are used so the sender can determine with high confidence that the feedback came from the receiver and was not a feedback generated or altered by an intermediate device. </p><p id="p0114" num="0114">[0070] In some implementations, the sender device detects that one or more packets are lost when the sender receives multiple duplicate subflow-level ACKs with the same ACK number. The receiver device sends duplicate acknowledgements when the receiver device receives one or more packets with higher SSNs than the SSN of the lost packet. </p><p id="p0115" num="0115">[0071] Alternatively, the sender device determines that one or more packets are lost when the TCP timeout timer expires. </p><p id="p0116" num="0116">[0072] As shown in Fig. 8, when the sender device determines that one or more packets are lost (triggering event 802), the sender device reduces (at 804) a congestion window size based on TCP mechanisms. According to TCP, a sender device can maintain a congestion window for specifying how many bytes of data the sender device is allowed to send before the sender device has to receive an acknowledgement from the receiver device. In response to detection of packet loss, various TCP mechanisms are available to reduce the size of the congestion window. </p><p id="p0117" num="0117">[0073] Detection that a packet is lost can be based on receiving k duplicate ACK messages (for packet having SSN n) or the sender device timing out after the predefined timeout duration from when the packet having SSN n was sent. When the sender device determines (at 806) that a packet with SSN n is lost, if the sender 
<!-- EPO <DP n="24"/>-->
 device has not received an indication (in the form of an acknowledgement, such as a subflow-level SACK) that any packet with SSN greater than n has been delivered to the receiver device, then the sender device determines that either a blocking intermediate device is present or all packets with sequence numbers greater than n have been lost or are extremely delayed (and thus has resulted in a timeout). In this case, the sender device retransmits (at 808) the lost packet (having SSN n) on the original subflow (complies with Rule 1). In task 808, the sender device can also comply with Rule 2. </p><p id="p0118" num="0118">[0074] Alternatively, after the sender device detects that a packet with SSN n is lost, if the sender device receives (as determined at 806) an indication that the receiver device has received one or more packets with SSN greater than n, then that indicates either that no blocking intermediate device is present, or packets were lost after transmission by an intermediate device. In this case, the sender device has the option to skip (at 810) retransmitting the packet with SSN n on the original path, if the packet has already been retransmitted over an alternate subflow, or to retransmit the packet on the most suitable subflow (e.g., least congested subflow). In other words, the sender device does not have to comply with Rule 1. </p><p id="p0119" num="0119">Congestion Window Size Setting Mechanism or Technique </p><p id="p0120" num="0120">[0075] As noted above, according to TCP, a sender device maintains a congestion window for specifying how many bytes of data the sender device is allowed to send before the sender device has to receive an acknowledgement from the receiver device. More generally, a "congestion window" can refer to any time duration or indication of amount of data following transmission of a particular packet, in which the sender device is allowed to continue to send further data in the congestion window. Upon expiration of the congestion window (either the time duration of the congestion window has passed or the amount of data indicated by the congestion window has been exceeded), the sender device will no longer be able to transmit further data, until the congestion window is updated. 
<!-- EPO <DP n="25"/>-->
 [0076] In accordance with some embodiments, mechanisms or techniques are provided for setting the size of a congestion window that potentially can utilize information received over multiple subflows. For example, a data-level </p><p id="p0121" num="0121">acknowledgement (DACK) or selective ACK (SACK) can be received on a subflow different from a given subflow where a subflow-level ACK was lost. By using information from acknowledgement information received on all the subflows to set the size of the congestion window when subflow-level ACKs in the given subflow were lost, the sender device will be able to control the congestion window size in a more efficient manner than if the sender device had to trigger adjustment of the congestion window size based on acknowledgment information carried in just the given subflow. </p><p id="p0122" num="0122">[0077] Congestion window size setting mechanisms exist that allow a sender device to reduce a congestion window size upon receipt of k duplicate </p><p id="p0123" num="0123">acknowledgements carrying sequence number n (which indicates loss of the packet having sequence number n). For example, some TCP mechanisms divide the congestion window size by two (in other words, the congestion window size is reduced by half) in response to detecting k duplicate acknowledgements. One example of such a TCP mechanism is the NewReno mechanism, as described in RFC 3782, entitled "The NewReno Modification to TCP's Fast Recovery Algorithm," dated April 2004. Another TCP mechanism for reducing window size is the TCP Reno mechanism. Other mechanisms can also be employed in other examples. </p><p id="p0124" num="0124">[0078] When TCP timeout occurs (due to a predefined time duration passing with no acknowledgement received in response to a particular packet being sent), the congestion window size is usually reduced to a relatively small value, such as 1. Reducing the congestion window size to such a relatively small value can adversely affect performance of the sender device. </p><p id="p0125" num="0125">[0079] By being able to reduce the congestion window size by a smaller amount (such as by dividing the congestion window size by half) as compared to reducing the congestion window size to 1 (when a timeout occurs), improved sender device performance can be provided. As noted above, some TCP mechanisms reduce the 
<!-- EPO <DP n="26"/>-->
 congestion window size by half in response to receiving k (where k is a preconfigured number) duplicate acknowledgements of a packet having sequence number n. </p><p id="p0126" num="0126">[0080] In an environment in which a connection can have multiple subflows, if any of the subflows were to experience congestion or to break, then subflow-level acknowledgements sent by the receiver device on the particular subflow may not be received by the sender device. Thus, if the sender device is unable to receive duplicate acknowledgements regarding a packet that may potentially be lost, then the sender device will not be able to implement a fast recovery mechanism in which the congestion window size is divided in half (or reduced by some other smaller amount) as compared to reducing the congestion window size to one (when a timeout occurs). Effectively, the inability of the sender device to receive subflow- level duplicate acknowledgements means that the sender device would not be able to trigger the fast recovery congestion window size setting technique that is responsive to receiving k duplicate acknowledgements. </p><p id="p0127" num="0127">[0081] In accordance with some embodiments, to address the foregoing issues, for setting the congestion window size, the sender device uses the </p><p id="p0128" num="0128">acknowledgement information received over a different subflow than the subflow over which subflow-level acknowledgements may have been lost. In a specific example, the receiver device may have sent subflow-level duplicate </p><p id="p0129" num="0129">acknowledgements to the sender device along subflow 1. However, subflow 1 may be experiencing congestion, in which case the subflow-level duplicate </p><p id="p0130" num="0130">acknowledgements may not reach the sender device, which may mean that the sender device will not be able to detect k duplicate acknowledgements along subflow 1. </p><p id="p0131" num="0131">[0082] In accordance with some embodiments, the sender device uses data-level acknowledgement information sent along subflow 2 (different from subflow 1) to determine whether the receiver device has received k packets having sequence numbers following a particular packet sent by the sender device to the receiver device along subflow 1. In some embodiments, the data-level acknowledgement 
<!-- EPO <DP n="27"/>-->
 information in the different subflow (subflow 2) contains sufficient information to allow the sender device to make such determination. In some embodiments, mapping information may be maintained at the sender device to map connection-level sequence numbers to subflow-level sequence numbers. In some embodiments, a connection-level acknowledgement information (in a DACK) is mapped by the sender device to subflow-level sequence numbers that the sender device uses to determine from the connection-level acknowledgement information whether the receiver device has received k packets following a particular packet. Upon receiving the connection-level acknowledgement information from the receiver device, the sender device determines whether the receiver device has received k packets following a particular packet by mapping a connection-level acknowledgement information (in a DACK) to subflow-level sequence numbers. </p><p id="p0132" num="0132">[0083] If the sender device determines based on the acknowledgement </p><p id="p0133" num="0133">information on this different subflow that k packets following a particular packet have been received by the receiver device on subflow 1 , then the sender device triggers the fast recovery congestion window size setting mechanism, such as by reducing the congestion window size by half or by reducing the congestion window by any other factor that may, for example, be preconfigured in the device or that the device determines dynamically. </p><p id="p0134" num="0134">[0084] Two alternate congestion window size setting techniques according to some embodiments are discussed below. These congestion window size setting techniques can be used in connection with the Retransmission Solution 2 discussed above, but the techniques can also be applied in other scenarios. </p><p id="p0135" num="0135">[0085] With the first congestion window size setting technique, the sender device determines that the receiver device has received at least k (e.g., k = 3) packets with SSN greater than n (where k is a parameter that can be for example preconfigured at the sender device). As noted above, this determination is made using data-level acknowledgement information received on a subflow different from a subflow over which subflow-level acknowledgements may have been lost. This can help to avoid retransmission timeout. The sender device reduces the congestion window size by 
<!-- EPO <DP n="28"/>-->
 an amount smaller than typically performed for TCP timeout, such as by using the Reno or NewReno techniques (or some other technique). </p><p id="p0136" num="0136">[0086] In alternative embodiments, a second congestion window setting technique involves determining a ratio of two parameters, N and M. The parameter N is a number of packets with SSN greater than n received by the receiver device, as indicated from a data-level acknowledgement (ACK or SACK). The parameter M is the total number of packets with SSN greater than n the sender device has sent. If the ratio N/M is greater than a predefined threshold T when a retransmission timeout timer of packet n (the lost packet) expires, the sender device reduces the congestion window size as if duplicate subflow-level ACKs were received (e.g., reducing the congestion window by half) rather than reducing the congestion window size to a low value such as 1. If the ratio N/M is smaller than the predetermined threshold T when the retransmission timeout timer of packet n expires, the sender device initializes the congestion window size as conventionally performed by TCP when the timer expires {e.g., the congestion window size is et to 1). </p><p id="p0137" num="0137">[0087] In different implementations, instead of taking the ratio of N to M (N/M), some other comparison of N and M is performed, such as by taking a difference between N and M. </p><p id="p0138" num="0138">[0088] Fig. 9 is a flow diagram of a congestion size setting technique according to some embodiments. The process of Fig. 9 can use either the first or second congestion window size setting technique discussed above. </p><p id="p0139" num="0139">[0089] The sender device receives (at 902) data-level acknowledgement information in a subflow different from a subflow over which duplicate subflow-level acknowledgements may have been lost. Based on the data-level acknowledgement information, the sender device determines (at 904) a number of packets received with SSNs greater than n, where n is the SSN of the packet that has not yet been acknowledged. </p><p id="p0140" num="0140">[0090] Based on such determined number of packets with SSN greater than n received by the receiver device, the sender device reduces (at 906) the congestion 
<!-- EPO <DP n="29"/>-->
 window size. The reduction of the congestion window size can be according to either first or second congestion window size setting technique discussed above, according to some implementations. </p><p id="p0141" num="0141">[0091 ] If the data-level acknowledgement information indicates that k packets with SSNs greater than n have been received by the receiver device, then the sender device reduces the congestion window size by an amount less than a reduction that would occur for a TCP timeout. </p><p id="p0142" num="0142">Receiver Feedback Mechanisms or Techniques </p><p id="p0143" num="0143">[0092] In some implementations, retransmission solutions 1 and 2 discussed above depend on the sender device being able to determine with high confidence that the receiver device received packets with SSN greater than n, where n is the SSN of the lost or held packet. Some intermediate devices can modify or overwrite a subflow-level acknowledgement sent by the receiver device to the sender device, or generate (originate) a subflow-level ACK autonomously (even if the receiver device never sent one). For reliable operations, the sender device should know whether a subflow-level acknowledgement was sent by the receiver device or not. Various approaches are possible to allow the sender device to confirm that the source of a subflow-level acknowledgment (or other subflow-level feedback messaging) is the receiver device, rather than an intermediate device in a path between the sender device and the receiver device over which the feedback messaging was </p><p id="p0144" num="0144">communicated. A "subflow-level feedback messaging" refers to messaging sent by a receiver device over a subflow in response to messaging received by the receiver device from a sender device. Some approaches are described below. </p><p id="p0145" num="0145">[0093] In a first approach (Approach 1 ), the sender device determines that a subflow-level ACK was sent by the receiver device by verifying that the subflow-level ACK is received together with an MPTCP-specific option. An "MPTCP-specific option" refers to a field or value that is used by MPTCP, but not by regular TCP. As an example, the MPTCP-specific option can be a data-level acknowledgement (ACK or SACK), which is used by MPTCP, but not by regular TCP. More generally, the MPTCP-specific option contains MPTCP-specific signaling (in the form of a field or 
<!-- EPO <DP n="30"/>-->
 value) for implementing MPTCP functionality. The sender device relies on the presence of an MPTCP-specific option (such as data-level acknowledgement) to determine that the subflow-level ACK (or subflow-level SACK) came from the receiver device (in other words, the subflow-level acknowledgement was not altered or overwritten by or originated from an intermediate device). This approach works only if a "transparent middlebox" assumption is true. A transparent middlebox is an intermediate device that does not allow an MPTCP-specific option (generated by the receiver device) through if the intermediate device altered the subflow-level ACK (or subflow-level SACK), or if the intermediate device generated a new subflow-level ACK (or subflow-level SACK) that overrides the one from the receiver device. </p><p id="p0146" num="0146">[0094] A second approach (Approach 2) applies in cases where it is not desirable or possible for the receiver device to send MPTCP-specific signaling in an MPTCP- specific option. For example, a message from the receiver device may not have enough space in the options section of the message for the MPTCP-specific option. Alternatively, there may not be any MPTCP-specific signaling to send by the receiver device. For such cases, a new MPTCP-specific Receiver Originated Flag option is produced, where this MPTCP-specific Receiver Originated Flag option is composed of a relatively small amount of information, such as 3 bytes. In some embodiments, the Receiver Originated Flag is encoded as a TCP option with 3 fields: KIND (1 byte), LENGTH (1 byte), and flag (1 byte). </p><p id="p0147" num="0147">[0095] In alternative implementations, the sender device includes a new specific attribute and treats the "flag" field as zero length signal by setting KIND = "flag" and not conveying the LENGTH and VALUE fields thus conveying the flag in one byte. The Receiver Originated Flag can be considered a No-operation (NOP) MPTCP- specific option— this NOP MPTCP-specific option is different from the MPTCP- specific option of Approach 1 that contains MPTCP-specific signaling to implement MPTCP functionality. Like the Approach 1 , Approach 2 works only if the transparent middlebox assumption is true. </p><p id="p0148" num="0148">[0096] A third approach (Approach 3), unlike Approaches 1 and 2, does not make any assumption about the middlebox behavior. In Approach 3, receiver device 
<!-- EPO <DP n="31"/>-->
 generates a subflow-level ACK (or subflow-level SACK) and calculates a receiver checksum of the subflow-level ACK (or subflow-level SACK) and sends the receiver checksum to the sender device. A checksum refers to a value that is calculated by applying a predefined function (such as a hash function) on content of a message to be communicated. In Approach 3, the checksum is calculated based on the content of the subflow-level acknowledgement (ACK or SACK) sent by the receiver device. </p><p id="p0149" num="0149">[0097] Upon receiving a subflow-level ACK (or subflow-level SACK) (along with the receiver checksum), the sender device calculates a checksum of the subflow- level ACK (or subflow-level SACK) and compares the sender-calculated checksum with the receiver checksum. The sender device determines that the subflow-level ACK (or subflow-level SACK) originated from the receiver device if the checksums match. This approach works for both transparent and non-transparent middleboxes. </p><p id="p0150" num="0150">[0098] In some implementations, the receiver checksum is sent as a standalone option and the receiver checksum is encoded as: KIND (1 byte), LENGTH (1 byte), and checksum (cksum bytes). The parameter cksum can be as small as 1 , which means that the checksum field is one byte long. In such examples, the receiver checksum is made up of 3 bytes. In other examples, the parameter cksum can be greater than one, in which case the receiver checksum will be longer than 3 bytes. This approach of using a standalone receiver checksum option is referred to as "Approach-3-Basic." </p><p id="p0151" num="0151">[0099] In other implementation<sup>'</sup>s, the receiver checksum is sent along with other options in a message (e.g., if the receiver device has to send other options) by appending the checksum bytes (without the associated KIND and LENGTH fields described above) to the other options being sent. DACK is an example of an option that can be sent by the receiver device. DACK is normally encoded with the following fields: KIND = "DACK" (1 byte), LENGTH (1 byte), and the DACK content (K byes). If the checksum is appended to DACK, the result is encoded as KIND = "DACK with checksum appended" (1 byte), LENGTH (1 byte), DACK content (K bytes) and checksum (cksum bytes). This approach of appending the receiver checksum to other options is referred to as "Approach-3-Opt." 
<!-- EPO <DP n="32"/>-->
 [0100] The use of any of the three approaches (Approach 1 , 2, or 3) discussed above can use up space in the TCP options contained in TCP packets by employing additional bytes, and thus the three approaches should be used only when </p><p id="p0152" num="0152">appropriate. Each of the MPTCP-specific option of Approach 1 , MPTCP-specific Receiver Originated Flag option of Approach 2, and checksum of Approach 3 can be considered generally as "predefined information" useable by a sender device to confirm whether the source of feedback messaging is the receiver device. Note that the predefined information is unable to be changed or generated by an intermediate device in a path between the sender device and the receiver device over which the feedback messaging is communicated, even though the intermediate device may be capable of modifying another portion of the feedback messaging carrying the predefined information, or originating feedback messaging. For example, the </p><p id="p0153" num="0153">MPTCP-specific information according to Approach 1 or 2 or the checksum </p><p id="p0154" num="0154">according to Approach 3 is not changeable by an intermediate device. </p><p id="p0155" num="0155">[0 01] As depicted in Fig. 10, a receiver device can transition between a </p><p id="p0156" num="0156">"sequence hole" state 1002, and a "no sequence hole" state 1004. Assuming the receiver device is in the "no sequence hole" state 1004, the receiver device transitions to the "sequence hole" state 1002 upon detecting an event indicating that the receiver device has detected a sequence hole (e.g., the receiver device detects a sequence number hole in the SSN numbering) in messaging received from the sender device. The receiver device remains in the "sequence hole" state 1002 for as long as the sequence hole condition is present. The event indicating that the receiver device has detected a sequence hole is one example of a trigger event. More generally, a trigger event that cause the receiver device to transition to the "sequence hole" state 1002 includes an event indicating a need for the sender device to receive subflow-level feedback information from the receiver device. </p><p id="p0157" num="0157">[0102] Upon receiving an event indicating that the packets previously missing (that caused the sequence number hole) have been received, such as along the same subflow, the receiver device transitions to the "no sequence hole" state 1004, where the receiver device remains until the receiver device detects another sequence hole. 
<!-- EPO <DP n="33"/>-->
 [0103] The receiver device uses one of the three approaches (Approaches 1 -3) above for providing feedback to the sender device so long as the receiver device is in the "sequence hole" state 1002. When the receiver device is in the "no sequence hole" state, the receiver device does not use any of the Approaches 1-3 for feedback (in other words, the receiver device does not include the predefined information of any of Approaches 1-3 in feedback messaging), unless it has other reasons to send an MPTCP-specific option (e.g., a data-level acknowledgement). </p><p id="p0158" num="0158">[0104] The receiver device can also have various modes of operation, including mode A and mode B, in some examples. The receiver devices behaves according to mode A when the receiver device cannot determine if the transparent middlebox assumption is true. In mode A, the receiver device uses Approach 3 (either </p><p id="p0159" num="0159">Approach-3-Basic or Approach-3-Opt) discussed above). On the other hand, the receiver device behaves according to mode B if the receiver device determines that the transparent middlebox assumption is true. In mode B, the receiver device is able to use Approach 1 or Approach 2 discussed above. </p><p id="p0160" num="0160">[0105] Fig. 11 illustrates the mode A operation of the receiver device. The receiver device determines (at 1 102) if the receiver device has to send MPTCP- specific signaling in an MPTCP-specific option. If so, then the receiver device uses Approach-3-Opt for the checksum feedback (at 1 104). As noted above, Approach-3- Opt refers to the approach in which a receiver checksum is appended to an MPTCP- specific option. </p><p id="p0161" num="0161">[0106] On the other hand, if the receiver device determines (at 1102) that the receiver device does not have to send MPTCP-specific signaling in an MPTCP- specific option, then the receiver device uses Approach-3-Basic for the checksum feedback (at 1 106), where in this approach the receiver checksum is sent as a standalone option. </p><p id="p0162" num="0162">[0107] Fig. 12 depicts an operation of the receiver device in mode B. The receiver device determines (at 1202) whether the receiver device has to send MPTCP- specific signaling in an MPTCP-specific option. If so, then Approach 1 is used (at 1204) for providing feedback to the sender device. As discussed above, Approach 1 
<!-- EPO <DP n="34"/>-->
 refers to sending an MPTCP-specific option to alert the sender device that the message is from the receiver device (rather than from an intermediate device). </p><p id="p0163" num="0163">[0108] If the receiver device does not have to send MPTCP-specific signaling in an MPTCP-specific option, then the receiver device uses (at 1206) Approach 2 for feedback, where Approach 2 refers to use of the Receiver Originator Flag discussed above. </p><p id="p0164" num="0164">[0109] In alternative implementations, the above 3 approaches (Approaches 1 , 2, and 3) can be combined, such as follows. The receiver device can transition between mode A and mode B according to the state diagram in Fig. 13. Typically, the receiver device starts initially in mode A (in which the receiver device uses checksum feedback). </p><p id="p0165" num="0165">[01 10] Various events can be received by the receiver device to cause the receiver device to switch between modes A and B. A first event is an event indicating that it is safe to switch to mode B. The receiver device determines that the "transparent middlebox" assumption is true and therefore that it is safe to switch to mode B. The determination can be based on: (1 ) a priori knowledge of the system configuration, or (2) a specific "checksum-match" signaling from the sender device (details on such signaling are provided further below), or (3) some other mechanism. </p><p id="p0166" num="0166">[0111] A second event is a subflow change event. This is typically due to mobility when a network device changes its IP address or other parameter due to movement of the network device between different access networks. In response to the second event, the receiver device cannot determine that the "transparent middlebox" assumption is still true on the new subflow and therefore has to transition to mode A. </p><p id="p0167" num="0167">[01 12] As shown in Fig. 13, in response to detecting the first event (safe to switch to mode B), the receiver device sends a "Switch-to-B" notification. The receiver device sends the "Switch-to-B" notification to the sender device when the receiver device determines that it is safe to switch to mode B to inform the sender device that the receiver device has switched to mode B. Upon receiving the Switch-to-B 
<!-- EPO <DP n="35"/>-->
 notification, the sender device processes the feedback from the receiver device according to mode B. </p><p id="p0168" num="0168">[01 13] In some embodiments, the Switch-to-B notification is carried in an explicit signaling (e.g., by using a new option). In other implementations, the MPTCP- specific option (Approach 2 above) can be used as the "Switch-to-B" notification. In further implementations, the receiver device provides a "Switch-to-B" notification implicitly by stopping to use Approach 3 (checksum feedback), i.e., by not including any more checksums as described in Approach 3. </p><p id="p0169" num="0169">[01 14] As depicted in Fig. 13, in response to detecting the second event (subflow change event), the receiver device sends a "Switch-to-A" notification. The receiver device sends the "Switch-to-A" notification to the sender device to inform the sender device that the receiver device has switched to mode A. Upon receiving the "Switch- to-A" notification, the sender device processes the feedback from the receiver device according to mode A. In some implementations, the "Switch-to-A notification" is carried in explicit signaling (e.g., by using a new option). In other implementations, the receiver device sends the "Switch-to-A notification" implicitly by resuming the use of Approach 3 (i.e., the receiver device resumes sending the checksums of </p><p id="p0170" num="0170">Approach 3). </p><p id="p0171" num="0171">[01 15] The sender device also operates according to mode A or B, and transitions between these modes according to Fig. 14. The sender device starts initially in mode A. Two events can be received by the sender device. </p><p id="p0172" num="0172">[01 16] A first event is reception of a "Switch-to-A" notification, as discussed above, which can be explicit or implicit. A second event is reception of a "Switch-to-B" notification, as described above, which can be explicit or implicit. As shown in Fig. 14, in response to receiving a "Switch-to-A" notification, the sender device switches to mode A operation. In response to receiving a "Switch-to-B" notification, the sender device transitions to mode B. </p><p id="p0173" num="0173">[01 17] Effectively, the sender and receiver devices communicate different types of the "predefined information" (according to Approach 1 , 2, or 3) in feedback 
<!-- EPO <DP n="36"/>-->
 messaging (from the receiver device to the sender device) depending on which mode (mode A or mode B) the sender and receiver devices are in. </p><p id="p0174" num="0174">[01 18] Fig. 15 shows mode A operation of the sender device. In mode A, the sender device expects to receive feedback from the receiver device according to mode A— in other words, the sender device expects to receive the receiver checksum of Approach 3 discussed above. However, when a transition to mode B is pending, the sender may receive feedback according to mode B— that is, there is no receiver checksum. </p><p id="p0175" num="0175">[01 19] When entering mode A, the sender device initializes a Mismatch_Counter and Match_Counter to zero, and sets a "Transition-to-B-pending" flag to false. </p><p id="p0176" num="0176">[0120] As depicted in Fig. 15, the sender device determines (at 502) whether a receiver checksum is present in a received packet. If so, the sender device determines (at 1504) if the receiver checksum matches the sender-calculated checksum. If not, the sender device increments (at 1506) the Mismatch_Counter. On the other hand, if the receiver checksum matches the sender-calculated checksum, the sender device increments (at 1508) the Match_Counter. </p><p id="p0177" num="0177">[0121] In tasks 1508 and 1506, the sender device effectively counts the instances of checksum matches and mismatches, respectively. In some examples, when the count of matches exceeds a value of K1 times the count of mismatches (as determined at 1510), the sender device is able to use (at 1514) a subflow-level acknowledgment from the receiver device, since the sender device has determined with high confidence (due to MATCH COUNTER &gt; K1 <sup>*</sup> MISMATCH COUNTER) that the "transparent middlebox" assumption is true. If the determination at 1510 is not true, then the sender device does not use the subflow-level acknowledgement from the receiver device. The sender device next determines (at 1515) if </p><p id="p0178" num="0178">MATCH COUNTER is greater than K2. Note that K1 and K2 are parameters that can be preconfigured, for example. If the determination at 1515 is true, the sender device sends (at 1516) a "checksum-match" signaling to the receiver device (to notify the receiver device that the "transparent middlebox" assumption is true), and sets the</p><p id="p0179" num="0179">"Tran¾i†inn-tn-R-niinHinn" flan tn true- Whun tht- "Trancitinn-tn-R-nisnHinn" flan ic 
<!-- EPO <DP n="37"/>-->
 true, the sender device is confident that the "transparent middlebox" assumption is true and therefore does not have to use a receiver checksum to validate that feedback is from the receiver device (in other words, Approach 1 or 2 is sufficient). </p><p id="p0180" num="0180">[0122] If the sender device determines (at 1502) that a receiver checksum is not present in a received message, then the receiver device determines (at 1518) whether the "Transition-to-B-Pending" flag is true. If so, the sender device </p><p id="p0181" num="0181">determines (at 1520) if the receiver packet contains a predefined receiver option (either the MPTCP specific option of Approach 1 or the Receiver Originator Flag of Approach 2). If not, then the process returns (to 1502). However, if the </p><p id="p0182" num="0182">determination at 1520 is true, then the sender device uses (at 522) the subflow- level acknowledgment from the receiver device, and the sender device switches (at 1524) to mode B. Note that the switch performed at 1524 is in response to an implicit "Switch-to-B" notification, when the receiver device simply, stops sending receiver checksums. If the "Switch-to-B" notification is explicit, the sender device switches to mode B when the sender device sees the corresponding explicit signaling. </p><p id="p0183" num="0183">[0123] Fig. 16 shows mode B operation of the sender device. As depicted in Fig. 16, the sender device determines (at 1602) if a receiver checksum is present in a received packet. If so, then that is an implicit "Switch-to-A" notification, in which case the sender device transitions (at 1604) to mode A. In mode A, the sender device expects to receive receiver checksums in messages to confirm that the messages originate from the receiver device (rather than from an intermediate device). </p><p id="p0184" num="0184">[0124] If the determination at 1602 indicates that there is no receiver checksum in a received message, then the sender device determines (at 1606) whether the received message contains a predefined receiver option (either an MPTCP-specific option or a Receiver Originated Flag). If not, the process returns. However, if the determination at 1606 is true, then the sender device uses (at 1608) the subflow- level acknowledgment from the receiver device. If the determination at 1606 is not true, then the sender device does not use the subflow-level acknowledgement from the receiver device. 
<!-- EPO <DP n="38"/>-->
 [0125] Fig. 17 is a block diagram of a network device 1700, which can be network device 104 or 106 in Fig. 1 , for example. The network device 1700 includes machine-readable instructions 1702 executable on one or multiple processors 1704. The processor(s) 1704 is (are) connected to storage media 1706. The network device also includes a network interface 1708 to allow the network device 700 to communicate over a data network, such as network 102 in Fig. 1 . </p><p id="p0185" num="0185">[0126] A protocol stack, such as protocol stack 1 12 or 1 14 depicted in Fig. 1 , can be implemented in the network interface 1708 or as part of the machine-readable instructions 1702, or both. The machine-readable instructions 1702 or the network interface 1708, or some combination thereof, can perform the various tasks discussed above. </p><p id="p0186" num="0186">[0127] The machine-readable instructions 1702 are loaded for execution on the processor(s). A processor can include a microprocessor, microcontroller, processor module or subsystem, programmable integrated circuit, programmable gate array, or another control or computing device. </p><p id="p0187" num="0187">[0128] Data and instructions are stored in respective storage devices, which are implemented as one or more computer-readable or machine-readable storage media (e.g., 1706). The storage media include different forms of memory including semiconductor memory devices such as dynamic or static random access memories (DRAMs or SRAMs), erasable and programmable read-only memories (EPROMs), electrically erasable and programmable read-only memories (EEPROMs) and flash memories; magnetic disks such as fixed, floppy and removable disks; other magnetic media including tape; optical media such as compact disks (CDs) or digital video disks (DVDs); or other types of storage devices. Note that the instructions discussed above can be provided on one computer-readable or machine-readable storage medium, or alternatively, can be provided on multiple computer-readable or machine-readable storage media distributed in a large system having possibly plural nodes. Such computer-readable or machine-readable storage medium or media is (are) considered to be part of an article (or article of manufacture). An article or article of manufacture can refer to any manufactured single component or multiple 
<!-- EPO <DP n="39"/>-->
 components. The storage medium or media can be located either in the machine running the machine-readable instructions, or located at a remote site from which machine-readable instructions can be downloaded over a network for execution. </p><p id="p0188" num="0188">[0129] In the foregoing description, numerous details are set forth to provide an understanding of the subject disclosed herein. However, implementations may be practiced without some or all of these details. Other implementations may include modifications and variations from the details discussed above. It is intended that the appended claims cover such modifications and variations. 
</p></description><claims mxw-id="PCLM44999060" ref-ucid="WO-2012119214-A1" lang="EN" load-source="patent-office"><claim id="clm-0001" num="1"><!-- EPO <DP n="40"/>--><claim-text/><claim-text>What is claimed is: 1. A method comprising: </claim-text><claim-text> sending, by a sender device, packets over a network destined to a receiver device; </claim-text><claim-text> receiving, by the sender device, response information that is responsive to the packets; </claim-text><claim-text> controlling a behavior of the sender device based on the response </claim-text><claim-text>information, wherein controlling the behavior comprises: </claim-text><claim-text> causing the sender device to implement a first behavior with respect to data transmission over plural subflows in response to the response information indicating a first condition, wherein the first behavior includes the sender device being able to retransmit a lost packet over one of the plural subflows that is different from another one of the plural subflows over which the lost packet was originally sent; and </claim-text><claim-text> causing the sender device to implement a second, different behavior with respect to data transmission over the plural subflows in response to the response information indicating a second condition. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1 , further comprising: </claim-text><claim-text> determining, by the sender device based on the response information, whether a blocking intermediate device is present. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 2, wherein the blocking intermediate device is a device in the network that prevents at least a subset of the packets from the sender device from reaching the receiver device if the packets exhibit a predefined characteristic. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 3, wherein the predefined characteristic is a sequence number hole in the packets sent by the sender device. <!-- EPO <DP n="41"/>--> </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 4, further comprising causing the sequence number hole by refraining from sending a particular packet having a particular sequence number. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of claim 5, further comprising determining that the blocking intermediate device is not present based on the response information indicating that the receiver device has received packets having sequence numbers greater than the particular sequence number. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 5, further comprising: </claim-text><claim-text> starting a timer upon sending a packet having a sequence number that is at least one larger than the particular sequence number. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of claim 7, further comprising: </claim-text><claim-text> determining whether an indication has been received from the receiver device indicating that the receiver device has received a packet having a sequence number</claim-text><claim-text>4 greater than the particular sequence number; and </claim-text><claim-text> 5 in response to expiration of the timer before the sender device receiving the 3 indication, releasing the particular packet to send to the receiver device. </claim-text><claim-text>1 9. The method of claim 8, wherein the timer is associated with a timeout value,</claim-text><claim-text>2 the method further comprising: </claim-text><claim-text> 3 setting the timeout value to satisfy all of the following conditions: </claim-text><claim-text> 4 the timeout value is at least larger than a round trip time of data</claim-text><claim-text>5 between the sender device and the receiver device, </claim-text><claim-text> 3 the timeout value is less than a value specified by an application in the</claim-text><claim-text>7 sender device, and </claim-text><claim-text> 3 the timeout value is less than a difference between a remaining time in</claim-text></claim><claim id="clm-0009" num="9"><claim-text>9 a timeout timer of unacknowledged data and a round trip time of data between the</claim-text><claim-text>D sender device and the receiver device, where the remaining time is measured from a</claim-text><claim-text>1 start of the timer. <!-- EPO <DP n="42"/>--> </claim-text></claim><claim id="clm-0010" num="10"><claim-text>1 0. The method of claim 8, further comprising: </claim-text><claim-text> 2 determining a number of attempts performed by the sender device in </claim-text><claim-text> 3 attempting to determine whether the blocking intermediate device is present; and</claim-text><claim-text>4 in response to detecting that the number of attempts is greater than a </claim-text><claim-text> 5 predefined threshold, causing the sender device to operate according to the second B behavior. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1 1. The method of claim 4, further comprising: </claim-text><claim-text> 2 splitting a particular packet into plural segments; and </claim-text><claim-text> 3 causing the sequence number hole by refraining from sending a particular one</claim-text><claim-text>4 of the segments having a particular sequence number, </claim-text></claim><claim id="clm-0012" num="12"><claim-text>1 12. The method of claim 1 , wherein the response information indicating the first</claim-text><claim-text>2 condition comprises the response information indicating that the network between</claim-text><claim-text>3 the sender device and the receiving device is without a blocking intermediate device</claim-text><claim-text>4 or at least one packet was lost after transmission from an intermediate device in the</claim-text><claim-text>5 network between the sender device and the receiver device. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>1 13. The method of claim 12, wherein the response information indicating the</claim-text><claim-text>2 second condition comprises the response information indicating that the blocking</claim-text><claim-text>3 intermediate device is present between the sender device and the receiver device, or</claim-text><claim-text>4 a subset of the packets sent by the sender device was lost before reaching the</claim-text><claim-text>5 blocking intermediate device. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>1 14. The method of claim , wherein the sender device implementing the second</claim-text><claim-text>2 behavior comprises the sender device retransmitting the lost packet over the one of</claim-text><claim-text>3 the plural subflows over which the lost packet was originally sent. <!-- EPO <DP n="43"/>--> </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method of claim 1 , wherein the sender device implementing the first behavior comprises the sender device retransmitting the lost packet on a selected one of the plural subflows that exhibits least congestion. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The method of claim 1 , wherein the sender device implementing the first behavior further comprises the sender device maintaining packets in a send buffer of the sender device according to a first technique, and </claim-text><claim-text> wherein the sender device implementing the second behavior comprises the sender device maintaining packets in the send buffer of the sender device according to a second, different technique. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method of claim 16, wherein the sender device maintaining the packets in the send buffer according to the first technique comprises the sender device releasing packets in the send buffer at a connection level in response to the sender device receiving an acknowledgement at the connection level that the packets have been received by the receiver device. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method of claim 17, wherein the sender device maintaining the packets in the send buffer according to the second technique comprises the sender device maintaining packets in the send buffer at the connection level as long as the packets has not been acknowledged at the connection level as well as in all subflows that the packets have been sent on. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The method of claim 1 , wherein the plural subflows are subflows between the sender device and the receiver device according to a Multipath Transmission Control Protocol (MPTCP). <!-- EPO <DP n="44"/>--> </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. A first network device comprising: </claim-text><claim-text> a network interface to communicate with a second network device over a network; and </claim-text><claim-text> at least one processor to: </claim-text><claim-text> send packets over the network destined to the second network device; receive response information that is responsive to the packets; </claim-text><claim-text> control a behavior of the first network device based on the response information, wherein controlling the behavior comprises causing the first network device to implement different behaviors with respect to data transmission over plural subflows in response to the response information indicating respective different conditions, wherein a first of the different behaviors includes the first network device being able to retransmit a lost packet over one of the plural subflows that is different from another one of the plural subflows over which the lost packet was originally sent. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The first network device of claim 20, wherein the network interface includes a layer according to a Multipath Transmission Control Protocol (MPTCP). </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. A method of a first network device, comprising: </claim-text><claim-text> communicating first data with a second network device over a connection having plural subflows; and </claim-text><claim-text> 4 communicating subflow-level feedback responsive to the first data with the</claim-text><claim-text>5 second network device, wherein the feedback contains predefined information that is 3 unable to be changed or generated by an intermediate device in a path between the 7 first network device and the second network device over which the feedback is</claim-text><claim-text>3 communicated, and </claim-text><claim-text> 9 wherein the predefined information is provided in the feedback for use in</claim-text><claim-text>3 confirming that a source of the feedback is other than the intermediate device. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>1 23. The method of claim 22, where the intermediate device is capable of either</claim-text><claim-text>I modifying a portion of the feedback or originating feedback to the first data. <!-- EPO <DP n="45"/>--> </claim-text></claim><claim id="clm-0024" num="24"><claim-text>1 24. The method of claim 22, wherein communicating the first data comprises sending, by the first network device, the first data to the second network device, and wherein communicating the feedback comprises receiving, by the first network device, the feedback from the second network device, the method further </claim-text><claim-text> 5 comprising: </claim-text><claim-text> 6 confirming, by the first network device, that the source of the feedback is the</claim-text><claim-text>7 second network device using the predefined information. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>1 25. The method of claim 22, wherein communicating the first data comprises</claim-text><claim-text>2 receiving, by the first network device, the first data from the second network device,</claim-text><claim-text>3 and wherein communicating the feedback comprises sending, by the first network</claim-text><claim-text>4 device, the feedback to the second network device, wherein the predefined </claim-text><claim-text> 5 information is provided for use in confirming that the source of the feedback is the B first network device. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>1 26. The method of claim 22, wherein the predefined information comprises a field</claim-text><claim-text>2 relating to an option of a protocol that provides for communication of data over the</claim-text><claim-text>3 plural subflows of the connection. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>1 27. The method of claim 22, wherein the predefined information comprises a</claim-text><claim-text>2 checksum computed based on content of the feedback, wherein the checksum is</claim-text><claim-text>3 useable to confirm that the feedback has not been modified by the intermediate</claim-text><claim-text>4 device or does not originate from the intermediate device. </claim-text></claim><claim id="clm-0028" num="28"><claim-text>1 28. The method of claim 22, wherein the feedback is sent by the first network</claim-text><claim-text>I device when the first network device is in a first state corresponding to the first</claim-text><claim-text>3 network device detecting a trigger event relating to data received from the second</claim-text><claim-text>% network device by the first network device, the trigger event indicating a need for the</claim-text><claim-text>5 second network device to receive subflow-level feedback information from the first 3 network device. <!-- EPO <DP n="46"/>--> </claim-text></claim><claim id="clm-0029" num="29"><claim-text>1 29. The method of claim 28, further comprising: </claim-text><claim-text> 2 transitioning, by the first network device, from the first state to a second state</claim-text><claim-text>3 in response to the first network device detecting that the trigger event is not present;</claim-text><claim-text>4 and </claim-text><claim-text> 5 in the second state, sending, by the first network device, further feedback B responsive to further data from the second network device, wherein the further</claim-text><claim-text>7 feedback is without the predefined information. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>1 30. The method of claim 28, wherein the trigger event comprises an event</claim-text><claim-text>2 indicated by the data received from the second network device having a sequence</claim-text><claim-text>3 number hole. </claim-text></claim><claim id="clm-0031" num="31"><claim-text>1 31. The method of claim 22, wherein the first network device has plural modes of</claim-text><claim-text>2 operation, the method further comprising: </claim-text><claim-text> 3 during a first of the plural modes of operation, communicating, by the first</claim-text><claim-text>4 network device, the feedback having a first type of the predefined information. </claim-text></claim><claim id="clm-0032" num="32"><claim-text>1 32. The method of claim 31 , further comprising: </claim-text><claim-text> 2 during a second of the plural modes of operation, communicating, by the first</claim-text><claim-text>3 network device, the feedback having a second, different type of the predefined \ information. </claim-text><claim-text> 1 </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
