<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682861-A1" country="EP" doc-number="2682861" kind="A1" date="20140108" family-id="48470770" file-reference-id="286466" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146584891" ucid="EP-2682861-A1"><document-id><country>EP</country><doc-number>2682861</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13168338-A" is-representative="NO"><document-id mxw-id="PAPP154847083" load-source="docdb" format="epo"><country>EP</country><doc-number>13168338</doc-number><kind>A</kind><date>20130517</date><lang>EN</lang></document-id><document-id mxw-id="PAPP242472466" load-source="docdb" format="original"><country>EP</country><doc-number>13168338.5</doc-number><date>20130517</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140555756" ucid="TW-101118036-A" load-source="docdb"><document-id format="epo"><country>TW</country><doc-number>101118036</doc-number><kind>A</kind><date>20120521</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989322421" load-source="docdb">G06F   9/44        20060101AFI20131204BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2085585751" load-source="docdb" scheme="CPC">G06F   9/45529     20130101 LI20150312BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989653105" load-source="docdb" scheme="CPC">G06F   9/44        20130101 FI20131114BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359306" lang="DE" load-source="patent-office">Programmrufverfahren und mobile Vorrichtung</invention-title><invention-title mxw-id="PT132359307" lang="EN" load-source="patent-office">Program calling method, and mobile device</invention-title><invention-title mxw-id="PT132359308" lang="FR" load-source="patent-office">Procédé d'appel de programme et dispositif mobile</invention-title><citations><patent-citations><patcit mxw-id="PCIT397526489" load-source="docdb" ucid="US-20070169043-A1"><document-id format="epo"><country>US</country><doc-number>20070169043</doc-number><kind>A1</kind><date>20070719</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242942537" load-source="docdb" ucid="US-20080163247-A1"><document-id format="epo"><country>US</country><doc-number>20080163247</doc-number><kind>A1</kind><date>20080703</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242942538" load-source="docdb" ucid="US-20100088447-A1"><document-id format="epo"><country>US</country><doc-number>20100088447</doc-number><kind>A1</kind><date>20100408</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>ANONYMOUS: "Runtime Environment Specification, Java Card Platform, Version 2.2.1", INTERNET CITATION, October 2003 (2003-10-01), XP002371505, Retrieved from the Internet &lt;URL:http://java.sun.com/products/javacard/specs.html&gt; [retrieved on 20060310]</text><sources><source mxw-id="PNPL74922834" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>None</text><sources><source mxw-id="PNPL45210620" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919510337" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TSAI IRENE</last-name><address><country>TW</country></address></addressbook></applicant><applicant mxw-id="PPAR919509704" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>Tsai, Irene</last-name></addressbook></applicant><applicant mxw-id="PPAR919007188" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tsai, Irene</last-name><iid>101371534</iid><address><street>6F., No. 216, Sec. 1 Wenhua 2nd Road Linkou District</street><city>New Taipei City 24448</city><country>TW</country></address></addressbook></applicant><applicant mxw-id="PPAR919514683" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>CHOU YI-FEN</last-name><address><country>TW</country></address></addressbook></applicant><applicant mxw-id="PPAR919510677" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Chou, Yi-Fen</last-name></addressbook></applicant><applicant mxw-id="PPAR919008613" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Chou, Yi-Fen</last-name><iid>101371527</iid><address><street>2F., No. 18-1, Hua 4th Street Ren'ai District</street><city>Keelung City 20043</city><country>TW</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919532449" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TSAI IRENE</last-name><address><country>TW</country></address></addressbook></inventor><inventor mxw-id="PPAR919514365" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>Tsai, Irene</last-name></addressbook></inventor><inventor mxw-id="PPAR919010326" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tsai, Irene</last-name><address><street>6F., No. 216, Sec. 1 Wenhua 2nd Road Linkou District</street><city>New Taipei City 24448</city><country>TW</country></address></addressbook></inventor><inventor mxw-id="PPAR919531406" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>CHOU YI-FEN</last-name><address><country>TW</country></address></addressbook></inventor><inventor mxw-id="PPAR919516094" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Chou, Yi-Fen</last-name></addressbook></inventor><inventor mxw-id="PPAR919009002" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Chou, Yi-Fen</last-name><address><street>2F., No. 18-1, Hua 4th Street Ren'ai District</street><city>Keelung City 20043</city><country>TW</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919014608" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Jones, Ithel Rhys</last-name><iid>100055577</iid><address><street>Wynne-Jones, Lainé &amp; James LLP Essex Place 22, Rodney Road</street><city>Cheltenham GL50 1JJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549739453" load-source="docdb">AL</country><country mxw-id="DS549740145" load-source="docdb">AT</country><country mxw-id="DS549739455" load-source="docdb">BE</country><country mxw-id="DS549812797" load-source="docdb">BG</country><country mxw-id="DS549811351" load-source="docdb">CH</country><country mxw-id="DS549742114" load-source="docdb">CY</country><country mxw-id="DS549740146" load-source="docdb">CZ</country><country mxw-id="DS549739456" load-source="docdb">DE</country><country mxw-id="DS549742115" load-source="docdb">DK</country><country mxw-id="DS549742116" load-source="docdb">EE</country><country mxw-id="DS549738448" load-source="docdb">ES</country><country mxw-id="DS549812802" load-source="docdb">FI</country><country mxw-id="DS549811352" load-source="docdb">FR</country><country mxw-id="DS549739457" load-source="docdb">GB</country><country mxw-id="DS549742121" load-source="docdb">GR</country><country mxw-id="DS549739458" load-source="docdb">HR</country><country mxw-id="DS549740147" load-source="docdb">HU</country><country mxw-id="DS549814177" load-source="docdb">IE</country><country mxw-id="DS549742122" load-source="docdb">IS</country><country mxw-id="DS549811353" load-source="docdb">IT</country><country mxw-id="DS549742123" load-source="docdb">LI</country><country mxw-id="DS549812803" load-source="docdb">LT</country><country mxw-id="DS549907479" load-source="docdb">LU</country><country mxw-id="DS549812804" load-source="docdb">LV</country><country mxw-id="DS549812805" load-source="docdb">MC</country><country mxw-id="DS549907480" load-source="docdb">MK</country><country mxw-id="DS549907481" load-source="docdb">MT</country><country mxw-id="DS549907482" load-source="docdb">NL</country><country mxw-id="DS549811354" load-source="docdb">NO</country><country mxw-id="DS549907483" load-source="docdb">PL</country><country mxw-id="DS549814198" load-source="docdb">PT</country><country mxw-id="DS549738449" load-source="docdb">RO</country><country mxw-id="DS549814199" load-source="docdb">RS</country><country mxw-id="DS549907484" load-source="docdb">SE</country><country mxw-id="DS549739460" load-source="docdb">SI</country><country mxw-id="DS549811998" load-source="docdb">SK</country><country mxw-id="DS549811999" load-source="docdb">SM</country><country mxw-id="DS549742124" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673063" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A program calling method is to be implemented by a control module (20), which uses a first channel during execution of a first Java applet, and includes creating a virtual channel that corresponds to a second channel when the first Java applet intends to call a second Java applet which is to be executed using the second channel, in response to a channel management instruction associated with the virtual channel, opening the second channel for allowing execution of the second Java applet, determining whether the virtual channel is still open, and receiving an output from the second Java applet for use by the first Java applet when it is determined that the virtual channel is still open.
<img id="iaf01" file="imgaf001.tif" wi="78" he="113" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737208" lang="EN" source="EPO" load-source="docdb"><p>A program calling method is to be implemented by a control module (20), which uses a first channel during execution of a first Java applet, and includes creating a virtual channel that corresponds to a second channel when the first Java applet intends to call a second Java applet which is to be executed using the second channel, in response to a channel management instruction associated with the virtual channel, opening the second channel for allowing execution of the second Java applet, determining whether the virtual channel is still open, and receiving an output from the second Java applet for use by the first Java applet when it is determined that the virtual channel is still open.</p></abstract><description mxw-id="PDES63959051" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This application claims priority of Taiwanese Patent Application No. <patcit id="pcit0001" dnum="TW101118036"><text>101118036, filed on May 21, 2012</text></patcit>.</p><p id="p0002" num="0002">The invention relates to a program calling method, more particularly to a Java applet calling method which is applicable to a Java card virtual machine structure.</p><p id="p0003" num="0003">As applications on a mobile terminal device have developed to have more variety, and as complexity in the aspect of business continues to increase, services provided on the mobile terminal device have become more diverse.</p><p id="p0004" num="0004">Conventional personal service certification identity terminals, such as subscriber identity module (SIM) cards, identification (ID) cards, bank cards, etc., all belong to a Java card operating system (COS) smart card which conforms with the Java card and Java SIM structure and which has a single input/output (I/O) port interface. These smart cards are categorized as a passive element, and are to be called by the mobile terminal device through protocols. Therefore, if one Java applet of a smart card is desired to be executed in another Java applet, which is running on a Java card virtual machine in the same smart card, a shareable interface object (SIO) is required to be practiced. In other words, calling of a Java applet is currently executed through an instruction invocation by the<!-- EPO <DP n="2"> --> mobile terminal device or an external card reader device. If it is desired to execute calling between Java applets, the current regulations associated with a Java applet should be modified. However, since the current Java card and Java SIM structure have been practiced for decades, and more than hundreds of millions of the smart cards have been issued to the market, it is impossible to modify the regulations. Moreover, the practice of the SIO interface also incurs security concerns. In addition, current application regulations, which are associated with security of bank cards, published by many international organizations do not include the invocation regulations designed in the SIO, let alone calling between Java applets.</p><p id="p0005" num="0005">Accordingly, how to perform calling between Java applets under the premise of not modifying the current Java applet regulations is the focus of the present invention.</p><p id="p0006" num="0006">Therefore, an object of the present invention is to provide a program calling method capable of performing communication and calling between Java applets.</p><p id="p0007" num="0007">Accordingly, a program calling method of the present invention is to be implemented by a control module, which stores a plurality of Java applets and which uses a first one of a plurality of channels during execution of a first one of the Java applets. The program calling method comprises:<!-- EPO <DP n="3"> -->
<ol><li>(A) configuring the control module to create a virtual channel that corresponds to a second one of the channels when the first one of the Java applets intends to call a second one of the Java applets which is to be executed using the second one of the channels;</li><li>(B) in response to a channel management instruction associated with the virtual channel, configuring the control module to open the second one of the channels for allowing execution of the second one of the Java applets;</li><li>(C) configuring the control module to determine whether the virtual channel is still open; and</li><li>(D) configuring the control module to receive an output from the second one of the Java applets for use by the first one of the Java applets when it is determined that the virtual channel is still open.</li></ol></p><p id="p0008" num="0008">Another object of the present invention is to provide a mobile device capable of performing the aforementioned program calling method.</p><p id="p0009" num="0009">Accordingly, the mobile device of the present invention comprises an input module and a control module. The control module includes an input/output port coupled electrically to the input module, a program storage storing a plurality of Java applets, and a control unit coupled electrically to the input/output port and the program storage.</p><p id="p0010" num="0010">While the control module uses a first one of a<!-- EPO <DP n="4"> --> plurality of channels during execution of a first one of the Java applets, the control unit is configured to create a virtual channel that corresponds to a second one of the channels when the first one of the Java applets intends to call a second one of the Java applets which is to be executed using the second one of the channels. In response to a channel management instruction associated with the virtual channel, the control module is configured to open the second one of the channels for allowing execution of the second one of the Java applets. Subsequently, the control module is configured to determine whether the virtual channel is still open. Finally, the control module is configured to receive an output from the second one of the Java applets for use by the first one of the Java applets when it is determined that the virtual channel is still open.</p><p id="p0011" num="0011">By virtue of the program calling method of this invention, communication between Java applets may be practiced without modifying the current Java applet regulations. It is noted that the Java applets may be earlier released bank Java applets, such as bank Java applets complying with Europay, MasterCard and Visa (EMV) standards or People's Bank of China (PBOC) standards.</p><p id="p0012" num="0012">Other features and advantages of the present invention will become apparent in the following<!-- EPO <DP n="5"> --> detailed description of a preferred embodiment with reference to the accompanying drawings, of which:
<ul><li><figref idrefs="f0001">Figure 1</figref> is a block diagram of a mobile device according to the present invention;</li><li><figref idrefs="f0002">Figure 2</figref> is a flow chart illustrating an initialization setup procedure that is executed on the mobile device before leaving the factory; and</li><li><figref idrefs="f0003">Figure 3</figref> is a flow chart illustrating a program calling method to be performed by a control module according to the present invention.</li></ul></p><p id="p0013" num="0013">Referring to <figref idrefs="f0001">Figure 1</figref>, a preferred embodiment of a mobile device 100 according to the present invention is illustrated. The mobile deice 100, such as a mobile phone, a personal digital assistant (PDA), etc., is a device that is able to communicate with a mobile network through a subscriber identity module (SIM).</p><p id="p0014" num="0014">In the preferred embodiment, the mobile device 100 comprises an input module 10 and a control module 20.</p><p id="p0015" num="0015">The input module 10 is a baseband module. Alternatively, the input module 10 may be an input device associated with ISO 7816 (International Organization for Standardization)/UART (universal asynchronous receiver/transmitter), and is not limited to the preferred embodiment.</p><p id="p0016" num="0016">The control module 20 is an integrated circuit (IC) application chip which is designed based on a Java card. The control module 20 includes an input/output (I/O)<!-- EPO <DP n="6"> --> port 21 which is coupled electrically to the input module 10, a program storage 22, and a control unit 23 which is coupled electrically to the I/O port 21 and the program storage 22. The I/O port 21 is configured to communicate with the input module 10 according to the ISO 7816 protocol for transmitting information therebetween. The program storage 22 is provided to store a plurality of Java applets. These Java applets may be obtained by a user who may correspondingly download the Java applets based on the user's needs via over-the-air (OTA) programming. The Java applets may be SIM application toolkit (STK) applets or bank Java applets. The control unit 23 is provided to, according to content of information transmitted from the input module 10, control the I/O port 21 to be electrically connected to the program storage 22 for allowing information to be transmitted therebetween, and control the plurality of Java applets stored in the program storage 22 to communicate with each other.</p><p id="p0017" num="0017">In the present invention, the control module 20 is established based on a structure of the Java card virtual machine, such that other application programs, such as programs associated with Europay, MasterCard and Visa (EMV), People's Bank of China (PBOC), certificate authority (CA), public key infrastructure (PKI), etc., which comply with the Java card standard regulations may be transplanted to a Java virtual<!-- EPO <DP n="7"> --> machine of the control module 20 for execution. Moreover, since the structure of the Java card virtual machine is a structure that supports GlobalPlatform, the control module 20 is capable of OTA updates, is able to update Java applets, and safety certification elements and systems, and therefore is a secure element (SE). It is noted that the control module 20 may be manufactured in the input module 10 and integrated with the input module 10 on the same chip, and in the alternative may be manufactured independently as a single chip, and should not be limited to the kind of manufacturing method.</p><p id="p0018" num="0018">Referring to <figref idrefs="f0001">Figure 1</figref> and <figref idrefs="f0002">Figure 2</figref>, since the control module 20 is an IC application chip designed based on a Java card, the control module 20 of each mobile device 100 needs to undergo initialization setup in the production chain before leaving the factory. In step S11, a factory operator may utilize a card reader or initialization equipment to determine whether the control module 20 is in an initialization status. When it is determined in step S11 that the control module 20 is in the initialization status, this means that the control module 20 is a card required to be initialized, and thus step S12 is performed. In step S12, the initialization setup is performed for the control module 20. During the initialization setup, software, such as an operation system, a card management program,<!-- EPO <DP n="8"> --> etc., and personal data associated with a user are loaded into the control module 20. When it is determined in step S11 that the control module 20 is not in the initialization status, this means that the control module 20 has already been configured to be a Java card (or in a Java card status), and thus the control module 20 does not need to undergo the initialization setup.</p><p id="p0019" num="0019">Referring further to <figref idrefs="f0003">Figure 3</figref>, detailed procedures to be performed by the control module 20 during operation are described hereinafter.</p><p id="p0020" num="0020">In step S10, when the user turns on or actively resets the mobile device 100, the input module 10 is configured to send a reset instruction to the control module 20 if the control unit 23 is required to be reset.</p><p id="p0021" num="0021">In step S20, the control unit 23 is configured to receive a signal transmitted from the input module 10 via the I/O port 21.</p><p id="p0022" num="0022">In step S30, under a condition that the control unit 23 uses a first one of a plurality of channels during execution of a first one of the Java applets, the control unit 23 is configured to create a virtual channel that corresponds to a second one of the channels when the first one of the Java applets intends to call a second one of the Java applets which is to be executed using the second one of the channels. In this embodiment, the control module 20 is configured to provide a flag for each one of the channels and the virtual channel, which<!-- EPO <DP n="9"> --> corresponds to one of the channels, in the control module 20. The control unit 23 is configured to check and update a status of the virtual channel. Specifically, the control unit 23 is configured to register the flag of the virtual channel, i.e., to register the flag of said one of the channels that corresponds to the virtual channel, when creating the virtual channel. Furthermore, the control unit 23 may be configured to modify/ update the flag of said one of the channels that corresponds to the virtual channel according to the signal received in step S20 (or step S70, which will be described in detail hereinafter). More specifically, the control unit 23 is configured to determine whether the signal received in step S20 (or step S70) includes a channel setting instruction, such as Create Channel, Close Channel, an instruction for indicating whether the second one of the Java applets is still being called by the first one of the Java applets, etc., and to create or close a corresponding virtual channel when it is determined that the signal includes the channel setting instruction. For example, the control unit 23 creates the virtual channel which corresponds to the second one of the channels by registering the flag of the virtual channel (i.e., the flag of the second one of the channels). When it is determined in step S30 that the signal does not include the channel setting instruction which is adapted for creating, closing the virtual<!-- EPO <DP n="10"> --> channel, or for modifying a status of the virtual channel, the flow proceeds to step S40.</p><p id="p0023" num="0023">It is noted that step S30 is not a standard virtual machine/ Java Card Runtime Environment (JCRE) modular block in the control unit 23, and JCRE native kernel architecture therein is modified for implementing step S30.</p><p id="p0024" num="0024">In step S40, the control unit 23 is configured to determine whether the signal received in step S20 (or step S70) includes a channel management instruction. The channel management instruction includes a plurality of channel settings. Each of the channel settings corresponds to a designated one of the Java applets stored in the program storage 22. When it is determined that the signal includes the channel management instruction, the flow proceeds to step S50. Otherwise, the flow proceeds to step S80. Step S40 is a standard virtual machine/ JCRE modular block in the control unit 23.</p><p id="p0025" num="0025">In step S50, in response to a channel management instruction associated with the virtual channel, the control unit 23 is configured to open the second one of the channels for allowing execution of the second one of the Java applets. In other words, the control unit 23 is configured to execute the channel management instruction, that is, to update states (e.g., ON and OFF) of the channels according to the channel management<!-- EPO <DP n="11"> --> instruction. Specifically, the control unit 23 may set a specific one of the channels ON and set the rest of the channels OFF (or Stop/ Freeze), and stores information of the channel which is set OFF under usage in a memory buffer. Alternatively, the control unit 23 may set many ones of the channels ON. In the preferred embodiment, the control unit 23 is configured to set the second one of the channels that corresponds to the virtual channel created in step S30 ON, for allowing the first one of the Java applets (i.e., a current channel) to communicate with the second one of the Java applets which corresponds to the virtual channel (i.e., the second one of the channels). Step S50 is a standard virtual machine/ JCRE modular block in the control unit 23. However, in other embodiment, step S50 may be also modified to check or update the status of the virtual channel.</p><p id="p0026" num="0026">In step S60, the control unit 23 is configured to determine whether the virtual channel, i.e., the second one of the channels opened in step S50, is still open. In this embodiment, the virtual channel is determined to be still open when the control unit 23 determines that said one of the channels that corresponds to the virtual channel opened in step S50 (i.e., the second one of the channels) is being called by another Java applet (i.e., the first one of the Java applets). More specifically, the control unit 23 is configured to<!-- EPO <DP n="12"> --> determine whether the second one of the Java applets is being called by the first one of the Java applets from a registration state of the flag of the virtual channel. Alternatively, the virtual channel is determined to be still open when the control unit 23 determines that a return instruction returning to the input module 10 belongs to one of a return instruction resulting from opening the second one of the channels and a return instruction associated with the output from the second one of the Java applets. In addition, the control unit 23 is further configured to check or update the status of the virtual channel. When it is determined in step S60 that the virtual channel is still open, the flow proceeds to step S70. Otherwise, when it is determined in step S60 that the virtual channel is not open, the flow proceeds to step S20. It is noted that the first one of the Java applets which calls the second one of the Java applets and results in opening the virtual channel may also close the virtual channel by once again calling a channel instruction for closing the virtual channel.</p><p id="p0027" num="0027">It is noted that step S60 is not a standard virtual machine/ JCRE modular block in the control unit 23, and the JCRE native kernel architecture therein is modified for implementing step S60.</p><p id="p0028" num="0028">In step S70, the control unit 23 is configured to receive an output signal from the second one of the Java<!-- EPO <DP n="13"> --> applets which corresponds to the virtual channel for use by the first one of the Java applets. The control unit 23 is further configured to provide a signal which is associated with at least one of the channel setting instruction and the channel management instruction for modifying the flag of the virtual channel and for modifying a relationship between the virtual channel and a corresponding one of the channels. Subsequently, the flow proceeds to step S30. It is noted that step S70 is not a standard virtual machine/ JCRE modular block in the control unit 23, and the JCRE native kernel architecture therein is modified for implementing step S70.</p><p id="p0029" num="0029">In step S80, the control unit 23 is configured to perform a corresponding process according to a type of the signal received in step S20. In this embodiment, step S80 may include the following sub-steps.</p><p id="p0030" num="0030">In step S81, the control unit 23 is configured to determine whether the signal received in step S20 is a user authentication identify instruction (e.g., SIM/USIM (universal SIM) applet). When it is determined that the signal is the user authentication identify instruction, this means that the signal is a Global System for Mobile Communications (GSM) instruction, and the flow proceeds to step S82. Otherwise, the flow proceeds to step S83. Step S81 is a standard Java SIM/virtual machine/ JCRE modular block in the control unit<!-- EPO <DP n="14"> --> 23.</p><p id="p0031" num="0031">In step S82, in response to the user authentication identify instruction, the control unit 23 is configured to execute one of the Java applets which corresponds to the user authentication identify instruction. Step S82 is a standard Java SIM/ virtual machine/ JCRE modular block in the control unit 23.</p><p id="p0032" num="0032">In step S83, the control unit 23 is configured to determine whether the signal received in step S20 is one of a standard Java applet instruction and a Java SIM applet instruction. When it is determined that the signal is one of the standard Java applet instruction and the Java SIM applet instruction, the flow proceeds to step S84. When it is determined that the signal is neither one of the standard Java applet instruction nor the Java SIM applet instruction, the signal is presumed to be one of a Java Card Runtime Environment (JCRE) instruction and a test instruction, and then the flow proceeds to step S85. Step S83 is a standard Java SIM/virtual machine/ JCRE modular block in the control unit 23.</p><p id="p0033" num="0033">In step 84, in response to the standard Java applet instruction or the Java SIM applet instruction, the control unit 23 is configured to call, according to the standard Java applet instruction or the Java SIM applet instruction, one of the Java applets which corresponds to the standard Java applet instruction or the Java SIM<!-- EPO <DP n="15"> --> applet instruction through a special virtual channel command format, such that the first one of the Java applets (the current applet) may communicate with, for example, the second one of the Java applets thus called for allowing transmission of information therebetween. Subsequently, the flow proceeds to step S60. It is noted that the special virtual channel command format is previously written in the control module 20 and corresponds to a standard channel command format utilized to call one of the Java applets from the input module 10. Step S84 is a standard Java SIM/ virtual machine/ JCRE modular block in the control unit 23, and a new library is added to control management of the virtual channel and to allow the first one of the Java applets to call the second one of the Java applets using the virtual channel.</p><p id="p0034" num="0034">In step S85, the control unit 23 is configured to transmit the signal received in step S20 back to the input module 10. It is noted that each signal to be transmitted back to the input module 10 will go through the determination of step S60, so as to determine whether the signal belongs to information communicated between the Java applets or belongs to information communicated between the Java applet and the input module 10. Certainly, in combination with different setups, the control unit 23 may also pass the signal received in step S20 to a specific JCRE circuitry for<!-- EPO <DP n="16"> --> execution. Alternatively, the control unit 23 may call, via a specific Java applet instruction, a specific program to invoke a specific service instruction and signal flows of the specific program, and therefore the practice of the control unit 23 is not limited to the preferred embodiment.</p><p id="p0035" num="0035">It is evident from the aforementioned steps S10 to step S80 that the mobile device 100 of the present invention may realize a safety certification element that supports channel calling and that conforms to a structure suitable for operation of the Java virtual machine. During the process of the operation, a mechanism of channel management is entirely managed by the control unit 23 according to the channel management instruction of the signal. Moreover, the corresponding process performed in step S80 also complies with the structure of the Java card virtual machine, and is to invoke a library and a memory in a corresponding native layer according to an application programming interface (API), an object, etc. in the virtual channel. In addition, when the Java applet invokes the API, the Java applet may first call the Create Channel instruction, set the virtual channel ON, and call the Close Channel instruction after invocation, so as to release the occupied virtual channel. In this way, the service instruction of the input module 10 may be assured to operate normally.<!-- EPO <DP n="17"> --></p><p id="p0036" num="0036">The steps of S20, S50 and S80 are all standard virtual machine/ JCRE blocks. In the present invention, the standard Java virtual machine architecture is changed, and the interface architecture between the I/O port 21 and the control unit 23 is modified, so as to implement the aforementioned steps of S30, S40 and S70 (i.e., kernel blocks) associated with the instruction routing flow and rule.</p><p id="p0037" num="0037">Furthermore, the program (Java applet) calling method is not only applicable to the mobile device 100 with the single I/O port 21. For a structure of the Java card virtual machine having multiple I/O ports, an effect of communication between Java applets may also be achieved by means of the program calling method of the present invention.</p><p id="p0038" num="0038">To sum up, the mobile device 100 of the present invention, by virtue of the control module 20, conforms to the structure of the Java card virtual machine. Moreover, by adding the Create Channel instruction and the Close channel instruction, which are utilized to set the virtual channel, to the API of the control unit 23, and by allowing a current one of the Java applets to invoke the service instruction associated with outgoing data and to send the outgoing data to the Java applet that corresponds to the virtual channel, the Java Applets may communicate with each other and information may be transmitted therebetween.<!-- EPO <DP n="18"> --></p><p id="p0039" num="0039">While the present invention has been described in connection with what is considered the most practical and preferred embodiment, it is understood that this invention is not limited to the disclosed embodiment but is intended to cover various arrangements included within the spirit and scope of the broadest interpretation so as to encompass all such modifications and equivalent arrangements.</p></description><claims mxw-id="PCLM56982074" lang="EN" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-en-0001" num="0001"><claim-text>A program calling method to be implemented by a control module (20), which stores a plurality of Java applets and which uses a first one of a plurality of channels during execution of a first one of the Java applets, the program calling method <b>characterized by</b>:
<claim-text>(A) configuring the control module (20) to create a virtual channel that corresponds to a second one of the channels when the first one of the Java applets intends to call a second one of the Java applets which is to be executed using the second one of the channels;</claim-text>
<claim-text>(B) in response to a channel management instruction associated with the virtual channel, configuring the control module (20) to open the second one of the channels for allowing execution of the second one of the Java applets;</claim-text>
<claim-text>(C) configuring the control module (20) to determine whether the virtual channel is still open; and</claim-text>
<claim-text>(D) configuring the control module (20) to receive an output from the second one of the Java applets for use by the first one of the Java applets when it is determined that the virtual channel is still open.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The program calling method as claimed in Claim 1, <b>characterized in that</b>, in step (C), the virtual channel is determined to be still open when the control module (20) determines that the second one of the Java applets<!-- EPO <DP n="20"> --> is being called by the first one of the Java applets.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The program calling method as claimed in Claim 2,<br/>
<b>characterized in that</b>, in step (A), the control module (20) is configured provide a flag for the virtual channel in the control module (20) and to register the flag of the virtual channel when creating the virtual channel; and<br/>
<b>characterized in that</b>, in step (C), the control module (20) is configured to determine whether the second one of the Java applets is being called by the first one of the Java applets from a registration state of the flag of the virtual channel.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The program calling method as claimed in Claim 1, <b>characterized in that</b>, in step (C), the virtual channel is determined to be still open when the control module (20) determines that a return instruction belongs to one of a return instruction resulting from opening the second one of the channels and a return instruction associated with the output from the second one of the Java applets.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The program calling method as claimed in any one of Claims 1 to 4, <b>characterized in that</b>, in step (A), the control module (20) is configured to provide a flag for the virtual channel in the control module (20) and to<!-- EPO <DP n="21"> --> register the flag of the virtual channel when creating the virtual channel.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The program calling method as claimed in any one of Claims 1 to 5, <b>characterized in that</b>, in step (B), during a period when the second one of the channels is open, a flag of the virtual channel, which is provided in the control module (20), is registered.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The program calling method as claimed in any one of Claims 1 to 6, further <b>characterized by</b>:
<claim-text>(F-1) in response to a user authentication identify instruction, configuring the control module (20) to execute one of the Java applets which corresponds to the user authentication identify instruction; and</claim-text>
<claim-text>(F-2) in response to a standard Java applet instruction, configuring the control module (20) to call, according to the standard Java applet instruction, one of the Java applets which corresponds to the standard Java applet instruction.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The program calling method as claimed in Claim 7, the control module (20) being coupled to an input module (10), the program calling method <b>characterized in that</b>, in step (F-2), the control module (20) calls said one of the Java applets through a virtual channel command format which is previously written in the control module<!-- EPO <DP n="22"> --> (20) and which corresponds to a standard channel command format utilized to call one of the Java applets from the input module (10).</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The program calling method as claimed in any one of Claims 1 to 8, the control module being coupled to an input module, the program calling method, prior to step (A), further <b>characterized by</b>:
<claim-text>configuring the control module to reset upon receipt of a reset instruction from the input module.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A mobile device <b>characterized by</b>:
<claim-text>an input module (10); and</claim-text>
<claim-text>a control module (20) which includes<br/>
an input/output port (21) coupled electrically to the input module (10),<br/>
a program storage (22) storing a plurality of Java applets, and<br/>
a control unit (23) coupled electrically to the input/output port (21) and the program storage (22);</claim-text>
<claim-text>wherein under a condition that the control module (20) uses a first one of a plurality of channels during execution of a first one of the Java applets, the control unit (23) is configured to<br/>
create a virtual channel that corresponds to a second one of the channels when the first one of the Java applets intends to call a second one of the Java<!-- EPO <DP n="23"> --> applets which is to be executed using the second one of the channels,<br/>
in response to a channel management instruction associated with the virtual channel, open the second one of the channels for allowing execution of the second one of the Java applets,<br/>
determine whether the virtual channel is still open, and<br/>
receive an output from the second one of the Java applets for use by the first one of the Java applets when it is determined that the virtual channel is still open.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The mobile device as claimed in Claim 10, <b>characterized in that</b> the virtual channel is determined to be still open when the control module (20) determines that the second one of the Java applets is being called by the first one of the Java applets.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The mobile device as claimed in Claim 11,<br/>
<b>characterized in that</b> the control module (20) is configured to provide a flag for the virtual channel in the control module (20) and to register the flag of the virtual channel when creating the virtual channel; and<br/>
<b>characterized in that</b> the control module (20) is configured to determine whether the second one of the<!-- EPO <DP n="24"> --> Java applets is being called by the first one of the Java applets from a registration state of the flag of the virtual channel.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The mobile device as claimed in Claim 10, <b>characterized in that</b> the virtual channel is determined to be still open when the control module (20) determines that a return instruction belongs to one of a return instruction resulting from opening the second one of the channels and a return instruction associated with the output from the second one of the Java applets.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The mobile device as claimed in any one of Claims 10 to 13, <b>characterized in that</b> the control module (20) is configured to provide a flag for the virtual channel in the control module (20) and to register the flag of the virtual channel when creating the virtual channel.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The mobile device as claimed in any one of Claims 10 to 14, <b>characterized in that</b>,<br/>
in response to a user authentication identify instruction, the control module (20) is configured to execute one of the Java applets which corresponds to the user authentication identify instruction; and<br/>
in response to a standard Java applet instruction, the control module (20) is configured to call, according to the standard Java applet instruction, one<!-- EPO <DP n="25"> --> of the Java applets which corresponds to the standard Java applet instruction.</claim-text></claim></claims><drawings mxw-id="PDW16670466" load-source="patent-office"><!-- EPO <DP n="26"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="155" he="156" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="160" he="198" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
