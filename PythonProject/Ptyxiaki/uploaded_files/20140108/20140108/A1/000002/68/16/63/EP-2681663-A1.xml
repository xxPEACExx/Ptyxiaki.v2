<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681663-A1" country="EP" doc-number="2681663" kind="A1" date="20140108" family-id="46753248" file-reference-id="293883" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586143" ucid="EP-2681663-A1"><document-id><country>EP</country><doc-number>2681663</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11859662-A" is-representative="NO"><document-id mxw-id="PAPP154848335" load-source="docdb" format="epo"><country>EP</country><doc-number>11859662</doc-number><kind>A</kind><date>20111031</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220440023" load-source="docdb" format="original"><country>EP</country><doc-number>11859662.6</doc-number><date>20111031</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140554522" ucid="US-2011058506-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2011058506</doc-number><kind>W</kind><date>20111031</date></document-id></priority-claim><priority-claim mxw-id="PPC140549273" ucid="US-201113197275-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113197275</doc-number><kind>A</kind><date>20110803</date></document-id></priority-claim><priority-claim mxw-id="PPC140553182" ucid="US-201161448511-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161448511</doc-number><kind>P</kind><date>20110302</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2100272529" load-source="docdb">H04W  40/24        20090101ALI20140711BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100275570" load-source="docdb">H04L  12/751       20130101ALI20140711BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100279021" load-source="docdb">G06F  15/16        20060101AFI20140711BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1732713535" load-source="docdb" scheme="CPC">H04L  45/26        20130101 LI20171116BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133818861" load-source="docdb" scheme="CPC">H04L2012/6432      20130101 LA20141125BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133820943" load-source="docdb" scheme="CPC">H04W  40/246       20130101 LI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133821828" load-source="docdb" scheme="CPC">H04L  12/462       20130101 LA20141125BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133823487" load-source="docdb" scheme="CPC">H04L  45/02        20130101 FI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL2094208040" load-source="docdb" scheme="CPC">H04L  12/4625      20130101 LI20140711BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363062" lang="DE" load-source="patent-office">ENTDECKUNG VON HERKÖMMLICHEN NETZWERKGERÄTEN UND BRÜCKEN</invention-title><invention-title mxw-id="PT132363063" lang="EN" load-source="patent-office">DISCOVERY OF CONVENTIONAL NETWORK DEVICES AND BRIDGES</invention-title><invention-title mxw-id="PT132363064" lang="FR" load-source="patent-office">DÉCOUVERTE DE DISPOSITIFS RÉSEAU CLASSIQUES ET DE PONTS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919532487" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>QUALCOMM INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919533925" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>QUALCOMM INCORPORATED</last-name></addressbook></applicant><applicant mxw-id="PPAR919007328" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Qualcomm Incorporated</last-name><iid>101331414</iid><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919506656" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SCHRUM SIDNEY B JR</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919521176" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SCHRUM, SIDNEY, B., JR.</last-name></addressbook></inventor><inventor mxw-id="PPAR919012467" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SCHRUM, SIDNEY, B., JR.</last-name><address><street>c/o Qualcomm Atheros Inc. 1700 Technology Drive</street><city>San Jose, California 95110</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919535921" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>NEWMAN RICHARD E</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919514605" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>NEWMAN, RICHARD E.</last-name></addressbook></inventor><inventor mxw-id="PPAR919015910" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>NEWMAN, RICHARD E.</last-name><address><street>c/o Qualcomm Atheros Inc. 1700 Technology Drive</street><city>San Jose, California 95110</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919014710" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Wegner, Hans</last-name><iid>101259466</iid><address><street>Bardehle Pagenberg Partnerschaft mbB Patentanwälte, Rechtsanwälte Prinzregentenplatz 7</street><city>81675 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2011058506-W"><document-id><country>US</country><doc-number>2011058506</doc-number><kind>W</kind><date>20111031</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118531-A1"><document-id><country>WO</country><doc-number>2012118531</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549845696" load-source="docdb">AL</country><country mxw-id="DS549833818" load-source="docdb">AT</country><country mxw-id="DS549845697" load-source="docdb">BE</country><country mxw-id="DS549913480" load-source="docdb">BG</country><country mxw-id="DS549756901" load-source="docdb">CH</country><country mxw-id="DS549834590" load-source="docdb">CY</country><country mxw-id="DS549834591" load-source="docdb">CZ</country><country mxw-id="DS549765085" load-source="docdb">DE</country><country mxw-id="DS549845702" load-source="docdb">DK</country><country mxw-id="DS549845703" load-source="docdb">EE</country><country mxw-id="DS549757539" load-source="docdb">ES</country><country mxw-id="DS549913481" load-source="docdb">FI</country><country mxw-id="DS549913482" load-source="docdb">FR</country><country mxw-id="DS549765086" load-source="docdb">GB</country><country mxw-id="DS549845704" load-source="docdb">GR</country><country mxw-id="DS549765087" load-source="docdb">HR</country><country mxw-id="DS549834592" load-source="docdb">HU</country><country mxw-id="DS549756902" load-source="docdb">IE</country><country mxw-id="DS549845705" load-source="docdb">IS</country><country mxw-id="DS549913483" load-source="docdb">IT</country><country mxw-id="DS549845714" load-source="docdb">LI</country><country mxw-id="DS549765088" load-source="docdb">LT</country><country mxw-id="DS549833819" load-source="docdb">LU</country><country mxw-id="DS549913484" load-source="docdb">LV</country><country mxw-id="DS549765101" load-source="docdb">MC</country><country mxw-id="DS549833820" load-source="docdb">MK</country><country mxw-id="DS549833821" load-source="docdb">MT</country><country mxw-id="DS549833838" load-source="docdb">NL</country><country mxw-id="DS549756903" load-source="docdb">NO</country><country mxw-id="DS549833839" load-source="docdb">PL</country><country mxw-id="DS549757540" load-source="docdb">PT</country><country mxw-id="DS549833477" load-source="docdb">RO</country><country mxw-id="DS549757549" load-source="docdb">RS</country><country mxw-id="DS549833840" load-source="docdb">SE</country><country mxw-id="DS549765102" load-source="docdb">SI</country><country mxw-id="DS549756904" load-source="docdb">SK</country><country mxw-id="DS549756913" load-source="docdb">SM</country><country mxw-id="DS549845715" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99831002" ref-ucid="WO-2012118531-A1" lang="EN" load-source="patent-office"><p num="0000">A hybrid network device can implement functionality for automatically detecting and locating legacy bridges in a communication network. In one embodiment, a first network device of a first class of network devices can determine that a second network device of a second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network device based, in part, on detecting that a packet originating from the second network device does not include a predetermined tag. The first network device can determine whether network segments associated with the first network device and a target network device are communicatively coupled via a network bridge device of the second class of network devices based on transmitting probe messages to the second network device and determining whether the target network device detected the probe messages.</p></abstract><abstract mxw-id="PA100327826" ref-ucid="WO-2012118531-A1" lang="EN" source="national office" load-source="docdb"><p>A hybrid network device can implement functionality for automatically detecting and locating legacy bridges in a communication network. In one embodiment, a first network device of a first class of network devices can determine that a second network device of a second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network device based, in part, on detecting that a packet originating from the second network device does not include a predetermined tag. The first network device can determine whether network segments associated with the first network device and a target network device are communicatively coupled via a network bridge device of the second class of network devices based on transmitting probe messages to the second network device and determining whether the target network device detected the probe messages.</p></abstract><abstract mxw-id="PA99831003" ref-ucid="WO-2012118531-A1" lang="FR" load-source="patent-office"><p num="0000">Un dispositif réseau hybride peut mettre en œuvre une fonctionnalité pour détecter et localiser automatiquement des ponts existants dans un réseau de communication. Dans un mode de réalisation, un premier dispositif réseau d'une première classe de dispositifs réseau peut déterminer qu'un second dispositif réseau d'une seconde classe de dispositifs réseau est situé en communication adjacent à au moins l'une d'une pluralité d'interfaces réseau du premier dispositif réseau sur la base, en partie, de la détection du fait qu'un paquet provenant du second dispositif réseau ne comprend pas une étiquette prédéterminée. Le premier dispositif réseau peut déterminer si des segments réseau associés au premier dispositif réseau et à un dispositif réseau cible sont ou non couplés en communication par l'intermédiaire d'un dispositif réseau de la seconde classe de dispositifs réseau sur la base de la transmission de messages de sonde au second dispositif réseau et de la détermination du point de savoir si le dispositif réseau cible a ou non détecté les messages de sonde.</p></abstract><abstract mxw-id="PA100327827" ref-ucid="WO-2012118531-A1" lang="FR" source="national office" load-source="docdb"><p>Un dispositif réseau hybride peut mettre en oeuvre une fonctionnalité pour détecter et localiser automatiquement des ponts existants dans un réseau de communication. Dans un mode de réalisation, un premier dispositif réseau d'une première classe de dispositifs réseau peut déterminer qu'un second dispositif réseau d'une seconde classe de dispositifs réseau est situé en communication adjacent à au moins l'une d'une pluralité d'interfaces réseau du premier dispositif réseau sur la base, en partie, de la détection du fait qu'un paquet provenant du second dispositif réseau ne comprend pas une étiquette prédéterminée. Le premier dispositif réseau peut déterminer si des segments réseau associés au premier dispositif réseau et à un dispositif réseau cible sont ou non couplés en communication par l'intermédiaire d'un dispositif réseau de la seconde classe de dispositifs réseau sur la base de la transmission de messages de sonde au second dispositif réseau et de la détermination du point de savoir si le dispositif réseau cible a ou non détecté les messages de sonde.</p></abstract><description mxw-id="PDES51232415" ref-ucid="WO-2012118531-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> DISCOVERY OF CONVENTIONAL NETWORK DEVICES AND BRIDGES </p><p id="p0002" num="0002">RELATED APPLICATION </p><p id="p0003" num="0003"> [0001] This application claims the priority benefit of U.S. Provisional Application Serial No. 61/448,51 1 filed Mar 2, 201 1 and U.S. Application Serial No. 13/197,275 filed Aug 3, 201 1. </p><p id="p0004" num="0004">BACKGROUND </p><p id="p0005" num="0005">[0002] Embodiments of the inventive subject matter generally relate to the field of communication systems and, more particularly, to a mechanism for discovery of conventional devices and bridges in a hybrid communication network. </p><p id="p0006" num="0006">[0003] Hybrid communication networks typically comprise multiple networking technologies (e.g., wireless local area network (WLAN) technologies, powerline communication technologies, Ethernet, etc.) that are interconnected using bridging-capable devices that forward packets between devices utilizing the different network technologies and media in order to form a single extended communication network. Typically, the communication mechanisms, and protocol specifics (e.g., device and topology discovery, bridging to other networks, etc.) are unique to each networking technology. The hybrid communication network can comprise hybrid communication devices and conventional (or legacy) communication devices. </p><p id="p0007" num="0007">SUMMARY </p><p id="p0008" num="0008"> [0004] In some embodiments, a method comprises: detecting, at a first network bridge device of a first class of network devices, that one or more packets originating from a second network device of a second class of network devices that are forwarded by the first network bridge device do not include a predetermined tag; determining, at the first network bridge device, that the second network device of the second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network bridge device based, at least in part, on said detecting that the one or more packets originating from the second network device do not include the predetermined tag; and inserting, at the first network bridge device, the predetermined tag in the one or more packets originating from the second network device. 
<!-- EPO <DP n="4"/>-->
 [0005] In some embodiments, the method further comprises transmitting a probe message to the second network device of the second class of network devices; determining whether the probe message was detected by a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determining that a first network segment associated with the first network bridge device is communicatively coupled to a second network segment associated with the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the target network device. </p><p id="p0009" num="0009">[0006] In some embodiments, the method further comprises transmitting a probe message to the second network device of the second class of network devices; determining whether the probe message was detected by a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determining that the second network device and the target network device are associated with a common network segment in response to determining that the probe message was detected by the target network device. </p><p id="p0010" num="0010">[0007] In some embodiments, said determining that the second network device of the second class of network devices is communicatively located adjacent to at least one of the plurality of network interfaces of the first network bridge device further comprises providing, to one or more other network devices of the first class of network devices, an indication that the first network bridge device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. </p><p id="p0011" num="0011">[0008] In some embodiments, a method comprises: determining that at least one of a plurality of network interfaces of a first network device of a first class of network devices is communicatively located adjacent to a second network device of a second class of network devices in a communication network based, at least in part, on detecting that one or more packets received at the at least one of the plurality of network interfaces from the second network device do not comprise a predetermined tag; transmitting, via the at least one of the plurality of network interfaces of the first network device, a probe message to the second network device of the second class of network devices; determining whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of 
<!-- EPO <DP n="5"/>-->
 network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determining that a first network segment associated with the at least one of the plurality of network interfaces of the first network device is communicatively coupled to a second network segment associated with the at least one of the plurality of network interfaces of the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the target network device. </p><p id="p0012" num="0012">[0009] In some embodiments, the first network device and the target network device are network bridge devices of the first class of network devices. </p><p id="p0013" num="0013">[0010] In some embodiments, the method further comprises determining that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. </p><p id="p0014" num="0014">[0011] In some embodiments, said determining that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices in the communication network comprises receiving, at the at least one of the plurality of network interfaces of the first network device, the one or more packets from the second network device of the second class of network devices; reading the one or more packets to determine whether the one or more packets received from the second network device of the second class of network devices comprises the predetermined tag; and determining that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices in response to determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag. </p><p id="p0015" num="0015">[0012] In some embodiments, in response to determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag, the method further comprises determining whether the one or more 
<!-- EPO <DP n="6"/>-->
 packets received from the second network device of the second class of network devices are to be forwarded to a destination device of the communication network; and in response to determining that the one or more packets received from the second network device of the second class of network devices are to be forwarded to the destination device of the communication network, inserting the predetermined tag in the one or more packets received from the second network device of the second class of network devices; and forwarding the one or more packets comprises the predetermined tag to the destination device. </p><p id="p0016" num="0016">[0013] In some embodiments, the method further comprises providing, to at least the target network device of the communication network, an indication that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. </p><p id="p0017" num="0017">[0014] In some embodiments, the method further comprises identifying the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices in response to detecting a message from the target network device that indicates that the at least one of the plurality of network interfaces of the target network device is communicatively located adjacent to the second network device of the second class of network devices. </p><p id="p0018" num="0018">[0015] In some embodiments, said transmitting the probe message to the second network device of the second class of network devices further comprises identifying the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; negotiating, with the target network device, a communication schedule in which to probe the second network device of the second class of network devices; and transmitting the probe message to the second network device of the second class of network devices in accordance with the communication schedule. </p><p id="p0019" num="0019">[0016] In some embodiments, said transmitting the probe message to the network device of the second class of network devices further comprises determining an address of the second 
<!-- EPO <DP n="7"/>-->
 network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and transmitting the probe message from the first network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. </p><p id="p0020" num="0020">[0017] In some embodiments, the address associated with the second network device comprises a media access control (MAC) address associated with the second network device. </p><p id="p0021" num="0021">[0018] In some embodiments, a network device comprises: a plurality of network interfaces; and a device detection unit coupled with the one or more network interfaces. The device detection unit is operable to: determine that at least one of the plurality of network interfaces of the network device of a first class of network devices is communicatively located adjacent to a second network device of a second class of network devices in a communication network based, at least in part, on detecting that one or more packets received at the at least one of the plurality of network interfaces from the second network device do not comprise a predetermined tag; transmit, via the at least one of the plurality of network interfaces of the network device, a probe message to the second network device of the second class of network devices; determine whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determine that a first network segment associated with the at least one of the plurality of network interfaces of the network device is communicatively coupled to a second network segment associated with the at least one of the plurality of network interfaces of the target network device via a network bridge device of the second class of network devices in response to the device detection unit determining that the probe message was not detected by the target network device. </p><p id="p0022" num="0022">[0019] In some embodiments, the device detection unit is further operable to determine that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to the device detection unit determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. 
<!-- EPO <DP n="8"/>-->
 [0020] In some embodiments, in response to the device detection unit determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag, the device detection unit is further operable to determine whether the one or more packets received from the second network device of the second class of network devices are to be forwarded to a destination device of the communication network; and in response to the device detection unit determining that the one or more packets received from the second network device of the second class of network devices are to be forwarded to the destination device of the communication network, insert the predetermined tag in the one or more packets received from the second network device of the second class of network devices; and forward the one or more packets comprises the predetermined tag to the destination device. </p><p id="p0023" num="0023">[0021] In some embodiments, the device detection unit operable to transmit the probe message to the second network device of the second class of network devices further comprises the device detection unit operable to identify the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; negotiate, with the target network device, a communication schedule in which to probe the second network device of the second class of network devices; and transmit the probe message to the second network device of the second class of network devices in accordance with the communication schedule. </p><p id="p0024" num="0024">[0022] In some embodiments, the device detection unit operable to transmit the probe message to the network device of the second class of network devices further comprises the device detection unit operable to determine an address of the second network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and transmit the probe message from the network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. </p><p id="p0025" num="0025">[0023] In some embodiments, one or more machine-readable storage media having instructions stored therein, which when executed by one or more processors causes the one or 
<!-- EPO <DP n="9"/>-->
 more processors to perform operations that comprise: detecting, at a first network device of a first class of network devices, that one or more packets originating from a second network device of a second class of network devices that are forwarded by the first network device do not include a predetermined tag; determining that the second network device of the second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network device based, at least in part, on said operation of detecting that the one or more packets originating from the second network device do not include the predetermined tag; inserting the predetermined tag in the one or more packets originating from the second network device; transmitting, via the at least one of the plurality of network interfaces of the first network device, a probe message to the second network device of the second class of network devices; determining whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determining that a first network segment associated with the at least one of the plurality of network interfaces of the first network device is communicatively coupled to a second network segment associated with the at least one of the plurality of network interfaces of the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the at least one of the plurality of network interfaces of the target network device. </p><p id="p0026" num="0026">[0024] In some embodiments, the operations further comprise determining that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to said operation of determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. </p><p id="p0027" num="0027">[0025] In some embodiments, the operations further comprise providing, to at least the target network device of the communication network, an indication that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. 
<!-- EPO <DP n="10"/>-->
 [0026] In some embodiments, said operation of transmitting the probe message to the network device of the second class of network devices further comprises determining an address of the second network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and transmitting the probe message from the first network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. </p><p id="p0028" num="0028">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0029" num="0029"> [0027] The present embodiments may be better understood, and numerous objects, features, and advantages made apparent to those skilled in the art by referencing the accompanying drawings. </p><p id="p0030" num="0030">[0028] Figure 1 is an example block diagram illustrating a mechanism for detecting legacy network devices and bridges in a hybrid communication network; </p><p id="p0031" num="0031">[0029] Figure 2 is a flow diagram illustrating example operations for identifying legacy network devices and bridges in a hybrid communication network; </p><p id="p0032" num="0032">[0030] Figure 3 is a continuation of Figure 2 and also illustrates example operations for identifying legacy network devices and bridges in a hybrid communication network;and </p><p id="p0033" num="0033">[0031] Figure 4 is an example block diagram of one embodiment of an electronic device including a mechanism for discovery of legacy network devices and bridges in a hybrid communication network. </p><p id="p0034" num="0034">DESCRIPTION OF EMBODIMENT(S) </p><p id="p0035" num="0035"> [0032] The description that follows includes exemplary systems, methods, techniques, instruction sequences, and computer program products that embody techniques of the present inventive subject matter. However, it is understood that the described embodiments may be practiced without these specific details. For instance, although in some embodiments the conventional bridge discovery mechanism can be implemented for hybrid communication networks comprising wireless local area network (WLAN) devices (e.g., IEEE 802.11η devices), 
<!-- EPO <DP n="11"/>-->
 powerline network devices (e.g., HomePlug AV) and Ethernet devices, in other embodiments the conventional bridge discovery mechanism can be implemented in hybrid communication networks that may comprise other suitable types of network devices that implement other standards/protocols (e.g., WiMAX, etc.). In other instances, well-known instruction instances, protocols, structures, and techniques have not been shown in detail in order not to obfuscate the description. </p><p id="p0036" num="0036">[0033] A hybrid communication network (e.g., a hybrid home network) is typically formed by interconnecting communication networks (that support different communication protocols) across different network technologies and communication media. The hybrid communication network can comprise multi-interface communication devices ("hybrid devices") that are configured to operate across multiple networking technologies as well as conventional, single- interface communication devices ("legacy devices"). Typically, the hybrid devices implement topology discovery and other information exchange protocols to advertise their presence to other hybrid devices in the hybrid communication network . However, the legacy devices (including legacy bridges) may not implement the topology discovery and information exchange protocols and may not advertise their presence within the hybrid communication network. The hybrid devices, therefore, may attempt to route packets in the hybrid communication network without being aware of the presence or location of legacy devices and legacy bridges in the hybrid communication network. However, for proper packet routing, the hybrid devices should be aware of the topology of the hybrid communication network. For example, the hybrid devices may implement protocols to improve network performance by evenly dividing the communication load over multiple routes. The presence of legacy bridges of varying capability and that implement various legacy protocols can influence the route selection decisions made by the hybrid devices. For example, a legacy learning bridge typically "learns" the location of various other communication devices (e.g., legacy devices, hybrid devices, etc.) in the hybrid communication network with respect to various interfaces of the legacy learning bridge. The legacy learning bridge in the hybrid communication network may drop incoming packets if the legacy learning bridge detects the same source address on more than one of its interfaces and/or if the interface at which the incoming packets arrive at the legacy learning bridge is inconsistent with what the legacy learning bridge has previously learned. Existing topology discovery techniques may rely on direct exchange of information between communication devices and on 
<!-- EPO <DP n="12"/>-->
 manual configuration of virtual LANs, bridge priorities, or explicit provision of topology information that can be too complicated for users. </p><p id="p0037" num="0037">[0034] In some embodiments, hybrid devices can implement a mechanism for automatically detecting and locating legacy learning bridges in a hybrid communication network with little or no user configuration, so that route selection decisions can take into consideration the effects of the legacy learning bridges. The hybrid devices can be configured to mark packets received from legacy devices with a special predetermined tag before forwarding the packets (if needed) to indicate that the packets were routed via a hybrid device. In one implementation, when a hybrid device detects a packet from a legacy device, the hybrid device can determine whether the packet comprises the special predetermined tag. If the hybrid device determines that the packet was received without the predetermined tag, this can indicate that the legacy device is not coupled to the hybrid device via other intermediate hybrid devices. Such a legacy device is herein referred to as an "adjacent legacy device" with respect to the hybrid device (e.g., with respect to at least one communication interface of the hybrid device) at which the packet was detected. The hybrid device can then transmit a probe message to the adjacent legacy device, determine whether one or more other hybrid devices detected the probe message, and consequently determine whether the hybrid device and the one or more other hybrid devices (which may be located in different network segments) are connected via legacy bridges, as will be further described below with reference to Figures 1-4. Such a topology discovery mechanism for identifying the presence of legacy learning bridges in a hybrid communication network can improve and simplify the route selection process in the hybrid communication network. By identifying the position of the legacy learning bridges vis-a-vis the hybrid devices, packet routes can be appropriately selected (or avoided) to try to ensure the legacy learning bridges detect the same source addresses at the appropriate "learned" interfaces. This can minimize the probability of dropped packets and improve performance of the hybrid communication network. </p><p id="p0038" num="0038">[0035] Figure 1 is an example block diagram illustrating a mechanism for detecting legacy devices and bridges in a hybrid communication network 100. As described above, the hybrid communication network 100 can comprise communication devices (e.g., hybrid devices, hybrid bridges, legacy devices, legacy bridges, etc.) that implement one or more different communication protocols (e.g., WLAN, HomePlug AV, Ethernet, etc.), based on various 
<!-- EPO <DP n="13"/>-->
 networking standards and operating either wirelessly or over various wired media (powerline, coax cable, unshielded twisted pair telephone cable, CAT5 shielded twisted pair cable, etc.). In some implementations, the hybrid devices can be electronic devices that comprise bridging capabilities in addition to communication capabilities. Such hybrid devices may be referred to as "hybrid bridges." The hybrid devices can also be electronic devices that comprise communication capabilities but do not comprise bridging capabilities. Such hybrid devices may be referred to as "hybrid communication devices." In some implementations, the legacy devices can be electronic devices that comprise bridging capabilities in addition to communication capabilities, which can be referred to herein as "legacy bridges." The legacy devices can also be electronic devices that comprise communication capabilities but do not comprise bridging capabilities. Such legacy devices may be referred to as "legacy communication devices." In Figure 1, the hybrid communication network 100 comprises two network segments 120 and 122. The network segment 120 comprises hybrid devices 102 and 116, and a legacy device 106. The network segment 122 comprises a hybrid device 104 and a legacy device 108. A legacy bridge 1 10 couples the network segment 120 and the network segment 122. The hybrid device 102 comprises a device detection unit 1 12 and a routing unit 1 14. Likewise, although not depicted in Figure 1, the hybrid devices 104 and 116 can also comprise their respective device detection units and routing units. It is noted that in some implementations, the hybrid devices 102, 104, and 116 can be hybrid bridges. In some embodiments, the hybrid devices 102, 104, and/or 116 can be hybrid bridges or hybrid communication devices. Likewise, the legacy devices 106 and 108 can be legacy bridges or legacy communication devices. </p><p id="p0039" num="0039">[0036] In some implementations, the hybrid devices 102, 104, and 116 can comprise multiple communication interfaces, each of which connects the hybrid device to different communication networks. For example, the hybrid device 102 can comprise three communication interfaces (e.g., a powerline interface, an Ethernet interface, and a wireless local area network (WLAN) interface) that enable the hybrid device 102 to connect to a powerline communication network, an Ethernet, and a WLAN, respectively. It is noted that even though Figure 1 does not explicitly show multiple communication interfaces for the hybrid devices 102, 104 and 1 16, the hybrid devices 102, 104 and 1 16 can comprise two or more communication interface that couple the hybrid devices to two or more communication networks. The legacy devices typically comprise only one communication interface for communication via the 
<!-- EPO <DP n="14"/>-->
 corresponding communication network. For example, the legacy devices 106 and 108 may comprise an Ethernet interface for communication via Ethernet. In some implementations, each of the hybrid devices 102, 104, and 1 16 can broadcast announcement messages to advertise their presence in the hybrid communication network 100. For example, the hybrid device 102 can broadcast an announcement message (e.g., at predetermined periodic time intervals) comprising an identifier of the hybrid device 102 to announce its presence in the hybrid communication network 100 to the hybrid devices 104 and 1 16. However, as described above, the legacy devices may not be capable of broadcasting announcement messages (or other similar messages). Therefore, the hybrid devices 102, 104, and 116 can execute operations described below in stages A - G (and also Figures 2 - 3) to discover legacy devices and legacy bridges in the hybrid communication network 100 in order to determine the topology of the hybrid communication network 100. </p><p id="p0040" num="0040">[0037] At stage A, the device detection unit 1 12 of the hybrid device 102 detects a packet transmitted by the legacy device 106 that does not comprise a predetermined tag. For example, the legacy device 106 may transmit the packet to another legacy device via the hybrid device 102. As another example, the packet transmitted by the legacy device 106 may be intended for the hybrid device 102. As another example, the legacy device 106 may broadcast a packet in the hybrid communication network 100 at periodic intervals and the hybrid device 102 can detect the broadcasted packet. In some implementations, in response to detecting the packet from the legacy device 106, the device detection unit 1 12 can read a predetermined field in the received packet to determine whether the received packet comprises the predetermined tag. The predetermined tag can be any suitable combination of characters, numbers, and symbols (e.g., any suitable combination of zeros and ones). In one implementation, the predetermined tag can be a virtual local area network (VLAN) tag. In another implementation, the predetermined tag may be a static tag (e.g., hardcoded as part of the hybrid devices during manufacturing), while in other implementations the hybrid devices 102, 104, and 1 16 in the hybrid communication network 100 can negotiate and agree upon the value of the predetermined tag. In another implementation, a user may configure/select the value of the predetermined tag. </p><p id="p0041" num="0041">[0038] At stage Bl, the device detection unit 1 12 determines that the legacy device 106 is an adjacent legacy device in response to detecting that the packet from legacy device 106 does not 
<!-- EPO <DP n="15"/>-->
 comprise the predetermined tag. In some implementations, the hybrid devices 102, 104, and 116 may be configured to append the predetermined tag to any packet received from a legacy device prior to forwarding the received packet to the intended destination device. If the hybrid device 102 receives the packet from the legacy device 106 without the predetermined tag, this can indicate that there are no other hybrid devices along the route between the hybrid device 102 and the legacy device 106 (e.g., along the route between at least one of the interfaces of the hybrid device 102 and the legacy device 106). In other words, receiving the packet from the legacy device 106 without the predetermined tag can identify the legacy device 106 as an "adjacent legacy device" with respect to the hybrid device 102 (e.g., with respect to at least one of the interfaces of the hybrid device 102). In some implementations, in response to determining that the legacy device 106 is an adjacent legacy device with respect to the hybrid device 102, the device detection unit 1 12 can broadcast an "adjacent device identification" message to the other hybrid devices 104 and 1 16 in the hybrid communication network 100. The adjacent device identification message can comprise an identifier (e.g., a network address, a device address, etc.) associated with the adjacent device 106 and an identifier associated with the hybrid device 102. In another implementation, the device detection unit 112 can broadcast an indication of the adjacent legacy device 106 in any suitable message (e.g., a beacon message, a periodic synchronization message, etc.). </p><p id="p0042" num="0042">[0039] It is noted that, in some implementations, the legacy device 106 does not have to be physically adjacent to the hybrid device 102 (as depicted in Figure 1) in order to be considered an "adjacent legacy device." Instead, the legacy device 106 may only be "communicatively located adjacent" to at least one interface of the hybrid device 102. In other words, with reference to the example of Figure 1, even though a packet transmitted by the legacy device 108 to the hybrid device 102 may pass through the legacy bridge 110 (another legacy device), it may not pass through another hybrid device. In other words, the packet route between the legacy device 108 and the hybrid device 102 does not comprise any intermediate hybrid devices. Therefore, the device detection unit 1 12 may receive the packet transmitted by the legacy device 102 without the predetermined tag, and may determine that the legacy device 108 is an adjacent legacy device with respect to the hybrid device 102. 
<!-- EPO <DP n="16"/>-->
 [0040] At stage B2, the hybrid device 104 determines that the legacy device 106 is an adjacent legacy device in response to detecting that the packet received from legacy device 106 does not comprise the predetermined tag. As described above in stages A and B l, a device detection unit (not shown) of the hybrid device 104 can detect that the packet transmitted by the legacy device 106 does not comprise the predetermined tag. The hybrid device 104 can determine that there are no other hybrid devices along the packet route between the hybrid device 104 and the legacy device 106. Consequently, the hybrid device 104 can identify the legacy device 106 as an "adjacent legacy device" with respect to the hybrid device 104 (e.g., with respect to at least one of the interfaces of the hybrid device 104). Furthermore, as described above in stage Bl, the hybrid device 104 may indicate (to the other hybrid devices 102 and 1 16 in the hybrid communication network 100) that the legacy device 106 is an adjacent legacy device with respect to the hybrid device 104 by sending an adjacent device identification message or another suitable message. Likewise, at stage B2, the hybrid device 1 16 can also determine (and announce) that the legacy device 106 is an adjacent legacy device in response to detecting that the packet received from legacy device 106 does not comprise the predetermined tag. </p><p id="p0043" num="0043">[0041] At stage C, the device detection unit 112 appends the predetermined tag to the packet and forwards the packet. As described above, the hybrid devices 102, 104, and 116 can be configured to append the predetermined tag (e.g., a VLAN tag) to all packets received at at least one of the interfaces of the hybrid device from an adjacent legacy device. Appending the predetermined tag to packets received from the adjacent legacy device can enable other hybrid devices to identify whether or not the legacy device is an adjacent legacy device. Tagging packets received from the legacy device can enable the other hybrid devices that subsequently detect the packet to determine whether the packet was forwarded by another hybrid device (e.g., a hybrid bridge or a hybrid communication device) or whether the packet was forwarded by a legacy bridge. For example, the device detection unit 1 12 may append the predetermined tag to the packet received from the legacy device 106 and may forward the packet to a destination hybrid device connected on a different network segment. In response to receiving the packet (that was tagged by the hybrid device 102), the destination hybrid device can determine that the hybrid device 102 is one of the forwarding devices along the route between the legacy device 106 and the destination hybrid device. 
<!-- EPO <DP n="17"/>-->
 [0042] At stage D, the device detection unit 112 identifies one or more target hybrid devices with which the legacy device 106 is an adjacent legacy device. For example, after the device detection unit 112 determines that the legacy device 106 is an adjacent legacy device with respect to the hybrid device 102, the device detection unit 112 can determine whether the legacy device 106 is an adjacent legacy device with respect to one or more other hybrid devices. In some implementations, the device detection unit 112 can listen for adjacent device identification messages transmitted by other hybrid devices in the hybrid communication network 100. In the example of Figure 1, the device detection unit 112 can detect adjacent device identification messages transmitted by the hybrid devices 104 and 116, and determine that the legacy device 106 is an adjacent legacy device with respect to the hybrid devices 104 and 116. The hybrid devices 104 and 116 that share a common adjacent legacy device (e.g., the legacy device 106) with the hybrid device 102 are referred to herein as "target hybrid devices." After the device detection unit 112 identifies the target hybrid devices 104 and 116, the device detection unit 112 can probe the adjacent legacy device 106 to determine the position of the adjacent legacy device 106 with respect to the hybrid devices 102, 104, and 116, and to determine whether a legacy bridge connects two or more of the hybrid devices 102, 104, and 116. </p><p id="p0044" num="0044">[0043] At stage E, the device detection unit 112 transmits a probe message to the adjacent legacy device 106. In some implementations, the device detection unit 112 can transmit the probe message to the adjacent legacy device 106 via the communication interface (of the hybrid device 102) on which the packet from the legacy device 106 was detected. The probe message can enable the device detection unit 112 to determine the position of the legacy device 106 in the hybrid communication network 100 vis-a-vis the hybrid devices 102, 104, and 116. More specifically, transmitting the probe message to the adjacent legacy device 106 can enable the device detection unit 112 to determine whether the hybrid device 102 and the target hybrid devices 104 and 116 are part of a common network segment, or part of different network segments coupled by a legacy bridge. In some implementations, the device detection unit 112 can transmit the probe message to the adjacent legacy device 106 as soon as the device detection unit 112 identifies the one or more target hybrid devices 104 and 116 that are also adjacent to the legacy device 106. In another implementation, the device detection unit 112 can communicate with the target hybrid devices 104 and 116 and can negotiate a communication schedule in which the probe messages should be transmitted to the adjacent legacy device 106. In another 
<!-- EPO <DP n="18"/>-->
 implementation, the device detection unit 1 12 can transmit a probe start message to the target hybrid devices 104 and 116 to indicate that probe messages will be transmitted to the adjacent legacy devices to discover the topology of the communication network 100. The device detection unit 112 can also transmit a probe stop message to indicate (to the target hybrid devices 104 and 1 16) that probe messages have been transmitted to all the adjacent legacy devices. In some implementations, the device detection unit 1 12 may identify multiple adjacent legacy devices and may transmit a unicast probe message to each identified adjacent legacy device. In another implementation, the device detection unit 112 can transmit a multi-cast probe message to two or more identified adjacent legacy devices. </p><p id="p0045" num="0045">[0044] At stage F, the target hybrid device 104 indicates whether the probe message transmitted to the adjacent legacy device 106 was detected at the target hybrid device 104. In some implementations, the device detection unit 1 12 can notify the target hybrid device 104 (e.g., via a notification message) when (e.g., a time instant at which) the probe message is transmitted (or is scheduled to be transmitted) to the adjacent legacy device 106. In one example, the device detection 1 12 can also notify the target hybrid device 104 how many probe messages are (or will be) transmitted to the adjacent legacy device 106. The target hybrid device 104 can wait for a predetermined time interval (configured based on the number of probe messages that are transmitted, the length of the probe messages, maximum allowable network delay, etc.) to receive the probe messages. In response to detecting one or more of the probe messages intended for the adjacent legacy device 106, the target hybrid device 104 can transmit an acknowledgment message to the initiating hybrid device 102 to indicate detection of the probe message(s). Alternately, if the target hybrid device 104 does not detect any of the probe messages, the target hybrid device 104 can indicate (e.g., after the predetermined time interval elapses) that none of the probe messages were detected. In another implementation, the hybrid device 102 can transmit one or more probe messages to the adjacent legacy device 106, wait for the predetermined time interval, and then query the target hybrid device 104 to determine whether the one or more probe messages were detected at the target hybrid device 104. In the example shown in Figure 1, the target hybrid device 104 can indicate that the probe message transmitted from the hybrid device 102 to the adjacent legacy device 106 was not detected at the target hybrid device 104 (e.g., since the target hybrid device 104 is located in a different network segment separated by a legacy bridge). The target hybrid device 1 16 can indicate that the probe 
<!-- EPO <DP n="19"/>-->
 message transmitted from the hybrid device 102 to the adjacent legacy device 106 was detected at the target hybrid device 116 (e.g., since the hybrid device 1 16 is located in the same network segment as the initiating hybrid device 102). </p><p id="p0046" num="0046">[0045] At stage G, the routing unit 1 14 determines whether the hybrid devices are located in different network segments connected by a legacy bridge based on whether the probe message was detected at the one or more target hybrid devices. In the example of Figure 1, the routing unit 1 14 can determine that the probe message transmitted to the adjacent legacy device 106 was not detected at the target hybrid device 104. This can indicate that the hybrid device 102 and the target hybrid device 104 are located in different network segments 120 and 122 that are connected by the legacy bridge 1 10. In the example of Figure 1, the routing unit 114 can determine that the probe message transmitted to the adjacent legacy device 106 was detected at the target hybrid device 1 16. Determining that the probe message transmitted to the adjacent legacy device 106 was detected at the target hybrid device 1 16 can indicate (e.g., to the routing unit 114) that there are no legacy bridges between the legacy device 106 and the hybrid device 1 16. Although not described in Figure 1, it is noted that each of the hybrid devices 102, 104, and 1 16 that identified the legacy device 106 as an adjacent legacy device can transmit a probe message to the legacy device 106, and then determine whether the probe message was detected by one or more of the other hybrid devices. This can enable the hybrid devices 102, 104, and 1 16 to determine, verify, and update the estimation of the topology of the hybrid communication network 100 (e.g., the location of the legacy bridges relative to the hybrid devices). Operations of the routing unit 114 determining the topology of the hybrid communication network 100 will further be described with reference to Figure 3. The routing unit 1 14 can then use the knowledge of the topology of the hybrid communication network 100 for efficient packet routing through bridged network segments. </p><p id="p0047" num="0047">[0046] Figure 2 and Figure 3 depict a flow diagram ("flow") 200 illustrating example operations for identifying legacy network devices in a hybrid communication network. The flow 200 begin at block 202 in Figure 2. </p><p id="p0048" num="0048">[0047] At block 202, a hybrid device detects a packet transmitted by a legacy device in a hybrid communication network. As described above, in one example, the hybrid device can be a hybrid bridge and the legacy device can be a legacy communication device. With reference to 
<!-- EPO <DP n="20"/>-->
 the example of Figure 1, the device detection unit 1 12 of the hybrid device 102 can detect a packet transmitted by the legacy device 106. As described above in stage A of Figure 1, the packet transmitted by the legacy device 102 can be a unicast packet intended for the hybrid device 102, a packet to be forwarded by the hybrid device 102 to another destination device, a multicast packet, a broadcast packet, etc. In some implementations, the legacy device 106 may transmit a test packet (e.g., comprising a NULL payload or a predetermined payload). In other implementations, the legacy device 106 may transmit a control packet or a data packet comprising control information and/or data intended for the destination device. The flow continues at block 204. </p><p id="p0049" num="0049">[0048] At block 204, it is determined whether the packet transmitted by the legacy device comprises a predetermined tag. For example, the device detection unit 112 can determine whether the packet (detected at block 202) comprises the predetermined tag. As described above in Figure 1, the hybrid devices can be configured to insert the predetermined tag into any packet received directly from an adjacent legacy device (i.e., without being routed by another hybrid device). The presence of the predetermined tag can indicate that there exist one or more other hybrid devices along the route between the legacy device 106 and the hybrid device 102. Alternately, the absence of the predetermined tag can indicate that the there are no hybrid devices along the route between the legacy device 106 and the hybrid device 102 (i.e., the legacy device 106 is an adjacent legacy device). If it is determined that the packet transmitted by the legacy device comprises the predetermined tag, the flow continues at block 206. Otherwise, the flow continues at block 208. </p><p id="p0050" num="0050">[0049] At block 206, it is determined that the legacy device and the hybrid device are located on distinct network segments connected by at least one other hybrid device. The flow 200 moves from block 204 to block 206 if the device detection unit 1 12 determines that the packet transmitted by the legacy device 106 comprises the predetermined tag. Because the received packet comprises the predetermined tag, the device detection unit 112 can determine that the packet was routed from the legacy device 106 to the hybrid device 102 via another intermediate hybrid device (e.g., that appended the predetermined tag to the packet). The device detection unit 1 12 can also determine that the hybrid device 102 would have directly received the packet from the legacy device 106 (e.g., without the predetermined tag) if the legacy device 106 and the 
<!-- EPO <DP n="21"/>-->
 hybrid device 102 were part of the same network segment. Thus, the device detection unit 112 can infer that the legacy device 106 and the hybrid device 102 are located on different network segments connected by one or more hybrid devices. In some implementations, the routing unit 1 14 of the hybrid device 102 can store (e.g., in a routing data structure) routing information associated with the legacy device 106. For example, the routing unit 1 14 can store an identifier associated with the legacy device 106, an identifier associated with the one or more intermediate hybrid devices (if known), an interface (or port) on which the packet from the legacy device 106 was detected, etc. The routing unit 1 14 can use this routing information to route subsequent packets to the legacy device 106. From block 206, the flow ends. </p><p id="p0051" num="0051">[0050] At block 208, the hybrid device determines that the legacy device is adjacent to the hybrid device. The flow 200 moves from block 204 to block 208 if the device detection unit 1 12 determines that the packet transmitted by the legacy device 106 does not comprise the predetermined tag. Because the received packet does not comprise the predetermined tag, the device detection unit 1 12 can infer that the packet was directly transmitted from the legacy device 106 to the hybrid device 102 or that the packet was routed from the legacy device 106 to the hybrid device 102 via one or more legacy bridges. In other words, because the received packet does not comprise the predetermined tag, the device detection unit 1 12 can determine that the route between the hybrid device 102 and the legacy device 106 does not comprise any other hybrid devices. It is also noted that if the device detection unit 112 detects the packet from the legacy device 106 at one of the multiple communication interfaces of the hybrid device 102, the legacy device 106 can be considered to be an adjacent legacy device with respect to that communication interface of the hybrid device 102. In other words, the device detection unit 1 12 can determine whether the legacy device 106 is adjacent to the hybrid device 102 on an interface-by-interface basis. In some implementations, the routing unit 106 may also store an identifier associated with the legacy device 106 and an indication of the interface/port of the hybrid device 102 on which the packet was detected. After the device detection unit 112 identifies the legacy device 106 as an adjacent legacy device with respect to the hybrid device 102 (e.g., with respect to at least one communication interface of the hybrid device 102), the flow continues at block 210. 
<!-- EPO <DP n="22"/>-->
 [0051] At block 210, a notification message is broadcast to other hybrid devices to indicate that the legacy device is adjacent to the hybrid device. For example, as described above with reference to Figure 1, the device detection unit 1 12 can broadcast an adjacent device identification message (or another suitable message) to indicate that the legacy device 106 is an adjacent legacy device with respect to the hybrid device 102. The adjacent device identification message can comprise an identifier associated with the adjacent legacy device 106, an identifier associated with the hybrid device 102, an identifier associated with the corresponding interface of the hybrid device 102 on which the packet was detected, etc. The flow continues at block 212. </p><p id="p0052" num="0052">[0052] At block 212, one or more target hybrid devices in the hybrid communication network that are adjacent to the legacy device are identified based on detecting one or more corresponding notification messages. For example, on determining that the legacy device 106 is adjacent to the hybrid device 102, the device detection unit 1 12 can attempt to identify one or more target hybrid devices for which the legacy device 106 is an adjacent legacy device. For example, the device detection unit 1 12 can listen for and can receive one or more adjacent device identification messages from corresponding one or more hybrid devices in the hybrid communication network 100. The device detection unit 1 12 can read the multiple adjacent device identification messages and can identify the one or more target hybrid devices for which the legacy device 106 is an adjacent legacy device. With reference to the example of Figure 1, the device detection unit 112 determines that the legacy device 106 is also adjacent to at least one of the interfaces of the target hybrid devices 104 and 116. The flow continues at block 214 in Figure 3, where the device detection unit 112 can probe the adjacent legacy device 106 to determine whether a legacy bridge couples the hybrid device 102 with the hybrid devices 104 and 116. </p><p id="p0053" num="0053">[0053] At block 214, a probe message is transmitted to the adjacent legacy device. For example, the device detection unit 1 12 can transmit the probe message to the adjacent legacy device 106. As will be further described below, transmitting the probe message to the adjacent legacy device 106 can enable the device detection unit 112 to determine whether the hybrid device 102 and the one or more target hybrid devices 104 and 116 are part of a common network segment or part of different network segments coupled by a legacy bridge (e.g., based on 
<!-- EPO <DP n="23"/>-->
 whether the one or more target hybrid devices 104 and 1 16 detected the probe message). In some implementations, the device detection unit 112 can transmit the probe message to the adjacent legacy device 106 via the communication interface (of the hybrid device 102) on which the packet from the legacy device 106 was detected (at block 202). The flow continues at block 216. </p><p id="p0054" num="0054">[0054] At block 216, a loop is initiated for each of the one or more target hybrid devices in the hybrid communication network. For example, the device detection unit 112 can initiate the loop to determine whether the probe message transmitted to the adjacent legacy device 106 was detected by the one or more target hybrid devices 104 and 1 16, as will be described below. The flow continues at block 218. </p><p id="p0055" num="0055">[0055] At block 218, it is determined whether the probe message was detected by the target hybrid device. For example, the device detection unit 1 12 can determine whether the probe message (transmitted to the adjacent legacy device 106 at block 214) was detected at the target hybrid device 104. As described above in Figure 1, in some implementations, the device detection unit 112 can query the target hybrid device 104 to determine whether the probe message transmitted to the legacy device 106 was detected at the target hybrid device 104. The device detection unit 1 12 can receive a response message that indicates whether the probe message was detected at the target hybrid device 104. In another implementation, the target hybrid device 104 may be configured to automatically transmit an indication of whether the probe message was detected at the target hybrid device 104. For example, on detecting the probe message, the target hybrid device 104 may automatically transmit an indication that the probe message was detected at the target hybrid device 104. As another example, if the probe message is not detected within a predetermined time interval, the target hybrid device 104 may indicate that the probe message was not detected at the target hybrid device 104. In some implementations, the communication interfaces of the target hybrid devices 104 and 1 16 may be configured to snoop, receive, and process unicast packets that are intended for the legacy device 106. It is noted that in some implementations, whether the target hybrid devices 104 and 116 detect the probe message transmitted by the hybrid device 102 may depend on the learning capabilities and learning behavior of the legacy bridge 110. For example, after the legacy bridge 1 10 "learns" that legacy device 106 is associated with the network segment 120, the legacy 
<!-- EPO <DP n="24"/>-->
 bridge 110 may not forward unicast packets intended for the legacy device 106 from the network segment 120 onto the network segment 122. Consequently, the target hybrid device 104 may not detect the probe messages transmitted from the hybrid device 102 to the legacy device 106. If it is determined that the probe message intended for the adjacent legacy device 106 was detected at the target hybrid device 104, the flow continues at block 222. Otherwise, the flow continues at block 220. </p><p id="p0056" num="0056">[0056] At block 220, it is determined that the hybrid device and the target hybrid device are located on different network segments connected by a legacy bridge. The flow 200 moves from block 218 to block 220 if the device detection unit 1 12 determines that the probe message was not detected at the target hybrid device 104. When the hybrid device 102 transmits the probe message to the adjacent legacy device 106, the legacy bridge 1 10 connecting the network segments 120 and 122 may receive the probe message. The legacy bridge 1 10 can determine (e.g., based on forwarding tables, based on previously learned topology, etc.) that the legacy device 106 and the hybrid device 102 are connected to the same port (e.g., to the same interface) of the legacy bridge 110. For example, the legacy bridge 110 may receive the probe message on port 1, determine that the legacy device 106 is also connected on port 1, and may therefore not forward the probe message (e.g., to another port associated with the network segment 122). The hybrid device 104 connected to the network segment 122 may therefore not detect the probe message transmitted from the hybrid device 102 to the legacy device 106. As described above, the probe message can be transmitted to the legacy device 106 via the same interface of the hybrid device 102 on which the packet was received from the legacy device. Based on knowledge that the probe message transmitted to the legacy device 106 was received by the legacy device 106 but was not detected by the target hybrid device 104, the routing unit 114 can infer that the target hybrid device 104 is not connected to that interface of the hybrid device 102. In other words, the routing unit 1 14 can infer that the hybrid device 102 and the target hybrid device 104 are located on different network segments connected by at least one legacy bridge (e.g., the legacy bridge 110). The flow continues at block 224. </p><p id="p0057" num="0057">[0057] At block 222, it is determined that the target hybrid device and the legacy device are located on a common network segment. The flow 200 moves from block 218 to block 222 if the device detection unit 1 12 determines that the probe message was detected by the target hybrid 
<!-- EPO <DP n="25"/>-->
 device 116. In the example of Figure 1, the target hybrid device 1 16 can detect probe messages transmitted from the hybrid device 102 to the legacy device 106. This can indicate that the legacy device 106 and the target hybrid device 1 16 are located on a common network segment 120 and that the target hybrid device 116 and the legacy device 106 are not connected by a legacy bridge. Likewise, if the hybrid device 102 detects probe messages transmitted from the target hybrid device 116 to the legacy device 106, this can indicate that the legacy device 106 and the hybrid device 102 are located on a common network segment 120. In other words, the routing unit 1 14 can determine that the hybrid device 102 and the legacy device 106 are not connected by a legacy bridge. The flow continues at block 224. </p><p id="p0058" num="0058">[0058] At block 224, it is determined whether there exist other target hybrid devices in the hybrid communication network. If the device detection unit 112 determines that there exist other hybrid devices in the hybrid communication network, the flow loops back to block 216, where the device detection unit 112 can identify the next target hybrid device and can determine whether the probe message intended for the adjacent legacy device 106 was detected at the next target hybrid device. Otherwise, the flow continues at block 226. It is noted that although Figure 3 depicts the target hybrid devices being analyzed sequentially (in blocks 218 - 224), in other embodiments, the target hybrid devices can be analyzed simultaneously. </p><p id="p0059" num="0059">[0059] At block 226, the communication network topology is determined and is used to route packets from the hybrid device. In some implementations, the routing unit 1 14 can determine the communication network topology based on whether probe messages transmitted by the hybrid device 102 were detected at each of the target hybrid devices 104 and 1 16 in the hybrid communication network 100. The routing unit 114 can also determine the communication network topology based on detecting packets from the legacy devices, transmitting and detecting probe messages, detecting broadcast announcement messages from other hybrid devices, etc. For example, the hybrid device 102 can store an indication of one or more legacy devices that were deemed to be adjacent to each of the hybrid devices 102, 104, and 116 in the hybrid communication network 100. The initiating hybrid device 102 can also store an indication of whether probe messages transmitted to the one or more adjacent legacy devices were detected by each of the target hybrid devices 104 and 116. Accordingly, the routing unit 114 can infer the topology of the hybrid communication network 100. In some implementations, the hybrid 
<!-- EPO <DP n="26"/>-->
 device 102 can also listen for probe messages transmitted by other hybrid devices 104 and 116 to the adjacent legacy device 106. Configuring each of the hybrid devices 102, 104, and 1 16 adjacent to a particular legacy device 106 to transmit probe messages can enable the hybrid devices 102, 104, and 1 16 to verify and to correct (if necessary) their estimation of the topology of the hybrid communication network 100. </p><p id="p0060" num="0060">[0060] As part of the topology of the hybrid communication network 100, the routing unit 1 14 can determine the position of legacy bridges in the hybrid communication network 100 with respect to each of the hybrid devices 102, 104, and 1 16. For example, the routing unit 114 can identify network segments to which each of the legacy devices and hybrid devices belong, determine whether the hybrid devices 102, 104, and 116 are located on the same network segment, determine whether the network segments are connected by legacy bridges or hybrid bridges, etc. The routing unit 114 can also identify interfaces of the hybrid devices 102, 104, 106 to which the legacy devices 106 and 108 are connected, interfaces of the hybrid devices 102, 104, 106 to which the other hybrid devices are connected, etc. Referring to the example of Figure 1, the routing unit 114 can determine that at least one communication interface of the hybrid devices 102 and 1 16 are connected to the same network segment 120. The routing unit 1 14 can also determine that the communication interfaces of hybrid devices 102 and 104 are connected to different network segments - connected via the legacy bridge 110. </p><p id="p0061" num="0061">[0061] Additionally, the routing unit 114 can also broadcast the estimated topology of the hybrid communication network 100 to the other hybrid devices 104 and 1 16. Based on the estimated communication network topology, the routing unit 114 can select an appropriate packet route for transmitting a packet to a destination device through the hybrid communication network 100. Furthermore, if there are multiple available packet routes to the destination device, the routing unit 1 14 can use the communication network topology information to identify the preferred (or most efficient) packet route for routing the packet to the destination device. When selecting the preferred packet route, the routing unit 1 14 can take various factors into consideration including, whether the source and the destination hybrid devices are located on different network segments, whether any of the packet routes between the source and the destination hybrid devices comprises one or more legacy bridges, whether a packet route that does not comprise any legacy bridges is available, and whether the legacy bridges will receive 
<!-- EPO <DP n="27"/>-->
 the packet on a previously determined interface/port. For example, if one of multiple packet routes between a source hybrid device and a destination hybrid device is not in accordance with the communication network topology previously learned by the legacy bridge, the source hybrid device can determine not to select that packet route to minimize/prevent confusion of the legacy bridge. From block 226, the flow ends. </p><p id="p0062" num="0062">[0062] It should be understood that Figures 1 - 3 are examples meant to aid in understanding embodiments and should not be used to limit embodiments or limit scope of the claims. Embodiments may perform additional operations, fewer operations, operations in a different order, operations in parallel, and some operations differently. It is noted that in some implementations, to enable the hybrid devices to distinguish between a single network segment with a large propagation delay and two network segments coupled by a legacy bridge, the length of probe message transmitted by the hybrid devices can be the maximum allowable packet size. After the initiating hybrid device 102 transmits the probe message to the adjacent legacy device 106, the target hybrid device 104 can wait to detect the probe message for a predetermined time delay (e.g., a sum of a maximum packet transmission time interval and a maximum propagation delay time interval). After the predetermined time delay elapses, the target hybrid device 104 can indicate whether or not the probe message was detected </p><p id="p0063" num="0063">[0063] In some implementations, the hybrid device 102 can transmit multiple probe messages to the same adjacent legacy device 106 and can determine whether some/all or none of the probe messages were detected by the one or more other target hybrid devices 104 and 1 16. The hybrid device 102 and the target hybrid device 104 can be considered part of distinct network segments coupled by the legacy bridge 1 10 if the target hybrid device 104 does not detect any of the probe messages transmitted to the adjacent legacy device 106. Transmitting multiple probe messages can minimize the errors due to network delays, network congestion, etc. </p><p id="p0064" num="0064">[0064] It is also noted that in some implementations, the network topology discovery operations described herein may be executed in conjunction with one or more other network topology discovery techniques and/or other route selection techniques. For example, network topology discovery operations described herein may be executed in conjunction with the Bridge Spanning Tree Protocol (STP). As another example, the network topology discovery operations may be executed in conjunction with load level analysis techniques. In some implementations, a 
<!-- EPO <DP n="28"/>-->
 hybrid device 102 can analyze communication load levels at each of the interfaces to which the hybrid device 102 is connected to a network segment. The hybrid device can broadcast the determined communication load levels associated with each of the interfaces to other hybrid devices in the hybrid communication network 100 and can similarly receive communication load level information from the other hybrid devices. The hybrid device 102 can determine whether the communication load level on a particular network segment is approximately equal to the communication load level as seen by all the other hybrid devices connected to that network segment. In some implementations, one of the hybrid devices can artificially increase the communication load level on the network segment (e.g., by transmitting one or more test messages) at predetermined time instants and can determine whether the increase in the communication load level was detected at other hybrid devices. The hybrid devices that detect a corresponding increase in the communication load levels can be considered part of the same network segment. </p><p id="p0065" num="0065">[0065] As another example, the network topology discovery operations may be executed in conjunction with analysis of dropped packets. In some implementations, the legacy bridges may be configured to drop any VLAN tagged packet with a canonical format indicator (CFI) flag set to "1." To detect the presence of a legacy bridge, an initiating hybrid device 102 can transmit test messages comprising a VLAN tag and the CFI flag set to "1" to a destination hybrid device 104. The initiating hybrid device 102 can also transmit test messages comprising the VLAN tag and the CFI flag set to "0" to the destination hybrid device 104. If the initiating hybrid device 102 determines that the destination hybrid device 104 detected the test messages with the CFI flag set to "0" and did not detect the test messages with the CFI flag set to "1", the initiating hybrid device 102 can infer the presence of a legacy bridge between the initiating hybrid device 102 and the destination hybrid device 104. </p><p id="p0066" num="0066">[0066] Lastly, it is noted that a hybrid device can be any suitable network device of a "first class of communication devices" that comprises multiple communication interfaces and that is configured to operate across multiple networking technologies. A legacy or conventional device can be any suitable network device of a "second class of communication devices" that comprises a single communication interface and that is configured to operate across a single networking technology. 
<!-- EPO <DP n="29"/>-->
 [0067] Embodiments may take the form of an entirely hardware embodiment, an entirely software embodiment (including firmware, resident software, micro-code, etc.) or an embodiment combining software and hardware aspects that may all generally be referred to herein as a "circuit," "module" or "system." Furthermore, embodiments of the inventive subject matter may take the form of a computer program product embodied in any tangible medium of expression having computer usable program code embodied in the medium. The described embodiments may be provided as a computer program product, or software, that may include a machine-readable medium having stored thereon instructions, which may be used to program a computer system (or other electronic device(s)) to perform a process according to embodiments, whether presently described or not, since every conceivable variation is not enumerated herein. A machine-readable medium includes any mechanism for storing or transmitting information in a form (e.g., software, processing application) readable by a machine (e.g., a computer). A machine-readable medium may be a machine-readable storage medium, or a machine-readable signal medium. A machine-readable storage medium may include, for example, but is not limited to, magnetic storage medium (e.g., floppy diskette); optical storage medium (e.g., CD- ROM); magneto-optical storage medium; read only memory (ROM); random access memory (RAM); erasable programmable memory (e.g., EPROM and EEPROM); flash memory; or other types of tangible medium suitable for storing electronic instructions. A machine-readable signal medium may include a propagated data signal with computer readable program code embodied therein, for example, an electrical, optical, acoustical, or other form of propagated signal (e.g., carrier waves, infrared signals, digital signals, etc.). Program code embodied on a machine- readable signal medium may be transmitted using any suitable medium, including, but not limited to, wireline, wireless, optical fiber cable, RF, or other communications medium. </p><p id="p0067" num="0067">[0068] Computer program code for carrying out operations of the embodiments may be written in any combination of one or more programming languages, including an object oriented programming language such as Java, Smalltalk, C++ or the like and conventional procedural programming languages, such as the "C" programming language or similar programming languages. The program code may execute entirely on a user's computer, partly on the user's computer, as a stand-alone software package, partly on the user's computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario, the remote computer may be connected to the user's computer through any type of network, including a 
<!-- EPO <DP n="30"/>-->
 local area network (LAN), a personal area network (PAN), or a wide area network (WAN), or the connection may be made to an external computer (for example, through the Internet using an Internet Service Provider) </p><p id="p0068" num="0068">[0069] Figure 4 is a block diagram of one embodiment of an electronic device 400 including a mechanism for discovery of legacy devices and bridges in a hybrid communication network. In some implementations, the electronic device 400 may be one of a laptop computer, a netbook, a mobile phone, a powerline communication device, a personal digital assistant (PDA), or other electronic systems comprising a hybrid communication unit configured to exchange communications across multiple communication networks (which form the hybrid communication network). The electronic device 400 includes a processor unit 402 (possibly including multiple processors, multiple cores, multiple nodes, and/or implementing multithreading, etc.). The electronic device 400 includes a memory unit 406. The memory unit 406 may be system memory (e.g., one or more of cache, SRAM, DRAM, zero capacitor RAM, Twin Transistor RAM, eDRAM, EDO RAM, DDR RAM, EEPROM, NRAM, RRAM, SONOS, PRAM, etc.) or any one or more of the above already described possible realizations of machine- readable media. The electronic device 400 also includes a bus 410 (e.g., PCI, ISA, PCI-Express, HyperTransport®, InfiniBand®, NuBus, AHB, AXI, etc.), and network interfaces 404 that include at least one of a wireless network interface (e.g., a WLAN interface, a Bluetooth® interface, a WiMAX interface, a ZigBee® interface, a Wireless USB interface, etc.) and a wired network interface (e.g., an Ethernet interface, a powerline communication interface, etc.). In some implementations, the electronic device 400 may support multiple network interfaces - each of which is configured to couple the electronic device 400 to a different communication network. </p><p id="p0069" num="0069">[0070] The electronic device 400 also includes a communication unit 408. The communication unit 408 comprises a device detection unit 412 and a routing unit 414. As described above in Figures 1 - 3, the communication unit 408 implements functionality to determine whether a hybrid communication network that comprises the electronic device 400 also comprises one or more legacy devices (also known as conventional devices). The communication unit 408 can also determine whether the electronic device 400 and one or more other hybrid devices in the hybrid communication network are located on different network segments coupled by a legacy learning bridge (also known as a conventional learning bridge). 
<!-- EPO <DP n="31"/>-->
 Any one of these functionalities may be partially (or entirely) implemented in hardware and/or on the processor unit 402. For example, the functionality may be implemented with an application specific integrated circuit, in logic implemented in the processor unit 402, in a coprocessor on a peripheral device or card, etc. Further, realizations may include fewer or additional components not illustrated in Figure 4 (e.g., video cards, audio cards, additional network interfaces, peripheral devices, etc.). The processor unit 402, the memory unit 406, and the network interfaces 406 are coupled to the bus 410. Although illustrated as being coupled to the bus 410, the memory unit 406 may be coupled to the processor unit 402. </p><p id="p0070" num="0070">[0071] While the embodiments are described with reference to various implementations and exploitations, it will be understood that these embodiments are illustrative and that the scope of the inventive subject matter is not limited to them. In general, a mechanism for discovery of conventional devices and bridges in a hybrid communication network as described herein may be implemented with facilities consistent with any hardware system or hardware systems. Many variations, modifications, additions, and improvements are possible. </p><p id="p0071" num="0071">[0072] Plural instances may be provided for components, operations, or structures described herein as a single instance. Finally, boundaries between various components, operations, and data stores are somewhat arbitrary, and particular operations are illustrated in the context of specific illustrative configurations. Other allocations of functionality are envisioned and may fall within the scope of the inventive subject matter. In general, structures and functionality presented as separate components in the exemplary configurations may be implemented as a combined structure or component. Similarly, structures and functionality presented as a single component may be implemented as separate components. These and other variations, modifications, additions, and improvements may fall within the scope of the inventive subject matter. 
</p></description><claims mxw-id="PCLM44851553" ref-ucid="WO-2012118531-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="32"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method comprising: </claim-text><claim-text> detecting, at a first network bridge device of a first class of network devices, that one or more packets originating from a second network device of a second class of network devices that are forwarded by the first network bridge device do not include a predetermined tag; </claim-text><claim-text> determining, at the first network bridge device, that the second network device of the second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network bridge device based, at least in part, on said detecting that the one or more packets originating from the second network device do not include the predetermined tag; and inserting, at the first network bridge device, the predetermined tag in the one or more packets originating from the second network device. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, further comprising: </claim-text><claim-text> transmitting a probe message to the second network device of the second class of network devices; </claim-text><claim-text> determining whether the probe message was detected by a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and determining that a first network segment associated with the first network bridge device is communicatively coupled to a second network segment associated with the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the target network device. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 1, further comprising: </claim-text><claim-text> transmitting a probe message to the second network device of the second class of network devices; <!-- EPO <DP n="33"/>--> determining whether the probe message was detected by a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and </claim-text><claim-text>determining that the second network device and the target network device are associated with a common network segment in response to determining that the probe message was detected by the target network device. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>The method of claim 1, wherein said determining that the second network device of the second class of network devices is communicatively located adjacent to at least one of the plurality of network interfaces of the first network bridge device further comprises: providing, to one or more other network devices of the first class of network devices, an indication that the first network bridge device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>A method comprising: </claim-text><claim-text>determining that at least one of a plurality of network interfaces of a first network device of a first class of network devices is communicatively located adjacent to a second network device of a second class of network devices in a communication network based, at least in part, on detecting that one or more packets received at the at least one of the plurality of network interfaces from the second network device do not comprise a predetermined tag; </claim-text><claim-text>transmitting, via the at least one of the plurality of network interfaces of the first network device, a probe message to the second network device of the second class of network devices; </claim-text><claim-text>determining whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and </claim-text><claim-text>determining that a first network segment associated with the at least one of the plurality of network interfaces of the first network device is communicatively coupled to a second network segment associated with the at least one of the plurality of <!-- EPO <DP n="34"/>--> network interfaces of the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the target network device. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>The method of claim 5, wherein the first network device and the target network device are network bridge devices of the first class of network devices. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>The method of claim 5, further comprising: </claim-text><claim-text>determining that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>The method of claim 5, wherein said determining that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices in the communication network comprises: </claim-text><claim-text>receiving, at the at least one of the plurality of network interfaces of the first network device, the one or more packets from the second network device of the second class of network devices; </claim-text><claim-text>reading the one or more packets to determine whether the one or more packets received from the second network device of the second class of network devices comprises the predetermined tag; and </claim-text><claim-text>determining that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices in response to determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag. <!-- EPO <DP n="35"/>--> </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 5, wherein in response to determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag, the method further comprises: </claim-text><claim-text> determining whether the one or more packets received from the second network device of the second class of network devices are to be forwarded to a destination device of the communication network; </claim-text><claim-text> in response to determining that the one or more packets received from the second network device of the second class of network devices are to be forwarded to the destination device of the communication network, </claim-text><claim-text> inserting the predetermined tag in the one or more packets received from the second network device of the second class of network devices; and forwarding the one or more packets comprising the predetermined tag to the destination device. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 5, further comprising: </claim-text><claim-text> providing, to at least the target network device of the communication network, an indication that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1. The method of claim 5, further comprising identifying the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices in response to detecting a message from the target network device that indicates that the at least one of the plurality of network interfaces of the target network device is communicatively located adjacent to the second network device of the second class of network devices. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method of claim 5, wherein said transmitting the probe message to the second network device of the second class of network devices further comprises: <!-- EPO <DP n="36"/>--> identifying the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; negotiating, with the target network device, a communication schedule in which to probe the second network device of the second class of network devices; and transmitting the probe message to the second network device of the second class of network devices in accordance with the communication schedule. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method of claim 5, wherein said transmitting the probe message to the network device of the second class of network devices further comprises: </claim-text><claim-text> determining an address of the second network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and </claim-text><claim-text> transmitting the probe message from the first network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method of claim 13, wherein the address associated with the second network device comprises a media access control (MAC) address associated with the second network device. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. A network device comprising: </claim-text><claim-text> a plurality of network interfaces; and </claim-text><claim-text> a device detection unit coupled with the one or more network interfaces, the device detection unit operable to: </claim-text><claim-text> determine that at least one of the plurality of network interfaces of the network device of a first class of network devices is communicatively located adjacent to a second network device of a second class of network devices in a communication network based, at least in part, on detecting that one or more packets received at the at least one of the plurality of network <!-- EPO <DP n="37"/>--> interfaces from the second network device do not comprise a predetermined tag; </claim-text><claim-text> transmit, via the at least one of the plurality of network interfaces of the network device, a probe message to the second network device of the second class of network devices; </claim-text><claim-text> determine whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and </claim-text><claim-text> determine that a first network segment associated with the at least one of the plurality of network interfaces of the network device is communicatively coupled to a second network segment associated with the at least one of the plurality of network interfaces of the target network device via a network bridge device of the second class of network devices in response to the device detection unit determining that the probe message was not detected by the target network device. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The network device of claim 15, wherein the device detection unit is further operable to: determine that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to the device detection unit determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The network device of claim 15, wherein in response to the device detection unit determining that the one or more packets received from the second network device of the second class of network devices do not comprise the predetermined tag, the device detection unit is further operable to: </claim-text><claim-text> determine whether the one or more packets received from the second network device of the second class of network devices are to be forwarded to a destination device of the communication network; <!-- EPO <DP n="38"/>--> in response to the device detection unit determining that the one or more packets received from the second network device of the second class of network devices are to be forwarded to the destination device of the communication network, insert the predetermined tag in the one or more packets received from the second network device of the second class of network devices; and </claim-text><claim-text> forward the one or more packets comprising the predetermined tag to the destination device. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The network device of claim 15, wherein the device detection unit operable to transmit the probe message to the second network device of the second class of network devices further comprises the device detection unit operable to: </claim-text><claim-text> identify the at least one of the plurality of network interfaces of the target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; negotiate, with the target network device, a communication schedule in which to probe the second network device of the second class of network devices; and transmit the probe message to the second network device of the second class of network devices in accordance with the communication schedule. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The network device of claim 15, wherein the device detection unit operable to transmit the probe message to the network device of the second class of network devices further comprises the device detection unit operable to: </claim-text><claim-text> determine an address of the second network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and </claim-text><claim-text> transmit the probe message from the network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. <!-- EPO <DP n="39"/>--> </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. One or more machine-readable storage media having instructions stored therein, which when executed by one or more processors causes the one or more processors to perform operations that comprise: </claim-text><claim-text> detecting, at a first network device of a first class of network devices, that one or more packets originating from a second network device of a second class of network devices that are forwarded by the first network device do not include a predetermined tag; </claim-text><claim-text> determining that the second network device of the second class of network devices is communicatively located adjacent to at least one of a plurality of network interfaces of the first network device based, at least in part, on said operation of detecting that the one or more packets originating from the second network device do not include the predetermined tag; </claim-text><claim-text> inserting the predetermined tag in the one or more packets originating from the second network device; </claim-text><claim-text> transmitting, via the at least one of the plurality of network interfaces of the first network device, a probe message to the second network device of the second class of network devices; </claim-text><claim-text> determining whether the probe message was detected by at least one of a plurality of network interfaces of a target network device of the first class of network devices that is communicatively located adjacent to the second network device of the second class of network devices; and </claim-text><claim-text> determining that a first network segment associated with the at least one of the plurality of network interfaces of the first network device is communicatively coupled to a second network segment associated with the at least one of the plurality of network interfaces of the target network device via a network bridge device of the second class of network devices in response to determining that the probe message was not detected by the at least one of the plurality of network interfaces of the target network device. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The machine-readable storage media of claim 20, wherein the operations further comprise: <!-- EPO <DP n="40"/>--> determining that the second network device of the second class of network devices and the at least one of the plurality of network interfaces of the target network device are associated with a common network segment, in response to said operation of determining that the probe message was detected by the at least one of the plurality of network interfaces of the target network device. </claim-text><claim-text>The machine-readable storage media of claim 20, wherein the operations further comprise: </claim-text><claim-text>providing, to at least the target network device of the communication network, an indication that the at least one of the plurality of network interfaces of the first network device of the first class of network devices is communicatively located adjacent to the second network device of the second class of network devices. </claim-text><claim-text>The machine-readable storage media of claim 20, wherein said operation of transmitting the probe message to the network device of the second class of network devices further comprises: </claim-text><claim-text>determining an address of the second network device of the second class of network devices based, at least in part, on a source address associated with the one or more packets received from the second network device of the second class of network devices; and </claim-text><claim-text>transmitting the probe message from the first network device of the first class of network devices to the source address associated with the second network device of the second class of network devices. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
