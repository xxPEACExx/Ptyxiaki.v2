<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681831-A1" country="EP" doc-number="2681831" kind="A1" date="20140108" family-id="46718512" file-reference-id="283028" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585673" ucid="EP-2681831-A1"><document-id><country>EP</country><doc-number>2681831</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12752935-A" is-representative="NO"><document-id mxw-id="PAPP154847865" load-source="docdb" format="epo"><country>EP</country><doc-number>12752935</doc-number><kind>A</kind><date>20120127</date><lang>EN</lang></document-id><document-id mxw-id="PAPP196399990" load-source="docdb" format="original"><country>EP</country><doc-number>12752935.2</doc-number><date>20120127</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140557898" ucid="US-201113169429-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113169429</doc-number><kind>A</kind><date>20110627</date></document-id></priority-claim><priority-claim mxw-id="PPC140550932" ucid="US-201161447331-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161447331</doc-number><kind>P</kind><date>20110228</date></document-id></priority-claim><priority-claim mxw-id="PPC140550645" ucid="US-2012022829-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012022829</doc-number><kind>W</kind><date>20120127</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989316215" load-source="docdb">H02K  13/00        20060101AFI20120919BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1772448877" load-source="docdb" scheme="CPC">H02P  21/34        20160201 LI20170816BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1772448878" load-source="docdb" scheme="CPC">H02P  21/32        20160201 LI20170816BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1976550931" load-source="docdb" scheme="CPC">H02P  21/16        20160201 LI20160202BHEP        </classification-cpc><classification-cpc mxw-id="PCL2125073522" load-source="docdb" scheme="CPC">H02P   6/20        20130101 FI20141009BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132361652" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR KALIBRIERUNG EINES ROTORPOSITIONSVERSATZES EINES ELEKTROMOTORS</invention-title><invention-title mxw-id="PT132361653" lang="EN" load-source="patent-office">METHOD AND SYSTEM FOR CALIBRATING ROTOR POSITION OFFSET OF AN ELECTRIC MOTOR</invention-title><invention-title mxw-id="PT132361654" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME POUR CALIBRER UN DÉCALAGE DE POSITION DE ROTOR DE MOTEUR ÉLECTRIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919507016" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DEERE &amp; CO</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919525447" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DEERE &amp; COMPANY</last-name></addressbook></applicant><applicant mxw-id="PPAR919012225" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Deere &amp; Company</last-name><iid>101150216</iid><address><street>One John Deere Place</street><city>Moline, IL 61265</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919534940" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WU LONG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919523375" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WU, LONG</last-name></addressbook></inventor><inventor mxw-id="PPAR919018777" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WU, LONG</last-name><address><street>2824 37th Avenue South</street><city>Fargo ND 58104</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919533388" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SHAW ROBERT</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919523011" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SHAW, ROBERT</last-name></addressbook></inventor><inventor mxw-id="PPAR919009700" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>SHAW, ROBERT</last-name><address><street>1622 42nd Avenue South</street><city>Moorhead MN 56560</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919012782" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Holst, Sönke</last-name><iid>101371590</iid><address><street>John Deere GmbH &amp; Co. KG Mannheim Regional Center Global Intellectual Property Services John-Deere-Strasse 70</street><city>68163 Mannheim</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012022829-W"><document-id><country>US</country><doc-number>2012022829</doc-number><kind>W</kind><date>20120127</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118579-A1"><document-id><country>WO</country><doc-number>2012118579</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549832232" load-source="docdb">AL</country><country mxw-id="DS549911242" load-source="docdb">AT</country><country mxw-id="DS549832233" load-source="docdb">BE</country><country mxw-id="DS549822932" load-source="docdb">BG</country><country mxw-id="DS549750689" load-source="docdb">CH</country><country mxw-id="DS549828529" load-source="docdb">CY</country><country mxw-id="DS549911243" load-source="docdb">CZ</country><country mxw-id="DS549832238" load-source="docdb">DE</country><country mxw-id="DS549828558" load-source="docdb">DK</country><country mxw-id="DS549828559" load-source="docdb">EE</country><country mxw-id="DS549751800" load-source="docdb">ES</country><country mxw-id="DS549822933" load-source="docdb">FI</country><country mxw-id="DS549822938" load-source="docdb">FR</country><country mxw-id="DS549832239" load-source="docdb">GB</country><country mxw-id="DS549828560" load-source="docdb">GR</country><country mxw-id="DS549832240" load-source="docdb">HR</country><country mxw-id="DS549911244" load-source="docdb">HU</country><country mxw-id="DS549750690" load-source="docdb">IE</country><country mxw-id="DS549828561" load-source="docdb">IS</country><country mxw-id="DS549822939" load-source="docdb">IT</country><country mxw-id="DS549828566" load-source="docdb">LI</country><country mxw-id="DS549828039" load-source="docdb">LT</country><country mxw-id="DS549754909" load-source="docdb">LU</country><country mxw-id="DS549828040" load-source="docdb">LV</country><country mxw-id="DS549828041" load-source="docdb">MC</country><country mxw-id="DS549754910" load-source="docdb">MK</country><country mxw-id="DS549754911" load-source="docdb">MT</country><country mxw-id="DS549911245" load-source="docdb">NL</country><country mxw-id="DS549751809" load-source="docdb">NO</country><country mxw-id="DS549750691" load-source="docdb">PL</country><country mxw-id="DS549828046" load-source="docdb">PT</country><country mxw-id="DS549911246" load-source="docdb">RO</country><country mxw-id="DS549828047" load-source="docdb">RS</country><country mxw-id="DS549750692" load-source="docdb">SE</country><country mxw-id="DS549822940" load-source="docdb">SI</country><country mxw-id="DS549751810" load-source="docdb">SK</country><country mxw-id="DS549750697" load-source="docdb">SM</country><country mxw-id="DS549754912" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99830574" ref-ucid="WO-2012118579-A1" lang="EN" load-source="patent-office"><p num="0000">While enforcing a fake position in the data processing system (120) and applying a zero direct-axis current command, positive and negative quadrature-axis current commands are applied sequentially and at approximately same magnitude to urge the rotor toward an enforced position. A processing module (116) measures a positive quadrature-axis current aligned raw position data after application of the positive quadrature-axis current command and measures negative quadrature-axis current aligned raw position data for the rotor after application of the negative quadrature-axis command. An initial position offset calibrator (151) or data processor determines a difference between the raw position data to determine an alignment of a true averaging axis. An initial position offset calibrator (151) or data processor determines a raw averaging axis position data based on an average of the raw position data.</p></abstract><abstract mxw-id="PA100327402" ref-ucid="WO-2012118579-A1" lang="EN" source="national office" load-source="docdb"><p>While enforcing a fake position in the data processing system (120) and applying a zero direct-axis current command, positive and negative quadrature-axis current commands are applied sequentially and at approximately same magnitude to urge the rotor toward an enforced position. A processing module (116) measures a positive quadrature-axis current aligned raw position data after application of the positive quadrature-axis current command and measures negative quadrature-axis current aligned raw position data for the rotor after application of the negative quadrature-axis command. An initial position offset calibrator (151) or data processor determines a difference between the raw position data to determine an alignment of a true averaging axis. An initial position offset calibrator (151) or data processor determines a raw averaging axis position data based on an average of the raw position data.</p></abstract><abstract mxw-id="PA99830575" ref-ucid="WO-2012118579-A1" lang="FR" load-source="patent-office"><p num="0000">Selon l'invention, pendant l'application d'une position fausse dans le système de traitement de données (120) et l'application d'un ordre courant d'axe direct nul, des ordres courants d'axe de quadrature positif et négatif sont appliqués en séquence et à une amplitude approximativement identique afin de pousser le rotor vers une position forcée. Un module de traitement (116) mesure des données de position brutes, alignées et courantes d'axe de quadrature positif après l'application de l'ordre courant d'axe de quadrature positif et mesure des données de position brutes, alignées et courantes d'axe de quadrature négatif pour le rotor après l'application de l'ordre d'axe de quadrature négatif. Un calibreur de décalage de position initiale (151) ou un processeur de données détermine une différence entre les données de position brutes pour déterminer un alignement d'un axe de moyenne réel. Un calibreur de décalage de position initiale (151) ou un processeur de données détermine des données de position d'axe de moyenne brut sur la base d'une moyenne des données de position brutes.</p></abstract><abstract mxw-id="PA100327403" ref-ucid="WO-2012118579-A1" lang="FR" source="national office" load-source="docdb"><p>Selon l'invention, pendant l'application d'une position fausse dans le système de traitement de données (120) et l'application d'un ordre courant d'axe direct nul, des ordres courants d'axe de quadrature positif et négatif sont appliqués en séquence et à une amplitude approximativement identique afin de pousser le rotor vers une position forcée. Un module de traitement (116) mesure des données de position brutes, alignées et courantes d'axe de quadrature positif après l'application de l'ordre courant d'axe de quadrature positif et mesure des données de position brutes, alignées et courantes d'axe de quadrature négatif pour le rotor après l'application de l'ordre d'axe de quadrature négatif. Un calibreur de décalage de position initiale (151) ou un processeur de données détermine une différence entre les données de position brutes pour déterminer un alignement d'un axe de moyenne réel. Un calibreur de décalage de position initiale (151) ou un processeur de données détermine des données de position d'axe de moyenne brut sur la base d'une moyenne des données de position brutes.</p></abstract><description mxw-id="PDES51232317" ref-ucid="WO-2012118579-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> METHOD AND SYSTEM FOR CALIBRATING ROTOR POSITION OFFSET OF AN </p><p id="p0002" num="0002"> ELECTRIC MOTOR </p><p id="p0003" num="0003">This document claims priority based on U.S. provisional application serial number 61/447,331 , filed on 28 February 2011 and entitled METHOD AND SYSTEM FOR CALIBRATING ROTOR POSITION OFFSET OF AN ELECTRIC MOTOR, under 35 U.S.C. 119(e). </p><p id="p0004" num="0004"> Field of the Invention </p><p id="p0005" num="0005"> This invention relates to a method and system for calibrating or field calibration of rotor position offset of an electric motor. </p><p id="p0006" num="0006">Background of the Invention </p><p id="p0007" num="0007"> An electric motor may feature a rotor with permanent magnets and a stator, such as an interior permanent magnet (IPM) motor or IPM synchronous motor. In accordance with certain prior art, an interior permanent magnet (IPM) motor or IPM synchronous machine may not use the same rotor alignment scheme that is generally used with a surface mounted permanent magnet motor because the magnetic torque component and reluctance component of the IPM motor or machine are along different axes. In accordance with other prior art, calibrating a motor with back electromotive force (EMF) measurements generally requires an auxiliary motor to rotate the shaft of the tested IPM motor or machine, which is not practical for or applicable to field calibration of motor position in a vehicle during normal starting or operation of the vehicle. Thus, there is a need for an improved method and system for calibration or field calibration of a position offset of an electric motor. </p><p id="p0008" num="0008">Summary of the Invention </p><p id="p0009" num="0009"> In accordance with one embodiment, a method and system is presented for calibrating or field calibrating rotor position offset. While providing a fake, rotor position (e.g., fixed<sup>*</sup> fake rotor position) in a data processing system (e.g., in a phase converter) and applying a zero direct-axis current command, positive and negative quadrature-axis current commands are applied sequentially and at approximately same magnitude to urge the rotor toward an enforced position. A processing module measures a positive quadrature-axis current aligned raw position data after application of the positive quadrature-axis current command and measures negative 
<!-- EPO <DP n="4"/>-->
 quadrature-axis current aligned raw position data for the rotor after application of the negative quadrature-axis command. An initial position offset calibrator or data processor determines a difference between the raw position data to determine an alignment of a true averaging axis. An initial position offset calibrator or data processor determines a raw averaging axis position data based on an average of the raw position data. An initial position offset calibrator or data processor determines a position offset based on a difference between the determined true averaging axis and the determined raw averaging axis position data. </p><p id="p0010" num="0010">Brief Description of the Drawings </p><p id="p0011" num="0011"> FIG. 1 is a block diagram of one embodiment of a system for calibrating or field calibration of rotor position offset of an electric motor. </p><p id="p0012" num="0012"> FIG. 2 is a block diagram of an electronic data processing system consistent with FIG. 1. </p><p id="p0013" num="0013"> FIG. 3 is a flow chart of a first embodiment of a method for calibrating or field calibration of rotor position offset of an electric motor. </p><p id="p0014" num="0014"> FIG. 4 is a flow chart of a second embodiment of a method for calibrating or field calibration of rotor position offset of an electric motor. </p><p id="p0015" num="0015"> FIG. 5 is a flow chart of a third embodiment of a method for calibrating or field calibration of rotor position offset of an electric motor. </p><p id="p0016" num="0016">Description of the Preferred Embodiment </p><p id="p0017" num="0017"> In accordance with one embodiment, FIG. 1 discloses system for controlling a motor 117 (e.g., an interior permanent magnet (IPM) motor) or another alternating current machine. In one embodiment, the system, aside from the motor 117, may be referred to as an inverter or a motor controller. </p><p id="p0018" num="0018"> The system comprises electronic modules, software modules, or both. In one embodiment, the motor controller comprises an electronic data processing system 120 to support storing, processing or execution of software instructions of one or more software modules. The electronic data processing system 120 is indicated by the dashed lines in FIG. 1 and is shown in greater detail in FIG. 2. 
<!-- EPO <DP n="5"/>-->
 The data processing system 120 is coupled to an inverter circuit 188. The inverter circuit 188 comprises a semiconductor drive circuit that drives or controls switching semiconductors (e.g., insulated gate bipolar transistors (IGBT) or other power transistors) to output control signals for the motor 117. In turn, the inverter circuit 188 is coupled to the motor 117. The motor 1 17 is associated with a sensor 115 (e.g., a position sensor, a resolver or encoder position sensor) that is associated with the motor shaft 126 or the rotor. The sensor 115 and the motor 1 17 are coupled to the data processing system 120 to provide feedback data (e.g., current feedback data, such as i<sub>a</sub>, it,, i<sub>c</sub>), raw position signals, among other possible feedback data or signals, for example. Other possible feedback data includes, but is not limited to, winding temperature readings, semiconductor temperature readings of the inverter circuit 188, three phase voltage data, or other thermal or performance information for the motor 117. </p><p id="p0019" num="0019"> In one embodiment, the torque command generation module 105 is coupled to a d-q axis current generation manager 09 (e.g., d-q axis current generation lookup tables). D-q axis current refers to the direct axis current and the quadrature axis current as applicable in the context of vector-controlled alternating current machines, such as the motor 117. The output of the d-q axis current generation. manager 109 and the output of a current adjustment module 107 (e.g., d-q axis current adjustment module 107) are fed to a summer 119. In turn, one or more outputs (e.g., direct.axis current data (id*) and quadrature axis current data (i<sub>q</sub>*)) of the summer 119 are provided or coupled to a current regulation controller 111. </p><p id="p0020" num="0020"> The current regulation controller 1 11 is capable of communicating with the pulse-width modulation (PWM) generation module 112 (e.g., space vector PWM generation module). The current regulation controller 111 receives respective d-q axis current commands (e.g., i<sub>d</sub>* and i<sub>q</sub>*) and actual d-q axis currents (e.g., id and i<sub>q</sub>) and outputs corresponding d-q axis voltage commands (e.g., v<sub>d</sub>* and v<sub>q</sub>* commands) for input to the PWM generation module 112. </p><p id="p0021" num="0021"> In one embodiment, the PWM generation module 12 converts the direct axis voltage and quadrature axis voltage data from two phase data representations into three phase representations (e.g., three phase voltage representations, such as v<sub>a</sub>*, 
<!-- EPO <DP n="6"/>-->
 v<sub>b</sub>* and v<sub>c</sub><sup>*</sup>) for control of the motor 117, for example. Outputs of the PWM generation module 112 are coupled to the inverter 188. </p><p id="p0022" num="0022"> The inverter circuit 188 comprises power electronics, such as switching semiconductors to generate, modify and control a modulated signal, a pulse-width modulated signal, a pulse-modulated voltage waveform, a voltage signal, or other alternating current signals (e.g., pulse, square wave, sinusoidal, or other waveforms) applied to the motor 117. The PWM generation module 112 provides inputs to a driver stage within the inverter circuit 188. An output stage of the inverter circuit 188 provides a pulse-width modulated signal or other alternating current signal for control of the motor. In one embodiment, the inverter 188 is powered by a direct current (DC) voltage bus. </p><p id="p0023" num="0023"> The motor 117 is associated with a sensor 115 (e.g., a resolver, encoder, speed sensor, or another position sensor or sensors) that estimates at least one of an angular position of the motor.shaft 126, a speed or velocity of the motor shaft 126, and a direction of rotation of the motor shaft 126. The sensor 115 may be mounted on or integral with the motor shaft 126. The output of the sensor 115 is capable of communication with the primary processing module 114 (e.g., position and speed processing module). In one embodiment, the sensor 115 may be coupled to an analog-to-digital converter (not shown) that converts analog position data or velocity data to digital position or velocity data, respectively. In other embodiments, the sensor 115 (e.g., digital position encoder) may provide a digital data output of position data or velocity data for the motor shaft 126 or rotor. </p><p id="p0024" num="0024"> A first output (e.g., position data and speed data forjhe motor 117) of the primary processing module 114 is communicated to the phase converter 113 (e.g., three-phase to two-phase current Park transformation module) that converts respective three-phase digital representations of measured current into </p><p id="p0025" num="0025">corresponding two-phase digital representations of measured current. A second output (e.g., speed data) of the primary processing module 114 is communicated to the calculation module 110 (e.g., adjusted voltage over speed ratio module). </p><p id="p0026" num="0026"> An input of a sensing circuit 124 is coupled to terminals of the motor 117 for sensing at least the measured three-phase currents and a voltage level of the direct 
<!-- EPO <DP n="7"/>-->
 current (DC) bus (e.g., high voltage DC bus which may provide DC power-to the inverter circuit 188). An output of the sensing circuit 124 is coupled to an analog-to- digital converter 122 for digitizing the output of the sensing circuit 124. In turn, the digital output of the analog-to-digital converter 122 is coupled to the secondary processing module 116 (e.g., Direct current (DC) bus and three phase current processing module). For example, the sensing circuit 124 is associated with the motor 117 for measuring three phase currents (e.g., current applied to the windings of the motor 117, back EMF induced into the windings, or both). </p><p id="p0027" num="0027"> Certain outputs of primary processing module 114 and the secondary processing module 116 feed the phase converter 113<sub>:</sub> For example, the phase converter 113 may apply a Park transformation or other conversion equations (e.g., certain conversion equations that are suitable are known to those of ordinary skill in the art) to convert the measured three-phase representations of current into two- phase representations of current based on the digital three-phase current data from the secondary processing module 116 arid position data from the sensor 115; The output of the phase converter 113 module is coupled to the current regulation controller 111. </p><p id="p0028" num="0028"> Other outputs of the primary processing module 114 and the secondary processing module 116 may be coupled to inputs of the calculation module 110 (e.g., adjusted voltage over-speed ratio calculation module). For example, the primary processing module 114 may provide speed data (e.g., motor shaft 126 revolutions per minute), whereas the secondary processing module 116 may provide a measured level of direct current voltage (e.g., on the direct current (DC) bus of a vehicle). The direct current voltage level on the DC bus that supplies the inverter circuit 188 with electrical energy may fluctuate or vary because of various factors, including, but not limited to, ambient temperature, battery condition, battery charge state, battery resistance or reactance, fuel cell state (if applicable), motor load conditions, respective motor torque and corresponding operational speed, and vehicle electrical loads (e.g., electrically driven air-conditioning compressor). The calculation module 110 is connected as an intermediary between the secondary processing module 116 and the dq-axis current generation manager 109. The output 
<!-- EPO <DP n="8"/>-->
 of the calculation module 110 can adjust or impact current commands generated by the d-q axis current generation manager 109 to compensate for fluctuation or variation in direct current bus voltage, among other things. </p><p id="p0029" num="0029"> The initial position offset calibrator 151 or the primary position module 114 supports calibration of an initial position offset of the motor shaft 126: In one embodiment, the initial position offset calibrator 151 is capable of communicating with the primary processing module 114, the secondary processing module 116, and receiving measured current input data (e.g., direct-axis and quadrature axis current data) from an output of the phase converter 113, for example. </p><p id="p0030" num="0030"> The rotor magnet temperature estimation module 104, the current shaping module 106, and the terminal voltage feedback module 08 are coupled to or are capable of communicating with the dq-axis current adjustment module 107. In turn, the d-q axis current module 107 may communicate with the dq-axis current generation manager or the summer 119. </p><p id="p0031" num="0031"> The rotor magnet temperature module 104 estimates ordetermines the temperature of the rotor permanent magnet or magnets. In one embodiment, the rotor magnet temperature estimation module 104 may estimate the temperature of the rotor magnets from one or more sensors located on the stator, in thermal communication with the stator, or secured to the housing of the motor 117. </p><p id="p0032" num="0032"> In an alternative embodiment, the rotor magnet temperature estimation module 104 may be replaced with a temperature detector (e.g., a thermistor or infrared thermal sensor coupled to a wireless transmitter) mounted on the rotor or the magnet, where the detector provides a signal (e.g., wireless signal) indicative of the temperature of the magnet or magnets. </p><p id="p0033" num="0033"> In one embodiment, the method or system may operate in the following manner. The torque command generation module 105 receives an input control data message, such as a speed control data message, a voltage control data message, or a torque control data message; over a vehicle data bus 118. The torque command generation module 105 converts the received input control message into torque control command data 316. </p><p id="p0034" num="0034"> The d-q axis current generation manager 109 selects or determines the direct 
<!-- EPO <DP n="9"/>-->
 axis current command data and the quadrature axis current command data associated with respective torque control command data and respective detected motor shaft 126 speed data. For example, the d-q axis current generation manager 109 selects or determines the direct axis current command, the quadrature axis current command by accessing one or more of the following: (1) a look-up table, database or other data structure that relates respective torque commands to corresponding direct and quadrature axes currents, (2) a set of quadratic equations or linear equations that relate respective torque commands to corresponding direct and quadrature axes currents, or (3) a set of rules (e.g., if-then rules) that relates respective torque commands to corresponding direct and quadrature, axes currents. The sensor 115 on the motor 117 facilitates provision of the detected speed data for the motor shaft 126, where the primary processing module 114 may convert position data provided by the sensor 115 into speed data. </p><p id="p0035" num="0035"> The current adjustment module 107 (e.g., d-q axis current adjustment module) provides current adjustment data to adjust the direct axis current command data arid the quadrature axis current command data based on input data from the rotor magnet temperature estimation module 104, the current shaping module 106, and the terminal voltage feedback module 108. </p><p id="p0036" num="0036"> The current shaping module 106 may determine a correction or preliminary adjustment of the quadrature axis (q-axis) current command and the direct axis id- axis) current command based on one or more of the following factors: torque load on the motor 117 and speed of the motor 117, for example. The rotor magnet temperature estimation module 104 may generate a secondary adjustment of the q- axis current command and the d-axis current command based on an estimated change in rotor temperature, for example. The terminal voltage feedback module 108 may provide a third adjustment to the d-axis and q-axis current based on controller voltage command versus voltage limit. The current adjustment module 107 may provide an aggregate current adjustment that considers one or more of the following adjustments: a preliminary adjustment, a secondary adjustment, and a third adjustment. </p><p id="p0037" num="0037"> In one embodiment, the motor 117 may comprise an interior permanent 
<!-- EPO <DP n="10"/>-->
 magnet (IP ) machine or an IPM synchronous machine (IPMSM). An IPMSM has many favorable advantages compared with conventional induction machines or surface mounted PM machines (SMPM) such as high efficiency, high power density, wide constant power operating region, maintenance free, for instance. </p><p id="p0038" num="0038"> The sensor 115 (e.g., shaft or rotor speed detector) may comprise one or more of the following: a direct current motor, an optical encoder, a magnetic field sensor (e.g., Hall Effect sensor), magneto-resistive sensor, and a resolver (e.g., a brushless resolver). In one configuration, the sensor 115 comprises a position sensor, where position data and associated time data are processed to determine speed or velocity data for the motor shaft 126. In another configuration, the sensor 115 comprises a speed sensor, or the combination of a speed sensor and an integrator to determine the position of the motor shaft. </p><p id="p0039" num="0039"> In yet another configuration, the sensor 115 comprises ari auxiliary, compact direct current generator that is coupled mechanically to the motor shaft 126 of the motor 117 to determine speed of the motor shaft 126, where the direct current generator produces an output voltage proportional to the rotational speed of the motor shaft 126. In still another configuration, the sensor 115 comprises an optical encoder with an optical source that transmits a signal toward a rotating object coupled to the shaft 126 and receives a reflected or diffracted signal at an optical detector, where the frequency of received signal pulses (e.g., square waves) may be proportional to a speed of the motor shaft 126, In an additional configuration, the sensor 115 comprises a resolver with a first winding and a second winding, where the first winding is fed with an alternating current, where the voltage induced in the second winding varies with the frequency of rotation of the rotor. </p><p id="p0040" num="0040"> In FIG. 2, the electronic data processing system 120 comprises an electronic data processor 264, a data bus 262, a data storage device 260, and one or more data ports (268, 270, 272, 274 and 276). The data processor 264, the data storage device 260 and one or more data ports are coupled to the data bus 262 to support communications of data between or among the data processor 264, the data storage device 260 and one or more data ports. </p><p id="p0041" num="0041"> In one embodiment, the data processor 264 may comprise an electronic data 
<!-- EPO <DP n="11"/>-->
 processor, a microprocessor, a microcontroller, a programmable logic array, a logic circuit, an arithmetic logic unit, an application specific integrated circuit, a digital signal processor, a proportional-integral-derivative (PID) controller, or another data processing device or combination of data processing devices. </p><p id="p0042" num="0042"> The data storage device 260 may comprise any magnetic, electronic, or optical device for storing data. For example, the data storage device 260 may comprise an electronic data storage device, an electronic memory, non-volatile electronic random access memory, one or more electronic data registers, data latches, a magnetic disc drive, a hard disc drive, an optical disc, drive, or the like. </p><p id="p0043" num="0043"> As shown in FIG. 2, the data ports comprise a first data port 268, a second data port 270, a third data port 272, a fourth data port 274 and a fifth data port 276, although any suitable number of data ports may be used. Each data port may comprise a transceiver and buffer memory, for example. In one embodiment, each data port may comprise any serial or parallel input/output port. </p><p id="p0044" num="0044"> In one embodiment as illustrated in FIG. 2, the first data port 268 is coupled to the vehicle data bus 118. In turn, the vehicle data bus 118 is coupled to the controller 266. In one configuration, the second data port 270 may be coupled to the inverter circuit 188; the third data port 272 may be coupled to the sensor 115; the fourth data port 274 may be coupled to the analog-to-digital converter 122; and the fifth data port 276 may be coupled to the terminal voltage feedback module 108. The analog-to-digital converter 122 is coupled to the sensing circuit 124. </p><p id="p0045" num="0045"> In one embodiment of the data processing system 120, the torque command generation module 105 is associated with or supported by the first data port 268 of the electronic data processing system 120. The first data port 268 may be coupjed to a vehicle data bus 118, such as .a controller area network (CAN) data bus. The vehicle data bus 118 may provide data bus messages with torque commands to the torque command generation module 105 via the first data port 268. The operator of a vehicle may generate the torque commands via a user interface, such as a throttle, a pedal, a controller 266, or other control device. </p><p id="p0046" num="0046"> In certain embodiments, the sensor 115 and the primary processing module 114 may be associated with or supported by a third data port 272 of the data 
<!-- EPO <DP n="12"/>-->
 processing system 120. </p><p id="p0047" num="0047"> Various embodiments of the method and system disclosed herein use a fake rotor position or a reference rotor position. As used throughout this document, a fake rotor position or a fixed fake rotor position is not based on an actual </p><p id="p0048" num="0048">measurement by the sensor 115 of the actual rotor position. Rather, the data processing system 120 or the primary processing module 114 may provide fake position data or reference position data to the phase converter 113. The phase converter 113 uses the fake position data or reference position data, as opposed to actual position data in the Park transformation (e.g., conversion from three phase measurements to two phase representations) to provide measured direct-axis current and measured quadrature-axis current to the current regulation controller 11 . At the phase converter 113, the fake position data is used in conjunction with actual measured three phase current data, where the measured three phase currents are provided by the sensing circuit 124 via the analog-to-digital converter 122 to the secondary processing module 116, For example, in one configuration the fake position data or fixed fake rotor position may be approximately equal to zero (0) degrees of the rotor with respect to the stator of the motor 117. </p><p id="p0049" num="0049"> In one embodiment, the data processor 264 or the data processing system 120 may be configured to determine an error or deviation between the fake position data and the actual position data detected by the sensor 115 and the primary processing module 114, where the rotor is at an enforced position (or actual position) that is supposed to be: (a) aligned with the fake position; (b) substantially equal to the fake position, or (c) separated by a known relationship or a fixed reference angular displacement to the fake position. The foregoing error or deviation data may be used to calibrate or estimate the position offset. For example, multiple enforced positions may be used for calibration, where the fake position is held constant or fixed (e.g., at zero degrees). </p><p id="p0050" num="0050"> As used throughout this document, "approximately" used in conjunction with an angular position or other number shall mean plus or minus five percent of the angular position or other number. As used through this document, "around" used in conjunction with an angular position or another number shall mean plus or minus ten 
<!-- EPO <DP n="13"/>-->
 percent of the angular position or other number. </p><p id="p0051" num="0051"> FIG. 3 discloses a method of calibrating or field calibrating the position offset of a rotor in a motor, such as an interior permanent magnet (IP ) motor. The method of FIG. 4 starts in step S300. </p><p id="p0052" num="0052"> In step S300, while a fake rotor position (e.g., fixed fake rotor position or zero degrees rotor position with respect to the stator of the motor 117) is provided in the data processing system 120 (e.g., for purposes of the Park transformation of the phase converter 113) and while the PWM generation module 112, inverter circuit 188 or controller applies a zero direct-axis current command, the PWM generation module 112, inverter circuit 188 or controller applies sequentially positive and negative quadrature- axis current commands approximately the same magnitude to urge or move the rotor toward an enforced position. Here, approximately the same magnitude or substantially the same magnitude means equal or plus or minus five percent of the value of the magnitude. </p><p id="p0053" num="0053"> The enforced position may be aligned with, substantially equal to, or separated from the fixed fake rotor position. In one embodiment, where the enforced position is aligned with or substantially equal to the fake rotor position, a difference between the enforced position and the fake rotor position comprises an error or an indication of error. In another embodiment, where there is a known relationship (e.g., angular displacement or fixed angular separation) between the enforced position and the fixed fake rotor position, the deviation from the known relationship or fixed angular separation comprises an error or indication of an error. </p><p id="p0054" num="0054"> In accordance with one illustrative example for carrying out step S300, , is defined as the final alignment raw position after applying a positive quadrature- axis current command (e.g., i<sub>q</sub>* of +200 amperes), and zero id command and forced position of 0 degree, whereas^ <sub>(</sub>. is defined as the final alignment raw position after applying a negative quadrature-axis command (e.g., i<sub>q</sub>* of -200 amperes), and zero direct-axis current command (id*) and a forced or enforced position of 0 degrees. </p><p id="p0055" num="0055"> In step S302, a processing module or primary processing module 114 
<!-- EPO <DP n="14"/>-->
 measures a first (e.g., positive quadrature-axis current) aligned raw position data upon or after application of the positive quadrature-axis current command to the motor 117 by the circuit. Further in step S302, the processing module or primary processing module 114 measures a second (e.g., negative quadrature-axis current) aligned raw position data for the rotor upon or after application of the negative quadrature-axis command to the motor 117 by the inverter circuit 188. The first aligned raw position data may range between zero and 360 degrees of the rotor with respect to the stator of the motor 117, for example. Similarly, the second aligned raw position data may range between zero and 360 degrees of the rotor with respect to the stator of the motor 117, for example. </p><p id="p0056" num="0056"> In step S304, an initial position offset calibrator 151, a data processor 264, or the primary processing module 114 determines a difference between the raw position data (e.g., positive quadrature-axis current aligned raw position data and negative quadrature-axis current aligned raw position data) to determine an alignment of a true averaging axis (e.g., at 180 degrees or at zero degrees of rotor position with respect to the stator, where the fake rotor position is approximately zero degrees). For example, the initial position offset calibrator 51 , a data processor 264, or the primary processing module 114 determines a difference, between the first aligned raw position data and the second aligned raw position data. </p><p id="p0057" num="0057"> In step S306, an initial position offset calibrator 151 , the data processor 264, or primary processing module 114 determines a raw averaging axis position data based on an average of the raw position data (e.g., average of the first aligned raw position data, the second aligned raw position data, or both). </p><p id="p0058" num="0058"> In step S308, an initial position offset calibrator 151, the data processor 264, or the primary processing module 114 determines a position offset based on a difference, between the determined true averaging axis and the determined raw averaging axis position data. </p><p id="p0059" num="0059"> FIG. 4 discloses a method of calibrating or field calibrating the position offset of a rotor in a motor, such as an interior permanent magnet (IP ) motor. The method of FIG. 4 starts in step S400. </p><p id="p0060" num="0060"> In step S400, while a corresponding fake rotor position (e.g., fixed fake rotor 
<!-- EPO <DP n="15"/>-->
 position or zero degrees rotor position with respect to the stator of the motor 117) is provided in the data processing system 120 (e.g., for purposes of the Park transformation of the phase converter 113), an inverter circuit 188, controller, or pulse width modulation (PWM) generation module 112 applies a positive quadrature- axis current command of a magnitude at a first time and a negative quadrature-axis current command of the substantially same magnitude to the motor 117 at a second time to move the rotor toward an enforced position of the rotor. Here, the </p><p id="p0061" num="0061">substantially same magnitude means equal or plus or minus five percent of the value of the magnitude. In one embodiment, the motor 117 comprises an interior permanent magnet (IPM) motor or another alternating current machine where the magnetic torque component and the reluctance torque component of the machine lie along different axes. </p><p id="p0062" num="0062"> In step S402, while the fake rotor position (e.g., fixed fake rotor position or zero degrees rotor position with respect to the stator of the motor 117) is provided in the data processing system 120 (e.g., for purposes of the Park transformation of the phase converter 113), an inverter circuit 188, controller or pulse width modulation (PWM) generation module 112 applies a zero direct-axis current command to the motor 117, while applying the quadrature-axis current commands associated with an the enforced position to the motor 117. </p><p id="p0063" num="0063"> In step S404, a primary processing module 117 or data processor 264 measures first (e.g., positive quadrature-axis current) aligned raw position data for the rotor of the motor upon or after application of the positive quadrature-axis current command and measures second, (e.g., negative quadrature-axis current) aligned raw position data for the rotor of the motor 117 upon or after application of the negative quadrature-axis command. For example, the measured raw position data results from the application of one or more quadrature-axis current commands with opposite magnitudes. The first aligned raw position data may range between zero and 360 degrees of the rotor with respect to the stator of the motor 117, for example. </p><p id="p0064" num="0064">Similarly, the second aligned raw position data may range between zero and 360 degrees of the rotor with respect to the stator of the motor 117, for example. </p><p id="p0065" num="0065"> In step S406, an initial position offset calibrator 51 or the data processor 264 
<!-- EPO <DP n="16"/>-->
 determines a difference between the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned raw position data to determine whether a true averaging axis is aligned at approximately zero degrees or approximately 180 degrees for the rotor with respect to the stator, where the fake rotor position is approximately zero degrees. </p><p id="p0066" num="0066"> In step S408, the initial position offset calibrator 151, the data processor 264, or the primary processing module 114 determines a raw averaging axis position data based on an average of the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e:g., negative quadrature-axis current) aligned position data, or where the averaging axis is based on an adjusted raw position data of at least one of the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned position data. </p><p id="p0067" num="0067"> In step S410, an initial position offset calibrator 151 , data processor 264, or primary processing module 1 4 determines a position offset based on a difference between the determined true averaging axis and the determined raw averaging axis position data. Step S410 may be. carried out in accordance with various procedures that may be applied alternately or cumulatively. </p><p id="p0068" num="0068"> In accordance with a first procedure, if the determining a difference between the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned raw position data is greater than approximately 185 degrees (or around 185 degrees) and if the measured second (e.g., negative quadrature-axis current) aligned raw position data is greater than the measured first (e.g., positive quadrature-axis current) aligned raw position data, then the following equations apply to determining the true position offset: θ , -θ , &gt; 185· , then 6&gt; =0° </p><p id="p0069" num="0069"> 0 , = Θ . - , such that θ , -#"1 , &lt; 175' 
<!-- EPO <DP n="17"/>-->
 Θ . +0"* . </p><p id="p0070" num="0070">then fl <sub>»</sub> = and </p><p id="p0071" num="0071"> ft . +0"* . </p><p id="p0072" num="0072">the position offset is θ<sub>φα</sub> = ^<sub>Λ</sub>_<sub>(Π¾</sub> — ^ <sub>g</sub> <sup>mt</sup>* </p><p id="p0073" num="0073">In the above equations, θ<sub>ηθβ</sub>_ι-ή is the first aligned raw position data associated with the negative quadrature-axis current command, 0po<sub>S</sub>_f<sub>&lt;}</sub>is the second aligned raw position data associated with the positive quadrature-axis current command, 9<sub>a</sub>^<sub>jme</sub> </p><p id="p0074" num="0074"> .ø<sup>«</sup>* </p><p id="p0075" num="0075">is the true averaging axis, <sup>~</sup> is the adjusted first aligned raw position data associated with the negative quadrature-axis current command, Θ exis_raw is the raw averaging axis position data, and the position offset is 9<sub>0</sub>ff<sub>Se</sub>t- In the above equations is it understood that the 185 degrees may be set to be approximately 185 degrees or around 185 degrees, and that 175 degrees may be set to be approximately 175 degrees or around 175 degrees based on the actual operating characteristics, design and specification for the motor 117, for example. </p><p id="p0076" num="0076"> In accordance with a second procedure, the determining a difference between the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned raw position data is less than approximately 175 degrees and if the measured second (e.g., negative quadrature-axis current) aligned raw position data is less than the measured first (e.g., positive quadrature-axis current) aligned raw position data, then the following equations apply to determining the true position offset: </p><p id="p0077" num="0077">. &lt; 175<sup>*</sup> , then 6&gt; ,„,. = 0<sup>°</sup> and ft</p><p id="p0078" num="0078"><img id="imgf000017_0001" he="13" wi="25" file="imgf000017_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0079" num="0079"> θ I</p><p id="p0080" num="0080"> sition offset is θ<sub>φίΙ</sub> = θ<sub>∞ίί</sub> ,<sub>m</sub> -θ^„ =- <sup>+</sup> ^<sup>6</sup> f </p><p id="p0081" num="0081">such that po ""^ </p><p id="p0082" num="0082">In the above equations, 6<sub>ne</sub>g<sub>j</sub>'q is the first aligned raw position data associated with the negative quadrature-axis current command,
<img id="imgf000017_0002" he="6" wi="15" file="imgf000017_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 the second aligned raw position data associated with the positive quadrature-axis current command, 0<sub>e</sub>«sjn» 
<!-- EPO <DP n="18"/>-->
 is the true averaging axis, <sup>"</sup> is the adjusted second aligned raw position data associated with the negative quadrature-axis current command, Θ axis mw is the.raw averaging axis position data, and the position offset is θοκ<sub>&amp;</sub> In the above equations is it understood that 175 degrees may be set to be approximately 175 degrees or around 175 degrees based on the actual operating characteristics, design and specification for the motor 1 7, for example. </p><p id="p0083" num="0083"> In accordance with a third procedure, if the determining a difference between the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned raw position data is less than approximately 175 degrees and if the measured second (e.g., negative quadrature-axis current) aligned raw position data is greater than the measured first (e.g., positive quadrature-axis current) aligned raw position data, then the following equations apply to determining the position offset: </p><p id="p0084" num="0084">0 n¾.' ,j - pes J ,, &lt;m , then 6L em,j <sub>l</sub>n<sub>ne</sub>e = 180<sup>°</sup> or 0 ati .sj <sub>lr</sub>n<sub>v</sub>u<sub>e</sub> = -180<sup>°</sup> </p><p id="p0085" num="0085"> θ . +0 , </p><p id="p0086" num="0086">and then 0 _„ = -</p><p id="p0087" num="0087">Θ +0 </p><p id="p0088" num="0088">such that position offset is 0<sub>o#a</sub>, = θ^ -θ^ = 180° - ^—^l </p><p id="p0089" num="0089"> In the above equations, 0<sub>/</sub>,<sub>ea</sub>_<sub>/</sub> <sup>s tne</sup> first aligned raw position data associated with the negative quadrature-axis current command,
<img id="imgf000018_0001" he="6" wi="15" file="imgf000018_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 the second aligned raw position data associated with the positive quadrature-axis current command, 0««,_{ we nadj </p><p id="p0090" num="0090"> ntg i'q </p><p id="p0091" num="0091">is the true averaging axis, <sup>"</sup> is the adjusted second aligned raw position data associated with the negative quadrature-axis current command, 9 exis_raw <sup>'</sup>\s the raw averaging axis position data, and the position offset is 0<sub>o</sub>«sef- In the above equations is it understood that 175 degrees may be set to be approximately 175 degrees or around 175 degrees based on the actual operating characteristics, design and specification for the motor 117, for example. </p><p id="p0092" num="0092"> In accordance with a fourth procedure, if the determining a difference between 
<!-- EPO <DP n="19"/>-->
 the measured first (e.g., positive quadrature-axis current) aligned raw position data and the measured second (e.g., negative quadrature-axis current) aligned raw position data is greater than approximately 185 degrees and if the measured negative quadrature-axis current aligned raw position data is less than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the position offset: θ , -θ . &gt; 185' , then 6&gt; <sub>mt</sub> =180° or 6L, ^ = -180' </p><p id="p0093" num="0093"> d°t<sup>J</sup> . + Θ . </p><p id="p0094" num="0094"> Θ*<sup>4</sup> . , = Θ , -360°, such that θ , -θ^ , &lt; 175° and then 0 . — 2i such that the position offset is θ , = 9<sub>msJne</sub> -e<sub>Mis m</sub></p><p id="p0095" num="0095"><img id="imgf000019_0001" he="13" wi="34" file="imgf000019_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0096" num="0096">In the above equations,
<img id="imgf000019_0002" he="6" wi="16" file="imgf000019_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 the first aligned raw position data associated with the negative quadrature-axis current command, fyos g is the second aligned raw position data associated with the positive quadrature-axis current command, 0ax/<sub>s</sub>jn» is the true averaging axis, <sup>*</sup> is the adjusted second aligned raw position data associated with the negative quadrature-axis current command, is the raw averaging axis position data, and the position offset is 9<sub>0</sub>ff<sub>S</sub>et- In the above equations is it understood that the 185 degrees may be set to be approximately 185 degrees or around 185 degrees, and that 175 degrees may be set to be approximately 175 degrees or around 175 degrees based on the actual operating characteristics, design and specification for the motor 117, for example. </p><p id="p0097" num="0097"> FIG. 5 discloses a method of calibrating or field calibrating the position offset of a rotor in a motor, such as an interior permanent magnet (IPM) motor. The method of FIG. 5 is similar to the method of FIG. 4, except the method of FIG. 5 further includes steps S450 and/S452. Like steps or procedures in FIG. 4 and FIG; 5 are indicated by like reference numbers. </p><p id="p0098" num="0098"> In practice, steps S450 and S452 are typically performed prior to steps S400 through step S41 , inclusive, of FIG. 5. 
<!-- EPO <DP n="20"/>-->
 In step S450, the initial position offset calibrator 151 , the pulserwidth modulation generation module 112, the inverter 188 or the data processor 264 determines whether the three motor leads phase sequence is matching with the raw position data based on applying a monotonic varying position profile associated with a direct voltage command in direct and quadrature axes to the motor 117. For example, the monotonic varying position profile may be stored in the data storage device 260 and implemented by the pulse width generation module 112. In an alternate embodiment, the monotonic varying position profile may be implemented by specific electronic hardware in the inverter circuit 188. </p><p id="p0099" num="0099"> In step S452, the initial position offset calibrator 151 or the data processor 264 observes the direction of the rotation associated with rotor and verifying the forward direction of rotation of the rotor during the application of the monotohic increasing position profile (in step S450) associated with the direct voltage command in direct and quadrature axes to the motor. </p><p id="p0100" num="0100"> For an IP machine, there are both magnetic torque and reluctance torque component. The magnetic torque component, determined by current vector projection along quadrature-axis (q-axis), is always trying to bring true rotor direct- axis (d-axis) to the current vector. However, the reluctance torque component, determined by current vector projection along both q-axis and d-axis, is always trying to bring true rotor d-axis 90 degrees away from the current vector. Therefore, for an 1PM; machine, due to the different torque alignment effects from magnetic torque component and reluctance torque component, a forced or enforced position and a single direction torque command is not readily used to align the rotor to a desired position. </p><p id="p0101" num="0101"> The method and system disclosed herein is well-suited for calibration of the initial rotor position offset of an IPM motor or other electric machines with different torque components trying to align the rotor along different axes. Calibrating the initial position offset of the rotor for IPM machines can significantly improve motor control performance to achieve desired output torque and power level and assure robust controllability. </p><p id="p0102" num="0102"> Having described the preferred embodiment, it will become apparent that 
<!-- EPO <DP n="21"/>-->
 various modifications can be made without departing from the scope of the invention as defined in the accompanying claims. 
</p></description><claims mxw-id="PCLM44851452" ref-ucid="WO-2012118579-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="22"/>-->The following is claimed: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method for calibrating or field calibrating rotor position offset, the method comprising: </claim-text><claim-text> while providing a fake rotor position and while applying a zero direct-axis current command, applying positive and negative quadrature-axis current commands sequentially and at approximately same magnitude to urge the rotor toward, an enforced position; </claim-text><claim-text> measuring a positive quadrature-axis current aligned raw position data after application of the positive quadrature-axis current command and measuring negative quadrature-axis current aligned raw position data for the rotor after application of the, negative quadrature-axis command; </claim-text><claim-text> determining a difference between the raw position data to determine an alignment, of a true averaging axis; </claim-text><claim-text> determining a raw averaging axis position data based on an average of the raw position data; and </claim-text><claim-text> determining a position offset based on a difference between the determined true averaging axis and the determined raw averaging axis position data. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method according to claim 1 wherein the determining the alignment of the true averaging axis comprises determining whether the true averaging axis is aligned at approximately zero degrees or approximately 180 degrees for the rotor with respect to the stator based on the determined difference between the raw position data, where the fake rotor position is approximately zero degrees. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method according to claim 1 wherein the fake rotor position is fixed at approximately zero degrees for use within a Park transformation with a phase converter for converting measured three phase current representations into two phase current <!-- EPO <DP n="23"/>--> representations. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method according to claim 1 wherein if the determining a difference between the measured positive quadrature-axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is greater than approximately 185 degrees (or around 185 degrees) and if the measured negative quadrature-axis current aligned raw position data is greater than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the true position offset: </claim-text><claim-text>Θ■ , -θ - &gt; 185° . then 0„, ,<sub>w</sub> = 0° and </claim-text><claim-text> , = Θ , -360° , such that Θ . . &lt; 175° </claim-text><claim-text> e . +e°* . </claim-text><claim-text> and then . ^ =^4_J5i </claim-text><claim-text> Θ , </claim-text><claim-text> such that the position offset is θ<sub>οβΜ</sub> = 0<sub>mh Jnie</sub> -θ^ ^ = - where is the first aligned raw position data associated with the negative quadrature- axis current command, 9posj'<sub>q</sub> s the second aligned raw position data associated with the nadj n g i'q positive quadrature-axis current command, e<sub>w</sub>aj n,<sub>e</sub> is the true averaging axis, is<sup>'</sup> the adjusted first aligned raw position data associated with the negative quadrature-axis current command, Θ axi<sub>s</sub>_rsw is the raw averaging axis position data, and the position offset is e<sub>of!se</sub>t, and where the above 175 degrees is around 175 degrees. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method according to claim 1 wherein if the determining a difference between the measured positive quadrature-axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is less than approximately 175 <!-- EPO <DP n="24"/>--> degrees (or around 175 degrees) and if the measured negative quadrature-axis current aligned raw position data is less than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the true position offset: </claim-text><claim-text> Θ , -θ , &lt;m , then 6L <sub>Λ</sub> =0<sup>e</sup> and then θ<sub>αιί m</sub>. <img id="imgf000024_0001" he="9" wi="25" file="imgf000024_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> <sub>sucn</sub> that the position offset is θ . +0 . </claim-text><claim-text> θ offset = ~ θ axis r e -Θ "axis raw - "-'<sup>&lt;</sup> ^ '^-' </claim-text><claim-text>where Bnegj'q is the first aligned raw position data associated with the negative quadrature- axis current command, <img id="imgf000024_0002" he="5" wi="13" file="imgf000024_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> the second aligned raw position data' associated with the positive quadrature-axis current command, 6a^<sub>J n</sub>,<sub>e</sub> is the true averaging axis<sup>'</sup>, Θ <sub>3X</sub>/<sub>S</sub>_<sub>raw</sub> is the raw averaging axis position data, <img id="imgf000024_0003" he="6" wi="47" file="imgf000024_0003.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method according to claim 1 wherein if the determining a difference between the measured positive quadrature -axis current aligned raw, position data and the measured negative quadrature-axis current aligned raw position data is less than approximately 175 degrees (or around 175 degrees) and if the measured negative quadrature -axis current aligned raw position data is greater than the measured positive quadrature -axis current aligned raw position data, then the following equations apply to determining the position offset: θ , -θ , &lt; m , then 9 .<sub>s me</sub> = 180° or 6&gt; <sub>ine</sub> = -180° </claim-text><claim-text> θ , +θ , - and then axis <sub>^</sub>„ raw = ^ ^ ^ </claim-text><claim-text> Q </claim-text><claim-text> such that position offset is θ<sub>φα</sub> = - = 180' ~S=L- where 9<sub>neg</sub>j-q is the first aligned raw position data associated with the negative quadrature- axis current command, is the second aligned raw position data associated with the <!-- EPO <DP n="25"/>--> positive quadrature-axis current command, is the true averaging axis, , θ <sub>axi5 aw</sub> is the raw averaging axis position data, and the position offset is 0<sub>offse(</sub>. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method according to claim 1 wherein if the determining a difference between the measured positive quadrature -axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is greater than approximately 185 degrees and if the measured negative quadrature -axis current aligned raw position data is less than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the position offset: </claim-text><claim-text>Θ , &gt; 185\ then0 ' = 180' or 6&gt; = -180<sup>°</sup> .„ </claim-text><claim-text> If *»_', «¾_', ausjnz and then </claim-text><claim-text> ≠ . = 9 , -360° , such that Θ , &lt; 175<sup>s</sup> </claim-text><claim-text> 9* . + 9 . </claim-text><claim-text> and then ^ = such that position offset is θ <sub>ι</sub> =</claim-text><claim-text><img id="imgf000025_0001" he="13" wi="59" file="imgf000025_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> where Qnnjt is the first aligned raw position data associated with the negative quadrature- axis current command, 9pos_rq i<sup>s</sup> *<sup>ne</sup> second aligned raw position data associated with the </claim-text><claim-text>' pos_rq positive quadrature-axis current command, is the true averaging axis, is the adjusted second aligned raw position data associated with the positive quadrature-axis current command, d <sub>ax;sjsw</sub> is the raw averaging axis position data, and the position offset is </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. A method for field calibrating rotor position offset by controlling an electrical motor comprising a rotor with associated magnets and a stator, the method comprising: <!-- EPO <DP n="26"/>--> while a fake rotor position is provided in a data processing system, applying a positive quadrature-axis current command of a magnitude at a first time and a negative quadrature-axis current command of the substantially same magnitude to the motor at a second time to move the rotor toward an enforced position of the rotor, the second time, distinct from the first time; </claim-text><claim-text> while the fake rotor position is applied in the data processing system, applying a zero direct-axis current command to the motor while applying the quadrature-axis current commands associated with the enforced position; </claim-text><claim-text> measuring a positive quadrature -axis current aligned raw position data for the rotor of the motor after application of the positive quadrature-axis current command and measuring negative quadrature -axis current aligned raw position data for the rotor after application of the negative quadrature-axis command; </claim-text><claim-text> determining a difference between the measured positive quadrature -axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data to determine whether a true averaging axis is aligned at approximately zero degrees or approximately 180 degrees for the rotor with respect to the stator, where the fake rotor position is approximately zero degrees; </claim-text><claim-text> determining raw averaging axis position data based on an average of the measured positive quadrature -axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data, or where the averaging axis is based on an adjusted raw position data of at least one of the measured positive quadrature-axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data; and </claim-text><claim-text> determining a position offset based on a difference between the determined true averaging axis and the determined raw averaging axis position data. <!-- EPO <DP n="27"/>--> </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method according to claim 8 further comprising: </claim-text><claim-text> determining whether the three motor leads phase sequence is matching with the raw position data based on applying a monotonic varying position profile associated with a direct voltage command in direct and quadrature axes to the motor; </claim-text><claim-text> observing the direction of the rotation associated with rotor and verifying the forward direction of rotation of the rotor during the application of the monotonic increasing position profile associated with the direct voltage command in direct and quadrature axes to the motor. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method according to claim 8 wherein the measured raw position data results from the application of one or more quadrature-axis current commands with opposite magnitudes. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method according to claim 8 wherein if the determining a difference between the measured positive quadrature-axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is greater than approximately 185 degrees (or around 185 degrees) and if the measured negative quadrature-axis current aligned raw position data is greater than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the true position offset: </claim-text><claim-text> θ , -θ , &gt; 185° , then ,„ = &lt;T and </claim-text><claim-text> Θ<sup>4</sup> . = Θ . -360· , such that θ , , &lt; 175' </claim-text><claim-text> Θ , , </claim-text><claim-text> and then Θ„<sub>Ι5 m</sub> = such that the position offset is = <sub>lm!</sub> <img id="imgf000027_0001" he="9" wi="28" file="imgf000027_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> <!-- EPO <DP n="28"/>--> where 9<sub>neg</sub>j-<sub>q</sub> is the first aligned raw position data associated with the negative quadrature- axis current command, <img id="imgf000028_0001" he="5" wi="10" file="imgf000028_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> is the second aligned raw position data associated with the nadj positive quadrature-axis current command, 9<sub>a</sub>m<sub>J rue</sub> is the true averaging axis, <sup>' '</sup> is the adjusted first aligned raw position data associated with the negative quadrature-axis current command, Θ <sub>axis gw</sub> is the raw averaging axis position data, and the position offset is (¼,<sub>/</sub>¾&gt;&lt;. and where the above 175 degrees is around 175 degrees. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method according to claim 8 wherein if the determining a difference between the measured positive quadrature-axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is less than approximately 17.5 degrees and if the measured negative quadrature-axis currerit aligned raw position data is less than the measured positive quadrature-axis current aligned raw position data, then the following equations apply t determining the true position offset: </claim-text><claim-text> θ . &lt; 175\ then 6^, ^ =0' and </claim-text><claim-text> θ , + θ<sub>ηί</sub> , </claim-text><claim-text> = <sup>M"¾</sup> <sub>2</sub> <sup>such tnat tne</sup> position offset is </claim-text><claim-text> 9 , +Θ .. </claim-text><claim-text> _Q where e<sub>neg</sub>_<sub>rq</sub> is the first aligned raw position data associated with the negative quadrature- axis current command, e^ s the second aligned raw position data associated with the positive quadrature-axis current command, 9<sub>ax</sub>i<sub>SJ m</sub> is the true averaging axis, , Θ is the raw averaging axis position data, and the position offset is 0<sub>offsei</sub>. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method according to claim 8 wherein if the determining a difference between the measured positive quadrature-axis current aligned raw position data and the measured <!-- EPO <DP n="29"/>--> negative quadrature-axis current aligned raw position data is less than approximately 175 degrees (or around 175 degrees) and if the measured negative quadrature -axis current aligned raw position data is greater than the measured positive quadrature -axis current aligned raw position data, then the following equations apply to determining the position offset: </claim-text><claim-text>| Θ ""g ,f -θ ftj ,q &lt;n5° A er<sub>l</sub> e<sub>a</sub> a<sub>x</sub>a,,s <sub>ln</sub>rv<sub>M</sub>e =m' or e<sub>i</sub> a<sub>r</sub>xis,j<sub>ln</sub>ru<sub>M</sub>e =-m </claim-text><claim-text> θ . +Θ , </claim-text><claim-text> and then βas raw - "y^-y </claim-text><claim-text> Θ . +0. . </claim-text><claim-text> such that position offset is 9^ = 9^ <sub>lmt</sub> -θ^_„ = 180' - J==i- 5i where 9<sub>neg</sub>_i-<sub>q</sub> is the first aligned raw position data associated with the negative quadrature- axis current command, 0pos<sub>j</sub> <sup>s</sup> the second aligned raw position data associated with the positive quadrature-axis current command, <img id="imgf000029_0001" he="5" wi="12" file="imgf000029_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> is the true averaging axis, Θ ax/s.ra is the raw averaging axis position data, and the position offset is θ^. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method according to claim 8 wherein if the determining a difference between the measured positive quadrature ^axis current aligned raw position data and the measured negative quadrature-axis current aligned raw position data is greater than approximately 185 degrees (or around 185 degrees) and if the measured negative quadrature -axis current aligned raw position data is less than the measured positive quadrature-axis current aligned raw position data, then the following equations apply to determining the position offset: </claim-text><claim-text>9 , -9 ,. &gt; 185° , then £L , = 180° or 6&gt; <sub>TO</sub> = -180" .„ </claim-text><claim-text> If I** J, <sup>&lt;n,,</sup>-"<sup>w avs</sup>-<sup>,ru!</sup> and then </claim-text><claim-text> ff* .. = 9 , -360<sup>e</sup> , such that θ , &lt;175' </claim-text><claim-text> ff* . +Θ . </claim-text><claim-text> and then ^ such that position offset is = 9^ -9^ = *0° - ^ <sup>Jt</sup> <!-- EPO <DP n="30"/>--> where Q<sub>neg</sub>j<sub>q</sub> is the first aligned raw position data associated with the negative quadrature- axis current command, is the second aligned raw position data associated withjhe pos *q positive quadrature-axis current command, Q<sub>axisJ ne</sub> is the true averaging axis, ~ is the adjusted second aligned raw position data associated with the positive quadrature-axis current command, Θ <sub>axisjaw</sub> is the raw averaging axis position data, and the position offset is Qotfset, and where the above 175 degrees is. around 175 degrees. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method according to claim 8 wherein the motor comprises an interior permanent magnet motor or another machine where the magnetic torque component and the reluctance torque component of the machine lie along different axes. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. A system for calibrating or field calibrating rotor position offset, the system comprising; an inverter for continuously applying a zero direct-axis current command and for sequentially applying positive and negative quadrature-axis current commands at approximately same magnitude to urge the rotor toward an enforced position, while providing a fake rotor position to a phase converter of the inverter for transformation of three phase, representations into two phase representations; </claim-text><claim-text> a sensing circuit for measuring a positive quadrature-axis current aligned raw position data after application of the positive quadrature-axis current command and measuring negative quadrature-axis current aligned raw position data for the rotor after application of the negative quadrature-axis command; </claim-text><claim-text> a calibrator for determining a difference between the raw position data to determine an alignment of a true averaging axis, the calibrator adapted to determine a raw averaging axis position data based on an average of the raw position data; and the calibrator adapted <!-- EPO <DP n="31"/>--> to determine a position offset based on a difference between the determined true averaging, axis and the determined raw averaging axis position data. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The system according to claim 16 wherein the calibrator is adapted to determine whether the true averaging axis is aligned at approximately zero degrees or approximately 180 degrees for the rotor with respect to the stator based on the determined difference between the raw position data. </claim-text><claim-text>18, The system according to claim 16 further comprising: </claim-text><claim-text> a motor with motor leads attached to motor terminals; </claim-text><claim-text>an inverter for applying a monotonic varying position profile associated with a direct voltage command in direct and quadrature axes to the motor to determine whether the three motor leads phase sequence is matching with the raw position data; an </claim-text><claim-text> a sensing circuit for observing the direction of the rotation associated with rotor and verifying the forward direction of rotation of the rotor during the application of the monotonic increasing position profile associated with the direct voltage command in direct and quadrature axes to the motor. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
