<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681937-A1" country="EP" doc-number="2681937" kind="A1" date="20140108" family-id="46753257" file-reference-id="263983" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586351" ucid="EP-2681937-A1"><document-id><country>EP</country><doc-number>2681937</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12751783-A" is-representative="NO"><document-id mxw-id="PAPP154848543" load-source="docdb" format="epo"><country>EP</country><doc-number>12751783</doc-number><kind>A</kind><date>20120301</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220440069" load-source="docdb" format="original"><country>EP</country><doc-number>12751783.7</doc-number><date>20120301</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553380" ucid="US-201161448044-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161448044</doc-number><kind>P</kind><date>20110301</date></document-id></priority-claim><priority-claim mxw-id="PPC140547233" ucid="US-2012027281-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012027281</doc-number><kind>W</kind><date>20120301</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2100276428" load-source="docdb">H04W   8/18        20090101ALI20140716BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100277203" load-source="docdb">H04L  12/725       20130101ALI20140716BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100279624" load-source="docdb">H04W   8/02        20090101AFI20140716BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1989628785" load-source="docdb" scheme="CPC">H04L  63/0892      20130101 LA20130322BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989633848" load-source="docdb" scheme="CPC">H04L  45/304       20130101 LA20130710BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989646844" load-source="docdb" scheme="CPC">H04L  67/327       20130101 FI20131017BHEP        </classification-cpc><classification-cpc mxw-id="PCL2102379284" load-source="docdb" scheme="CPC">H04W  40/02        20130101 LI20140731BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363686" lang="DE" load-source="patent-office">VERFAHREN, SYSTEME UND COMPUTERLESBARE MEDIEN FÜR HYBRIDSITZUNGSBASIERTES DURCHMESSER-ROUTING</invention-title><invention-title mxw-id="PT132363687" lang="EN" load-source="patent-office">METHODS, SYSTEMS, AND COMPUTER READABLE MEDIA FOR HYBRID SESSION BASED DIAMETER ROUTING</invention-title><invention-title mxw-id="PT132363688" lang="FR" load-source="patent-office">PROCÉDÉS, SYSTÈMES ET SUPPORTS LISIBLES PAR ORDINATEUR POUR ROUTAGE DIAMETER À BASE DE SESSION HYBRIDE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919513108" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TEKELEC INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919541658" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TEKELEC, INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR919007791" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tekelec, Inc.</last-name><iid>101326835</iid><address><street>5200 Paramount Parkway</street><city>Morrisville, NC 27560</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919534510" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KARUTURI SRIDHAR</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919525089" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KARUTURI, SRIDHAR</last-name></addressbook></inventor><inventor mxw-id="PPAR919019525" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KARUTURI, SRIDHAR</last-name><address><street>4105 Crystal Clay Court</street><city>Raleigh, NC 27613</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919541794" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MARSICO PETER J</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919528678" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MARSICO, PETER, J.</last-name></addressbook></inventor><inventor mxw-id="PPAR919013368" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MARSICO, PETER, J.</last-name><address><street>1415 Preston Spring Lane</street><city>Chapel Hill, NC 27516</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919018947" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Skone James, Robert Edmund</last-name><iid>100024113</iid><address><street>Gill Jennings &amp; Every LLP The Broadgate Tower 20 Primrose Street</street><city>London EC2A 2ES</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012027281-W"><document-id><country>US</country><doc-number>2012027281</doc-number><kind>W</kind><date>20120301</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118967-A1"><document-id><country>WO</country><doc-number>2012118967</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549914465" load-source="docdb">AL</country><country mxw-id="DS549851142" load-source="docdb">AT</country><country mxw-id="DS549914466" load-source="docdb">BE</country><country mxw-id="DS549759950" load-source="docdb">BG</country><country mxw-id="DS549836937" load-source="docdb">CH</country><country mxw-id="DS549769757" load-source="docdb">CY</country><country mxw-id="DS549851143" load-source="docdb">CZ</country><country mxw-id="DS549759571" load-source="docdb">DE</country><country mxw-id="DS549769758" load-source="docdb">DK</country><country mxw-id="DS549769759" load-source="docdb">EE</country><country mxw-id="DS549837118" load-source="docdb">ES</country><country mxw-id="DS549759951" load-source="docdb">FI</country><country mxw-id="DS549759952" load-source="docdb">FR</country><country mxw-id="DS549914467" load-source="docdb">GB</country><country mxw-id="DS549914468" load-source="docdb">GR</country><country mxw-id="DS549914469" load-source="docdb">HR</country><country mxw-id="DS549851144" load-source="docdb">HU</country><country mxw-id="DS549837366" load-source="docdb">IE</country><country mxw-id="DS549914470" load-source="docdb">IS</country><country mxw-id="DS549759957" load-source="docdb">IT</country><country mxw-id="DS549769760" load-source="docdb">LI</country><country mxw-id="DS549759572" load-source="docdb">LT</country><country mxw-id="DS549851145" load-source="docdb">LU</country><country mxw-id="DS549759585" load-source="docdb">LV</country><country mxw-id="DS549759586" load-source="docdb">MC</country><country mxw-id="DS549837281" load-source="docdb">MK</country><country mxw-id="DS549837290" load-source="docdb">MT</country><country mxw-id="DS549851150" load-source="docdb">NL</country><country mxw-id="DS549837119" load-source="docdb">NO</country><country mxw-id="DS549851151" load-source="docdb">PL</country><country mxw-id="DS549759587" load-source="docdb">PT</country><country mxw-id="DS549851152" load-source="docdb">RO</country><country mxw-id="DS549759588" load-source="docdb">RS</country><country mxw-id="DS549851153" load-source="docdb">SE</country><country mxw-id="DS549759593" load-source="docdb">SI</country><country mxw-id="DS549837367" load-source="docdb">SK</country><country mxw-id="DS549837368" load-source="docdb">SM</country><country mxw-id="DS549837291" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99830284" ref-ucid="WO-2012118967-A1" lang="EN" load-source="patent-office"><p num="0000">Methods, systems, and computer readable media for hybrid session based Diameter routing are disclosed. According to one method, the method comprises receiving, at a first Diameter signaling router (DSR), a first Diameter message for processing by a Diameter server. The method also includes selecting, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed. The method further includes determining whether the first Diameter server is available. The method also includes, in response to determining that the first Diameter server is not available, selecting a second Diameter server to which the first Diameter message is to be routed and creating an exception binding record that associates the second Diameter server and information in the first Diameter message.</p></abstract><abstract mxw-id="PA100327112" ref-ucid="WO-2012118967-A1" lang="EN" source="national office" load-source="docdb"><p>Methods, systems, and computer readable media for hybrid session based Diameter routing are disclosed. According to one method, the method comprises receiving, at a first Diameter signaling router (DSR), a first Diameter message for processing by a Diameter server. The method also includes selecting, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed. The method further includes determining whether the first Diameter server is available. The method also includes, in response to determining that the first Diameter server is not available, selecting a second Diameter server to which the first Diameter message is to be routed and creating an exception binding record that associates the second Diameter server and information in the first Diameter message.</p></abstract><abstract mxw-id="PA99830285" ref-ucid="WO-2012118967-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention porte sur des procédés, des systèmes et des supports lisibles par ordinateur pour routage Diameter à base de session hybride. Selon un procédé, le procédé consiste à recevoir, au niveau d'un premier routeur de signalisation Diameter (DSR), un premier message Diameter destiné à être traité par un serveur Diameter. Le procédé consiste également à sélectionner, à l'aide d'un algorithme de sélection de nœud Diameter qui opère sur au moins un paramètre figurant dans le premier message Diameter sans requérir l'utilisation d'informations d'association Diameter stockées, un premier serveur Diameter vers lequel le premier message Diameter doit être routé. Le procédé consiste en outre à déterminer si le premier serveur Diameter est ou non disponible. Le procédé consiste également, en réponse à la détermination du fait que le premier serveur Diameter n'est pas disponible, à sélectionner un second serveur Diameter vers lequel le premier message Diameter doit être routé et à créer un enregistrement d'association d'exception qui associe le second serveur Diameter et des informations figurant dans le premier message Diameter.</p></abstract><abstract mxw-id="PA100327113" ref-ucid="WO-2012118967-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention porte sur des procédés, des systèmes et des supports lisibles par ordinateur pour routage Diameter à base de session hybride. Selon un procédé, le procédé consiste à recevoir, au niveau d'un premier routeur de signalisation Diameter (DSR), un premier message Diameter destiné à être traité par un serveur Diameter. Le procédé consiste également à sélectionner, à l'aide d'un algorithme de sélection de noeud Diameter qui opère sur au moins un paramètre figurant dans le premier message Diameter sans requérir l'utilisation d'informations d'association Diameter stockées, un premier serveur Diameter vers lequel le premier message Diameter doit être routé. Le procédé consiste en outre à déterminer si le premier serveur Diameter est ou non disponible. Le procédé consiste également, en réponse à la détermination du fait que le premier serveur Diameter n'est pas disponible, à sélectionner un second serveur Diameter vers lequel le premier message Diameter doit être routé et à créer un enregistrement d'association d'exception qui associe le second serveur Diameter et des informations figurant dans le premier message Diameter.</p></abstract><description mxw-id="PDES51232172" ref-ucid="WO-2012118967-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> DESCRIPTION </p><p id="p0002" num="0002"> METHODS, SYSTEMS, AND COMPUTER READABLE MEDIA FOR HYBRID SESSION BASED DIAMETER ROUTING PRIORITY CLAIM </p><p id="p0003" num="0003"> This application claims the benefit of U.S. Provisional Patent Application Serial No. 61/448,044 filed March 1 , 2011 ; the disclosure of which is incorporated herein by reference in its entirety. TECHNICAL FIELD </p><p id="p0004" num="0004"> The subject matter described herein relates to enhancing Diameter binding records that associate mobile subscribers with network service nodes. More specifically, the subject matter relates to methods, systems, and computer readable media for hybrid session based Diameter routing. </p><p id="p0005" num="0005">BACKGROUND </p><p id="p0006" num="0006"> At present, problems exist with the assignment of Diameter based network service nodes to Diameter signaling messages associated with a common signaling transaction and/or mobile subscriber. Namely, there are difficulties associated with the identification and correlation of subsequently received Diameter signaling messages to the initially received Diameter signaling message transaction. As a consequence, Diameter signaling messages received at a Diameter routing node may not be forwarded to the same network service node assigned to an existing Diameter signaling message transaction that is associated with a particular mobile subscriber. </p><p id="p0007" num="0007"> Accordingly, a need exists for improved methods, systems, and computer readable media for hybrid session based Diameter routing. </p><p id="p0008" num="0008">SUMMARY </p><p id="p0009" num="0009"> Methods, systems, and computer readable media for hybrid session based Diameter routing are disclosed. According to one method, the method comprises receiving, at a first Diameter signaling router (DSR), a first Diameter message for processing by a Diameter server. The method 
<!-- EPO <DP n="3"/>-->
 also includes selecting, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed. The method further includes determining whether the first Diameter server is available. The method also includes, in response to determining that the first Diameter server is not available, selecting a second Diameter server to which the first Diameter message is to be routed and creating an exception binding record that associates the second Diameter server and information in the first Diameter message. </p><p id="p0010" num="0010"> A system for hybrid session based Diameter routing is also disclosed. The system includes a Diameter binding repository (DBR) and a Diameter routing module (DRM) located at a Diameter signaling router (DSR). The DBR is configured to store Diameter binding records. The DRM is communicatively associated with the communications interface and configured to select, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed, to determine whether the first Diameter server is available, in response to determining that the first Diameter server is not available, to select a second Diameter server to which the first Diameter message is to be routed, and to create an exception binding record that associates the second Diameter server and information in the first Diameter message. </p><p id="p0011" num="0011"> The subject matter described herein may be implemented in software in combination with hardware and/or firmware. For example, the subject matter described herein may be implemented in software executed by a processor. In one exemplary implementation, the subject matter described herein for hybrid session based Diameter routing may be implemented using a non-transitory computer readable medium to having stored thereon executable instructions that when executed by the processor of a computer control the processor to perform steps. Exemplary non-transitory computer readable media suitable for implementing the subject matter described 
<!-- EPO <DP n="4"/>-->
 herein include chip memory devices or disk memory devices accessible by a processor, programmable logic devices, and application specific integrated circuits. In addition, a computer readable medium that implements the subject matter described herein may be located on a single computing platform or may be distributed across plural computing platforms. </p><p id="p0012" num="0012"> As used herein, the term "node" refers to a physical computing platform including one or more processors and memory. </p><p id="p0013" num="0013"> As used herein, the terms "function," "engine," or "module" refer to hardware, firmware, or software in combination with hardware and/or firmware for implementing features described herein. </p><p id="p0014" num="0014">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0015" num="0015"> The subject matter described herein will now be explained with reference to the accompanying drawings of which: </p><p id="p0016" num="0016"> Figure 1 is a block diagram illustrating a system for hybrid session based Diameter routing according to an embodiment of the subject matter described herein; </p><p id="p0017" num="0017"> Figure 2 is an exemplary table depicting Diameter binding record data according to an embodiment of the subject matter described herein; </p><p id="p0018" num="0018"> Figure 3 is a message sequence diagram illustrating routing Diameter signaling messages using binding information according to an embodiment of the subject matter described herein; </p><p id="p0019" num="0019"> Figures 4A and 4B are portions of a message sequence diagram illustrating routing Diameter signaling messages using exception binding information according to an embodiment of the subject matter described herein; </p><p id="p0020" num="0020"> Figure 5A is a message sequence diagram illustrating routing a Diameter signaling message after a node has recently recovered according to an embodiment of the subject matter described herein; </p><p id="p0021" num="0021"> Figure 5B is a message sequence diagram illustrating routing</p><p id="p0022" num="0022">Diameter signaling messages after a node has recently recovered according to another embodiment of the subject matter described herein; 
<!-- EPO <DP n="5"/>-->
 Figure 5C is a message sequence diagram illustrating routing a Diameter signaling message having a stop event type according to an embodiment of the subject matter described herein; and </p><p id="p0023" num="0023"> Figure 6 is a flow chart illustrating an exemplary process for hybrid session based Diameter routing according to an embodiment of the subject matter described herein. </p><p id="p0024" num="0024">DETAILED DESCRIPTION </p><p id="p0025" num="0025"> The subject matter described herein includes methods, systems, and computer readable media for hybrid session based Diameter routing. As used herein, the term Diameter refers to the authentication, authorization, and accounting (AAA) protocol utilized by telecommunications and computer networks as defined by RFC 3588. In some embodiments, the present subject matter may include a Diameter signaling router (DSR) that receives a Diameter signaling message associated with a particular mobile subscriber. The received Diameter signaling message may require processing from a particular type of network service node, such as a network charging function node (e.g., a charging data function (CDF), a policy and charging rules function (PCRF), etc.) and home subscriber server (HSS), or AAA node. Upon receiving a Diameter signaling message, the DSR may be configured to either assign one of a plurality of network service nodes to process the received Diameter signaling message or determine whether a network service node is already assigned (or "bound") to the mobile subscriber, such as by consulting a binding repository for binding information. </p><p id="p0026" num="0026"> In some embodiments, the DSR may be configured to determine or select an appropriate network service node (e.g., a CDF or PCRF) based on a node selection algorithm, such as a load balancing hashing function (LBHF) that uses information contained in the received Diameter signaling message. The present subject matter may also include a binding repository, such as a hash exceptions session binding repository (HE-SBR), for maintaining exceptions to bindings (e.g., node selections) generated by the selection algorithm. For example, exception binding records may be created when a node different from the node initially selected using a node selection 
<!-- EPO <DP n="6"/>-->
 algorithm is to be routed a Diameter signaling message for processing. More particularly, exception binding records may be created when an initially selected node is unusable or not available and, as such, another node is to process Diameter signaling messages that would have been processed by the initially selected node. </p><p id="p0027" num="0027"> Advantageously, the subject matter described herein can be utilized such that the need to maintain state or a binding record for each Diameter session is minimized or avoided. For example, in most scenarios, the present subject matter allows Diameter messages to be load-balanced and/or routed in a "stateless" manner through dynamic use of a node selection algorithm, such as an LBHF. However, in scenarios where a selected destination Diameter node (e.g., CDF, PCRF, etc.) is unusable (e.g., fails or is not available), the present subject matter provides a Diameter binding repository, such as a HE-SBR, for storing exception binding records that associate a Diameter session and/or user and an alternate node (e.g., a node that is different from the node initially selected by the selection algorithm). </p><p id="p0028" num="0028"> Accordingly, the present subject matter may include a hybrid session based routing solution that requires maintaining an exception binding record when a node selection algorithm selects an unavailable or recently unavailable network service node (e.g., a Diameter server) for processing Diameter messages associated with a given subscriber and/or session, but may not require maintaining binding information for every Diameter session or related user. As compared to solutions that require an explicit binding record for each Diameter session, the present subject matter provides a much more efficient solution in terms of processing and storage resource usage. For example, by only storing binding information for exceptional scenarios, a hybrid session based routing solution in accordance with aspects of the present subject matter may use significantly less memory resources than other session-based routing solutions. </p><p id="p0029" num="0029"> Reference will now be made in detail to exemplary embodiments of the subject matter described herein, examples of which are illustrated in the 
<!-- EPO <DP n="7"/>-->
 accompanying drawings. Wherever possible, the same reference numbers will be used throughout the drawings to refer to the same or like parts. </p><p id="p0030" num="0030"> Figure 1 depicts an exemplary system 100 for hybrid session based Diameter routing according to an embodiment of the subject matter described herein. In some embodiments, system 100 may be implemented in a Long Term Evolution (LTE) network, an Internet protocol Multimedia Subsystem (IMS) network, or other networks without departing from the scope of the present subject matter. </p><p id="p0031" num="0031"> System 100 may include one or more Diameter routing nodes, e.g., DSR X 104i, configured to receive a Diameter signaling message that is associated with a mobile subscriber. Although Figure 1 illustrates the use of a DSR, any network node that is configured to route Diameter signaling messages may be utilized without departing from the scope of the subject matter. For example, the network node may also include a Diameter routing agent (DRA), a Diameter proxy agent (DPA), a Diameter relay agent, a Diameter translation agent, and the like. </p><p id="p0032" num="0032"> In some embodiments, DSR X 104i may include a Diameter routing module or engine (DRE) 122 that may be configured to route Diameter signaling messages between various Diameter nodes on various Diameter interfaces including, but not limited to, the Gy, Ro, Rf, S6d, and S6a interfaces. DSR X 104i and/or DRE 122 may also be configured to perform one or more aspects associated with hybrid session based routing as described herein. </p><p id="p0033" num="0033"> Exemplary Diameter based signaling messages received and/or routed by DSR X 104i may include a credit control request (CCR) message, an accounting request (ACR) message, an update location request (ULR) message, a Diameter mobility management message, and a Diameter charging message. In some embodiments, the Diameter based signaling message may be sent to the Diameter routing node by a network node (not shown) such as, for example, a policy and charging enforcement function (PCEF) node, a gateway GPRS support node (GGSN), a mobility management entity (MME), and a public data network (PDN) gateway. 
<!-- EPO <DP n="8"/>-->
 DSR X 104i may also include a binding query client (BQC) 124 that is configured to communicate (e.g., send and receive) Diameter based signaling messages to one or more DBRs (e.g., HE-SBR 102i). </p><p id="p0034" num="0034"> In some embodiments, the Diameter signaling message received by DSR X 104i may originally be destined or addressed to a network service node that is capable of processing the Diameter signaling message. For example, a network service node may include a policy and charging rules function (PCRF) node 114, a network charging node (e.g., a charging data function (CDF) 112, a charging trigger function (CTF), a charging gateway function (CGF)), an online charging system (OCS) node, an offline charging system (OFCS) node, a home subscriber server (HSS) 106, a home location register node (HLR) 108, an AAA node 105, a subscriber profile repository 110, and a call session control function (CSCF) node. Although Figure 1 depicts various network service nodes to which the Diameter signaling message may be routed, any other type of network service node(s) configured for servicing a Diameter signaling message may be utilized in system 100 without departing from the scope of the present subject matter. </p><p id="p0035" num="0035"> DSR X 104i may interact with various subscriber data management (SDM) nodes, such as SPR 110, HSS 106, and HLR 108. An SDM node may be a designated network node configured to store and/or maintain additional mobile subscriber information, such as identifiers and service and policy profile information associated with the mobile subscriber. An SDM node may be queried by DSR X 104i for the additional mobile subscriber information (e.g., identifiers). Other exemplary SDM nodes include PCRF node 114 and a CSCF node. </p><p id="p0036" num="0036"> System 100 may includes one or more Diameter binding repository (DBR), such as an HE-SBR 102t, for maintaining various binding records. HE-SBR 102-1 may include a binding query server (BQS) 126 that hosts a binding database 128. In some embodiments, binding database 128 may be configured to store Diameter binding records that provide associations (e.g., Diameter-related bindings, mappings, links, etc.) of mobile subscriber related identifiers and assigned network service nodes. Exemplary Diameter-related bindings stored by HE-SBR 102i may include, but are not limited to, a 
<!-- EPO <DP n="9"/>-->
 Diameter session binding, Diameter session-identifier-to-network service node associations, Diameter end-to-end identifier-to-network service node associations, mobile subscriber identifier-to-network service node associations, charging identifier (e.g., IMS charging ID) to-network service node associations, and the like. In the embodiments illustrated herein, HE- SBR 102i is shown as being a stand-alone entity, such as a network node, a server, an application, a computing platform, or a database that is located separate from the Diameter signaling router. However, HE-SBR 102i may be co-located within a DSR or co-located within any other network node in other embodiments (not shown). </p><p id="p0037" num="0037"> In some embodiments, a network may include multiple modules or nodes (e.g., DSR Y 104<sub>2</sub> and HE-SBR 102<sub>2</sub>) having similar functionality to those described above. In such embodiments, each module or node may be may be communicatively connected with other similar nodes or modules. For example, as shown in Figure 1 , DSR X 104i or HE-SBR 102i may be configured to communicate with DSR Y 104<sub>2</sub> or HE-SBR 102<sub>2</sub>. In some other embodiments, multiple DSRs may be communicatively connected to a centralized HE-SBR or other binding repository. By allowing such communications, multiple DSRs may use binding information derived from a particular DSR for routing Diameter messages. </p><p id="p0038" num="0038"> Figure 2 illustrates an exemplary table 200 depicting Diameter binding record data according to an embodiment of the subject matter described herein. In some embodiments, table 200 may represent at least a portion of database 128 maintained at HE-SBR 102. Table 200 may include a plurality of mobile subscriber related identifiers 202-218 as column headers. For example, table 200 may include at least one column for each of: a Diameter session identifier 202, a user name 204, an IMPI identifier 208, an IMPU identifier 210, a SIP URI 212, an NAI 214, a mobile or dialable (mobile/dialable) number 216, and a user IP address 218, and access point name (APN) 220. Table 200 may also include a network service node column, such as a CDF identifier/address column 222. Table 200 may further include a time to live (TTL) column 224 for indicating how long a binding record is to be maintained or, in other words, indicating when a 
<!-- EPO <DP n="10"/>-->
 binding record is to be discarded. Although eleven columns are depicted in Figure 2, table 200 may include any number of columns associated with any type of identifier. </p><p id="p0039" num="0039"> In some embodiments, Diameter binding record data may be used in determining, identifying, and/or selecting a network service node, e.g., to process a particular Diameter transaction or related Diameter messages. For example, Diameter binding record data may be used to route transactions associated with a particular user as identified by an IMSI value to a particular HSS as identified by an HSS identifier. </p><p id="p0040" num="0040"> In some embodiments, an HE-SBR or DSR may be configured to provision table 200. For example, DSR X 104i may send a provisioning message to HE-SBR 102i. Upon receiving a provisioning message that contains Diameter binding record information (e.g., message 204 in Figure 2), HE-SBR 102i may add a new Diameter binding record to table 200. In this example, if HE-SBR 102<sub>!</sub> received a provisioning message that contained Diameter biding record information that included a Diameter session identifier of "678", a SIP URI of "ttt", and a user IP address of "ZZZ" associated with "CDF 1", then HE-SBR 102i may add the new Diameter binding record represented as the last line of table 200. </p><p id="p0041" num="0041"> Figure 3 is a message sequence diagram illustrating routing Diameter signaling messages using binding information according to an embodiment of the subject matter described herein. In this embodiment, DSR X 104i and DSR Y 10 <sub>2</sub> may be configured to employ identical or substantially similar LBHFs or other selection algorithms. For example, DSR X 104<sub>!</sub> or DSR Y 104<sub>2</sub> may use identical hashing functions such that related Diameter messages are routed to the same destination node regardless of which DSR receives it. </p><p id="p0042" num="0042"> Referring to Figure 3, in step 1 , a Diameter accounting request (ACR) start message "A" for processing by a CDF (e.g., CDF 1 112i or CDF 2 112<sub>2</sub>) may be received by DSR X 104i. In some embodiments, the ACR start message may indicate the start of an accounting or Diameter charging session and/or may be the first message of a particular Diameter transaction. The ACR start message may include a session identifier and a 
<!-- EPO <DP n="11"/>-->
 user identifier. For example, the ACR start message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0043" num="0043"> In some embodiments, after receiving the ACR start message, DSR X 10 ! may execute a Diameter node selection algorithm for selecting one of CDFs 112i For example, DSR X 104i may utilize an LBHF (e.g., a software module executed by a hardware processor in DSR X 104i) or other selection algorithm that when executed selects one CDF (e.g., CDF 1 112i) from the plurality of CDFs 112<sub>1-2</sub> to process the received ACR start message. The LBHF or selection algorithm may use various methods and/or factors for selecting an appropriate HSS. Exemplary selection methods may include one or more of: random selection, round-robin selection, load-based selection, user-based selection, session-based selection, location-based selection, and network-based selection. </p><p id="p0044" num="0044"> In some embodiments, an LBHF may use a session identifier and/or a subscriber identifier to generate a hash output that indicates a particular node. For example, DSR X 104i may use information contained in the ACR start message (e.g., a session identifier) as input for an LBHF. Other exemplary inputs that may be used include the number of available CDF nodes, a network or location identifier, a congestion indicator, a time of day, a priority indicator, and a service type. After providing one or more inputs, an LBHF may generate a hash output that directly or indirectly identifies to which of CDF 1 112·, or CDF 2 112<sub>2</sub> the ACR start message should be routed. For example, as shown in Figure 3, the LBHF output may indicate that the ACR start message should be routed to CDF 1 112i . </p><p id="p0045" num="0045"> In some embodiments, after receiving the ACR start message and prior to selecting a first Diameter server using a Diameter node selection algorithm, DSR X 104i may consult a binding repository (e.g., HE-SBR 112i) for an existing binding record that indicates to which node the first Diameter message is to be routed. If an existing binding record is found, DSR X 104i may route the first Diameter message to the node indicated by the existing binding record (e.g., without using a node selection algorithm). If an existing binding record is not found, DSR X 104i may select a node using a node selection algorithm. 
<!-- EPO <DP n="12"/>-->
 In some embodiments, before routing the ACR start message, DSR X 104i may determine whether CDF 1 112i is available (e.g., usable to successfully process the message). For example, confirming whether a node can successfully process a Diameter message may include determining that a node is currently available, that the node has not recently recovered from a failure, that the node includes or has access to pertinent information, and/or that the node has not recently been brought into service. </p><p id="p0046" num="0046"> Various methods may be used to determine whether a node is available. For example, DSRs 104 may periodically or aperiodically send probing messages to HE-SBRs 102 for determining availability. In another example, HE-SBRs 102 may periodically or aperiodically send alive or heartbeat messages to DSRs 104 for indicating availability. In yet another example, DSRs 104 may query a database, such as a network management system (NMS) database, for determining whether a node is usable to successfully process the message. </p><p id="p0047" num="0047"> In step 2, the ACR start message may be routed to CDF 1 112^ as determined by an LBHF or other selection algorithm. After receiving the ACR start message, CDF 1 112i may process the message and respond back with an accounting answer (ACA) message (not shown). </p><p id="p0048" num="0048"> In step 3, a Diameter ACR interim message "B" for processing by a</p><p id="p0049" num="0049">CDF (e.g., CDF 1 112, or CDF 1 112<sub>2</sub>) may be received by DSR Y 104<sub>2</sub>. In some embodiments, the ACR interim message may indicate the updating of an existing accounting session and/or may be a non-initial message (e.g., subsequent to an ACR start message) of a particular Diameter transaction. The ACR interim message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0050" num="0050"> After receiving the ACR interim message, DSR Y 104<sub>2</sub> may execute a node selection algorithm for selecting one of CDFs 112i.<sub>2</sub>. As stated above, DSR Y 104<sub>2</sub> may include identically or substantially similar selection algorithms as other DSRs in the network, including DSR X 104i. For example, DSR Y 104<sub>2</sub> and DSR X W4i may implement identical LBHFs. DSR Y 104<sub>2</sub> may use information contained in the ACR interim message 
<!-- EPO <DP n="13"/>-->
 (e.g., a session identifier) as input for an LBHF. In such an example, if the LBHF of DSR Y 104<sub>2</sub> uses the same input as the LBHF of DSR X 104i described above used to indicate a particular destination, the LBHF output of DSR Y 104<sub>2</sub> may indicate the same destination (e.g., CDF 1 102i). </p><p id="p0051" num="0051"> In step 4, the ACR interim message may be routed to CDF 1 112i, as determined by an LBHF or other selection algorithm. After receiving the ACR interim message, CDF 1 112i may process the message and respond back with an ACA message (not shown). </p><p id="p0052" num="0052"> While Figure 3 depicts ACR messages, it will be appreciated that various Diameter messages, such as credit control request (CCR) and credit control answer (CCA) messages, and various network service nodes, such as HSSs 112 or PCRFs 114, may be used without departing from the scope of the present subject matter. </p><p id="p0053" num="0053"> Figures 4A and 4B are portions of a message sequence diagram illustrating routing Diameter signaling messages using exception binding information according to an embodiment of the subject matter described herein. In this embodiment, DSR X 104i and DSR Y 104<sub>2</sub> may be configured to employ identical or substantially similar selection algorithms and may be configured to consult a local HE-SBR for exception binding information if a selected CDF is not available. </p><p id="p0054" num="0054"> Referring to Figure 4A, in step 1 , a Diameter ACR start message "A" for processing by a CDF (e.g., CDF 1 112i or CDF 2 112<sub>2</sub>) may be received by DSR X 104 The ACR start message may include a session identifier and a user identifier. For example, the ACR start message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0055" num="0055"> In some embodiments, after receiving the ACR start message, DSR X 104i may execute a node selection algorithm for selecting one of CDFs 112i-<sub>2</sub>. After providing one or more inputs, an LBHF may generate a hash output that that directly or indirectly identifies to which of CDF 1 112i or CDF 2 112<sub>2</sub> the ACR start message should be routed. For example, as shown in Figure 4A, the LBHF output may indicate that the ACR start message should be routed to CDF 1 112,. 
<!-- EPO <DP n="14"/>-->
 In some embodiments, before routing the ACR start message, DSR X 104i may determine whether CDF 1 112i is available. If it is determined that CDF 1 112i is available, DSR X 104i may route the message to the selected node. If it is determined that CDF 1 112i is not available, DSR X 104i may consult or query HE-SBR 102i for relevant binding information, such as an exception binding record. For example, an exception binding record may indicate an alternate, node that can successfully process the Diameter message. </p><p id="p0056" num="0056"> In some embodiments, consulting HE-SBR 102i may include using information from a received Diameter message as a key or input in a query or lookup procedure. For example, a session identifier from the ACR start message may be used as a lookup criterion for identifying relevant binding information in HE-SBR 102i. If an HE-SBR entry or record matches the lookup criterion, the binding information may be obtained and used by DSR X 104i in routing the Diameter message. </p><p id="p0057" num="0057"> In some embodiments, if no relevant binding information is found or available, a different or alternate CDF (e.g., CDF 1 112<sub>2</sub>) may be selected. Selecting an alternate CDF may be performed using various techniques. For example, DSR X 104i may use a same selection algorithm used to select the initial CDF but may provide additional and/or different information as input (e.g., by modifying the session identifier or other parameter that is used as an input in an LBHF). In another example, DSR X 104i may use a different selection algorithm to select another CDF (e.g., CDF 2 112<sub>2</sub>). </p><p id="p0058" num="0058"> In some embodiments, prior to routing the Diameter start message to an alternate destination, DSR X 104i may determine whether CDF 2 112<sub>2</sub> is available. In some other embodiments, the selection algorithm used to select an alternate CDF may remove or exclude unavailable CDFs from being selected. </p><p id="p0059" num="0059"> After selecting an alternate destination, DSR X 104i may store or initiate storing binding information in HE-SBR 102i. For example, DSR X 104i may create an exception binding record which associates the session identifier of the ACR start message and CDF 2 1 2<sub>2</sub>. In some embodiments, an exception binding record may include other information extracted or 
<!-- EPO <DP n="15"/>-->
 derived from the Diameter ACR start message or obtained from entities (e.g., SD nodes) in the network. The binding record may be stored in HE- SBR 102i, e.g., using an update or provisioning message. </p><p id="p0060" num="0060"> In some embodiments, DSR X 104<sub>!</sub> or HE-SBR 102i may communicate exception binding information to one or more DSRs and/or HE- SBRs in the network. For example, after storing exception binding information in local HE-SBR 102i, DSR X 104i may provide the record to a DSR Y 104<sub>2</sub>, which may its local hashing exception SBR. In some embodiments where a centralized HE-SBR maintains binding information, there may be no need to communicate binding information directly to additional DSRs. </p><p id="p0061" num="0061"> In step 2, an HE-SBR update message may be sent from DSR X 104<sub>!</sub> to DSR Y 102<sub>2</sub>. The HE-SBR update message may include a session identifier, a user identifier, and/or other information. The HE-SBR update message may include a binding record or indicate a binding association between message related information (e.g., a session identifier) and a CDF (e.g., CDF 2 112<sub>2</sub>). </p><p id="p0062" num="0062"> After receiving the HE-SBR update message, DSR Y 104<sub>2</sub> may store or initiate storing binding information in HE-SBR 102<sub>2</sub>. For example, as shown in Figure 4B, HE-SBR 102<sub>2</sub> may be updated to reflect binding information provided by DSR X 104i. </p><p id="p0063" num="0063"> In step 3, the ACR start message may be routed to CDF 2 112<sub>2</sub>, as determined by an LBHF or other selection algorithm. After receiving the ACR start message, CDF 2 112<sub>2</sub> may process the message and respond back with an ACA message (not shown). </p><p id="p0064" num="0064"> In step 4, a Diameter ACR interim message "B" for processing by a CDF (e.g., CDF 1 112-, or CDF 2 112<sub>2</sub>) may be received by DSR Y 104<sub>2</sub>. The ACR interim message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0065" num="0065"> After receiving the ACR interim message, DSR Y 104<sub>2</sub> may execute a node selection algorithm for selecting one of CDFs 112^. As stated above, DSR Y 104<sub>2</sub> may include identically or substantially similar selection 
<!-- EPO <DP n="16"/>-->
 algorithms as other DSRs in the network, including DSR X 104i. For example, as shown in Figure 4B, a hashing function may use a session identifier from the ACR interim message as input. The hashing function may indicate that CDF 1 112^ should process the message. </p><p id="p0066" num="0066"> DSR Y 104<sub>2</sub> may determine whether CDF 1 112i is available. If it is determined that CDF 1 112i is not available, DSR Y 104<sub>2</sub> may consult or query HE-SBR 102<sub>2</sub> for relevant binding information, such as an exception binding record. For example, a session identifier from the ACR interim message may be used as a lookup criterion for identifying relevant binding information in HE-SBR 102<sub>2</sub>. In this example, an HE-SBR entry (e.g., derived from binding information provided by DSR X 104i) that matches the lookup criterion may be located. The entry may indicate a binding between the session identifier of the ACR interim message and CDF 2 112<sub>2</sub>. DSR Y 104<sub>2</sub> may use the binding information to route the ACR interim message. </p><p id="p0067" num="0067"> In step 5, the ACR interim message may be routed from DSR Y 104<sub>2</sub> to CDF 2 1122, as indicated by the stored binding information. After receiving the ACR interim message, CDF 2 112<sub>2</sub> may process the message and respond back with an ACA message (not shown). </p><p id="p0068" num="0068"> While Figures 4A and 4B depict ACR messages, it will be appreciated that various Diameter messages, such as credit control request (CCR) and credit control answer (CCA) messages, and various network service nodes, such as HSSs 112 or PCRFs 114, may be used without departing from the scope of the present subject matter. </p><p id="p0069" num="0069"> Figure 5A is a message sequence diagram illustrating routing a Diameter signaling message after a node has recently recovered according to an embodiment of the subject matter described herein. In this embodiment, DSR X 104i and DSR Y 104<sub>2</sub> may be configured to route Diameter signaling traffic away from a previously failed, but recently recovered Diameter node (e.g., CDF, PCRF, etc.) for a predetermined period of time after Diameter node recovery or until messages of a predetermined type (e.g., ACR-Stop, ACR-Start, CCR-lnitial, CCR-Terminate) are detected. For example, DSR X 104<sub>!</sub> may continue to route Diameter messages to an alternate node even after an originally selected node is recovered when it is 
<!-- EPO <DP n="17"/>-->
 not desirable to move traffic back to the originally selected node, e.g., when overhead or network congestion associated with such a switchover may be problematic. </p><p id="p0070" num="0070"> Referring to Figure 5A, in step 1 , a Diameter ACR interim message "C" for processing by a CDF (e.g., CDF 1 112·, or CDF 2 112<sub>2</sub>) may be received by DSR X 104i. The ACR interim message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0071" num="0071"> After receiving the ACR interim message, DSR X 104i may execute a node selection algorithm for selecting one of CDFs 112i For example, as shown in Figure 5A, a hashing function may use a session identifier from the ACR interim message as input. The hashing function may indicate that CDF 1 112i should process the message. </p><p id="p0072" num="0072"> DSR X 104i may determine whether CDF 1 112i is available. In some embodiments, DSR X 104i may determine that CDF 1 112i is available, but has recently recovered from a fault, outage, or other problem. After determining CDF 1 112 has recently recovered, DSR X 104i may consult or query HE-SBR 102i for relevant binding information, such as an exception binding record. For example, a session identifier from the ACR interim message may be used as a lookup criterion for identifying relevant binding information in HE-SBR 102<sub>2</sub>. In this example, an HE-SBR entry that matches the lookup criterion may be located. The entry may indicate a binding or association between the session identifier of the ACR interim message and CDF 2 1122. DSR X 104i may use the binding information to route the ACR interim message. </p><p id="p0073" num="0073"> In step 2, the ACR interim message may be routed from DSR X 104i to CDF 2 112<sub>2</sub>, as indicated by the stored binding information. After receiving the ACR interim message, CDF 2 112<sub>2</sub> may process the message and respond back with an ACA message (not shown). </p><p id="p0074" num="0074"> In some embodiments, stored binding information may be associated with a TTL value and may be flushed when the TTL value is reached or exceeded. For example, as shown in Figure 5A, a TTL value may be associated with a binding record or HE-SBR entry. When a TTL time expires 
<!-- EPO <DP n="18"/>-->
 for the HE-SBR entry, the entry may be flushed from HE-SBR 102i. In some embodiments, where multiple HE-SBRs contain a copy of the entry, the entry may be flushed by each HE-SBR. </p><p id="p0075" num="0075"> While Figure 5A depicts ACR messages, it will be appreciated that various Diameter messages, such as credit control request (CCR) and credit control answer (CCA) messages, and various network service nodes, such as HSSs 112 or PCRFs 114, may be used without departing from the scope of the present subject matter. </p><p id="p0076" num="0076"> Figure 5B is a message sequence diagram illustrating routing Diameter signaling messages after a node has recently recovered according to another embodiment of the subject matter described herein. In this embodiment, DSR X 104i and DSR Y 104<sub>2</sub> may be configured to route Diameter signaling traffic away from a previously failed, but recently recovered Diameter node for a predetermined period of time after Diameter node recovery or until messages of a predetermined type are detected. </p><p id="p0077" num="0077"> Referring to Figure 5B, in step 1 , a Diameter ACR interim message "C" for processing by a CDF (e.g., CDF 1 112i or CDF 2 112<sub>2</sub>) may be received by DSR X 104i. The ACR interim message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0078" num="0078"> After receiving the ACR interim message, DSR X 104i may execute a node selection algorithm for selecting one of CDFs 112i_<sub>2</sub>. For example, as shown in Figure 5A, a hashing function may use a session identifier from the ACR interim message as input. The hashing function may indicate that CDF 1 112i should process the message. </p><p id="p0079" num="0079"> DSR X 104-1 may determine whether CDF 1 112-1 is available. In some embodiments, DSR X 104i may determine that CDF 1 112i is available, but has recently recovered from a fault, outage, or other problem. </p><p id="p0080" num="0080"> After determining CDF 1 112i has recently recovered, DSR X 104i may glean, observe, or obtain a message type about the received Diameter message. Using this message type information, DSR X 104i may determine how to proceed. For example, as shown in Figure 5B, if the ACR message is of an "interim" message, DSR X 104i may consult or query HE-SBR 102-1 
<!-- EPO <DP n="19"/>-->
 for relevant binding information, e.g., since it is likely that a relevant exception binding record exists for this particular Diameter session. In this example, a relevant HE-SBR entry may be located. The entry may indicate a binding or association between the session identifier of the ACR interim message and CDF 2 112<sub>2</sub>. DSR X 104i may use the binding information to route the ACR interim message. </p><p id="p0081" num="0081"> In step 2, the ACR interim message may be routed from DSR X 104i to CDF 2 112<sub>2</sub>, as indicated by the stored binding information. After receiving the ACR interim message, CDF 2 112<sub>2</sub> may process the message and respond back with an ACA message (not shown). </p><p id="p0082" num="0082"> In step 3, a Diameter ACR start message "D" for processing by a CDF (e.g., CDF 1 112·, or CDF 2 112<sub>2</sub>) may be received by DSR X 104-1. The ACR start message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of 'ΎΥ" and a user name. </p><p id="p0083" num="0083"> After receiving the ACR start message, DSR X 104i may execute a node selection algorithm for selecting one of CDFs 112i_<sub>2</sub>. For example, as shown in Figure 5B, a hashing function may use a session identifier from the ACR interim message as input. The hashing function may indicate that CDF 1 112i should process the message. </p><p id="p0084" num="0084"> DSR X 104i may determine whether CDF 1 112i is available. In some embodiments, DSR X 104i may determine that CDF 1 112i is available, but has recently recovered from a fault, outage, or other problem. </p><p id="p0085" num="0085"> After determining CDF 1 112i has recently recovered, DSR X 104i may glean, observe, or obtain a message type about the received Diameter message. Using this message type information, DSR X 104i may determine how to proceed. For example, as shown in Figure 5B, if the ACR message is of a "start" message, DSR X 104i may determine that HE-SBR 102i does not need to be consulted, e.g., since it is unlikely that a relevant exception binding record exists for this new Diameter session. </p><p id="p0086" num="0086"> After determining that HE-SBR 102<sub>!</sub> does not need to be consulted, the ACR start message may be routed from DSR X 104i to recently recovered CDF 1 112i, as indicated by the selection algorithm. After 
<!-- EPO <DP n="20"/>-->
 receiving the ACR start message, CDF 1 112i may process the message and respond back with an ACA message (not shown). </p><p id="p0087" num="0087"> While Figure 5B depicts ACR messages, it will be appreciated that various Diameter messages, such as credit control request (CCR) and credit control answer (CCA) messages, and various network service nodes, such as HSSs 112 or PCRFs 114, may be used without departing from the scope of the present subject matter. </p><p id="p0088" num="0088"> Figure 5C is a message sequence diagram illustrating routing a Diameter signaling message having a stop event type according to an embodiment of the subject matter described herein. In this embodiment, DSR X 104i and DSR Y 104<sub>2</sub> may be configured to route Diameter signaling traffic away from a previously failed, but recently recovered Diameter node for a predetermined period of time after Diameter node recovery or until messages of a predetermined type are detected. </p><p id="p0089" num="0089"> Referring to Figure 5C, in step 1 , a Diameter ACR stop message "D" for processing by a CDF (e.g., CDF 1 112i or CDF 2 112<sub>2</sub>) may be received by DSR X 104 In some embodiments, the ACR stop message may indicate the stop of an accounting session and/or may be the last message of a particular Diameter transaction. The ACR stop message may include a session identifier and a user identifier. For example, the ACR interim message may include a Diameter session ID value of "ZZ" and a user name. </p><p id="p0090" num="0090"> After receiving the ACR stop message, DSR X 104<sub>t</sub> may execute a node selection algorithm for selecting one of CDFs 112i For example, as shown in Figure 5A, a hashing function may use a session identifier from the ACR stop message as input. The hashing function may indicate that CDF 1 112i should process the message. </p><p id="p0091" num="0091"> DSR X 104 may determine whether CDF 1 112τ is available. In some embodiments, DSR X 104i may determine that CDF 1 112i is available, but has recently recovered from a fault, outage, or other problem. </p><p id="p0092" num="0092"> After determining CDF 1 112 has recently recovered, DSR X 10 <sub>!</sub> may glean, observe, or obtain a message type about the received Diameter message. Using this message type information, DSR X 104i may determine how to proceed. For example, as shown in Figure 5B, if the ACR message 
<!-- EPO <DP n="21"/>-->
 is of a "stop" message type indicating the end of a Diameter charging session, DSR X 104i may consult or query HE-SBR 102i for relevant binding information, e.g., since it is likely that a relevant exception binding record exists for this particular Diameter session. </p><p id="p0093" num="0093"> DSR X 104i may consult or query HE-SBR 102i for relevant binding information, such as an exception binding record. A relevant HE-SBR entry may be located. The entry may indicate a binding or association between the session identifier of the ACR stop message and CDF 2 112<sub>2</sub>. DSR X 104i may use the binding information to route the ACR stop message. </p><p id="p0094" num="0094"> In step 2, the ACR stop message may be routed from DSR X 104i to</p><p id="p0095" num="0095">CDF 2 112<sub>2</sub>, as indicated by the stored binding information. After receiving the ACR interim message, CDF 2 112<sub>2</sub> may process the message and respond back with an ACA message (not shown). </p><p id="p0096" num="0096"> In some embodiments, in response to detecting a Diameter message having a stop event type, DSR X 104i may perform additional actions. For example, after routing the ACR stop message to CDF 2 112<sub>2</sub>, DSR X 104i may flush the entry from HE-SBR 102<sub>t</sub>. DSR X 104, may also flush or initiate flushing copies of the entry in other HE-SBRs, e.g., by sending update messages to other DSRs and/or HE-SBRs in the network. </p><p id="p0097" num="0097"> In step 3, an HE-SBR update message may be sent from DSR X 104i to DSR Y 102<sub>2</sub>. The HE-SBR update message may include a session identifier, a user identifier, and/or other information extracted or derived from the Diameter ACR stop message. The HE-SBR update message may include a binding record or indicate a binding association between message- related information (e.g., a session identifier) and a CDF (e.g., CDF 2 112<sub>2</sub>). The HE-SBR update message may further indicate that the record or association should be deleted, discarded, and/or flushed. For example, as shown in Figure 5C, the HE-SBR update message may include a TTL value of zero. After receiving the HE-SBR update message, DSR Y 104<sub>2</sub> may flush or initiate flushing the binding information from HE-SBR 102<sub>2</sub>. </p><p id="p0098" num="0098"> While Figure 5C depicts ACR messages, it will be appreciated that various Diameter messages, such as credit control request (CCR) and credit control answer (CCA) messages, and various network service nodes, such 
<!-- EPO <DP n="22"/>-->
 as HSSs 112 or PCRFs 114, may be used without departing from the scope of the present subject matter. </p><p id="p0099" num="0099"> Figure 6 is a flow chart illustrating an exemplary process for dynamically learning Diameter binding information according to an embodiment of the subject matter described herein. In some embodiments, the exemplary process described herein, or portions thereof, may be performed by a DSR, a DRE, an HE-SBR, and/or other module(s) or node(s). </p><p id="p0100" num="0100"> In block 600, a Diameter signaling message may be received at a Diameter routing node (e.g., DSR X 104i). The Diameter signaling message may be for processing by a Diameter server, such as CDF 1 112i, PCRF 114·,, HLR 108, SPR 110, AAA 105, or HSS 106^ For example, DSR X 104i may include a communications interface that may receive Diameter messages from various interfaces. </p><p id="p0101" num="0101"> In block 602, it may be determined whether a relevant exception binding record already exists. For example, DSR X 104i or DRE 122 may consult a binding repository for an existing exception binding record that indicates to which node the first Diameter message is to be routed. In this example, if an existing binding record is found, DSR X 104<sub>!</sub> or DRE 122 may route the first Diameter message to the node indicated by the existing binding record (e.g., without using a node selection algorithm). If an existing binding record is not found, DSR X 104i or DRE 122 may select a node using a node selection algorithm. </p><p id="p0102" num="0102"> In block 604, a first Diameter server to which the first message is to be routed may be selected using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information. In some embodiments, the selection algorithm may include a hashing function or LBHF. For example, DSR 104·<sub>!</sub> or DRE 122 may be configured to implement an LBHF for load balancing Diameter messages such that all related Diameter messages are processed by the same node. </p><p id="p0103" num="0103"> Exemplary information usable by the Diameter node selection algorithm may include parameters and information derived from received 
<!-- EPO <DP n="23"/>-->
 Diameter messages or network nodes. For example, the information may include Diameter session identifier information, user name information, a user Internet protocol (IP) information, IP multimedia subsystem (IMS) private identity (IMPI) information, IMS public identity (IMPU) information, session initiation protocol (SIP) uniform resource identifier (URI) information, a URI, an Internet protocol (IP) address, an access point name (APN), mobile station international subscriber directory number (MSISDN) information, mobile/dialable number information, a session identifier, an international mobile subscriber identity (IMSI), IMS charging identifier information, a mobile subscriber directory number (DN), a globally unique temporary identifier (GUTI), a serving MSC address information, visitor location register (VLR) number information, serving General Packet Radio Service (GPRS) support node (SGSN) address information, SGSN number information, visited mobile country code (MCC) information, mobile network code (MNC) information, a user name attribute value pair (AVP), a network access identifier (NAI), serving location area code information, serving cell identification information, mobile subscriber geo-location coordinate information, or tracking area information. </p><p id="p0104" num="0104"> In block 606, it may be determined whether the first Diameter server is available. For example, DSR X 104i or DRE 122 may determine whether the first Diameter server is available (e.g., usable to successfully process the message). If it is determined that the first Diameter server is available, DSR X 104i may route the message to the first Diameter server. If it is determined that the first Diameter server is not available (e.g., that the node is not available or has recently failed), DSR X 104i may consult or query HE- SBR 102i for relevant binding information, such as an exception binding record. For example, an exception binding record may indicate an alternate server that can successfully process the Diameter message. </p><p id="p0105" num="0105"> In some embodiments, in response to determining that the first Diameter server is available, the first Diameter message may be routed to the first Diameter server without creating a binding record. </p><p id="p0106" num="0106"> In block 608, in response to determining that the first Diameter server is not available, a second Diameter server to which the first message is to be 
<!-- EPO <DP n="24"/>-->
 routed may be selected using a node selection algorithm. In some embodiments, the selection algorithm used for selecting the second Diameter server may be identical or similar to the selection algorithm used for selecting the first Diameter server but may use additional and/or different information, such as a modified session identifier or excluding the first Diameter server as a possible selection. </p><p id="p0107" num="0107"> In some embodiments, after a second Diameter server is selected, DSR 104i or DRE 122 may confirm that the second Diameter server is usable or available for processing the received Diameter signaling message. </p><p id="p0108" num="0108"> In block 610, an exception binding record may be created. The exception binding record may associate the second Diameter message and information contained in the first Diameter message. For example, a Diameter session ID and/or a user identifier (e.g., an IMSI value or IP address) may be associated with CDF 2 112<sub>2</sub> or other network service node identifier. </p><p id="p0109" num="0109"> After creating the exception binding record, DSR X 104i or DRE 122 may store the record so that the Diameter binding record can be used to quickly route other Diameter messages associated with the transaction, session, or user to the same network service node. </p><p id="p0110" num="0110"> In some embodiments, the exception binding record may be stored in a HE-SBR or related binding database. For example, the exception binding record may be stored in a local HE-SBR 102i and may be sent to other DBRs associated with other DSRs in the network. In another example, the exception binding record may be stored in a centralized HE-SBR that may be accessible by multiple DSRs located in the network. </p><p id="p0111" num="0111"> In some embodiments, an exception binding record may be discarded after an amount of time has elapsed (e.g., as determined by a time to live (TTL) value associated with a binding record) or after a period of inactivity (e.g., after no Diameter messages for session "X" has been received in 24 hours). For example, to prevent HE-SBR 102<sub>!</sub> or related binding database 128 from running out of memory, DSR X 104i, HE-SBR 102<sub>!</sub>, or another entity may discard old, stale, or inactive binding records from HE-SBR 102i or related binding database 128. 
<!-- EPO <DP n="25"/>-->
 It will be understood that various details of the subject matter described herein may be changed without departing from the scope of the subject matter described herein. Furthermore, the foregoing description is for the purpose of illustration only, and not for the purpose of limitation, as the subject matter described herein is defined by the claims as set forth hereinafter. 
</p></description><claims mxw-id="PCLM44851306" ref-ucid="WO-2012118967-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="26"/>-->CLAIMS What is claimed is: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method for hybrid session based Diameter routing, the method comprising: </claim-text><claim-text> receiving, at a first Diameter signaling router (DSR), a first Diameter message for processing by a Diameter server; </claim-text><claim-text> selecting, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed; determining whether the first Diameter server is available; and in response to determining that the first Diameter server is not available: </claim-text><claim-text> selecting a second Diameter server to which the first Diameter message is to be routed; and </claim-text><claim-text> creating an exception binding record that associates the second Diameter server and information in the first Diameter message. </claim-text></claim><claim id="clm-0002" num="2"><claim-text> 2. The method of claim 1 including in response to determining that the first Diameter server is available, routing the first Diameter message to the first Diameter server without creating the exception binding record. </claim-text></claim><claim id="clm-0003" num="3"><claim-text> 3. The method of claim 1 including prior to selecting a first Diameter server using a Diameter node selection algorithm, consulting a binding repository for an existing exception binding record that indicates to which node the first Diameter message is to be routed.</claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 1 including routing, using the exception binding record, a second Diameter message to the second Diameter server, wherein the second Diameter message is associated with the first Diameter message. </claim-text></claim><claim id="clm-0005" num="5"><claim-text> 5. The method of claim 1 including communicating the exception binding record to a centralized binding repository, a local binding repository, a remote binding repository, or a second DSR. </claim-text></claim><claim id="clm-0006" num="6"><claim-text><!-- EPO <DP n="27"/>--> The method of claim 1 wherein the exception binding record associates a Diameter session and a Diameter server or a subscriber identifier and a Diameter server. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>The method of claim 1 including: </claim-text><claim-text> receiving a second Diameter message associated with the first Diameter message; and </claim-text><claim-text> determining, in response to the first Diameter server becoming available for processing Diameter messages associated with the first Diameter message and based on a predetermined amount of time or a message type of a second Diameter message, to route the second Diameter message to the first Diameter server. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>The method of claim 7 wherein the predetermined amount of time is within a time period indicated by a time to live (TTL) value associated with the exception binding record. </claim-text></claim><claim id="clm-0009" num="9"><claim-text> The method of claim 7 wherein the message type of the second Diameter message indicates the start of a Diameter charging session. The method of claim 1 wherein the exception binding record is discarded based on a predetermined amount of time or a message type of a Diameter message. </claim-text></claim><claim id="clm-0010" num="10"><claim-text> The method of claim 1 wherein the DSR includes a Diameter routing node, a Diameter routing agent (DRA), a Diameter proxy agent (DPA), a Diameter redirect agent, a Diameter translation agent, and a Diameter relay agent. </claim-text></claim><claim id="clm-0011" num="11"><claim-text> The method of claim 1 where the information contained in the first Diameter message includes Diameter session identifier information, user name information, a user Internet protocol (IP) information, IP multimedia subsystem (IMS) private identity (IMPI) information, IMS public identity (IMPU) information, session initiation protocol (SIP) uniform resource identifier (URI) information, a URI, an Internet protocol (IP) address, an access point name (APN), mobile station international subscriber directory number (MSISDN) information, mobile/dialable number information, a session identifier, an international mobile subscriber identity (IMSI), IMS charging identifier <!-- EPO <DP n="28"/>--> information, a mobile subscriber directory number (DN), a globally unique temporary identifier (GUTI), a serving MSC address information, visitor location register (VLR) number information, serving General Packet Radio Service (GPRS) support node (SGSN) address information, SGSN number information, visited mobile country code (MCC) information, mobile network code (MNC) information, a user name attribute value pair (AVP), a network access identifier (NAI), serving location area code information, serving cell identification information, mobile subscriber geo-location coordinate information, or tracking area information. </claim-text></claim><claim id="clm-0012" num="12"><claim-text> The method of claim 1 wherein the Diameter server includes at least one of: a network charging node, an online charging system (OCS) node, an offline charging system (OFCS) node, a charging trigger function (CTF) node, a charging gateway function (CGF) node, a charging data function (CDF) node, a policy and charging rules function (PCRF) node, a home subscriber server (HSS) node, an authentication, authorization, and accounting (AAA) node, and a home location register node (HLR). </claim-text></claim><claim id="clm-0013" num="13"><claim-text> A system for hybrid session based Diameter routing, the system comprising: </claim-text><claim-text>at a Diameter signaling router (DSR): </claim-text><claim-text> a communications interface configured to receive a first Diameter message for processing by a Diameter server; and </claim-text><claim-text> a Diameter routing module (DRM) that is communicatively associated with the communications interface, the DRM being configured to select, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed, to determine whether the first Diameter server is available, and in response to determining that the first Diameter server is not available: </claim-text><claim-text> to select a second Diameter server to which the first</claim-text></claim><claim id="clm-0014" num="14"><claim-text>Diameter message is to be routed; and <!-- EPO <DP n="29"/>--> to create an exception binding record that associates the second Diameter server and information in the first Diameter message. </claim-text></claim><claim id="clm-0015" num="15"><claim-text> 15. The system of claim 14 wherein the DSR is configured to route, in response to determining that the first Diameter server is available, the first Diameter message to the first Diameter server without creating the exception binding record. </claim-text></claim><claim id="clm-0016" num="16"><claim-text> 16. The system of claim 14 wherein the DSR is configured to consult, prior to selecting a first Diameter server using a Diameter node selection algorithm, a binding repository for an existing exception binding record that indicates to which node the first Diameter message is to be routed. </claim-text></claim><claim id="clm-0017" num="17"><claim-text> 17. The system of claim 14 wherein the DSR is configured to route, using the exception binding record, a second Diameter message to the second Diameter server, wherein the second Diameter message is associated with the first Diameter message. </claim-text></claim><claim id="clm-0018" num="18"><claim-text> 18. The system of claim 14 the DSR is configured to communicate the exception binding record to a centralized binding repository, a local binding repository, a remote binding repository, or a second DSR. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The system of claim 14 wherein the exception binding record associates a Diameter session and a Diameter server or a subscriber identifier and a Diameter server. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The system of claim 14 the DSR is configured to receive a second Diameter message associated with the first Diameter message and determining, in response to the first Diameter server becoming available for processing Diameter messages associated with the first Diameter message and based on a predetermined amount of time or a message type of a second Diameter message, to route the second Diameter message to the first Diameter server. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The system of claim 7 wherein the predetermined amount of time is a time to live (TTL) value associated with the exception binding record. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The system of claim 7 wherein the message type of the second Diameter message indicates the start of a Diameter charging session. <!-- EPO <DP n="30"/>--> </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The system of claim 1 wherein the DSR is configured to initiate discarding the exception binding record based on a predetermined amount of time or a message type of a Diameter message. </claim-text></claim><claim id="clm-0024" num="24"><claim-text> 24. The system of claim 14 wherein the DSR includes a Diameter routing node, a Diameter routing agent (DRA), a Diameter proxy agent (DPA), a Diameter redirect agent, a Diameter translation agent, and a Diameter relay agent. </claim-text></claim><claim id="clm-0025" num="25"><claim-text> 25. The system of claim 14 where the information contained in the first Diameter message includes Diameter session-identifier information, user name information, a user Internet protocol (IP) information, IP multimedia subsystem (IMS) private identity (IMP!) information, IMS public identity (IMPU) information, session initiation protocol (SIP) uniform resource identifier (URI) information, a URI, an Internet protocol (IP) address, an access point name (APN), mobile station international subscriber directory number (MSISDN) information, mobile/dialable number information, a session identifier, an international mobile subscriber identity (IMSI), IMS charging identifier information, a mobile subscriber directory number (DN), a globally unique temporary identifier (GUTI), a serving MSC address information, visitor location register (VLR) number information, serving General Packet Radio Service (GPRS) support node (SGSN) address information, SGSN number information, visited mobile country code (MCC) information, mobile network code (MNC) information, a user name attribute value pair (AVP), a network access identifier (NAI), serving location area code information, serving cell identification information, mobile subscriber geo-location coordinate information, or tracking area information. </claim-text></claim><claim id="clm-0026" num="26"><claim-text> 26. The method of claim 14 wherein the one or more network service nodes includes at least one of: a network charging node, an online charging system (OCS) node, an offline charging system (OFCS) node, a charging trigger function (CTF) node, a charging gateway function (CGF) node, a charging data function (CDF) node, a policy and charging rules function (PCRF) node, a home subscriber server <!-- EPO <DP n="31"/>--> (HSS) node, an authentication, authorization, and accounting (AAA) node, and a home location register node (HLR). </claim-text><claim-text>A non-transitory computer readable medium comprising computer executable instructions embodied in a computer readable medium that when executed by a processor of a computer control the computer to perform steps comprising: </claim-text><claim-text> receiving, at a first Diameter signaling router (DSR), a first Diameter message for processing by a Diameter server; </claim-text><claim-text> selecting, using a Diameter node selection algorithm that operates on at least one parameter in the first Diameter message without requiring use of stored Diameter binding information, a first Diameter server to which the first Diameter message is to be routed; determining whether the first Diameter server is available; and in response to determining that the first Diameter server is not available: </claim-text><claim-text> selecting a second Diameter server to which the first Diameter message is to be routed; and </claim-text><claim-text> creating an exception binding record that associates the second Diameter server and information in the first Diameter message. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
