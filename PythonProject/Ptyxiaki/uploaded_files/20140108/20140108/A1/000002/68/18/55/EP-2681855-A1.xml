<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681855-A1" country="EP" doc-number="2681855" kind="A1" date="20140108" family-id="46753611" file-reference-id="318288" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586433" ucid="EP-2681855-A1"><document-id><country>EP</country><doc-number>2681855</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11860069-A" is-representative="NO"><document-id mxw-id="PAPP154848625" load-source="docdb" format="epo"><country>EP</country><doc-number>11860069</doc-number><kind>A</kind><date>20110304</date><lang>EN</lang></document-id><document-id mxw-id="PAPP168045800" load-source="docdb" format="original"><country>EP</country><doc-number>11860069.1</doc-number><date>20110304</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140549070" ucid="FI-2011050190-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>FI</country><doc-number>2011050190</doc-number><kind>W</kind><date>20110304</date></document-id></priority-claim><priority-claim mxw-id="PPC140553152" ucid="US-201113038703-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113038703</doc-number><kind>A</kind><date>20110302</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1744177444" load-source="docdb">H04B  17/00        20150101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177445" load-source="docdb">H01Q  25/00        20060101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177446" load-source="docdb">H01Q  21/20        20060101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177447" load-source="docdb">H01Q  21/00        20060101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177448" load-source="docdb">H01Q   3/26        20060101AFI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177449" load-source="docdb">H01Q   3/00        20060101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177450" load-source="docdb">G01R  29/08        20060101ALI20171006BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1744177451" load-source="docdb">H04B   7/06        20060101ALI20171006BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1707479143" load-source="docdb" scheme="CPC">H04B  17/391       20130101 LI20180119BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959318" load-source="docdb" scheme="CPC">H04B  17/0087      20130101 LI20170221BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959319" load-source="docdb" scheme="CPC">H04B  17/0085      20130101 LI20170221BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959320" load-source="docdb" scheme="CPC">H01Q  21/205       20130101 LI20170221BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959321" load-source="docdb" scheme="CPC">H01Q   3/2605      20130101 FI20170221BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959322" load-source="docdb" scheme="CPC">G01R  29/10        20130101 LA20170221BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1844959323" load-source="docdb" scheme="CPC">H04B   7/0617      20130101 LI20170221BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363932" lang="DE" load-source="patent-office">FUNKTEST</invention-title><invention-title mxw-id="PT132363933" lang="EN" load-source="patent-office">OVER-THE-AIR TEST</invention-title><invention-title mxw-id="PT132363934" lang="FR" load-source="patent-office">TEST RADIO</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919515785" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ELEKTROBIT SYSTEM TEST OY</last-name><address><country>FI</country></address></addressbook></applicant><applicant mxw-id="PPAR919504976" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ELEKTROBIT SYSTEM TEST OY</last-name></addressbook></applicant><applicant mxw-id="PPAR919018910" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Elektrobit System Test OY</last-name><iid>101204537</iid><address><street>Tutkijantie 8</street><city>90590 Oulu</city><country>FI</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919546372" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KYOESTI PEKKA</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR919509213" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KYOESTI, PEKKA</last-name></addressbook></inventor><inventor mxw-id="PPAR919013671" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KYÖSTI, Pekka</last-name><address><street>Mantankuja 14</street><city>FI-91410 Jokirinne</city><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR919530943" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>JAEMSAE TOMMI</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR919539125" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>JAEMSAE, TOMMI</last-name></addressbook></inventor><inventor mxw-id="PPAR919019743" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>JÄMSÄ, Tommi</last-name><address><street>Oulujoentie 85</street><city>FI-90650 Oulu</city><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR919541891" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LAITINEN TOMMI</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR919521300" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LAITINEN, Tommi</last-name></addressbook></inventor><inventor mxw-id="PPAR919018834" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LAITINEN, Tommi</last-name><address><street>Sateentie 4 A 10</street><city>FI-02100 Espoo</city><country>FI</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919005870" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hill, Justin John</last-name><suffix>et al</suffix><iid>101275487</iid><address><street>Olswang LLP 90 High Holborn</street><city>London WC1V 6XX</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="FI-2011050190-W"><document-id><country>FI</country><doc-number>2011050190</doc-number><kind>W</kind><date>20110304</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012117147-A1"><document-id><country>WO</country><doc-number>2012117147</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549914852" load-source="docdb">AL</country><country mxw-id="DS549760891" load-source="docdb">AT</country><country mxw-id="DS549914853" load-source="docdb">BE</country><country mxw-id="DS549839242" load-source="docdb">BG</country><country mxw-id="DS549838783" load-source="docdb">CH</country><country mxw-id="DS549770868" load-source="docdb">CY</country><country mxw-id="DS549760892" load-source="docdb">CZ</country><country mxw-id="DS549914854" load-source="docdb">DE</country><country mxw-id="DS549770873" load-source="docdb">DK</country><country mxw-id="DS549770874" load-source="docdb">EE</country><country mxw-id="DS549838579" load-source="docdb">ES</country><country mxw-id="DS549839243" load-source="docdb">FI</country><country mxw-id="DS549852138" load-source="docdb">FR</country><country mxw-id="DS549914855" load-source="docdb">GB</country><country mxw-id="DS549770875" load-source="docdb">GR</country><country mxw-id="DS549914856" load-source="docdb">HR</country><country mxw-id="DS549760901" load-source="docdb">HU</country><country mxw-id="DS549838784" load-source="docdb">IE</country><country mxw-id="DS549770876" load-source="docdb">IS</country><country mxw-id="DS549852139" load-source="docdb">IT</country><country mxw-id="DS549770881" load-source="docdb">LI</country><country mxw-id="DS549839244" load-source="docdb">LT</country><country mxw-id="DS549760502" load-source="docdb">LU</country><country mxw-id="DS549839245" load-source="docdb">LV</country><country mxw-id="DS549839250" load-source="docdb">MC</country><country mxw-id="DS549760503" load-source="docdb">MK</country><country mxw-id="DS549760504" load-source="docdb">MT</country><country mxw-id="DS549760902" load-source="docdb">NL</country><country mxw-id="DS549838580" load-source="docdb">NO</country><country mxw-id="DS549838785" load-source="docdb">PL</country><country mxw-id="DS549839251" load-source="docdb">PT</country><country mxw-id="DS549760903" load-source="docdb">RO</country><country mxw-id="DS549839252" load-source="docdb">RS</country><country mxw-id="DS549838790" load-source="docdb">SE</country><country mxw-id="DS549852140" load-source="docdb">SI</country><country mxw-id="DS549838581" load-source="docdb">SK</country><country mxw-id="DS549838791" load-source="docdb">SM</country><country mxw-id="DS549760509" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99836018" ref-ucid="WO-2012117147-A1" lang="EN" load-source="patent-office"><p num="0000">An apparatus forms a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber by a comparison of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path.</p></abstract><abstract mxw-id="PA100331790" ref-ucid="WO-2012117147-A1" lang="EN" source="national office" load-source="docdb"><p>An apparatus forms a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber by a comparison of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path.</p></abstract><abstract mxw-id="PA99836019" ref-ucid="WO-2012117147-A1" lang="FR" load-source="patent-office"><p num="0000">Selon l'invention, un appareil forme une pondération pour chaque trajet de signal associé à une antenne d'une pluralité d'antennes autour d'une zone de test dans une chambre radio par comparaison d'un champ électrique cible souhaité sur la base d'un modèle de canal radio et d'un champ électrique pouvant être obtenu par des ondes planes associées à la zone de test, les ondes planes étant aptes à être transmises par les antennes et étant basées sur au moins une forme d'onde de base dans chaque trajet de signal.</p></abstract><abstract mxw-id="PA100331791" ref-ucid="WO-2012117147-A1" lang="FR" source="national office" load-source="docdb"><p>Selon l'invention, un appareil forme une pondération pour chaque trajet de signal associé à une antenne d'une pluralité d'antennes autour d'une zone de test dans une chambre radio par comparaison d'un champ électrique cible souhaité sur la base d'un modèle de canal radio et d'un champ électrique pouvant être obtenu par des ondes planes associées à la zone de test, les ondes planes étant aptes à être transmises par les antennes et étant basées sur au moins une forme d'onde de base dans chaque trajet de signal.</p></abstract><description mxw-id="PDES51233135" ref-ucid="WO-2012117147-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Over-the-air test Field </p><p id="p0002" num="0002"> [0001] The invention relates to over-the-air testing of a device in an anechoic chamber. </p><p id="p0003" num="0003">Background </p><p id="p0004" num="0004"> [0002] When a radio frequency signal is transmitted from a transmitter to a receiver, the signal propagates in a radio channel along one or more paths having different angles of arrivals, signal delays, polarizations and powers. Also a frequency may change due to the Doppler effect which may cause variation in signal strength and fadings of different durations in the received signal. The transmitter and the receiver are not ideal either. In addition, noise and interference due to other transmitters interfere with the radio connection. </p><p id="p0005" num="0005"> [0003] A transmitter and a receiver can be tested using a radio channel emulator emulating real circumstances. In a digital radio channel emulator, a radio channel is usually modelled with an FIR filter (Finite Impulse Response). A traditional radio channel emulation test is performed via a conducted connection such that a transmitter and a receiver are coupled together via at least one cable. </p><p id="p0006" num="0006"> [0004] Communication between a DUT (Device Under Test) and a base station of a radio system can be tested using an OTA (Over The Air) test, where a real DUT, such a subscriber terminal, is surrounded by a plurality of antennas of an emulator in an anechoic chamber. The emulator may be coupled to or act as a base station and emulate propagation paths between the subscriber terminal and the base station according to a channel model by generating independent Rayleigh faded signals, for example. An antenna or a combination of antennas transmits the independently pre-faded communication signals to the DUT on the basis of weights determined by the emulated radio channel. However, the formation of weights and thus signals transmitted by the antennas have their specific limits and hence there is need for a new approach. </p><p id="p0007" num="0007"> Summary </p><p id="p0008" num="0008">[0005] The following presents a simplified summary of the invention in order to provide a basic understanding of some aspects of the invention. This summary is not an extensive overview of the invention. It is not intended 
<!-- EPO <DP n="3"/>-->
 to identify key elements of the invention or to delineate the scope of the invention. Its sole purpose is to present some concepts of the invention in a simplified form as a prelude to the more detailed description that will be presented below. </p><p id="p0009" num="0009"> [0006] An aspect of the invention relates to apparatus configured to form a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber by a comparison of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </p><p id="p0010" num="0010"> [0007] A further aspect of the invention is a method comprising forming a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber by comparing of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </p><p id="p0011" num="0011"> [0008] A further aspect of the invention is an apparatus comprising at least one processor and at least one memory including a computer program code, the at least one memory and the computer program code configured to, with the at least one processor, cause the apparatus at least: to form a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber by comparing of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </p><p id="p0012" num="0012"> [0009] A further aspect of the invention is a transmission method comprising transmitting deterministic basis waveforms from the antenna elements of an over-the-air chamber for forming a plurality of predetermined plane waves in a test zone, the predetermined plane waves forming an emulated radio channel for communication with the device under test in the test zone. </p><p id="p0013" num="0013"> [0010] Although various aspects, embodiments and features of the invention are recited independently, it should be appreciated that all combinations of the various aspects, embodiments and features of the invention are 
<!-- EPO <DP n="4"/>-->
 possible and within the scope of the present invention as claimed. </p><p id="p0014" num="0014">Brief description of the drawings </p><p id="p0015" num="0015"> [0011] In the following, the invention will be described in greater detail by means of exemplary embodiments with reference to the attached drawings, in which </p><p id="p0016" num="0016"> [0012] Figure 1 shows a plane geometrical embodiment of an OTA test chamber; </p><p id="p0017" num="0017"> [0013] Figure 2 illustrates some variables needed in equations; </p><p id="p0018" num="0018"> [0014] Figure 3 shows a PAS sampled uniformly; </p><p id="p0019" num="0019"> [0015] Figure 4 shows a PAS sampled non-uniformly; </p><p id="p0020" num="0020"> [0016] Figure 5 shows an antenna with two polarization planes; </p><p id="p0021" num="0021"> [0017] Figure 6 shows FIR filters and combiners for forming signals fed to antennas for forming plane waves; </p><p id="p0022" num="0022"> [0018] Figure 7 shows a structure of a FIR filter; </p><p id="p0023" num="0023"> [0019] Figure 8 shows a solid geometrical configuration of OTA antennas; </p><p id="p0024" num="0024"> [0020] Figure 9 shows a flow chart of the method of forming weights; and </p><p id="p0025" num="0025"> [0021] Figure 10 shows a flow chart of method of transmitting plane waves. </p><p id="p0026" num="0026"> Detailed description of some embodiments </p><p id="p0027" num="0027">[0022] Exemplary embodiments of the present invention will be described more fully hereinafter with reference to the accompanying drawings, in which some, but not all, embodiments of the invention are shown. Indeed, the invention may be embodied in many different forms and should not be construed as limited to the embodiments set forth herein; rather, these embodiments are provided so that this disclosure will satisfy applicable legal requirements. Although the specification may refer to "an", "one", or "some" embodiments) in several locations, this does not necessarily mean that each such reference is to the same embodiment(s), or that the feature only applies to a single embodiment. Single features of different embodiments may also be combined to provide other embodiments. Therefore, all words and expressions should be interpreted broadly and they are intended to illustrate, not to restrict, each embodiment. 
<!-- EPO <DP n="5"/>-->
 [0023] Figure 1 presents an OTA test chamber. A DUT 100, which may be a subscriber terminal, is in the centre and antenna elements 102, 104, 106, 108, 1 10, 1 12, 1 14 and 1 16 may be around the DUT 100. They may have a uniform spacing (e.g. 45° between each of the 8 elements). The DUT 100, in turn, may be in a test zone 26. The test zone 126 is the same as or a part of a quiet zone. Let us denote the directions of K OTA antennas with k = 1 , .., K and the spacing of an antenna in the angle domain with Δ6&gt; where K refers to the number of antenna elements 102 to 1 16. The angle ΑΘ expresses a measure of the angular separation of two antenna elements 102 to 1 16 with respect to the electronic device 100. Each of the antenna elements may be connected to a single emulator output port of an emulator 1 18 such as EB (Elektrobit) Propsim® F8 and hence each antenna element may receive a signal through one signal path from the emulator 1 18. </p><p id="p0028" num="0028"> [0024] The test chamber may be an anechoic room. The emulator 1 18 may comprise FIR filters for weighting and delaying each signal path 130 from the transmitter 124 to the antenna 102 to 1 16. Additionally or alternatively, the emulator 1 18 may comprise a processor, a memory and a suitable computer program for providing the antenna channels. </p><p id="p0029" num="0029"> [0025] The distance between the DUT 100 and the antenna elements 102 to 1 16 may be the same or the antennas 102 to 1 16 may also be at different distances from the DUT 100. Correspondingly, the antenna elements 102 to 1 16 may only be placed in a sector instead of being placed at a full angle or a full solid angle. The antennas 102 to 1 16 may also be movable. In any case, the positions of the antennas 100 to 1 16 are predetermined at each moment with respect to the test zone 126. </p><p id="p0030" num="0030"> [0026] The emulator 1 18 may be coupled to a transmitter 124 using the at least one output connector of the transmitter 124. The transmitter 124 may be a base station 124 of a radio system or the like. The DUT 100 may act as a receiving subscriber terminal of the radio system or the like. It may be assumed that DUT antenna characteristics are unknown and thus the information may be ignored. </p><p id="p0031" num="0031"> [0027] A channel bank 120 may have a plurality of radio channel models in its memory or a radio channel is formed in real time by hard ware, for example. A radio channel model may be a play back model based on a channel recorded from a real radio system or it may be an artificially generated model or it may be a combination of a playback model and an artificially gen- 
<!-- EPO <DP n="6"/>-->
 erated model. A certain radio channel may be selected to be emulated, A weight generator 122 may, hence, receive data on the radio channel which define the environment in which the DUT 100 should receive communication signals from a transmitter 124. The weight generator 122 also has the information on the configuration of the antennas 102 to 1 16 with respect to the DUT 00 (distance from DUT, angle with respect to DUT and polarization of signals, for example). The weight generator 122 may form a weight for each signal path 130 from the emulator 1 18 to an antenna 102 to 1 16 on the basis of the predefined information with respect to the antennas 102 to 1 16, a form of transmission from the antennas 102 to 1 16, the desired electric field in the test zone 126, for example, and feed the weights to the emulator 1 18 in order to form a desired radio channel between the transmitter 124 and the DUT 100. </p><p id="p0032" num="0032"> [0028] The form of transmission from the antennas 102 to 1 16 to the test zone 126 may be based on plane waves. Each plane wave may, in turn, be based on a plurality of basis waveforms. For example, a sine wave may be a basis waveform. However, also other forms of basis waveforms could be used. A superposition of different sine waves may be made to result in a plane wave if sine waves have proper values of their parameters which may be amplitude, phase, frequency and direction. Usually at least one of the parameters differs in different sine waves. The at least one sine wave may be based on the carrier of the transmitter 124. A Rayleigh fading may be created by sine waves of different frequencies. </p><p id="p0033" num="0033"> [0029] The purpose of the transmission of the plane waves from the antennas 102 to 1 16 to the test zone 126 is to form a desired radio channel between the transmitter 124 and the DUT 100 on the basis of superposition of a plurality of plane waves in the test zone 126 transmitted by the antennas 102 to 116. A single plane wave is formed using a plurality of antennas, and each emulated path of the multipath propagation of the radio channel is based on a plurality of plane waves. </p><p id="p0034" num="0034"> [0030] According to the superposition principle, the combined response of plane waves in the test zone 126 at each moment is the sum of the responses of each plane wave separately. When the plane waves interact in the test zone 126 they reconstruct the effects the same or similar to what are caused to a communication signal in the desired radio channel. The communication signal comprises at least one carrier wave mixed with a message signal. The plane waves may be formed on the basis of each carrier wave transmitted 
<!-- EPO <DP n="7"/>-->
 by the transmitter. The final electric field in the test zone 126 depends on the plane waves and the actual message signals mixed with the carrier waves. </p><p id="p0035" num="0035"> [0031] A plane wave within the test zone 126 heading to a certain direction which may be defined as an AoA (Angle of Arrival), can be formed if the angular spacing ΔΘ of OTA antennas 102 to 116 is dense enough and the configuration of the OTA antennas is predetermined. The following inequality should hold in the case of uniform OTA antenna spacings </p><p id="p0036" num="0036"> Δ£ &lt; , (1) where D is a diameter of the test zone 126 and λ is a wavelength. The required diameter of the test zone 126 may depend on the size of the DUT 100. In practice, the sampling should be at least a little denser than defined in (1). However, the requirement is not an obstacle to realize the positions of the antennas in an OTA chamber. </p><p id="p0037" num="0037"> [0032] The weight generator 122 may form a weight for each signal path 130 associated with an antenna of the plurality of antennas 102 to 116 around the DUT 100 in an over-the-air chamber by a comparison of a desired target field of the channel model and a field in the test zone 126 obtainable by the plane waves based on at least one basis waveform in each signal path 130. The weights of each plane wave for each antenna may be formed using three methods below, for example, without limiting to them. </p><p id="p0038" num="0038"> [0033] In an embodiment, each weight g<sub>k</sub> of a single plane wave for a signal path of an antenna may be obtained by optimizing a root-mean-square error between the target electric field and the resulting field on sampling points within the test zone 126, for example. The target electric field may be calculated, simulated or measured in a test beforehand. The target field may be either vertically (z-polarized) or horizontally (perpendicular to vertical) polarized or both. </p><p id="p0039" num="0039"> [0034] Assume now for simplicity a case with a vertically polarized target field e<sub>z</sub>. The situation is similar to the case with the horizontally polarized target field. Figure 2 presents some variables used in the following comparison operation. An error E<sub>e</sub>(0 , G) of the cost function to be optimized may be:</p><p id="p0040" num="0040"><img id="imgf000007_0001" he="9" wi="125" file="imgf000007_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 where M is the number of locations in the test zone 126 or at its circumference, Θ = {&lt;¾}, 6<sub>k</sub> e [θ,2π] is a vector of OTA antenna directions, G = {g<sub>k</sub> }, g<sub>t</sub> e C is a vector of OTA antenna complex weights, k refers to the k<sup>th</sup> OTA antenna, 
<!-- EPO <DP n="8"/>-->
 e<sub>∑</sub>(&lt;p,r<sub>m</sub>) is a complex target field in a location f<sub>m</sub> of a plane wave with AoA φ, e<sub>2</sub>(&amp;,G,r<sub>m</sub>) is a complex field at a location F<sub>m</sub> with parameters Θ and G, and r<sub>m</sub> is a location vector pointing to m<sup>th</sup> sample point. The purpose is to compare the target electric field and the electric field obtainable with the OTA antennas of the predetermined configuration at a plurality of locations f<sub>m</sub> in the test zone or at the circumference of the test zone. </p><p id="p0041" num="0041"> [0035] The target field, which is the (theoretical) reference field that should be at least approximately achieved by the plane waves, may be expressed as </p><p id="p0042" num="0042"> ez (&lt;P, r<sub>m</sub> ) = E<sub>0</sub> exp(- jfi<sup>■</sup> r<sub>m</sub> ) (3) where β is a wave vector pointing parallel to a AoA direction, || ?|| = β = 2π/λ<sub>0</sub> , β =
<img id="imgf000008_0001" he="6" wi="11" file="imgf000008_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 is a wave number, λο is the wavelength corresponding to a carrier frequency f<sub>c</sub>, and E<sub>0</sub> = 1. Assume that the origin of the coordinate system is in the centre of the test zone 126 for simplicity. The resulting unnormalized field formed by K OTA antennas may become ε<sub>ζ</sub> (Θ, G, f<sub>m</sub> ) =∑ PL(d<sub>k m</sub> )exp(- jfi ¥<sub>m</sub> · ¾ (4) where PL(d) = 20logi<sub>0</sub>(d) + 46.4 + 20logi<sub>0</sub>(f<sub>c</sub>/5.0) is the free space path loss, d<sub>k m</sub> = | '<sup>s a</sup> distance from OTA antenna k to a location f<sub>m</sub> and 9<sub>k</sub> is a vector from OTA antenna k to the origin. If the distance from OTA antennas to the test zone 126 is large compared to dimensions of the test zone 126, which is normally the case, the path loss term PL may be neglected in equation (4). The resulting field ¾(©,G,r<sub>m</sub>) may be normalized over different sampling points f<sub>m</sub> such that the field at the origin is equal to zero (i.e. ¾(©, G,o)= l ).</p><p id="p0043" num="0043">Thus, equation (4) may be normalized by multiplying the unnormalized field formed by K OTA antennas by an inverse of the electric field at the origin as follows: </p><p id="p0044" num="0044"> e<sub>z</sub>(0,G, rJ = ¾(0,G,rJ|¾(©,G,o)<sup>"1</sup> . (5) </p><p id="p0045" num="0045">[0036] When the error E<sub>e</sub>(0 , G) is at the minimum or below a predetermined threshold Th (the threshold having a higher value than the minimum), the weights G, which may be expressed as a vector, may be selected to be used in the emulator 118. The weights G may be saved in a memory to be used later. The weights determine the directions (together with the antennas), 
<!-- EPO <DP n="9"/>-->
 phases and amplitudes of the plane waves, and the emulated radio channel is thus based on a superposition of plane waves in the test zone 126. </p><p id="p0046" num="0046"> [0037] In an embodiment, each weight gi&lt; of a single plane wave for a signal path of an antenna may be obtained by utilizing a Fourier transform technique presented below. Assume now a vertically polarized target electric field, although the technique may similarly be applied for horizontally polarized target electric fields. The Fourier technique for obtaining the weights is based on an expression of a target field in the test zone 126 around the DUT 100 at a distance \r\ from the centre of the test zone 126 in terms of a finite Fourier expansion. For the case with AoA of φ = 0, this may be written as </p><p id="p0047" num="0047">M '</p><p id="p0048" num="0048"> m',0 <sup>e</sup> (6) m'=-M' where ΔΘ is an angular separation of the OTA antennas. The Fourier expansion can be assumed to be finite due to the well-known cut-off properties of the spherical waves. According to a basic rule, M' = round{/? where β is a wave number. Here the "round" operation rounds the number inside the curly brackets to the nearest positive integer. In general, M' may also be greater than round{/? |r| }. </p><p id="p0049" num="0049"> [0038] Hence, the truncation number M' and the set of coefficients c<sub>m 0</sub> for m' = -M' ... M' determine the target electric field on the intersection line</p><p id="p0050" num="0050">(circumference of circle of radius |r| ) through the expansion (6). By defining the inverse discrete Fourier transformation (IDFT) as follows: </p><p id="p0051" num="0051">',0 ' <sup>C</sup>-M '+\fi—<sup>C</sup>M '-lfi ' M',0 J = 
<img id="imgf000009_0001" he="13" wi="146" file="imgf000009_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0052" num="0052">[0039] This provides a set of coefficients c<sub>m 0</sub> for m' = -M' ... M'. The set of coefficients determining the target field from any AoA φ for 0 &lt; φ &lt; 2π may be obtainable from 
<img id="imgf000009_0002" he="15" wi="144" file="imgf000009_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 
<!-- EPO <DP n="10"/>-->
 where * stands for element-wise vector multiplication. </p><p id="p0053" num="0053"> [0040] What is written above shows how the Fourier technique can be used to determine the set of coefficients c<sub>m</sub>, <sub>0</sub> for m' = -M' ... M' for the target electric field arriving from an angle^. In application of equation (7) one can also have a larger number of electric field values on the right-hand side of equation</p><p id="p0054" num="0054">(7) than K (the number of antennas), hence leading to a larger number of coefficients c<sub>m</sub>, <sub>0</sub> on the left-hand side of equation (7). In this case, the right K number of coefficients c<sub>m</sub>, <sub>Q</sub> , with indices m' = -M' ... M', may then be picked from the middle of the Fourier spectrum. </p><p id="p0055" num="0055"> [0041] Next, it can be shown how the Fourier technique can be used to generate by antennas 102 to 1 16 such a field on the intersection circle at the radius \r\ that has the same Fourier coefficients c<sub>ffl</sub> as the target field from AoA φ has. </p><p id="p0056" num="0056"> [0042] The following 3 steps may be repeated for each m' = -</p><p id="p0057" num="0057">M'... M'. </p><p id="p0058" num="0058"> [0043] Step 1 : Consider the above mentioned intersection circle, and assume that you have K OTA antennas 102 to 1 16 at the same distance from the centre of the test zone and assume that the excitation vector for the K OTA antennas is as follows: 
<img id="imgf000010_0001" he="7" wi="125" file="imgf000010_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0059" num="0059">[0044] If the distances are different but still predetermined, a corresponding result may be derived. Here the elements of this vector are the excitations for the OTA antennas, and 6k is the k'th OTA antenna. The 6&gt;i is assumed to be 0 for simplicity. </p><p id="p0060" num="0060"> [0045] Step 2: Suppose now that the field on the intersection circle antennas with the excitation vector as given in equation (9)
<img id="imgf000010_0002" he="12" wi="39" file="imgf000010_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 perform the IDFT of the this field as 
<img id="imgf000010_0003" he="8" wi="124" file="imgf000010_0003.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 which provides you with vector d<sub>m</sub>, . Here L is the number of points equispaced by ΔΘ on the intersection circle around the DUT 100. If L &gt; K, this vector d<sub>m</sub>, contains the Fourier coefficients with indices m' outside the range [-Μ'. , . Μ'], 
<!-- EPO <DP n="11"/>-->
 the middle part of the Fourier spectrum may be chosen by forming a new vector d<sub>m</sub>, as follows: d<sub>m</sub>. = [d_<sub>M</sub>,, d_<sub>M</sub>,<sub>+l</sub>...d<sub>M</sub>,_<sub>{</sub>, d<sub>M</sub>] . </p><p id="p0061" num="0061"> [0046] Step 3: Now, take the m'<sup>th</sup> component of vector d<sub>m</sub>, , that is denoted d<sub>m</sub>, , and create another excitation vector as follows: </p><p id="p0062" num="0062"> b<sub>m</sub>, = ^ [e-M ,e-<sup>Jm'</sup> ..£-<sup>Ja'</sup>°'- e-<sup>JaVK</sup> ] , (11) where j is the imaginary unit. Hence, the vector c<sub>m</sub>, in equation (9) differs from</p><p id="p0063" num="0063">— c , </p><p id="p0064" num="0064">vector b<sub>m</sub>, in equation (11) only by factor -^ , where c<sub>m</sub> is the Fourier coeffi- cients of the target field in equation (8). </p><p id="p0065" num="0065"> [0047] After repeating these 3 steps for each m' = -Μ'. , .Μ', K vectors b<sub>m</sub>, may be obtained. Finally, the excitation vector d<sub>m</sub>, may be formed by element-wise summing of the vectors b<sub>m</sub>, as follows: </p><p id="p0066" num="0066"> ¾,· = ∑ (12) where M' refers to a truncated value of series expansion. This vector a<sub>m</sub>, which is actually the same as the weight vector G, is the excitation vector for the OTA antennas 102 to 116 that provides the electric field at the intersection circle around the DUT 100 which makes the communication signal experience the radio channel of the radio channel model at least approximately. When the electric field also fulfils the requirements on the intersection circle, the electric field fulfils the requirements inside the intersection circle. Instead of a circle, another shape for the intersection line may be applied. </p><p id="p0067" num="0067"> [0048] In an embodiment, a matrix inversion may be utilized. This resembles the method of a cost function (see eq. (2)). Weights gk for a single plane wave may be obtained by solving an OTA antenna weight vector G from the following matrix equation, for example </p><p id="p0068" num="0068"> FG = T, (13) where F = { <sub>m k</sub> }, a<sub>m k</sub> e C is a M X K transfer matrix of coefficients from k<sup>th</sup> OTA antennas to m<sup>th</sup> location f<sub>m</sub> on the basis of the configuration of OTA antennas, M is the number of locations associated with test zone 126, G = {g^ }, g<sub>k</sub> &lt;≡ C is a K X 1 vector of OTA antenna complex weights, T = {e<sub>2</sub> (r<sub>m</sub> )} is a M X 1 vector of the complex target field values e<sub>z</sub>(f<sub>m</sub> ) in locations <sub>m</sub> (of a plane wave with AoA φ), F<sub>m</sub> is a location vector pointing to m<sup>th</sup> sample point. </p><p id="p0069" num="0069"> [0049] The transfer coefficient from k<sup>th</sup> OTA antennas to m<sup>th</sup> location 
<!-- EPO <DP n="12"/>-->
 r<sub>m</sub> comprises a path loss term and a phase term a<sub>m k</sub> = PL(d<sub>k m</sub> )exp(- j β r<sub>m</sub> · &lt;¾ ). </p><p id="p0070" num="0070"> [0050] The ta</p><p id="p0071" num="0071"><img id="imgf000012_0001" he="12" wi="102" file="imgf000012_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0072" num="0072">where β is a wave vector ( || ?| = 2π/ <sub>0</sub> ) pointing from AoA direction, λο is the wavelength of the carrier frequency f<sub>c</sub> ,and E<sub>0</sub> = 1. </p><p id="p0073" num="0073"> [0051] Since matrices F and T may be constructed on the basis of predetermined information on the antenna configuration in the OTA chamber, the weight vector G can be solved. If M = K, the weight matrix G may be computed by a matrix inversion </p><p id="p0074" num="0074"> G = F <sup>1</sup>T . (15) </p><p id="p0075" num="0075"> [0052] In general, it may be beneficial to specify more sample points and get an over-determined problem (M &gt; K). In this case the target is to optimize or minimize squared lAnorm. When optimizing, the operation may be expressed as</p><p id="p0076" num="0076"><img id="imgf000012_0002" he="7" wi="128" file="imgf000012_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0077" num="0077">where Th is a threshold at or below which a square of an absolute value of the difference between matrices FG and T should be. Hence, any weight vector G which fulfils the inequality may be selected for the antennas 02 to 116. </p><p id="p0078" num="0078"> [0053] When minimizing, the operation may expressed in the form min HFC - , for example, where min means a minimizing operation with respect to the weight matrix G and ||FG -T^ means a square of an absolute value of the difference between matrices FG and T. The weights which may be solved by pseudo inverse operation </p><p id="p0079" num="0079"> G = (F<sup>H</sup>F)<sup>_1</sup>F<sup>H</sup> -T , (17) where F<sup>H</sup> refers to Hermiten matrix. </p><p id="p0080" num="0080"> [0054] Equations (2) and (17) apply in two-dimensional and three- dimensional configurations. To extend equation (17) to different polarizations, the definition of T should be extended to cover both AoA and (linear) polarization state. For example, three different (x,y,z) polarization vector components (e<sub>x</sub>, e<sub>y</sub>, e<sub>z</sub>) could be defined in locations f<sub>m</sub> . </p><p id="p0081" num="0081"> [0055] In an embodiment, Doppler shifts may also be taken into account in the weights G. A virtual motion of the DUT 100 may be used to create Doppler shifts to the plane waves. The Doppler shift ω<sub>ά</sub> to a plane wave from AoA φ resulting from virtual motion v having a certain strength and direction (see Figure 2) may be expressed as 
<!-- EPO <DP n="13"/>-->
 ω<sub>ά</sub> = -β · ν . (18) </p><p id="p0082" num="0082"> [0056] The Doppler shift may be introduced to each plane wave by multiplying a Doppler frequency component »d (= 2 f<sub>d</sub>, where fd is a Doppler frequency) with the complex weight vector G. That may be done by making the complex weights w<sub>k</sub> of weight vector G time dependent as follows </p><p id="p0083" num="0083">(19) where t is the time and j is the imaginary unit. Now, the received field at an arbitrary location m within the test zone, neglecting the path loss, may be expressed as </p><p id="p0084" num="0084"> K </p><p id="p0085" num="0085"><sub>^ (20)</sub></p><p id="p0086" num="0086">=∑ 9* <sup>εχ</sup>ρ(- j r<sub>m</sub><sup>■</sup> 0<sub>k</sub> )exp(/f (&lt;¾ + a&gt;<sub>c</sub> )) where co<sub>c</sub> = 2ni<sub>c</sub> and f<sub>c</sub> is the carrier frequency. </p><p id="p0087" num="0087"> [0057] Above, weight vector G for only one plane wave has been considered. As a plurality of plane waves are typically needed for creating the desired radio channel for each output of the transmitter, weight vectors G of each plane wave should be combined for forming a combined weight vector G<sub>c</sub> for each signal path 130. The vectors G may be combined as a sum of vectors,</p><p id="p0088" num="0088">P </p><p id="p0089" num="0089">g<sub>k</sub>,<sub>c</sub> = ∑9kj <sub>&gt;</sub> where gk,<sub>c</sub> is an element of G<sub>C)</sub> P is the number of plane waves and k refers to an OTA antenna 102 to 1 16. </p><p id="p0090" num="0090"> [0058] As presented above, a combination of weight vectors G determines the directions, frequencies, phases and amplitudes of the plane waves. Hence, an emulated radio channel may be based on a superposition of plane waves in the test zone 126. </p><p id="p0091" num="0091"> [0059] Figure 3 presents a PAS (Power Angular Spectrum). A specific power angular density function may be formed within the test zone 126 by introducing a plurality of plane waves with an appropriate AoA and magnitude. The AoA space may be sampled uniformly according to the target PAS, as in Figure 3, with N plane waves 300 having a suitable power P<sub>n</sub> determined by a weight. Each small circle represents a wave plane with a power shown on the power axis transmitted by the antennas 102 to 1 16 from an angle shown on the AoA axis. </p><p id="p0092" num="0092"> [0060] Figure 4 presents another option to fix powers and sample 
<!-- EPO <DP n="14"/>-->
 the angular space. Each small circle represents a wave plane with a power shown on the power axis transmitted by the antennas 102 to 1 16 from an angle shown on the AoA axis. The target PAS may be created by having a higher density of samples around an angle of the peak power than elsewhere. In both cases, each plane wave 400 n, n = 1 ,... ,N, has a specific AoA φ<sub>η</sub> and power P<sub>n</sub>. Also the Doppler shift 6¾,n may be unique for each plane wave depending on AoA and velocity vector of the virtual motion. The Doppler shift is determined by the channel model (i.e. PAS), the carrier centre frequency, the virtual speed and the direction of motion. </p><p id="p0093" num="0093"> [0061] The implementation of delay dispersion is straightforward in the presented fading emulator set-up. The propagation of each discrete delay component is assumed to be independent. Thus, weights for different delay taps may be generated applying the same principles as for a single plane wave and an arbitrary power angular spectrum (see Fig. 7). </p><p id="p0094" num="0094"> [0062] In an embodiment, polarization may be taken into account. Figure 5 presents an antenna 500 having antenna elements 502, 504 for two orthogonal polarizations. Orthogonal polarization components 506, 508 (e.g. vertical V and horizontal H) may be created independently by two co-located and orthogonally polarized OTA antenna elements, for example. A single plane wave composed by orthogonally polarized signal components is linearly polarized if g = Ag , AeR, where g<sub>k</sub><sup>v</sup> and g are complex weights for vertically and horizontally polarized OTA antenna elements of the k<sup>th</sup> OTA antenna position. Hence, a linear polarization follows if polarization components 506, 508 have constant magnitude difference and equal phase in equation (21) below exp(- ]β r<sub>m</sub><sup>■</sup> 0<sub>k</sub> )exp(jt{o)<sub>d</sub> + (o<sub>c</sub> )) . (21) 
<img id="imgf000014_0001" he="12" wi="22" file="imgf000014_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0095" num="0095"> [0063] A single plane wave may also be made circularly or ellipti- cally polarized by introducing a phase term a. In that case, the complex weight coefficients may be written as: </p><p id="p0096" num="0096">Q* = Ag<sub>t</sub>V<sup>e</sup> . (22) </p><p id="p0097" num="0097">[0064] A superposition of multiple plane waves, including a fast fading radio channel on the basis of a Doppler frequency cD<sub>d</sub>,n, in an arbitrary location x may be expressed as: 
<!-- EPO <DP n="15"/>-->
 exp(- ]β r<sub>m</sub><sup>■</sup> 9<sub>k</sub> )exp(jt(o&gt;<sub>d n</sub> + ω<sub>ε</sub>)). (23) 
<img id="imgf000015_0001" he="15" wi="19" file="imgf000015_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0098" num="0098"> [0065] The summing over N results usually in a plurality of sine waves of different frequencies which provide plane waves the interference of which leads to a Rayleigh fading channel for a communication signal. Equation (23) has an arbitrary (or time varying elliptical) polarization if phase differences a<sub>n</sub> and/or magnitude differences A<sub>n</sub> of the polarization components of plane waves n are arbitrary in </p><p id="p0099" num="0099">(24) </p><p id="p0100" num="0100">[0066] Figure 6 presents an embodiment of an emulation system which may be multiple-input-multiple-output system (MIMO system). </p><p id="p0101" num="0101"> [0067] The channel model for a MIMO OTA is a geometric antenna independent. When plane geometry is concerned, the parameters of a radio channel may be as follows: </p><p id="p0102" num="0102"> - power (P), delay (τ), </p><p id="p0103" num="0103"> - azimuth angle of arrival (AoA), angle spread of arrival azimuth angles (ASA), shape of clusters (PAS), </p><p id="p0104" num="0104"> - azimuth angle of departure (AoD), angle spread of departure azimuth (ASD), shape of PAS, </p><p id="p0105" num="0105"> - cross polarization power ratio (XPR). </p><p id="p0106" num="0106"> [0068] When solid geometry is concerned, the additional parameters of a radio channel may be as follows: </p><p id="p0107" num="0107"> - elevation angle of arrival (EoA), angle spread of arrival elevation angles (ESA), shape of PAS, </p><p id="p0108" num="0108"> - elevation angle of departure (EoD), angle spread of departure elevation angles (ESD), shape of PAS. </p><p id="p0109" num="0109"> [0069] The parameters may be used for forming the weights. </p><p id="p0110" num="0110"> [0070] The transmitter 124 has at least one output 600, 602 for feeding a communication signal to the emulator 1 18. Figure 6 shows two outputs but in general there may be only one output or more than two outputs. Each output 600, 602 may be coupled with a plurality of filters 604, 606, 608, 610. In general, there may be a plurality of filters for each output. The number of filters may be the same as the number of antennas 102 to 1 16. Each filter 604 to 610 may be a FIR filter which receives a weight vector H of each signal 
<!-- EPO <DP n="16"/>-->
 path 612, 614 from the weight generator 122. The weight vector H may be the weight vector G<sub>c</sub> but it may also include the features relating to crosstalk between the polarization planes and effects of the transmitter 124 and the receiver i.e. the DUT 100 presented later in equation (25), for example. </p><p id="p0111" num="0111"> [0071] Examine now the first output 600. For example, the weight H of the first signal path 612 interacts with communication signal of the first output 600 of the transmitter in the filter 604. Similarly, the weight H of another signal path 614 interacts with communication signal of the first output 600 of the transmitter in the filter 606. The same is performed for all signal paths in filters associated with them, each signal path being coupled with one antenna 102 to 1 16. </p><p id="p0112" num="0112"> [0072] Examine now the second output 602. For example, the weight H of the first signal path 612 interacts with communication signal of the second output 602 of the transmitter in the filter 608. Similarly, the weight H of another signal path 614 interacts with communication signal of the second output 602 of the transmitter in the filter 610. The same is performed for all signal paths in filters associated with them, each signal path being coupled with one antenna 102 to 1 16. Then the weighted signals for the same antenna may be combined in summers 616, 618. The combined signals from each summer 616, 618 may be coupled to an antenna 102 to 1 16. Figure 6 does not show all filters, summers and signal paths for clarity reasons. </p><p id="p0113" num="0113"> [0073] Figure 7 shows a block diagram of a FIR filter which may comprise delay elements 700 to 704 arranged as a shift register, multipliers 706 and a summer 708. The basic function of an FIR filter may be described as follows. The digital input signal x(nn) is delayed in each delay element 700 to 704, whose delays may have the same or different length in time, and the delayed signals are multiplied in the multipliers 706 by the desired weights h<sub>j</sub>(ii) formed by the weight generator 122, where j = [1 , KK]. The plane waves in a signal path may be defined by the weights H<sub>j</sub> = [h(0), h(MM)], which are also called tap coefficients of a FIR filter. The signal components are summed together in a summer 708. The delay dispersion may be controlled by weighting different delays of the input signals x(nn) differently. The coefficients may be formed by summing the right sides of the equations (27) and (28) over the variable n (i.e. over n plane waves). </p><p id="p0114" num="0114"> [0074] In a mathematical form, the output signal y(nn) of a FIR filter may be expressed as a convolution of the sum of the product of the delayed 
<!-- EPO <DP n="17"/>-->
 NN </p><p id="p0115" num="0115">signal and the weights: y(nn) = x<sup>*</sup>h = ^h (k)x(nn - k), where * denotes a con- k=1 </p><p id="p0116" num="0116">volution operation and n denotes the index of a signal element. Signals x and y and a weight h may be processed in a scalar form, vector form or matrix form. Generally, weights h may be real or complex. </p><p id="p0117" num="0117"> [0075] As shown in Figure 6, the weights H providing the desired radio channel model (impulse response files) may be created for U transmitter outputs (outputs refer to transmitter antennas) and K OTA antennas. In a case having only one predetermined polarization plane, UK separate filters 604 to 610 are needed. In a case having two predetermined polarization planes, 2UK (K times co-located V&amp;H elements) separate filters are needed. Hence, corresponding weights are generated in the weight generator 122. </p><p id="p0118" num="0118"> [0076] In the following, it is shown how transmitter antenna field patterns and also receiver characteristics may be embedded in a single plane wave. The weight H<sub>u</sub>,k<sub>,n</sub> from an output u (600, 602) of a transmitter 124 to OTA antenna k (102 to 116) for n<sup>th</sup> plane wave may be expressed as follows: 
<img id="imgf000017_0001" he="14" wi="113" file="imgf000017_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0119" num="0119">where X"<sup>v</sup> is an element of a complex polarization matrix to H polarization from V polarization i.e. crosstalk between polarization planes, φη is AoD (Angle of Departure) of the n<sup>th</sup> plane wave, F<sub>u u V</sub> ^„) is a complex gain of u<sup>th</sup> transmitter antenna of V polarization on AoD φ, φ<sub>η</sub> is a unit vector of a departure angle φ, and q<sub>u</sub> is the location vector of an array element u of a transmitter. The 2x2 polarization matrix contains magnitude differences due to cross polarization power ratio and phase differences due to polarization states (e.g. circular polarization). It may be assumed that field patterns of the transmitter 124 include the phase differences between antenna elements of the transmitter caused by element positions, mutual coupling, etc. </p><p id="p0120" num="0120"> [0077] The equation (25) can be simplified to a form 
<!-- EPO <DP n="18"/>-->
 
<img id="imgf000018_0001" he="26" wi="146" file="imgf000018_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 where symbols of AoA and AoD have been dropped out for notational simplicity. For the V polarized element of k<sup>th</sup> OTA antenna it may be assumed that <sub>ra</sub>, J<sub>≡</sub>l and F<sub>rs k H</sub>{cp<sub>n</sub>)≡Q . </p><p id="p0121" num="0121"> [0078] A weight for a signal path from antenna u of a transmitter to V polarized OTA antenna k for n<sup>th</sup> plane wave may be written as: 
<img id="imgf000018_0002" he="7" wi="148" file="imgf000018_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="yes"/>
 </p><p id="p0122" num="0122">[0079] A weight for a signal path from transmitter antenna u to H polarized OTA antenna k for n<sup>th</sup> plane wave may be written as: 
<img id="imgf000018_0003" he="8" wi="147" file="imgf000018_0003.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0123" num="0123">[0080] From equations (27) and (28) it may be concluded that an effect of transmitter 124 particularly due to transmitter's antenna and transmitter's side propagation effects (resulting to transmitter's antenna correlation and possible power imbalance, for example) may be included in the weights using the term F<sub>tx</sub> according to what is described in the above equations. Similarly, also the receiver's effect may be included in the weights using the term Frx. This is not a computationally complex task, because all the aforementioned effects are time invariant (except for circular polarized transmission). Superposition of multiple plane waves transmitted by OTA antennas and received by a DUT antenna results in realistically transmitter signals through a radio channel. </p><p id="p0124" num="0124"> [0081] It should be noted that the plane waves may have a variety of frequencies in the test zone 126 which are quite different from the carrier frequency of the transmitter. Their interference which is based on the interference of the basis waves shapes the electric field in the test zone. The basis waves, in turn, are based on the carrier(s) of the transmitter although the frequency may have changed due a Doppler effect. The shape of the electric field which may be all the time changing forms the radio channel for the communication signal coming from the transmitter. One plane wave creates spatial-flat, 
<!-- EPO <DP n="19"/>-->
 temporal-flat and frequency-flat channel. All these three domains (space, time and frequency) may be controlled separately with a plurality of plane waves. For example, it is possible to create static propagation conditions with spatial fading only (temporally static). This may be performed by adjusting constant amplitude and phase weight for each of the OTA antennas. For making a communication signal to experience Rayleigh fading, a plurality of plane waves with different frequencies (Doppler shift) and with different phases may be formed simultaneously. Different frequencies provide the electric field in the test zone 126 with sharp enough notches similar to real radio environment. Plane waves with phase shifts but without a Doppler effect provide the test zone 126 with a static channel. To create frequency variation of the radio channel, a plurality of plane waves with a slightly different delays may be generated. To change polarization, phase and amplitude differences may be adjusted between dual-polarized antennas. With the solution presented above it is possible to form effectively line-of-sight signals to the test zone 1126 from the angles between the OTA antennas which is problematic in the prior art. A line-of-sight signal may directed to the DUT from any angle, also from an angle between two antennas. </p><p id="p0125" num="0125"> [0082] Figure 8 presents a solid geometrical embodiment of an OTA test chamber. In this example, the antenna elements (rectangles) are placed (as if) on a surface of a sphere while the DUT 100 is in the middle of the sphere. However, the surface on which the antenna elements are (as if) placed may be a part of any surface which encloses a volume. Examples of such surfaces are a surface of a cube, an ellipsoid, a tedraedra, etc. </p><p id="p0126" num="0126"> [0083] Figure 9 presents a flow chart of the method for forming a weight. In step 900, a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber is formed by comparing of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </p><p id="p0127" num="0127"> [0084] Figure 10 presents a flow chart of a transmission method. In step 1000 basis waveforms from the antenna elements of an over-the-air chamber are transmitted deterministically for forming a plurality of predetermined plane waves in a test zone, the predetermined plane waves forming an emulated radio channel for communication with the device under test in the 
<!-- EPO <DP n="20"/>-->
 test zone. </p><p id="p0128" num="0128"> [0085] The weight generator 122 and/or the emulator 1 18 may be implemented as an electronic digital computer, which may comprise a working memory (RAM), a central processing unit (CPU), and a system clock. The CPU may comprise a set of registers, an arithmetic logic unit, and a control unit. The control unit is controlled by a sequence of program instructions transferred to the CPU from the RAM. The control unit may contain a number of microinstructions for basic operations. The implementation of microinstructions may vary, depending on the CPU design. The program instructions may be coded by a programming language, which may be a high-level programming language, such as C, Java, etc., or a low-level programming language, such as a machine language, or an assembler. The electronic digital computer may also have an operating system, which may provide system services to a computer program written with the program instructions. </p><p id="p0129" num="0129"> [0086] An embodiment provides a computer program embodied on a distribution medium, comprising program instructions which, when loaded into an electronic apparatus, execute the method described above in connection with figures 9 and 10. </p><p id="p0130" num="0130"> [0087] The computer program may be in source code form, object code form, or in some intermediate form, and it may be stored in some sort of carrier, which may be any entity or device capable of carrying the program. Such carriers include a record medium, computer memory, read-only memory, and software distribution package, for example. Depending on the processing power needed, the computer program may be executed in a single electronic digital computer or it may be distributed amongst a number of computers. </p><p id="p0131" num="0131"> [0088] It will be obvious to a person skilled in the art that, as technology advances, the inventive concept can be implemented in various ways. The invention and its embodiments are not limited to the examples described above but may vary within the scope of the claims. 
</p></description><claims mxw-id="PCLM44852303" ref-ucid="WO-2012117147-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="21"/>--> Claims </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. An apparatus configured to form a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber </claim-text><claim-text> by a comparison of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The apparatus of claim 1 , wherein at least two basis waveforms of at least one common plane wave are configured to be transmitted in one signal path. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The apparatus of any preceding claim, wherein the apparatus is configured to form a weight of each signal path for each plane wave on the basis of difference between a desired target electric field determined by the channel model and an electric field obtainable by each plane wave transmittable by the antennas, and to combine the weights of each antenna for forming a weight of a plurality of plane waves for a signal path. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The apparatus of claim 1 , wherein the apparatus is configured to form a weight of each signal path for each plane wave by optimizing a difference between a desired target electric field determined by the channel model and an electric field obtainable by each plane wave transmittable by the antennas. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The apparatus of any preceding claim, wherein the weights is configured to determine the directions, frequencies, phases and amplitudes of the plane waves for the emulated radio channel being based on a superposition of plane waves in the test zone. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The apparatus of any preceding claim, wherein the apparatus is configured to perform the comparison at a plurality of locations at the circumference of the test zone. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The apparatus of claim 1 , wherein the apparatus is configured to include a time dependent Doppler shift in the weight. <!-- EPO <DP n="22"/>--> </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The apparatus of any preceding claim, wherein the apparatus is configured to form weights of each signal path for different polarization planes on the basis of the polarization planes of the antennas. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The apparatus of claim 7, wherein the apparatus is configured to include crosstalk between different polarization planes in the weights. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The apparatus of claim 7, wherein the apparatus is configured to include at least one of the following in the weights: transmitter's effects on transmission and receiver's effect on reception. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The apparatus of claim , wherein the weight generator is configured to save the weights in a memory for emulation of the radio channel. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The apparatus of claim 1 , wherein the apparatus is configured to receive at least two signals having different radio channels, to form a weight for each radio channel and to combine weights of each signal path to form plane waves for each radio channel. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. A method comprising forming a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber </claim-text><claim-text> by comparing of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method of claim 13, wherein at least two basis waveforms of at least one common plane wave is transmittable in one signal path. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method of any preceding claim, the method further comprising forming a weight of each signal path for each plane wave on the basis of difference between a desired target electric field determined by the channel model and an electric field obtainable by each plane wave transmittable by the antennas, and combining the weights of each antenna for forming a weight of a plurality of plane waves. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The method of claim 13, the method further comprising forming a weight of each signal path for each plane wave by optimizing a difference <!-- EPO <DP n="23"/>--> between a desired target electric field determined by the channel model and an electric field obtainable by each plane wave transmittable by the antennas. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method of any preceding claim, the method further comprising determining by the weights the directions, frequencies, phases and amplitudes of the plane waves, the emulated radio channel being based on a superposition of plane waves in the test zone. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method of any preceding claim, the method further comprises performing the comparison at a plurality of locations at the circumference of the test zone. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The method of claim 13, the method further comprises including a time dependent Doppler shift in the weight. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The method of any preceding claim, the method further comprising forming weights of each signal path for different polarization planes on the basis of the polarization planes of the antennas. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The method of claim 20, the method further comprises including crosstalk between different polarization planes in the weights. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The method of claim 13, the method further comprising including at least one of the following in the weights: transmitter's effects on transmission and receiver's effect on reception. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The method of claim 13, the method further comprises receiving at least two signals of different radio channels, forming a weight for each radio channel and combining weights of each signal path to form plane waves for each radio channel. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. An apparatus comprising: </claim-text><claim-text> at least one processor and at least one memory including a computer program code, the at least one memory and the computer program code configured to, with the at least one processor, cause the apparatus at least: </claim-text><claim-text> to form a weight for each signal path associated with an antenna of a plurality of antennas around a test zone in an over-the-air chamber </claim-text><claim-text> by comparing of a desired target electric field based on a radio channel model and an electric field obtainable by the plane waves associated <!-- EPO <DP n="24"/>--> with the test zone, the plane waves being transmittable by the antennas and being based on at least one basis waveform in each signal path. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. An emulation system comprising </claim-text><claim-text> the apparatus of claim 1 ; </claim-text><claim-text> an emulator coupled to the apparatus for receiving weights; a transmitter coupled to the emulator for feeding a communication signal; and </claim-text><claim-text> the antennas configured to receive signals from signal paths of the emulator and transmit plane waves on the basis of the signals from the emulator for forming an emulated radio channel between the transmitter and the device under test. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. An emulation system of claim 25, wherein the transmitter has at least one output coupled to the emulator for feeding the communication signal, each output referring to a unique radio channel; </claim-text><claim-text> the apparatus being configured to form weights with respect to each output separately for forming plane waves for the antennas. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. A transmission method comprising </claim-text><claim-text> transmitting deterministic basis waveforms from the antenna elements of an over-the-air chamber for forming a plurality of predetermined plane waves in a test zone, the predetermined plane waves forming an emulated radio channel for communication with the device under test in the test zone. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
