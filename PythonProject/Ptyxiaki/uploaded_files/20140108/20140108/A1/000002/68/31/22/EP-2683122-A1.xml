<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683122-A1" country="EP" doc-number="2683122" kind="A1" date="20140108" family-id="46929446" file-reference-id="297131" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585127" ucid="EP-2683122-A1"><document-id><country>EP</country><doc-number>2683122</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12765006-A" is-representative="YES"><document-id mxw-id="PAPP154847319" load-source="docdb" format="epo"><country>EP</country><doc-number>12765006</doc-number><kind>A</kind><date>20120322</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP173226878" load-source="docdb" format="original"><country>EP</country><doc-number>12765006.7</doc-number><date>20120322</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140550388" ucid="CN-201110077281-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110077281</doc-number><kind>A</kind><date>20110329</date></document-id></priority-claim><priority-claim mxw-id="PPC140557178" ucid="CN-2012072831-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2012072831</doc-number><kind>W</kind><date>20120322</date></document-id></priority-claim></priority-claims><technical-data><classification-ipc><edition>7</edition><main-classification>H04L  12/56</main-classification></classification-ipc><classifications-ipcr><classification-ipcr mxw-id="PCL-2077476079" load-source="docdb">H04W  76/02        20090101ALI20150331BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2077476843" load-source="docdb">H04L  29/12        20060101ALI20150331BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2077482944" load-source="docdb">H04L  29/06        20060101ALI20150331BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2077483368" load-source="docdb">H04L  12/70        20130101AFI20150331BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2077485826" load-source="docdb">H04L  12/24        20060101ALI20150331BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1699682452" load-source="docdb" scheme="CPC">H04W  76/10        20180201 LI20180203BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042532156" load-source="docdb" scheme="CPC">H04W  24/02        20130101 LI20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042532891" load-source="docdb" scheme="CPC">H04L  41/28        20130101 LI20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042532967" load-source="docdb" scheme="CPC">H04L  61/2015      20130101 LI20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042533047" load-source="docdb" scheme="CPC">H04W  88/085       20130101 LA20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042533741" load-source="docdb" scheme="CPC">H04L  61/1511      20130101 LA20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042539516" load-source="docdb" scheme="CPC">H04L  63/164       20130101 LA20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042541489" load-source="docdb" scheme="CPC">H04L  63/0272      20130101 LA20150701BHEP        </classification-cpc><classification-cpc mxw-id="PCL2003767468" load-source="docdb" scheme="CPC">H04L  63/02        20130101 LI20140116BHEP        </classification-cpc><classification-cpc mxw-id="PCL2003767469" load-source="docdb" scheme="CPC">H04W  76/02        20130101 FI20140116BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132360014" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNG ZUR HERSTELLUNG EINER VERBINDUNG MIT EINEM NETZWERKVERWALTUNGSSYSTEM UND KOMMUNIKATIONSSYSTEM DAFÜR</invention-title><invention-title mxw-id="PT132360015" lang="EN" load-source="patent-office">METHOD AND DEVICE FOR ESTABLISHING CONNECTION WITH NETWORK MANAGEMENT SYSTEM, AND COMMUNICATION SYSTEM</invention-title><invention-title mxw-id="PT132360016" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF DESTINÉS À ÉTABLIR UNE CONNEXION AVEC UN SYSTÈME DE GESTION DE RÉSEAU, ET SYSTÈME DE COMMUNICATION</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919539005" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR919537923" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR919015135" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>101233704</iid><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919513772" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WANG KE</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919536568" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WANG, KE</last-name></addressbook></inventor><inventor mxw-id="PPAR919011373" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WANG, KE</last-name><address><street>Huawei Administration Building Bantian Longgang District Shenzhen</street><city>Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919513851" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>PENG YAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919525610" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>PENG, YAN</last-name></addressbook></inventor><inventor mxw-id="PPAR919009431" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>PENG, YAN</last-name><address><street>Huawei Administration Building Bantian Longgang District Shenzhen</street><city>Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919007957" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Pfenning, Meinig &amp; Partner GbR</last-name><iid>101244111</iid><address><street>Theresienhöhe 13</street><city>80339 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2012072831-W"><document-id><country>CN</country><doc-number>2012072831</doc-number><kind>W</kind><date>20120322</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012130085-A1"><document-id><country>WO</country><doc-number>2012130085</doc-number><kind>A1</kind><date>20121004</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549814935" load-source="docdb">AL</country><country mxw-id="DS549742772" load-source="docdb">AT</country><country mxw-id="DS549814936" load-source="docdb">BE</country><country mxw-id="DS549816813" load-source="docdb">BG</country><country mxw-id="DS549818881" load-source="docdb">CH</country><country mxw-id="DS549745074" load-source="docdb">CY</country><country mxw-id="DS549742777" load-source="docdb">CZ</country><country mxw-id="DS549816315" load-source="docdb">DE</country><country mxw-id="DS549814937" load-source="docdb">DK</country><country mxw-id="DS549745075" load-source="docdb">EE</country><country mxw-id="DS549744821" load-source="docdb">ES</country><country mxw-id="DS549816822" load-source="docdb">FI</country><country mxw-id="DS549816823" load-source="docdb">FR</country><country mxw-id="DS549814942" load-source="docdb">GB</country><country mxw-id="DS549814943" load-source="docdb">GR</country><country mxw-id="DS549814944" load-source="docdb">HR</country><country mxw-id="DS549745076" load-source="docdb">HU</country><country mxw-id="DS549818886" load-source="docdb">IE</country><country mxw-id="DS549814945" load-source="docdb">IS</country><country mxw-id="DS549816824" load-source="docdb">IT</country><country mxw-id="DS549745085" load-source="docdb">LI</country><country mxw-id="DS549816316" load-source="docdb">LT</country><country mxw-id="DS549742778" load-source="docdb">LU</country><country mxw-id="DS549816317" load-source="docdb">LV</country><country mxw-id="DS549816350" load-source="docdb">MC</country><country mxw-id="DS549908617" load-source="docdb">MK</country><country mxw-id="DS549908618" load-source="docdb">MT</country><country mxw-id="DS549744822" load-source="docdb">NL</country><country mxw-id="DS549816825" load-source="docdb">NO</country><country mxw-id="DS549744823" load-source="docdb">PL</country><country mxw-id="DS549816830" load-source="docdb">PT</country><country mxw-id="DS549744824" load-source="docdb">RO</country><country mxw-id="DS549818887" load-source="docdb">RS</country><country mxw-id="DS549744833" load-source="docdb">SE</country><country mxw-id="DS549818888" load-source="docdb">SI</country><country mxw-id="DS549908619" load-source="docdb">SK</country><country mxw-id="DS549908620" load-source="docdb">SM</country><country mxw-id="DS549745086" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673299" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention relates to the field of communications technologies and discloses a method, a device, and a communication system for establishing a connection with a network management system. The method includes: obtaining, by a relay node, a first IP address of the relay node; obtaining, by the relay node, an IP address of a security gateway by using the first IP address of the relay node; establishing, by the relay node, an IP security tunnel with the security gateway according to the IP address of the security gateway; obtaining, by the relay node, a second IP address of the relay node and an IP address of the network management system through the IP security tunnel; and establishing, by the relay node, a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Using the present invention may implement a connection between a relay node and a network management system and ensure the security of the relay node and a correct network access.<img id="iaf01" file="imgaf001.tif" wi="78" he="102" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737450" lang="EN" source="EPO" load-source="docdb"><p>The present invention relates to the field of communications technologies and discloses a method, a device, and a communication system for establishing a connection with a network management system. The method includes: obtaining, by a relay node, a first IP address of the relay node; obtaining, by the relay node, an IP address of a security gateway by using the first IP address of the relay node; establishing, by the relay node, an IP security tunnel with the security gateway according to the IP address of the security gateway; obtaining, by the relay node, a second IP address of the relay node and an IP address of the network management system through the IP security tunnel; and establishing, by the relay node, a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Using the present invention may implement a connection between a relay node and a network management system and ensure the security of the relay node and a correct network access.</p></abstract><description mxw-id="PDES63959287" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This application claims priority to Chinese Patent Application No. <patcit id="pcit0001" dnum="CN201110077281"><text>201110077281.7</text></patcit>, filed with the Chinese Patent Office on March 29, 2011 and entitled "METHOD, DEVICE, AND COMMUNICATION SYSTEM FOR ESTABLISHING CONNECTION WITH NETWORK MANAGEMENT SYSTEM", which is incorporated herein by reference in its entirety.</p><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0002" num="0002">The present invention relates to the field of communications technologies, and in particular, to a method, a device, and a communication system for establishing a connection with a network management system.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0003" num="0003">In the process of broadband and mobilization development of a network, the 3rd Generation Partnership Program (3rd Generation Partnership Program, 3GPP) organization introduces the Long Term Evolution (Long Term Evolution, LTE) solution, namely Evolved Universal Mobile Telecommunication System (UMTS) Territorial Radio Access Network (Evolved Universal Mobile Telecommunication System Territorial Radio Access Network, E-UTRAN), for a mobile access network, and introduces the System Architecture Evolution (System Architecture Evolution, SAE) scheme, namely Evolved Packet Core (Evolved Packet Core, EPC), for a mobile core network.</p><p id="p0004" num="0004">A conventional cellular network is a base-station-centered star topology network and uses centralized control. Therefore, a problem about relay node access does not exist in an access network. In an LTE system, a relay node (Relay Node, RN) is introduced in an access network to extend the network coverage, increase network capacity, and improve flexibility of network deployment. In the process of a relay node accessing the network, the relay node needs to establish a connection with a network management system, such as an operation and management (Operation and Management, OAM) system, and then download a configuration parameter from the network<!-- EPO <DP n="2"> --> management system to implement the access and configuration of the relay node. Meanwhile, the security of the connection between the relay node and the network management system and the security of the connection establishing process need to be further ensured. However, in the prior art, there is no implementation scheme about how to establish a connection between a relay node and a network management system.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0005" num="0005">To resolve the foregoing problem existing in the prior art, embodiments of the present invention provide a method, a device, and a communication system for establishing a connection with a network management system, so as to implement a connection between a relay node and a network management system and ensure the security of the relay node and a correct network access.</p><p id="p0006" num="0006">For this purpose, an embodiment of the present invention provides a method for establishing a connection with a network management system, including: obtaining, by a relay node, a first IP address of the relay node; obtaining, by the relay node, an IP address of a security gateway by using the first IP address of the relay node; establishing, by the relay node, an IP security tunnel with the security gateway according to the IP address of the security gateway; obtaining, by the relay node, a second IP address of the relay node and an IP address of the network management system through the IP security tunnel; and establishing, by the relay node, a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</p><p id="p0007" num="0007">An embodiment of the present invention further provides a method for establishing a packet data network connection for a relay node, including: obtaining, by a mobile management entity MME, subscription data of a relay node when the relay node accesses a network, where the subscription data includes information for instructing selection of a packet data network gateway P-GW for the relay node; and selecting, by the MME, a P-GW for serving the relay node according to the subscription data, so that the P-GW may establish a packet data network PDN connection for the relay node.</p><p id="p0008" num="0008">An embodiment of the present invention further provides a relay node, including: a first address obtaining unit, configured to obtain a first IP address of the relay node; a querying unit, configured to obtain an IP address of a security gateway by using the first IP address; a security tunnel establishing unit, configured to establish an IP security tunnel with the security gateway according to the IP address of the security gateway; a second address obtaining unit, configured to obtain a second IP address of the relay node and an IP address of a network management system through the IP security tunnel; and a connection establishing unit, configured to establish a<!-- EPO <DP n="3"> --> connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</p><p id="p0009" num="0009">An embodiment of the present invention further provides a mobile management network element, including: a subscription data obtaining unit, configured to obtain subscription data of a relay node when the relay node accesses a network, where the subscription data includes information for instructing selection of a packet data network gateway P-GW for the relay node; and a gateway selection unit, configured to select a P-GW for serving the relay node according to the subscription data, so that the P-GW establishes a packet data network PDN connection for the relay node.</p><p id="p0010" num="0010">An embodiment of the present invention further provides a communication system, including: a network management system and a relay node, where the relay node is configured to establish a connection with the network management system.</p><p id="p0011" num="0011">In the method, the device, and the communication system for establishing a connection with a network management system provided by the embodiments of the present invention, the relay node obtains the first IP address of the relay node by using the PDN connection; obtains the IP address of the security gateway by using the first IP address of the relay node; establishes the IP security tunnel with the security gateway according to the IP address of the security gateway; obtains the second IP address of the relay node and the IP address of the network management system through the IP security tunnel; and establishes the connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Consequently, during the process of accessing a network, the relay node implements a connection with the network management system, and the security of the connection and the processing of establishing the connection is ensured. This further ensures that the relay node is capable of downloading necessary configuration parameters from the network management system to perform access and configuration of the relay node.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF DRAWINGS</b></heading><p id="p0012" num="0012">To illustrate the technical solutions in the embodiments of the present invention or in the prior art more clearly, the following briefly introduces the accompanying drawings required for describing the embodiments. Apparently, the accompanying drawings in the following description show merely some embodiments of the present invention, and persons of ordinary skill in the art may still derive other drawings from these accompanying drawings without creative efforts.</p><p id="p0013" num="0013"><ul><li><figref idrefs="f0001">FIG. 1</figref> is a schematic diagram of a network architecture after a relay node is introduced in an E-UTRAN network according to an embodiment of the present invention;<!-- EPO <DP n="4"> --></li><li><figref idrefs="f0002">FIG. 2</figref> is a flowchart of a method for establishing a connection with a network management system according to an embodiment of the present invention;</li><li><figref idrefs="f0003">FIG. 3</figref> is a flowchart of message exchange during establishment of a connection between a relay node and a network management system according to an embodiment of the present invention;</li><li><figref idrefs="f0003">FIG. 4</figref> is a flowchart of a method for establishing a packet data network connection for a relay node according to an embodiment of the present invention;</li><li><figref idrefs="f0004">FIG. 5</figref> is a schematic structural diagram of a relay node according to an embodiment of the present invention;</li><li><figref idrefs="f0004">FIG. 6</figref> is a schematic structural diagram of a mobile management network element according to an embodiment of the present invention; and</li><li><figref idrefs="f0005">FIG. 7</figref> is another schematic structural diagram of the mobile management network element according to an embodiment of the present invention.</li></ul></p><heading id="h0005"><b>DESCRIPTION OF EMBODIMENTS</b></heading><p id="p0014" num="0014">In order to make persons skilled in the art understand the solutions of the embodiments of the present invention more clearly, the embodiments of the present invention are further described in detail in the following with reference to the accompanying drawings and implementation manners.</p><p id="p0015" num="0015">In an E-UTRAN network, after the introduction of a relay node, the network architecture is shown in <figref idrefs="f0001">FIG. 1</figref>.</p><p id="p0016" num="0016">In the network architecture, a relay node (such as RN1, RN2, RN3, and RN4 in <figref idrefs="f0001">FIG. 1</figref>) accesses the network through a Donor base station (Donor eNB, DeNB), and is similar to a user equipment (User Equipment, UE), also establishes a connection with a mobile management entity (Mobile Management Entity, MME) and a service gateway (S-GW) during the network access process of the relay node. Meanwhile, as a network element device, the relay node further needs to establish a connection with a network management system and download configuration parameters, so as to enable relevant functions of the relay node so that the user equipment (such as UE1, UE2, UE3, UE4, and UE5 in <figref idrefs="f0001">FIG. 1</figref>) may access the network.</p><p id="p0017" num="0017">To establish connectivity with the network management system, the relay node needs to establish a PDN connection first to establish basic IP connectivity between the relay node and a core network. The PDN connection is associated with a specific packet data network gateway (PDN Gateway, P-GW), that is, the user equipment needs to perform data exchange with the packet data network PDN through the P-GW. Different from a process of establishing a PDN connection for a<!-- EPO <DP n="5"> --> common user equipment, the PDN connection established by the relay node is used to provide a connection between the relay node and the network management system and a connection between the relay node and a network where the network management system is located. The network management system and the network where the network management system is located are possessed by an operator and need to be protected for security. To ensure the IP accessibility between the relay node and the network management system, a P-GW needs to be specified, that is, when performing selection of a P-GW during the process of establishing a PDN connection, the MME needs to select a P-GW that is capable of supporting the IP accessibility between the relay node and the network where the network management system is located. Meanwhile, when establishing a session, the P-GW also needs to perform a corresponding processing operation according to a network management service type specified by the MME.</p><p id="p0018" num="0018">In a network access process of a relay node, the following two phases are included.</p><p id="p0019" num="0019">Phase 1: In this phase, the relay node is used as a UE to access a network, and the relay node may access any base station which may be a common evolved base station (Evolved Node B, eNB) or a Donor base station (Donor eNB, DeNB). In this phase, the relay node needs to establish a connection with a network management system, and then download a DeNB cell list and other configuration parameters from the network management system.</p><p id="p0020" num="0020">Phase 2: After obtaining the DeNB cell list, the relay node selects a DeNB cell from the DeNB cell list and accesses the cell. In this phase, the relay node accesses a DeNB and the DeNB selects for the relay node an MME that is capable of supporting relay. In this phase, the relay node also needs to keep or establish connectivity with the network management system.</p><p id="p0021" num="0021">In phase 1, when the relay node accesses the network, the MME considers the relay node as a UE. In the network access process of a UE defined by present standards, the UE establishes a PDN connection to a P-GW, and obtains, through the PDN connection, the IP connectivity for communicating with a specified PDN. Therefore, the MME needs to select a P-GW for serving the UE. In the prior art, the principle of selecting a P-GW for a UE is: Each piece of PDN subscription data includes an access point name (Access Point Name, APN) and a gateway (Gateway, GW) identifier; in general, the MME uses the gateway identifier information to select the P-GW for serving the UE; however, if the gateway identifier information is not included, the MME constructs a corresponding APN-fully qualified domain name (APN-Fully Qualified Domain Name, N-FQDN) according to the APN in the PDN subscription data, and then obtains an address of the P-GW from a domain name server (Domain Name Server, DNS) according to the APN-FQDN.</p><p id="p0022" num="0022">For the relay node, because the relay node needs to establish IP connectivity with the network where the network management system is located and the P-GW for serving the relay node<!-- EPO <DP n="6"> --> needs to support IP accessibility between the relay node and the network where the network management system is located, an existing method for selecting a P-GW for a UE cannot be used to select a P-GW for serving a relay node that accesses a network.</p><p id="p0023" num="0023">In addition, the relay node further needs to obtain address information of the network management system, and the network management system may be operator-level or equipment-vendor-level. The relay node is capable of establishing a connection with the network management system only after obtaining the information. In addition, to avoid that the information about the network management system is illegally obtained or modified by a third party in the process of establishing a connection between the relay node and the network management system, a relevant mechanism is needed to ensure the secure transmission of the information.</p><p id="p0024" num="0024">To solve the foregoing problem, in the method, the device, and the network for establishing a connection with a network management system in the embodiments of the present invention, a relay node obtains a first IP address of the relay node by using a PDN connection; the relay node obtains an IP address of a security gateway by using the first IP address of the relay node; the relay node establishes an IP security tunnel with the security gateway according to the IP address of the security gateway; the relay node obtains a second IP address of the relay node and an IP address of the network management system through the IP security tunnel; and the relay node establishes a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Because it is on a protected IP security tunnel that the relay node obtains address information of the network management system, not only the connection between the relay node and the network management system is implemented, but also secure and correct transmission of the information about the network management system is ensured.</p><p id="p0025" num="0025"><figref idrefs="f0002">FIG. 2</figref> is a flowchart of a method for establishing a connection between a relay node and a network management system according to an embodiment of the present invention, including the following content:</p><p id="p0026" num="0026">Step 201: A relay node obtains a first IP address of the relay node.</p><p id="p0027" num="0027">Optionally, the obtaining, by a relay node, a first IP address of the relay node includes: obtaining, by the relay node, the first IP address by using a Dynamic Hosting Configuration Protocol (Dynamic Hosting Configuration Protocol, DHCP) process. For example, after establishing a PDN connection, the relay node obtains its own IP address through a DHCP process, namely, the first IP address of the relay node. For the specific DHCP process, reference may be made to the prior art, which is not described herein again. Alternatively, the relay node obtains the first IP address of the relay node through a process of establishing a PDN connection. For example,<!-- EPO <DP n="7"> --> in the process of establishing the PDN connection, a P-GW directly assigns an IP address to the relay node, namely, the first IP address of the relay node.</p><p id="p0028" num="0028">Step 202: The relay node obtains an IP address of a security gateway by using the first IP address of the relay node.</p><p id="p0029" num="0029">Optionally, the relay node may make a query to the DNS by using an FQDN that includes information about the network management system and obtain the IP address of the security gateway. For example, in a specific implementation process, by sending an FQDN that includes information about the network management system to the DNS to make a query, the relay node obtains the IP address of the security gateway fed back by the DNS.</p><p id="p0030" num="0030">The network management system may be any one or more of the following identification information: a device identifier of the relay node, a device manufacturer identifier of the relay node, an operator identifier, and a network management system identifier, where the device identifier of the relay node may be the hardware address, the hardware number., the device card number., or the device number. of the relay node.</p><p id="p0031" num="0031">For example, the FQDN constructed by the relay node may include one or more of the foregoing identifiers. The multiple identifiers are connected by a ".". Certain non-limitative examples ("&lt;&gt;" and characters in &lt;&gt; are an annotation) are provided in the following:
<ul><li>relay&lt;indicating a relay node&gt;.123456&lt;indicating the device identifier of the relay node&gt;.XX....;</li><li>relay&lt;indicating a relay node&gt;.AAA&lt;indicating the device manufacturer identifier of the relay node&gt;.XX....;</li><li>oam&lt;indicating a network management system&gt;.AAA&lt;indicating the device manufacturer identifier of the relay node&gt;.XX....;</li><li>oam&lt;indicating a network management system&gt;.BBB&lt;operator identifier&gt;.XX....; and</li><li>oam&lt;indicating a network management system&gt;.123456 &lt;indicating the device identifier of the relay node&gt;.XX.....</li></ul></p><p id="p0032" num="0032">Or, the relay node may further use a DHCP process that includes the information about the network management system to make a query to the DHCP server and obtain the IP address of the security gateway. For example, in a specific implementation process, by sending a DHCP message that includes the information about the network management system to the DHCP server for making a query, the relay node obtains the IP address of a security gateway fed back by the DHCP server.</p><p id="p0033" num="0033">The network management system may be any one or more of the following identification information: a device identifier of the relay node, a device manufacturer identifier of<!-- EPO <DP n="8"> --> the relay node, an operator identifier, and a network management system identifier. The device identifier of the relay node may be the hardware address, the hardware number., the device card number., or the device number. of the relay node. In a specific implementation process, the information may be includeed in a DHCP option (DHCP option) field in a DHCP request message for requesting or querying for specific information from the DHCP server.</p><p id="p0034" num="0034">In the embodiment of the present invention, the network management system may be an operator-level network management system, and correspondingly, the IP address of a security gateway fed back by the DNS or the DHCP server is an IP address of a security gateway that is associated with the network where the operator-level network management system is located; or, the network management system may further be a device-manufacturer-level network management system, and correspondingly, the IP address of a security gateway fed back by the DNS or the DHCP server is an IP address of a security gateway that is associated with the network where the device-manufacturer-level network management system is located.</p><p id="p0035" num="0035">It should be noted that the association described herein means that the network where the network management system is located can be accessed only through the security gateway. The network where the network management system is located includes: an actual IP (subnet) network where the network management system is located, or an IP (subnet) network that performs interconnection communication with the actual IP (subnet) network where the network management system is located. The network in the embodiment of the present invention is protected by a security gateway.</p><p id="p0036" num="0036">Step 203: The relay node establishes an IP security tunnel with the security gateway according to the IP address of the security gateway.</p><p id="p0037" num="0037">The IP address of the security gateway is used for addressing the security gateway. In the process of establishing the IP tunnel between the relay node and the security gateway, the relay node performs authentication with the security gateway and establishes, after the authentication is successful, the IP security tunnel with the security gateway. Certain existing implementation manners may be used for the authentication and the process of establishing the IP security tunnel, which is not limited by the embodiment of the present invention.</p><p id="p0038" num="0038">Step 204: The relay node obtains a second IP address of the relay node and an IP address of the network management system through the IP security tunnel.</p><p id="p0039" num="0039">In this step, the second IP address of the relay node is an IP address used for network management service transmission for the relay node and specifically may be obtained by initiating a DHCP process to the network where the network management system is located on the IP security tunnel.<!-- EPO <DP n="9"> --></p><p id="p0040" num="0040">The IP address of the network management system may be obtained by using any one of the following manners:
<ul><li>(1) The relay node initiates a DHCP process to the network where the network management system is located on the IP security tunnel to obtain the IP address of the network management system, that is, the relay node requests the IP address of the network management system from the DHCP server through a DHCP process; to be specific, information about the network management system may be included in a DHCP option (DHCP option) field in a DHCP request message, and the DHCP server directly feeds back the IP address of the network management system.</li><li>(2) The DHCP server feeds back an FQDN that indicates the network management system to the relay node, and then the relay node uses the FQDN to make a query to the DNS on the IP security tunnel so as to obtain the IP address of the network management system fed back by the DNS.</li><li>(3) The relay node uses an FQDN that includes information about the network management system to make a query to the DNS on the IP security tunnel so as to obtain the IP address of the network management system.</li></ul></p><p id="p0041" num="0041">The information about the network management system may be any one or more of the following information: a device identifier of the relay node, a device manufacturer identifier of the relay node, an operator identifier, and a network management system identifier. The device identifier of the relay node may be the hardware address, the hardware number., the device card number., or the device number. of the relay node.</p><p id="p0042" num="0042">The process of constructing an FQDN and the process of making a query to the DNS are similar to the operations in step 202, which are not described herein again.</p><p id="p0043" num="0043">Step 205: The relay node establishes a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</p><p id="p0044" num="0044">In this step, the established connection is implemented through the IP security tunnel between the relay node and the security gateway, and the establishment of the connection may be initiated by the relay node or by the network management system.</p><p id="p0045" num="0045"><figref idrefs="f0003">FIG. 3</figref> is a flowchart of message exchange during establishment of a connection between a relay node and a network management system according to an embodiment of the present invention, mainly including the following content:</p><p id="p0046" num="0046">Step 301: A relay node obtains a first IP address of the relay node through a process of establishing a PDN connection.<!-- EPO <DP n="10"> --></p><p id="p0047" num="0047">Step 302: The relay node initiates a request to a DNS by using an FQDN that includes information about a network management system, or initiates a request to a DHCP server by using a DHCP request message that includes information about a network management system.</p><p id="p0048" num="0048">Step 303: The relay node receives an IP address of a security gateway fed back by the DNS or the DHCP server to the relay node.</p><p id="p0049" num="0049">Step 304: The relay node establishes an IP security (Security Architecture for IP network, IPSec) tunnel between the relay node and the security gateway by using the first IP address of the relay node and the IP address of security gateway.</p><p id="p0050" num="0050">In this step, the IP address of the security gateway is used for addressing the security gateway. An existing mechanism may be used in the authentication between the relay node and the security gateway and in the process of establishing the IPSec channel.</p><p id="p0051" num="0051">Step 305: The relay node obtains a second IP address of the relay node and an IP address of the network management system by initiating a DHCP process through the IPSec tunnel.</p><p id="p0052" num="0052">In this step, the relay node obtains the second IP address of the relay node used for network management service transmission through the DHCP process.</p><p id="p0053" num="0053">The IP address of the network management system may be obtained by using the following three manner:
<ol><li>(1) Initiate a DHCP process to the network where the network management system is located on the IP security tunnel so as to obtain the IP address of the network management system, that is, request the IP address of the network management system from the DHCP server through a DHCP process; to be specific, have information that indicates the network management system included in a DHCP option (DHCP option) field in a DHCP request message, and the DHCP server directly feeds back the IP address of the network management system.</li><li>(2) The DHCP server feeds back a fully qualified domain name FQDN that indicates the network management system, and the fully qualified domain name FQDN that indicates the network management system is used to make a query to the domain name server DNS on the IP security tunnel and obtain the IP address of the network management system fed back by the DNS.</li><li>(3) Use an FQDN that includes information about the network management system to make a query to the DNS on the IP security tunnel to obtain the IP address of the network management system.</li></ol></p><p id="p0054" num="0054">Step 306: The relay node establishes a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</p><p id="p0055" num="0055">As shown in <figref idrefs="f0003">FIG. 3</figref>, the IP connection established between the relay node and the<!-- EPO <DP n="11"> --> network management system is implemented through the IP security tunnel between the relay node and the security gateway; and the establishment of the IP connection may be initiated by the relay node or by the network management system.</p><p id="p0056" num="0056">It may be seen that, in the method for establishing a connection with a network management system provided by the embodiment of the present invention, the relay node obtains the first IP address of the relay node, obtains the IP address of the security gateway by using the first IP address of the relay node, establishes the IP security tunnel with the security gateway, obtains the second IP address of the relay node and the IP address of the network management system used for network management service transmission through the IP security tunnel, and establishes a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Consequently, during the process of accessing a network, the relay node implements a connection with the network management system, and the security of the connection and the processing of establishing the connection is ensured. This further ensures that the relay node is capable of downloading necessary configuration parameters from the network management system to perform access and configuration of the relay node.</p><p id="p0057" num="0057">In the embodiment of the present invention, a PDN connection used for network management service transmission is required for establishing the connection between the relay node and the network management system, where the PDN connection is established by a P-GW for serving the relay node and the selection of a P-GW is performed by an MME. A plurality of implementation manners may be used for selecting a P-GW for serving the relay node, which is not limited in the embodiment of the present invention. Several examples are provided in the following for a detailed description.</p><p id="p0058" num="0058">Specifically, information for instructing the selection of the P-GW for the relay node may be set in the subscription data of the relay node. In this way, when the relay node accesses a network, the MME may select the P-GW according to the subscription data of the relay node, and initiate session establishment request to the selected P-GW. The session establishment request includes an APN. The APN is from the subscription data of the relay node and may include a network management service label so that the P-GW establishes a PDN connection according to the network management service label.</p><p id="p0059" num="0059"><figref idrefs="f0003">FIG. 4</figref> is a flowchart of a method for establishing a packet data network connection for a relay node according to an embodiment of the present invention, including the following content:</p><p id="p0060" num="0060">Step 401: When a relay node accesses a network, an MME obtains subscription data of the relay node. The subscription data includes information for instructing selection of a P-GW for<!-- EPO <DP n="12"> --> the relay node.</p><p id="p0061" num="0061">The subscription data refers to PDN subscription data, the information for instructing the selection of the P-GW for the relay node. According to different access scenarios of the relay node, the information may have a plurality of manners. For example, the information may be one or any combination of the following:
<ol><li>(1) an IP address which corresponds to a specific P-GW and is set in a P-GW identifier, where the specific P-GW supports establishing an IP connection to a network management system;</li><li>(2) a set fully qualified domain name, including a hostname of the P-GW that includes a P-GW information identifier and a public land mobile network (Public Land Mobile Network, PLMN) where the P-GW is located, where the P-GW information identifier includes one or more of the following information: a group identifier, a gateway identifier, a gateway type, and gateway information;</li><li>(3) a new label added in the APN network identifier (The APN Network Identifier, APN-NI) that is included in the subscription data, or a new service label added in the APN-NI; and</li><li>(4) a specific identifier added in the APN operator identifier replacement (The APN Operator Identifier replacement, APN-OI replacement) that is included in the subscription data, where the APN-OI replacement may be a UE-level APN-OI replacement or an APN-level APN-OI replacement.</li></ol></p><p id="p0062" num="0062">A process for the MME, in different scenarios, to select a P-GW for the relay node according to the information is described in detail later.</p><p id="p0063" num="0063">Step 402: The MME selects a P-GW for serving the relay node according to the subscription data, so that the P-GW establishes a packet data network PDN connection for the relay node.</p><p id="p0064" num="0064">After selecting the P-GW for serving the relay node, the MME initiates a session establishment request to the selected P-GW. The session establishment request includes an APN, and the APN is from the subscription data of the relay node and may include a network management service label so that the P-GW establishes a PDN connection according to the network management service label.</p><p id="p0065" num="0065">After the selection of the P-GW is performed, the selection of an S-GW may be performed by following an existing criterion. Then, the MME may initiate a session establishment request to the P-GW through the S-PW. The request includes a corresponding APN, and the APN is used for indicating a type of a service transmitted through the PDN connection established by the P-GW.</p><p id="p0066" num="0066">In the prior art, the P-GW, according to a service label in the APN-NI, identifies the type<!-- EPO <DP n="13"> --> of the service transmitted through the PDN connection that needs to be established.</p><p id="p0067" num="0067">In the embodiment of the present invention, for the purpose that the P-GW may identify the type of the service transmitted through the PDN connection that needs to be established, a new service label may be defined for the relay node in the APN for indicating that a PDN connection that may be used for network management service transmission is to be established.</p><p id="p0068" num="0068">It has been mentioned above that, in the embodiment of the present invention, the information which is used for instructing the selection of the P-GW for the relay node and is included in the subscription data may have a plurality of implementation manners. The process for the MME, in different scenarios, to select the P-GW for the relay node according to the information is described in detail in the following.</p><p id="p0069" num="0069">Scenario 1: Supposing that the relay node establishes the PDN connection in phase 1 of the network access of the relay node, an existing process of selecting a P-GW when a UE access a network is used in the process of selecting the P-GW, that is, the MME selects a P-GW for the relay node according to information in the PDN subscription data in a home subscriber server (Home Subscriber Server, HSS). In the prior art, for each subscribed PDN, information provided by the HSS includes:
<ol><li>(1) a P-GW identifier and an access point name (Access Point Name, APN); or</li><li>(2) an APN and an indication for the APN, where the indication indicates whether it is allowed that a visited PLMN (Visited PLMN, VPLMN) assigns a P-GW or only a home PLMN (Home PLMN, HPLMN) may assign a P-GW; and</li><li>(3) the HSS further indicates the corresponding subscribed PDN of which APN is the default APN of the UE.</li></ol></p><p id="p0070" num="0070">However, because the relay node needs to establish a connection to the network management system, the P-GW selected for the relay node should be capable of supporting IP connectivity for connecting the network management system and be capable of establishing a PDN connection to the network management system for the relay node. Therefore, the P-GW should be a specific P-GW and should be differentiated from other common P-GWs during the selection of the P-GW, and the location of the P-GW is not limited and may be in a core network.</p><p id="p0071" num="0071">Base on this situation, in the embodiment of the present invention, information in the existing PDN subscription data may be modified to include information for instructing selection of a P-GW for the relay node. As a result, when the relay node accesses a network, the MME may directly select a P-GW according to the information in the PDN subscription data. Specifically, information in the P-GW identifier may be modified, and information in the APN may also be modified. The two implementation manners are described in detail in the following:<!-- EPO <DP n="14"> --></p><p id="p0072" num="0072">1. Modify information in the P-GW identifier to have the information for instructing the selection of the P-GW for the relay node included in the P-GW identifier. As a result, when the relay node accesses a network, the MME may directly select a P-GW by using the information in the P-GW identifier, which may specifically include the following implementation manners:
<ul><li>(1) Set a specific IP address in the P-GW identifier in the PDN subscription data. The IP address corresponds to a specific P-GW in the core network. The MME may locate the specific P-GW by using the IP address. That is, when the relay node accesses a network, the MME uses the IP address in the P-GW identifier in the subscription data of the relay node as the address of the P-GW for serving the relay node.</li><li>(2) Define a special FQDN in the PDN subscription data. When the relay node access a network, the MME requests, according to the FQDN, an IP address corresponding to the FQDN from the DNS. The IP address is the address of the P-GW for serving the relay node.</li></ul></p><p id="p0073" num="0073">The FQDN refers to a hostname plus a full path. The fully qualified domain name may logically accurately indicate where a host is, that is, the fully qualified domain name is a complete presentation form of a hostname. Information included in the fully qualified domain name may specify the location of the host in a domain-name tree.</p><p id="p0074" num="0074">In the prior art, an FQDN consists of Destination-Host (Destination-Host) and Destination-Realm (Destination-Realm), where:
<ul><li>Destination-Host includes a hostname (hostname) of a target P-GW, meeting the following format: &lt;"topon"|"topoff"&gt;.&lt;single-label-interface-name&gt;.&lt;canonical-node-name&gt;, in which, &lt;"topon"|"topoff"&gt; indicates whether to preferably select a P-GW that has a closer topological distance or shares the same address with a service gateway (Service GW, S-GW); &lt;single-label-interface-name&gt; indicates a port type, such as Eth-0 or S8; and &lt;canonical-node-name&gt; indicates description of the P-GW node; and</li><li>Destination-Realm consists of the following formats:
<ul><li>epc.mnc&lt;MNC&gt;.mcc&lt;MCC&gt;.3gppnetwork.org, in which, mnc and mcc indicate which PLMN the P-GW is located in.</li></ul></li></ul></p><p id="p0075" num="0075">For the purpose of differentiating from a P-GW for serving a UE, in the embodiment of the present invention, the information for instructing the selection of the P-GW for the relay node may be added in the FQDN of an existing P-GW, so that the MME requests, through the FQDN, a the address of the P-GW to the DNS for serving the relay node. Specifically, the Destination-Host may include a P-GW information identifier. For example, the following one or more identifiers may be included: a group identifier, a gateway identifier, a gateway type, location information, and so on.<!-- EPO <DP n="15"> --></p><p id="p0076" num="0076">For example, in the embodiment of the present invention, the FQDN of the P-GW for serving the relay node may be: topon.S5.cluster4relay.net27.example.net; "cluster4relay" in this fully qualified domain name identifies a P-GW group that supports relay node transmission;<br/>
may be: topon.Eth-0.gw32.california.west.example.com, in which, "gw32" is a gateway identifier and is used for indicating a specified P-GW (the P-GW is capable of supporting relay node transmission);<br/>
may be topon.vip.relay.california.west.example.com, in which, "relay" identifies a special gateway type that is used for supporting a relay node transmission; or<br/>
may be: topon.S8.gw35.shanghai.pudong.XXroad.example.com, in which, "shanghai.pudong.XXroad" identifies a P-GW that is located at a specified position (the P-GW is capable of supporting relay node transmission).</p><p id="p0077" num="0077">2. Modify information in the APN to include information for instructing selection of a P-GW for the relay node. As a result, when the relay node accesses a network, the MME may construct an APN-FQDN according to the APN provided by the HSS and then find, through the DNS by using the APN-FQDN, the P-GW for serving the relay node.</p><p id="p0078" num="0078">It should be noted that a plurality of P-GWs, such as P-GWs of a certain type, may be obtained according to the APN-FQDN. In this situation, the MME may select a proper P-GW among the P-GWs. The specific way to select the P-GW is not limited by the embodiment of the present invention and may be determined according to specific application requirements.</p><p id="p0079" num="0079">In the prior art, an APN consists of the following parts: APN-NI and APN-OI.</p><p id="p0080" num="0080">The APN-NI defines an external PDN network connected to the P-GW, which may be implemented through the following manners:
<ul><li>the APN corresponds to an FQDN used for selecting a specified gateway general packet radio service (General Packet Radio Service, GPRS) support node (Gateway GPRS Support Node, GPRS support node, GGSN)/P-GW, and the GGSN/P-GW is capable of understanding that the APN is used for accessing a specified service (during establishment of a bearer); or</li><li>the APN-NI consists of three or more labels and starts with a specified service label; or the APN-NI consists of an independent service label, used for indicating a feature of a service requested by the GGSN/P-GW.</li></ul></p><p id="p0081" num="0081">The APN-OI defines where the P-GW is located in an evolved packet system (Evolved Packet System, EPS) network. The APN-OI consists of three labels, meeting the following formats: "mnc&lt;MNC&gt;.mcc&lt;MCC&gt;.gprs", in which, the first label MNC and the second label MCC together uniquely identify a GPRS/EPS PLMN, and the last label must be "gprs". Each operator has a default APN-OI. The default APN-OI may be obtained from an international mobile subscriber identity<!-- EPO <DP n="16"> --> (International Mobile Subscriber Identity, IMSI).</p><p id="p0082" num="0082">In addition, the subscription data further includes an APN-OI replacement field, which has the same construction with the default APN-OI. The role that the APN-OI replacement plays is to replace the default APN-OI part during DNS addressing. The APN-OI replacement further includes other additional labels, which are separated with ".".</p><p id="p0083" num="0083">In the embodiment of the present invention, for the purpose of differentiating from selecting a P-GW for a UE, related parameters in the subscription data may be modified, specially including the following implementation manners:</p><heading id="h0006">(1) Modify the APN-NI.</heading><p id="p0084" num="0084">Specifically, a new label may be defined in the APN-NI, and the label is used for indicating that the P-GW is selected for the relay node, for example, the label may be a relay node identifier (RN, relay), a device identifier (IMSI, IMEI, device number., and so on), a gateway identifier (relayGW), and so on; or a new service label may be defined in the APN-NI, and the service label is used for indicating selection of a P-GW for the relay node, for example, the service label may be OAM.</p><p id="p0085" num="0085">It should be noted that the defined new service label may be used only by a specific P-GW, or may also be defined as a service label uniformly used in the entire network, which is not limited by the embodiment of the present invention.</p><heading id="h0007">(2) Modify the APN-OI replacement.</heading><p id="p0086" num="0086">The APN-OI replacement is used to replace the default APN-OI part during DNS addressing. In the embodiment of the present invention, a special APN-FQDN may also be constructed by modifying the APN-OI replacement, and address information of the P-GW for serving the relay node may be obtained through the APN-FQDN. Specifically, a specified identifier may be added in the APN-OI replacement. The specified identifier is used for indicating selection of a P-GW for the relay node, and the specified identifier may be a relay node identifier (RN, relay), a device identifier (IMSI, IMEI, device number., and so on), a gateway identifier (relayGW), and so on.</p><p id="p0087" num="0087">It should be noted that the subscription data of the HSS includes two APN-OI replacement fields, one UE-level APN-OI replacement (on an outer layer) and one APN-level APN-OI replacement (in each piece of PDN subscription data). The two APN-OI replacement fields play the same role. The UE-level APN-OI replacement is applied to all APNs, but the APN-level APN-OI replacement has a higher priority, that is, when the APN-level APN-OI replacement appears, this value needs to be used to construct the APN-FQDN. The APN-OI replacement mentioned in the embodiment of the present invention includes the foregoing two situations.<!-- EPO <DP n="17"> --></p><p id="p0088" num="0088">Scenario 2: Suppose that the relay node after detachment initiates a new process of establishing a PDN connection. In this process, the relay node initiates a request for establishing a PDN connection to the MME, and the request includes a requested APN. In this scenario, the relay node may access an MME that does not support a relay node or an MME that can support a relay node. These two situations are described respectively in the following.</p><heading id="h0008">1. The relay node accesses an MME that does not support a relay node.</heading><p id="p0089" num="0089">In this situation, the MME determines whether the APN reported by the relay node is the APN in the subscription data of the relay node, and if yes, constructs an APN-FQDN according to the APN reported by the relay node, specifically as follows:</p><p id="p0090" num="0090">First, the MME uses the APN-OI replacement in the subscription data to replace the APN-OI part in the APN reported by the relay node, and then the MME uses the APN to construct the corresponding APN-FQDN. As a result, the address information of the corresponding P-GW may be obtained through the DNS according to the APN-FQDN.</p><p id="p0091" num="0091">It should be noted that the APN-OI replacement in the subscription data is the APN-OI replacement added with a specified identifier. As described above, the specified identifier is used for indicating selection of a P-GW for the relay node, and the specified identifier may be a relay node identifier (RN, relay), a device identifier (IMSI, IMEI, device number., and so on), a gateway identifier (relayGW), and so on.</p><heading id="h0009">2. The relay node accesses an MME that supports a relay node.</heading><p id="p0092" num="0092">In this situation, the MME also needs to determine whether the APN reported by the relay node is the APN in the subscription data of the relay node. If yes, the following two manners may be used to select a P-GW for the relay node.
<ul><li>(1) Construct an APN-FQDN according to the APN reported by the relay node, specifically as follows: first, the MME uses the APN-OI replacement in the subscription data to replace the APN-OI part in the APN reported by the relay node; meanwhile, if the MME determines that the relay node accesses a network in phase 2, an eNB identifier or a device identifier indication of a Donor base station for serving the relay node need to be added in the APN and may be specifically added in the APN-NI part or the APN-OI replacement part, and the role is to request the address of the P-GW located on the Donor base station DeNB from the DNS (because it is in phase 2, the MME needs to select a P-GW that is located on the Donor base station for the relay node); then the MME uses the APN to construct the corresponding APN-FQDN. As a result, the address information of the corresponding P-GW may be obtained through the DNS according to the APN-FQDN.</li><li>(2) According to that the request for establishing a PDN connection is a request for<!-- EPO <DP n="18"> --> establishing a new PDN connection initiated by the relay node, the MME may, according to the P-GW selecting result before, directly select a corresponding P-GW for the relay node. The P-GW may be located in a core network or on a DeNB.</li></ul></p><p id="p0093" num="0093">It can be seen that, in the embodiment of the present invention, when information for instructing selection of a P-GW for the relay node in the subscription data of the relay node is set so that the relay node accesses a network, the MME may select a P-GW for serving the relay node according to the subscription data of the relay node, and when initiating a session establishment request to the P-GW, have a network management service label included in an APN of the session establishment request so that the P-GW may establish a PDN connection according to the network management service label.</p><p id="p0094" num="0094">Correspondingly, an embodiment of the present invention further provides a relay node. <figref idrefs="f0004">FIG.5</figref> is a schematic structural diagram of a relay node according to an embodiment of the present invention.</p><p id="p0095" num="0095">In this embodiment, the relay node includes: a first address obtaining unit 501, a querying unit 502, a security tunnel establishing unit 503, a second address obtaining unit 504, and a connection establishing unit 505.</p><p id="p0096" num="0096">The first address obtaining unit 501 obtains a first IP address of the relay node; the querying unit 502 obtains an IP address of a security gateway by using the first IP address of the relay node; the security tunnel establishing unit 503 establishes an IP security tunnel with the security gateway according to the IP address of the security gateway; the second IP address obtaining unit 504 obtains a second IP address of the relay node and an IP address of a network management system through the IP security tunnel; the connection establishing unit 505 establishes a connection with the network management system according to the second IP address of the relay node and the IP address of the network management system.</p><p id="p0097" num="0097">In a specific application, the first IP address obtaining unit 501 may obtain the IP address of the relay node through a DHCP process, or obtain the IP address of the relay node through a PDN connection.</p><p id="p0098" num="0098">The second IP address obtaining unit 504 may initiate a DHCP process to a network where the network management system is located on the IP security tunnel to obtain the IP address of a relay node used for network management service transmission; initiate a DHCP process on the IP security tunnel to obtain the IP address of the network management system; or initiate a DHCP process on the IP security tunnel to obtain a fully qualified domain name FQDN used for indicating the network management system, and then use the fully qualified domain name FQDN used for indicating the network management system to make a query to a domain name server DNS on the<!-- EPO <DP n="19"> --> IP security tunnel and obtain the IP address of the network management system fed back by the DNS; or use a fully qualified domain name FQDN that includes information about the network management system to make a query to the DNS on the IP security tunnel and obtain the IP address of the network management system fed back by the DNS.</p><p id="p0099" num="0099">It should be noted that the network management system may be an operator-level network management system, and correspondingly, the IP address of the security gateway is an IP address of a security gateway that is associated with the network where the operator-level network management system is located; or the network management system may also be a device-manufacturer-level network management system, and correspondingly, the IP address of the security gateway is an IP address of a security gateway that is associated with the network where the device-manufacturer-level network management system is located.</p><p id="p0100" num="0100">The association described herein means that the network where the network management system is located can be accessed only through the gateway. The network where the network management system is located includes: an actual IP (subnet) network where the network management system is located, or an IP (subnet) network that performs interconnection communication with the actual IP (subnet) network where the network management system is located. The network where the network management system is located in the embodiment of the present invention is protected by a security gateway.</p><p id="p0101" num="0101">The network management system may be any one or more of the following identifiers: a device identifier of the relay node, a device manufacturer identifier of the relay node, an operator identifier, and a network management system identifier. The device identifier of the relay node may be the hardware address, the hardware number., the device card number., or the device number. of the relay node.</p><p id="p0102" num="0102">It can be seen that, the relay node in the embodiment of the present invention obtains the first IP address of the relay node by using the PDN connection; obtains the IP address of the security gateway by using the IP address of the relay node; establishes the IP security tunnel with the security gateway according to the IP address of the security gateway; obtains the second IP address of the relay node and the IP address of the network management system through the IP security tunnel; and establishes a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system. Consequently, during the process of accessing a network, the relay node implements a connection with the network management system, and the security of the connection is ensured. This further ensures that the relay node is capable of downloading necessary configuration parameters from the network management system to perform access and configuration of the relay node.<!-- EPO <DP n="20"> --></p><p id="p0103" num="0103">Correspondingly, an embodiment of the present invention further provides a mobile management network element. <figref idrefs="f0004">FIG. 6</figref> is a schematic structural diagram of the mobile management network element.</p><p id="p0104" num="0104">In this embodiment, the mobile management network element includes: a subscription data obtaining unit 601 and a gateway selecting unit 602.</p><p id="p0105" num="0105">The subscription data obtaining unit 601, when a relay node accesses a network, obtains subscription data of the relay node, where the subscription data includes information for instructing selection of a P-GW for the relay node; and the gateway selecting unit 602 select the P-GW for serving the relay node according to the subscription data.</p><p id="p0106" num="0106">The mobile management network element in the embodiment of the present invention may further include: a session request unit 603. The session request unit 603 initiates a session establishment request to the P-GW selected by the gateway selecting unit 602. The session establishment request includes an APN in the subscription data of the relay node, and the APN includes a network management service label so that the P-GW establishes a PDN connection according to the network management service label.</p><p id="p0107" num="0107">In the embodiment of the present invention, the information for instructing the selection of the P-GW for the relay node included in the subscription data may have a plurality of implementation manners, for example:</p><p id="p0108" num="0108">(1) The information for instructing the selection of the P-GW for the relay node may be: an IP address corresponding to a specified P-GW set in a P-GW identifier, where the specific P-GW supports establishment of an IP connection to a network management system.</p><p id="p0109" num="0109">Correspondingly, in this situation, the gateway selecting unit 602 uses the IP address in the P-GW identifier in the subscription data as an address of the P-GW for serving the relay node.</p><p id="p0110" num="0110">(2) The information for instructing the selection of the P-GW for the relay node may also be: a set fully qualified domain name, which includes: a hostname of a P-GW that includes a P-GW information identifier and a PLMN where the P-GW is located, where the P-GW information identifier may be any one or more of the following information: a group identifier, a gateway identifier, a gateway type, location information, and so on.</p><p id="p0111" num="0111">Correspondingly, in this situation, the gateway selecting unit 602 may obtain an IP address of the fully qualified domain name through a DNS, and use the IP address as the address of the P-GW for serving the relay node.</p><p id="p0112" num="0112">(3) The information for instructing the selection of the P-GW for the relay node may also be: a new label added in an APN-NI included in the subscription data, or a new service label added in the APN-NI.<!-- EPO <DP n="21"> --></p><p id="p0113" num="0113">Correspondingly, in this situation, the gateway selecting unit 602 may, according to the APN-NI and an APN-OI replacement in the subscription data, construct an APN-fully qualified domain name, obtain the IP address of the fully qualified domain name of the APN though the DNS, and use the IP address as the address of the P-GW for serving the relay node.</p><p id="p0114" num="0114">(4) The information for instructing the selection of the P-GW for the relay node may also be: a specified identifier added in the APN-OI replacement included in the subscription data.</p><p id="p0115" num="0115">Correspondingly, in this situation, the gateway selecting unit 602 may, according to the APN-NI in the subscription data and the APN-OI replacement, construct a fully qualified domain name of the APN, obtain the IP address of the fully qualified domain name of the APN though the DNS, and use the IP address as the address of the P-GW for serving the relay node.</p><p id="p0116" num="0116">For the specific implementation of all manners of the information for instructing the selection of the P-GW for the relay node, reference may be made to the description above, which is not described herein again.</p><p id="p0117" num="0117">It can be seen that, the mobile management network element in the embodiment of the present invention, when a relay node accesses a network, selects a P-GW for serving the relay node according to information for instructing selection of a P-GW for the relay node in subscription data of the relay node, and, when initiating a session establishment request to the P-GW, has a network management service label included in an APN in the session establishment request so that the P-GW may establish a PDN connection according to the network management service label.</p><p id="p0118" num="0118"><figref idrefs="f0005">FIG. 7</figref> is another schematic structural diagram of the mobile management network element according to an embodiment of the present invention.</p><p id="p0119" num="0119">Compared with the embodiment shown in <figref idrefs="f0004">FIG. 6</figref>, in this embodiment, the mobile management network element further includes: a determining unit 701, which, when a relay node initiates establishment of a new PDN connection, determines whether an APN reported by the relay node is the APN that the relay node subscribes to.</p><p id="p0120" num="0120">Correspondingly, in this embodiment, the gateway selecting unit 602 is further configured to: after the determining unit 701 determines that the APN reported by the relay node is the APN that the relay node subscribes to, replace the APN-OI in the APN reported by the relay node with the APN-OI replacement in the subscription data of the relay node, construct a fully qualified domain name of the APN according to the APN reported by the relay node wherein the APN-OI of the APN reported is replaced, obtain the IP address corresponding to the fully qualified domain name of the APN through the DNS, and use the IP address as the address of the P-GW for serving the relay node.</p><p id="p0121" num="0121">It should be noted that, when the relay node initiates the establishment of the new PDN<!-- EPO <DP n="22"> --> connection, the mobile management network element is capable of, according to the request for establishing a new PDN connection initiated by the relay node, determining that the request is from the relay node instead of a UE. In this situation, the gateway selecting unit 602 further needs to add an eNB identifier or device identifier indication of a Donor base station for serving the relay node in the constructed fully qualified domain name of the APN so as to request the address of the P-GW located on the Donor base station DeNB from the DNS.</p><p id="p0122" num="0122">Certainly, for the situation above, the mobile management network element may further select the P-GW for serving the relay node before. Therefore, in another embodiment of the mobile management network element, the gateway selecting unit 602 may further be configured to: after the determining unit 701 determines that the APN reported by the relay node is the APN that the relay node subscribes to, select the IP address of the P-GW for serving the relay node before.</p><p id="p0123" num="0123">It can be seen that, the mobile management network element in the embodiment of the present invention, when a relay node accesses a network, selects a P-GW for serving the relay node according to subscription data of the relay node, and, when initiating a session establishment request to the P-GW, has a network management service label included in an APN in the session establishment request so that the P-GW for serving the relay node may establish a PDN connection according to the network management service label.</p><p id="p0124" num="0124">Correspondingly, an embodiment of the present invention further provides a communication system, including: a network management system and the foregoing relay node, where the relay node is configured to establish a connection with the network management system.</p><p id="p0125" num="0125">In this communication system, the foregoing mobile management network element is further included.</p><p id="p0126" num="0126">In this communication system, the foregoing P-GW may be further included for receiving a session establishment request send by the mobile management network element and establishing a PDN connection according to a network management service label included in the session establishment request.</p><p id="p0127" num="0127">For the specific structures of the relay node and the mobile management network element, reference may be made to the description above, which are not described herein again.</p><p id="p0128" num="0128">It should be noted that the P-GW may be located in a core network or located on a DeNB.</p><p id="p0129" num="0129">By employing the network for establishing a connection with a network management system in the embodiment of the present invention, in the process of accessing a network, the relay node implements a connection with the network management system. In addition, security of the connection is ensured, and it is further ensured that the relay node is capable of downloading<!-- EPO <DP n="23"> --> necessary configuration parameters from the network management system to complete the access and configuration of the relay node.</p><p id="p0130" num="0130">The embodiments of the present invention are described in detail above. Although the present invention is described with reference to exemplary embodiments, the description of the embodiments is only intended to help understand the method and device of the present invention. With respect to the specific implementation manners and application scope, modifications and variations may be made by persons of ordinary skill in the art according to the idea of the present invention. Therefore, the specification shall not be construed as a limitation to the present invention.</p></description><claims mxw-id="PCLM56982320" lang="EN" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-en-0001" num="0001"><claim-text>A method for establishing a connection with a network management system, comprising:
<claim-text>obtaining, by a relay node, a first IP address of the relay node;</claim-text>
<claim-text>obtaining, by the relay node, an IP address of a security gateway by using the first IP address of the relay node;</claim-text>
<claim-text>establishing, by the relay node, an IP security tunnel with the security gateway according to the IP address of the security gateway;</claim-text>
<claim-text>obtaining, by the relay node, a second IP address of the relay node and an IP address of the network management system through the IP security tunnel; and</claim-text>
<claim-text>establishing, by the relay node, a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein the obtaining, by the relay node, the first IP address of the relay node comprises:
<claim-text>obtaining, by the relay node, the first IP address of the relay node through a Dynamic Host Configuration Protocol DHCP process; or</claim-text>
<claim-text>obtaining, by the relay node, the first IP address of the relay node through a process of establishing a packet data network PDN connection.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 1, wherein the obtaining the IP address of the security gateway comprises:
<claim-text>using a fully qualified domain name FQDN that includes information about the network management system to make a query to a domain name server DNS so as to obtain the IP address of the security gateway; or</claim-text>
<claim-text>using a DHCP message that includes information about the network management system to make a query to a DHCP server to obtain the IP address of the security gateway.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 1, wherein:
<claim-text>the network management system is an operator-level network management system, and the IP address of the security gateway is an IP address of a security gateway that is associated with the network where the operator-level network management system is located; or</claim-text>
<claim-text>the network management system is a device-manufacturer-level network management system, and the IP address of the security gateway is an IP address of a security gateway that is associated with the network where the device-manufacturer-level network management system is located.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to claim 1, wherein:<!-- EPO <DP n="25"> -->
<claim-text>the obtaining the second IP address of the relay node through the IP security tunnel comprises: initiating a DHCP process on the IP security tunnel to obtain the second IP address of the relay node; and</claim-text>
<claim-text>the obtaining the IP address of the network management system through the IP security tunnel comprises:</claim-text>
<claim-text>initiating a DHCP process on the IP security tunnel to obtain the IP address of the network management system; or initiating a DHCP process on the IP security tunnel to obtain a fully qualified domain name FQDN used for indicating the network management system, and on the IP security tunnel, using the fully qualified domain name FQDN used for indicating the network management system to make a query to a domain name server DNS to obtain the IP address of the network management system fed back by the DNS; or on the IP security tunnel, using a fully qualified domain name FQDN that includes information about the network management system to make a query to the DNS to obtain the IP address of the network management system fed back by the DNS.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 3 or 5, wherein the information about the network management system comprises any one or more of the following identification information: a device identifier of the relay node, a device manufacturer identifier of the relay node, an operator identifier, and a network management system identifier.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to claim 1, wherein the establishing the connection with the network management system by using the second IP address of the relay node and the IP address of the network management system comprises:
<claim-text>establishing the connection with the network management system through the IP security tunnel between the relay node and the security gateway by using the second IP address of the relay node and the IP address of the network management system, wherein the establishing the connection is initiated by the relay node or by the network management system.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A method for establishing a packet data network connection for a relay node, comprising:
<claim-text>obtaining, by a mobile management entity MME, when the relay node accesses a network, subscription data of the relay node, wherein the subscription data comprises information for instructing selection of a packet data network gateway P-GW for the relay node; and</claim-text>
<claim-text>selecting, by the MME, a P-GW for serving the relay node according to the subscription data, so that the P-GW establishes a packet data network PDN connection for the relay node.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method according to claim 8, further comprising:
<claim-text>initiating, by the MME, a session establishment request to the selected P-GW, wherein the session establishment request comprises an access point name APN in the subscription data of the<!-- EPO <DP n="26"> --> relay node, and the APN comprises a network management service label so that the P-GW establishes the PDN connection according to the network management service label.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method according to claim 9, wherein the information for instructing the selection of the P-GW for the relay node is: an IP address corresponding to a specified P-GW set in a P-GW identifier, wherein the specified P-GW supports establishing an IP connection to the network management system; and<br/>
the selecting the P-GW for serving the relay node according to the subscription data comprises:
<claim-text>using the IP address in the P-GW identifier in the subscription data as an address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method according to the claim 9, wherein the information for instructing the selection of the P-GW for the relay node is: a set fully qualified domain name, wherein the fully qualified domain name comprises a hostname of the P-GW that includes a P-GW information identifier and a public land mobile network PLMN where the P-GW is located; and<br/>
the selecting the P-GW for serving the relay node according to the subscription data comprises:
<claim-text>obtaining an IP address of the fully qualified domain name through the DNS and using the IP address as an address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method according to claim 11, wherein the P-GW information identifier comprises any one or more of the following information:
<claim-text>a group identifier, a gateway identifier, a gateway type, and location information.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method according to claim 9, wherein the information for instructing the selection of the P-GW for the relay node is: a new label added in an access point name network identifier APN-NI that is conprised in the subscription data, or a new service label added in the APN-NI; and<br/>
the selecting the P-GW for serving the relay node according to the subscription data comprises:
<claim-text>constructing a fully qualified domain name of the APN according to the APN-NI and an access point name operator identifier replacement APN-OI replacement in the subscription data; and</claim-text>
<claim-text>obtaining an IP address of the fully qualified domain name of the APN through the DNS and using the IP address as an address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The method according to claim 9, wherein the information for instructing the selection of the P-GW for the relay node is: a specified identifier added in an APN-OI replacement included in the subscription data; and<br/>
the selecting the P-GW for serving the relay node according to the subscription data comprises:
<claim-text>constructing a fully qualified domain name of the APN according to an APN-NI in the subscription data and the APN-OI replacement; and</claim-text>
<claim-text>obtaining an IP address of the fully qualified domain name of the APN through the DNS and<!-- EPO <DP n="27"> --> using the IP address as an address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The method according to claim 14, wherein the APN-OI replacement is a user-equipment-level APN-OI replacement or an APN-level APN-OI replacement.</claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The method according to claim 14, further comprising:
<claim-text>determining, by the MME, when the relay node initiates establishment of a new PDN connection, whether the APN reported by the relay node is the APN that the relay node subscribes to;</claim-text>
<claim-text>if yes, replacing the APN-OI in the APN reported by the relay node with the APN-OI replacement in the subscription data of the relay node and then constructing a fully qualified domain name of the APN according to the APN reported by the relay node wherein the APN-OI of the APN reported is replaced; and</claim-text>
<claim-text>obtaining an IP address of the fully qualified domain name of the APN through the DNS and using the IP address as the address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The method according to claim 16, further comprising:
<claim-text>adding an eNB identifier or device identifier of a Donor base station for serving the relay node in the constructed fully qualified domain name of the APN.</claim-text></claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>The method according to claim 9, further comprising:
<claim-text>determining, by the MME, when the relay node initiates establishment of a new PDN connection, whether the APN reported by the relay node is the APN that the relay node subscribes to; and</claim-text>
<claim-text>if yes, selecting, by the MME, the IP address of the P-GW for serving the relay node before.</claim-text></claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>A relay node, comprising:
<claim-text>a first address obtaining unit, configured to obtain a first IP address of the relay node;</claim-text>
<claim-text>a querying unit, configured to obtain an IP address of a security gateway by using the first IP address;</claim-text>
<claim-text>a security tunnel establishing unit, configured to establish an IP security tunnel with the security gateway according to the IP address of the security gateway;</claim-text>
<claim-text>a second address obtaining unit, configured to obtain a second IP address of the relay node and an IP address of a network management system through the IP security tunnel; and</claim-text>
<claim-text>a connection establishing unit, configured to establish a connection with the network management system by using the second IP address of the relay node and the IP address of the network management system.</claim-text></claim-text></claim><claim id="c-en-0020" num="0020"><claim-text>The relay node according to claim 19, wherein:
<claim-text>the first address obtaining unit is further configured to obtain the first IP address of the relay<!-- EPO <DP n="28"> --> node through a DHCP process, or obtain the first IP address of the relay node through a process of establishing a PDN connection.</claim-text></claim-text></claim><claim id="c-en-0021" num="0021"><claim-text>The relay node according to claim 19, wherein:
<claim-text>the querying unit is further configured to make a query to a domain name server DNS by using a fully qualified domain name FQDN that comprises information about the network management system to obtain the IP address of the security gateway fed back by the DNS, or make a query to a DHCP server by using a DHCP message that comprises information about the network management system to obtain the IP address of the security gateway fed back by the DHCP server.</claim-text></claim-text></claim><claim id="c-en-0022" num="0022"><claim-text>The relay node according to any one of claims 19 to 21, wherein:
<claim-text>the second IP address obtaining unit is further configured to initiate a DHCP process on the IP security tunnel to obtain the second IP address of the relay node; and initiate a DHCP process on the IP security tunnel to obtain the IP address of the network management system; or initiate a DHCP process on the IP security tunnel to obtain a fully qualified domain name FQDN used for indicating the network management system, and then use the FQDN to make a query to the domain name server DNS on the IP security tunnel to obtain the IP address of the network management system fed back by the DNS; or use the fully qualified domain name FQDN that comprises information about the network management system to make a query to the DNS on the IP security tunnel to obtain the IP address of the network management system fed back by the DNS.</claim-text></claim-text></claim><claim id="c-en-0023" num="0023"><claim-text>A mobile management network element, comprising:
<claim-text>a subscription data obtaining unit, configured to obtain subscription data of a relay node when the relay node accesses a network, wherein the subscription data comprises information for instructing selection of a packet data network gateway P-GW for the relay node; and</claim-text>
<claim-text>a gateway selection unit, configured to select a P-GW for serving the relay node according to the subscription data, so that the P-GW establishes a packet data network PDN connection for the relay node.</claim-text></claim-text></claim><claim id="c-en-0024" num="0024"><claim-text>The mobile management network element according to claim 23, further comprising:
<claim-text>a session request unit, configured to initiate a session establishment request to the P-GW selected by the gateway selecting unit, wherein the session establishment request comprises an access point name APN in the subscription data of the relay node, and the APN comprises a network management service label so that the P-GW establishes the PDN connection according to the network management service label.</claim-text></claim-text></claim><claim id="c-en-0025" num="0025"><claim-text>The mobile management network element according to claim 23, wherein the information for instructing the selection of the P-GW for the relay node is: an IP address corresponding to a specified P-GW set in a P-GW identifier, and the specific P-GW supports establishment of an IP<!-- EPO <DP n="29"> --> connection to a network management system; and<br/>
the gateway selecting unit is further configured to use the IP address in the P-GW identifier in the subscription data as an address of the P-GW for serving the relay node.</claim-text></claim><claim id="c-en-0026" num="0026"><claim-text>The mobile management network element according to the claim 23, wherein the information for instructing the selection of the P-GW for the relay node is: a set fully qualified domain name, comprising a hostname of the P-GW that comprises a P-GW information identifier and a public land mobile network PLMN where the P-GW is located; and<br/>
the gateway selecting unit is further configured to obtain an IP address of the fully qualified domain name through the DNS and use the IP address as an address of the P-GW for serving the relay node.</claim-text></claim><claim id="c-en-0027" num="0027"><claim-text>The mobile management network element according to claim 23, wherein the information for instructing the selection of the P-GW for the relay node is: a new label added in the an access point name network identifier APN-NI that is comprised in the subscription data, or a new service label added in the APN-NI; and<br/>
the gateway selecting unit is further configured to construct a fully qualified domain name of the APN according to the APN-NI and the access point name operator identifier replacement APN-OI replacement in the subscription data, obtain an IP address of the fully qualified domain name of the APN though the DNS, and use the IP address as an address of the P-GW for serving the relay node.</claim-text></claim><claim id="c-en-0028" num="0028"><claim-text>The mobile management network element according to claim 23, wherein the information for instructing the selection of the P-GW for the relay node is: a specified identifier added in an APN-OI replacement comprised in the subscription data; and<br/>
the gateway selecting unit is further configured to construct a fully qualified domain name of the APN according to an APN-NI in the subscription data and the APN-OI replacement, obtain an IP address of the fully qualified domain name of the APN though the DNS, and use the IP address as an address of the P-GW for serving the relay node.</claim-text></claim><claim id="c-en-0029" num="0029"><claim-text>The mobile management network element according to claim 28, further comprising:
<claim-text>a determining unit, configured to determine, when the relay node initiates establishment of a new PDN connection, whether an APN reported by the relay node is the APN that the relay node subscribes to; and</claim-text>
<claim-text>the gateway selecting unit, further configured to, after the determining unit determines that the APN reported by the relay node is the APN that the relay node subscribes to, replace the APN-OI in the APN reported by the relay node with the APN-OI replacement in the subscription data of the relay node, construct a fully qualified domain name of the APN according to the APN reported by<!-- EPO <DP n="30"> --> the relay node wherein the APN-OI of the APN reported is replaced, obtain an IP address of the fully qualified domain name of the APN through the DNS, and use the IP address as the address of the P-GW for serving the relay node.</claim-text></claim-text></claim><claim id="c-en-0030" num="0030"><claim-text>The mobile management network element according to claim 29, wherein:
<claim-text>the gateway selecting unit is further configured to add an eNB identifier or device identifier of a Donor base station for serving the relay node in the constructed fully qualified domain name of the APN.</claim-text></claim-text></claim><claim id="c-en-0031" num="0031"><claim-text>The mobile management network element according to claim 23, further comprising:
<claim-text>a determining unit, configured to determine, when the relay node initiates establishment of a new PDN connection, whether an APN reported by the relay node is the APN that the relay node subscribes to; and</claim-text>
<claim-text>the gateway selecting unit, further configured to select the IP address of the P-GW for serving the relay node before after the determining unit determines that the APN reported by the relay node is the APN that the relay node subscribes to.</claim-text></claim-text></claim><claim id="c-en-0032" num="0032"><claim-text>A communication system, comprising:
<claim-text>the network management system and the relay node according to any one of claims 19 to 22, wherein the relay node is configured to establish a connection with the network management system.</claim-text></claim-text></claim><claim id="c-en-0033" num="0033"><claim-text>The system according to claim 32, further comprising: the mobile management network element according to any one of claims 23 to 31.</claim-text></claim><claim id="c-en-0034" num="0034"><claim-text>The system according to claim 33, further comprising:
<claim-text>a packet data network gateway P-GW, configured to receive a session establishment request sent by the mobile management network element and establish a PDN connection according to a network management service label included in the session establishment request.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670701" load-source="patent-office"><!-- EPO <DP n="31"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="137" he="107" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="113" he="156" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0003" num="3,4"><img id="if0003" file="imgf0003.tif" wi="165" he="205" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0004" num="5,6"><img id="if0004" file="imgf0004.tif" wi="95" he="170" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0005" num="7"><img id="if0005" file="imgf0005.tif" wi="149" he="69" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="232" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="232" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="165" he="232" type="tif"/><doc-page id="srep0004" file="srep0004.tif" wi="165" he="232" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
