<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681871-A1" country="EP" doc-number="2681871" kind="A1" date="20140108" family-id="46022627" file-reference-id="315082" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586417" ucid="EP-2681871-A1"><document-id><country>EP</country><doc-number>2681871</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12717920-A" is-representative="NO"><document-id mxw-id="PAPP154848609" load-source="docdb" format="epo"><country>EP</country><doc-number>12717920</doc-number><kind>A</kind><date>20120227</date><lang>EN</lang></document-id><document-id mxw-id="PAPP179672032" load-source="docdb" format="original"><country>EP</country><doc-number>12717920.8</doc-number><date>20120227</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553732" ucid="US-201113039738-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113039738</doc-number><kind>A</kind><date>20110303</date></document-id></priority-claim><priority-claim mxw-id="PPC140549369" ucid="US-2012026740-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026740</doc-number><kind>W</kind><date>20120227</date></document-id></priority-claim></priority-claims><technical-data><classification-ipc><edition>7</edition><main-classification>H04L  12/56</main-classification></classification-ipc><classifications-ipcr><classification-ipcr mxw-id="PCL2090176884" load-source="docdb">H04L  12/24        20060101AFI20140610BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2090176885" load-source="docdb">H04L  12/26        20060101ALI20140610BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1996936472" load-source="docdb" scheme="CPC">H04L  41/5038      20130101 FI20151126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036694111" load-source="docdb" scheme="CPC">H04L  43/10        20130101 LI20150721BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036696788" load-source="docdb" scheme="CPC">H04L  43/0829      20130101 LA20150721BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036698659" load-source="docdb" scheme="CPC">H04L  43/0852      20130101 LA20150721BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036698755" load-source="docdb" scheme="CPC">H04L  43/50        20130101 LI20150721BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363884" lang="DE" load-source="patent-office">TESTEN DES DURCHSATZES WÄHREND DES BETRIEBS BEI VERTEILTEN ROUTER/SCHALTARCHITEKTUREN</invention-title><invention-title mxw-id="PT132363885" lang="EN" load-source="patent-office">IN-SERVICE THROUGHPUT TESTING IN DISTRIBUTED ROUTER/SWITCH ARCHITECTURES</invention-title><invention-title mxw-id="PT132363886" lang="FR" load-source="patent-office">TEST DE DÉBIT EN SERVICE DANS DES ARCHITECTURES À ROUTEURS/COMMUTATEURS DISTRIBUÉS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919515683" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ALCATEL LUCENT</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR919534493" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ALCATEL LUCENT</last-name></addressbook></applicant><applicant mxw-id="PPAR919005775" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Alcatel Lucent</last-name><iid>101322554</iid><address><street>3 avenue Octave Gréard</street><city>75007 Paris</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919533381" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>LAFLEUR DANIEL</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR919519613" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>LAFLEUR, DANIEL</last-name></addressbook></inventor><inventor mxw-id="PPAR919008302" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>LAFLEUR, DANIEL</last-name><address><street>2 Whithorn Avenue</street><city>Kanata, ON K2K 3A6</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR919512915" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>DIBIRDI ALP</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919510028" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>DIBIRDI, ALP</last-name></addressbook></inventor><inventor mxw-id="PPAR919015088" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>DIBIRDI, ALP</last-name><address><street>26 Brundrett Avenue</street><city>Andover, MA 01810</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919011343" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>LOUIS, PÖHLAU, LOHRENTZ</last-name><iid>100060236</iid><address><street>Patentanwälte Postfach 30 55</street><city>90014 Nürnberg</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026740-W"><document-id><country>US</country><doc-number>2012026740</doc-number><kind>W</kind><date>20120227</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012161820-A1"><document-id><country>WO</country><doc-number>2012161820</doc-number><kind>A1</kind><date>20121129</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549838104" load-source="docdb">AL</country><country mxw-id="DS549851938" load-source="docdb">AT</country><country mxw-id="DS549838105" load-source="docdb">BE</country><country mxw-id="DS549760676" load-source="docdb">BG</country><country mxw-id="DS549770702" load-source="docdb">CH</country><country mxw-id="DS549838592" load-source="docdb">CY</country><country mxw-id="DS549851939" load-source="docdb">CZ</country><country mxw-id="DS549838114" load-source="docdb">DE</country><country mxw-id="DS549838593" load-source="docdb">DK</country><country mxw-id="DS549838598" load-source="docdb">EE</country><country mxw-id="DS549914776" load-source="docdb">ES</country><country mxw-id="DS549760689" load-source="docdb">FI</country><country mxw-id="DS549760690" load-source="docdb">FR</country><country mxw-id="DS549838115" load-source="docdb">GB</country><country mxw-id="DS549838599" load-source="docdb">GR</country><country mxw-id="DS549838116" load-source="docdb">HR</country><country mxw-id="DS549851940" load-source="docdb">HU</country><country mxw-id="DS549770703" load-source="docdb">IE</country><country mxw-id="DS549838600" load-source="docdb">IS</country><country mxw-id="DS549760691" load-source="docdb">IT</country><country mxw-id="DS549838601" load-source="docdb">LI</country><country mxw-id="DS549760309" load-source="docdb">LT</country><country mxw-id="DS549851941" load-source="docdb">LU</country><country mxw-id="DS549760310" load-source="docdb">LV</country><country mxw-id="DS549760311" load-source="docdb">MC</country><country mxw-id="DS549838534" load-source="docdb">MK</country><country mxw-id="DS549838535" load-source="docdb">MT</country><country mxw-id="DS549851946" load-source="docdb">NL</country><country mxw-id="DS549914777" load-source="docdb">NO</country><country mxw-id="DS549770704" load-source="docdb">PL</country><country mxw-id="DS549760312" load-source="docdb">PT</country><country mxw-id="DS549851947" load-source="docdb">RO</country><country mxw-id="DS549760317" load-source="docdb">RS</country><country mxw-id="DS549770713" load-source="docdb">SE</country><country mxw-id="DS549760318" load-source="docdb">SI</country><country mxw-id="DS549914778" load-source="docdb">SK</country><country mxw-id="DS549770714" load-source="docdb">SM</country><country mxw-id="DS549838536" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA102688183" ref-ucid="WO-2012161820-A1" lang="EN" load-source="patent-office"><p num="0000">Various embodiments relate to a system and related method of measuring at least one transport link's performance in a communications network. An originating device controlled by a customer may generate testing frames that are transported to a receiving device also controlled by the customer through the at least one transport link that connects the two devices. In some embodiments, the transport links may transfer the testing frames while the transport links are transporting other data traffic. The receiving device may parse incoming frames and, upon identifying the testing frames, may generate echoing response frames. In some embodiments, the echoing response frames may be placed in one of a series of priority-based service queues. The originating device may then receive the response frames through the transport links and may measure the stream of incoming frames to measure and analyze the transport links' performance.</p></abstract><abstract mxw-id="PA102883307" ref-ucid="WO-2012161820-A1" lang="EN" source="national office" load-source="docdb"><p>Various embodiments relate to a system and related method of measuring at least one transport link's performance in a communications network. An originating device controlled by a customer may generate testing frames that are transported to a receiving device also controlled by the customer through the at least one transport link that connects the two devices. In some embodiments, the transport links may transfer the testing frames while the transport links are transporting other data traffic. The receiving device may parse incoming frames and, upon identifying the testing frames, may generate echoing response frames. In some embodiments, the echoing response frames may be placed in one of a series of priority-based service queues. The originating device may then receive the response frames through the transport links and may measure the stream of incoming frames to measure and analyze the transport links' performance.</p></abstract><abstract mxw-id="PA102688184" ref-ucid="WO-2012161820-A1" lang="FR" load-source="patent-office"><p num="0000">Divers modes de réalisation de l'invention portent sur un système et un procédé correspondant pour mesurer les performances d'au moins une liaison de transport dans un réseau de communication. Un dispositif source commandé par un consommateur peut générer des trames de test qui sont transportées jusqu'à un dispositif récepteur également commandé par le consommateur par la ou les liaisons de transport qui connecte les deux dispositifs. Selon certains modes de réalisation, les liaisons de transport peuvent transférer les trames de test pendant que les liaisons de transport sont en train de transporter un autre trafic de données. Le dispositif récepteur peut analyser des trames entrantes et, lorsqu'il identifie les trames de test, peut générer des trames de réponse en écho. Selon certains modes de réalisation, les trames de réponse en écho peuvent être placées dans une file d'attente parmi une série de files d'attente de service à base de priorité. Le dispositif source peut ensuite recevoir les trames de réponse par les liaisons de transport et peut mesurer le flux de trames entrantes afin de mesurer et d'analyser les performances des liaisons de transport.</p></abstract><abstract mxw-id="PA102883308" ref-ucid="WO-2012161820-A1" lang="FR" source="national office" load-source="docdb"><p>Divers modes de réalisation de l'invention portent sur un système et un procédé correspondant pour mesurer les performances d'au moins une liaison de transport dans un réseau de communication. Un dispositif source commandé par un consommateur peut générer des trames de test qui sont transportées jusqu'à un dispositif récepteur également commandé par le consommateur par la ou les liaisons de transport qui connecte les deux dispositifs. Selon certains modes de réalisation, les liaisons de transport peuvent transférer les trames de test pendant que les liaisons de transport sont en train de transporter un autre trafic de données. Le dispositif récepteur peut analyser des trames entrantes et, lorsqu'il identifie les trames de test, peut générer des trames de réponse en écho. Selon certains modes de réalisation, les trames de réponse en écho peuvent être placées dans une file d'attente parmi une série de files d'attente de service à base de priorité. Le dispositif source peut ensuite recevoir les trames de réponse par les liaisons de transport et peut mesurer le flux de trames entrantes afin de mesurer et d'analyser les performances des liaisons de transport.</p></abstract><description mxw-id="PDES52885410" ref-ucid="WO-2012161820-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> IN-SERVICE THROUGHPUT TESTING IN DISTRIBUTED </p><p id="p0002" num="0002"> ROUTER/SWITCH ARCHITECTURES </p><p id="p0003" num="0003">TECHNICAL FIELD </p><p id="p0004" num="0004">[0001] Various exemplary embodiments disclosed herein relate generally to diagnostics and maintenance of communications networks. </p><p id="p0005" num="0005">BACKGROUND </p><p id="p0006" num="0006">[0002] Providers of various communications services use various types of links to transfer traffic between various devices they control. These transfers enable the service provider (SP) to distribute data to a large number of clients efficiently. These backbone transport links use a large bandwidth to transfer large quantities data between devices, such as high-priority data like video and voice messaging that may require constant transfers when in use. In certain circumstances, the SPs may lease backbone transport links to efficiently transport such traffic between their devices, such as switches, routers, or aggregation sites over a geographic area. </p><p id="p0007" num="0007"> [0003] When setting up a leased transport link for a customer such as an SP, a transport provider (TP) may be required to adhere to a Service Level Agreement (SLA) that outlines one or more performance metrics required of the transport link being leased by the customer (e.g., service provider). For example, when leasing an Ethernet Private Line (EPL) or Ethernet Virtual Private Line (EVPL), the customer may require the transport link or links to minimize loss, delay, and/or jitter. The customer may also require a minimum level of bandwidth availability in order to transport data. While the customer may test the leased link during the initial provisioning of the 
<!-- EPO <DP n="3"/>-->
 link for transport between the customer's devices, the conditions for the TP and/or leased transport link may change after the initial provisioning. </p><p id="p0008" num="0008">SUMMARY </p><p id="p0009" num="0009">[0004] A brief summary of various exemplary embodiments is presented. Some simplifications and omissions may be made in the following summary, which is intended to highlight and introduce some aspects of the various exemplary embodiments, but not to limit the scope of the invention. Detailed descriptions of a preferred exemplary embodiment adequate to allow those of ordinary skill in the art to make and use the inventive concepts will follow in the later sections. </p><p id="p0010" num="0010"> [0005] Various embodiments may relate to a method of testing at least one transport link in a communications system, the method including one or more of the following: generating, by a first communications device including a first aggregation circuit, a testing frame including a destination address for a second communications device including a second aggregation circuit; sending, by the first communications device, the testing frame to the destination address; receiving, by a port in the second communications device, an incoming frame originating from the first communications device; determining, by the second communications device, that the incoming frame includes the testing frame; producing, by the second communications device, a response frame based on the testing frame; and sending, by the second communications device, the response frame to the first communications device. </p><p id="p0011" num="0011"> [0006] Various embodiments may relate to a method of testing a transport link in a communications system, the method including one or more of the following: receiving, by a first node of the transport link, a testing frame 
<!-- EPO <DP n="4"/>-->
 including a testing destination address and a testing source address; forwarding, by the transport link through a second node opposite the first node, the testing frame towards the testing destination address; receiving, by the second node of the transport link, a response frame based on the testing frame, wherein the response destination address is equivalent to the testing source address and the response source address is equivalent to the testing destination address; and forwarding, by the transport link through the first node, the response frame. </p><p id="p0012" num="0012"> Various embodiments may relate to a communications system that tests at least one transport link, the system including one or more of the following: a first communications device including a first aggregation circuit; and a second communications device including a second aggregation circuit and a port, wherein the second communication device; wherein the first communications device: generates a testing frame including a destination address for the second communications device, and sends the testing frame to the second device; and further wherein the second communications device: receives, through the port, an incoming frame originating from the first communications device, determines that the incoming frame includes a testing frame, produces a response frame based on the testing frame, and sends the response frame to the first communications device. </p><p id="p0013" num="0013">[0007] Various embodiments may relate to a transport link in a communications system including one or more of the following: a first node that receives a testing frame including a testing destination address and a testing source address; a second node in the transport link opposite the 
<!-- EPO <DP n="5"/>-->
 first node that forwards the testing frame towards the testing destination address and receives a response frame based on the testing frame, wherein the response destination address is equivalent to the testing source address and the response source address is equivalent to the testing destination address, and further wherein by the transport link forwards the response frame through the first node. </p><p id="p0014" num="0014"> [0008] Various embodiments are described wherein the testing and response frames are sent through the at least one transport link that connects the first communications device with the second communications device without suspending transport of other frames through the at least one transport link. </p><p id="p0015" num="0015"> [0009] Various embodiments additionally or alternatively include measuring, by the first communications device, performance of the at least one transport link based on traffic received from the at least one transport link, including the response frame received from the second communications device. </p><p id="p0016" num="0016"> [0010] Various embodiments additionally or alternatively include placing the response in one of a plurality of priority-based service queues in the second communications device, wherein the testing and response frames have a priority level that is configurable by a user. </p><p id="p0017" num="0017"> [0011] Various embodiments are described wherein the first communications device measures performance of the at least one transport link allocated to the priority levels at or below the priority level associated with the testing frame or response frame. </p><p id="p0018" num="0018"> [0012] Various embodiments are described wherein the determining step further includes: determining, at the port in second communications device, that a destination address included the incoming frame is that of the second communications device; and determining that a sub-type including in the incoming frame is a sub-type associated with a testing frame. 
<!-- EPO <DP n="6"/>-->
 [0013] Various embodiments are described wherein the producing step further includes: determining the destination address and a source address included the incoming frame; and adding to the response frame: a response source address equivalent to the destination address included in the incoming frame, a response destination address equivalent to the source address included in the incoming frame, and a sub-type associated with a response frame. </p><p id="p0019" num="0019"> [0014] Various embodiments are described wherein the at least one transport link includes an Ethernet link and further wherein the first and second aggregation circuits receive traffic originating from more than one source. </p><p id="p0020" num="0020"> [0015] Various embodiments additionally or alternatively include setting a target bandwidth capacity (TBC) for the at least one transport link, wherein the first communications device repeats the sending of the testing frame step at a rate less than the TBC. </p><p id="p0021" num="0021"> [0016] It should be apparent that, in this manner, various exemplary embodiments enable measurement and testing of transport links between communications devices. Particularly, by measuring the transport of customer-generated testing frames, a customer may effectively measure the performance of transport links without significant effects on other data traffic. </p><p id="p0022" num="0022">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0023" num="0023">[0017] In order to better understand various exemplary embodiments, reference is made to the accompanying drawings wherein: </p><p id="p0024" num="0024">[0018] FIG. 1 illustrates an exemplary communications system including a transport link provider; </p><p id="p0025" num="0025"> [0019] FIG. 2 illustrates an exemplary communications system for testing a transport link; and 
<!-- EPO <DP n="7"/>-->
 [0020] FIG. 3 illustrates a flowchart for testing a transport link. </p><p id="p0026" num="0026">DETAILED DESCRIPTION </p><p id="p0027" num="0027">[0021] Referring now to the drawings, in which like numerals refer to like components or steps, there are disclosed broad aspects of various exemplary embodiments. </p><p id="p0028" num="0028"> [0022] FIG. 1 illustrates an exemplary communications system including a transport link provider. Communications system 100 may include a transport network 110 and customer devices 130, 150. Transport network 110 may include a network 111 and transport links 113, 115. Communications system 100 may enable the customer devices 130, 150 to send traffic to each other in the form of packets, such as Ethernet frames, through the use of the transport network 110 that connects the devices to each other. In some embodiments, the components of the communications system may be controlled by different entities. For example, in an exemplary embodiment, the customer devices 130, 150 may be controlled by a customer such as a service provider (SP) that may in turn transport various forms of data to its clients. The SP-as-customer may connect devices through the transport network 110 that is controlled by a transport provider (TP). The SP may lease one or more links to handle transfer of data between its devices, such as the transport network 110 handling communications between the customer devices 130, 150 through its transport links 113, 115 and the network 111. In such instances, the SP may use the transport network 110 without exerting significant control over the network itself. </p><p id="p0029" num="0029"> [0023] Transport network 110 may include the network 111 and one or more transport links 113. Transport network 110 may include various other connections to other devices as well. Network 111 may be, for example, a 
<!-- EPO <DP n="8"/>-->
 packet-switching network that is able to forward packets to other devices based on information included in the packet. Similarly, the transport links 113, 115 may be physical or virtual links, such as Ethernet Private Lines (EPL) or Ethernet Virtual Private Lines (EVPL) that may transport packets based on information included in the packet. For example, when the transport link 113 is an EPL, it may receive one or more Ethernet frames at one of its end nodes. Transport link 113 may then move the frame within the link and may, upon reaching an opposite end node, forward the frame based on information included in the overhead of the frame (i.e., the destination address). In some embodiments, the transport network 110 may also control the customer devices 130, 150. This may occur when a service provider is also a transport provider. This may also occur when the transport provider uses endpoint devices to test the performance of its own transport links 113, 115. </p><p id="p0030" num="0030">[0024] Customer devices 130, 150 may be devices that may receive data in the form of packets from one or more sources and may direct such traffic based on its included information. For example, the customer devices may be aggregation devices, such as switches, routers, bridges, or similar equipment that may receive packets (e.g., Ethernet frames) from a variety of sources and may forward them based on information included in the overhead of the packet. In some embodiments, one or more of the customer devices 130, 150 may include larger aggregation devices, including first-level aggregation devices such as hubs, switching offices, central offices, or similar devices and/or sites. </p><p id="p0031" num="0031"> [0025] Customer devices 130, 150 may be controlled by a customer such as a service provider that may provide mobile, DSL/PON, fiber-optic, or similar services to its clients. In some embodiments, the SP may provide a specific type of service to its clients while leasing backbone support from the traffic 
<!-- EPO <DP n="9"/>-->
 provider. For example, an SP may provide mobile connectivity to its clients while leasing EPLs from a TP. The leased transport links 113, 115 may enable the customer devices 130, 150 to transfer large amounts of data between devices. This may enable the SP to more effectively provide data and services, such as video conferencing, to its clients. </p><p id="p0032" num="0032"> [0026] When using the transport links 113, 115 to connect the customer devices 130, 150, the SP may use a Service License Agreement (SLA) to specify a set of requirements for the leased links. For example, an SP may use the SLA to specify certain performance requirements, such as minimum bandwidth availability, minimum speed of transfer, and maximum amounts of delay, loss, and jitter within the links it leases. In some embodiments, the SP may use one or more diagnostic tests, such as looping tests, to determine whether the leased links satisfy the SLA requirements. In such instances, the SP may run such diagnostic tests upon the initial provisioning of the link. When the provisioned link does not meet the SLA requirements, the SP may take a number of actions, such as leasing links from another TP, or alerting the TP of the problem (e.g., an alarm to the TP), after which the TP may take corrective actions. </p><p id="p0033" num="0033"> [0027] However, in some instances, the leased transport links 113, 115 may have their performance altered over time. This may be due to, for example, a loss of one or more transport links 113, 115 within the transport network, or an unplanned oversubscription of the network 111. Such a loss in available bandwidth capacity on the leased link may in turn degrade performance for the clients of the SP. In order to avoid such losses in performance, the SP may periodically run diagnostic tests similar to the tests run during the initial provisioning. However, some of the diagnostic tests used to determine the performance of a transport link 113, 115 may significantly slow or stop all 
<!-- EPO <DP n="10"/>-->
 other traffic. For example, a looping test of the transport links 113, 115 initiated by the customer device 150 may stop the SP's service, as the testing frames used in the looping tests may stop the transfer of high-priority data like the synchronization frames used for voice and/or video conferencing and streaming. As a result the SP at the customer device 150 may limit the times that such tests are run, such as running diagnostic looping tests that alter data traffic during very-low-congestion periods. </p><p id="p0034" num="0034"> [0028] FIG. 2 illustrates an exemplary communications system for testing a transport link. Communications system 200 is similar to communications system 100 in FIG. 1, with transport network 210 and its elements 211-215 and consumer devices 230, 250 being similar to elements 110-150 in FIG. 1. Consumer element 230 may include a series of service queues 231. Consumer element 250 may include testing equipment 251 and a monitoring device 253. In some embodiments, the SP may use a testing frame 201 and a response frame 203 that may be passed between the consumer devices 230, 250 through the transport network 210. The transport of the frames 201, 203 may be measured to, for example, determine the performance (e.g., available bandwidth) of the series of leased transport links 213, 215 used to transport the Ethernet frames 201, 203 between the consumer devices 230, 250. </p><p id="p0035" num="0035">[0029] Customer devices 230, 250 may be similar to customer devices 130, 150 and may be aggregation devices that receive data packets from a plurality of sources and may transfer the packets to other devices based on information included in the packets. In addition, the customer devices 230, 250 may also include service queues 231, testing equipment 251, and/or a monitoring device 253. While the illustrated embodiment shows these components in only one of the customer devices 230, 250, various embodiments of the customer devices 230, 250 may include all of the components 231, 251, 253. In 
<!-- EPO <DP n="11"/>-->
 some embodiments, the originating customer device 250 may be a larger aggregating device than the receiving customer device 230. For example, the originating customer 250 may comprise a central switching office, while the receiving customer device 230 may comprise a switch. </p><p id="p0036" num="0036"> [0030] A service provider may use the customer devices 230, 250 to run a diagnostic test after the provisioning of the transport links 213, 215 without affecting the services related to other data traffic. For example, the transport link 215 may receive the testing frame 201 from the testing equipment 251 in the originating customer device 250 and may transport the testing frame 201 along with other data traffic to the receiving device. In other embodiments, the diagnostic test run by the testing equipment may prevent the transport of other traffic. For example, the testing equipment may produce k testing frames 201 per second. If rate k is larger than the available bandwidth on at least one of the transport links 213, 215, the one or more transport links 213, 215 may not be able to transfer any other data. Similarly, a very high rate k may slow the delivery of other data traffic. </p><p id="p0037" num="0037"> [0031] Testing equipment 251 may comprise internal or external components that may initiate testing of the transport links 213, 215. In some embodiments, the testing equipment 251 may comprise an internal circuit or software module within the originating customer device 250 that produces one or more testing frames 201. Testing equipment 251 may be connected to a port in the originating customer device 250 and may send the testing frames 201 to the transport link 215 through the port. Testing equipment 251 may produce the testing frames 201 based on the bandwidth availability of the leased transport links 213, 215. </p><p id="p0038" num="0038"> [0032] In some embodiments, the testing equipment 251 may initially use the required bandwidth specified in the SLA and may adjust the available 
<!-- EPO <DP n="12"/>-->
 bandwidth based on information compiled by the monitoring device 253. For example, the SLA may require a channel capacity (i.e., bandwidth) of 1 Mb/s. Testing equipment 251 may produce a series of 32-bit Ethernet testing frames 201 for the leased transport links 213, 215 to carry to the receiving customer device 230. In some embodiments, the testing equipment 251 may produce the testing frames 201 at a rate proportional to the target channel capacity set by the SLA (e.g., 50% of the target channel capacity) and may increase the production rate until it is substantially equal to the target available channel capacity. </p><p id="p0039" num="0039"> [0033] Testing frame 201 may comprise a packet produced by the testing equipment 251 that may be used by the originating and receiving customer devices 250, 230 to determine the performance of the transport links 213, 215. Testing frame 201 may comprise a 32-bit Ethernet frame that includes an overhead and a payload. In some embodiments, the payload of the testing frame 201 may not be read by equipment in the customer devices 230, 250 or within the network 211. The overhead of the testing frame 201 may include destination and source addresses used by devices in the communications network 200 to transport the testing frame 201. The destination and source addresses may comprise, for example, media access code (MAC) addresses used by the network 211 to locate the customer devices 230, 250 and direct traffic within the network to the destination address. In some embodiments, the device at the destination address may check portions of the overhead, such as the source address, to ensure that the packet originated from an applicable location. </p><p id="p0040" num="0040"> [0034] The overhead of the testing frame 201 may also include an Ethernet type (e.g., Ether Type) that may be used by the customer devices 230, 250 to indicate that the frame is a testing frame and does not include any specific 
<!-- EPO <DP n="13"/>-->
 data encapsulated in the payload. For example, regular data traffic may be transported in an Ethernet frame that includes a two-octet Ether Type designation in its overhead to indicate that the payload is Internet Protocol, Version 4 (IPv4). Testing equipment 251 may insert an EtherType that indicates that the frame is a testing frame. For example, the testing equipment may include an EtherType of "0x8902" to indicate that the protocol used is for IEEE 802. lag Connectivity Fault Management Protocol/ITU-T Recommendation Y.1731 (CFM/OAM) or "0x9000" to indicate that the protocol is a configuration test protocol loopback message (LBM). In some embodiments, the testing equipment 251 may use an undefined set to define a new protocol, such as CFM/LBM. </p><p id="p0041" num="0041"> [0035] Receiving customer device 230 may include a port that receives the at least one testing frame 201 sent from the originating customer device 250 through the transport links 213, 215. A component in the receiving customer device 230 may examine the overhead of incoming frames to determine how to handle the incoming frames. For example, the component may examine the destination MAC address of an incoming Ethernet frame and determine that its destination is not the receiving customer device 230. In such instances, the receiving customer device 230 may forward the incoming frame to another device in the communications network 200. Alternatively, the receiving customer device 230 may determine that the destination MAC address of the incoming frame matches that of the receiving customer device 230. When this occurs, the receiving customer device 230 may further process the incoming packet. </p><p id="p0042" num="0042"> [0036] When processing an incoming packet, the receiving customer device 230 may examine the EtherType to determine how to handle the payload. For example, the receiving customer device 230 may use the EtherType to identify 
<!-- EPO <DP n="14"/>-->
 the contents of the payload of the incoming frame for further processing. For example, when the incoming packet includes an Ether Type identifying the incoming packet as containing IPv6 protocol, the receiving customer device 230 may extract the IPv6 address from the payload. In a similar manner, the receiving customer device 230 may respond to the incoming testing packet 201 when it determines that the Ether Type of the packet is associated with the testing protocol in use (e.g., Etype = CFM LBM). </p><p id="p0043" num="0043"> [0037] When the receiving customer device 230 determines that it has received a testing frame 201, it may produce a response frame 203. Response frame 203 may be similar to the testing frame 201 and may include similar data in its overhead and within its payload. However, the response frame 203 may have its address information switched so that it echoes the overhead information included in the testing frame 201. For example, when the testing frame 201 includes a destination address of x and a source address of y, the response frame 203 may include a destination address of y and a source address of x. In such instances, the response frame 203 may be sent back to the originating customer device 250, with the originating customer device 250 able to identify an incoming frame as a response frame 203 due to the contents of the overhead. </p><p id="p0044" num="0044"> [0038] Receiving customer device 230 may also include one or more service queues 231 used to schedule the transmission of outgoing packets from the receiving customer device 230. Receiving customer device 230 may use the service queues to schedule the transmission of outgoing data packets based on specified criteria. For example, the service queues 231 may be priority- based service queues, including high-priority and low-priority service queues 231. In such an embodiment, the packets scheduled in the high-priority service queue 231 may be scheduled to be transferred from the receiving 
<!-- EPO <DP n="15"/>-->
 customer device 230 at a higher rate or within a designated portion of the allocated channel capacity. One of skill in the art would be aware of priority- based queuing techniques used in the art. In some embodiments, the SP may set priority levels for different types of data. For example, voice, video, and synchronization packets or frames may be classified as high priority and be scheduled in the high-priority service queue 231, while text and similar data traffic may be classified as low priority and scheduled within the low-priority service queue 231. SP may designate the testing frames 201 a priority level in order to place the corresponding response frames 203 in one of the service queues 231. </p><p id="p0045" num="0045"> [0039] For example, when the testing frames are designated a low priority level, the corresponding response frames 203 will be placed in the low priority level and may be scheduled to be transmitted to the originating customer device 250 after all scheduled traffic in the higher-priority queues are clear. In some embodiments, the response frames 203 may be scheduled to be transferred to the originating customer device 250 using portions of the bandwidth that were not allocated to higher priority levels. When assigned a low priority, the testing frames 201 and/or response frames 203 may minimally affect the transfer of higher-priority frames. In contrast, when the testing frames 201 and/or response frames 203 are assigned higher priority levels, the transmission of such frames may affect the transmission of other frames at or below that of the testing and/or response frames' 201, 203 priority level. </p><p id="p0046" num="0046"> [0040] Once sent through the port of the receiving customer device 230, the response frame 203 may use the same transport links 213, 215 used to transmit the testing frame 201. In some embodiments, different transport links may be used to complete the transport loop between the customer devices 230, 250. 
<!-- EPO <DP n="16"/>-->
 In such instances, the diagnostic test measures the performance of all the transport links 213, 215 used to complete the transport loop. </p><p id="p0047" num="0047">[0041] Originating customer device 250 may also include a monitoring device 253 that monitors incoming frames received at the port of the originating customer device. Monitoring device 253 may comprise a hardware component and/or a software module that may examine incoming frames received at the port of the originating customer device 250 and may cause the originating customer device 250 to respond to the monitored activity. For example, in some embodiments, the monitoring device 253 may monitor all data traffic received at the port and may detect performance metrics such as delay, jitter, and packet loss. In other embodiments, the monitoring device may examine the overhead of the incoming frames and may make specific measurements regarding the response frames 203. For example, the monitoring device may measure the rate of response frames 203 received at the port of the originating customer device 250. This incoming rate of response frames 203 may be compared to the generation rate of the testing frames 201 made by the testing equipment 251 to determine performance metrics associated with the transport links 213, 215. When the performance metrics measured by the monitoring device 253 do not meet the requirements set by the SLA, the originating customer device 253 may take a response, such as triggering the SP to lease more transport links, or to alert the TP of the under-performing leased transport link or links 213, 215. </p><p id="p0048" num="0048">[0042] FIG. 3 illustrates a flowchart for testing a transport link. Communications system 200 may use method 300 to test or measure the performance of the one or more transport links 213, 215 that connect the consumer devices 230, 250. </p><p id="p0049" num="0049"> [0043] Method 300 may begin at step 301 and may proceed to step 303, where 
<!-- EPO <DP n="17"/>-->
 the originating customer device 250 may generate a testing frame 201. Testing equipment 251 included with the customer device 250 may produce testing frames 201 at a rate of k Ethernet testing frames 201 per second, the testing frames 201 including overhead with a destination address of the receiving device 230. At step 305, the originating customer device 250 may forward the Ethernet testing frames to the receiving (target) device. </p><p id="p0050" num="0050"> [0044] Receiving customer device 230 may in step 307 an incoming frame through the transport links 213, 215 from, for example, the originating customer device 250. In step 309, the receiving customer device 230 may examine the overhead of the incoming frame to determine whether the incoming frame is an applicable testing frame 201. When the incoming frame is not an applicable testing frame (e.g., different destination address or different Ether Type), the receiving customer device may proceed to step 311, where it may handle the frame based on the information in the overhead. This may include forwarding the packet towards the destination address, or handling the frame based on the information provided by the Ether Type. In contrast, when the receiving customer device 230 determines in step 309 that the incoming frame is an applicable testing frame, it may proceed to step 313, where the receiving customer device 230 generates a response frame 203. </p><p id="p0051" num="0051">[0045] In step 313, the response frame 203 generated by the receiving customer device 230 may correspond to the received testing frame 201 and may include similar information in its overhead. Response frame 203 may also have the relevant address information echoed so that the destination address included in the response frame 203 corresponds to the source address included in the testing frame 201. </p><p id="p0052" num="0052"> [0046] In step 315, the receiving customer device 250 may schedule transmission of the response frame 203 by placing the response frame 203 in a 
<!-- EPO <DP n="18"/>-->
 service queue 231. In some embodiments, the receiving customer device 250 may include a plurality of service queues 231 and may place the response frame 203 in one of the service queues based on defined criteria. For example, when the receiving customer device 230 includes a plurality of priority-based queues, the response frame 203 may be placed in one of the queues 231 based on the priority level associated with the testing. For example, when the testing frames 201 and/or response frames 203 are designated as low priority, the receiving customer device 230 may place the response frame 203 in the low-priority queue. In step 317, the receiving device 230 may send the response frame 203 based on the schedule of the service queue 231. </p><p id="p0053" num="0053">[0047] In step 319, the monitoring device 253 included in the originating customer device 250 may monitor traffic received over the transport links 213, 215. In some embodiments, the monitoring device 253 may examine incoming packets to the originating customer device 250 to specifically monitor incoming response packets 203. Based on measurements of the incoming packets, the monitoring device 253 and/or the originating customer device 250 may measure the performance of the transport links 213, 215 used to transmit the testing frames 201 and the response frames 203. Method 300 may end at step 321, where the measured performance of the transport links 213, 215 may trigger the originating customer device 250 to take a responsive action. </p><p id="p0054" num="0054"> [0048] It should be apparent from the foregoing description that various exemplary embodiments of the invention may be implemented in hardware and/or firmware. Furthermore, various exemplary embodiments may be implemented as instructions stored on a tangible non-transitory machine- readable storage medium, which may be read and executed by at least one processor to perform the operations described in detail herein. A tangible 
<!-- EPO <DP n="19"/>-->
 machine-readable storage medium may include any mechanism for storing information in a tangible form readable by a machine, such as a personal or laptop computer, a server, or other computing device. Thus, a tangible machine-readable storage medium may include read-only memory (ROM), random-access memory (RAM), magnetic disk storage media, optical storage media, flash-memory devices, and similar storage media. </p><p id="p0055" num="0055">[0049] It should be appreciated by those skilled in the art that any block diagrams herein represent conceptual views of illustrative circuitry embodying the principles of the invention. Similarly, it will be appreciated that any flow charts, flow diagrams, state transition diagrams, pseudo-code, and the like represent various processes that may be substantially represented in tangible machine readable media and so executed by a computer or processor, whether or not such computer or processor is explicitly shown. </p><p id="p0056" num="0056">[0050] Although the various exemplary embodiments have been described in detail with particular reference to certain exemplary aspects thereof, it should be understood that the invention is capable of other embodiments and its details are capable of modifications in various obvious respects. As is readily apparent to those skilled in the art, variations and modifications can be effected while remaining within the spirit and scope of the invention. Accordingly, the foregoing disclosure, description, and figures are for illustrative purposes only and do not in any way limit the invention, which is defined only by the claims. 
</p></description><claims mxw-id="PCLM46552931" ref-ucid="WO-2012161820-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="20"/>--> We Claim: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method of testing at least one transport link in a communications system, the method comprising: </claim-text><claim-text> generating (303), by a first communications device comprising a first aggregation circuit (250), a testing frame (201) including a destination address for a second communications device comprising a second aggregation circuit (230); </claim-text><claim-text> sending (305), by the first communications device (250), the testing frame (201) to the destination address; </claim-text><claim-text> receiving (307), by a port in the second communications device (230), an incoming frame originating from the first communications device (250); determining (309), by the second communications device (230), that the incoming frame comprises the testing frame (201); </claim-text><claim-text> producing (313), by the second communications device (230), a response frame (203) based on the testing frame (201); and </claim-text><claim-text> sending (317), by the second communications device (230), the response frame (203) to the first communications device (250). </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein the testing and response frames (203) are sent through the at least one transport link that connects the first communications device (250) with the second communications device (230) <!-- EPO <DP n="21"/>--> without suspending transport of other frames through the at least one transport link. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of any one of claims 1 or 2, further comprising: </claim-text><claim-text> Measuring (319), by the first communications device (250), performance of the at least one transport link based on traffic received from the at least one transport link, including the response frame (203) received from the second communications device (230). </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of any one of claims 1 to 3, further comprising: </claim-text><claim-text> placing (315) the response in one of a plurality of priority-based service queues (231) in the second communications device (230), wherein the testing and response frames (203) have a priority level that is configurable by a user. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 4, wherein the first communications device (250) measures performance of the at least one transport link allocated to the priority levels at or below the priority level associated with the testing frame (201) or response frame (203). </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of any one of claims 1 to 5, wherein the determining step further comprises: <!-- EPO <DP n="22"/>--> determining, at the port in second communications device (230), that a destination address included the incoming frame is that of the second communications device (230); and </claim-text><claim-text> determining that a sub-type including in the incoming frame is a subtype associated with a testing frame (201). </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 6, wherein the producing step further comprises: determining the destination address and a source address included the incoming frame; and </claim-text><claim-text> adding to the response frame (203): </claim-text><claim-text> a response source address equivalent to the destination address included in the incoming frame, </claim-text><claim-text> a response destination address equivalent to the source address included in the incoming frame, and </claim-text><claim-text> a sub-type associated with a response frame (203). </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of any one of claims 1 to 7, wherein the at least one transport link comprises an Ethernet link and further wherein the first and second aggregation circuits receive traffic originating from more than one source. <!-- EPO <DP n="23"/>--> </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of any one of claims 1 to 8, further comprising: </claim-text><claim-text> setting a target bandwidth capacity (TBC) for the at least one transport link, wherein the first communications device (250) repeats the sending of the testing frame (201) step at a rate less than the TBC. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. A communications system that tests at least one transport link, the system comprising: </claim-text><claim-text> a first communications device (250) comprising a first aggregation circuit; and </claim-text><claim-text> a second communications device (230) comprising a second aggregation circuit and a port, wherein the second communication device; wherein the first communications device (250): </claim-text><claim-text> generates (303) a testing frame (201) including a destination address for the second communications device (230), and </claim-text><claim-text> sends (305) the testing frame (201) to the second device (230); and </claim-text><claim-text> further wherein the second communications device (230): </claim-text><claim-text> receives (307), through the port, an incoming frame originating from the first communications device (250), </claim-text><claim-text> determines (309) that the incoming frame comprises a testing frame (201), <!-- EPO <DP n="24"/>--> produces (313) a response frame (203) based on the testing frame</claim-text><claim-text>(201), and </claim-text><claim-text> sends (317) the response frame (203) to the first communications device (250). </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The system of claim 10, wherein: </claim-text><claim-text> the testing and response frames (203) are sent through the at least one transport link that connects the first communications device (250) with the second communications device (230) without suspending transport of other frames through the at least one transport link, and </claim-text><claim-text> the first communications device (250) measures (319) performance of the at least one transport link based on traffic received from the at least one transport link, including the response frame (203) received from the second communications device (230). </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The system of any one of claims 10 or 11, further comprising: </claim-text><claim-text> a plurality of priority-based service queues (231) in the second communications device (230), wherein the response is placed (315) in one of the plurality of priority-based service queues (231) and further wherein the testing and response frames (203) have a priority level that is configurable by a user. <!-- EPO <DP n="25"/>--> </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The system of claim 12, wherein the first communications device (250) measures performance of the at least one transport link allocated to the priority levels at or below the priority level associated with the testing frame (201) or response frame (203). </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The system of any one of claims 10 to 13, wherein the second communications device (230) determines at the port that a destination address included in the incoming frames is that of the second communications device (230) and determines that a sub-type including the incoming frame is a subtype associated with a testing frame (201). </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The system of any one of claims 10 to 14, wherein the at least one transport link has a target bandwidth capacity (TBC), wherein the first communications device (250) repeats the sending of the testing frame (201) step at a rate less than the TBC. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
