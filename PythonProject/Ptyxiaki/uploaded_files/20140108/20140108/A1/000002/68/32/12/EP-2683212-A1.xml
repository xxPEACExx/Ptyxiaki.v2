<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683212-A1" country="EP" doc-number="2683212" kind="A1" date="20140108" family-id="46929410" file-reference-id="318301" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585485" ucid="EP-2683212-A1"><document-id><country>EP</country><doc-number>2683212</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12764637-A" is-representative="YES"><document-id mxw-id="PAPP154847677" load-source="docdb" format="epo"><country>EP</country><doc-number>12764637</doc-number><kind>A</kind><date>20120216</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP177814806" load-source="docdb" format="original"><country>EP</country><doc-number>12764637.0</doc-number><date>20120216</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140551441" ucid="CN-201110078879-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110078879</doc-number><kind>A</kind><date>20110330</date></document-id></priority-claim><priority-claim mxw-id="PPC140550317" ucid="CN-2012071200-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2012071200</doc-number><kind>W</kind><date>20120216</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2025727296" load-source="docdb">H04W  76/02        20090101AFI20150821BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1699682448" load-source="docdb" scheme="CPC">H04W  76/22        20180201 LI20180203BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042537387" load-source="docdb" scheme="CPC">H04W  36/0033      20130101 LI20150702BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2042542721" load-source="docdb" scheme="CPC">H04W  36/0005      20130101 LA20150702BHEP        </classification-cpc><classification-cpc mxw-id="PCL1991313498" load-source="docdb" scheme="CPC">H04W  36/0016      20130101 FI20140102BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132361088" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR AKTUALISIERUNG VON TUNNELINFORMATIONEN</invention-title><invention-title mxw-id="PT132361089" lang="EN" load-source="patent-office">METHOD AND SYSTEM FOR UPDATING TUNNEL INFORMATION</invention-title><invention-title mxw-id="PT132361090" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME PERMETTANT DE METTRE À JOUR DES INFORMATIONS DE TUNNEL</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919516059" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZTE CORP</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR919513482" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZTE CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR919018081" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ZTE Corporation</last-name><iid>101115168</iid><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan District</street><city>Shenzhen, Guangdong 518057</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919532552" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BI YIFENG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919525725" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>BI, YIFENG</last-name></addressbook></inventor><inventor mxw-id="PPAR919007503" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>BI, YIFENG</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan</street><city>Shenzhen, Guangdong 518057</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919532324" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LIU GUOYAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919507758" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LIU, GUOYAN</last-name></addressbook></inventor><inventor mxw-id="PPAR919007575" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LIU, GUOYAN</last-name><address><street>ZTE Plaza Keji Road South Hi-Tech Industrial Park Nanshan</street><city>Shenzhen, Guangdong 518057</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919015044" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Ahner, Philippe</last-name><suffix>et al</suffix><iid>101021902</iid><address><street>BREVALEX 95 rue d'Amsterdam</street><city>75378 Paris Cedex 8</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2012071200-W"><document-id><country>CN</country><doc-number>2012071200</doc-number><kind>W</kind><date>20120216</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012129990-A1"><document-id><country>WO</country><doc-number>2012129990</doc-number><kind>A1</kind><date>20121004</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549748113" load-source="docdb">AL</country><country mxw-id="DS549823878" load-source="docdb">AT</country><country mxw-id="DS549748114" load-source="docdb">BE</country><country mxw-id="DS549751184" load-source="docdb">BG</country><country mxw-id="DS549910332" load-source="docdb">CH</country><country mxw-id="DS549820716" load-source="docdb">CY</country><country mxw-id="DS549823879" load-source="docdb">CZ</country><country mxw-id="DS549748115" load-source="docdb">DE</country><country mxw-id="DS549820717" load-source="docdb">DK</country><country mxw-id="DS549820722" load-source="docdb">EE</country><country mxw-id="DS549826052" load-source="docdb">ES</country><country mxw-id="DS549751197" load-source="docdb">FI</country><country mxw-id="DS549751198" load-source="docdb">FR</country><country mxw-id="DS549748116" load-source="docdb">GB</country><country mxw-id="DS549820723" load-source="docdb">GR</country><country mxw-id="DS549748121" load-source="docdb">HR</country><country mxw-id="DS549823880" load-source="docdb">HU</country><country mxw-id="DS549910333" load-source="docdb">IE</country><country mxw-id="DS549820724" load-source="docdb">IS</country><country mxw-id="DS549751199" load-source="docdb">IT</country><country mxw-id="DS549820725" load-source="docdb">LI</country><country mxw-id="DS549749443" load-source="docdb">LT</country><country mxw-id="DS549827142" load-source="docdb">LU</country><country mxw-id="DS549749444" load-source="docdb">LV</country><country mxw-id="DS549749453" load-source="docdb">MC</country><country mxw-id="DS549827143" load-source="docdb">MK</country><country mxw-id="DS549827144" load-source="docdb">MT</country><country mxw-id="DS549826053" load-source="docdb">NL</country><country mxw-id="DS549751200" load-source="docdb">NO</country><country mxw-id="DS549827145" load-source="docdb">PL</country><country mxw-id="DS549910334" load-source="docdb">PT</country><country mxw-id="DS549826062" load-source="docdb">RO</country><country mxw-id="DS549910335" load-source="docdb">RS</country><country mxw-id="DS549827198" load-source="docdb">SE</country><country mxw-id="DS549748122" load-source="docdb">SI</country><country mxw-id="DS549751209" load-source="docdb">SK</country><country mxw-id="DS549827199" load-source="docdb">SM</country><country mxw-id="DS549820730" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673657" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present disclosure discloses a method and system for updating tunnel information. The method comprises: a target HeNB to which a user equipment (UE) is to be handed over notifies a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message or a path converting request message; and the MME notifies a fixed network of the received tunnel information through an Evolved Packet Core (EPC) gateway and a Policy and Charging Rules Function entity (PCRF). With the present disclosure, policy interworking between a mobile network and the fixed network can be implemented, and the Quality of Service of the HeNB can be ensured.<img id="iaf01" file="imgaf001.tif" wi="112" he="97" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737816" lang="EN" source="EPO" load-source="docdb"><p>The present disclosure discloses a method and system for updating tunnel information. The method comprises: a target HeNB to which a user equipment (UE) is to be handed over notifies a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message or a path converting request message; and the MME notifies a fixed network of the received tunnel information through an Evolved Packet Core (EPC) gateway and a Policy and Charging Rules Function entity (PCRF). With the present disclosure, policy interworking between a mobile network and the fixed network can be implemented, and the Quality of Service of the HeNB can be ensured.</p></abstract><description mxw-id="PDES63959645" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The disclosure relates to technology for convergence of a fixed network and a mobile network in the communication field, and in particular to a method and system for updating tunnel information.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">An Evolved Packet System (EPS) of the 3rd Generation Partnership Project (3GPP) consists of an Evolved Universal Terrestrial Radio Access Network (E-UTRAN), a Mobility Management Entity (MME), a Serving Gateway (S-GW), a Packet Data Network Gateway (P-GW), a Home Subscriber Server (HSS), an Authentication, Authorization and Accounting (AAA) server of the 3GPP, a Policy and Charging Rules Function (PCRF) entity, and other supporting nodes, as shown in the EPS box in <figref idrefs="f0001">Fig. 1</figref>, wherein the MME is responsible for work related to a control plane such as mobility management, non-access layer signalling processing, and user-mobility-management-context management; the S-GW is an access gateway device connected with the E-UTRAN, forwards data between the E-UTRAN and the P-GW, and is responsible for buffering the data during the paging phase; and the P-GW is a border gateway of the EPS and a Packet Data Network (PDN), and is responsible for functions such as access of the PDN and data forwarding between the EPS and the PDN; wherein as a network deployment is implemented, the S-GW and the P-GW may be arranged together or separately, and may be referred to as Evolved Packet Core (EPC) gateway or integrated service gateway after being arranged together. The PCRF is a Policy and Charging Rules Function entity connected to an Internet Protocol (IP) service network of an operator through a receiving interface Rx to receive service information; moreover, the PCRF is also connected to a gateway device within the network through a Gx/Gxc interface, and is responsible for initiating establishment of an IP bearer, ensuring Quality of Service (QoS) of service data, and performing charging control.</p><p id="p0003" num="0003">The EPS supports access of a Home evolved NodeB (HeNB, also referred to as a Home NodeB for short in the disclosure), as shown in <figref idrefs="f0001">Fig. 1</figref>. The HeNB is a miniaturized<!-- EPO <DP n="2"> --> low-power base station, which is deployed at indoor locations such as a house, an office, a business building and so on. The HeNB generally accesses a core network of the EPS via a rented fixed network line. In order to guarantee secure access, a Security Gateway (SeGW) is introduced in the core network to perform shielding, and data between the HeNB and the SeGW will be encapsulated with IP Security (IPSec). The HeNB may be directly connected to the MME and the S-GW of the core network via an IPSec tunnel established with the SeGW, or may be connected to the MME and the S-GW via an HeNB GW, i.e., the HeNB GW is an optional network element (NE). At the same time, in order to manage the HeNB, an NE Home eNodeB Management System (HeMS) is introduced. Moreover, a Universal Mobile Telecommunications System (UMTS) supports access of the Home NodeB (HNB). The related technology is similar to that of the HeNB.</p><p id="p0004" num="0004">The QoS of the fixed network line for access of the H(e)NB (i.e., a blanket term for the HeNB and the HNB) is generally restricted by a contract between an H(e)NB owner and a fixed network operator, therefore when a 3GPP user equipment (UE) accesses the 3GPP core network to access a service through the H(e)NB, the required QoS cannot exceed the contracted QoS of the fixed network line that can be provided by the fixed network operator. Otherwise, the QoS of the service accessed by the UE, in particular a Guaranteed Bitrate (GBR) service, will not be guaranteed. Therefore, for a 3GPP network and the fixed network, a unified control and management mechanism is required to implement admission control of user/connection/service. The solution currently accepted preliminarily by the Organization for Standardization is as shown in <figref idrefs="f0001">Fig. 1</figref> (the case of HeNB). A PCRF, i.e., Policy Control and Charging (PCC) NE of the 3GPP system, is connected to a Broadband Policy Control Function (BPCF) entity of the fixed network via an interface S9* to implement policy interworking and resource management, thus implementing reasonable control and management of a fixed network resource and ensuring preferentially an resource with a high priority for access via the H(e)NB.</p><p id="p0005" num="0005">As described above, if the fixed network is required to ensure the QoS for the line for access of the H(e)NB, the fixed network is required to locate the fixed network line where the H(e)NB is currently located (referred to as a backhaul in a technical specification, i.e., a<!-- EPO <DP n="3"> --> fixed-network backhaul network). In the related art, the fixed network line is located through information such as an outer layer (or local) IP address and port number of the H(e)NB. The information is sent to the PCRF through a flow of User Equipment (UE) attachment from the H(e)NB or of a PDN connection establishment; and the PCRF finds the BPCF in charge of resource control and management of the fixed network line for the H(e)NB, and establishes an S9* session with the BPCF.</p><p id="p0006" num="0006">According to the related art, a specific flow of handing the UE from a macro-cell over to a micro-cell, or handing the UE over different micro-cells, as shown in <figref idrefs="f0002">Fig. 2</figref>, mainly including the following steps:
<ul><li>Step 201, the UE accesses from a source (H)eNB (macro-cell or micro-cell (H)eNB, S-(H)eNB), initiates a handover at a certain time, and selects to access from a target HeNB (T-HeNB).</li><li>Step 202, the S-(H)eNB sends a handover request message to a source MME (i.e., S-MME).</li><li>Step 203, the S-MME sends a target MME (i.e., T-MME) a relocation request forwarding message used for delivering context information to a target side and notifying the target side to perform a handover operation.</li><li>Step 204, if S-GW relocation occurs, then the T-MME sends a session establishing request message to a target S-GW (i.e., T-S-GW) and receives a session establishing response message from the T-S-GW; if S-GW relocation doesn't occur, i.e., the S-S-GW and the T-S-GW are the same gateway, then the operation of this step is skipped and is not executed.</li><li>Step 205, the T-MME sends a handover request message to the T-HeNB, and receives a handover acknowledgement message returned by the T-HeNB; if S-GW relocation occurs in the previous step 204, then it is also required to establish, in step 205, a user plane data channel between the T-HeNB and the T-S-GW.</li><li>Step 206, the T-MME sends the S-MME a relocation response forwarding message as a response to the step 203.<!-- EPO <DP n="4"> --></li><li>Step 207, the S-MME sends a handover instruction to the source (H)eNB, and the source (H)eNB forwards the handover instruction to the UE to notify it to perform the handover.</li><li>Step 208, the UE sends a handover confirming message to the T-HeNB, and the UE hands a radio channel over to the target side.</li><li>Step 209, the T-HeNB sends a handover notification message to the T-MME.</li><li>Step 210, the T-MME and the S-MME exchange a relocation completion notification/ acknowledgement forwarding message.</li><li>Step 211, if S-GW relocation occurs, the T-MME sends a bearer modifying request message to the T-S-GW, and as a return, the T-S-GW sends a bearer modifying response message to the T-MME; meanwhile, the triggered T-S-GW sends a bearer modifying request message to the P-GW, and the P-GW also returns a bearer modifying response message to the S-S-GW.
<br/>
If the S-GW relocation doesn't occur, then the T-S-GW is the S-S-GW; only the T-MME and the S-GW exchange the bearer modifying request/ response message, and message interaction between the S-GW and the P-GW will not be performed.
</li><li>Step 212, if the P-GW receives the bearer modifying request message from the S-GW, then the P-GW and the PCRF intercommunicate in an IP-Connectivity Access Network (IP-CAN) session modifying step to update an IP-CAN session; if the P-GW doesn't receive a triggering message or there is no special information which the PCRF is to be notified of in the bearer modifying message received by the P-GW, then the step is omitted.</li><li>Step 213, the UE initiates a Tracking Area Update (TAU) operation after completing the handover, and the user updates the mobility management context of the UE in the MME.</li><li>Step 214, the S-MME sends a UE context releasing instruction message to the source (H)eNB to release the context of the user at a source network side.</li></ul></p><p id="p0007" num="0007">Now, the handover is completed.<!-- EPO <DP n="5"> --></p><p id="p0008" num="0008">By analyzing the above handover steps, the following defects may be seen: 1) the UE has been handed over between micro-cell (H)eNBs, while what the core network has is the outer layer or local IP address/ port number of the S-(H)eNB, which will result in a resource control error; 2) the UE is handed from a source macro-cell over to a micro-cell, while the core network side cannot receive information on the local IP address/ port number of the fixed network line where the target HeNB is located which will also lead to policy interworking and resource management. The above defects are all caused by a failure to update tunnel information related to the target HeNB at the core network when the UE is handed over between (H)eNBs; and because the tunnel information related to the target HeNB cannot be updated at the core network when the UE is handed over between (H)eNBs, policy interworking between the mobile network and the fixed network cannot be implemented, nor can the QoS of the HeNB be ensured.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0009" num="0009">In view of the above, the main purpose of the present disclosure is to provide a method and system for updating tunnel information to implement policy interworking of a mobile network and a fixed network, and ensure the QoS of an HeNB.</p><p id="p0010" num="0010">For the above purpose, the technical solution of the present disclosure is implemented as follows.</p><p id="p0011" num="0011">The present disclosure provides a method for updating tunnel information, including:
<ul><li>notifying, by a target Home evolved NodeB (HeNB) to which a user equipment (UE) is to be handed over, a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message; and</li><li>notifying, by the MME, a fixed network of the received tunnel information through an Evolved Packet Core (EPC) gateway and a Policy and Charging Rules Function entity (PCRF).</li></ul></p><p id="p0012" num="0012">The notifying, by the MME, a fixed network of the received tunnel information through an EPC gateway and a PCRF may specifically be:<!-- EPO <DP n="6"> -->
<ul><li>notifying, by the MME, a Serving Gateway (S-GW) of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;</li><li>notifying, by the S-GW, a Packet Data Network Gateway (P-GW) of the received tunnel information through a session establishing, modifying or updating request message, a bearer modifying request message, or a Proxy Binding Update (PBU) message; and</li><li>notifying, by the P-GW, the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and</li><li>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0013" num="0013">The notifying, by the MME, a fixed network of the received tunnel information through an EPC gateway and a PCRF may specifically be:
<ul><li>notifying, by the MME, a Serving Gateway (S-GW) of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message; and</li><li>notifying, by the S-GW, the PCRF of the received tunnel information through a gateway control session modifying message; and</li><li>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0014" num="0014">The method may further include:
<ul><li>when the handover is in an S1 mode, notifying, by the target HeNB, the MME of the tunnel information through the handover acknowledgement message or the handover notification message; or</li><li>when the handover is in an X2 mode, notifying, by the target HeNB, the MME of the tunnel information through the path converting request message.</li></ul><!-- EPO <DP n="7"> --></p><p id="p0015" num="0015">Notifying, by the PCRF, a BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation may specifically be:
<ul><li>when there is no S9* session between the PCRF and a BPCF before the handover, selecting, by the PCRF, a BPCF according to the received tunnel information, initiating, by the PCRF, an S9* session establishing operation, and sending, by the PCRF, the tunnel information to the selected BPCF; or</li><li>when there exists an S9* session between the PCRF and a BPCF before the handover, then verifying, by the PCRF, whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, initiating, by the PCRF, an S9* session modifying operation, and sending, by the PCRF, the tunnel information to the BPCF; otherwise re-selecting, by the PCRF, a BPCF according to the tunnel information, initiating, by the PCRF, the S9* session establishing operation, and sending, by the PCRF, the tunnel information to the re-selected BPCF.</li></ul></p><p id="p0016" num="0016">The tunnel information may be an outer layer IP address of the target HeNB.</p><p id="p0017" num="0017">The tunnel information may further include one kind or several kinds of the following information:
<ul><li>a Fully Qualified Domain Name (FQDN) of a BPCF;</li><li>an outer layer port number of the target HeNB;</li><li>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</li><li>an identity of the target HeNB; and</li><li>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</li></ul></p><p id="p0018" num="0018">The present disclosure further provides a method for updating tunnel information, including:
<ul><li>notifying, by a target Home evolved NodeB (HeNB) to which a user equipment (UE) is<!-- EPO <DP n="8"> --> to be handed over, a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;</li><li>notifying, by the MME, a Packet Data Network Gateway (P-GW) of the received tunnel information through a change notification message;</li><li>notifying, by the P-GW, a Policy and Charging Rules Function entity (PCRF) of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and</li><li>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of a fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0019" num="0019">The tunnel information may be an outer layer IP address of the target HeNB.</p><p id="p0020" num="0020">The tunnel information may further include one kind or several kinds of the following information:
<ul><li>a Fully Qualified Domain Name (FQDN) of the BPCF;</li><li>an outer layer port number of the target HeNB;</li><li>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</li><li>an identity of the target HeNB; and</li><li>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</li></ul></p><p id="p0021" num="0021">The present disclosure further provides a system for updating tunnel information, including: a target Home evolved NodeB (HeNB) to which a user equipment (UE) is to be handed over, a Mobility Management Entity (MME), an Evolved Packet Core (EPC) gateway, and a Policy and Charging Rules Function entity (PCRF), wherein
<ul><li>the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path<!-- EPO <DP n="9"> --> converting request message;</li><li>the MME is configured to notify a fixed network of the received tunnel information through the EPC gateway and the PCRF; and</li><li>the EPC gateway and the PCRF are configured to implement forwarding of the tunnel information from the MME to the fixed network.</li></ul></p><p id="p0022" num="0022">The EPC gateway may include a Serving Gateway (S-GW) and a Packet Data Network Gateway (P-GW), wherein
<ul><li>the MME is further configured to notify the S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;</li><li>the S-GW is configured to notify the P-GW of the received tunnel information through a session establishing, modifying or updating request message, a bearer modifying request message, or a Proxy Binding Update (PBU) message;</li><li>the P-GW is configured to notify the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and</li><li>the PCRF is configured to notify a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0023" num="0023">The EPC gateway may include a Serving Gateway (S-GW), wherein
<ul><li>the MME is further configured to notify the S-GW of the received tunnel information through the session establishing, modifying or updating request message or a bearer modifying request message;</li><li>the S-GW is configured to notify the PCRF of the received tunnel information through a gateway control session modifying message; and</li><li>the PCRF is configured to notify a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul><!-- EPO <DP n="10"> --></p><p id="p0024" num="0024">The target HeNB may be further configured to:
<ul><li>notify the MME of the tunnel information through the handover acknowledgement message or the handover notification message when the handover is in an S1 mode; or</li><li>notify the MME of the tunnel information through the path converting request message when the handover is in an X2 mode.</li></ul></p><p id="p0025" num="0025">The PCRF may be further configured as follows:
<ul><li>when there is no S9* session between the PCRF and a BPCF before the handover, the PCRF may select a BPCF according to the received tunnel information, initiate an S9* session establishing operation, and send the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and a BPCF before the handover, the PCRF may verify whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF may initiate an S9* session modifying operation and send the tunnel information to the BPCF; otherwise the PCRF may re-select a BPCF according to the tunnel information, initiate the S9* session establishing operation, and send the tunnel information to the re-selected BPCF.</li></ul></p><p id="p0026" num="0026">The tunnel information may be an outer layer IP address of the target HeNB.</p><p id="p0027" num="0027">The tunnel information may further include one kind or several kinds of the following information:
<ul><li>a Fully Qualified Domain Name (FQDN) of a BPCF;</li><li>an outer layer port number of the target HeNB;</li><li>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</li><li>an identity of the target HeNB; and</li><li>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</li></ul><!-- EPO <DP n="11"> --></p><p id="p0028" num="0028">The present disclosure further provides a system for updating tunnel information, including: a target Home evolved NodeB (HeNB) to which a user equipment (UE) is to be handed over, a Mobility Management Entity (MME), a Packet Data Network Gateway (P-GW), a Policy and Charging Rules Function entity (PCRF), and a Broadband Policy Control Function entity (BPCF) of a fixed network, wherein
<ul><li>the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;</li><li>the MME is configured to notify the P-GW of the received tunnel information through a change notification message;</li><li>the P-GW is configured to notify the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message;</li><li>the PCRF is configured to notify the BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation; and</li><li>the BPCF is configured to receive the tunnel information notified by the PCRF.</li><li>The tunnel information may be an outer layer IP address of the target HeNB.</li></ul></p><p id="p0029" num="0029">The tunnel information may further include one kind or several kinds of the following information:
<ul><li>a Fully Qualified Domain Name (FQDN) of the BPCF;</li><li>an outer layer port number of the target HeNB;</li><li>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</li><li>an identity of the target HeNB; and</li><li>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</li></ul></p><p id="p0030" num="0030">With the method and system for updating tunnel information provided by the<!-- EPO <DP n="12"> --> present disclosure, when a UE is handed over inter-(H)eNBs, the target HeNB updates its related tunnel information to the core network, when the UE is handed over micro-cell (H)eNBs, the core network can receive the tunnel information of the target HeNB so as to implement resource control; when the UE is handed from a macro-cell over to a micro-cell, the core network can receive information on the local IP address/port number of the fixed network line where the target HeNB is located so as to implement policy interworking and resource management of the mobile network and the fixed network; with the present disclosure, the QoS of the HeNB is ensured.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0031" num="0031"><ul><li><figref idrefs="f0001">Fig. 1</figref> is the diagram of the architecture of convergence of an EPS, a fixed network and an H(e)NB in the related art;</li><li><figref idrefs="f0002">Fig. 2</figref> is a flow chart of an inter-(H)eNB handover of a UE in the related art;</li><li><figref idrefs="f0003">Fig. 3</figref> is a flow chart of a method for updating tunnel information in a first embodiment of the present disclosure;</li><li><figref idrefs="f0004">Fig. 4</figref> is a flow chart of a method for updating tunnel information in a second embodiment of the present disclosure;</li><li><figref idrefs="f0005">Fig. 5</figref> is a flow chart of a method for updating tunnel information in a third embodiment of the present disclosure;</li><li><figref idrefs="f0006">Fig. 6</figref> is a flow chart of a method for updating tunnel information in a fourth embodiment of the present disclosure;</li><li><figref idrefs="f0007">Fig. 7</figref> is a flow chart of a method for updating tunnel information in a fifth embodiment of the present disclosure;</li><li><figref idrefs="f0008">Fig. 8</figref> is a flow chart of a method for updating tunnel information in a sixth embodiment of the present disclosure; and</li><li><figref idrefs="f0008">Fig. 9</figref> is a flow chart of a method for updating tunnel information in a seventh embodiment of the present disclosure.</li></ul><!-- EPO <DP n="13"> --></p><heading id="h0005"><b>DETAILED DESCRIPTION</b></heading><p id="p0032" num="0032">The technical solution of the present disclosure will be further elaborated with reference to the accompanying drawings and specific embodiments.</p><p id="p0033" num="0033">The tunnel information in the embodiments of the present disclosure is introduced first. In the related art, when a Home evolved NodeB (HeNB) accesses an EPC, an IPsec tunnel is established between the HeNB and an SeGW, as shown in <figref idrefs="f0001">Fig.1</figref>, wherein the HeNB and the SeGW are two endpoints of the IPsec tunnel, respectively. The tunnel information in the embodiments of the present disclosure is an outer layer IP address of the HeNB (also called a local IP address of the HeNB) as one of the endpoints of the IPsec tunnel, and in addition, the tunnel information may also include one kind or several kinds of the following information:
<ul><li>a Fully Qualified Domain Name (FQDN) of a BPCF;</li><li>an outer layer port number of the HeNB (also referred to as a local port number of the HeNB);</li><li>an address and/or port number of the SeGW as one of the endpoints of the IPsec tunnel;</li><li>an identity of the HeNB, for example, International Mobile Station Identity (IMSI); and</li><li>an Identity (VLAN ID) of a Virtual Local Area Network where the HeNB is located.</li></ul></p><p id="p0034" num="0034">Wherein, the outer layer/ local IP address of the HeNB is allocated by a fixed network/ WLAN access network; if there is a Network Address Translation (NAT) in the WLAN, then the outer layer/ local IP address of the HeNB is a public network IP address and a User Datagram Protocol (UDP) port number translated by a NAT translator served as by a Residential Gateway (RG).</p><p id="p0035" num="0035">Information on the fixed network such as the local/ outer layer IP address (and port number) of the HeNB is included in the tunnel information, and as the tunnel information is provided by the WLAN access network/ fixed network, a PCRF can select a BPCF (a network element (NE) of the fixed network/ WLAN access network) serves the line where<!-- EPO <DP n="14"> --> the address is located according to the address; in addition, the WLAN access network/ fixed network may locate the fixed network line where the HeNB is located according to the tunnel information, and can ensure QoS on the line according to a policy rule.</p><p id="p0036" num="0036">If the HeNB doesn't pass through an RG serving as a router when accessing the fixed network/ WLAN access network or the RG operates in a bridging mode, then the IP address received by the accessing HeNB can be uniquely identified and located by the fixed network/ WLAN access network, and the fixed network line where the HeNB is located can be located according to the address; the address is allocated to the HeNB by a related NE (for example, a Broadband Network Gateway/Broadband Remote Access Server (BNG/BRAS)) when the HeNB accesses the fixed network/ WLAN access network, and the address is the local/ outer layer IP address.</p><p id="p0037" num="0037">If the HeNB passes through the RG serving as a router when accessing the fixed network/ WLAN access network, then the IP address received by the accessing HeNB is a private IP address allocated by the RG and cannot be part of the tunnel information. In this case, when the HeNB establishes the IPsec tunnel with the SeGW, the SeGW feeds back to the HeNB the UDP port number and the outer layer/ local IP address going through the NAT by the RG; the HeNB constructs the tunnel information using the address; the fixed network line where the HeNB is located can be located according to the address. In addition to the local/ outer layer IP address (and port number), the tunnel information may also include information such as the FQDN of the BPCF.</p><p id="p0038" num="0038">The method for updating tunnel information of the present disclosure will be elaborated with specific embodiments.</p><p id="p0039" num="0039">The first embodiment of the present disclosure is as shown in <figref idrefs="f0003">Fig. 3</figref>, wherein the flow of handing a UE from a macro-cell over to a micro-cell, or handing the UE over different micro-cells (based on a handover scenario in an S1 interface) mainly includes the following steps:
<ul><li>Step 301, the UE accesses from a source (H)eNB (macro-cell or micro-cell (H)eNB, S-(H)eNB), initiates a handover at a certain time, and selects to access from a target HeNB (T-HeNB).<!-- EPO <DP n="15"> --></li><li>Step 302, the S-(H)eNB sends a handover request message to a source MME (i.e., S-MME).</li><li>Step 303, the S-MME sends a target MME (i.e., T-MME) a relocation request forwarding message used for delivering context information to a target side and notifying the target side to perform a handover operation.</li><li>Step 304, if S-GW relocation occurs, then the T-MME sends a session establishing request message to a target S-GW (i.e., T-S-GW) and receives a session establishing response message from the T-S-GW; if S-GW relocation doesn't occur, i.e., the S-S-GW and the T-S-GW are the same gateway, then the operation of this step is skipped and is not executed.</li><li>Step 305, the T-MME sends a handover request message to the T-HeNB, and receives a handover acknowledgement message returned by the T-HeNB; if S-GW relocation occurs in the previous step 304, then it is also required to establish, in step 305, a user plane data channel between the T-HeNB and the T-S-GW.</li><li>Step 306, the T-MME sends the S-MME a relocation response forwarding message as a response to the step 403.</li><li>Step 307, the S-MME sends a handover instruction to the source (H)eNB, and the source (H)eNB forwards the handover instruction to the UE to notify it to perform the handover.</li><li>Step 308, the UE sends a handover confirming message to the T-HeNB, and the UE hands a radio channel over to the target side.</li><li>Step 309, the T-HeNB sends the T-MME a handover notification message in which the T-HeNB carries the tunnel information to the T-MME.</li><li>Step 310, the T-MME and the S-MME exchange a relocation completion notification/ acknowledgement forwarding message.</li><li>Step 311, regardless of whether S-GW relocation occurs or not, the T-MME sends a bearer modifying request message to the T-S-GW, and as a return, the T-S-GW sends a bearer modifying response message to the T-MME; meanwhile, the triggered T-S-GW<!-- EPO <DP n="16"> --> sends a bearer modifying request message to the P-GW, and the P-GW also returns a bearer modifying response message to the S-S-GW.
<br/>
In the bearer modifying request message, the T-MME sends the tunnel information to the S-GW, which then sends the tunnel information to the P-GW.
</li><li>Step 312, the P-GW receives the bearer modifying request message from the S-GW, intercommunicates in an IP-CAN session modifying step with the PCRF to update an IP-CAN session, and sends the tunnel information to the PCRF.</li><li>Step 312a, the PCRF initiates an S9* session establishing/updating operation after receiving the tunnel information; specifically:
<ul><li>when there is no S9* session between the PCRF and the BPCF before a handover, then the PCRF selects the BPCF according to the received tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and the BPCF before the handover, then the PCRF verifies whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF initiates the S9* session modifying operation and sends the tunnel information to the BPCF; otherwise the PCRF re-selects a BPCF according to the tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the re-selected BPCF.</li></ul></li><li>Step 313, the UE initiates a TAU operation after completing the handover, and the user updates the mobility management context of the UE in the MME.</li><li>Step 314, the S-MME sends a UE context releasing instruction message to the source (H)eNB to release the context of the user at a source network side.</li></ul></p><p id="p0040" num="0040">Now, the handover is completed.</p><p id="p0041" num="0041">It should be noted that in the above operation steps of the embodiment, the T-HeNB notifies the T-MME of the tunnel information through the handover notification message of the step 409; alternatively, as another implementation of the present disclosure, the<!-- EPO <DP n="17"> --> tunnel information may also be carried to the T-MME through the handover acknowledgement message of the step 305, and other subsequent delivery paths are the same as the above steps of the embodiment.</p><p id="p0042" num="0042">The second embodiment of the present disclosure is as shown in <figref idrefs="f0004">Fig. 4</figref>, wherein the flow of handing a UE from a macro-cell over to a micro-cell, or handing the UE over different micro-cells (based on a handover scenario in an S1 interface) mainly includes the following steps:
<ul><li>Steps 401- 409, are the same as the steps 301-309 in the first embodiment.</li><li>Step 409a, after receiving the tunnel information sent by T-HeNB through step 405 or 409, T-MME resends a session establishing, modifying or updating request message to T-S-GW and carries tunnel information to T-S-GW; similarly, the T-S-GW carries the tunnel information to P-GW through the session establishing, modifying or updating request message.
<br/>
Successively, the P-GW returns a response message to the T-S-GW, and the T-S-GW returns a response message to the T-MME.
</li><li>Step 409b, after receiving the tunnel information from the S-GW, the P-GW intercommunicates in an IP-CAN session modifying step with the PCRF to update an IP-CAN session, and sends the tunnel information to the PCRF.</li><li>Step 409c, the PCRF initiates an S9* session establishing/updating operation after receiving the tunnel information; specifically:
<ul><li>when there is no S9* session between the PCRF and BPCF before a handover, then the PCRF selects the BPCF according to the received tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and the BPCF before the handover, then the PCRF verifies whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF initiates the S9* session modifying operation and sends the tunnel information to the BPCF;<!-- EPO <DP n="18"> --> otherwise the PCRF re-selects a BPCF according to the tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the re-selected BPCF.</li></ul></li></ul></p><p id="p0043" num="0043">The operations of steps 410-414 are the same as that of steps 210-214 and will not be repeated here.</p><p id="p0044" num="0044">The third embodiment of the present disclosure is as shown in <figref idrefs="f0005">Fig. 5</figref> and is based on a handover scenario in an X2 interface, wherein a signalling bearing the tunnel information is different from that of the first and second embodiments, and the embodiment mainly includes the following steps:
<ul><li>Step 501, a UE accesses from a source (H)eNB (macro-cell or micro-cell (H)eNB, S-(H)eNB), initiates a handover at a certain time, and selects to access from a target HeNB (T-HeNB).</li><li>Step 502, preparation before the handover and an air-interface handover operation are of the related art and will not be repeated here.</li><li>Step 503, the T-HeNB sends a path converting request message to an MME, and sends tunnel information of the T-HeNB to the MME through the message.</li><li>Step 504, if S-GW relocation occurs during the handover, then the MME sends the tunnel information to a T-S-GW through a session establishing request message; and after receiving the session establishing request message, the T-S-GW sends a session establishing response message to the MME; if S-GW relocation doesn't occur during the handover, then the T-S-GW is S-S-GW, and the MME sends a bearer modifying request message including the received tunnel information to the S-GW; and after receiving the bearer modifying request message, the S-GW sends a bearer modifying response message to the MME.</li><li>Step 505, the S-GW exchanges a bearer modifying request/ response message with P-GW, and sends the tunnel information to the P-GW.</li><li>Step 506, the P-GW receives the bearer modifying request message from the S-GW, intercommunicates in an IP-CAN session modifying step with a PCRF to update an IP-CAN<!-- EPO <DP n="19"> --> session, and sends the tunnel information to the PCRF.</li><li>Step 507, the PCRF initiates an S9* session establishing/updating operation after receiving the tunnel information; specifically:
<ul><li>when there is no S9* session between the PCRF and a BPCF before the handover, then the PCRF selects the BPCF according to the received tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and the BPCF before the handover, then the PCRF verifies whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF initiates the S9* session modifying operation and sends the tunnel information to the BPCF; otherwise the PCRF re-selects a BPCF according to the tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the re-selected BPCF.</li></ul></li><li>Step 508, the MME returns a path converting request acknowledgement message to the T-HeNB to notify the T-HeNB of the completion of the handover.</li><li>Step 509, the T-HeNB sends a resource releasing message to the source (H)eNB to release a resource at a source network side.</li><li>Step 510, if S-GW relocation occurs, then a session between the MME and the S-S-GW will be released; if S-GW relocation doesn't occur, then this step is skipped.</li><li>Step 511, the UE initiates a TAU operation after completing the handover, and the user updates the mobility management context of the UE in the MME.</li></ul></p><p id="p0045" num="0045">Now, the handover is completed.</p><p id="p0046" num="0046">The fourth embodiment of the present disclosure is as shown in <figref idrefs="f0006">Fig. 6</figref>, and the mechanism of the embodiment is similar to that of the first embodiment except that instead of a GTP (General Packet Radio Service (GPRS) Tunnelling Protocol), a Proxy Mobile IP (PMIP) protocol is adopted between S-GW and P-GW, therefore tunnel information is not delivered from the S-GW to the P-GW and then to the PCRF, but is<!-- EPO <DP n="20"> --> reported to PCRF by the S-GW through a gateway control session, and then reported to BPCF by the PCRF. The following steps are included specifically:
<ul><li>Steps 601- 611, are the same as steps 301-311 in the first embodiment.</li><li>Step 611a, T-S-GW initiates a gateway control session establishing/modifying operation with PCRF, and sends tunnel information to the PCRF.</li><li>Step 611b, if S-GW relocation occurs, then binding of S-GW and P-GW is implemented through a PMIP Proxy Binding Update (PBU)/ Proxy Binding Acknowledgement (PBA) message; if S-GW relocation doesn't occur, then this step is skipped.</li><li>Step 612, the P-GW updates an IP-CAN session with the PCRF.</li><li>Step 612a, the PCRF initiates an S9* session establishing/updating operation after receiving the tunnel information; specifically:
<ul><li>when there is no S9* session between the PCRF and the BPCF before the handover, then the PCRF selects the BPCF according to the received tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and the BPCF before the handover, then the PCRF verifies whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF initiates the S9* session modifying operation and sends the tunnel information to the BPCF; otherwise the PCRF re-selects a BPCF according to the tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the re-selected BPCF.</li></ul></li><li>Step 613, the UE initiates a TAU operation after completing the handover, and the user updates the mobility management context of the UE in the MME.</li><li>Step 614, the S-MME sends a UE context releasing instruction message to the source (H)eNB to release the context of the user at a source network side.</li></ul><!-- EPO <DP n="21"> --></p><p id="p0047" num="0047">Now, the handover is completed.</p><p id="p0048" num="0048">It should be noted that in the above operation steps of the embodiment, the T-HeNB notifies the T-MME of the tunnel information through the handover notification message of the step 709 by the T-HeNB; alternatively, as another implementation of the present disclosure, the tunnel information may also be carried to the T-MME through the handover acknowledgement message of the step 605, and other subsequent delivery paths are the same as the above steps of the embodiment.</p><p id="p0049" num="0049">In the above operation steps of the embodiment, the S-GW reports the tunnel information to the PCRF through a gateway control session establishing/modifying message; alternatively, as another implementation of the present disclosure, no matter whether the S-GW relocation occurs or not, the S-GW may send the tunnel information to the P-GW through the PBU message, then the P-GW reports the tunnel information to the PCRF through an IP-CAN session modifying flow, and operations after the PCRF are the same as the above steps of the embodiment.</p><p id="p0050" num="0050">The fifth embodiment of the present disclosure is as shown in <figref idrefs="f0007">Fig. 7</figref>, and the mechanism of the embodiment is similar to that of the second embodiment except that instead of a GTP protocol, a PMIP protocol is adopted between S-GW and P-GW, therefore tunnel information is not delivered from the S-GW to the P-GW and then to PCRF, but is reported to the PCRF by the S-GW through the gateway control session, and then reported to BPCF by the PCRF. The following steps are mainly included:
<ul><li>Steps 701- 709, are the same as steps 401-409 in the first embodiment.</li><li>Step 709a, after receiving the tunnel information sent by T-HeNB through step 705 or 709, T-MME resends a session establishing, modifying or updating request message to T-S-GW and carries the tunnel information to T-S-GW.</li><li>Step 709b, T-S-GW initiates a gateway control session establishing/modifying operation with PCRF, and sends the tunnel information to the PCRF.</li><li>Step 709c, if S-GW relocation occurs, then binding of S-GW and P-GW is implemented through a PBU/PBA message; if S-GW relocation doesn't occur, then this step is skipped.<!-- EPO <DP n="22"> --></li><li>Step 709d, the P-GW updates an IP-CAN session with the PCRF.</li><li>Step 709e, the PCRF initiates an S9* session establishing/updating operation after receiving the tunnel information; specifically:
<ul><li>when there is no S9* session between the PCRF and the BPCF before the handover, then the PCRF selects the BPCF according to the received tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the selected BPCF; and</li><li>when there exists an S9* session between the PCRF and the BPCF before the handover, then the PCRF verifies whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF initiates the S9* session modifying operation and sends the tunnel information to the BPCF; otherwise the PCRF re-selects a BPCF according to the tunnel information, initiates the S9* session establishing operation, and sends the tunnel information to the re-selected BPCF.</li></ul></li></ul></p><p id="p0051" num="0051">Operations of steps 710-714 are the same as those of steps 410-414 and will not be repeated here.</p><p id="p0052" num="0052">It should be noted that in the above operation steps, the S-GW reports the tunnel information to the PCRF through a gateway control session establishing/modifying message; alternatively, as another implementation of the present disclosure, no matter whether the S-GW relocation occurs or not, the S-GW may send the tunnel information to the P-GW through the PBU message, then the P-GW reports the tunnel information to the PCRF through an IP-CAN session modifying flow, and operations after the PCRF are the same as the above steps of the embodiment.</p><p id="p0053" num="0053">The sixth embodiment of the present disclosure is as shown in <figref idrefs="f0008">Fig. 8</figref>, and the mechanism of the embodiment is similar to that of the third embodiment except that instead of a GTP protocol, a PMIP protocol is adopted between S-GW and P-GW, therefore the tunnel information is not delivered from the S-GW to the P-GW and then to PCRF, but is reported to the PCRF by the S-GW through the gateway control session, and then<!-- EPO <DP n="23"> --> reported to BPCF by the PCRF.</p><p id="p0054" num="0054">In addition, this embodiment is based on the handover scenario in an X2 interface, wherein a signalling bearing the tunnel information is different from that of the fifth and fourth embodiments. The following steps are mainly included:
<ul><li>Steps 801- 804, are the same as steps 501-504 in the third embodiment;</li><li>Steps 804a- 807, are the same as steps 709b-709e in the fifth embodiment;</li><li>Steps 808- 811, are the same as steps 508-511 in the third embodiment and will not be repeated here.</li></ul></p><p id="p0055" num="0055">Now, the handover is completed.</p><p id="p0056" num="0056">It should be noted that in the above operation steps of the embodiment, the S-GW reports the tunnel information to the PCRF through a gateway control session establishing/modifying message; alternatively, as another implementation of the present disclosure, no matter whether the S-GW relocation occurs or not, the S-GW may send the tunnel information to the P-GW through the PBU message, then the P-GW reports the tunnel information to the PCRF through an IP-CAN session modifying flow, and operations after the PCRF are the same as the above steps of the embodiment.</p><p id="p0057" num="0057">The seventh embodiment of the present disclosure is as shown in <figref idrefs="f0008">Fig. 9</figref>, and is different from the aforementioned embodiments, wherein tunnel information is always delivered by extending an existing message in a handover operation; while in this embodiment, the tunnel information is reported to a core network and a WLAN side through a dedicated notification flow, which is described specifically as follows.
<ul><li>Step 901, referring to an existing flow as shown in <figref idrefs="f0002">Fig. 2</figref>, a UE is handed from a macro-cell over to a micro-cell or is handed over micro-cells.</li><li>Step 902, a T-HeNB updates tunnel information to a T-MME.</li><li>Step 903, the T-MME receives the latest tunnel information according to step 902, or receives the latest tunnel information from a handover acknowledgement, path handover request or handover notification message according to the method in the first to the sixth<!-- EPO <DP n="24"> --> embodiments; if the MME detects that the latest tunnel information is changed, then the MME reports to a core network.</li><li>Step 904, the tunnel information is reported by the T-MME to a T-S-GW, and reported by the T-S-GW to a P-GW through a change notification message.
<br/>
Operation steps of steps 905- 906 are the same as those of steps 506-507 and will not be repeated here.
</li><li>Step 907, the P-GW returns a change notification acknowledgement message to the T-S-GW, which then returns a change notification acknowledgement message to the T-MME.</li></ul></p><p id="p0058" num="0058">It should be noted that the steps 902-907 of the embodiment may also be performed simultaneously with the handover operation step 901, without any strict performing order.</p><p id="p0059" num="0059">To sum up, the method for updating tunnel information provided by the present disclosure may be summarized as follows:
<ul><li>a target HeNB to which a UE is to be handed over notifies an MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message; and</li><li>the MME notifies a fixed network of the received tunnel information through an EPC gateway and a PCRF.</li></ul></p><p id="p0060" num="0060">Accordingly, the system for updating tunnel information includes: a target HeNB to which a UE is to be handed over, an MME, an EPC gateway, and a PCRF, wherein,
<ul><li>the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;</li><li>the MME is configured to notify a fixed network of the received tunnel information through the EPC gateway and the PCRF; and</li><li>the EPC gateway and the PCRF are configured to implement forwarding of the tunnel<!-- EPO <DP n="25"> --> information from the MME to the fixed network.</li></ul></p><p id="p0061" num="0061">Wherein, the EPC gateway may include: an S-GW and a P-GW, and accordingly, the MME is further configured to notify the S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;
<ul><li>the S-GW is configured to notify the P-GW of the received tunnel information through the session establishing, modifying or updating request message, the bearer modifying request message, or a PBU message;</li><li>the P-GW is configured to notify the PCRF of the received tunnel information through an IP-CAN session modifying message; and</li><li>the PCRF is configured to notify a BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0062" num="0062">Namely, corresponding to a GTP scenario, the method for updating the tunnel information provided by the present disclosure is specifically:
<ul><li>the target HeNB to which a UE is to be handed over notifies an MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message; and</li><li>the MME notifies an S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;</li><li>the S-GW notifies a P-GW of the received tunnel information through the session establishing, modifying or updating request message, the bearer modifying request message, or a PBU message; and</li><li>the P-GW notifies the PCRF of the received tunnel information through an IP-CAN session modifying message; and the PCRF notifies a BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0063" num="0063">Wherein, the EPC gateway may also include only the S-GW, and accordingly, the<!-- EPO <DP n="26"> --> MME is further configured to notify the S-GW of the received tunnel information through the session establishing, modifying or updating request message or a bearer modifying request message;
<ul><li>the S-GW is configured to notify the PCRF of the received tunnel information through a gateway control session modifying message; and</li><li>the PCRF is configured to notify a BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0064" num="0064">Namely, corresponding to a PMIP scenario, the method for updating the tunnel information provided by the present disclosure is specifically:
<ul><li>a target HeNB to which a UE is to be handed over notifies an MME of the tunnel information through a handover acknowledgement message, a handover notification, message or a path converting request message; and</li><li>the MME notifies an S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;</li><li>the S-GW notifies the PCRF of the received tunnel information through a gateway control session modifying message; and the PCRF notifies a BPCF of the received tunnel information through an S9* session establishing or modifying operation.</li></ul></p><p id="p0065" num="0065">In addition, when the handover is in an S1 mode, the target HeNB notifies the MME of the tunnel information through the handover acknowledgement message or the handover notification message; and when the handover is in an X2 mode, the target HeNB notifies the MME of the tunnel information through the path converting request message.</p><p id="p0066" num="0066">The system for updating tunnel information corresponding to the method for updating tunnel information of the embodiment shown in <figref idrefs="f0008">Fig. 9</figref> of the present disclosure includes: a target HeNB to which a UE is to be handed over, an MME, a P-GW, a PCRF, and a BPCF of a fixed network, wherein,
<ul><li>the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path<!-- EPO <DP n="27"> --> converting request message;</li><li>the MME is configured to notify the P-GW of the received tunnel information through a change notification message;</li><li>the P-GW is configured to notify the PCRF of the received tunnel information through an IP-CAN session modifying message;</li><li>the PCRF is configured to notify the BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation; and</li><li>the BPCF is configured to receive the tunnel information notified by the PCRF.</li></ul></p><p id="p0067" num="0067">It should be noted that the tunnel information in the embodiments of the present disclosure is an outer layer IP address of the target HeNB; in addition, the tunnel information may also include one kind or several kinds of the following information:
<ul><li>an FQDN of the BPCF;</li><li>an outer layer port number of the target HeNB;</li><li>an address and/or port number of an SeGW of an IPsec tunnel;</li><li>an identity of the target HeNB; and</li><li>an ID of a VLAN where the HeNB is located.</li></ul></p><p id="p0068" num="0068">To sum up, in the present disclosure, when a UE is handed over (H)eNBs, the target HeNB updates its related tunnel information to the core network, when the UE is handed over micro-cell (H)eNBs, the core network can receive the tunnel information of the target HeNB so as to implement resource control; when the UE is handed from a macro-cell over to a micro-cell, the core network can receive information on the local IP address/port number of the fixed network line where the target HeNB is located so as to implement policy interworking and resource management of the mobile network and the fixed network; with the present disclosure, the QoS of the HeNB is ensured.</p><p id="p0069" num="0069">What described are merely preferred embodiments of the present disclosure, and are not intended to limit the protection scope of the present disclosure.</p></description><claims mxw-id="PCLM56982691" lang="EN" load-source="patent-office"><!-- EPO <DP n="28"> --><claim id="c-en-0001" num="0001"><claim-text>A method for updating tunnel information, comprising:
<claim-text>notifying, by a target Home evolved NodeB (HeNB) to which a User Equipment (UE) is to be handed over, a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message; and</claim-text>
<claim-text>notifying, by the MME, a fixed network of the received tunnel information through an Evolved Packet Core (EPC) gateway and a Policy and Charging Rules Function entity (PCRF).</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method for updating tunnel information according to claim 1, wherein the notifying, by the MME, a fixed network of the received tunnel information through an EPC gateway and a PCRF is:
<claim-text>notifying, by the MME, a Serving Gateway (S-GW) of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;</claim-text>
<claim-text>notifying, by the S-GW, a Packet Data Network Gateway (P-GW) of the received tunnel information through a session establishing, modifying or updating request message, a bearer modifying request message, or a Proxy Binding Update (PBU) message; and</claim-text>
<claim-text>notifying, by the P-GW, the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and</claim-text>
<claim-text>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method for updating tunnel information according to claim 1, wherein the notifying, by the MME, a fixed network of the received tunnel information through an EPC gateway and a PCRF is:
<claim-text>notifying, by the MME, a Serving Gateway (S-GW) of the received tunnel information<!-- EPO <DP n="29"> --> through a session establishing, modifying or updating request message or a bearer modifying request message; and</claim-text>
<claim-text>notifying, by the S-GW, the PCRF of the received tunnel information through a gateway control session modifying message; and</claim-text>
<claim-text>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method for updating tunnel information according to claim 1,<br/>
wherein when the handover is in an S1 mode, notifying, by the target HeNB, the MME of the tunnel information through the handover acknowledgement message or the handover notification message; or<br/>
wherein when the handover is in an X2 mode, notifying, by the target HeNB, the MME of the tunnel information through the path converting request message.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method for updating tunnel information according to claim 1, wherein notifying, by the PCRF, a BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation is:
<claim-text>when there is no S9* session between the PCRF and a BPCF before the handover, selecting, by the PCRF, a BPCF according to the received tunnel information, initiating, by the PCRF, an S9* session establishing operation, and sending, by the PCRF, the tunnel information to the selected BPCF; or</claim-text>
<claim-text>when there exists an S9* session between the PCRF and a BPCF before the handover, verifying, by the PCRF, whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, initiating, by the PCRF, an S9* session modifying operation, and sending, by the PCRF, the tunnel information to the BPCF; otherwise re-selecting, by the PCRF, a BPCF according to the tunnel information, initiating, by the PCRF, the S9* session establishing operation, and sending, by the PCRF, the tunnel information to the re-selected BPCF.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method for updating tunnel information according to any one of claims 1 to<!-- EPO <DP n="30"> --> 5, wherein the tunnel information comprises an outer layer IP address of the target HeNB.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method for updating tunnel information according to claim 6, wherein the tunnel information further comprises one kind or several kinds of the following information:
<claim-text>a Fully Qualified Domain Name (FQDN) of a BPCF;</claim-text>
<claim-text>an outer layer port number of the target HeNB;</claim-text>
<claim-text>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</claim-text>
<claim-text>an identity of the target HeNB; and</claim-text>
<claim-text>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A method for updating tunnel information, comprising:
<claim-text>notifying, by a target Home evolved NodeB (HeNB) to which a User Equipment (UE) is to be handed over, a Mobility Management Entity (MME) of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;</claim-text>
<claim-text>notifying, by the MME, a Packet Data Network Gateway (P-GW) of the received tunnel information through a change notification message;</claim-text>
<claim-text>notifying, by the P-GW, a Policy and Charging Rules Function entity (PCRF) of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and</claim-text>
<claim-text>notifying, by the PCRF, a Broadband Policy Control Function entity (BPCF) of a fixed network of the received tunnel information through an S9* session establishing or modifying operation.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method for updating tunnel information according to claim 8, wherein the tunnel information comprises an outer layer IP address of the target HeNB.<!-- EPO <DP n="31"> --></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method for updating tunnel information according to claim 9, wherein the tunnel information further comprises one kind or several kinds of the following information:
<claim-text>a Fully Qualified Domain Name (FQDN) of the BPCF;</claim-text>
<claim-text>an outer layer port number of the target HeNB;</claim-text>
<claim-text>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</claim-text>
<claim-text>an identity of the target HeNB; and</claim-text>
<claim-text>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A system for updating tunnel information, comprising: a target Home evolved NodeB (HeNB) to which a User Equipment (UE) is to be handed over, a Mobility Management Entity (MME), an Evolved Packet Core (EPC) gateway, and a Policy and Charging Rules Function entity (PCRF),<br/>
wherein the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;<br/>
wherein the MME is configured to notify a fixed network of the received tunnel information through the EPC gateway and the PCRF; and<br/>
wherein the EPC gateway and the PCRF are configured to implement forwarding of the tunnel information from the MME to the fixed network.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The system for updating tunnel information according to claim 11, wherein the EPC gateway comprises: a Serving Gateway (S-GW) and a Packet Data Network Gateway (P-GW),<br/>
wherein the MME is configured to notify the S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;<br/>
<!-- EPO <DP n="32"> -->wherein the S-GW is configured to notify the P-GW of the received tunnel information through a session establishing, modifying or updating request message, a bearer modifying request message, or a Proxy Binding Update (PBU) message;<br/>
wherein the P-GW is configured to notify the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message; and<br/>
wherein the PCRF is configured to notify a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The system for updating tunnel information according to claim 11, wherein the EPC gateway comprises: a Serving Gateway (S-GW),<br/>
wherein the MME is configured to notify the S-GW of the received tunnel information through a session establishing, modifying or updating request message or a bearer modifying request message;<br/>
wherein the S-GW is configured to notify the PCRF of the received tunnel information through a gateway control session modifying message; and<br/>
wherein the PCRF is configured to notify a Broadband Policy Control Function entity (BPCF) of the fixed network of the received tunnel information through an S9* session establishing or modifying operation.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The system for updating tunnel information according to claim 11, wherein the target HeNB is configured to:
<claim-text>notify the MME of the tunnel information through the handover acknowledgement message or the handover notification message when the handover is in an S1 mode; or</claim-text>
<claim-text>notify the MME of the tunnel information through the path converting request message when the handover is in an X2 mode.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The system for updating tunnel information according to claim 11,<br/>
wherein when there is no S9* session between the PCRF and a BPCF before the handover, the PCRF is configured to select a BPCF according to the received tunnel<!-- EPO <DP n="33"> --> information, to initiate an S9* session establishing operation, and to send the tunnel information to the selected BPCF; and<br/>
wherein when there exists an S9* session between the PCRF and a BPCF before the handover, the PCRF is configured to verify whether the BPCF having the S9* session between itself and the PCRF is the one indicated by the tunnel information: if so, the PCRF is configured to initiate an S9* session modifying operation and to send the tunnel information to the BPCF; otherwise the PCRF is configured to re-select a BPCF according to the tunnel information, to initiate the S9* session establishing operation, and to send the tunnel information to the re-selected BPCF.</claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The method for updating tunnel information according to any one of claims 11 to 15, wherein the tunnel information comprises an outer layer IP address of the target HeNB.</claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The method for updating tunnel information according to claim 16, wherein the tunnel information further comprises one kind or several kinds of the following information:
<claim-text>a Fully Qualified Domain Name (FQDN) of a BPCF;</claim-text>
<claim-text>an outer layer port number of the target HeNB;</claim-text>
<claim-text>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</claim-text>
<claim-text>an identity of the target HeNB; and</claim-text>
<claim-text>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</claim-text></claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>A system for updating tunnel information, comprising: a target Home evolved NodeB (HeNB) to which a User Equipment (UE) is to be handed over, a Mobility Management Entity (MME), a Packet Data Network Gateway (P-GW), a Policy and Charging Rules Function entity (PCRF), and a Broadband Policy Control Function entity (BPCF) of a fixed network, wherein<br/>
<!-- EPO <DP n="34"> -->the target HeNB is configured to notify the MME of the tunnel information through a handover acknowledgement message, a handover notification message, or a path converting request message;<br/>
the MME is configured to notify the P-GW of the received tunnel information through a change notification message;<br/>
the P-GW is configured to notify the PCRF of the received tunnel information through an IP Connectivity Access Network (IP-CAN) session modifying message;<br/>
the PCRF is configured to notify the BPCF of the fixed network of the received tunnel information through an S9* session establishing or modifying operation; and<br/>
the BPCF is configured to receive the tunnel information notified by the PCRF.</claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>The system for updating tunnel information according to claim 18, wherein the tunnel information comprises an outer layer IP address of the target HeNB.</claim-text></claim><claim id="c-en-0020" num="0020"><claim-text>The system for updating tunnel information according to claim 19, wherein the tunnel information further comprises one kind or several kinds of the following information:
<claim-text>a Fully Qualified Domain Name (FQDN) of the BPCF;</claim-text>
<claim-text>an outer layer port number of the target HeNB;</claim-text>
<claim-text>an address and/or port number of a Security Gateway (SeGW) of an IP Security (IPsec) tunnel;</claim-text>
<claim-text>an identity of the target HeNB; and</claim-text>
<claim-text>an Identity (VLAN ID) of a Virtual Local Area Network where the target HeNB is located.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16671032" load-source="patent-office"><!-- EPO <DP n="35"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="142" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="141" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="142" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="152" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="165" he="119" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="165" he="158" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="165" he="162" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0008" num="8,9"><img id="if0008" file="imgf0008.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="230" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="230" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
