<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683125-A1" country="EP" doc-number="2683125" kind="A1" date="20140108" family-id="34435335" file-reference-id="287040" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585124" ucid="EP-2683125-A1"><document-id><country>EP</country><doc-number>2683125</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13186771-A" is-representative="NO"><document-id mxw-id="PAPP154847316" load-source="docdb" format="epo"><country>EP</country><doc-number>13186771</doc-number><kind>A</kind><date>20040813</date><lang>EN</lang></document-id><document-id mxw-id="PAPP168045701" load-source="docdb" format="original"><country>EP</country><doc-number>13186771.5</doc-number><date>20040813</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140551710" ucid="EP-04781289-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>04781289</doc-number><kind>A</kind><date>20040813</date></document-id></priority-claim><priority-claim mxw-id="PPC140551916" ucid="US-66695203-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>66695203</doc-number><kind>A</kind><date>20030917</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989316062" load-source="docdb">H04L  27/26        20060101ALI20131030BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989322131" load-source="docdb">H04L  27/04        20060101AFI20131030BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989322212" load-source="docdb">H04L   1/08        20060101ALI20131030BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1996928470" load-source="docdb" scheme="CPC">H04L   1/0071      20130101 LI20151126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2122379323" load-source="docdb" scheme="CPC">H04L   1/08        20130101 FI20150106BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132360005" lang="DE" load-source="patent-office">Wiederholungscodierung für ein drahtloses System</invention-title><invention-title mxw-id="PT132360006" lang="EN" load-source="patent-office">Repetition coding for a wireless system</invention-title><invention-title mxw-id="PT132360007" lang="FR" load-source="patent-office">Codage de répétition pour système sans fil</invention-title><citations><patent-citations><patcit mxw-id="PCIT242943077" load-source="docdb" ucid="GB-2309363-A"><document-id format="epo"><country>GB</country><doc-number>2309363</doc-number><kind>A</kind><date>19970723</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242943078" load-source="docdb" ucid="WO-2001013560-A1"><document-id format="epo"><country>WO</country><doc-number>2001013560</doc-number><kind>A1</kind><date>20010222</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45210888" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><related-documents><relation type="division"><child-doc ucid="EP-13186771-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>13186771</doc-number><kind>A</kind><date>20040813</date></document-id></child-doc><parent-doc ucid="EP-04781289.6"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>04781289.6</doc-number><date>20040813</date></document-id></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR919509734" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>QUALCOMM INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919504025" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>QUALCOMM INCORPORATED</last-name></addressbook></applicant><applicant mxw-id="PPAR919009829" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Qualcomm Incorporated</last-name><iid>100204376</iid><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121-1714</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919513698" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CHI WON-JOON</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919546390" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>Chi, Won-Joon</last-name></addressbook></inventor><inventor mxw-id="PPAR919006010" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Chi, Won-Joon</last-name><address><street>1247 Lakeside Drive, Apt.1023,</street><city>Sunnyvale, CA California 94085</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919510298" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SUN QINFANG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919514866" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SUN, QINFANG</last-name></addressbook></inventor><inventor mxw-id="PPAR919017182" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>SUN, QINFANG</last-name><address><street>10760 Minette Drive</street><city>Cupertino, CA California 95014</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919516556" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>GILBERT JEFFREY M</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919541352" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>GILBERT, JEFFREY, M.</last-name></addressbook></inventor><inventor mxw-id="PPAR919015725" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>GILBERT, JEFFREY, M.</last-name><address><street>825 E. Evelyn Ave., 215</street><city>Sunnyvale, CA California 94086</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919009186" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dunlop, Hugh Christopher</last-name><suffix>et al</suffix><iid>100028621</iid><address><street>R.G.C. Jenkins &amp; Co. 26 Caxton Street</street><city>London SW1H 0RJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549818858" load-source="docdb">AT</country><country mxw-id="DS549815961" load-source="docdb">BE</country><country mxw-id="DS549745012" load-source="docdb">BG</country><country mxw-id="DS549742744" load-source="docdb">CH</country><country mxw-id="DS549815966" load-source="docdb">CY</country><country mxw-id="DS549816777" load-source="docdb">CZ</country><country mxw-id="DS549814905" load-source="docdb">DE</country><country mxw-id="DS549815967" load-source="docdb">DK</country><country mxw-id="DS549815968" load-source="docdb">EE</country><country mxw-id="DS549908603" load-source="docdb">ES</country><country mxw-id="DS549745021" load-source="docdb">FI</country><country mxw-id="DS549745022" load-source="docdb">FR</country><country mxw-id="DS549814922" load-source="docdb">GB</country><country mxw-id="DS549815969" load-source="docdb">GR</country><country mxw-id="DS549816786" load-source="docdb">HU</country><country mxw-id="DS549742749" load-source="docdb">IE</country><country mxw-id="DS549745023" load-source="docdb">IT</country><country mxw-id="DS549815994" load-source="docdb">LI</country><country mxw-id="DS549818859" load-source="docdb">LU</country><country mxw-id="DS549745024" load-source="docdb">MC</country><country mxw-id="DS549745033" load-source="docdb">NL</country><country mxw-id="DS549745034" load-source="docdb">PL</country><country mxw-id="DS549908604" load-source="docdb">PT</country><country mxw-id="DS549814923" load-source="docdb">RO</country><country mxw-id="DS549745035" load-source="docdb">SE</country><country mxw-id="DS549744764" load-source="docdb">SI</country><country mxw-id="DS549742750" load-source="docdb">SK</country><country mxw-id="DS549815995" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673296" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A system and method are disclosed for transmitting data over a wireless channel. In some embodiments, transmitting data includes receiving convolutionally encoded data and enhancing the transmission of the data by further repetition encoding the data.
<img id="iaf01" file="imgaf001.tif" wi="165" he="36" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737447" lang="EN" source="EPO" load-source="docdb"><p>A system and method are disclosed for transmitting data over a wireless channel. In some embodiments, transmitting data includes receiving convolutionally encoded data and enhancing the transmission of the data by further repetition encoding the data.</p></abstract><description mxw-id="PDES63959284" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b><u>FIELD OF THE INVENTION</u></b></heading><p id="p0001" num="0001">The present invention relates generally to a data transmission scheme for a wireless communication system. More specifically, a repetition coding scheme for a wireless system is disclosed.</p><heading id="h0002"><b><u>BACKGROUND OF THE INVENTION</u></b></heading><p id="p0002" num="0002">The IEEE 802.11a, 802.11b, and 802.11g standards, which are hereby incorporated by reference, specify wireless communications systems in bands at 2.4GHz and 5 GHz. The combination of the 802.11a and 802.11g standards, written as the 802.11a/g standard, will be referred to repeatedly herein for the purpose of example. It should be noted that the techniques described are also applicable to the 802.11b standard where appropriate. It would be useful if alternate systems could be developed for communication over an extended range or in noisy environments. Such communication is collectively referred to herein as extended range communication. The IEEE 802.11a/g standard specifies a robust data encoding scheme that includes error correction. However, for extended range communication, a more robust data transmission scheme at reduced data rates is required.</p><heading id="h0003"><b><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></b></heading><p id="p0003" num="0003">The present invention will be readily understood by the following detailed description in conjunction with the accompanying drawings, wherein like reference numerals designate like structural elements, and in which:<!-- EPO <DP n="2"> -->
<ul><li><figref idrefs="f0001">Figure 1A</figref> is a diagram illustrating the data portion of a regular 802.11a/g OFDM packet.</li><li><figref idrefs="f0001">Figure 1B</figref> is a diagram illustrating the data portion of a modified 802.11a/g OFDM packet where each symbol is repeated twice (r=2).</li><li><figref idrefs="f0002">Figure 2A</figref> is a diagram illustrating a transmitter system with a repetition encoder placed after the output of an interleaver such as the one specified in the IEEE 802.11a/g specification.</li><li><figref idrefs="f0002">Figure 2B</figref> is a diagram illustrating a receiver system for receiving a signal transmitted by the transmitter system depicted in <figref idrefs="f0002">Figure 2A</figref>.</li><li><figref idrefs="f0003">Figure 3A</figref> is a diagram illustrating a transmitter system with a repetition encoder placed before the input of an interleaver designed to handle repetition coded bits such as the one described below</li><li><figref idrefs="f0003">Figure 3B</figref> is a diagram illustrating a receiver system for receiving a signal transmitted by the transmitter system depicted in <figref idrefs="f0003">Figure 3A</figref>.</li><li><figref idrefs="f0004 f0005">Figures 4A-4C</figref> are tables illustrating an interleaver.</li></ul></p><heading id="h0004"><b><u>DETAILED DESCRIPTION</u></b></heading><p id="p0004" num="0004">It should be appreciated that the present invention can be implemented in numerous ways, including as a process, an apparatus, a system, or a computer readable medium such as a computer readable storage medium or a computer network wherein program instructions are sent over optical or electronic communication links. It should be noted that the order of the steps of disclosed processes may be altered within the scope of the invention.<!-- EPO <DP n="3"> --></p><p id="p0005" num="0005">A detailed description of one or more preferred embodiments of the invention is provided below along with accompanying figures that illustrate by way of example the principles of the invention. While the invention is described in connection with such embodiments, it should be understood that the invention is not limited to any embodiment. On the contrary, the scope of the invention is limited only by the appended claims and the invention encompasses numerous alternatives, modifications and equivalents. For the purpose of example, numerous specific details are set forth in the following description in order to provide a thorough understanding of the present invention. The present invention may be practiced according to the claims without some or all of these specific details. For the purpose of clarity, technical material that is known in the technical fields related to the invention has not been described in detail so that the present invention is not unnecessarily obscured.</p><p id="p0006" num="0006">In a typical system as described below, bits representing a set of data that is to be communicated are convolutionally encoded or otherwise transformed into values. Various types of modulation may be used such as BPSK, QPSK, 16QAM or 32QAM. In the case of BPSK, which is described further herein, each BPSK symbol may have one of two values and each BPSK symbol corresponds to one bit. An OFDM symbol includes 48 values that are transmitted on different subchannels. To provide extended range, each value that is sent is repeated several times by the transmitter. In one embodiment, the bits are convolutionally encoded using the same encoding scheme as the encoding scheme specified for the IEEE 802.11a/g standard. Each encoded value is repeated and transmitted. Preferably, the values are repeated in the frequency domain, but the values may also be repeated in the time domain. In some embodiments, the repetition coding is implemented before interleaving and a specially designed interleaver is used to handle repeated values. In addition, a pseudorandom<!-- EPO <DP n="4"> --> code may be superimposed on the OFDM symbols to lower the peak to average ratio of the transmitted signal.</p><p id="p0007" num="0007">The receiver combines each of the signals that correspond to the repetition coded values and then uses the combined signal to recover the values. In embodiments where the values are combined in the frequency domain, the signals are combined coherently with correction made for different subchannel transfer functions and phase shift errors. For the purpose of this description and the claims, "coherently" combining should not be interpreted to mean that the signals are perfectly coherently combined, but only that some phase correction is implemented. The signals from different subchannels are weighted according to the quality of each subchannel. A combined subchannel weighting is provided to a Viterbi detector to facilitate the determination of the most likely transmitted sequence.</p><p id="p0008" num="0008">Using the modulation and encoding scheme incorporated in the IEEE 802.11a/g standard, the required signal to noise ratio decreases linearly with data rate assuming the same modulation technique and base code rate are not changed and repetition coding is used. Some further gains could be achieved through the use of a better code or outer code. However, in a dual mode system that is capable of implementing both the IEEE 802.11a/g standard and an extended range mode, the complexity introduced by those techniques may not be worth the limited gains that could be achieved. Implementing repetition of values is in comparison simpler and more efficient in many cases.</p><p id="p0009" num="0009">The repetition code can be implemented either in the time domain or in the frequency domain. For time domain repetition, the OFDM symbols in the time domain (after the IFFT operation) are repeated a desired number of times, depending<!-- EPO <DP n="5"> --> on the data rate. This scheme has an advantage in efficiency since just one guard interval is required for <i>r</i>-repeated OFDM symbols in the time domain.</p><p id="p0010" num="0010"><figref idrefs="f0001">Figure 1A</figref> is a diagram illustrating the data portion of a regular 802.11a/g OFDM packet. Each OFDM symbol 102 is separated by a guard band 104. <figref idrefs="f0001">Figure 1B</figref> is a diagram illustrating the data portion of a modified 802.11a/g OFDM packet where each symbol is repeated twice (r=2). Each set of repeated symbols 112 is separated by a single guard band 104. There is no need for a guard band between the repeated symbols.</p><p id="p0011" num="0011">The OFDM symbols can also be repeated in the frequency domain (before the IFFT). The disadvantage of this scheme is that one guard interval has to be inserted between every OFDM symbol in the time-domain since the OFDM symbols with frequency-domain repetition are not periodic. However, repetition in the frequency domain can achieve better multipath performance if the repetition pattern is configured in the frequency-domain to achieve frequency diversity.</p><p id="p0012" num="0012">In a typical environment where signals are reflected one or more times between the transmitter and the receiver, it is possible that certain reflections and direct signals will tend to cancel out at the receiver because the phase difference between the paths could be close to 180 degrees. For different frequencies, the phase difference between the paths will be different and so spreading the repeated values among different frequencies to achieve frequency diversity ensures that at least some of the values will arrive at the receiver with sufficient signal strength to be combined and read. To maximize the benefit of frequency diversity, it is preferable to repeat values across subchannels that are as widely spaced as is practicable, since the phase difference between adjacent subchannels is small.<!-- EPO <DP n="6"> --></p><p id="p0013" num="0013"><figref idrefs="f0002">Figure 2A</figref> is a diagram illustrating a transmitter system with a repetition encoder placed after the output of an interleaver such as the one specified in the IEEE 802.11a/g specification. In this example system, BPSK modulation is implemented and the repetition encoder and the interleaver are described as operating on bits, which is equivalent to operating on the corresponding values. In other embodiments, other modulation schemes may be used and values may be repeated and interleaved. The interleaver is included in the IEEE 802.11a/g transmitter specification for the purpose of changing the order of the bits sent to remove correlation among consecutive bits introduced by the convolutional encoder. Incoming data is convolutionally encoded by convolutional encoder 202. The output of convolutional encoder 202 is interleaved by IEEE 802.11a/g interleaver 204. Repetition encoder 206 repeats the bits and pseudorandom mask combiner 208 combines the output of repetition encoder 206 with a pseudorandom mask for the purpose of reducing the peak to average ratio of the signal, as is described below. The signal is then processed by IFFT processor 210 before being transmitted.</p><p id="p0014" num="0014"><figref idrefs="f0002">Figure 2B</figref> is a diagram illustrating a receiver system for receiving a signal transmitted by the transmitter system depicted in <figref idrefs="f0002">Figure 2A</figref>. The received signal is processed by FFT processor 220. The output of FFT processor 220 is input to mask remover 218 which removes the pseudorandom mask. Data combiner 216 combines the repetition encoded data into a stream of nonrepetitive data. The operation of data combiner 216 is described in further detail below. IEEE 802.11a/g deinterleaver 214 deinterleaves the data and Viterbi decoder 212 determines the most likely sequence of data that was input to the transmission system originally.</p><p id="p0015" num="0015">The system depicted in <figref idrefs="f0002">Figures 2A and 2B</figref> can use the same interleaver and deinterleaver as the regular 802.11a/g system, and also has flexibility in designing the<!-- EPO <DP n="7"> --> repetition pattern since the repetition coder is placed right before the IFFT block. However, it has certain disadvantages. Data padding is required at the transmitter and data buffering is required at the receiver. Bits have to be padded according to the number of bytes to be sent and the data rate. The number of padded bits is determined by how many bits one OFDM symbol can carry. Since the 802.11a/g interleaver works with 48 coded bits for BPSK modulation, bits need to be padded to make the number of coded bits a multiple of 48. Since the repetition coder is placed after the interleaver, it may be necessary to pad the data by adding unnecessary bits for lower data rates than 6Mbps.</p><p id="p0016" num="0016">For example, one OFDM symbol would carry exactly 1 uncoded repeated bit at a data rate of 1/4Mbps. Since the OFDM symbol could be generated from that one bit, there would never be a need to add extra uncoded bits and so padding would not be necessary in principle. However, due to the special structure of the 802.11a/g interleaver, several bits would need to be padded to make the number of coded bits a multiple of 48 before the interleaver. The padded bits convey no information and add to the overhead of the transmission, making it more inefficient.</p><p id="p0017" num="0017">On the other hand, if the repetition encoder is placed after the interleaver, the repetition coded bits generated from the 48 interleaved bits are distributed over multiple OFDM symbols. Therefore, the receiver would need to process the multiple OFDM symbols before deinterleaving the data could be performed. Therefore, additional buffers would be necessary to store frequency-domain data.</p><p id="p0018" num="0018">The system can be improved and the need for data padding at the transmitter and data buffering at the receiver can be eliminated by redesigning the interleaver so that it operates on bits output from the repetition encoder.<!-- EPO <DP n="8"> --></p><p id="p0019" num="0019"><figref idrefs="f0003">Figure 3A</figref> is a diagram illustrating a transmitter system with a repetition encoder placed before the input of an interleaver designed to handle repetition coded bits such as the one described below. Incoming data is convolutionally encoded by convolutional encoder 302. The output of convolutional encoder 302 is repetition coded by repetition encoder 304. Interleaver 306 interleaves the repetition coded bits. Interleaver 306 is designed so that data padding is not required and so that for lower repetition levels, the bits are interleaved so as to separate repeated bits. Pseudorandom mask combiner 308 combines the output of Interleaver 306 with a pseudorandom mask for the purpose of reducing the peak to average ratio of the signal, as is described below. The signal is then processed by IFFT processor 310 before being transmitted.</p><p id="p0020" num="0020"><figref idrefs="f0003">Figure 3B</figref> is a diagram illustrating a receiver system for receiving a signal transmitted by the transmitter system depicted in <figref idrefs="f0003">Figure 3A</figref>. The received signal is processed by FFT processor 320. The output of FFT processor 320 is input to mask remover 318 which removes the pseudorandom mask. Deinterleaver 316 deinterleaves the data. Data combiner 314 combines the repetition encoded data into a stream of nonrepetitive data. The operation of data combiner 314 is described in further detail below. Viterbi decoder 312 determines the most likely sequence of data that was input to the transmission system originally.</p><p id="p0021" num="0021">Interleaver 306 is preferably designed such that the same (repeated) data are transmitted well separated in the frequency domain to achieve full frequency diversity. For example, a repetition pattern in the frequency domain for in 1 Mbps mode in one embodiment would repeat each bit 6 times. Denoting data in the frequency domain as <i>d</i><sub>1</sub>,<i>d</i><sub>2</sub>,···,<i>d</i><sub>8</sub>, the repeated sequence of data is given by:<br/>
<!-- EPO <DP n="9"> --><i>d</i><sub>1</sub> <i>d</i><sub>1</sub> <i>d</i><sub>1</sub> <i>d</i><sub>1</sub> <i>d</i><sub>1</sub> <i>d</i><sub>1</sub> <i>d</i><sub>2</sub> <i>d</i><sub>2</sub> <i>d</i><sub>2</sub> <i>d</i><sub>2</sub> <i>d</i><sub>2</sub> <i>d</i><sub>2</sub> ··· <i>d</i><sub>8</sub> <i>d</i><sub>8</sub> <i>d</i><sub>8</sub> <i>d</i><sub>8</sub> <i>d</i><sub>8</sub> <i>d</i><sub>8</sub></p><p id="p0022" num="0022">The same data are placed in a group fashion because it is easy to combine those data at the receiver. Note that the repeated data can be combined only after <i>r</i>(6 in this example) data are available.</p><p id="p0023" num="0023">The repetition pattern in the above example does not provide the greatest possible frequency diversity since the spacing between the same data transmitted on adjacent subchannels may not be large enough and the subchannels corresponding to the same data are not completely independent Greater frequency diversity would be desirable especially for multipath channels with large delay spreads. Interleaver 306, therefore, is designed to spread the repeated data in the frequency domain to achieve frequency diversity as much as is practical.</p><p id="p0024" num="0024">In one embodiment, the interleaver is designed to optimize the frequency diversity provided by the interleaver for data rates faster than 1Mbps (repetition number &lt;=6). For lower data rates ½ and ¼ Mbps, there is enough repetition that sufficient subchannels are covered to provide frequency diversity even if adjacent subchannels are used. In the preferred interleaver described below, repeated bits are separated at least by 8 subchannels and consecutive coded bits from the convolutional encoder are separated at least by 3 subchannels . The interleaver is designed according to the following steps:
<ol><li>1. A 6x8 table is generated as shown in <figref idrefs="f0004">Figure 4A</figref> to satisfy the first rule which specifies that bits are separated at least by 8 subchannels.</li><li>2. As shown in <figref idrefs="f0005">Figure 4B</figref>, the columns are swapped to meet the second rule which specifies that consecutive coded bits are separated at least by 3 subchannels.<!-- EPO <DP n="10"> --></li><li>3. As shown in <figref idrefs="f0005">Figure 4C</figref>, separation between repeated bits is increased by swapping rows. In the example shown, repeated bits are separated by at least 16 bins for 3Mbps (Repetition number=2 for 3 Mbps so each bit is repeated once.)</li></ol></p><p id="p0025" num="0025">For the example interleaver shown, if the input to the interleaver is {1,2,3,...,48}, then the output would be: {1, 19, 37, 7, 25, 43, 13, 31, 4, 22, 40, 10, 28, 46, 16, 34, 2, 20, 38, 8, 26, 44, 14, 32, 5, 23, 41, 11, 29, 47, 17, 35, 3, 21, 39, 9, 27, 45, 15, 33, 6, 24, 42, 12, 30, 48, 18, 36}.</p><p id="p0026" num="0026">Repetition of the values in the frequency domain tends to generate a peak in the time domain, especially for very low data rates (i.e., for large repetition numbers). The large peak-to-average ratio (PAR) causes problems for the system, especially the transmit power amplifier. This problem can be ameliorated by scrambling or masking the values transmitted on different frequencies so that they are not all the same. As long as the masking scheme is known, the scrambling can be undone at the receiver. In one embodiment, the frequency-domain data is multiplied by the long symbol of 802.11a/g, which was carefully designed in terms of PAR. As can be seen in <figref idrefs="f0002">Figure 2</figref>, the mask operation is performed right before the IFFT operation. In general, any masking sequence can be used that causes repeated values to differ enough that the PAR is suitably reduced. For example, a pseudorandom code is used in some embodiments.</p><p id="p0027" num="0027">At the receiver, decoding includes: (1) mask removal, (2) deinterleaving, (3) data combining, (4) channel correction, (5) Viterbi decoding. It should be noted that in some embodiments, the order of the steps may be changed as is appropriate.</p><p id="p0028" num="0028">In embodiments using frequency repetition, the transmitter preferably masks the frequency-domain signal to reduce the peak-to-average ratio (PAR) in the time-domain. The receiver removes the mask imposed by the transmitter. If, as in the<!-- EPO <DP n="11"> --> example above, the mask used by the transmitter consists of +/- 1s, then the mask is removed by changing the signs of the FFT outputs in the receiver. After the mask is removed, the data is deinterleaved according to the interleaving pattern at the transmitter.</p><p id="p0029" num="0029">The repeated signal is combined in the frequency domain at the receiver to increase the SNR of the repeated signal over the SNR had the signal not been repeated. The SNR is increased by multiplying the complex conjugate of the channel response as follows. <maths id="math0001" num=""><math display="block"><msub><mi>Y</mi><mi>c</mi></msub><mo>=</mo><mstyle displaystyle="false"><mstyle displaystyle="true"><munder><mo>∑</mo><mrow><mi>j</mi><mo>∈</mo><msub><mi>S</mi><mi>c</mi></msub></mrow></munder></mstyle><msubsup><mi>H</mi><mi>j</mi><mo>*</mo></msubsup><mo>⁢</mo><msub><mi>Y</mi><mi>j</mi></msub></mstyle></math><img id="ib0001" file="imgb0001.tif" wi="34" he="14" img-content="math" img-format="tif"/></maths> <maths id="math0002" num=""><math display="block"><msub><mi>H</mi><mi>c</mi></msub><mo>=</mo><mstyle displaystyle="false"><mstyle displaystyle="true"><munder><mo>∑</mo><mrow><mi>j</mi><mo>∈</mo><msub><mi>S</mi><mi>c</mi></msub></mrow></munder></mstyle><msup><mfenced open="|" close="|"><msub><mi>H</mi><mi>j</mi></msub></mfenced><mn>2</mn></msup></mstyle></math><img id="ib0002" file="imgb0002.tif" wi="34" he="18" img-content="math" img-format="tif"/></maths> where <i>Y<sub>j</sub></i> is the signal in subchannel j, <i>H<sub>j</sub></i> is the response of subchannel j, <i>Y<sub>c</sub></i> is the combined signal, <i>H<sub>c</sub></i> is the combined channel and <i>S<sub>c</sub></i> is the set of indices corresponding to the frequency subchannels that contain the same data.</p><p id="p0030" num="0030">The channel effect is preferably removed before the data is input to the Viterbi decoder so that the Viterbi decoder is able to use the same soft decision unit regardless of the actual channel response. In the extended-range mode, the combined channel is used in the channel correction unit.</p><p id="p0031" num="0031">The frequency-domain signals are weighted for calculating the path-metrics in the soft-decision Viterbi decoder, and the optimal weights are determined by the corresponding SNR.</p><p id="p0032" num="0032">The resulting SNR for the combined signal becomes:<!-- EPO <DP n="12"> --> <maths id="math0003" num=""><math display="block"><mi mathvariant="italic">SNR</mi><mo>=</mo><mstyle displaystyle="false"><mstyle displaystyle="true"><munder><mo>∑</mo><mrow><mi>j</mi><mo>∈</mo><msub><mi>S</mi><mi>c</mi></msub></mrow></munder></mstyle><msup><mfenced open="|" close="|"><msub><mi>H</mi><mi>j</mi></msub></mfenced><mn>2</mn></msup><mo>⁢</mo><mfrac><msub><mi>E</mi><mi>x</mi></msub><msubsup><mi>σ</mi><mi>j</mi><mn>2</mn></msubsup></mfrac></mstyle></math><img id="ib0003" file="imgb0003.tif" wi="40" he="19" img-content="math" img-format="tif"/></maths> where <i>E<sub>x</sub></i> is the signal power, and <maths id="math0004" num=""><math display="inline"><msubsup><mi>σ</mi><mi>j</mi><mn>2</mn></msubsup></math><img id="ib0004" file="imgb0004.tif" wi="7" he="8" img-content="math" img-format="tif" inline="yes"/></maths> is the noise power for the subchannel <i>j</i>. The combined SNR is used to evaluate the Viterbi weights.</p><p id="p0033" num="0033">The 802.11a/g standard specifies that there are four pilot signals included in each OFDM symbol for the purpose of estimating timing offset and frequency offset and tracking phase noise in 802.11a/g signals. The 802.11a/g system assumes that these 4 pilots are reliable enough to estimate the phase information. That assumption may not be true for a system with a very low SNR. The redundancy that exists in the frequency-domain signal is exploited to help the pilots to estimate and track phase.</p><p id="p0034" num="0034">The phase information is estimated from the frequency domain data as follows:
<ol><li>1. The repeated signals are combined in the frequency domain to increase the SNR, with a channel estimate determined from a preamble sequence of long symbols and an estimated slope, which captures the effect of timing offset.</li><li>2. Hard decisions are made for each of the combined signals after removing the phase offset estimated from the previous symbol.</li><li>3. The combined signals are multiplied by their own hard decisions. The average of the hard-decision corrected signal is used to evaluate an angle to estimate the phase offset for the current symbol.</li></ol></p><p id="p0035" num="0035">A filter is applied to the estimated phase offset to reduce the effect of noise. In one embodiment, a nonlinear median filter is used. The nonlinear median filter<!-- EPO <DP n="13"> --> effectively detects and corrects an abrupt change in the phase offset, which could be caused by hard decision errors.</p><p id="p0036" num="0036">An encoding and decoding scheme for a wireless system has been disclosed. Preferably, repetition coding in the frequency domain is used. An interleaver that provides frequency diversity has been described. In various embodiments, the described techniques may be combined or used separately according to specific system requirements.</p><p id="p0037" num="0037">Although the foregoing invention has been described in some detail for purposes of clarity of understanding, it will be apparent that certain changes and modifications may be practiced within the scope of the appended claims. It should be noted that there are many alternative ways of implementing both the process and apparatus of the present invention. Accordingly, the present embodiments arc to be considered as illustrative and not restrictive, and the invention is not to be limited to the details given herein, but may be modified within the scope and equivalents of the appended claims.<!-- EPO <DP n="14"> --></p><heading id="h0005"><u>Alternative Embodiments</u></heading><p id="p0038" num="0038">Alternative embodiments are set out in the following clauses:
<ol><li>1. A method of transmitting data over a wireless channel comprising:
<ul><li>receiving convolutionally encoded data;</li><li>and enhancing the transmission of the data by further repetition encoding the data.</li></ul></li><li>2. A method of transmitting data over a wireless channel as recited in clause 1 wherein the data is repeated in the frequency domain.</li><li>3. A method of transmitting data over a wireless channel as recited in clause 1 wherein the data is repeated in the time domain.</li><li>4. A method of transmitting data over a wireless channel as recited in clause 2 further including masking the data to reduce its peak to average ratio.</li><li>5. A method of transmitting data over a wireless channel as recited in clause 1 further including masking the data by applying a pseudorandom sequence.</li><li>6. A method of transmitting data over a wireless channel as recited in clause 1 wherein the data is encoded using an IEEE 802. 11 a/g encoder.</li><li>7. A method of transmitting data over a wireless channel as recited in clause 1 wherein the data is interleaved after repetition encoding whereby a need to pad the data prior to interleaving is reduced.</li><li>8. A method of receiving data over a wireless channel comprising:
<ul><li>receiving convolutionally encoded and repetition encoded data;</li><li>combining the repetition encoded data to produce combined data; and decoding the combined data.</li></ul></li><li>9. A method of receiving data over a wireless channel as recited in clause 8 wherein the combined data is decoded using a Viterbi decoder.<!-- EPO <DP n="15"> --></li><li>10. A method of receiving data over a wireless channel as recited in clause 8 wherein the repetition encoded data is repeated in the time domain.</li><li>11. A method of receiving data over a wireless channel as recited in clause 8 wherein the repetition encoded data is repeated in the frequency domain.</li><li>12. A method of receiving data over a wireless channel as recited in clause 8 wherein the received data is further encoded by a pseudorandom mask, further including removing the pseudorandom mask.</li><li>13. A method of receiving data over a wireless channel as recited in clause 8 wherein the convolutional encoding conforms to the IEEE 802.1 1a/g standard convolutional encoding.</li><li>14. A method of receiving data over a wireless channel as recited in clause 8 further including deinterleaving the data before combining the data.</li><li>15. A method of receiving data over a wireless channel as recited in clause 8 wherein the repetition encoded data is repeated in the frequency domain on subchannels, and wherein combining the repetition encoded data to produce combined data includes compensating for the effect of each subchannel.</li><li>16. A method of receiving data over a wireless channel as recited in clause 8 wherein the repetition encoded data is repeated in the frequency domain on subchannels and wherein combining the repetition encoded data to produce combined data includes weighting data received on different subchannels according to the quality of the subchannels.</li><li>17. A method of receiving data over a wireless channel as recited in clause 8 wherein the repetition encoded data is repeated in the frequency domain on subchannels and wherein an aggregate channel quality estimation is made for bits included in the combined data and wherein the aggregate channel quality estimation is used by the Viterbi to determine a maximum likely transmitted data sequence.</li><li>18. A method of receiving data over a wireless channel as recited in clause 8 further including estimating a phase offset using the received repetition encoded data.<!-- EPO <DP n="16"> --></li><li>19. A method of receiving data over a wireless channel as recited in clause 8 further including estimating a phase offset using the received repetition encoded data by making a hard decision and determining a hard decision corrected signal.</li><li>20. A method of receiving data over a wireless channel as recited in clause 8 further including: estimating a phase offset using the received repetition encoded data by making a hard decision and determining a hard decision corrected signals; and filtering the estimated phase offset using a median filter.</li><li>21. A system for encoding data for transmission over a wireless channel comprising:
<ul><li>a convolutional encoder configured to convolutionally encode data; and</li><li>a repetition encoder configured to enhance the transmission of the convolutionally encoded data by further repetition encoding the data.</li></ul></li><li>22. A system for encoding data as recited in clause 21 further including an interleaver.</li><li>23. A system for encoding data as recited in clause 21 further including a masking processor configured to superimpose a pseudorandom mask on the repetition coded data.</li><li>24. A system for receiving data over a wireless channel comprising:
<ul><li>a receiver configured to receive convolutionally encoded and repetition encoded data;</li><li>a data combiner configured to combine the repetition encoded data to produce</li><li>combined data; and</li></ul>
a decoder configured to decode the combined data.</li><li>25. A system for receiving data as recited in clause 24 further including a deinterleaver configured to deinterleave the combined data.</li><li>26. A system for receiving data as recited in clause 24 wherein the decoder is a Viterbi decoder.</li><li>27. A system for receiving data as recited in clause 24 further including a mask remover. A system for receiving data as recited in clause 24 further including a phase offset processor configured to determine a phase offset by making a hard decision and determining a hard decision corrected signals.</li></ol></p></description><claims mxw-id="PCLM56982317" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-0001" num="0001"><claim-text>A method of communicating data over a wireless channel, the method comprising:
<claim-text>a transmitting technique comprising:
<claim-text>convolutionally encoding data;</claim-text>
<claim-text>repetition encoding the convolutionally encoded data by repeating each value of the convolutionally encoded data 'r' times, thereby providing repetition encoded data that includes 'r' consecutive instances of each value of the convolutionally encoded data;</claim-text>
<claim-text>masking the repetition encoded data using a pseudorandom sequence;</claim-text>
<claim-text>processing the masked data to transform frequency domain information into first time domain information; and</claim-text>
<claim-text>transmitting the first time domain information over the wireless channel;</claim-text>
and</claim-text>
<claim-text>a receiving technique comprising:
<claim-text>receiving second time domain information via the wireless channel;</claim-text>
<claim-text>processing the received second time domain informationand generating masked, convolutionally and repetition encoded data therefrom;</claim-text>
<claim-text>unmasking the masked, convolutionally and repetition encoded data using the pseudorandom sequence;</claim-text>
<claim-text>combining the unmasked, convolutionally and repetition encoded data to generate combined data, wherein combining is performed in a frequency domain; and</claim-text>
<claim-text>decoding the combined data.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of Claim 1, wherein the masking reduces a peak to average ratio.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of Claim 1, further including interleaving the repetition encoded data.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of Claim 1, further including deinterleaving the unmasked,<!-- EPO <DP n="18"> --> convolutionally and repetition encoded data before the combining.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of Claim 1, wherein the repetition encoded data is repeated in the frequency domain on subchannels, and wherein the combining includes compensating for a channel response of each of the subchannels.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of Claim 1, wherein the repetition encoded data is repeated in the frequency domain on subchannels, and wherein the combining includes weighting data received on the subchannels according to a quality of the subchannels.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of Claim 1, further including estimating an aggregate channel quality for bits included in the combined data, wherein the decoding uses the aggregate channel quality to determine a maximum likely transmitted data sequence.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of Claim 1, wherein the combining includes estimating a phase offset using the unmasked, convolutionally and repetition encoded data.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of Claim 1, wherein the combining includes estimating phase offsets using the unmasked, convolutionally and repetition encoded data and determining hard decision corrected signals therefrom.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of Claim 1, wherein the combining includes determining estimated phase offsets using the unmasked, convolutionally and repetition encoded data, making hard decisions for each signal of the combined data based on the estimated phase offsets, and filtering the estimated phase offsets to reduce noise.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method of Claim 1, wherein the combining includes:
<claim-text>obtaining a first set of data associated with a first subchannel;</claim-text>
<claim-text>obtaining a second set of data associated with a second subchannel;</claim-text>
<claim-text>determining a first weight based at least in part on a first measure of quality associated with the first subchannel;<!-- EPO <DP n="19"> --></claim-text>
<claim-text>determining a second weight based at least in part on a second measure of quality associated with the second subchannel; and</claim-text>
<claim-text>combining the first set of data and the second set of data based at least in part on the first weight and the second weight.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of Claim 1, wherein a sequence of convolutionally encoded data values d1 and d2 is repetition encoded to create repetition encoded data that includes d1 consecutively repeated 'r' times followed by d2 consecutively repeated 'r' times.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method of Claim 1, wherein each value of the convolutionally encoded data consists of a single data bit.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A system for communicating data over a wireless channel, the system comprising:
<claim-text>a transmitter portion comprising:
<claim-text>a convolutional encoder configured to convolutionally encode data;</claim-text>
<claim-text>a repetition encoder configured to repetition encode the convolutionally encoded data by repeating each value of the convolutionally encoded data 'r' times, thereby providing repetition encoded data that includes 'r' consecutive instances of each value of the convolutionally encoded data;</claim-text>
<claim-text>a masker configured to mask the repetition encoded data using a pseudorandom sequence;</claim-text>
<claim-text>an Inverse Fast Fourier Transform (IFFT) configured to process the masked data and generate first time domain information therefrom; and</claim-text>
<claim-text>a transmission means configured to transmit the first time domain information over the wireless channel; and</claim-text></claim-text>
<claim-text>a receiver portion comprising:
<claim-text>a receiving means configured to receive second time domain information over the wireless channel;<!-- EPO <DP n="20"> --></claim-text>
<claim-text>a Fast Fourier Transform (FFT) configured to process the received second time domain information and generate masked, convolutionally encoded, and repetition encoded data therefrom;</claim-text>
<claim-text>an unmasker configured to unmask the masked, convolutionally encoded, and repetition encoded data using the pseudorandom sequence;</claim-text>
<claim-text>a data combiner configured to combine the unmasked, convolutionally encoded, and repetition encoded data to generate combined data, wherein combining is performed in a frequency domain after processing by the FFT and the unmasker; and</claim-text>
<claim-text>a decoder configured to decode the combined data.</claim-text></claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The system of Claim 14, wherein the masker includes a masking processor that superimposes a pseudorandom mask on the repetition coded data.</claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The system of Claim 14, wherein the decoder includes a Viterbi decoder.</claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>A computer program product for communicating data over a wireless channel, the computer program product being embodied in a non-transitory computer readable storage medium and comprising computer instructions for:
<claim-text>providing a transmitting technique comprising:
<claim-text>convolutionally encoding data;</claim-text>
<claim-text>repetition encoding the convolutionally encoded databy repeating each value of the convolutionally encoded data 'r' times, thereby providing repetition encoded data that includes 'r' consecutive instances of each value of the convolutionally encoded data;</claim-text>
<claim-text>masking the repetition encoded data using a pseudorandom sequence;</claim-text>
<claim-text>processing the masked data to transform frequency domain information into first time domain information; and</claim-text>
<claim-text>transmitting the first time domain information over the wireless channel;</claim-text>
and<!-- EPO <DP n="21"> --></claim-text>
<claim-text>providing a receiving technique comprising:
<claim-text>receiving second time domain information via the wireless channel;</claim-text>
<claim-text>processing the received second time domain information and generating masked, convolutionally and repetition encoded data therefrom;</claim-text>
<claim-text>unmasking the masked, convolutionally and repetition encoded data using the pseudorandom sequence;</claim-text>
<claim-text>combining the unmasked, convolutionally and repetition encoded data to generate combined data, wherein combining is performed in a frequency domain; and</claim-text>
<claim-text>decoding the combined data.</claim-text></claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670698" load-source="patent-office"><!-- EPO <DP n="22"> --><figure id="f0001" num="1A,1B"><img id="if0001" file="imgf0001.tif" wi="139" he="148" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0002" num="2A,2B"><img id="if0002" file="imgf0002.tif" wi="134" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0003" num="3A,3B"><img id="if0003" file="imgf0003.tif" wi="134" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0004" num="4A"><img id="if0004" file="imgf0004.tif" wi="157" he="125" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0005" num="4B,4C"><img id="if0005" file="imgf0005.tif" wi="120" he="167" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="163" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
