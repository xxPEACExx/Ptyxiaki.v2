<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682939-A1" country="EP" doc-number="2682939" kind="A1" date="20140108" family-id="48698926" file-reference-id="318320" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146584813" ucid="EP-2682939-A1"><document-id><country>EP</country><doc-number>2682939</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13173504-A" is-representative="YES"><document-id mxw-id="PAPP154847005" load-source="docdb" format="epo"><country>EP</country><doc-number>13173504</doc-number><kind>A</kind><date>20130625</date><lang>EN</lang></document-id><document-id mxw-id="PAPP229045915" load-source="docdb" format="original"><country>EP</country><doc-number>13173504.5</doc-number><date>20130625</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140547893" ucid="JP-2012142892-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012142892</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1824866248" load-source="docdb">G10H   7/04        20060101ALI20170405BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1824866249" load-source="docdb">G10H   7/02        20060101ALN20170405BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1824866250" load-source="docdb">G10H   7/00        20060101AFI20170405BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2077478545" load-source="docdb" scheme="CPC">G10H   1/02        20130101 LI20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077482113" load-source="docdb" scheme="CPC">G10H   7/00        20130101 FI20150407BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077485005" load-source="docdb" scheme="CPC">G10H   7/02        20130101 LA20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077485332" load-source="docdb" scheme="CPC">G10H   7/008       20130101 LI20150408BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359072" lang="DE" load-source="patent-office">Automatische Leistungstechnik durch Verwenden von Audio-Wellenformdaten</invention-title><invention-title mxw-id="PT132359073" lang="EN" load-source="patent-office">Automatic performance technique using audio waveform data</invention-title><invention-title mxw-id="PT132359074" lang="FR" load-source="patent-office">Technique de performance automatique à l'aide de données de forme d'onde audio</invention-title><citations><patent-citations><patcit mxw-id="PCIT417578101" load-source="docdb" ucid="JP-2001312277-A"><document-id format="epo"><country>JP</country><doc-number>2001312277</doc-number><kind>A</kind><date>20011109</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT417578264" load-source="docdb" ucid="JP-H10268866-A"><document-id format="epo"><country>JP</country><doc-number>H10268866</doc-number><kind>A</kind><date>19981009</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>MIKE SENIOR: "Roland SP555 Sampling Workstation", 1 February 2008 (2008-02-01), Internet, XP055090430, Retrieved from the Internet &lt;URL:http://www.soundonsound.com/sos/feb08/articles/rolandsp555.htm&gt; [retrieved on 20131127]</text><sources><source mxw-id="PNPL71072059" load-source="docdb" name="SEA" category="XI"/></sources></nplcit><nplcit><text>PAUL NAGLE: "Korg Microsampler", SOUND ON SOUND, 1 December 2009 (2009-12-01), Internet, XP055090487, Retrieved from the Internet &lt;URL:http://www.soundonsound.com/sos/dec09/articles/korgmicrosampler.htm&gt; [retrieved on 20131127]</text><sources><source mxw-id="PNPL71072060" load-source="docdb" name="SEA" category="XI"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919509510" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>YAMAHA CORP</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919520632" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>YAMAHA CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR919018079" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>YAMAHA CORPORATION</last-name><iid>100257220</iid><address><street>10-1, Nakazawa-cho</street><city>Hamamatsu-shi, Shizuoka 430-8650</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919511028" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>UEMURA NORIHIRO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919522572" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>UEMURA, NORIHIRO</last-name></addressbook></inventor><inventor mxw-id="PPAR919018645" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>UEMURA, NORIHIRO</last-name><address><street>Yamaha Corporation 10-1, Nakazawa-cho</street><city>Hamamatsu-shi, Shizuoka 430-8650</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919529335" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MIZUHIKI TAKASHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919523373" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MIZUHIKI, TAKASHI</last-name></addressbook></inventor><inventor mxw-id="PPAR919014469" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MIZUHIKI, TAKASHI</last-name><address><street>Yamaha Corporation 10-1, Nakazawa-cho</street><city>Hamamatsu-shi, Shizuoka 430-8650</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919533478" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>YAMAMOTO KAZUHIKO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919538295" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>YAMAMOTO, KAZUHIKO</last-name></addressbook></inventor><inventor mxw-id="PPAR919012224" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>YAMAMOTO, KAZUHIKO</last-name><address><street>Yamaha Corporation 10-1, Nakazawa-cho</street><city>Hamamatsu-shi, Shizuoka 430-8650</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919543692" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>MATSUSHITA ATSUHIKO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919530467" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>MATSUSHITA, ATSUHIKO</last-name></addressbook></inventor><inventor mxw-id="PPAR919007218" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>MATSUSHITA, ATSUHIKO</last-name><address><street>Systec Corporation 1-9-9 Shinmiyakoda</street><city>Hamamatsu-shi, Shizuoka 431-2103</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919006201" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Ettmayr, Andreas</last-name><suffix>et al</suffix><iid>100764567</iid><address><street>KEHL, ASCHERL, LIEBHOFF &amp; ETTMAYR Patentanwälte - Partnerschaft Emil-Riedel-Strasse 18</street><city>80538 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549737442" load-source="docdb">AL</country><country mxw-id="DS549739681" load-source="docdb">AT</country><country mxw-id="DS549737444" load-source="docdb">BE</country><country mxw-id="DS549739797" load-source="docdb">BG</country><country mxw-id="DS549737067" load-source="docdb">CH</country><country mxw-id="DS549738814" load-source="docdb">CY</country><country mxw-id="DS549739682" load-source="docdb">CZ</country><country mxw-id="DS549737445" load-source="docdb">DE</country><country mxw-id="DS549738815" load-source="docdb">DK</country><country mxw-id="DS549738816" load-source="docdb">EE</country><country mxw-id="DS549907094" load-source="docdb">ES</country><country mxw-id="DS549739798" load-source="docdb">FI</country><country mxw-id="DS549739799" load-source="docdb">FR</country><country mxw-id="DS549737446" load-source="docdb">GB</country><country mxw-id="DS549738817" load-source="docdb">GR</country><country mxw-id="DS549737447" load-source="docdb">HR</country><country mxw-id="DS549739683" load-source="docdb">HU</country><country mxw-id="DS549737068" load-source="docdb">IE</country><country mxw-id="DS549737448" load-source="docdb">IS</country><country mxw-id="DS549739800" load-source="docdb">IT</country><country mxw-id="DS549738818" load-source="docdb">LI</country><country mxw-id="DS549738990" load-source="docdb">LT</country><country mxw-id="DS549739684" load-source="docdb">LU</country><country mxw-id="DS549738991" load-source="docdb">LV</country><country mxw-id="DS549738992" load-source="docdb">MC</country><country mxw-id="DS549737765" load-source="docdb">MK</country><country mxw-id="DS549737766" load-source="docdb">MT</country><country mxw-id="DS549739685" load-source="docdb">NL</country><country mxw-id="DS549907095" load-source="docdb">NO</country><country mxw-id="DS549737069" load-source="docdb">PL</country><country mxw-id="DS549738994" load-source="docdb">PT</country><country mxw-id="DS549739686" load-source="docdb">RO</country><country mxw-id="DS549738995" load-source="docdb">RS</country><country mxw-id="DS549737070" load-source="docdb">SE</country><country mxw-id="DS549738996" load-source="docdb">SI</country><country mxw-id="DS549907096" load-source="docdb">SK</country><country mxw-id="DS549737071" load-source="docdb">SM</country><country mxw-id="DS549737767" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128672985" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A plurality of sets of waveform data and switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data are prestored in memory, and one set of waveform data is reproduced in accordance with the passage of time. During reproduction of a first set of waveform data, a second set of waveform data is designated at given timing in response to a user's instruction. Control is performed such that the waveform data to be reproduced is switched from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data. Reproduction of the second set of waveform data is started at the switchover position corresponding to the reproduction timing.
<img id="iaf01" file="imgaf001.tif" wi="110" he="78" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737130" lang="EN" source="EPO" load-source="docdb"><p>A plurality of sets of waveform data and switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data are prestored in memory, and one set of waveform data is reproduced in accordance with the passage of time. During reproduction of a first set of waveform data, a second set of waveform data is designated at given timing in response to a user's instruction. Control is performed such that the waveform data to be reproduced is switched from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data. Reproduction of the second set of waveform data is started at the switchover position corresponding to the reproduction timing.</p></abstract><description mxw-id="PDES63958973" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">The present invention relates generally to automatic performance techniques for reproducing tones of music (melody or accompaniment) using audio waveform data, and more particularly to a technique for controlling switchover timing of waveform data to be used for reproduction.</p><p id="p0002" num="0002">There have heretofore been known automatic performance apparatus which prestore an accompaniment pattern data set representative of an arpeggio pattern, bass pattern, rhythm pattern, etc., and which perform an automatic performance of tones on the basis of such a prestored accompaniment pattern data set. Note that, in this specification, the term "tone" is used to refer to not only a musical sound but also a voice or any other sound.</p><p id="p0003" num="0003">Generally, an accompaniment pattern data set has a predetermined length, such as a length of several measures, and the automatic performance apparatus can execute a continuous performance for a plurality of measures by repetitively reproducing the accompaniment pattern data set. In such a case, however, the performance tends to become monotonous because it is based on mere repetitive reproduction of the same accompaniment pattern data set (hereinafter referred to as "main pattern"). To avoid such monotonousness, it has been conventional to prepare in advance, separately from the main pattern, sub accompaniment pattern data sets (hereinafter referred to as "sub patterns"), such as fill-in, break and ad-lib patterns, each comprising data of a predetermined length (e.g., length of only one measure) shorter than the length of the main pattern, so that a performance based on a desired sub pattern can be temporarily inserted, during a performance based on the main pattern, in response to a switchover instruction given, for example, by a user or human operator's operation of a switch. Namely, in response to a switchover instruction, the performance based on the sub pattern is executed in place of the performance based on the main pattern, and, then, upon completion of the performance based on the sub pattern, the performance based on the main pattern is resumed.</p><p id="p0004" num="0004">Japanese Patent Application Laid-open Publication No. <patcit id="pcit0001" dnum="JPHEI10268866B"><text>HEI-10-268866</text></patcit> (hereinafter referred to as "Patent Literature 1") discloses an apparatus which, once a switchover from a main pattern to a fill-in pattern is instructed, immediately switches the accompaniment pattern<!-- EPO <DP n="2"> --> reproduction from the main pattern to the fill-in pattern even though the main pattern is still in the middle of reproduction. In the apparatus disclosed in Patent Literature 1, tone control data defined in accordance with predetermined standards (e.g., MIDI data defined in accordance with the MIDI standards) are used as accompaniment pattern data.</p><p id="p0005" num="0005">Further, as the accompaniment pattern data, tone waveform data (audio waveform data) obtained by sampling an actual musical instrument performance, human voices, natural sounds or the like are sometimes used in addition to the aforementioned MIDI data. In the case where control data, such as MIDI data, are used as the accompaniment pattern data, the automatic performance apparatus can generate tones at a desired performance tempo, without causing any tone pitch change, by changing a readout speed or rate of event data (more specifically, note events, such as note-on and note-off events). It is also known that, in the case where audio waveform data are used as the accompaniment pattern data, on the other hand, the automatic performance apparatus can generate tones at a desired performance tempo, without causing any tone pitch change, by performing time stretch control. In this specification, the term "time stretch control" is used to refer to "compressing audio waveform data on the time axis" (time-axial compression) and/or "stretching audio waveform data on the time axis" (time-axial stretch).</p><p id="p0006" num="0006">Further, Japanese Patent Application Laid-open Publication No. <patcit id="pcit0002" dnum="JP2001312277A"><text>2001-312277</text></patcit> (hereinafter referred to as "Patent Literature 2") discloses an apparatus which is constructed to output a tone generated on the basis of audio waveform data and a tone generated on the basis of MIDI data in synchronism with each other by changing, for each predetermined period corresponding to a performance tempo (e.g., for each measure), a reproduction position of the audio waveform data at each predetermined periodic time point (occurring every such predetermined period) to a predetermined position associated in advance with the predetermined period, in order to allow the reproduction position of the audio waveform data to match the reproduction position of the MIDI data per such predetermined period.</p><p id="p0007" num="0007">In the prior art apparatus disclosed in Patent Literature 2, it is conventional to perform control on the audio waveform data of a predetermined length at predetermined periodic time intervals (i.e., at each predetermined periodic time point). Thus, if a pattern switchover instruction is given at a time point different from the predetermined periodic time point, more specifically at a given enroute time point within a measure other than a measure boundary position,<!-- EPO <DP n="3"> --> switchover control for effecting a switchover from a main pattern to a fill-in pattern is performed following arrival of the next measure. However, even for the audio waveform data, inability to switch from a main pattern to a fill-in pattern in immediate response to a pattern switchover instruction is inconvenient and undesirable. To avoid such inconveniency, it is conceivable to perform the switchover control before arrival of the next measure (period), but performing the switchover control before arrival of the next measure like this would increase a possibility of causing sound quality deterioration, such as generation of noise.</p><p id="p0008" num="0008">In view of the foregoing prior art problems, it is an object of the present invention to provide a technique which, in an automatic music performance based on audio waveform data, permits at desired timing a switchover between waveform data to be used for reproduction and prevents sound quality deterioration of a reproduced tone due to such a switchover.</p><p id="p0009" num="0009">In order to accomplish the above-mentioned object, the present invention provides an improved automatic performance apparatus, which comprises: a storage section configured to store therein a plurality of sets of waveform data, and switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data; a reproduction section configured to reproduce any one of the sets of waveform data, stored in the storage section, in accordance with the passage of time; a designation section adapted to designate, during reproduction by the reproduction section of a first set of waveform data of the plurality of sets of waveform data, a second set of waveform data of the plurality of sets of waveform data; and a control section configured to perform control such that the reproduction section switches the waveform data to be reproduced thereby from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing of the reproduction section arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data designated via the designation section, reproduction of the second set of waveform data being started at the possible switchover position corresponding to the reproduction timing.</p><p id="p0010" num="0010">According to the present invention, switchover position information is prestored which is indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data, and any one of the sets of waveform data, stored in the storage<!-- EPO <DP n="4"> --> section, is reproduced in accordance with the passage of time. During reproduction of the first set of waveform data, the second set of waveform data is designated at desired timing in response to a user's instruction or the like. In response to designation of the second set of waveform data, a switchover from the first set of waveform data to the second set of waveform data is effected in response to the waveform data reproduction timing arriving at any one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data, instead of the reproduced waveform being switched over to the second set of waveform data in immediate response to the designation of the second set of waveform data. Reproduction of the second set of waveform data is started at the possible switchover position corresponding to the reproduction timing. Thus, even when a switchover instruction has been given at desired enroute timing other than a measure boundary position between measures, the control for effecting a switch over to a newly designated set of waveform data is performed as quickly as possible prior to arrival of the next measure boundary position. Further, by appropriately setting a switchover position (e.g., setting a switchover position in correspondence with a sound generation start position of a tone), the present invention can reliably avoid noticeable sound quality deterioration at the time of a switchover of waveform data to be reproduced.</p><p id="p0011" num="0011">The present invention may be constructed and implemented not only as the apparatus invention discussed above but also as a method invention. Also, the present invention may be arranged and implemented as a software program for execution by a processor, such as a computer or DSP, as well as a non-transitory storage medium storing such a software program. In this case, the program may be provided to a user in the storage medium and then installed into a computer of the user, or delivered from a server apparatus to a computer of a client via a communication network and then installed into the client's computer. Further, the processor used in the present invention may comprise a dedicated processor with dedicated logic built in hardware, not to mention a computer or other general-purpose processor capable of running a desired software program.</p><p id="p0012" num="0012">The following will describe embodiments of the present invention, but it should be appreciated that the present invention is not limited to the described embodiments and various modifications of the invention are possible without departing from the basic principles. The<!-- EPO <DP n="5"> --> scope of the present invention is therefore to be determined solely by the appended claims.</p><p id="p0013" num="0013">Certain preferred embodiments of the present invention will hereinafter be described in detail, by way of example only, with reference to the accompanying drawings, in which:
<ul><li><figref idrefs="f0001">Fig. 1</figref> is a block diagram showing an example general hardware setup of an electronic musical instrument to which is applied an automatic performance apparatus according to a preferred embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 2</figref> is a conceptual diagram showing a data structure of style data sets;</li><li><figref idrefs="f0003">Figs. 3A and 3B</figref> are conceptual diagrams explanatory of audio part control information;</li><li><figref idrefs="f0004">Fig. 4</figref> is a flow chart showing an example operational sequence of automatic performance processing;</li><li><figref idrefs="f0005">Fig. 5</figref> is a flow chart showing an example operational sequence of an interrupt process;</li><li><figref idrefs="f0006">Fig. 6</figref> is a conceptual diagram explanatory of an example of audio waveform data switchover control;</li><li><figref idrefs="f0006">Fig. 7</figref> is a conceptual diagram explanatory of another example of audio waveform data switchover control; and</li><li><figref idrefs="f0007">Fig. 8</figref> that is a conceptual diagram explanatory of timing deviation correction of the audio waveform data.</li></ul></p><p id="p0014" num="0014"><figref idrefs="f0001">Fig. 1</figref> is a block diagram showing an example general hardware setup of an electronic musical instrument to which is applied an automatic performance apparatus in accordance with a preferred embodiment of the present invention. The electronic musical instrument of <figref idrefs="f0001">Fig. 1</figref> performs various processing under control of a microprocessor comprising a microprocessor unit (CPU) 1, a read-only memory (ROM) 2 and a random access memory (RAM) 3. The CPU 1 controls behavior of the entire electronic musical instrument. To the CPU 1 are connected, via a data and address bus 1D, the ROM 2, the RAM 3, a storage device 4, a performance operator unit 5, a panel operator unit 6, a display section 7, an audio reproduction section 8, a MIDI tone generator section 9, a tone control section 10 and an interface 11.</p><p id="p0015" num="0015">Also connected to the CPU 1 is a timer 1A for counting various times, such as ones to signal interrupt timing for timer interrupt processes. For example, the timer 1A generates tempo<!-- EPO <DP n="6"> --> clock pulses for setting a performance tempo at which to automatically perform tones and setting a frequency at which to perform time stretch control on audio waveform data. Such tempo clock pulses generated by the timer 1A are given to the CPU 1 as processing timing instructions or as interrupt instructions. The CPU 1 carries out various processes in accordance with such instructions.</p><p id="p0016" num="0016">The ROM 2 stores therein various programs for execution by the CPU 1 and various data for reference by the CPU 1. The RAM 3 is used as a working memory for temporarily storing various data generated as the CPU 1 executes predetermined programs, as a memory for temporarily storing a currently-executed program and data related to the currently-executed program, and for various other purposes. Predetermined address regions of the RAM 3 are allocated to various functions and used as various registers, flags, tables, temporary memories, etc.</p><p id="p0017" num="0017">In the storage device 4 is provided a built-in database capable of storing a multiplicity of various data, such as style data sets (see later-described <figref idrefs="f0002">Fig. 2</figref>) each comprising a plurality of section data. In addition, various control programs for execution by the CPU 1 may be stored in the storage device 4. Where a particular control program is not prestored in the ROM 2, the control program may be stored in the storage device (e.g., hard disk) 4, so that, by reading the control program from the storage device 4 into the RAM 3, the CPU 1 is allowed to operate in exactly the same way as in the case where the particular control program is stored in the ROM 2. This arrangement greatly facilitates version upgrade of the control program, addition of a new control program, etc.</p><p id="p0018" num="0018">The external storage device 4 is not limited to the hard disk (HD) and may comprise any of various recording media, such as a flexible disk (FD), compact disk (CD-ROM or CD-RAM), magneto-optical disk (MO) and digital versatile disk (DVD). Alternatively, the storage device 4 may comprise a semiconductor memory.</p><p id="p0019" num="0019">The performance operator unit 5 is, for example of a keyboard type including a plurality of keys operable to select pitches of tones to be generated and key switches provided in corresponding relation to the keys. The performance operator unit 5 can be used not only for a manual performance by a user or human player itself but also as an input means for entering a chord. Of course, the performance operator unit 5 is not limited to such a keyboard type and may be of any other type or form, such as a neck type having strings for selecting a pitch of each tone to<!-- EPO <DP n="7"> --> be generated. Namely, in the case where the automatic performance apparatus of the present invention is applied to an electronic musical instrument, the electronic musical instrument is not limited to an instrument of a keyboard type and may be of any other desired type, such as a string instrument type, wind instrument type or percussion instrument type.</p><p id="p0020" num="0020">The panel operator unit 6 includes, among other things, various operators (operating members), such as a selection switch for selecting a style data set, a section change switch for instructing a change or switchover to any one of section data constituting a style data set, a tempo setting switch for setting a performance tempo, a reproduction (or play) button for instructing start/stop of an automatic performance, an input operator for entering a chord, and setting switches for setting parameters of a tone color, effect, etc. Of course, the panel operator unit 6 may also include a numeric keypad for inputting numeric value data for selecting, setting and controlling a tone pitch, color, effect, etc., a keyboard for inputting character and letter data, and various other operators, such as a mouse operable to operate a predetermined pointer for designating a desired position on any one of various screens displayed on the display section 7.</p><p id="p0021" num="0021">The display section 7 comprises, for example, a liquid crystal display (LCD) panel, CRT and/or the like. The display section 7 not only displays any of various screens, such as a style selection screen, a performance tempo setting screen and a section change screen, in response to a human operator's operation of any of the above-mentioned switches, but also can various information, such as content of a style data set, and a controlling state of the CPU 1. Fuither, with reference to these information displayed on the display section 7, the human player can readily perform operations for selecting a style data set, setting a performance tempo and changing a section of a selected style data set.</p><p id="p0022" num="0022">The audio reproduction section 8, which is capable of simultaneously generating reproduced waveform signals for a plurality of tracks (parts), generates and outputs reproduced waveform signals on the basis of audio waveform data given via the data and address bus 1D. At that time, time-axial stretch/compression control (time stretch control) can be performed for increasing or decreasing reproduced time lengths of the audio waveform data without changing tone pitches of the audio waveform data. For example, when the user has instructed a change in a tempo of a reproduced performance, the audio reproduction section 8 performs the time stretch control on the audio waveform data in accordance with the user-instructed tempo. In the<!-- EPO <DP n="8"> --> following description, the term "reproduction position" or "current reproduction position" of audio waveform data is used to refer to a reproduction position having been subjected to the time stretch control. Namely, in the instant embodiment, adjustment of the current reproduction position is performed on audio waveform data having been subjected to the time stretch control. Although the time stretch control for adjusting the time axis of audio waveform data can be performed in accordance with any one of various methods, such methods will not be described in detail here because they are known in the art. Further, in the instant embodiment, the audio reproduction section 8 generates and outputs reproduced waveform signals synchronized to tones generated on the basis of MIDI data (i.e., a set of MIDI data).</p><p id="p0023" num="0023">The MIDI tone generator section 9, which is capable of simultaneously generating reproduced waveform signals for a plurality of tracks (parts), inputs MIDI data given via the data and address bus 1D and generates and outputs reproduced waveform signals on the basis of various event information included in the input MIDI data, The MIDI tone generator section 9 is implemented by a computer, where automatic performance control based on the MIDI data is performed by the computer executing a predetermined application program.</p><p id="p0024" num="0024">Note that the MIDI tone generator section 9 may be implemented by other than a computer program, such as microprograms processed by a DSP (Digital Signal Processor). Alternatively, the MIDI tone generator section 9 may be implemented as a dedicated hardware device including discrete circuits, integrated or large-scale integrated circuits, and/or the like. Further, the MIDI tone generator section 9 may employ any desired tone synthesis method other than the waveform memory method, such as the FM method, physical model method, harmonics synthesis method or formant synthesis method, or may employ a desired combination of these tone synthesis methods.</p><p id="p0025" num="0025">Further, the audio reproduction section 8 and the MIDI tone generator section 9 are both connected to the tone control section 10. The tone control section 10 performs predetermined digital signal processing on reproduced waveform signals, generated from the audio reproduction section 8 and the MIDI tone generator section 9, to not only impart effects to the reproduced waveform signals but also mix (add together) the reproduced waveform signals and outputs the mixed signals to a sound system 10A including speakers etc. Namely, the tone control section 10 includes a signal mixing (adding) circuit, a D/A conversion circuit, a tone<!-- EPO <DP n="9"> --> volume control circuit, etc. although not particularly shown.</p><p id="p0026" num="0026">The interface 11 is an interface for communicating various information, such as various data like style data sets, audio waveform data and MIDI data and various control programs, between the automatic performance apparatus and not-shown external equipment The interface 11 may be a MIDI interface, LAN, Internet, telephone line network and/or the like, and it should be appreciated that the interface may be of either or both of wired and wireless types.</p><p id="p0027" num="0027">Furthermore, needless to say, the automatic performance apparatus of the present invention is not limited to the type where the performance operator unit 5, display section 7, MIDI tone generator section 9, etc. are incorporated together as a unit within the apparatus. For example, the automatic performance apparatus of the present invention may be constructed in such a manner that the above-mentioned components are provided separately and interconnected via communication facilities, such as a MIDI interface and various networks.</p><p id="p0028" num="0028">Also note that the automatic performance apparatus of the present invention may be applied to any other device, apparatus or equipment than an electronic musical instrument, such as a personal computer, a portable communication terminal like a PDA (portable information terminal) or portable telephone, and a game apparatus as long as such a device, apparatus or equipment can execute an automatic performance of tones on the basis of audio waveform data.</p><p id="p0029" num="0029"><figref idrefs="f0002">Fig. 2</figref> is a conceptual diagram showing a data structure of style data sets stored in a database provided in the electronic musical instrument. Basically, the style data sets are created by a maker of the electronic musical instrument and prestored in the electronic musical instrument. In addition to such prestored style data sets, the user of the electronic musical instrument can not only additionally store, into the database, a style data set newly created by the user, but also additionally acquire a style data set, newly created by the maker or other user and stored in external equipment (such as a server apparatus), and store the thus-acquired style data set into the database in place of or in addition to any one of the prestored style data sets.</p><p id="p0030" num="0030">Each style data set has, for each of a plurality of sections (namely, main, fill-in, intro, ending sections, etc.), basic accompaniment pattern data provided for individual ones of a plurality of parts, such as chord backing, bass and rhythm parts. The main section is a section where a predetermined pattern of one to several measures is reproduced repetitively, while each of the other sections is where a predetermined pattern is reproduced only once. Upon completion of<!-- EPO <DP n="10"> --> reproduction of an intro section or fill-in section during automatic performance control, the automatic performance continues to be executed by returning to a main section. But, upon completion of reproduction of an ending section during the automatic performance control, the automatic performance is brought to an end. The user executes an automatic performance of a music piece while switching as desired between sections of a selected style data set. Typically, an automatic performance of a music piece is started with an intro section, then a main section is repeated for a time length corresponding to a play time length of the music piece in question, and then the automatic performance is terminated by switching to an ending section. Further, during reproduction of the main section, a fill-in section is inserted in response to a climax or melody change of the music piece. Note that the lengths of the accompaniment pattern data may differ among the sections and may range from one to several measures.</p><p id="p0031" num="0031">In the instant embodiment, style data sets (or styles) are classified into two major types: a MIDI style (type) where MIDI data are allocated to all of a plurality of parts (or tracks) as the accompaniment pattern data; and an audio style (type) where audio waveform data are allocated to at least one of the parts (particularly, rhythm part) while MIDI data are allocated to the remaining parts. In <figref idrefs="f0002">Fig. 2</figref>, "style 1" is an example of the MIDI style including only MIDI parts, and "style 1" is an example of the audio style including one audio part. The MIDI data are tone control data including a train of MIDI-format events, such as note events and tone generation timing, and the audio waveform data are tone waveform data obtained by sampling an actual musical instrument performance, human voices, natural sounds or the like (see <figref idrefs="f0003">Fig. 3</figref>).</p><p id="p0032" num="0032">The MIDI data are created on the basis of predetermined standard chords and subjected to chord conversion in accordance with a desired chord designated during a performance. The predetermined standard chords are, for example, various chords of the C major key, such as major, minor and seventh, and, once a desired chord is designated by the user during a performance, tone pitches of notes in the accompaniment pattern data are converted to match the designated chord. "MIDI part control information" is information attached to each style and includes control parameters for controlling an automatic performance on the basis of MIDI data; among examples of the MIDI part control information is a rule of the chord conversion.</p><p id="p0033" num="0033">"audio part control information" is information attached to each audio waveform data (more specifically, each audio waveform data set) and includes, for example, tempo information<!-- EPO <DP n="11"> --> indicative of a tempo at which the audio waveform data was recorded (i.e., basic tempo), beat information (reference position information), sync position information (correction position information), attack information, onset information (switchover position information), etc. Each such audio part control information can be obtained by analyzing corresponding audio waveform data and prestored in a style data set in association with the audio waveform data. In an automatic performance, control is performed on the automatic performance, based on the audio waveform data, with reference to the audio part control information. The following describe, with reference to <figref idrefs="f0003">Figs. 3A and 3B</figref>, details of the audio part control information.</p><p id="p0034" num="0034"><figref idrefs="f0003">Fig. 3A</figref> shows audio waveform data of one measure, constituting an audio part of an audio style, divided, at positions of the beat information (sb1 to sb4) and sync information (ss1 to ss4), into a plurality of waveform segments w1 to w8 in a time-series order. Further, a plurality of waveform blocks included in the waveform segments w1 to w8 are indicated by waveform Nos. (e.g., Mo1 - Mo6 and Fo1 - Fo9 in <figref idrefs="f0003">Fig. 3B</figref>) in an ascending or descending time-series order. As shown, each "waveform block" represents one block of a substantive waveform that forms a rise phase to a decay phase of a single tone. "beat information" (sb1 to sb4) is information indicative of individual beat timing within a measure of the audio waveform data; more specifically, the "beat information" is reference position information indicative of reference positions, in the waveform data, to be synchronized to reference beats given as reference timing. "sync point information" (ss1 to ss4) is correction position information indicative of correction positions in the waveform data that are different from the reference positions. More specifically, the "sync point information" (ss1 to ss4) indicates, as the correction positions, positions in the waveform data where the waveform amplitude is small or autocorrelation is high, or in other words, positions in the waveform data which permit waveform connection unlikely to cause sound quality deterioration when a reproduced waveform signal is generated after correction of a reproduction timing difference or deviation. In response to a current reproduction position of the waveforms data arriving at the correction position, the current reproduction position of the waveform data is corrected to compensate for a reproduction timing deviation, as will be later described. The instant embodiment can reliably prevent sound quality deterioration of a reproduced tone, by selecting, as the correction position of the waveform data, a position where no substantive waveform data exists or where the amplitude level is zero (0) or smaller than a threshold value, i.e.<!-- EPO <DP n="12"> --> a position which has relatively small importance as the waveform or a waveform position which has high autocorrelation (namely, a waveform position where a time or temporal change of the current reproduction position does not adversely influence quality of a reproduced waveform), and correcting the current reproduction position of the waveform data at the correction position. In the instant embodiment, a waveform position where the amplitude level is the smallest in each of segments demarcated by individual beats is set as the sync information, as shown in <figref idrefs="f0003">Fig. 3A</figref>. Further, "attack information" (At1, At4, etc.) is each indicative of a waveform position, in a portion from a sounding start to a peak position of one of the waveform segments w1 to w8, which is most recognizable as a tone, e.g. a waveform position where the a variation amount of the amplitude level is the greatest In the instant embodiment, a peak position where the amplitude level is the greatest is set as the attack information.</p><p id="p0035" num="0035">Waveform data of respective one measures of a main section and a fill-in section are shown in an upper region of <figref idrefs="f0003">Fig. 3B</figref>, while onset information of the main section and the fill-in section are shown in a lower region of <figref idrefs="f0003">Fig. 3B</figref>. The storage device 4 stores therein a plurality of sets of waveform data corresponding to various styles and sections. The onset information is information to be referenced when control is performed on timing for a switchover between the main section and the fill-in section. In the illustrated example of <figref idrefs="f0003">Fig. 3B</figref>, a rise position of each of a plurality of tones (i.e., each of a plurality of peak waveforms) included in the waveform data is defined as the onset information. In the illustrated example of <figref idrefs="f0003">Fig. 3B</figref>, the main section has six peak waveforms while the fill-in section has nine peak waveforms. Thus, individual waveforms indicated by reference characters Mo1 to Mo6 and located at rise positions of the six waveforms including the respective peak waveforms in the main section are set as the onset information, in the audio waveform data, of the man section, and individual waveforms indicated by reference characters Fo1 to Fo9 and located at rise positions of the nine waveforms including the respective peak waveforms in the fill-in section are set as the onset information, in the audio waveform data, of the fill-in section. Namely, the onset information is switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data.</p><p id="p0036" num="0036">Note that the structure of the style data sets is not limited to the above-desaibed. For example, stored locations of the style data sets and stored locations of the audio waveform<!-- EPO <DP n="13"> --> data and MIDI data may be different from each other, in which case information indicative of the stored locations of the audio waveform data and MIDI data may be contained in the style data sets. Also note that the MIDI part control information and the audio part control information may be managed in different locations than the style data sets rather than contained in the respective style data sets. For example, individual MIDI data, audio waveform data, MIDI part control information and audio part control information may be stored in respective different locations than the storage device 4, such as the ROM 2 and/or server apparatus connected to the electronic musical instrument via the interface 11, so that, in reproduction, the same functions as in the above-described embodiment can be implemented by the MIDI data, audio waveform data, MIDI part control information and audio part control information being read out from the respective storage locations into the RAM 3.</p><p id="p0037" num="0037">Now, a description will be given about "automatic performance processing" performed by the CPU 1, with reference to <figref idrefs="f0004">Fig. 4</figref> that is a flow chart showing an example operational sequence of the automatic performance processing. The automatic performance processing is started in response to an automatic performance start instruction given by the user with a desired audio style data set selected from among a multiplicity of style data sets, and it is terminated in response to an automatic performance end instruction given by the user or upon completion of reproduction of an ending section.</p><p id="p0038" num="0038">At step S1, an initialization process is performed, which includes, among other things, an operation for setting a performance tempo in response to a user's operation and an operation for reading out, from the ROM 2, storage device 4 and/or the like, the selected style data set together with MIDI data and audio waveform data and storing the read-out data into the RAM 3. At next step S2, an operation for reading out, from the RAM 3, the MIDI data in accordance with the set performance tempo is started for a part having the MIDI data allocated thereto as accompaniment pattern data (such a part will hereinafter be referred to as "MIDI part") in a desired section designated for reproduction from the selected style data set. In response to such MIDI data readout, tones based on the MIDI data are reproduced.</p><p id="p0039" num="0039">At step S3, an operation for reproducing the audio waveform data in accordance with the set performance tempo is started for a part having the audio waveform data allocated thereto as accompaniment pattern data (such a part will hereinafter be referred to as "audio part"). At that<!-- EPO <DP n="14"> --> time, if the set performance tempo is different from the basic tempo, control is performed on an automatic performance based on the audio waveform data stored in the RAM 3 in such a manner that tones matching the set performance tempo are generated through time stretch control performed on the audio waveform data. In this way, tones based on the audio waveform data are reproduced. By the aforementioned operations of steps S2 and S3, both the MIDI part and the audio part are reproduced at the performance tempo set by the user; namely, all parts of the style data set are reproduced simultaneously.</p><p id="p0040" num="0040">At step S4, a determination is made as to whether any user's instruction has been received. If no user's instruction has been received (NO determination at step S4), the processing reverts to step S2 and awaits a user's instruction while still continuing the reproduction of the MIDI part and the audio part. If, on the other hand, any user's instruction has been received (YES determination at step S4), different operations are performed in accordance with the received user's instruction through a YES route of any one of steps S5, S9 and S12. More specifically, in the illustrated example, any one of different routes of operations are performed depending on whether the received user's instruction is a "section switchover instruction from a main section to a fill-in section" (step S5), a "performance tempo change instruction" (step S9) or an "automatic performance end instruction" (step S12).</p><p id="p0041" num="0041">If the user's instruction is a "section switchover instruction from a main section to a fill-in section" (YES determination at step S5), operations of steps S6 to S8 are performed, and then the processing reverts to step S2. Note that the reception of the "section switchover instruction from a main section to a fill-in section" means that, by operating the panel operation unit 6 or the like during reproduction of the main section, the user has instructed that a fill-in section be reproduced. At step S6, audio waveform data and audio part control information of the fill-in section that is a switched-to section are loaded, namely, those audio waveform data and audio part information stored in the storage device 4 are read into the RAM 3. At step S7, onset information is acquired from the audio part control information of the switched-to fill-in section. At next step S8, of the acquired onset information, onset information immediately following a current reproduction position of audio waveform data of the currently reproduced main section (i.e., next onset information) is set as "section switchover timing".</p><p id="p0042" num="0042">If the user's instruction is a "performance tempo change instruction" (YES<!-- EPO <DP n="15"> --> determination at step S9), operations of steps S10 and S11 are performed, and then the processing reverts to step S2. At step S10, a tempo change ratio between the basic tempo of the audio waveform data and a newly-set (i.e., changed) performance tempo is evaluated. At next step S11, time stretch control (time-axial stretch/compression control) is performed on the audio waveform data in accordance with the evaluated tempo change ratio. At that time, sound quality deterioration can be reduced by referencing attack information of the audio part control information. The time stretch control is known per se and thus will not be described in detail here.</p><p id="p0043" num="0043">The aforementioned operations of step S3, etc. performed by the CPU 1 and the aforementioned audio reproduction section 8 function as a reproduction section constructed or configured to reproduce any one of the sets of audio waveform data, stored in the storage device 4, in accordance with the passage of time.</p><p id="p0044" num="0044">An operator (operation member) provided on the panel operator unit 6 for receiving the user's instruction of the "section switchover instruction from a main section to a fill-in section" and the aforementioned operation of step S5 performed by the CPU 1 function as a designation section adapted to designate, during reproduction by the reproduction section of a first set of waveform data of the plurality of sets of waveform data (namely waveform data of the main section), a second set of waveform data of the plurality of sets of waveform data (namely waveform data of the fill-in section).</p><p id="p0045" num="0045">Further, if the user's instruction is an "automatic performance end instruction" (YES determination at step S12), end control corresponding to the automatic performance end instruction is performed at step S14, and then the instant automatic performance processing is brought to at end. If, for example, the automatic performance end instruction is an instruction for switching from a main section to an ending section, data reproduction of the ending section is started, in replacing data reproduction of the main section, in a measure immediately following the automatic performance end instruction, and then the instant automatic performance processing is brought to an end after control is performed to reproduce the data of the ending section to the end. If the automatic performance end instruction is a stop instruction given via a reproduction/stop button for stopping the automatic performance, the instant automatic performance processing is brought to an end by data reproduction end control being performed compulsorily in immediate<!-- EPO <DP n="16"> --> response to the stop instruction.</p><p id="p0046" num="0046">If the user's instruction is none of the aforementioned instructions (i.e., NO determination has been made at each of steps S5, S9 and S19), other operations corresponding to the user's instruction are performed. Examples of the user's instruction requiring such other operations include a section switchover instruction from a main section to another section than a fill-in section and an ending section, an instruction for muting, or canceling mute of, a desired one of currently reproduced parts, an instruction for switching a style data set and an instruction for changing a tone color or tone volume.</p><p id="p0047" num="0047">The following describe an "interrupt process" with reference to <figref idrefs="f0005">Fig. 5</figref> that is a flow chart showing an example operational sequence of the interrupt process. The interrupt process is started repetitively at predetermined time intervals corresponding to clock pulse signals during a time period from the start to end of an automatic performance. Because time intervals between the clock pulse signals differ depending on a performance tempo, the time intervals at which the interrupt process is started (namely, interrupt process timing) change in accordance with a performance tempo change instruction given by the user.</p><p id="p0048" num="0048">At step S21, a count value of a reproduction counter is incremented by one, namely, value "1" is added to a clock count that starts in response to the start of an automatic performance, each time the interrupt process is started. Art next step S22, a determination is made as to whether the count value of the reproduction counter has reached section switchover timing. It is determined that the count value of the reproduction counter has reached section switchover timing, for example, when the count value of the reproduction counter has reached timing set as the "section switchover timing" (see step S8 of <figref idrefs="f0004">Fig. 4</figref>), when a switch over to a main section is effected automatically, i.e. when reproduction of an intro section or an ending section has been completed, or when, after a section switchover instruction from a main section to another main section or to an ending section was given, the reproduction position of the switched-from main section has reached a measure boundary position.</p><p id="p0049" num="0049">If it is determined that the count value of the reproduction counter has reached section switchover timing (YES determination at step S22), audio waveform data to be read out is switched over to audio waveform data of a switched-to section at step S23. In response to the processing at step S23, the audio reproduction section 8 starts to generate audio waveform data of<!-- EPO <DP n="17"> --> the instructed fill-in section from a switchover position indicated by the onset information corresponding to the "section switchover timing". Namely, if the user has instructed a switchover from a main section to a fill-in section (YES determination at step S5 of <figref idrefs="f0005">Fig. 5</figref>), data readout of the fill-in section that is a switched-to section is started once the section switchover timing set at step S8 is reached, instead of the data of the switched-to fill-in section being read out in immediate response to the user's section switchover instruction. Such switchover control can advantageously reduce generation of noise regardless of the timing of the user's section switchover instruction.</p><p id="p0050" num="0050">The aforementioned operations of steps S6, S7, S8, S22, S23, etc. performed by the CPU 1 function as a control section configured to perform control such that the reproduction section switches the waveform data to be reproduced thereby from the first set of waveform data (namely, waveform data of the main section) over to the second set of waveform data (namely, waveform data of the fill-in section) in response to waveform data reproduction timing of the reproduction section arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data designated via the designation section, reproduction of the second set of waveform data being started at the possible switchover position corresponding to the reproduction timing.</p><p id="p0051" num="0051">The following describe how audio waveform data switchover between sections is controlled, i.e. how inter-section audio waveform data switchover control is performed, in the instant embodiment, with reference to <figref idrefs="f0006">Figs. 6 and 7</figref> that are conceptual diagrams showing an example of the inter-section audio waveform data switchover control. Note that the inter-section audio waveform data switchover control will be described below in relation to the example of <figref idrefs="f0003">Fig. 3B</figref> where the audio waveform data switchover is from the main section to the fill-in section.</p><p id="p0052" num="0052">First, with reference to <figref idrefs="f0006">Fig. 6</figref>, the inter-section audio waveform data switchover control will be described below in relation to a case where the user has performed a section switchover instructing operation at a time point around the midst of a first beat as indicated by a dotted line in the figure. In this case, if the control for effecting a switchover from the audio waveform data of the main section to the audio waveform data of the fill-in section is performed in immediate response to the user's section switchover instructing operation, reproduction would be started at a halfway or enroute position of a second waveform (whose rise position is Fo2 and<!-- EPO <DP n="18"> --> which will hereinafter be referred to as "Fo2 waveform") as seen in an upper region of <figref idrefs="f0006">Fig. 6</figref>. A tone reproduced at an enroute position of a waveform like this sounds noise, which is inconvenient and undesirable.</p><p id="p0053" num="0053">As noted above, rise positions (Fo1 to Fo9) of individual waveforms included in the audio waveform data of the fill-in section are set as the onset information of the audio part control information (see <figref idrefs="f0003">Fig. 3B</figref>). Thus, in this case, the audio waveform data switchover control is performed in such a manner that, instead of the audio waveform data switchover control being performed in immediate response to the user's section switchover instructing operation, reproduction of the Mo1 waveform of the switched-from main section is maintained until the count value of the reproduction counter reaches the value of the onset information "Fo3" of the switched-to fill-in section immediately after the user's section switchover instructing operation so that reproduction of the waveform data of the fill-in section is started at the head or beginning of the Fo3 waveform in response to the count value of the reproduction counter reaching the value "Fo3" (see a lower region of <figref idrefs="f0006">Fig. 6</figref>).</p><p id="p0054" num="0054">With the aforementioned audio waveform data switchover control, reproduction of the switched-to fill-in section is started at the head or beginning of the Fo3 waveform, not at an enroute position of the Fo2 waveform, so that there is no possibility of noise occurring due to the reproduction from the enroute position of the Fo2 waveform. Note that, in an actual apparatus, loading of waveform data of a switched-to fill-in section is started after a user's section switchover instructing operation and thus would take a while. Therefore, in the instant embodiment, the waveform switchover is effected in response to the count value of the reproduction counter reaching the value of the onset information following and closest to, i.e. immediately following, a time point when the waveform data loading is completed.</p><p id="p0055" num="0055">Next, with reference to <figref idrefs="f0006">Fig. 7</figref>, the inter-section audio waveform data switchover control will be described below in relation to a case where the user has performed a section switchover instructing operation at a time point immediately before the Fo8 waveform as indicated by a dotted line. In this case, if the control for effecting a switchover from the audio waveform data of the main section to the audio waveform data of the fill-in section is performed in immediate response to the user's switchover instructing operation, the Fo8 waveform of the fill-in section wound start sounding immediately after the attack portion (i.e., highest amplitude-level<!-- EPO <DP n="19"> --> portion) of the Mo5 waveform of the main section sounds (see an upper region of <figref idrefs="f0006">Fig. 7</figref>); namely, a so-called "double sounding" phenomenon where two attack tones are generated in a short time period would undesirably occur.</p><p id="p0056" num="0056">In this case, let it be assumed that the inter-section audio waveform data switchover is effected at a first waveform rise position following the user's switchover instructing operation as in the case of <figref idrefs="f0006">Fig. 6</figref>. Namely, reproduction of the Mo5 waveform of the switched-from main section is maintained until the count value of the reproduction counter reaches the value of the onset information "Fo8" of the switched-to fill-in section immediately after the user's switchover instructing operation so that reproduction of the waveform data of the fill-in section is started at the beginning of the Fo8 waveform in response to the count value of the reproduction counter reaching the value "Fo8", as shown in a middle region of <figref idrefs="f0006">Fig. 7</figref>. However, even though the waveform data switchover from the main section to the fill-in section is effected at the "Fo8" time point that is a waveform rise position of the fill-in section, the respective attack portions of the Mo5 waveform and the Fo8 waveform are still reproduced in a short time period, and thus, in this case too, "double sounding" phenomenon would undesirably occur.</p><p id="p0057" num="0057">Therefore, in this case, given waveform positions "Fo1' to Fo9"' slightly earlier than the individual waveform rise positions "Fo1 to Fo9" included in the waveform data of the fill-in section are set in advance as the onset information of the audio part control information, as shown in a lower region of <figref idrefs="f0006">Fig. 7</figref>. More specifically, the onset information Fo8 is changed to Fo8' in such a manner the rise position of the Mo5 waveform of the main section and the position Po8' substantially coincide with each other. For the other onset information (Fo1, Fo2, ...) too, optimal positions (Fo1', Fo2', ...) may be set through comparison between individual waveforms included in the waveform data of the two sections. Namely, the onset information of the audio control data need not necessarily be information indicative of waveform rise positions. Namely, according to the instant setting scheme, the onset information of the switched-to fill-in section immediately following the user's switchover instructing operation is "Fo9"' instead of "Fo8". Thus, the switchover control is performed such that reproduction of the Mo5 waveform of the switched-from main section is maintained until the count value of the reproduction counter reaches the value of the onset information "Fo9"' so that reproduction of the waveform data of the fill-in section is started in response to the count value of the reproduction counter reaching the<!-- EPO <DP n="20"> --> value "Fo9"'. Thus, it is possible to provide a solution to the aforementioned double sounding problem.</p><p id="p0058" num="0058">Referring back to <figref idrefs="f0005">Fig. 5</figref>, a determination is made at step S24 whether the count value of the reproduction counter has reached predetermined evaluation or measurement timing, such as timing of a beat (i.e., beat timing). If it is determined that the count value of the reproduction counter has reached the predetermined measurement timing (YES determination of step S24), a deviation of a current reproduction position of the waveform data relative to reference timing (i.e., reproduction position of the MIDI data) is measured at step S25 on the basis of the beat information (sbl - sb4) stored together with the waveform data. Namely, because the beat information (sb1- sb4) is stored in association with the waveform data, a reference position (beat position), in the waveform data, corresponding to each beat timing can be identified by the beat information. The YES determination at step S24 means that the reference timing (i.e., reference beat timing) has been reached. At step S25, measurement is made of a deviation between the current reproduction position of the waveform data and the reference position (i.e., one reference position that should come next) of the waveform data identified by the beat information. If the current reproduction position of the waveform data coincides with the reference position, the deviation is zero (0). If the current reproduction position of the waveform data is ahead of or behind the reference position, the deviation indicates a positive or negative value other than zero. The deviation amount measured at step S25 is temporarily stored into the RAM 3.</p><p id="p0059" num="0059">The reproduction counter and the CPU 1 that advances the reproduction counter in accordance with a performance tempo, etc. function as a reference timing advancing section that is constructed or configured to advance the reference timing in accordance with the passage of time. Further, the operations of steps S24 and S25 performed by the CPU 1 function as a measurement section that, in response to arrival of the reference timing, measures a deviation between the current reproduction position of the waveform data and the reference position of the waveform data indicated by the reference position information.</p><p id="p0060" num="0060">With a NO determination at step S24 or after step S25, the interrupt process goes to step S26, where information indicative of the current reproduction position of the waveform data is acquired. At next step S27, a determination is made as to whether the acquired current reproduction position of the waveform data coincides with a correction position (i.e., a correction<!-- EPO <DP n="21"> --> position that should come next, i.e. a sync point), in the waveform data, indicated by the sync point information (ss1 - ss4), i.e. whether the acquired current reproduction position coincides with sync point timing. If it is determined that the current reproduction position of the waveform data coincides with the correction position or sync point timing (YES determination at step S27), the current reproduction position of the waveform data is corrected in accordance with the deviation amount measured at the last measurement timing (reference beat timing) to compensate for a time or temporal deviation of the current reproduction position of the waveform data relative to the reference timing (reproduction position of the MIDI data), at step S28. For example, if the current reproduction position of the waveform data is delayed behind the reference timing (reproduction position of the MIDI data), the current reproduction position of the waveform data is corrected to advance by the delay time at a first correction position (sync point) after the measurement timing at which the delay has been detected. Namely, reproduction of the waveform data is continued from the current reproduction position having been corrected to advance, as will be later described in detail with reference to <figref idrefs="f0007">Fig. 8</figref>. The operation of step S28 performed by the CPU 1 functions as a correction section that, in response to the current reproduction position of the waveform data reaching the correction position (sync point) indicated by the correction position information (sync point information), corrects the current reproduction position of the waveform data in accordance with the measured or evaluated deviation. At next step S29, a tone generation process is performed for each of the parts; for example, if there is any MIDI event at the current timing, generation or deadening of a tone and any other tone generation control operation are performed on the basis of the MIDI event.</p><p id="p0061" num="0061">The following describe a timing deviation between the reference timing (i.e., reproduction position of the MIDI data) and the reproduction position of the audio waveform data with reference to <figref idrefs="f0007">Fig. 8</figref> that is a conceptual diagram explanatory of timing deviation correction of the reproduction position. Here, the timing deviation correction will be described in relation to a case where reproduced waveform signals are generated with time stretch control performed on the waveform data of one measure shown in <figref idrefs="f0003">Fig. 3A</figref>. Thus, the individual waveform segments w1 to w8 of the audio part shown in <figref idrefs="f0007">Fig. 8</figref> are waveform segments having been subjected to the time stretch control.</p><p id="p0062" num="0062">In the instant embodiment, at the reference timing of each beat (i.e., beat timing of the<!-- EPO <DP n="22"> --> MIDI data), a deviation of the current reproduction position of the audio waveform data relative to the reference timing is measured, and, if there is a deviation other than zero (0) or greater than a predetermined threshold value, the current reproduction position of the audio waveform data is corrected in accordance with (by an amount corresponding to) the measured deviation amount so that it can be synchronized with the reference timing (reproduction position of the MIDI data). Namely, whereas the MIDI data are accurately read out and reproduced at a performance tempo designated by the user, the audio waveform data would not necessarily be accurately reproduced at the designated performance tempo because they are influenced by errors caused by the time stretch process. Therefore, in the instant embodiment, the current reproduction position of the audio waveform data is adjusted, using the reproduction position of the MIDI data as the reference timing, to coincide the reference reproduction position of the MIDI data, so as to achieve synchronized reproduction of the waveform data and the MIDI data. As shown in <figref idrefs="f0007">Fig. 8</figref>, at the reference timing of the first beat of the first measure (i.e., reproduction timing of the first beat of the MIDI data, which is indicated by "1-1" in the figure), the reference position in the waveform data indicated by the beat information (sb1) coincides with the reference timing "1-1", and there is no "deviation" between the reference reproduction position of the MIDI data and the reproduction position of the waveform data. Therefore, no correction of the reproduction position of the waveform data is made at the correction position (sync point) ss1.</p><p id="p0063" num="0063">In the illustrated example of <figref idrefs="f0007">Fig. 8</figref>, there has occurred a deviation between the reference reproduction position of the MIDI data and the reproduction position of the waveform data at the reference timing of the second beat (1-2) of the first measure. Namely, at the reference timing of the second beat (1-2) of the first measure, the reference position (sb2), in the waveform data, indicated by the beat information (sb2) should be the current reproduction position. However, in the illustrated example of <figref idrefs="f0007">Fig. 8</figref>, the waveform segment w2 having been slightly stretched by the time stretch control is still being reproduced at the reference timing of the second beat (1-2) of the first measure, and the reference position (sb2) that is a start position of the next waveform segment w3 has not yet been reached. Thus, at the reference timing of the second beat (1-2) of the first measure, measurement is made of a deviation amount (indicated as Δt1) between the current reproduction position of the currently reproduced waveform segment w2 and the reference position (sb2) indicated by the last beat information (see steps S24 and S25). As an<!-- EPO <DP n="23"> --> example, the deviation amount (Δt1) is represented by the number of waves or cycles (e.g., 694 waves or cycles).</p><p id="p0064" num="0064">In response to arrival of the correction position (sync point), in the waveform data, indicated by the first sync point information (ss2) after the reference timing of the second beat (1-2) of the first measure, i.e. in response to arrival of the leading or first reproduction position of the next waveform segment w4, an operation is performed for advancing the current reproduction position of the waveform data by the measured delay amount Δt1 (see steps S27 and S28). Basically, such correction is effected by changing a reproduction position, located later than the first reproduction position of the waveform segment w4 by the delay amount Δt1, to the current reproduction position. It is assumed here hat cross-fade synthesis known in the art is applied in order to allow the current reproduction position change to be effected smoothly. Namely, reproduction of the waveform segment w4 is started while being subjected to fade-in control from a position later by the delay amount Δt1 than the first reproduction position of the waveform segment w4 (namely, the first reproduction position of the waveform segment w4 is virtually advanced to a position ss2'), and simultaneously, reproduction of the remaining portion of the preceding waveform w3 is continued while being subjected to fade-out control. By thus interconnecting waveforms to be reproduced per track (see hatched portions in the figure), the instant embodiment allows currently-reproduced waveforms to be switch smoothly at the time of synchronized reproduction. In the aforementioned manner, a reproduction timing deviation of the waveform data relative to the reference timing can be eliminated at the correction position (ss2), so that the current reproduction of the waveform segment w4 is returned to a correct reproduction position corresponding to the performance tempo.</p><p id="p0065" num="0065">Further, in the illustratcd example of <figref idrefs="f0007">Fig. 8</figref>, there has occurred a delay "deviation" at the reference timing of the third beat (1-3) of the first measure; the amount of the deviation is represented by Δt2. In this case, at the correction position indicated by the first sync point information (ss3) after the reference timing of the third beat (1-3) of the first measure, an operation is performed for advancing the current reproduction position of the waveform data by the measured deviation or delay amount Δt2 (see steps S27 and S28), similarly to the aforementioned. Namely, reproduction of the succeeding waveform segment w6 is started while being subjected to fade-in control from a position later by the delay amount Δt2 than the first<!-- EPO <DP n="24"> --> reproduction position of the waveform segment w6 (namely, the first reproduction position of the waveform segment w6 is virtually advanced to a position ss3'), and simultaneously, reproduction of the remaining portion of the preceding waveform w5 is continued while being subjected to fade-out control. Similar operations are performed for the succeeding waveform segments although not described here to avoid unnecessary duplication. Whereas the foregoing paragraphs have described the correction method in relation to the cases where reproduction of the audio waveform data has been delayed behind the reference timing (i.e., tone reproduction based on the MIDI data), correction similar to the aforementioned is performed in cases where reproduction of the audio waveform data has been advanced ahead of the reference timing (tone reproduction based on the MIDI data). Namely, in response to arrival of the correction position indicated by the sync point information, the instant embodiment may perform fade-out control on the currently-reproduced waveform data and simultaneously move forward or delay the current reproduction time of the advanced waveform data by the last measured deviation amount so that reproduction of the waveform data is started while being subjected to fade-in control in another channel.</p><p id="p0066" num="0066">Whereas the foregoing paragraphs have described the correction method where the last measured deviation is corrected in response to arrival of the correction position indicated by the sync point information (see <figref idrefs="f0002">Fig. 2</figref>) for ease of description, the correction method employed in the present invention is not limited to the above. For example, the current reproduction position may be corrected on the basis of an average value between the last and last-but-one measured deviations. Further, it is preferable that an amount of correction at the correction position be changed as necessary in accordance with a frequency of deviation measurement and/or measurement accuracy</p><p id="p0067" num="0067">Also note that the correction positions (sync points) and the reference timing (measurement points) need not necessarily correspond to each other in one-to-one relation. Namely, it is not necessary to set one correction position (sync point) per beat. For example, all positions satisfying a predetermined criterion, such as all positions where the amplitude level is smaller than a predetermined value) may be set as correction positions (sync points).</p><p id="p0068" num="0068">Also note that the correction position information (sync point information) indicative of a correction position (sync point) and stored together with the waveform data may be<!-- EPO <DP n="25"> --> information defining a correction position (sync point) in accordance with a given condition instead of specifically identifying a particular correction position (sync point). For example, the correction information may be information defining, as a correction position (sync point), a time point when the amplitude level has become smaller than a predetermined value. In such a case, the changing amplitude level is measured at any time so as to detect, in response to the amplitude level having become smaller than the predetermined value, that the correction position (sync point) indicated by the correction position information (sync point information) has arrived, and, in response to such detection, the current reproduction position of the waveform data may be corrected in accordance with a measured deviation.</p><p id="p0069" num="0069">As well known in the art of an automatic accompaniment using accompaniment pattern data, when one of the sets of waveform data that corresponds to one of main performance patterns (the main section), the reproduction section repetitively reproduces the one of the sets of waveform data that corresponds to one of the main performance patterns, and when one of the sets of waveform data that corresponds to one of the sub performance patterns (the fill-in section), the reproduction section reproduces at least once the one of the sets of waveform data that corresponds to one of the sub performance patterns and then returns to reproduction of one of the sets of waveform data that corresponds to one of the main performance patterns.</p><p id="p0070" num="0070">According to the automatic performance apparatus of the present invention, as set forth above, a plurality of sets of waveform data representative of different performance patterns are prestored, and onset information (switchover position information) indicative of a rising waveform position, or a small-amplitude-level waveform position preceding such a rising waveform position, of each of a plurality of tones included in the waveform data are prestored together with the waveform data. Once any one set of waveform data is designated from among the plurality of sets of waveform data, control is performed for effecting a switchover from a first set of waveform data, which was being reproduced until just before the designation, to the designated or new, namely a second set of, waveform data, so that a reproduced waveform signal of a performance pattern based on the second set of waveform data different from the last performance pattern (i.e., pre-switchover performance pattern) based on the first set of waveform data is generated. At that time, generation of a reproduced waveform signal based on the first set of waveform data is maintained till arrival of the reproduction timing of a possible switchover<!-- EPO <DP n="26"> --> position corresponding to the onset information of the second set of waveform data, so that generation of the reproduced waveform signal based on the second set of waveform data is generated from the reproduction timing of the switchover position corresponding to the onset information.</p><p id="p0071" num="0071">Namely, according to the present invention, the control for effecting a switchover to the designated (the second set of) waveform data is not performed in immediate response to the designation of the second set of waveform data; instead, such control for effecting a switchover to the second set of waveform data is performed following arrival of the reproduction timing of a possible switchover position corresponding to the onset information. Thus, even when a switchover instruction has been given, for example, at desired enroute timing between bar lines of a measure, the control for effecting a switchover to the designated (the second set of) waveform datais performed as quickly as possible prior to arrival of the next measure (bar line). Further, by performing the switchover control at the reproduction timing of a rising waveform position, or a small-amplitude-level waveform position preceding such a rising waveform position, of each tone in the second set of waveform data, it is possible to minimize a possibility of sound quality deterioration, such as generation of noise, occurring at the time of the switchover.</p><p id="p0072" num="0072">Whereas the present invention has been described above in relation to one preferred embodiment, it is not limited to such an embodiment, and various other embodiments of the present invention are of course possible. For example, whereas the preferred embodiment has been described above in relation to synchronized reproduction of audio waveform data and MIDI data, the present invention is also applicable to synchronized reproduction of different sets of audio waveform data. More specifically, the basic principles of the present invention are also applicable to a disk jockeying (DJ) application where a plurality of different sets of audio waveform data are handled, and other applications where audio reproduction is to be synchronized between a plurality of devices.</p><p id="p0073" num="0073">Further, it is not necessarily essential to simultaneously start reproduction of different sets of data that are to be reproduced in a synchronized fashion. For example, after reproduction of one set of data (e.g., a set of MIDI data) is started first, and then reproduction of another set of data (e.g., a set of audio waveform data) may be started. In such a case, different beat positions of the two sets of data, e.g. the second beat of one of the sets of data and the first beat of the other<!-- EPO <DP n="27"> --> set of data, may be synchronized with each other, instead of the two sets of data being synchronized with each other at the same beat (e.g., first beat of the two sets of data) on a measure-by-measure basis.</p><p id="p0074" num="0074">It should also be noted that the error or deviation measurement may be performed at any desired timing or in any desired fashion, without being limited to the aforementioned beat-by-beat basis, such as on an eighth-note-by-eighth-note basis or on an upbeat-by-upbeat basis, as long as a deviation between a reproduction position of a reference tone (tone based on MIDI data) and a reproduction position of a tone based on audio waveform data can be measured. In such a case, information indicative of positions, in a waveform, corresponding to a plurality of eighth notes or upbeats of individual beats may be stored as the audio part control information.</p></description><claims mxw-id="PCLM56981993" lang="EN" load-source="patent-office"><!-- EPO <DP n="28"> --><claim id="c-en-0001" num="0001"><claim-text>An automatic performance apparatus comprising:
<claim-text>a storage section (4) configured to store therein a plurality of sets of waveform data, and switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data;</claim-text>
<claim-text>a reproduction section (8, 1, S3) configured to reproduce any one of the sets of waveform data, stored in said storage section, in accordance with passage of time;</claim-text>
<claim-text>a designation section (6, 1, S5) adapted to designate, during reproduction by said reproduction section of a first set of waveform data of the plurality of sets of waveform data, a second set of waveform data of the plurality of sets of waveform data; and</claim-text>
<claim-text>a control section (1, S6, S7, S8, S22, S23) configured to perform control such that said reproduction section switches the waveform data to be reproduced thereby from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing of said reproduction section arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data designated via said designation section, reproduction of the second set of waveform data being started at the possible switchover position corresponding to the reproduction timing.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The automatic performance apparatus as claimed in claim 1, wherein each of the plurality of sets of waveform data corresponds to a different music performance pattern.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The automatic performance apparatus as claimed in claim 1 or 2, wherein the one or more possible switchover positions in each of the sets of waveform data correspond to one or more tone start positions included in the waveform data.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The automatic performance apparatus as claimed in claim 3, wherein at least one of the one or more possible switchover positions is determined so that the possible switchover position precedes the corresponding tone start position.<!-- EPO <DP n="29"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The automatic performance apparatus as claimed in any one of claims 1 - 4, wherein the waveform data stored in said storage section are waveform data of tones performed in accordance with a basic tempo, and<br/>
which further comprises a tempo setting section (6, 1, S1) configured to variably set a performance tempo, and<br/>
wherein said reference timing advancing section advances the reference timing in accordance with the perfomiance tempo, and<br/>
which further comprises a tempo setting section configured to variably set a performance tempo, said reproduction section performing time axial stretch/compression control on the waveform data, which are to be reproduced thereby, in accordance with a ratio between the basic tempo and the performance tempo set by said tempo setting section so that the waveform data are reproduced in accordance with the set performance tempo.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The automatic performance apparatus as claimed in any one of claim 1 - 5, wherein said storage section stores therein one or more sets of waveform data corresponding to one or more main performance patterns and one or more sets of waveform data corresponding to one or more sub performance patterns,<br/>
said designation section adapted to designate, as the second set of waveform data, one of the sets of waveform data that corresponds to one of the sub performance patterns, and<br/>
when one of the sets of waveform data that corresponds to one of the main performance patterns, said reproduction section repetitively reproduces the one of the sets of waveform data that corresponds to one of the main performance patterns, and when one of the sets of waveform data that corresponds to one of the sub performance patterns, said reproduction section reproduces at least once the one of the sets of waveform data that corresponds to one of the sub performance patterns and then returns to reproduction of one of the sets of waveform data that corresponds to one of the main performance patterns.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A computer-implemented method for executing an automatic performance by use of a plurality of sets of waveform data stored in a storage section, the storage section further storing<!-- EPO <DP n="30"> --> switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data, said method comprising:
<claim-text>a reproduction step of reproducing any one of the sets of waveform data, stored in the storage section, in accordance with passage oftime;</claim-text>
<claim-text>a designation step of designating, during reproduction by said reproduction step of a first set of waveform data of the plurality of sets of waveform data, a second set of waveform data of the plurality of sets of waveform data; and</claim-text>
<claim-text>a step of performing control such that said reproduction step switches the waveform data to be reproduced thereby from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing of said reproduction step arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data designated via said designation step, reproduction of the second set of waveform data being started at the possible switchover position corresponding to the reproduction timing.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A non-transitory computer-readable medium containing a program for causing a processor to perform a computer-implemented method for executing an automatic performance by use of a plurality of sets of waveform data stored in a storage section, the storage section further storing switchover position information indicative of, for each of the sets of waveform data, one or more possible switchover positions in the waveform data, said method comprising:
<claim-text>a reproduction step of reproducing any one of the sets of waveform data, stored in the storage section, in accordance with passage of time;</claim-text>
<claim-text>a designation step of designating, during reproduction by said reproduction step of a first set of waveform data of the plurality of sets of waveform data, a second set of waveform data of the plurality of sets of waveform data; and</claim-text>
<claim-text>a step of performing control such that said reproduction step switches the waveform data to be reproduced thereby from the first set of waveform data over to the second set of waveform data in response to waveform data reproduction timing of said reproduction step arriving at one of the possible switchover positions indicated by the switchover position information corresponding to the second set of waveform data designated via said designation step, reproduction of the second<!-- EPO <DP n="31"> --> set of waveform data being started at the possible switchover position corresponding to the reproduction timing.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670388" load-source="patent-office"><!-- EPO <DP n="32"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="134" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="143" he="150" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0003" num="3A,3B"><img id="if0003" file="imgf0003.tif" wi="143" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="121" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0006" num="6,7"><img id="if0006" file="imgf0006.tif" wi="165" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="122" he="203" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
