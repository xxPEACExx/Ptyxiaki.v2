<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681087-A1" country="EP" doc-number="2681087" kind="A1" date="20140108" family-id="45833511" file-reference-id="318301" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586681" ucid="EP-2681087-A1"><document-id><country>EP</country><doc-number>2681087</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12708980-A" is-representative="NO"><document-id mxw-id="PAPP154848873" load-source="docdb" format="epo"><country>EP</country><doc-number>12708980</doc-number><kind>A</kind><date>20120216</date><lang>EN</lang></document-id><document-id mxw-id="PAPP196971943" load-source="docdb" format="original"><country>EP</country><doc-number>12708980.3</doc-number><date>20120216</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140554407" ucid="US-201113039586-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113039586</doc-number><kind>A</kind><date>20110303</date></document-id></priority-claim><priority-claim mxw-id="PPC140555977" ucid="US-2012025346-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012025346</doc-number><kind>W</kind><date>20120216</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989317250" load-source="docdb">B60T   8/172       20060101AFI20121128BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1894808590" load-source="docdb" scheme="CPC">B60T   8/172       20130101 FI20160917BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132364676" lang="DE" load-source="patent-office">RADGESCHWINDIGKEITSSCHÄTZUNG ANHAND EINES ANTRIEBSSTRANGMODELLS</invention-title><invention-title mxw-id="PT132364677" lang="EN" load-source="patent-office">WHEEL SPEED ESTIMATION USING A DRIVETRAIN MODEL</invention-title><invention-title mxw-id="PT132364678" lang="FR" load-source="patent-office">ESTIMATION DE VITESSE DE ROUE À L'AIDE D'UN MODÈLE DE CHAÎNE CINÉMATIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919508084" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BOSCH GMBH ROBERT</last-name><address><country>DE</country></address></addressbook></applicant><applicant mxw-id="PPAR919517034" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ROBERT BOSCH GMBH</last-name></addressbook></applicant><applicant mxw-id="PPAR919018424" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Robert Bosch GmbH</last-name><iid>101244499</iid><address><street>Postfach 30 02 20</street><city>70442 Stuttgart</city><country>DE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919515476" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>PREMKUMAR JAYANT</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919535281" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>PREMKUMAR, JAYANT</last-name></addressbook></inventor><inventor mxw-id="PPAR919006075" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>PREMKUMAR, JAYANT</last-name><address><street>1972 Traver Road 115</street><city>Ann Arbor, MI 48105</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919537564" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>HU JIAMU</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919515267" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>HU, JIAMU</last-name></addressbook></inventor><inventor mxw-id="PPAR919018619" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>HU, JIAMU</last-name><address><street>2707 Broadmoor Drive</street><city>Rochester Hills, MI 48309</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919505425" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LOBBESTAEL BRAD</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919546370" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LOBBESTAEL, BRAD</last-name></addressbook></inventor><inventor mxw-id="PPAR919014146" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LOBBESTAEL, BRAD</last-name><address><street>14140 Cole Road</street><city>Linden, MI 48451</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919516724" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>WU HSIEN-CHENG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919539669" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>WU, HSIEN-CHENG</last-name></addressbook></inventor><inventor mxw-id="PPAR919017255" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>WU, HSIEN-CHENG</last-name><address><street>43011 Brookstone Drive</street><city>Novi, MI 48377</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919013870" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dreiss</last-name><iid>100060570</iid><address><street>Patentanwälte Gerokstrasse 1</street><city>70188 Stuttgart</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012025346-W"><document-id><country>US</country><doc-number>2012025346</doc-number><kind>W</kind><date>20120216</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012154248-A1"><document-id><country>WO</country><doc-number>2012154248</doc-number><kind>A1</kind><date>20121115</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549843765" load-source="docdb">AL</country><country mxw-id="DS549843566" load-source="docdb">AT</country><country mxw-id="DS549843770" load-source="docdb">BE</country><country mxw-id="DS549763508" load-source="docdb">BG</country><country mxw-id="DS549763877" load-source="docdb">CH</country><country mxw-id="DS549857647" load-source="docdb">CY</country><country mxw-id="DS549843567" load-source="docdb">CZ</country><country mxw-id="DS549843021" load-source="docdb">DE</country><country mxw-id="DS549857648" load-source="docdb">DK</country><country mxw-id="DS549857649" load-source="docdb">EE</country><country mxw-id="DS549774705" load-source="docdb">ES</country><country mxw-id="DS549763517" load-source="docdb">FI</country><country mxw-id="DS549763518" load-source="docdb">FR</country><country mxw-id="DS549843771" load-source="docdb">GB</country><country mxw-id="DS549857654" load-source="docdb">GR</country><country mxw-id="DS549843772" load-source="docdb">HR</country><country mxw-id="DS549843568" load-source="docdb">HU</country><country mxw-id="DS549763878" load-source="docdb">IE</country><country mxw-id="DS549843773" load-source="docdb">IS</country><country mxw-id="DS549763519" load-source="docdb">IT</country><country mxw-id="DS549857655" load-source="docdb">LI</country><country mxw-id="DS549843026" load-source="docdb">LT</country><country mxw-id="DS549843569" load-source="docdb">LU</country><country mxw-id="DS549843027" load-source="docdb">LV</country><country mxw-id="DS549843028" load-source="docdb">MC</country><country mxw-id="DS549916046" load-source="docdb">MK</country><country mxw-id="DS549916047" load-source="docdb">MT</country><country mxw-id="DS549774706" load-source="docdb">NL</country><country mxw-id="DS549763520" load-source="docdb">NO</country><country mxw-id="DS549774707" load-source="docdb">PL</country><country mxw-id="DS549763879" load-source="docdb">PT</country><country mxw-id="DS549774708" load-source="docdb">RO</country><country mxw-id="DS549763880" load-source="docdb">RS</country><country mxw-id="DS549774725" load-source="docdb">SE</country><country mxw-id="DS549763885" load-source="docdb">SI</country><country mxw-id="DS549916048" load-source="docdb">SK</country><country mxw-id="DS549916049" load-source="docdb">SM</country><country mxw-id="DS549857656" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA101900402" ref-ucid="WO-2012154248-A1" lang="EN" load-source="patent-office"><p num="0000">A controller. The controller includes a processor and a non-transitory computer readable medium. The processor is configured to receive the speed of a first driven wheel from a wheel speed sensor and the speed of a drive shaft from a drive shaft sensor. The non-transistory computer readable medium includes program instructions executed by the processor for determining a speed of a second driven wheel based on a plurality of detected speeds of the first driven wheel and detected speeds of the drive shaft over time.</p></abstract><abstract mxw-id="PA102368310" ref-ucid="WO-2012154248-A1" lang="EN" source="national office" load-source="docdb"><p>A controller. The controller includes a processor and a non-transitory computer readable medium. The processor is configured to receive the speed of a first driven wheel from a wheel speed sensor and the speed of a drive shaft from a drive shaft sensor. The non-transistory computer readable medium includes program instructions executed by the processor for determining a speed of a second driven wheel based on a plurality of detected speeds of the first driven wheel and detected speeds of the drive shaft over time.</p></abstract><abstract mxw-id="PA101900403" ref-ucid="WO-2012154248-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention porte sur un dispositif de commande. Le dispositif de commande comprend un processeur et un support lisible par un ordinateur non-transitoire. Le processeur est configuré de façon à recevoir la vitesse d'une première roue entraînée à partir d'un capteur de vitesse de roue et la vitesse d'un arbre d'entraînement à partir d'un capteur d'arbre d'entraînement. Le support lisible par un ordinateur non-transitoire comprend des instructions de programme exécutées par le processeur pour déterminer une vitesse d'une seconde roue entraînée sur la base d'une pluralité de vitesses détectées de la première roue entraînée et de vitesses détectées de l'arbre d'entraînement au cours du temps.</p></abstract><abstract mxw-id="PA102368311" ref-ucid="WO-2012154248-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention porte sur un dispositif de commande. Le dispositif de commande comprend un processeur et un support lisible par un ordinateur non-transitoire. Le processeur est configuré de façon à recevoir la vitesse d'une première roue entraînée à partir d'un capteur de vitesse de roue et la vitesse d'un arbre d'entraînement à partir d'un capteur d'arbre d'entraînement. Le support lisible par un ordinateur non-transitoire comprend des instructions de programme exécutées par le processeur pour déterminer une vitesse d'une seconde roue entraînée sur la base d'une pluralité de vitesses détectées de la première roue entraînée et de vitesses détectées de l'arbre d'entraînement au cours du temps.</p></abstract><description mxw-id="PDES52505120" ref-ucid="WO-2012154248-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> WHEEL SPEED ESTIMATION USING A DRIVETRAIN MODEL </p><p id="p0002" num="0002"> BACKGROUND </p><p id="p0003" num="0003">[0001] The invention relates to systems and methods for determining the speed of a driven wheel. Specifically, the invention determines the speed of a driven wheel using the speed of a drive shaft and the speed of a second driven wheel, and compensates for timing factors. </p><p id="p0004" num="0004">[0002] Vehicle systems, such as electronic stability control systems, require knowledge of the speed of each of the wheels of the vehicle. The speed of the wheels needs to be accurately determined in near real time (e.g., every 5 milliseconds). To achieve this, many modern vehicles use wheel speed sensors on each wheel with the sensors hard-wired to the control system or linked via a communication bus. </p><p id="p0005" num="0005">SUMMARY </p><p id="p0006" num="0006">[0003] In one embodiment, the invention provides a controller. The controller includes a processor and a non-transitory computer readable medium. The processor is configured to receive the speed of a first driven wheel from a wheel speed sensor and the speed of a drive shaft from a drive shaft sensor. The non-transistory computer readable medium includes program instructions executed by the processor for determining a speed of a second driven wheel based on a plurality of detected speeds of the first driven wheel and detected speeds of the drive shaft over time. </p><p id="p0007" num="0007">[0004] In another embodiment the invention provides a method of determining a speed of a first wheel of a vehicle. The vehicle includes a controller, a differential, a second driven wheel, and a drive shaft. The first and second wheels are driven by the drive shaft. The method includes detecting a speed of the second driven wheel, the second driven wheel driven by the differential, detecting a speed of the drive shaft, the drive shaft driving the differential, transmitting the speed of the second driven wheel to the controller, transmitting the speed of the drive shaft to the controller, compensating for delays in transmission of the speed of the second driven wheel and the drive shaft, compensating for differences in when the speed of the second driven wheel is detected and when the speed of the drive shaft is detected, and determining a speed of the first wheel, using the speed of the second driven 
<!-- EPO <DP n="4"/>-->
 wheel, the speed of the drive shaft, and the compensating acts, the first wheel driven by the differential. </p><p id="p0008" num="0008">[0005] Other aspects of the invention will become apparent by consideration of the detailed description and accompanying drawings. </p><p id="p0009" num="0009">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0010" num="0010">[0006] Fig. 1 is a block diagram of a vehicle. </p><p id="p0011" num="0011">[0007] Fig. 2 is a chart showing an actual wheel speed and communication and computation delays. </p><p id="p0012" num="0012">[0008] Fig. 3 is a chart showing the impact of different update intervals for a plurality of speed sensors on a calculation of a wheel speed. </p><p id="p0013" num="0013">[0009] Figs. 4A and 4B are a schematic of an acceleration model for determining a wheel speed. </p><p id="p0014" num="0014">[0010] Fig. 5 is an exploded view of an open differential showing various torque transfer values. </p><p id="p0015" num="0015">DETAILED DESCRIPTION </p><p id="p0016" num="0016">[0011] Before any embodiments of the invention are explained in detail, it is to be understood that the invention is not limited in its application to the details of construction and the arrangement of components set forth in the following description or illustrated in the following drawings. The invention is capable of other embodiments and of being practiced or of being carried out in various ways. </p><p id="p0017" num="0017">[0012] Fig. 1 shows a block diagram of a vehicle 100. The vehicle 100 includes a right front wheel 105, a left front wheel 110, a right rear wheel 115, a left rear wheel 120, an engine 125, a transmission 130, a drive shaft 135, a drive shaft sensor 140, a differential 145, a right rear axle 150, a left rear axle 155, a right front wheel speed sensor 160, a left front wheel speed sensor 165, and a right rear wheel speed sensor 170. The vehicle 100 also includes a controller 175 (e.g., an electronic stability controller (ESC)) and a communication network 180 (e.g., a controller area network (CAN) bus). In some embodiments, the 
<!-- EPO <DP n="5"/>-->
 controller 175 and/or other modules include a processor (e.g., a microprocessor, microcontroller, ASIC, DSP, etc.) and memory (e.g., flash, ROM, RAM, EEPROM, etc.; i.e., a non-transitory computer readable medium), which can be internal to the processor, external to the processor, or both. The processor executes program code stored in the memory. </p><p id="p0018" num="0018">Portions of the invention can be implemented in hardware or software or a combination of both. </p><p id="p0019" num="0019">[0013] The wheel speed sensors 160, 165, and 170 detect the speed of their respective wheels and communicate that speed to the controller 175. The speed can be communicated via the communication network 180 or directly (e.g., an analog signal, a PWM signal, etc.). Similarly, the drive shaft speed sensor 140 detects the speed of the drive shaft 135 and communicates that speed to the controller 175. The differential 145 is driven by the drive shaft 135 and divides the torque between the left and right rear wheels 120 and 115 such that the wheels can turn at different rates. The sum of the speeds of the left and right rear wheels 120 and 115 is two times the speed of the drive shaft 135 (assuming a one to one gear ratio). The controller 175 estimates the speed of one of the driven wheels 115 and 120 as described below (for the description below, the controller 175 estimates the speed of the left rear wheel 120). </p><p id="p0020" num="0020">[0014] The speed of the left rear wheel 120 can be approximated using equation 1 below. Solving for L, the determined speed of the left rear wheel, provides equation 2 below: </p><p id="p0021" num="0021"> T = (L + R)/ 2 (eq. 1) </p><p id="p0022" num="0022">L = 2T - R (eq. 2) </p><p id="p0023" num="0023"> where T is the measured speed of the drive shaft 135, and </p><p id="p0024" num="0024"> R is the measured speed of the right rear wheel 115. </p><p id="p0025" num="0025">[0015] Determining the speed of the left rear wheel 120 using these equations is generally accurate enough for use with anti-lock braking systems which update approximately every 50 msec. However, an ESC system updates approximately every 5 msec. If the measured speeds of the right rear wheel 1 15 and/or the drive shaft 135 are communicated to the controller 175 via a communications network 180, the controller 175 receives the measured speeds after a delay exceeding the ESC update time. For example, Fig. 2 shows delays that were measured in a system using a CAN bus. The CAN bus had a worst case delay in providing the speed information to the controller 175 of 15 msec. In addition, the controller 
<!-- EPO <DP n="6"/>-->
 175 requires time to process the data it receives. In this case, up to an additional 11 msec. The total delay reached 26 msec. A delay of 26 msec is more than five times the update time for the ESC system. </p><p id="p0026" num="0026">[0016] The error between actual speed of a wheel and the calculated wheel speed (e.g., due to the delays above) can be further exacerbated by differences in the update speeds of the different sensors. For example, Fig. 3 shows the deviation of the calculated speed of a left rear wheel 120 where the right rear wheel speed sensor updates every 5 msec and the drive shaft speed sensor 140 updates every 7 msec. </p><p id="p0027" num="0027">[0017] To improve the performance of the system, more accurate determination of the wheel speed is needed. By taking into account past conditions (versus using only the latest readings), models can be developed to accurately estimate wheel speed. </p><p id="p0028" num="0028">[0018] For an open differential, the speed of a driven left wheel is defined by </p><p id="p0029" num="0029"> L(k) = 2T(k) - R(k) </p><p id="p0030" num="0030"> where: </p><p id="p0031" num="0031"> k is the control loop cycle, </p><p id="p0032" num="0032"> L(k) is the calculated speed of the left driven wheel at cycle k, T(k) is the measured transmission output speed at cycle k, and R(k) is the measured speed of the right driven wheel at cycle k. </p><p id="p0033" num="0033"> [0019] Considering errors along with delays in the inputs for T and R, L(k) becomes</p><p id="p0034" num="0034">L(k) = F(T(k), T(k - 1) . . . R(k), R(k - 1) . . . L(k), L(k - 1) . . . other vehicle states) where: </p><p id="p0035" num="0035"> F is a function of a plurality of input variables. </p><p id="p0036" num="0036">[0020] The invention uses models to estimate the function F. Three methods or models are used: acceleration, Taylor Series, and drivetrain modeling. The acceleration method uses the acceleration of the left driven wheel to estimate the speed of the left driven wheel at cycle k. The following equation is used to perform the estimation: </p><p id="p0037" num="0037"> L(k) = L(k - l) + L'(k - l)(dt) </p><p id="p0038" num="0038"> where: </p><p id="p0039" num="0039"> L' is the first derivative of L, and </p><p id="p0040" num="0040"> dt is the cycle time. </p><p id="p0041" num="0041"> [0021] The calculations can be smoothed using a weighted average of several past cycles or a filtered value. Empirical vehicle data can also be used to limit a change in the estimated speed of the wheel to an absolute change. Acceleration can also be modeled as discussed 
<!-- EPO <DP n="7"/>-->
 below in relation to a drivetrain model. Figs. 4A and 4B show a schematic of an acceleration model 100. A sensed speed of a right wheel 105 and a sensed speed of a driveshaft 110 are input into the model. As discussed above, the wheel speed sensor xxx and the driveshaft speed sensor xxx update their outputs at different time intervals (e.g., 5 msec for the wheel speed sensor xxx and 7 msec for the driveshaft speed sensor xxx). By using various multipliers 115, adder/subtractors 120, and delays 125, the model 100 is able to compensate for the differences in signal updates. A switch 130 connects a correct signal to an output 135. The model 100 includes a three additional outputs 140, 145, and 150 for testing purposes. </p><p id="p0042" num="0042">[0022] A Taylor Series is a representation of a function as an infinite sum of terms calculated from the values of its derivatives at a single point. A Taylor Series for modeling the speed of a left driven wheel takes the form: </p><p id="p0043" num="0043"> L(k) = L(k - 1) + L'(k - l)(dt)/l ! + L"(k - l)(dt)<sup>2</sup>/2! </p><p id="p0044" num="0044"> where: </p><p id="p0045" num="0045"> L' and L" are derivatives of L, and </p><p id="p0046" num="0046"> dt is the cycle time. </p><p id="p0047" num="0047">[0023] Again, the calculations can be smoothed using a weighted average of several past cycles or a filtered value. Empirical vehicle data can also be used to limit a change in the estimated speed of the wheel to an absolute change. </p><p id="p0048" num="0048">[0024] L(k) can also be estimated using various vehicle states including applied brake torque, friction co-efficient, and load on a wheel among others. The vehicle states can be calculated using a drivetrain model. </p><p id="p0049" num="0049">[0025] An example drivetrain model includes models of the (1) engine and torque converter pump assembly, (2) torque converter turbine and transmission input shaft, (3) transmission output shaft and drive shaft, (4) ring gear of the open differential, (5) torque transfer from the engine to the differential, (6) drive axle torque, and (7) total drive dynamics. </p><p id="p0050" num="0050">[0026] An engine and torque converter pump assembly model calculates the available torque converter pump output using engine combustion torque. Neglecting the elastic and friction term, the equation of motion can be simplified as: </p><p id="p0051" num="0051"> T<sub>p</sub> = T<sub>e</sub> - J<sub>e</sub> w<sub>e</sub> (eq. 1) </p><p id="p0052" num="0052"> where: </p><p id="p0053" num="0053"> T<sub>p</sub> is the torque output at the pump assembly, </p><p id="p0054" num="0054"> T<sub>e</sub> is the engine torque resulting from combustion, 
<!-- EPO <DP n="8"/>-->
 J<sub>e</sub> is the moment of inertia of the engine crankshaft, flywheel and torque converter pump assembly, and </p><p id="p0055" num="0055"> w<sub>e</sub> is the angular acceleration of the engine crankshaft, flywheel and torque converter pump assembly. In the software, the engine acceleration can be calculated from the engine speed. </p><p id="p0056" num="0056"> Note: elastic, friction, and damping are neglected in the equations. </p><p id="p0057" num="0057">[0028] A torque converter turbine and transmission input shaft model calculates the available torque at transmission input shaft using: </p><p id="p0058" num="0058"> Ti = T<sub>p</sub>/(l/v) - Ji wi (eq. 2) </p><p id="p0059" num="0059"> where: </p><p id="p0060" num="0060"> Ti is the torque output at the transmission input shaft, </p><p id="p0061" num="0061"> w<sub>\</sub> is the angular acceleration of the transmission input shaft, </p><p id="p0062" num="0062"> v is the speed ratio for the automatic transmission and is defined as, </p><p id="p0063" num="0063"> w<sub>\</sub> = w<sub>e</sub>/v (Note: The above relation is not true for the angular acceleration of the torque converter.), </p><p id="p0064" num="0064"> G(l/v) is the torque converter multiplication factor as a function of 1/v, and Ji is the moment of inertia of the turbine and transmission input shaft. </p><p id="p0065" num="0065"> [0029] A transmission output shaft and drive shaft model calculates the available torque at drive shaft from:</p><p id="p0066" num="0066"><img id="imgf000008_0001" he="5" wi="127" file="imgf000008_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0067" num="0067"> where: </p><p id="p0068" num="0068"> Td is the available torque at the drive shaft pinion gear, </p><p id="p0069" num="0069"> G<sub>tj</sub> is the transmission gear ratio at jth gear, </p><p id="p0070" num="0070"> Jd is the moment of inertia of the drive shaft (include transmission output shaft and its gear set), and </p><p id="p0071" num="0071"> Wd is the angular acceleration of the transmission output shaft. </p><p id="p0072" num="0072"> [0030] The angular acceleration has the following relation:</p><p id="p0073" num="0073"><img id="imgf000008_0002" he="5" wi="129" file="imgf000008_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0074" num="0074">[0031] The ring gear of the open differential model calculates the available torque at open differential ring gear using: </p><p id="p0075" num="0075"> T<sub>rg</sub> = T<sub>D</sub>G<sub>A</sub> - JrgWrg (eq. 4) where: </p><p id="p0076" num="0076"> T<sub>rg</sub> is the available torque at the ring gear (also referred to as Cardan torque). GA is the axle ratio, </p><p id="p0077" num="0077"> J<sub>rg</sub> is the ring gear assembly moment of inertia, and </p><p id="p0078" num="0078"> w<sub>rg</sub> is the angular acceleration of the ring gear (also referred to as Cardan acceleration). 
<!-- EPO <DP n="9"/>-->
 [0032] The speed relation among ring gear, drive shaft and wheel speed is: w<sub>rg</sub> = w<sub>d</sub>/G<sub>A</sub> = (WA<sub>R</sub> + WA<sub>L</sub>) 2 (eq. 4a) where: </p><p id="p0079" num="0079"> WA<sub>R</sub> is right driven axle acceleration, and </p><p id="p0080" num="0080"> WA<sub>L</sub> is left driven axle acceleration. </p><p id="p0081" num="0081"> [0033] Fig. 5 shows the location of the torque transfer variables in an open differential. </p><p id="p0082" num="0082">[0034] A torque transfer from engine to differential model calculates the available torque at the ring gear. The available torque at the ring gear can be described by engine combustion torque, engine rotational acceleration, and wheel rotational acceleration (a known variable). </p><p id="p0083" num="0083">[0035] Substituting torque equations (1), (2) and (3) into equation (4), results in: </p><p id="p0084" num="0084"> T<sub>rg</sub> = {[T<sub>e</sub> - JeWeMl/v) - JiWi]G,<sub>j</sub> - J<sub>d</sub>w<sub>d</sub>}G<sub>A</sub> - J<sub>rg</sub>w<sub>rg</sub> (eq. 5) </p><p id="p0085" num="0085">[0036] Substituting speed equation (3a) and (4a) into equation 5 and simplifying it results in: </p><p id="p0086" num="0086"> T<sub>rg</sub> =A<sup>l/v</sup>) Gtj G<sub>A</sub> T<sub>e</sub> - 1/ν) G<sub>t</sub>j G<sub>A</sub> JeWe - G<sub>t</sub>j<sup>2</sup> G<sub>A</sub><sup>2</sup> Jl(w<sub>A</sub>R + W<sub>A</sub>L)/2 - G<sub>A</sub><sup>2</sup> Jd(w<sub>A</sub>R +</p><p id="p0087" num="0087">W<sub>A</sub>L)/2 - J<sub>rg</sub>(wAR + W<sub>A</sub>L)/2 (eq. 5a) </p><p id="p0088" num="0088"> where:</p><p id="p0089" num="0089"> (l/v) G<sub>tj</sub> GA T<sub>e</sub> is the engine torque amplified by the torque converter, transmission, and axle,</p><p id="p0090" num="0090"> (l/v) G<sub>t</sub>j GA J<sub>e</sub>We is the torque loss due to engine acceleration, </p><p id="p0091" num="0091"> 2 2 </p><p id="p0092" num="0092"> Gt<sub>j</sub> GA J<sub>I</sub>(WA<sub>R</sub> + WA<sub>L</sub>)/2 is the torque loss due to transmission input shaft acceleration, </p><p id="p0093" num="0093"> GA<sup>2</sup> Jd(wAR + WA<sub>L</sub>)/2 is the torque loss due to transmission output shaft acceleration, and </p><p id="p0094" num="0094"> Jr<sub>g</sub>(wAR + WA<sub>L</sub>)/2 is the torque loss due to ring gear acceleration. 
<!-- EPO <DP n="10"/>-->
</p><p id="p0095" num="0095">[0037] A drive axle torque model calculates the drive axle torque for each drive axle. For an open differential, each drive axle torque is approximately half of the ring gear torque when neglecting torque lost at the spider or similar gear. </p><p id="p0096" num="0096"> TAR ~ T<sub>r</sub>g/2 ~ TRRW + TbR + JAWAR (eq. 6) TAL ~ T<sub>rg</sub>/2 ~ FxLR<sub>w</sub>hi + TbL + JAWAL (eq. 6a) where: </p><p id="p0097" num="0097"> TAR is the right drive axle torque, </p><p id="p0098" num="0098"> TAL is the left drive axle torque, </p><p id="p0099" num="0099"> TbR is the right brake torque, </p><p id="p0100" num="0100"> T<sub>B</sub>L is the left brake torque, </p><p id="p0101" num="0101"> JA is the moment of inertia of a single axle and wheel, and </p><p id="p0102" num="0102"> R<sub>w</sub> i is the wheel radius. </p><p id="p0103" num="0103"> [0038] A total drive dynamics model calculates the available torque at the differential ring gear (Kardan torque): </p><p id="p0104" num="0104"> G(l/v)GtjGATe - G(l l/v)FtjGAJewe - G<sub>tj</sub><sup>2</sup> G<sub>A</sub><sup>2</sup> Ji(w<sub>AR</sub> + w<sub>AL</sub>)/2 - G<sub>A</sub><sup>2</sup> J<sub>d</sub>(w<sub>AR</sub> +</p><p id="p0105" num="0105">W<sub>A</sub>L) 2 - Jrg(WAR + W<sub>A</sub>L) 2 </p><p id="p0106" num="0106">[0039] While the torque consumed at the axle is: </p><p id="p0107" num="0107"> FTLRWH + bL + JAWAL + FTRRWH + TbR + JAWAR </p><p id="p0108" num="0108"> Where: </p><p id="p0109" num="0109"> FTLR<sub>W</sub> is drive torque at the left wheel, </p><p id="p0110" num="0110"> TbL is brake torque at the left wheel, </p><p id="p0111" num="0111"> JAWAL is inertia torque at the left wheel, </p><p id="p0112" num="0112"> FTRR<sub>W</sub> is drive torque at the right wheel, </p><p id="p0113" num="0113"> TbR is brake torque at the right wheel, and </p><p id="p0114" num="0114"> JAWAR is inertia torque at the right wheel. </p><p id="p0115" num="0115"> [0040] Simplifying the total drive dynamics model results in: </p><p id="p0116" num="0116"> [ (1/v) G<sub>t</sub>j G<sub>A</sub>]T<sub>e</sub> - [ (1/v) G<sub>t</sub>j G<sub>A</sub>]J<sub>e</sub>We - JAOAR + W<sub>A</sub>L) ~ (F<sub>TL</sub> + F<sub>TR</sub>)R<sub>wh</sub>i + T<sub>b</sub>L + T<sub>bR</sub> where: </p><p id="p0117" num="0117"> [ (1/v) G<sub>t</sub>j GA] is a drivetrain torque multiplication factor, </p><p id="p0118" num="0118"> T<sub>e</sub> is engine torque, </p><p id="p0119" num="0119"> J<sub>e</sub>We is engine acceleration, </p><p id="p0120" num="0120"> (WAR + WAL) is kardan acceleration, </p><p id="p0121" num="0121"> [/(1/v) G<sub>t</sub>j GA]T<sub>e</sub> is engine torque amplified by the torque converter, transmission and axle, </p><p id="p0122" num="0122"> [/(1/v) G<sub>t</sub>j GA]J<sub>e</sub>w<sub>e</sub> is inertia torque loss at the engine assembly, JA(WAR + WAL) is inertia torque loss at the wheel assembly, </p><p id="p0123" num="0123"> [/(1/v) G<sub>t</sub>j GA]J<sub>e</sub>w<sub>e</sub> - JA(WAR + WAL) is excess torque, </p><p id="p0124" num="0124"> (FTL + F<sub>TR</sub>)R<sub>w</sub> i is total drive torque, </p><p id="p0125" num="0125"> TbL is brake torque at the left wheel, and </p><p id="p0126" num="0126"> TbR is brake torque at the right wheel. 
<!-- EPO <DP n="11"/>-->
 [0041] Another model of the drivetrain can be represented by a linear system of the form: x<sub>1</sub> = Ax + Bu (eq. 6a) </p><p id="p0127" num="0127"> y = Cx (eq. 6b) </p><p id="p0128" num="0128"> where: </p><p id="p0129" num="0129"> x is one or more vehicle states (including the relevant wheel speed), u is one or more system inputs, and </p><p id="p0130" num="0130"> y is one or more measurable vehicle output states that are dependent on x. </p><p id="p0131" num="0131">[0042] A closed loop observer (eqs. 7a and 7b below) can be constructed to estimate the states of x. The observer estimates the state of x faster than the system operates, allowing any errors to converge to zero. By feeding errors back into the observed and actual vehicle outputs, the system corrects, driving the error to zero. Thus: </p><p id="p0132" num="0132"> X2 = Ax<sub>3</sub> + Bu L(y - yi) (eq. 7a) </p><p id="p0133" num="0133"> yi = Cx<sub>3</sub> (eq. 7b) </p><p id="p0134" num="0134"> where: </p><p id="p0135" num="0135"> X2 is the estimated vehicle states (from the drivetrain model), and yi is the observer vehicle outputs. </p><p id="p0136" num="0136"> [0043] Combining equations 6a and 6b with 7a and 7b results in: </p><p id="p0137" num="0137"> xi - x<sub>2</sub> = A(x - x<sub>3</sub>) - L(y - yi) </p><p id="p0138" num="0138"> y - yi = C(x - x<sub>3</sub>) </p><p id="p0139" num="0139">[0044] The resulting error between observed and actual vehicle states (including wheel speed) is: 
<img id="imgf000011_0001" he="13" wi="26" file="imgf000011_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0140" num="0140">[0045] Because these equations have no inputs, (A - LC) can be designed to be solved for any speed. Therefore, (A - LC) is designed to decay the error to zero for initial conditions. The vector L can be obtained and used in the observer (eq. 7a) to solve for the wheel speed. </p><p id="p0141" num="0141">[0046] The use of the above models enables a speed of a driven wheel to be predicted accurately. This allows a wheel speed sensor to be eliminated saving costs while improving the performance of systems that use the wheel speed. </p><p id="p0142" num="0142">[0047] Various features and advantages of the invention are set forth in the following claims. 
</p></description><claims mxw-id="PCLM46160901" ref-ucid="WO-2012154248-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="12"/>--> CLAIMS What is claimed is: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A controller for a wheel speed detection system, the controller comprising: </claim-text><claim-text> a processor configured to receive the speed of a first driven wheel from a wheel speed sensor and the speed of a drive shaft from a drive shaft sensor; and </claim-text><claim-text> a non-transistory computer readable medium including program instructions executed by the processor for determining a speed of a second driven wheel based on a plurality of detected speeds of the first driven wheel and detected speeds of the drive shaft over time. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The controller of claim 1, wherein the processor determines the speed of the second driven wheel based on an acceleration of the second driven wheel over time. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The controller of claim 1, wherein the processor determines the speed of the second driven wheel based a Taylor Series calculation. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The controller of claim 3, wherein the processor determines the speed of the second driven wheel using a formula </claim-text><claim-text> L(k) = L(k - 1) + L'(k - l)(dt)/l ! + L"(k - l)(dt)<sup>2</sup>/2! </claim-text><claim-text> where: </claim-text><claim-text> L is the speed of the second driven wheel, </claim-text><claim-text> L' and L" are derivatives of L, </claim-text><claim-text> dt is a cycle time, and </claim-text><claim-text> k is a cycle. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The controller of claim 1, wherein the processor smoothes the determined speed of the second driven wheel using at least one of a weighted average and a filter. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The controller of claim 1, wherein the processor determines the speed of the second driven wheel using a model of a drivetrain. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The controller of claim 1 , wherein the processor predicts the speed of the second driven wheel using a closed loop observer which converges errors in sensed parameters due to transmission delays and calculation delays to zero. <!-- EPO <DP n="13"/>--> </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. A method of determining a speed of a first wheel of a vehicle, the vehicle including a controller, a differential, a second driven wheel, and a drive shaft, the method comprising: detecting a speed of the second driven wheel, the second driven wheel driven by the differential; </claim-text><claim-text> detecting a speed of the drive shaft, the drive shaft driving the differential; </claim-text><claim-text> transmitting the speed of the second driven wheel to the controller; </claim-text><claim-text> transmitting the speed of the drive shaft to the controller; </claim-text><claim-text> compensating for delays in transmission of the speed of the second driven wheel and the drive shaft; </claim-text><claim-text> compensating for differences in when the speed of the second driven wheel is detected and when the speed of the drive shaft is detected; and </claim-text><claim-text> determining a speed of the first wheel, using the speed of the second driven wheel, the speed of the drive shaft, and the compensating acts, the first wheel driven by the differential. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 8, wherein the speed of the first wheel is determined using an acceleration of the first wheel over time. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 8, wherein the speed of the first wheel is determined using a Taylor Series calculation. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method of claim 8, wherein the speed of the first wheel is determined using a formula </claim-text><claim-text> L(k) = L(k - 1) + L'(k - l)(dt)/l ! + L"(k - l)(dt)<sup>2</sup>/2! </claim-text><claim-text> where: </claim-text><claim-text> L is the speed of the second driven wheel, </claim-text><claim-text> L' and L" are derivatives of L, </claim-text><claim-text> dt is a cycle time, and </claim-text><claim-text> k is a cycle. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method of claim 8, wherein the determined speed of the first wheel is smoothed using at least one of a weighted average and a filter. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method of claim 8, wherein the speed of the first wheel is determined using a model of a drivetrain of the vehicle. <!-- EPO <DP n="14"/>--> </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method of claim 13, wherein the model includes a closed loop observer which operates such that errors in sensed parameters due to transmission and calculation delays converge to zero, enabling the speed of the second driven wheel to be accurately predicted. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
