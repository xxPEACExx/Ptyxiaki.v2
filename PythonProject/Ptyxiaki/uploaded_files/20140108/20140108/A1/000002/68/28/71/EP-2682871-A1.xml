<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682871-A1" country="EP" doc-number="2682871" kind="A1" date="20140108" family-id="40560202" file-reference-id="318261" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146584881" ucid="EP-2682871-A1"><document-id><country>EP</country><doc-number>2682871</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13186404-A" is-representative="NO"><document-id mxw-id="PAPP154847073" load-source="docdb" format="epo"><country>EP</country><doc-number>13186404</doc-number><kind>A</kind><date>20080723</date><lang>EN</lang></document-id><document-id mxw-id="PAPP207570287" load-source="docdb" format="original"><country>EP</country><doc-number>13186404.3</doc-number><date>20080723</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140556999" ucid="EP-08796486-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>08796486</doc-number><kind>A</kind><date>20080723</date></document-id></priority-claim><priority-claim mxw-id="PPC140555861" ucid="EP-13186404-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>13186404</doc-number><kind>A</kind><date>20080723</date></document-id></priority-claim><priority-claim mxw-id="PPC140553978" ucid="US-2008070906-W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2008070906</doc-number><kind>W</kind><date>20080723</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1873986394" load-source="docdb">G06F  13/16        20060101AFI20161121BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1873986395" load-source="docdb">G06F   3/06        20060101ALI20161121BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1873986396" load-source="docdb">G06F   1/32        20060101ALI20161121BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1687189676" load-source="docdb" scheme="CPC">Y02D  10/152       20180101 LA20180219BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1687189677" load-source="docdb" scheme="CPC">Y02D  10/24        20180101 LA20180219BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989620241" load-source="docdb" scheme="CPC">G06F2206/1012      20130101 LA20131205BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989629668" load-source="docdb" scheme="CPC">G06F  13/161       20130101 FI20131202BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989634335" load-source="docdb" scheme="CPC">G06F   3/061       20130101 LI20131205BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989634674" load-source="docdb" scheme="CPC">G06F   1/3243      20130101 LI20131129BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989637602" load-source="docdb" scheme="CPC">G06F   3/0635      20130101 LI20131205BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989638543" load-source="docdb" scheme="CPC">G06F   1/329       20130101 LI20131129BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989646817" load-source="docdb" scheme="CPC">G06F   3/0683      20130101 LI20131205BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359276" lang="DE" load-source="patent-office">Verarbeitungssystem mit Zugriffssteuerung für externen Speicher</invention-title><invention-title mxw-id="PT132359277" lang="EN" load-source="patent-office">Processing system with external memory access control</invention-title><invention-title mxw-id="PT132359278" lang="FR" load-source="patent-office">Système de traitement avec commande d'accès à une mémoire externe</invention-title><citations><patent-citations><patcit mxw-id="PCIT367057300" load-source="docdb" ucid="EP-1927985-A2"><document-id format="epo"><country>EP</country><doc-number>1927985</doc-number><kind>A2</kind><date>20080604</date></document-id><sources><source name="SEA" category="XY" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242942519" load-source="docdb" ucid="US-7064994-B1"><document-id format="epo"><country>US</country><doc-number>7064994</doc-number><kind>B1</kind><date>20060620</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45210611" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><related-documents><relation type="division"><child-doc ucid="EP-13186404-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>13186404</doc-number><kind>A</kind><date>20080723</date></document-id></child-doc><parent-doc ucid="EP-08796486.2"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>08796486.2</doc-number><date>20080723</date></document-id><parent-grant-document ucid="EP-2318935-B1"><document-id><country>EP</country><doc-number>2318935</doc-number><kind>B1</kind><date>20141119</date></document-id></parent-grant-document></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR919545642" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MICRO MOTION INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919504669" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MICRO MOTION INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR919014719" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Micro Motion Inc.</last-name><iid>100177939</iid><address><street>7070 Winchester Circle</street><city>Boulder, CO 80301</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919539599" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HAYS PAUL</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919540741" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HAYS, PAUL</last-name></addressbook></inventor><inventor mxw-id="PPAR919015852" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HAYS, PAUL</last-name><address><street>4091 Longhorn Drive</street><city>Lafayette, CO 80026</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919536954" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MCANALLY CRAIG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919544656" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MCANALLY, CRAIG</last-name></addressbook></inventor><inventor mxw-id="PPAR919017240" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MCANALLY, CRAIG</last-name><address><street>594 East 131st Way</street><city>Thornton, CO 80241</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919541071" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>MANSFIELD WILLIAM</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919510207" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>MANSFIELD, WILLIAM</last-name></addressbook></inventor><inventor mxw-id="PPAR919007292" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>MANSFIELD, WILLIAM</last-name><address><street>475 Deertrail Road</street><city>Boulder, CO 80302</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919013921" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hartwell, Ian Peter</last-name><suffix>et al</suffix><iid>101328370</iid><address><street>Ollila Law Limited First Floor, Unit 5, The Courtyard Wixford Park</street><city>Bidford on Avon Warwickshire B50 4JS</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549813981" load-source="docdb">AT</country><country mxw-id="DS549812693" load-source="docdb">BE</country><country mxw-id="DS549741980" load-source="docdb">BG</country><country mxw-id="DS549738394" load-source="docdb">CH</country><country mxw-id="DS549739410" load-source="docdb">CY</country><country mxw-id="DS549739411" load-source="docdb">CZ</country><country mxw-id="DS549740060" load-source="docdb">DE</country><country mxw-id="DS549812694" load-source="docdb">DK</country><country mxw-id="DS549739412" load-source="docdb">EE</country><country mxw-id="DS549907430" load-source="docdb">ES</country><country mxw-id="DS549741993" load-source="docdb">FI</country><country mxw-id="DS549741994" load-source="docdb">FR</country><country mxw-id="DS549740061" load-source="docdb">GB</country><country mxw-id="DS549812695" load-source="docdb">GR</country><country mxw-id="DS549740062" load-source="docdb">HR</country><country mxw-id="DS549739413" load-source="docdb">HU</country><country mxw-id="DS549738395" load-source="docdb">IE</country><country mxw-id="DS549812696" load-source="docdb">IS</country><country mxw-id="DS549741995" load-source="docdb">IT</country><country mxw-id="DS549812697" load-source="docdb">LI</country><country mxw-id="DS549740063" load-source="docdb">LT</country><country mxw-id="DS549813986" load-source="docdb">LU</country><country mxw-id="DS549740064" load-source="docdb">LV</country><country mxw-id="DS549740093" load-source="docdb">MC</country><country mxw-id="DS549813987" load-source="docdb">MT</country><country mxw-id="DS549813988" load-source="docdb">NL</country><country mxw-id="DS549738396" load-source="docdb">NO</country><country mxw-id="DS549813989" load-source="docdb">PL</country><country mxw-id="DS549907431" load-source="docdb">PT</country><country mxw-id="DS549813994" load-source="docdb">RO</country><country mxw-id="DS549813995" load-source="docdb">SE</country><country mxw-id="DS549740094" load-source="docdb">SI</country><country mxw-id="DS549738397" load-source="docdb">SK</country><country mxw-id="DS549812702" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673053" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A method for executing a processing routine that utilizes an external memory is provided. The processing routine requires more than one external memory access. The method comprises the step of distributing the external memory access after a predetermined number of external memory accesses.
<img id="iaf01" file="imgaf001.tif" wi="132" he="101" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737198" lang="EN" source="EPO" load-source="docdb"><p>A method for executing a processing routine that utilizes an external memory is provided. The processing routine requires more than one external memory access. The method comprises the step of distributing the external memory access after a predetermined number of external memory accesses.</p></abstract><description mxw-id="PDES63959041" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>TECHNICAL FIELD</u></heading><p id="p0001" num="0001">The present invention relates to a processing system, and more particularly, to a method for controlling access to an external memory while executing a processing routine.</p><heading id="h0002"><u>BACKGROUND OF THE INVENTION</u></heading><p id="p0002" num="0002">Processing systems are generally known in the art and are utilized in a variety of devices. Some processing systems have an internal memory which supplies all of the processing system's data and/or instructions. However, internal memories have limited capacities and capabilities and thus, in some situations, the processing system is connected to an external memory, which augments the storage space of the internal memory. Additionally, external memories allow multiple processing systems to access the memory and therefore provide a greater flexibility.</p><p id="p0003" num="0003">A drawback to the use of an external memory is that accessing an external memory generally requires a greater amount of power than required to access an internal memory and in some situations can take a longer amount of time. Thus, in situations where the processing system is under power and/or time constraints, there is an incentive to minimize the external memory accesses. However, it may not be possible to include all of the data and/or instructions in the internal memory and thus, an external memory is often required.</p><p id="p0004" num="0004">In prior art processing systems, the external memory is accessed in bursts. In other words, a large block of external memory is accessed substantially consecutively. This results in a spike in the energy demands of the processing system. In environments where the processing system is not under an energy constraint, this type of memory access is adequate. However, where there are power constraints, for example, if the processing system is powered via a two-wire loop, a spike in required power can adversely affect components that share a power source with the processing system as the power delivered to the processing system is limited, in part, by the signaling sent on the two-wire loop. The example of the two-wire loop is merely an example and should not limit the scope of the invention as there are numerous other situations where the power delivered to a processing system is limited. Although prior art processing systems have<!-- EPO <DP n="2"> --> attempted to reduce the overall power consumption, this is not always an adequate solution because even if the overall power consumption is reduced, temporary spikes in power consumption can still adversely affect the system.</p><p id="p0005" num="0005">Therefore, the present invention provides a method for executing a processing routine while controlling access to an external memory.</p><heading id="h0003"><u>ASPECTS</u></heading><p id="p0006" num="0006">According to an aspect of the invention, a method for executing a processing routine utilizing an external memory and requiring more than one external memory access, comprises the step of:
<ul><li>distributing the external memory accesses based on a predetermined number of consecutive external memory accesses.</li></ul></p><p id="p0007" num="0007">Preferably, the method further comprises the step of distributing the external memory accesses such that the number of consecutive external memory accesses is minimized.</p><p id="p0008" num="0008">Preferably, the method further comprises the step of distributing the external memory accesses substantially evenly.</p><p id="p0009" num="0009">Preferably, the step of distributing the external memory accesses comprises temporarily interrupting access to the external memory for a predetermined amount of time after a predetermined number of consecutive external memory accesses.</p><p id="p0010" num="0010">Preferably, the processing routine further utilizes an internal memory and wherein the step of distributing external memory accesses comprises interrupting access to the external memory after a predetermined number of external memory accesses with a predetermined number of internal memory accesses.</p><p id="p0011" num="0011">Preferably, the predetermined number of consecutive external memory accesses is based on an available energy supply.</p><p id="p0012" num="0012">According to another aspect of the invention, a method for executing a processing routine utilizing an external memory, comprises the steps of:
<ul><li>determining an available energy supply; and</li><li>accessing the external memory based on the available energy supply.</li></ul></p><p id="p0013" num="0013">Preferably, the method further comprises the step of accessing the external memory only if the available energy supply exceeds a threshold value.<!-- EPO <DP n="3"> --></p><p id="p0014" num="0014">Preferably, the processing routine further utilizes an internal memory and the method further comprises the step of accessing the internal memory if the available energy supply does not exceed a threshold value.</p><p id="p0015" num="0015">Preferably, the method further comprises the step of distributing the external memory accesses if the available energy supply does not exceed a threshold value.</p><p id="p0016" num="0016">Preferably, the method further comprises the step of distributing the external memory accesses based on a predetermined number of consecutive external memory accesses.</p><p id="p0017" num="0017">Preferably, the predetermined number of consecutive external memory accesses is determined at least in part by the available energy supply level.</p><p id="p0018" num="0018">Preferably, the processing routine further utilizes an internal memory and the method further comprises the step of distributing access to the external memory by interrupting access to the external memory after a predetermined number of consecutive external memory accesses with a predetermined number of internal memory accesses.</p><p id="p0019" num="0019">According to another aspect of the invention, a processing system, comprising:
<ul><li>an external memory; and</li><li>a processor adapted to execute a processing routine utilizing the external memory, wherein the processor is configured to distribute external memory accesses based on a predetermined number of consecutive external memory accesses.</li></ul></p><p id="p0020" num="0020">Preferably, the processor is further configured to distribute the external memory accesses such that the number of consecutive external memory accesses is minimized.</p><p id="p0021" num="0021">Preferably, the processor is further configured to substantially evenly distribute the external memory accesses.</p><p id="p0022" num="0022">Preferably, the processor is further configured to temporarily interrupt access to the external memory for a predetermined amount of time after a predetermined number of consecutive external memory accesses.</p><p id="p0023" num="0023">Preferably, the processing system further comprises an internal memory, wherein the processor is further configured to distribute external memory accesses by interrupting access to the external memory after a predetermined number of external memory accesses with a predetermined number of internal memory accesses.</p><p id="p0024" num="0024">Preferably, the predetermined number of consecutive external memory accesses is based on an available energy supply.<!-- EPO <DP n="4"> --></p><heading id="h0004"><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></heading><p id="p0025" num="0025"><ul><li><figref idrefs="f0001">FIG. 1</figref> shows a processing system 100 according to an embodiment of the invention.</li><li><figref idrefs="f0002">FIG. 2</figref> shows a graph of the energy consumption of the processing system while accessing the memories.</li><li><figref idrefs="f0003">FIG. 3</figref> shows the memory accesses of a processing system according to the prior art.</li><li><figref idrefs="f0003">FIG. 4</figref> shows a graph of the energy consumption of the processing system according to the prior art.</li><li><figref idrefs="f0004">FIG. 5</figref> shows the memory accesses of a processing system according to an embodiment of the invention.</li><li><figref idrefs="f0005">FIG. 6</figref> shows the memory accesses of a processing system according to an embodiment of the invention.</li><li><figref idrefs="f0005">FIG. 7</figref> shows a graph of the power consumption of meter electronics according to an embodiment of the invention.</li><li><figref idrefs="f0006">FIG. 8</figref> shows the memory accesses of a processing system according to an embodiment of the invention.</li><li><figref idrefs="f0006">FIG. 9</figref> shows a graph of the power consumption of meter electronics according to an embodiment of the invention.</li></ul></p><heading id="h0005"><u>DETAILED DESCRIPTION OF THE INVENTION</u></heading><p id="p0026" num="0026"><figref idrefs="f0001 f0002 f0003 f0004 f0005 f0006">FIGS. 1 - 9</figref> and the following description depict specific examples to teach those skilled in the art how to make and use the best mode of the invention. For the purpose of teaching inventive principles, some conventional aspects have been simplified or omitted. Those skilled in the art will appreciate variations from these examples that fall within the scope of the invention. Those skilled in the art will appreciate that the features described below can be combined in various ways to form multiple variations of the invention. As a result, the invention is not limited to the specific examples described below, but only by the claims and their equivalents.</p><p id="p0027" num="0027"><figref idrefs="f0001">FIG. 1</figref> shows a processing system 100 according to an embodiment of the invention. The processing system 100 comprises a processor 101 connected to a power<!-- EPO <DP n="5"> --> source 104. The power source 104 may comprise a power source with an unlimited power supply or may comprise a power source with a limited power supply, such as a two-wire loop, for example that is limited to providing a current between approximately 4 mA and approximately 20 mA. Thus, according to an embodiment of the invention, the processing system 100 operates with a constrained power supply. The processor 101 may conduct operations of the processing system 100 by executing one or more processing routines. The processing routine may include the reading and/or writing of instructions and/or data. The processor 101 can comprise a general purpose computer, a microprocessing system, a logic circuit, a digital signal processor, or some other general purpose or customized processing device. The processor 101 can be distributed among multiple processing devices. The processor 101 can include any manner of integral or independent electronic storage medium, such as the internal memory 102 and the external memory 103. Thus, the processing routines executed by the processor 101 may utilize the internal memory 102, the external memory 103, or both by storing information, such as instructions and/or data in the memories 102, 103. Furthermore, the processing system 100 can include an interface 105. The interface 105 may comprise any manner of display or input/output mechanism generally known in the art.</p><p id="p0028" num="0028">The memories 102, 103 can store data, software routines, constant values, and variable values. It should be appreciated that each time the processor 102 reads/writes information from/to the memories 102, 103, the processing system 100 requires an additional amount of energy. While the external memory 103 is required in many embodiments, accessing the external memory 103 requires more energy than accessing the internal memory 102. This is shown in <figref idrefs="f0002">FIG. 2</figref>.</p><p id="p0029" num="0029"><figref idrefs="f0002">FIG. 2</figref> shows a graph of the power consumption of the processing system 100, and more specifically, the processor 101, while accessing the memories 102, 103. According to an embodiment of the invention, a processing routine utilizes one or both of the memories 102, 103. Therefore, the processor 101 is required to access the memories 102, 103 when executing a processing routine. The trace 230 represents an available energy supply. The available energy supply may represent the energy available to the processing system 100, the processor 101, or the electronic device in which the processing system 100 is contained. The available energy supply 230 may comprise an available current, voltage, or combination thereof. For example, in<!-- EPO <DP n="6"> --> situations where the processing system 100 is powered by a two-wire loop, the available energy supply 230 may comprise an available current. However, it should be understood that the specific value of energy measured will depend on the particular situation and therefore, should not limit the scope of the present invention.</p><p id="p0030" num="0030">The trace 231 shows the memory accesses. Each spike in the trace 231 represents an external memory access. It should be appreciated that relatively few consecutive external memory accesses, such as seen at 232, for example, do not substantially affect the available energy supply. This can be seen by observing the energy supply available substantially directly above the spike at 232. However, as seen in the access at 233, as the number of consecutive external memory accesses increases, the level of the energy supply available to other applications decreases. The limitation on available energy is significant where access to the external memory 103 is implemented with multiple consecutive external memory accesses, such as seen at 234 where the energy required accessing the external memory 103 uses almost the entire reserve energy available. During such access bursts, the remaining components of the processing system 100 are left with almost no energy.</p><p id="p0031" num="0031">According to an embodiment of the invention, the available energy 230 is determined and access to the external memory 103 is restricted to times when the available energy 230 exceeds a threshold value. This ensures that accessing the external memory 103 will not substantially deplete the energy available to the remaining components of the electronic device or the processing system 100. This method also provides a substantially real time method for determining when to access the external memory 103. According to an embodiment of the invention, the threshold value may be a predetermined value. According to another embodiment of the invention, the threshold value may depend on the number of external accesses required to execute the processing routine. For example, the threshold value may reduce as the number of external accesses required to execute the processing routine reduces. This is because as seen in <figref idrefs="f0002">FIG. 2</figref>, as the number of required accesses reduces, the effect the accesses have on the available energy supply 230 reduces. Therefore, a relatively small number of external accesses will not create as large of a spike in the energy consumption of the processor 101.<!-- EPO <DP n="7"> --></p><p id="p0032" num="0032">According to an embodiment of the invention, the processor 101 can execute a processing routine that utilizes only the external memory 103. In this situation, the processing system 100 can determine the available energy supply and grant access to the external memory 103 based on the available energy supply. According to one embodiment, access is granted to the external memory 103 only if the available energy supply exceeds a threshold value. When the available energy supply is below or equal to the threshold value, the processing system 100 can temporarily restrict access to the external memory 103 until the available energy once again exceeds the threshold value. It should be understood that some processing routines only utilize the internal memory 102 and therefore, the method of restricting access to the internal memory 102 is equally applicable; however in many embodiments, the threshold value will be substantially lower for restricting access to the internal memory 102 than for restricting access to the external memory 103. This is because accessing the internal memory 102 requires less energy than accessing the external memory 103. According to another embodiment, access to the external memory 103 is granted according to one of the distributions described below in relation to <figref idrefs="f0004 f0005 f0006">FIGS. 5-9</figref> when the available energy supply does not exceed the threshold value.</p><p id="p0033" num="0033">According to another embodiment of the invention, the processor 101 can execute a processing routine that utilizes both the internal memory 102 and the external memory 103. In this embodiment, the processing system 100 can determine the available energy supply and grant access to the external memory 103 based on the available energy supply. According to one embodiment, access to the external memory 103 is only granted if the available energy supply exceeds the threshold value. If on the other hand, the available energy supply does not exceed the threshold value, access to the external memory 103 is restricted, however, access to the internal memory 102 may be granted. Thus, the processor 101 can access the internal memory 102 during the periods where the available energy supply does not exceed the threshold value, and once the energy supply exceeds the threshold value, the processor 101 can again access the external memory 103.</p><p id="p0034" num="0034">According to another embodiment of the invention, if the available energy supply 230 does not exceed the threshold value, the processor 101 may distribute the external memory accesses according to one of the methods outlined below. The particular<!-- EPO <DP n="8"> --> method can be chosen based on the available energy supply 203. It should be understood that "distribution" is meant to mean that access is spread out or separated by one of the methods used below rather than accessing in bursts as in the prior art. The accesses may be separated by periods of time where the processor 101 ceases all functions or the accesses may be separated by periods where the processor 101 simply switches accessing the particular memory, but may access a different memory, for example.</p><p id="p0035" num="0035">In many situations, the amount of information stored in the external memory 103 is substantially less than the amount of information stored in the internal memory 102. For a given processing routine, the processor 101 may require, for example, 1000 external memory accesses for every 100,000 total memory accesses. It should be understood however, that the ratio of 1 to 100 is used merely as an example and the actual ratio will vary depending on the particular processing routine. The prior art processing systems naturally group the 1000 external memory accesses together, <i>i.e</i>., burst access. As shown in <figref idrefs="f0003">FIG. 3</figref>, the processor 101, first performs all of the required external memory accesses, and then performs all of the required internal memory accesses. The source code associated with this high peak power for 100,000 total memory accesses could be written as:
<ul><li>External<sub>1</sub></li><li>External<sub>2</sub></li><li>External<sub>3</sub><br/>
•</li><li>External<sub>1000</sub></li><li>Internal<sub>1</sub></li><li>Internal<sub>2</sub></li><li>Internal<sub>3</sub> •</li><li>Internal<sub>99000</sub></li></ul></p><p id="p0036" num="0036">Although such a grouping presents no problem with an unlimited power supply, as seen at access 234, such a burst in external memory accesses can substantially deplete the reserve power available for the remaining electronics when the processing system 100 is under a power constraint. One reason for such a grouping in the prior art<!-- EPO <DP n="9"> --> processing systems is that it requires much less context switching. Thus, the overall bandwidth can be maximized.</p><p id="p0037" num="0037"><figref idrefs="f0003">FIG. 4</figref> shows a graph of the power consumption of the processor 101 while first accessing the external memory 103 and then accessing the internal memory 102 within a given time frame. The trace 430 represents the available energy supply at a given time; the trace 431 generally represents the energy consumption of the processor 101 while accessing the memories 102, 103. As can be seen, during the time when the processor 101 is accessing the external memory 103, generally represented at 432, the processor 101 consumes substantially all of the available energy supply. Once the processor 101 stops accessing the external memory 103 and begins accessing the internal memory 102, the power used by the processor 101 reduces.</p><p id="p0038" num="0038">As can be seen, such a "bursty" method of accessing the external memory 103 can present serious problems with the available energy supply. Thus, such a method is many times, unfavorable. According to an embodiment of the invention, in order to overcome energy constraint issues, the processor 101 distributes the external memory accesses on a predetermined basis. The distribution may be performed before or after compiling of the processing routine. Furthermore, the distribution may be performed manually, or substantially automatically as described below.</p><p id="p0039" num="0039"><figref idrefs="f0004">FIG. 5</figref> shows the memory accesses of the processor 101 while executing a processing routine according to an embodiment of the invention. According to the embodiment shown, the external memory accesses are distributed based on a predetermined number of consecutive external memory accesses. According to an embodiment of the invention, the processor 101 temporarily restricts access to both memories 102, 103 after a predetermined number of consecutive external memory accesses. In some embodiments, this may comprise pausing execution of the processing routine if the processing routine only utilizes the external memory 103. The temporary pause is shown at 534 where the processor 101 is not accessing the internal or the external memory 102, 103. After the temporary access restriction, the processor 101 can again access the external memory 103, which is shown generally at 532. The temporary access restriction may be based on a predetermined time or it may be based on an available energy supply. For example, access to the external memory 103 may be restricted until the energy supply rises above the threshold value. According to the<!-- EPO <DP n="10"> --> embodiment shown in <figref idrefs="f0004">FIG. 5</figref>, the processor 101 does not access the internal memory 102 until the external memory accesses are complete.</p><p id="p0040" num="0040"><figref idrefs="f0005">FIG. 6</figref> shows the memory accesses of the processor 101 according to another embodiment of the invention. According to the embodiment shown in <figref idrefs="f0005">FIG. 6</figref>, embodiment of the invention, the external memory accesses are distributed by temporarily interrupting access to the external memory after a predetermined number of external memory accesses with a predetermined number of internal memory accesses. Using the example of 100,000 total accesses, 1,000 of which are external memory accesses, the external memory accesses 632 are grouped in units of 10 accesses for every 1,000 internal memory accesses 633. By separating the external memory accesses 632 with internal memory accesses 633, the spikes in the power consumption decreases. This is because the higher power consumption associated with accessing the external memory 103 does not occur all at once. Rather, the lower power consumption required by the processor 101 to access the internal memory 102 provides the breaks in the high power consumption required to access the external memory 103. According to the embodiment shown in <figref idrefs="f0005">FIG. 6</figref>, the external memory accesses are substantially evenly separated by the internal memory accesses. However, in other embodiments, the separation does not have to be substantially even. The source code for such an algorithm could look something like:
<ul><li>External<sub>1</sub><br/>
•</li><li>External<sub>10</sub></li><li>Internal<sub>1</sub><br/>
•</li><li>Internal<sub>1000</sub></li><li>External<sub>11</sub><br/>
•</li><li>External<sub>20</sub></li><li>Internal<sub>1001</sub><br/>
•</li><li>Internal<sub>2000</sub>, etc.</li></ul><!-- EPO <DP n="11"> --></p><p id="p0041" num="0041"><figref idrefs="f0005">FIG. 7</figref> shows a graph of the energy consumption of the processor 101 when the external memory accesses are distributed according to the method outlined above in relation to <figref idrefs="f0005">FIG. 6</figref>. As can be seen, the energy consumption of the processor 101 spikes when the processing system 100 accesses the external memory 103, generally shown at points 732. Thus, distributing the external memory accesses based on a predetermined number of consecutive external memory accesses minimizes the energy consumption spikes, thereby allowing the processor 101 to access the external memory 103 at times when the available energy supply does not exceed the threshold value. Therefore, according to an embodiment of the invention, if the available energy supply does not exceed the threshold value, the external memory accesses can be distributed based on a predetermined number of consecutive external memory accesses. According to another embodiment of the invention, the external memory accesses can be distributed based on a predetermined number of consecutive external memory accesses even when the available energy supply does exceed the threshold value. The predetermined number of consecutive external memory accesses may be based on the available energy supply.</p><p id="p0042" num="0042">According to another embodiment of the invention, the predetermined number of consecutive external memory accesses may be substantially the same regardless of the available energy supply. However, in this embodiment, the predetermined number should be chosen such that the processor 101 can access the predetermined number of external memory locations even at the minimum available energy supply.</p><p id="p0043" num="0043"><figref idrefs="f0006">FIG. 8</figref> shows the memory accesses according to another embodiment of the invention. According to the embodiment shown in <figref idrefs="f0006">FIG. 8</figref>, the external memory accesses are distributed as far apart as possible. In other words, access to the external memory is distributed such that the number of consecutive external memory accesses is minimized. Taking the 100,000 accesses as an example again, the processor 101 accesses the external memory 103 once for every ten internal memory accesses. This minimizes the energy spikes caused by accessing the external memory 103. According to an embodiment of the invention, the number of external memory accesses along with the number of internal memory accesses is determined. Using these two numbers, the external memory accesses can be interrupted by the internal memory accesses according to the ratio of the external to internal memory accesses required to execute the processing routine. Thus, for example, if a particular processing routine requires four<!-- EPO <DP n="12"> --> external memory accesses and two internal memory accesses, the ratio of external to internal would be 2:1. Therefore, one internal memory access would separate approximately two external memory accesses. A drawback to such an approach is that the processor 101 is continuously switching between the internal and the external memory 102, 103, <i>i.e.,</i> "context switching." This can, in some embodiments, reduce the overall bandwidth. Thus, the reduced power consumption should be balanced with the context switching costs associated with disturbing the sequential, linear nature of the program. Therefore, according to some embodiments, distributing the external memory accesses as far apart as possible may not be the most advantageous approach. The source code for such an algorithm could be written as:
<ul><li>External<sub>1</sub></li><li>Internal<sub>1</sub><br/>
•</li><li>Internal<sub>10</sub></li><li>External<sub>2</sub></li><li>Internal<sub>11</sub><br/>
•</li><li>Internal<sub>20</sub></li></ul></p><p id="p0044" num="0044"><figref idrefs="f0006">FIG. 9</figref> shows a graph of the power consumption of the processor 101 as it accesses the external memory 103 and the internal memory 102 according to the method outlined above in relation to <figref idrefs="f0006">FIG. 8</figref>. As can be seen, the power consumption spikes at points 932 where the processor 101 accesses the external memory 103. However, there is only a single spike in power consumption at each of the points 932, this is because the processor 101 only accesses the external memory 103 once and then access to the external memory 103 is interrupted before returning to access information from the external memory 103 again. In some embodiments, the processor 101 accesses the internal memory 102 during the period when access to the external memory 103 is interrupted. As can be seen in the trace 930, accessing the external memory 103 on an individual basis impacts the reserve power available to the rest of the processing system 100 only minimally. Thus, by separating the external memory accesses as far apart as possible, there is much more reserve power available to the remainder of the system. The processor 101 is thereby capable of operating under severe power constraints by<!-- EPO <DP n="13"> --> minimizing the power spikes associated with accessing the external memory 103 in large blocks at a time (burst access).</p><p id="p0045" num="0045">According to one embodiment, the invention outlined above provides a method for executing a processing routine where a portion of the processing routine is stored in an external memory 103 and a portion of the processing routine is stored in an internal memory 102. Therefore, in order to execute the processing routine, the processor 101 is required to access both the internal memory 102 and the external memory 103. The method reduces the peak power consumption of the processor 101 by distributing access to the external memory 101 according to a predetermined number of external memory accesses. Thus, the processor 101 does not access the external memory 103 in large bursts causing large spikes in the power consumption, as in the prior art. According to one embodiment, access to the external memory 103 remains inaccessible for a predetermined amount of time. According to another embodiment of the invention, access to the external memory 103 remains inaccessible until the processor 101 performs a predetermined number of internal memory accesses. The predetermined number of accesses for the internal and external memory may be the same number or may be a different number. The particular predetermined numbers will depend on the particular situation and the particular number of total accesses required by the processing routine. Once the processor 101 completes the predetermined number of internal memory accesses, the processor 101 can again return to accessing the external memory 103.</p><p id="p0046" num="0046">As described above, in some embodiments, the predetermined numbers used to distribute access to the external memory 103 are chosen such that the number of consecutive external memory accesses is minimized. According to another embodiment of the invention, the predetermined numbers are substantially constant throughout the processing routine. Therefore, the distribution of access to the external memory 103 is substantially even throughout the processing routine. According to other embodiments, the predetermined numbers may vary and therefore, the number of accesses performed by the processor 101 will change as the processor 101 executes the processing routine. According to another embodiment of the invention, the external memory accesses are interrupted by internal memory accesses according to the approximate ratio of external to internal memory accesses. Thus, for example, if the ratio of internal memory<!-- EPO <DP n="14"> --> accesses to external memory accesses required is 2:1, access to the external memory will be interrupted after every external access, and will remain interrupted for two internal memory accesses before the processor 101 returns to accessing the external memory.</p><p id="p0047" num="0047">The method of distributing the accesses can be carried out in a variety of manners. The distribution may take place manually, in software, or in hardware. According to one embodiment of the invention, the distribution is performed after the compiling of the processing routine. According to another embodiment of the invention, the distribution is performed before the compiling of the processing routine. According to one embodiment of the invention, distributing the accesses is carried out by manual distribution. Manual distribution of the external memory accesses can be achieved via inspection and hand-distribution of the source code. This can be accomplished by inspection and hand-distributing the source code. Although this method is suitable for some situations, it is error-prone and time consuming. Furthermore it must be performed for every new code change or software release, thereby furthering the time required.</p><p id="p0048" num="0048">According to another embodiment of the invention, the memory accesses are distributed in software. According to one embodiment, the software may be modified using a post-processing program. This method is briefly shown above where a 'jump' is inserted every 'n' instructions. For example, in the discussion accompanying <figref idrefs="f0006">FIGS. 8 and 9</figref>, a jump, <i>i.e.,</i> instructions for internal access is inserted for every 'n' external accesses. This has the effect of dividing the processing source between internal and external memories 102, 103.</p><p id="p0049" num="0049">According to another embodiment of the invention, a real time operating system (RTOS) is utilized. According to this embodiment, each task of the processor 101 has a property that defines the task in internal or external memory 102, 103. The external tasks are preemptively interrupted after 'n' instructions. The external tasks are not allowed to resume execution until 'm' internal instructions have been performed. In this context, 'n' and 'm' are the number of locations required to be accessed in the external and internal memories 103, 102, respectively. In addition, the RTOS can be programmed to keep the size of 'n' as small as possible. According to another embodiment of the invention, the RTOS can be programmed to keep 'n' and 'm'<!-- EPO <DP n="15"> --> relatively constant over time, thereby maximizing the optimal distribution of external memory accesses.</p><p id="p0050" num="0050">According to another embodiment of the invention, the distribution of memory accesses can be implemented in hardware in which a memory cache is modified to access the external memory in a temporarily optimum manner. According to one embodiment, the temporarily optimum manner comprises one external memory access for every 'n' total accesses. One drawback to this embodiment is that it requires an internal cache memory. However, in embodiments where an internal cache memory is available, this embodiment may be implemented. Other methods generally known in the art may be used to program the processing system and are therefore included within the scope of the present invention.</p><p id="p0051" num="0051">The above description provides a method for programming a processing routine required to access external memory 103. In some embodiments, the processing routine utilizes internal memory 102 as well. The method distributes (interrupts) the external memory accesses based on a predetermined number of consecutive external memory accesses. Although portions of the above description makes reference to a particular number of accesses, it should be understood that the numbers are used solely to assist in the understanding of the invention, and should not in any way limit the scope of the invention as the particular number of accesses will vary depending on the processing routine. Furthermore, the present invention should not be limited by the particular ratio of external memory accesses to internal memory accesses as the ratio can vary from less than, greater than, or equal to one.</p><p id="p0052" num="0052">The above description also provides a method for controlling access to an external memory 103 based on an available energy supply. Thus, the method ensures that the energy consumed by the processor 101 while accessing the external memory 103 does not exceed the available energy supply. It should be appreciated that the two methods (controlling access based on available energy and access distribution) may be used together or separately as needed.</p><p id="p0053" num="0053">The detailed descriptions of the above embodiments are not exhaustive descriptions of all embodiments contemplated by the inventors to be within the scope of the invention. Indeed, persons skilled in the art will recognize that certain elements of the above-described embodiments may variously be combined or eliminated to create<!-- EPO <DP n="16"> --> further embodiments, and such further embodiments fall within the scope and teachings of the invention. It will also be apparent to those of ordinary skill in the art that the above-described embodiments may be combined in whole or in part to create additional embodiments within the scope and teachings of the invention.</p><p id="p0054" num="0054">Thus, although specific embodiments of, and examples for, the invention are described herein for illustrative purposes, various equivalent modifications are possible within the scope of the invention, as those skilled in the relevant art will recognize. The teachings provided herein can be applied to other processing systems, and not just to the embodiments described above and shown in the accompanying figures. Accordingly, the scope of the invention should be determined from the following claims.</p></description><claims mxw-id="PCLM56982064" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-0001" num="0001"><claim-text>A method for executing a processing routine utilizing an internal memory and an external memory, comprising steps of:
<claim-text>determining an available energy supply;</claim-text>
<claim-text>accessing the external memory if the available energy supply exceeds a threshold<br/>
value; and</claim-text>
<claim-text>accessing the internal memory if the available energy supply does not exceed the<br/>
threshold value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, further comprising a step of distributing the external memory accesses if the available energy supply does not exceed a threshold value.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 2, further comprising the step of distributing the external memory accesses based on a predetermined number of consecutive external memory accesses.</claim-text></claim></claims><drawings mxw-id="PDW16670456" load-source="patent-office"><!-- EPO <DP n="18"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="188" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="157" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0003" num="3,4"><img id="if0003" file="imgf0003.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0004" num="5"><img id="if0004" file="imgf0004.tif" wi="165" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0005" num="6,7"><img id="if0005" file="imgf0005.tif" wi="165" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0006" num="8,9"><img id="if0006" file="imgf0006.tif" wi="165" he="178" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
