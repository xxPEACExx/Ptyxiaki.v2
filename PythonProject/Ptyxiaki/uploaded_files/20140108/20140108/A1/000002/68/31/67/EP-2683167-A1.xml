<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683167-A1" country="EP" doc-number="2683167" kind="A1" date="20140108" family-id="46757538" file-reference-id="315072" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585082" ucid="EP-2683167-A1"><document-id><country>EP</country><doc-number>2683167</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11859950-A" is-representative="NO"><document-id mxw-id="PAPP154847274" load-source="docdb" format="epo"><country>EP</country><doc-number>11859950</doc-number><kind>A</kind><date>20110729</date><lang>JA</lang></document-id><document-id mxw-id="PAPP177814798" load-source="docdb" format="original"><country>EP</country><doc-number>11859950.5</doc-number><date>20110729</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553771" ucid="JP-2011042831-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011042831</doc-number><kind>A</kind><date>20110228</date></document-id></priority-claim><priority-claim mxw-id="PPC140557395" ucid="JP-2011067420-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011067420</doc-number><kind>W</kind><date>20110729</date></document-id></priority-claim><priority-claim mxw-id="PPC140547404" ucid="JP-2011162413-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011162413</doc-number><kind>A</kind><date>20110725</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2142244555" load-source="docdb">G06T   3/40        20060101ALI20141021BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2142251083" load-source="docdb">H04N   9/07        20060101AFI20141021BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2079673974" load-source="docdb" scheme="CPC">H01L  27/14621     20130101 LI20150401BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2079674148" load-source="docdb" scheme="CPC">G06T   3/4015      20130101 LI20150402BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2102488967" load-source="docdb" scheme="CPC">H04N2209/045       20130101 LA20150129BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2140409047" load-source="docdb" scheme="CPC">H04N   9/045       20130101 FI20141105BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359879" lang="DE" load-source="patent-office">FARBBILDFORMUNGSVORRICHTUNG</invention-title><invention-title mxw-id="PT132359880" lang="EN" load-source="patent-office">COLOR IMAGING DEVICE</invention-title><invention-title mxw-id="PT132359881" lang="FR" load-source="patent-office">DISPOSITIF D'IMAGERIE COULEUR</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919532082" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FUJIFILM CORP</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919525428" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FUJIFILM CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR919008602" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Fujifilm Corporation</last-name><iid>100813527</iid><address><street>26-30, Nishiazabu 2-chome</street><city>Minato-ku Tokyo 106-8620</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919528863" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TANAKA SEIJI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919516429" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TANAKA, SEIJI</last-name></addressbook></inventor><inventor mxw-id="PPAR919019307" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TANAKA, SEIJI</last-name><address><street>c/o FUJIFILM Corporation 1-324 Uetake-cho Kita-ku</street><city>Saitama-shi Saitama 331-9624</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919019097" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Klunker . Schmitt-Nilson . Hirsch</last-name><iid>100060668</iid><address><street>Patentanwälte Destouchesstrasse 68</street><city>80796 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2011067420-W"><document-id><country>JP</country><doc-number>2011067420</doc-number><kind>W</kind><date>20110729</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012117584-A1"><document-id><country>WO</country><doc-number>2012117584</doc-number><kind>A1</kind><date>20120907</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549818268" load-source="docdb">AL</country><country mxw-id="DS549815466" load-source="docdb">AT</country><country mxw-id="DS549818269" load-source="docdb">BE</country><country mxw-id="DS549908403" load-source="docdb">BG</country><country mxw-id="DS549744061" load-source="docdb">CH</country><country mxw-id="DS549818274" load-source="docdb">CY</country><country mxw-id="DS549813955" load-source="docdb">CZ</country><country mxw-id="DS549815954" load-source="docdb">DE</country><country mxw-id="DS549818275" load-source="docdb">DK</country><country mxw-id="DS549818276" load-source="docdb">EE</country><country mxw-id="DS549744496" load-source="docdb">ES</country><country mxw-id="DS549908404" load-source="docdb">FI</country><country mxw-id="DS549908405" load-source="docdb">FR</country><country mxw-id="DS549815955" load-source="docdb">GB</country><country mxw-id="DS549818277" load-source="docdb">GR</country><country mxw-id="DS549815956" load-source="docdb">HR</country><country mxw-id="DS549813956" load-source="docdb">HU</country><country mxw-id="DS549744062" load-source="docdb">IE</country><country mxw-id="DS549818282" load-source="docdb">IS</country><country mxw-id="DS549908406" load-source="docdb">IT</country><country mxw-id="DS549818283" load-source="docdb">LI</country><country mxw-id="DS549815957" load-source="docdb">LT</country><country mxw-id="DS549815467" load-source="docdb">LU</country><country mxw-id="DS549908407" load-source="docdb">LV</country><country mxw-id="DS549815962" load-source="docdb">MC</country><country mxw-id="DS549815468" load-source="docdb">MK</country><country mxw-id="DS549815469" load-source="docdb">MT</country><country mxw-id="DS549815482" load-source="docdb">NL</country><country mxw-id="DS549813957" load-source="docdb">NO</country><country mxw-id="DS549815483" load-source="docdb">PL</country><country mxw-id="DS549818284" load-source="docdb">PT</country><country mxw-id="DS549742248" load-source="docdb">RO</country><country mxw-id="DS549818285" load-source="docdb">RS</country><country mxw-id="DS549815484" load-source="docdb">SE</country><country mxw-id="DS549815963" load-source="docdb">SI</country><country mxw-id="DS549813966" load-source="docdb">SK</country><country mxw-id="DS549813967" load-source="docdb">SM</country><country mxw-id="DS549744501" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673254" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A color imaging element with a color filter array including periodically arranged RGB filters corresponding to colors of RGB and including sections where two or more G filters that most contribute to obtaining luminance signals are adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions (four directions) is used. Based on pixel values of G pixels adjacent to each other in the directions, which one of the four directions is a correlation direction of luminance is determined at minimum pixel intervals. The pixel value of a pixel of another color in the determined correlation direction is used to calculate the pixel value of the another color at a pixel position of a target pixel of synchronization processing extracted from a mosaic image. In this way, the pixel value of the pixel of the another color is accurately estimated.<img id="iaf01" file="imgaf001.tif" wi="145" he="82" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737405" lang="EN" source="EPO" load-source="docdb"><p>A color imaging element with a color filter array including periodically arranged RGB filters corresponding to colors of RGB and including sections where two or more G filters that most contribute to obtaining luminance signals are adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions (four directions) is used. Based on pixel values of G pixels adjacent to each other in the directions, which one of the four directions is a correlation direction of luminance is determined at minimum pixel intervals. The pixel value of a pixel of another color in the determined correlation direction is used to calculate the pixel value of the another color at a pixel position of a target pixel of synchronization processing extracted from a mosaic image. In this way, the pixel value of the pixel of the another color is accurately estimated.</p></abstract><description mxw-id="PDES63959242" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">{Technical Field}</heading><p id="p0001" num="0001">The present invention relates to a color imaging apparatus, and particularly, to a color imaging apparatus that can suppress generation of color moire.</p><heading id="h0002">{Background Art}</heading><p id="p0002" num="0002">In a color imaging apparatus including a single-plate color imaging element, an output image from the color imaging element is a RAW image (mosaic image). Therefore, a multi-channel image is obtained by a process of interpolating a pixel of a missing color from a surrounding pixel (synchronization processing). In this case, there is a problem in reproduction characteristics of a high-frequency image signal.</p><p id="p0003" num="0003">A primary-color Bayer array as a color array most widely used in the single-plate color imaging element includes green (G) pixels arranged in a check pattern and red (R) and blue (B) arranged line-sequentially. Therefore, there is a problem of low-frequency coloring (color moire) caused by folding of high frequency signals exceeding reproduction bands of the colors and caused by deviation of phases of the colors.</p><p id="p0004" num="0004">For example, a black and white oblique high frequency image as shown in <figref idrefs="f0009">Figure 14(A)</figref> enters an imaging element in a Bayer array shown in <figref idrefs="f0009">Figure 14(B)</figref>, and the image is sorted into Bayer color arrays to compare the colors. As shown in <figref idrefs="f0009">Figures 14(C) to 14(E)</figref>, R and B form light and flat color images, while G forms a dark and flat color image. Assuming that the value of black is 0 and the value of white is 255, the black and white oblique high frequency image turns green, because only G is 255. In this way, the oblique high frequency image cannot be correctly reproduced in the Bayer array.</p><p id="p0005" num="0005">In the color imaging apparatus using the single-plate color imaging element, an optical low-pass filter formed by an anisotropic substance such as crystal is generally arranged on the front side of the color imaging element to prevent optically reducing the<!-- EPO <DP n="2"> --> high frequency wave. However, although the coloring caused by folding of the high frequency signal can be reduced in the method, there is a problem that the resolution is reduced accordingly.</p><p id="p0006" num="0006">To solve the problem, a color imaging element is proposed, wherein a color filter array of the color imaging element is a three-color random array satisfying array restrictions in which an arbitrary target pixel is adjacent to three colors including the color of the target pixel on four sides of the target pixel (PTL 1).</p><p id="p0007" num="0007">An image sensor of a color filter array is also proposed, wherein the image sensor includes a plurality of filters with different spectral sensitivity, and first and second filters among the plurality of filters are alternately arranged in a first predetermined period in one of the diagonal directions of a pixel grid of the image sensor and are alternately arranged in a second predetermined period in the other diagonal direction (PTL 2).</p><p id="p0008" num="0008">Meanwhile, PTL 3 describes a technique of using surrounding pixels of a target pixel of a mosaic image in a Bayer array to calculate correlations in horizontal, vertical, and oblique (NE, NW) directions (four directions), and weights are applied according to ratios of the calculated correlations to interpolate the pixels.</p><p id="p0009" num="0009">An image apparatus including a color imaging element is also proposed, wherein R and B among the three primary colors of RGB are arranged every three pixels in horizontal and vertical directions, and G is arranged between R and B (PTL 4). In the color imaging element described in PTL 4, G pixels that most contribute to obtaining luminance signals are arranged much more than RB pixels, on the ground that the resolution of color difference signals can be lower than the resolution of the luminance signals. This can increase the resolution in the horizontal and vertical directions.</p><heading id="h0003">{Citation List}</heading><heading id="h0004">{Patent Literature}</heading><p id="p0010" num="0010"><ul><li>{PTL 1}<br/>
Japanese Patent Application Laid-Open No. <patcit id="pcit0001" dnum="JP2000308080A"><text>2000-308080</text></patcit></li><li>{PTL 2}<br/>
Japanese Patent Application Laid-Open No. <patcit id="pcit0002" dnum="JP2005136766A"><text>2005-136766</text></patcit></li><li>{PTL 3}<br/>
<!-- EPO <DP n="3"> -->Japanese Patent Application Laid-Open No. <patcit id="pcit0003" dnum="JP2010104019A"><text>2010-104019</text></patcit></li><li>{PTL 4}<br/>
Japanese Patent Application Laid-Open No. <patcit id="pcit0004" dnum="JP8023543A"><text>8-23543</text></patcit></li></ul></p><heading id="h0005">{Summary of Invention}</heading><heading id="h0006">{Technical Problem}</heading><p id="p0011" num="0011">The three-color random array described in PTL 1 is effective for low-frequency color moire, but is not effective for a false color of a high frequency section.</p><p id="p0012" num="0012">In the color filter array of the image sensor described in PTL 2, the R, G, and B filters are periodically arranged in the lines in the horizontal and vertical directions of the color filter array. In synchronization processing of a mosaic image output from the image sensor including the color filter array in the invention described in PTL 2, a local area in a predetermined image size is extracted around the target pixel, statistics related to a color distribution shape of the color of the target pixel in the local area and a color distribution shape of another color to be estimated are calculated, and the color distribution shapes are linearly regressed based on the intensity of the colors at the target pixel position and the statistics of the color distribution shapes to thereby calculate an estimation value of the another color at the target pixel position. The calculation of the statistics (covariance values) related to the color distribution shapes and the regression calculation process are necessary in the invention described in PTL 2, and there is a problem that the image processing is complicated.</p><p id="p0013" num="0013">Meanwhile, the pixel interpolation method described in PTL 3 is applied to a mosaic image in a Bayer array. However, G pixels are not consecutive in the horizontal and vertical directions in the Bayer array, and the correlations in the horizontal and vertical directions cannot be calculated at minimum pixel intervals. For example, the correlations are falsely determined when a vertical-striped or horizontal-striped high frequency wave is input, and there is a problem that the pixels cannot be accurately interpolated.</p><p id="p0014" num="0014">The ratio of the G pixels relative to the RB pixels in the color imaging element described in PTL 4 is higher than the ratio in the Bayer array, and the resolution in the horizontal and vertical directions can be increased. However, the RGB signals output from the color imaging element are uniformly synchronized by interpolation filters in<!-- EPO <DP n="4"> --> the imaging apparatus described in PTL 4, and there is a problem that a false color is easily generated.</p><p id="p0015" num="0015">The present invention has been made in view of the circumstances, and an object of the present invention is to provide a color imaging apparatus that can suppress generation of a false color of a high frequency section by simple image processing.</p><heading id="h0007">{Solution to Problem}</heading><p id="p0016" num="0016">To attain the object, an invention according to an aspect of the present invention includes: a single-plate color imaging element including: a plurality of pixels including photoelectric conversion elements arranged in horizontal and vertical directions; and color filters of a predetermined color filter array arranged on the plurality of pixels, wherein the color filter array includes first filters corresponding to a first color that most contributes to obtaining luminance signals and second filters corresponding to two or more second colors other than the first color, the first and second filters being periodically arranged, and the first filters include two or more sections adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions; an image acquisition unit that acquires a mosaic image corresponding to the color filter array from the color imaging element; a direction determination unit that acquires, for a target pixel of synchronization processing extracted from the mosaic image, pixel values of pixels corresponding to the first filters near the target pixel and adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions and that determines which one of the horizontal, vertical, and oblique (NE, NW) directions is a correlation direction of luminance based on the pixel values of the adjacent pixels; a synchronization processing unit that calculates a pixel value of another color at a pixel position of the target pixel of the synchronization processing extracted from the mosaic image and that uses a pixel value of a pixel of another color in the correlation direction determined by the direction determination unit to calculate the pixel value; and a control unit that repeatedly operates the direction determination unit and the synchronization processing unit while shifting the target pixel of the synchronization processing extracted from the mosaic image by a target pixel unit of the synchronization processing.</p><p id="p0017" num="0017">The color filter array of the color imaging element includes sections where two or more first filters that most contribute to obtaining the luminance signals are adjacent<!-- EPO <DP n="5"> --> to each other in the horizontal, vertical, and oblique (NE, NW) directions (four directions). Therefore, which one of the four directions is the correlation direction of luminance can be determined at minimum pixel intervals based on the pixel values of the pixels adjacent to each other in the directions. In the calculation of the pixel value of another color at the pixel position of the target pixel of the synchronization processing extracted from the mosaic image, the pixel value of the pixel of another color in the determined correlation direction can be used to accurately estimate the pixel value of the pixel of another color, and the generation of the false color at the high frequency section can be suppressed.</p><p id="p0018" num="0018">In the color imaging apparatus according another aspect of the present invention, the predetermined color filter array of the color imaging element includes a basic array pattern including the first and second filters, the basic array pattern is repeatedly arranged in the horizontal and vertical directions, and one or more of the first filters and one or more of the second filters are arranged in each line in the horizontal and vertical directions of the basic array pattern. One or more of the first filters and one or more of the second filters are arranged in each line in the horizontal and vertical directions of the basic array pattern. Therefore, the generation of color moire (false color) in the horizontal and vertical directions can be suppressed to improve the resolution. The basic array pattern is repeated in the horizontal and vertical directions in the color filter array. Therefore, synchronization (interpolation) processing in a later stage can be executed according to the repeated pattern.</p><p id="p0019" num="0019">Preferably, in the color filter array of the color imaging apparatus according to another aspect of the present invention, the first filters are arranged at a center and four corners of a 3x3 pixel group, and the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions. The first filters are arranged at four corners of the 3x3 pixel group. Therefore, if the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions, the color filter array includes square arrays corresponding to 2x2 pixels including the first filters. The pixel values of the 2x2 pixels can be used to determine the direction with high correlation among the horizontal, vertical, and oblique (NE, NW) directions.</p><p id="p0020" num="0020">Preferably, in the color filter array of the color imaging apparatus according to another aspect of the present invention, the first filters are vertically and horizontally<!-- EPO <DP n="6"> --> arranged across a filter at a center of a 3x3 pixel group, and the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions. The first filters are vertically and horizontally arranged across the filter at the center of the 3x3 pixel group. Therefore, if the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions, the first filters are adjacent to each other (in two pixels) in the horizontal and vertical directions across the filter at the center of the 3x3 pixel group in the color filter array. The pixel values of the pixels (eight pixels in total) corresponding to the first filters can be used to determine the correlation direction of the four directions.</p><p id="p0021" num="0021">In the color imaging apparatus according to another aspect of the present invention, the direction determination unit calculates difference absolute values of pixel values of adjacent pixels in each of the horizontal, vertical, and oblique (NE, NW) directions and determines a direction with a minimum difference absolute value among the difference absolute values in the directions as the correlation direction.</p><p id="p0022" num="0022">In the color imaging apparatus according to another aspect of the present invention, the direction determination unit calculates ratios of pixel values of adjacent pixels in each of the horizontal, vertical, and oblique (NE, NW) directions and determines a direction with the ratio closest to 1 among the ratios in the directions as the correlation direction.</p><p id="p0023" num="0023">A plurality of difference absolute values or ratios may be calculated for each of the directions, and a sum or an average value of the plurality of difference absolute values or an average value of the ratios may be calculated for each of the directions. In this case, the correlation direction can be determined more accurately.</p><p id="p0024" num="0024">In the color imaging apparatus according to another aspect of the present invention, the synchronization processing unit sets the pixel value of a pixel of another color in the correlation direction determined by the direction determination unit as the pixel value of the another color at the pixel position of the target pixel or sets a value obtained by interpolating the pixel values of a plurality of pixels of another color in the correlation direction determined by the direction determination unit as the pixel value of the another color at the pixel position of the target pixel.</p><p id="p0025" num="0025">In the color imaging apparatus according to another aspect of the present invention, if there is no pixel of the another color in the correlation direction determined by the direction determination unit, the synchronization processing unit<!-- EPO <DP n="7"> --> interpolates the pixel value of the target pixel based on a color difference or a color ratio at the pixel positions of the pixels of the another color near the target pixel to calculate the pixel value of the another color. The color difference and the color ratio at the pixel positions of the pixels of the another color denote a difference (color difference) and a ratio (color ratio) between the pixel value of the pixel at the pixel position and the pixel value of the another color already estimated by the direction determination in the correlation direction.</p><p id="p0026" num="0026">In the color imaging apparatus according to another aspect of the present invention, the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, wherein when the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, the synchronization processing unit calculates pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel by following formulas <maths id="math0001" num=""><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0001" file="imgb0001.tif" wi="69" he="7" img-content="math" img-format="tif"/></maths>wherein<br/>
when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, the synchronization processing unit calculates pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel by following formulas <maths id="math0002" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0002" file="imgb0002.tif" wi="68" he="8" img-content="math" img-format="tif"/></maths>and wherein<br/>
when the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>, the synchronization processing unit calculates pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel by following formulas <maths id="math0003" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and R</mi></mrow><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced><mn>.</mn></math><img id="ib0003" file="imgb0003.tif" wi="68" he="6" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="8"> --></p><p id="p0027" num="0027">In the color imaging apparatus according to another aspect of the present invention, the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, wherein when the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, the synchronization processing unit calculates pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel by following formulas <maths id="math0004" num=""><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0004" file="imgb0004.tif" wi="82" he="4" img-content="math" img-format="tif"/></maths><br/>
when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, the synchronization processing unit calculates pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel by following formulas <maths id="math0005" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0005" file="imgb0005.tif" wi="89" he="4" img-content="math" img-format="tif"/></maths><br/>
when the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>, the synchronization processing unit calculates pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel by following formulas <maths id="math0006" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and R</mi></mrow><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced><mn>.</mn></math><img id="ib0006" file="imgb0006.tif" wi="65" he="4" img-content="math" img-format="tif"/></maths></p><p id="p0028" num="0028">In the color imaging apparatus according to another aspect of the present invention, the direction determination unit determines that there is no correlation direction when difference values of the pixel values of the pixels adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions are equal, and if the direction determination unit determines that there is no correlation direction, the synchronization processing unit uses the pixel value of a pixel of another color near the pixel position of the target pixel of the synchronization processing to calculate the pixel value of the another color at the pixel position.<!-- EPO <DP n="9"> --></p><p id="p0029" num="0029">In the color imaging apparatus according to another aspect of the present invention, the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, and the filter array includes: a first array corresponding to 3x3 pixels, the first array including G filters arranged at a center and four corners, B filters vertically arranged across the G filter at the center, and R filters horizontally arranged across the G filter at the center; and a second array corresponding to 3x3 pixels, the second array including G filters arranged at a center and four corners, R filters vertically arranged across the G filter at the center, and B filters horizontally arranged across the G filter at the center, wherein the first and second arrays are alternately arranged in the horizontal and vertical directions.</p><p id="p0030" num="0030">According to the color filter array with the configuration, when 5×5 pixels (local area of mosaic image) are extracted around the first or second array, there are 2x2 G pixels at four corners of the 5×5 pixels. The pixel values of the 2x2 G pixels can be used to determine the correlation direction of the four directions.</p><p id="p0031" num="0031">In the color imaging apparatus according to another aspect of the present invention, the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, and the filter array includes: a first array corresponding to 3x3 pixels, the first array including an R filter arranged at a center, B filters arranged at four corners, and G filters vertically and horizontally arranged across the R filter at the center; and a second array corresponding to 3x3 pixels, the second array including a B filter arranged at a center, R filters arranged at four corners, and G filters vertically and horizontally arranged across the B filter at the center, wherein the first and second arrays are alternately arranged in the horizontal and vertical directions.</p><p id="p0032" num="0032">According to the color filter array with the configuration, when 5x5 pixels (local area of mosaic image) are extracted around the first or second array, there are G pixels adjacent to each other in the horizontal and vertical directions across the pixel (R pixel or B pixel) at the center of the 5x5 pixels. The pixel values of the G pixels (eight pixels in total) can be used to determine the correlation direction of the four directions.</p><heading id="h0008">{Advantageous Effects of Invention}</heading><p id="p0033" num="0033">According to the present invention, a color imaging element including color filters including sections where two or more first filters that most contribute to<!-- EPO <DP n="10"> --> obtaining luminance signals are adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions (four directions) is used. The color imaging element includes the first filters and second filters corresponding to two or more second colors other than a first color that are periodically arranged in lines in the horizontal and vertical directions. A correlation direction of luminance is determined based on difference values of pixel values of pixels adjacent to each other in the directions. Therefore, the pixel values at minimum pixel intervals can be used to determine the correlation direction. In calculation of a pixel value of another color at a pixel position of a target pixel of synchronization processing extracted from a mosaic image, the pixel value of a pixel of another color in the determined correlation direction is used to calculate the pixel value of the another color at the pixel position of the target pixel. Therefore, the pixel value of the pixel of the another color can be accurately estimated, and generation of a false color at a high frequency section can be suppressed.</p><heading id="h0009">{Brief Description of Drawings}</heading><p id="p0034" num="0034"><ul><li>{<figref idrefs="f0001">Figure 1} Figure 1</figref> is a block diagram showing embodiments of a color imaging apparatus according to the present invention.</li><li>{<figref idrefs="f0001">Figure 2} Figure 2</figref> is a diagram showing a color filter array of color filters arranged on a color imaging element of a first embodiment.</li><li>{<figref idrefs="f0002">Figure 3} Figure 3</figref> is a diagram showing a basic array pattern included in the color filter array of the color imaging element of the first embodiment.</li><li>{<figref idrefs="f0002">Figure 4} Figure 4</figref> is a diagram showing a state in which the basic array pattern of 6x6 pixels included in the color filter array of the color imaging element of the first embodiment is divided into A arrays and B arrays of 3x3 pixels.</li><li>{<figref idrefs="f0003">Figure 5} Figure 5</figref> is a diagram showing a state in which the basic array pattern of 6x6 pixels included in the color filter array of the color imaging element of the first embodiment are divided into A arrays and the B arrays of 3x3 pixels, and the A arrays and the B arrays are arranged.</li><li>{<figref idrefs="f0003">Figure 6} Figure 6</figref> is a diagram used to explain a determination method of a correlation direction of luminance and a pixel interpolation method in synchronization processing.</li><li>{<figref idrefs="f0003">Figure 7A} Figure 7A</figref> is a diagram showing an oblique high frequency image incident on the color imaging element.<!-- EPO <DP n="11"> --></li><li>{<figref idrefs="f0004">Figure 7B} Figure 7B</figref> is a diagram used to explain a determination method of the correlation direction when the oblique high frequency image is incident on the color imaging element.</li><li>{<figref idrefs="f0004">Figure 8} Figure 8</figref> is a diagram showing a second embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0005">Figure 9} Figure 9</figref> is a diagram showing a third embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0005">Figure 10} Figure 10</figref> is a diagram showing a fourth embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0006">Figure 11} Figure 11</figref> is a diagram showing a fifth embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0007">Figure 12} Figure 12</figref> is a diagram showing a sixth embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0008">Figure 13} Figure 13</figref> is a diagram showing a seventh embodiment of the color imaging element applied to the present invention.</li><li>{<figref idrefs="f0009">Figure 14} Figure 14</figref> is a diagram used to explain a problem of a conventional color imaging element including color filters in a Bayer array.</li></ul></p><heading id="h0010">{Description of Embodiments}</heading><p id="p0035" num="0035">Hereinafter, preferred embodiments of a color imaging apparatus according to the present invention will be described in detail with reference to the attached drawings.</p><heading id="h0011">{Overall Configuration of Color Imaging Apparatus}</heading><p id="p0036" num="0036"><figref idrefs="f0001">Figure 1</figref> is a block diagram showing embodiments of the color imaging apparatus according to the present invention.</p><p id="p0037" num="0037">An imaging optical system 10 images a subject, and an optical image indicating a subject image is formed on a light receiving surface of a color imaging element 12 (color imaging element of a first embodiment).</p><p id="p0038" num="0038">The color imaging element 12 is a single-plate color imaging element including: a plurality of pixels (not shown) including photoelectric conversion elements arranged in horizontal and vertical directions (two-dimensional array); and color filters in a predetermined color filter array arranged on light receiving surfaces of the pixels. The color filter array of the color imaging element 12 is characterized by including: filters<!-- EPO <DP n="12"> --> of all red (R), green (G), and blue (B) colors periodically arranged in lines in the horizontal and vertical directions; and sections where two or more G filters corresponding to Gs that most contribute to obtaining luminance signals are adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions. Details of the color imaging element 12 will be described later.</p><p id="p0039" num="0039">The photoelectric conversion elements convert the subject image formed on the color imaging element 12 to signal charges corresponding to amounts of incident light. The signal charges accumulated on the photoelectric conversion elements are sequentially read out from the color imaging element 12 as voltage signals (image signals) corresponding to the signal charges based on drive pulses provided from a drive unit 18 according to an instruction of a control unit 20. The image signals read out from the color imaging element 12 are R, G, and B signals indicating a mosaic image of R, G, and B corresponding to the color filter array of the color imaging element 12. The color imaging element 12 is not limited to a CCD (Charge Coupled Device) color imaging element and may be another type of imaging element such as a CMOS (Complementary Metal Oxide Semiconductor) imaging element.</p><p id="p0040" num="0040">The image signals read out from the color imaging element 12 are input to an image processing unit 14. The image processing unit 14 includes: a correlated double sampling circuit (CDS) that removes reset noise included in the image signals; an AGC (Automatic Gain Control) circuit that amplifies the image signals and controls the size at a certain level; and an A/D converter. The image processing unit 14 applies a correlated double sampling process to the input image signals and amplifies the image signals, and then outputs RAW data, which is formed by converting the image signals to digital image signals, to the image processing unit 16.</p><p id="p0041" num="0041">The image processing unit 16 includes a white balance correction circuit, a gamma correction circuit, a synchronization processing circuit according to the present invention (processing circuit that calculates (converts to synchronous system) all color information of RGB of the pixels from the mosaic image of RGB associated with the color filter array of the single-plate color imaging element 12), a luminance/color difference signal generation circuit, a contour correction circuit, a color correction circuit, and the like. According to an instruction from the control unit 20, the image processing unit 16 applies required signal processing to the RAW data of the mosaic<!-- EPO <DP n="13"> --> image input from the image processing unit 14 to generate image data (YUV data) including luminance data (Y data) and color difference data (Cr, Cb data).</p><p id="p0042" num="0042">For still images, a compression/expansion processing circuit applies a compression process, which is compliant with a JPEG (joint photographic experts group) standard, to the image data generated by the image processing unit 16. For moving images, the compression/expansion processing circuit applies a compression process, which is compliant with an MPEG2 (moving picture experts group) standard, to the image data. The image data is recorded in a recording medium (memory card) and is output and displayed on a display device (not shown) such as a liquid crystal monitor.</p><p id="p0043" num="0043">Details of the processing by the synchronization processing circuit according to the present invention in the image processing unit 16 will be described later.</p><heading id="h0012">&lt;Features of Color Filter Array&gt;</heading><p id="p0044" num="0044">The color filter array of the color imaging element 12 has the following features (1), (2), and (3).</p><heading id="h0013">{Feature (1)}</heading><p id="p0045" num="0045"><figref idrefs="f0001">Figure 2</figref> is a diagram showing the color filter array of the color filters arranged on the color imaging element 12. As shown in <figref idrefs="f0001">Figure 2</figref>, the color filter array of the color imaging element 12 includes a basic array pattern P (pattern indicated by a thick frame) formed by a square array pattern corresponding to 6x6 pixels, and the basic array pattern P is repeatedly arranged in the horizontal and vertical directions. Therefore, the color filter array includes filters of R, G, and B colors (R filters, G filters, and B filters) arranged in a predetermined cycle.</p><p id="p0046" num="0046">In this way, the R filters, the G filters, and the B filters are arranged in a predetermined cycle. Therefore, the synchronization processing and the like of the R, G, and B signals read out from the color imaging element 12 can be processed according to the repeated pattern.</p><heading id="h0014">{Feature (2)}</heading><p id="p0047" num="0047">In the color filter array shown in <figref idrefs="f0001">Figure 2</figref>, the filters of all colors of R, G, and B are arranged in the lines in the horizontal and vertical directions of the basic array pattern P. Therefore, as described later, when a correlation direction is determined to be the horizontal direction or the vertical direction in the synchronization processing, a pixel value of a pixel of another color in the horizontal direction or the vertical<!-- EPO <DP n="14"> --> direction can be used for interpolation. Therefore, generation of color moire (false color) can be suppressed. Since the generation of false color can be controlled, it is possible not to arrange an optical low-pass filter on an optical path from a plane of incident to an imaging plane of the optical system. Even if the optical low-pass filter is applied, a filter with less effect of cutting high frequency components for preventing the generation of false color can be applied, and a loss of resolution can be prevented.</p><p id="p0048" num="0048"><figref idrefs="f0002">Figure 3</figref> shows a state in which the basic array pattern P shown in <figref idrefs="f0001">Figure 2</figref> is divided into four sets of 3x3 pixels.</p><p id="p0049" num="0049">As shown in <figref idrefs="f0002">Figure 3</figref>, the basic array pattern P can be perceived as a pattern including A arrays of 3x3 pixels surrounded by a frame of solid lines and B arrays of 3x3 pixels surrounded by a frame of broken lines alternately arranged in the horizontal and vertical directions as shown in <figref idrefs="f0002">Figure 4</figref>.</p><p id="p0050" num="0050">Each of the A and B arrays includes G filters as luminance pixels arranged at four corners and a center, and the G filters are arranged on both diagonals. In the A array, the R filters are arranged in the horizontal direction, and the B filters are arranged in the vertical direction, across the G filter at the center. Meanwhile, in the B array, the B filters are arranged in the horizontal direction, and the R filters are arranged in the vertical direction, across the G filter at the center. Therefore, although the positional relationship between the R and B filters is opposite in the A and B arrays, the rest of the arrangement is the same.</p><heading id="h0015">{Feature (3)}</heading><p id="p0051" num="0051">The basic array pattern P of the color filter array shown in <figref idrefs="f0001">Figure 2</figref> includes sections where two or more G filters are adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions. The color filter array including the basic array patterns P arranged in the horizontal and vertical directions includes square arrays corresponding to 2x2 pixels of G filters.</p><p id="p0052" num="0052">This is because, as shown in <figref idrefs="f0002">Figure 3</figref>, the G filters as luminance pixels are arranged at the four corners and the center of 3x3 pixels in the A and B arrays, and the 3x3 pixels are alternately arranged in the horizontal and vertical directions to form the G filters of square arrays corresponding to 2x2 pixels. The pixel values of the 2x2 pixels of G filters can be used to calculate the correlation direction of luminance<!-- EPO <DP n="15"> --></p><p id="p0053" num="0053">(direction determination) in the horizontal direction, the vertical direction, and the oblique directions (NE, NW).</p><heading id="h0016">{Synchronization Processing Circuit of Image Processing Unit 16}</heading><p id="p0054" num="0054">The processing details of the synchronization processing circuit of the image processing unit 16 will be described.</p><p id="p0055" num="0055">As shown in <figref idrefs="f0003">Figure 5</figref>, the G pixels of 2x2 pixels corresponding to the G filters are extracted from the mosaic image output from the color imaging element 12. When the pixel values of the G pixels are defined as G1, G2, G3, and G4 in the order from upper left to lower right, a direction determination circuit included in the synchronization processing circuit calculates a difference absolute value of each direction.</p><p id="p0056" num="0056">More specifically, the difference absolute value in the vertical direction is (|G1-G3|+|G2-G4|)/2. The difference absolute value in the horizontal direction is (|G1-G2|+|G3-G4|)/2. The difference absolute value in an upper right oblique direction is |G2-G3|. The difference absolute value in an upper left oblique direction is |G1-G4|.</p><p id="p0057" num="0057">The direction determination circuit determines that there is a correlation (correlation direction) in the direction with the minimum difference absolute value among the four correlation absolute values,</p><p id="p0058" num="0058">When a local area of 5x5 pixels is extracted from the mosaic image so that the A array of 3x3 pixels (see <figref idrefs="f0002">Figure 3</figref>) is positioned at the center as shown in <figref idrefs="f0003">Figure 6</figref>, the G pixels of 2x2 pixels are arranged at four corners. Therefore, when the 3x3 pixels of the A array in the local area are target pixels of the synchronization processing, the direction determination circuit calculates sums (or average values) of the correlation absolute values in the directions at four corners and determines the direction with the minimum value among the sums (or the average values) of the correlation absolute values in the directions as the correlation direction of luminance in the target pixels of the synchronization processing.</p><p id="p0059" num="0059">When a pattern as shown in <figref idrefs="f0003">Figure 7A</figref> is input (black is 0 and white is 255), the sum of the difference absolute values in the vertical direction of the pixel values of 2x2 G pixels at four corners shown in <figref idrefs="f0004">Figure 7B</figref> is |0-255|×8=2040, and the sum of the difference absolute values in the horizontal direction is also |0-255|×8=2040.<!-- EPO <DP n="16"> --> Meanwhile, the sum of the difference absolute values in the upper right oblique direction is |255-255|×2+|0-0|×2=0, and the sum of the difference absolute values in the upper left oblique direction is |0-0|×2+|255-255|×2=0. Therefore, there are two directions (the upper right oblique direction and the upper left oblique direction) with the minimum sum of the difference absolute values. However, an oblique maximum frequency is input in the pattern of <figref idrefs="f0003">Figure 7A</figref>, and any one of the oblique directions can be adopted.</p><p id="p0060" num="0060">As described, since the correlation direction is determined from the 2x2 G pixels adjacent to each other, the correlation direction can be determined at minimum pixel intervals. Therefore, the correlation direction can be accurately determined without being affected by the high frequency wave.</p><p id="p0061" num="0061">In the embodiment, although the direction with the minimum change in the luminance (correlation direction with high correlation) is determined based on the difference values of the pixel values of adjacent G pixels, the arrangement is not limited to this. The direction with the minimum change in the luminance may be determined based on ratios of the pixels values of the adjacent G pixels. When the change in the luminance is determined based on the ratios of the pixel values of the adjacent G pixels, the direction with the ratio (average value of ratios when a plurality of ratios in four directions are calculated) closest to 1 is determined as the direction with the minimum change in the luminance.</p><p id="p0062" num="0062">A method of applying the synchronization processing to the mosaic image of RGB by the synchronization processing circuit of the image processing unit 16 will be described.</p><p id="p0063" num="0063">When the correlation direction in the target pixel of the synchronization processing is determined, the synchronization processing circuit uses the pixel value of a pixel of another color in the determined correlation direction when calculating the pixel value of the another color at the pixel position of the target pixel of the synchronization processing.</p><p id="p0064" num="0064">As shown in <figref idrefs="f0002">Figure 4</figref>, there are pixels of all colors (R pixels, G pixels, and B pixels) in the horizontal and vertical directions. Therefore, if it is determined that there is a correlation direction in the horizontal or vertical direction, the pixel value of a pixel of another color near the target pixel in the horizontal or vertical direction is<!-- EPO <DP n="17"> --> acquired. The acquired pixel value of one pixel or a value obtained by interpolating the pixel values of a plurality of pixels is set as the pixel value of the another color at the pixel position of the target pixel.</p><p id="p0065" num="0065">For example, if it is determined that the correlation direction is the horizontal direction, the pixel value of R12 or R32 is set as the pixel value of R at the pixel position of the pixel of G22 in <figref idrefs="f0003">Figure 6</figref>, or the pixel values of R12 and R32 are interpolated to determine the pixel value.</p><p id="p0066" num="0066">Similarly, the pixel value of B02 or B42 is set as the pixel value of B at the pixel position of the pixel of G22, or the pixel values of B02 and B42 are interpolated to determine the pixel value.</p><p id="p0067" num="0067">The pixel value of R12 is set as the pixel value of R at the pixel position of the pixel of B02, or the pixel values of R12 and R32 are interpolated to determine the pixel value.</p><p id="p0068" num="0068">The pixel value of G22 is set as the pixel value of G at the pixel position of the pixel of B02, or the pixel value of a G pixel at the same horizontal position of the adjacent B array and the pixel value of G22 are interpolated to determine the pixel value.</p><p id="p0069" num="0069">The pixel value of another color in the vertical direction can be similarly used when it is determined that the correlation direction is the vertical direction.</p><p id="p0070" num="0070">In the color filter array of the color imaging element 12 of the first embodiment, there are only G pixels in the oblique directions (diagonal directions) around the G pixel of the A array of 3x3 pixels. Therefore, if it is determined that the correlation direction is an oblique direction with consecutive G pixels, the pixel values of the other colors are calculated by interpolating the pixel value of the target pixel based on color differences between the pixel values of neighborhood R and B pixels where the pixel values of G are calculated.</p><p id="p0071" num="0071">As shown in <figref idrefs="f0003">Figure 6</figref>, when it is determined that there is a correlation direction toward oblique upper left as a result of the direction determination, there are no R and B pixels in the interpolation direction of the pixel of G11. Therefore, color differences between pixel values R12 and R21 of the pixels of R12 and B21 near the pixel of G11 and pixel values R12' and G21' of G at the pixel positions of the pixels are used to<!-- EPO <DP n="18"> --> interpolate the pixel value G11 of G11 to calculate pixel values R11' and B11' of Rand G at the pixel position of the pixel of G11.</p><p id="p0072" num="0072">Specifically, the interpolation is performed by the following formulas. <maths id="math0007" num="(a)"><math display="block"><mi mathvariant="normal">R</mi><mo>⁢</mo><mn mathvariant="normal">11</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>=</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">11</mn><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>⁢</mo><mn mathvariant="normal">12</mn><mo>-</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">12</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="64" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0008" num="(b)"><math display="block"><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">11</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>=</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">11</mn><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">21</mn><mo>-</mo><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">21</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi></mfenced></math><img id="ib0008" file="imgb0008.tif" wi="64" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0073" num="0073">In Expressions (a) and (b), G12'=G01 and G21'=G10. Therefore, the pixel values G12' and G21' are pixel values of G at the pixel positions of the pixels of R12 and B21 estimated by the direction determination in the oblique left direction.</p><p id="p0074" num="0074">Similarly, color differences between the pixel positions of the pixels of R12 and R32 near the R and B pixels at the pixel position of the pixel of G22 and the pixel positions of the pixels of B21 and B23 are used to interpolate the pixel value G22 of G22 to calculate the pixel values R22' and B22' of R and G at the pixel position of the pixel of G22.</p><p id="p0075" num="0075">Specifically, the interpolation is performed by the following formulas. <maths id="math0009" num="(c)"><math display="block"><mi mathvariant="normal">R</mi><mo>⁢</mo><mn mathvariant="normal">22</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>=</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">22</mn><mo>+</mo><mfenced open="{" close="}" separators=""><mfenced separators=""><mi mathvariant="normal">R</mi><mo>⁢</mo><mn mathvariant="normal">12</mn><mo>+</mo><mi mathvariant="normal">R</mi><mo>⁢</mo><mn mathvariant="normal">32</mn></mfenced><mo>/</mo><mn>2</mn><mo>-</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">12</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>+</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">32</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi></mfenced><mo>/</mo><mn>2</mn></mfenced></math><img id="ib0009" file="imgb0009.tif" wi="105" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0010" num="(d)"><math display="block"><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">22</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>=</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">22</mn><mo>+</mo><mfenced open="{" close="}" separators=""><mfenced separators=""><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">21</mn><mo>+</mo><mi mathvariant="normal">B</mi><mo>⁢</mo><mn mathvariant="normal">23</mn></mfenced><mo>/</mo><mn>2</mn><mo>-</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">21</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi><mo>+</mo><mi mathvariant="normal">G</mi><mo>⁢</mo><mn mathvariant="normal">23</mn><mo>⁢</mo><mi mathvariant="normal">ʹ</mi></mfenced><mo>/</mo><mn>2</mn></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="105" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0076" num="0076">In the formulas, G32'=G43 and G23'=G34.</p><p id="p0077" num="0077">When the synchronization processing of all pixels of 3x3 pixels (A array) is finished, the same processing (the direction determination and the synchronization processing) is applied to the target pixels of adjacent 3x3 pixels (B array), and the processing is repeated while shifting the processing by 3x3 pixels.</p><p id="p0078" num="0078">As described, in the color filter array of the color imaging element 12, only G pixels may exist in the oblique directions in the calculation of the pixel values of R and B at the pixel position of the G pixel as the target pixel of the synchronization processing. Depending on the color filter array, there can be a case in which the target pixel of the synchronization processing is an R pixel, and G pixels and B pixels do not exist in the oblique directions in the calculation of the pixel values of G and B at the pixel position. There can also be a case in which the target pixel of the synchronization processing is a B pixel, and G pixels and the R pixels do not exist in the oblique directions in the calculation of the pixel values of G and R at the pixel position.</p><p id="p0079" num="0079">Even in these cases, the pixel values of the other colors can be calculated as in Expressions (a) to (d) by interpolating the pixel values of the target pixel based on the<!-- EPO <DP n="19"> --> color differences between the pixel values of the neighborhood pixels where the pixel values of RGB are calculated.</p><p id="p0080" num="0080">The following is a summary of the method of calculating the pixel values of the other colors by interpolating the pixel values of the target pixel based on the color differences between the neighborhood pixels.</p><p id="p0081" num="0081">When the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0011" num="(1)"><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced></math><img id="ib0011" file="imgb0011.tif" wi="89" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0082" num="0082">Expression (1) is equivalent to Expressions (a) and (b).</p><p id="p0083" num="0083">Similarly, when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0012" num="(2)"><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced></math><img id="ib0012" file="imgb0012.tif" wi="89" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0084" num="0084">When the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>, pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0013" num="(3)"><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced></math><img id="ib0013" file="imgb0013.tif" wi="86" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0085" num="0085">Other than Expressions (1) to (3), if there are a plurality of pixels in the same color as the color to be interpolated and calculated near the target pixel of the synchronization processing, an average color difference of the plurality of pixels can be used for the interpolation as in Expressions (c) and (d).<!-- EPO <DP n="20"> --></p><p id="p0086" num="0086">In the embodiment, when there are no pixels of the other colors in the determined correlation direction with respect to the target pixel of the synchronization processing, the pixel values of the target pixel are interpolated based on the color differences between the neighborhood pixels of the other colors to calculate the pixel values of the other colors. However, the arrangement is not limited to this. The pixel values of the target pixel may be interpolated based on color ratios of the neighborhood pixels of the other colors to calculate the pixel values of the other colors.</p><p id="p0087" num="0087">A specific example of a method of calculating the pixel values of the other colors by interpolating the pixel values of the target pixel based on the color ratios of the neighborhood pixels will be described below.</p><p id="p0088" num="0088">When the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, the pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0014" num="(4)"><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced></math><img id="ib0014" file="imgb0014.tif" wi="91" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0089" num="0089">Similarly, when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, the pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0015" num="(5)"><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced></math><img id="ib0015" file="imgb0015.tif" wi="93" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0090" num="0090">When the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination circuit, if the pixel values of the G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>, the pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel are calculated by the following formulas. <maths id="math0016" num="(6)"><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced></math><img id="ib0016" file="imgb0016.tif" wi="88" he="11" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="21"> --></p><p id="p0091" num="0091">The present invention is based on a color imaging element including R, G, and B pixels periodically arranged in the lines in the horizontal and vertical directions. However, when a color imaging element that also includes R, G, and B pixels periodically arranged in the oblique (NE, NW) directions is used, the pixel values of the other colors do not have to be interpolated and calculated by Expressions (1) to (6) or the like.</p><p id="p0092" num="0092">When the difference absolute values of the pixel values of the G pixels adjacent to each other in the horizontal, vertical and oblique (NE, NW) directions are equal to each other (when the difference absolute values are 0 or substantially 0 in all directions), the direction determination circuit determines that there is no correlation direction. In this case, the pixel values of the pixels of the other colors near the pixel position are used for the pixel values of the other colors at the pixel position of the target pixel of the synchronization processing.</p><heading id="h0017">{Second Embodiment of Color Imaging Element}</heading><p id="p0093" num="0093"><figref idrefs="f0004">Figure 8</figref> is a diagram showing a second embodiment of the color imaging element applied to the present invention. <figref idrefs="f0004">Figure 8</figref> particularly shows a color filter array of the color filters arranged on the color imaging element.</p><p id="p0094" num="0094">As shown in <figref idrefs="f0004">Figure 8</figref>, the color filter array of the color imaging element includes basic array patterns formed by square array patterns corresponding to 6x6 pixels, and the basic array pattern is repeatedly arranged in the horizontal and vertical directions. Therefore, the color filter array includes filters of R, G, and B colors (R filters, G filters, and B filters) arranged in a predetermined cycle.</p><p id="p0095" num="0095">The color filter array shown in <figref idrefs="f0004">Figure 8</figref> includes filters of all colors of R, G, and B arranged in the lines in the horizontal and vertical directions of the basic array pattern.</p><p id="p0096" num="0096">If the basic array pattern is divided into four sets of 3x3 pixels as shown in <figref idrefs="f0004">Figure 8</figref>, the basic array pattern can also be perceived as a color filter array including A arrays of 3x3 pixels surrounding by frames of solid lines and B arrays of 3x3 pixels surrounded by frames of broken lines that are alternately arranged in the horizontal and vertical directions.</p><p id="p0097" num="0097">In the A array, the R filter is arranged at the center of 3x3 pixels, the B filters are arranged at four corners, and the G filters are vertically and horizontally arranged<!-- EPO <DP n="22"> --> across the R filter at the center. Meanwhile, in the B array, the B filter is arranged at the center of 3x3 pixels, the R filters are arranged at four corners, and the G filters are vertically and horizontally arranged across the B filter at the center. Therefore, although the positional relationship between the R and B filters is opposite in the A and B arrays, the rest of the arrangement is the same.</p><p id="p0098" num="0098">The color filter array shown in <figref idrefs="f0004">Figure 8</figref> includes sections where two G filters are adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions.</p><p id="p0099" num="0099">The G filters as luminance pixels are vertically and horizontally arranged across the filter at the center of the 3x3 pixel group in the A or B array. Therefore, if the 3x3 pixel groups are repeatedly arranged in the horizontal and vertical directions, two pixels are arranged adjacent to each other in the horizontal and vertical directions across the filters at the centers of the 3x3 pixel groups.</p><p id="p0100" num="0100">According to the color filter array, the pixel values of the pixels (eight pixels in total) corresponding to the G filter as a luminance pixel allow determining the correlations of luminance in the horizontal, vertical, and oblique (NE, NW) directions based on the pixel values at minimum pixel intervals.</p><p id="p0101" num="0101">When 3x3 pixels corresponding to the A array are the target pixels of the synchronization processing, there are consecutive G pixels in the horizontal and vertical directions across the R pixel at the center (G pixels are arranged in a cross shape). The correlations of luminance in the horizontal and vertical directions can be calculated based on the pixel values of the consecutive G pixels in the horizontal and vertical directions, and the correlations of luminance in the oblique directions (NE, NW) can be calculated from four vertical and horizontal G pixels adjacent to the R pixel.</p><p id="p0102" num="0102">The color filter array of the color imaging element of the second embodiment has the same features as the features (1), (2), and (3) of the color filter array of the color imaging element 12 of the first embodiment. The direction determination and the pixel interpolation according to the present invention can be performed.</p><p id="p0103" num="0103">In the color filter array of the color imaging element of the second embodiment, if, for example, the R pixel at the center of the A array or the B pixel at the center of the B array is the target pixel of the synchronization processing, and it is determined that an oblique direction is the correlation direction, there are no G pixels in the oblique<!-- EPO <DP n="23"> --> direction. In this case, the pixel values of G can be calculated based on Expressions (2) and (3) or Expressions (5) and (6).</p><heading id="h0018">{Third Embodiment of Color Imaging Element}</heading><p id="p0104" num="0104"><figref idrefs="f0005">Figure 9</figref> is a diagram showing a third embodiment of the color imaging element applied to the present invention. <figref idrefs="f0005">Figure 9</figref> particularly shows a color filter array of the color filters arranged on the color imaging element.</p><p id="p0105" num="0105">As shown in <figref idrefs="f0005">Figure 9</figref>, the color filter array of the color imaging element includes a basic array pattern (pattern indicated by a thick frame) formed by a square array pattern corresponding to 5x5 pixels. The basic array pattern is repeatedly arranged in the horizontal and vertical directions. Therefore, the color filter array includes filters of R, G, and B colors (R filters, G filters, and B filters) arranged in a predetermined cycle.</p><p id="p0106" num="0106">The color filter array shown in <figref idrefs="f0005">Figure 9</figref> includes filters of all colors of R, G, and B arranged in the lines in the horizontal and vertical directions of the basic array pattern.</p><p id="p0107" num="0107">In the basic array pattern, two or more consecutive G filters (G pixels) are arranged in the horizontal, vertical, and oblique directions (NE, NW). The pixel values of the consecutive G pixels allow determining the correlations of luminance in the horizontal, vertical, and oblique (NE, NW) directions at minimum pixel intervals.</p><p id="p0108" num="0108">The color filter array of the color imaging element of the third embodiment has the same features as the features (1), (2), and (3) of the color filter array of the color imaging element 12 of the first embodiment. The direction determination and the pixel interpolation according to the present invention can be performed.</p><heading id="h0019">{Fourth Embodiment of Color Imaging Element}</heading><p id="p0109" num="0109"><figref idrefs="f0005">Figure 10</figref> is a diagram showing a fourth embodiment of the color imaging element applied to the present invention. <figref idrefs="f0005">Figure 10</figref> particularly shows a color filter array of the color filters arranged on the color imaging element.</p><p id="p0110" num="0110">As shown in <figref idrefs="f0005">Figure 10</figref>, the color filter array of the color imaging element includes a basic array pattern (pattern indicated by a thick frame) formed by a square array pattern corresponding to 7x7 pixels, and the basic array pattern is repeatedly arranged in the horizontal and vertical directions. Therefore, the color filter array<!-- EPO <DP n="24"> --> includes filters of R, G, and B colors (R filters, G filters, and B filters) arranged in a predetermined cycle.</p><p id="p0111" num="0111">In the color filter array shown in <figref idrefs="f0005">Figure 10</figref>, the filters of all colors of R, G, and B are arranged in the lines in the horizontal and vertical directions of the basic array pattern.</p><p id="p0112" num="0112">In the basic array pattern, consecutive G filters (G pixels) are arranged in the horizontal, vertical, and oblique directions (NE, NW). More specifically, there are four sets of vertically and horizontally consecutive 2x2 G pixels in the basic array pattern.</p><p id="p0113" num="0113">The pixel values of the consecutive G pixels allow determining the correlations of luminance in the horizontal, vertical, and oblique (NE, NW) directions at minimum pixel intervals.</p><p id="p0114" num="0114">The color filter array of the color imaging element of the fourth embodiment has the same features as the features (1), (2), and (3) of the color filter array of the color imaging element 12 of the first embodiment. The direction determination and the pixel interpolation according to the present invention can be performed.</p><heading id="h0020">{Fifth Embodiment of Color Imaging Element}</heading><p id="p0115" num="0115"><figref idrefs="f0006">Figure 11</figref> is a diagram showing a fifth embodiment of the color imaging element applied to the present invention. <figref idrefs="f0006">Figure 11</figref> particularly shows a color filter array of the color filters arranged on the color imaging element.</p><p id="p0116" num="0116">As shown in <figref idrefs="f0006">Figure 11</figref>, the color filter array of the color imaging element includes a basic array pattern (pattern indicated by a thick frame) formed by a square array pattern corresponding to 8x8 pixels, and the basic array pattern is repeatedly arranged in the horizontal and vertical directions. Therefore, the color filter array includes filters of R, G, and B colors (R filters, G filters, and B filters) arranged in a predetermined cycle.</p><p id="p0117" num="0117">The color filter array shown in <figref idrefs="f0006">Figure 11</figref> includes filters of all colors of R, G, and B arranged in the lines in the horizontal and vertical directions of the basic array pattern.</p><p id="p0118" num="0118">In the basic array pattern, consecutive G filters (G pixels) are arranged in the horizontal, vertical, and oblique directions (NE, NW). More specifically, there are<!-- EPO <DP n="25"> --> four sets of G pixels including vertically and horizontally consecutive 2x2 pixels in the basic array pattern.</p><p id="p0119" num="0119">The pixel values of the consecutive G pixels allow determining the correlations of luminance in the horizontal, vertical, and oblique (NE, NW) directions at minimum pixel intervals.</p><p id="p0120" num="0120">The color filter array of the color imaging element of the fifth embodiment has the same features as the features (1), (2), and (3) of the color filter array of the color imaging element 12 of the first embodiment. The direction determination and the pixel interpolation according to the present invention can be performed.</p><heading id="h0021">{Sixth and Seventh Embodiments of Color Imaging Element}</heading><p id="p0121" num="0121"><figref idrefs="f0007">Figures 12</figref> and <figref idrefs="f0008">13</figref> are diagrams respectively showing sixth and seventh embodiments of the color imaging element applied to the present invention. <figref idrefs="f0007">Figures 12</figref> and <figref idrefs="f0008">13</figref> particularly show color filter arrays of the color filters arranged on the color imaging element.</p><p id="p0122" num="0122">The color filter array of the color imaging element of the sixth embodiment shown in <figref idrefs="f0007">Figure 12</figref> includes the A arrays of 3x3 pixels of the first embodiment shown in <figref idrefs="f0002">Figure 3</figref> arranged in the horizontal and vertical directions.</p><p id="p0123" num="0123">Meanwhile, the color filter array of the color imaging element of the seventh embodiment shown in <figref idrefs="f0008">Figure 13</figref> includes the B arrays of 3x3 pixels of the first embodiment shown in <figref idrefs="f0002">Figure 3</figref> arranged in the horizontal and vertical directions.</p><p id="p0124" num="0124">The basic array patterns are small (3x3 pixels) in the color filter arrays of the color imaging element of the sixth and seventh embodiments, and there is an advantageous effect that the synchronization processing of the R, G, and B signals is facilitated.</p><p id="p0125" num="0125">Meanwhile, the filters of all colors of R, G, and B are not arranged in the lines in the horizontal and vertical directions in the basic array patterns, and the arrays do not have the feature (2) of the color filter array of the color imaging element 12 of the first embodiment. However, the arrays have the same features as the features (1) and (3), and the direction determination and the pixel interpolation according to the present invention can be performed.</p><heading id="h0022">{Others}</heading><!-- EPO <DP n="26"> --><p id="p0126" num="0126">Although the color imaging apparatus including the color imaging element with color filters of three primary colors of RGB has been described in the embodiments, the present invention is not limited to this. The present invention can also be applied to a color imaging apparatus including a color imaging element with color filters of four colors including three primary colors of RGB and another color (for example, emerald (E)).</p><p id="p0127" num="0127">The present invention can also be applied to a color imaging apparatus including a color imaging element with color filters of four complementary colors including G in addition to C (cyan), M (magenta), and Y (yellow) that are complementary colors of the primary colors RGB.</p><p id="p0128" num="0128">It is obvious that the present invention is not limited to the embodiments, and various modifications can be made without departing from the spirit of the present invention.</p><heading id="h0023">{Reference Signs List}</heading><p id="p0129" num="0129"><ul><li>10 ... imaging optical system, 12 ... color imaging element, 14 ... image processing unit, 16 ... image processing unit, 18 ... drive unit, 20 ... control unit</li></ul></p></description><claims mxw-id="PCLM56982271" lang="EN" load-source="patent-office"><!-- EPO <DP n="27"> --><claim id="c-en-0001" num="0001"><claim-text>A color imaging apparatus comprising:
<claim-text>a single-plate color imaging element comprising: a plurality of pixels including photoelectric conversion elements arranged in horizontal and vertical directions; and color filters of a predetermined color filter array arranged on the plurality of pixels, wherein the color filter array includes first filters corresponding to a first color that most contributes to obtaining luminance signals and second filters corresponding to two or more second colors other than the first color, the first and second filters being periodically arranged, and the first filters include two or more sections adjacent to each other in horizontal, vertical, and oblique (NE, NW) directions;</claim-text>
<claim-text>an image acquisition unit that acquires a mosaic image corresponding to the color filter array from the color imaging element;</claim-text>
<claim-text>a direction determination unit that acquires, for a target pixel of synchronization processing extracted from the mosaic image, pixel values of pixels corresponding to the first filters near the target pixel and adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions and that determines which one of the horizontal, vertical, and oblique (NE, NW) directions is a correlation direction of luminance based on the pixel values of the adjacent pixels;</claim-text>
<claim-text>a synchronization processing unit that calculates a pixel value of another color at a pixel position of the target pixel of the synchronization processing extracted from the mosaic image and that uses a pixel value of a pixel of another color in the correlation direction determined by the direction determination unit to calculate the pixel value; and</claim-text>
<claim-text>a control unit that repeatedly operates the direction determination unit and the synchronization processing unit while shifting the target pixel of the synchronization processing extracted from the mosaic image by a target pixel unit of the synchronization processing.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The color imaging apparatus according to claim 1, wherein<br/>
<!-- EPO <DP n="28"> -->the color filter array includes a basic array pattern including the first and second filters, the basic array pattern is repeatedly arranged in the horizontal and vertical directions, and<br/>
one or more of the first filters and one or more of the second filters are arranged in each line in the horizontal and vertical directions of the basic array pattern.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The color imaging apparatus according to claim 1, wherein<br/>
in the color filter array, the first filters are arranged at a center and four corners of a 3x3 pixel group, and the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The color imaging apparatus according to claim 1, wherein<br/>
in the color filter array, the first filters are vertically and horizontally arranged across a filter at a center of a 3x3 pixel group, and the 3x3 pixel group is repeatedly arranged in the horizontal and vertical directions.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The color imaging apparatus according to any one of claims 1 to 4, wherein<br/>
the direction determination unit calculates difference absolute values of pixel values of adjacent pixels in each of the horizontal, vertical, and oblique (NE, NW) directions and determines a direction with a minimum difference absolute value among the difference absolute values in the directions as the correlation direction.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The color imaging apparatus according to any one of claims 1 to 4, wherein<br/>
the direction determination unit calculates ratios of pixel values of adjacent pixels in each of the horizontal, vertical, and oblique (NE, NW) directions and determines a direction with the ratio closest to 1 among the ratios in the directions as the correlation direction.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The color imaging apparatus according to any one of claims 1 to 6, wherein<br/>
the synchronization processing unit sets the pixel value of a pixel of another color in the correlation direction determined by the direction determination unit as the pixel value of the another color at the pixel position of the target pixel or sets a value<!-- EPO <DP n="29"> --> obtained by interpolating the pixel values of a plurality of pixels of another color in the correlation direction determined by the direction determination unit as the pixel value of the another color at the pixel position of the target pixel.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The color imaging apparatus according to any one of claims 1 to 7, wherein<br/>
if there is no pixel of the another color in the correlation direction determined by the direction determination unit, the synchronization processing unit interpolates the pixel value of the target pixel based on a color difference or a color ratio at the pixel positions of the pixels of the another color near the target pixel to calculate the pixel value of the another color.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The color imaging apparatus according to claim 8, wherein<br/>
the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, wherein<br/>
when the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, the synchronization processing unit calculates pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel by following formulas <maths id="math0017" num=""><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0017" file="imgb0017.tif" wi="75" he="10" img-content="math" img-format="tif"/></maths><br/>
wherein<br/>
when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, the synchronization processing unit calculates pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel by following formulas <maths id="math0018" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>-</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0018" file="imgb0018.tif" wi="73" he="9" img-content="math" img-format="tif"/></maths><br/>
and wherein<br/>
when the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>,<!-- EPO <DP n="30"> --> the synchronization processing unit calculates pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel by following formulas <maths id="math0019" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and R</mi></mrow><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>+</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>-</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced><mn>.</mn></math><img id="ib0019" file="imgb0019.tif" wi="78" he="10" img-content="math" img-format="tif"/></maths></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The color imaging apparatus according to claim 8, wherein<br/>
the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, wherein<br/>
when the target pixel of the synchronization processing is a G pixel, the pixel value is G, and there are no R and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of R and B pixels near the G pixel are R and B, and the pixel values of G at the pixel positions of the pixels are G<sub>R</sub> and G<sub>B</sub>, the synchronization processing unit calculates pixel values R<sub>G</sub> and B<sub>G</sub> of the R and B pixels at the position of the target pixel by following formulas <maths id="math0020" num=""><math display="block"><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">G</mi></msub><mo>=</mo><mi mathvariant="normal">G</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0020" file="imgb0020.tif" wi="68" he="8" img-content="math" img-format="tif"/></maths><br/>
wherein<br/>
when the target pixel of the synchronization processing is an R pixel, the pixel value is R, and there are no G and B pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and B pixels near the R pixel are G and B, and the pixel values of R at the pixel positions of the pixels are R<sub>G</sub> and R<sub>B</sub>, the synchronization processing unit calculates pixel values G<sub>R</sub> and B<sub>R</sub> of the G and B pixels at the position of the target pixel by following formulas <maths id="math0021" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and B</mi></mrow><mi mathvariant="normal">R</mi></msub><mo>=</mo><mi mathvariant="normal">R</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">B</mi><mo>/</mo><msub><mi mathvariant="normal">R</mi><mi mathvariant="normal">B</mi></msub></mfenced><mo>,</mo></math><img id="ib0021" file="imgb0021.tif" wi="73" he="8" img-content="math" img-format="tif"/></maths><br/>
and wherein<br/>
when the target pixel of the synchronization processing is a B pixel, the pixel value is B, and there are no G and R pixels in the correlation direction determined by the direction determination unit, if the pixel values of G and R pixels near the B pixel are G and R, and the pixel values of B at the pixel positions of the pixels are B<sub>G</sub> and B<sub>R</sub>, the synchronization processing unit calculates pixel values G<sub>B</sub> and R<sub>B</sub> of the G and R pixels at the position of the target pixel by following formulas <maths id="math0022" num=""><math display="block"><msub><mi mathvariant="normal">G</mi><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">G</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">G</mi></msub></mfenced><mo>⁢</mo><msub><mrow><mspace width="1em"/><mi>and R</mi></mrow><mi mathvariant="normal">B</mi></msub><mo>=</mo><mi mathvariant="normal">B</mi><mo>×</mo><mfenced separators=""><mi mathvariant="normal">R</mi><mo>/</mo><msub><mi mathvariant="normal">B</mi><mi mathvariant="normal">R</mi></msub></mfenced><mn>.</mn></math><img id="ib0022" file="imgb0022.tif" wi="77" he="9" img-content="math" img-format="tif"/></maths></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The color imaging apparatus according to any one of claims 1 to 10, wherein<br/>
<!-- EPO <DP n="31"> -->the direction determination unit determines that there is no correlation direction when difference values of the pixel values of the pixels adjacent to each other in the horizontal, vertical, and oblique (NE, NW) directions are equal, and<br/>
if the direction determination unit determines that there is no correlation direction, the synchronization processing unit uses the pixel value of a pixel of another color near the pixel position of the target pixel of the synchronization processing to calculate the pixel value of the another color at the pixel position.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The color imaging apparatus according to any one of claims 1 to 11, wherein<br/>
the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, and<br/>
the filter array includes: a first array corresponding to 3x3 pixels, the first array including G filters arranged at a center and four corners, B filters vertically arranged across the G filter at the center, and R filters horizontally arranged across the G filter at the center; and a second array corresponding to 3x3 pixels, the second array including G filters arranged at a center and four corners, R filters vertically arranged across the G filter at the center, and B filters horizontally arranged across the G filter at the center, wherein the first and second arrays are alternately arranged in the horizontal and vertical directions.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The color imaging apparatus according to any one of claims 1 to 11, wherein<br/>
the color filters include R filters, G filters, and B filters corresponding to red (R), green (G), and blue (B) colors, and<br/>
the filter array includes: a first array corresponding to 3x3 pixels, the first array including an R filter arranged at a center, B filters arranged at four corners, and G filters vertically and horizontally arranged across the R filter at the center; and a second array corresponding to 3x3 pixels, the second array including a B filter arranged at a center, R filters arranged at four corners, and G filters vertically and horizontally arranged across the B filter at the center, wherein the first and second arrays are alternately arranged in the horizontal and vertical directions.</claim-text></claim></claims><drawings mxw-id="PDW16670656" load-source="patent-office"><!-- EPO <DP n="32"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="159" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="139" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0003" num="5,6,7A"><img id="if0003" file="imgf0003.tif" wi="135" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0004" num="7B,8"><img id="if0004" file="imgf0004.tif" wi="135" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0005" num="9,10"><img id="if0005" file="imgf0005.tif" wi="134" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0006" num="11"><img id="if0006" file="imgf0006.tif" wi="155" he="161" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0007" num="12"><img id="if0007" file="imgf0007.tif" wi="158" he="165" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0008" num="13"><img id="if0008" file="imgf0008.tif" wi="158" he="157" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0009" num="14(A),14(B),14(C),14(D),14(E)"><img id="if0009" file="imgf0009.tif" wi="116" he="208" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
