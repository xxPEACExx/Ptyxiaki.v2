<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681918-A1" country="EP" doc-number="2681918" kind="A1" date="20140108" family-id="45607762" file-reference-id="313462" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586370" ucid="EP-2681918-A1"><document-id><country>EP</country><doc-number>2681918</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12704288-A" is-representative="NO"><document-id mxw-id="PAPP154848562" load-source="docdb" format="epo"><country>EP</country><doc-number>12704288</doc-number><kind>A</kind><date>20120217</date><lang>EN</lang></document-id><document-id mxw-id="PAPP212227540" load-source="docdb" format="original"><country>EP</country><doc-number>12704288.5</doc-number><date>20120217</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140549338" ucid="EP-11305218-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>11305218</doc-number><kind>A</kind><date>20110301</date></document-id></priority-claim><priority-claim mxw-id="PPC140551200" ucid="EP-12704288-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12704288</doc-number><kind>A</kind><date>20120217</date></document-id></priority-claim><priority-claim mxw-id="PPC140552453" ucid="EP-2012052791-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2012052791</doc-number><kind>W</kind><date>20120217</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1915455382" load-source="docdb">H04N  13/04        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915457617" load-source="docdb">H04N  13/02        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915457858" load-source="docdb">H04N  13/00        20060101AFI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915461326" load-source="docdb">G06T  15/00        20110101ALI20160725BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1642417188" load-source="docdb" scheme="CPC">H04N  13/293       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417189" load-source="docdb" scheme="CPC">H04N  13/144       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417190" load-source="docdb" scheme="CPC">H04N  13/361       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417191" load-source="docdb" scheme="CPC">H04N  13/183       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417192" load-source="docdb" scheme="CPC">H04N  13/178       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417193" load-source="docdb" scheme="CPC">H04N  13/156       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1897332827" load-source="docdb" scheme="CPC">H04N2213/002       20130101 LA20160912BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989639268" load-source="docdb" scheme="CPC">G06T  15/00        20130101 FI20131212BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363743" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNG ZUM ERSTELLEN STEREOSKOPISCHER 3D-VIDEOINFORMATIONEN SOWIE VERFAHREN UND VORRICHTUNG ZUR DARSTELLUNG DERARTIGER STEREOSKOPISCHER 3D-VIDEOINFORMATIONEN</invention-title><invention-title mxw-id="PT132363744" lang="EN" load-source="patent-office">METHOD AND APPARATUS FOR AUTHORING STEREOSCOPIC 3D VIDEO INFORMATION, AND METHOD AND APPARATUS FOR DISPLAYING SUCH STEREOSCOPIC 3D VIDEO INFORMATION</invention-title><invention-title mxw-id="PT132363745" lang="FR" load-source="patent-office">PROCÉDÉ ET APPAREIL DE CRÉATION D'INFORMATIONS VIDÉO 3D STÉRÉOSCOPIQUES, ET PROCÉDÉ ET APPAREIL D'AFFICHAGE DE CES INFORMATIONS VIDÉO 3D STÉRÉOSCOPIQUES</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919517851" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>THOMSON LICENSING</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR919531324" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>THOMSON LICENSING</last-name></addressbook></applicant><applicant mxw-id="PPAR919018022" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Thomson Licensing</last-name><iid>101247266</iid><address><street>1-5, rue Jeanne d'Arc</street><city>92130 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919544100" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HOERENTRUP JOBST</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR919508985" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HOERENTRUP, JOBST</last-name></addressbook></inventor><inventor mxw-id="PPAR919006685" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HOERENTRUP, JOBST</last-name><address><street>Neustadtstr. 4</street><city>30974 Wennigsen</city><country>DE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919018570" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Schmidt-Uhlig, Thomas</last-name><iid>100823204</iid><address><street>Deutsche Thomson OHG European Patent Operations Karl-Wiechert-Allee 74</street><city>30625 Hannover</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2012052791-W"><document-id><country>EP</country><doc-number>2012052791</doc-number><kind>W</kind><date>20120217</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012116900-A1"><document-id><country>WO</country><doc-number>2012116900</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549759778" load-source="docdb">AL</country><country mxw-id="DS549769980" load-source="docdb">AT</country><country mxw-id="DS549759779" load-source="docdb">BE</country><country mxw-id="DS549837319" load-source="docdb">BG</country><country mxw-id="DS549837608" load-source="docdb">CH</country><country mxw-id="DS549760217" load-source="docdb">CY</country><country mxw-id="DS549769985" load-source="docdb">CZ</country><country mxw-id="DS549759780" load-source="docdb">DE</country><country mxw-id="DS549760218" load-source="docdb">DK</country><country mxw-id="DS549760219" load-source="docdb">EE</country><country mxw-id="DS549837708" load-source="docdb">ES</country><country mxw-id="DS549837320" load-source="docdb">FI</country><country mxw-id="DS549837609" load-source="docdb">FR</country><country mxw-id="DS549759785" load-source="docdb">GB</country><country mxw-id="DS549760220" load-source="docdb">GR</country><country mxw-id="DS549759786" load-source="docdb">HR</country><country mxw-id="DS549769986" load-source="docdb">HU</country><country mxw-id="DS549851336" load-source="docdb">IE</country><country mxw-id="DS549760225" load-source="docdb">IS</country><country mxw-id="DS549837614" load-source="docdb">IT</country><country mxw-id="DS549760226" load-source="docdb">LI</country><country mxw-id="DS549837321" load-source="docdb">LT</country><country mxw-id="DS549914557" load-source="docdb">LU</country><country mxw-id="DS549837330" load-source="docdb">LV</country><country mxw-id="DS549837331" load-source="docdb">MC</country><country mxw-id="DS549914558" load-source="docdb">MK</country><country mxw-id="DS549914559" load-source="docdb">MT</country><country mxw-id="DS549914560" load-source="docdb">NL</country><country mxw-id="DS549769987" load-source="docdb">NO</country><country mxw-id="DS549914561" load-source="docdb">PL</country><country mxw-id="DS549760227" load-source="docdb">PT</country><country mxw-id="DS549837709" load-source="docdb">RO</country><country mxw-id="DS549760228" load-source="docdb">RS</country><country mxw-id="DS549914562" load-source="docdb">SE</country><country mxw-id="DS549759787" load-source="docdb">SI</country><country mxw-id="DS549769988" load-source="docdb">SK</country><country mxw-id="DS549769993" load-source="docdb">SM</country><country mxw-id="DS549851337" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99836519" ref-ucid="WO-2012116900-A1" lang="EN" load-source="patent-office"><p num="0000">A method and an apparatus for authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics are described. A depth range in z-space for the stereoscopic presentation of the 3D video stream is determined for a plurality of time codes. A reference plane in z-space for placing the 3D overlay graphics is then determined such that depth conflicts between the 3D video and the reference plane are reduced. A comfort zone surrounding a display screen plane and comprising the reference plane is defined, wherein the comfort zone specifies a depth range in z-space for preferable presentation of the stereoscopic 3D video information. It is then determined whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the respective time codes. In this way a set of conflict intervals is generated, which is stored on a media source comprising the 3D video stream and the 3D overlay graphics. The set of conflict intervals is used during playback to adapt a presentation of the 3D video stream or a presentation of the 3D overlay graphics.</p></abstract><abstract mxw-id="PA100332291" ref-ucid="WO-2012116900-A1" lang="EN" source="national office" load-source="docdb"><p>A method and an apparatus for authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics are described. A depth range in z-space for the stereoscopic presentation of the 3D video stream is determined for a plurality of time codes. A reference plane in z-space for placing the 3D overlay graphics is then determined such that depth conflicts between the 3D video and the reference plane are reduced. A comfort zone surrounding a display screen plane and comprising the reference plane is defined, wherein the comfort zone specifies a depth range in z-space for preferable presentation of the stereoscopic 3D video information. It is then determined whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the respective time codes. In this way a set of conflict intervals is generated, which is stored on a media source comprising the 3D video stream and the 3D overlay graphics. The set of conflict intervals is used during playback to adapt a presentation of the 3D video stream or a presentation of the 3D overlay graphics.</p></abstract><abstract mxw-id="PA99836520" ref-ucid="WO-2012116900-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention porte sur un procédé et un appareil de création d'informations vidéo 3D stéréoscopiques comprenant un flux vidéo 3D et un graphique en incrustation 3D. Une plage de profondeur dans l'espace z pour la présentation stéréoscopique du flux vidéo 3D est déterminée pour une pluralité de codes temporels. Un plan de référence dans l'espace z pour placer le graphique en incrustation 3D est ensuite déterminé de telle sorte que des conflits de profondeur entre la vidéo 3D et le plan de référence sont réduits. Une zone de confort entourant un plan d'écran d'affichage et comprenant le plan de référence est définie, la zone de confort spécifiant une plage de profondeur dans l'espace z pour une présentation préférable des informations vidéo 3D stéréoscopique. Il est ensuite déterminé si un conflit de profondeur entre le plan de référence et le flux vidéo 3D subsiste pour les codes temporels respectifs et/ou si un conflit de profondeur existe entre la zone de confort et le graphique en incrustation 3D pour les codes temporels respectifs. De cette manière, un ensemble d'intervalles de conflit est généré, lequel est stocké sur une source multimédia comprenant le flux vidéo 3D et le graphique en incrustation 3D. L'ensemble d'intervalles de conflit est utilisé durant une lecture afin d'adapter une présentation du flux vidéo 3D ou une présentation du graphique en incrustation 3D.</p></abstract><abstract mxw-id="PA100332292" ref-ucid="WO-2012116900-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention porte sur un procédé et un appareil de création d'informations vidéo 3D stéréoscopiques comprenant un flux vidéo 3D et un graphique en incrustation 3D. Une plage de profondeur dans l'espace z pour la présentation stéréoscopique du flux vidéo 3D est déterminée pour une pluralité de codes temporels. Un plan de référence dans l'espace z pour placer le graphique en incrustation 3D est ensuite déterminé de telle sorte que des conflits de profondeur entre la vidéo 3D et le plan de référence sont réduits. Une zone de confort entourant un plan d'écran d'affichage et comprenant le plan de référence est définie, la zone de confort spécifiant une plage de profondeur dans l'espace z pour une présentation préférable des informations vidéo 3D stéréoscopique. Il est ensuite déterminé si un conflit de profondeur entre le plan de référence et le flux vidéo 3D subsiste pour les codes temporels respectifs et/ou si un conflit de profondeur existe entre la zone de confort et le graphique en incrustation 3D pour les codes temporels respectifs. De cette manière, un ensemble d'intervalles de conflit est généré, lequel est stocké sur une source multimédia comprenant le flux vidéo 3D et le graphique en incrustation 3D. L'ensemble d'intervalles de conflit est utilisé durant une lecture afin d'adapter une présentation du flux vidéo 3D ou une présentation du graphique en incrustation 3D.</p></abstract><description mxw-id="PDES51233331" ref-ucid="WO-2012116900-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001">Method and apparatus for authoring stereoscopic 3D video information, and method and apparatus for displaying such stereoscopic 3D video information FIELD OF THE INVENTION </p><p id="p0002" num="0002">The invention relates to a method and an apparatus for </p><p id="p0003" num="0003">authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics. Further, the invention relates to a method and an apparatus for displaying such stereoscopic 3D video information. </p><p id="p0004" num="0004">BACKGROUND With the recent box office success of stereoscopic 3D movies, it is desired to bring 3D video to home entertainment, too. One of the first solutions available is the Blu-ray 3D format. </p><p id="p0005" num="0005">Preferably, the 3D movie is displayed inside a so-called comfort zone. Determination of the comfort zone is still an area of active research. Typically, the comfort zone describes an interval in z-space extending from somewhere behind the screen to a minimal distance to a viewer in front of the screen. One option for determination of this comfort zone is the so-called 1/3 diopter rule. Further, the range of the comfort zone according to the 1/3 diopter rule depends on the distance between the viewer or user and the screen. </p><p id="p0006" num="0006">Reproduction of 3D elements outside the comfort zone should be limited to special scenes and should be done with care to avoid user discomfort. </p><p id="p0007" num="0007">The Blu-ray 3D format not only supports stereoscopic 3D video, it also supports stereoscopic 3D auxiliary information such as stereoscopic 3D interactive applications like a user menu, which are preferably written in the Java programming language. 
<!-- EPO <DP n="3"/>-->
An interactive menu may allow the user to select a certain scene, a different audio track, etc. Further, 3D subtitles or an information text may be added to the stereoscopic </p><p id="p0008" num="0008">reproduction. Such information, which is typically presented in front of a main video stream, shall be referred to as overlay graphics . </p><p id="p0009" num="0009">One technical challenge so as to provide a pleasant 3D user experience is to coordinate visual non-video elements, i.e. overlay graphics such as the aforementioned interactive menus, with the main video stream in z-space. In general, so called depth conflicts should be avoided and overlay graphics should be placed in front of the 3D main video stream. Preferably, interactive graphics should be placed in front of the subtitles if possible. A depth conflict between e.g. a main video stream and a user menu occurs if at least parts of both elements take the same place in z-space. In such a conflicting area the user's viewing experience may be unpleasant. Document WO 2009/083863 Al discloses a method for display of 3D overlay graphics that are presented in front of a 3D main video stream. In order to prevent occlusions due to depth conflicts the available depth range in z-space is split up into separate sub ranges. A respective sub range in z-space is reserved for overlay data, the main video stream, subtitles, etc. </p><p id="p0010" num="0010">SUMMARY </p><p id="p0011" num="0011">It is an object of the invention to provide a method for displaying stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics, a reproduction device and a system for displaying the stereoscopic 3D video information comprising the reproduction device and a media source allowing 
<!-- EPO <DP n="4"/>-->
a more comfortable and flexible reproduction of the 3D video information . </p><p id="p0012" num="0012">According to a first aspect of the invention, a method for displaying stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics comprises the steps of: a) retrieving a set of conflict intervals associated to the 3D video stream from a media source comprising the 3D video stream and the 3D overlay graphics, wherein the set of conflict intervals is provided together with the stereoscopic 3D video information, and wherein a conflict interval indicates that for certain time codes of the 3D video stream a depth conflict between the 3D video stream and a reference plane of the 3D overlay graphics or a depth conflict between the 3D overlay graphics and a comfort zone defined in the authoring process exists, and </p><p id="p0013" num="0013">b) adapting a presentation of the 3D video stream or a </p><p id="p0014" num="0014">presentation of the 3D overlay graphics for time codes of the 3D video stream that are located in one of the conflict </p><p id="p0015" num="0015">intervals so as to resolve the corresponding depth conflict. </p><p id="p0016" num="0016">In order to implement the method according to the invention, a reproduction device for displaying stereoscopic 3D video information comprising a 3D video stream and 3D overlay </p><p id="p0017" num="0017">graphics is configured to: </p><p id="p0018" num="0018">a) retrieve a set of conflict intervals associated to the 3D video stream from a media source comprising the 3D video stream and the 3D overlay graphics, wherein the set of conflict intervals is provided together with the stereoscopic 3D video information, and wherein a conflict interval indicates that for certain time codes of the 3D video stream a depth conflict between the 3D video stream and a reference plane of the 3D overlay graphics or a depth conflict between the 3D overlay 
<!-- EPO <DP n="5"/>-->
graphics and a comfort zone defined in the authoring process exists, and </p><p id="p0019" num="0019">b) adapt a presentation of the 3D video stream or a presentation of the 3D overlay graphics for time codes of the 3D video stream that are located in one of the conflict intervals so as to resolve the corresponding depth conflict. </p><p id="p0020" num="0020">According to the invention, a set of conflict intervals is handed over to a reproduction device. A depth conflict exists between the 3D overlay graphics and the reference plane if the depth in z-space for any feature of the 3D video stream </p><p id="p0021" num="0021">conflicts with the reference plane in z-space. Similarly, a depth conflict exists between the 3D overlay graphics and the comfort zone if the depth in z-space for any feature of the 3D overlay graphics is outside the comfort zone. The reproduction of the 3D video stream or the 3D overlay graphics is adapted for time codes of the 3D video stream that are located in one of the conflict intervals so as to resolve the depth conflict between presentation of the 3D video stream and the reference plane. The solution according to the invention thus avoids fixed depth spaces for presentation of either the 3D video stream or the 3D overlay graphics. Instead of this static solution, reproduction of either the main video stream or the overlay graphics is adapted in order to prevent user </p><p id="p0022" num="0022">discomfort. Advantageously, depth conflicts are avoided on a per-frame basis or in predetermined time intervals by simply checking the set of conflict intervals. </p><p id="p0023" num="0023">Preferably, the set of conflict intervals is retrieved from a media source comprising the 3D video stream and the 3D overlay graphics. For this purpose the media source comprises a set of conflict intervals in addition to a 3D video stream and 3D overlay graphics. The set of conflict intervals indicates those intervals for which a depth conflict exists between the 3D 
<!-- EPO <DP n="6"/>-->
video stream and a reference plane of the 3D overlay graphics or between the 3D overlay graphics and a comfort zone. </p><p id="p0024" num="0024">Advantageously, the set of conflict intervals is determined and stored on the media source during authoring of the 3D video stream and the 3D overlay graphics. </p><p id="p0025" num="0025">Advantageously, the step of adapting the presentation of the 3D overlay graphics comprises determining a shifted reference plane that is different from an initial reference plane for a conflict interval, wherein a position in z-space for the shifted reference plane is selected such that the depth </p><p id="p0026" num="0026">conflict is resolved. In this way occlusions and artifacts are be avoided since the overlay graphics is placed in front of the 3D video stream. Preferably, the reference plane is shifted back to its initial position if the video depth information indicates that the depth of the three-dimensional presentation of the main video stream does no longer exceed the reference plane. Further preferably, the respective conflict interval is eliminated from the set of conflict intervals. </p><p id="p0027" num="0027">Favorably, the step of adapting the presentation of the 3D overlay graphics comprises varying a z-space expansion of the 3D overlay graphics such that the depth conflict between the 3D overlay graphics and the comfort zone is resolved. By </p><p id="p0028" num="0028">dynamically adjusting the depth of the 3D overlay data the best user experience is safeguarded. On the one hand the user enjoys a 3D presentation of overlay data and on the other hand the comfort zone is not exceeded and a comfortable viewing </p><p id="p0029" num="0029">experience is guaranteed. </p><p id="p0030" num="0030">Alternatively, the step of adapting the presentation of the 3D overlay graphics comprises switching a presentation mode for the 3D overlay graphics or for the 3D video stream from a stereoscopic 3D mode to a flat 2D mode. By switching the 
<!-- EPO <DP n="7"/>-->
presentation mode from the preferred 3D mode to a 2D or flat presentation mode, depth conflicts between the 3D overlay graphics and the 3D video stream may be avoided. In case the presentation mode for the 3D video stream is switched to a 2D or flat presentation mode, the 3D effect of the main video stream is sacrificed for a period of time. However, this may be acceptable since the primary user focus will likely be on the 3D overlay graphics rather than on the video stream. </p><p id="p0031" num="0031">Preferably, the presentation mode is switched back to 3D presentation at a later runtime of the video stream. This is performed if the respective conflict interval indicates that the 3D presentation of the video stream does no longer exceed the reference plane or violates the comfort zone. </p><p id="p0032" num="0032">Advantageously, the 3D video effect is sacrificed only as long as necessary, i.e. for a minimum time. The user enjoys 3D presentation of the main video stream as well as 3D </p><p id="p0033" num="0033">presentation of the overlay graphics as long as possible. </p><p id="p0034" num="0034">According to another aspect of the invention, the step of adapting the presentation of the 3D overlay graphics comprises adapting a transparency value for at least a part of the 3D overlay graphics. Preferably, the transparency value is adapted for a part of the 3D overlay graphics which causes the depth conflict. Advantageously, at least the conflicting parts of the overlay graphics are more transparent or even invisible so as to not disturb the presentation of the video stream. </p><p id="p0035" num="0035">Favorably, the step of adapting the presentation of the 3D overlay graphics comprises delaying a user request for </p><p id="p0036" num="0036">presentation of 3D overlay data until the end of the conflict interval. Often, user menus are organized in so-called pop-up menus that are activated due to a user command. In the </p><p id="p0037" num="0037">particular case, the user tries to open such a menu and </p><p id="p0038" num="0038">preferably a graphical indicator such as a sand glass or the 
<!-- EPO <DP n="8"/>-->
like indicates that the respective menu will open after a short period of time. Consequently, the full depth of the main video stream as well as a reasonable depth for the 3D menu are possible, because at the later runtime of the video stream there will not occur any depth conflict. </p><p id="p0039" num="0039">According to another aspect of the invention, a method for authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics comprises the steps of: a) determining a depth range in z-space for the stereoscopic presentation of the 3D video stream for a plurality of time codes , </p><p id="p0040" num="0040">b) determining a reference plane in z-space for placing the 3D overlay graphics such that depth conflicts between the 3D video and the reference plane are reduced, </p><p id="p0041" num="0041">c) defining a comfort zone surrounding a display screen plane and comprising the reference plane, wherein the comfort zone specifies a depth range in z-space for preferable presentation of the stereoscopic 3D video information, </p><p id="p0042" num="0042">d) determining whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the respective time codes, </p><p id="p0043" num="0043">e) determining a set of conflict intervals defined by the respective time codes for which a depth conflict remains between the reference plane and the 3D video stream and/or for which a depth conflict exists between the comfort zone and the 3D overlay graphics, and </p><p id="p0044" num="0044">f) storing the set of conflict intervals on a media source comprising the 3D video stream and the 3D overlay graphics. 
<!-- EPO <DP n="9"/>-->
Similarly, an apparatus for authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics is configured to: </p><p id="p0045" num="0045">a) determine a depth range in z-space for the stereoscopic presentation of the 3D video stream for a plurality of time codes , </p><p id="p0046" num="0046">b) determine a reference plane in z-space for placing the 3D overlay graphics such that depth conflicts between the 3D video and the reference plane are reduced, </p><p id="p0047" num="0047">c) define a comfort zone surrounding a display screen plane and comprising the reference plane, wherein the comfort zone specifies a depth range in z-space for preferable presentation of the stereoscopic 3D video information, </p><p id="p0048" num="0048">d) determine whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the respective time codes, </p><p id="p0049" num="0049">e) determine a set of conflict intervals defined by the </p><p id="p0050" num="0050">respective time codes for which a depth conflict remains between the reference plane and the 3D video stream and/or for which a depth conflict exists between the comfort zone and the 3D overlay graphics, and </p><p id="p0051" num="0051">f) store the set of conflict intervals on a media source comprising the 3D video stream and the 3D overlay graphics. </p><p id="p0052" num="0052">In a first step a depth range in z-space for stereoscopic presentation of the 3D video stream is determined for a plurality of time codes. Determination of the depth range may be performed by disparity estimation from a stereo pair of images or can be derived from the 3-dimensional virtual environment in case of computer generated content. Then a reference plane is set to a certain point in z-space. The 3D overlay graphics are presented in a depth interval in z-space 
<!-- EPO <DP n="10"/>-->
ranging from the reference plane to an upper threshold facing a viewer. The reference plane is set in such way that depth conflicts between the 3D video and the reference plane are avoided to a certain extent. In addition, a comfort zone surrounding a display screen plane and comprising the reference plane is defined. The comfort zone defines a depth range in z- space for preferable presentation of the stereoscopic 3D video information. Subsequently the remaining depth conflicts between the reference plane and the 3D video stream are determined, wherein a depth conflict exists between the 3D overlay graphics and the reference plane if the depth in z-space for any feature of the 3D video stream conflicts with the reference plane in z- space . Alternatively or in addition depth conflicts between the comfort zone and the 3D overlay graphics are determined, wherein a depth conflict exists between the comfort zone and the 3D overlay graphics if any feature of the 3D overlay graphics conflicts in z-space with an upper threshold of the comfort zone facing a viewer. The determined conflict intervals are added to a set of conflict intervals. </p><p id="p0053" num="0053">BRIEF DESCRIPTION OF DRAWINGS </p><p id="p0054" num="0054">Further aspects of the invention will ensue from the following description of an example embodiment of the invention with reference to the accompanying drawings, wherein </p><p id="p0055" num="0055">Fig. 1 is a graph indicating how a depth of a stereoscopic </p><p id="p0056" num="0056"> 3D video stream varies over time and a depth </p><p id="p0057" num="0057"> conflict between reproduction of the main 3D video stream and 3D overlay graphics arises, </p><p id="p0058" num="0058">Fig. 2 illustrates adaption of a position in z-space of a reference plane and a reduction of a depth range for presentation of overlay graphics, 
<!-- EPO <DP n="11"/>-->
Fig. 3 shows a further embodiment, according to which the presentation of the main video stream is switched from a 3D mode to a 2D mode, </p><p id="p0059" num="0059">Fig. 4 illustrates another embodiment of the invention, wherein the reproduction of 3D overlay graphics is delayed due to a depth conflict, Fig. 5 illustrates the reproduction of the main 3D video stream and overlay graphics in a time dependent graph, wherein a depth conflict is resolved by varying a transparency value of the overlay </p><p id="p0060" num="0060"> graphics, and </p><p id="p0061" num="0061">Fig. 6 illustrates the reproduction of the main 3D video stream and overlay graphics in a time dependent graph in case of an exceptional depth conflict. DE TAILED DE SCRI PTION OF AN EXEMPLARY EMBOD IMENT </p><p id="p0062" num="0062">Fig. 1 is a plot illustrating a depth Z of a stereoscopic 3D main video stream VS over time t. Further, the depth of the presentation range of overlay graphics OD is illustrated by the hashed area. While the minimum depth value Zv,min(t) and the maximum depth value Zv,max(t) of the video stream VS vary over time, the depth range for presentation of the overlay graphics OD is constant over time. The depth range for presentation of the overlay graphics OD starts at the depth Zref, which </p><p id="p0063" num="0063">indicates a depth value in z-space of a reference plane, and ends at the minimum value of a comfort zone Zcomfort , min . In general, reproduction of video information is preferably located around the depth of the screen Zscreen. Preferably, the 3D video information is located inside a comfort zone that is 
<!-- EPO <DP n="12"/>-->
defined by its minimum depth Zcomfort , min and its maximum depth Zcomfort , max in z-space. </p><p id="p0064" num="0064">The comfort zone takes the aspect of a pleasant 3D viewing experience into account. Boundaries of the comfort zone in z- space may be empirical values. Another option is a definition of the comfort zone by help of the 1/3 diopter rule and a reference viewing environment. This aims to limit the </p><p id="p0065" num="0065">convergence-accommodation conflict. The comfort zone describes an interval in z-space around a position of the screen Zscreen, i.e. the user's 3D TV. It extends from somewhere behind the screen to somewhere in front of the screen. The comfort zone further depends on the distance between the user and the screen. Placement of 3D elements outside the comfort zone should be limited and be done with care to avoid user </p><p id="p0066" num="0066">discomfort . </p><p id="p0067" num="0067">While for a period of time before ti, the video stream VS and the overlay graphics OD may be presented both within the available comfort zone, at ti a depth conflict arises. Such a depth conflict may lead to user discomfort. At a later time t2, the depth of the main video stream VS steps back behind the depth of the reference plane Zref and the depth conflict is resolved. However, within the time span ti<sup>~</sup>t2 the user may have an unpleasant viewing experience. Further, as illustrated in Fig. 1, for most of the time the overlay graphics OD is </p><p id="p0068" num="0068">positioned closer to the viewer than necessary. In other words, there is z-space left between the minimum distance Zv,min(t) of the video stream VS and the depth of the reference plane Zref. In stereo 3D presentation, there is a desire to position non- video graphical elements as close as possible to the screen plane to minimize so-called ghosting artifacts. From a </p><p id="p0069" num="0069">technical point of view these are crosstalk effects between the left and right channel. 
<!-- EPO <DP n="13"/>-->
Fig. 2 illustrates a time-dependent positioning of the </p><p id="p0070" num="0070">reference plane Zref (t) . Again, the figure shows the depth range of the main video stream VS and the overlay graphics OD as a time depended value. The reference plane Zref is </p><p id="p0071" num="0071">positioned nearer to the depth of the screen Zscreen, </p><p id="p0072" num="0072">preferably it is identical. This has the advantage that it reduces the ghosting effect and is further preferable with respect to the vergence accommodation conflict. Finally, this allows extending the z-volume for presentation of the 3D overlay graphics. However, at ti, a depth conflict between the overlay graphics OD and the stereoscopic 3D main video stream VS occurs . The z-space position Zref (t) of the reference plane is variable over time and is adapted to the depth of the reproduction of the video stream VS as it is indicated between ti and t by the dashed line following the minimum distance Zv,min(t) of the main video stream VS. The adaption of the reference plane Zref is preferably performed on a per-frame basis, e.g. during authoring. However, it may likewise be performed on the fly during reproduction. In this case the frequency and accuracy of the corresponding adaption of the depth range for the overlay graphics OD may vary for different systems. In real-time- capable systems, updates may be possible on a per-frame basis, leading to the best user experience. However, in case </p><p id="p0073" num="0073">interactive applications must be implemented on a non-real-time Java platform, the depth adjustments may not be perfectly synchronized to the video frames. Also computational power of the consumer equipment embedded processes may be limited. In such cases, depth updates may not be possible for each frame of the main video stream and may not be accurate with respect to timing. However, even with a lower than a per-frame update frequency and possibly timing-imperfect adjustments, the user 
<!-- EPO <DP n="14"/>-->
experience will still be significantly better than without any adjustments. Further, the programmer/author can foresee a safety margin between the position of the reference plane </p><p id="p0074" num="0074">Zref (t) and the minimum depth of the main video stream </p><p id="p0075" num="0075">Zv,min(t) to take into account that the update of the reference plane Zref (t) is not done on a per-frame basis. </p><p id="p0076" num="0076">In Fig. 2, between ti and t2 the reference plane Zref (t) is shifted to avoid depth conflicts between the main video stream VS and the overlay data OD. However, at t2 the minimum depth of the overlay data ZOD,min(t) is in conflict with the minimum depth of the comfort zone Zcomfort , min . In order to not exceed the comfort zone, the depth range for the presentation of the overlay graphics is reduced to the available depth between the reference plane Zref (t) and the minimum depth of the comfort zone Zcomfort , min . Accordingly, between t<sub>2</sub> and t3, the depth range for presentation of the overlay graphics OD is flattened to a lower depth, while at t<sub>3</sub> the depth conflict between the presentation of the overlay graphics OD and the minimum comfort zone Zcomfort , min is resolved and the overlay graphics can return to its original depth. At t the depth of the main video stream VS steps back behind the reference plane Zref (t) and the presentation of the overlay graphics OD returns to its original depth . </p><p id="p0077" num="0077">For dynamic depth adjustments, the necessary data can be retrieved in various ways by the respective application or by a respective reproduction device for playback of stereoscopic 3D video information. The media time, i.e. the runtime or time codes of the main video, is usually retrievable through an application programming interface (API) . The position of the reference plane in z-space may also be retrievable via an API at application runtime or may be provided to the application through a data file. A list of conflict intervals may be handed 
<!-- EPO <DP n="15"/>-->
over to a reproduction unit. For a certain runtime of the main video stream, if e.g. the user requests presentation of a 3D menu, the reproduction device checks the list of conflict intervals. If a depth conflict has to be avoided, suitable countermeasures are performed. </p><p id="p0078" num="0078">Fig. 3 illustrates another embodiment of the invention. The starting scenario is comparable to that of Fig. 1, i.e. the reference plane Zref and the depth range for the presentation of the overlay data OD are constant. Before ti, no depth </p><p id="p0079" num="0079">conflict between presentation of the video stream VS and the overlay data OD occurs. However, during a certain period of time between ti and t2 there will be a depth conflict. To avoid this, the video stream VS is shown as a flat (2D) video only. If the depth information of the main video stream VS, i.e. the list of conflict intervals, indicates that present depth conflict interval is over, which is the case at t2, the </p><p id="p0080" num="0080">presentation mode is switched back to 3D mode. Of course, it is likewise possible to switch the presentation mode for the overlay graphics OD to the flat 2D mode. For this purpose the reproduction device preferably offers an API to the respective application to switch its presentation mode. Apparently, between ti and t2 the position of the reference plane Zref may be chosen freely between the depth of the screen Zscreen and the minimum depth of the comfort zone Zcomfort , min, e.g. by choice of the content author. Preferably, it is constant over time and set close to the depth of the screen Zscreen. </p><p id="p0081" num="0081">Preferably, ti and t2 are defined to be the time for which </p><p id="p0082" num="0082">Zv,min(t) equals Zref (t) . However, ti can also be chosen smaller and t2 can be chosen greater. </p><p id="p0083" num="0083">The embodiment according to Fig. 3 has the advantage that it is easy to realize, because the position of the reference plane 
<!-- EPO <DP n="16"/>-->
Zref in z-space does not need to be updated. No adjustments of the interactive application's 3D depth are necessary. </p><p id="p0084" num="0084">Fig. 4 is an illustration of a further embodiment of the invention, where the overlay graphics OD is a so-called pop-up menu. Triggered by a user's action at the time t<sub>PO</sub>p UP <sup>_</sup> the video stream VS is still playing in 3D mode - a pop-up menu is expected to open. However, as apparent from Fig. 4, this would cause a depth conflict between the main video stream VS and the overlay graphics OD. According to the embodiment, the user command is delayed for a time tdeiay during which the user may be shown a graphical indicator, a sand glass or the like, to indicate the pending user command. This delay time expires at a time ti, when the depth conflict is resolved. In other words, the delay time tdeiay is chosen large enough so as to prevent a depth conflict. At the end of the conflict interval the pop-up menu is presented in 3D. </p><p id="p0085" num="0085">According to another aspect of the invention, two further embodiments are described by making reference to Figs. 5 and 6. Fig. 5 shows a scenario similar to Figs. 1 and 2. Between ti and t2 a depth conflict between the main video stream VS and the overlay graphics OD is present. To resolve this depth conflict, at least a part of the overlay graphics is made transparent. Preferably, solely the respective parts or pixels of the overlay graphics causing the depth conflict with the main video stream are transparent. In Fig. 5, this is illustrated by the intersection between the area for VS (between ti and t2) and the hashed area indicating the presentation of the overlay graphics OD. Preferably, the overlay graphics or a part of it is set fully transparent in order to not disturb the visibility of the main video stream VS. In other words, the overlay data vanishes in part or completely. Presentation of the main video stream VS has priority. Alternatively, instead of rendering the overlay 
<!-- EPO <DP n="17"/>-->
graphics information OD in a fully transparent manner, it may be decided to completely remove the respective parts of the 3D graphical output. According to Fig. 6, between ti and t there is a conflict between the presentation of the main video stream VS and the presentation of the overlay graphics OD. Between t<sub>2</sub> and t<sub>3</sub> an exceptional conflict occurs. The main video stream VS, e.g. due to a desired special effect, infringes the minimum depth of the comfort zone Zcomfort , min . Accordingly, there is no space left at all for presentation of the overlay graphics OD. </p><p id="p0086" num="0086">Accordingly, the depth of the presentation of the overlay graphics OD may be reduced to a flat 2D presentation, </p><p id="p0087" num="0087">preferably located at the minimum depth of the comfort </p><p id="p0088" num="0088">Zcomfort , min . Alternatively, the overlay graphics OD may be transparent in the respective time interval. </p><p id="p0089" num="0089">Although the invention has been described hereinabove with reference to a specific embodiment, it is not limited to this embodiment and no doubt further alternatives will occur to the skilled person that lie within the scope of the invention as claimed . 
</p></description><claims mxw-id="PCLM125309647" ref-ucid="WO-2012116900-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="18"/>-->Claims </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method for displaying stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics, the method comprising the steps of: </claim-text><claim-text>a) retrieving a set of conflict intervals associated to the 3D video stream from a media source comprising the 3D video stream and the 3D overlay graphics, wherein the set of conflict intervals is provided together with the </claim-text><claim-text> stereoscopic 3D video information, and wherein a conflict interval indicates that for certain time codes of the 3D video stream a depth conflict between the 3D video stream and a reference plane of the 3D overlay graphics or a depth conflict between the 3D overlay graphics and a comfort zone defined in the authoring process exists, and </claim-text><claim-text>b) adapting a presentation of the 3D video stream or a </claim-text><claim-text> presentation of the 3D overlay graphics for time codes of the 3D video stream that are located in one of the conflict intervals so as to resolve the corresponding depth conflict. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method according to claim 1, wherein the step of </claim-text><claim-text> adapting the presentation of the 3D overlay graphics </claim-text><claim-text> comprises varying a z-space expansion of the 3D overlay graphics such that the depth conflict between the 3D overlay graphics and the comfort zone is resolved. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method according to claim 1, wherein the step of </claim-text><claim-text> adapting the presentation of the 3D overlay graphics </claim-text><claim-text> comprises switching a presentation mode for the 3D overlay graphics or for the 3D video stream from a stereoscopic 3D mode to a flat 2D mode. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method according to claim 1, wherein the step of </claim-text><claim-text> adapting the presentation of the 3D overlay graphics 
<!-- EPO <DP n="19"/>-->
 comprises adapting a transparency value for at least a part of the 3D overlay graphics. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method according to claim 4, wherein the transparency value is adapted for a part of the 3D overlay graphics causing the depth conflict. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method according to claim 1, wherein the step of </claim-text><claim-text> adapting the presentation of the 3D overlay graphics </claim-text><claim-text> comprises delaying a user request for presentation of 3D overlay data until the end of the conflict interval. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. A reproduction device for displaying stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics, wherein the reproduction device is configured to: a) retrieve a set of conflict intervals associated to the 3D video stream from a media source comprising the 3D video stream and the 3D overlay graphics, wherein the set of conflict intervals is provided together with the </claim-text><claim-text> stereoscopic 3D video information, and wherein a conflict interval indicates that for certain time codes of the 3D video stream a depth conflict between the 3D video stream and a reference plane of the 3D overlay graphics or a depth conflict between the 3D overlay graphics and a comfort zone defined in the authoring process exists, and </claim-text><claim-text>b) adapt a presentation of the 3D video stream or a </claim-text><claim-text> presentation of the 3D overlay graphics for time codes of the 3D video stream that are located in one of the conflict intervals so as to resolve the corresponding depth conflict. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. A method for authoring stereoscopic 3D video information </claim-text><claim-text> comprising a 3D video stream and 3D overlay graphics, the method comprising the steps of: 
<!-- EPO <DP n="20"/>-->
a) determining a depth range in z-space for the stereoscopic presentation of the 3D video stream for a plurality of time codes , </claim-text><claim-text>b) determining a reference plane in z-space for placing the 3D overlay graphics such that depth conflicts between the 3D video and the reference plane are reduced, </claim-text><claim-text>c) defining a comfort zone surrounding a display screen plane and comprising the reference plane, wherein the comfort zone specifies a depth range in z-space for preferable </claim-text><claim-text> presentation of the stereoscopic 3D video information, d) determining whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the </claim-text><claim-text> respective time codes, </claim-text><claim-text>e) determining a set of conflict intervals defined by the </claim-text><claim-text> respective time codes for which a depth conflict remains between the reference plane and the 3D video stream and/or for which a depth conflict exists between the comfort zone and the 3D overlay graphics, and </claim-text><claim-text>f) storing the set of conflict intervals on a media source </claim-text><claim-text> comprising the 3D video stream and the 3D overlay graphics. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method according to claim 8, wherein a depth conflict exists between the 3D overlay graphics and the reference plane if the depth in z-space for any feature of the 3D video stream conflicts with the reference plane in z-space. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method according to claims 8 or 9, wherein a depth </claim-text><claim-text> conflict exists between the comfort zone and the 3D overlay graphics if any feature of the 3D overlay graphics conflicts in z-space with an upper threshold of the comfort zone facing a viewer. 
<!-- EPO <DP n="21"/>-->
</claim-text></claim><claim id="clm-0011" num="11"><claim-text>1. An apparatus for authoring stereoscopic 3D video information comprising a 3D video stream and 3D overlay graphics, </claim-text><claim-text> wherein the apparatus is configured to: </claim-text><claim-text>) determine a depth range in z-space for the stereoscopic </claim-text><claim-text> presentation of the 3D video stream for a plurality of time codes , </claim-text><claim-text> ) determine a reference plane in z-space for placing the 3D overlay graphics such that depth conflicts between the 3D video and the reference plane are reduced, </claim-text><claim-text> ) define a comfort zone surrounding a display screen plane and comprising the reference plane, wherein the comfort zone specifies a depth range in z-space for preferable </claim-text><claim-text> presentation of the stereoscopic 3D video information,</claim-text><claim-text>) determine whether a depth conflict between the reference plane and the 3D video stream remains for the respective time codes and/or whether a depth conflict exists between the comfort zone and the 3D overlay graphics for the respective time codes, </claim-text><claim-text> ) determine a set of conflict intervals defined by the </claim-text><claim-text> respective time codes for which a depth conflict remains between the reference plane and the 3D video stream and/or for which a depth conflict exists between the comfort zone and the 3D overlay graphics, and </claim-text><claim-text> ) store the set of conflict intervals on a media source </claim-text><claim-text> comprising the 3D video stream and the 3D overlay graphics. </claim-text><claim-text>A media source comprising a 3D video stream and 3D overlay graphics, characterized in that the media source further comprises a set of conflict intervals associated to the 3D video stream, wherein the set of conflict intervals is determined in an authoring process, and wherein a conflict interval indicates that for certain time codes of the 3D video stream a depth conflict between the 3D video stream and a reference plane of the 3D overlay graphics or a depth 
<!-- EPO <DP n="22"/>-->
conflict between the 3D overlay graphics and a comfort zone defined in the authoring process exists. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
