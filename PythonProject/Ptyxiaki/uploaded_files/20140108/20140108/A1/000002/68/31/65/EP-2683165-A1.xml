<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683165-A1" country="EP" doc-number="2683165" kind="A1" date="20140108" family-id="47172788" file-reference-id="318320" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585084" ucid="EP-2683165-A1"><document-id><country>EP</country><doc-number>2683165</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174457-A" is-representative="YES"><document-id mxw-id="PAPP154847276" load-source="docdb" format="epo"><country>EP</country><doc-number>13174457</doc-number><kind>A</kind><date>20130701</date><lang>EN</lang></document-id><document-id mxw-id="PAPP168045698" load-source="docdb" format="original"><country>EP</country><doc-number>13174457.5</doc-number><date>20130701</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140552842" ucid="FR-1256391-A" load-source="docdb"><document-id format="epo"><country>FR</country><doc-number>1256391</doc-number><kind>A</kind><date>20120704</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2073184077" load-source="docdb">H04N  19/46        20140101ALI20150413BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2073184309" load-source="docdb">H04N  19/176       20140101ALI20150413BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2073184784" load-source="docdb">H04N  19/513       20140101AFI20150413BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2073186873" load-source="docdb">H04N  19/11        20140101ALI20150413BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2073188273" load-source="docdb">H04N  19/147       20140101ALI20150413BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2073190012" load-source="docdb">H04N  19/105       20140101ALI20150413BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1906606983" load-source="docdb" scheme="CPC">H04N  19/513       20130101 FI20160824BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027178282" load-source="docdb" scheme="CPC">H04N  19/176       20130101 LI20150827BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027185339" load-source="docdb" scheme="CPC">H04N  19/11        20141101 LI20150827BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027187266" load-source="docdb" scheme="CPC">H04N  19/51        20130101 LA20150827BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027187874" load-source="docdb" scheme="CPC">H04N  19/105       20141101 LI20150827BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027188041" load-source="docdb" scheme="CPC">H04N  19/46        20130101 LI20150827BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2027188357" load-source="docdb" scheme="CPC">H04N  19/147       20130101 LI20150827BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359885" lang="DE" load-source="patent-office">Verfahren zur Codierung und Decodierung eines Pixelblocks von einem Bewegungsmodell</invention-title><invention-title mxw-id="PT132359886" lang="EN" load-source="patent-office">Method for coding and decoding a block of pixels from a motion model</invention-title><invention-title mxw-id="PT132359887" lang="FR" load-source="patent-office">Procédé de codage et de décodage d'un bloc de pixels à partir d'un modèle de mouvement</invention-title><citations><patent-citations><patcit mxw-id="PCIT242943001" load-source="docdb" ucid="EP-0765087-A2"><document-id format="epo"><country>EP</country><doc-number>0765087</doc-number><kind>A2</kind><date>19970326</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242943002" load-source="docdb" ucid="WO-2001011891-A1"><document-id format="epo"><country>WO</country><doc-number>2001011891</doc-number><kind>A1</kind><date>20010215</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242943003" load-source="docdb" ucid="WO-2001054418-A1"><document-id format="epo"><country>WO</country><doc-number>2001054418</doc-number><kind>A1</kind><date>20010726</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>E. TUNCEL; L. ONURAL: "Utilization of the recursive shortest spanning tree algorithm for video-object segmentation by 2-D affine motion modelling", TCSVT, vol. 10, 5 August 2000 (2000-08-05), pages 776 - 781</text><sources><source mxw-id="PNPL53546254" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>ERTEM TUNCEL ET AL: "Utilization of the Recursive Shortest Spanning Tree Algorithm for Video-Object Segmentation by 2-D Affine Motion Modeling", IEEE TRANSACTIONS ON CIRCUITS AND SYSTEMS FOR VIDEO TECHNOLOGY, IEEE SERVICE CENTER, PISCATAWAY, NJ, US, vol. 10, no. 5, 1 August 2000 (2000-08-01), XP011014088, ISSN: 1051-8215</text><sources><source mxw-id="PNPL53546255" load-source="docdb" name="SEA" category="AD"/></sources></nplcit><nplcit><text>GUILLAUME LAROCHE ET AL: "RD Optimized Coding for Motion Vector Predictor Selection", IEEE TRANSACTIONS ON CIRCUITS AND SYSTEMS FOR VIDEO TECHNOLOGY, IEEE SERVICE CENTER, PISCATAWAY, NJ, US, vol. 17, no. 12, 1 December 2008 (2008-12-01), pages 1681 - 1691, XP011234848, ISSN: 1051-8215</text><sources><source mxw-id="PNPL53546256" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>LAI-MAN PO; KA-MAN WONG; KA-HO NG; KWOK-WAI CHEUNG; YU LIU; KA-MAN CHENG; YAN HUO: "Block-Matching Translation and Zoom Motion Compensated Prediction", ISO/IEC JTC1/SC29/WG11 MPEG2009/M16891, 90TH MPEG MEETING, October 2009 (2009-10-01)</text><sources><source mxw-id="PNPL53546257" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>SHIJUN SUN; SHAWMIN LEI: "Global Motion Vector Coding (GMVC", VCEG-021, ITU-T VIDEO CODING EXPERTS GROUP (VCEG) MEETING, PATTAYA, THAILAND, 4 December 2001 (2001-12-04)</text><sources><source mxw-id="PNPL53546258" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>WIEGAND T ET AL: "BLOCK-BASED HYBRID VIDEO CODING USING MOTION-COMPENSATED LONG-TERM MEMORY PREDICTION", ITG FACHBERICHTE, VDE VERLAG, BERLIN, DE, no. 143, 1 January 1997 (1997-01-01), pages 153 - 158, XP000924838, ISSN: 0932-6022</text><sources><source mxw-id="PNPL53546259" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>YAOWEN ZHAN; WEIQIANG WANG; WEN GAO: "A Robust Split-and-Merge Text Segmentation Approach for Images", ICPR'06, vol. 2, August 2006 (2006-08-01)</text><sources><source mxw-id="PNPL53546260" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919505953" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>THOMSON LICENSING</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR919514455" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>THOMSON LICENSING</last-name></addressbook></applicant><applicant mxw-id="PPAR919018831" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Thomson Licensing</last-name><iid>101157220</iid><address><street>1-5, rue Jeanne d'Arc</street><city>92130 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919530273" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FRANCOIS EDOUARD</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919521134" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FRANCOIS, EDOUARD</last-name></addressbook></inventor><inventor mxw-id="PPAR919018759" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>FRANCOIS, EDOUARD</last-name><address><street>18 Allee du Locar</street><city>35890 Bourg des-Comptes</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919507252" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>THOREAU DOMINIQUE</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919510822" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>THOREAU, DOMINIQUE</last-name></addressbook></inventor><inventor mxw-id="PPAR919012532" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>THOREAU, DOMINIQUE</last-name><address><street>c/o Technicolor R&amp;D France 975, avenue des Champs Blancs CS17616</street><city>35576 Cesson-Sévigné</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919519197" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>VIERON JEROME</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919514806" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>VIERON, JEROME</last-name></addressbook></inventor><inventor mxw-id="PPAR919012480" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Vieron, Jérôme</last-name><address><street>9 rue Bausset-Batiment B</street><city>75015 Paris</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919545999" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>BORDES PHILIPPE</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919519609" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>BORDES, PHILIPPE</last-name></addressbook></inventor><inventor mxw-id="PPAR919008080" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>BORDES, PHILIPPE</last-name><address><street>c/o Technicolor R&amp;D France 975, avenue des Champs Blancs CS17616</street><city>35576 Cesson-Sévigné</city><country>FR</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919011207" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Lorette, Anne</last-name><suffix>et al</suffix><iid>101183899</iid><address><street>Technicolor 1-5 rue Jeanne d'Arc</street><city>92130 Issy-Les-Moulineaux</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549815965" load-source="docdb">AL</country><country mxw-id="DS549744074" load-source="docdb">AT</country><country mxw-id="DS549815975" load-source="docdb">BE</country><country mxw-id="DS549813982" load-source="docdb">BG</country><country mxw-id="DS549744511" load-source="docdb">CH</country><country mxw-id="DS549818316" load-source="docdb">CY</country><country mxw-id="DS549744075" load-source="docdb">CZ</country><country mxw-id="DS549815976" load-source="docdb">DE</country><country mxw-id="DS549818317" load-source="docdb">DK</country><country mxw-id="DS549818322" load-source="docdb">EE</country><country mxw-id="DS549742263" load-source="docdb">ES</country><country mxw-id="DS549813983" load-source="docdb">FI</country><country mxw-id="DS549813984" load-source="docdb">FR</country><country mxw-id="DS549815977" load-source="docdb">GB</country><country mxw-id="DS549818323" load-source="docdb">GR</country><country mxw-id="DS549815982" load-source="docdb">HR</country><country mxw-id="DS549744076" load-source="docdb">HU</country><country mxw-id="DS549744512" load-source="docdb">IE</country><country mxw-id="DS549818324" load-source="docdb">IS</country><country mxw-id="DS549813985" load-source="docdb">IT</country><country mxw-id="DS549818325" load-source="docdb">LI</country><country mxw-id="DS549815493" load-source="docdb">LT</country><country mxw-id="DS549744081" load-source="docdb">LU</country><country mxw-id="DS549815498" load-source="docdb">LV</country><country mxw-id="DS549815499" load-source="docdb">MC</country><country mxw-id="DS549908415" load-source="docdb">MK</country><country mxw-id="DS549908416" load-source="docdb">MT</country><country mxw-id="DS549742264" load-source="docdb">NL</country><country mxw-id="DS549744082" load-source="docdb">NO</country><country mxw-id="DS549908417" load-source="docdb">PL</country><country mxw-id="DS549818330" load-source="docdb">PT</country><country mxw-id="DS549742269" load-source="docdb">RO</country><country mxw-id="DS549818331" load-source="docdb">RS</country><country mxw-id="DS549908418" load-source="docdb">SE</country><country mxw-id="DS549815983" load-source="docdb">SI</country><country mxw-id="DS549744083" load-source="docdb">SK</country><country mxw-id="DS549908419" load-source="docdb">SM</country><country mxw-id="DS549744517" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673256" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The invention involves a method for coding using a parametric motion model of which the parameters are defined from the motion data of the causal neighbourhood. Specifically, the method for coding a current block (B) comprises the following steps:<br/>
- determine (E1) a prediction block of the current block from a motion model defined by a set of parameters, the model associating a motion vector pointing at a pixel of a prediction block with each pixel of the current block.<br/>
- calculate (E2) a residual block between the current block and the prediction block, and<br/>
- code (E3) the residual block.</p><p id="pa02" num="0002">According to the invention, the parameters of the motion model are determined from the motion data associated with the causal neighbourhood blocks (VC) of the current block. Therefore, they can be deducted from parts of images already coded and do not need to be incorporated in the image data stream.
<img id="iaf01" file="imgaf001.tif" wi="102" he="80" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737407" lang="EN" source="EPO" load-source="docdb"><p>The invention involves a method for coding using a parametric motion model of which the parameters are defined from the motion data of the causal neighbourhood. Specifically, the method for coding a current block (B) comprises the following steps: 
- determine (E1) a prediction block of the current block from a motion model defined by a set of parameters, the model associating a motion vector pointing at a pixel of a prediction block with each pixel of the current block. 
- calculate (E2) a residual block between the current block and the prediction block, and 
- code (E3) the residual block.  According to the invention, the parameters of the motion model are determined from the motion data associated with the causal neighbourhood blocks (VC) of the current block. Therefore, they can be deducted from parts of images already coded and do not need to be incorporated in the image data stream.</p></abstract><description mxw-id="PDES63959244" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Technical field</b></heading><p id="p0001" num="0001">This invention relates to coding and decoding video images. It relates specifically to a method for video coding and a method for video decoding of a block of image based on a prediction by motion compensation. The invention notably finds an application in the video compression field.</p><heading id="h0002"><b>Prior art</b></heading><p id="p0002" num="0002">For coding a block of pixels, known as current block, of a current image, it is known to determine a prediction block of this current block from a motion model defined by a set of parameters, calculate a residual block between the current block and the prediction block thus determined, and to code said residual block.</p><p id="p0003" num="0003">The standards such as MPEG-2 or MPEG-4 AVC notably describe a translational motion model, associating a motion vector with each block or macro-block. The coding of motion vectors is carried out differentially, for example by prediction from vectors of the neighbouring blocks of the block to be coded. In the document entitled <nplcit id="ncit0001" npl-type="s"><text>"Global Motion Vector Coding (GMVC)", by Shijun Sun, Shawmin Lei, VCEG-O21, ITU-T Video Coding Experts Group (VCEG) Meeting, Pattaya, Thailand, 4-7 December 2001</text></nplcit>, the differential coding of motion vectors is carried out by prediction from a global motion model.</p><p id="p0004" num="0004">In the standard MPEG-4 part 2, a more or less elaborated motion model is defined for each area of the image to be coded. In the document entitled "<nplcit id="ncit0002" npl-type="s"><text>Block-Matching Translation and Zoom Motion Compensated Prediction" by Lai-Man Po, Ka-Man Wong, Ka-Ho Ng, Kwok-Wai Cheung, Yu Liu, Ka-Man Cheng, Yan Huo, ISO/IEC JTC1/SC29/WG11 MPEG2009/M16891, 90th MPEG meeting, October 2009, Xian, Chine</text></nplcit>, the parameters of the motion model vary from one block to another.<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">In all cases, irrespective of the sophistication level of the motion model used, the parameters defining the motion model are coded and incorporated into the data stream. To limit the quantity of the motion parameters to be transmitted and reduce the extra cost linked to their transmission, the known methods apply the following principles:
<ul><li>the parameters of the motion model are generally coded differentially from a block to another,</li><li>the motion model is generally not too sophisticated to limit the quantity of parameters to be transmitted; it is limited to a translational model or a model with a very simple zoom,</li><li>If a motion model is defined by area or by macro-block, the number of areas or macro-blocks is limited.</li></ul></p><heading id="h0003"><b>Summary of the invention</b></heading><p id="p0006" num="0006">The purpose of the invention is to overcome all or some of the disadvantages of the prior art.</p><p id="p0007" num="0007">According to the invention, a method for coding is proposed using a parametric motion model of which the parameters of the model are defined from the motion data of the block of pixels of the causal neighbourhood.</p><p id="p0008" num="0008">Thus, the parameters of the motion model can be deduced from the parts of the image already coded. These parameters no longer need to be incorporated in the image data stream.</p><p id="p0009" num="0009">The object of the invention is a method for coding a block of pixels of an image, called current block, comprising the following steps:
<ul><li>determine a prediction block of the current block from a motion model defined by a set of parameters, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block.</li><li>calculate a residual block between said current block and said prediction block, and</li><li>code said residual block.</li></ul><!-- EPO <DP n="3"> --></p><p id="p0010" num="0010">According to the invention, the parameters of the motion model are determined from the motion data associated with blocks of pixels in the causal neighbourhood of said current block.</p><p id="p0011" num="0011">The causal neighbourhood is a well known term to those skilled in the art which designates blocks already coded (in the case of a coder) or already decoded (in the case of a decoder) which are neighbours of the current block to be coded or decoded.</p><p id="p0012" num="0012">According to the invention, the parameters of the motion model of the current block are deduced from the motion data resulting from the neighbouring blocks already coded and thus do not need to be Introduced into the data stream of the image. Theses parameters of the motion model will be determined by the decoder in the same way as the coder prior to decoding data of the current block. Hence, there is a reduction of data to be transmitted in the data stream of the image.</p><p id="p0013" num="0013">The coding mode thus defined is competing with other coding modes, notably with INTER coding. The motion data of the blocks of pixels of the causal neighbourhood are, for the blocks of the causal neighbourhood previously coded in INTER mode, the motion vectors associated with these blocks and, for the blocks of the causal neighbourhood previously coded as the current block, the motion vectors associated with the pixels of these blocks.</p><p id="p0014" num="0014">According to an embodiment of the invention, the motion model, noted θ, associates a motion vector v (x,y) with each pixel of coordinates (x,y) of the current block belonging to the following group:
<ul><li><maths id="math0001" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0001" file="imgb0001.tif" wi="40" he="15" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>, b<sub>0</sub>, α) are the model parameters,</li><li><maths id="math0002" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0002" file="imgb0002.tif" wi="56" he="15" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) are the model parameters,<!-- EPO <DP n="4"> --></li><li><maths id="math0003" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">0</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr></mtable></mfenced><mo>+</mo><mfenced><mtable><mtr><mtd><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0003" file="imgb0003.tif" wi="71" he="33" img-content="math" img-format="tif" inline="yes"/></maths> where</li></ul>
(a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>,c<sub>0</sub>,c<sub>1</sub>,c<sub>2</sub>) are the model parameters.</p><p id="p0015" num="0015">According to the invention, as the parameters of the motion model are not to be transmitted, the motion model used can be as sophisticated as we want. It is not limited by the number of parameters of the motion model.</p><p id="p0016" num="0016">The proposed motion models are advantageously more elaborate models than the translational standard models.</p><p id="p0017" num="0017">According to a particular embodiment, the motion data associated with the blocks of the causal neighbourhood are motion vectors associated with blocks or blocks of pixels and the parameters of the model are determined by minimisation to the least squares of the sum of the differences between each of the motion vectors of the blocks of the causal neighbourhood and the corresponding motion vector from the motion model. According to a variant, a motion vector is also associated with the current block. In this case, the parameters of the motion model of the current block are determined from the motion data associated with the blocks of pixels of the causal neighbourhood of said current block and said motion vector associated with the current block. In this case, the motion vector of the current block is transmitted in the data stream of the image. In this case, the sum of the differences for the minimisation to the least squares comprises the difference between the motion vector associated with the current block and the corresponding motion vector resulting from the motion model.</p><p id="p0018" num="0018">The causal neighbourhood of current block typically comprises blocks of pixels situated above and/or on the left of the current block. According to a particular embodiment, the causal neighbourhood of the current block comprises a first set of blocks of the same horizontal coordinate (x) in the<!-- EPO <DP n="5"> --> current image as the current block and a second set of blocks of the same vertical coordinate (y) in the current image as the current block. The definition of such causal neighbourhood has the advantage of simplifying the calculation of the parameters of the motion model.</p><p id="p0019" num="0019">In the case of such a causal neighbourhood, minimising to the least squares is first applied on the first set of blocks then the second set of blocks then on the entire causal neighbourhood to determine the parameters of the motion model.</p><p id="p0020" num="0020">According to another embodiment, the causal neighbourhood of the current block is segmented in a plurality of sets of blocks and a set of parameters is determined for each one of sets of blocks for the considered motion model. After segmenting, a prediction block of the current block is determined with each one of sets of parameters associated with all sets of blocks, a residual block between the current block and each one of prediction blocks is calculated and each one of the residual blocks is coded. Among the coded residual blocks, the one that responds to a predefined criterion is transmitted. Advantageously, the selection criterion of the coded residual block to be transmitted is a bitrate-distortion criterion. An item of information identifying the set of parameters having served to determine the prediction block associated with the transmitted residual block is also transmitted with the coded residual block.</p><p id="p0021" num="0021">The purpose of the invention is also to provide a device which could implement the method for coding defined above and more specifically a device for coding a block of pixels of an image, called current block, comprising:
<ul><li>calculation means to determine a prediction block of the current block from a motion model defined by a set of parameters and calculate a residual block between said current block and said prediction block, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block, and</li><li>coding means to code said residual block.</li></ul><!-- EPO <DP n="6"> --></p><p id="p0022" num="0022">According to the invention, the calculation means are able to determine, for said current block, the parameters of the motion model from the motion data associated with blocks in the causal neighbourhood of said current block.</p><p id="p0023" num="0023">The invention also relates to a method for decoding a block of pixels of an image, called current block from an associated coded residual block, comprising the following steps:
<ul><li>decode said coded residual block;</li><li>determine a prediction block of the current block from a motion model defined by a set of parameters, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block, and</li><li>determine the current block from said decoded residual block and said prediction block.</li></ul></p><p id="p0024" num="0024">According to the invention, for said current block, the parameters of the motion model are determined from the motion data associated with blocks in the causal neighbourhood of said current block.</p><p id="p0025" num="0025">Finally, the invention also relates to a device for decoding a block of pixels of an image, called current block, from an associated residual block, comprising:
<ul><li>decoding means to decode said residual block,</li><li>calculation means to determine a prediction block of the current block from a motion model defined by a set of parameters, and determine the current block from the residual decoded block and said prediction block, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block.</li></ul></p><p id="p0026" num="0026">According to the invention, the calculation means are able to determine the parameters of motion model from the motion data associated with blocks in the causal neighbourhood of said current block.<!-- EPO <DP n="7"> --></p><p id="p0027" num="0027">Experts in the field may note other advantages when studying the following examples, illustrated in the figures appended, provided by way of example.</p><heading id="h0004"><b>Brief description of the figures</b></heading><p id="p0028" num="0028"><ul><li><figref idrefs="f0001">Figure 1</figref> diagrammatically shows a first example of the causal neighbourhood for implementing the invention,</li><li><figref idrefs="f0001">Figure 2</figref> shows a flowchart of the steps of the coding method of the invention,</li><li><figref idrefs="f0002">Figure 3</figref> diagrammatically shows a second example of the causal neighbourhood for the implementation of the invention,</li><li><figref idrefs="f0002">Figure 4</figref> shows a coder which could implement the method steps of <figref idrefs="f0001">figure 2</figref>,</li><li><figref idrefs="f0003">Figure 5</figref> shows a flowchart of the steps of the invention's method for decoding, and</li><li><figref idrefs="f0003">Figure 6</figref> shows a decoder which could implement the method steps of <figref idrefs="f0003">figure 5</figref>.</li></ul></p><heading id="h0005"><b>Detailed description of at least one embodiment</b></heading><p id="p0029" num="0029">According to the invention, a method for coding a block of pixels using a parametric motion model is defined. The set of parameters of the parametric motion model is determined from motion data of blocks of pixels in the causal neighbourhood of the considered block of pixels. Block of pixels is understood to be every set of adjacent pixels of sizes 4x4, 8x8, 16x16, 8x16, 16x8 ... but also every other set of adjacent pixels of different sizes such as for example a macro-block, an area or an image slice.</p><p id="p0030" num="0030">The motion model associated with a block of pixels define a motion vector for each pixel. In the case of the motion compensation with determination of a prediction block, the motion vector defined by a pixel of a block of current pixels points at a pixel of the prediction block.<!-- EPO <DP n="8"> --></p><p id="p0031" num="0031">According to the invention, the motion model is a parametric model not necessarily translational of which the parameters are defined locally.</p><p id="p0032" num="0032">The use of a model enables a richer motion representation than a translational model and being able to vary locally. The parameters may vary locally, for example between neighbouring blocks. A motion compensation of a very good precision is obtained, hence a temporal motion based prediction of a very good quality, enabling thus a coding cost reduction of the residues of temporal prediction.</p><p id="p0033" num="0033">According to the invention, a particular coding mode called LPM is defined in the remainder of the description for (Locally derived Parametric Motion), relying on a parametric motion model θ. When the LPM mode is invoked by a current block to be coded, the motion associated with the pixels of the current block is defined based on a set of local parameters and the pixel position in the block (or in the image).</p><p id="p0034" num="0034">The motion model θ associates a motion vector v(x,y) with each coordinate pixel (x,y) of the current block, having one of the following forms
<ol><li>1) <maths id="math0004" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="40" he="15" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>,b<sub>0</sub>,α) are the model parameters;</li><li>2) <maths id="math0005" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0005" file="imgb0005.tif" wi="54" he="17" img-content="math" img-format="tif" inline="yes"/></maths>where (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) are the model parameters;</li><li>3) <maths id="math0006" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">0</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr></mtable></mfenced><mo>+</mo><mfenced><mtable><mtr><mtd><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="71" he="29" img-content="math" img-format="tif" inline="yes"/></maths> where<br/>
(a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>,c<sub>0</sub>,c<sub>1</sub>,c<sub>2</sub>) are the model parameters.</li></ol></p><p id="p0035" num="0035">Case 1) corresponds to a zoom motion. Case 2) shows an affine motion and case 3) shows a perspective motion.</p><p id="p0036" num="0036">One of these models is chosen at the start of each image or each image slice. Each time the model changes, a representative information is introduced in the data stream to warn the decoder. Also, only one model<!-- EPO <DP n="9"> --> can be used for all the video sequence. As it is restricted to a neighburhood of limited size, the affine model (case 2) seems the most appropriate for representing a 2D motion. It constitutes in fact a good compromise in terms of complexity, robustness of parameter estimation. In the remainder of the description, this model is used.</p><p id="p0037" num="0037">The LPM mode is a competitor with other coding modes and notably with the INTER coding mode. In particular, the INTER coding mode relying on a translational motion vector remains possible.</p><p id="p0038" num="0038">To determine the parameters of the motion model θ, a method of the least squares called complete least squares for example is applied.</p><p id="p0039" num="0039">For this parameters calculation, it is assumed that, in the causal neighbourhood VC of the block to code, motion data reconstructed during the previous coding of the blocks of this neighbourhood is available. This causal neighbourhood comprises N adjacent blocks B<sub>i</sub>, i=1, .. ,N, of position p<sub>i</sub> = (x<sub>i</sub>,y<sub>i</sub>), corresponding for example to the central position of the block in the image, for which a motion vector v<sub>i</sub> = (dx<sub>i</sub>,dy<sub>i</sub>) is available. This causal neighbourhood is for example as is shown on <figref idrefs="f0001">figure 1</figref>. In this example, the causal neighbourhood comprises N=14 blocks B<sub>i</sub> already coded and located on the left and or above the block B to be coded.</p><p id="p0040" num="0040">The parameters (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) of the affine model from values v<sub>i</sub> and p<sub>i</sub> are calculated, for i=1...N.</p><p id="p0041" num="0041">According to the method of the complete least squares, the motion model θ parameters are determined by minimisation to the least squares as follows: <maths id="math0007" num=""><math display="block"><mover><mi mathvariant="normal">θ</mi><mo>^</mo></mover><mo>=</mo><mi mathvariant="normal">E</mi><mfenced><mi mathvariant="normal">θ</mi></mfenced><mo>=</mo><munder><mi>arg min</mi><mi mathvariant="normal">θ</mi></munder><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi mathvariant="normal">i</mi><mo>=</mo><mn mathvariant="normal">1</mn></mrow><mi mathvariant="normal">N</mi></munderover></mstyle><msub><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi></msub><mo>⁢</mo><mfenced separators=""><msup><mfenced separators=""><msub><mi>dx</mi><mi mathvariant="normal">i</mi></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">y</mi><mi mathvariant="normal">i</mi></msub></mfenced><mn mathvariant="normal">2</mn></msup><mo>+</mo><msup><mfenced separators=""><msub><mi>dy</mi><mi mathvariant="normal">i</mi></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">x</mi><mi mathvariant="normal">i</mi></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">y</mi><mi mathvariant="normal">i</mi></msub></mfenced><mn mathvariant="normal">2</mn></msup></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="151" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0042" num="0042">The parameter w<sub>i</sub> is a weighting factor which is a function of the coding mode of the block B<sub>i</sub>. For example, if the block B<sub>i</sub> has been coded in INTRA mode, the coefficient w<sub>i</sub> is equal to 0 and, if it has been coded in INTER mode or LPM mode, its weighting coefficient is equal to 1.<!-- EPO <DP n="10"> --></p><p id="p0043" num="0043">The weighting coefficient w<sub>i</sub> can also be function of the position (x<sub>i</sub>,y<sub>i</sub>) of the block B<sub>i</sub> with respect to the position of the current block to be coded.</p><p id="p0044" num="0044">If the block B<sub>i</sub> has been coded in INTER mode, the motion vector v<sub>i</sub>=(dx<sub>i</sub>,dy<sub>i</sub>) of the block B<sub>i</sub> is the motion vector which served at the "block matching" operation for this coding.</p><p id="p0045" num="0045">If the block B<sub>i</sub> has been coded in LPM mode and if this block comprises Q pixels, the expression (dx<sub>i</sub> - a<sub>0</sub> - a<sub>1</sub> · x<sub>i</sub> - a<sub>2</sub> · y<sub>i</sub>)<sup>2</sup> + (dy<sub>i</sub> - b<sub>0</sub> - b<sub>1</sub> · x<sub>i</sub> - b<sub>2</sub> · y<sub>i</sub>)<sup>2</sup> associated with block Bi is replaced by the expression <maths id="math0008" num=""><math display="block"><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi mathvariant="normal">j</mi><mo>=</mo><mn mathvariant="normal">1</mn></mrow><mi mathvariant="normal">Q</mi></munderover></mstyle><msub><mi mathvariant="normal">w</mi><mi mathvariant="normal">i</mi></msub><mo>⁢</mo><mfenced separators=""><msup><mfenced separators=""><msub><mi>dx</mi><mi mathvariant="normal">j</mi></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">x</mi><mi mathvariant="normal">j</mi></msub><mo>-</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">y</mi><mi mathvariant="normal">j</mi></msub></mfenced><mn mathvariant="normal">2</mn></msup><mo>+</mo><msup><mfenced separators=""><msub><mi>dy</mi><mi mathvariant="normal">i</mi></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">x</mi><mi mathvariant="normal">j</mi></msub><mo>-</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">y</mi><mi mathvariant="normal">i</mi></msub></mfenced><mn mathvariant="normal">2</mn></msup></mfenced></math><img id="ib0008" file="imgb0008.tif" wi="124" he="18" img-content="math" img-format="tif"/></maths><br/>
in which (x<sub>j</sub>,y<sub>j</sub>) are the coordinates of the position of the pixel j and (dx<sub>j</sub>,dy<sub>j</sub>)=v<sub>j</sub> is the motion vector of pixel j defined for the LPM coding of the block B<sub>i</sub>.</p><p id="p0046" num="0046">As a variant, if a mode is called LPM_MV described later is used to code block B<sub>i</sub>, the motion vector v<sub>i</sub> of the block B<sub>i</sub> is the motion vector defined for this mode.</p><p id="p0047" num="0047">As the expression (1) to be minimized is linear based on θ, this minimisation returns to resolve a linear system. The resolution of such system is well known.</p><p id="p0048" num="0048">The resolution of this system enables to determine the set of parameters (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) of the affine model (case 2) for the current block. This resolution is carried out by the coder for coding the current block and by the decoder for the current block. The coder (respectively the decoder) uses only motion data of blocks already coded (respectively decoded) of the causal neighbourhood to determine the parameters (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>).</p><p id="p0049" num="0049">Once the set of parameters is defined, a prediction block can then be determined for the current block to be coded from the motion model using parameters (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) defined for the current block. These<!-- EPO <DP n="11"> --> parameters are local as determined from a local causal neighbourhood and are specific to the current block to be coded as determined from a causal neighbourhood which is specific to the current block. This step for determining the prediction block is then followed by a step for calculating the residual block between the current block and the prediction block and by a step for coding the residual block. These 3 main steps of the method for coding are shown on <figref idrefs="f0001">figure 2</figref>. On this figure, the step for determining the prediction block is referenced E1, the step for calculating the residual block is referenced E2 and the step for coding the residual block is referenced E3.</p><p id="p0050" num="0050">According to method of the least squares previously defined, the determination of the parameters of the motion model is carried out by resolving a linear system.</p><p id="p0051" num="0051">According to another method, called hereafter method of the simplified least squares, the causal neighbourhood is reduced to a set V <sub>x</sub> of blocks of the same vertical coordinate in the current image that the current block and a set V <sub>y</sub> of blocks of the same horizontal coordinates in the current image as the current block. <figref idrefs="f0002">Figure 3</figref> shows such a causal neighbourhood. In this example, V<sub>x</sub> comprises 4 neighbouring blocks B<sub>i</sub> situated on the left of the block B to be coded and V<sub>y</sub> comprises the 3 neighbouring blocks B<sub>i</sub> situated on top of the block B to be coded. Such causal neighbourhood enables to simplify the determination of the set of parameters of the motion model.</p><p id="p0052" num="0052">The determination of the set of parameters is carried out in 3 substeps:
<ul><li>a minimisation to the least squares is applied on set V<sub>x</sub>; blocks of V<sub>x</sub> have the same vertical coordinate y<sub>i</sub> as the current block to be coded; only the horizontal coordinate x<sub>i</sub> varies, which enables to estimate the affine part in x of θ, that is to say parameters a<sub>1</sub> and b<sub>1</sub>; this can be done by minimising E(θ) with respect to a<sub>1</sub> and b<sub>1</sub>;<!-- EPO <DP n="12"> --></li><li>a minimisation to the least squares is then applied on set V<sub>y</sub>; blocks of V<sub>y</sub> have the same horizontal coordinate x<sub>i</sub> as the current block to be coded; only the vertical coordinate y<sub>i</sub> varies, which enables to estimate the affine part in y of θ, that is to say parameters a<sub>2</sub> and b<sub>2</sub>; this can be done by minimising E(θ) with respect to a<sub>2</sub>s and b<sub>2</sub>;</li><li>finally, minimisation to the least squares is applied on all the causal neighbourhood; knowing a<sub>1</sub>, a<sub>2</sub>, b<sub>1</sub>, b<sub>2</sub>, oe can calculated a<sub>0</sub> and b<sub>0</sub>; that is to say minimisation of E(θ) with respect to a<sub>0</sub> and b<sub>0</sub>.</li></ul></p><p id="p0053" num="0053">In the preceding description, a single set of parameters is calculated to determine the prediction block of the current block. According to an embodiment in variant, the causal neighbourhood of the current block is segmented in a plurality of sets of blocks and a set of parameters is calculated for each set of blocks for the considered motion model. Indeed, the causal neighbourhood can potentially comprise several areas having distinct motions. It would therefore be of interest to define a set of parameters for each one of these areas.</p><p id="p0054" num="0054">The causal neighbourhood is thus segmented in several areas or sets of adjacent blocks according to a standard method, for example by a regional growth method using a RSST (Recursive Shortest Spanning Tree) algorithm as defined in the document entitled "<nplcit id="ncit0003" npl-type="s"><text>Utilization of the recursive shortest spanning tree algorithm for video-object segmentation by 2-D affine motion modelling" by E. Tuncel, L. Onural, TCSVT, Vol 10, Issued on August 5, 2000, Pages: 776 - 781</text></nplcit> or an algorithm of type "split and merge" as defined in the document entitled "<nplcit id="ncit0004" npl-type="s"><text>A Robust Split-and-Merge Text Segmentation Approach for Images" by Yaowen Zhan, Weiqiang Wang, Wen Gao, ICPR'06, Volume 2, Hong Kong, August 2006</text></nplcit>. According to this method, the causal neighbourhood is cut out according to a predefined structure then two by two of the neighbouring areas are sought to be regrouped together.</p><p id="p0055" num="0055">After segmenting, a set of parameters is calculated for each set of blocks (or segments of blocks) according to the method of the complete<!-- EPO <DP n="13"> --> least squares. This step is carried out by the coder and can be conducted symmetrically by the decoder. One or several sets of parameters are thus available for the motion model.</p><p id="p0056" num="0056">If more than one set of parameters is available, the residual block is calculated and coded (steps E1 to E3) using each one set of parameters for the motion model. Among the coded residual blocks, the coded residual block which is optimal according to a predefined criterion is selected, preferably a bitrate-distortion type criterion. Moreover, an item of information is generated identifying the set of parameters having served to determine the prediction block associated with the selected residual block. This information is transmitted at the same time as the coded residual block also transmitted. This information is preferably the index, among the indexes of a list associating an index to each set of parameters, of the set of parameters having served to determine the prediction block associated with the transmitted residual block.</p><p id="p0057" num="0057">In reception, the decoder receives the coded residual block and the index of the set of parameters. It carries out the same operation for the segmentation and the same operation for the determination of the set of parameters as the coder. Then the decoder decodes said coded residual block and determines a prediction block of the current block from the motion model configured with the set of parameters associated with the received index. The decoder determines then the current block from the decoded residual block and said prediction block.</p><p id="p0058" num="0058">With regard to what has preceded, in LPM mode, no parameter of the motion model is transmitted to the decoder except the information identifying the set of parameters having served to determine the prediction block associated with the selected residual block.</p><p id="p0059" num="0059">As a variant, when the LPM mode is invoked for the current block, a motion vector is nevertheless coded for the current block transmitted with the residual block. In fact, the motion model obtained from the motion data of the causal neighbourhood blocks could be unsatisfactory for the current<!-- EPO <DP n="14"> --> block (for example because it creates too much distortion). Therefore, according to a particular LPM mode, it is proposed to combine and transmit a motion vector for the current block for the motion model associated with the current block to be not only determined from the motion data of the causal neighbourhood but also from this motion vector associated with the current block. This motion vector associated with the current block can be determined in different ways, for example by a "block matching" operation.</p><p id="p0060" num="0060">Hence, two types of the LPM mode can be defined:
<ul><li>an LPM_SKIP mode where no motion information is transmitted, the parameters of the motion model are exclusively deducted from the motion data of blocks already coded from the causal neighbourhood,</li><li>an LPM_MV mode where a translational motion vector is coded and transmitted with the residual block, the parameters of the motion model are deducted from the motion data of blocks of the causal neighbourhood and of the current block.</li></ul></p><p id="p0061" num="0061">The invention enables a more refined description of the motion which is based on a parametric model of which the parameters can vary locally. It thus enables a better temporal prediction without extra coding cost, which will finally enable enhancing the quality without increasing the bitrate.</p><p id="p0062" num="0062">The method for coding of the invention is for example implemented in a coding device as shown on <figref idrefs="f0002">figure 4</figref>. This coding device referenced 1, comprises a circuit 10 to determine a prediction block from a motion model of which the parameters are determined from motion data associated with blocks of pixels of the causal neighbourhood VC of the current block, a differential circuit 11 to generate a residual block from the prediction block and from the current block, a circuit 12 of transformation and/or quantization to generate a quantized residual block and a circuit 13 of an entropy coding to generate the coded current block.</p><p id="p0063" num="0063">On the decoder side, the method comprises the following steps shown on <figref idrefs="f0003">figure 5</figref>:<!-- EPO <DP n="15"> -->
<ul><li>a step E'1 for decoding a coded residual block associated with a current block and received by the decoder,</li><li>a step E'2 to determine a prediction block of the current block from a motion model of which the parameters are determined from the motion data associated with blocks already decoded from the causal neighbourhood VC of the current block, and</li><li>a step E'3 to determine the current block from the decoded residual block and the prediction block.</li></ul></p><p id="p0064" num="0064">This method for decoding is for example implemented in a decoding device as shown on <figref idrefs="f0003">figure 6</figref>. This decoding device, referenced 2, comprises a circuit 20 for an entropy decoding, a circuit 21 for the inverse transformation and/or inverse quantization of the block of pixels resulting from the circuit of the entropy decoding, a circuit 22 to determine a prediction block from a motion model of which the parameters are determined from the motion data associated with the blocks of pixels of the causal neighbourhood VC of the current block, and a circuit 23 to add the blocks of pixels resulting from the prediction circuit 22 and from the circuit 21 for generating the decoded current block.</p><p id="p0065" num="0065">The devices for coding 1 and for decoding 2 according to the invention are for example implemented on a computer platform having hardware components such as one or several microprocessors or CPU, a random access memory or RAM , a non volatile memory or Read Only Memory ROM and one of the interfaces of input/output which are connected to each other by an address and data bus. The platform can also comprise a man-machine interface. The platform generally comprises an operating system and microcode. According to an implementation example, algorithms implementing the steps of the methods specific to the invention are stored in the memory ROM. When powered up, the microprocessor loads and runs the instructions of these algorithms.</p><p id="p0066" num="0066">According to variants, the coding and decoding devices compatible with the invention are implemented according to a purely hardware realisation, for<!-- EPO <DP n="16"> --> example in the form of a dedicated component (for example in an ASIC (Application Specific Integrated Circuit) or FPGA (Field-Programmable Gate Array) or VLSI (Very Large Scale Integration) or of several electronic components integrated into a device or even in a form of a mix of hardware elements and software elements.</p><p id="p0067" num="0067">Although the invention has been described in relation to different particular embodiments, it is obvious that it is in no way restricted and that it comprises all the technical equivalents of the means described together with their combinations if the latter fall within the scope of the invention.</p></description><claims mxw-id="PCLM56982273" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-0001" num="0001"><claim-text>Method for coding a block of pixels of an image, called current block (B) comprising the following steps:
<claim-text>- determining (E1) a prediction block of the current block from a motion model defined by a set of parameters, said motion model associating a motion vector pointing at a pixel of a prediction block with each pixel of the current block,</claim-text>
<claim-text>- calculating (E2) a residual block between said current block and said prediction block;</claim-text>
<claim-text>- coding (E3) said residual block;</claim-text>
<b>characterized in that</b>, for said current block, the prediction block is determined and said residual block is calculated and coded according to the following steps:
<claim-text>- segmenting the causal neighbourhood of the current block into a plurality of sets of blocks, a set of parameters being determined for each one of the sets of blocks,</claim-text>
<claim-text>- determining a prediction block of the current block with each one of said sets of parameters, calculate a residual block between the current block and each one prediction block and code said residual blocks,</claim-text>
<claim-text>- selecting, among coded residual blocks, the coded residual block to transmit according to a predefined selection criterion and generate information identifying the set of parameters having served to determine the prediction block associated with the selected residual block, said information being transmitted with said coded residual block.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>Method according to claim 1 in which the motion model, noted θ, associates a motion vector v(x,y) belonging to the following group with each pixel of coordinates (x,y) of current block:<!-- EPO <DP n="18"> -->
<claim-text>- <maths id="math0009" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><mi mathvariant="normal">α</mi><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0009" file="imgb0009.tif" wi="40" he="15" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>,b<sub>0</sub>,α) are the model parameters,</claim-text>
<claim-text>- <maths id="math0010" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr><mtr><mtd><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="56" he="17" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>) are the model parameters,</claim-text>
<claim-text>- <maths id="math0011" num=""><math display="inline"><mi mathvariant="normal">v</mi><mfenced separators=""><mi mathvariant="normal">x</mi><mo>⁢</mo><mi mathvariant="normal">y</mi></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">α</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">a</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr><mtr><mtd><mfrac><mrow><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">0</mn></msub><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">b</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow><mrow><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">0</mn></msub><mo>⋅</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">1</mn></msub><mo>⋅</mo><mi mathvariant="normal">x</mi><mo>+</mo><msub><mi mathvariant="normal">c</mi><mn mathvariant="normal">2</mn></msub><mo>⋅</mo><mi mathvariant="normal">y</mi></mrow></mfrac></mtd></mtr></mtable></mfenced><mo>+</mo><mfenced><mtable><mtr><mtd><mi mathvariant="normal">x</mi></mtd></mtr><mtr><mtd><mi mathvariant="normal">y</mi></mtd></mtr></mtable></mfenced></math><img id="ib0011" file="imgb0011.tif" wi="72" he="28" img-content="math" img-format="tif" inline="yes"/></maths> where (a<sub>0</sub>,a<sub>1</sub>,a<sub>2</sub>,b<sub>0</sub>,b<sub>1</sub>,b<sub>2</sub>,c<sub>0</sub>,c<sub>1</sub>,c<sub>2</sub>) are the model parameters.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>Method according to any one of claims 1 to 2, wherein the motion data associated with the blocks of the causal neighbourhood are motion vectors and wherein the parameters of the model are determined by minimisation to the least squares of the sum of differences between each one of said motion vectors of the blocks of the causal neighbourhood and the corresponding motion vector resulting from the motion model.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>Method according to one of claims 1 to 3, wherein a motion vector is associated with the current block and wherein, for said current block, the parameters of the motion model are determined from motion data associated with the blocks of pixels of the causal neighbourhood of said current block and said motion vector associated with the current block.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>Method according to claim 4, itself dependent on claim 3, wherein said sum also comprises the difference between the motion vector associated with the current block and the corresponding motion vector resulting from the motion model.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>Method according to any one of claims 1 to 5, wherein the causal neighbourhood of the current block comprises a first set of blocks (VC<sub>x</sub>) of<!-- EPO <DP n="19"> --> the same vertical coordinate in the current image as the current block and a second set of blocks (VC<sub>y</sub>) of the same horizontal coordinates in the current image as the current block.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>Method according to claim 6, itself dependent on the claim 3, wherein a first minimisation to the least squares is applied on the first set of blocks then a second minimisation to the least squares is applied on the second set of blocks then a third minimisation is applied on the whole causal neighbourhood to determine the parameters of the motion model.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>Device for coding a block of pixels of an image, called current block, comprising:
<claim-text>- calculation (10) means to determine a prediction block of the current block from at least one motion model defined by a set of parameters, and calculate (11) a residual block between said current block and said prediction block, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block, and</claim-text>
<claim-text>- coding means (12,13) to code said residual block;</claim-text>
<b>characterized in that</b>-said calculation and coding means are configured to:
<claim-text>- segment the causal neighbourhood of the current block into a plurality of sets of blocks, a set of parameters being determined for each one of the sets of blocks,</claim-text>
<claim-text>- determine a prediction block of the current block with each one of said sets of parameters, calculate a residual block between the current block and each one prediction block and code said residual blocks,</claim-text>
<claim-text>- select, among coded residual blocks, the coded residual block to transmit according to a predefined selection criterion and generate information identifying the set of parameters having served to determine the prediction block associated with the selected<!-- EPO <DP n="20"> --> residual block, said information being transmitted with said coded residual block.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>Method for decoding a block of pixels of an image, called current block from an associated coded residual block comprising the following steps:
<claim-text>- decoding (E3) said coded residual block,</claim-text>
<claim-text>- determining (E'2) a prediction block of the current block from a motion model defined by a set of parameters, said motion model associating a motion vector pointing at a pixel of a prediction block with each pixel of the current block,</claim-text>
<claim-text>- determining (E'3) the current block from said decoded residual block and said prediction block,<br/>
<b>characterized in that</b>, for said current block, said prediction block is determined according to the following steps</claim-text>
<claim-text>- segmenting the causal neighbourhood of the current block into a plurality of sets of blocks, a set of parameters being determined for each one of the sets of blocks,</claim-text>
<claim-text>- decoding information identifying a set of parameters;</claim-text>
<claim-text>- determining a prediction block of the current block from a motion model defined by said set of parameters identified by said decoded information.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>Device for decoding a block of pixels of an image, called current block from an associated coded residual block comprising:
<claim-text>- decoding means (20,21) to decode said residual block;</claim-text>
<claim-text>- calculation means (22,23) to determine a prediction block of the current block from a motion model defined by a set of parameters and determine the current block from the decoded residual block and said prediction block, said motion model associating a motion vector pointing at a pixel of the prediction block with each pixel of the current block,<!-- EPO <DP n="21"> --> <b>characterized in that</b> the calculation means are configured for:</claim-text>
<claim-text>- segmenting the causal neighbourhood of the current block into a plurality of sets of blocks, a set of parameters being determined for each one of the sets of blocks,</claim-text>
<claim-text>- decoding information identifying a set of parameters;</claim-text>
<claim-text>- determining a prediction block of the current block from a motion model defined by said set of parameters identified by said decoded information.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670658" load-source="patent-office"><!-- EPO <DP n="22"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="165" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="163" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="164" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="161" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
