<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681636-A1" country="EP" doc-number="2681636" kind="A1" date="20140108" family-id="46754056" file-reference-id="297917" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586170" ucid="EP-2681636-A1"><document-id><country>EP</country><doc-number>2681636</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12751886-A" is-representative="NO"><document-id mxw-id="PAPP154848362" load-source="docdb" format="epo"><country>EP</country><doc-number>12751886</doc-number><kind>A</kind><date>20120301</date><lang>EN</lang></document-id><document-id mxw-id="PAPP168045785" load-source="docdb" format="original"><country>EP</country><doc-number>12751886.8</doc-number><date>20120301</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553113" ucid="US-201113039214-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113039214</doc-number><kind>A</kind><date>20110302</date></document-id></priority-claim><priority-claim mxw-id="PPC140556722" ucid="US-2012027221-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012027221</doc-number><kind>W</kind><date>20120301</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2108690668" load-source="docdb">G06F   1/32        20060101ALI20140815BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2108696788" load-source="docdb">G06F   1/00        20060101AFI20140815BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1713574789" load-source="docdb" scheme="CPC">Y02D  10/171       20180101 LA20180103BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047996655" load-source="docdb" scheme="CPC">G06F   9/5083      20130101 LA20150608BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047997224" load-source="docdb" scheme="CPC">G06F   9/505       20130101 LA20150608BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048001788" load-source="docdb" scheme="CPC">G06F   1/3206      20130101 LI20150609BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048002507" load-source="docdb" scheme="CPC">G06F   9/5088      20130101 LA20150608BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048006614" load-source="docdb" scheme="CPC">G06F   1/329       20130101 LA20150608BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048008795" load-source="docdb" scheme="CPC">G06F  11/3433      20130101 LA20150608BHEP        </classification-cpc><classification-cpc mxw-id="PCL2076402133" load-source="docdb" scheme="CPC">G06F   1/3287      20130101 FI20140519BHEP        </classification-cpc><classification-cpc mxw-id="PCL2076402761" load-source="docdb" scheme="CPC">G06F   1/3203      20130101 LA20140517BHEP        </classification-cpc><classification-cpc mxw-id="PCL2076402970" load-source="docdb" scheme="CPC">G06F   1/3209      20130101 LI20140519BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363143" lang="DE" load-source="patent-office">NICHTINTRUSIVE LEISTUNGSVERWALTUNG</invention-title><invention-title mxw-id="PT132363144" lang="EN" load-source="patent-office">NON-INTRUSIVE POWER MANAGEMENT</invention-title><invention-title mxw-id="PT132363145" lang="FR" load-source="patent-office">GESTION D'ALIMENTATION NON INTRUSIVE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919541378" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>RALLO AARON J</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919512856" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>RALLO, Aaron J.</last-name></addressbook></applicant><applicant mxw-id="PPAR919008266" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Rallo, Aaron J.</last-name><iid>101335552</iid><address><street>15127 NE 24th Street Number 479</street><city>Redmond, WA 98052</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919544993" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>RALLO AARON J</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919526873" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>RALLO, Aaron J.</last-name></addressbook></inventor><inventor mxw-id="PPAR919018981" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>RALLO, Aaron J.</last-name><address><street>15127 NE 24th Street Number 479</street><city>Redmond, WA 98052</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919016470" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>De Anna, Pier Luigi</last-name><suffix>et al</suffix><iid>101272397</iid><address><street>DeAnna-Patent Lucile-Grahn-Strasse 48</street><city>81675 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012027221-W"><document-id><country>US</country><doc-number>2012027221</doc-number><kind>W</kind><date>20120301</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118934-A1"><document-id><country>WO</country><doc-number>2012118934</doc-number><kind>A1</kind><date>20120907</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549757191" load-source="docdb">AL</country><country mxw-id="DS549765549" load-source="docdb">AT</country><country mxw-id="DS549757192" load-source="docdb">BE</country><country mxw-id="DS549833894" load-source="docdb">BG</country><country mxw-id="DS549846139" load-source="docdb">CH</country><country mxw-id="DS549757855" load-source="docdb">CY</country><country mxw-id="DS549765550" load-source="docdb">CZ</country><country mxw-id="DS549757197" load-source="docdb">DE</country><country mxw-id="DS549757856" load-source="docdb">DK</country><country mxw-id="DS549757865" load-source="docdb">EE</country><country mxw-id="DS549834876" load-source="docdb">ES</country><country mxw-id="DS549833895" load-source="docdb">FI</country><country mxw-id="DS549833896" load-source="docdb">FR</country><country mxw-id="DS549757198" load-source="docdb">GB</country><country mxw-id="DS549757866" load-source="docdb">GR</country><country mxw-id="DS549757199" load-source="docdb">HR</country><country mxw-id="DS549765551" load-source="docdb">HU</country><country mxw-id="DS549846140" load-source="docdb">IE</country><country mxw-id="DS549757867" load-source="docdb">IS</country><country mxw-id="DS549833897" load-source="docdb">IT</country><country mxw-id="DS549757868" load-source="docdb">LI</country><country mxw-id="DS549835177" load-source="docdb">LT</country><country mxw-id="DS549913611" load-source="docdb">LU</country><country mxw-id="DS549835182" load-source="docdb">LV</country><country mxw-id="DS549835183" load-source="docdb">MC</country><country mxw-id="DS549913612" load-source="docdb">MK</country><country mxw-id="DS549913613" load-source="docdb">MT</country><country mxw-id="DS549834877" load-source="docdb">NL</country><country mxw-id="DS549765552" load-source="docdb">NO</country><country mxw-id="DS549913614" load-source="docdb">PL</country><country mxw-id="DS549757873" load-source="docdb">PT</country><country mxw-id="DS549834882" load-source="docdb">RO</country><country mxw-id="DS549757874" load-source="docdb">RS</country><country mxw-id="DS549913615" load-source="docdb">SE</country><country mxw-id="DS549757200" load-source="docdb">SI</country><country mxw-id="DS549765561" load-source="docdb">SK</country><country mxw-id="DS549913616" load-source="docdb">SM</country><country mxw-id="DS549846141" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99830350" ref-ucid="WO-2012118934-A1" lang="EN" load-source="patent-office"><p num="0000">A method and system for managing power consumption of a pool of computing devices that are logically grouped to provide a common set of functionality is disclosed. One aspect of certain embodiments includes predicting resource utilization for each device without installing customized software, firmware or hardware on the device.</p></abstract><abstract mxw-id="PA100327178" ref-ucid="WO-2012118934-A1" lang="EN" source="national office" load-source="docdb"><p>A method and system for managing power consumption of a pool of computing devices that are logically grouped to provide a common set of functionality is disclosed. One aspect of certain embodiments includes predicting resource utilization for each device without installing customized software, firmware or hardware on the device.</p></abstract><abstract mxw-id="PA99830351" ref-ucid="WO-2012118934-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention porte sur un procédé et un système de gestion de la consommation électrique d'un groupe de dispositifs informatiques qui sont logiquement groupés afin d'offrir un ensemble commun de fonctions. Un aspect de certains modes de réalisation consiste à prédire une utilisation de ressource pour chaque dispositif sans installer ni logiciel, ni micrologiciel, ni matériel personnalisé sur le dispositif.</p></abstract><abstract mxw-id="PA100327179" ref-ucid="WO-2012118934-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention porte sur un procédé et un système de gestion de la consommation électrique d'un groupe de dispositifs informatiques qui sont logiquement groupés afin d'offrir un ensemble commun de fonctions. Un aspect de certains modes de réalisation consiste à prédire une utilisation de ressource pour chaque dispositif sans installer ni logiciel, ni micrologiciel, ni matériel personnalisé sur le dispositif.</p></abstract><description mxw-id="PDES51232205" ref-ucid="WO-2012118934-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Non-Intrusive Power Management </p><p id="p0002" num="0002">TECHNICAL FIELD </p><p id="p0003" num="0003"> [0001] The disclosed embodiments relate generally to power management in any pool of computing devices that are logically grouped to provide a common set of functionality. More particularly, the disclosed embodiments relate to power management in server pools, interchangeably referred to as server clusters, typically found in large computing establishments like data centers. </p><p id="p0004" num="0004">BACKGROUND </p><p id="p0005" num="0005"> [0002] The proliferation of the Internet, devices that access it, and consequently, Internet based services are driving an insatiable thirst for computational power. To meet this need, large data centers have been set up. Typical data centers house hundreds, maybe even thousands of servers, and serve as the backbone for a variety of Internet services. The services hosted by data centers typically come with the requirement of high availability, close to 99.9% up time, which is usually supported by replicating servers and maintaining spare capacity. Furthermore, data centers are designed for a peak loads which are both occasional and short lived. As a result, data centers tend to consume large amounts of power. In phases that the data center is not fully loaded, idle servers can be shutdown without substantial loss in performance. When the load increases, powered off servers can be booted-up to service the requests and maintain Quality of Service (QoS). </p><p id="p0006" num="0006"> [0003] Reducing the power consumption of a data center contributes to reduced operational expense, and allows the data center operator to invest in newer hardware and supporting infrastructure, to save money and/or to provide improved services to customers. Prior studies have reported that servers can draw close to 60% of their peak power consumption when idle, and that the global electricity costs for data centers have been reported as 
<!-- EPO <DP n="3"/>-->
 running into the billions. Therefore, substantial reduction in power consumption can be achieved by shutting down idle servers. </p><p id="p0007" num="0007"> [0004] </p><p id="p0008" num="0008">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0009" num="0009"> [0005] For a better understanding of the aspects of the invention as well as embodiments thereof, reference should be made to the description of embodiments below, in conjunction with the following drawings in which like reference numerals refer to corresponding parts throughout the figures. </p><p id="p0010" num="0010"> [0006] FIG. 1 is a high-level block diagram illustrating power management of a pool of computing devices that are logically grouped to provide a common set of functionality, according to certain embodiments of the invention. </p><p id="p0011" num="0011"> [0007] FIG. 2 is a block diagram showing some of the high-level steps for obtaining correlation information associated with the servers in the server pool, according to certain embodiments of the invention. </p><p id="p0012" num="0012"> [0008] FIG. 3 is a block diagram that illustrates a power management method, according to certain embodiments of the invention. </p><p id="p0013" num="0013"> [0009] FIG. 4 illustrates the class diagram of the central classes used for implementing the power manager, according to certain embodiments of the invention. </p><p id="p0014" num="0014"> [0010] FIG. 5 illustrates the class diagram for the Loadlnformation class hierarchy, according to certain embodiments of the invention. </p><p id="p0015" num="0015"> [0011] FIG. 6 illustrates the class diagram for the UtilizatonPredictor class hierarchy, according to certain embodiments of the invention. </p><p id="p0016" num="0016"> [0012] FIG. 7 illustrates the class diagram for the</p><p id="p0017" num="0017">ResourcesMeasureMethod class hierarchy, according to certain embodiments of the invention. </p><p id="p0018" num="0018"> [0013] FIG. 8 illustrates the class diagram for the LoadBalancer class hierarchy, according to certain embodiments of the invention. 
<!-- EPO <DP n="4"/>-->
 DESCRIPTION OF EMBODIMENTS </p><p id="p0019" num="0019"> [00141 Methods, systems and other aspects of the invention are described. Reference will be made to certain embodiments of the invention, examples of which are illustrated in the accompanying drawings. While the invention will be described in conjunction with the embodiments, it will be understood that it is not intended to limit the invention to these particular embodiments alone. On the contrary, the invention is intended to cover alternatives, modifications and equivalents that are within the spirit and scope of the invention. The specification and drawings are, accordingly, to be regarded in an illustrative rather than a restrictive sense. </p><p id="p0020" num="0020"> [0015] Moreover, in the following description, numerous specific, details are set forth to provide a thorough understanding of the present invention. However, it will be apparent to one of ordinary skill in the art that the invention may be practiced without these particular details. In other instances, methods, procedures, components, and networks that are well known to those of ordinary skill in the art are not described in detail to avoid obscuring aspects of the present invention. </p><p id="p0021" num="0021"> [0016] The embodiments described herein are in reference to servers in data centers. However, the embodiments apply to any pool of computing devices that are logically grouped to provide a common set of functionality. </p><p id="p0022" num="0022"> [0017] According to certain embodiments, the problem associated with power consumption in data centers can be effectively managed by turning off or turning on servers in response to the load experienced by the data center. Servers are turned on when the load increases and turned off when load decreases. Load can be defined by the number and/or size of requests that are being received by the server pool per unit time interval, for example. </p><p id="p0023" num="0023"> [0018] According to certain embodiments, a new server or device is characterized to understand how the resource utilization changes as the number of requests being serviced changes by the server/device. The characterization, using statistical analysis techniques, can be used to predict the utilization of the server/device for a given load. The correlation function 
<!-- EPO <DP n="5"/>-->
 associated with the characterization is stored in a database, for example. A power management server can retrieve the correlation function during initialization. The power management server takes decisions at regular time intervals to shutdown a server/device, power-on a server/device or maintain status quo in the pool of servers/devices based on the predicted utilization. </p><p id="p0024" num="0024"> [0019] According to certain embodiments, a non-intrusive mechanism is used to power down servers or devices. In contrast, existing power management solutions typically require that the data center operators install software, firmware or hardware on the servers/devices for power management. Such power management decisions are taken by a centralized administrative software component which communicates with the software installed in the individual servers, which then initiate the action. The custom software typically sends information that the centralized entity can use for decision making. Such an approach is intrusive unlike the non-intrusive approach as described in the embodiments herein. The embodiments described herein do not require any such additional software, firmware or hardware installation on each server/device in the data center. </p><p id="p0025" num="0025"> [0020] According to certain embodiments, a centralized entity takes power management decisions and initiates them on the servers/devices without the need for custom software, hardware or firmware. The centralized entity uses information exported by the OS only of the servers/devices. Such an approach requires little or no downtime for installation, does not require custom software to be installed, or require any major system reconfiguration. </p><p id="p0026" num="0026"> [0021] Further, unlike vendor specific solutions, the embodiments are not restricted to hardware vendors (processor or OEM) or to operating systems. </p><p id="p0027" num="0027">[0022] FIG. 1 is a high-level block diagram illustrating power management of a pool of computing devices that are logically grouped to provide a common set of functionality, such as servers in a data center, according to certain embodiments of the invention. In FIG. 1 , system 100 
<!-- EPO <DP n="6"/>-->
 includes an application delivery controller 104 that receives HTTP requests 102 from client devices, and a computer 106 that executes the power manager. Application delivery controller 104 sends the HTTP requests 102 to the server pool 108 and also receives the responses to the HTTP requests from server pool 108. The power manager implemented in computer 106 receives information from application delivery controller 104 and information from the server pool 108 to make power management decisions. The power manager may be implemented on multiple computers as in a distributed computer system, according to certain embodiments. Application delivery controller 104 may be a commercial off-the-shelf load balancer, according to certain embodiments. Similarly, computer 106 can be an off-the-shelf computer on which the power management solution is installed and executes. Server pool 108 or server cluster comprises server machines or nodes that service requests from client devices via application delivery controller 104. An application delivery controller is hardware or software that manages requests received from client devices and distributes such requests to the computing devices in the server pool. A non-limiting example of an application delivery controller is a load balancer. </p><p id="p0028" num="0028"> [0023] HTTP requests initiated by client devices reach application delivery controller 104 which redirects the requests to an appropriate server in the server pool 108. According to certain embodiments, application delivery controller 104 is configured to use a round robin policy. Consequently, server nodes in server pool 108 service a comparable number of requests. The power manager interacts with application delivery controller 104 to obtain information including but not limited to: </p><p id="p0029" num="0029"> • Information on the number of requests being executed by each server in server pool 108, </p><p id="p0030" num="0030"> • the average response time by each server in server pool 108, and</p><p id="p0031" num="0031">• information on server state. </p><p id="p0032" num="0032"> [0024] The power manager does not service any requests from client devices. The power manager's job is to make power management decisions 
<!-- EPO <DP n="7"/>-->
 and initiate such decisions, while maintaining consistency between actual server state and information at application delivery controller 104. </p><p id="p0033" num="0033"> [0025] According to one aspect of certain embodiments, each server of at least a subset of servers in the server pool is characterized for the utilization behaviour of that particular server. Characterization involves measuring on the server to be characterized, the utilization of various resources as the number of requests being executed by the server varies. Such measurement information is utilized to draw correlations between the number of requests being serviced by the server that is being characterized and its utilization of resources, according to certain embodiments. The power manager (computer 106) can remotely query the servers in server pool 108 to obtain resource utilization information using standardized protocols like Simple Network Management Protocol (SNMP) for any OS or Windows Management Instrumentation (WMI) for MS Windows. The correlation drawn can be used to predict the utilization of a given server for any given number of HTTP requests being serviced per minute, according to certain embodiments. According to certain embodiments, the characterization is performed using the same application that the server to be characterized is expected to execute in production because a server can be expected to show differences in behaviour with different application types. </p><p id="p0034" num="0034"> [0026) According to certain embodiments, correlation information is obtained using well established statistical analysis techniques such as linear regression. The statistical analysis can be performed using any commercially/freely available statistical analysis software such as R statistical software. According to certain embodiments, the correlation information is an expression that correlates the number of requests to the CPU utilization. According to some embodiments, this correlation information is XML serialized and inserted into a database along with other information that the power management solution requires. XML serialization is the process of converting a binary object in memory into an XML representation that can then be stored on disk (files or database). For purposes of simplicity, the statistical analysis is done in the background and the results are stored in the 
<!-- EPO <DP n="8"/>-->
 database. The process of deriving correlations can be made real time, according to certain embodiments. </p><p id="p0035" num="0035"> [0027] FIG. 2 is a block diagram showing some of the high-level steps for obtaining correlation information associated with the servers in the server pool, according to certain embodiments of the invention. At block 202, a fixed workload is executed against a given server that is to be characterized. At block 204, the information on resource utilization, workload and other related information is logged for analysis. At block 206, statistical analysis is performed on the information to obtain correlation information. At block 208, the correlation information for the given server is stored in the database. If the database already contains correlation information for the particular server, then the correlation information is updated. At block 210, the power manager retrieves correlation information for making power management decisions. </p><p id="p0036" num="0036"> [0028] The power manager runs at regular intervals. For example, the power manager can run every 10 seconds. At each iteration of the power manager solution, a decision is taken as to whether a server needs to be powered on or powered off. The power manager also identifies which server must be powered on or off based on a server selection policy. The server selection policy is described herein. </p><p id="p0037" num="0037"> 10029] FIG. 3 is a block diagram that illustrates the power management method, according to certain embodiments of the invention. After initialization at block 302, correlation data is retrieved from the database at block 304. At block 308, on each iteration, the power manager checks if all the servers in the server pool are above a pre-configured utilization threshold called the overload threshold, according to certain embodiments. According to certain other embodiments, the utilization threshold is determined dynamically rather than being pre-configured. If all the servers are above the utilization threshold, then at block 310, the power manager determines if all the servers in the server pool are powered on. If all the servers are powered on, then at block 306, the status quo of the server pool is maintained. If not all servers in the server pool are powered on, then at block 314, the power manager identifies which server is to be powered on, if more than one server is not powered on 
<!-- EPO <DP n="9"/>-->
 in the server pool. At block 316, the power manager initiates power-on process for the selected server. At block 318, the power manager waits for the resume duration. At block 320, the power manager updates the state information for the selected server that was just powered on. At block 322, the server that was just powered on is marked on the application delivery controller as available for servicing requests. </p><p id="p0038" num="0038"> [0030] If at block 308, it is determined that not all the servers in the server pool are below the utilization threshold, then at block 312 a check is made to identify if any server in the server pool can be powered off safely. If none of the servers in the server pool can be powered off safely, then the status quo is maintained at block 334. </p><p id="p0039" num="0039"> [0031] If there are servers in the server pool can be powered off, then at block 324, the power manager identifies a server to be powered off. The server identified to be powered off is referred to as a candidate server. A decision to power off is taken only if the load on the candidate server can be migrated to the remaining power-on servers in the server pool without causing such remaining power-on servers to cross an overload threshold associated with a given server. At block 326, the server identified to be powered off is marked as unavailable on the application delivery controller. At block 328, the state information of the server to be powered off is updated. At block 330, the power manager waits for the number of requests sent to the server to be powered off drops to zero. At block 332, the power manager initiates the power-off process for the server to be powered off. </p><p id="p0040" num="0040"> [0032] Powering servers on or off can be done using existing mechanisms supported by operating systems of the servers. For example, Windows Management Instrumentation (WMI) on Microsoft Windows or ssh based remote command execution on Linux/Solaris can be used for powering servers on or off. </p><p id="p0041" num="0041"> [0033] According to certain embodiments, a staggered suspend and boot up process is used at a given point in time. In other words, exactly one server is suspending or resuming at a given time. The staggered suspend ensures that there is capacity in the server pool to handle any spikes in the 
<!-- EPO <DP n="10"/>-->
 load and thus is a conservative approach. Staggered resume ensures that the load on the power supply for the server does not go high because computers typically draw higher power during the boot up phase. </p><p id="p0042" num="0042"> [0034] According to certain embodiments, the power management method can include the following features: </p><p id="p0043" num="0043">• Predicting the demand: Historical data can be analysed to predict the demand that the server pool will experience in the next time interval. The prediction can augment the decisions taken by the power manager. Existing statistical methods like Auto Regressive Moving Average can be used for the time based trend analysis and prediction. </p><p id="p0044" num="0044">• Predict the number of servers or devices required to support a given workload. </p><p id="p0045" num="0045">• Chart the response time and performance of a server or a device under a given workload. </p><p id="p0046" num="0046">• Moving server nodes across pools: The power management method described herein can be extended to multiple pools using a global power management scheme. In such a global power management scheme, it is possible to move servers across pools to serve the needs of various pools. Depending on the demand, servers can be either moved across pools or turned on/off. </p><p id="p0047" num="0047"> [0035] The Advanced Configuration and Power Interface (ACPI) specification defines the following server states, according to certain embodiments. Other suitable standards for defining server states can also be used. The embodiments are not restricted to the ACPI standard. </p><p id="p0048" num="0048"> Tabic 1: ACPI Server States </p><p id="p0049" num="0049"><img id="imgf000010_0001" he="27" wi="139" file="imgf000010_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="yes"/><!-- EPO <DP n="11"/>-->
 S 3 Gl Suspended to RAM - Operating system context stored in RAM and most components powered down. Typically RAM and NIC are active in this state. </p><p id="p0050" num="0050"> S 4 Gl Suspend to Disk - Operating system context is written to disk and server is powered down.</p><p id="p0051" num="0051">S 5 G2 Soft off - Server is powered down, no OS context is retained. </p><p id="p0052" num="0052"> S 5 G3 Mechanical off - Server is powered down and main power supply is cut off. </p><p id="p0053" num="0053"> According to certain embodiments, servers are switched between SO and S5. </p><p id="p0054" num="0054">[0036] If all the servers in the server pool have similar properties like operating frequency, RAM, disk space etc, the choice of server to shutdown/resume become trivial because any server can be chosen. However, if the server pools are heterogeneous pools, where servers differ in their properties, then a server selection policy is needed in order to select an appropriate server to power on or off. According to certain embodiments, policies that can be used to select servers if multiple servers are available for shutdown/resume are described below: </p><p id="p0055" num="0055"> [0037] Polices for server power off include but are not limited to: </p><p id="p0056" num="0056"> 1. Lowest Frequency: Power off the server that operates at the lowest frequency. </p><p id="p0057" num="0057"> 2. Highest power: Power off the server that consumes the highest power. </p><p id="p0058" num="0058"> 3. Max post-utilization: Power off the server that will result in other servers having high utilization. </p><p id="p0059" num="0059"> 4. Types of applications running on the system (application </p><p id="p0060" num="0060"> capabilities). </p><p id="p0061" num="0061"> [0038] The policies for server power on include but are not limited to: </p><p id="p0062" num="0062"> 1. Lowest power: Power on the server that consumes lowest power. 
<!-- EPO <DP n="12"/>-->
 2. Highest frequency: Power on the server that runs at the highest frequency. </p><p id="p0063" num="0063"> 3. Shortest Resume Time: Power on the server that takes the shortest time to boot up. </p><p id="p0064" num="0064"> [0039] As a non-limiting example, suspend policy 3 (max post- utilization) and resume policy 2 (highest frequency) can be used, according to certain embodiments. It is possible to support any combination of policies, but the power management mechanism must ideally be configured to use the ones that provide high power savings without significant loss in performance. Further, different combinations of suspend and resume policies will show different power/performance characteristics. </p><p id="p0065" num="0065"> [0040] At any point in time, at least one server will be active in the pool. The reasoning behind having at least one server active is to have available computational capacity to handle requests while other servers are resuming. </p><p id="p0066" num="0066"> [0041] As a non-limiting example, turning servers off is achieved by issuing a remote shutdown command using WMI (as our cluster is currently MS Windows based). Remote command execution requires that appropriate services are enabled on the server and appropriate ports are kept on in the firewall. Alternate techniques can be used for Linux and Solaris. Servers are turned on using Wake-On-LAN (WoL), an industry standard technique to resume computers that are currently suspended. A WoL packet is a specially crafted network packet which contains a WoL header and the MAC address of the target server repeated 16 times' WoL packet definition is standardized. WoL must be supported by the network interface card (NIC) and also enabled by the operating system driver. Modern NICs typically support WoL. </p><p id="p0067" num="0067"> [0042] Such a non-intrusiveness approach does not require any additional software components to be installed on the individual servers in the server pool for the power manager to work. At most, it requires certain standard operating system services which might be turned off by default (like ssh, snmp) to be turned on. 
<!-- EPO <DP n="13"/>-->
 [0043] FIG. 4 illustrates the class diagram of the central classes used for implementing the power manager, according to certain embodiments. FIG. 4 shows ServerMachine class 402, ServerLoad Information class 404, Resource class 406, ResourceMeasureMethod class 408, ImmutableServerProperties class 410, UtilizationPredictor class 412, NetworkResource class 414, DiskResource class 416, and CPUResource class 418. The central data structure to the application is a ServerMachine class 402 that holds information about a server in the server cluster. The ServerMachine class contains the immutable server properties (like MAC address, maximum operating frequency, power consumption etc) and dynamically created objects for measuring resource utilization (see FIG. 7), predicting the utilization (FIG. 6), storing load information (FIG. 5) etc. A server contains resource objects - CPU, Disk, network, and memory, and is a resource in itself. The utilization predictor for each server is read from on disk storage (a database, for example) as an XML serialized stream and then deserialized to get the object. </p><p id="p0068" num="0068"> [0044] Some of the hierarchies of other classes used in the implementation of the power manager are described herein with reference to Figs. 5-8. </p><p id="p0069" num="0069"> [0045] FIG. 5 illustrates the class diagram for the Load Information class hierarchy, according to certain embodiments. Loadlnformation class defines classes that are used to store information on connections/requests queried at regular intervals from the load balancer or server. FIG. 5 shows that Loadlnformation class 502 includes LocalHTTPLoadlnfo class 504, PoolLoadlnformation class 506, and ServerLoadlnformation class 508. ServerLoadlnformation class 508 includes VirtualServerLoadlnformation class. </p><p id="p0070" num="0070"> [0046] FIG. 6 illustrates the class diagram for the UtilizationPredictor class hierarchy, according to certain embodiments. UtilizationPredictor class 602 includes Linear egressionBased class 604. 
<!-- EPO <DP n="14"/>-->
 [0047] FIG. 7 illustrates the class diagram for the</p><p id="p0071" num="0071">ResourcesMeasureMethod class hierarchy, according to certain embodiments. ResourcesMeasureMethod class 702 includes WMIAdaptor class 704 and SNMPAdaptor class 706. </p><p id="p0072" num="0072"> [0048] FIG. 8 illustrates the class diagram for the LoadBalancer class hierarchy, according to certain embodiments. LoadBalancer class 802 includes F5Adaptor class 804. The load balancer class hierarchy is used to define classes that can be used to query and control the load balancer. </p><p id="p0073" num="0073"> [0049] According to certain embodiments, a simple database with a single table is used to store information about individual servers. </p><p id="p0074" num="0074"> [0050] The characterization phase requires utilization information to be gathered from servers for later analysis. According to certain embodiments, this information is stored in a database. The utilization information of each resource is stored in a separate file with the format shown in Table 2 </p><p id="p0075" num="0075"> Utilization Information, as non-limiting example. </p><p id="p0076" num="0076"> Table 2: Utilization information 
<img id="imgf000014_0001" he="15" wi="139" file="imgf000014_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/>
 </p><p id="p0077" num="0077"> [0051] The weighted moving average is used to help smoothing any sharp fluctuations in the measured utilization. An example for CPU utilization on a dual core machine, measured using WMI is given below. </p><p id="p0078" num="0078"><img id="imgf000014_0002" he="22" wi="139" file="imgf000014_0002.tif" img-format="tif" img-content="table" orientation="portrait" inline="yes"/></p><p id="p0079" num="0079">[0052] The level of detail - per core utilization - is not provided by SNMP implementations. However, overall system utilization is available and the power manager implementation uses the overall utilization for analysis and decision making. 
</p></description><claims mxw-id="PCLM44851339" ref-ucid="WO-2012118934-A1" lang="EN" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="15"/>--><claim-text> We Claim: </claim-text><claim-text> 1. A method of power management, the method comprising: </claim-text><claim-text> predicting resource utilization associated with each device from at least a subset of devices without installing customized software, firmware or hardware on the device for predicting the resource utilization; and </claim-text><claim-text> selecting a candidate device from the subset of devices for powering on or off based on the predicted resource utilization and a set of power utilization criteria. </claim-text><claim-text>2. The method of Claim 1 , wherein predicting resource utilization further comprises: </claim-text><claim-text> measuring resource utilization on the device for a given number of </claim-text><claim-text> requests executed by the device; and </claim-text><claim-text> obtaining correlation information between the measured resource </claim-text><claim-text> utilization and the number of requests executed by the device. </claim-text><claim-text>3. The method of Claim 1 , further comprises: </claim-text><claim-text> determining an overload threshold for the subset of devices; and determining if all power-on devices in the subset of devices are above the overload threshold; </claim-text><claim-text> selecting a device from the subset of devices to power on if all power-on devices in the subset of are above the overload threshold; 
<!-- EPO <DP n="16"/>-->
 selecting a device from the subset of devices to power off if all power-on devices in the subset of are below the overload threshold. </claim-text><claim-text>4. The method of Claim 3, wherein determining an overload threshold can be determined dynamically or can be pre-defined. </claim-text><claim-text>5. The method of Claim 3, wherein selecting a device to power off further comprises: </claim-text><claim-text> identifying a device, if any, to power off based on the set of power </claim-text><claim-text> utilization criteria; </claim-text><claim-text> marking the identified device as unavailable; </claim-text><claim-text> updating state information for the identified device; and </claim-text><claim-text> initiating shut down for the identified device. </claim-text><claim-text>6. The method of Claim 3, wherein selecting a device to power on further comprises: </claim-text><claim-text> identifying a device, if any, to power on based on the set of power </claim-text><claim-text> utilization criteria; </claim-text><claim-text> updating state information for the identified device; and </claim-text><claim-text> initiating power-on for the identified device. </claim-text><claim-text>7. The method of Claim 1 , wherein the set of power utilization criteria </claim-text><claim-text> comprises: </claim-text><claim-text> lowest operating frequency; 
<!-- EPO <DP n="17"/>-->
 highest power consumption; </claim-text><claim-text> maximum post-utilization; </claim-text><claim-text> lowest power consumption; </claim-text><claim-text> highest operating frequency; </claim-text><claim-text> shortest resume time; and </claim-text><claim-text> application capabilities. </claim-text><claim-text>8. The method of Claim 1 , wherein the set of power utilization criteria </claim-text><claim-text> provides high power savings without significant loss in performance. </claim-text><claim-text>9. The method of Claim 1 , wherein the subset of devices are logically </claim-text><claim-text> grouped to provide a common set of functionality. </claim-text><claim-text>10. The method of Claim 1 , further comprising: </claim-text><claim-text> predicting usage demand associated with the subset of devices; and using the predicted demand to augment selection of a candidate device from the subset of devices for powering on or off. </claim-text><claim-text>11. The method of Claim 10, further comprising analyzing historical usage data associated with the subset of devices. </claim-text><claim-text>12. The method of Claim 10, further comprising moving devices from the subset of devices to one or more other subsets of devices to optimize the power management across the subsets of devices. 
<!-- EPO <DP n="18"/>-->
</claim-text><claim-text>13. The method of Claim 3, wherein determining if all power-on devices in the subset of devices are above the overload threshold is performed at periodic intervals. </claim-text><claim-text>14. A system for power management of a subset of devices, the system </claim-text><claim-text> comprising: </claim-text><claim-text> at least one application delivery controller for receiving requests from client devices; </claim-text><claim-text> at least one power management machine for predicting resource </claim-text><claim-text> utilization associated with each device from the subset of devices, wherein the subset of devices do not include customized software, firmware or hardware for predicting the resource utilization. </claim-text><claim-text>15. The system of Claim 14, wherein the least one power management </claim-text><claim-text> machine interacts with the application delivery controller to obtain information on the total number of requests received by the application controller and the number of requests executed by each device in the subset of devices. 6. The system of Claim 14, wherein the least one power management </claim-text><claim-text> machine remotely queries each device for information on the number of requests and resource utilization information in the subset of devices. 
<!-- EPO <DP n="19"/>-->
</claim-text><claim-text>17. The system of Claim 14, further comprising at least one database server for storing correlation information that correlates the number of requests executed by each device and the resource utilization information associated with the execution of the requests for each device. </claim-text><claim-text>18. The system of Claim 14, wherein the at least one power management machine is used for: </claim-text><claim-text> determining an overload threshold for the subset of devices; and determining if all power-on devices in the subset of devices are above the overload threshold; </claim-text><claim-text> selecting a device from the subset of devices to power on if all power-on devices in the subset of are above the overload threshold; </claim-text><claim-text> selecting a device from the subset of devices to power off if all power-on devices in the subset of are below the overload threshold. </claim-text><claim-text>19. The system of Claim 14, wherein the at least one power management machine uses a set of power utilization criteria for selecting a device from the subset of devices to power on or off, the power utilization criteria: lowest operating frequency; </claim-text><claim-text> highest power consumption; </claim-text><claim-text> maximum post-utilization; </claim-text><claim-text> lowest power consumption; </claim-text><claim-text> highest operating frequency; 
<!-- EPO <DP n="20"/>-->
 shortest resume time; and application capabilities. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
