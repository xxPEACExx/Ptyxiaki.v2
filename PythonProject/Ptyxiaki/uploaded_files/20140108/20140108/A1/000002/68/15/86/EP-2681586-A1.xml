<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2681586-A1" country="EP" doc-number="2681586" kind="A1" date="20140108" family-id="46753229" file-reference-id="315082" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146586208" ucid="EP-2681586-A1"><document-id><country>EP</country><doc-number>2681586</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12719819-A" is-representative="NO"><document-id mxw-id="PAPP154848400" load-source="docdb" format="epo"><country>EP</country><doc-number>12719819</doc-number><kind>A</kind><date>20120227</date><lang>EN</lang></document-id><document-id mxw-id="PAPP199048058" load-source="docdb" format="original"><country>EP</country><doc-number>12719819.0</doc-number><date>20120227</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553107" ucid="US-201113198122-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113198122</doc-number><kind>A</kind><date>20110804</date></document-id></priority-claim><priority-claim mxw-id="PPC140547637" ucid="US-201161448950-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161448950</doc-number><kind>P</kind><date>20110303</date></document-id></priority-claim><priority-claim mxw-id="PPC140555482" ucid="US-2012026771-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026771</doc-number><kind>W</kind><date>20120227</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2091568575" load-source="docdb">G01S  15/02        20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091568652" load-source="docdb">G01S  13/46        20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091569519" load-source="docdb">G01S  15/42        20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091571293" load-source="docdb">G01G  15/02        20060101AFI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091571316" load-source="docdb">G01S   3/80        20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091575195" load-source="docdb">G01S   7/521       20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091575934" load-source="docdb">G01S  15/46        20060101ALI20140624BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2091576333" load-source="docdb">G01S  15/87        20060101ALI20140624BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1962105643" load-source="docdb" scheme="CPC">G01S   3/8006      20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962110168" load-source="docdb" scheme="CPC">G01S2015/465       20130101 LA20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962112521" load-source="docdb" scheme="CPC">G01S  15/025       20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962113043" load-source="docdb" scheme="CPC">G01S2013/468       20130101 LA20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962113460" load-source="docdb" scheme="CPC">G01S  15/42        20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962114327" load-source="docdb" scheme="CPC">G01S   7/521       20130101 LI20160310BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1962114647" load-source="docdb" scheme="CPC">G01S  15/876       20130101 FI20160310BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132363257" lang="DE" load-source="patent-office">SYSTEME, VERFAHREN, VORRICHTUNG UND COMPUTERLESBARE MEDIEN ZUR QUELLENLOKALISIERUNG MIT HÖRBAREM SCHALL UND ULTRASCHALL</invention-title><invention-title mxw-id="PT132363258" lang="EN" load-source="patent-office">SYSTEMS, METHODS, APPARATUS, AND COMPUTER-READABLE MEDIA FOR SOURCE LOCALIZATION USING AUDIBLE SOUND AND ULTRASOUND</invention-title><invention-title mxw-id="PT132363259" lang="FR" load-source="patent-office">SYSTÈMES, PROCÉDÉS, APPAREILS ET SUPPORTS LISIBLES PAR ORDINATEUR POUR UNE LOCALISATION DE SOURCE À L'AIDE DE SON AUDIBLE ET D'ULTRASONS</invention-title><citations><non-patent-citations><nplcit><text>See references of WO 2012161825A1</text><sources><source mxw-id="PNPL67455848" load-source="docdb" name="SEA"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919508042" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>QUALCOMM INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR919545047" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>QUALCOMM INCORPORATED</last-name></addressbook></applicant><applicant mxw-id="PPAR919011156" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Qualcomm Incorporated</last-name><iid>101238668</iid><address><street>International IP Administration 5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919534352" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>VISSER ERIK</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919506919" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>VISSER, ERIK</last-name></addressbook></inventor><inventor mxw-id="PPAR919012093" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>VISSER, ERIK</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919517561" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MOMEYER BRIAN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR919539507" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MOMEYER, BRIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR919009541" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MOMEYER, BRIAN</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919015297" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Richardson, Julie Kate</last-name><iid>100046251</iid><address><street>Reddie &amp; Grose LLP 16 Theobalds Road</street><city>London WC1X 8PL</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026771-W"><document-id><country>US</country><doc-number>2012026771</doc-number><kind>W</kind><date>20120227</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012161825-A1"><document-id><country>WO</country><doc-number>2012161825</doc-number><kind>A1</kind><date>20121129</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549913787" load-source="docdb">AL</country><country mxw-id="DS549758286" load-source="docdb">AT</country><country mxw-id="DS549913788" load-source="docdb">BE</country><country mxw-id="DS549847179" load-source="docdb">BG</country><country mxw-id="DS549835299" load-source="docdb">CH</country><country mxw-id="DS549757688" load-source="docdb">CY</country><country mxw-id="DS549758287" load-source="docdb">CZ</country><country mxw-id="DS549913789" load-source="docdb">DE</country><country mxw-id="DS549757693" load-source="docdb">DK</country><country mxw-id="DS549757694" load-source="docdb">EE</country><country mxw-id="DS549835581" load-source="docdb">ES</country><country mxw-id="DS549847180" load-source="docdb">FI</country><country mxw-id="DS549847181" load-source="docdb">FR</country><country mxw-id="DS549913790" load-source="docdb">GB</country><country mxw-id="DS549757695" load-source="docdb">GR</country><country mxw-id="DS549913791" load-source="docdb">HR</country><country mxw-id="DS549758288" load-source="docdb">HU</country><country mxw-id="DS549835300" load-source="docdb">IE</country><country mxw-id="DS549757696" load-source="docdb">IS</country><country mxw-id="DS549847202" load-source="docdb">IT</country><country mxw-id="DS549757701" load-source="docdb">LI</country><country mxw-id="DS549766748" load-source="docdb">LT</country><country mxw-id="DS549758293" load-source="docdb">LU</country><country mxw-id="DS549766757" load-source="docdb">LV</country><country mxw-id="DS549766758" load-source="docdb">MC</country><country mxw-id="DS549834356" load-source="docdb">MK</country><country mxw-id="DS549834357" load-source="docdb">MT</country><country mxw-id="DS549847203" load-source="docdb">NL</country><country mxw-id="DS549835586" load-source="docdb">NO</country><country mxw-id="DS549835301" load-source="docdb">PL</country><country mxw-id="DS549834362" load-source="docdb">PT</country><country mxw-id="DS549847204" load-source="docdb">RO</country><country mxw-id="DS549834363" load-source="docdb">RS</country><country mxw-id="DS549835306" load-source="docdb">SE</country><country mxw-id="DS549834364" load-source="docdb">SI</country><country mxw-id="DS549835587" load-source="docdb">SK</country><country mxw-id="DS549835307" load-source="docdb">SM</country><country mxw-id="DS549766759" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA102687354" ref-ucid="WO-2012161825-A1" lang="EN" load-source="patent-office"><p num="0000">A method of signal processing includes calculating a range based on information from a reflected ultrasonic signal. Based on the calculated range, one among a plurality of direction-of-arrival (DOA) estimation operations is selected. The method also includes performing the selected operation to calculate an estimated direction of arrival (DOA) of an audio-frequency component of a multichannel signal. Examples of DOA estimation operations include operations based on phase differences between channels of the multichannel signal and operations based on a difference in gain between signals that are based on channels of the multichannel signal.</p></abstract><abstract mxw-id="PA102882505" ref-ucid="WO-2012161825-A1" lang="EN" source="national office" load-source="docdb"><p>A method of signal processing includes calculating a range based on information from a reflected ultrasonic signal. Based on the calculated range, one among a plurality of direction-of-arrival (DOA) estimation operations is selected. The method also includes performing the selected operation to calculate an estimated direction of arrival (DOA) of an audio-frequency component of a multichannel signal. Examples of DOA estimation operations include operations based on phase differences between channels of the multichannel signal and operations based on a difference in gain between signals that are based on channels of the multichannel signal.</p></abstract><abstract mxw-id="PA102687355" ref-ucid="WO-2012161825-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention porte sur un procédé de traitement de signal comprenant le calcul d'une portée sur la base d'informations provenant d'un signal ultrasonore réfléchi. Sur la base de la portée calculée, l'une parmi une pluralité d'opérations d'estimation de directions d'arrivée (DOA) est sélectionnée. Le procédé comprend également la réalisation de l'opération sélectionnée pour calculer une direction d'arrivée (DOA) estimée d'une composante de fréquence audio d'un signal multicanal. Des exemples d'opérations d'estimation de DOA comprennent des opérations basées sur des déphasages entre les canaux du signal multicanal et des opérations basées sur une différence de gain entre des signaux qui sont basés sur des canaux du signal multicanal.</p></abstract><abstract mxw-id="PA102882506" ref-ucid="WO-2012161825-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention porte sur un procédé de traitement de signal comprenant le calcul d'une portée sur la base d'informations provenant d'un signal ultrasonore réfléchi. Sur la base de la portée calculée, l'une parmi une pluralité d'opérations d'estimation de directions d'arrivée (DOA) est sélectionnée. Le procédé comprend également la réalisation de l'opération sélectionnée pour calculer une direction d'arrivée (DOA) estimée d'une composante de fréquence audio d'un signal multicanal. Des exemples d'opérations d'estimation de DOA comprennent des opérations basées sur des déphasages entre les canaux du signal multicanal et des opérations basées sur une différence de gain entre des signaux qui sont basés sur des canaux du signal multicanal.</p></abstract><description mxw-id="PDES52885110" ref-ucid="WO-2012161825-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> SYSTEMS, METHODS, APPARATUS, AND COMPUTER-READABLE MEDIA FOR SOURCE LOCALIZATION USING AUDIBLE SOUND AND</p><p id="p0002" num="0002">ULTRASOUND </p><p id="p0003" num="0003">Claim of Priority under 35 U.S.C. §119 </p><p id="p0004" num="0004"> [0001] The present Application for Patent claims priority to Provisional Application No. 61/448,950 entitled "ROBUST MULTIMICROPHONE TRACKING SYSTEM USING AUDIBLE SOUND AND ULTRASOUND," filed Mar. 3, 2011, and assigned to the assignee hereof. </p><p id="p0005" num="0005">BACKGROUND </p><p id="p0006" num="0006"> Field </p><p id="p0007" num="0007"> [0002] This disclosure relates to signal processing. Background </p><p id="p0008" num="0008"> [0003] For applications in which voice recording (e.g., for communications) occurs in a noisy environment, it may be desirable to separate a desired speech signal from background noise. Noise may be defined as the combination of all signals interfering with or otherwise degrading the desired signal. Background noise may include numerous noise signals generated within the acoustic environment, such as background conversations of other people, as well as reflections and reverberation generated from the desired signal and/or any of the other signals. Unless the desired speech signal is separated from the background noise, it may be difficult to make reliable and efficient use of it. </p><p id="p0009" num="0009"> [0004] The acoustic noise encountered in a typical use environment may include a variety of different components, such as music, sounds from interfering sources (e.g., a TV set, a radio, a competing talker), babble noise, street noise, and/or airport noise. As such noise is typically nonstationary and may have an average spectrum is close to that of the user' s own voice, it may be hard to model using traditional single-microphone or fixed beamforming type methods. Therefore it may be desirable to use multiple- microphone-based signal processing techniques, such as spatially selective processing, to support separation of a speech component in noisy environments. </p><p id="p0010" num="0010">[0005] In some applications for voice recording, the location of the user's mouth relative to the microphone may change during use. For example, applications for voice 
<!-- EPO <DP n="3"/>-->
 communications are evolving beyond traditional telephony to include scenarios in which the user's mouth is located at some distance away from the audio sensing device during use. Examples of such scenarios include Voice over IP (VoIP) telephony using microphones (and possibly a webcam) embedded in a laptop or tablet computer. In such cases, movement of the user's mouth relative to the device may significantly affect the performance of a spatially selective processing operation. </p><p id="p0011" num="0011">SUMMARY </p><p id="p0012" num="0012"> [0006] A method of signal processing according to a general configuration includes estimating a range of a sound-emitting object, based on information from a reflection of an ultrasonic signal. This method includes selecting one among a plurality of direction- of-arrival estimation operations, based on the estimated first range, and performing the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. Computer-readable storage media having tangible features that cause a machine reading the features to perform such a method are also disclosed. </p><p id="p0013" num="0013"> [0007] An apparatus for signal processing according to another general configuration includes means for estimating a range of a sound-emitting object, based on information from a reflection of an ultrasonic signal; means for selecting one among a plurality of direction-of-arrival estimation operations, based on the estimated first range; and means for performing the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. </p><p id="p0014" num="0014">[0008] An apparatus for signal processing according to another general configuration includes a range estimator configured to estimate a range of a sound-emitting object, based on information from a reflection of an ultrasonic signal; a comparator configured to select one among a plurality of direction-of-arrival estimation operations, based on the estimated first range; and a direction calculator configured to perform the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. 
<!-- EPO <DP n="4"/>-->
 BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0015" num="0015">[0009] FIG. 1A shows a block diagram of a multi-microphone audio sensing device D10. </p><p id="p0016" num="0016"> [0010] FIG. IB shows an example of an application of device D10. </p><p id="p0017" num="0017"> [0011] FIG. 1C shows an example in which a direction of arrival and a range are associated with a desired source AS1. </p><p id="p0018" num="0018"> [0012] FIG. ID shows a block diagram of an implementation D20 of device D10. </p><p id="p0019" num="0019">[0013] FIG. 2A shows an example of an application of a four-microphone implementation D12 of device D10. </p><p id="p0020" num="0020"> [0014] FIG. 2B shows a flowchart for a method M100 according to a general configuration. </p><p id="p0021" num="0021"> [0015] FIGS. 3 A and 3B show examples of gain-difference-based DOA estimation methods. </p><p id="p0022" num="0022"> [0016] FIG. 3C shows an example of a beam pattern for an asymmetrical array. </p><p id="p0023" num="0023">[0017] FIGS. 4 and 5 show examples of beamformer beam patterns. </p><p id="p0024" num="0024">[0018] FIGS. 6 A and 6B show examples of fixed filters arranged to generate beams based on a multichannel signal. </p><p id="p0025" num="0025"> [0019] FIG. 7 shows a top view of an application of a three-microphone implementation D22 of device D20. </p><p id="p0026" num="0026"> [0020] FIGS. 8A-8D show individual examples of directional masking functions. </p><p id="p0027" num="0027">[0021] FIG. 9 shows examples of two sets of three directional masking functions. </p><p id="p0028" num="0028">[0022] FIG. 10 shows results of applying a set of three directional masking functions as shown in FIG. 9 to the same multichannel audio signal. </p><p id="p0029" num="0029"> [0023] FIGS. 11-14 show examples of a sector-based DOA estimation method used with a four-microphone implementation D24 of device D20. </p><p id="p0030" num="0030"> [0024] FIGS. 15A-15D illustrate an example of an application of method M100. </p><p id="p0031" num="0031"> [0025] FIG. 16A shows a plot of a state transition with different rising and falling threshold values. </p><p id="p0032" num="0032"> [0026] FIG. 16B shows a portion of an example of an implementation of audio sensing device D20. </p><p id="p0033" num="0033"> [0027] FIG. 17 shows a portion of an example of an implementation of audio sensing device D20. 
<!-- EPO <DP n="5"/>-->
[0028] FIG. 18 shows an example of an environment producing multiple echoes of a ranging pulse. </p><p id="p0034" num="0034"> [0029] FIG. 19 shows a plot of a recording of a detected signal that includes multiple echoes. </p><p id="p0035" num="0035"> [0030] FIG. 20 shows the signal of FIG. 19 and a corresponding spectrogram. </p><p id="p0036" num="0036">[0031] FIG. 21A shows a plot of a signal produced by ultrasonic detector UD10. </p><p id="p0037" num="0037">[0032] FIG. 21B illustrates a range ambiguity. </p><p id="p0038" num="0038"> [0033] FIGS. 22A-C show an example of an application of DO A estimation using ranging results from multiple ultrasound detectors. </p><p id="p0039" num="0039"> [0034] FIGS. 23 A and 23B show a typical use scenario at two different times A and B. </p><p id="p0040" num="0040">[0035] FIGS. 24-26 show examples of three-channel ultrasound recordings at different successive times. </p><p id="p0041" num="0041"> [0036] FIG. 27A shows a block diagram of an apparatus A100 according to a general configuration. </p><p id="p0042" num="0042"> [0037] FIG. 27B shows a block diagram of an application of an implementation A110 of apparatus A100. </p><p id="p0043" num="0043"> [0038] FIG. 28A shows a block diagram of an implementation A120 of apparatus A100. </p><p id="p0044" num="0044">[0039] FIG. 28B shows a block diagram of an application of an implementation A130 of apparatus A100. </p><p id="p0045" num="0045"> [0040] FIG. 29A shows a block diagram of an implementation A140 of apparatus A100. </p><p id="p0046" num="0046">[0041] FIG. 29B shows a block diagram of an implementation 120 of ultrasound range estimator 100. </p><p id="p0047" num="0047"> [0042] FIG. 30A shows a block diagram of an implementation A150 of apparatus A100. </p><p id="p0048" num="0048">[0043] FIG. 30B shows a block diagram of an apparatus MF100 according to a general configuration. </p><p id="p0049" num="0049"> [0044] FIG. 31 shows a block diagram of an implementation A160 of apparatus A100. </p><p id="p0050" num="0050">[0045] FIG. 32A shows a block diagram of an example R100 of a microphone array. </p><p id="p0051" num="0051">[0046] FIG. 32B shows a block diagram of an implementation R110 of array R100. </p><p id="p0052" num="0052">[0047] FIG. 33A shows a block diagram of an implementation D100 of audio sensing device D20. </p><p id="p0053" num="0053"> [0048] FIG. 33B shows a block diagram of a communications device D200. </p><p id="p0054" num="0054"> [0049] FIGS. 34A and 34B show different views of a portable computing implementation D700 of device D100. 
<!-- EPO <DP n="6"/>-->
 [0050] FIGS. 34C and 34D show different views of a portable computing implementation D710 of device D100. </p><p id="p0055" num="0055"> [0051] FIG. 35 shows a diagram of a portable implementation D800 of multimicrophone audio sensing device D100. </p><p id="p0056" num="0056"> [0052] FIGS. 36A-D show top views of several examples of a conferencing device. </p><p id="p0057" num="0057">[0053] FIG. 37 illustrates back-projection techniques for DOA estimation. </p><p id="p0058" num="0058">DETAILED DESCRIPTION </p><p id="p0059" num="0059">[0054] This description includes disclosure of systems, methods, and apparatus that use ultrasonic ranging to configure an operation for estimating the direction of arrival of an audio-frequency component. Such an operation may provide more accurate source localization to support better performance of a directionally selective audio processing operation. </p><p id="p0060" num="0060"> [0055] Unless expressly limited by its context, the term "signal" is used herein to indicate any of its ordinary meanings, including a state of a memory location (or set of memory locations) as expressed on a wire, bus, or other transmission medium. Unless expressly limited by its context, the term "generating" is used herein to indicate any of its ordinary meanings, such as computing or otherwise producing. Unless expressly limited by its context, the term "calculating" is used herein to indicate any of its ordinary meanings, such as computing, evaluating, estimating, and/or selecting from a plurality of values. Unless expressly limited by its context, the term "obtaining" is used to indicate any of its ordinary meanings, such as calculating, deriving, receiving (e.g., from an external device), and/or retrieving (e.g., from an array of storage elements). Unless expressly limited by its context, the term "selecting" is used to indicate any of its ordinary meanings, such as identifying, indicating, applying, and/or using at least one, and fewer than all, of a set of two or more. Where the term "comprising" is used in the present description and claims, it does not exclude other elements or operations. The term "based on" (as in "A is based on B") is used to indicate any of its ordinary meanings, including the cases (i) "derived from" (e.g., "B is a precursor of A"), (ii) "based on at least" (e.g., "A is based on at least B") and, if appropriate in the particular context, (iii) "equal to" (e.g., "A is equal to B"). Similarly, the term "in response to" is used to indicate any of its ordinary meanings, including "in response to at least." 
<!-- EPO <DP n="7"/>-->
 [0056] References to a "location" of a microphone of a multi-microphone audio sensing device indicate the location of the center of an acoustically sensitive face of the microphone, unless otherwise indicated by the context. The term "channel" is used at times to indicate a signal path and at other times to indicate a signal carried by such a path, according to the particular context. Unless otherwise indicated, the term "series" is used to indicate a sequence of two or more items. The term "logarithm" is used to indicate the base-ten logarithm, although extensions of such an operation to other bases are within the scope of this disclosure. The term "frequency component" is used to indicate one among a set of frequencies or frequency bands of a signal, such as a sample of a frequency domain representation of the signal (e.g., as produced by a fast Fourier transform) or a subband of the signal (e.g., a Bark scale or mel scale subband). </p><p id="p0061" num="0061">[0057] Unless indicated otherwise, any disclosure of an operation of an apparatus having a particular feature is also expressly intended to disclose a method having an analogous feature (and vice versa), and any disclosure of an operation of an apparatus according to a particular configuration is also expressly intended to disclose a method according to an analogous configuration (and vice versa). The term "configuration" may be used in reference to a method, apparatus, and/or system as indicated by its particular context. The terms "method," "process," "procedure," and "technique" are used generically and interchangeably unless otherwise indicated by the particular context. The terms "apparatus" and "device" are also used generically and interchangeably unless otherwise indicated by the particular context. The terms "element" and "module" are typically used to indicate a portion of a greater configuration. Unless expressly limited by its context, the term "system" is used herein to indicate any of its ordinary meanings, including "a group of elements that interact to serve a common purpose." Any incorporation by reference of a portion of a document shall also be understood to incorporate definitions of terms or variables that are referenced within the portion, where such definitions appear elsewhere in the document, as well as any figures referenced in the incorporated portion. </p><p id="p0062" num="0062"> [0058] The near-field may be defined as that region of space which is less than one wavelength away from a sound receiver (e.g., a microphone array). Under this definition, the distance to the boundary of the region varies inversely with frequency. At frequencies of two hundred, seven hundred, and two thousand hertz, for example, the distance to a one- wavelength boundary is about 170, forty- nine, and seventeen 
<!-- EPO <DP n="8"/>-->
 centimeters, respectively. It may be useful instead to consider the near- field/far- field boundary to be at a particular distance from the microphone array (e.g., fifty centimeters from a microphone of the array or from the centroid of the array, or one meter or 1.5 meters from a microphone of the array or from the centroid of the array). </p><p id="p0063" num="0063">[0059] A multi-microphone device may be configured to perform a spatially selective processing operation to receive acoustic signals from one or more sources in a space (e.g., to receive speech from a user of the device) while suppressing sound that arrives from other directions. FIG. 1A shows an example of a multi-microphone device D10 that includes an array of two microphones MCIO and MC20. In other examples of device D10, the microphone array may include more than two microphones (e.g., three, four, or more). In such cases, the microphones may be disposed in a linear or two- or three-dimensional pattern, and the spacing between adjacent microphones in the array may be uniform or non-uniform. </p><p id="p0064" num="0064"> [0060] FIG. IB shows an example of an application in which device D10 is configured to enhance sound arriving from a region that includes the direction of audible sound source AS1 (also called a "pick-up region") relative to sound arriving from other directions. Source AS1 (e.g., a user of the device) may move from one location to another over time, and it may be desirable to adapt the spatially selective processing operation based on a current location of the source. Device D10 may also be implemented to enhance sounds arriving from multiple desired sources, which may be situated at various different locations in the space. </p><p id="p0065" num="0065"> [0061] FIG. ID shows an example of an implementation D20 of device D10 that may be configured to perform an implementation of method M100 as described herein. Device D20 includes an ultrasonic emitter UE10 and an ultrasonic detector UD10. As described below, it may be desirable to implement detector UD10 as a microphone (e.g., as another microphone in the microphone array). Examples of audio sensing devices that may be configured to include an instance of device D10 or D20 include set- top boxes, gaming consoles, smartphones, and laptop and tablet computers. </p><p id="p0066" num="0066">[0062] FIG. 2A shows an example of an application of a four-microphone implementation D12 of device D10 in which the spatially selective processing operation is configured to enhance sound arriving from one of a plurality of different pick-up regions 1, 2, 3 in front of the device and to suppress sound arriving from directions outside the region that is currently selected. It may be desirable to configure such a 
<!-- EPO <DP n="9"/>-->
 device to select the current pick-up region according to an estimated current location of a desired speaker. In the example shown in FIG. 2A, the spatially selective processing operation is adapting in response to a change in the estimated direction of arrival of the speaker's voice from region 1 to region 2. </p><p id="p0067" num="0067"> [0063] It may be desirable to configure device D10 to estimate a direction of arrival of a sound component received by the multimicrophone array from a directional sound source, such as audible source AS1. Such DOA estimation may be useful, for example, to support adaptation of a spatially selective processing operation in response to movement of a desired source. Device D10 may be configured to perform any one or more of several different techniques to estimate the direction of arrival (DOA). Techniques for DOA estimation that may be expected to produce estimates of source DOA with similar spatial resolution include gain-difference-based methods and phase- difference-based methods. Cross-correlation-based methods (e.g., calculating a lag between channels of the multichannel signal, and using the lag as a time-difference-of- arrival to determine DOA) may also be useful in some cases. </p><p id="p0068" num="0068"> [0064] A DOA estimation operation may be configured to produce a DOA estimate for each of a series of segments of the multichannel signal. Typical segment lengths range from about five or ten milliseconds to about forty or fifty milliseconds, and the segments may be overlapping (e.g., with adjacent segments overlapping by 25% or 50%) or nonoverlapping. In one particular example, the multichannel signal is divided into a series of nonoverlapping segments or "frames", each having a length of ten milliseconds. In another particular example, each frame has a length of twenty milliseconds. A segment as processed by a DOA estimation operation may also be a segment (i.e., a "subframe") of a larger segment as processed by a different audio processing operation, or vice versa. </p><p id="p0069" num="0069"> [0065] A gain-difference-based method estimates the DOA based on a difference between the gains of signals that are based on channels of the multichannel signal. For example, such a method may be implemented to estimate the DOA based on a difference between the gains of different channels of the multichannel signal (e.g., a difference in magnitude or energy). Measures of the gain of a segment of the multichannel signal may be calculated in the time domain or in a frequency domain (e.g., a transform domain, such as an FFT, DCT, or MDCT domain). Examples of such gain measures include, without limitation, the following: total magnitude (e.g., sum of 
<!-- EPO <DP n="10"/>-->
 absolute values of sample values), average magnitude (e.g., per sample), RMS amplitude, median magnitude, peak magnitude, peak energy, total energy (e.g., sum of squares of sample values), and average energy (e.g., per sample). In order to obtain accurate results with a gain-difference technique, it may be desirable for the responses of the two microphone channels to be calibrated relative to each other. It may be desirable to apply a lowpass filter to the multichannel signal such that calculation of the gain measure is limited to an audio-frequency component of the multichannel signal. </p><p id="p0070" num="0070">[0066] A difference between gains may be calculated as a difference between corresponding gain measure values for each channel in a logarithmic domain (e.g., values in decibels) or, equivalently, as a ratio between the gain measure values in a linear domain. In some cases, a single difference may be calculated for a frame (e.g., for each frame or for occasional frames). In other cases, a difference may be calculated for each of several frequency components (e.g., subbands or FFT bins) of the frame. </p><p id="p0071" num="0071">[0067] For a calibrated microphone pair, a gain difference of zero may be taken to indicate that the source is equidistant from each microphone (i.e., located in a broadside direction of the pair), a gain difference with a large positive value may be taken to indicate that the source is closer to one microphone (i.e., located in one endfire direction of the pair), and a gain difference with a large negative value may be taken to indicate that the source is closer to the other microphone (i.e., located in the other endfire direction of the pair). FIG. 3A shows an example in which the DOA of a source relative to device D10 is estimated by selecting one among endfire region 1, broadside region 2, and endfire region 3 according to the state of a relation between the gain difference GD[n] for segment n and a gain-difference threshold value TL. FIG. 3B shows an example in which the DOA of a source relative to device D10 is estimated by selecting one among five regions according to the state of a relation between gain difference GD[n] and a first gain-difference threshold value T<sub>L</sub>i and the state of a relation between gain difference GD[n] and a second gain-difference threshold value TL<sub>2</sub>. </p><p id="p0072" num="0072">[0068] In another example, a gain-difference-based method estimates the DOA based on a difference in gain among beams that are generated from the multichannel signal (e.g., from an audio-frequency component of the multichannel signal). Such a method may be implemented to use a set of fixed filters to generate a corresponding set of beams that span a desired range of directions (e.g., 180 degrees in 10-degree increments). Such an approach applies each of the fixed filters to the multichannel 
<!-- EPO <DP n="11"/>-->
 signal and estimates the DOA (e.g., for each segment) as the look direction of the beam that exhibits the highest output energy. FIG. 6 A shows an example of such a configuration that includes fixed filters BFlOa, BFlOb, and BFlOn arranged to filter multichannel signal S10 to generate respective beams BlOa, BlOb, and BlOn. Examples of beamforming approaches that may be used to generate the fixed filters include generalized sidelobe cancellation (GSC), minimum variance distortionless response (MVDR), and linearly constrained minimum variance (LCMV) beamformers. Other examples of beam generation approaches that may be used to generate the fixed filters include blind source separation (BSS) methods, such as independent component analysis (ICA) and independent vector analysis (IVA), which operate by steering null beams toward interfering point sources. </p><p id="p0073" num="0073"> [0069] FIGS. 4 and 5 show examples of beamformer beam patterns for an array of three microphones (dotted lines) and for an array of four microphones (solid lines) at 1500 Hz and 2300 Hz, respectively. In these figures, the top left plot A shows a pattern for a beamformer with a look direction of about sixty degrees, the bottom center plot B shows a pattern for a beamformer with a look direction of about ninety degrees, and the top right plot C shows a pattern for a beamformer with a look direction of about 120 degrees. Beamforming with three or four microphones arranged in a linear array (for example, with a spacing between adjacent microphones of about 3.5 cm) may be used to obtain a spatial bandwidth discrimination of about 10-20 degrees. FIG. 3C shows an example of a beam pattern for an asymmetrical array. </p><p id="p0074" num="0074"> [0070] In a further example, a gain-difference-based method estimates the DOA based on a difference in gain between channels of beams that are generated from the multichannel signal (e.g., using a beamforming or BSS method as described above) to produce a multichannel output. For example, a fixed filter may be configured to generate such a beam by concentrating energy arriving from a particular direction or source (e.g., a look direction) into one output channel and/or concentrating energy arriving from another direction or source into a different output channel. FIG. 6B shows an example of such a configuration that includes fixed filters BF20a, BF20b, and BF20n arranged to filter multichannel signal S10 to generate respective beams having signal channels B20as, B20bs, and B20ns (e.g., corresponding to a respective look direction) and noise channels B20an, B20bn, and B20nn. In such case, the gain- 
<!-- EPO <DP n="12"/>-->
 difference-based method may be implemented to estimate the DOA as the look direction of the beam that has the greatest difference in energy between its output channels. </p><p id="p0075" num="0075">[0071] A DOA estimate may also be obtained by directly using the BSS unmixing matrix W and the microphone spacing. Such a technique may include estimating the source DOA (e.g., for each source-microphone pair) by using back-projection of separated source signals, using an inverse (e.g., the Moore-Penrose pseudo-inverse) of the unmixing matrix W, followed by single-source DOA estimation on the back- projected data. Such a DOA estimation method is typically robust to errors in microphone gain response calibration. The BSS unmixing matrix W is applied to the m microphone signals Xi to X<sub>M</sub>, and the source signal to be back-projected Y<sub>j</sub> is selected from among the outputs of matrix W. A DOA for each source-microphone pair may be computed from the back-projected signals using a technique such as GCC-PHAT or SRP-PHAT. A maximum likelihood and/or multiple signal classification (MUSIC) algorithm may also be applied to the back-projected signals for source localization. The back-projection methods described above are illustrated in FIG. 37. </p><p id="p0076" num="0076">[0072] A phase-difference-based method estimates the DOA based on a difference between phases of different channels of the multichannel signal. Such methods include techniques that are based on a cross -power- spectrum phase (CPSP) of the multichannel signal (e.g., of an audio-frequency component of the multichannel signal), which may be calculated by normalizing each element of the cross-power-spectral-density vector by its magnitude. Examples of such techniques include generalized cross-correlation with phase transform (GCC-PHAT) and steered response power-phase transform (SRP- PHAT), which typically produce the estimated DOA in the form of a time difference of arrival. One potential advantage of a phase-difference-based approach is that it is typically robust to mismatches between the gain responses of the microphones. </p><p id="p0077" num="0077">[0073] Other phase-difference-based methods include estimating the phase in each channel for each of a plurality of frequency components to be examined. In one example, the phase of a frequency component is estimated as the inverse tangent (also called the arctangent) of the ratio of the imaginary term of the FFT coefficient of the frequency component to the real term of the FFT coefficient of the frequency component. It may be desirable to calculate the phase difference Δφ for each frequency component to be examined by subtracting the estimated phase for that frequency component in a primary channel from the estimated phase for that frequency component 
<!-- EPO <DP n="13"/>-->
 in another (e.g., secondary) channel. In such case, the primary channel may be the channel expected to have the highest signal-to-noise ratio, such as the channel corresponding to a microphone that is expected to receive the user's voice most directly during a typical use of the device. </p><p id="p0078" num="0078"> [0074] It may be unnecessary for a DO A estimation method to consider phase differences across the entire bandwidth of the signal. For many bands in a wideband range (e.g., 0-8000 Hz), for example, phase estimation may be impractical or unnecessary. The practical valuation of phase relationships of a received waveform at very low frequencies typically requires correspondingly large spacings between the transducers. Consequently, the maximum available spacing between microphones may establish a low frequency bound. On the other end, the distance between microphones should not exceed half of the minimum wavelength in order to avoid spatial aliasing. An eight-kilohertz sampling rate, for example, gives a bandwidth from zero to four kilohertz. The wavelength of a four-kHz signal is about 8.5 centimeters, so in this case, the spacing between adjacent microphones should not exceed about four centimeters. The microphone channels may be lowpass filtered in order to remove frequencies that might give rise to spatial aliasing. </p><p id="p0079" num="0079"> [0075] It may be desirable to perform DOA estimation over a limited audio-frequency range of the multichannel signal, such as the expected frequency range of a speech signal. One such example of a phase-based DOA estimation method is configured to calculate phase differences for the frequency range of 700 Hz to 2000 Hz, which may be expected to include most of the energy of the user's voice. For a 128-point FFT of a four-kilohertz-bandwidth signal, the range of 700 to 2000 Hz corresponds roughly to the twenty-three frequency samples from the tenth sample through the thirty-second sample. In further examples, such a method is configured to calculate phase differences over a frequency range that extends from a lower bound of about fifty, 100, 200, 300, or 500 Hz to an upper bound of about 700, 1000, 1200, 1500, or 2000 Hz (each of the twenty- five combinations of these lower and upper bounds is expressly contemplated and disclosed). </p><p id="p0080" num="0080"> [0076] The energy spectrum of voiced speech (e.g., vowel sounds) tends to have local peaks at harmonics of the pitch frequency. The energy spectrum of background noise, on the other hand, tends to be relatively unstructured. Consequently, components of the input channels at harmonics of the pitch frequency may be expected to have a higher 
<!-- EPO <DP n="14"/>-->
 signal-to-noise ratio (SNR) than other components. It may be desirable to configure the DOA estimation method to favor phase differences which correspond to multiples of an estimated pitch frequency. For example, it may be desirable for at least twenty-five, fifty, or seventy-five percent (possibly all) of the calculated phase differences to correspond to multiples of an estimated pitch frequency, or to weight direction indicators that correspond to such components more heavily than others. Typical pitch frequencies range from about 70 to 100 Hz for a male speaker to about 150 to 200 Hz for a female speaker, and a current estimate of the pitch frequency (e.g., in the form of an estimate of the pitch period or "pitch lag") will typically already be available in applications that include speech encoding and/or decoding (e.g., voice communications using codecs that include pitch estimation, such as code-excited linear prediction (CELP) and prototype waveform interpolation (PWI)). The same principle may be applied to other desired harmonic signals as well. Conversely, it may be desirable to configure the DOA estimation method to ignore frequency components which correspond to known interferers, such as tonal signals (e.g., alarms, telephone rings, and other electronic alerts). </p><p id="p0081" num="0081"> [0077] The DOA estimation method may be configured to calculate, for each of a plurality of the calculated phase differences, a corresponding indication of the DOA. In one example, an indication of the DOA Θ; of each frequency component is calculated as a ratio r; between estimated phase difference Δψι and frequency fj (e.g., r =— ). </p><p id="p0082" num="0082"> fi</p><p id="p0083" num="0083">Alternatively, an indication of the DOA Θ; may be calculated as the inverse cosine (also called the arccosine) of the quantity <sup>cA&lt; l</sup> , where c denotes the speed of sound </p><p id="p0084" num="0084"> d2" .Tc J<sup>~</sup> j </p><p id="p0085" num="0085"> (approximately 340 m/sec), d denotes the distance between the microphones, ψι denotes the difference in radians between the corresponding phase estimates for the two microphones, and f; is the frequency component to which the phase estimates correspond (e.g., the frequency of the corresponding FFT samples, or a center or edge frequency of the corresponding subbands). Alternatively, an indication of the direction of arrival Θ; may be calculated the inverse cosine of the quantity where denotes the wavelength of frequency component fj. </p><p id="p0086" num="0086"> [0078] In another example, an indication of the DOA is calculated as the time delay of arrival <sub>x</sub> (e.g., in seconds) of the corresponding frequency component f; of the multichannel signal. For example, such a method may be configured to estimate the 
<!-- EPO <DP n="15"/>-->
 time delay of arrival τ at a secondary microphone with reference to a primary microphone, using an expression such as τ<sub>έ</sub> = or ti = ^<sup>n</sup> these examples, a value of Ti = 0 indicates a signal arriving from a broadside direction, a large positive value of x<sub>x</sub> indicates a signal arriving from the reference endfire direction, and a large negative value of x<sub>x</sub> indicates a signal arriving from the other endfire direction. In calculating the values ij, it may be desirable to use a unit of time that is deemed appropriate for the particular application, such as sampling periods (e.g., units of 125 microseconds for a sampling rate of 8 kHz) or fractions of a second (e.g., 10 -<sup>"</sup>3 , 10 -<sup>"</sup>4 , 10 -<sup>"</sup>5 , or 10<sup>"6</sup> sec). It is noted that a time delay of arrival % may also be calculated by cross- correlating the frequency components f; of each channel in the time domain. </p><p id="p0087" num="0087">[0079] A phase-difference-based method may be configured to estimate the DOA as an average (e.g., the mean, median, or mode) of the DOA indicators. Alternatively, such a method may be configured to estimate the DOA by dividing the desired range of DOA coverage into a plurality of bins (e.g., a fixed scheme of 3, 4, 5, 6, 7, 8, 9, 10, 11, or 12 bins for a range of 0-180 degrees) and determining the number of DOA indicators whose values fall within each bin (i.e., the bin population). For a case in which the bins have unequal bandwidths, it may be desirable to calculate the bin population values by normalizing each bin population by the corresponding bandwidth. The DOA of the desired source may be estimated as the direction corresponding to the bin having the highest population value, or as the direction corresponding to the bin whose current population value has the greatest contrast (e.g., that differs by the greatest relative magnitude from a long-term time average of the population value for that bin). </p><p id="p0088" num="0088">[0080] A similar method uses a set of directional masking functions to divide the desired range of DOA coverage into a plurality of sectors (e.g., 3, 4, 5, 6, 7, 8, 9, 10, 11, or 12 sectors for a range of 0-180 degrees). The directional masking functions for adjacent sectors may overlap, and the profile of a directional masking function may be linear or nonlinear. A directional masking function may be implemented such that the sharpness of the transition or transitions between stopband and passband are selectable and/or variable during operation according to the values of one or more factors (e.g., signal-to-noise ratio (SNR), noise floor, etc.). For example, it may be desirable to use a more narrow passband when the SNR is low. The sectors may have the same angular width (e.g., in degrees or radians) as one another, or two or more (possibly all) of the sectors may have different widths from one another. FIG. 7 shows a top view of such 
<!-- EPO <DP n="16"/>-->
 an application of a three-microphone implementation D22 of device D20 in which a set of three overlapping sectors is applied to the channel pair corresponding to microphones MCIO and MC20 for phase-difference-based DOA estimation. </p><p id="p0089" num="0089"> [0081] FIGS. 8A-8D show individual examples of directional masking functions, and FIG. 9 shows examples of two different sets (linear vs. curved profiles) of three directional masking functions. In these examples, the output of a masking function for each segment is based on the sum of the pass values for the corresponding phase differences of the frequency components being examined. For example, the output may be calculated by normalizing the sum with respect to a maximum possible value for the masking function. Of course, the response of a masking function may also be expressed in terms of time delay τ or ratio r rather than direction Θ. </p><p id="p0090" num="0090"> [0082] It may be expected that a microphone array will receive different amounts of ambient noise from different directions. FIG. 10 shows plots of magnitude vs. time (in frames) for results of applying a set of three directional masking functions as shown in FIG. 9 to the same multichannel audio signal. It may be seen that the average responses of the various masking functions to this signal differ significantly. It may be desirable to apply a respective detection threshold value to the output of each masking function, such that a DOA corresponding to that sector is not selected as a DOA estimate for the segment unless the masking function output is above (alternatively, is not less than) the corresponding detection threshold value. </p><p id="p0091" num="0091"> [0083] It is also possible to configure a DOA estimation method to evaluate sectors that correspond to different channel pairs. FIGS. 11-14 show examples of such a method used with a four-microphone implementation D24 of device D20. In FIG. 11, sector 1 is defined by a masking function applied to an endfire direction of the (primary- secondary) microphone pair MC20-MC10, sector 2 is defined by a masking function applied to an endfire direction of the microphone pair MC10-MC40, and sector 3 is defined by a masking function applied to an endfire direction of the microphone pair MC30-MC20. The example of FIG. 12 adds a fourth sector that is defined by a masking function applied to an endfire direction of the microphone pair MC40-MC10. FIGS. 13 and 14 show two similar examples (with five and eight sectors, respectively) that illustrate the DOA estimates associated with each sector. In these examples, the DOA estimate associated with each sector corresponds to the endfire direction of the respective microphone pair. 
<!-- EPO <DP n="17"/>-->
 [0084] The "directional coherence" of a multichannel signal is defined as the degree to which the various frequency components of the signal arrive from the same direction.</p><p id="p0092" num="0092">For an ideally directionally coherent channel pair, the value of is equal to a constant k for all frequencies, where the value of k is related to the direction of arrival Θ and the time delay of arrival τ. The directional coherence of a multichannel signal may be quantified, for example, by rating the estimated direction of arrival for each frequency component according to how well it agrees with a particular direction, and then combining the rating results for the various frequency components to obtain a coherency measure for the signal. Consequently, the masking function output for each sector is a measure of the directional coherence of the multichannel signal within that sector. Calculation and application of a measure of directional coherence is also described in, e.g., Int'l Pat. Publ's WO2010/048620 Al and WO2010/144577 Al (Visser et al.). </p><p id="p0093" num="0093">[0085] It may be desirable to produce the coherency measure for each sector as a temporally smoothed value. In one such example, the DOA estimation method is configured to produce the coherency measure as a mean value over the most recent m frames, where possible values of m include four, five, eight, ten, sixteen, and twenty. In another such example, the method is configured to calculate a smoothed coherency measure z(n) for frame n according to an expression such as z(n) = βζ(η— 1) + (1— /?)c(n) (also known as a first-order IIR or recursive filter), where z(n-l) denotes the smoothed coherency measure for the previous frame, c(n) denotes the current unsmoothed value of the coherency measure, and β is a smoothing factor whose value may be selected from the range of from zero (no smoothing) to one (no updating). Typical values for smoothing factor β include 0.1, 0.2, 0.25, 0.3, 0.4, and 0.5. It is typical, but not necessary, to use the same value of β to smooth coherency measures that correspond to different sectors. </p><p id="p0094" num="0094"> [0086] The contrast of a coherency measure may be expressed as the value of a relation (e.g., the difference or the ratio) between the current value of the coherency measure and an average value of the coherency measure over time (e.g., the mean, mode, or median over the most recent ten, twenty, fifty, or one hundred frames). A DOA estimation method may be configured to calculate the average value of a coherency measure for each sector using a temporal smoothing function, such as a leaky integrator or according to an expression such as v(n) = av(n— 1) + (1— a)c(n), where v(n) denotes the average value for the current frame, v(n-l) denotes the average value for the 
<!-- EPO <DP n="18"/>-->
 previous frame, c(n) denotes the current value of the coherency measure, and a is a smoothing factor whose value may be selected from the range of from zero (no smoothing) to one (no updating). Typical values for smoothing factor a include 0.01, 0.02, 0.05, and 0.1. </p><p id="p0095" num="0095"> [0087] A sector-based DOA estimation method may be configured to estimate the DOA of the signal as the DOA associated with the sector whose coherency measure is greatest. Alternatively, such a method may be configured to estimate the DOA of the signal as the DOA associated with the sector whose coherency measure currently has the greatest contrast (e.g., has a current value that differs by the greatest relative magnitude from a long-term time average of the coherency measure for that sector). Additional description of phase-difference-based DOA estimation may be found, for example, in U.S. Publ. Pat. Appl. 2011/0038489 (publ. Feb. 17, 2011) and U.S. Pat. Appl. No. 13/029,582 (filed Feb. 17, 2011). </p><p id="p0096" num="0096"> [0088] For both gain-difference-based approaches and phase-difference-based approaches, it may be desirable to perform DOA estimation over a limited audiofrequency range of the multichannel signal. For example, it may be desirable to perform DOA estimation over a mid-frequency range (e.g., from 100, 200, 300, or 500 to 800, 100, 1200, 1500, or 2000 Hz) to avoid problems due to reverberation in low frequencies and/or attenuation of the desired signal in high frequencies. </p><p id="p0097" num="0097">[0089] It may be desirable in certain applications to localize the position of each of one or more directional sound sources relative to an audio sensing device. In addition to DOA estimation, for example, it may be desirable to obtain information regarding the range (i.e., distance) of each directional sound source relative to the microphone array. It may be desirable to use such information to track the position over time of a moving directional source, such as a human speaker, relative to the audio sensing device. Examples of applications for source localization include but are not limited to the following: steering of a directional microphone; steering of a beam of a multi- microphone array; using spatial information for speech enhancement; recording spatial information of a sound field for spatially enhanced reproduction (e.g., using wave field synthesis); control of microphone path gain; control of audio playback gain; audio conferencing; video conferencing; gesture recognition; motion detection; presence detection; steering and/or focusing of an imaging sensor (e.g., a camera); control of a display for glasses-free three-dimensional viewing; interactive motion-related gaming 
<!-- EPO <DP n="19"/>-->
 applications, which may include activities such as, for example, dance, sports, and/or musical instrument playing (e.g., Dance Dance Revolution (Konami Corp., Tokyo, JP), Wii Sports (Nintendo Co., Ltd., Kyoto, JP), the Hero series of video games (e.g., Guitar Hero, Band Hero, DJ Hero; Activision Blizzard, Santa Monica, CA)). Examples of audio sensing devices that may be used to perform such techniques include set-top boxes, gaming consoles, and laptop and tablet computers. </p><p id="p0098" num="0098"> [0090] One approach to ranging is to estimate the range of a source from recordings of audible sound emitted by the source (also called "passive ranging"). To retrieve reliable range information from audio recordings, however, it is typically desirable for the aperture of the microphone array to be comparable to the distance between the array and the sound source. For an application in which it is desirable to support the estimation of ranges of one meter or more (e.g., up to three or four meters), it may be not practical to obtain such a relationship between array aperture and source range for small form factors, such as devices for wireless communications (e.g., smartphones) and/or portable computing (e.g., netbooks or laptops) and other consumer devices (e.g., set-top boxes, gaming consoles). For such applications, it may be desirable to use an active approach for ranging. </p><p id="p0099" num="0099"> [0091] In sound recording applications (e.g., for voice communications), using emissions of audible sound to support active ranging may cause interference with the captured audible sound field. Consequently, it may be desirable to use another approach for active ranging. One such approach is active ranging using ultrasound energy, which is imperceptible by humans. Such ranging may include emitting an ultrasound ranging pulse, detecting the echo caused by reflection of the pulse from the object to be ranged (i.e., the source), and calculating a range (e.g., the distance between the sound source and the detector) based on the time-of-flight from emission of the pulse to detection of the reflected echo. Ultrasound energy is typically emitted and detected in frequency bands far above those where most noise is emitted, which may provide a lower noise floor for ultrasound measurements than for audio-frequency measurements. </p><p id="p0100" num="0100">[0092] Combinations of ultrasound ranging and DOA estimation from audible sound can provide good alternatives to other localization approaches, such as those based on imaging data (e.g., motion capture). Integration of ultrasound ranging into an audio processing device is typically easier than similar integration of other ranging technologies, such as micropower impulse radar (MIR) or infrared. For example, it is 
<!-- EPO <DP n="20"/>-->
 typically possible to use audio microphones as ultrasound detectors. Ultrasound ranging may also be more accurate than other approaches at a typical distance range of such an audio processing application (e.g., distances of from one to five meters). FIG. 1C shows an example in which both a direction of arrival and a range RSI are associated with a desired source AS1. </p><p id="p0101" num="0101"> [0093] Ultrasound ranging may also help to identify other aspects of the environment, such as room dimensions (e.g., to configure a dereverberation operation to be performed on the received audio-frequency signal). An ultrasonic ranging operation may be combined with one or more directional discrimination methods (e.g., DOA estimation from audible sound), as typically the only range of interest is the range of an object in a particular direction (i.e., as opposed to the ranges of all nearby objects). </p><p id="p0102" num="0102">[0094] It may be desirable to use information from a ranging operation, such as ultrasonic ranging, to improve DOA estimation. For example, it may be desirable to select among different methods for estimating DOA from received sound, based on an estimated distance between the sound source and the microphone array. Some phase- difference-based methods for estimating DOA from received sound may produce better results than an energy-difference-based method when the source is close to the array, while the energy-difference-based method may produce better results when the source is far away from the array. </p><p id="p0103" num="0103"> [0095] In such cases, the application may be configured to use phase differences to estimate DOA in response to an indication that the source is close to the device. Near- field noise reduction methods may also be used in such cases. In response to an indication that the source is far away from the device, the application may be configured to use an energy-difference-based DOA estimation method (and/or a different phase- difference-based method) instead. </p><p id="p0104" num="0104"> [0096] Time-domain cross-correlation methods may produce better results for close sources than for far sources, while some phase-difference-based methods may produce good DOA estimation results for source-device distances up to 1-2 meters or more. Among gain-difference-based methods, methods based on beam strength or quality differences may be effective at greater source-device distances than methods based on gain difference between channels of the received audio-frequency signal. </p><p id="p0105" num="0105">[0097] FIG. 2B shows a flowchart for a method M100 according to a general configuration that includes tasks T100, T200, and T300. Based on information from a 
<!-- EPO <DP n="21"/>-->
 detected reflection of an emitted ultrasonic signal, task T100 estimates a range of a sound-emitting object (e.g., a desired sound source, such as a user). Task T200 indicates a state of a relation between the estimated range and a threshold value. Based on the indicated state of the relation, task T300 calculates an estimate of a direction of arrival of an audio-frequency component of a multichannel signal. For example, task T300 may be configured to calculate the DOA estimate based on a phase difference between channels of the audio-frequency component in response to an indication by task T200 that the relation has a first state (e.g., that the source is close to the array), and to calculate the DOA estimate based on a difference in energy between channels of the audio-frequency component in response to an indication by task T200 that the relation has a second state (e.g., that the source is far from the array), or vice versa. In another example, task T300 may be configured to calculate the DOA estimate based on a selected one among two different gain-difference-based methods, or a selected one among two different phase-difference-based methods, or a selected one (or more) among any of the various DOA estimation techniques disclosed herein. As noted above, FIG. ID shows an example of an implementation D20 of device D10 that may be configured to perform an implementation of method Ml 00. </p><p id="p0106" num="0106"> [0098] Task T100 may be configured to estimate the range from the detected ultrasound signal in the time domain or in a frequency domain, such as a subband domain or a transform domain (e.g., an FFT domain). In a subband-domain example, task T100 passes the time-domain received signal through a bank of one or more time-domain bandpass filters and measures the output energy of each subband. In a transform- domain example, task T100 calculates a spectrogram of the received signal and monitors an evolution of the energy at the peak frequency (e.g., 40 kHz) over time (see, e.g., FIG. 20). </p><p id="p0107" num="0107"> [0099] Task T100 may be configured to determine the time-axis location of a received echo as the location of an energy peak in the FFT domain. For a time-domain signal, task T100 may be configured to determine the time-axis location of a received echo as the location of the peak of a region of samples whose energy (individually or, alternatively, collectively) is above an echo detection threshold value. The echo detection threshold value may be fixed or adaptive, and it may be desirable to limit the maximum width (in samples) of the region. Task T100 may be configured to identify 
<!-- EPO <DP n="22"/>-->
 the peak as the highest-energy sample of the region or, alternatively, as the center in time of the region. </p><p id="p0108" num="0108"> [00100] Task T100 may be configured to estimate the range as a measure of distance (e.g., in meters or centimeters) or, equivalently, as a measure of time (e.g., in seconds, milliseconds, frame periods, or sample periods). Task T100 may be configured to indicate the calculated source-to-device range in terms of the total distance of the path from emitter to reflecting source to detector (e.g., the total time-of-flight from emission to detection). Alternatively, task T100 may be configured to indicate the calculated source-to-device range by dividing the total distance or time-of-flight by two (i.e., to indicate the calculated source-to-device range as the distance between the reflecting source and the device). </p><p id="p0109" num="0109"> [00101] Task T100 may be configured to identify the moment at which the pulse is emitted (i.e., the start of the time-of-flight) from the detected ultrasound signal. Alternatively, task T100 may be configured to receive an indication of the time of emission from a signal generator that generates the pulses. </p><p id="p0110" num="0110"> [00102] Task T200 may be configured to indicate that the relation between the estimated range and the threshold value has a first state (e.g., one or logical high) if the estimated range is less than the threshold value, and to indicate that the relation has a second state (e.g., zero or logical low) if the estimated range is greater than the threshold value. One example of such a method uses a threshold value that corresponds to a source-to-device distance of about one meter (e.g., a total time-of-flight of about 5.88 milliseconds, for a velocity of sound of 340 meters per second), such that a phase-based DOA method is selected when the source is closer than one meter to the device, and an energy-based DOA method is selected when the source is farther than one meter from the device. Other examples of the threshold value include values that correspond to source-to- device distances in a range from 50 centimeters to 150 centimeters (e.g., 50, 75, 80, 120, 135, or 150 centimeters). </p><p id="p0111" num="0111"> [00103] FIGS. 15A-15D illustrate an example of an application of method M100. FIG. 15A shows a plot (amplitude vs. time) of a signal produced by ultrasonic detector UD10 in response to a pulse emitted by ultrasonic emitter UE10 at a first time A and in response to a received echo ESI A caused by reflection of the pulse from an audible source AS1. The time between these two events (emission of the pulse and reception of the echo) is a time-of-flight TOF1A of the ultrasonic pulse that indicates a range RSI A 
<!-- EPO <DP n="23"/>-->
 of audible source AS1 at time A, as shown in FIG. 15B. In this case, task T200 indicates that range RSI A is less than a distance threshold value T<sub>R</sub>, such that a first DOA estimation method (e.g., phase-based) is selected. </p><p id="p0112" num="0112"> [00104] FIG. 15C shows a similar plot of a signal produced by ultrasonic detector UD10 in response to a pulse emitted by ultrasonic emitter UE10 at a second time B and in response to a received echo ES1B caused by reflection of the pulse from audible source AS1. The time between these two events is a time-of-flight TOF1B of the ultrasonic pulse that indicates a range RS1B of audible source AS1 at time B, as shown in FIG. 15D. In this case, task T200 indicates that range RS1B is greater than the distance threshold value T<sub>R</sub>, such that a second DOA estimation method (e.g., energy-based) is selected. </p><p id="p0113" num="0113"> [00105] In order to inhibit excessive switching between DOA estimation methods over a short period of time (e.g., in the case of a source whose range is close to the threshold value T<sub>R</sub>), it may be desirable to implement task T300 to include a hangover or other temporal smoothing operation. In one such example, task T300 is configured to switch the DOA estimation method only after task T200 has indicated the new state for some minimum number of consecutive indications (e.g., for three, five, ten, or twenty consecutive pulses; or for a period corresponding to 50, 100, 200, or 500 milliseconds). Additionally or alternatively, excessive switching between DOA estimation methods over a short period of time may be inhibited by configuring task T200 to use a different distance threshold for each state transition (e.g., as shown in FIG. 16A). For example, task T200 may be configured to indicate a transition from the first state to the second state (e.g., from phase-based to energy-based DOA estimation) only when the range exceeds (alternatively, is at least equal to) a rising threshold value TR<sub>r</sub> (e.g., 110, 120, 135, or 150 centimeters), and to indicate a transition from the second state to the first state (e.g., from energy-based to phase-based DOA estimation) only when the range is less than (alternatively, is not greater than) a falling threshold value TRf (e.g., 50, 60, 75, or 90 centimeters) </p><p id="p0114" num="0114"> [00106] It may be desirable to configure method M100 to store a history of the ranges and corresponding directions of audible source AS1 relative to the device (e.g., as shown in FIG. 1C) that are associated with different moments of time. Such a history may be used to support tracking of the location of the source as it moves over time. In one such example, method Ml 00 is configured to store each in a series of source 
<!-- EPO <DP n="24"/>-->
 locations as a triplet of a time value and corresponding DOA and range values (e.g., as a polar coordinate associated with a corresponding time value). Such a history may also include locations of more than one source and/or of other objects within the field of view, which locations may change or remain constant over time. </p><p id="p0115" num="0115"> [00107] An implementation of method Ml 00 (or an apparatus performing such a method) may also include performing one or more spatially selective processing operations on multichannel signal S10. For example, method M100 may be configured to produce an enhanced signal by attenuating frequency components of the multichannel signal that arrive from directions that are different than the estimated DOA (e.g., from directions that are outside an accepted range of directions around the estimated DOA). For a case in which the multichannel signal includes more than two channels, method M100 may be configured to select a subset (e.g., a pair) of channels, based on the estimated DOA. For example, method M100 may be configured to select the pair of channels that correspond to the microphone pair whose endfire (i.e., axis) direction coincides most closely with the estimated DOA. </p><p id="p0116" num="0116"> [00108] Alternatively or additionally, method Ml 00 may be configured to calculate an estimate of a noise component of the multichannel signal that includes frequency components that arrive from directions different from the estimated DOA (e.g., other sectors). For case in which a noise estimate is calculated, method M100 may also be configured to use the noise estimate to perform a noise reduction operation on one or more channels of the multichannel signal (e.g., Wiener filtering or spectral subtraction of the noise estimate from one or more channels of the enhanced signal). Other applications of method Ml 00 include using the estimated DOA or source location to select a portion of an image captured by a camera of the audio sensing device as a focus window (e.g., such that the focus window includes at least part of an image of the source), and using the estimated source range and information from the focus window to focus the camera on the desired source. </p><p id="p0117" num="0117"> [00109] It is typically possible to use the same microphones of device D20 for ultrasound detection as for audible sound recording (e.g., to implement detector UD10 as a microphone in an array of microphones), although such a device may be configured to include one or more dedicated ultrasound detectors instead. For a case in which a microphone is used for sensing both ultrasound and audible sound, it may be desirable to pass the received signal through a filter bank to separate the ultrasound component 
<!-- EPO <DP n="25"/>-->
 (for ranging and possibly for DOA estimation) from the audio-frequency component (for DOA estimation and possibly for spatially selective processing). </p><p id="p0118" num="0118">[00110] Each among detector UD10 and the microphones of the array (e.g., MCIO, MC20, MC30, MC40) may be implemented as an extended-bandwidth microelectromechanical systems (MEMS) microphone and/or as an electret condenser microphone (ECM). Such a detector of ultrasound and/or audible sound may also be implemented as one or more sheets of a piezoelectric material, such as polyvinylidene fluoride (PVDF), piezoceramic, or carbon nanotubes. Multiple PVDF sheets may be applied to a surface. </p><p id="p0119" num="0119"> [00111] It is possible to use a loudspeaker to emit the ultrasound ranging signal as well as an audible sound signal (e.g., a far-end speech signal in a telephony application), but it may be desirable to use a dedicated ultrasound emitter UE10 for ranging instead. Examples of ultrasound emitters include piezoelectric film, pyroelectric film, and piezoceramic s. Piezoelectric film (e.g., PVDF) ultrasound transmitter and receivers offer unique advantages for air ranging applications. Typical emission and detection frequencies for PVDF films include 40 kHz and 80 kHz. Cylindrical PVDF transmitters typically exhibit omnidirectional horizontal beam directivity and broad band characteristics. Cylindrical PVDF receivers typically exhibit very wide horizontal beam directivity and broad band characteristics. Depending on the application, resonance frequency and vertical beam directivity of the transmitter and/or receiver can easily be customized by changing the diameter and/or length of the PVDF cylinder. FIG. 17 shows a portion of one example of an implementation of audio sensing device D20 (e.g., a laptop or tablet computer) that includes a screen SCR10 mounted in a bezel BZ10, a cylindrical PVDF implementation UE12 of ultrasonic emitter UE10 mounted on bezel BZ10, and an array of three microphones MCIO, MC20, MC30 located behind corresponding acoustic ports in bezel BZ10. In this example, microphone MC20 also serves as detector UD10, and one or more of the other microphones may also be used as ultrasound detectors. For an emitter that protrudes as shown in FIG. 17, it may be desirable to mount the emitter in a spring-loaded or otherwise retractable fashion such that it may be moved within bezel BZ10 when not in use. Another example of device D20 includes multiple PVDF cylindrical receivers arranged orthogonally to provide a complete three-axis omnidirectional beam pattern. 
<!-- EPO <DP n="26"/>-->
 [00112] Pyroelectric film may also be used as an ultrasound emitter. Carbon nanotube technology (CNT) emitters, for example, may be configured to exhibit a pyroelectric effect. Heating and cooling the air quickly in an adiabatic process compresses and rarifies the air molecules, resulting in sound waves. Such a film (e.g., CNT film) can be used in a planar emitter or, alternatively, wrapped into a cylindrical shape for an omnidirectional beam pattern. </p><p id="p0120" num="0120"> [00113] Piezoceramic emitters are efficient ultrasonic emitters as well, but typically have a lower Q-factor than PVDF transmitters. Such an emitter may be formed into a spherical shape to act as an omnidirectional point source, or formed into a sheet to act as a piston-mode or cantilever beam actuator. FIG. 16B shows a portion of one example of an implementation of audio sensing device D20 (e.g., a laptop or tablet computer) that includes that includes a screen SCR20 mounted in a bezel BZ20, and an array of four microphones MClO, MC20, MC30, MC40 and a piezoceramic implementation UE14 of ultrasonic emitter UE10 located behind corresponding acoustic ports in bezel BZ20. In this example, microphone MC20 also serves as detector UD10, and one or more of the other microphones may also be used as ultrasound detectors. </p><p id="p0121" num="0121"> [00114] Device D20 may be configured to drive emitter UE10 to emit ranging pulses at a rate of, for example, 0.2, 0.25, 0.5, 1, 2, 5, 10, 20, 50, or 100 Hz. For installations in consumer home environments (e.g., set-top boxes, gaming consoles, laptop or tablet computers), it may be desirable to use an ultrasound frequency that is above the range of a pet's hearing. Dogs can typically hear sounds up to 40,000 Hz, cats can typically hear sounds up to 60,000 Hz, and rodents can typically hear sounds up to 90,000 Hz. It may be desirable for the rate at which the received signal is sampled to be greater than two times the frequency of the emitted pulse (e.g., a sampling rate of 80-200 kHz or more, such as 192 kHz). </p><p id="p0122" num="0122"> [00115] A surface that is large, flat, and hard, such as a wall of a room, is likely to reflect more of the energy of an ultrasound pulse than a human body. Such a surface may produce an echo having a larger amplitude than an echo from a user of the device. Ultrasound signals typically attenuate rapidly (e.g., to about fifty percent in five meters), such that the maximum practical source-to-device range may be limited to about five meters or less (e.g., two or three meters). The received ultrasound signal typically becomes weaker as the distance between the object and the detector increases and also 
<!-- EPO <DP n="27"/>-->
 as the size of the object decreases. The effect of distance is typically more perceptible in the detected ultrasound signal for non-flat surfaces than for flat surfaces. </p><p id="p0123" num="0123">[00116] In a practical application, the emitted ultrasonic pulse may be expected to reflect from more than one surface, such that the signal produced by the ultrasonic detector or microphone may be expected to include echoes from more than one reflection of the emitted pulse. FIG. 18 shows an example in which the detected signal includes an echo from source AS1 at range RSI. In this example, the signal may also include echoes from one or more among the left wall at range RL1, the right wall at range RT1, and the rear wall at range RR1. FIG. 19 shows a plot (amplitude vs. time-domain samples) of a recording of a detected signal that includes multiple echoes. FIG. 20 shows this time- domain signal and a corresponding spectrogram (which may be generated from the sensed signal using, for example, an FFT operation having a frame size of 16, 32, 64, or 128 samples). </p><p id="p0124" num="0124"> [00117] FIG. 21 A shows a plot of a signal produced by ultrasonic detector UD10 in response to a pulse emitted by ultrasonic emitter UE10, in response to an echo ESI caused by reflection of the pulse from an audible source AS1, and in response to an echo EOl caused by reflection of the pulse from another object 01 (e.g., a wall, a piece of furniture, another person, etc.). As noted above, the time-of-flight (TOF) of each reflection indicates the range of the corresponding reflecting object. Without more information, however, it may be difficult to reliably determine which of these reflections corresponds to the audible source for which a DOA is estimated during the same time period. The resulting range ambiguity, as illustrated in FIG. 21B, may cause an error in state indication task T200 and prevent task T300 from selecting a range- appropriate DOA estimation method for the audible signal received from source AS1. </p><p id="p0125" num="0125">[00118] One solution is to configure task T100 to select the closest range, so long as it satisfies a specified relation to a specified minimum and/or maximum value. For example, it may be assumed that the desired source is closer to the device than any other object within the field of view. Such an implementation of task T100 may be configured to select the closest range so long as it is not less than (alternatively, is at least equal to) a minimum value (e.g., corresponds to a source-to-detector distance that is not less than 20, 25, 30, 40 or 50 centimeters) and/or is not greater than (alternatively, is less than) a maximum value (e.g., corresponds to a source-to-detector distance that is not greater than 1, 1.25, 1.3, 1.5, or 2 meters). 
<!-- EPO <DP n="28"/>-->
 [00119] For a case in which the audio sensing device is to remain stationary during use, it may be desirable to perform a range initialization operation to characterize the space in which the source DOA is to be estimated (e.g., an area in front of the array) in the absence of the source. Such an operation may create a baseline range map, for example, by storing the ranges of the echoes in the unoccupied space (e.g., from walls and furniture), such that echoes indicating these ranges may be ignored during use of the device to process sound received from an audible source. </p><p id="p0126" num="0126"> [00120] Alternatively or additionally, it may be desirable to create a baseline map to characterize the ambient audio environment in a similar manner. Such a map may be used to enforce a geometric constraint on the audible DOA estimation method (e.g., to avoid a particular DOA) and/or a spatially selective processing operation (e.g., to attenuate sound arriving from a particular DOA). Such a constraint may help to reduce distraction by a directional interfering source whose location is fixed, such as a radio, television, noisy appliance, clock, etc. </p><p id="p0127" num="0127"> [00121] Method M100 may be implemented to use signals from more than one detector (e.g., from more than one microphone of the array) for range estimation. When ranging results from multiple ultrasound detectors are available, for example, using these results for DOA estimation becomes possible. Such DOA estimation may include combining ranges (e.g., times-of-flight) from corresponding energy peaks in recordings from different ultrasonic detectors using, for example, a triangulation algorithm, a lateration algorithm (e.g., trilateration or multilateration), and/or a center-of-mass algorithm. </p><p id="p0128" num="0128">[00122] It may be desirable to arrange the detectors such that the ultrasound reflection pickup is sensitive to elevation and/or can discriminate between front and back directions (e.g., as in the arrangements shown in FIGS. 2A and 11-14). A microphone arrangement may allow higher spatial discrimination for ultrasound than for audiofrequency signals. </p><p id="p0129" num="0129"> [00123] FIGS. 22A-C show an example of an application of DOA estimation using ranging results from multiple ultrasound detectors. FIG. 22A shows source ASl and object 01 located in the field of view of an implementation D30 of audio sensing device D20. FIG. 22B shows a plot of a signal produced by detector UD10 (e.g., microphone MCIO) that includes an echo El indicating a range Rl. In this case, echo El is caused by the reflection of the emitted pulse from both of source ASl and object 01, which have the same range relative to detector UD10 such that their echoes have merged. FIG. 
<!-- EPO <DP n="29"/>-->
 22C shows a plot of a corresponding signal produced by detector UD20 (e.g., microphone MC20) that includes an echo E2S1 indicating a range R2S1 of source AS1 and an echo E201 that is distinct from echo E2S1 and indicates a range R201 of object 01. </p><p id="p0130" num="0130"> [00124] Such an implementation of method Ml 00 may be configured to determine two candidate locations within the field of view from echoes El, E2S1, and E201 (e.g., using bilateration). The method may also be configured to use a DOA estimate from the audible signal produced by source AS1 (e.g., the most recent DOA estimate) to select the appropriate one among the candidate locations. In this example, selection of the appropriate candidate location also resolves a range ambiguity, supporting selection of an appropriate DOA estimation technique in task T300. Of course, such an implementation of method Ml 00 may also be configured to use detected signals from each of three or more detectors. </p><p id="p0131" num="0131"> [00125] An ultrasound DOA estimation approach may also include the use of more than one emitter, with each emitter being configured to produce a pulse that is distinguishable from pulses produced by the other emitter or emitters (e.g., a pulse that has a different emitted frequency and/or a different pulse energy profile over time). Alternatively or additionally, a difference between gains (e.g., magnitude, energy) and/or phases of echoes of the same pulse, as reflected by the same object and received by different detectors, may be used for DOA estimation. Detectors that are closely spaced may perform poorly, however, in providing gain-difference measurements. Conversely, for a case in which the microphones are also used as the ultrasonic detectors, the spacing between the detectors is typically too far apart to support phase- difference-based ultrasonic ranging. </p><p id="p0132" num="0132"> [00126] For the typical form factor of a set-top box or laptop or tablet computer, it may be expected that DOA estimation from ultrasound reflections may be practical over a range of source-to-device distances of about thirty centimeters to about three meters. When a large object is close to the detectors, ultrasound DOA estimation may become unreliable due to an overlap of the emitted and reflected energy. It may be desirable to enable and/or disable updating of an ultrasound DOA estimate (and possibly of a DOA estimate based on audio-frequency information) based on ultrasound inferred range. For example, if task T100 indicates that an object is closer than a threshold distance T<sub>m</sub>j<sub>n</sub> to the detector, and/or that the size of the object is large compared to the size (e.g., the 
<!-- EPO <DP n="30"/>-->
 aperture) of the array, it may be desirable to reject a corresponding DOA estimate as unreliable. In such case, it may be desirable for task T100 to use the most recent DOA estimate as the current estimate, or to reduce the weight w<sub>a</sub> [n] of the ultrasound DOA estimate (possibly to zero) relative to the weight w<sub>p</sub> [n] of an audio-frequency DOA estimate in a combined estimate. Alternatively, it may be desirable in such case to disable adaptation of a spatially selective processing operation that is based on DOA estimation (e.g., to fall back to a single-channel processing algorithm instead, such as noise estimation by time- averaging the received audio-frequency signal during periods of speech inactivity). </p><p id="p0133" num="0133"> [00127] The threshold distance T<sub>m</sub>j<sub>n</sub> (e.g., twenty or thirty centimeters), which may be expressed as a corresponding time-of-flight, may depend upon the wavelength and duty cycle of the emitted ultrasound signal. For example, the distance T<sub>min</sub> may be reduced by using a higher frequency for the emitted signal. Additionally or alternatively, an emitter with a lower Q may be used, such that the threshold distance T<sub>m</sub>j<sub>n</sub> may be reduced by driving the emitter with a lower duty cycle (e.g., a more narrow pulse). </p><p id="p0134" num="0134">[00128] Alternatively or additionally to DOA estimation using results from multiple ultrasound detectors, method M100 may be configured to use changes in range information over time to resolve a range ambiguity. FIGS. 23 A and 23B show a typical use scenario at two different times A and B. Object 01 does not move from time A to time B, so that range ROIA and range ROIB are the same. Source AS1 does move from time A to time B, so that range RSI A and range RS1B are different. In general, an audible source, such as a user of the device, is more likely to be moving toward or away from the device than other objects within the field of view (e.g., walls and furniture), resulting in corresponding relative displacement of the received echoes on the time axis. It may be desirable to implement method Ml 00 to track time-axis changes in ultrasound reflected signals, rather than static peaks. </p><p id="p0135" num="0135"> [00129] It may be desirable to configure such an implementation of method Ml 00 to include an operation that selects the range of the desired source based on such a change in time-of-flight of successive received echoes. For example, it may be desirable to localize a desired source by associating a DOA estimated by task T300 with a range that changes over time. </p><p id="p0136" num="0136"> [00130] FIGS. 24-26 show examples of three-channel recordings at different successive times as a user moves away from the detector array. FIG. 24 shows plots (energy vs. 
<!-- EPO <DP n="31"/>-->
 time) of signals produced by an array of three ultrasound detectors (e.g., microphones MCIO, MC20, MC30) of an implementation of device D30 in response to a pulse emitted by ultrasonic emitter UE10 at a time A and resulting echoes. FIGS. 25 and 26 show similar plots in response to pulses emitted at times B and C, respectively, where time B is after time A and time C is after time B. The audible source (e.g., a human speaker) moves away from the device from time A to time C, such that its range changes over time, in contrast to the ranges of the left and right walls which remain constant. It may be assumed that an echo that moves over time is more likely to be associated with a desired source, and that an echo that remains stationary over time is more likely to be associated with a wall, piece of furniture, or other object. </p><p id="p0137" num="0137">[00131] It may be desirable to configure task T100 to use stored information regarding object locations to ignore features whose ranges are persistent over time (e.g., static peaks, bumps, or energy concentrations) in a detected signal and to track features whose ranges change over time. For example, task T100 may be implemented to select a range by calculating differences between successive times-of-flight corresponding to each echo, and selecting the range that corresponds to a moving echo. Such an implementation of task T100 may be configured to identify a feature as persistent or moving according to a relation between a difference between successive ranges of the feature and a movement threshold value T<sub>m</sub>. In such case, task T100 may be configured to identify a feature as persistent in response to detecting that its range has changed by less than (alternatively, by not more than) T<sub>m</sub>, and to identify a feature as in motion in response to detecting that its current range is different from its previous range by at least (alternatively, by more than) T<sub>m</sub>. Examples of values for threshold value T<sub>m</sub> include distances of 10, 20, and 25 centimeters and times corresponding thereto. </p><p id="p0138" num="0138">[00132] When the echo from an audible source has the same time-of-flight as the echo from another object, the source may become invisible to the ranging detector, even if it is located in a different direction relative to the device than the masking object is. FIG. 26 shows such an example in which the audible source has moved such that its echo is merged with a masking echo (in this case, the echo from the left wall). A range that is occupied by a masking echo is also called a "blind zone." Implementing task T100 to track changes in the range of a desired source over time allows the method to detect when the source passes into a blind zone, such that the method may continue to provide an appropriate range for the desired source. 
<!-- EPO <DP n="32"/>-->
 [00133] It may be desirable to configure method M100 to detect motion of a source by detecting a corresponding Doppler frequency shift of the detected signal. For source motion at a velocity of one meter per second and an emitted ultrasound frequency of 40 kHz, the resulting Doppler frequency shift that may be expected (for a source moving directly toward or away from the array) is about 100 Hz. </p><p id="p0139" num="0139"> [00134] A DOA estimation technique may be configured to benefit from synergy between an approach that uses ultrasound and an approach that uses audible sound. For example, it may be desirable to implement task T300 to use adaptive weighting to combine an estimated DOA based on reflected ultrasound with an estimated DOA based on sound received from the desired source. In one such example, task T300 is configured to produce DOA estimates according to an expression such as the following: De b<sup>1</sup>] <sup>= w</sup>a [ ]^a [ ] + p [ ]^p [ ], where D<sub>e</sub> [n] indicates the DOA estimate for pulse n, D<sub>a</sub> [n] indicates the active DOA estimate for pulse n, w<sub>a</sub> [n] indicates the weight for the active DOA estimate for pulse n, D<sub>p</sub> [n] indicates the passive DOA estimate for pulse n, and w<sub>p</sub> [n] indicates the weight for the passive DOA estimate for pulse n. It may be desirable for weights w<sub>a</sub> [n] and w<sub>p</sub> [n] to have values in the range of from zero to one such that w<sub>a</sub> [n] + w<sub>p</sub> [n] = 1. </p><p id="p0140" num="0140"> [00135] When more than one object is located at the same distance from an ultrasound detector such that their received echoes coincide, an ultrasound DOA estimation technique that is based on differences between gains and/or phases of received echoes may become unreliable. Such merging of echoes may also complicate a DOA estimation technique that is based on times-of-flight to different detectors. In these cases, it may be desirable to reduce the weight w<sub>a</sub> [n] of an ultrasound DOA estimate (possibly to zero) relative to the weight w<sub>p</sub> [n] of a corresponding audio-frequency DOA estimate. Conversely, during periods when the sound source is silent, it may be desirable to reduce the weight w<sub>p</sub> [n] of an audio-frequency DOA estimate (possibly to zero) relative to the weight w<sub>a</sub> [n] of a corresponding ultrasound DOA estimate. </p><p id="p0141" num="0141">[00136] It may be desirable to configure task T300 to smooth the DOA estimate over time. For example, task T300 may be configured to perform a temporal smoothing operation according to an expression such as the following (also called a first-order infinite-impulse-response filter or a leaky integrator): D<sub>es</sub> [n] = D<sub>es</sub> [n— 1] + (1— a)D<sub>e</sub> [n], where D<sub>e</sub> [n] indicates the DOA estimate calculated for pulse n (possibly as a combination of DOA estimates from ultrasound and audio-frequency 
<!-- EPO <DP n="33"/>-->
 measurements), D<sub>es</sub> [n— 1] indicates the smoothed DOA estimate for the previous pulse [n-1], D<sub>es</sub> [n] indicates the smoothed DOA estimate for pulse n, and a indicates a smoothing factor having a value in the range of from zero (no smoothing) to one (maximum smoothing, no updating). Examples of values for smoothing factor a include 0.05, 0.1, 0.2, 0.25, 0.3, 0.4, and 0.5. </p><p id="p0142" num="0142"> [00137] For a DOA estimation technique that is based on times-of-flight to different detectors, it may be desirable to increase the separation between peaks of reflected echoes on the time axis by using larger inter- microphone distances. Alternatively or additionally, it may be desirable to distinguish these separate reflective peaks by using multiple directional elements, or a distributed mode actuator, and using time-domain multiplexing of the emitted waveform. </p><p id="p0143" num="0143"> [00138] Estimation of DOA from detected ultrasound signals may also be used with estimation of DOA from detected audio-frequency signals to resolve a range ambiguity by enabling the rejection of range information for objects (e.g., people) that are moving but silent. In such case, task T100 may be configured to resolve a range ambiguity by rejecting a range associated with an object whose ultrasound DOA is different than the current audio-frequency DOA estimate. </p><p id="p0144" num="0144"> [00139] While ultrasound can be used to identify sources of non-audible sound emissions, the use of ultrasound may also lead to many reflection signals that are irrelevant to human object tracking. In the presence of a continuous ultrasound wave, a talking human source may be identified by an interferometry process, as the vibrations of the throat and chest provide a phase-modulated reflection. Method M100 may be configured to include emission of such a non-pulsed signal (e.g., between ranging pulses, or by another emitter at a different frequency than the frequency of the ranging pulses), and detection of such a phase-modulated reflection may be used to indicate the presence of voice activity (e.g., as opposed to a directional audio-frequency noise signal). </p><p id="p0145" num="0145"> [00140] FIG. 27A shows a block diagram of an apparatus A100 according to a general configuration that includes an ultrasound range estimator 100, a comparator 200, and a passive DOA estimator 300. Ultrasound range estimator 100 is configured to estimate a range based on information from a detected ultrasonic signal SU10 (e.g., by performing an implementation of task T100 as described herein). Comparator 200 is configured to indicate a state of a relation between the estimated range and a threshold value (e.g., by 
<!-- EPO <DP n="34"/>-->
 performing an implementation of task T200 as described herein). Passive DO A estimator 300 is configured to produce an estimated direction of arrival DE10 of an audio-frequency component of channels SlO-1 and S10-2 of a multichannel signal, based on the indicated state of the relation (e.g., by performing an implementation of task T300 as described herein). Detected ultrasound signal SU10 may be a channel of the multichannel signal. </p><p id="p0146" num="0146"> [00141] Each of ultrasound range estimator 100 and passive DOA estimator 300 may be implemented to operate in the time domain or in a frequency domain (e.g., a subband domain or a transform domain, such as a fast Fourier transform (FFT) domain). FIG. 27B shows a block diagram of an application of an implementation A110 of apparatus A 100 in which channels SI 0-1 and SI 0-2 of a multichannel signal are transformed to the frequency domain by respective FFT modules FFT1 and FFT2. Apparatus A110 includes an implementation 110 of ultrasound range estimator 100 that is configured and arranged to receive channel SI 0-1 as detected ultrasound signal SU10 in the FFT domain and an implementation 310 of passive DOA estimator 300 that is configured and arranged to receive channels SlO-1 and S10-2 in the FFT domain. </p><p id="p0147" num="0147">[00142] For a case in which detected ultrasound signal SU10 is a channel of the multichannel signal (i.e., is based on a signal produced by one among an array of microphones), it may be desirable to sample the channel at a suitably high sampling rate (e.g., more than twice the frequency of the emitted ultrasound signal). To reduce power consumption and/or computational complexity, however, it may be desirable to configure passive DOA estimator 300 to operate on the channels at a lower sampling rate (e.g., 7, 8, 12, 16, 20, 22, 24, 32, 44,1 or 48 kHz). </p><p id="p0148" num="0148"> [00143] FIG. 28A shows a block diagram of an implementation A120 of apparatus A100 that includes a filter bank FB10 that is arranged to receive first channel SI 0-1 at a high sampling rate. Filter bank FB10 is configured to produce a high-frequency (i.e., ultrasonic) band at the high sampling rate as detected ultrasound signal UD10 and to produce a low-frequency (i.e., audio-frequency) band at a lower sampling rate (e.g., by decimation and/or resampling) as input to passive DOA estimator 300. In this example, apparatus A120 receives channel S10-2 at the lower sampling rate, although apparatus A 120 may also be implemented to decimate and/or resample second channel SI 0-2 from the high sampling rate in a similar manner. In this particular example, apparatus 
<!-- EPO <DP n="35"/>-->
 A120 also includes FFT modules FFT1, FFT2 that are configured to provide channels SlO-1 and S10-2 in the FFT domain to an instance of passive DOA estimator 310. </p><p id="p0149" num="0149">[00144] Apparatus A100 may be implemented to use detected ultrasound signals from more than one detector (e.g., from more than one microphone of the array) for range estimation and possibly for DOA estimation. FIG. 28B shows a block diagram of an application of an implementation A 130 of apparatus A 100 in which four channels S10- 1, S10-2, S10-3, and S10-4 of a multichannel signal are transformed to the FFT domain by respective FFT modules FFT1 to FFT4. In this example, an implementation 112 of range estimator 110 is configured to receive the frequency-domain channels as a multichannel instance of detected ultrasound signal SU10 (e.g., as shown in FIGS. 24- 26), and an implementation 312 of passive DOA estimator 310 calculates an estimated DOA of an audio-frequency component of the multichannel signal. Apparatus A130 may also be configured to perform a spatially selective processing operation that includes selecting a subset of the four channels based on the estimated DOA (e.g., selecting the pair of channels that corresponds to the microphone pair whose endfire direction coincides with the estimated DOA). Additional disclosure of microphone array subset selection based on estimated DOA is found in U.S. Pat. Appl. No. 13/029,582 (filed Feb. 17, 2011). </p><p id="p0150" num="0150"> [00145] FIG. 29A shows a block diagram of an implementation A140 of apparatus A100 (e.g., of apparatus A110, A120, and/or A130) that includes an ultrasound signal generator SG10. Signal generator SG10 is configured to generate an ultrasound ranging signal SR10 (e.g., a series of pulses) to be emitted by emitter UE10. In this example, signal generator SG10 also indicates, to range estimator 100, the time at which each pulse is generated. In another example, range estimator 100 determines the time of each pulse emission (i.e., the beginning of the time-of-flight) from detected ultrasound signal SU10 instead. </p><p id="p0151" num="0151"> [00146] It may be desirable to implement ultrasound range estimator 100 to select among more than one calculated range (e.g., to resolve a range ambiguity as described herein). FIG. 29B shows a block diagram of an implementation 120 of ultrasound range estimator 100. Range estimator 120 includes a range calculator 102, which is configured to calculate at least one range for detected ultrasound signal SU10 as described herein. For example, range calculator 102 may be configured to calculate a range from each of one or more echoes of an emitted ultrasound pulse. 
<!-- EPO <DP n="36"/>-->
 [00147] Range estimator 120 also includes range selection logic 104 that is configured to select from among the calculated ranges as described herein. For example, range selection logic 104 may be configured to select the smallest among the calculated ranges (or the maximum of the smallest calculated range and a minimum range value). </p><p id="p0152" num="0152">[00148] In this example, range estimator 120 also includes a range history 106 that is configured to store a series of estimated ranges of a desired source over time. Range selection logic 104 may be configured to use range history 106 to select a moving range (e.g., a current calculated range that is not present in range history 106). Range history 106 may include a history of locations (e.g., ranges and DOAs) of the desired source, and may also be configured to include ranges and/or DOAs of more than one desired source and/or a map of other objects in the field of view. </p><p id="p0153" num="0153"> [00149] Range estimator 120 may be implemented to include more than one instance of range calculator 102, each corresponding to a different channel of a multichannel instance of detected ultrasound signal SU10. Apparatus A100 may be configured to use multiple ranges of the same echo for active DOA estimation as described herein. In such case, range selection logic 104 may be configured to select from among several candidate locations, based on an audio-frequency and/or ultrasound DOA estimate, and to select the range corresponding to the selected location. </p><p id="p0154" num="0154"> [00150] FIG. 30A shows a block diagram of an implementation A150 of apparatus A100 (e.g., of apparatus A110, A120, A130, and/or A140) that includes an active DOA estimator 400. Active DOA estimator 400 is configured to calculate a second estimate of a DOA of the audio-frequency component. Active DOA estimator 400 may be configured to calculate the second DOA estimate based on differences in gain and/or phase between the same echo as received by two or more detectors. Alternatively or additionally, active DOA estimator 400 may be configured to calculate the second DOA estimate based on differences in times-of-flight of the same echo to each of a plurality of detectors. In such case, active DOA estimator 400 may be configured and arranged to receive multiple ranges from the same echo from range estimator 120. An implementation of apparatus A 150 that includes an instance of range estimator 120 may be configured to use the active DOA estimate to update range history 106. </p><p id="p0155" num="0155">[00151] Apparatus A150 also includes a combiner 500 that is configured to combine the DOA estimates produced by estimators 300 and 400 according to a relative weighting to obtain a combined estimate of a direction of arrival. The relative weighting may be 
<!-- EPO <DP n="37"/>-->
 based on a gain of the audio-frequency component (e.g., such that the relative weighting of the audible DOA is heavier when the audible level is high than when it is low or silent). Additionally or alternatively, the relative weighting may be based on a difference between the calculated DOA estimates (e.g., such that the ultrasound DOA estimate is weighted less heavily when it is very different from the audible DOA estimate, especially when the level of the audio-frequency component is high and/or the audible DOA estimate is consistent with recent combined DOA estimates). </p><p id="p0156" num="0156">[00152] Additionally or alternatively, the relative weighting applied by combiner 500 may be based on a difference between times-of-flight of successive ultrasound signals. A zero or otherwise very low difference between times-of-flight of successive ultrasound signals may indicate that the source has moved into an ultrasound blind zone, for example, such that the reliability of a corresponding ultrasound DOA estimate may be reduced. In this case, it may be desirable to reduce the relative weighting applied by combiner 500 to the ultrasound DOA estimate. </p><p id="p0157" num="0157"> [00153] FIG. 30B shows a block diagram of an apparatus MF100 according to a general configuration. Apparatus MF100 includes means F100 for estimating a range based on information from a detected ultrasonic signal US10 (e.g., by performing an implementation of task T100 as described herein). Apparatus MF100 also includes means F200 for indicating a state of a relation between the estimated range and a threshold value (e.g., by performing an implementation of task T200 as described herein). Apparatus MF100 also includes means F300 for producing an estimated direction of arrival DE10 of an audio-frequency component of channels SlO-1 and S10- 2 of a multichannel signal, based on the indicated state of the relation (e.g., by performing an implementation of task T300 as described herein). </p><p id="p0158" num="0158"> [00154]FIG. 31 shows a block diagram of an implementation A160 of apparatus A100 (e.g., of apparatus A110, A120, A130, A140, and/or A150) that includes a spatially selective filter SSP10. Filter SSP10 is configured to perform one or more spatially selective processing operations on the multichannel signal. For example, filter SSP10 may be configured to produce an enhanced signal SE10 by attenuating frequency components of the multichannel signal that arrive from directions that are different than estimated DOA DE10 (e.g., from directions that are outside an accepted range of directions around estimated DOA DE10, such as nonselected sectors). For a case in which the multichannel signal includes more than two channels, filter SSP10 may be 
<!-- EPO <DP n="38"/>-->
 configured to select a subset (e.g., a pair) of channels based on estimated DOA DE10. For example, filter SSP10 may be configured to select the pair of channels that correspond to the microphone pair whose endfire (i.e., axis) direction coincides most closely with estimated DOA DE10. </p><p id="p0159" num="0159"> [00155] Alternatively or additionally, filter SSP10 may be configured to calculate an estimate SN10 of a noise component of the multichannel signal that includes frequency components that arrive from directions different from estimated DOA DE10 (e.g., from nonselected sectors). Apparatus A 160 also includes a noise reduction module NR10 that is configured to use noise estimate SN10 to perform a noise reduction operation on one or more channels of enhanced signal SE10 (e.g., Wiener filtering or spectral subtraction of noise estimate SN10 from one or more channels of enhanced signal SE10). Other applications of estimated DOA DE10 include selection of a focus window in an imaging operation (e.g., using a camera of the audio sensing device). </p><p id="p0160" num="0160">[00156] In general, the ranging and DOA estimation strategies described herein may be implemented using a fixed-location or portable audio sensing device that has an ultrasonic emitter and an array of two or more microphones configured to receive acoustic signals. Examples of a portable audio sensing device that may be constructed to include such an emitter and array and to be used with these ranging and DOA estimation strategies for audio recording and/or voice communications applications include a telephone handset (e.g., a smartphone or other cellular telephone handset); a handheld audio and/or video recorder; a personal media player configured to record audio and/or video content; and a notebook computer, laptop computer, netbook computer, tablet computer, or other portable computing device. Other examples of audio sensing devices that may be constructed to include such an emitter and array and to be used with these ranging and DOA estimation strategies include set-top boxes and audio- and/or video-conferencing devices. </p><p id="p0161" num="0161"> [00157] Each of the two or more microphones of the array may have a response that is omnidirectional, bidirectional, or unidirectional (e.g., cardioid). The various types of microphones that may be used in the array include (without limitation) piezoelectric microphones, dynamic microphones, and electret microphones. In a device for portable voice communications, such as a handset, the center-to-center spacing between adjacent microphones of the array is typically in the range of from about four to five centimeters, although a larger spacing (e.g., up to ten or fifteen centimeters) is also possible in a 
<!-- EPO <DP n="39"/>-->
 device such as a smartphone, and even larger spacings (e.g., up to 20, 25 or 30 centimeters or more) are possible in a device such as a tablet computer. The microphones of the array may be arranged along a line or, alternatively, such that their centers lie at the vertices of a two-dimensional (e.g., triangular) or three-dimensional shape. In general, however, the microphones of the array may be disposed in any configuration deemed suitable for the particular application. </p><p id="p0162" num="0162"> [00158] During the operation of a multi-microphone audio sensing device as described herein, the microphone array produces a multichannel signal in which each channel is based on the response of a corresponding one of the microphones to the acoustic environment. One microphone may receive a particular sound more directly than another microphone, such that the corresponding channels differ from one another to provide collectively a more complete representation of the acoustic environment than can be captured using a single microphone. </p><p id="p0163" num="0163"> [00159] It may be desirable for the array to perform one or more processing operations on the signals produced by the microphones to produce multichannel signal S10. FIG. 32A shows a block diagram of an example R100 of a microphone array that includes microphones MCIO and MC20. Array R100 also includes an audio preprocessing stage AP10 that is configured to perform one or more such operations on the signals produced by the microphones, which may include (without limitation) impedance matching, analog-to-digital conversion, gain control, and/or filtering in the analog and/or digital domains. </p><p id="p0164" num="0164"> [00160] FIG. 32B shows a block diagram of an implementation R110 of array R100. Array R110 includes an implementation AP20 of audio preprocessing stage AP10 that includes analog preprocessing stages PlOa and PlOb. In one example, stages PlOa and PlOb are each configured to perform a highpass filtering operation (e.g., with a cutoff frequency of 50, 100, or 200 Hz) on the corresponding microphone signal. </p><p id="p0165" num="0165">[00161] It may be desirable for the microphone array to produce the multichannel signal as a digital signal, that is to say, as a sequence of samples. Array R110, for example, includes analog-to-digital converters (ADCs) ClOa and ClOb that are each arranged to sample the corresponding analog channel. Typical sampling rates for acoustic applications include 8 kHz, 12 kHz, 16 kHz, and other frequencies in the range of from about 8 to about 16 kHz, although sampling rates as high as about 44.1 or 48 kHz may also be used. In this particular example, array R210 also includes digital preprocessing 
<!-- EPO <DP n="40"/>-->
 stages P20a and P20b that are each configured to perform one or more preprocessing operations (e.g., echo cancellation, noise reduction, and/or spectral shaping) on the corresponding digitized channel. </p><p id="p0166" num="0166"> [00162] For a case in which the microphone array is used to produce detected ultrasound signal UD10 as well as multichannel signal S10, it may be desirable to configure converters ClOa and ClOb to use a sampling rate that is more than twice the frequency of the emitted ultrasound signal. In such case, it may also be desirable to configure the array to provide detected ultrasound signal UD10 at the output of converter ClOa and/or ClOb (i.e., as opposed to the processed signal at the output of stage PlOa and/or P20b). Extensions of the example of array R100 and R110 to more than two (e.g., three, four, or five) microphones are expressly contemplated and hereby disclosed. </p><p id="p0167" num="0167">[00163] FIG. 33A shows a block diagram of an implementation D100 of audio sensing device D20 (e.g., of D22 or D24). Device D100 includes an instance of any of the implementations of microphone array R100 disclosed herein. Device D100 also includes an instance of any of the implementations of apparatus A 100 (alternatively, MF100) described herein that is configured to process a multichannel signal S10 produced by array R100. For example, apparatus A100 may be configured to process multichannel signal S10 according to an instance of any of the implementations of method M100 disclosed herein. Apparatus A100 may be implemented in hardware or in a combination of hardware with software (e.g., firmware). For example, apparatus A100 may be implemented on a processor of device D100 that is also configured to perform a spatially selective processing operation as described herein on the processed multichannel signal (e.g., one or more operations that determine the distance between the audio sensing device and a particular sound source, reduce noise, enhance signal components that arrive from a particular direction, and/or separate one or more sound components from other environmental sounds). </p><p id="p0168" num="0168"> [00164] FIG. 33B shows a block diagram of a communications device D200 (e.g., a smartphone) that is an implementation of device D100. Device D200 includes a chip or chipset CS10 (e.g., a mobile station modem (MSM) chipset) that includes apparatus A100. Chip/chipset CS10 may include one or more processors, which may be configured to execute one or more software and/or firmware parts of apparatus A 100 (e.g., as instructions). Chip/chipset CS10 may also include processing elements of array R100 (e.g., elements of audio preprocessing stage AP10). Chip/chipset CS10 includes a 
<!-- EPO <DP n="41"/>-->
 receiver, which is configured to receive a radio-frequency (RF) communications signal via antenna C30 and to decode and reproduce an audio signal encoded within the RF signal via loudspeaker SP10, and a transmitter, which is configured to encode an audio signal that is based on a processed signal produced by apparatus A100 and to transmit an RF communications signal that describes the encoded audio signal via antenna C30. For example, one or more processors of chip/chipset CS10 may be configured to perform a noise reduction operation as described above on one or more channels of the multichannel signal such that the encoded audio signal is based on the noise-reduced signal. Chip/chipset CS10 is also configured to display information and receive user input via touchscreen display C20 and to drive emitter UE10 (e.g., to include an instance of signal generator SG10 as described herein). </p><p id="p0169" num="0169"> [00165] The class of portable computing devices currently includes devices having names such as laptop computers, notebook computers, netbook computers, ultra- portable computers, tablet computers, mobile Internet devices, smartbooks, and smartphones. One type of such device has a slate or slab configuration and may also include a slide-out keyboard. FIGS. 34A-D show another type of such device that has a top panel which includes a display screen and a bottom panel that may include a keyboard, wherein the two panels may be connected in a clamshell or other hinged relationship. </p><p id="p0170" num="0170"> [00166] FIG. 34A shows a front view of an example of such a portable computing implementation D700 of device DlOO that includes ultrasonic emitter UE10 and four microphones MCIO, MC20, MC30, MC40 arranged in a linear array on top panel (e.g., bezel) PL10 above display screen SC10. FIG. 34B shows a top view of top panel PL10 that shows the positions of the four microphones in another dimension. FIG. 34C shows a front view of another example of such a portable computing device D710 that includes ultrasonic emitter UE10 and four microphones MCIO, MC20, MC30, MC40 arranged in a nonlinear array on top panel PL12 above display screen SC10. FIG. 34D shows a top view of top panel PL12 that shows the positions of the four microphones in another dimension, with microphones MCIO, MC20, and MC30 disposed at the front face of the panel and microphone MC40 disposed at the back face of the panel. FIGS. 16B and 17 show close-ups of array R100 and emitter UE10 on similar devices. </p><p id="p0171" num="0171">[00167] It may be expected that the user may move from side to side in front of such a device D700 or D710, toward and away from the device, and/or even around the device 
<!-- EPO <DP n="42"/>-->
 (e.g., from the front of the device to the back) during use. It may be desirable to implement an associated processing system as described herein to provide a suitable tradeoff between preservation of near-field speech and attenuation of far-field interference, and/or to provide nonlinear signal attenuation in undesired directions. It may be desirable to select a linear microphone configuration for minimal voice distortion, or a nonlinear microphone configuration for better noise reduction. </p><p id="p0172" num="0172">[00168] FIG. 35 shows a diagram of a portable implementation D800 of multimicrophone audio sensing device D100 for handheld applications. Device D800 includes emitter UE10, a touchscreen display TS10, a user interface selection control UI10 (left side), a user interface navigation control UI20 (right side), two loudspeakers SP10 and SP20, and an implementation of array RlOO that includes three front microphones MCIO, MC20, MC30 and a back microphone MC40. Each of the user interface controls may be implemented using one or more of pushbuttons, trackballs, click-wheels, touchpads, joysticks and/or other pointing devices, etc. Device D800 may also include a camera CAM in the display face of the device and/or in the back face of the device (i.e., the face that is opposite the touchscreen display). A typical size of device D800, which may be used in a browse-talk mode or a game-play mode, is about fifteen centimeters by twenty centimeters. A portable multimicrophone audio sensing device may be similarly implemented as a tablet computer that includes a touchscreen display on a top surface (e.g., a "slate," such as the iPad (Apple, Inc.), Slate (Hewlett- Packard Co., Palo Alto, CA) or Streak (Dell Inc., Round Rock, TX)), with microphones of array RlOO being disposed within the margin of the top surface (e.g., within a screen bezel) and/or at one or more side surfaces of the tablet computer. </p><p id="p0173" num="0173"> [00169] Applications of range and DOA estimation strategies as disclosed herein are not limited to portable audio sensing devices. FIGS. 36A-D show top views of several examples of a conferencing device that includes an omnidirectional (e.g., cylindrical) implementation of ultrasonic emitter UE10. FIG. 36A includes a three-microphone implementation of array RlOO (microphones MCIO, MC20, and MC30). FIG. 36B includes a four-microphone implementation of array RlOO (microphones MCIO, MC20, MC30, and MC40). FIG. 36C includes a five-microphone implementation of array RlOO (microphones MCIO, MC20, MC30, MC40, and MC50). FIG. 36D includes a six-microphone implementation of array RlOO (microphones MCIO, MC20, MC30, MC40, MC50, and MC60). It may be desirable to position each of the microphones of 
<!-- EPO <DP n="43"/>-->
 array R100 at a corresponding vertex of a regular polygon. A loudspeaker for reproduction of the far-end audio signal may be included within the device, and/or such a loudspeaker may be located separately from the device (e.g., to reduce acoustic feedback). </p><p id="p0174" num="0174"> [00170] Additional stationary use case examples of device D100, which may be configured to support interactive and/or communications applications (e.g., via a Voice over IP (VoIP) protocol), include a game console (e.g., any of the consoles in the Microsoft Xbox, Sony Playstation, or Nintendo Wii series) and a television set-top box, such as for satellite television, cable television, digital video recording (DVR), or streaming television use (e.g., Revue (Logitech, Inc., Fremont, CA); Roku HD, XD, or XDIS (Roku, Inc., Saratoga, CA); Apple TV (Apple Inc., Cupertino, CA)). </p><p id="p0175" num="0175">[00171] The methods and apparatus disclosed herein may be applied generally in any transceiving and/or audio sensing application, especially mobile or otherwise portable instances of such applications. For example, the range of configurations disclosed herein includes communications devices that reside in a wireless telephony communication system configured to employ a code-division multiple-access (CDMA) over-the-air interface. Nevertheless, it would be understood by those skilled in the art that a method and apparatus having features as described herein may reside in any of the various communication systems employing a wide range of technologies known to those of skill in the art, such as systems employing Voice over IP (VoIP) over wired and/or wireless (e.g., CDMA, TDMA, FDMA, and/or TD-SCDMA) transmission channels. </p><p id="p0176" num="0176">[00172] It is expressly contemplated and hereby disclosed that communications devices disclosed herein may be adapted for use in networks that are packet-switched (for example, wired and/or wireless networks arranged to carry audio transmissions according to protocols such as VoIP) and/or circuit-switched. It is also expressly contemplated and hereby disclosed that communications devices disclosed herein may be adapted for use in narrowband coding systems (e.g., systems that encode an audio frequency range of about four or five kilohertz) and/or for use in wideband coding systems (e.g., systems that encode audio frequencies greater than five kilohertz), including whole -band wideband coding systems and split-band wideband coding systems. </p><p id="p0177" num="0177"> [00173] The presentation of the configurations described herein is provided to enable any person skilled in the art to make or use the methods and other structures disclosed 
<!-- EPO <DP n="44"/>-->
 herein. The flowcharts, block diagrams, and other structures shown and described herein are examples only, and other variants of these structures are also within the scope of the disclosure. Various modifications to these configurations are possible, and the generic principles presented herein may be applied to other configurations as well. Thus, the present disclosure is not intended to be limited to the configurations shown above but rather is to be accorded the widest scope consistent with the principles and novel features disclosed in any fashion herein, including in the attached claims as filed, which form a part of the original disclosure. </p><p id="p0178" num="0178"> [00174] Those of skill in the art will understand that information and signals may be represented using any of a variety of different technologies and techniques. For example, data, instructions, commands, information, signals, bits, and symbols that may be referenced throughout the above description may be represented by voltages, currents, electromagnetic waves, magnetic fields or particles, optical fields or particles, or any combination thereof. </p><p id="p0179" num="0179"> [00175] Important design requirements for implementation of a configuration as disclosed herein may include minimizing processing delay and/or computational complexity (typically measured in millions of instructions per second or MIPS), especially for computation-intensive applications, such as applications for voice communications at sampling rates higher than eight kilohertz (e.g., 12, 16, 44.1, 48, or 192 kHz). </p><p id="p0180" num="0180"> [00176] Goals of a multi-microphone processing system as described herein may include achieving ten to twelve dB in overall noise reduction, preserving voice level and color during movement of a desired speaker, obtaining a perception that the noise has been moved into the background instead of an aggressive noise removal, dereverberation of speech, and/or enabling the option of post-processing (e.g., spectral masking and/or another spectral modification operation based on a noise estimate, such as spectral subtraction or Wiener filtering) for more aggressive noise reduction. </p><p id="p0181" num="0181">[00177] The various elements of an implementation of an apparatus as disclosed herein (e.g., apparatus A100, A110, A120, A130, A140, A150, A160, or MF100) may be embodied in any hardware structure, or any combination of hardware with software and/or firmware, that is deemed suitable for the intended application. For example, such elements may be fabricated as electronic and/or optical devices residing, for example, on the same chip or among two or more chips in a chipset. One example of 
<!-- EPO <DP n="45"/>-->
 such a device is a fixed or programmable array of logic elements, such as transistors or logic gates, and any of these elements may be implemented as one or more such arrays. Any two or more, or even all, of these elements may be implemented within the same array or arrays. Such an array or arrays may be implemented within one or more chips (for example, within a chipset including two or more chips). </p><p id="p0182" num="0182"> [00178] One or more elements of the various implementations of the apparatus disclosed herein may also be implemented in part as one or more sets of instructions arranged to execute on one or more fixed or programmable arrays of logic elements, such as microprocessors, embedded processors, IP cores, digital signal processors, FPGAs (field-programmable gate arrays), ASSPs (application- specific standard products), and ASICs (application- specific integrated circuits). Any of the various elements of an implementation of an apparatus as disclosed herein may also be embodied as one or more computers (e.g., machines including one or more arrays programmed to execute one or more sets or sequences of instructions, also called "processors"), and any two or more, or even all, of these elements may be implemented within the same such computer or computers. </p><p id="p0183" num="0183"> [00179] A processor or other means for processing as disclosed herein may be fabricated as one or more electronic and/or optical devices residing, for example, on the same chip or among two or more chips in a chipset. One example of such a device is a fixed or programmable array of logic elements, such as transistors or logic gates, and any of these elements may be implemented as one or more such arrays. Such an array or arrays may be implemented within one or more chips (for example, within a chipset including two or more chips). Examples of such arrays include fixed or programmable arrays of logic elements, such as microprocessors, embedded processors, IP cores, DSPs, FPGAs, ASSPs, and ASICs. A processor or other means for processing as disclosed herein may also be embodied as one or more computers (e.g., machines including one or more arrays programmed to execute one or more sets or sequences of instructions) or other processors. It is possible for a processor as described herein to be used to perform tasks or execute other sets of instructions that are not directly related to a procedure of an implementation of method Ml 00, such as a task relating to another operation of a device or system in which the processor is embedded (e.g., an audio sensing device). It is also possible for part of a method as disclosed herein to be performed by a processor of the audio sensing device (e.g., passive DOA estimation task T300) and for another part of 
<!-- EPO <DP n="46"/>-->
 the method to be performed under the control of one or more other processors (e.g., range estimation task T100). </p><p id="p0184" num="0184"> [00180] Those of skill will appreciate that the various illustrative modules, logical blocks, circuits, and tests and other operations described in connection with the configurations disclosed herein may be implemented as electronic hardware, computer software, or combinations of both. Such modules, logical blocks, circuits, and operations may be implemented or performed with a general purpose processor, a digital signal processor (DSP), an ASIC or ASSP, an FPGA or other programmable logic device, discrete gate or transistor logic, discrete hardware components, or any combination thereof designed to produce the configuration as disclosed herein. For example, such a configuration may be implemented at least in part as a hard-wired circuit, as a circuit configuration fabricated into an application- specific integrated circuit, or as a firmware program loaded into non-volatile storage or a software program loaded from or into a data storage medium as machine-readable code, such code being instructions executable by an array of logic elements such as a general purpose processor or other digital signal processing unit. A general purpose processor may be a microprocessor, but in the alternative, the processor may be any conventional processor, controller, microcontroller, or state machine. A processor may also be implemented as a combination of computing devices, e.g., a combination of a DSP and a microprocessor, a plurality of microprocessors, one or more microprocessors in conjunction with a DSP core, or any other such configuration. A software module may reside in a non-transitory storage medium such as RAM (random-access memory), ROM (read-only memory), nonvolatile RAM (NVRAM) such as flash RAM, erasable programmable ROM (EPROM), electrically erasable programmable ROM (EEPROM), registers, hard disk, a removable disk, or a CD-ROM; or in any other form of storage medium known in the art. An illustrative storage medium is coupled to the processor such the processor can read information from, and write information to, the storage medium. In the alternative, the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative, the processor and the storage medium may reside as discrete components in a user terminal. </p><p id="p0185" num="0185"> [00181] It is noted that the various methods disclosed herein (e.g., method M100 and the other methods disclosed with reference to operation of the various apparatus and 
<!-- EPO <DP n="47"/>-->
 devices described herein) may be performed by an array of logic elements such as a processor, and that the various elements of an apparatus as described herein may be implemented in part as modules designed to execute on such an array. As used herein, the term "module" or "sub-module" can refer to any method, apparatus, device, unit or computer-readable data storage medium that includes computer instructions (e.g., logical expressions) in software, hardware or firmware form. It is to be understood that multiple modules or systems can be combined into one module or system and one module or system can be separated into multiple modules or systems to perform the same functions. When implemented in software or other computer-executable instructions, the elements of a process are essentially the code segments to perform the related tasks, such as with routines, programs, objects, components, data structures, and the like. The term "software" should be understood to include source code, assembly language code, machine code, binary code, firmware, macrocode, microcode, any one or more sets or sequences of instructions executable by an array of logic elements, and any combination of such examples. The program or code segments can be stored in a processor-readable storage medium or transmitted by a computer data signal embodied in a carrier wave over a transmission medium or communication link. </p><p id="p0186" num="0186">[00182] The implementations of methods, schemes, and techniques disclosed herein may also be tangibly embodied (for example, in tangible, computer-readable features of one or more computer-readable storage media as listed herein) as one or more sets of instructions executable by a machine including an array of logic elements (e.g., a processor, microprocessor, microcontroller, or other finite state machine). The term "computer-readable medium" may include any medium that can store or transfer information, including volatile, nonvolatile, removable, and non-removable storage media. Examples of a computer-readable medium include an electronic circuit, a semiconductor memory device, a ROM, a flash memory, an erasable ROM (EROM), a floppy diskette or other magnetic storage, a CD-ROM/DVD or other optical storage, a hard disk or any other medium which can be used to store the desired information, a fiber optic medium, a radio frequency (RF) link, or any other medium which can be used to store the desired information and can be accessed. The computer data signal may include any signal that can propagate over a transmission medium such as electronic network channels, optical fibers, air, electromagnetic, RF links, etc. The code segments may be downloaded via computer networks such as the Internet or an intranet. 
<!-- EPO <DP n="48"/>-->
 In any case, the scope of the present disclosure should not be construed as limited by such embodiments. </p><p id="p0187" num="0187"> [00183] Each of the tasks of the methods described herein may be embodied directly in hardware, in a software module executed by a processor, or in a combination of the two. In a typical application of an implementation of a method as disclosed herein, an array of logic elements (e.g., logic gates) is configured to perform one, more than one, or even all of the various tasks of the method. One or more (possibly all) of the tasks may also be implemented as code (e.g., one or more sets of instructions), embodied in a computer program product (e.g., one or more data storage media, such as disks, flash or other nonvolatile memory cards, semiconductor memory chips, etc.), that is readable and/or executable by a machine (e.g., a computer) including an array of logic elements (e.g., a processor, microprocessor, microcontroller, or other finite state machine). The tasks of an implementation of a method as disclosed herein may also be performed by more than one such array or machine. In these or other implementations, the tasks may be performed within a device for wireless communications such as a cellular telephone or other device having such communications capability. Such a device may be configured to communicate with circuit- switched and/or packet-switched networks (e.g., using one or more protocols such as VoIP). For example, such a device may include RF circuitry configured to receive and/or transmit encoded frames. </p><p id="p0188" num="0188"> [00184] It is expressly disclosed that the various methods disclosed herein may be performed by a portable communications device (e.g., a smartphone or other handset), and that the various apparatus described herein may be included within such a device. A typical real-time (e.g., online) application is a telephone conversation conducted using such a mobile device. </p><p id="p0189" num="0189"> [00185] In one or more exemplary embodiments, the operations described herein may be implemented in hardware, software, firmware, or any combination thereof. If implemented in software, such operations may be stored on or transmitted over a computer-readable medium as one or more instructions or code. The term "computer- readable media" includes both computer-readable storage media and communication (e.g., transmission) media. By way of example, and not limitation, computer-readable storage media can comprise an array of storage elements, such as semiconductor memory (which may include without limitation dynamic or static RAM, ROM, EEPROM, and/or flash RAM), or ferroelectric, magnetoresistive, ovonic, polymeric, or 
<!-- EPO <DP n="49"/>-->
 phase-change memory; CD-ROM or other optical disk storage; and/or magnetic disk storage or other magnetic storage devices. Such storage media may store information in the form of instructions or data structures that can be accessed by a computer. Communication media can comprise any medium that can be used to carry desired program code in the form of instructions or data structures and that can be accessed by a computer, including any medium that facilitates transfer of a computer program from one place to another. Also, any connection is properly termed a computer-readable medium. For example, if the software is transmitted from a website, server, or other remote source using a coaxial cable, fiber optic cable, twisted pair, digital subscriber line (DSL), or wireless technology such as infrared, radio, and/or microwave, then the coaxial cable, fiber optic cable, twisted pair, DSL, or wireless technology such as infrared, radio, and/or microwave are included in the definition of medium. Disk and disc, as used herein, includes compact disc (CD), laser disc, optical disc, digital versatile disc (DVD), floppy disk and Blu-ray Disc™ (Blu-Ray Disc Association, Universal City, CA), where disks usually reproduce data magnetically, while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer-readable media. </p><p id="p0190" num="0190"> [00186] An acoustic signal processing apparatus as described herein may be incorporated into an electronic device that accepts speech input in order to control certain operations, or may otherwise benefit from separation of desired noises from background noises, such as communications devices. Many applications may benefit from enhancing or separating clear desired sound from background sounds originating from multiple directions. Such applications may include human-machine interfaces in electronic or computing devices which incorporate capabilities such as voice recognition and detection, speech enhancement and separation, voice-activated control, and the like. It may be desirable to implement such an acoustic signal processing apparatus to be suitable in devices that only provide limited processing capabilities. </p><p id="p0191" num="0191">[00187] The elements of the various implementations of the modules, elements, and devices described herein may be fabricated as electronic and/or optical devices residing, for example, on the same chip or among two or more chips in a chipset. One example of such a device is a fixed or programmable array of logic elements, such as transistors or gates. One or more elements of the various implementations of the apparatus described herein may also be implemented in whole or in part as one or more sets of 
<!-- EPO <DP n="50"/>-->
 instructions arranged to execute on one or more fixed or programmable arrays of logic elements such as microprocessors, embedded processors, IP cores, digital signal processors, FPGAs, ASSPs, and ASICs. </p><p id="p0192" num="0192"> [00188] It is possible for one or more elements of an implementation of an apparatus as described herein to be used to perform tasks or execute other sets of instructions that are not directly related to an operation of the apparatus, such as a task relating to another operation of a device or system in which the apparatus is embedded. It is also possible for one or more elements of an implementation of such an apparatus to have structure in common (e.g., a processor used to execute portions of code corresponding to different elements at different times, a set of instructions executed to perform tasks corresponding to different elements at different times, or an arrangement of electronic and/or optical devices performing operations for different elements at different times). For example, one or more (possibly all) of FFT modules FFT1 to FFT4 may be implemented to use the same structure (e.g., the same set of instructions defining an FFT operation) at different times. </p><p id="p0193" num="0193">WHAT IS CLAIMED IS: 
</p></description><claims mxw-id="PCLM46552617" ref-ucid="WO-2012161825-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="51"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method of signal processing, said method comprising: </claim-text><claim-text> based on information from a first reflection of a first ultrasonic signal, estimating a first range of a sound-emitting object; </claim-text><claim-text> based on the estimated first range, selecting one among a plurality of direction- of-arrival estimation operations; and </claim-text><claim-text> performing the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method according to claim 1, wherein a first channel of the multichannel signal is based on a signal produced by a first detector and a second channel of the multichannel signal is based on a signal produced by a second detector. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method according to claim 2, wherein said estimating the first range includes calculating a time of flight of the first ultrasonic signal to the first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method according to claim 1, wherein said estimating the first range includes calculating a time of flight of the first ultrasonic signal to a first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector, and </claim-text><claim-text> wherein said estimating the first range includes calculating a time of flight of the first ultrasonic signal to a second detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the second detector. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method according to claim 4, wherein the audio-frequency component of the multichannel signal is based on signals produced by the first and second detectors. <!-- EPO <DP n="52"/>--> </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method according to claim 4, wherein said method comprises, based on the calculated times of flight of the first ultrasonic signal to the first and second detectors, calculating a second estimate of a direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method according to claim 6, wherein said method comprises combining the calculated estimate of a direction of arrival and the calculated second estimate according to a relative weighting to obtain a combined estimate of a direction of arrival, </claim-text><claim-text> wherein the relative weighting is based on a level of the audio-frequency component. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method according to claim 7, wherein the relative weighting is based on a difference between the calculated estimate of a direction of arrival and the calculated second estimate. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method according to claim 7, wherein said method includes calculating a time of flight of a second ultrasonic signal to the first detector, and </claim-text><claim-text> wherein the relative weighting is based on a difference between the times of flight of the first and second ultrasonic signals to the first detector. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method according to claim 2, wherein said method comprises: </claim-text><claim-text> based on information from a second reflection of the first ultrasonic signal, estimating a second range; </claim-text><claim-text> based on information from a first reflection of a second ultrasonic signal that is emitted after the first ultrasonic signal, estimating a third range; </claim-text><claim-text> based on information from a second reflection of the second ultrasonic signal, estimating a fourth range; </claim-text><claim-text> based on a relation between (A) a difference between the first and third ranges and (B) a difference between the second and fourth ranges, selecting one among the third and fourth ranges; </claim-text><claim-text> based on the selected range, performing a second selection of one among the plurality of direction-of-arrival estimation operations; and <!-- EPO <DP n="53"/>--> performing the direction-of-arrival estimation operation selected by the second selection to calculate, based on information from the audio-frequency component, a second estimate of the direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method according to claim 2, wherein said method comprises: </claim-text><claim-text> calculating a time of flight of a second ultrasonic signal to the first detector and a time of flight of the second ultrasonic signal to the second detector; </claim-text><claim-text> detecting that (A) a difference between the time of flight of the first ultrasonic signal to the first detector and the time of flight of the second ultrasonic signal to the first detector does not exceed a second threshold value and (B) the second time of flight of the second ultrasonic signal differs from the second time of flight of the first ultrasonic signal; and </claim-text><claim-text> in response to said detecting, updating the estimated first range based on the second time of flight of the second ultrasonic signal. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method according to claim 1, wherein said method includes: </claim-text><claim-text> based on the estimate of the direction of arrival of the audio-frequency component, selecting a portion of an image as a focus window; and </claim-text><claim-text> based on the estimated first range of the sound-emitting object and on information from the focus window, performing a camera focus operation. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method according to claim 1, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method according to claim 1, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of a beam generated from the audio-frequency component. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method according to claim 1, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between beams generated from the audio-frequency component. <!-- EPO <DP n="54"/>--> </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The method according to claim 1, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in phase between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method according to claim 1, wherein said selecting one among a plurality of direction-of-arrival estimation operations comprises: </claim-text><claim-text> comparing the estimated first range to a threshold value; </claim-text><claim-text> if the estimated first range is less than the threshold value, selecting a first one among the plurality of direction-of-arrival estimation operations; and </claim-text><claim-text> if the estimated first range is greater than the threshold value, selecting a second one among the plurality of direction-of-arrival estimation operations. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method according to claim 1, wherein the audio-frequency component includes sound emitted by the sound-emitting object. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. An apparatus for signal processing, said apparatus comprising: </claim-text><claim-text> means for estimating a first range of a sound-emitting object, based on information from a first reflection of a first ultrasonic signal; </claim-text><claim-text> means for selecting one among a plurality of direction-of-arrival estimation operations, based on the estimated first range; and </claim-text><claim-text> means for performing the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The apparatus according to claim 19, wherein a first channel of the multichannel signal is based on a signal produced by a first detector and a second channel of the multichannel signal is based on a signal produced by a second detector. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The apparatus according to claim 20, wherein said means for estimating the first range includes means for calculating a time of flight of the first ultrasonic signal to the first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector. <!-- EPO <DP n="55"/>--> </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The apparatus according to claim 19, wherein said means for estimating the first range includes means for calculating a time of flight of the first ultrasonic signal to a first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector, and </claim-text><claim-text> wherein said means for estimating the first range includes means for calculating a time of flight of the first ultrasonic signal to a second detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the second detector. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The apparatus according to claim 22, wherein the audio-frequency component of the multichannel signal is based on signals produced by the first and second detectors. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The apparatus according to claim 22, wherein said apparatus comprises means for calculating a second estimate of a direction of arrival of the audio-frequency component, based on the calculated times of flight of the first ultrasonic signal to the first and second detectors. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. The apparatus according to claim 24, wherein said apparatus comprises means for combining the calculated estimate of a direction of arrival and the calculated second estimate according to a relative weighting to obtain a combined estimate of a direction of arrival, </claim-text><claim-text> wherein the relative weighting is based on a level of the audio-frequency component. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The apparatus according to claim 25, wherein the relative weighting is based on a difference between the calculated estimate of a direction of arrival and the calculated second estimate. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. The apparatus according to claim 25, wherein said apparatus includes means for calculating a time of flight of a second ultrasonic signal to the first detector, and </claim-text><claim-text> wherein the relative weighting is based on a difference between the times of flight of the first and second ultrasonic signals to the first detector. <!-- EPO <DP n="56"/>--> </claim-text></claim><claim id="clm-0028" num="28"><claim-text>28. The apparatus according to claim 20, wherein said apparatus comprises: </claim-text><claim-text> means for estimating a second range based on information from a second reflection of the first ultrasonic signal; </claim-text><claim-text> means for estimating a third range based on information from a first reflection of a second ultrasonic signal that is emitted after the first ultrasonic signal; </claim-text><claim-text> means for estimating a fourth range based on information from a second reflection of the second ultrasonic signal; </claim-text><claim-text> means for selecting one among the third and fourth ranges based on a relation between (A) a difference between the first and third ranges and (B) a difference between the second and fourth ranges; </claim-text><claim-text> means for performing a second selection of one among the plurality of direction- of-arrival estimation operations, based on the selected range; and </claim-text><claim-text> means for performing the direction-of-arrival estimation operation selected by the second selection to calculate, based on information from the audio-frequency component, a second estimate of the direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0029" num="29"><claim-text>29. The apparatus according to claim 20, wherein said apparatus comprises: </claim-text><claim-text> means for calculating a time of flight of a second ultrasonic signal to the first detector and a time of flight of the second ultrasonic signal to the second detector; </claim-text><claim-text> means for detecting that (A) a difference between the time of flight of the first ultrasonic signal to the first detector and the time of flight of the second ultrasonic signal to the first detector does not exceed a second threshold value and (B) the second time of flight of the second ultrasonic signal differs from the second time of flight of the first ultrasonic signal; and </claim-text><claim-text> means for updating the estimated first range, in response to said detecting, based on the second time of flight of the second ultrasonic signal. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>30. The apparatus according to claim 19, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of the audio-frequency component. <!-- EPO <DP n="57"/>--> </claim-text></claim><claim id="clm-0031" num="31"><claim-text>31. The apparatus according to claim 19, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of a beam generated from the audio-frequency component. </claim-text></claim><claim id="clm-0032" num="32"><claim-text>32. The apparatus according to claim 19, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between beams generated from the audio-frequency component. </claim-text></claim><claim id="clm-0033" num="33"><claim-text>33. The apparatus according to claim 19, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in phase between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0034" num="34"><claim-text>34. The apparatus according to claim 19, wherein said means for selecting one among a plurality of direction-of-arrival estimation operations comprises: </claim-text><claim-text> means for comparing the estimated first range to a threshold value; </claim-text><claim-text> means for selecting a first one among the plurality of direction-of-arrival estimation operations, if the estimated first range is less than the threshold value; and means for selecting a second one among the plurality of direction-of-arrival estimation operations, if the estimated first range is greater than the threshold value. </claim-text></claim><claim id="clm-0035" num="35"><claim-text>35. The apparatus according to claim 19, wherein the audio-frequency component includes sound emitted by the sound-emitting object. </claim-text></claim><claim id="clm-0036" num="36"><claim-text>36. An apparatus for signal processing, said apparatus comprising: </claim-text><claim-text> a range estimator configured to estimate a first range of a sound-emitting object, based on information from a first reflection of a first ultrasonic signal; </claim-text><claim-text> a comparator configured to select one among a plurality of direction-of-arrival estimation operations, based on the estimated first range; and </claim-text><claim-text> a direction calculator configured to perform the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audiofrequency component. <!-- EPO <DP n="58"/>--> </claim-text></claim><claim id="clm-0037" num="37"><claim-text>37. The apparatus according to claim 36, wherein a first channel of the multichannel signal is based on a signal produced by a first detector and a second channel of the multichannel signal is based on a signal produced by a second detector. </claim-text></claim><claim id="clm-0038" num="38"><claim-text>38. The apparatus according to claim 37, wherein said range estimator is configured to calculate a time of flight of the first ultrasonic signal to the first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector. </claim-text></claim><claim id="clm-0039" num="39"><claim-text>39. The apparatus according to claim 36, wherein said range estimator is configured to calculate a time of flight of the first ultrasonic signal to a first detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the first detector, and </claim-text><claim-text> wherein said range estimator is configured to calculate a time of flight of the first ultrasonic signal to a second detector, and wherein said information from the first reflection of the first ultrasonic signal includes said calculated time of flight of the first ultrasonic signal to the second detector. </claim-text></claim><claim id="clm-0040" num="40"><claim-text>40. The apparatus according to claim 39, wherein the audio-frequency component of the multichannel signal is based on signals produced by the first and second detectors. </claim-text></claim><claim id="clm-0041" num="41"><claim-text>41. The apparatus according to claim 39, wherein said apparatus comprises a second direction calculator configured to calculate a second estimate of a direction of arrival of the audio-frequency component, based on the calculated times of flight of the first ultrasonic signal to the first and second detectors. </claim-text></claim><claim id="clm-0042" num="42"><claim-text>42. The apparatus according to claim 41, wherein said apparatus comprises a combiner configured to combine the calculated estimate of a direction of arrival and the calculated second estimate according to a relative weighting to obtain a combined estimate of a direction of arrival, </claim-text><claim-text> wherein the relative weighting is based on a level of the audio-frequency component. <!-- EPO <DP n="59"/>--> </claim-text></claim><claim id="clm-0043" num="43"><claim-text>43. The apparatus according to claim 42, wherein the relative weighting is based on a difference between the calculated estimate of a direction of arrival and the calculated second estimate. </claim-text></claim><claim id="clm-0044" num="44"><claim-text>44. The apparatus according to claim 42, wherein said range estimator is configured to indicate a time of flight of a second ultrasonic signal to the first detector, and </claim-text><claim-text> wherein the relative weighting is based on a difference between the times of flight of the first and second ultrasonic signals to the first detector. </claim-text></claim><claim id="clm-0045" num="45"><claim-text>45. The apparatus according to claim 37, wherein said range estimator is configured to estimate: </claim-text><claim-text> a second range based on information from a second reflection of the first ultrasonic signal; </claim-text><claim-text> a third range based on information from a first reflection of a second ultrasonic signal that is emitted after the first ultrasonic signal; and </claim-text><claim-text> a fourth range based on information from a second reflection of the second ultrasonic signal, and </claim-text><claim-text> wherein said apparatus comprises: </claim-text><claim-text> a selector configured to select one among the third and fourth ranges based on a relation between (A) a difference between the first and third ranges and (B) a difference between the second and fourth ranges; </claim-text><claim-text> a second comparator configured to perform a second selection of one among the plurality of direction-of-arrival estimation operations, based on the selected range; and a second direction calculator configured to perform the direction-of-arrival estimation operation selected by the second comparator to calculate, based on information from the audio-frequency component, a second estimate of the direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0046" num="46"><claim-text>46. The apparatus according to claim 37, wherein said range estimator is configured to calculate a time of flight of a second ultrasonic signal to the first detector and a time of flight of the second ultrasonic signal to the second detector; and </claim-text><claim-text> wherein said apparatus comprises a second comparator configured to detect that (A) a difference between the time of flight of the first ultrasonic signal to the first <!-- EPO <DP n="60"/>--> detector and the time of flight of the second ultrasonic signal to the first detector does not exceed a second threshold value and (B) the second time of flight of the second ultrasonic signal differs from the second time of flight of the first ultrasonic signal, and wherein said range estimator is configured to update the estimated first range, in response to said detecting, based on the second time of flight of the second ultrasonic signal. </claim-text></claim><claim id="clm-0047" num="47"><claim-text>47. The apparatus according to claim 36, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0048" num="48"><claim-text>48. The apparatus according to claim 36, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of a beam generated from the audio-frequency component. </claim-text></claim><claim id="clm-0049" num="49"><claim-text>49. The apparatus according to claim 36, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between beams generated from the audio-frequency component. </claim-text></claim><claim id="clm-0050" num="50"><claim-text>50. The apparatus according to claim 36, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in phase between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0051" num="51"><claim-text>51. The apparatus according to claim 36, wherein said comparator is configured to compare the estimated first range to a threshold value, to select a first one among the plurality of direction-of-arrival estimation operations if the estimated first range is less than the threshold value, and to select a second one among the plurality of direction-of- arrival estimation operations if the estimated first range is greater than the threshold value. </claim-text></claim><claim id="clm-0052" num="52"><claim-text>52. The apparatus according to claim 36, wherein the audio-frequency component includes sound emitted by the sound-emitting object. <!-- EPO <DP n="61"/>--> </claim-text></claim><claim id="clm-0053" num="53"><claim-text>53. A communications device including an apparatus according to claim 36. </claim-text></claim><claim id="clm-0054" num="54"><claim-text>54. A non-transitory computer-readable storage medium having tangible features that cause a machine reading the features to: </claim-text><claim-text> estimate a first range of a sound-emitting object, based on information from a first reflection of a first ultrasonic signal; </claim-text><claim-text> select one among a plurality of direction-of-arrival estimation operations, based on the estimated first range; and </claim-text><claim-text> perform the selected direction-of-arrival estimation operation to calculate, based on information from an audio-frequency component of a multichannel signal, an estimate of a direction of arrival of the audio-frequency component. </claim-text></claim><claim id="clm-0055" num="55"><claim-text>55. The medium according to claim 54, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0056" num="56"><claim-text>56. The medium according to claim 54, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between channels of a beam generated from the audio-frequency component. </claim-text></claim><claim id="clm-0057" num="57"><claim-text>57. The medium according to claim 54, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in gain between beams generated from the audio-frequency component. </claim-text></claim><claim id="clm-0058" num="58"><claim-text>58. The medium according to claim 54, wherein at least one among said plurality of direction-of-arrival estimation operations includes calculating the estimate based on a difference in phase between channels of the audio-frequency component. </claim-text></claim><claim id="clm-0059" num="59"><claim-text>59. The medium according to claim 54, wherein said selecting one among a plurality of direction-of-arrival estimation operations comprises: </claim-text><claim-text> comparing the estimated first range to a threshold value; <!-- EPO <DP n="62"/>--> if the estimated first range is less than the threshold value, selecting a first one among the plurality of direction-of-arrival estimation operations; and </claim-text><claim-text> if the estimated first range is greater than the threshold value, selecting a second one among the plurality of direction-of-arrival estimation operations. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
