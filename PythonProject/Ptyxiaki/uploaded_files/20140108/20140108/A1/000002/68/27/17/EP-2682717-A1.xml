<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682717-A1" country="EP" doc-number="2682717" kind="A1" date="20140108" family-id="48699650" file-reference-id="315100" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585016" ucid="EP-2682717-A1"><document-id><country>EP</country><doc-number>2682717</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174535-A" is-representative="YES"><document-id mxw-id="PAPP154847208" load-source="docdb" format="epo"><country>EP</country><doc-number>13174535</doc-number><kind>A</kind><date>20130701</date><lang>EN</lang></document-id><document-id mxw-id="PAPP174953028" load-source="docdb" format="original"><country>EP</country><doc-number>13174535.8</doc-number><date>20130701</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140555682" ucid="SE-1200406-A" load-source="docdb"><document-id format="epo"><country>SE</country><doc-number>1200406</doc-number><kind>A</kind><date>20120702</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1927409304" load-source="docdb">G01D   5/244       20060101ALI20160608BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1927409484" load-source="docdb">G01D   5/20        20060101ALI20160608BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1927409649" load-source="docdb">H03K   5/24        20060101ALI20160608BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1927414363" load-source="docdb">G01D   5/14        20060101AFI20160608BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1927415300" load-source="docdb">H03M   1/48        20060101ALI20160608BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2051730721" load-source="docdb" scheme="CPC">H03M   1/485       20130101 LI20150514BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2051733827" load-source="docdb" scheme="CPC">G01D   5/2073      20130101 LI20150521BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2051735359" load-source="docdb" scheme="CPC">H03K   5/24        20130101 LI20150522BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2051736681" load-source="docdb" scheme="CPC">G01D   5/244       20130101 FI20150522BHEP        </classification-cpc><classification-cpc mxw-id="PCL1991313680" load-source="docdb" scheme="CPC">G01D   5/145       20130101 LI20131226BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359681" lang="DE" load-source="patent-office">Positionsmesseinrichtung</invention-title><invention-title mxw-id="PT132359682" lang="EN" load-source="patent-office">An Encoder</invention-title><invention-title mxw-id="PT132359683" lang="FR" load-source="patent-office">Un encodeur</invention-title><citations><patent-citations><patcit mxw-id="PCIT242942869" load-source="docdb" ucid="DE-19813375-A1"><document-id format="epo"><country>DE</country><doc-number>19813375</doc-number><kind>A1</kind><date>19990930</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT299355455" load-source="docdb" ucid="US-20100207617-A1"><document-id format="epo"><country>US</country><doc-number>20100207617</doc-number><kind>A1</kind><date>20100819</date></document-id><sources><source name="APP" created-by-npl="N"/><source name="SEA" category="DA" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919540202" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>LEINE &amp; LINDE AB</last-name><address><country>SE</country></address></addressbook></applicant><applicant mxw-id="PPAR919513371" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>LEINE &amp; LINDE AB</last-name></addressbook></applicant><applicant mxw-id="PPAR919017232" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>LEINE &amp; LINDE AB</last-name><iid>100165592</iid><address><street>Box 8</street><city>645 21 Strängnäs</city><country>SE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919537841" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GUSTAFSSON FREDRIK</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919524128" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GUSTAFSSON, FREDRIK</last-name></addressbook></inventor><inventor mxw-id="PPAR919009975" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>GUSTAFSSON, FREDRIK</last-name><address><street>Vallbyvägen 21B</street><city>645 42 Strängnäs</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919537764" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KJELLQVIST LARS PETER JOHANN</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919531690" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Kjellqvist, Lars Peter Johann</last-name></addressbook></inventor><inventor mxw-id="PPAR919015158" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Kjellqvist, Lars Peter Johann</last-name><address><street>Ängen 51 Sågartorp</street><city>150 21 Mölnbo</city><country>SE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919009039" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Pleyer, Hans Anno</last-name><iid>100771861</iid><address><street>Dr. Johannes Heidenhain GmbH Patentabteilung Postfach 12 60</street><city>83292 Traunreut</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549814413" load-source="docdb">AL</country><country mxw-id="DS549742915" load-source="docdb">AT</country><country mxw-id="DS549816827" load-source="docdb">BE</country><country mxw-id="DS549814335" load-source="docdb">BG</country><country mxw-id="DS549813072" load-source="docdb">CH</country><country mxw-id="DS549816828" load-source="docdb">CY</country><country mxw-id="DS549742916" load-source="docdb">CZ</country><country mxw-id="DS549814423" load-source="docdb">DE</country><country mxw-id="DS549816829" load-source="docdb">DK</country><country mxw-id="DS549816870" load-source="docdb">EE</country><country mxw-id="DS549743677" load-source="docdb">ES</country><country mxw-id="DS549814336" load-source="docdb">FI</country><country mxw-id="DS549813073" load-source="docdb">FR</country><country mxw-id="DS549814424" load-source="docdb">GB</country><country mxw-id="DS549816871" load-source="docdb">GR</country><country mxw-id="DS549814425" load-source="docdb">HR</country><country mxw-id="DS549742925" load-source="docdb">HU</country><country mxw-id="DS549743678" load-source="docdb">IE</country><country mxw-id="DS549816872" load-source="docdb">IS</country><country mxw-id="DS549814337" load-source="docdb">IT</country><country mxw-id="DS549816873" load-source="docdb">LI</country><country mxw-id="DS549814342" load-source="docdb">LT</country><country mxw-id="DS549908081" load-source="docdb">LU</country><country mxw-id="DS549814343" load-source="docdb">LV</country><country mxw-id="DS549814344" load-source="docdb">MC</country><country mxw-id="DS549908082" load-source="docdb">MK</country><country mxw-id="DS549908083" load-source="docdb">MT</country><country mxw-id="DS549908084" load-source="docdb">NL</country><country mxw-id="DS549742926" load-source="docdb">NO</country><country mxw-id="DS549908085" load-source="docdb">PL</country><country mxw-id="DS549816890" load-source="docdb">PT</country><country mxw-id="DS549741545" load-source="docdb">RO</country><country mxw-id="DS549816891" load-source="docdb">RS</country><country mxw-id="DS549908086" load-source="docdb">SE</country><country mxw-id="DS549814439" load-source="docdb">SI</country><country mxw-id="DS549742927" load-source="docdb">SK</country><country mxw-id="DS549742928" load-source="docdb">SM</country><country mxw-id="DS549743679" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673188" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An encoder is configured for detection of rotational movement of a rotatable shaft (20) in relation to a part of a machine, and a method is provided for generating a reference signal by an encoder.
<img id="iaf01" file="imgaf001.tif" wi="165" he="102" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737338" lang="EN" source="EPO" load-source="docdb"><p>An encoder is configured for detection of rotational movement of a rotatable shaft (20) in relation to a part of a machine, and a method is provided for generating a reference signal by an encoder.</p></abstract><description mxw-id="PDES63959176" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Technical Field</b></heading><p id="p0001" num="0001">The present invention relates to an encoder apparatus. The present invention also relates to a method for generating a reference signal by an encoder apparatus.</p><heading id="h0002"><b>Description of Related Art</b></heading><p id="p0002" num="0002">In many industrial applications there is a need to monitor the movement of a movable part. Such monitoring requires the delivery of an encoder output signal indicative of the movement, or indicative of the position of the movable part.</p><p id="p0003" num="0003">It is known to provide an encoder apparatus wherein the encoder output signal is generated in dependence on a detected magnetic field. A magnetic encoder may include a magnetic scale that can be installed on a rotatable shaft of a machine. <patcit id="pcit0001" dnum="US20100207617A1"><text>US 2010/0207617 A1</text></patcit> discloses an incremental encoder for detection of the movement of a shaft comprising a scale having a series of spaced magnetic marks mounted on the circumference of the shaft. A read head is mounted on another machine part so as to pass along the scale, the read head including a first set of detectors 16-1 for sensing the scale marks, and generating a pulsed signal in response to rotational movement of the shaft and scale in relation to the read head. In order to be able to generate an encoder output signal indicating not only incremental movement of the shaft, but also providing a position output signal, a counter is used for counting the pulses of the pulsed signal, the counter value being indicative of the position. In order for the counter value to reflect the position of the shaft within a single revolution, it is known to provide the magnetic scale with a magnetic reference marker. In this manner the reference marker is used for generating a reference signal once per shaft revolution in response to the magnetic reference marker passing a separate second set of reference sensors 16-2 provided in the read head, as disclosed in <patcit id="pcit0002" dnum="US20100207617A1"><text>US 2010/0207617 A1</text></patcit>. Providing a separate reference marker next to the scale requires additional space, which may not be available, as pointed out in <patcit id="pcit0003" dnum="US20100207617A1"><text>US 2010/0207617 A1</text></patcit>. As a solution to this problem <patcit id="pcit0004" dnum="US20100207617A1"><text>US 2010/0207617 A1</text></patcit> teaches to provide the reference mark by further magnetising the scale in a region of one of the existing pole pitches so as to produce a reference signal. The further magnetisation extends across only a part of the width of the scale, covering less<!-- EPO <DP n="2"> --> than half of the width, so that the incremental signals may be read undisturbed, according to <patcit id="pcit0005" dnum="US20100207617A1"><text>US 2010/0207617 A1</text></patcit>.</p><p id="p0004" num="0004">An objective of the present invention is to provide an improved encoder system. A further objective is to provide a method for generating a reference signal by an encoder system.</p><heading id="h0003"><b>Summary</b></heading><p id="p0005" num="0005">The above objectives are solved by an encoder for detection of rotational movement of a rotatable shaft in relation to a part of a machine according to claim 1 and a method for generating a reference signal by an encoder according to claim 15.</p><p id="p0006" num="0006">The encoder includes a scale device for attachment to a circumference of the shaft, and the scale device having a width and a length. The scale device includes a first magnetic scale pattern including a plurality of magnetic pole elements provided with a first predetermined division in the direction of the length so as to generate a first magnetic field pattern at a first distance from a surface of the scale device. A signal generator is provided for mounting on the machine part, the signal generator including a housing. The signal generator also includes a first output terminal suitable for providing an encoder output signal indicative of a relative change in position between the signal generator and the scale device. The signal generator includes a second output terminal suitable for providing a reference signal indicative of a rotational position of the shaft. The signal generator further includes a first magneto-electric transducer head having a first magneto-electric transducer adapted to generate a first electric signal in response to detection of the magnetic field pattern so that the first electric signal varies periodically in dependence on the first magnetic field pattern such that the variation exhibits a first wavelength, which depends on the first predetermined division when the first magneto-electric transducer moves along the first magnetic scale pattern. The signal generator also includes a second magneto-electric transducer head having a second magneto-electric transducer adapted to generate a second electric signal in response to detection of the first magnetic field pattern so that the second electric signal varies periodically in dependence on the first magnetic field pattern such that the variation exhibits the first wavelength dependent on the first predetermined division when the<!-- EPO <DP n="3"> --> second magneto-electric transducer moves along the first magnetic scale pattern. The signal generator also includes a first signal processing unit, which includes: a first device adapted to generate a periodically varying first digital signal in dependence on the first electric signal such that the variation of the first digital signal exhibits the first wavelength when the first magneto-electric transducer moves along the first magnetic scale pattern; and a second device adapted to generate a periodically varying second digital signal in dependence on the second electric signal such that the variation of the second digital signal exhibits the first wavelength when the second magneto-electric transducer moves along the first magnetic scale pattern. The scale device includes at least one gap between ends of the first magnetic scale pattern. The signal generator further includes an analyzer adapted to generate a scale gap indicator signal in dependence on an analysis involving the first digital signal, or an analysis involving the second digital signal and/or a comparative analysis involving the first digital signal and the second digital signal. Moreover, the signal generator includes an output signal producer adapted to produce the encoder output signal in dependence on the first digital signal and the second digital signal, and the output signal producer is adapted to produce the reference signal in dependence on the scale gap indicator signal.</p><p id="p0007" num="0007">This arrangement provides for a reference signal at least once per revolution of the rotatable shaft, while eliminating the need to make the scale so wide as to allow for the provision of a separate magnetic reference mark. Hence, whereas <patcit id="pcit0006" dnum="US20100207617A"><text>U.S. Patent Application Publication No. 2010/0207617</text></patcit> describes to reserve almost half of the width of the scale for a separate magnetic reference mark, which would appear to require a rather wide scale when also requiring the first set of detectors 16-1 to read the incremental signals undisturbed from the other half of the width, the width of the scale device described herein may be made narrower. The encoder output signal may be an incremental signal which is indicative of a change in position. The encoder output signal may also be indicative of a rotational position of the shaft.</p><p id="p0008" num="0008">Moreover, the housing of the signal generator may also be made small with respect to the physical extension in the direction parallel to the axis of rotation of the shaft, since, in contrast to the <patcit id="pcit0007" dnum="US20100207617A"><text>U.S. Patent Application Publication No. 2010/0207617</text></patcit>, this eliminates the need for a separate second set of reference sensors positioned so as<!-- EPO <DP n="4"> --> to read the magnetic reference marker from one half of the scale width while allowing the first set of detectors to read the incremental signals undisturbed from the other half of the scale width.</p><p id="p0009" num="0009">Moreover, it is noted that large shafts, such as, e.g. shafts having a diameter of 50 cm or more, may have an axial play, i.e., the shaft may inadvertently move during operation, in a direction parallel to the axis of shaft rotation, which also is the direction of the width of the scale device. If such movement occurs, the position of the magneto-electric transducer head may also be shifted in relation to the width of the scale. The arrangement described herein allows for mounting of the signal generator including the magneto-electric transducer head on the machine part, so as to allow the axial play to move the scale device a distance substantially equal to half the width of the scale device, while maintaining magneto electric detection, when the signal generator has been mounted at an optimum position.</p><p id="p0010" num="0010">The fact that the magnetic scale pattern generates a magnetic field pattern at a first distance from a surface of the scale device, in combination with the ability of the magneto-electric transducers to generate electric signals in response to detection of the magnetic field pattern may render a non-contact detection. In effect, no movable part of the encoder is in physical contact with any other part of the encoder, thereby, e.g., rendering an encoder which is free from mechanical wear. Hence, the configuration described herein may provide an encoder having a very long, or even unlimited, service life. The longevity feature of this non-contact detection is particularly advantageous in connection with the use of the encoder in machines which are difficult or cumbersome to maintain, such as a wind power station. In a wind power station, the encoder may be mounted to detect the movement of the rotating shaft at the high altitude of a wind power tower, making it difficult for maintenance personnel to reach the encoder for maintenance purposes.</p><p id="p0011" num="0011">According to example embodiments, the scale device may be made of a flexible band, such as, e.g., a bendable steel band, provided with an openable locking device so as to allow the flexible band to be opened such that it may be placed at a desired measuring path position on the shaft. When positioned at the desired measuring path position on the shaft, the locking device of the flexible scale band<!-- EPO <DP n="5"> --> may be closed and locked so as to attach it to the desired measuring path position on the shaft. The locking device may then be used as the gap portion of the scale device.</p><p id="p0012" num="0012">According to example embodiments, the scale device may include a dividable scale ring. The inner diameter of the dividable ring may substantially correspond to the outer diameter of a shaft to which the dividable scale ring is intended to be attached. The dividable scale ring may then have at least two openings so as to allow the ring to be divided in at least two parts. Hence, an opening of the dividable scale ring may be provided with an openable locking device so as to allow the dividable scale ring to be opened such that it may be placed at a desired measuring path position on the shaft. When positioned at the desired measuring path position on the shaft, the locking device of the dividable scale ring may be closed and locked so as to attach it to the desired measuring path position on the shaft. The locking device may then be used as the gap portion of the scale device.</p><p id="p0013" num="0013">According to example embodiments of the present invention, an encoder, for detection of rotational movement of a rotatable shaft in relation to a part of a machine, includes a scale device for attachment to a circumference of the shaft, the scale device having a width and a measuring path length. The scale device includes a first magnetic scale pattern including a plurality of magnetic pole elements provided with a first predetermined division in the direction of the length so as to generate a first magnetic field pattern at a first distance from a surface of the scale device. A signal generator is provided for mounting on the machine part, the signal generator including a housing. The signal generator further includes a first output terminal for providing an encoder output signal indicative of a relative change in position between the signal generator and the scale device, and a second output terminal. The signal generator includes a first magneto-electric transducer head having a first magneto-electric transducer adapted to generate a first electric signal in response to detection of the first magnetic field pattern so that the first electric signal varies periodically in dependence on the first magnetic field pattern such that the variation exhibits a first wavelength, which depends on the first predetermined division when the first magneto-electric transducer moves along the first magnetic scale pattern. The signal generator also includes a second magneto-electric<!-- EPO <DP n="6"> --> transducer head having a second magneto-electric transducer adapted to generate a second electric signal in response to detection of the first magnetic field pattern so that the second electric signal varies periodically in dependence on the first magnetic field pattern such that the variation exhibits the first wavelength dependent on the first predetermined division when the second magneto-electric transducer moves along the first magnetic scale pattern. The signal generator further includes a first signal processing unit including: a first device adapted to generate a periodically varying first digital signal in dependence on the first electric signal such that the variation of the first digital signal exhibits the first wavelength when the first magneto-electric transducer moves along the first magnetic scale pattern; and a second device adapted to generate a periodically varying second digital signal in dependence on the second electric signal such that the variation of the second digital signal exhibits the first wavelength when the second magneto-electric transducer moves along the first magnetic scale pattern. The scale device includes at least one gap between ends of the first magnetic scale pattern. The signal generator moreover includes an analyzer adapted to generate a scale gap indicator signal in dependence on an analysis involving the first digital signal, or an analysis involving the second digital signal and/or a comparative analysis involving the first digital signal and the second digital signal. Still further, the signal generator includes an output signal producer adapted to produce the encoder output signal in dependence on the first digital signal the second digital signal, and the scale gap indicator signal.</p><p id="p0014" num="0014">This arrangement may provide a scale gap indicator signal, thereby providing an absolute position signal which can be reset, e.g., once per shaft revolution, in dependence on the scale gap indicator signal, while eliminating the need to make the scale so wide as to allow for the provision of a separate magnetic reference mark. Hence, this arrangement allows for the provision of an absolute position signal output, using the provision of a gap in the scale pattern, to achieve the advantages mentioned above in connection with the example embodiment that also provides a reference signal.</p><p id="p0015" num="0015">The scale device may be adapted for attachment on a shaft having a diameter of more than 50 cm.<!-- EPO <DP n="7"> --></p><p id="p0016" num="0016">The first magneto-electric transducer head may be arranged at a predetermined distance from the second magneto-electric transducer head, within the signal generator housing, such that the signal generator is mountable so that, in operation, at least one of the first and second magneto-electric transducer heads will be positioned so as to detect the first magnetic field pattern.</p><p id="p0017" num="0017">The gap may include at least a portion of the measuring path length lacking the first magnetic scale pattern.</p><p id="p0018" num="0018">The gap may have a gap width, which is dependent on a distance between the ends of the first magnetic scale pattern.</p><p id="p0019" num="0019">The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least one first predetermined division, in the case that the first and second magneto-electric transducer heads are magneto-resistive transducer heads.</p><p id="p0020" num="0020">The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least two first predetermined divisions, in the case that the first and second magneto-electric transducer heads are Hall sensor transducer heads.</p><p id="p0021" num="0021">The configuration described herein may ensure that there is a transition period covering a distance of at least one wave length for switching from relying on the latter transducer head to relying on the foremost transducer head in connection with a gap cross-over. Hence, this configuration allows for both of the latter transducer head and the foremost transducer head to simultaneously detect at least one full electric signal wave length, i.e., a first predetermined wavelength λ<sub>1</sub>, after the foremost transducer head having crossed the gap, and before the output signal is switched over to be generated in dependence on the foremost transducer head.</p><p id="p0022" num="0022">The first magneto-electric transducer head may include a first lagged magneto-electric transducer adapted to generate a first lagged electric signal in response to detection of the magnetic field pattern so that said first lagged electric signal varies<!-- EPO <DP n="8"> --> periodically in dependence on the magnetic field pattern such that the variation exhibits the first wavelength which depends on the first predetermined division when the first lagged magneto-electric transducer moves along the magnetic scale pattern. The first lagged magneto-electric transducer is positioned in relation to the first transducer such that, in operation, the first lagged electric signal varies at a first lag in relation to the first electric signal when the shaft rotates in a clockwise rotational direction, and such that the first lagged electric signal varies at a second lag in relation to the first electric signal when the shaft rotates in a counterclockwise rotational direction, the second lag being different from the first lag.</p><p id="p0023" num="0023">The second magneto-electric transducer head may include a second lagged magneto-electric transducer adapted to generate a second lagged electric signal in response to detection of the magnetic field pattern so that the second lagged electric signal varies periodically in dependence on the magnetic field pattern such that the variation exhibits the first wavelength which depends on the first predetermined division when the second lagged magneto-electric transducer moves along the magnetic scale pattern. The second lagged magneto-electric transducer is positioned in relation to the second transducer such that, in operation, the second lagged electric signal varies at a first lag in relation to the second electric signal when the shaft rotates in a clockwise rotational direction, and such that the second lagged electric signal varies at a second lag in relation to the second electric signal when the shaft rotates in a counterclockwise rotational direction.</p><p id="p0024" num="0024">The first lag may substantially correspond to a quarter of the first wavelength, and the second lag may substantially correspond to three quarters of the first wavelength.</p><p id="p0025" num="0025">The first lagged magneto-electric transducer and the first magneto-electric transducer may be Magneto-Resistive Transducers, and one first wavelength may be generated by the distance of one first predetermined division.</p><p id="p0026" num="0026">The first lagged magneto-electric transducer, having a direction of sensitivity, may be positioned at a geometrical distance from the first magneto-electric transducer, also having a direction of sensitivity. The first magneto-electric transducer and said<!-- EPO <DP n="9"> --> first lagged magneto-electric transducer may be arranged such that their respective directions of sensitivity are substantially parallel, and the first lag may depend on the geometrical distance.</p><p id="p0027" num="0027">The geometrical distance may be a quarter of the first predetermined division.</p><p id="p0028" num="0028">The configuration described herein may render the first lag to become a quarter wavelength when the magneto-electric transducers are magneto-resistive transducers.</p><p id="p0029" num="0029">The first lagged magneto-electric transducer, having a direction of sensitivity, may be positioned in geometrical proximity to the first magneto-electric transducer, also having a direction of sensitivity. The first magneto-electric transducer and the first lagged magneto-electric transducer may be arranged such that there is a geometrical angle between their respective directions of sensitivity, and the first lag may depend on the geometrical angle.</p><p id="p0030" num="0030">The configuration described herein may render the first lag to be independent of the first predetermined division of the scale device. Hence, the first magneto-electric transducer head having the first magneto-electric transducer and the first lagged magneto-electric transducer may be used together with different scale devices having mutually different first predetermined divisions. Likewise, the second magneto-electric transducer head, having the second magneto-electric transducer and the second lagged magneto-electric transducer, may be made in the same manner as described for the first magneto-electric transducer head. In this manner, a flexible signal generator may be achieved, thus rendering usability with various magnetic scale devices having mutually different first predetermined divisions.</p><p id="p0031" num="0031">The geometrical angle may be substantially 45 degrees.</p><p id="p0032" num="0032">The configuration described herein may provide for the first lag of the magneto-electric transducer head to become a quarter wavelength irrespective of the first predetermined division distance.<!-- EPO <DP n="10"> --></p><p id="p0033" num="0033">The geometrical proximity may be selected such that the first magneto-electric transducer and the first lagged magneto-electric transducer are arranged at substantially the same location, such as, for example, with substantially no distance between the first lagged magneto-electric transducer and the first magneto-electric transducer.</p><p id="p0034" num="0034">The first lagged magneto-electric transducer and the first magneto-electric transducer me be Hall sensor transducers. One first wavelength may be generated by the distance of the two first predetermined divisions.</p><p id="p0035" num="0035">The geometrical angle may be substantially ninety degrees.</p><p id="p0036" num="0036">The first signal processing unit may include a Field programmable gate array circuit adapted to simultaneously process the first digital signal and the second digital signal.</p><p id="p0037" num="0037">The periodic variation may be arranged as a periodic oscillation.</p><p id="p0038" num="0038">The signal generator may include a device adapted to detect a signal edge in the periodically varying first digital signal, and a first counter for generating a first count value indicative of a number of detected signal edges so that the first count value is indicative of a first rotational position estimate of the scale device in relation to the signal generator.</p><p id="p0039" num="0039">The signal generator may include a device adapted to detect a signal edge in the periodically varying second digital signal, and a second counter for generating a second count value indicative of a number of detected signal edges so that the second count value is indicative of a second rotational position estimate of the scale device in relation to the signal generator.</p><p id="p0040" num="0040">The signal generator may be adapted for mounting on the machine part so that, in operation, the first magneto-electric transducer is positioned a second distance from the surface of the scale device, the second distance being substantially equal to the first distance or smaller than the first distance.<!-- EPO <DP n="11"> --></p><p id="p0041" num="0041">The signal generator may include a housing adapted to enclose the first magneto-electric transducer head and the second magneto-electric transducer head. The housing may include a wall for facing the machine part and a front wall for facing the shaft. The front wall may have a physical extension in a direction parallel to the elongation of the shaft, a physical extension in a direction orthogonal to the elongation of the shaft, and a concavely curved shape in the direction orthogonal to the elongation of the shaft. The first magneto-electric transducer head may be positioned in relation to the second magneto-electric transducer head such that, in operation, at least one of the first and second magneto-electric transducer heads will be positioned so as to detect the first magnetic field pattern.</p><p id="p0042" num="0042">According to example embodiments of the present invention, a signal generator, for mounting on a machine part and for co-operation with a scale device, includes: a housing; a first output terminal for providing an encoder output signal indicative of a relative change in position between the signal generator and the scale device; a second output terminal; a first device adapted to generate a periodically varying first digital signal such that the variation of the first digital signal exhibits a first wavelength when the signal generator moves along a first magnetic scale pattern of the scale device; and a second device adapted to generate a periodically varying second digital signal such that the variation of the second digital signal exhibits the first wavelength when the signal generator moves along the first magnetic scale pattern of the scale device.</p><p id="p0043" num="0043">The first device is adapted to also generate a periodically varying first lagged digital signal such that, in operation, the first lagged digital signal varies at a first lag in relation to the first digital signal when the shaft rotates in a clockwise rotational direction, and such that the first lagged electric signal varies at a second lag in relation to the first electric signal when the shaft rotates in a counterclockwise rotational direction, the second lag being different from the first lag. The second device is adapted to also generate a periodically varying second lagged digital signal such that, in operation, the second lagged digital signal varies at a first lag in relation to the second digital signal when the shaft rotates in a clockwise rotational direction, and such that the second lagged digital signal varies at a second lag in<!-- EPO <DP n="12"> --> relation to the second digital signal when the shaft rotates in a counterclockwise rotational direction.</p><p id="p0044" num="0044">According to example embodiments of the present invention, an encoder includes the signal generator.</p><p id="p0045" num="0045">The encoder may include: a first position value estimator for generating a first position value estimate in dependence on at least one of the periodically varying first digital signal, and the periodically varying first lagged digital signal; and a second position value estimator for generating a second position value estimate in dependence on at least one of the periodically varying second digital signal, and the periodically varying second lagged digital signal.</p><p id="p0046" num="0046">The first position value estimator may include a first counter module adapted to generate a first count value by counting periods of the first wavelength in dependence on at least one of the periodically varying first digital signal, and the periodically varying first lagged digital signal. The first position value estimator may be adapted to generate the first position value estimate in dependence on the first count value. The second position value estimator may include a second counter module adapted to generate a second count value by counting periods of the first wavelength in dependence on at least one of the periodically varying second digital signal, and the periodically varying second lagged digital signal. The second position value estimator may be adapted to generate the second position value estimate in dependence on the second count value.</p><p id="p0047" num="0047">The first position value estimator may be adapted to generate the first position value estimate in dependence on a count value, which is generated by counting periods of the first wavelength of the periodically varying first digital signal, of the periodically varying first lagged digital signal, or of a periodically varying signal generated in response to one or both of the periodically varying first digital signal and the periodically varying first lagged digital signal. The second position value estimator may be adapted to generate the second position value estimate in dependence on a second count value, which is generated by counting periods of the first wavelength of the periodically varying second digital signal, of the periodically varying second<!-- EPO <DP n="13"> --> lagged digital signal, or of a periodically varying signal generated in response to one or both of the periodically varying second digital signal and the periodically varying second lagged digital signal.</p><p id="p0048" num="0048">The first position value estimator may include a first arctan function generator module adapted to generate a first electrical angle value in dependence of the periodically varying first digital signal, and the periodically varying first lagged digital signal, so that the first electrical angle value is indicative of a position of a first magneto-electric transducer head within a distance corresponding to one first predetermined wavelength. The first position value estimator may be adapted to generate the first position value estimate in dependence on the first electrical angle value. The second position value estimator may include a second arctan function generator module adapted to generate a second electrical angle value in dependence of the periodically varying second digital signal, and the periodically varying second lagged digital signal, so that the second electrical angle value is indicative of a position of a second magneto-electric transducer head within a distance corresponding to one first predetermined wavelength. The second position value estimator may be adapted to generate the second position value estimate in dependence on the second electrical angle value.</p><p id="p0049" num="0049">The first position value estimator may include a first rotational direction detector module arranged to generate a first rotational direction signal indicative of a current direction of rotation of the shaft. The second position value estimator may include a second rotational direction detector module arranged to generate a second rotational direction signal indicative of a current direction of rotation of the shaft.</p><p id="p0050" num="0050">The first counter module may be adapted to adjust the first count value in dependence on the first rotational direction signal, and/or the second counter module may be adapted to adjust the second count value in dependence on the second rotational direction signal.</p><p id="p0051" num="0051">The first position value estimator may be adapted to generate the first position value estimate in dependence on the first electrical angle value and/or the first rotational direction signal and/or the first count value. The second position value estimator<!-- EPO <DP n="14"> --> may be adapted to generate the second position value estimate in dependence on the second electrical angle value and/or the second rotational direction signal and/or the second count value.</p><p id="p0052" num="0052">The encoder may include a signal treatment module, having: a device adapted to generate a first head position value which is indicative of a position of a first magneto-electric transducer head; and a device adapted to generate a second head position value which is indicative of a position of a second magneto-electric transducer head.</p><p id="p0053" num="0053">The encoder may include an analyzer adapted to generate a scale gap indicator signal in response to detection of a deviation between the magnetic field pattern as sensed by a first magneto-electric transducer head and the magnetic field pattern sensed by a second magneto-electric transducer head; and/or in response to detection of a change in the magnetic field pattern as sensed by a first magneto-electric transducer head or the magnetic field pattern sensed by a second magneto-electric transducer head.</p><p id="p0054" num="0054">The encoder may include an analyzer adapted to generate a scale gap indicator signal in response to detection of a change in the magnetic field pattern as sensed by a first magneto-electric transducer head by a phase error signal switching from a state indicating no phase error to a state indicating the detection of a phase error.</p><p id="p0055" num="0055">Providing such a phase error signal may be used for indicating that the corresponding detector head is just entering a gap in the scale at the position visited by that detector head.</p><p id="p0056" num="0056">The encoder may be adapted to store the current first head position value, as a scale edge position value for the detector head.</p><p id="p0057" num="0057">The encoder may include an analyzer adapted to generate a scale gap indicator signal in response to detection of a change in the magnetic field pattern as sensed by a first magneto-electric transducer head by a phase error signal switching from a state indicating a phase error to a state indicating no phase error.<!-- EPO <DP n="15"> --></p><p id="p0058" num="0058">Providing such a phase error signal may be used for indicating that the corresponding detector head is just leaving a gap section and entering the scale at the position visited by that detector head.</p><p id="p0059" num="0059">The encoder may include an analyzer adapted to generate the scale gap indicator signal in dependence on a comparative analysis involving the first digital signal and the second digital signal, and/or a comparative analysis involving the first position value estimate and the second position value estimate.</p><p id="p0060" num="0060">The analyzer may be adapted to generate the scale gap indicator signal in dependence on a comparative analysis involving the first position value estimate and the second position value estimate. The analyzer may be adapted to generate a Both_On_Scale signal indicating that both the first magneto-electric transducer head and the second magneto-electric transducer head are in a position to detect the scale when both of the first position value estimate and the second position value estimate agree about the detected position or the detected amount of movement. The analyzer may be adapted to generate a signal indicating that one magneto-electric transducer head is not in a position to detect the scale when the first position value estimate and the second position value estimate disagree about the amount of movement.</p><p id="p0061" num="0061">The analyzer may be adapted to generate a First_Off_Scale signal indicating that the first magneto-electric transducer head is not in a position to detect the scale when the second position value estimate indicates a certain degree of movement whereas the first position value estimate indicates less movement or substantially no movement.</p><p id="p0062" num="0062">The analyzer may be adapted to generate a value indicative of a difference in detected movement, the difference value indicating a difference between the second position value estimate and the first position value estimate.</p><p id="p0063" num="0063">The output signal producer may include a synchronization module for synchronizing the second position value estimate and the first position value estimate so as to render the difference value to a predetermined value, such as, e.g., zero.<!-- EPO <DP n="16"> --></p><p id="p0064" num="0064">The analyzer may be adapted to read the difference value in response to the Both_On_Scale signal, and the analyzer may be adapted to store the difference value as a value indicative of a width of a gap between scale edges.</p><p id="p0065" num="0065">This arrangement may allow the encoder to measure the width of the gap, as experienced by the magneto-electric detector heads.</p><p id="p0066" num="0066">The analyzer may be adapted to generate the scale gap indicator signal in response to the difference value reaching a predetermined value.</p><p id="p0067" num="0067">The analyzer may be adapted to generate the scale gap indicator signal in response to the difference value reaching a predetermined value, e.g., corresponding to a certain ratio of the gap width value.</p><p id="p0068" num="0068">The analyzer may be adapted to generate the scale gap indicator signal in response to the difference value reaching a predetermined value, e.g., being substantially half of the gap width value.</p><p id="p0069" num="0069">An output signal producer of the encoder may be adapted to generate the output reference signal in dependence on the scale gap indicator signal.</p><p id="p0070" num="0070">The analyzer may be adapted to generate the scale gap indicator signal in response to the First_Off_Scale signal.</p><p id="p0071" num="0071">The first lag may substantially correspond to a quarter of the first wavelength, and the second lag may substantially correspond to three quarters of the first wavelength.</p><p id="p0072" num="0072">The first lagged magneto-electric transducer and the first magneto-electric transducer may include magneto-resistive transducers, and one first wavelength may be generated by the distance of the one first predetermined division.</p><p id="p0073" num="0073">The first lagged magneto-electric transducer, having a direction of sensitivity, may be positioned at a geometrical distance from the first magneto-electric transducer,<!-- EPO <DP n="17"> --> also having a direction of sensitivity. The first magneto-electric transducer and the first lagged magneto-electric transducer may be arranged such that their respective directions of sensitivity are substantially parallel, and the first lag may depend on the geometrical distance.</p><p id="p0074" num="0074">The geometrical distance may be a quarter of the first predetermined division. Thus, the first lag may become a quarter wavelength.</p><p id="p0075" num="0075">The first lagged magneto-electric transducer, having a direction of sensitivity, may be positioned in geometrical proximity to the first magneto-electric transducer, also having a direction of sensitivity. The first magneto-electric transducer and the first lagged magneto-electric transducer may be arranged such that there is a geometrical angle between their respective directions of sensitivity, and the first lag may depend on the geometrical angle.</p><p id="p0076" num="0076">This arrangement may render the first lag to be independent of the first predetermined division of the scale device. Hence, the first magneto-electric transducer head having the first magneto-electric transducer and the first lagged magneto-electric transducer may be used together with different scale devices having mutually different first predetermined divisions. Likewise, the second magneto-electric transducer head, having the second magneto-electric transducer and the second lagged magneto-electric transducer, may be made in the same manner as described for the first magneto-electric transducer head. In this manner, a flexible signal generator may be achieved, thus rendering usability with various magnetic scale devices having mutually different first predetermined divisions.</p><p id="p0077" num="0077">The geometrical angle may be substantially 45 degrees. Thus, the first lag of the magneto-electric transducer head may become a quarter wavelength irrespective of the first predetermined division distance.</p><p id="p0078" num="0078">The geometrical proximity may be selected such that the first magneto-electric transducer and the first lagged magneto-electric transducer are arranged at substantially the same location, such as, for example, with substantially no distance<!-- EPO <DP n="18"> --> between the first lagged magneto-electric transducer and the first magneto-electric transducer.</p><p id="p0079" num="0079">The first lagged magneto-electric transducer and the first magneto-electric transducer may include Hall sensor transducers, and one first wavelength may be generated by the distance of the two first predetermined divisions.</p><p id="p0080" num="0080">The geometrical angle may be substantially ninety degrees.</p><p id="p0081" num="0081">The periodically varying first digital signal and the periodically varying first lagged digital signal may be generated by a first magneto-electric transducer head when the first magneto-electric transducer head moves along a first magnetic scale pattern. The analyzer may be adapted to generate the scale gap indicator signal in dependence on an amplitude analysis of the periodically varying first digital signal and the periodically varying first lagged digital signal using the fact that they are substantially quadrature signals when the first magneto-electric transducer moves along a first magnetic scale pattern.</p><p id="p0082" num="0082">Since the two signals are substantially quadrature signals, the Pythagoras relation stating that Sqr(A) + Sqr(B) is constant, leads to the effect that the sum of the squares is substantially constant when the first magneto-electric transducer head moves along a first magnetic scale pattern. However, when the first magneto-electric transducer head passes over a scale edge the sum of the squares becomes lower, which may be due to the magnetic field becoming weaker in the gap portion of the scale. This may be used for detecting an edge of the magnetic scale.</p><p id="p0083" num="0083">The periodically varying second digital signal and the periodically varying second lagged digital signal may be generated by a second magneto-electric transducer head when the second magneto-electric transducer head moves along a first magnetic scale pattern. The analyzer may be adapted to generate the scale gap indicator signal in dependence on an amplitude analysis of the periodically varying second digital signal and the periodically varying second lagged digital signal using the fact that they are substantially quadrature signals when the first magneto-electric transducer moves along a first magnetic scale pattern.<!-- EPO <DP n="19"> --></p><p id="p0084" num="0084">The analyzer may be adapted to set a first amplitude reference value in dependence on the sum of the square of the periodically varying first digital signal and the square of the periodically varying first lagged digital signal. The analyzer may be adapted to set a second amplitude reference value in dependence on the sum of the square of the periodically varying second digital signal and the periodically varying second lagged digital signal.</p><p id="p0085" num="0085">The analyzer may be adapted to generate the scale gap indicator signal in dependence on a relation between the first amplitude reference value and the second amplitude reference value.</p><p id="p0086" num="0086">The encoder may include an analyzer adapted to generate a scale gap indicator signal in response to detection of a change in the magnetic field pattern as sensed by a first magneto-electric transducer head by a phase error signal switching from a state indicating no phase error to a state indicating the detection of a phase error.</p><p id="p0087" num="0087">Providing such a phase error signal may be used for indicating that the corresponding detector head is just entering a gap in the scale at the position visited by that detector head.</p><p id="p0088" num="0088">The encoder may include an analyzer adapted to generate a scale gap indicator signal in response to detection of a change in the magnetic field pattern as sensed by a first magneto-electric transducer head by a phase error signal switching from a state indicating no phase error to a state indicating the detection of a phase error.</p><p id="p0089" num="0089">Providing such a phase error signal may be used for indicating that the corresponding detector head is just entering a gap in the scale at the position visited by that detector head.</p><p id="p0090" num="0090">The first lagged magneto-electric transducer, having a direction of sensitivity, may be positioned at a geometrical distance from the first magneto-electric transducer, also having a direction of sensitivity. The first magneto-electric transducer and the first lagged magneto-electric transducer may be arranged such that their respective<!-- EPO <DP n="20"> --> directions of sensitivity are substantially parallel, and the first lag may depend on the geometrical distance.</p><p id="p0091" num="0091">The geometrical distance may substantially correspond to one half of the first predetermined division, and the first magneto-electric transducer and the first lagged magneto-electric transducer may include Hall sensor transducers.</p><p id="p0092" num="0092">This arrangement may render the first lag to become a quarter wavelength.</p><p id="p0093" num="0093">The encoder may include a signal treatment module, having a device adapted to generate a first head position value which is indicative of a position of a first magneto-electric transducer head, and a device adapted to generate a second head position value which is indicative of a position of a second magneto-electric transducer head.</p><p id="p0094" num="0094">The encoder may include an analyzer adapted to generate a direction signal indicative of a direction of rotation in dependence on the lag value generated in response to signals emanating from the first magneto-electric transducer head, or the lag value generated in response to signals emanating from the second magneto-electric transducer head. During a first direction of rotation, the first magneto-electric transducer head would pass a certain position of the scale before the second magneto-electric transducer head passes the certain position of the scale. During a second direction of rotation, the first magneto-electric transducer head would pass a certain position of the scale after the second magneto-electric transducer head passes the certain position of the scale.</p><p id="p0095" num="0095">The encoder may include a signal treatment module, which includes a device for switching between a first state and a second state, in which the second head position value is relied on for the delivery of the encoder output signal during the first state, and the first head position value is relied on for the delivery of the encoder output signal during the second state. The signal treatment module may be adapted to select the first state in dependence on the analyzer generating a Both_On_Scale signal indicating that both the first magneto-electric transducer head and the second magneto-electric transducer head are in a position to detect the scale when both of<!-- EPO <DP n="21"> --> the first position value estimate and the second position value estimate agree about the detected position or the detected amount of movement, and the direction signal may indicate the first direction of rotation.</p><p id="p0096" num="0096">During the first state, when the direction signal still indicates the first direction of rotation: the signal treatment module may be adapted to deduce, in response to the scale gap indicator signal, that the first magneto-electric transducer head is positioned within a gap, and then the signal treatment module may be adapted to maintain the first state so that the second head position value is relied on for the delivery of the encoder output signal.</p><p id="p0097" num="0097">During the first state, when the direction signal still indicates the first direction of rotation: the signal treatment module may be adapted to deduce that the first magneto-electric transducer head is positioned within a gap in response to the difference value reaching a predetermined value, the predetermined value being, e.g., substantially half of the gap width value; and the signal treatment module may be adapted to deduce that the first magneto-electric transducer head and the second magneto-electric transducer head are positioned on opposite sides of the gap when the direction signal still indicates the first direction of rotation and the difference value has reached a second predetermined value, the second predetermined value substantially corresponding to the gap width value or to a value exceeding the gap width value.</p><p id="p0098" num="0098">The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least one first predetermined division, in the case that the first and second magneto-electric transducer heads are magneto-resistive transducer heads. The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least two first predetermined divisions, in the case that the first and second magneto-electric transducer heads are Hall sensor transducer heads.</p><p id="p0099" num="0099">This arrangement may ensure that there is a transition period covering a distance of at least one wave length for switching from relying on the trailing transducer head to<!-- EPO <DP n="22"> --> relying on the leading transducer head in connection with a gap cross-over. Hence, this arrangement allows for both of the trailing transducer head and the foremost, leading transducer head to simultaneously detect at least one full electric signal wave length, i.e., a first predetermined wavelength, after the leading transducer head having crossed the gap, and before the output signal is switched over to be generated in dependence on the leading transducer head.</p><p id="p0100" num="0100">The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least three first predetermined divisions, in the case that the first and second magneto-electric transducer heads are magneto-resistive transducer heads. The predetermined distance between the first magneto-electric transducer head and the second magneto-electric transducer head may be longer than the sum of the gap width and at least six first predetermined divisions, in the case that the first and second magneto-electric transducer heads are Hall sensor transducer heads.</p><p id="p0101" num="0101">This arrangement may leave room for allowing the transition, from the relying on the trailing transducer head to relying on the leading transducer head in connection with a gap cross-over, to take place at positions on the scale having a more reliable a first magnetic field pattern than that existing at an edge of the magnetic scale pattern. Near an edge of the magnetic scale pattern, the first magnetic field pattern displays fringe effects that may have a negative influence on the quality of the electric signals produced by the transducers when they are positioned near an edge of the magnetic scale pattern. In other words, the scale pattern quality of the first magnetic field pattern is better at a distance from an edge of the magnetic scale pattern.</p><p id="p0102" num="0102">The signal treatment module may have a first state and a second state. The trailing second head position value may be relied on for the delivery of the encoder output signal during the first state, and the leading first head position value may be relied on for the delivery of the encoder output signal during the second state. The signal treatment module may be adapted to cause switching between a first state and a<!-- EPO <DP n="23"> --> second state during a transition period, and the transition period may depend on the distance of movement measured in terms of the first predetermined wavelength.</p><p id="p0103" num="0103">The signal treatment module may be adapted to allow the transition period to extend over at least one first predetermined wavelength.</p><p id="p0104" num="0104">The signal treatment module may be adapted to cause the transition period to be initiated when the reliable trailing second head position value indicates that the trailing second head is positioned at a distance corresponding to at least one and a half first predetermined divisions from a scale edge.</p><p id="p0105" num="0105">This arrangement may provide for a transition from the reliable trailing second head position value to the leading head position value when both of the heads are positioned at a distance of at least 1.5*Δ<sub>1</sub> from the edges of the magnetic scale at the transition occurring when the heads are straddling the gap, thereby avoiding magnetic field pattern fringe effects during the transition period. This may lead to an improved measuring accuracy, e.g., since synchronization of the first and second head position values leads to more reliable results at a distance from the edges of the magnetic scale. Moreover, the next transition from relying on the leading head to relying on the trailing head may also be initiated when the trailing second head position value indicates that the trailing second head is positioned at a distance corresponding to at least one and a half first predetermined divisions from a scale edge, after the trailing head passage of the gap.</p><p id="p0106" num="0106">The signal treatment module may be adapted to cause the transition period to be initiated when the reliable trailing second head position value indicates that the trailing second head is positioned at a distance corresponding to at least six first predetermined divisions from a scale edge.</p><p id="p0107" num="0107">The signal treatment module may be adapted to cause the transition period to be initiated when the reliable trailing second head position value indicates that the trailing second head is positioned at a distance corresponding to at least eight first predetermined divisions from a scale edge.<!-- EPO <DP n="24"> --></p><p id="p0108" num="0108">The signal treatment module may be adapted to cause switching between a first state and a second state during a transition period, in which the transition period depends on the distance of movement measured in terms of the first predetermined wavelength.</p><p id="p0109" num="0109">The signal treatment module may have a first state and a second state. During movement, one magneto-electric transducer head may have a leading position and the other magneto-electric transducer head may have a trailing position in relation to the scale device. The signal treatment module may be adapted to rely on the trailing transducer head position value for the delivery of the encoder output signal during the first state, and the signal treatment module may be adapted to rely on the leading transducer head position value for the delivery of the encoder output signal during the second state. The signal treatment module may be adapted to cause switching between a first state and a second state during a transition period, and the transition period may depend on the distance of movement measured in terms of the first predetermined wavelength.</p><p id="p0110" num="0110">In this connection, the switching is not time controlled but it is rather performed by a procedure that occurs during the movement of the transducer heads.</p><p id="p0111" num="0111">In some instances, the signals generated by the magneto-electric transducers may deviate somewhat from an ideal sine wave shape, and/or cosine wave shape. When the position estimates produced by the first position value estimator and/or the second position value estimator are generated by an arctan function, as mentioned above, the resulting position estimate may therefore deviate slightly from the true relative position. This deviation, or position error, fluctuates. This deviation, or position error, fluctuates with a period of fluctuation, and that the period of fluctuation coincides with the period of the first predetermined wavelength of the magneto-electric transducer signals.</p><p id="p0112" num="0112">The signal treatment module may be adapted to receive a plurality of trailing transducer head position values and a plurality of leading transducer head position values, during the transition period. The values may be collected as signal pairs, each pair including one trailing transducer head position value and one leading<!-- EPO <DP n="25"> --> transducer head position value. The two values in a pair may be collected at substantially the same instances.</p><p id="p0113" num="0113">The signal treatment module may be adapted to calculate an average difference value between the trailing transducer head position value and the leading transducer head position value, average difference value being calculated during the transition period.</p><p id="p0114" num="0114">The signal treatment module may be adapted to collect at least j signal pairs for the calculation of the average difference value, j being an integer, e.g., larger than 4, and preferably larger than 7.</p><p id="p0115" num="0115">The signal treatment module may be adapted to perform a synchronization process during the transition period so as to provide the switching to render a substantially smooth transition from relying on the trailing transducer head position value to relying on the leading transducer head position value for the delivery of the encoder output signal.</p><p id="p0116" num="0116">The deviation value may be used for achieving a smooth transition from relying on detector group to relying on detector group.</p><p id="p0117" num="0117">The encoder may include an encoder user interface adapted to allow a user to select the use of a selectable scale gap indicator signal. The encoder may allow for the setting of an offset parameter value, which is indicative of a distance from the position of the scale device where the selected scale gap indicator signal is generated to a position of the scale device which may be firmly attached to the shaft. The encoder may be adapted to identify a reference amplitude value in the signal generated by an arctan function generator module. The reference amplitude value may occur at a position which is located at a distance substantially corresponding to the offset parameter value from the position where the selected scale gap indicator signal is generated, and the encoder may be adapted to store the reference amplitude value as a reference amplitude value.</p><p id="p0118" num="0118">The selected scale gap indicator signal is generated as described above.<!-- EPO <DP n="26"> --></p><p id="p0119" num="0119">According to example embodiments of the present invention, in a method for generating a reference signal by an encoder, e.g., such as that described above, in which a selected scale gap indicator signal will occur once per revolution, a distance meter is started in response to the reception of the selected scale gap indicator signal. When the distance meter indicates an offset distance from the occurrence of the selected scale gap indicator signal, a comparison is performed between a current value of a periodically varying digital signal and the stored reference amplitude value; and, in response to the current value equaling the stored reference amplitude value, the encoder is adapted to generate a fix point reference signal.</p><p id="p0120" num="0120">An encoder output reference signal may be generated in response to the fix point reference signal.</p><p id="p0121" num="0121">The digital signal may be a signal generated by an encoder as described above.</p><p id="p0122" num="0122">It may be desirable to provide an incremental output signal, in which the increments are equally distributed over a revolution without having to perform any division calculation.</p><p id="p0123" num="0123">For example, the scale device may have a circumference of 203.64 first predetermined divisions Δ<sub>1</sub>, i.e. so that the transducers may provide 203.64 signal periods on one shaft revolution.</p><p id="p0124" num="0124">An incremental output signal having 2048 ppr may be provided. This may be achieved by identifying the nth signal edge by the condition that the position value &gt; n*step_length, where step_length = 203.64/(4*2048)=0.02485839844 and n goes from 1 to 8192.</p><p id="p0125" num="0125">The second last edge of the revolution should come when the position value exceeds the value 8191*step_length = 203.6151416.</p><p id="p0126" num="0126">Unfortunately, it may be slow to calculate that many decimals in an FPGA circuit.<!-- EPO <DP n="27"> --></p><p id="p0127" num="0127">It may be provided to truncate after four decimals, so that the step_length = 0.0248. The truncated value may lead to an edge position value of 8191*0.0248 = 203.1368 which may be incorrect even at the first decimal.</p><p id="p0128" num="0128">Another possibility is, for example, to calculate the edge positions by <maths id="math0001" num=""><math display="block"><mfenced separators=""><mi mathvariant="normal">n</mi><mo>*</mo><mi mathvariant="normal">L</mi></mfenced><mo>/</mo><mn mathvariant="normal">8192</mn></math><img id="ib0001" file="imgb0001.tif" wi="30" he="9" img-content="math" img-format="tif"/></maths><br/>
for every step so as to avoid the accumulation of truncation errors.</p><p id="p0129" num="0129">This may be performed easier if the number of pulses per revolution is of the type 2^N, where N is a natural number. However, if the pulse rate is something else, it could take some time to calculate which will delay the incremental pulse. It may also be difficult to implement a division in an FPGA circuit with the large number of bits that is needed in order to represent a sufficient number of decimals.</p><p id="p0130" num="0130">The following condition may be used: <maths id="math0002" num=""><math display="block"><mi>Position</mi><mo>*</mo><mn mathvariant="normal">8192</mn><mo>&gt;</mo><mi mathvariant="normal">n</mi><mo>*</mo><mn mathvariant="normal">203.64.</mn></math><img id="ib0002" file="imgb0002.tif" wi="52" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0131" num="0131">The condition according to this arrangement may avoid the truncation and time delay. In this manner, for example, the 8191st flank is calculated by the condition: <maths id="math0003" num=""><math display="block"><mi>Position</mi><mo>*</mo><mn mathvariant="normal">8192</mn><mo>&gt;</mo><mn mathvariant="normal">8191</mn><mo>*</mo><mn mathvariant="normal">203.64</mn><mo>=</mo><mn mathvariant="normal">1.366437888</mn><mo>*</mo><msup><mn mathvariant="normal">10</mn><mo>∧</mo></msup><mo>⁢</mo><mn mathvariant="normal">10.</mn></math><img id="ib0003" file="imgb0003.tif" wi="104" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0132" num="0132">It is a large number so it requires a large number of bits to be representable. But that is easy to handle, because no further calculation such as a division may be necessary.</p><p id="p0133" num="0133">An incremental index pulse (Nullimpulse) may be generated in response to n=1.</p><p id="p0134" num="0134">According to example embodiments, an encoder, for detection of rotational movement of a rotatable shaft in relation to a part of a machine, includes a scale device for attachment to a circumference of the shaft for providing a measuring path. The scale device has a width and a length and includes a magnetic scale pattern having a plurality of magnetic pole elements provided with a first predetermined division in the direction of the length so as to generate a magnetic field pattern at a first distance from a surface of the scale device. A signal generator is provided for<!-- EPO <DP n="28"> --> mounting on the machine part. The signal generator includes a housing having a physical extension in a first direction parallel to the axis of rotation of the shaft, and a physical extension in a direction orthogonal to the first direction. The signal generator includes a first output terminal for providing an encoder output signal indicative of a relative change in position between the signal generator and the scale device. The signal generator also includes a second output terminal for providing a reference signal, as well as a first magneto-electric transducer head having a first magneto-electric transducer adapted to generate a first electric signal in response to detection of the magnetic field pattern so that the first electric signal varies periodically in dependence on the magnetic field pattern such that the variation exhibits a first wavelength which depends on the first predetermined division when the first magneto-electric transducer moves along said magnetic scale pattern. The signal generator also includes a first signal processing unit, having a first device adapted to generate a periodically varying first digital signal in dependence on the first electric signal such that the variation of the first digital signal exhibits the first wavelength when the first magneto-electric transducer moves along the magnetic scale pattern, and a device for detecting a signal edge in the periodically varying first digital signal. The signal generator furthermore includes a counter for generating a count value indicative of a number of detected signal edges, a memory having a memory location having a certain data value, and an analyzer adapted to generate an indicator signal in dependence on a comparison between the count value and the certain data value, e.g., once per shaft revolution. The signal generator also includes an output signal producer adapted to produce the encoder output signal in dependence on the first digital signal, the second digital signal, and the scale gap indicator signal. The output signal producer is adapted to produce the reference signal in dependence on the scale gap indicator signal.</p><heading id="h0004"><b>Brief description of the drawings</b></heading><p id="p0135" num="0135">A better understanding of the present invention will be had upon the reference to the following detailed description when read in conjunction with the accompanying drawings, wherein like reference characters refer to like parts throughout the several views, and in which:<!-- EPO <DP n="29"> -->
<ul><li><figref idrefs="f0001">Fig. 1</figref> schematically illustrates a perspective view of an encoder system and parts of a machine to which the encoder system is applied according to an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 2</figref> schematically illustrates a block diagram of an encoder system according to an embodiment of the present invention;</li><li><figref idrefs="f0003">Fig. 3A</figref> schematically illustrates a plan view of a portion of a magnetic tape according to an embodiment of the present invention;</li><li><figref idrefs="f0004">Fig. 3B</figref> schematically illustrates a perspective view of a portion of a magnetic tape applied to a shaft according to an embodiment of the present invention;</li><li><figref idrefs="f0005">Fig. 3C</figref> schematically illustrates a perspective view of a portion of a magnetic tape applied to a shaft according to an embodiment of the present invention;</li><li><figref idrefs="f0006">Fig. 4</figref> schematically illustrates a block diagram of an encoder system according to an embodiment of the present invention;</li><li><figref idrefs="f0007">Fig. 5A</figref> schematically illustrates a block diagram of an encoder system according to an embodiment of the present invention;</li><li><figref idrefs="f0008">Fig. 6A</figref> schematically illustrates signal generation of a magnetic encoder according to an embodiment of the present invention;</li><li><figref idrefs="f0009">Fig. 6B</figref> schematically illustrates signal generation of a magnetic encoder according to another embodiment of the present invention;</li><li><figref idrefs="f0010">Fig. 6C</figref> schematically illustrates signal generation of a magnetic encoder according to yet an embodiment of the present invention;</li><li><figref idrefs="f0011">Fig. 6D</figref> schematically illustrates signal generation of a magnetic encoder according to yet an embodiment of the present invention;<!-- EPO <DP n="30"> --></li><li><figref idrefs="f0012">Fig. 7A</figref> schematically illustrates a perspective view of parts of an encoder system and a measurement object to which the encoder system is applied according to an embodiment of the present invention;</li><li><figref idrefs="f0012">Fig. 7B</figref> schematically illustrates signal waveforms presented to the signal processing components of <figref idrefs="f0002">figure 2</figref> and/or <figref idrefs="f0007">figure 5A, 5B</figref> according to an embodiment of the present invention;</li><li><figref idrefs="f0013">Fig. 7C</figref> schematically illustrates a block diagram of a signal interpreter according to an embodiment of the present invention;</li><li><figref idrefs="f0014">Fig. 7D</figref> schematically illustrates generation of a position estimation signal according to an embodiment of the present invention;</li><li><figref idrefs="f0015">Fig. 7E</figref> schematically illustrates another perspective view of an encoder system and parts of a machine to which the encoder system is applied according to an embodiment of the present invention;</li><li><figref idrefs="f0016">Fig. 8A</figref> schematically illustrates a scale device applied having a gap wherein the scale device is applied to a measurement object according to an embodiment of the present invention;</li><li><figref idrefs="f0016">Fig. 8B</figref> schematically illustrates a process of switching between two detector groups in response to passage of a gap in the scale device according to an embodiment of the present invention;</li><li><figref idrefs="f0017">Fig. 8C</figref> schematically illustrates a block diagram of an encoder system according to an embodiment of the present invention;</li><li><figref idrefs="f0018">Fig. 8D</figref> schematically illustrates a block diagram of an encoder system according to an embodiment of the present invention;</li><li><figref idrefs="f0019">Fig. 9A</figref> is an illustration showing how gap detection is performed by the encoder system according to an embodiment of the present invention.<!-- EPO <DP n="31"> --></li><li><figref idrefs="f0020">Fig. 9B</figref> is an illustration showing an implementation of synchronization associated to switching between the two detector groups.</li><li><figref idrefs="f0021">Fig. 9C</figref> is an illustration showing another implementation of synchronization associated to switching between the two detector groups.</li><li><figref idrefs="f0022">Fig. 10A</figref> schematically illustrates a cross-section view of a scale device with a fixpoint or fixpoint region applied to a measurement object according to an embodiment of the present invention.</li><li><figref idrefs="f0022">Fig. 10B</figref> schematically illustrates a waveform used for generating a reference pulse according to an embodiment of the present invention;</li><li><figref idrefs="f0023">Fig. 14A</figref> schematically illustrates a flow chart of a method for generating a reference pulse using a fixpoint according to an embodiment of the present invention.</li></ul></p><heading id="h0005"><b>Detailed description</b></heading><p id="p0136" num="0136"><figref idrefs="f0001"><b>Figure 1</b></figref> is a block diagram illustrating a machine 10 having a rotatable shaft 20. A scale device 30 may be fastened to the shaft 20 so that the scale device 30 moves when the rotatable shaft 20 rotates in relation to a machine part 40. A signal generator 45 may be attachable to the machine part 40. The signal generator 45 may be adapted to generate a signal indicative of a position of the scale device 30 in relation to the signal generator 45, and/or a signal indicative of a relative change in position between the signal generator 45 and the scale device 30.</p><p id="p0137" num="0137">The machine 10 may be embodied by a wind power station 10, as illustrated in <figref idrefs="f0001">Figure 1</figref>. Hence, the shaft 20, of the wind power station 10, may be attached to one or more turbine/rotor blades 80 adapted to cause rotation of the shaft 20 in response to air movement caused by wind so as to generate electric power by means of a generator coupled to the shaft 20. The wind power station may be a geared wind power station, a direct drive (gearless) wind power station or a hybrid drive wind power station.<!-- EPO <DP n="32"> --></p><p id="p0138" num="0138">The solution according to the present invention includes a plurality of embodiments, which are advantageous per se and can be combined with one another in an advantageous manner. These embodiments and advantages associated with them will be discussed below.</p><p id="p0139" num="0139"><figref idrefs="f0002"><b>Figure 2</b></figref> is a schematic block diagram illustrating an embodiment of a system 90 for detecting movement and/or position of a rotatable shaft, such as the shaft 20 of <figref idrefs="f0001">Figure 1</figref>. The encoder system 90 may include a scale device 30 and a signal generator 45. When the encoder system 90 is in operation, the signal generator 45 and the scale device 30 are movable in relation to each other. The signal generator 45 comprises a detector device 50 adapted to generate at least one sensor signal in response to a relative change in position between the detector device 50 and the scale device 30.</p><p id="p0140" num="0140">The detector device 50 is coupled to a signal processing device 100 which is adapted to generate at least one output signal in dependence on the at least one sensor signal. The at least one output signal is delivered to an output 110. Hence, the signal generator 45 may be adapted to generate at least one output signal in response to a relative change in position between the signal generator 45 and the scale device 30. The output signal may be a square wave signal or sine signal, a single-channel or multichannel signal or a signal representing a digitally coded incremental position. Alternatively the output signal may be signal derived directly from one of these signals or from a combination of these signals.</p><p id="p0141" num="0141">According to an embodiment, the scale device 30 may comprise an encoding band 30 which is attachable around the perimeter of the shaft 20, the encoding band 30 being providable with information which is detectable by the detector device 50. Alternatively, the scale device 30 may comprise an encoding ring 30 or an encoding tape 30.</p><p id="p0142" num="0142">It is to be noted that the system 90 may comprise additional components than the exemplified components with reference to <figref idrefs="f0002">figure 2</figref>. For example the system 90 may comprise an analogue to digital (A/D) converter arranged to convert the generated at least one sensor signal to a digital representation. Furthermore the system 90<!-- EPO <DP n="33"> --> may comprise a digital to analogue (D/A) converter (see <figref idrefs="f0006">fig 4</figref>) arranged to convert the generated at least one output signal from the signal processing device into an analogue representation.</p><p id="p0143" num="0143">The scale device 30 may be embodied by at least one encoding tape such as at least one magnetic encoding tape, having one or more magnetic scale tracks. The scale device 30 may alternatively be embodied by at least one magnetic encoder ring or encoder belt. The detector device 50 may include a magnetic encoder detector such as a magneto-resistive transducer (MR), a giant magneto-resistive transducer (GMR), a colossal magneto-resistive transducer (CMR), a tunneling magneto-resistive transducer (TMR) or other suitable detector.</p><p id="p0144" num="0144"><figref idrefs="f0003"><b>Figure 3A</b></figref> illustrates an example embodiment of a scale device 30 having a magnetic scale pattern 35. The magnetic scale pattern 35 may include a plurality of successive equidistant magnetic pole elements 120.</p><p id="p0145" num="0145">According to an embodiment, scale device 30 is provided with information in the form of a magnetic scale pattern 35. The magnetic scale pattern 35 comprises a magnetic medium which is provided with a graduation in the form of successive equidistant magnetic pole elements 120. Hence, the magnetic scale pattern 35 exhibits incremental graduations. The incremental graduations of the scale may comprise a magnetic pattern having a first predetermined division Δ1, corresponding to the distance between adjacent magnetic pole elements 120, along a path in the direction of arrow Z (See <figref idrefs="f0003">Figure 3A</figref>). When such a scale device 30 is used with a magneto resistive sensor unit, the first predetermined division Δ1 causes an electric signal having a wave length first predetermined wavelength λ1 corresponding to the first predetermined division Δ1, as discussed in connection with <figref idrefs="f0008">Figure 6A</figref>.</p><p id="p0146" num="0146"><figref idrefs="f0004"><b>Figure 3B</b></figref> is a perspective view of a portion of an embodiment 30B of the scale device 30, when applied on the perimeter of a shaft 20. The scale device embodiment 30B has plural equidistant magnetic pole elements, wherein adjacent magnetic pole elements 120 are positioned so that equal magnetic poles face each other. The magnetic pole elements 120 are positioned so that the magnetic poles are substantially parallel to the surface of the shaft 20 onto which the scale device<!-- EPO <DP n="34"> --> 30B is attached and parallel to the direction of elongation of the scale device 30B, while the magnetic pole elements 120 are substantially orthogonal to the direction of the radius of the shaft 20. The magnetic north of one pole element faces the magnetic north of the adjacent pole element, as illustrated in <figref idrefs="f0004">Figure 3B</figref>. The magnetic pole elements 120 of the scale device 30B advantageously generate magnetic fields having magnetic flux lines that reach into space at a radial direction from the shaft 20 (see <figref idrefs="f0001">Figure 1</figref> in conjunction with <figref idrefs="f0004">Figure 3B</figref>) onto which the scale device 30, 30B is mounted.</p><p id="p0147" num="0147"><figref idrefs="f0005"><b>Figure 3C</b></figref> is a perspective view of a portion of another embodiment 30C of the scale device 30, shown in <figref idrefs="f0003">Figure 3A</figref>, when applied on the perimeter of a shaft 20. The scale device embodiment 30C has plural equidistant magnetic pole elements 120, wherein all magnetic pole elements 120are positioned so that the magnetic poles are directed in a substantially radial direction in relation to the shaft 20. The magnetic pole elements 120 are positioned so every other magnetic pole element 120 has a magnetic pole directed in the radial direction out from the center of the shaft 20, and the remaining magnetic pole elements have a magnetic pole directed in the radial direction in towards the center of the shaft 20, as shown in <figref idrefs="f0005">Figure 3C</figref>.</p><p id="p0148" num="0148">Whereas both of the scale device embodiments 30B and 30C generate a magnetic field that can be used as an incremental encoder scale, the <figref idrefs="f0005">Figure 3C</figref> embodiment advantageously allows cutting the band to a desired length while avoiding the creation of a magnetic pole having a shorter pole length λ.</p><p id="p0149" num="0149"><figref idrefs="f0006"><b>Figure 4</b></figref> is a block diagram illustrating an embodiment 90B of the encoder 90 for detecting movement and/or position of a rotatable shaft, such as the shaft 20 of <figref idrefs="f0001">Figure 1</figref>.</p><p id="p0150" num="0150">With reference to <figref idrefs="f0006">Figure 4</figref>, the encoder 90 may include a scale device 30, and a signal generator 45. When the encoder system 90 is in operation, the signal generator 45 and the scale device 30 are movable in relation to each other, as discussed in connection with <figref idrefs="f0001">Figures 1</figref> and <figref idrefs="f0002">2</figref> above. The signal generator 45 comprises a first detector group 50:1 and a second detector group 50:2. The first detector group 50:1 includes a first transducer 50:1A adapted to generate a first<!-- EPO <DP n="35"> --> electric signal A1, and a second transducer 50:1B adapted to generate a second electric signal B1, said first transducer 50:1A and said second transducer 50:1B. The first electric signal A1 and the second electric signal B1 constituting a first signal pair A1B1.</p><p id="p0151" num="0151">The first transducer 50:1A may be coupled to deliver the analogue first electric signal A1 to a first A/D converter 125:1A which may be adapted generate a digital signal A1<sub>D</sub> in response to the analogue first electric signal A1. Similarly, the second transducer 50:1B may be coupled to deliver the analogue second electric signal B1 to a second A/D converter 125:1B which may be adapted generate a digital signal B1<sub>D</sub> in response to the analogue second electric signal B1.</p><p id="p0152" num="0152">The second group 50:2 of detector elements may include a third transducer 50:2A adapted to generate a third electric signal A2, and a fourth transducer 50:2B adapted to generate a fourth electric signal B2.</p><p id="p0153" num="0153">The third transducer 50:2A may be coupled to deliver the analogue third electric signal A2 to a third A/D converter 125:2A which may be adapted generate a digital signal A2<sub>D</sub> in response to the analogue third electric signal A2. Similarly, the fourth transducer 50:2B may be coupled to deliver the analogue fourth electric signal B2 to a fourth A/D converter 125:2B which may be adapted generate a digital signal B2<sub>D</sub> in response to the analogue second electric signal B2.</p><p id="p0154" num="0154">Each of the A/D converters 125:1A 125:1B 125:2A 125:2B sample their respective signals A1, B1, A2, and B2, respectively, at a predetermined sample rate f<sub>S</sub>.</p><p id="p0155" num="0155">The signal generator 45 may also comprise a data processing unit 100 capable of controlling the operation of signal generator 45 in accordance with program code. The data processing unit 100 may also be coupled to a memory 102 for storing said program code. According to an embodiment, the data processing unit 100 may be adapted to receive the digital signals A1<sub>D</sub> B1<sub>D</sub>, A2<sub>D</sub> and B2<sub>D</sub>.</p><p id="p0156" num="0156">The program memory 102 is preferably a non-volatile memory. The memory 102 may be a read/write memory, i.e. enabling both reading data from the memory and<!-- EPO <DP n="36"> --> writing new data onto the memory 102. According to an embodiment the program memory 102 is embodied by a FLASH memory. According to an embodiment, the program memory 102 is integrated in the data processing unit 100 so that the program functions to be executed by the data processing unit 100 are stored within the data processing unit 100 itself.</p><p id="p0157" num="0157">The data processing means 100 may also be coupled to a read/write memory 104 for data storage. According to an embodiment, the read/write memory 104 is a non-volatile memory. This advantageously means that data written into the non-volatile read/write memory 104 will be retained even when the memory 104 is not powered.</p><p id="p0158" num="0158">When, in the following, it is described that the data processing unit 100 performs a certain function this is to be understood that the data processing unit 100 performs a certain part of the program which is stored in the memory 102.</p><p id="p0159" num="0159">The data processing unit 100 may also be coupled to a user interface 170 via a data bus 180. The user interface 180 may include a display 182 and/or data input means 184, such as buttons 184 and or a touch screen 182/184 adapted to allow a user to feed data into the encoder via the display 182 on which the encoder supplies user information output.</p><p id="p0160" num="0160">A user of the encoder 90 may be provided with information messages by means of characters being displayed on the display 182. A particular message may be displayed in response to a certain event.</p><p id="p0161" num="0161">The data processing unit 100 may be coupled to the memory 102 by means of a data bus, and to the read/write memory 104 by means of another data bus. The data processing unit 100 may also communicate with a data port 200 by means of a data bus 210.</p><p id="p0162" num="0162">The wording "a computer program product, loadable into a digital memory of an encoder" means that a computer program can be introduced into a digital memory of an encoder 90, such as e.g. the memory 102, so as to obtain an encoder programmed to be capable of, or adapted to, carrying out a method of the kind<!-- EPO <DP n="37"> --> mentioned in this document. The term "loaded into a digital memory of a condition analysing apparatus" means that an encoder programmed in this way is capable of, or adapted to, carrying out a method of the kind described above.</p><p id="p0163" num="0163">The above mentioned computer program product may also be loadable onto a computer readable medium, such as a compact disc or DVD or USB memory stick. Such a computer readable medium may be used for delivery of the program to a client, in that the program may be loaded from the computer readable medium to the program memory 102, e.g. via port 200.</p><p id="p0164" num="0164">The data processing unit 100 may include a central processing unit, or microprocessor, for controlling the operation of the encoder 90. Alternatively the data processing unit 100 may include a Digital Signal Processor (DSP).</p><p id="p0165" num="0165">According to an embodiment, the data processing unit 100 includes a Field Programmable Gate Array circuit 100, also referred to as FPGA. The Field Programmable Gate Array circuit 100 advantageously provides a combination of flexibility and very high performance to the encoder 90 in that a large amount of data can be processed relatively fast by means of the Field Programmable Gate Array circuit. This solution advantageously enables simultaneous signal treatment of two, three or four detector signals, such as the digital signals A1<sub>D</sub>, B1<sub>D</sub>, A2<sub>D</sub> and B2<sub>D</sub>. Moreover, the functions executed by the FPGA may be software controlled and the FPGA allows for truly parallel processing, which also contributes to increased performance to the encoder 90. Hence, the FPGA 100 may be coupled to receive, in real time, the digital signals A1<sub>D</sub>, B1<sub>D</sub>, A2<sub>D</sub> and B2<sub>D</sub> all of which are digital signals having a sample rate f<sub>S</sub>.</p><p id="p0166" num="0166">The data processing unit 100 may be arranged to run the program code stored in the memory 102 so as to cause the encoder 90 to execute one or several programs so as to cause any of the processes described in this document to be executed.</p><p id="p0167" num="0167"><figref idrefs="f0007"><b>Figure 5A</b></figref> is a block diagram illustrating an embodiment of the system 90, 90B for detecting movement and/or position of a rotatable shaft, such as the shaft 20 of <figref idrefs="f0001">Figure 1</figref>.<!-- EPO <DP n="38"> --></p><p id="p0168" num="0168">The system 90 may include a scale device 30 attached to a shaft 20 of a machine 10, as discussed in connection with <figref idrefs="f0001 f0002 f0003 f0004 f0005 f0006">figures 1-4</figref> above.</p><p id="p0169" num="0169">The system 90C may also include a detector device 50 having a first detector group 50:1 and a second detector group 50:2. The first detector group 50:1 may include a first transducer 50:1A and a first A/D converter 125:1A adapted generate a digital signal A1<sub>D</sub>, and a second transducer 50:1B and a second A/D converter 125:1B adapted generate a digital signal B1<sub>D</sub> as described above in connection with <figref idrefs="f0006">Figure 4</figref>.</p><p id="p0170" num="0170">Similarly, the second detector group 50:2 may include a third transducer 50:2A coupled to a third A/D converter 125:2A which may be adapted generate a digital signal A2<sub>D</sub> in response to the analogue second electric signal B1; and a fourth transducer 50:2B and a fourth A/D converter 125:2B which may be adapted generate a digital signal B2<sub>D</sub> as described above in connection with <figref idrefs="f0006">Figure 4</figref>.</p><p id="p0171" num="0171">Each of the A/D converters 125:1A 125:1B 125:2A 125:2B sample their respective signals A1, B1, A2, and B2, respectively, at a predetermined sample rate f<sub>S</sub> so as to generate corresponding digital signals A1<sub>D</sub>, B1<sub>D</sub>, A2<sub>D</sub>, and B2<sub>D</sub>, respectively.</p><p id="p0172" num="0172">The digital signals are delivered to the data processing unit 100. The data processing unit 100, when executing the programs stored in the memory 102, as described above in connection with <figref idrefs="f0006">Figure 4</figref>, will perform functions which are described with reference to the block diagram of <figref idrefs="f0007">Figure 5A</figref>. Hence, according to an embodiment, the blocks denoted by reference numerals 150:1, 150:2, 220, 230 represent functions that may be performed by the data processing unit 100. As mentioned above, the data processing unit 100 may include a Field Programmable Gate Array circuit 100.</p><p id="p0173" num="0173">With reference to <figref idrefs="f0001">Figure 1</figref> and <figref idrefs="f0007">Figure 5A</figref>, it is to be understood that when the shaft 20 rotates, the magnetic scale device 30 will move in relation to the detector unit 50.<!-- EPO <DP n="39"> --> With reference to <figref idrefs="f0007">Figure 5A</figref>, the encoder 90,90B may include a first position value estimator 150:1 for generating a first position value estimate Z<sub>EST1</sub> in dependence on at least one of the digital signals A1<sub>D</sub> and B1<sub>D</sub>.</p><p id="p0174" num="0174">The system 90, 90B may also include a second position value estimator 150:2 for generating a second position value estimate Z<sub>EST2</sub> in dependence on at least one of the digital signals A2<sub>D</sub> and B2<sub>D</sub>.</p><p id="p0175" num="0175">According to an embodiment, the first position value estimator 150:1 is embodied by a first signal pair interpreter 150:1 adapted to receive the digital signals A1<sub>D</sub> and B1<sub>D</sub>. The first signal pair interpreter 150:1 is adapted to generate a first estimated position signal Z<sub>est1</sub> in dependence on the received signal pair.</p><p id="p0176" num="0176">The system 90, 90B may also include a second signal pair interpreter 150:2 adapted to receive the second signal pair A2<sub>D</sub>, and B2<sub>D</sub>. The second signal interpreter 150:2 is adapted to generate a second estimated position signal Z<sub>est2</sub> in dependence on the received signal pair A2B2. This will be described in more detail in connection with e.g. <figref idrefs="f0013">Fig 7C</figref>.</p><heading id="h0006"><u>Correlation between scale division and transducer output wavelength</u></heading><p id="p0177" num="0177"><figref idrefs="f0008"><b>Figure 6A</b></figref> is an illustration showing the transducer 50:1A of <figref idrefs="f0007">Figure 5A</figref>, and a scale device 30 having a magnetic scale pattern 35, as discussed in connection with <figref idrefs="f0003">figure 3A</figref>, <figref idrefs="f0004">3B</figref>, and/or 3C.</p><p id="p0178" num="0178"><figref idrefs="f0008">Figure 6A</figref> illustrates a transducer 50:1A moving, in relation to the scale device 30, along a measuring path Z in the direction of the arrow (which is also denoted Z) at a distance D<sub>S</sub> from the surface of the scale device 30. Hence, the direction of travel of the transducer 50:1A is from the left to the right in <figref idrefs="f0008">Figure 6A</figref>.</p><p id="p0179" num="0179">As shown in <figref idrefs="f0008">Figure 6A</figref>, the magnetic pole elements 120 generate magnetic fields forming a magnetic field pattern 240 corresponding to the magnetic scale pattern 35. The magnetic field pattern 240 may be detectable at a distance D<sub>S</sub> from the surface of the scale device 30. The magnetic fields are illustrated by magnetic flux lines 250 in <figref idrefs="f0008">Figure 6A</figref>.<!-- EPO <DP n="40"> --></p><heading id="h0007"><u>The magneto-resistive transducer output wavelength</u></heading><p id="p0180" num="0180">According to an embodiment, the transducer 50:1A includes a magneto-resistive transducer, whose resistance depends on the direction of the magnetic field passing through the magneto-resistive transducer body. When the magneto-resistive transducer moves along the measuring path z (in the direction of the arrow z as illustrated in <figref idrefs="f0008">Figure 6A</figref>), the resistance of the magneto-resistive transducer will vary in dependence of the magnetic field pattern 240, and an amplitude of a detection signal may vary as illustrated by the diagram 160 in the upper portion of <figref idrefs="f0008">Figure 6A</figref>. Hence, when the transducer 50:1A is supplied with a predetermined voltage, the current flowing through the transducer 50:1A will also vary, as illustrated by the diagram 160 in the upper portion of <figref idrefs="f0008">Figure 6A</figref>, in dependence of a relative change in position between the signal generator 45 and the scale device 30. According to a preferred embodiment, the magneto-resistive transducer 50:1A may, in fact, be connected in a bridge circuit, such as a Wheatstone bridge or a Carey Foster bridge. This advantageously improves the accuracy with which the resistance variation of the magneto-resistive transducer may be detected.</p><p id="p0181" num="0181">As discussed in connection with <figref idrefs="f0003">figures 3A</figref> and <figref idrefs="f0004">3B</figref>, the incremental graduations of the scale may comprise a magnetic pattern having a first predetermined division Δ1, corresponding to the distance between adjacent magnetic pole elements 120, along a path in the direction of arrow Z (see <figref idrefs="f0003">Figure 3A</figref> and/or <figref idrefs="f0008">Fig. 6A</figref>). When such a scale device 30 is used with a magneto-resistive sensor unit, the first predetermined division Δ1 may cause an electric signal A1 having an amplitude to vary with a first predetermined wavelength λ1 corresponding to the first predetermined division Δ1, as illustrated in <figref idrefs="f0008">Figure 6A</figref>. Hence, when the magneto-resistive sensor unit moves the first predetermined distance Δ<sub>1</sub> along the measuring path z, the analogue electric signal A1 will exhibit one first predetermined wavelength λ1.</p><p id="p0182" num="0182">Hence, when the incremental graduations of the scale comprises a magnetic pattern having a first predetermined division Δ1, a magneto-resistive transducer 50:1A, when moving along the measuring path Z, may generate an oscillating signal A1 in response to a detected magnetic field pattern 240. In fact, the oscillating analogue electric transducer signal A1 may depend on transducer movement along the scale<!-- EPO <DP n="41"> --> direction Z so as to exhibit one first predetermined wavelength λ1 in response to moving one division Δ1.</p><heading id="h0008"><u>The Hall transducer output wavelength</u></heading><p id="p0183" num="0183">According to an embodiment of the encoder 90, 90B, the transducer 50:1A may be a Hall transducer. <figref idrefs="f0009"><b>Figure 6B</b></figref> is an illustration of the correlation between magnetic scale pattern 35 and the transducer output signal wave length when the transducer 50:1A is a Hall transducer.</p><p id="p0184" num="0184">The Hall transducer may comprise an indium compound semiconductor crystal such as indium antimonide. When the Hall transducer is positioned so that the magnetic field lines are passing at right angles through the Hall transducer, the transducer may provide an output indicative of the value of magnetic flux density.</p><p id="p0185" num="0185">A current is passed through the crystal of the Hall transducer which, when placed in a magnetic field has a voltage occurring across it due to the "Hall effect". The Hall effect occurs due to a conductor being passed through a uniform magnetic field. When the Hall transducer moves along the measuring path in the direction z, the output of the Hall transducer will vary, as illustrated by the diagram 160 in the upper portion of <figref idrefs="f0009">Figure 6B</figref>.</p><p id="p0186" num="0186">As discussed in connection with <figref idrefs="f0003">figures 3A</figref> and <figref idrefs="f0004">3B</figref>, the incremental graduations of the scale may comprise a magnetic pattern having a first predetermined division Δ1, corresponding to the distance between adjacent magnetic pole elements 120, along a path in the direction of arrow Z (see <figref idrefs="f0003">Figure 3A</figref> and/or <figref idrefs="f0008">Fig. 6A</figref>). When such a scale device 30 is used with a Hall transducer unit, the first predetermined wavelength λ1 of the electric output signal from the Hall transducer unit corresponds to 2* Δ<sub>1</sub>, as illustrated in <figref idrefs="f0009">Figure 6B</figref>. Hence, when the Hall transducer unit moves a distance of twice the first predetermined distance Δ1 along the measuring path z, the analogue electric signal A1 will exhibit one first predetermined wavelength λ1.</p><p id="p0187" num="0187"><figref idrefs="f0010"><b>Figure 6C</b></figref> is an illustration of the correlation between magnetic scale pattern 35 and the wave length and phase of the transducer output signals wave length when the transducers 50:1A and 50:1B are magneto-resistive transducers.<!-- EPO <DP n="42"> --></p><p id="p0188" num="0188">According to an embodiment the first lagged magneto-electric transducer (50:1B), having a direction of sensitivity, is positioned at a geometrical distance from said first magneto-electric transducer (50:1A), also having a direction of sensitivity; wherein said first magneto-electric transducer (50:1A) and said first lagged magneto-electric transducer (50:1B) are arranged such that their respective directions of sensitivity are substantially parallel; and wherein said first lag (PD) depends on said geometrical distance. According to an embodiment the geometrical distance between the two transducers is a quarter of said first predetermined division (Δ<sub>1</sub>). This solution advantageously renders the first lag (PD) to become a quarter wavelength. However, if a different scale device is used, having a different predetermined division Δ<sub>3</sub>, deviating from the first predetermined division Δ<sub>1</sub> then the electrical signals A1 and B1 will have another phase relationship.</p><p id="p0189" num="0189">According to another embodiment, the first lagged magneto-electric transducer (50:1B), having a direction of sensitivity, is positioned in geometrical proximity to said first magneto-electric transducer (50:1A), also having a direction of sensitivity, wherein said first magneto-electric transducer (50:1A) and said first lagged magneto-electric transducer (50:1B) are arranged such that there is a geometrical angle between their respective directions of sensitivity; and wherein said first lag (PD) depends on said geometrical angle.</p><p id="p0190" num="0190">This solution advantageously renders the first lag (PD) to be independent of the first predetermined division (Δ<sub>1</sub>) of the scale device. Hence, the first magneto-electric transducer head (50:1) having said first magneto-electric transducer (50:1A) and said first lagged magneto-electric transducer (50:1B) may be used together with different scale devices 30 having mutually different first predetermined divisions (Δ<sub>1</sub>). Likewise, the second magneto-electric transducer head (50:2), having said second magneto-electric transducer (50:2A) and said second lagged magneto-electric transducer (50:2B), may be made in the same manner as described for the first magneto-electric transducer head (50:1). In this manner, an advantageously flexible a signal generator (45, 50) is achieved, thus rendering usability with various magnetic scale devices having mutually different first predetermined divisions (Δ<sub>1</sub>). According to an embodiment, the geometrical angle is substantially 45 degrees, as illustrated in <figref idrefs="f0010">Figure 6C</figref>. This solution advantageously renders the first lag (PD) of<!-- EPO <DP n="43"> --> the magneto-electric transducer head to become a quarter wavelengths irrespective of the first predetermined division (Δ<sub>1</sub>) distance.</p><p id="p0191" num="0191">According to an embodiment, the geometrical proximity is such that said first magneto-electric transducer (50:1A) and said first lagged magneto-electric transducer (50:1B) are arranged at substantially the same spot, such as for example with substantially no distance between said first lagged magneto-electric transducer (50:1B) and said first magneto-electric transducer (50:1A).</p><p id="p0192" num="0192"><figref idrefs="f0011"><b>Figure 6D</b></figref> is an illustration of the correlation between magnetic scale pattern 35 and the transducer output signals wave length when the transducers 50:1A and 50:1B are Hall transducers.</p><p id="p0193" num="0193">With reference to <figref idrefs="f0011">Fig 6D</figref> the first lagged magneto-electric transducer (50:1B) and said first magneto-electric transducer (50:1A) may be Hall sensor Transducers; and one said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) may then be generated by relative movement along the distance of said two first predetermined divisions (Δ<sub>1</sub>). According to an embodiment, the first lagged magneto-electric transducer (50:1B), having a direction of sensitivity, is positioned in geometrical proximity to said first magneto-electric transducer (50:1A), also having a direction of sensitivity, wherein said first magneto-electric transducer (50:1A) and said first lagged magneto-electric transducer (50:1B) are arranged such that there is a geometrical angle between their respective directions of sensitivity; and wherein said first lag (PD) depends on said geometrical angle.</p><p id="p0194" num="0194">According to an embodiment, the geometrical angle is substantially ninety degrees. This solution advantageously renders the first lag (PD) of the magneto-electric transducer head to become a quarter wavelength irrespective of the first predetermined division (Δ<sub>1</sub>) distance, when Hall sensor transducers are used.</p><p id="p0195" num="0195"><figref idrefs="f0012"><b>Figure 7A</b></figref> is an illustration showing an exemplary configuration of parts of an encoder system applied to a measurement object 20, such as a rotating shaft rotating axially in a direction Z.<!-- EPO <DP n="44"> --></p><p id="p0196" num="0196">As shown in <figref idrefs="f0012">figure 7A</figref> a scale device 30, e.g. in the form of a magnetic encoding tape, may be applied circumferentially around the measurement object 20. The scale device 30 may be as described above, e.g. in connection with <figref idrefs="f0003">figures 3A</figref>, <figref idrefs="f0004">3B</figref>, and/or 3C. Hence, the scale device 30 comprises a number of magnetic north and south poles, the magnetic north and south poles of the magnetic scale device being arranged in an alternating fashion in a circumferential direction. The magnetic north and south poles are further arranged at equidistant intervals of a predetermined distance: the first predetermined division Δ<sub>1</sub>. A first detector group 50:1 and a second detector group 50:2 may be arranged so that each of the two detector groups 50:1 and 50:2 are positioned above and substantially parallel to the scale device 30. The first and second detector groups 50:1, 50:2 may be arranged to sense the magnetic fields generated by the magnetic poles of the scale device as discussed with reference to <figref idrefs="f0008">figure 6A</figref>.</p><p id="p0197" num="0197">Each magnetic pole forms an increment so that when passed by a detector group (one of first detector group 50:1 and second detector group 50:2), a pulse can be generated, wherein said incremental pulse indicates incremental shaft rotation, i.e. incremental rotation of the measurement object, as discussed in connection with <figref idrefs="f0008">Figure 6A</figref> and <figref idrefs="f0009">6B</figref>.</p><p id="p0198" num="0198">In the illustrated example, with reference to <figref idrefs="f0012">figure 7A</figref>, the number of poles also referred to as pole number PN is 32. This means that PN increments may be generated for each revolution of the rotating shaft, when a magneto-resistive transducer is used. Hence, when PN = 32, there will be 32 increments generated for each revolution of the rotating shaft when a magneto-resistive transducer is used. In case a Hall transducer is used the number of increments would be PN/2 for each revolution of the rotating shaft. Hence, when PN = 32, there will be 16 increments generated for each revolution of the rotating shaft when a Hall transducer is used.</p><p id="p0199" num="0199">It should be noted that the number of poles may be different compared to the illustrated example with reference to <figref idrefs="f0012">figure 7A</figref>. For example, fewer or more poles could be implemented by means of forming more or fewer magnetic alternating magnetic poles in the scale device. As an example the number of poles could instead be in the range of 2-100000, such as for example 1024 or 2048. The<!-- EPO <DP n="45"> --> number of poles actually used in a scale device 30 may depend on application, shaft diameter and desired resolution to be achieved in the encoder output signal.</p><p id="p0200" num="0200"><figref idrefs="f0012"><b>Figure 7B</b></figref> is an illustration showing a signal generation resulting from detector groups 50:1, 50:2 passing over a moving scale device, such as that exemplified with reference to <figref idrefs="f0012">figure 7A</figref>.</p><p id="p0201" num="0201">As shown in <figref idrefs="f0012">figure 7B</figref> waveforms in the form of sine and cosine signals are generated resulting from each of the detector groups passing over a scale device moving in a direction Z, such as illustrated with reference to <figref idrefs="f0012">figure 7A</figref>.</p><p id="p0202" num="0202">According to an embodiment, each of the first detector group 50:1 and second detector group 50:2 comprises two magneto-resistive transducers. The first detector group may comprise a first transducer 50:1A adapted to generate a first electric signal A1 so that it oscillates in dependence on movement in the direction Z at a distance from the scale device 30, and a second transducer 50:1B may be adapted to generate a second electric signal B1 so that it oscillates in dependence on movement in the direction Z at a distance from the scale device 30. Examples of the waveforms of signals A1 and B1 are visible in the upper portion of <figref idrefs="f0012">figure 7B</figref>. The second transducer 50:1B is adapted to generate the second electric signal B1 at a lag in relation to the first electric signal A1. In other words, the first and second electric signals are generated such that there is a phase deviation PD between the first electric signal A1 and the second electric signal B1. The sign of the phase deviation PD may be indicative of the direction of movement of shaft 20.</p><p id="p0203" num="0203">The second detector group may comprise a third transducer 50:2A adapted to generate a third electric signal A2, and a fourth transducer 50:2B adapted to generate a fourth electric signal B2. Examples of the waveforms of signals A2 and B2 are illustrated in the lower portion of <figref idrefs="f0012">figure 7B</figref>.</p><p id="p0204" num="0204">As mentioned above, the first transducer and the second transducer of the first detector group are mutually configured so that there is a phase lag PD between the signals A1 and B1. According to an embodiment, the first electric signal A1 may<!-- EPO <DP n="46"> --> substantially form a sine wave and the second electric signal B1 may substantially form a cosine signal. Hence, according to an embodiment:
<ul><li>A1 = sin(z), and</li><li>B1 = cos(z),</li></ul>
wherein<br/>
z represents the distance along the measuring path.</p><p id="p0205" num="0205">Hence, according to this embodiment, the second electric signal B1 may be 90 degrees out of phase from the first electric signal A1. With reference to <figref idrefs="f0012">Figure 7A</figref> in conjunction with <figref idrefs="f0012">Figure 7B</figref>, it is be understood that when shaft 20 rotates clockwise (i.e. in the direction of the arrow Z) the phase deviation between signals A1 and B1 may be +90 degrees, and conversely, when the shaft 20 rotates counterclockwise (i.e. in the opposite direction of the arrow Z) the phase deviation between signals A1 and B1 may be -90 degrees. Hence, the sign (+ or -) of the phase deviation between signals A1 and B1 may be used for determining the direction of rotation of the shaft 20.</p><p id="p0206" num="0206">Accordingly, the second electric signal B1 may be a quadrature signal of the first electric signal A1.This may, for example, be achieved by means of configuring relative positioning or angular displacement between the first and second transducer of the first detector group.</p><p id="p0207" num="0207">In a similar fashion the third signal A2 of the third transducer of the second detector group may substantially form a sine signal, and the fourth electric signal of the fourth transducer of the second detector group may substantially form a cosine signal. Hence, the fourth electric signal B2 may substantially be the quadrature signal of the third electric signal A2. This means that the phase difference PD both between the first and second electric signal and between the third and fourth electric signal is 90 degrees. Hence, according to an embodiment:
<ul><li>A2 = sin(z), and</li><li>B2 = cos(z),</li></ul>
wherein<br/>
z represents the distance along the measuring path.<!-- EPO <DP n="47"> --></p><p id="p0208" num="0208">Accordingly, the sign (+ or -) of the phase deviation between signals A2 and B2 may also be used for determining the direction of rotation of the shaft 20.</p><p id="p0209" num="0209"><figref idrefs="f0013"><b>Figure 7C</b></figref> is an illustration showing a block diagram of the first signal interpreter 150:1. With reference to <figref idrefs="f0007">Figure 5A</figref> and as shown in <figref idrefs="f0013">figure 7C</figref>, the signals A1<sub>D</sub> and B1<sub>D</sub> in the form of a sine and a cosine signal from the first detector group 50:1, such as exemplified in <figref idrefs="f0012">figure 7A, 7B</figref>, are fed into the signal interpreter 150:1 associated to the first detector group.</p><p id="p0210" num="0210">According to an embodiment the signal interpreter 150:1 comprises an arctan function generator module 260:1 arranged to process the A1<sub>D</sub> and B1<sub>D</sub> signals by means of performing an arctan calculation function. The output value S<sub>EA</sub> generated by the arctan function generator module 260:1 may represent an <u>e</u>lectrical <u>a</u>ngle (EA), i.e. a value progressing from zero to 2Π in dependence on signals A1<sub>D</sub> and B1<sub>D</sub>. Hence, with reference to <figref idrefs="f0008">figure 6A</figref> or <figref idrefs="f0009">6B</figref> in conjunction with <figref idrefs="f0012">Figure 7B</figref>, the output signal S<sub>EA1</sub> from indicates the relative position of the transducer 50:1A signal within one wave length λ1.</p><p id="p0211" num="0211">The signal interpreter further comprises a rotational direction detector module 270:1, RDM arranged to detect the rotational direction of the scale device. The rotational direction detector module 270:1 may be arranged to detect the current direction of rotation (clockwise, counterclockwise) in dependence on a detected phase relation between the A1 and B1 signal. According to an embodiment, when the second electric signal B1<sub>D</sub> is a quadrature signal of the first electric signal A1<sub>D</sub>, the rotational direction detector module 270:1 may be arranged to detect the sign (+ or -) of the phase deviation between signals A1<sub>D</sub> and B1<sub>D</sub>, so as to generate an output signal RD1 which may be indicative of the rotational direction of the shaft 20.</p><p id="p0212" num="0212">According to an embodiment, the rotational direction detector module 270:1 includes a phase deviation analyzer 272:1 having inputs for receiving the signals A1<sub>D</sub> and B1<sub>D</sub>. The phase deviation analyzer 272:1 may be adapted to establish a value PD<sub>EST1</sub> indicative of the current phase deviation between signals A1<sub>D</sub> and B1<sub>D</sub>. The analyzer may also have an input for receiving at least two values indicative of "Normal" phase deviation PD<sub>NORM</sub>. When the signals A1<sub>D</sub> and B1<sub>D</sub>, are quadrature<!-- EPO <DP n="48"> --> signals, the "Normal" phase deviation PD<sub>NORM</sub> values may be e.g. +90 degrees and - 90 degrees, respectively, each value corresponding to one of the two rotational directions of shaft 20.</p><p id="p0213" num="0213">The phase deviation analyzer 272:1 may be adapted to compare the established value PD<sub>EST1</sub> with the two values indicative of "Normal" phase deviation PD<sub>NORM</sub>. When the comparison indicates that the established value PD<sub>EST1</sub> substantially corresponds to one of the two values indicative of "Normal" phase deviation PD<sub>NORM</sub>, this in interpreted to indicate that the corresponding detector head 50:1 is positioned above the scale pattern 35.</p><p id="p0214" num="0214">When the comparison, performed by phase deviation analyzer 272:1, indicates that the established value PD<sub>EST1</sub> deviates from both of the two values indicative of a "Normal" phase deviation PD<sub>NORM</sub> the phase deviation analyzer 272:1 may be adapted to generate a Phase error Signal PDE1. This signal may be used for detecting a scale edge, as discussed in connection with <figref idrefs="f0016">Figure 8B</figref> below.</p><heading id="h0009"><u>Scale edge detection</u></heading><p id="p0215" num="0215">With reference to <figref idrefs="f0013">Figure 7C</figref>, the Phase error Signal PDE1, generated by the phase deviation analyzer 272:1, may be used an indication to the effect that the detector head 50:1 is positioned above the scale pattern 35. Hence, the position Z at which the Phase error Signal PDE1 occurs may indicate that the detector head 50:1 is passing a scale edge at that position. Hence the occurrence of the Phase error Signal PDE1 may indicate that detector head 50:1 is just entering a gap in the scale at that position Z. Hence, the Phase error Signal PDE1 switching from "No phase error" to "Phase error indication" may indicate that detector head 50:1 is just entering a gap in the scale at that position Z.</p><p id="p0216" num="0216">When that occurs, the encoder may be adapted to store that position value Z, i.e. the position value Z generated by 220, as a scale end edge position value ZSE:1 for detector head 50:1.</p><p id="p0217" num="0217">Similarly, when the Phase error Signal PDE1 switches from "Phase error indication" to "No phase error" this may indicate a position Z at which the detector head 50:1<!-- EPO <DP n="49"> --> has just passed scale start edge, i.e. the detector head 50:1 is just beginning to read the magnetic field pattern 240 caused by the scale pattern 35. Thus, when the Phase error Signal PDE1 switches from "Phase error indication" to "No phase error" this may indicate that detector head 50:1 has just left the gap 340 and entered the region of the scale pattern 35.</p><p id="p0218" num="0218">The signal interpreter 150:1 further comprises a counter module 280:1 which may be arranged to count the number of rising or falling edges appearing on the signal SEA:1 delivered by the arctan function generator 260:1. The resulting count value PN of counted rising or falling edges may be indicative of the number poles of the scale device the first detector group has passed, since the last reset of the counter module 280:1. Hence, the output signal PN delivered by counter module 280:1 may deliver the value PN, as discussed above in relation to <figref idrefs="f0012">Figure 7A</figref>.</p><p id="p0219" num="0219">The counter module 280:1 may further be arranged to receive information relating to rotational direction from the rotational direction module 270:1 so as to enable the counter module 280:1 to handle both rotational direction that is clockwise and counter clockwise, e.g. by increasing the counter value PN in response to clockwise rotation of the shaft 20 and decreasing the counter value PN in response to counterclockwise rotation of the shaft 20 (See <figref idrefs="f0013">Fig 7C</figref> in conjunction with <figref idrefs="f0012">Figures 7A</figref> and <figref idrefs="f0001">Figure 1</figref>).</p><p id="p0220" num="0220">The signal interpreter 150:1 further comprises a memory portion 285, which may be referred to as a wavelength storage module λM. The wavelength storage module may be arranged to store a parameter D corresponding to the physical wavelength of a magnetic pole element. With reference to the discussion in connection with <figref idrefs="f0008">Figures 6A</figref>, <figref idrefs="f0009">6B</figref> and <figref idrefs="f0005">3C</figref>, the wavelength storage module λM may adapted to deliver information D indicative of the relation between the first predetermined division Δ<sub>1</sub> and the first predetermined wavelength λ<sub>1</sub>. According to an embodiment, the information D may have the dimension mm/(degree of electrical angle EA).</p><p id="p0221" num="0221">The wavelength storage module λM may be connected to a Fractional distance value module 290, which may be arranged to process the value S<sub>EA</sub> delivered by the<!-- EPO <DP n="50"> --> arctan function generator module 260:1 and the parameter D provided by the wavelength storage module.</p><p id="p0222" num="0222">The Fractional distance value module 290 may be arranged to multiply the parameter D with the latest received value SEA:1, delivered by the arctan function generator 260:1, so that a fractional lambda value λ<sub>F1</sub> is generated, wherein said fractional lambda value λ<sub>F1</sub> may represent the current physical distance within one wavelength. Hence, for example, if MR transducers are used we may refer to <figref idrefs="f0008">Figure 6A</figref>: If the first predetermined division Δ<sub>1</sub> is 5 mm, and the current value S<sub>EA1</sub>=Π or 180 degrees, then the value D will be 5 mm/λ1, and the fractional lambda value λ<sub>F1</sub> delivered by the Fractional distance value module 290 may represent 2,5 mm, i.e. half of the physical distance Δ<sub>1</sub>.</p><p id="p0223" num="0223">The signal interpreter 150:1 may further comprise a position estimation module 300 arranged to produce a first estimate Z<sub>EST1</sub> of the current position of the scale device 30 in relation to the detector device 50 (See <figref idrefs="f0001">Figure 1</figref> in conjunction with <figref idrefs="f0012">Figure 7A</figref> and <figref idrefs="f0013">Figure 7C</figref>). The position estimation module 300 may be arranged to generate the first estimate Z<sub>EST1</sub> of the current position in dependence on the fractional lambda value λ<sub>F1</sub> from Fractional distance value module 290 and the count value PN received from the counter module 280:1.</p><p id="p0224" num="0224">With reference to <figref idrefs="f0007">figure 5A</figref> and <figref idrefs="f0013">Figure 7C</figref>, the second signal interpreter 150:2 may operate in the same manner as described for the first signal interpreter 150:1. Hence, the second signal interpreter 150:2 may comprise a position estimation module 300:2 arranged to produce a second estimate Z<sub>EST2</sub> of the current position of the scale device 30 in relation to the detector device 50 in dependence on the A2<sub>D</sub> and B2<sub>D</sub> signals (See <figref idrefs="f0007">Figure 5A</figref> in conjunction with <figref idrefs="f0001">Figures 1</figref>, <figref idrefs="f0012">7A</figref> and <figref idrefs="f0013">Figure 7C</figref>). Hence, the second signal interpreter 150:2 may also comprise a rotational direction detector module 270:2 which may be arranged to detect the current direction of rotation (clockwise, counterclockwise) in dependence on a detected phase relation between the A2 and B2 signal. According to an embodiment, when the electric signal B2<sub>D</sub> is a quadrature signal of the electric signal A2<sub>D</sub>, the rotational direction detector module 270:2 may be arranged to detect the sign (+ or -) of the phase<!-- EPO <DP n="51"> --> deviation between signals A2<sub>D</sub> and B2<sub>D</sub>, so as to generate an output signal RD2 which may be indicative of the rotational direction of the shaft 20.</p><p id="p0225" num="0225">Moreover, the second signal interpreter 150:2 may also comprise a phase deviation analyzer 272:2 corresponding to the phase deviation analyzer 272:1 as described above.</p><p id="p0226" num="0226"><figref idrefs="f0014"><b>Figure 7D</b></figref> is an illustration showing processing of signals, generated resulting from the one of the detector groups passing over a moving scale device such as exemplified with reference to <figref idrefs="f0012">figure 7A</figref>.</p><p id="p0227" num="0227">As shown in the upper portion of <figref idrefs="f0014">figure 7D</figref> a waveform acrtanf1 is generated by means of processing the electric signals A1 and B1 generated by the first detector group, as exemplified with reference to <figref idrefs="f0012">figure 7B</figref>. The processing may be performed by the processing device 100, as illustrated with reference to <figref idrefs="f0002">figure 2</figref> and/or <figref idrefs="f0006">Figures 4</figref> and <figref idrefs="f0007">5A</figref>.</p><p id="p0228" num="0228">According to an embodiment the first A1 and second B1 electric signals generated by the first detector group 50:1 are processed by means of using an arctan according to equation 1 below. <maths id="math0004" num="1."><math display="block"><msup><mi>tan</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mfenced><mfrac><mrow><mi>A</mi><mo>⁢</mo><mn>1</mn></mrow><mrow><mi>B</mi><mo>⁢</mo><mn>1</mn></mrow></mfrac></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="89" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0229" num="0229">By processing the arctan function as described above an electrical angle value EA, S<sub>EA</sub> can be derived. Hence, a current value of the variable S<sub>EA</sub> is indicative of the position within each pole. The electrical angle value S<sub>EA</sub> starts from 0 and progresses to 2π for each pole or λ, as discussed above.</p><p id="p0230" num="0230">As shown in the lower portion of <figref idrefs="f0014">figure 7D</figref> a modified waveform αA is provided by means of processing the waveform arctanf1. The waveform αA is indicative of the mechanical angle e.g. estimated position Z<sub>EST1</sub>, EP of the measurement object such as the incremental rotation of the shaft 20 illustrated with reference to <figref idrefs="f0012">figure 7A</figref>. The progression of pole number PN is indicated to the right in the lower portion of <figref idrefs="f0014">figure 7D</figref> and the estimated position is indicated to the left in the lower portion of <figref idrefs="f0014">figure 7D</figref>.<!-- EPO <DP n="52"> --> The waveforms or third and fourth electric signals A2, B2 may be processed in a similar fashion to the first and second electric signals as explained above in order to derive an electrical angle and a mechanical angle.</p><p id="p0231" num="0231"><figref idrefs="f0015"><b>Figure 7E</b></figref> is a block diagram illustrating another machine 10, as compared to the machine illustrated in <figref idrefs="f0001">Figure 1</figref>. Certain machines 10, having a shaft 20, may have a shaft portion 310 which is positioned such that it is difficult or even impossible to place anything around that shaft portion 310 from an end of the shaft 20. In other words, the design of the machine 10 may be such that threading a unitary circular scale device 30 (See <figref idrefs="f0012">figure 7A</figref> in conjunction with <figref idrefs="f0015">Figure 7E</figref> and <figref idrefs="f0001">Figure 1</figref>) into a desired position may be prevented by a machine part. With reference to <figref idrefs="f0015">Figure 7E</figref>, the length of the shaft 20 may stretch from the one machine part 40 to another machine part 320, wherein the first and second one machine parts 40, 320 are shaped and dimensioned so that threading e.g. a band, shaped as a single-piece closed circle, over the first or second machine parts 40, 320 is impossible. Hence, when it is desired to measure and detect the position and/or rotational movement of the shaft 20, it may not be possible to attach a single-piece circular magnetic scale at the shaft portion 310. Additionally, the amount of space, in the direction of the axis of rotation 330 of the shaft 20, may be limited. Hence the physical reality of the machine may require the width of the scale device 30 to be small.</p><p id="p0232" num="0232">The machine 10 may be embodied by a wind power station 10, as illustrated in <figref idrefs="f0001">Figures 1</figref> and <figref idrefs="f0015">7E</figref>. Hence, the shaft 20, of the wind power station 10, may be attached to one or more turbine/rotor blades 80 adapted to cause rotation of the shaft 20 in response to air movement caused by wind so as to generate electric power by means of a generator 70 coupled to the shaft 20. In connection with maintenance work on some machines, such as wind power station 10, it may be necessary to obtain not only information about relative position, but information about an absolute position of the shaft 20. For instance, it may be necessary to stop the wind power station from operation by introducing a lock bolt, or similar into a corresponding bolt receptor in the shaft so as to lock the shaft in a certain position. In order to be able to introduce the lock bolt, it may be necessary to position the shaft so that the bolt receptor faces the position of the lock bolt.<!-- EPO <DP n="53"> --></p><p id="p0233" num="0233">Hence, there is a need to achieve an encoder 90 capable of delivering an absolute position, while also being capable of being mounted so that it requires a very limited amount of space. Moreover, it may be needed to make it possible to install the encoder 90, even when first and second one machine parts 40, 320 are shaped and dimensioned so that threading e.g. a band, shaped as a single-piece closed circle, over the first or second machine parts 40, 320 is impossible.</p><p id="p0234" num="0234">According to an embodiment, the scale device 30 may be dividable so as to allow it to be placed at shaft positions such as shaft portion 310. According to an embodiment, the scale device 30 may then also be provided with a gap portion 340.</p><p id="p0235" num="0235">According to an embodiment, the scale device 30 may be made of a flexible band, such as e.g. a bendable steel band, provided with an openable locking means so as to allow the flexible band to be opened such that it may be placed at a desired measuring path position on the shaft 20. When positioned at the desired measuring path position on the shaft 20, the locking means of the flexible scale band 30 may be closed and locked so as to attach it to the desired measuring path position on the shaft 20. The locking means may then be used as the gap portion 340 of the scale device 30.</p><p id="p0236" num="0236">According to another embodiment, the scale device 30 may include a dividable scale ring. The inner diameter of the dividable ring may substantially correspond to the outer diameter of a shaft 20 to which the dividable scale ring 30 is intended to be attached. The dividable scale ring 30 may then have at least two openings so as to allow the ring to be divided in at least two parts. Hence, an opening of the dividable scale ring 30 may be provided with an openable locking means so as to allow the dividable scale ring 30 to be opened such that it may be placed at a desired measuring path position on the shaft 20. When positioned at the desired measuring path position on the shaft 20, the locking means of the dividable scale ring 30 may be closed and locked so as to attach it to the desired measuring path position on the shaft 20. The locking means may then be used as the gap portion 340 of the scale device 30.<!-- EPO <DP n="54"> --></p><p id="p0237" num="0237"><figref idrefs="f0016"><b>Figure 8A</b></figref> illustrates a magnetic scale device 30 when attached around the perimeter of a shaft 20. As illustrated by <figref idrefs="f0016">Figure 8A</figref>, the magnetic scale device 30 comprises at least one gap 340 in the magnetic scale pattern 35, when the magnetic scale device 30 is attached around the perimeter of a shaft 20. Hence, whereas the magnetic scale pattern 35 displays a plurality of successive equidistant magnetic pole elements 120, the scale gap portion 340 of the scale device 30 may lack magnetic pole elements. Alternatively, the scale gap portion 340 of the scale device 30 may be arranged so as to exhibit a second predetermined wavelength λ<sub>2</sub> differing from the first predetermined wavelength λ<sub>1</sub>. This may be achieved by providing pole elements with a second predetermined division Δ<sub>2</sub> differing from the first predetermined division Δ<sub>1</sub>.</p><p id="p0238" num="0238">The magnetic scale device 30, as illustrated in <figref idrefs="f0016">Figure 8A</figref>, may include a single magnetic scale pattern 35 forming a single magnetic track along the measuring path Z circumfering the shaft 20.</p><heading id="h0010"><u>Detector switch resulting from gap passage</u></heading><p id="p0239" num="0239"><figref idrefs="f0016"><b>Figure 8B</b></figref> is an illustration showing a gap passage with associated switching of output signals from detector groups.</p><p id="p0240" num="0240">As shown in <figref idrefs="f0016">figure 8B</figref> the first and second detector groups 50:1, 50:2 pass a gap 340 formed between two portions 30:1, 30:2 of a scale device as a result of a measurement object to which the scale device is attached travels in a direction Z. The detector groups are arranged at a distance d from the scale device. The detector groups are adjacently arranged at a distance δ from each other. The distance δ is arranged to be larger than the gap distance a i.e. distance covered by the gap, such that one of the detector groups always is positioned outside the gap 340. The scale device is a magnetic scale device such as a magnetic encoding tape having a number of equidistant magnetic poles in the form of alternating north and south poles. Each pair of successive north and south poles together form a wavelength λ.</p><p id="p0241" num="0241">According to an embodiment both the first detector group 50:1 and the second detector group 50:2 are arranged to continuously generate at least one output signal<!-- EPO <DP n="55"> --> in the form of signal pairs signal pair A1B1 and signal pair A2B2 respectively to a signal processing device, such as the signal processing exemplified with reference to <figref idrefs="f0002">figure 2</figref> and/or 5. In response to receiving the at least one output signal from the two detector groups the signal processing device is arranged to determine which of the signal pairs A1B1 and A2B2 to use as basis for generating an estimated position signal to be presented to an output, such as the output signal generation device exemplified with reference to <figref idrefs="f0007">figure 5</figref>. In order to determine which of the detector groups to use as basis for estimating a position signal, information relating to direction of movement of the scale device relative the detector groups, as determined by the phase difference between the signals within at least one of first and second signal pairs A1B1, A2B2 is used. In more detail the sequence in which the detector groups pass the gap is used to determine which of the detector groups to use as basis for estimating a position signal, wherein the sequence in which the detector groups pass the gap is determined by the direction of movement of the scale device. As a default the detector group determined to be second in sequence to pass the gap is used as basis for generating a position estimation signal. When the detector group first in sequence to pass the gap has passed the entire distance of the gap a switch is made from using the detector group second in sequence to pass the gap i.e. from the detector group not having passed the gap to using detector group first in sequence to pass the gap i.e. the detector group having passed the entire distance of the gap. When the detector group second in sequence to pass the gap has passed the entire distance of the gap a switch from the detector group first in sequence to pass the gap to the detector group second in sequence to pass the gap is performed.</p><p id="p0242" num="0242">As an example with further reference to <figref idrefs="f0016">figure 8B</figref> the first and second detector groups is connected to a stationary part of the measurement object (not shown) so that the detector groups remains stationary. The scale device in the form of at least two sections 35:1, 35:2 of the scale device is attached to a moving part of the measurement object, such as circumferentially attached to a shaft as exemplified in <figref idrefs="f0001">figures 1</figref>, <figref idrefs="f0012">7A</figref> or <figref idrefs="f0016">8A</figref>, so that the scale device moves together with the moving part of the measurement object. This means that the scale device moves relative to the detector groups whereby the detector groups is configured to determine a position of the moving part of the measurement object based on sensing the movement of the<!-- EPO <DP n="56"> --> scale device. In this example the scale device in the form of two sections 35:1, 35:2 moves in a direction Z. In order to sense the movement of the scale device, each of the detector groups comprise at least two magnetic sensors, such as at least two MR sensors, operable to sense changes in magnetic field generated by the moving scale device in the form of a magnetic scale device, comprising a plurality of equidistant magnetic north and south poles. Said magnetic north and south poles are arranged in an alternating pattern along the extension of the scale device.</p><p id="p0243" num="0243">Since the gap of the scale device comprises no scale marking elements, e.g. magnetic north and south poles, a detector group positioned above the gap will not be able to generate an output signal suitable for use as basis for generating a position estimation signal. However, since at least one of the first and second detector groups always is positioned above the scale device outside the gap, at least one of the first and second detector groups will always produce a signal suitable to use as basis for generating a position estimation signal.</p><p id="p0244" num="0244">In this example in case none of the detector groups have passed the gap the first detector group will pass over the gap before the second detector group will pass over the gap. In more detail since the scale device in this example move in a direction Z relative to the stationary detector groups the first detector group will be first in sequence to pass over the gap and the second detector group will be second in sequence to pass over the gap.</p><p id="p0245" num="0245">This means that provided the movement of the scale device as indicated by the direction Z as illustrated in <figref idrefs="f0016">figure 8B</figref> the first detector group will lose the possibility of generating an output signal suitable for use as basis in order to provide a position estimation when passing over the gap.</p><p id="p0246" num="0246">In cases where the movement of the scale device is opposite to the direction Z the gap start position and gap end position will switch place as compared to the illustrated example with reference to <figref idrefs="f0016">figure 8B</figref>. In more detail the gap start position will be the gap end position as illustrated in <figref idrefs="f0016">figure 8B</figref> and the gap end position will be the gap start position as illustrated in <figref idrefs="f0016">figure 8B</figref>. This means that the second<!-- EPO <DP n="57"> --> detector group will be first in sequence to pass over the gap and that the first detector group will be the second in sequence to pass over the gap.</p><p id="p0247" num="0247">In order to determine which of the first and second detector groups that are first and second in sequence to pass over the gap the phase difference as explained above is used. In more detail the detected phase difference determine if the scale device move in the direction Z or in a direction opposite to Z.</p><p id="p0248" num="0248">According to an embodiment at least one gap end position signal generated in response to at least one of the detector groups reaching a gap end position GE. According to this embodiment the gap end position signal is used to determine when to switch between the two detector groups.</p><p id="p0249" num="0249">According to an embodiment at least one gap start position signal generated in response to at least one of the detector groups reaching a gap start position GS.</p><heading id="h0011"><u>Information relating to gap distance</u></heading><p id="p0250" num="0250">According to an embodiment both at least one gap start position signal and at least one gap end position signal is generated. According to this embodiment both the at least one gap start signal and the at least one gap end signal is used to determine when to switch between the two detector groups.</p><p id="p0251" num="0251">According to an embodiment information relating to gap position i.e. information defining where on the scale device the gap is positioned is used to determine when to switch between the two detector groups. The gap position information may be predetermined or determined during a first gap passage.</p><heading id="h0012"><u>Handling of stop/switch of direction when detector group positioned above the gap</u></heading><p id="p0252" num="0252"><figref idrefs="f0017"><b>Figure 8C</b></figref> is a block diagram illustrating another embodiment 90D of the system 90 for detecting movement and/or position of a rotatable shaft, such as the shaft 20 of <figref idrefs="f0001">Figure 1</figref>.<!-- EPO <DP n="58"> --></p><p id="p0253" num="0253"><figref idrefs="f0018"><b>Figure 8D</b></figref> is a block diagram illustrating another embodiment 90E of the system 90 for detecting movement and/or position of a rotatable shaft, such as the shaft 20 of <figref idrefs="f0001">Figure 1</figref>.</p><p id="p0254" num="0254"><figref idrefs="f0019"><b>Figure 9A</b></figref> is an illustration showing how gap detection is performed by the encoder system according to an embodiment of the present invention.</p><p id="p0255" num="0255">As shown in <figref idrefs="f0019">figure 9A</figref> two signals αA, αB in the form of processed output signals from the first and second detector groups are generated. The αA, αB corresponds to processed signals from the first and second detector groups 50:1 and 50:2, wherein αA is the signal resulting from processing the output of the first detector group 50:1 and αB is the signal resulting from processing the output of the second detector group 50:2.</p><p id="p0256" num="0256">ε denotes a threshold level for determining a deviation corresponding to a detected gap. In an embodiment ε is determined to be half the length of the gap, e.g. half the length a of the gap 340 as exemplified with reference to <figref idrefs="f0016 f0017 f0018">figure 8</figref>.</p><p id="p0257" num="0257"><figref idrefs="f0020"><b>Figure 9B</b></figref> is an illustration showing an implementation of synchronization associated to switching between the two detector groups.</p><p id="p0258" num="0258">As shown in <figref idrefs="f0020">figure 9B</figref> switching takes place two times for each gap passage.</p><p id="p0259" num="0259">P1A denotes a position wherein the first detector groups passes over a gap. P1B denotes a position wherein the first detector group has passed the gap.</p><p id="p0260" num="0260">P2A denotes a position wherein the second detector groups passes over a gap. P2B denotes a position wherein the second detector group has passed the gap.</p><p id="p0261" num="0261"><figref idrefs="f0021"><b>Figure 9C</b></figref> is an illustration showing an implementation of synchronization associated to switching between the two detector groups.<!-- EPO <DP n="59"> --></p><heading id="h0013"><u>Fixpoint</u></heading><p id="p0262" num="0262">It is sometimes desirable to generate a reference pulse, at least once per shaft revolution, so that it indicates an absolute position of the shaft 20 with a very small degree of inaccuracy. However, at least some portions of the length of a scale device 30 being attached on a shaft may "float" in relation to the shaft, e.g. as a result of temperature fluctuations. Hence, unfortunately, if the reference pulse is generated in direct dependence on a position of the scale device 30 that "floats", the position indicated by that reference pulse may also "float" in relation to the shaft, rendering a somewhat less accurate position indication.</p><p id="p0263" num="0263"><figref idrefs="f0022"><b>Figure 10A</b></figref> is an illustration showing an implementation of a generation of a reference pulse according to an embodiment of the present invention.</p><p id="p0264" num="0264">As shown in <figref idrefs="f0022">figure 10A</figref> at least one fastening element F1, such as a screw, is used to firmly attach the scale device 30 to the measurement object 20 at a position FP of the scale device 30.</p><p id="p0265" num="0265">According to an embodiment at least one fixpoint position FP may be implemented. The fixpoint is used as a fixed reference position to indicate a reference position on the scale device. The reference position may be used to generate one reference pulse per revolution of the measurement object. Accordingly, whenever a reference pulse may be generated indicating that the measurement object is known to be at a particular position relative the detector groups.</p><p id="p0266" num="0266">By means of implementing a fixpoint it is possible to generate a reference pulse/null pulse once per shaft revolution so that the shaft position indicated by the reference pulse truly indicates the actual position of the shaft, in spite of the fact that parts of the scale device/ring 30 will "float" in relation to the shaft in dependence on temperature variations.</p><p id="p0267" num="0267">The fixpoint may for example be a position and/portion of the scale device, where the scale device is firmly coupled to the measurement object. As an example the fixpoint may be a point FP and/or region FPR of the scale device located at and/or near a fastening element F1 securing the scale device to the measurement object.<!-- EPO <DP n="60"> --> In more detail the fixpoint may be positioned near and/or at a fastening element F1 such as a screw other suitable fastening element F1, arranged to fasten the scale device to the measurement object.</p><p id="p0268" num="0268">The fixpoint or fixpoint region is located at a predetermined distance FPOFFSET from a gap 340.</p><p id="p0269" num="0269"><figref idrefs="f0022"><b>Figure 10B</b></figref> is an illustration showing an implementation of a generation of a reference pulse, based on using the fixpoint, such as exemplified with reference to <figref idrefs="f0022">figure 10A</figref>, according an embodiment of the present invention.</p><heading id="h0014"><u>Fixpoint method</u></heading><p id="p0270" num="0270"><figref idrefs="f0023"><b>Figure 14A</b></figref> is an illustration showing a flow chart of a method for generating a reference pulse according to an embodiment of the present invention.</p><p id="p0271" num="0271">According to an embodiment a method for generating a reference pulse using a fixpoint, such as exemplified with reference to <figref idrefs="f0022">figure 10A</figref>, is provided. The reference pulse may for example be used one pulse, e.g. reference pulse, per revolution of the measurement object and may thus provide information indicative of the number of revolutions and the position of the measurement object. Accordingly, whenever a reference pulse is generated i.e. whenever the fixpoint is reached, the measurement object, such as a shaft, is known to be at a particular absolute position relative the detector groups.</p><p id="p0272" num="0272">According to an embodiment, there is provided an initiation method for setting fixpoint parameters.</p><p id="p0273" num="0273">Once the initiation method has been performed, the encoder, so initiated, will advantageously be able to perform a method for repeatedly generating a reference pulse so that the shaft position indicated by the reference pulse truly indicates the actual position of the shaft, in spite of the fact that parts of the scale device/ring 30 will "float" in relation to the shaft in dependence on temperature variations.<!-- EPO <DP n="61"> --></p><p id="p0274" num="0274">As the shaft rotates, the encoder will generate at least one scale gap indicator signal in dependence of the detection of a gap in the scale, as described elsewhere in this document. According to one embodiment the analyzer is adapted to generate said scale gap indicator signal in response to the difference value (e) reaching a predetermined value, said predetermined value being substantially half of said gap width value. The difference value (e), according to this embodiment is generated by a deviation between the estimates Zest2 and Zest1.</p><p id="p0275" num="0275">However, the fixpoint procedure may rely on a scale gap indicator signal generated in other manners, as described elsewhere in this document.</p><p id="p0276" num="0276">The initiation method may include the following steps:
<ul><li>S200: Decide to use a selected one of the scale gap indicator signals that the encoder may be capable of generating.</li><li>S210: measure or set into a memory location, an offset value FPOFFSET (see <figref idrefs="f0022">Figure 10A</figref>), the offset value being indicative of a distance, in terms of first predetermined wavelengths λ<sub>1</sub>, from the position of the scale device where the selected scale gap indicator signal is generated. According to an embodiment the selected scale gap indicator signal may be generated in response to a midpoint of the gap 340, as illustrated in <figref idrefs="f0022">Figure 10A</figref>.</li><li>S220: identify an amplitude value FP in the signal S<sub>EA1</sub> as generated by the arctan function generator module 260:1 (see <figref idrefs="f0022">Fig 10B</figref> in conjunction with <figref idrefs="f0013">Figure 7C</figref>), at a position Z which is located at the distance of offset value FPOFFSET from the position where the scale gap indicator signal is generated.</li><li>S230: The amplitude value of the signal S<sub>EA1</sub> at that position FP is stored as a reference amplitude value A<sub>FP</sub>. Since this amplitude value A<sub>FP</sub> is generated at a position near the fastening element F1, we can trust that the pole elements 120 (See <figref idrefs="f0003">Fig 3a</figref>, B, C) near the fastening element F1 will be firmly attached to the shaft 20. Hence, that position FP of the scale device will always truly correspond to the position FP of the shaft. Moreover, the precise amplitude value A<sub>FP</sub> is generated only once per first predetermined wavelength λ<sub>1</sub> of the signal S<sub>EA1</sub>. Hence, once a precise amplitude value A<sub>FP</sub> has been stored, that amplitude value A<sub>FP</sub> may be used to trigger a reference pulse.</li></ul><!-- EPO <DP n="62"> --></p><p id="p0277" num="0277">Once the above initiation method has been performed, the following method may be used for generating a reference pulse.
<ul><li>S310: as the shaft rotates, the scale device rotates and the selected scale gap indicator signal will occur once per revolution.</li><li>S320: A distance meter is started in response to the reception of the selected scale gap indicator signal.</li></ul></p><p id="p0278" num="0278">Although this selected scale gap indicator signal will keep occurring once per revolution, thereby being quite sufficiently accurate for indicating e.g. the average speed of rotation of the shaft 20, the portion of the scale device 30 generating the scale gap indicator signal may not be firmly attached to the shaft. However, the position of the scale gap indicator signal is sufficiently accurate as a starting point so at to find an area FP<sub>A</sub> within half a first predetermined wavelength λ<sub>1</sub>from the position FP.
<ul><li>S330: As the shaft rotates, the distance meter provides a measure of the distance since the latest occurrence of the selected scale gap indicator signal.</li><li>S340: When the distance meter indicates the distance of about FPOFFSET from the latest occurrence of the selected scale gap indicator signal, the encoder may be adapted to compare the current value of the signal S<sub>EA1</sub> generated by the arctan function generator module 260:1 (see <figref idrefs="f0022">Fig 10B</figref> in conjunction with <figref idrefs="f0013">Figure 7C</figref>) with the stored reference amplitude value A<sub>FP</sub>.</li><li>S350: When the current value of the signal S<sub>EA1</sub> equals the stored reference amplitude value A<sub>FP</sub>, the encoder is adapted to generate a fix point reference signal. The output signal generator of the encoder may be adapted to generate an encoder output reference signal in direct response to the fix point reference signal.</li></ul></p><p id="p0279" num="0279">Hence, the fix point reference signal may be generated in response to the detection of a previously stored reference amplitude value A<sub>FP</sub>. Since that particular amplitude value is unique within the distance of one first predetermined wavelength λ<sub>1</sub> as illustrated by <figref idrefs="f0022">Figure 10B</figref>, and since the physical portion FP of the scale device 30 is firmly attached to the shaft by a fastener F1 (See <figref idrefs="f0022">Fig 10A</figref>), the shaft position at which the fix point reference signal is generated will have an advantageously small degree of inaccuracy.<!-- EPO <DP n="63"> --></p><p id="p0280" num="0280">In a first method step S100 a distance FPOFFSET from a gap to a fixpoint position FP or the distance FPOFFSET from a gap to a position within a fixpoint region FPR is stored.</p><p id="p0281" num="0281">After the method step S100 a subsequent method step S110 is performed.</p><p id="p0282" num="0282">In the method step S110 a gap in the scale device is detected.</p><p id="p0283" num="0283">After the method step S110 a subsequent method step S120 is performed.</p><p id="p0284" num="0284">In the method step S120 it is determined when the position of the fixpoint or the position within the fixpoint regions is reached. In more detail the distance FPOFFSET indicative of the distance between the gap and the fixpoint position or position within the fixpoint region is used to determine when the position of the fixpoint or the position within the fixpoint region is reached.</p><p id="p0285" num="0285">After the method step S120 a subsequent method step S130 is performed.</p><p id="p0286" num="0286">In the method step S130 an electrical angle at the fixpoint position or an electrical angle at the position within the fixpoint region is stored. In more detail when the position of the fixpoint or when the position within the fixpoint region is reached by at least one of the detector groups 50:1, 50:2 one of the signal pairs A1B1 and A2B2 is processed by means of using the arctan function to determine the electrical angle at the fixpoint position or at the position within the fixpoint region. The electrical angle is subsequently stored in a memory device associated to the encoder system, such as a flash memory device.</p><p id="p0287" num="0287">After the method step S130 a subsequent method step S140 is performed.</p><p id="p0288" num="0288">In the method step S140 a reference pulse is generated at the position of the fixpoint or at the position within the fixpoint region.</p><p id="p0289" num="0289">After the method step S140 a subsequent method step S150 is performed.<!-- EPO <DP n="64"> --></p><p id="p0290" num="0290">In the method step S150 a gap is detected. In more detail it is detected when the gap is reached at least a second time as a result of the revolutions of the measurement object.</p><p id="p0291" num="0291">After the method step S150 a subsequent method step S160 is performed.</p><p id="p0292" num="0292">In the method step S160 it is detected when a tolerance window of the fixpoint position or when a tolerance window of the position within the fixpoint region is reached. In more detail it is detected when a predetermined tolerance window of the fixpoint position or when a predetermined tolerance window of the position within the fixpoint region is reached. The predetermined tolerance window may for example correspond to -λ/2- A/2 as exemplified with reference to <figref idrefs="f0022">figure 10A</figref>.</p><p id="p0293" num="0293">After the method step S160 a subsequent method step S170 is performed.</p><p id="p0294" num="0294">In the method step S170 it is determined when the stored electrical angle is reached. In other words when the electrical angle within the tolerance window corresponds to the stored electrical angle. In more detail when the tolerance window is reached it is determined when the stored electrical angle is reached by means of processing the arctan function of at least one of the signal pairs A1B1, A2B2, generated by the detector groups 50:1, 50:2.</p><p id="p0295" num="0295">After the method step S170 a subsequent method step S180 is performed.</p><p id="p0296" num="0296">In the method step S180 a reference pulse is generated. In more detail a reference pulse is generated in response to that the stored electrical angle is reached within the tolerance window.</p><p id="p0297" num="0297">After the method step S180 the method may end or repeat from step S150 to enable generating subsequent reference pulses in response to revolutions of the measurement object.</p></description><claims mxw-id="PCLM56982202" lang="EN" load-source="patent-office"><!-- EPO <DP n="65"> --><claim id="c-en-0001" num="0001"><claim-text>An encoder (90) for detection of rotational movement of a rotatable shaft (20) in relation to a part (40) of a machine (10), the encoder comprising:
<claim-text>a scale device (30) for attachment to a circumference of said shaft; said scale device (30) having a width (W) and a length (Z, L); wherein said scale device (30) includes a first magnetic scale pattern (35, 140) comprising a plurality of magnetic pole elements (120) provided with a first predetermined division (Δ<sub>1</sub>) in the direction of said length (Z, L) so as to generate a first magnetic field pattern (240) at a first distance from a surface of said scale device (30);</claim-text>
<claim-text>a signal generator (45, 50) for mounting on said machine part (40); said signal generator (45, 50) comprising a housing; said signal generator (45, 50) further comprising:
<claim-text>a first output terminal () suitable for providing an encoder output signal () indicative of a relative change in position between said signal generator (45, 50) and said scale device (30);</claim-text>
<claim-text>a second output terminal () suitable for providing an reference signal indicative of a rotational position of said shaft;</claim-text>
<claim-text>a first magneto-electric transducer head (50:1) having a first magneto-electric transducer (50:1A) adapted to generate a first electric signal (A1) in response to detection of said magnetic field pattern (240) so that said first electric signal (A1) varies periodically in dependence on said first magnetic field pattern (240) such that the variation exhibits a first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) which depends on said first predetermined division (Δ<sub>1</sub>) when the first magneto-electric transducer (50:1A) moves along said first magnetic scale pattern (35, 140);</claim-text>
<claim-text>a second magneto-electric transducer head (50:2) having a second magneto-electric transducer (50:2A) adapted to generate a second electric signal (A2) in response to detection of said first magnetic field pattern (240) so that said second electric signal (A2) varies periodically in dependence on said first magnetic field pattern (240) such that the variation exhibits said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) dependent on said first predetermined division (Δ<sub>1</sub>) when the second magneto-electric transducer (50:2A) moves along said first magnetic scale pattern (35, 140);<!-- EPO <DP n="66"> --></claim-text>
<claim-text>a first signal processing unit (125:1A, 100) comprising<br/>
first means (125:1A, 260:1, 150:1) adapted to generate a periodically varying first digital signal (A<sub>1D</sub>, S<sub>EA1</sub>) in dependence on said first electric signal (A1, B1) such that the variation of said first digital signal (A<sub>1D</sub>, S<sub>EA1</sub>) exhibits said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) when the first magneto-electric transducer (50:1A) moves along said first magnetic scale pattern (35, 140); and<br/>
second means (125:2A, 260:2, 150:2) adapted to generate a periodically varying second digital signal (A<sub>2D</sub>, S<sub>EA2</sub>) in dependence on said second electric signal (A2) such that the variation of said second digital signal (A<sub>2D</sub>, S<sub>EA2</sub>) exhibits said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) when the second magneto-electric transducer (50:1A) moves along said first magnetic scale pattern (35, 140); wherein</claim-text></claim-text>
<claim-text>said scale device (30) includes at least one gap (340) between ends of said first magnetic scale pattern (35, 140); and wherein</claim-text>
<claim-text>said signal generator (45, 50) further comprises:
<claim-text>an analyzer adapted to generate a scale gap indicator signal () in dependence on the detection of said gap; and</claim-text>
<claim-text>an output signal producer (220, 230) adapted to produce said encoder output signal () in dependence on<br/>
said first digital signal (A<sub>1D</sub>, S<sub>EA1</sub>),<br/>
said second digital signal (A<sub>2D</sub>, S<sub>EA2</sub>) and wherein said output signal producer (220, 230) is adapted to produce said reference signal in dependence on said scale gap indicator signal ().</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in dependence on<br/>
an analysis involving said first digital signal (A<sub>1D</sub>, S<sub>EA1</sub>), or<br/>
an analysis involving said second digital signal (A<sub>2D</sub>, S<sub>EA2</sub>) and/or<br/>
a comparative analysis involving said first digital signal (A<sub>1D</sub>, S<sub>EA1</sub>) and said second digital signal (A<sub>2D</sub>, S<sub>EA2</sub>).<!-- EPO <DP n="67"> --></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to detection of a deviation between<br/>
the magnetic field pattern (240, 340) as sensed by said first magneto-electric transducer head (50:1) and<br/>
the magnetic field pattern (240, 340) sensed by said second magneto-electric transducer head (50:2);<br/>
and/or in response to detection (272:1) of a change in<br/>
the magnetic field pattern (240, 340) as sensed by said first magneto-electric transducer head (50:1) or<br/>
the magnetic field pattern (240, 340) sensed by said second magneto-electric transducer head (50:2).</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to detection of a change in<br/>
the magnetic field pattern (240, 340) as sensed by said first magneto-electric transducer head (50:1) by means of a Phase error Signal (PDE1) switching from a state indicating No phase error to a state indicating the detection of a Phase error<br/>
and/or<br/>
the magnetic field pattern (240, 340) as sensed by said first magneto-electric transducer head (50:1) by means of a Phase error Signal (PDE1) switching from a state indicating a Phase error to a state indicating No phase error.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in dependence on a comparative analysis involving said first position value estimate (Z<sub>EST1</sub>) and said second position value estimate (Z<sub>EST2</sub>).</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate a First_off_Scale signal indicating that said first magneto-electric transducer head (50:1) is not in a position to detect the scale when said second position value estimate (Z<sub>EST2</sub>) indicates a certain<!-- EPO <DP n="68"> --> degree of movement whereas said first position value estimate (Z<sub>EST1</sub>) indicates less movement or substantially no movement and<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to said First_off_Scale signal.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The encoder according to claim 1, wherein<br/>
said analyzer is adapted to generate a value (e) indicative of difference in detected movement, said difference value (e) indicating a difference between said second position value estimate (Z<sub>EST2</sub>) and said first position value estimate (Z<sub>EST1</sub>).</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The encoder according to claim 7, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to said difference value (e) reaching a predetermined value.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The encoder according to claim 7, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to said difference value (e) reaching a predetermined value, said predetermined value corresponding to a certain ratio of said gap width value (a).</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The encoder according to claim 7, wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in response to said difference value (e) reaching a predetermined value, said predetermined value being substantially half of said gap width value (a, Fig 9A).</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The encoder according to claim 1, wherein said first magneto-electric transducer head (50:1) further comprises:
<claim-text>a first lagged magneto-electric transducer (50:1B) adapted to generate a first lagged electric signal (B1) in response to detection of said magnetic field pattern (240) so that said first lagged electric signal (B1) varies periodically in dependence on said magnetic field pattern (240) such that the variation exhibits said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) which depends on said first predetermined division (Δ<sub>1</sub>) when the first lagged magneto-electric transducer (50:1B) moves along said magnetic scale pattern (35, 140);<!-- EPO <DP n="69"> --></claim-text>
<claim-text>said first lagged magneto-electric transducer (50:1B) being positioned in relation to said first transducer (50:1A) such that, in operation, said first lagged electric signal (B1) varies at a first lag (PD) in relation to said first electric signal (A1) when said shaft rotates in a clockwise rotational direction (+Z), and such that said first lagged electric signal (B1) varies at a second lag (-PD) in relation to said first electric signal (A1) when said shaft rotates in a counterclockwise rotational direction (-Z), said second lag (-PD) being different from said first lag;</claim-text>
<claim-text>said first means (125:1A, 260:1, 150:1) is adapted to also generate a periodically varying first lagged digital signal (B1<sub>D</sub>) such that, in operation, said first lagged digital signal (B1) varies at a first lag (PD) in relation to said first digital signal (A1<sub>D</sub>) when said shaft rotates in a clockwise rotational direction (+Z), and such that said first lagged electric signal (B1<sub>D</sub>) varies at a second lag (-PD) in relation to said first electric signal (A1<sub>D</sub>) when said shaft rotates in a counterclockwise rotational direction (-Z), said second lag (-PD) being different from said first lag;<br/>
wherein<br/>
said analyzer is adapted to generate said scale gap indicator signal () in dependence on an amplitude analysis of<br/>
said periodically varying first digital signal (A<sub>1D</sub>) and<br/>
said periodically varying first lagged digital signal (B1<sub>D</sub>) using the fact that they are substantially quadrature signals when the first magneto-electric transducer (50:1A) moves along a first magnetic scale pattern (35, 140).</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The encoder according to claim 1, wherein said second magneto-electric transducer head (50:2) further comprises:
<claim-text>a second lagged magneto-electric transducer (50:2B) adapted to generate a second lagged electric signal (B2) in response to detection of said magnetic field pattern (240) so that said second lagged electric signal (B2) varies periodically in dependence on said magnetic field pattern (240) such that the variation exhibits said first wavelength (λ<sub>1</sub>, λ<sub>1MR</sub>, λ<sub>1H</sub>) which depends on said first predetermined division (Δ<sub>1</sub>) when the second lagged magneto-electric transducer (50:2B) moves along said magnetic scale pattern (35, 140);</claim-text>
<claim-text>said second lagged magneto-electric transducer (50:2B) being positioned in relation to said second transducer (50:2A) such that, in operation, said second<!-- EPO <DP n="70"> --> lagged electric signal (B2) varies at a first lag (PD) in relation to said second electric signal (A2) when said shaft rotates in a clockwise rotational direction (+Z), and such that said second lagged electric signal (B2) varies at a second lag (-PD) in relation to said second electric signal (A2) when said shaft rotates in a counterclockwise rotational direction (-Z);</claim-text>
<claim-text>said second means (125:2A, 260:2, 150:2) is adapted to also generate a periodically varying second lagged digital signal (B2<sub>D</sub>)<br/>
such that, in operation, said second lagged digital signal (B2<sub>D</sub>) varies at a first lag (PD) in relation to said second digital signal (A2<sub>D</sub>) when said shaft rotates in a clockwise rotational direction (+Z), and such that said second lagged digital signal (B2<sub>D</sub>) varies at a second lag (-PD) in relation to said second digital signal (A2<sub>D</sub>) when said shaft rotates in a counterclockwise rotational direction (-Z)</claim-text>
<claim-text>wherein</claim-text>
<claim-text>said analyzer is adapted to generate said scale gap indicator signal () in dependence on an amplitude analysis of<br/>
said periodically varying second digital signal (A<sub>2D</sub>) and<br/>
said periodically varying second lagged digital signal (B2<sub>D</sub>) using the fact that they are substantially quadrature signals when the first magneto-electric transducer (50:1A) moves along a first magnetic scale pattern (35, 140).</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The encoder according to claims 11 and 12, wherein<br/>
said analyzer is adapted to set a first amplitude reference value (C1) in dependence on the sum of<br/>
the square of said periodically varying first digital signal (A<sub>1D</sub>) and<br/>
the square of said periodically varying first lagged digital signal (B<sub>1D</sub>); and<br/>
said analyzer is adapted to set a second amplitude reference value (C2) in dependence on the sum of<br/>
the square of said periodically varying second digital signal (A<sub>2D</sub>) and said periodically varying second lagged digital signal (B<sub>2D</sub>)<br/>
and<br/>
<!-- EPO <DP n="71"> -->said analyzer is adapted to generate said scale gap indicator signal () in dependence on a relation between said first amplitude reference value (C1) and said second amplitude reference value (C2).</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The encoder according to any preceding claim, wherein<br/>
an encoder user interface is adapted to allow a user to select the use of a selectable scale gap indicator signal (S200);<br/>
the encoder allows for the setting of an offset parameter value (FPOFFSET), the offset value being indicative of a distance from the position of the scale device where the selected scale gap indicator signal is generated to a position of the scale device (30) which may be firmly attached to the shaft;<br/>
the encoder is adapted to identify (S220) a reference amplitude value (FP) in the signal (S<sub>EA1</sub>) generated by an arctan function generator module (260:1); said reference amplitude value (FP) occurring at a position (Z) which is located at a distance substantially corresponding to said offset parameter value (FPOFFSET) from the position where the selected scale gap indicator signal is generated;<br/>
the encoder is adapted to store (S230) said reference amplitude value (FP) as a reference amplitude value (A<sub>FP</sub>).</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A method for generating a reference signal by means of an encoder as defined in any of the preceding claims, in which a selected scale gap indicator signal occurs once per revolution, comprising:
<claim-text>starting a distance meter in response to reception of the selected scale gap indicator signal;</claim-text>
<claim-text>if the distance meter indicates an offset distance (FPOFFSET) from the occurrence of the selected scale gap indicator signal, comparing a current value of a periodically varying digital signal (A<sub>1D</sub>, S<sub>EA1</sub>) with a stored reference amplitude value (A<sub>FP</sub>);</claim-text>
<claim-text>in response to the current value (A<sub>1D</sub>, S<sub>EA1</sub>) equaling the stored reference amplitude value (A<sub>FP</sub>), generating, by the encoder, a fix point reference signal; and</claim-text>
<claim-text>in response to the fix point reference signal generating the encoder output reference signal.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670590" load-source="patent-office"><!-- EPO <DP n="72"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="151" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="73"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="151" he="83" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="74"> --><figure id="f0003" num="3A"><img id="if0003" file="imgf0003.tif" wi="97" he="156" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="75"> --><figure id="f0004" num="3B"><img id="if0004" file="imgf0004.tif" wi="131" he="187" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="76"> --><figure id="f0005" num="3C"><img id="if0005" file="imgf0005.tif" wi="130" he="177" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="77"> --><figure id="f0006" num="4"><img id="if0006" file="imgf0006.tif" wi="160" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="78"> --><figure id="f0007" num="5A"><img id="if0007" file="imgf0007.tif" wi="131" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="79"> --><figure id="f0008" num="6A"><img id="if0008" file="imgf0008.tif" wi="160" he="164" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="80"> --><figure id="f0009" num="6B"><img id="if0009" file="imgf0009.tif" wi="153" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="81"> --><figure id="f0010" num="6C"><img id="if0010" file="imgf0010.tif" wi="153" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="82"> --><figure id="f0011" num="6D"><img id="if0011" file="imgf0011.tif" wi="153" he="174" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="83"> --><figure id="f0012" num="7A,7B"><img id="if0012" file="imgf0012.tif" wi="157" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="84"> --><figure id="f0013" num="7C"><img id="if0013" file="imgf0013.tif" wi="161" he="157" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="85"> --><figure id="f0014" num="7D"><img id="if0014" file="imgf0014.tif" wi="150" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="86"> --><figure id="f0015" num="7E"><img id="if0015" file="imgf0015.tif" wi="148" he="224" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="87"> --><figure id="f0016" num="8A,8B"><img id="if0016" file="imgf0016.tif" wi="165" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="88"> --><figure id="f0017" num="8C"><img id="if0017" file="imgf0017.tif" wi="165" he="162" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="89"> --><figure id="f0018" num="8D"><img id="if0018" file="imgf0018.tif" wi="165" he="162" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="90"> --><figure id="f0019" num="9A"><img id="if0019" file="imgf0019.tif" wi="153" he="137" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="91"> --><figure id="f0020" num="9B"><img id="if0020" file="imgf0020.tif" wi="150" he="164" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="92"> --><figure id="f0021" num="9C"><img id="if0021" file="imgf0021.tif" wi="163" he="164" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="93"> --><figure id="f0022" num="10A,10B"><img id="if0022" file="imgf0022.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="94"> --><figure id="f0023" num="14A"><img id="if0023" file="imgf0023.tif" wi="151" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="161" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
