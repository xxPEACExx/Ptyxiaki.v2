<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2683199-A1" country="EP" doc-number="2683199" kind="A1" date="20140108" family-id="48468302" file-reference-id="315087" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146585498" ucid="EP-2683199-A1"><document-id><country>EP</country><doc-number>2683199</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12175093-A" is-representative="YES"><document-id mxw-id="PAPP154847690" load-source="docdb" format="epo"><country>EP</country><doc-number>12175093</doc-number><kind>A</kind><date>20120705</date><lang>EN</lang></document-id><document-id mxw-id="PAPP175868182" load-source="docdb" format="original"><country>EP</country><doc-number>12175093.9</doc-number><date>20120705</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140551234" ucid="EP-12175093-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12175093</doc-number><kind>A</kind><date>20120705</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2007295936" load-source="docdb">H04L  12/733       20130101ALI20140129BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2007295937" load-source="docdb">H04L  12/751       20130101AFI20140129BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1973213319" load-source="docdb" scheme="CPC">H04W  40/12        20130101 LA20160211BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1973213613" load-source="docdb" scheme="CPC">H04W  40/24        20130101 LI20160211BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1973213928" load-source="docdb" scheme="CPC">H04L  45/123       20130101 LI20160211BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1973218203" load-source="docdb" scheme="CPC">H04L  45/02        20130101 LI20160211BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048000681" load-source="docdb" scheme="CPC">H04L  45/26        20130101 LI20150604BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048006018" load-source="docdb" scheme="CPC">H04L  41/0853      20130101 FI20150604BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132361127" lang="DE" load-source="patent-office">Bestimmung der Kommunikationswege in einem drahtlosen Kommunikationsnetzwerk</invention-title><invention-title mxw-id="PT132361128" lang="EN" load-source="patent-office">Determination of communication routes in a wireless communcation network</invention-title><invention-title mxw-id="PT132361129" lang="FR" load-source="patent-office">Détermination de voies de communication dans un réseau de communication sans fil</invention-title><citations><patent-citations><patcit mxw-id="PCIT242944343" load-source="docdb" ucid="US-20030033394-A1"><document-id format="epo"><country>US</country><doc-number>20030033394</doc-number><kind>A1</kind><date>20030213</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944344" load-source="docdb" ucid="US-20060168317-A1"><document-id format="epo"><country>US</country><doc-number>20060168317</doc-number><kind>A1</kind><date>20060727</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944345" load-source="docdb" ucid="US-20060209785-A1"><document-id format="epo"><country>US</country><doc-number>20060209785</doc-number><kind>A1</kind><date>20060921</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944346" load-source="docdb" ucid="US-20080253290-A1"><document-id format="epo"><country>US</country><doc-number>20080253290</doc-number><kind>A1</kind><date>20081016</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944349" load-source="docdb" ucid="US-20110164527-A1"><document-id format="epo"><country>US</country><doc-number>20110164527</doc-number><kind>A1</kind><date>20110707</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944348" load-source="docdb" ucid="US-20110164565-A1"><document-id format="epo"><country>US</country><doc-number>20110164565</doc-number><kind>A1</kind><date>20110707</date></document-id><sources><source name="APP" created-by-npl="N"/><source name="SEA" category="AD" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242944350" load-source="docdb" ucid="US-20110267982-A1"><document-id format="epo"><country>US</country><doc-number>20110267982</doc-number><kind>A1</kind><date>20111103</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919511244" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ABB RESEARCH LTD</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR919504717" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ABB RESEARCH LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR919013322" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ABB Research Ltd.</last-name><iid>100070070</iid><address><street>Affolternstrasse 44</street><city>8050 Zürich</city><country>CH</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919530891" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GIDLUND MIKAEL</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919541686" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GIDLUND, MIKAEL</last-name></addressbook></inventor><inventor mxw-id="PPAR919017736" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>GIDLUND, MIKAEL</last-name><address><street>Vallmovägen 3</street><city>857 40 Sundsvall</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919532954" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>AAKERBERG JOHAN</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919524333" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>AAKERBERG, JOHAN</last-name></addressbook></inventor><inventor mxw-id="PPAR919014897" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>ÅKERBERG, Johan</last-name><address><street>Hedensberg 46</street><city>725 95 Västerås</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919522887" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>ZHIBO PANG</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919524664" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>Zhibo, Pang</last-name></addressbook></inventor><inventor mxw-id="PPAR919019161" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Zhibo, Pang</last-name><address><street>Tönsbergsgatan 6</street><city>164 39 Kista</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919528955" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>YU KAN</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR919522721" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>YU, Kan</last-name></addressbook></inventor><inventor mxw-id="PPAR919015025" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>YU, Kan</last-name><address><street>Pettersbergsgatan 49B</street><city>724 63 Västerås</city><country>SE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919016441" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Savela, Reino Aleksi</last-name><iid>101210699</iid><address><street>ABB AB Intellectual Property Ingenjör Bååths Gata 11</street><city>721 83 Västerås</city><country>SE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549749637" load-source="docdb">AL</country><country mxw-id="DS549910395" load-source="docdb">AT</country><country mxw-id="DS549749639" load-source="docdb">BE</country><country mxw-id="DS549820840" load-source="docdb">BG</country><country mxw-id="DS549824050" load-source="docdb">CH</country><country mxw-id="DS549751411" load-source="docdb">CY</country><country mxw-id="DS549910396" load-source="docdb">CZ</country><country mxw-id="DS549749640" load-source="docdb">DE</country><country mxw-id="DS549751412" load-source="docdb">DK</country><country mxw-id="DS549751425" load-source="docdb">EE</country><country mxw-id="DS549827643" load-source="docdb">ES</country><country mxw-id="DS549820841" load-source="docdb">FI</country><country mxw-id="DS549820846" load-source="docdb">FR</country><country mxw-id="DS549749645" load-source="docdb">GB</country><country mxw-id="DS549751426" load-source="docdb">GR</country><country mxw-id="DS549749646" load-source="docdb">HR</country><country mxw-id="DS549910397" load-source="docdb">HU</country><country mxw-id="DS549824051" load-source="docdb">IE</country><country mxw-id="DS549749647" load-source="docdb">IS</country><country mxw-id="DS549820847" load-source="docdb">IT</country><country mxw-id="DS549751427" load-source="docdb">LI</country><country mxw-id="DS549748286" load-source="docdb">LT</country><country mxw-id="DS549910398" load-source="docdb">LU</country><country mxw-id="DS549748287" load-source="docdb">LV</country><country mxw-id="DS549748288" load-source="docdb">MC</country><country mxw-id="DS549826238" load-source="docdb">MK</country><country mxw-id="DS549826239" load-source="docdb">MT</country><country mxw-id="DS549910399" load-source="docdb">NL</country><country mxw-id="DS549749648" load-source="docdb">NO</country><country mxw-id="DS549751428" load-source="docdb">PL</country><country mxw-id="DS549748298" load-source="docdb">PT</country><country mxw-id="DS549910400" load-source="docdb">RO</country><country mxw-id="DS549748299" load-source="docdb">RS</country><country mxw-id="DS549751449" load-source="docdb">SE</country><country mxw-id="DS549748300" load-source="docdb">SI</country><country mxw-id="DS549749657" load-source="docdb">SK</country><country mxw-id="DS549751450" load-source="docdb">SM</country><country mxw-id="DS549826240" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673670" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A network manager device (20) in an industrial wireless network (WN) sends a network investigating message to other network nodes (24, 26, 28, 30, 32, 34) for processing and forwarding through the network, the message comprising a message weight. A wireless communication device providing a node (30) in the network receives the message from another network node (24), determines a communication weight based on the quality of communication, adds the communication weight to the message weight and compares the sum with the node weight. If the sum is lower than the node weight, it is set as new node weight and as new message weight, whereupon the changed message is sent to other nodes in the network. The network manager device maps the topology of the network based on updated node weights, sets a communication scheduling scheme based on the mapped topology and informs the network nodes of the scheme.
<img id="iaf01" file="imgaf001.tif" wi="78" he="89" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737829" lang="EN" source="EPO" load-source="docdb"><p>A network manager device (20) in an industrial wireless network (WN) sends a network investigating message to other network nodes (24, 26, 28, 30, 32, 34) for processing and forwarding through the network, the message comprising a message weight. A wireless communication device providing a node (30) in the network receives the message from another network node (24), determines a communication weight based on the quality of communication, adds the communication weight to the message weight and compares the sum with the node weight. If the sum is lower than the node weight, it is set as new node weight and as new message weight, whereupon the changed message is sent to other nodes in the network. The network manager device maps the topology of the network based on updated node weights, sets a communication scheduling scheme based on the mapped topology and informs the network nodes of the scheme.</p></abstract><description mxw-id="PDES63959658" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>FIELD OF INVENTION</u></heading><p id="p0001" num="0001">The present invention generally relates to wireless communication devices in industrial wireless networks. More particularly the present invention relates to a method for allowing a network manager device to determine communication paths in an industrial wireless network, a wireless communication device for an industrial wireless network, a computer program product for a wireless communication device, a method for investigating communication paths in an industrial wireless network, a network manager device for an industrial wireless network and a computer program product for a network manager device of an industrial wireless network.</p><heading id="h0002"><u>BACKGROUND</u></heading><p id="p0002" num="0002">Wireless sensor networks are known to be used in process control systems. Examples on such networks are ZigBee and WirelessHart, ISA100, WIA-PA and Bluetooth. There also exist some WLAN based sensor networks.</p><p id="p0003" num="0003">These networks often employ a time division communication scheme, such as Time Division Multiple Access (TDMA), where a wireless communication device in the form of field device may access resources in the form of time intervals of the scheme for communication with the process control system.<!-- EPO <DP n="2"> --></p><p id="p0004" num="0004">Some wireless networks use a fixed allocation of the time interval to field devices. This requires a network manager or radio resource manager that manages the resources.</p><p id="p0005" num="0005">Weights have also been used for various purposes in data networks.</p><p id="p0006" num="0006"><patcit id="pcit0001" dnum="US20080253290A"><text>US 2008/0253290</text></patcit> does for instance describe optimization of traffic distribution in a communication network with multipath routing. Distribution weightings are provided for a node of the communication network which has several alternatives or downward links for the routing to a target. The distribution weightings are modified relative to each other as a measure of the traffic loading on the downward links in order to reduce distributed traffic on highly loaded links and to increase distributed traffic on the less loaded links.</p><p id="p0007" num="0007"><patcit id="pcit0002" dnum="US20060209785A"><text>US 2006/0209785</text></patcit> describes a method of routing data packets across a multi-layer network which includes a plurality of nodes, a logical level provided with a plurality of logical links and a physical level provided with a plurality of physical links, each of the logical links corresponding to at least one of the physical links. The method comprising assigning a weight to each logical link with respect to a first critical constraint in the logical level, refining the weight assigned to each logical link with respect to a second critical constraint in the physical level and, based on the weights assigned to each link, computing a path at the logical level connecting a start node to an end node for the transport of the data packets.<!-- EPO <DP n="3"> --></p><p id="p0008" num="0008"><patcit id="pcit0003" dnum="US20060168317A"><text>US 2006/0168317</text></patcit> describes the routing of data packets comprising a target address in a packet switching data network. A first and second transmission path are assigned respective traffic distribution weightings in a routing table for individual target addresses that is assigned to a network node, wherein weightings indicate the respective allocated traffic load per transmission path. The maximum traffic distribution weighting is assigned to the respective first transmission path and the minimum traffic distribution weighting is assigned to the second transmission path. During undisturbed operation, data packets are routed via the first transmission path and if the path is interrupted, the packets are routed via the second transmission path.</p><p id="p0009" num="0009"><patcit id="pcit0004" dnum="US20110164565A"><text>US 2011/0164565</text></patcit> describes a method of routing a wireless network. The method is performed by each of a group of nodes and includes: receiving a routing request signal; determining whether a node itself is a destination node, by referring to a traffic distribution table showing traffic throughput of the group of nodes and an intermediate-node weight table showing weights of intermediate nodes on all paths between the group of nodes and a source node, wherein a route path is selected by referring to the weights of intermediate nodes; and when it is determined that the node itself is the destination node transmitting a routing response signal to the source node that has transmitted the routing request signal, and receiving a packet from the source node, wherein the transmitting and receiving are performed by the determined destination node.<!-- EPO <DP n="4"> --></p><p id="p0010" num="0010">Reliable and robust wireless communication between field devices in industrial networks is of highest importance in order to guarantee 24 hour operation 7 days a week. Routing algorithms are important for Industrial Wireless Sensor Networks in order to guarantee packet delivery within the deadline required by industrial applications. In TDMA-based Industrial Wireless Sensor Network, source routing and graph routing are two available routing schemes which exist today.</p><p id="p0011" num="0011">High reliability and low latency is crucial for industrial applications. Both source and graph routing cannot thoroughly fulfill these requirements. A source routing scheme routes packets by establishing a fixed path from the source to the destination. If any node or link through this path fails, the communication will be terminated. Graph routing schemes are more reliable than source routing by providing additional paths from the source to the destination. However, when the network topology changes, it will take a long time to generate a new graph. During the graph adjusting period, the communication in this network may also be terminated. All of this may lead to economic loss or a safety problem, which is unacceptable for industrial applications.</p><p id="p0012" num="0012">There is therefore a need for an improvement in relation to industrial wireless networks.</p><heading id="h0003"><u>SUMMARY OF THE INVENTION</u></heading><!-- EPO <DP n="5"> --><p id="p0013" num="0013">The present invention is directed towards providing an improved industrial wireless communication network.</p><p id="p0014" num="0014">One object of the present invention is to provide an improved method for allowing a network manager device to determine communication paths in an industrial wireless network.</p><p id="p0015" num="0015">This object is according to a first aspect of the present invention achieved through a method for allowing a network manager device to determine communication paths in an industrial wireless network, the method being performed by a wireless communication device being a node in the industrial wireless communication network, the wireless communication device having node configuration data comprising a node weight and the method comprising the steps of:
<ul><li>receiving, a network investigating message from another network node, the network investigating message comprising a message weight,</li><li>inspecting the network investigating message and performing further processing of the network investigating message based on the results of the inspection<br/>
where the inspecting comprises
<ul><li>determining a communication weight based on the quality of communication with the other node,</li><li>forming an intermediate weight through combining the communication weight with the message weight, and</li><li>comparing the intermediate weight with the node weight,<!-- EPO <DP n="6"> --> where the further processing is performed if the message weight is lower than the intermediate weight and comprises</li><li>setting the intermediate weight as new node weight,</li><li>setting the intermediate weight as new message weight, and</li><li>sending the changed network investigating message having the new message weight to other nodes in the network.</li></ul></li></ul></p><p id="p0016" num="0016">Another object of the present invention is to provide an improved wireless communication device in an industrial wireless network.</p><p id="p0017" num="0017">This object is according to a second aspect of the present invention achieved through a wireless communication device for an industrial wireless network, the wireless communication device providing a node in the industrial wireless network and comprising:
<ul><li>a wireless transmitter,</li><li>a wireless receiver,</li><li>a node configuration memory comprising node configuration data including a node weight, and</li><li>a node configuration control unit configured to:
<ul><li>receive a network investigating message from another network node, the network investigating message comprising a message weight,</li><li>inspect the network investigating message and perform further processing of the network investigating message based on the results of the inspecting,<!-- EPO <DP n="7"> --> where the inspecting comprises</li><li>determining a communication weight based on the quality of communication with the other node,</li><li>forming an intermediate weight through combining the communication weight with the message weight, and</li><li>comparing the intermediate weight with the node weight,<br/>
where the further processing is performed if the intermediate weight is lower than the node weight and comprises</li><li>setting the intermediate weight as new node weight,</li><li>setting the intermediate weight as new message weight, and</li><li>sending the changed network investigating message having the new message weight to other nodes in the network.</li></ul></li></ul></p><p id="p0018" num="0018">Another object of the present invention is to provide a computer program product for a wireless communication device, which computer program product provides an improved wireless communication device.</p><p id="p0019" num="0019">This object is according to a third aspect achieved by a computer program product for a wireless communication device, the wireless communication device providing a node in an industrial wireless network and being provided with a node weight, the computer program product comprising a data carrier with computer program code which when run on a processor forming a node configuration control unit of<!-- EPO <DP n="8"> --> the wireless communication device, causes the node configuration control unit to:
<ul><li>receive a network investigating message from another network node, the network investigating message comprising a message weight,</li><li>inspect the network investigating message and perform further processing of the network investigating message based on the results of the inspecting,<br/>
where the inspecting comprises
<ul><li>determining a communication weight based on the quality of communication with the other node,</li><li>forming an intermediate weight through combining the communication weight with the message weight, and</li><li>comparing the intermediate weight with the node weight,<br/>
where the further processing is performed if the intermediate weight is lower than the node weight and comprises</li><li>setting the intermediate weight as new node weight,</li><li>setting the intermediate weight as new message weight, and</li><li>sending the changed network investigating message having the new message weight to other nodes in the network.</li></ul></li></ul></p><p id="p0020" num="0020">Another object of the present invention is to provide an improved method for determining communication paths in an industrial wireless network.<!-- EPO <DP n="9"> --></p><p id="p0021" num="0021">This object is according to a fourth aspect achieved by a method for investigating communication paths in an industrial wireless network, the method being performed by a network manager device of the industrial wireless network and comprising the steps of:
<ul><li>sending a network investigating message to at least one other network node for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight,</li><li>receiving node configuration messages from the other nodes of the industrial wireless network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight of a corresponding node having been updated based on a message weight,</li><li>mapping the topology of the wireless communication network based on the node configuration data in the received node configuration messages,</li><li>setting a communication scheduling scheme based on the mapped topology, and</li><li>informing the network nodes of the communication scheduling scheme.</li></ul></p><p id="p0022" num="0022">Yet another object of the present invention is to provide an improved network manager device.</p><p id="p0023" num="0023">This object is according to a fifth aspect achieved through a network manager device for an industrial<!-- EPO <DP n="10"> --> wireless network, the wireless network managing device comprising:
<ul><li>a network topology determining unit configured to</li><li>send a network investigating message to at least one other network node for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight,</li><li>receive node configuration messages from the other nodes of the network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight of a corresponding node having been updated based on a message weight,</li><li>map the topology of the network based on the node configuration data in the received node configuration messages,</li><li>set a communication scheduling scheme based on the mapped topology, and</li><li>inform the network nodes of the communication scheduling scheme.</li></ul></p><p id="p0024" num="0024">Yet another object is to provide a computer program product for a network manager device, which computer program product provides an improved network manager device.</p><p id="p0025" num="0025">This object is according to a sixth aspect achieved through a computer program product for a network manager device of an industrial wireless network,<!-- EPO <DP n="11"> --> the computer program product comprising a data carrier with computer program code which when run on a processor forming a network topology determining unit of the network manager device, causes the network manager device to:
<ul><li>send a network investigating message to at least one other network node for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight,</li><li>receive node configuration messages from the other nodes of the network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight of a corresponding node having been updated based on a message weight,</li><li>map the topology of the network based on the node configuration data in the received node configuration messages,</li><li>set a communication scheduling scheme based on the mapped topology, and</li><li>inform the network nodes of the communication scheduling scheme.</li></ul></p><p id="p0026" num="0026">The present invention has a number of advantages.</p><p id="p0027" num="0027">It improves the reliability by packet delivery diversity. A routing table is not required for all nodes. Possible changes of the network topology will not terminate the communications. With the invention it will become easier to configure and download parameters to wireless field devices. This will reduce maintenance<!-- EPO <DP n="12"> --> time. Furthermore, the invention will improve the transmission reliability which reduces the risk of communication failures. Because of the invention it is also possible to run safety applications on industrial wireless sensor networks. The invention is furthermore generic and therefore applicable on all types of Industrial Wireless Sensor Networks.</p><heading id="h0004"><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></heading><p id="p0028" num="0028">The present invention will in the following be described with reference being made to the accompanying drawings, where
<ul><li><figref idrefs="f0001">fig. 1</figref> schematically shows a control system for controlling a process using an industrial wireless network,</li><li><figref idrefs="f0002">fig. 2</figref> schematically shows a block schematic of a network manager device controlling communication with field devices in the industrial wireless network,</li><li><figref idrefs="f0002">fig. 3</figref> shows a block schematic of a wireless communication device in the industrial wireless network,</li><li><figref idrefs="f0003">fig. 4</figref> shows the content of a node configuration memory of the wireless communication device,</li><li><figref idrefs="f0003">fig. 5</figref> schematically shows a network investigating message,</li><li><figref idrefs="f0003">fig. 6</figref> schematically shows a node configuration message handled by the wireless communication device,</li><li><figref idrefs="f0003">fig. 7</figref> schematically shows a data message sent by a node in the industrial wireless network,<!-- EPO <DP n="13"> --></li><li><figref idrefs="f0004">fig. 8</figref> shows a flow chart of a number of method steps in a method for investigating communication paths being performed by the network manager device,</li><li><figref idrefs="f0005">fig. 9</figref> shows a flow chart of number of method steps in a method for allowing the network manager device to determine communication paths, the method being performed by the wireless communication device,</li><li><figref idrefs="f0004">fig. 10</figref> shows a flow chart of a number of method steps for informing the network manager device about the communication paths and sending a data message,</li><li><figref idrefs="f0006">fig. 11</figref> shows a flow chart of a number of method steps showing how a node in the industrial wireless network handles a received data message, and</li><li><figref idrefs="f0006">fig. 12</figref> schematically shows a data carrier carrying program code for implementing a node configuration control unit of a wireless communication device or a network topology determining unit of a network manager device.</li></ul></p><heading id="h0005"><u>DETAILED DESCRIPTION OF THE INVENTION</u></heading><p id="p0029" num="0029">In the following, a detailed description of preferred embodiments of the invention will be given.</p><p id="p0030" num="0030"><figref idrefs="f0001">Fig. 1</figref> schematically shows a control system 10 for a process, i.e. a process control system. The process may be an industrial process and may furthermore be any of a number of different types of processes such as a pulp and paper production process, an oil refining process, an electric power transmission process or an electric power distribution process. The control system 10 may for instance be an object based computerised system for controlling the process.<!-- EPO <DP n="14"> --></p><p id="p0031" num="0031">In <figref idrefs="f0001">fig. 1</figref> the process control system 10 includes a number of operator terminals 12 and 14 connected to a first bus B1. There is furthermore a second bus B2 and between the first and second busses there are connected a server 16 providing control and monitoring of the process and a database 18 where data, like historical data relating to control and monitoring of the process is stored. To the second bus B2 there is furthermore connected a gateway 20, which gateway is in turn connected to a wireless network WN. The wireless network WN may be an industrial network and may also be a wireless communication network. It may more particularly be a wireless sensor and actuator network (WSAN) and may thus be an industrial wireless sensor and actuator network. The industrial wireless network may also use a time division communication scheme. In this wireless network WN there are shown seven exemplifying nodes. There is a first node 24, a second node 26, a third node 28, a fourth node 30, a fifth node 32 and a sixth node 34. These nodes are provided in the form of wireless communication devices or wireless field devices. These field devices as well as the gateway are nodes in the industrial wireless network WN. The gateway 20 may therefore be considered to be a seventh node.</p><p id="p0032" num="0032">The field devices are devices that are interfaces to the process and they communicate wirelessly with the gateway 20. In the exemplifying network the first, second and third nodes 24, 26, 28 are furthermore shown as communicating with the gateway 20, while the fourth and fifth nodes 30 and 32 are communicating with the<!-- EPO <DP n="15"> --> first, second and third nodes 24, 26 and 28. The sixth node 34 in turn communicates with the fourth and fifth nodes 30 and 32. Although the fourth, fifth and sixth nodes 30, 32 and 34 do not communicate directly with the gateway 20, they are still able to communicate with it using hop or multi-hop technique. When for instance the sixth node 34 is sending data, this data is relayed to the gateway 20 via the fifth or sixth node together with via the first, second or third node 24, 26 and 28. In a similar manner the first, second and third node 24, 26, 28 may act as relay nodes for data sent by the fourth and fifth nodes 30 and 32.</p><p id="p0033" num="0033">The field devices implementing the first, second, third, fourth, fifth and sixth nodes 24, 26, 28, 30, 32 and 34 may typically be responsible for performing some type of control activity of the process, such as measuring a process parameter like a physical property of the process or providing a control activity in the process, such as actuating a valve, operating a pump, a switch etc. The actual control of the field devices is performed by the server 16.</p><p id="p0034" num="0034"><figref idrefs="f0002">Fig. 2</figref> shows a block schematic of the gateway 20, which is also acting as a network manager device. It will in the following only be referred to as a network manager device. The network manager device 20 comprises a data handling unit 38, which is connected to a wireless interface 40, typically comprising radio circuitry and one or more antennas, as well as to a communication interface 36 for communication using the second bus B2. The communication interface 36 may as an example be an Ethernet interface. The network manager device 20 also<!-- EPO <DP n="16"> --> comprises a network topology determining unit 42 that is connected to the wireless interface 40 as well as to the data handling unit 38.</p><p id="p0035" num="0035"><figref idrefs="f0002">Fig. 3</figref> shows a block schematic of units in a wireless communication device 43 that makes up a node in the industrial wireless network. In the present example this wireless communication device 43 is the field device that implements the fourth node 30. It should be realized that all field devices may comprise the units shown in <figref idrefs="f0002">fig. 3</figref>. The wireless communication device 43 here comprises a node configuration control unit 50, which is connected to a transmitter circuit 48 or wireless transmitter. The transmitter circuit 48 is in turn connected to an antenna 44, which is also connected to a receiver circuit 46 or wireless receiver. The receiver and transmitter circuits 46 and 48 may be combined in one circuit, a transceiver circuit. The node configuration control unit 50 is also connected to a node configuration memory 52. In the wireless communication device 43 there is also a data handling unit 53 connected to the receiver and transmitter circuits 46 and 48, to the node configuration control unit 50 and to the node configuration memory 52.</p><p id="p0036" num="0036"><figref idrefs="f0003">Fig. 4</figref> schematically shows the content of the node configuration memory 52. This memory comprises node configuration data. In this example the node configuration data comprises a node identifier, NID, which is an identifier identifying the wireless communication device or fourth node, which identifier<!-- EPO <DP n="17"> --> is recognised by the network manager device 20. There is also a node weight NW, a node hop number NHN as well as data PN<sub>1</sub> and PN<sub>2</sub> identifying parent nodes. Data identifying a parent node may be an identifier of such a parent node. A parent node is here a node that the node 30 provided by the wireless communication device 43 employs for communicating with the network manager device 20. The parent node may thus be a relay node, and more particularly a first relay node in a number of relay nodes in a communication path from the wireless communication device 43 to the network manager device 20. The data from the wireless communication device 43 passes via this first relay node on its way from the wireless communication device to the network manager device 20.</p><p id="p0037" num="0037"><figref idrefs="f0003">Fig. 5</figref> schematically outlines a network investigating message NIM. The network investigating message NIM comprises a sending identifier SID, which is an identifier of the node that is sending the message. It also comprises a message weight MW as well as a message hop number MHN.</p><p id="p0038" num="0038"><figref idrefs="f0003">Fig. 6</figref> schematically outlines a node configuration message NCM. The node configuration message NCM comprises node configuration data comprising an originating node identifier OID, which is an identifier of the node where the message originates, i.e. the node in which the message is originally formed or created. It also comprises an originating node weight ONW, which is the weight of this originating node, an originating node hop number ONHN, which is the hop number of this<!-- EPO <DP n="18"> --> originating node. It also comprises parent node data PN<sub>1</sub> and PN<sub>2</sub> of this originating node.</p><p id="p0039" num="0039"><figref idrefs="f0003">Fig. 7</figref> schematically outlines a data message DM. The data message DM also comprises an originating node identifier OID, i.e. an identifier of the node where the message originates. It also comprises an originating node weight ONW and an originating node hop number ONHN. Finally it also comprises data DATA that is being sent from the originating node to the network manager device.</p><p id="p0040" num="0040">The data communication with which the present invention is concerned is mainly communication in the uplink, i.e. from the field devices to the manager network device. However, it should be realized that the invention may also be of interest in the downlink.</p><p id="p0041" num="0041">The functioning of a first variation of the present invention will now be described with reference also being made to <figref idrefs="f0004">fig. 8</figref>, which shows a flow chart of a number of method steps being performed in the network manager device and to <figref idrefs="f0005">fig. 9</figref>, which shows a first number of method steps being performed in the wireless communication device.</p><p id="p0042" num="0042">When a new node attempts to join the wireless communication network, the network topology determining unit 42 of the network manager device 20 assigns an initial node weight to it as well as an initial hop number. The node weight is a measure of the quality of communication links between the node and the network manager device, while the hop number is a counter<!-- EPO <DP n="19"> --> indicating how many hops away from the network manager device 20 the node is. These assignments are being sent via the wireless interface 40. The initial weight is typically a weight having a high number, such as 99 and the hop number is typically also initially a high number such as 99. As an example the wireless communication device 43 that implements the fourth node 30 is considered to be such a node being initiated. These initial settings are then received by the receiver 46 and forwarded to the node configuration control unit 50, which stores them in the node configuration memory 52. In this memory 52 there may already be stored a node identifier NID. Initially there are no parent node identifiers.</p><p id="p0043" num="0043">In order to find out the real configuration of the network, i.e. which nodes communicate with which and how well they communicate with each other, the network topology determining unit 42 sends a network investigating message NIM, step 54. The message is sent via the wireless interface 40 and comprises a sending identifier SID, which is thus initially the identifier of the network manager device 20, a message weight MW and a message hop number MHN. The message weight MW is initially set to the lowest node weight in the network, which may be zero, and the message hop number MHN is also initially set to the lowest hop number in the network, which may likewise be zero. However, both these values as well as the sending identifier SID are being changed in the course of the network investigating message NIM passing through the network WN. The network investigating message NIM is sent to at least one other network node for being processed and<!-- EPO <DP n="20"> --> forwarded through the industrial wireless network. The network investigating message NIM may more particularly be broadcast in the network so that all nodes that are able to communicate directly with the network manager device 20 receive it. The message NIM may more particularly be sent regularly, such as once a minute, once every ten minutes once an hour etc. As an alternative it is possible that the message NIM is sent as soon as the network manager device loses contact with another node.</p><p id="p0044" num="0044">As is mentioned above, as the message traverses the network it gets changed. A node that forwards it in the network more particularly sets its own network identifier to be the sending identifier SID. It may also change the message weight and message hop number. How this is done will be described below.</p><p id="p0045" num="0045">When about to receive a network investigation message for the first time the field devices are thus all using their initial node hop numbers NHN and initial node weights NW.</p><p id="p0046" num="0046">In the example given above the network investigation message NIM is for instance first received by the first node 24, which changes it and then passes the message on to the wireless communication device 43 that implements the fourth node 30. This means that the first node 24 has changed the content of the network investigating message NIM from the original content provided by the network manager device 20. More particularly the network investigating message NIM has received a new sending identifier SID, being the<!-- EPO <DP n="21"> --> identifier of the first node 24, a new message weight MW and a new message hop number MHN, which is typically the hop number of one.</p><p id="p0047" num="0047">The network investigating message NIM is then received in the wireless communication device 43 by the receiver 46 via the antenna 44 and forwarded to the node configuration control unit 50. The network investigating message NIM is thus received by the node configuration control unit 50, step 64.</p><p id="p0048" num="0048">The node configuration control unit 50 then fetches the node hop number NHN from the node configuration memory 52 and thereafter compares the node hop number NHN with the message hop number MHN, step 66. In case the message hop number MHN is lower than or equal to the node hop number NHN, step 68, then the node configuration control unit 50 stores the sending identifier SID as an identifier PN<sub>1</sub> of a parent node, step 71, and thereafter inspects the network investigating message NIM further. However, if the message hop number MHN is higher than the node hop number NHN, step 68, then the network investigating message NIM is dropped by the node configuration control unit, step 70.</p><p id="p0049" num="0049">The further inspection of the network investigating message NIM comprises the determining of a communication weight CW, step 72. The determination of the communication weight CW may involve the determining of communication quality between the sending node, i.e. the node from which the wireless communication device 43 receives the network investigating message NIM,<!-- EPO <DP n="22"> --> which in this example is the first node 24. The communication weight CW is thus determined based on the quality of communication with the other node from which the message NI is received and may for instance be determined based on received signal strength indicator (RSSI), bit error rate, packet error rate and link quality indicators LQI.</p><p id="p0050" num="0050">Thereafter the node configuration control unit 50 forms an intermediate weight IW, step 74, which intermediate weight IW is formed through combining the communication weight with the message weight. In this example the intermediate weight IW is thus formed through adding the communication weight CW to the message weight WM. The intermediate weight IW is in this example thus formed as the sum of the communication weight CW and the message weight MW. When this has been done the node configuration control unit 50 fetches the node weight NW from the node configuration memory 52 and thereafter compares the intermediate weight with the node weight WN, step 75.</p><p id="p0051" num="0051">If then the intermediate weight IW is lower than the node weight NW, step 76, further processing is performed, while if it is higher than or equal to the node weight NW, step 76, then the network investigating message NIM is dropped by the node configuration control unit 50, step 70.</p><p id="p0052" num="0052">The further processing does in this case involve an updating of the settings in the node configuration memory 52. It more particularly involves the node configuration control unit 50 setting the intermediate<!-- EPO <DP n="23"> --> weight IW as a new node weight NW, step 78, changing the node hop number NHN to the message hop number MHN, step 80. It is here also possible to provide a link between the new node weight and the identifier of the corresponding parent node.</p><p id="p0053" num="0053">The further processing also involves changing the content of the network investigating message NIM. The node configuration control unit 50 changes the message hop number MHN through increasing it. The message hop number is thus increased, and in this example incremented, step 84. The intermediate weight IW is also set as new message weight MW, step 86, and the sending identifier SID is set to be equal to the network identifier NID of the node, step 88. The sending identifier SID is thus set to be the same as the node identifier NID stored in the node configuration memory 52. Thereafter the node configuration control unit 50 forwards the network investigating message through the network, step 90. In this way a changed network investigating message having the new message weight is sent to the other nodes in the network. The network investigating message NIM being sent is thus an updated network investigating message where there is a new message weight, a new message hop number and a new sender identifier SID. The sending may be performed through making the transmitter 48 broadcast the network investigating message through the network.</p><p id="p0054" num="0054">All the nodes function in the above-described way. This means that the first, second and third nodes 24, 26 and<!-- EPO <DP n="24"> --> 28 forward network investigation messages through the communication network WN.</p><p id="p0055" num="0055">In this case it is also possible that the wireless communication device 43 also receives and processes a network investigating message from the second node 26 and thus stores the identifier of this node as a parent node PN<sub>2</sub>.</p><p id="p0056" num="0056">Furthermore, since all nodes operate in the above described manner, the first second and third nodes 24, 26 and 28 will all drop the network investigation messages they receive from the fourth node 30, since they will both have lower hop numbers and weights than the message hop number and message weight of this particular network investigating message. The fifth node 32 may most likely drop the message but the sixth node 34 will likely receive and process it.</p><p id="p0057" num="0057">When the broadcasting of the network manager device 20 is finished and the network investigating message has reached all nodes, they all need to respond with updated node weights, updated hop numbers and updated parent node identifiers.</p><p id="p0058" num="0058">Therefore, when the network investigating message NIM in this way has passed through the network WN and been processed, all the nodes thereafter respond with a node configuration message NCM. Thus for instance the node configuration control unit 50 of the wireless communication device 53 sends a node configuration message NCM with node configuration data destined for the network manager device 20, which message is also<!-- EPO <DP n="25"> --> sent via the transmitter unit 48 and antenna 44. The node configuration data may furthermore be node configuration data that has been updated through processing of the network configuration message and may more particularly comprise an updated node weight. The node configuration message may also have been sent as a response to the original network investigating message sent by the network manager device.</p><p id="p0059" num="0059">The node configuration message NCM then comprises the originating node identifier OID, which in the case of the wireless communication device 43 is the network identifier NID stored in the node configuration memory 52 of the fourth node 30. The node configuration message NCM also comprises the originating node weight ONW, the originating node hop number ONHN as well as the identifiers of parent nodes PN<sub>1</sub> and PN<sub>2</sub> obtained in the above described process. In short the node configuration message NCM comprises the current settings of node weight, node hop number and parent nodes that are present in the node configuration memory 52. It may also comprise a link between the node weight and the corresponding parent node.</p><p id="p0060" num="0060">The node configuration messages NCM from all the other network nodes 24, 26, 28, 30, 32, and 34 are then received by the network topology determining unit 42 of the network manager device 20 via the wireless communication interface 40, step 56. These messages may thus comprise node configuration data that has been updated through processing, in the other nodes, of the network investigating message and at least one may comprise a node weight of a corresponding node that has<!-- EPO <DP n="26"> --> been updated based on a message weight. The network topology determining unit 42 then maps the network topology based on the node configuration data of the received node configuration messages, step 58. This may involve determining various communication paths used by the nodes to communicate with the network manager device as well as which of those paths that are preferred. A preferred path may for instance be obtained through knowing the link between a node weight and a parent node. The mapping may more particularly involve the determining of a communication tree, i.e. a tree depicting how the nodes are connected to a root node, the network manager device 20.</p><p id="p0061" num="0061">After this has been done the network topology determining unit 42 sets a communication scheduling scheme, step 60, which involves determining where in the communication structure the nodes are to communicate, such as which time slots in the TDMA structure they are to use. After this has been done the network topology determining unit 42 informs the network nodes of the communication scheduling scheme using the wireless interface 40, step 62, which may involve informing them of which time slots they are to use for communications. It may also involve confirming the node hop numbers and node weights. It should here be realized that a confirmation may just as well be sent before informing of the scheduling scheme.</p><p id="p0062" num="0062">The network manager device 20 will thus use the information in the node configuration messages to generate a topology tree of the network, reschedule the network and thereafter send a command to all nodes with<!-- EPO <DP n="27"> --> a new scheduling scheme which allows all nodes to use their updated weight and hop numbers.</p><p id="p0063" num="0063">After the scheduling has been taking place it is then possible for the nodes to transmit data to the network manager device 20 in the assigned time slots. How this can be done forms a second variation of the invention, which will now be described with reference being made to <figref idrefs="f0004">fig. 10</figref>, which shows a flow chart of a number of method steps for informing a network managing device about the communication paths, and to <figref idrefs="f0006">fig. 11</figref>, which shows a flow chart of a number of method steps showing how a node in the industrial wireless network handles a received data message.</p><p id="p0064" num="0064">After having sent the node configuration message, step 92, and having received the scheduling scheme, step 94, a node, such as the sixth node 34 continuously investigates if there is data to transmit. This may be done through the data handling unit 53 of the wireless communication device investigating if there is sensor data to be transmitted. In case there is data to transmit, step 96, then a data message DM intended for the network manager device 20 is sent, step 98. The data message is then sent including an originating node identifier OID, an originating node weight ONW, which may be an updated node weight, an originating node hop number ONHN and data DATA to be reported to the network manager device 20. This data message DM is typically sent using broadcasting. In the example given here, the originating node identifier OID, originating node weight ONW, originating node hop number ONHN and data are all associated with the sixth node 34.<!-- EPO <DP n="28"> --></p><p id="p0065" num="0065">The data handling unit 53 of a node in the network such as the fourth node 30 then receives such a data message DM via the antenna 44 and receiver 46, step 100. It then investigates if it is the first time it receives this particular data message. If it is not, step 104, then the data message DM is dropped. However if it is the first time the data message is received, step 102, then the message is processed.</p><p id="p0066" num="0066">This processing involves comparing the originating node weight ONW with the node weight NW, step 106. This means that the data handling unit 53 compares the node weight NW of the own node being stored in the node configuration memory 52 with the originating node weight ONW in the received data message DM, which is the weight of the node that sends the data destined for the network manager device 20. This node is thus a message originating node, i.e. a node in which the data message DM originates. If the originating node weight ONW is higher then the own node weight NW, step 108, then the data message DM is forwarded, step 110, which forwarding may also here be performed through broadcasting. However, if the originating node weight ONW is lower then the own node weight NW, step 108, then data message DM is dropped, step 104.</p><p id="p0067" num="0067">It should here be noted that all nodes, including the network manager device, operate in the same way. However, the network manager has a weight of zero, which ensures that it will receive data messages from all nodes.<!-- EPO <DP n="29"> --></p><p id="p0068" num="0068">It can be seen that since the data message will be forwarded from larger weight node to smaller weight node, this message will finally arrive at the network manger device, which has the smallest weight, for instance zero.</p><p id="p0069" num="0069">As mentioned earlier the network manager device 20 may send the network investigating message regularly. Some time after having sent the previously mentioned network investigating message, the network manager device may thus send a new message. When this happens the field devices will all reset their node hop numbers and node weights to their initial node hop numbers and node weights, i.e. to the values initially assigned by the network manager device. This can be done through receiving a special re-set instruction from the network manager device. It can also be done through detecting the first presence of a network investigating message after a previous confirmation from the network manager device.</p><p id="p0070" num="0070">The invention has a number of advantages. It improves the reliability by packet delivery diversity. A routing table is not required for all nodes. Possible changes of the network topology will not terminate the communications. With the invention it will become easier to configure and download parameters to wireless field devices. This will reduce maintenance time. Furthermore, the invention will improve the transmission reliability which reduces the risk of communication failures. Because of the invention it is also possible to run safety applications on industrial wireless sensor networks. The invention is furthermore<!-- EPO <DP n="30"> --> generic and therefore applicable on all Industrial Wireless Sensor Networks.</p><p id="p0071" num="0071">There are a number of variations that can be made of the present invention. The network manager device is not necessarily a gateway. It is possible to provide as a separate device in the network. If it is a separate device, the network topology determining unit will be a part of the network manager device. However, the data handling unit will be placed in the gateway. As the node hop number is used in the data message, this can also be used for determining if a data message is to be forwarded or not. It should however be realized that the originating node hope number may be omitted from the data message. It should in fact be realized that the use of hop numbers may be omitted completely. It is possible to only use weights for determining if a network investigating message is to be forwarded through the network. It is in fact also possible that only node weights are reported. This also means that the determination and use of parent node identifiers may also be omitted. In the case where hop numbers are used it is furthermore possible that the parent node identifiers are set as a part of the further processing.</p><p id="p0072" num="0072">The node configuration control unit and optionally also the data handling unit of the wireless communication device may be realized in the form of a discrete component, such as an Application Specific Integrated Circuit (ASIC) or Field-Programmable Gate Array (FPGA) circuit, which may also comprise the other units and circuits of the first field device. However, the node<!-- EPO <DP n="31"> --> configuration control unit may also be realized through a processor with an associated program memory including computer program code for performing the functionality of the node configuration control unit when being run on the processor. This computer program product can be provided as a data carrier such as one or more CD ROM discs or one or more memory sticks carrying computer program code, which provides the above-described access control unit when being run by said processor. One such data carrier 112 in the form of a CD ROM disk with a computer program 114 carrying such computer program code is schematically shown in <figref idrefs="f0006">fig. 12</figref>. Also the network topology determining unit and optionally also the data handling unit of the network manager device may be realized in the above-described ways.</p><p id="p0073" num="0073">From the foregoing discussion it is evident that the present invention can be varied in a multitude of ways. It shall consequently be realized that the present invention is only to be limited by the following claims.</p></description><claims mxw-id="PCLM56982704" lang="EN" load-source="patent-office"><!-- EPO <DP n="32"> --><claim id="c-en-0001" num="0001"><claim-text>A method for allowing a network manager device (20) to determine communication paths in an industrial wireless network (WN), the method being performed by a wireless communication device (43) being a node (30) in the industrial wireless communication network, the wireless communication device having node configuration data comprising a node weight (NW) and the method comprising the steps of:
<claim-text>- receiving (64), a network investigating message (NIM) from another network node (24), the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- inspecting the network investigating message and performing further processing of the network investigating message based on the results of the inspection<br/>
where the inspecting comprises
<claim-text>- determining (72) a communication weight (CW) based on the quality of communication with the other node,</claim-text>
<claim-text>- forming (74) an intermediate weight (IW) through combining the communication weight (CW) with the message weight (MW), and</claim-text>
<claim-text>- comparing (75) the intermediate weight (IW) with the node weight (NW),</claim-text>
where the further processing is performed if (76) the message weight (MW) is lower than the intermediate weight (IW) and comprises
<claim-text>- setting (78) the intermediate weight as new node weight,<!-- EPO <DP n="33"> --></claim-text>
<claim-text>- setting (86) the intermediate weight as new message weight, and</claim-text>
<claim-text>- sending the changed network investigating message having the new message weight to other nodes (30) in the network.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, further comprising sending (92) a node configuration message (NCM) with node configuration data to the network manager device (20), the node configuration data comprising node configuration data that has been updated through the processing of the network investigating message including an updated node weight (ONW).</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 2, wherein the node configuration message comprises data sent as a response to an original network investigating message sent by the network manager device.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to any previous claim, further comprising sending (98) a data message (DM) intended for the network manager device (20), the data message comprising the updated node weight (ONW) and data (DATA) to be reported to the network manager device.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any previous claim, further comprising receiving (100) a data message (DM) from another network node (34), said data message comprising a node weight (ONW) of a message originating node, comparing (106) the received node weight (ONW) with the own node weight (NW) and forwarding (110) the<!-- EPO <DP n="34"> --> data message to other nodes in case (108) the received node weight is higher than the own node weight.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to any previous claim, wherein the node configuration data comprises a node hop number (NHN) and the network investigating message comprises a message hop number (MHN), the method further comprising comparing (66) the node hop number (NHN) with the message hop number (MHN), where the inspecting and further processing is only performed if (68) the message hop number (MHN) is lower than or equal to the node hop number (NHN) and in this case the further processing also comprises changing (80) the node hop number to the message hop number and increasing (84) the message hop number.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to any previous claim, wherein the network investigating message comprises an identifier (SIN) of the other node and the processing based on the investigation comprises storing (82) the identifier of the other node as a parent node (PN<sub>1</sub>) in the node configuration data.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A wireless communication device (43) for an industrial wireless network (WN), the wireless communication device providing a node (30) in the industrial wireless network and comprising:
<claim-text>- a wireless transmitter (48),</claim-text>
<claim-text>- a wireless receiver (46),</claim-text>
<claim-text>- a node configuration memory (52) comprising node configuration data including a node weight (NW), and</claim-text>
<claim-text>- a node configuration control unit (50) configured to:<!-- EPO <DP n="35"> --></claim-text>
<claim-text>- receive a network investigating message (NIM) from another network node (24), the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- inspect the network investigating message and perform further processing of the network investigating message based on the results of the inspecting,<br/>
where the inspecting comprises
<claim-text>- determining a communication weight (CW) based on the quality of communication with the other node,</claim-text>
<claim-text>- forming an intermediate weight (IW) through combining the communication weight (CW) with the message weight (MW), and</claim-text>
<claim-text>- comparing the intermediate weight (IW) with the node weight (NW),</claim-text>
where the further processing is performed if the intermediate weight (IW) is lower than the node weight (NW) and comprises
<claim-text>- setting the intermediate weight (IW) as new node weight (NW),</claim-text>
<claim-text>- setting the intermediate weight (IW) as new message weight (MW), and</claim-text>
<claim-text>- sending a changed network investigating message (NIM) having the new message weight to other nodes (34) in the network.</claim-text></claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The wireless communication device according to claim 8, further compromising a data message handling unit (53) configured to receive a data message (DM) from another network node (34), said data message<!-- EPO <DP n="36"> --> comprising a node weight (ONW) of a message originating node, compare the received node weight (ONW) with the own node weight (NW) and forward the data message to other nodes in case the received node weight is higher than the own node weight.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A computer program product for a wireless communication device (43), the wireless communication device providing a node (30) in an industrial wireless network and being provided with a node weight (NW), the computer program product comprising a data carrier (112) with computer program code (114) which when run on a processor forming a node configuration control unit (50) of the wireless communication device, causes the node configuration control unit to:
<claim-text>- receive a network investigating message (NIM) from another network node (24), the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- inspect the network investigating message and perform further processing of the network investigating message based on the results of the inspecting,<br/>
where the inspecting comprises
<claim-text>- determining a communication weight (CW) based on the quality of communication with the other node,</claim-text>
<claim-text>- forming an intermediate weight (IW) through combining the communication weight (CW) with the message weight (MW), and</claim-text>
<claim-text>- comparing the intermediate weight (IW) with the node weight (NW),</claim-text><!-- EPO <DP n="37"> -->
where the further processing is performed if the intermediate weight (IW) is lower than the node weight (NW) and comprises
<claim-text>- setting the intermediate weight (IW) as new node weight (NW),</claim-text>
<claim-text>- setting the intermediate weight (IW) as new message weight (MW), and</claim-text></claim-text>
<claim-text>- sending a changed network investigating message (NIM) having the new message weight to other nodes (34) in the network.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A method for investigating communication paths in an industrial wireless network (WN), the method being performed by a network manager device (20) of the industrial wireless network and comprising the steps of:
<claim-text>- sending (54) a network investigating message to at least one other network node (24, 26, 28, 30, 34) for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- receiving (56) node configuration messages (NCM) from the other nodes (24, 26, 28, 30, 34) of the industrial wireless network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight (NW) of a corresponding node having been updated based on a message weight,<!-- EPO <DP n="38"> --></claim-text>
<claim-text>- mapping (58) the topology of the wireless communication network based on the node configuration data in the received node configuration messages,</claim-text>
<claim-text>- setting (60) a communication scheduling scheme based on the mapped topology, and</claim-text>
<claim-text>- informing (62) the network nodes of the communication scheduling scheme.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method according to claim 1, wherein the node configuration data comprises a node hop counter values (NHN) and the node investigating message comprises a message hop counter value (MHN).</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method according to claim 11 or 12, wherein the node configuration data comprises parent node data (PN<sub>1</sub>) for the network nodes.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The method according to any of claims 11 - 13, wherein the network investigating message is periodically sent in the industrial wireless network.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The method according to any of claims 11 - 14, wherein the network manager device comprises an own node weight and further comprising receiving (100) a data message (DM) from a network node, said data message comprising a node weight (ONW) of a message originating node, comparing (106) the received node weight with the own node weight and processing the data message in case the received node weight (ONW) is higher than the own node weight.<!-- EPO <DP n="39"> --></claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>A network manager device (20) for an industrial wireless network (WN), the wireless network managing device comprising:
<claim-text>- a network topology determining unit (42) configured to</claim-text>
<claim-text>- send a network investigating message (NIM) to at least one other network node (24, 26, 28, 30, 32, 34) for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- receive node configuration messages (NCM) from the other nodes of the network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight (NW) of a corresponding node having been updated based on a message weight,</claim-text>
<claim-text>- map the topology of the network based on the node configuration data in the received node configuration messages,</claim-text>
<claim-text>- set a communication scheduling scheme based on the mapped topology, and</claim-text>
<claim-text>- inform the network nodes of the communication scheduling scheme.</claim-text></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The network manager device according to claim 16, further comprising an own node weight and a data handling unit (38) configured to receive a data message (DM) from a network node, said data message comprising a node weight (ONW) of a message originating node,<!-- EPO <DP n="40"> --> compare the received node weight with the own node weight and process the data message in case the received node weight is higher than the own node weight.</claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>A computer program product for a network manager device (20) of an industrial wireless network (WN),<br/>
the computer program product comprising a data carrier (112) with computer program code (114) which when run on a processor forming a network topology determining unit of the network manager device, causes the network manager device to:
<claim-text>- send a network investigating message (NIM) to at least one other network node (24, 26, 28, 30, 32, 34) for being processed and forwarded through the industrial wireless network, the network investigating message comprising a message weight (MW),</claim-text>
<claim-text>- receive node configuration messages (NCM) from the other nodes of the network, the node configuration messages comprising node configuration data that has been updated through processing of the network investigating message in the network nodes, the node configuration data of a node configuration message comprising a node weight (NW) of a corresponding node having been updated based on a message weight,</claim-text>
<claim-text>- map the topology of the network based on the node configuration data in the received node configuration messages,</claim-text>
<claim-text>- set a communication scheduling scheme based on the mapped topology, and<!-- EPO <DP n="41"> --></claim-text>
<claim-text>- inform the network nodes of the communication scheduling scheme.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16671045" load-source="patent-office"><!-- EPO <DP n="42"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="177" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="157" he="222" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0003" num="4,5,6,7"><img id="if0003" file="imgf0003.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0004" num="8,10"><img id="if0004" file="imgf0004.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0005" num="9"><img id="if0005" file="imgf0005.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0006" num="11,12"><img id="if0006" file="imgf0006.tif" wi="165" he="200" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="159" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="159" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
