<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2682917-A1" country="EP" doc-number="2682917" kind="A1" date="20140108" family-id="46758130" file-reference-id="252638" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146584835" ucid="EP-2682917-A1"><document-id><country>EP</country><doc-number>2682917</doc-number><kind>A1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12751797-A" is-representative="YES"><document-id mxw-id="PAPP154847027" load-source="docdb" format="epo"><country>EP</country><doc-number>12751797</doc-number><kind>A</kind><date>20120302</date><lang>JA</lang></document-id><document-id mxw-id="PAPP173226873" load-source="docdb" format="original"><country>EP</country><doc-number>12751797.7</doc-number><date>20120302</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140551711" ucid="JP-2011047028-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011047028</doc-number><kind>A</kind><date>20110303</date></document-id></priority-claim><priority-claim mxw-id="PPC140557233" ucid="JP-2012055462-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012055462</doc-number><kind>W</kind><date>20120302</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2100271530" load-source="docdb">G06K   9/00        20060101AFI20140715BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100272316" load-source="docdb">G06K   9/62        20060101ALI20140715BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100274277" load-source="docdb">G08B  21/06        20060101ALI20140715BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2100278315" load-source="docdb">G06K   9/03        20060101ALI20140715BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2092283256" load-source="docdb" scheme="CPC">G06K   9/00845     20130101 LI20150209BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2092284197" load-source="docdb" scheme="CPC">G06K   9/6292      20130101 LI20150209BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2092286167" load-source="docdb" scheme="CPC">G06K   9/628       20130101 LI20150209BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2092286509" load-source="docdb" scheme="CPC">G08G   1/16        20130101 LI20150209BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989637729" load-source="docdb" scheme="CPC">G08B  21/06        20130101 FI20131212BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132359138" lang="DE" load-source="patent-office">ZUSTANDSSCHÄTZUNGSVORRICHTUNG, ZUSTANDSSCHÄTZUNGSVERFAHREN UND PROGRAMM DAFÜR</invention-title><invention-title mxw-id="PT132359139" lang="EN" load-source="patent-office">STATE ESTIMATION DEVICE, STATE ESTIMATION METHOD, AND PROGRAM</invention-title><invention-title mxw-id="PT132359140" lang="FR" load-source="patent-office">DISPOSITIF D'ESTIMATION D'ÉTAT, PROCÉDÉ D'ESTIMATION D'ÉTAT ET PROGRAMME</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919537569" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>AISIN SEIKI</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919506255" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>AISIN SEIKI KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR919009496" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Aisin Seiki Kabushiki Kaisha</last-name><iid>101192952</iid><address><street>1, Asahi-machi 2-chome Kariya-shi</street><city>Aichi 448-8650</city><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919512628" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>OGURI KOJI</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR919542942" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>OGURI, KOJI</last-name></addressbook></applicant><applicant mxw-id="PPAR919015819" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Oguri, Koji</last-name><iid>101335902</iid><address><street>18 Nakamura-cho 1-chome Handa-shi</street><city>Aichi 475-0873</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919510185" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>OGURI KOJI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919538826" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>OGURI KOJI</last-name></addressbook></inventor><inventor mxw-id="PPAR919015948" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>OGURI KOJI</last-name><address><street>18 Nakamura-cho 1-chome Handa-shi</street><city>Aichi 475-0873</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919506463" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KAWANO TAKASHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919517055" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KAWANO TAKASHI</last-name></addressbook></inventor><inventor mxw-id="PPAR919015484" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KAWANO TAKASHI</last-name><address><street>c/o Aisin Seiki Kabushiki Kaisha 1 Asahi-machi 2-chome</street><city>Kariya-shi Aichi 448-8650</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919510463" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>IMAI AKIHIRO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR919504262" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>IMAI AKIHIRO</last-name></addressbook></inventor><inventor mxw-id="PPAR919006008" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>IMAI AKIHIRO</last-name><address><street>c/o AICHI PREFECTURAL UNIVERSITY 1522 Ibaragabasama</street><city>Nagakute-shi Aichi 480-1198</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR919017396" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TBK-Patent</last-name><iid>100061560</iid><address><street>Bavariaring 4-6</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2012055462-W"><document-id><country>JP</country><doc-number>2012055462</doc-number><kind>W</kind><date>20120302</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012118206-A1"><document-id><country>WO</country><doc-number>2012118206</doc-number><kind>A1</kind><date>20120907</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549738146" load-source="docdb">AL</country><country mxw-id="DS549739107" load-source="docdb">AT</country><country mxw-id="DS549738147" load-source="docdb">BE</country><country mxw-id="DS549738109" load-source="docdb">BG</country><country mxw-id="DS549907204" load-source="docdb">CH</country><country mxw-id="DS549741022" load-source="docdb">CY</country><country mxw-id="DS549739108" load-source="docdb">CZ</country><country mxw-id="DS549777809" load-source="docdb">DE</country><country mxw-id="DS549738148" load-source="docdb">DK</country><country mxw-id="DS549741023" load-source="docdb">EE</country><country mxw-id="DS549739824" load-source="docdb">ES</country><country mxw-id="DS549738110" load-source="docdb">FI</country><country mxw-id="DS549738111" load-source="docdb">FR</country><country mxw-id="DS549777810" load-source="docdb">GB</country><country mxw-id="DS549739009" load-source="docdb">GR</country><country mxw-id="DS549777811" load-source="docdb">HR</country><country mxw-id="DS549741024" load-source="docdb">HU</country><country mxw-id="DS549907205" load-source="docdb">IE</country><country mxw-id="DS549739010" load-source="docdb">IS</country><country mxw-id="DS549738112" load-source="docdb">IT</country><country mxw-id="DS549739011" load-source="docdb">LI</country><country mxw-id="DS549777812" load-source="docdb">LT</country><country mxw-id="DS549739109" load-source="docdb">LU</country><country mxw-id="DS549777821" load-source="docdb">LV</country><country mxw-id="DS549777822" load-source="docdb">MC</country><country mxw-id="DS549739110" load-source="docdb">MK</country><country mxw-id="DS549739111" load-source="docdb">MT</country><country mxw-id="DS549739825" load-source="docdb">NL</country><country mxw-id="DS549741369" load-source="docdb">NO</country><country mxw-id="DS549739826" load-source="docdb">PL</country><country mxw-id="DS549738113" load-source="docdb">PT</country><country mxw-id="DS549739827" load-source="docdb">RO</country><country mxw-id="DS549738114" load-source="docdb">RS</country><country mxw-id="DS549739828" load-source="docdb">SE</country><country mxw-id="DS549907206" load-source="docdb">SI</country><country mxw-id="DS549741370" load-source="docdb">SK</country><country mxw-id="DS549741371" load-source="docdb">SM</country><country mxw-id="DS549739112" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128673007" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A verification value is calculated for an estimation result. The estimation result is corrected on the basis of the calculated verification value. This allows for output of a highly reliable estimation result. If it is determined that the class to which the state ofa driver belongs has transitioned continuously, the estimation result is outputted. If it cannot be determined that the class to which the state of the driver belongs has transitioned continuously, a previous estimation result is outputted instead of the latest estimation result. This allows for output of a highly reliable estimation result.<img id="iaf01" file="imgaf001.tif" wi="76" he="115" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128737152" lang="EN" source="EPO" load-source="docdb"><p>A verification value is calculated for an estimation result. The estimation result is corrected on the basis of the calculated verification value. This allows for output of a highly reliable estimation result. If it is determined that the class to which the state ofa driver belongs has transitioned continuously, the estimation result is outputted. If it cannot be determined that the class to which the state of the driver belongs has transitioned continuously, a previous estimation result is outputted instead of the latest estimation result. This allows for output of a highly reliable estimation result.</p></abstract><description mxw-id="PDES63958995" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">The present invention relates to a state estimation device, a state estimation method and a program, more specifically relating to a state estimation device to estimate the state of a driver, as well as a state estimation method and a program to estimate the state of a driver.</p><heading id="h0002">Background Art</heading><p id="p0002" num="0002">Although the number of deaths resulting from traffic accidents has been decreasing recently, the number of traffic accidents still remains high. Traffic accidents are attributed to various causes, and one of the causes to trigger traffic accidents is that of a driver driving a vehicle in a careless state. The careless state can be roughly divided into a state in which the driver becomes inattentive to driving by his performing an act other than driving, such as carrying on a conversation and using a mobile phone and a state in which the driver decreases his attention due to fatigue and sleepiness.</p><p id="p0003" num="0003">It is difficult for a driver himself/herself to prevent fatigue and sleepiness. Therefore, various systems have been proposed for accurately detecting a drowsy of driver or a decrease in wakefulness of a driver, from the standpoint of safety (see, for example, Patent Literatures 1 and 2).</p><p id="p0004" num="0004">An estimation device described in Patent Literature 1 estimates whether a driver is in a careless state in which the driver's attention has decreased, on the basis of output from an identification device in which input is biological information of the driver and information on the vehicle the driver drives. Specifically, the estimation device performs weighting on the basis of reliabilities of output results, and estimates, as the<!-- EPO <DP n="2"> --> state of the driver, a result indicated by the majority of the output results from the identification device.</p><p id="p0005" num="0005">A device described in Patent Literature 2 estimates the degree of sleepiness a driver feels on the basis of, for example, a plurality of feature amounts of information about the driver's eyes, such as time required for a blink and the degree of opening of the eyes.</p><heading id="h0003">Citation List</heading><heading id="h0004">Patent Literature</heading><p id="p0006" num="0006"><ul><li>PTL 1: Unexamined Japanese Patent Application Kokai Publication No. <patcit id="pcit0001" dnum="JP2009301367A"><text>2009-301367</text></patcit></li><li>PTL 2: Unexamined Japanese Patent Application Kokai Publication No. <patcit id="pcit0002" dnum="JP2009090028A"><text>2009-90028</text></patcit></li></ul></p><heading id="h0005">Summary of Invention</heading><heading id="h0006">Technical Problem</heading><p id="p0007" num="0007">The device described in Patent Literature 1 estimates the state of a driver on the basis of output from the identification device. Therefore, the device determines only whether the driver is in a careless state or not, but has difficulty in estimating the state of the driver at multiple levels.</p><p id="p0008" num="0008">The estimation device described in Patent Literature 2 is able to estimate the state of a driver at multiple levels. However, the state of the driver usually transitions continuously. Therefore, it is considered rare that a state in which wakefulness is high transitions to a state in which wakefulness is extremely low in a short period of time, or a state in which wakefulness is extremely low transitions to a state in which wakefulness is high in a short period of time. Accordingly, in order to accurately estimate the state of the driver, continuity of transition of the state needs to be taken into consideration.</p><p id="p0009" num="0009">The present invention was made in view of the above circumstances, and has an objective of accurately estimating the state of a driver, taking it into consideration<!-- EPO <DP n="3"> --> that the state of the driver continuously transitions.</p><heading id="h0007">Solution to Problem</heading><p id="p0010" num="0010">In order to achieve the above objective, a state estimation device according to a first aspect of the present invention estimates the state of the driver, and includes:
<ul><li>first identification means to identify, of a first group and a second group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>second identification means to identify, of a third group and a fourth group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the third group and the fourth group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>estimation means to estimate the class to which the state of the driver belongs, on the basis of the identification result of the first identification means and the identification result of the second identification means;</li><li>verification means to verify an estimation result of the estimation means; and</li><li>output means to output an estimation result that corresponds to a verification result of the verification means.</li></ul></p><p id="p0011" num="0011">In order to achieve the above objective, a state estimation method according to a second aspect of the present invention estimates the state of the driver, and includes:
<ul><li>a first identification step to identify, of a first group and a second group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>a second identification step to identify, of a third group and a fourth group, the group to which the state of the driver belongs using a feature amount about the driver<!-- EPO <DP n="4"> --> as an input value, each of the third group and the fourth group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>an estimation step to estimate the class to which the state of the driver belongs, on the basis of the identification result of the first identification step and the identification result of the second identification step;</li><li>a verification step to verify the result of the estimation; and</li><li>an output step to output an estimation result corresponding to the result of the verification.</li></ul></p><p id="p0012" num="0012">In order to achieve the above objective, a program according to a third aspect of the present invention causes the computer to perform:
<ul><li>a first procedure to identify, of a first group and a second group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>a second identification procedure to identify, of a third group and a fourth group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the third group and the fourth group having a plurality of classes defined as based on a degree of the activity of the driver;</li><li>an estimation procedure to estimate the class to which the state of the driver belongs, on the basis of the identification result of the first identification procedure and the identification result of the second identification procedure;</li><li>a verification procedure to verify the result of the estimation; and</li><li>an output procedure to output an estimation result corresponding to the result of the verification.</li></ul></p><heading id="h0008">Advantageous Effects of Invention</heading><p id="p0013" num="0013">According to the present invention, an estimation result estimated on the basis of an identification result is verified. Accordingly, in performing verification, it is<!-- EPO <DP n="5"> --> possible to accurately estimate the state of a driver by verifying, for example, continuity of transition of the state of the driver.</p><heading id="h0009">Brief Description of Drawings</heading><p id="p0014" num="0014"><ul><li><figref idrefs="f0001">FIG. 1</figref> is a block diagram illustrating a state estimation system according to a first embodiment;</li><li><figref idrefs="f0002">FIG. 2</figref> is a diagram illustrating arrangement of an imaging device;</li><li><figref idrefs="f0003">FIG. 3</figref> is a table for explaining classes that belong to each group;</li><li><figref idrefs="f0004">FIG. 4</figref> is a block diagram illustrating a state estimation system according to a second embodiment;</li><li><figref idrefs="f0005">FIG. 5</figref> is a flow chart for explaining operation of an estimation device; and</li><li><figref idrefs="f0006">FIG. 6</figref> is a flow chart for explaining operation of an estimation device.</li></ul></p><heading id="h0010">Description of Embodiments</heading><heading id="h0011">&lt;&lt;First Embodiment&gt;&gt;</heading><p id="p0015" num="0015">Hereinafter, a first embodiment of the present invention will be described with reference to drawings. <figref idrefs="f0001">FIG. 1</figref> is a block diagram illustrating a schematic configuration of a state estimation system 10 according to the present embodiment. The state estimation system 10 estimates the state of a driver who drives a car on the basis of, for example, biological information of the driver. This estimates whether the driver is in a state to trigger a traffic accident due to sleepiness and/or fatigue.</p><p id="p0016" num="0016">In the present embodiment, the state of a driver is specified such that a state in which the driver does not look sleepy at all is class 1, a state in which the driver looks a little sleepy is class 2, a state in which the driver looks sleepy is class 3, a state in which the driver looks quite sleepy is class 4, and a state in which the driver looks very sleepy is class 5 according to the definition by New Energy and Industrial Technology Development Organization (NEDO), and it is estimated to which class the state of the driver 60 belongs.</p><p id="p0017" num="0017">As illustrated in <figref idrefs="f0001">FIG. 1</figref>, the state estimation system 10 has an imaging<!-- EPO <DP n="6"> --> device 20 and an estimation device 30.</p><p id="p0018" num="0018">The imaging device 20 photographs the face of the driver 60 sitting on a seat 61, converts an image obtained by photographing to an electric signal, and outputs the electric signal to the estimation device 30. The imaging device 20 is disposed on, for example, a steering wheel column, as illustrated in <figref idrefs="f0002">FIG. 2</figref>. The view angle and posture of the imaging device 20 are adjusted so that the face of the driver 60 is positioned in the center of the field of view.</p><p id="p0019" num="0019">The estimation device 30 has a feature amount outputter 31, identifiers 32a, 32b, an estimate value calculator 33, a state estimator 34, a verifier 35 and an estimation result outputter 36, as illustrated in <figref idrefs="f0001">FIG. 1</figref>.</p><p id="p0020" num="0020">The feature amount outputter 31 extracts biological information of the driver 60 as a feature amount from image information outputted from the imaging device 20, for example, every 10 seconds, and then outputs the extracted feature amount to the identifiers 32a, 32b. Specifically, the feature amount outputter 31 extracts biological information such as the degree a1 of opening of eyelids of the driver 60, the number a2 of blinks per unit time, the time a3 required from start of a blink to end of the blink, the direction a5 of the sight line, the orientation a5 of the face, on the basis of image information, and then sequentially outputs the extracted biological information a1 to a5 as feature amounts x<sub>N</sub>(a1, a2, a3, a4, a5). This calculates the feature amounts x<sub>1</sub>(a1, a2, a3, a4, a5), x<sub>2</sub>(a1, a2, a3, a4, a5), ..., x<sub>N</sub>(a1, a2, a3, a4, a5) approximately every 10 seconds, which are outputted to the identifiers 32a, 32b, respectively. Hereinafter, for explanatory convenience, a feature amount x<sub>N</sub> (a1, a2, a3, a4, a5) is indicated by x<sub>N</sub>. N is an integer greater than or equal to 1.</p><p id="p0021" num="0021">As illustrated in the table in <figref idrefs="f0003">FIG. 3</figref>, the present embodiment defines a first group composed of class 1, class 2 and class 3, a second group composed of class 4 and class 5, a third group composed of class 1, class 2, class 3 and class 4, and a fourth group composed of class 5. The state of the driver 60 is estimated on the basis of the result<!-- EPO <DP n="7"> --> obtained in such a way that the identifiers 32a, 32b, which will be described later, identify a group to which the state of the driver 60 belongs.</p><p id="p0022" num="0022">The identifier 32a identifies whether the state of the driver 60 belongs to the first group composed of class 1, class 2 and class 3, or the second group composed of class 4 and class 5. The identifier 32a outputs an identification result α<sub>N</sub>(x) to the estimate value calculator 33 if a feature amount x<sub>N</sub> is inputted. An AdaBoost-learned weak identifier, for example, can be used as the identifier 32a.</p><p id="p0023" num="0023">In the identification result α<sub>N</sub>(x), a sign of α<sub>N</sub>(x) indicates the group to which the state of the driver belongs. For example, if the sign of α<sub>N</sub>(x) is -, the state of the driver belongs to the first group; and if the sign of α<sub>N</sub>(x) is +, the state of the driver belongs to the second group.</p><p id="p0024" num="0024">In the identification result α<sub>N</sub>(x), a magnitude of absolute value |α<sub>N</sub>(x)| of α<sub>N</sub>(x) indicates the reliability of the identification result. For example, if the sign of α<sub>N</sub>(x) is -, a greater absolute value |α<sub>N</sub>(x)| means that the determination is more reliable that the state of the driver belongs to the first group; and if the sign of α<sub>N</sub>(x) is +, a greater absolute value |α<sub>N</sub>(x)| means that the determination is more reliable that the state of the driver belongs to the second group.</p><p id="p0025" num="0025">The identifier 32b identifies whether the state of the driver belongs to the third group composed of class 1, class 2, class 3 and class 4 or the fourth group composed of class 5. The identifier 32b outputs an identification result β<sub>N</sub>(x) to the estimate value calculator 33 if a feature amount x is inputted. Similarly, an AdaBoost-learned weak identifier, for example, can be used as the identifier 32b.</p><p id="p0026" num="0026">In the identification result β<sub>N</sub>(x), a sign of β<sub>N</sub>(x) indicates the group to which the state of the driver belongs. For example, if the sign of β<sub>N</sub>(x) is -, the state of the driver belongs to the third group; and if the sign of β<sub>N</sub>(x) is +, the state of the driver belongs to the fourth group.</p><p id="p0027" num="0027">In the identification result β<sub>N</sub>(x), a magnitude of absolute value |β<sub>N</sub>(x)| of<!-- EPO <DP n="8"> --> β<sub>N</sub>(x) indicates the reliability of the identification result. For example, if the sign of β<sub>N</sub>(x) is -, a greater absolute value |β<sub>N</sub>(x)| means that the determination is more reliable that the state of the driver belongs to the third group; and if the sign of β<sub>N</sub>(x) is +, a greater absolute value |β<sub>N</sub>(x)| means that the determination is more reliable that the state of the driver belongs to the fourth group.</p><p id="p0028" num="0028">The estimate value calculator 33 sequentially acquires an identification result α<sub>N</sub>(x) outputted from the identifier 32a, and then uses four identification results α<sub>N</sub>(x), α<sub>N-1</sub>(x), α<sub>N-2</sub>(x), α<sub>N-3</sub>(x) including the latest identification result α<sub>N</sub>(x) to perform an operation represented by the following expression (1). This calculates an average value AVGα<sub>N</sub> of the four identification results α<sub>N</sub>(x), α<sub>N-1</sub>(x), α<sub>N-2</sub>(x), α<sub>N-3</sub>(x) outputted from the identifier 32a. Here, n is 4.</p><p id="p0029" num="0029">[Expression 1]<br/>
<maths id="math0001" num="(1)"><math display="block"><mi>AVG</mi><mo>⁢</mo><msub><mi>α</mi><mi mathvariant="normal">N</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi mathvariant="normal">i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi mathvariant="normal">n</mi><mo>-</mo><mn>1</mn></mrow></munderover><msub><mi>α</mi><mrow><mi mathvariant="normal">N</mi><mo>-</mo><mi mathvariant="normal">i</mi></mrow></msub><mfenced><mi mathvariant="normal">x</mi></mfenced></mstyle><mi mathvariant="normal">n</mi></mfrac></math><img id="ib0001" file="imgb0001.tif" wi="57" he="16" img-content="math" img-format="tif"/></maths></p><p id="p0030" num="0030">Similarly, the estimate value calculator 33 sequentially acquires an identification result β<sub>N</sub>(x) outputted from the identifier 32b, and then uses four identification results β<sub>N</sub>(x), β<sub>N-1</sub>(x), β<sub>N-2</sub>(x), β<sub>N-3</sub>(x) including the latest identification result β<sub>N</sub>(x) to perform an operation represented by the following expression (2). This calculates an average value AVGβ<sub>N</sub> of the four identification results β<sub>N</sub>(x), β<sub>N-1</sub>(x), β<sub>N-2</sub>(x), β<sub>N-3</sub>(x) outputted from the identifier 32b.</p><p id="p0031" num="0031">[Expression 2]<br/>
<maths id="math0002" num="(2)"><math display="block"><mi>AVG</mi><mo>⁢</mo><msub><mi>β</mi><mi mathvariant="normal">N</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi mathvariant="normal">i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi mathvariant="normal">n</mi><mo>-</mo><mn>1</mn></mrow></munderover><msub><mi>β</mi><mrow><mi mathvariant="normal">N</mi><mo>-</mo><mi mathvariant="normal">i</mi></mrow></msub><mfenced><mi mathvariant="normal">x</mi></mfenced></mstyle><mi mathvariant="normal">n</mi></mfrac></math><img id="ib0002" file="imgb0002.tif" wi="58" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0032" num="0032">Next, the estimate value calculator 33 performs operations represented by the following expressions (3) and (4) to calculate estimate values D34<sub>N</sub>, D45<sub>N</sub>.</p><p id="p0033" num="0033">[Expression 3]<br/>
<maths id="math0003" num="(3)"><math display="block"><mi mathvariant="normal">D</mi><mo>⁢</mo><msub><mn mathvariant="normal">34</mn><mi mathvariant="normal">N</mi></msub><mo>=</mo><mi>sign</mi><mfenced separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>α</mi><mi mathvariant="normal">N</mi></msub></mfenced></math><img id="ib0003" file="imgb0003.tif" wi="59" he="14" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="9"> --></p><p id="p0034" num="0034">[Expression 4]<br/>
<maths id="math0004" num="(4)"><math display="block"><mi mathvariant="normal">D</mi><mo>⁢</mo><msub><mn mathvariant="normal">45</mn><mi mathvariant="normal">N</mi></msub><mo>=</mo><mi>sign</mi><mfenced separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>β</mi><mi mathvariant="normal">N</mi></msub></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="59" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0035" num="0035">A sign(X) function contained in the above expressions (3) and (4) outputs 1 if the sign of X is +, outputs -1 if the sign of AVGα<sub>N</sub> is -, and outputs 0 if X is 0. Values of estimation results D34<sub>N</sub>, D45<sub>N</sub> represented by the above expression (1) is any one of 1, -1, 0, but in the present embodiment, it is rare that the variable of the sign function of the above expression (1) is 0. Accordingly, there is no problem in considering that values of estimation results D34<sub>N</sub>, D45<sub>N</sub> are either 1 or -1.</p><p id="p0036" num="0036">The state estimator 34 estimates the state of the driver 60 on the basis of estimate values D34<sub>N</sub>, D45<sub>N</sub> and average values AVGα<sub>N</sub>, AVGβ<sub>N</sub>.</p><p id="p0037" num="0037">As described above, in an identification result α<sub>N</sub>(x), if the sign thereof is -, the state of the driver 60 belongs to the first group, and if the sign thereof is +, the state of the driver 60 belongs to the second group. Accordingly, in an estimate value D34<sub>N</sub> decided by the sign of an average value AVGα<sub>N</sub> of identification results α<sub>N</sub>(x), if the sign is -, the state of the driver 60 belongs to the first group, and if the sign is +, the state of the driver 60 belongs to the second group.</p><p id="p0038" num="0038">Similarly, in an identification result β<sub>N</sub>(x), if the sign thereof is -, the state of the driver 60 belongs to the third group, and if the sign thereof is +, the state of the driver 60 belongs to the fourth group. Accordingly, in an estimate value D45<sub>N</sub> decided by the sign of an average value AVGβ<sub>N</sub> of identification results β<sub>N</sub>(x), if the sign thereof is -, the state of the driver 60 belongs to the third group, and if the sign thereof is +, the state of the driver 60 belongs to the fourth group.</p><p id="p0039" num="0039">Accordingly, when the estimate value D34<sub>N</sub> is -1 and the estimate value D45<sub>N</sub> is -1, it is determined that the state of the driver 60 belongs to the first and third groups. As seen from <figref idrefs="f0003">FIG. 3</figref>, the first group is composed of classes 1 to 3 and the third group is composed of classes 1 to 4. Then, the state estimator 34 estimates that if the estimate value D34<sub>N</sub> is -1 and the estimate value D45<sub>N</sub> is -1, the state of the driver 60<!-- EPO <DP n="10"> --> belongs to classes 1 to 3 that are common in the first and third groups.</p><p id="p0040" num="0040">If the estimate value D34<sub>N</sub> is -1 and the estimate value D45<sub>N</sub> is 1, it is determined that the state of the driver 60 belongs to the first and fourth groups. However, as seen from <figref idrefs="f0003">FIG. 3</figref>, there is no class common in the first and fourth groups.</p><p id="p0041" num="0041">In this case, the state estimator 34 compares an absolute value |AVGα<sub>N</sub>| of an average value AVGα<sub>N</sub> and an absolute value |AVGβ<sub>N</sub>| of an average value AVGβ<sub>N</sub>, and then estimates the group to which the state of the driver 60 belongs on the basis of the estimate value D34<sub>N</sub> or D45<sub>N</sub> specified by the signs of average values AVGα<sub>N</sub> or AVGβ<sub>N</sub> whose absolute value is greater.</p><p id="p0042" num="0042">For example, if the absolute value |AVGα<sub>N</sub>| of the average value AVGα<sub>N</sub> is greater than the absolute value |AVGβ<sub>N</sub>| of the average value AVGβ<sub>N</sub>, the state estimator 34 estimates that the state of the driver 60 belongs to classes 1 to 3 that composes the first group, and if the absolute value |AVGβ<sub>N</sub>| is greater than the absolute value |AVGα<sub>N</sub>|, the state estimator 34 estimates that the state of the driver 60 belongs to class 5 that composes the fourth group.</p><p id="p0043" num="0043">If the estimate value D34<sub>N</sub> is 1 and the estimate value D45<sub>N</sub> is -1, the state of the driver 60 is determined to belong to the second and third groups. As seen from <figref idrefs="f0003">FIG. 3</figref>, the second group is composed of classes 4 and 5 and the third group is composed of classes 1 to 4. Then, the state estimator 34 estimates that if the estimate value D34<sub>N</sub> is 1 and the estimate value D45<sub>N</sub> is -1, the state of the driver 60 belongs to class 4 that is in common with the second and third groups.</p><p id="p0044" num="0044">If the estimate value D34<sub>N</sub> is 1 and the estimate value D45<sub>N</sub> is 1, the state of the driver 60 is determined to belong to the second and fourth groups. As seen from <figref idrefs="f0003">FIG. 3</figref>, the second group is composed of classes 4 and 5, and the fourth group is composed of class 5. Then, the state estimator 34 estimates that if the estimate value D34<sub>N</sub> is 1 and the estimate value D45<sub>N</sub> is 1, the state of the driver 60 belongs to class 5 that is in common with the second and fourth groups.<!-- EPO <DP n="11"> --></p><p id="p0045" num="0045">The state estimator 34 performs the above estimation and outputs an estimation result RST<sub>N</sub> to the verifier 35.</p><p id="p0046" num="0046">The verifier 35 verifies an estimation result RST<sub>N</sub> of the state estimator 34. Specifically, the verifier 35 first performs an operation represented by the following expression (5) to calculate a verification value CL<sub>N</sub>.</p><p id="p0047" num="0047">[Expression 5]<br/>
<maths id="math0005" num="(5)"><math display="block"><msub><mi>CL</mi><mi mathvariant="normal">N</mi></msub><mo>=</mo><mi>sign</mi><mo>⁢</mo><mfenced separators=""><mfenced open="|" close="|" separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>α</mi><mi mathvariant="normal">N</mi></msub></mfenced><mo>+</mo><mfenced open="|" close="|" separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>β</mi><mi mathvariant="normal">N</mi></msub></mfenced><mo>-</mo><mn>1</mn></mfenced></math><img id="ib0005" file="imgb0005.tif" wi="83" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0048" num="0048">The estimation result outptter 36 determines, if the verification value CL<sub>N</sub> outputted from the verifier 35 is -1, that the reliability of the estimation result RST<sub>N</sub> estimated by the state estimator 34 is low, and outputs the estimation result RST<sub>N-1</sub>, which was estimated before estimation of the estimation result RST<sub>N</sub>, to an external device and/or the like.</p><p id="p0049" num="0049">Meanwhile, if the verification value CL<sub>N</sub> is 1,the estimation result outputter 36 compares the estimation result RST<sub>N</sub> estimated by the state estimator 34 and the estimation result RST<sub>N-1</sub> estimated before estimation of the estimation result RST<sub>N</sub>. Then, if the estimation result outputter 36 determines that class to which the state of the driver 60 has transitioned continually, the estimation result outputter 36 outputs the estimation result RST<sub>N</sub> to an external device and/or the like. If as a result of comparison of the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> the estimation result outputter 36 does not determine that class to which the state of the driver 60 belongs has transitioned continually, the estimation result outputter 36 outputs the estimation result RST<sub>N-1</sub> to an external device and/or the like.</p><p id="p0050" num="0050">Specifically, in the present embodiment, there are cases in which the state of the driver 60 is estimated to belong to classes 1 to 3, classes 4 and 5, class 4, and class 5, respectively. Then, for example if the estimation result RST<sub>N-1</sub> indicates that the state of the driver 60 belongs to classes 1 to 3and a subsequent estimation result RST<sub>N</sub> indicates that the state of the driver 60 belongs to class 4 or classes 1 to 3, the estimation result<!-- EPO <DP n="12"> --> outputter 36 determines that the class to which the state of the driver 60 belongs has transitioned continually, and outputs the estimation result RST<sub>N</sub> to an external device and/or the like.</p><p id="p0051" num="0051">Meanwhile, for example, if the estimation result RST<sub>N-1</sub> indicates that the state of the driver 60 belongs to classes 1 to 3 and the subsequent estimation result RST<sub>N</sub> indicates that the state of the driver 60 belongs to class 5, the estimation result outputter 36 does not determine that the state of the driver 60 has not transitioned continually, and outputs the estimation result RST<sub>N-1</sub> to an external device and/or the like.</p><p id="p0052" num="0052">This enables an external device and/or the like to output to the driver 60 an alarm for preventing drowsy driving and/or an announcement to urge the driver 60 to take a rest, for example, on the basis of the estimation result.</p><p id="p0053" num="0053">As described above, in the present embodiment, estimate values D34, D45 are calculated on the basis of an average value of a plurality of identification results α(x) and an average value of a plurality of identification results β(x). Then, on the basis of the estimate values D34, D45, the class to which the state of the driver 60 belongs is estimated. Therefore, when identification results α(x), β(x) are sequentially calculated, it is possible to accurately estimate the class to which the driver 60 belongs even if an identification result having much error is outputted.</p><p id="p0054" num="0054">In the present embodiment, by performing an operation represented by the above expression (5), a verification value CL is calculated. Then, on the basis of the verification value CL, the estimation result RST is corrected. Specifically, if the reliability of the estimation result RST<sub>N</sub> is determined to be low on the basis of the verification value CL, the estimation result RST<sub>N-1</sub> that was estimated the previous time is outputted as an estimation result RST. This allows for output of a highly reliable estimation result.</p><p id="p0055" num="0055">In the present embodiment, the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> are compared and if it is determined that class to which the driver 60<!-- EPO <DP n="13"> --> belongs has transitioned continually, the estimation result RST<sub>N</sub> is outputted. Meanwhile, the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> are compared and if it is not determined that class to which the driver 60 belongs has transitioned continually, the previous estimation result RST<sub>N-1</sub> is outputted. Therefore, a highly reliable estimation result is able to be outputted.</p><p id="p0056" num="0056">Specifically, it is considered that a rapid change of the state of the driver is rare and at least 45 seconds is required from when the state of the driver has transitioned to a certain class until when the state of the driver transitions to the subsequent class. Therefore, like the present embodiment, if the class to which the state of the driver belongs is sequentially estimated on the basis of four identification results α<sub>N</sub>(x), α<sub>N-1</sub>(x), α<sub>N-2</sub>(x), α<sub>N-3</sub>(x) and four identification results β<sub>N</sub>(x), β<sub>N-1</sub>(x), β<sub>N-2</sub>(x), β<sub>N-3</sub>(x) sampled for forty seconds, the class to which the state of the driver is estimated to belong should transition continuously.</p><p id="p0057" num="0057">For example, if the estimation result RST<sub>N-1</sub> indicates that the state of the driver 60 belongs to classes 1 to 3, a subsequent estimation result RST<sub>N</sub> is considered to indicate that the state of the driver 60 belongs to class 4 or that the state of the driver 60 belongs to classes 1 to 3. Meanwhile, if the estimation result RST<sub>N-1</sub> indicates that the state of the driver 60 belongs to classes 1 to 3, a subsequent estimation result RST<sub>N</sub> is unlikely to indicate the state of the driver 60 belongs to class 5. Therefore, by outputting only an estimation result that has continuity from the latest estimation result, a highly reliable estimation result is able to be outputted.</p><heading id="h0012">&lt;&lt;Second Embodiment&gt;&gt;</heading><p id="p0058" num="0058">Next, a second embodiment of the present invention will be described with reference to drawings. The same or equivalent configurations as those of the first embodiment have the same reference signs and description of those reference signs will be omitted or simplified.</p><p id="p0059" num="0059">A state estimation system 10 according to the present embodiment is<!-- EPO <DP n="14"> --> different from the state estimation system 10 according to the first embodiment in that an estimation device 30 is realized by a common computer, microcomputer or the like.</p><p id="p0060" num="0060"><figref idrefs="f0004">FIG. 4</figref> is a block diagram illustrating physical configuration of the state estimation system 10. As illustrated in <figref idrefs="f0004">FIG. 4</figref>, the state estimation system 10 includes the imaging device 20, and the estimation device 30 composed of a computer.</p><p id="p0061" num="0061">The estimation device 30 includes a CPU (Central Processing Unit) 30a, a main storage 30b, an the auxiliary storage 30c, a display 30d, an input device 30e, an interface 30f and a system bus 30g that connects the above components to each other.</p><p id="p0062" num="0062">The CPU 30a performs after-mentioned processing according to a program stored in the auxiliary storage 30c.</p><p id="p0063" num="0063">The main storage 30b includes a RAM (Random Access Memory) and the like and is used as a work area of the CPU 30a.</p><p id="p0064" num="0064">The auxiliary storage 30c includes a non-volatile memory such as a ROM (Read Only Memory), a magnetic disk and a semiconductor memory. The auxiliary storage 30c has stored a program to be executed by the CPU 30a and various parameters, and also sequentially stores image information outputted from the imaging device 20 and the result of processing by the CPU 30a.</p><p id="p0065" num="0065">The display 30d includes, for example, an LCD (Liquid Crystal Display), and displays the result of processing by the CPU 30a.</p><p id="p0066" num="0066">The input device 30e includes input keys and a pointing device. An instruction from an operator is inputted via the input device 30e and is outputted via the system bus 30g to the CPU 30a.</p><p id="p0067" num="0067">The interface 30f includes a serial interface, a LAN (Local Area Network) interface and/or the like. The imaging device 20 is connected via the interface 30f to the system bus 30g.</p><p id="p0068" num="0068">The flow chart in <figref idrefs="f0005">FIG. 5</figref> illustrates a series of processing algorithm of a program to be executed by the CPU 30a. Hereinafter, processing to be performed by<!-- EPO <DP n="15"> --> the estimation device 30 will be described with reference to <figref idrefs="f0005">FIG. 5</figref>. This processing is performed by the CPU 30a after image information is outputted from the imaging device 20.</p><p id="p0069" num="0069">At step S 101, the CPU 30a extracts biological information of the driver 60 as a feature amount x<sub>N</sub> from image information outputted from the imaging device 20, for example, every 10 seconds.</p><p id="p0070" num="0070">At the subsequent step S 102, the CPU 30a identifies whether the state of the driver 60 belongs to the first group composed of class 1, class 2 and class 3 or the second group composed of class 4 and class 5 on the basis of the feature amount x<sub>N</sub>, and then calculates an identification result α<sub>N</sub>(x).</p><p id="p0071" num="0071">Similarly, the CPU 30a identifies whether the state of the driver belongs to the third group composed of class 1, class 2, class 3 and class 4 or the fourth group composed of class 5 on the basis of the feature amount x<sub>N</sub>., and then calculates an identification result β<sub>N</sub>(x).</p><p id="p0072" num="0072">At the subsequent step S103, the CPU 30a uses four identification results α<sub>N</sub>(x), α<sub>N-1</sub>(x), α<sub>N-2</sub>(x), α<sub>N-3</sub>(x) including the latest identification result α<sub>N</sub>(x) to perform an operation represented by the above expression (1), thereby calculating an average value AVGα<sub>N</sub>, and uses four identification results β<sub>N</sub>(x), β<sub>N-1</sub>(x), β<sub>N-2</sub>(x), β<sub>N-3</sub>(x) including the latest identification result β<sub>N</sub>(x) to perform an operation represented by the above expression (2), thereby calculating an average value AVGβ<sub>N</sub>.</p><p id="p0073" num="0073">At the subsequent step S 104, the CPU 30a performs operations represented by the above expressions (3) and (4) to calculate estimate values D34<sub>N</sub>, D45<sub>N</sub>.</p><p id="p0074" num="0074">At the subsequent step S 105, the CPU 30a performs processing illustrated in the flow chart in <figref idrefs="f0006">FIG. 6</figref> for calculating an estimation result RST.</p><p id="p0075" num="0075">At the first step S201, the CPU 30a determines whether the estimate value D34<sub>N</sub> is -1. If the estimate value D34<sub>N</sub> is -1 (step S201: Yes), the CPU 30a proceeds to step S202.<!-- EPO <DP n="16"> --></p><p id="p0076" num="0076">At step S202, the CPU 30a determines whether the estimate value D45<sub>N</sub> is -1. If the estimate value D45<sub>N</sub> is -1 (step S202: Yes), the CPU 30a proceeds to step S203 and estimates that the state of the driver 60 belongs to any one of classes 1 to 3.</p><p id="p0077" num="0077">At step S202, if the estimate value D45<sub>N</sub> is 1 (step S202: No), the CPU 30a proceeds to step S204.</p><p id="p0078" num="0078">At the subsequent step S204, the CPU 30a compares the absolute value |AVGα<sub>N</sub>| of the average value AVGα<sub>N</sub> and the absolute value |AVGβ<sub>N</sub>| of the average value AVGβ<sub>N</sub>. If the CPU 30a determines that the absolute value |AVGα<sub>N</sub>| is greater (step S204: Yes), the CPU 30a proceeds to step S205 and estimates that the state of the driver 60 belongs to any one of classes 1 to 3. Meanwhile, if the CPU30a determines that the absolute value |AVGα<sub>N</sub>| is smaller (step S204: No), the CPU 30a proceeds to step S206 and estimates that the state of the driver 60 belongs to any one of classes 4 and 5.</p><p id="p0079" num="0079">At step S201, if the estimate value D34<sub>N</sub> is 1 (step S201: No), the CPU 30a proceeds to step S207.</p><p id="p0080" num="0080">At step S207, the CPU 30a determines whether the estimate value D45<sub>N</sub> is -1. If the estimate value D45<sub>N</sub> is -1 (step S207: Yes), the CPU 30a proceeds to step S208 and estimates that the state of the driver 60 belongs to class 4. Meanwhile, if the estimate value D45<sub>N</sub> is 1 (step S207: No), the CPU 30a proceeds to step S209 and estimates that the state of the driver 60 belongs to class 5.</p><p id="p0081" num="0081">When processing at steps S203, S205, S206, S208 and S209 are completed, the CPU 30a proceeds to step S106.</p><p id="p0082" num="0082">At the subsequent step S 106, the CPU 30a verifies the estimation result RST. Specifically, the CPU 30a performs an operation represented by the following expression (5) to calculate a verification value CL<sub>N</sub>.</p><p id="p0083" num="0083">At the subsequent step S107, if the verification value CL<sub>N</sub> is -1, the CPU 30a determines that the reliability of the estimation result RST<sub>N</sub> is low, and outputs the estimation result RST<sub>N-1</sub>, estimated before estimation of the estimation result RST<sub>N</sub>, to an<!-- EPO <DP n="17"> --> external device and/or the like.</p><p id="p0084" num="0084">Meanwhile, if the verification value CL<sub>N</sub> is 1, the CPU 30a compares the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> estimated before estimation of the estimation result RST<sub>N</sub>. Then, if the CPU 30a determines that the class to which the state of the driver 60 belongs has transitioned continually, the CPU 30a outputs the estimation result RST<sub>N</sub> to an external device and/or the like. If the CPU 30a compares the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> and does not determine that the class to which the state of the driver 60 belongs has transitioned continually, the CPU 301 outputs the previous estimation result RST<sub>N-1</sub> to an external device and/or the like.</p><p id="p0085" num="0085">As described above, in the present embodiment, estimate values D34, D45 are calculated on the basis of average values of a plurality of identification results α(x) and a plurality of identification results β(x). Then, the class to which the state of the driver 60 belongs is estimated on the basis of the estimate values D34, D45. Therefore, in sequential calculation of identification results α(x), β(x), even if an identification result having much error is outputted, the class to which the state of the driver 60 belongs is able to be accurately estimated.</p><p id="p0086" num="0086">In the present embodiment, by performing an operation represented by the above expression (5), a verification value CL is calculated. Then, the estimation result RST is corrected on the basis of the verification value CL. Specifically, if it is determined that the reliability of the estimation result RST<sub>N</sub> is low on the basis of the verification value CL, the estimation result RST<sub>N-1</sub> estimated the previous time is outputted as an estimation result RST. This allows for output of a highly reliable estimation result.</p><p id="p0087" num="0087">In the present embodiment, the estimation result RST<sub>N</sub> and the estimation result RST<sub>N-1</sub> are compared, and if it is determined that the class to which the state of the driver 60 belongs has transitioned continually, the estimation result RST<sub>N</sub> is outputted to an external device and/or the like. Meanwhile, the estimation result RST<sub>N</sub> and the<!-- EPO <DP n="18"> --> estimation result RST<sub>N-1</sub> are compared and if it is not determined that the class to which the state of the driver 60 has transitioned continually, the previous estimation result RST<sub>N-1</sub> is outputted to an external device and/or the like. Therefore, a highly reliable estimation result is able to be outputted.</p><p id="p0088" num="0088">Embodiments of the present invention have been described, but the present invention is not limited to the above embodiments. For example, in the above embodiments, a case has been described in which a feature amount x<sub>N</sub> is outputted every 10 seconds. The present invention is not limited to this, but a feature amount x<sub>N</sub> may be outputted every 10 seconds or less.</p><p id="p0089" num="0089">In the above embodiments, a case has been described in which a feature amount is extracted from an image of the face of the driver 60. The present invention is not limited to this, but biological information, such as the pulse rate and breathing interval of the driver may be used as a feature amount. As a feature amount, an acceleration in a direction orthogonal to the travelling direction of a vehicle and/or the like may be used.</p><p id="p0090" num="0090">In the above embodiments, a verification value CL is calculated on the basis of the expression (5). This expression (5) is one example, and a general expression for calculating a verification value CL is represented by, for example, the following expression (6). k is a constant.</p><p id="p0091" num="0091">Expression 6]<br/>
<maths id="math0006" num="(6)"><math display="block"><msub><mi>CL</mi><mi mathvariant="normal">N</mi></msub><mo>=</mo><mi>sign</mi><mo>⁢</mo><mfenced separators=""><mfenced open="|" close="|" separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>α</mi><mi mathvariant="normal">N</mi></msub></mfenced><mo>+</mo><mfenced open="|" close="|" separators=""><mi>AVG</mi><mo>⁢</mo><msub><mi>β</mi><mi mathvariant="normal">N</mi></msub></mfenced><mo>-</mo><mi mathvariant="normal">k</mi></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="82" he="11" img-content="math" img-format="tif"/></maths></p><p id="p0092" num="0092">In the above embodiments, a case has been described in which the estimation device 30 has two identifiers 32a, 32b. The present invention is not limited to this, but the estimation device 30 may include more than or equal to three identifiers.</p><p id="p0093" num="0093">Function of the estimation device 30 according to each of the above embodiments is able to be realized by a dedicated hardware or a common computer system.</p><p id="p0094" num="0094">In the second embodiment, a program stored in the auxiliary storage 30c of<!-- EPO <DP n="19"> --> the estimation device 30 may be stored and distributed in a computer-readable recording medium such as a flexible disk, a CD-ROM (Compact Disk Read-Only Memory), a DVD (Digital Versatile Disk), a MO (Magneto-Optical disk), and by installing the program to a computer, a device to perform the above processing may be configured.</p><p id="p0095" num="0095">A program may be stored in a disk device or the like that a predetermined server device on a communication network such as the Internet has, and may be downloaded to a computer, for example, by being superimposed on a carrier wave.</p><p id="p0096" num="0096">A program may be started and executed while being transferred via a communication network.</p><p id="p0097" num="0097">All or part of a program may be executed on a server device, and the above image processing may be performed while information on the processing being transmitted and received via a communication network.</p><p id="p0098" num="0098">If part of the above function is realized by an OS (Operating System) or if the above function is realized by an OS and an application, only the part other than the OS may be stored and distributed in a medium and downloaded to a computer.</p><p id="p0099" num="0099">Various embodiments and variations of the present invention are possible without departing from the extensive spirit and scope of the present invention. The above embodiments are for explaining the present invention, not for limiting the scope of the present invention.</p><p id="p0100" num="0100">This application is based on Japanese Patent Application No. <patcit id="pcit0003" dnum="JP2011047028A"><text>2011-47028 filed on March 3, 2011</text></patcit>. The entire specification, claims and drawings of Japanese Patent Application No. <patcit id="pcit0004" dnum="JP2011047028A"><text>2011-47028</text></patcit> shall be incorporated herein by reference.</p><heading id="h0013">Industrial Applicability</heading><p id="p0101" num="0101">A driver's state estimation device, a state estimation method and a program according to the present invention are suitable for estimating the state of the driver.</p><heading id="h0014">Reference Signs List</heading><p id="p0102" num="0102"><dl id="dl0001" compact="compact"><dt>10</dt><dd>State estimation system<!-- EPO <DP n="20"> --></dd><dt>20</dt><dd>Imaging device</dd><dt>30</dt><dd>Estimation device</dd><dt>30a</dt><dd>CPU</dd><dt>30b</dt><dd>Main storage</dd><dt>30c</dt><dd>Auxiliary storage</dd><dt>30d</dt><dd>Display</dd><dt>30e</dt><dd>Input device</dd><dt>30f</dt><dd>Interface</dd><dt>30g</dt><dd>System bus</dd><dt>31</dt><dd>Feature amount outputter</dd><dt>32a</dt><dd>Identifier</dd><dt>32b</dt><dd>Identifier</dd><dt>33</dt><dd>Estimate value calculator</dd><dt>34</dt><dd>State estimator</dd><dt>35</dt><dd>Verifier</dd><dt>36</dt><dd>Estimation result outputter</dd><dt>60</dt><dd>Driver</dd><dt>61</dt><dd>Seat</dd><dt>α, β</dt><dd>Identification results</dd><dt>D34, D45N</dt><dd>Estimation results</dd><dt>RST</dt><dd>Estimation result</dd></dl></p></description><claims mxw-id="PCLM56982015" lang="EN" load-source="patent-office"><!-- EPO <DP n="21"> --><claim id="c-en-0001" num="0001"><claim-text>A state estimation device to estimate the state of a driver, the state estimation device comprising:
<claim-text>first identification means to identify, of a first group and a second group, the group the state of the driver belongs to using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver</claim-text>
<claim-text>second identification means to identify, of a third group and a forth group, the group the state of the driver belongs to using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver</claim-text>
<claim-text>estimation means to estimate the class to which the state of the driver belongs on the basis of the identification result of the first identification means and the identification result of the second identification means;</claim-text>
<claim-text>verification means to verify an estimation result of the estimation means;<br/>
and</claim-text>
<claim-text>output means to output an estimation result that corresponds to a verification result of the verification means.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The state estimation device according to Claim 1, wherein<br/>
the verification means<br/>
performs an operation represented by the following expression where the absolute value of the identification result of the first identification means is A, the absolute value of the identification result of the second identification means is B, and the constant is k thereby to calculate the verification value CL; and<br/>
the output means outputs an estimation result corresponding to the verification value CL.<br/>
[Expression 16]<br/>
<!-- EPO <DP n="22"> --><maths id="math0007" num=""><math display="block"><mi>CL</mi><mo>=</mo><mi>sign</mi><mo>⁢</mo><mfenced separators=""><mi mathvariant="normal">A</mi><mo>+</mo><mi mathvariant="normal">B</mi><mo>-</mo><mi mathvariant="normal">k</mi></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="40" he="9" img-content="math" img-format="tif"/></maths></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The state estimation device according to Claim 1 or 2, wherein the output result of the first identification means is the average value of output values of the first identification means, the output result of the second identification means is the average value of output values of the second identification means.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The state estimation device according to Claim 3, wherein the output result of the first identification means and the output result of the second identification means both are average values of output values outputted for 45 seconds.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The state estimation device according to any one of Claims 1 to 4, wherein if the class indicated by the first estimation result and the class indicated by the second estimation result outputted before the first estimation result are not continuous, the output means outputs the second estimation result.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The state estimation device according to any one of Claims 1 to 5, wherein the first identification means and the second identification means are AdaBoost-learned identificators.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A state estimation method to estimate the state of a driver, the state estimation method comprising:
<claim-text>a first identification step to identify, of a first group and a second group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</claim-text>
<claim-text>a second identification step to identify, of a third group and a fourth group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</claim-text>
<claim-text>an estimation step to estimate the class to which the state of the driver belongs on the basis of the identification result at the first identification step and the<!-- EPO <DP n="23"> --> identification result at the second identification step;</claim-text>
<claim-text>a verification step to verify a result of the estimation; and</claim-text>
<claim-text>an output step to output an estimation result corresponding to the result of the verification.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A program causing a computer to perform:
<claim-text>a first identification procedure to identify, of a first group and a second group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the first group and the second group having a plurality of classes defined as based on a degree of the activity of the driver;</claim-text>
<claim-text>a second identification procedure to identify, of a third group and a fourth group, the group to which the state of the driver belongs using a feature amount about the driver as an input value, each of the third group and the fourth group having a plurality of classes defined as based on a degree of the activity of the driver;</claim-text>
<claim-text>an estimation procedure to estimate the class to which the driver belongs on the basis of the identification result of the first identification procedure and the identification result of the second identification procedure;</claim-text>
<claim-text>a verification procedure to verify the result of the estimation; and</claim-text>
<claim-text>an output procedure to output the estimation result corresponding to the result of the verification.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16670410" load-source="patent-office"><!-- EPO <DP n="24"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="144" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="142" he="146" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="87" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="164" he="148" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="142" he="193" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="147" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
