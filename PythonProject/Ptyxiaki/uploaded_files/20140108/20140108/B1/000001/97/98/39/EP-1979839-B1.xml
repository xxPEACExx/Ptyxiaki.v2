<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-1979839-B1" country="EP" doc-number="1979839" kind="B1" date="20140108" family-id="37944259" file-reference-id="311113" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146588745" ucid="EP-1979839-B1"><document-id><country>EP</country><doc-number>1979839</doc-number><kind>B1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-07705050-A" is-representative="NO"><document-id mxw-id="PAPP154850937" load-source="docdb" format="epo"><country>EP</country><doc-number>07705050</doc-number><kind>A</kind><date>20070129</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220147456" load-source="docdb" format="original"><country>EP</country><doc-number>07705050.8</doc-number><date>20070129</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140557128" ucid="GB-0601939-A" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>0601939</doc-number><kind>A</kind><date>20060131</date></document-id></priority-claim><priority-claim mxw-id="PPC140553216" ucid="GB-2007000283-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>2007000283</doc-number><kind>W</kind><date>20070129</date></document-id></priority-claim><priority-claim mxw-id="PPC140557205" ucid="US-77240906-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>77240906</doc-number><kind>P</kind><date>20060210</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130730</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989326519" load-source="docdb">G06F  11/34        20060101ALI20130618BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989326520" load-source="docdb">G06F  17/30        20060101AFI20130618BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989326521" load-source="docdb">H04L  29/08        20060101ALI20130618BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2133851160" load-source="docdb" scheme="CPC">G06F  17/3089      20130101 FI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133852130" load-source="docdb" scheme="CPC">H04L  67/146       20130101 LI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133859812" load-source="docdb" scheme="CPC">H04L  67/02        20130101 LI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133860354" load-source="docdb" scheme="CPC">H04L  67/14        20130101 LI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133862360" load-source="docdb" scheme="CPC">G06F  11/3495      20130101 LI20141126BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2133862434" load-source="docdb" scheme="CPC">H04L  67/2814      20130101 LI20141126BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132370868" lang="DE" load-source="patent-office">WEBSITE-ÜBERWACHUNG UND COOKIE-EINSTELLUNG</invention-title><invention-title mxw-id="PT132370869" lang="EN" load-source="patent-office">WEBSITE MONITORING AND COOKIE SETTING</invention-title><invention-title mxw-id="PT132370870" lang="FR" load-source="patent-office">SURVEILLANCE DE SITE WEB ET RÉGLAGE DE MOUCHARD ÉLECTRONIQUE</invention-title><citations><patent-citations><patcit mxw-id="PCIT370592206" load-source="docdb" ucid="WO-2000075827-A1"><document-id format="epo"><country>WO</country><doc-number>2000075827</doc-number><kind>A1</kind><date>20001214</date></document-id><sources><source name="EXA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT370585764" load-source="docdb" ucid="WO-2001035259-A2"><document-id format="epo"><country>WO</country><doc-number>2001035259</doc-number><kind>A2</kind><date>20010517</date></document-id><sources><source name="EXA" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>M. DOYLE: "JavaScript and Cookies", WEB DEVELOPMENT &gt; JAVASCRIPT, 31 October 2002 (2002-10-31), pages 1 - 7, Retrieved from the Internet &lt;URL:http://www.elated.com/articles/javascript-and-cookies&gt; [retrieved on 20110919]</text><sources><source mxw-id="PNPL66918912" load-source="docdb" name="EXA"/></sources></nplcit><nplcit><text>POUTTU-CLARKE M ET AL: "Cross Domain Cookie Provider", INTERNET CITATION, 19 January 2005 (2005-01-19), XP002405757, Retrieved from the Internet &lt;URL:http://www.theserverside.com/patterns/thread.tss?thread_id=31258&gt; [retrieved on 20061106]</text><sources><source mxw-id="PNPL66918913" load-source="docdb" name="EXA"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR919543495" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SPEED TRAP COM LTD</last-name><address><country>GB</country></address></addressbook></applicant><applicant mxw-id="PPAR919511143" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SPEED-TRAP.COM LTD.</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919522745" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GOLDSPINK LINCOLN MARK VAUGHAN</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919516945" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GOLDSPINK, LINCOLN, MARK, VAUGHAN</last-name></addressbook></inventor><inventor mxw-id="PPAR919024532" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>GOLDSPINK, LINCOLN, MARK, VAUGHAN</last-name><address><street>6 Tornay Grove North Baddesley Southampton</street><city>Hampshire SO52 9NY</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919529672" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>DUCKETT MALCOM JOHN</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919522774" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>DUCKETT, MALCOM, JOHN</last-name></addressbook></inventor><inventor mxw-id="PPAR919024531" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>DUCKETT, MALCOM, JOHN</last-name><address><street>Medstead Lodge Wield Road Medstead</street><city>Hampshire GU34 5LY</city><country>GB</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR919024534" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Speed-trap.com Ltd.</last-name><iid>100225743</iid><address><street>Suite 15-18, Venture West, New Greenham Park</street><city>Newbury, Berkshire RG19 6HN</city><country>GB</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR919024533" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Faulkner, Thomas John</last-name><suffix>et al</suffix><iid>100045882</iid><address><street>Cleveland 10 Fetter Lane</street><city>London EC4A 1BR</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="GB-2007000283-W"><document-id><country>GB</country><doc-number>2007000283</doc-number><kind>W</kind><date>20070129</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2007088331-A1"><document-id><country>WO</country><doc-number>2007088331</doc-number><kind>A1</kind><date>20070809</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549805280" load-source="docdb">AT</country><country mxw-id="DS549883519" load-source="docdb">BE</country><country mxw-id="DS549880026" load-source="docdb">BG</country><country mxw-id="DS549873145" load-source="docdb">CH</country><country mxw-id="DS549925263" load-source="docdb">CY</country><country mxw-id="DS549805281" load-source="docdb">CZ</country><country mxw-id="DS549896093" load-source="docdb">DE</country><country mxw-id="DS549925264" load-source="docdb">DK</country><country mxw-id="DS549925265" load-source="docdb">EE</country><country mxw-id="DS549789804" load-source="docdb">ES</country><country mxw-id="DS549880027" load-source="docdb">FI</country><country mxw-id="DS549880028" load-source="docdb">FR</country><country mxw-id="DS549883520" load-source="docdb">GB</country><country mxw-id="DS549925266" load-source="docdb">GR</country><country mxw-id="DS549805282" load-source="docdb">HU</country><country mxw-id="DS549873150" load-source="docdb">IE</country><country mxw-id="DS549883521" load-source="docdb">IS</country><country mxw-id="DS549880029" load-source="docdb">IT</country><country mxw-id="DS549925267" load-source="docdb">LI</country><country mxw-id="DS549896094" load-source="docdb">LT</country><country mxw-id="DS549805283" load-source="docdb">LU</country><country mxw-id="DS549896095" load-source="docdb">LV</country><country mxw-id="DS549896096" load-source="docdb">MC</country><country mxw-id="DS549789817" load-source="docdb">NL</country><country mxw-id="DS549789818" load-source="docdb">PL</country><country mxw-id="DS549873151" load-source="docdb">PT</country><country mxw-id="DS549789819" load-source="docdb">RO</country><country mxw-id="DS549789820" load-source="docdb">SE</country><country mxw-id="DS549873152" load-source="docdb">SI</country><country mxw-id="DS549788242" load-source="docdb">SK</country><country mxw-id="DS549925268" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><description mxw-id="PDES63961163" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This invention relates to website monitoring and the setting of cookies on client devices.</p><p id="p0002" num="0002">The invention as it relates to the setting of cookies on client devices is of use in website monitoring, but can also have other uses.</p><p id="p0003" num="0003">Website monitoring or web analytics in itself is now fairly commonplace. Website monitoring/website analytic is used to monitor the performance and use of an organisation's website to help understand problems and ultimately improve the effectiveness of the site by improving "metrics" such as conversion rates and user experience, or preventing or detecting undesirable behaviour such as fraud.</p><p id="p0004" num="0004">What is now generally considered to be the method of choice for such monitoring is a technique which may be described as involving "client side page tagging". These techniques in themselves are well understood and one such technique has been used for some time by the Applicants. An early version of this technique is explained in detail in the Applicant's earlier applications <patcit id="pcit0001" dnum="WO0169412A"><text>WO01/69412</text></patcit> and <patcit id="pcit0002" dnum="WO0169386A"><text>WO01/69386</text></patcit>. In such techniques it is now typical to put some script (for example JavaScript or Visual Basic Script) within a selection or each and every page of a website. As each page is visited this script causes there to be communication with a server responsible for the collection of events describing users journeys/interactions with the website and managing any necessary interaction with the client.<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">This approach however means that scripts running in one page during a visitor's use of a monitored site will have no way of communicating with scripts running in previous or subsequent pages viewed during the visit. This necessitates a mechanism that can link the data from such a sequence of pages into one "session". The maintenance of this "session continuity" has been commonly achieved via the use of cookies, where the cookie is used to store a session ID. Cookies are only accessible within the domain in which they are set.</p><p id="p0006" num="0006">Here and throughout the specification, the expression "domain" is used in the sense used in relation to the Internet and "domain names". Thus a domain is defined by a internet address xxx.com or xxx.co.uk and so on - i.e. by a top level domain name.</p><p id="p0007" num="0007">Cookies can be set or read by scripts running in the client browser, or by a web server communicating with the client.</p><p id="p0008" num="0008">Two types of cookies exist, these being first and third party cookies.</p><p id="p0009" num="0009">First party cookies are cookies that have been set within the domain of the page being viewed. This can be achieved by using either scripts executing within the page or by the webserver(s) that are in the domain of the current page through the use of HTTP "set cookie" headers.<!-- EPO <DP n="3"> --></p><p id="p0010" num="0010">Third party cookies are those that are set through the use of the HTTP "set cookie" headers by webserver(s) that are not in the domain of the current page (these are third party webservers).</p><p id="p0011" num="0011">Script executing in the current page cannot read or set third party cookies. Any webserver communicating with a client will only be sent cookies currently known to the browser that are within the webserver's domain. This behaviour is part of the browser security model.</p><p id="p0012" num="0012">Hence third or first party cookies can be used to maintain session continuity. However, only third party cookies are able to maintain session continuity between domains in a direct way. Due to security concerns, third party cookies are typically blocked by modem clients. This means that cross domain session tracking using third party cookies is ineffective.</p><p id="p0013" num="0013">Without third party cookies therefore, accurate cross domain session tracking has been impossible.</p><p id="p0014" num="0014">Whilst there are circumstances where the use of third party cookies may be illegitimate or undesirable there can be circumstances where maintaining session continuity across domains is legitimate and desirable. There are situations where this may be useful to the user and/or to an organisation which maintains websites in several different domains.<!-- EPO <DP n="4"> --></p><p id="p0015" num="0015">It is fairly typical for large organisations to maintain a number of websites which reside in different domains. There may, for example, be a different website for different areas of the business or a different website for each country (eg a .com site, a .co.uk site and so on). Thus, there may be a single enterprise with websites in different domains and the current technologies as outlined above are incapable in practical terms of allowing website monitoring across these different websites as they are visited by a user. Thus, for example, session continuity might be lost just as the user is moving to a point where he is about to make a purchase or a booking if that part of the operation is handled by a website running within a different domain.</p><p id="p0016" num="0016">Thus, an enterprise can be left in a situation where it has monitoring information in respect of each of its websites and could well know that many of these individual "partial sessions" in respect of the separate websites will actually relate to a single user and a single browser instance navigating across their various websites, but yet be unable to follow the whole interaction.</p><p id="p0017" num="0017">Brute force methods for trying to re-connect such partial sessions to give the overall picture are in reality complex, costly and unreliable. Such techniques generally only provide a best guess as to which partial sessions snap together.</p><p id="p0018" num="0018">Other methods exist to maintain session context across domains. Many of these are geared towards providing a single log-in across multiple domains. These<!-- EPO <DP n="5"> --> typically use a series of requests and redirects to achieve the desired results. Such techniques are complex to implement and maintain.</p><p id="p0019" num="0019">Other possible solutions may use a customer database to maintain context. However, this approach causes problems because the customer ID will not necessarily be known at the start of a session and therefore initial phases of a visit cannot be related to later phases on other domains.</p><p id="p0020" num="0020">The Applicants had an objective to alleviate this problem in maintaining session context particularly in the field of website monitoring, but it is considered that the resulting techniques can have a broader application than this.</p><p id="p0021" num="0021">The Applicants developed an initial system for use in maintaining session context across domains (amongst other functions) using first party cookies in which use is made of the fact that when an http message is sent by a page within a browser, a header of that message can include a first party cookie in the domain of the receiver of the message even if the domain of the receiver is different than that of the page being browsed. That cookie will not be visible to the page/browser at that point because it is in the "wrong" domain, but will be visible to the receiver in the "correct" domain. Now, if that first party cookie was set while browsing a monitored page in the domain of the receiver and includes a session ID it becomes possible to get that session ID to cross into the new domain. This is achieved by the receiver of the http message sending code back to the browser to instruct it to<!-- EPO <DP n="6"> --> generate a new first party cookie (in the new domain) which includes the same session ID.</p><p id="p0022" num="0022">This technique (which can be used for purposes other than just replicating session ID's and is subject of another patent application of the applicant's filed on the same day as this application) works well in some circumstances, but has a limitation. It is set up to work by each page, in a set of pages being monitored, being arranged to report to (send the above type of http message to) a common server in what might be called a home domain, or portal domain. This means that cross domain monitoring can only start when that home domain is visited (and can continue thereafter) - it is at that point that a first party cookie in "the domain of the receiver" will be generated.</p><p id="p0023" num="0023">Modifying the technique so that it can efficiently, practically, and accurately retain session context (or otherwise propagate cookies/cookie contents) across domains, regardless of the starting point or "landing page", within a predetermined set of domains, of a browsing session is not trivial. The present invention aims to allow such functionality.</p><p id="p0024" num="0024">15 seconds: Sharing Cookies Across Domains, W Berry XP002405758 describes techniques for getting information in cookies to be transferred across domains and uses an elaborate series of re-directs at the servers to achieve this. Information from the cookie in one domain is coded into the redirects to enable this to be read in another domain.<!-- EPO <DP n="7"> --></p><p id="p0025" num="0025">According to a first aspect of the present invention there is provided a method for setting a first party cookie, in a first domain, on a client device comprising the steps of:
<ul><li>receiving at a first server, an http message including referrer information from a browser running on the client device, wherein the browser includes a web page that is loaded in the first domain, and wherein the web page includes code that, when executed, instructs the browser to send the http message to the first server;</li><li>checking the referrer information in the http message to determine if the referrer is within a domain amongst a predetermined set of domains, and if the referrer is within a domain within the predetermined set of domains, sending a message to the browser instructing the browser to send an http message including a first party cookie in the domain of the referrer to a second server, the second server being in the same domain as the referrer, wherein the domain of the referrer is different from the first domain;</li><li>receiving at the second server, the http message from the browser and extracting data from the first party cookie, within the domain of the referrer, present in the header of the http message;</li><li>determining data which is to be included in a first party cookie, within the first domain, resident on the client device in dependence on the data extracted from the cookie within the domain of the referrer; and<!-- EPO <DP n="8"> --></li><li>sending a message to the browser in which the web page in the first domain is loaded, the message including code which when executed by the client device will cause setting of a first party cookie in the first domain, including the data determined in the determining step.</li></ul></p><p id="p0026" num="0026">The first server is located in the first domain.</p><p id="p0027" num="0027">The method may comprise the further step, before the checking referrer information step, of checking for an absence of session context between the browser and the first server.</p><p id="p0028" num="0028">The active page may be supplied to the client device from a page server. The first server may be separate from but in the same domain as a page server.<!-- EPO <DP n="9"> --></p><p id="p0029" num="0029">The cookie may be a session cookie or a permanent cookie.</p><p id="p0030" num="0030">The step of extracting data from the cookie present in the header of the http message may comprise the step of extracting a session ID from the cookie. The message sent to the active page may include an instruction to generate a cookie including a session ID determined in dependence on the extracted session ID. The instruction may be an instruction to generate a cookie including a session ID that is the same as the extracted session ID.</p><p id="p0031" num="0031">The method may comprise the further step of receiving further messages, at the first server, from the same page and/or another page within the browser that include data derived from the generated cookie. The further messages may include a session ID derived from the generated cookie. The data derived from the generated cookie may comprise the generated cookie itself.</p><p id="p0032" num="0032">The method may comprise the further step of the first server receiving a plurality of messages and determining whether the messages are from the same browser session in dependence on the data, derived from the cookie, present in each message.</p><p id="p0033" num="0033">The method may comprise the further step of the first server receiving a plurality of messages and determining whether the messages are from the same browser session in dependence on the session IDs present in each message.<!-- EPO <DP n="10"> --></p><p id="p0034" num="0034">There may be at least one collection server for collecting monitoring information concerning website interactions and/or performance. The method may be a website monitoring method. The method may comprise the step of receiving, from the browser running on the client device, monitoring information concerning webpage interactions and/or performance. The collection server may be separate from the first server. Preferably, the first server comprises a collection server for collecting monitoring information concerning webpage interactions and/or performance. Where the generated cookie, in the first domain, includes a session ID which is based on the data extracted from the cookie, in the domain of the referrer, present in the header of the http message, this can help to tie together monitoring information from a session where a number of different websites in different domains are visited.</p><p id="p0035" num="0035">There may be a set of servers comprising at least the first server and the second server. Each server in the set may be in a different domain within the predetermined set of domains. Each server in the set may be arranged to selectively carry out steps corresponding to each of the steps defined in the first aspect of the invention. This can allow a cookie to be set within the browser in each respective domain in response to a page from that domain being loaded into the browser. As the user/browser moves from domain to domain, the present technique allows the content of the cookie from the domain of the referrer to be accessed and used to set a cookie in the current domain. This means, for example, that a session ID may be propagated across domains - the present technique<!-- EPO <DP n="11"> --> allows recovery of that ID from the domain of the referrer and the setting of a cookie including that session ID in the current domain.</p><p id="p0036" num="0036">Preferably there is a set of collection servers corresponding to the set of servers.<br/>
Each of the collection servers is preferably in the same domain as a respective one of the servers. Preferably there is a set of page servers corresponding to the set of servers. Each of the page servers is preferably in the same domain as a respective one of the servers.</p><p id="p0037" num="0037">The method may comprise the step of each server in the set of servers, receiving an http message from a respective active page within a browser running on the client device, each respective page being in the same domain as the respective server.</p><p id="p0038" num="0038">The method may comprise the step of each collection server in the set of collection servers, receiving, from the browser running on the client device, monitoring information concerning webpage interactions and/or performance, in respect of web pages in the same domain as the respective collection server.</p><p id="p0039" num="0039">After the steps defined in the first aspect of the invention, the method may comprise the steps of:
<ul><li>receiving at a third server, an http message from a browser running on the client device, wherein the browser includes a web page that is loaded in a third domain;<!-- EPO <DP n="12"> --></li><li>checking the referrer information in the http message and, on determining that the referrer is in the first domain, sending a message to the browser instructing the browser to send an http message to the first server, the http message including in its header a first party cookie in the first domain;</li><li>receiving at the first server, the http message from the browser and extracting data from the first party cookie, within the first domain, present in the header of the http message;</li><li>determining data which is to be included in a first party cookie, within the third domain, resident on the client device in dependence on the data extracted from the cookie, within first domain; and</li><li>sending a message to the browser including code which when executed by the client device will cause setting of a first party cookie in the third domain, including the data determined in the determining step.</li></ul></p><p id="p0040" num="0040">The above is a specific example of moving on from the first domain to a third domain (ie not the "domain of the referrer" as mentioned in the first aspect of the invention). It will be clear that, as explained above, this process can step on again to other domains, in the predetermined set of domains and having web pages that have been appropriately set up. It will also be noted that because of the order in which the domains are mentioned in the first aspect of the invention, there is a seemingly illogical numbering if things are considered chronologically. The navigation is from the "domain of referrer" to the "first domain" to the "third domain". In the specific description further below the navigation is described in a more numerically logical way from a chronological point of view, ie from a first domain (A), to a second (B), to a third (C).<!-- EPO <DP n="13"> --></p><p id="p0041" num="0041">The message from the active page may comprise a request for a page component. The message from the active page may comprise an http request.</p><p id="p0042" num="0042">The message to the active page may comprise a portion of script, for example JavaScript or Visual Basic Script. The portion of script may be arranged to execute within the page to generate the cookie including the data determined in the determining step.</p><p id="p0043" num="0043">In general terms in this specification the client device may be any device capable of supporting a browser or other program utilising http protocols. In general terms in this specification a browser may be any module capable of allowing the browsing of pages that can generate and receive messages, in particular which can send messages including http headers. As will be clear, in one example, the client device may comprise a PC running conventional browser software such as MS Internet Explorer (RTM), but in other examples the client device might be a mobile telephone or other such device and may include an embedded browser.</p><p id="p0044" num="0044">According to a second aspect of the present invention there is provided a system for causing setting of a first party cookie, in a first domain, on a client device, the apparatus comprising a first server and a second server,</p><p id="p0045" num="0045">the first server being arranged under the control of software to:
<ul><li>receive an http message including referrer information from a browser running on the client device, wherein the browser includes a web page that is<!-- EPO <DP n="14"> --> loaded in the first domain, and wherein the web page includes code that, when executed, instructs the browser to send the http message to the first server;</li><li>check the referrer information in the http message to determine if the referrer is within a domain amongst a predetermined set of domains, and if the referrer is within a domain within the predetermined set of domains, send a message to the browser instructing the browser to send an http message including a first party cookie in the domain of the referrer to a second server, the second server being in the same domain as the referrer, wherein the domain of the referrer is different from the first domain;</li></ul>
the second server being arranged under the control of software to:
<ul><li>receive the http message from the browser and extract data from the first party cookie, within the domain of the referrer, present in the header of the http message;</li><li>determine data which is to be included in a first party cookie, within the first domain, resident on the client device, in dependence on the data extracted from the cookie within the domain of the referrer; and</li><li>send a message to the browser in which the web page in the first domain is loaded, the message including code which when executed by the client device will cause setting of a first party cookie in the first domain, including the data determined in the determining step.</li></ul><!-- EPO <DP n="15"> --></p><p id="p0046" num="0046">Where website monitoring is undertaken, it will be appreciated that monitoring activity may have taken place before the steps defined in the above aspects of the invention. In particular there may have been monitoring of activity in the referrer's domain. The present techniques allow this activity to be tied to that in the "first" domain as well as that in subsequent domains (where the websites visited are appropriately set up and in the "predetermined set of domains").</p><p id="p0047" num="0047">According to a third aspect of the present invention there is provided A method for setting a first party cookie, in a first domain, on a client device comprising the steps of:
<ul><li>loading a web page in a browser of the client device, the web page being in the first domain and including instructions for an http message including referrer information to be sent from the browser to a first server;</li><li>sending the http message, including the referrer information, from the browser to the first server;</li><li>receiving a message in the browser, from the first server, instructing the browser to send an http message including a first party cookie within the domain of the referrer in the header of the http message to a second server, the second server being in the same domain as the referrer, wherein the domain of the referrer is different from the first domain;</li><li>sending from the browser, the http message to the second server including the first party cookie, within the domain of the referrer, in the header of the http message; receiving a message, from the second server, at the browser in which the page in the first domain is loaded, wherein the message includes code which when<!-- EPO <DP n="16"> --> executed by the browser will cause setting of a first party cookie in the first domain, including the data determined in dependence on the content of the first party cookie in the domain of the referrer as received by the second server; and</li><li>executing the code within the browser running on the client device to cause the generation of a first party cookie, in the first domain.</li></ul></p><p id="p0048" num="0048">According to a fourth aspect of the present invention there is provided a client device arranged under the control of software to:
<ul><li>load a web page in a browser of the client device, the web page being in the first domain and including instructions for an http message including referrer information to be sent from the browser to a first server;</li><li>send the http message, including the referrer information, from the browser to the first server;</li><li>receive a message in the browser, from the first server, instructing the browser to send an http message including a first party cookie within the domain of the referrer in the header of the http message to a second server, the second server being in the same domain as the referrer, wherein the domain of the referrer is different from the first domain;</li><li>send from the browser, the http message to the second server including the first party cookie, within the domain of the referrer, in the header of the http message; receive a message, from the second server, at the browser in which the page in the first domain is loaded, wherein the message includes code which when executed by the browser will cause setting of a first party cookie in the first domain,<!-- EPO <DP n="17"> --> including the data determined in dependence on the content of the first party cookie in the domain of the referrer as received by the second server; and execute the code within the browser running on the client device to cause the generation of a first party cookie, in the first domain.</li></ul></p><p id="p0049" num="0049">In general terms each of the optional features defined above in relation to the first aspect of the invention are equally applicable to the other above aspects of the invention, with the necessary changes in wording and where context allows. Thus, it will be understood that the apparatus, systems, and computers defined above may be arranged under the control of software to carry out the optional steps defined above. Similarly they may comprise modules for carrying out the appropriate actions. Moreover, where a step is carried out by the server there will often be a corresponding step carried out by the client and clearly therefore the method operated by the client can include such steps and the client can be arranged/have modules to carry those steps out.</p><p id="p0050" num="0050">These optional features are not restated multiple times purely in the interests of brevity.<!-- EPO <DP n="18"> --></p><p id="p0051" num="0051">According to a fifth aspect of the present invention there is provided a computer program comprising code portions which when loaded and run on a computer cause the computer to carry out any one of the methods defined above.</p><p id="p0052" num="0052">Embodiments of the present invention will now be described by way of example only, with reference to the accompanying drawings in which:
<ul><li><figref idrefs="f0001">Figure 1</figref> schematically shows architecture that may be used in a website monitoring system;</li><li><figref idrefs="f0002 f0003">Figure 2</figref> schematically shows a sequence diagram of client/server interactions in the operation of part of the website monitoring system;</li><li><figref idrefs="f0004">Figure 3</figref> is a flow chart showing the process carried out at a pair of cookie control servers of the website monitoring system; and<!-- EPO <DP n="19"> --></li><li><figref idrefs="f0005">Figure 4</figref> shows a flow chart showing the process carried out at a client device when interacting with the cookie control servers.</li></ul></p><p id="p0053" num="0053"><figref idrefs="f0001">Figure 1</figref> schematically shows architecture that may be used in a website monitoring system which uses client side page tagging to generate and collect a series of events describing a user's journey/interactions with a number of websites.</p><p id="p0054" num="0054">The architecture comprises a first web server 1A in domain A (123.com), a second web server 1B in domain B (123.co.uk) and a third web server 1C in domain C (123.eu). There is also a first collection server 4A located in the same domain as the first web server, i.e. in domain A as well as a second and third collection servers 4B and 4C, each in the same domain as a respective one of the web servers, 1B, 1C. In this embodiment, each collection server 4A, 4B, 4C also comprises a respective cookie control server 5A, 5B, 5C which in other embodiments might be separate from the collection server 4A, 4B, 4C. The collection servers 4A, 4B, 4C, in particular the cookie control servers 5A, 5B, 5C are inter connected with one another.</p><p id="p0055" num="0055">A client device 6 running a browser 7 is connectable to each of the web servers 1A, 1B, 1C and collection servers 4A, 4B, 4C via a network for example via the internet. In this embodiment the client device 6 comprises a conventional PC with conventional components allowing the browser 7 to be run on the computer 6 and allowing the browser 7 to receive web pages from the web servers 1A, 1B, 1C<!-- EPO <DP n="20"> --> (via the use of HTTP messages) and to send and receive http messages to and from the collection servers 4A, 4B, 4C.</p><p id="p0056" num="0056">A user may use the client device 6 to browse web pages supplied from the web servers 1A, 1B, 1C, but also may, of course, browse to any other web pages which he or she chooses. In the present example, the three web servers, 1A, 1B, 1C all belong to the same enterprise, but yet are in different domains. In particular the first web server 1A is in the domain A (which is 123.com) whereas the second web server 1B is in the domain B (which is 123.co.uk) and the third web server 1C is in the domain C (which is 123.eu).</p><p id="p0057" num="0057">In the current example we are interested in being able to monitor the web site performance of web sites hosted by each of these three servers 1A, 1B, 1C and in particular this is to be done by collecting, at the collection servers 4A, 4B, 4C information concerning the user's interactions with web sites hosted on each of the web servers 1A, 1B, 1C when using the client device 6. Moreover, the present invention is directed at allowing the user's interactions with websites from each of the web servers 1A, 1B, 1C to be associated together and treated as a single session for the purposes of analysing the monitoring information.</p><p id="p0058" num="0058">The actual techniques used for monitoring the user's interactions with each of the websites and collecting this information at the collection servers 4A, 4B, 4C as well as for analysing this information and so on are not of particular interest in the<!-- EPO <DP n="21"> --> present specification. There are a number of conventional techniques which may be used in that part of the process.</p><p id="p0059" num="0059">What is of interest in the present specification, is the process used for tying together information collected by the collection servers 4A, 4B, 4C concerning the user's interactions with websites hosted on the different web servers 1A, 1B, 1C and therefore located in different domains.</p><p id="p0060" num="0060">Use is made of first party cookies to retain session continuity; that is to say to allow interactions with websites on each of the web servers 1A, 1B, 1C to be associated with one another.</p><p id="p0061" num="0061">It will be appreciated that the mention of three different web servers and three different web sites is completely arbitrary and the present technique can work with practically any number of suitably set up web sites. Similarly, of course, there may be almost any number of users interacting with the monitored sites using respective client devices 6.</p><p id="p0062" num="0062">When the user is browsing web sites using the client device 6, he may visit any number of web sites in any order, but we are interested in the mechanisms which can occur when a user browses one or more pages from a site which has been set up to function as part of the present technique, for example, one from one or more of the first to third webservers 1A, 1B, 1C.<!-- EPO <DP n="22"> --></p><p id="p0063" num="0063">If the user visits web pages which are not appropriately set up, then monitoring of interactions with those web pages will not be carried out. However, as and when the user browses to a page which is appropriately set up, and in a domain already visited, monitoring can be re-commenced and associated with the monitoring which took place earlier provided it is still within the same browser session. This limitation to the interactions only being tied up if taking place within the same browser session comes about because the present embodiment makes use of first party session cookies.</p><p id="p0064" num="0064">In an alternative, permanent (as opposed to session) cookies could be used. This could allow session continuity over extended periods, i.e. not limited to a single browser session, provided that the appropriate permanent cookie or cookies remain resident in a particular browser.</p><p id="p0065" num="0065"><figref idrefs="f0002 f0003">Figure 2</figref> is a sequence diagram showing the client/server interactions which take place as the user uses the client device 6 to first of all visit a web site provided on the first web server 1A and hence in the same domain as the first collection server 4A and then subsequently visits web sites in different domains, covered by the system, in this case those in domains B and C provided by the second and third web servers 1 B and 1C and hence in the same domains as the second and third collection servers 4B, 4C.</p><p id="p0066" num="0066">Referring now to <figref idrefs="f0002 f0003">Figure 2</figref> the first stage in this process, step ST1, occurs with the client device 6 requesting a page 8 from the first web server 1A and loading it,<!-- EPO <DP n="23"> --> step ST2, into its browser 7. In <figref idrefs="f0002 f0003">Figure 2</figref> the passage of time is shown downwards, so this initial situation is represented at the top of the drawing.</p><p id="p0067" num="0067">The received page 8 contains appropriate code such that an initial request for a page component can be sent to the first collection server 4A and communication with the first collection server 4A facilitated. This code may comprise an "include" statement. The page 8 includes this code because it has been "client side tagged" in the way which is now conventionally used when monitoring the performance of websites. Whilst this client side tagging technique and the monitoring process itself are not described in detail in the current specification, it will be appreciated both that these techniques in themselves are conventional.</p><p id="p0068" num="0068">It is also important to note, however, that in the present embodiment the page 8 must be set up appropriately to generate messages, receive messages and process these accordingly. This means that the monitoring process used is self-contained in that the web pages to be monitored must be written to facilitate this monitoring. This means that if a user navigates to a page which is not appropriately set up, no monitoring will occur. This means that the current technique can be used in a way where there is no risk to the user that all of his or her activities will be monitored. This makes the current techniques more practical as they are acceptable.</p><p id="p0069" num="0069">In the present technique the collection server 4A, 4B, 4C to which a browser sends monitoring messages defaults to a collection server in the same domain as the page, but can be dynamically changed based on refer information included in<!-- EPO <DP n="24"> --> the http messages as will be explained in more detail below. In the absence of a session context, each collection server 4A, 4B, 4C is arranged to recognise if an incoming request has a referrer which is within a list or "set" of sites/domains which are being monitored and as a result of this, redirect a request to a collection server 4A, 4B, 4C within the domain of the referrer. This can allow session continuity to be maintained as will be explained below. Session continuity can be utilised in many ways including session tracking, cross-domain log in, or cross-domain user rights and so on.</p><p id="p0070" num="0070">In this embodiment there are a set of sites or set of domains which are to be monitored by the system. This set includes the three web servers 1A, 1B, 1C and correspondingly the three domains A, B and C shown in <figref idrefs="f0001">Figure 1</figref>. In practice of course, such a set of sites and domains to be monitored by a system of the present type could be much larger.</p><p id="p0071" num="0071">Returning now to the detail of the process, in step ST3, the page 8 sends an initial http request for a page component to the first collection server 4A. At this point there is no session context. In response to this request the first collection server 4A, in particular the first cookie control server 5A, sends in step ST4 script to the page 8 which includes an instruction to set a first party cookie within the browser 7. This script is then executed by the page 8. Because this processing occurs in the page, it occurs under the domain of the site being monitored and this allows the setting of a first party cookie in domain A. Once this first party cookie is in place, then as monitoring (or analytics) traffic is sent back to the first collection<!-- EPO <DP n="25"> --> server 4A in step ST5 from the original page 8 or other pages 8 (in the same domain) which are appropriately set up, information contained in the first party cookie for domain A will be included in the messages to the first collection server 4A. In particular each such message may include a session ID to allow all of the monitored activities of the user in that browser session, whilst in the original domain, to be tied together.</p><p id="p0072" num="0072">At some point the user may leave the original domain and browse to other web sites such that a page 8 running within the browser 7 is from a different domain. In this example, we shall assume that the user activates a link in a page in domain A and hence navigates to a page 8 supplied by the second web server 1B and hence is now in domain B having just left domain A. The content is requested in step ST6 in <figref idrefs="f0002 f0003">Figure 2</figref> and returned in step ST7. Again assuming the page 8 loaded from the second web server 1B is appropriately set up and includes code that requests a page component from a collection server, then in step ST8 an initial http request will be sent from the page 8. In this case, in the present embodiment, because the requesting page 8 is in domain B the request will be directed at the second collection server 4B, which is in domain B. At this point there is no session context in domain B.</p><p id="p0073" num="0073">There is no session context in domain B because the cookie set in domain A during the previous steps is not visible to the browser 7 now that it is in domain B and nor is it visible to the second collection server 4B because this is also in domain B.<!-- EPO <DP n="26"> --></p><p id="p0074" num="0074">When the second collection server 4B receives the http request sent in step in ST8 and it determines that there is currently no session context, the second collection server 4B, in particular the second cookie control server 5B is arranged to check the http referrer information included in the request.</p><p id="p0075" num="0075">As is well known, under the http protocol, information concerning the identity of the object which caused the current page to be loaded into a browser can be included in http requests generated by that page. In concrete terms, was an example, this means that when a page is reached via a link from another page, the identity of that referring page can be seen by the browser and can be included in the http request. In the present technique, the current page's referrer is encoded, on the URL query string associated with the http request, by the browser. Thus, in the http request sent in step ST8 there is information included as part of the present technique which can be read by the second collection server 4B indicating that this page 8 which sent the request was reached via a link in a page in domain A.</p><p id="p0076" num="0076">As mentioned above the collection servers 4A, 4B, 4C collectively maintain a list of domains which are to be monitored as a set - in this case domains A, B and C.</p><p id="p0077" num="0077">Thus, at this stage, the second collection server 4B consults the list of domains which are to be treated as a set in the present implementation and determines that domain A is one such domain. As a result of this, in step ST9, the second<!-- EPO <DP n="27"> --> collection server 4B sends an HTTP redirect message to the browser 7 indicating that the first collection server 4A should be used.</p><p id="p0078" num="0078">In response to this temporary redirect, the browser 7 is caused to resend, in step ST10, the request sent originally to the second collection server in step ST8. When this resent request is received by the first collection server 4A, it is able to read the first party cookie in domain A which was used during steps ST1 to ST5. Thus, the first collection server 4A is able to extract the session ID from that cookie. Moreover, it is able to determine that this request has been sent because the browser 7 has been instructed by a server (the second collection server 4B) in a different domain to resend the message. Moreover, it is able to determine that the browser 7 is currently operating in domain B. This means that the first collection server 4A is able to return code to the browser 7 in step ST11 which contains an instruction for the browser 7 to generate a first party cookie in domain B including the session ID retrieved from the domain A cookie.</p><p id="p0079" num="0079">After this code has been returned to the browser 7, it is executed which causes a first party cookie in domain B to be generated by the browser 7. Then when further interactions take place between the browser 7 and website in domain B, in step ST12, further monitoring messages will be sent to the second collection server 4B including the appropriate session number from the domain B cookie. Thus this activity can be tied up with that which took place in domain A since all these interactions will be associated with the same session ID.<!-- EPO <DP n="28"> --></p><p id="p0080" num="0080">If at some time in the future the user leaves domain B and browses a page from the third web server 1C having reached this from a link in a page in domain B, then the above process describes in relation to steps ST6 to ST12 can be repeated whilst there is transfer from domain B to domain C. That is to say, and referring again to <figref idrefs="f0002 f0003">Figure 2</figref>, in step ST13 the user browses to domain C and in step ST14 receives the appropriate page in the browser 7. In step ST15 because the received page is in domain C it will contact the third collection server 4C in an attempt to establish session context. At this stage the third collection server 4C can see no session context. However, as explained above, in relation to steps ST8 and ST9, the third collection server 4C is able to see from the referrer information in the http request that the page currently being browsed was reached from a link in a page in domain B. Thus, the third collection server 4C sends, in step ST16, a redirect to the browser 7 indicating that the request should be resent to the second collection server 4B. In step ST17 this message is resent by the browser to the second collection server 4B and in step ST18 code is returned to the browser 7 including an instruction to set a cookie in domain C using the session number extracted from the cookie in domain B. After this, monitoring events in domain C may be sent by the browser, in the step ST 19, along with the session number in the domain C cookie to the third collection server 4C. Again, as explained above these monitored activities may be tied together with those found in domains A and B.</p><p id="p0081" num="0081">It, of course, will be appreciated that if there were further websites in further domains which were also part of the "set" in the current implementation, it would<!-- EPO <DP n="29"> --> also be possible for session context to be maintained as these websites in these other domains were browsed. Furthermore, of course it is possible for the user to return to domain A or B from domain C and for the context to be maintained. It should be noted that once a particular domain has been visited during a particular browser session, then an appropriate cookie giving a session ID for that session will exist. Thus, if that domain is revisited during the same browser session, it will not be necessary to go through the whole procedure outlined above. That is to say when the step is taken (in for example, step ST3, ST8 or ST15) to seek allocation of a session number, if the domain has already been visited then that initial request will include a cookie in that domain and thus the collection server concerned 4A, 4B and 4C may simply set the session ID equal to that found in the cookie. There would then be no need for any redirection process and monitoring activity could commence straightaway.</p><p id="p0082" num="0082"><figref idrefs="f0004">Figure 3</figref> shows a flow chart showing the processes carried out at the first and second collection servers 4A and 4B in steps ST1 to ST12 of the overall process indicated in <figref idrefs="f0002 f0003">Figure 2</figref>. As will be appreciated, a similar series of steps take place during the steps ST13 to ST19 in <figref idrefs="f0002 f0003">Figure 2</figref>.</p><p id="p0083" num="0083">In a first step ST301 an http message is received at the first collection server 4A from a page 8 in the browser 7. In a second step ST302 the first collection server 4A checks for session context. In a third step ST303 in the absence of a session context at this stage, a session ID is allocated to the session. In step ST304 the first collection server 4A sends a message including an instruction to generate a<!-- EPO <DP n="30"> --> cookie in domain A to the browser 7. Following this, the first collection server 4A is able to receive monitoring messages, in step ST305, from the browser 7 including the session ID. This of course means that those pieces of monitoring information may be tied together.</p><p id="p0084" num="0084">Later when the browser 7 moves from domain A to domain B by virtue of the user activating a link in a page in domain A to a page in domain B, the second collection server 4B receives an http message in step ST306. Again, there is a check made for session context, this time by the second collection server 4B in step ST307. Here again, no session context is found as the cookie in domain A cannot be seen by the second collection server 4B. Next, in step ST308, the referrer information included in the incoming URL associated with the http message is examined. In step ST309 it is determined whether the referrer referred to in this referrer information is in the predetermined set of domains/sites which are to be monitored by this particular implementation. Here, of course, it is in this case.</p><p id="p0085" num="0085">In step ST310 a redirect is sent by the second collection server 4B to the browser 7 instructing that the message must be resent to the collection server 4A in the domain of the referrer. This causes the http message to be resent and this is received by the first collection server 4A in step ST311. In this instance the message will have, in its header, the domain A cookie generated as a result of the sending of the message in step ST304 and thus the session ID can be extracted from this domain A cookie in step ST312. As a result of this the first collection<!-- EPO <DP n="31"> --> server 4A is able to send, in step ST313, a message to the browser 7 including an instruction to generate a cookie including the same session ID. Of course this cookie generated will be in domain B as the currently active page 8 in the browser is in domain B.</p><p id="p0086" num="0086">Thus, when further activity is undertaken in the browser in domain B, monitoring messages including the session ID may be received by the second collection server 4B in step ST314.</p><p id="p0087" num="0087"><figref idrefs="f0005">Figure 4</figref> shows a flow chart showing the process carried out at the client device during the overall process shown in <figref idrefs="f0002 f0003">Figure 2</figref>, in particular those parts between steps ST1 and ST12. Again a similar process will take place as part of steps ST13 to ST19 in <figref idrefs="f0002 f0003">Figure 2</figref>.</p><p id="p0088" num="0088">In a first step ST401 the browser 7 in the client device 6 browses a page in domain A. In response to the contents of that page 8 the browser 7 is caused, in step ST402, to send an http message to the first collection server 4A which is in domain A. As a result of sending this message the browser 7 receives, in step ST403, code from the first collection server 4A to generate a cookie with a session ID. This cookie is generated in domain A in step ST404. In step ST405 monitoring messages including the session ID are sent to the first collection server 4A.<!-- EPO <DP n="32"> --></p><p id="p0089" num="0089">At some later time, in step ST406, the user navigates away from domain A via a link in a domain A page to a page in domain B. As a result of the content of that page in domain B, in step ST407, the browser 7 is caused to send an http message to the second collection server 4B having encoded the referrer information of the page in domain B (which identifies the page in domain A as the referrer) on the URL query string associated with that http message. The browser then receives a temporary redirect to resend the http message to the first collection server 4A in step ST408.</p><p id="p0090" num="0090">This message is resent to the first collection server 4A in step ST409. Because the first collection server 4A is in domain A, this resend of the message is accompanied by the domain A cookie. In step ST410 the browser 7 receives code from the first collection server 4A to generate a cookie including the session ID. At this stage, because the browser 7 is browsing a page in domain B, the cookie will be generated in domain B. This domain B cookie is generated in step ST411. In step ST412 the browser 7 sends monitoring messages including the session ID to the second collection server 4B.</p><p id="p0091" num="0091">It will be appreciated that these type of steps can be continued by the browser 7 in the client device 6 as and when the user browses to other sites, for example, those in domain C.</p><p id="p0092" num="0092">It will be seen that session continuity is maintained as a user/browser moves from one domain in the predetermined set of domains (which might be termed a "portal<!-- EPO <DP n="33"> --> set") to another. Moreover, this session continuity will be maintained if the user leaves the set of domains/sites and subsequently returns to a site which they have previously visited in the session. This occurs because when returning to a site or domain which they have previously visited, there will be the pre-existing cookie in that domain which can be used to recover the session ID and tie together these session events with those generated earlier.</p><p id="p0093" num="0093">However, if during a session, the user browses away from the monitored set of sites, their activity whilst away from the set of sites will not be monitored as part of the presently described set of monitoring. Those activities may of course be monitored separately if those other sites are appropriately set up. As an example, the user might browse to a site which is in another set of sites/set of domains which is monitored by another instance of the present type of monitoring system.</p><p id="p0094" num="0094">Further, if permanent cookies are used in an alternative there can be linking of monitored activity across separate browser sessions.</p><p id="p0095" num="0095">It will be appreciated that the processes described above may be used in different ways. Whilst at the most basic level, as described above, a session ID may be ' extracted and reassigned for generation in a first party cookie of the correct domain, other uses can be envisaged. For example, the collection server/cookie control server may determine that a modified session ID should be included in the cookie to be generated. Of course, this could be done in a way such that the<!-- EPO <DP n="34"> --> session IDs can still be tied together with one another, but modification of the session ID may allow the encoding of further information.</p><p id="p0096" num="0096">A broader range of alternatives also exists. Any data which is present in the first party cookie may be extracted and almost anything may be done with it. Similarly the message sent back to the page may include instruction to do almost anything. Thus, for example, if the first party cookie includes a customer ID, log in state or so on, then this could, at least in some circumstances, be extracted and processed and fed back to page sending the http message.</p><p id="p0097" num="0097">This means for example, that if a user is navigating though pages in one domain having had to log on to the appropriate website, and then moves across to another domain, a secure user session may be seamlessly created for that user in the website on the new domain by virtue of the log in state being extracted from the initial first party cookie in the first domain and used to generate a message to cause an appropriate first party cookie in the new domain to be generated within the browser.</p><p id="p0098" num="0098">In a practical set up, an enterprise having websites in a number of domains would have a corresponding collection server 4A, 4B, 4C and cookie control server 5A, 5B, 5C set up in each domain. In some instances, it may be necessary for the websites to be monitored to implement a security policy such as P3P to give successful operation.<!-- EPO <DP n="35"> --></p><p id="p0099" num="0099">Whilst the above description has been written in terms of a conventional PC running a conventional browser it will be appreciated that in alternatives the client device 6 may be differently constituted. In particular the client device might comprise a mobile telephone or other such device and might comprise an embedded browser.</p><p id="p0100" num="0100">The present invention may be embodied in one or more computer programs carried by machine readable media, for example, a signal, a CD-Rom, a flash memory device, a hard disk or so on, such programs being arranged to cause a server, client device or other computer (in the broadest sense) to operate as described above. Similarly the invention may be embodied in apparatus comprising a computer (in the broadest sense) set-up under the control of such programs to operate as described above.</p></description><claims mxw-id="PCLM56986229" lang="DE" load-source="patent-office"><!-- EPO <DP n="44"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zum Setzen eines Cookie einer ersten Partei, in einer ersten Domain (B), auf einem Client-Gerät (6), wobei es die folgenden Schritte umfasst:
<claim-text>Empfangen, bei einem ersten Server (4B), einer http-Nachricht, die eine Referrer-Information von einem auf dem Client-Gerät (6) laufenden Browser (7) enthält, wobei der Browser eine geladene Webseite in der ersten Domain (B) enthält, und wobei die Webseite Code enthält, der, wenn er ausgeführt wird, den Browser anweist, die http-Nachricht an den ersten Server (4B) zu senden;</claim-text>
<claim-text>Überprüfen der Referrer-Information in der http-Nachricht, um zu bestimmen, ob der Referrer in einer Domain (A) aus einem vorbestimmten Satz von Domains (A, C) ist, und falls der Referrer in einer Domain in dem vorbestimmten Satz von Domains (A, C) ist, Senden einer Nachricht an den Browser (7), die den Browser anweist, eine http-Nachricht, die ein Cookie einer ersten Partei in der Domain des Referrers (A) enthält, an einen zweiten Server (4A) zu senden, wobei der zweite Server in derselben Domain (A) wie der Referrer ist, wobei die Domain des Referrers (A) unterschiedlich zur ersten Domain (B) ist;</claim-text>
<claim-text>Empfangen, bei dem zweiten Server (4A), der http-Nachricht von dem Browser und Extrahieren von Daten aus dem Cookie der ersten Partei, in der Domain des Referrers (A), das im Header der http-Nachricht vorhanden ist;</claim-text>
<claim-text>Bestimmen von Daten, die in ein Cookie einer ersten Partei, in der ersten Domain (B), einzuschließen sind, das auf dem Client-Gerät (6) resident ist, und zwar in Abhängigkeit von den Daten, die aus dem Cookie in der Domain des Referrers (A) extrahiert wurden; und</claim-text>
<claim-text>Senden einer Nachricht an den Browser, in den die Webseite in der ersten Domain geladen ist, wobei die Nachricht Code enthält, der, wenn er durch<!-- EPO <DP n="45"> --> das Client-Gerät (6) ausgeführt wird, veranlasst, dass ein Cookie einer ersten Partei in der ersten Domain (B) gesetzt wird, das die bei dem Bestimmungsschritt bestimmten Daten enthält.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, das weiter, vor dem Schritt eines Überprüfens einer Referrer-Information, den Schritt umfasst, bei dem ein Fehlen eines Sitzungskontext zwischen dem Browser (7) und dem ersten Server (4B) überprüft wird.</claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach Anspruch 1 oder Anspruch 2, bei dem der Schritt, bei dem Daten aus dem Cookie, das in dem Header der http-Nachricht vorhanden ist, extrahiert werden, den Schritt umfasst, bei dem eine Sitzungs-ID aus dem Cookie extrahiert wird.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach Anspruch 3, bei dem die Nachricht, die an den Browser gesendet wird, in den die Webseite in der ersten Domain geladen ist, eine Anweisung enthält, ein Cookie zu erzeugen, das eine Sitzungs-ID enthält, die in Abhängigkeit von der extrahierten Sitzungs-ID bestimmt wird.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach einem der vorhergehenden Ansprüche, wobei das Verfahren weiter den Schritt umfasst, bei dem weitere Nachrichten, bei dem ersten Server (46), aus derselben Seite und/oder einer weiteren Seite, in dem Browser (7) empfangen werden, die Daten beinhalten, welche von dem erzeugten Cookie hergeleitet werden.</claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Verfahren nach einem der vorhergehenden Ansprüche, wobei das Verfahren weiter den Schritt umfasst, bei dem der erste Server (4B) eine Mehrzahl von Nachrichten empfängt und bestimmt, ob die Nachrichten von derselben Browser-Sitzung sind, und zwar in Abhängigkeit von den Daten, die aus dem Cookie hergeleitet werden und die in einer jeweiligen Nachricht vorhanden sind.<!-- EPO <DP n="46"> --></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Verfahren nach einem der vorhergehenden Ansprüche, das, nach den in Anspruch 1 definierten Schritten, weiter folgende Schritte umfasst:
<claim-text>Empfangen, bei einem dritten Server (4C), einer http-Nachricht, die eine Referrer-Information enthält, von einem auf dem Client-Gerät (6) laufenden Browser (7), wobei der Browser eine geladene Webseite in einer dritten Domain (C) enthält;</claim-text>
<claim-text>Überprüfen der Referrer-Information in der http-Nachricht und, bei Bestimmen, dass der Referrer in der ersten Domain (B) ist, Senden einer Nachricht an den Browser, die den Browser (7) anweist, eine http-Nachricht an den ersten Server (4B) zu senden, wobei die http-Nachricht in ihrem Header ein Cookie einer ersten Partei in der ersten Domain (B) enthält;</claim-text>
<claim-text>Empfangen, bei dem ersten Server (4B), der http-Nachricht von dem Browser (7) und Extrahieren von Daten aus dem Cookie der ersten Partei, in der ersten Domain (6), das im Header der http-Nachricht vorhanden ist; Bestimmen von Daten, die in ein Cookie einer ersten Partei, in der dritten Domain (C), einzuschließen sind, das auf dem Client-Gerät (6) resident ist, und zwar in Abhängigkeit von den aus dem Cookie extrahierten Daten, in der ersten Domain (B); und</claim-text>
<claim-text>Senden einer Nachricht an den Browser, die einen Code enthält, der, wenn er durch das Client-Gerät (6) ausgeführt wird, veranlasst, dass ein Cookie einer ersten Partei in der dritten Domain (C) gesetzt wird, das die bei dem Bestimmungsschritt bestimmten Daten enthält.</claim-text></claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Verfahren nach einem der vorhergehenden Ansprüche, bei dem ein Satz von Servern (4A, 4B, 4C) bereitgestellt wird, der zumindest den ersten Server (4B) und den zweiten Server (4A) beinhaltet, wobei jeder Server in dem Satz in einer unterschiedlichen Domain in dem vorbestimmten Satz von Domains (A, C) ist und angeordnet ist, um wahlweise Schritte<!-- EPO <DP n="47"> --> auszuführen, die jeweiligen von den Schritten entsprechen, welche in einem der vorhergehenden Ansprüche definiert sind.</claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Verfahren nach Anspruch 8, wobei das Verfahren den Schritt umfasst, bei dem jeder Server (4A, 4B, 4C) in dem Satz von Servern eine http-Nachricht aus einer jeweiligen aktiven Seite in einem auf dem Client-Gerät (6) laufenden Browser (7) empfängt, wobei jede Seite jeweils in derselben Domain wie der jeweilige Server ist.</claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Website-Überwachungsverfahren, das ein Verfahren nach einem der vorhergehenden Ansprüche und weiter den Schritt umfasst, bei dem von dem auf dem Client-Gerät (6) laufenden Browser (7) Überwachungsinformation empfangen wird, die Webseiten-Interaktionen und/oder -Leistungsfähigkeit betrifft.</claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Verfahren nach Anspruch 10, das den Schritt umfasst, dass mindestens ein Sammel-Server zum Sammeln der Überwachungsinformation bereitgestellt wird.</claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>Verfahren nach einem der Ansprüche 10 und 11, wenn abhängig von Anspruch 8, bei dem es einen Satz von Sammel-Servern entsprechend dem Satz von Servern gibt, wobei jeder der Sammel-Server in derselben Domain wie ein jeweiliger der Server ist.</claim-text></claim><claim id="c-de-01-0013" num="0013"><claim-text>Verfahren nach Anspruch 12, das den Schritt umfasst, dass jeder Sammel-Server in dem Satz von Sammel-Servern von dem auf dem Client-Gerät laufenden Browser Überwachungsinformation betreffend Webseiten-Interaktionen und/oder -Leistungsfähigkeit empfängt, und zwar bezüglich Webseiten in derselben Domain wie der jeweilige Sammel-Server.<!-- EPO <DP n="48"> --></claim-text></claim><claim id="c-de-01-0014" num="0014"><claim-text>System, welches ein Setzen eines Cookie einer ersten Partei, in einer ersten Domain (B), auf einem Client-Gerät (6) veranlasst, wobei die Vorrichtung einen ersten Server (4B) und einen zweiten Server (4A) beinhaltet,<br/>
wobei der erste Server (4B) Software-gesteuert angeordnet ist, um:
<claim-text>eine http-Nachricht zu empfangen, die eine Referrer-Information von einem auf dem Client-Gerät (6) laufenden Browser (7) enthält, wobei der Browser eine geladene Webseite in der ersten Domain enthält, und wobei die Webseite Code enthält, der, wenn er ausgeführt wird, den Browser anweist, die http-Nachricht an den ersten Server (4B) zu senden;</claim-text>
<claim-text>die Referrer-Information in der http-Nachricht zu überprüfen, um zu bestimmen, ob der Referrer in einer Domain aus einem vorbestimmten Satz von Domains (A, C) ist, und falls der Referrer in einer Domain in dem vorbestimmten Satz von Domains (A, C) ist, eine Nachricht an den Browser (7) zu senden, die den Browser anweist, eine http-Nachricht, die ein Cookie einer ersten Partei in der Domain des Referrers (A) enthält, an einen zweiten Server (4A) zu senden, wobei der zweite Server (4A) in derselben Domain wie der Referrer (A) ist, wobei die Domain des Referrers (A) unterschiedlich zur ersten Domain (B) ist;</claim-text>
wobei der zweite Server (4A) Software-gesteuert angeordnet ist, um:
<claim-text>die http-Nachricht von dem Browser (7) zu empfangen und Daten aus dem Cookie der ersten Partei, in der Domain des Referrers (A), zu extrahieren, das im Header der http-Nachricht vorhanden ist;</claim-text>
<claim-text>Daten zu bestimmen, die in ein Cookie einer ersten Partei, in der ersten Domain (B), einzuschließen sind, das auf dem Client-Gerät resident ist, und zwar in Abhängigkeit von den Daten, die aus dem Cookie in der Domain des Referrers (A) extrahiert wurden; und</claim-text>
<claim-text>eine Nachricht an den Browser zu senden, in den die Webseite in der ersten Domain geladen ist, wobei die Nachricht Code enthält, der, wenn er durch das Client-Gerät (6) ausgeführt wird, veranlasst, dass ein Cookie<!-- EPO <DP n="49"> --> einer ersten Partei in der ersten Domain (B) gesetzt wird, das die bei dem Bestimmungsschritt bestimmten Daten enthält.</claim-text></claim-text></claim><claim id="c-de-01-0015" num="0015"><claim-text>System nach Anspruch 14, das einen Satz von Servern (4A, 4B, 4C) aufweist, der zumindest den ersten Server und den zweiten Server beinhaltet, wobei jeder Server in dem Satz in einer unterschiedlichen Domain in dem vorbestimmten Satz von Domains (A, B, C) ist und jeweils Software-gesteuert angeordnet ist, um wahlweise die in Anspruch 14 definierten Operationen auszuführen.</claim-text></claim><claim id="c-de-01-0016" num="0016"><claim-text>Verfahren zum Setzen eines Cookie einer ersten Partei, in einer ersten Domain (B), auf einem Client-Gerät (6), wobei es die folgenden Schritte umfasst:
<claim-text>Laden einer Webseite in einen Browser (7) des Client-Geräts, wobei die Webseite in der ersten Domain ist und Anweisungen enthält, damit eine http-Nachricht, die Referrer-Information enthält, von dem Browser an einen ersten Server (4B) gesendet wird;</claim-text>
<claim-text>Senden der http-Nachricht, welche die Referrer-Information enthält, von dem Browser an den ersten Server;</claim-text>
<claim-text>Empfangen einer Nachricht in dem Browser, von dem ersten Server, welche den Browser (7) anweist, eine http-Nachricht, die ein Cookie einer ersten Partei in der Domain des Referrers (A) im Header der http-Nachricht enthält, an einen zweiten Server (4A) zu senden, wobei der zweite Server (4A) in derselben Domain wie der Referrer ist, wobei die Domain des Referrers (A) unterschiedlich zur ersten Domain (B) ist;</claim-text>
<claim-text>Senden, von dem Browser (7), der http-Nachricht an den zweiten Server (4A), die das Cookie der ersten Partei, in der Domain des Referrers (A), im Header der http-Nachricht enthält;</claim-text>
<claim-text>Empfangen einer Nachricht, von dem zweiten Server (4A), bei dem Browser, in den die Seite in der ersten Domain geladen ist, wobei die Nachricht Code enthält, der, wenn er durch den Browser ausgeführt wird,<!-- EPO <DP n="50"> --> veranlasst, dass ein Cookie einer ersten Partei in der ersten Domain (B) gesetzt wird, das die Daten enthält, die in Abhängigkeit vom Inhalt des Cookie der ersten Partei in der Domain des Referrers (A) bestimmt wurden, wie empfangen durch den zweiten Server; und</claim-text>
<claim-text>Ausführen des Code in dem auf dem Client-Gerät (6) laufenden Browser (7), um die Erzeugung eines Cookie einer ersten Partei, in der ersten Domain, zu veranlassen.</claim-text></claim-text></claim><claim id="c-de-01-0017" num="0017"><claim-text>Client-Gerät (6), das Software-gesteuert angeordnet ist, um:
<claim-text>eine Webseite in einen Browser (7) des Client-Geräts zu laden, wobei die Webseite in der ersten Domain ist und Anweisungen enthält, damit eine http-Nachricht, die Referrer-Information enthält, von dem Browser an einen ersten Server (4B) gesendet wird;</claim-text>
<claim-text>die http-Nachricht, welche die Referrer-Information enthält, von dem Browser an den ersten Server zu senden;</claim-text>
<claim-text>eine Nachricht von dem ersten Server (4B) im Browser (7) zu empfangen, welche den Browser (7) anweist, eine http-Nachricht, die ein Cookie einer ersten Partei in der Domain des Referrers (A) im Header der http-Nachricht enthält, an einen zweiten Server (4A) zu senden, wobei der zweite Server (4A) in derselben Domain wie der Referrer (A) ist, wobei die Domain des Referrers (A) unterschiedlich zur ersten Domain (B) ist;</claim-text>
<claim-text>von dem Browser (7) die http-Nachricht an den zweiten Server (4A) zu senden, die das Cookie der ersten Partei, in der Domain des Referrers (A), im Header der http-Nachricht enthält;</claim-text>
<claim-text>eine Nachricht, von dem zweiten Server (4A), bei dem Browser zu empfangen, in den die Seite in der ersten Domain geladen ist, wobei die Nachricht Code enthält, der, wenn er durch den Browser ausgeführt wird, veranlasst, dass ein Cookie einer ersten Partei in der ersten Domain (B) gesetzt wird, das die Daten enthält, die in Abhängigkeit vom Inhalt des Cookie der ersten Partei in der Domain des Referrers bestimmt wurden, wie empfangen durch den zweiten Server (4A); und<!-- EPO <DP n="51"> --></claim-text>
<claim-text>Ausführen des Code in dem auf dem Client-Gerät (6) laufenden Browser (7), um die Erzeugung eines Cookie einer ersten Partei, in der ersten Domain (B), zu veranlassen.</claim-text></claim-text></claim><claim id="c-de-01-0018" num="0018"><claim-text>Computerlesbares Medium, das Computer-ausführbaren Code aufweist, der, wenn er in einen Computer, oder einen Satz von Computern, geladen ist und auf diesem läuft, den Computer oder den Satz von Computern veranlasst, eines der Verfahren nach einem der Ansprüche 1 bis 13 oder 16 auszuführen.</claim-text></claim></claims><claims mxw-id="PCLM56986230" lang="EN" load-source="patent-office"><!-- EPO <DP n="36"> --><claim id="c-en-01-0001" num="0001"><claim-text>A method for setting a first party cookie, in a first domain (B), on a client device (6) comprising the steps of:
<claim-text>receiving at a first server (4B), an http message including referrer information from a browser (7) running on the client device (6), wherein the browser includes a web page that is loaded in the first domain (B), and wherein the web page includes code that, when executed, instructs the browser to send the http message to the first server (4B);</claim-text>
<claim-text>checking the referrer information in the http message to determine if the referrer is within a domain (A) amongst a predetermined set of domains (A,C), and if the referrer is within a domain within the predetermined set of domains (A,C), sending a message to the browser (7) instructing the browser to send an http message including a first party cookie in the domain of the referrer (A) to a second server (4A), the second server being in the same domain (A) as the referrer, wherein the domain of the referrer (A) is different from the first domain (B);</claim-text>
<claim-text>receiving at the second server (4A), the http message from the browser and extracting data from the first party cookie, within the domain of the referrer (A), present in the header of the http message;</claim-text>
<claim-text>determining data which is to be included in a first party cookie, within the first domain (B), resident on the client device (6) in dependence on the data extracted from the cookie within the domain of the referrer (A); and</claim-text>
<claim-text>sending a message to the browser in which the web page in the first domain is loaded, the message including code which when executed by the client<!-- EPO <DP n="37"> --> device (6) will cause setting of a first party cookie in the first domain (B), including the data determined in the determining step.</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>A method according to claim 1 which comprises the further step, before the checking referrer information step, of checking for an absence of session context between the browser (7) and the first server (4B).</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>A method according to claim 1 or claim 2 in which the step of extracting data from the cookie present in the header of the http message comprises the step of extracting a session ID from the cookie.</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>A method according to claim 3 in which the message sent to the browser in which the web page in the first domain is loaded includes an instruction to generate a cookie including a session ID determined in dependence on the extracted session ID.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>A method according to any preceding claim in which the method comprises the further step of receiving further messages, at the first server (4B), from at least one of the same page and another page, within the browser (7) that include data derived from the generated cookie.</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>A method according to any preceding claim in which the method comprises the further step of the first server (4B) receiving a plurality of messages<!-- EPO <DP n="38"> --> and determining whether the messages are from the same browser session in dependence on the data, derived from the cookie, present in each message.</claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>A method according to any preceding claim comprising, after the steps defined in claim 1, the further steps of:
<claim-text>receiving at a third server (4C), an http message including referrer information from a browser (7) running on the client device (6), wherein the browser includes a web page that is loaded in a third domain (C);</claim-text>
<claim-text>checking the referrer information in the http message and, on determining that the referrer is in the first domain (B), sending a message to the browser instructing the browser (7) to send an http message to the first server (4B), the http message including in its header a first party cookie in the first domain (B);</claim-text>
<claim-text>receiving at the first server (4B), the http message from the browser (7) and extracting data from the first party cookie, within the first domain (B), present in the header of the http message;</claim-text>
<claim-text>determining data which is to be included in a first party cookie, within the third domain (C), resident on the client device (6) in dependence on the data extracted from the cookie, within first domain (B); and</claim-text>
<claim-text>sending a message to the browser including code which when executed by the client device (6) will cause setting of a first party cookie in the third domain (C), including the data determined in the determining step.</claim-text></claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>A method according to any preceding claim in which there is provided a set of servers (4A, 4B, 4C) comprising at least the first server (4B) and the second<!-- EPO <DP n="39"> --> server (4A) with each server in the set being in a different domain within the predetermined set of domains (A,C) and being arranged to selectively carry out steps corresponding to each of the steps defined in anyone of the preceding claims.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>A method according to claim 8 in which the method comprises the step of each server (4A, 4B, 4C) in the set of servers, receiving an http message from a respective active page within a browser (7) running on the client device (6), each respective page being in the same domain as the respective server.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>A website monitoring method comprising a method according to any preceding claim and the further step of receiving, from the browser (7) running on the client device (6), monitoring information concerning at least one of webpage interactions and performance.</claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>A method according to claim 10 comprising the step of providing at least one collection server for collecting the monitoring information.</claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>A method according to one of claims 10 and 11 when dependent on claim 8 in which there is a set of collection servers corresponding to the set of servers, with each of the collection servers being in the same domain as a respective one of the servers.<!-- EPO <DP n="40"> --></claim-text></claim><claim id="c-en-01-0013" num="0013"><claim-text>A method according to claim 12 comprising the step of each collection server in the set of collection servers, receiving, from the browser running on the client device, monitoring information concerning at least one of webpage interactions and performance, in respect of web pages in the same domain as the respective collection server.</claim-text></claim><claim id="c-en-01-0014" num="0014"><claim-text>A system for causing setting of a first party cookie, in a first domain (B), on a client device (6), the apparatus comprising a first server (4B) and a second server (4A),<br/>
the first server (4B) being arranged under the control of software to:
<claim-text>receive an http message including referrer information from a browser (7) running on the client device (6), wherein the browser includes a web page that is loaded in the first domain, and wherein the web page includes code that, when executed, instructs the browser to send the http message to the first server (4B);</claim-text>
<claim-text>check the referrer information in the http message to determine if the referrer is within a domain amongst a predetermined set of domains (A,C), and if the referrer is within a domain within the predetermined set of domains (A,C), send a message to the browser (7) instructing the browser to send an http message including a first party cookie in the domain of the referrer (A) to a second server (4A), the second server (4A) being in the same domain as the referrer (A), wherein the domain of the referrer (A) is different from the first domain (B);</claim-text>
the second server (4A) being arranged under the control of software to:<!-- EPO <DP n="41"> -->
<claim-text>receive the http message from the browser (7) and extract data from the first party cookie, within the domain of the referrer (A), present in the header of the http message;</claim-text>
<claim-text>determine data which is to be included in a first party cookie, within the first domain (B), resident on the client device, in dependence on the data extracted from the cookie within the domain of the referrer (A); and</claim-text>
<claim-text>send a message to the browser in which the web page in the first domain is loaded, the message including code which when executed by the client device (6) will cause setting of a first party cookie in the first domain (B), including the data determined in the determining step.</claim-text></claim-text></claim><claim id="c-en-01-0015" num="0015"><claim-text>A system according to claim 14 comprising a set of servers (4A, 4B, 4C) comprising at least the first server and the second server, with each server in the set being in a different domain within the predetermined set of domains (A,B,C) and each being arranged under the control of software to selectively carry out the operations defined in claim 14.</claim-text></claim><claim id="c-en-01-0016" num="0016"><claim-text>A method for setting a first party cookie, in a first domain (B), on a client device (6) comprising the steps of:
<claim-text>loading a web page in a browser (7) of the client device, the web page being in the first domain and including instructions for an http message including referrer information to be sent from the browser to a first server (4B);</claim-text>
<claim-text>sending the http message, including the referrer information, from the browser to the first server;<!-- EPO <DP n="42"> --></claim-text>
<claim-text>receiving a message in the browser, from the first server, instructing the browser (7) to send an http message including a first party cookie within the domain of the referrer (A) in the header of the http message to a second server (4A), the second server (4A) being in the same domain as the referrer, wherein the domain of the referrer (A) is different from the first domain (B);</claim-text>
<claim-text>sending from the browser (7), the http message to the second server (4A) including the first party cookie, within the domain of the referrer (A), in the header of the http message;</claim-text>
<claim-text>receiving a message, from the second server (4A), at the browser in which the page in the first domain is loaded, wherein the message includes code which when executed by the browser will cause setting of a first party cookie in the first domain (B), including the data determined in dependence on the content of the first party cookie in the domain of the referrer (A) as received by the second server;</claim-text>
<claim-text>and</claim-text>
<claim-text>executing the code within the browser (7) running on the client device (6) to cause the generation of a first party cookie, in the first domain.</claim-text></claim-text></claim><claim id="c-en-01-0017" num="0017"><claim-text>A client device (6) arranged under the control of software to:
<claim-text>load a web page in a browser (7) of the client device, the web page being in the first domain and including instructions for an http message including referrer information to be sent from the browser to a first server (4B);</claim-text>
<claim-text>send the http message, including the referrer information, from the browser to the first server;<!-- EPO <DP n="43"> --> receive a message in the browser (7), from the first server (4B), instructing the browser (7) to send an http message including a first party cookie within the domain of the referrer (A) in the header of the http message to a second server (4A), the second server (4A) being in the same domain as the referrer (A), wherein the domain of the referrer (A) is different from the first domain (B); send from the browser (7), the http message to the second server (4A) including the first party cookie, within the domain of the referrer (A), in the header of the http message;</claim-text>
<claim-text>receive a message, from the second server (4A), at the browser in which the page in the first domain is loaded, wherein the message includes code which when executed by the browser will cause setting of a first party cookie in the first domain (B), including the data determined in dependence on the content of the first party cookie in the domain of the referrer as received by the second server (4A);</claim-text>
<claim-text>and</claim-text>
<claim-text>execute the code within the browser (7) running on the client device (6) to cause the generation of a first party cookie, in the first domain (B).</claim-text></claim-text></claim><claim id="c-en-01-0018" num="0018"><claim-text>A computer-readable medium comprising computer executable code which when loaded and run on a computer, or set of computers, cause the computer or set of computers to carry out any one of the methods claimed in claims 1 to 13 or 16.</claim-text></claim></claims><claims mxw-id="PCLM56986231" lang="FR" load-source="patent-office"><!-- EPO <DP n="52"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé de réglage d'un cookie propriétaire, dans un premier domaine (B), sur un dispositif client (6) comprenant les étapes de :
<claim-text>recevoir à un premier serveur (4B), un message http incluant l'information de référant d'un navigateur (7) en fonctionnement sur le dispositif client (6), où le navigateur comprend une page web qui est chargée dans le premier domaine (B), et où la page web comprend un code qui, lorsqu'il est exécuté, instruit le navigateur d'envoyer le message http au premier serveur (48) ;</claim-text>
<claim-text>vérifier l'information de référant dans le message http pour déterminer si le référant est dans un domaine (A) parmi un ensemble prédéterminé de domaines (A, C), et si le référant est dans un domaine dans l'ensemble prédéterminé de domaines (A, C), envoyer un message au navigateur (7) instruisant le navigateur d'envoyer un message http incluant un cookie propriétaire dans le domaine du référant (A) à un deuxième serveur (4A), le deuxième serveur étant dans le même domaine (A) que le référant, où le domaine du référant (A) est différent du premier domaine (B) ;</claim-text>
<claim-text>recevoir au deuxième serveur (4A) le message http du navigateur et extraire des données du cookie propriétaire, dans le domaine du référant prévent dans l'en-tête du message http ;</claim-text>
<claim-text>déterminer des données qui doivent être incluses dans le cookie propriétaire, dans le premier domaine (B), résidant sur le dispositif client (6) en fonction des données extraites du cookie dans le domaine du référant (A) ; et</claim-text>
<claim-text>envoyer un message au navigateur dans lequel la page web dans le premier domaine est chargée, le message incluant un code qui, lorsqu'il est exécuté par le dispositif client (6), entraînera le réglage d'un cookie propriétaire dans le premier domaine (B), incluant les données déterminées dans l'étape de détermination.</claim-text><!-- EPO <DP n="53"> --></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, qui comprend l'étape suivante, avant la vérification de l'étape d'information de référant, consistant à vérifier l'absence d'un contexte de session entre le navigateur (7) et le premier serveur (4B).</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon la revendication 1 ou la revendication 2, dans lequel l'étape d'extraction de données du cookie présent dans l'en-tête du message http comprend l'étape consistant extraire une session ID du cookie.</claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon la revendication 3, dans lequel le message envoyé au navigateur, dans lequel la page web dans le premier domaine est chargée, comprend une instruction pour produire un cookie incluant une session ID déterminée en fonction de la session ID extraite.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon l'une quelconque des revendications précédentes, où le procédé comprend l'étape suivante consistant à recevoir d'autres messages, au premier serveur (4B), d'au moins une de la même page et d'une autre page, dans le navigateur (7) qui comprend des données dérivées du cookie généré.</claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Procédé selon l'une quelconque des revendications précédentes, où le procédé comprend l'étape suivante de la réception par le premier serveur (4B) d'une pluralité de messages et la détermination si les messages proviennent de la même session du navigateur en fonction des données, dérivées du cookie, présent dans chaque message.</claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Procédé selon l'une quelconque des revendications précédentes, comprenant, après les étapes définies dans la revendication 1, les étapes suivantes de :<!-- EPO <DP n="54"> -->
<claim-text>recevoir à un troisième serveur (4C), un message http incluant l'information du référant d'un navigateur (7) en fonctionnement sur le dispositif client (6), où le navigateur comprend une page web qui est chargée dans un troisième domaine (C) ;</claim-text>
<claim-text>vérifier l'information du référant dans le message http et, lors de la détermination que le référant est dans le premier domaine (B), envoyer un message au navigateur instruisant le navigateur (7) d'envoyer un message http au premier serveur (4B), le message http incluant dans son entête un cookie propriétaire dans le premier domaine (B) ;</claim-text>
<claim-text>recevoir au premier serveur (4B), le message http du navigateur (7) et extraire des données du cookie propriétaire, dans le premier domaine (B), présent dans l'en-tête du message http ;</claim-text>
<claim-text>déterminer les données qui doivent être incluses dans un cookie propriétaire, dans le troisième domaine (C), résident sur le dispositif client (6) en fonction des données extraites du cookie, dans le premier domaine (B) ; et</claim-text>
<claim-text>envoyer un message au navigateur incluant un code qui, lorsqu'il est exécuté par le dispositif client (6), entraînera le réglage d'un cookie propriétaire dans le troisième domaine (C), incluant les données déterminées dans l'étape de détermination.</claim-text></claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Procédé selon l'une quelconque des revendications précédentes, dans lequel est réalisé un ensemble de serveurs (4A, 4B, 4C) comprenant au moins le premier serveur (4B) et le deuxième serveur (4A), chaque serveur dans l'ensemble étant dans un domaine différent dans l'ensemble prédéterminé de domaines (A,C) et étant agencé pour exécuter sélectivement des étapes correspondant à chacune des étapes définies dans l'une quelconque des revendications précédentes.<!-- EPO <DP n="55"> --></claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Procédé selon la revendication 8, dans lequel le procédé comprend l'étape de réception, par chaque serveur (4A, 4B, 4C) dans l'ensemble de serveurs, d'un message http d'une page active respective dans un navigateur (7) en fonctionnement sur le dispositif client (6), chaque page respective étant dans le même domaine que le serveur respectif.</claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Procédé de surveillance de site web comprenant un procédé selon l'une quelconque des revendications précédentes et l'étape suivante consistant à recevoir, du navigateur (7) en fonctionnement sur le dispositif client (6), des informations de surveillance concernant au moins une parmi des interactions de pages web et de performance.</claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Procédé selon la revendication 10, comprenant l'étape consistant à réaliser au moins un serveur de collecte pour recueillir les informations de surveillance.</claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>Procédé selon l'une des revendications 10 et 11 lorsqu'elles dépendent de la revendication 8, où il y a un ensemble de serveurs de collecte correspondant à l'ensemble de serveurs, chacun des serveurs de collecte étant dans le même domaine qu'un serveur respectif parmi les serveurs.</claim-text></claim><claim id="c-fr-01-0013" num="0013"><claim-text>Procédé selon la revendication 12, comprenant l'étape de réception par chaque serveur de collecte dans l'ensemble des serveurs de collecte, du navigateur en fonctionnement sur le dispositif client, des informations de surveillance concernant au moins une parmi les interactions de page web et de performance, à l'égard des pages web dans le même domaine que le serveur de collecte respectif.</claim-text></claim><claim id="c-fr-01-0014" num="0014"><claim-text>Système pour provoquer le réglage d'un cookie propriétaire, dans un premier domaine (B), sur un<!-- EPO <DP n="56"> --> dispositif client (6), l'appareil comprenant un premier serveur (4B) et un deuxième serveur (4A),<br/>
le premier serveur (48) étant agencé sous la commande du logiciel pour :
<claim-text>recevoir un message http incluant l'information du référant d'un navigateur (7) en fonctionnement sur le dispositif client (6), où le navigateur comprend une page web qui est chargée dans le premier domaine, et où la page web comprend un code qui, lorsqu'il est exécuté, instruit le navigateur d'envoyer le message http au premier serveur (4B) ;</claim-text>
<claim-text>vérifier l'information du référant dans le message http pour déterminer si le référant est dans un domaine parmi un ensemble prédéterminé de domaines (A, C) et si le référant est dans un domaine dans l'ensemble prédéterminé de domaines (A,C), envoyer un message au navigateur (7) instruisant le navigateur d'envoyer un message http incluant un cookie propriétaire dans le domaine du référant (A) à un deuxième serveur (4A), le deuxième serveur (4A) étant dans le même domaine que le référant (A), où le domaine du référant (A) est différent du premier domaine (B) ;</claim-text>
le deuxième serveur (4A) étant agencé sous la commande du logiciel pour :
<claim-text>recevoir le message http du navigateur (7) et extraire des données du cookie propriétaire, dans le domaine du référant (A), présent dans l'en-tête du message http ;</claim-text>
<claim-text>déterminer les données qui doivent être incluses dans un cookie propriétaire, dans le premier domaine (B), résident sur le dispositif client, en fonction des données extraites du cookie dans le domaine du référant (A) ; et</claim-text>
<claim-text>envoyer un message au navigateur dans lequel la page web dans le premier domaine est chargée, le message incluant un code qui, lorsqu'il est exécuté par le dispositif client (6), provoquera le réglage d'un cookie propriétaire dans le premier domaine (B), incluant les données déterminées à l'étape de détermination.</claim-text><!-- EPO <DP n="57"> --></claim-text></claim><claim id="c-fr-01-0015" num="0015"><claim-text>Système selon la revendication 14, comprenant un ensemble de serveurs (4A, 4B, 4C) comprenant au moins le premier serveur et le deuxième serveur, chaque serveur dans l'ensemble étant dans un domaine différent dans l'ensemble prédéterminé de domaines (A,B,C), et chacun étant agencé sous la commande du logiciel pour exécuter sélectivement les opérations définies dans la revendication 14.</claim-text></claim><claim id="c-fr-01-0016" num="0016"><claim-text>Procédé de réglage d'un cookie propriétaire, dans un premier domaine (B), sur un dispositif client (6), comprenant les étapes de :
<claim-text>charger une page web dans un navigateur (7) du dispositif client, la page web étant dans le premier domaine et incluant des instructions pour un message http incluant l'information du référant à envoyer du navigateur à un premier serveur (4B) ;</claim-text>
<claim-text>envoyer le message http, incluant l'information du référant, du navigateur au premier serveur ;</claim-text>
<claim-text>recevoir un message dans le navigateur, du premier serveur, instruisant le navigateur (7) d'envoyer un message http incluant un cookie propriétaire dans le domaine du référant (A) dans l'en-tête du message http à un deuxième serveur (4A), le deuxième serveur (4A) étant dans le même domaine que le référant, où le domaine du référant (A) est différent du premier domaine (B) ;</claim-text>
<claim-text>envoyer du navigateur (7) le message http au deuxième serveur (4A) incluant le cookie propriétaire, dans le domaine du référant (A), dans l'en-téte du message http ;</claim-text>
<claim-text>recevoir un message, du deuxième serveur (4A) au navigateur dans lequel la page dans le premier domaine est chargée, où le message comprend un code qui, lorsqu'il est exécuté par le navigateur, entraînera le réglage d'un cookie propriétaire dans le premier domaine (B), incluant les données déterminées en fonction du contenu du cookie propriétaire dans le domaine du référant (A) telles que reçues par le deuxième serveur ; et<!-- EPO <DP n="58"> --></claim-text>
<claim-text>exécuter le code dans le navigateur (7) en fonctionnement sur le dispositif client (6) pour provoquer la génération d'un cookie propriétaire, dans le premier domaine.</claim-text></claim-text></claim><claim id="c-fr-01-0017" num="0017"><claim-text>Dispositif client (6) agencé sous la commande d'un logiciel pour :
<claim-text>charger une page web dans un navigateur (7) du dispositif client, la page web étant dans le premier domaine et incluant des instructions pour un message http incluant une information de référant à envoyer du navigateur à un premier serveur (4B) ;</claim-text>
<claim-text>envoyer le message http, incluant l'information du référant, du navigateur au premier serveur ;</claim-text>
<claim-text>recevoir un message dans le navigateur (7), du premier serveur (4B), instruisant le navigateur (7) d'envoyer un message http incluant un cookie propriétaire dans le domaine du référant (A) dans l'en-tête du message http à un deuxième serveur (4A), le deuxième serveur (4A) étant dans le même domaine que le référant (A), où le domaine du référant (A) est différent du premier domaine (B) ;</claim-text>
<claim-text>envoyer du navigateur (7) le message http au deuxième serveur (4A) incluant le cookie propriétaire, dans le domaine du référant (A), dans l'en-tête du message http ;</claim-text>
<claim-text>recevoir un message du deuxième serveur (4A), au navigateur dans lequel la page dans le premier domaine est chargée, où le message comprend un code qui, lorsqu'il est exécuté par le navigateur, provoquera le réglage d'un cookie propriétaire dans le premier domaine (B), incluant les données déterminées en fonction du contenu du cookie propriétaire dans le domaine du référant telles que reçues par le deuxième serveur (4A) ; et</claim-text>
<claim-text>exécuter le code dans le navigateur (7) en fonctionnement sur le dispositif client (6) pour provoquer la génération d'un cookie propriétaire, dans le premier domaine (B).</claim-text><!-- EPO <DP n="59"> --></claim-text></claim><claim id="c-fr-01-0018" num="0018"><claim-text>Support lisible par ordinateur comprenant un code exécutable par l'ordinateur qui, lorsqu'il est chargé et exécuté sur un ordinateur, ou un ensemble d'ordinateurs, entraînera l'ordinateur ou l'ensemble d'ordinateurs à exécuter l'un quelconque des procédés revendiqués dans les revendications 1 à 13 ou 16.</claim-text></claim></claims><drawings mxw-id="PDW16672392" load-source="patent-office"><!-- EPO <DP n="60"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="224" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="61"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="62"> --><figure id="f0003" num="2"><img id="if0003" file="imgf0003.tif" wi="127" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="63"> --><figure id="f0004" num="3"><img id="if0004" file="imgf0004.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="64"> --><figure id="f0005" num="4"><img id="if0005" file="imgf0005.tif" wi="165" he="223" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
