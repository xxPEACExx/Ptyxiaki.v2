<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-1978654-B1" country="EP" doc-number="1978654" kind="B1" date="20140108" family-id="38287270" file-reference-id="311113" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146588749" ucid="EP-1978654-B1"><document-id><country>EP</country><doc-number>1978654</doc-number><kind>B1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-07702125-A" is-representative="YES"><document-id mxw-id="PAPP154850941" load-source="docdb" format="epo"><country>EP</country><doc-number>07702125</doc-number><kind>A</kind><date>20070118</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553932" ucid="CN-200610033194-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>200610033194</doc-number><kind>A</kind><date>20060118</date></document-id></priority-claim><priority-claim mxw-id="PPC140553173" ucid="CN-200610077569-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>200610077569</doc-number><kind>A</kind><date>20060425</date></document-id></priority-claim><priority-claim mxw-id="PPC140552073" ucid="CN-200610081096-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>200610081096</doc-number><kind>A</kind><date>20060525</date></document-id></priority-claim><priority-claim mxw-id="PPC140555371" ucid="CN-2007000193-W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2007000193</doc-number><kind>W</kind><date>20070118</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130710</date></intention-to-grant-date><search-report-dispatch-date><date>20090619</date></search-report-dispatch-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989326531" load-source="ipcr">H04L   5/00        20060101AFI20131128BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1989619946" load-source="docdb" scheme="CPC">H04Q2011/0084      20130101 LA20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989628556" load-source="docdb" scheme="CPC">H04L  12/2861      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989636154" load-source="docdb" scheme="CPC">H04L  12/2885      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989636359" load-source="docdb" scheme="CPC">H04Q  11/0067      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989643956" load-source="docdb" scheme="CPC">H04L  12/289       20130101 LA20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989647406" load-source="docdb" scheme="CPC">H04J   3/1694      20130101 FI20130101BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132370880" lang="DE" load-source="patent-office">VERFAHREN ZUR ABBILDUNG DES DIENSTSTROMS AUF DEN DIENSTÜBERTRAGUNGSKANAL, SYSTEM UND OPTISCHER NETZWERKABSCHLUSS DAFÜR</invention-title><invention-title mxw-id="PT132370881" lang="EN" load-source="patent-office">A METHOD FOR MAPPING THE SERVICE STREAM TO THE SERVICE TRANSMISSION CHANNEL, SYSTEM AND OPTICAL NETWORK TERMINATOR THEREOF</invention-title><invention-title mxw-id="PT132370882" lang="FR" load-source="patent-office">PROCÉDÉ PERMETTANT D'ÉTABLIR UNE CORRESPONDANCE ENTRE UN FLUX DE SERVICE ET UN CANAL DE TRANSMISSION DE SERVICE, SYSTÈME ET TERMINATEUR DE RÉSEAU OPTIQUE ASSOCIÉS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919519431" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR919526552" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919516854" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WU WEI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919528691" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WU, WEI</last-name></addressbook></inventor><inventor mxw-id="PPAR919024550" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WU, WEI</last-name><address><street>Huawei Administration Building Bantian, Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919546216" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>GAO HAI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919512446" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>GAO, HAI</last-name></addressbook></inventor><inventor mxw-id="PPAR919024551" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>GAO, HAI</last-name><address><street>Huawei Administration Building Bantian, Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919544824" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>NIU LEHONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919532830" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>NIU, LEHONG</last-name></addressbook></inventor><inventor mxw-id="PPAR919024552" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>NIU, LEHONG</last-name><address><street>Huawei Administration Building Bantian, Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919544385" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>OUYANG WEILONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919518039" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>OUYANG, WEILONG</last-name></addressbook></inventor><inventor mxw-id="PPAR919024553" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>OUYANG, WEILONG</last-name><address><street>Huawei Administration Building Bantian, Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR919024555" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>100970540</iid><address><street>Huawei Administration Building Bantian</street><city>Longgang District, Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR919024554" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Casalonga, Axel</last-name><suffix>et al</suffix><iid>101159302</iid><address><street>Casalonga &amp; Partners Bayerstrasse 73</street><city>80335 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2007000193-W"><document-id><country>CN</country><doc-number>2007000193</doc-number><kind>W</kind><date>20070118</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2007082478-A1"><document-id><country>WO</country><doc-number>2007082478</doc-number><kind>A1</kind><date>20070726</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549925275" load-source="docdb">AT</country><country mxw-id="DS549896139" load-source="docdb">BE</country><country mxw-id="DS549873173" load-source="docdb">BG</country><country mxw-id="DS549789852" load-source="docdb">CH</country><country mxw-id="DS549883553" load-source="docdb">CY</country><country mxw-id="DS549925276" load-source="docdb">CZ</country><country mxw-id="DS549896140" load-source="docdb">DE</country><country mxw-id="DS549883558" load-source="docdb">DK</country><country mxw-id="DS549883559" load-source="docdb">EE</country><country mxw-id="DS549788252" load-source="docdb">ES</country><country mxw-id="DS549873178" load-source="docdb">FI</country><country mxw-id="DS549873179" load-source="docdb">FR</country><country mxw-id="DS549896145" load-source="docdb">GB</country><country mxw-id="DS549883560" load-source="docdb">GR</country><country mxw-id="DS549925277" load-source="docdb">HU</country><country mxw-id="DS549789861" load-source="docdb">IE</country><country mxw-id="DS549896146" load-source="docdb">IS</country><country mxw-id="DS549873180" load-source="docdb">IT</country><country mxw-id="DS549883561" load-source="docdb">LI</country><country mxw-id="DS549880050" load-source="docdb">LT</country><country mxw-id="DS549925278" load-source="docdb">LU</country><country mxw-id="DS549880051" load-source="docdb">LV</country><country mxw-id="DS549880052" load-source="docdb">MC</country><country mxw-id="DS549925279" load-source="docdb">NL</country><country mxw-id="DS549789862" load-source="docdb">PL</country><country mxw-id="DS549880053" load-source="docdb">PT</country><country mxw-id="DS549925280" load-source="docdb">RO</country><country mxw-id="DS549925281" load-source="docdb">SE</country><country mxw-id="DS549880058" load-source="docdb">SI</country><country mxw-id="DS549789863" load-source="docdb">SK</country><country mxw-id="DS549805306" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63961167" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD OF THE INVENTION</heading><p id="p0001" num="0001">The invention relates generally to the field of optical network technology, and more particularly, to a method, a system and an Optical Network Terminal (ONT) for mapping a service flow to a service transmission channel.</p><heading id="h0002">BACKGROUND</heading><p id="p0002" num="0002">Current broadband access technology mainly includes copper line access technology and optical access technology. An access network implemented with optical access technology is called an Optical Access Network (OAN). Passive Optical Network (PON) technology is an optical access technology with a point to multipoint transmission. A Giga-bit PON (GPON) is an evolution based on PON, which meets a higher rate requirement.</p><p id="p0003" num="0003"><figref idrefs="f0001">Figure 1</figref> is a diagram showing the structure of a prior art PON system. The PON system mainly includes three parts, which are an Optical Line Terminal (OLT), an Optical Distribution Network (ODN) and an Optical Network Unit (ONU).</p><p id="p0004" num="0004">The OLT is used to provide a Network Side Interface (SNI) for the OAN, and to connect one or a plurality of ODNs. The ODN is used to distribute the downlink data from the OLT to each ONU via optical lines, and to make the uplink data from the ONU converge upon the OLT. The ONU is used to provide a User-side Network Interface (UNI), and to connect the ODN. An ONU is called an ONT if it also provides a function such as a user port for Ethernet or a user port for Plain Old Telephone Service (POTS). For the convenience of description, the ONU and the ONT are generally called the ONT.</p><p id="p0005" num="0005">In a GPON system, the OLT controls the ONT by means of an ONT Management and Control Interface (OMCI). Similar to ordinary service data, data in the OMCI is encapsulated by an OMCI Adapter into Asynchronous Transfer Mode (ATM) cell or Giga-bit PON Encapsulation Method (GEM) data blocks for transmission.</p><p id="p0006" num="0006">Service flows with GEM encapsulation are multiplexed by a Giga-bit PON Encapsulation Method PORT (GEM PORT) inside a Transmission Container (T-CONT). Each GEM PORT is assigned a GEM PORT identification (GEM PORT-ID). Service flows with ATM encapsulation are multiplexed by a Permanent Virtual Path / Permanent Virtual Channel (PVP/PVC) inside the T-CONT. Each PVP/PVC is assigned a Virtual Path<!-- EPO <DP n="2"> --> Identification / Virtual Channel Identification (VPI/VCI). A Dynamic Bandwidth Assignment (DBA) Control module in a GPON Transmission Convergence (GTC) layer assigns dynamical bandwidths for each ONT by monitoring and managing all T-CONTs.</p><p id="p0007" num="0007">Descriptions are made below for GEM encapsulation, but all the descriptions also apply to ATM encapsulation.</p><p id="p0008" num="0008"><figref idrefs="f0001">Figure 2</figref> is a diagram showing the structure of the ONT bearing Ethernet services in the prior art. The ONT includes a Media Access Control (MAC) Bridge Module and an 802.1p Priority Mapping Module. The MAC Bridge Module may alternatively be a plain Ethernet Port Adapter Module.</p><p id="p0009" num="0009">In the ONT, the MAC Bridge Module realizes the function of Ethernet switching, and supports the access to a plurality of Ethernet interfaces. The MAC Bridge Module receives Ethernet frames from external Ethernet ports P1, P2 and P3, and switches the Ethernet frames by an internal Ethernet switching function to the internal Ethernet port P0 connected with 802.1p Priority Mapping Module. The 802.1p Priority Mapping Module receives Ethernet service flows from the internal Ethernet port, and maps Ethernet frames with different 802.1p priorities to different GEM PORTs, or maps Ethernet frames with a plurality of 802.1p priorities to one GEM PORT.</p><p id="p0010" num="0010">The operation of 802.1p priority mapping is specifically realized by means of OLT scheduling. The OLT, via the OMCI channel, instructs the ONT to map Ethernet frames with different 802.1p priorities to corresponding GEM ports. In the OMCI protocol, various data of the OLT managing ONT is abstracted into a protocol-independent Management Information Base (MIB), and the basic information element for the MIB is the Manage Entity (ME). Based on the ONT configurations of various types, the OMCI defines each ME with which the OLT controls ONT. The ONT realizes the configuration management functions of each ME under the control of the OLT.</p><p id="p0011" num="0011">According to the current GPON technical standards, the ONT supports only the function of mapping Ethernet frames to a GEM PORT according to the 802.1p priorities, but does not support the function of mapping to different GEM PORTs according to other message characteristics. The other message characteristics mentioned here include: a Virtual Local Area Network (VLAN) ID, a Different Service Code Point (DSCP) field of the IP layer, an IP or MAC source address, an IP or MAC destination address, a protocol type, a TCP/UDP port number, etc. If Ethernet frames cannot be mapped to different GEM PORTs according to arbitrary message characteristics, it is not possible to provide specific QoS<!-- EPO <DP n="3"> --> services via a single T-CONT for Ethernet frames with arbitrary message characteristics. Therefore, existing standards cannot satisfy the requirements in case of precise service classification and QoS guarantee.</p><p id="p0012" num="0012">Additionally, in the GPON system, each ONT may be accessed by one or a plurality of multicast users. Referring to the diagram illustrating the multicast service transmission in the prior art in <figref idrefs="f0002">Figure 3</figref>, the OLT performs authentication processing after it receives an IGMP request message from a multicast user, and requests a multicast program stream specified by the user from a network side multicast source server when the authentication is successful. The specified multicast program stream is sent by the multicast source server to the OLT, and the multicast service flow is copied by the OLT to each multicast user via each ONT. In the mean time, the OLT periodically sends IGMP inquiry messages to the multicast user to detect whether the multicast user is online. The IGMP request message and the IGMP inquiry message may each be called an IGMP control message. In the current GPON technology standard, the IGMP control messages are usually transmitted being mixed with data service such as that for surfing the Internet. Because the priority of the data service such as that for surfing the Internet is low, the QoS of IGMP control messages may not be guaranteed, thereby directly affecting the performance of multicast services.</p><p id="p0013" num="0013">Document 1 (<nplcit id="ncit0001" npl-type="b"><text>ANGELOPOULOS J D ET AL: "EFFICIENT TRANSPORT OF PACKETS WITH QOS IN AN FSAN-ALIGNED GPON" IEEE COMMUNICATIONS MAGAZINE, IEEE SERVICE CENTER, PISCATAWAY, US, vol.42, no.2, 1 February 2004, pages 92-98, XP001047862 ISSN:0163-6804</text></nplcit>) discloses a method for mapping a service follow to a service transmission channel.</p><p id="p0014" num="0014">Document 2 ("<nplcit id="ncit0002" npl-type="s"><text>Gigabit-capable Passive Optical Networks (G-PON): ONT management and control interface specification; G.984.4 (06/04)" ITU-T STANDARD IN FORCE (I), INTERNATIONAL TELECOMMUNICATION UNION, GENEVA, CH, no.G.984.4 (06/04), 13 June 2004, pages 6-11</text></nplcit>, XP017401197) discloses the ONT management and control interface specification in the ITS-T G.984.4.</p><p id="p0015" num="0015">The above is only a description of the transmission of IGMP control messages, but in fact, the same problems exist for other uplink control messages. The other uplink control messages include: control messages for Ethernet bearing PPP protocol (PPPoE), control messages for Dynamic Host Configuration Protocol (DHCP), control messages for Session Initialization Protocol (SIP), etc.</p><heading id="h0003">SUMMARY</heading><p id="p0016" num="0016">Therefore, in one aspect, one embodiment of the invention provides a method for mapping a service flow to a service transmission channel in a PON system, In another aspect, one embodiment of the invention provides a system and an ONT for mapping a service flow to a service transmission channel in a PON system. Service flows may be mapped to different service transmission channels based on the message characteristics of the service flows, in order to guarantee the QoS of sub-divided services.</p><p id="p0017" num="0017">One embodiment of the invention provides a method for mapping a service flow to a service transmission channel, including:<!-- EPO <DP n="4"> --><!-- EPO <DP n="5"> -->
<ol><li>A. configuring configuration parameters for a message characteristic into an Optical Network Terminal (ONT);</li><li>B. mapping a service flow to a specified service transmission channel when it is determined that the service flow matches the configured message characteristic after the service flow is received by the ONT.</li></ol></p><p id="p0018" num="0018">The configuration parameters for the message include a message characteristic, an offset position in bytes of the message characteristic a mask for the message characteristic and an identifier of the specified service transmission channel. The operation of determining is based on the mask for the message characteristic.</p><p id="p0019" num="0019">The step B comprises: performing one by one a bitwise AND operation on the configured mask and the corresponding message characteristic after the service flow is received by the ONT, to obtain a first operation result; performing a bitwise AND operation on the mask and a part of data with a byte number being identical to a corresponding message characteristic in a service flow data frame determined based on an offset position in bytes of the corresponding message characteristic, to obtain a second operation result; comparing the first operation result with the second operation result; stropping the comparing when it is determined that the first operation result matches the second operation result, and mapping the service flow to a service transmission channel which the identitier of the specified service transmission channel corresponds to.</p><p id="p0020" num="0020">One embodiment of the invention provides a system for mapping a service flow to a service transmission channel, including an ONT and an OLT.</p><p id="p0021" num="0021">The OLT is configured to receive configuration parameters for a message characteristic from a configuration terminal, and to send the configuration parameters for the message characteristic to the ONT after processing.</p><p id="p0022" num="0022">The ONT is configured to receive the configuration parameters for the message characteristic distributed by the OLT, and perform configuration; and to map the service flow to a specified service transmission channel, when it is determined that the received service flow matches the configured message characteristic after the service flow is received. The configuration parameters for the message include a message characteristic, an offset position in bytes of the message characteristic a mask for the message characteristic and an identifier of the specified service transmission channel. The operation of determining is based on the mask for the message characteristic.</p><p id="p0023" num="0023">The mapping by the ONT (91. 101) comprises: performing one by one a bitwise AND operation on the configured mask and the corresponding message characteristic after the service flow is received by the ONT, to obtain a first operation result; performing a bitwise AND operation on the mask and a part of data with a byte number being identical to a corresponding message characteristic in a service flow data frame determined based on an offset position in bytes of the corresponding message characteristic, to obtain second operation result; comparing the first operation result with the second operation result; stopping the comparing when it is determined that the first operation result matches the second operation result, and mapping the service flow to a service transmission channel which the identifier of the specified service transmission channel corresponds to.</p><p id="p0024" num="0024">An Optical Network Terminal (ONT) provided in one embodiment of the invention includes a service proeessing module and a general service flow mapping module.</p><p id="p0025" num="0025">The service processing module is configured to receive a service flow from a user, and to send the service flow to the general service flow mapping module.</p><p id="p0026" num="0026">The general service flow mapping module is configured for configuring contiguration parameters for a message characteristic distributed by the OLT, receiving the service flow from the service flow processing module, and mapping the service flow to the service transmission channel in a specified optical network protocol processing module when it is determined that the received service flow matches the configured message characteristic. The configuration parameters for the message include a message characteristic, an offset position in bytes of the message characteristic a mask for the message characteristic and an identifier of the specified service transmission channel. The operation of determining is based on the mask for the message characteristic.</p><p id="p0027" num="0027">The message characteristic matching module comprises a second message characteristic matching module, configured to: receive the service flow from the service processing module (71); and perform one by one a bitwise AND operation on the configured message characteristic and a corresponding mask to obtain a first operation result; perform a bitwise AND operation on the mask and a part of data with a byte number being identical to the message characteristic in a service flow data frame determined based on an offset position in bytes of a corresponding message characteristic, to obtain second operation result: compare the first operation result with the second operation result; stop the comparing operation when it is determined that the first operation result matches the second operation result and send a mapping instruction to the service flow mapping module.</p><p id="p0028" num="0028">The method, system and ONT for mapping a service flow to a service transmission channel provided in one embodiment of the invention, map a service flow which matches a configured message characteristic to a specified service transmission channel, when the ONT determines that the received service flow matches the configured message characteristic by configuring the determined configuration parameters for the message characteristic into the ONT. Therefore, the method, system and ONT provided in one embodiment of the invention may support the mapping of service flows to different service transmission channels according to predetermined arbitrary message characteristics, ensuring the QoS requirement of sub-divided service flows. The arbitrary message characteristics<!-- EPO <DP n="6"> --><!-- EPO <DP n="7"> --><!-- EPO <DP n="8"> --><!-- EPO <DP n="9"> --> include: 802.1 p priority, VLAND ID, DSCP field of an IP layer, IP or MAC source address, IP or MAC destination address, protocol type, and TCP/UDP port number, etc.</p><heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0029" num="0029"><ul><li><figref idrefs="f0001">Figure 1</figref> is a diagram showing the structure of a prior art PON system;</li><li><figref idrefs="f0001">Figure 2</figref> is a diagram showing the structure of a prior art ONT providing Ethernet services;</li><li><figref idrefs="f0002">Figure 3</figref> is a diagram showing a multicast service transmission in the prior art;</li><li><figref idrefs="f0002">Figure 4</figref> is a flow chart showing the method for mapping a service flow to a service transmission channel in the first embodiment of the invention;</li><li><figref idrefs="f0003">Figure 5</figref> is a flow chart showing the method for mapping a service flow to a service transmission channel in the second embodiment of the invention;</li><li><figref idrefs="f0003">Figure 6a</figref> is a diagram showing the first T-CONT assignment model in one embodiment of the invention;</li><li><figref idrefs="f0004">Figure 6b</figref> is a diagram showing the second T-CONT assignment model in one embodiment of the invention;</li><li><figref idrefs="f0004">Figure 6c</figref> is a diagram showing the third T-CONT assignment model in one embodiment of the invention;</li><li><figref idrefs="f0005">Figure 6d</figref> is a diagram showing the fourth T-CONT assignment model in one embodiment of the invention;</li><li><figref idrefs="f0005">Figure 7</figref> is a diagram showing the structure of an ONT in one embodiment of the invention;</li><li><figref idrefs="f0006">Figure 8a</figref> is a first ME relationship diagram supporting a general service flow mapping in the invention;</li><li><figref idrefs="f0006">Figure 8b</figref> is a second ME relationship diagram supporting a general service flow mapping in the invention;</li><li><figref idrefs="f0007">Figure 9</figref> is a flow chart showing the configuration for a general service flow mapping in the invention; and</li><li><figref idrefs="f0007">Figure 10</figref> is a flow chart showing the cancellation of the configuration for a general service flow mapping in the invention</li></ul><!-- EPO <DP n="10"> --></p><heading id="h0005">DETAILED DESCRIPTION</heading><p id="p0030" num="0030">The invention is described as follows in detail by reference to the accompanying figures and embodiments, in order to make the purposes, the technical solutions and the advantages of the invention more obvious.</p><p id="p0031" num="0031">The method for mapping a service flow to a service transmission channel provided in one embodiment of the invention includes: configuring configuration parameters for a message characteristic into an ONT; mapping a service flow to a specified service transmission channel when it is determined that the service flow matches the configured message characteristics after the service flow is received by the ONT.</p><p id="p0032" num="0032"><figref idrefs="f0002">Figure 4</figref> is a flowchart showing the method for mapping a service flow to a service transmission channel in the first embodiment of the invention. The method includes the following steps:
<ul><li>Step 401: The determined configuration parameters for message characteristics are configured into the ONT, in which each message characteristic configuration parameter includes message characteristics, an offset position in bytes of the message characteristic, and an identifier of the specified service transmission channel.</li></ul></p><p id="p0033" num="0033">The message characteristic is a value of a characteristic field in the message data frame, for example, for an IP address 10.11.1.1, the value of the message characteristic includes 4 bytes (00001010, 00001011, 00000001 and 00000001). The offset position in bytes of the message characteristic is that how many bytes spacing exist from the beginning of the message to the above specified message characteristic field. For example, the distance between the source IP address field and the beginning of the Ethernet message is 26 bytes.</p><p id="p0034" num="0034">The message characteristics in one embodiment of the invention may include: an Ethernet source address and an Ethernet source address group, an Ethernet destination address and an Ethernet destination address group, a VLAND ID, an 802.1p priority, an IP source address and an IP source address section, an IP destination address and an IP destination address section, an IP DSCP field, an IP protocol type, a TCP/UDP port number, etc. When in actual use, the set of message characteristics may be expanded time after time, resulting in its inclusion of the message characteristics in the general representation method of message characteristics. The length of the message characteristic has no limitation, but for the simplicity in hardware processing in actual applications, the length of the message characteristic is preferably 2 to the power of an integer, such as 4, 8 and 16 bytes.<!-- EPO <DP n="11"> --></p><p id="p0035" num="0035">The service transmission channel may be a GEM PORT of GEM manner, or a PVP/PVC of ATM encapsulation manner.</p><p id="p0036" num="0036">In step 402, a matching operation for a first type message characteristic is performed after a service flow is received by the ONT. If the matching is successful, step 403 is executed; otherwise, step 404 is executed.</p><p id="p0037" num="0037">The matching operation for the first type of message characteristic includes specifically the following steps: for one configured message characteristic parameter, first extract a part of data consisting of a small amounts of bytes which equal to the length of message characteristic field, the said part of data is extracted from a service flow data frame just at the offset position indicated by configuration parameter; then comparing the said part of data with the corresponding message characteristic field. Step 403 is executed if it is determined that the part of data and the corresponding message characteristic match each other. Step 404 is executed if it is determined by the ONT that the part of data in the service flow does not match any of the configured message characteristics.</p><p id="p0038" num="0038">Step 402 further includes before the message characteristic matching operation: determining by the ONT whether the ONT itself supports a general service flow mapping operation. If the ONT itself supports the general service flow mapping operation, the message characteristic matching procedure is executed; otherwise, mapping all service flows received to a fixed service transmission channel.</p><p id="p0039" num="0039">In step 403, the comparing operation is stopped, and the service flows with a matching message characteristic are mapped to a service transmission channel specified for the corresponding message characteristic.</p><p id="p0040" num="0040">In step 403, mapping the service flows with the matching message characteristic to the specified service transmission channel may further include remarking the priority of the service flow; or</p><p id="p0041" num="0041">Step 403 further includes before mapping the service flows with the matching message characteristic to the specified service transmission channel: remarking the priority of the service flow. In that case, mapping the service flows with the matching message characteristic to the specified service transmission channel includes: mapping the service flow to the specified service transmission channel according to the remarked priority.</p><p id="p0042" num="0042">In step 404, error alarm processing is performed and the operation by the ONT is stopped, or the service flow is mapped to a corresponding service transmission channel according to a predetermined default mapping method.<!-- EPO <DP n="12"> --></p><p id="p0043" num="0043">In the embodiment, step 404 is optional.</p><p id="p0044" num="0044">If the message characteristic is a sequence of continuous bytes in the message, the method shown in <figref idrefs="f0002">Figure 4</figref> may satisfy the requirement for hardware processing. If the message characteristic is not a sequence of continuous bytes in the message, but two value ranges, such as the specified value range of source IP address and TCP port number of message, the method shown in <figref idrefs="f0002">Figure 4</figref> may not be used. For the case that the message characteristic is not a sequence of continuous bytes in the message, the bytes which do not belong to the message characteristics sandwiched between the message characteristics are filtered out using a mask for message characteristic in one embodiment of the invention. The message characteristic mask may be represented using 1 matching or 0 matching. In the manner of 1 matching, each bit which is needed in the message characteristic field is represented with 1; each bit which is not needed in the message characteristic field is represented with 0. In the manner of 0 matching, each bit which is needed in the message characteristic field is represented with 0; each bit which is not needed in the message characteristic field is represented with 1. Thus, the message characteristic may be obtained by a bitwise AND operation between the message characteristic field and the mask for the message characteristic. By the combination of the message characteristic, the mask for the message characteristic and the offset position in bytes of the message characteristic, any message characteristic in the message, including the 9 types of message characteristic previously mentioned and other message characteristics, may be determined easily and quickly.</p><p id="p0045" num="0045"><figref idrefs="f0003">Figure 5</figref> is a flow chart showing the method for mapping a service flow into a service transmission channel in the second embodiment of the invention. The method includes the following steps.</p><p id="p0046" num="0046">In step 501, the determined configuration parameters for the message characteristic are configured into the ONT, in which, each message characteristic configuration parameter includes: a message characteristic, an offset position in bytes of the message characteristic, a mask for the message characteristic and an identifier of the specified service transmission channel.</p><p id="p0047" num="0047">In the embodiment, the mask for the message characteristic takes the form of 1 matching. For example, when a message with the source IP address of 10.11.1.0∼10.11.1.255 of a network section is to be identified, the message characteristic includes 4 bytes, in which 10.11.1.1 corresponds to (00001010, 00001011, 00000001 and 00000001), the mask for the<!-- EPO <DP n="13"> --> message characteristic may be specified as (11111111, 11111111, 11111111, 00000000). A bitwise AND operation is performed between the message characteristic and the mask for the message characteristic, and the obtained operation result is the characteristic of the network section 10.11.1.0∼10.11.1.255.</p><p id="p0048" num="0048">In step 502, a second type of message characteristic matching operation is performed after the ONT receives the service flow. If the message characteristic matching is successful, step 503 is executed; otherwise, step 504 is executed.</p><p id="p0049" num="0049">The second type of message characteristic matching operation includes specifically: performing one by one a bitwise AND operation on the mask for the message characteristic in the configured configuration parameters for the message characteristic and a corresponding message characteristic, to obtain a first operation result; performing a bitwise AND operation on a part of data with a byte number the same as a corresponding message characteristic in a service flow data frame determined based on an offset position in bytes of the corresponding message characteristic, and the mask for the corresponding message characteristic, to obtain a second operation result; comparing the first operation result and the second operation result; executing step 503 if it is determined that the first operation result and the second operation result match each other, and executing step 504 if it is determined by the ONT that the first operation result and the second operation result based on any of the configured configuration parameters for the message characteristic do not match each other.</p><p id="p0050" num="0050">Before the message characteristic matching operation, the step further includes determining by the ONT itself whether it supports the general service flow mapping operation. If the ONT supports the general service flow mapping operation, the message characteristic matching procedure is executed; otherwise, all the service flows received are mapped to a fixed service transmission channel.</p><p id="p0051" num="0051">In step 503, the comparison operation is stopped, and the service flow is mapped to the service transmission channel specified for the corresponding message characteristic.</p><p id="p0052" num="0052">In step 503, mapping the service flow with matching message characteristic to the specified service transmission channel further includes remarking the priority flag of the service flow; or</p><p id="p0053" num="0053">Before mapping the service flow with matching message characteristic to the specified service transmission channel, further including the step of remarking the priority of the service flow. In that case, mapping the service flow with matching message characteristic<!-- EPO <DP n="14"> --> to the specified service transmission channel includes mapping the service flow to the specified service transmission channel according to the remarked priority.</p><p id="p0054" num="0054">In step 504, the ONT performs error alarm processing, and the procedure ends; or the service flow is mapped to corresponding service transmission channels according to the predetermined default mapping method.</p><p id="p0055" num="0055">Step 504 in one of the embodiments is optional. The method shown in <figref idrefs="f0003">Figure 5</figref> also applies to the case that the message characteristic is a series of continuous bytes in the message. The way of selecting message characteristics, service transmission channels in the embodiment shown in <figref idrefs="f0003">Figure 5</figref> is the same as that in the embodiment shown in <figref idrefs="f0002">Figure 4</figref>, and will not be explained in detail here.</p><p id="p0056" num="0056">The methods in the embodiments shown in <figref idrefs="f0002">Figure 4</figref> and <figref idrefs="f0003">Figure 5</figref> may be applied to the uplink transmission of control messages. When the ONT receives the service flow, a message characteristic matching operation is performed, the control message service flow and the data message service flow in the service flow are mapped respectively to different transmission channels to be transmitted, and the high QoS requirement for the transmission of the control message service flow may be satisfied.</p><p id="p0057" num="0057">In order for the transmission of the control message service flow to have a high priority, the first method that may be used is to map the control message service flow matched with the configured message characteristic to a service transmission channel with high priority.</p><p id="p0058" num="0058">If the control message service flows of all users are mapped to the same T-CONT, mapping the control message service flow to a service transmission channel with high priority includes mapping the control message service flows of all users to the queue with high priority of the same T-CONT.</p><p id="p0059" num="0059">If the control message service flows of different users are mapped respectively to different T-CONT, mapping the control message service flow to a service transmission channel with high priority includes mapping the control message service flow of each user to the queue with high priority of the T-CONT corresponding to each user respectively.</p><p id="p0060" num="0060">In order for the transmission of the control message service flow to have a high priority, the second method that may be used is that the service transmission channel into which the control message service flow is mapped is set with a high priority by the ONT, after the control message service flows and data message service flows which match the<!-- EPO <DP n="15"> --> configured message characteristics are mapped respectively to different service transmission channels.</p><p id="p0061" num="0061">The method of setting the service transmission channel to which the control message service flow is mapped with a high priority includes, setting by the ONT the Type of the T-CONT to which the control message service flow is mapped, to Type 2.</p><p id="p0062" num="0062">In order for the transmission of the control message service flow to have a high priority, the third method that may be used is to perform high priority processing on the control message service flow on the OLT, after the control message service flows and data message service flows which match the configured message characteristics are mapped respectively to different service transmission channels.</p><p id="p0063" num="0063">Performing high priority processing on the control message service flow on the OLT includes sending by the OLT the received control message service flow to the network, and setting the control message service flow with high priority.</p><p id="p0064" num="0064">Setting the control message service flow with high priority includes setting the 802.1p of the control message service flow with high priority.</p><p id="p0065" num="0065">It should be noted that the three methods may each be used separately, or may be used in combination. For example, one method is used every time; or method 1 and 3 are used at the same time; or method 2 and 3 are used at the same time.</p><p id="p0066" num="0066">The control message may be an Internet Group Management Protocol (IGMP) control message, a PPP protocol on Ethernet (PPPoE) control message, a Dynamic Host Configuration Protocol (DHCP) control message or a Session Initiation Protocol (SIP) control message.</p><p id="p0067" num="0067">In the GPON Common Technical Standards (CTS), many different kinds of application methods are defined for the T-CONT assignment of the ONT, and <figref idrefs="f0003">Figure 6a</figref>, <figref idrefs="f0004">Figure 6b</figref>, <figref idrefs="f0004">Figure 6c</figref>, and <figref idrefs="f0005">Figure 6d</figref> may be referred to for detail. In <figref idrefs="f0003">Figure 6a</figref>, one T-CONT is assigned for each ONT. In <figref idrefs="f0004">Figure 6b</figref>, one T-CONT is assigned for each user of each ONT. In <figref idrefs="f0004">Figure 6c</figref>, one T-CONT is assigned for each type of service flows of each ONT. In <figref idrefs="f0005">Figure 6d</figref>, one T-CONT is assigned for each type of service flow of each user of each ONT.</p><p id="p0068" num="0068">The transmission of IGMP control messages and data messages on the ONT will be described with an IGMP control message as an example, and the four types of T-CONT assignment application method shown in <figref idrefs="f0003">Figure 6a</figref>, <figref idrefs="f0004">Figure 6b</figref>, <figref idrefs="f0004">Figure 6c</figref> and <figref idrefs="f0005">Figure 6d</figref>.</p><p id="p0069" num="0069">Referring to <figref idrefs="f0003">Figure 6a</figref>, the control messages of all users are mapped to the queue of high priority of the same T-CONT by the ONT. Specifically, for all users, after service<!-- EPO <DP n="16"> --> flows are received from users, the IGMP control messages and data messages in the service flows are mapped into queues with different priorities of the same T-CONT using the methods provided in the embodiments described with <figref idrefs="f0002">Figure 4</figref> and <figref idrefs="f0003">Figure 5</figref>, and sent to the OLT, in which the priorities of the IGMP control messages are higher than the priorities of the data messages. In other words, the IGMP control messages are mapped to queues with higher priorities of the T-CONT.</p><p id="p0070" num="0070">Referring to <figref idrefs="f0004">Figure 6b</figref>, the control messages of each user are mapped respectively by the ONT to queues of high priorities of the T-CONT to which each user corresponds to. Specifically, for each user, after the service flows are received from users by the ONT, the IGMP control messages and data messages in the service flows are mapped to queues with different priorities of the same T-CONT using the methods provided in the embodiments described with <figref idrefs="f0002">Figure 4</figref> and <figref idrefs="f0003">Figure 5</figref>, and sent to the OLT, in which the priorities of the IGMP control messages are higher than the priorities of the data messages. In other words, the IGMP control messages are mapped to queues with higher priorities of the T-CONT.</p><p id="p0071" num="0071">Referring to <figref idrefs="f0004">Figure 6c</figref>, the type of the T-CONT which the control messages of all users are mapped into is set as Type 2 by the ONT. Specifically, for all users, after the service flows are received from users by the ONT, the IGMP control messages and data messages in the service flows are mapped to queues of different T-CONT using the methods provided in the embodiments described with <figref idrefs="f0002">Figure 4</figref> and <figref idrefs="f0003">Figure 5</figref>, and sent to the OLT. The type of the T-CONT to which the IGMP control messages correspond is set as Type 2.</p><p id="p0072" num="0072">Referring to <figref idrefs="f0005">Figure 6d</figref>, the type of the T-CONT which the control messages of each user are in is set as Type 2. Specifically, for each user, after the service flows are received from users by the ONT, the IGMP control messages and data messages in the service flows are mapped to queues of different T-CONT using the methods provided in the embodiments described with <figref idrefs="f0002">Figure 4</figref> and <figref idrefs="f0003">Figure 5</figref>, and sent to the OLT. The type of the T-CONT to which the IGMP control messages correspond is set as Type 2.</p><p id="p0073" num="0073">It is obvious from the above description, that using the methods provided in the embodiments of the invention may result in that the uplink control messages are transmitted in time, therefore, meeting the QoS requirement of the control messages.</p><p id="p0074" num="0074">The embodiments of the invention also provide a system for mapping a service flow to a service transmission channel, the system includes an ONT and an OLT, in which</p><p id="p0075" num="0075">the OLT is configured to receive configuration parameters for a message characteristic sent from a configuration terminal, to process the configuration parameters for<!-- EPO <DP n="17"> --> the message characteristic, and to send the configuration parameters for the message characteristic determined to the ONT;</p><p id="p0076" num="0076">the ONT is configured to configure the configuration parameters for the message characteristic distributed by the OLT, and to map the service flow to a specified service transmission channel when it is determined that the service flow received matches the message characteristic configured after the service flow from the user is received.</p><p id="p0077" num="0077">The ONT is further configured to remark the priority of the service flow when mapping the service flow to the specified service transmission channel; or further remark the priority of the service flow before mapping the service flow to the specified service transmission channel, and determine the specified service transmission channel according to the remarked priority.</p><p id="p0078" num="0078"><figref idrefs="f0005">Figure 7</figref> is a diagram showing the ONT structure in one embodiment of the invention. As shown in <figref idrefs="f0005">Figure 7</figref>, the ONT for mapping the service flow to the service transmission channel provided in one embodiment of the invention includes a service processing module 71 and a general service flow mapping module 72.</p><p id="p0079" num="0079">The service processing module 71 is configured to receive a service flow from a user, and to send the service flow received to the general service flow mapping module 72.</p><p id="p0080" num="0080">The general service flow mapping module 72 is configured to configure configuration parameters for a message characteristic distributed by the OLT, receiving the service flow from the service flow processing module, and mapping the service flow to a specified service transmission channel when it is determined that the service flow received matches the message characteristics configured.</p><p id="p0081" num="0081">The general service flow mapping module 72 is further configured to remark the priority of the service flow when the service flow is mapped to the specified service transmission channel; or further configured to remark the priority flag of the service flow before mapping the service flow to the specified service transmission channel, and determining the specified service transmission channel according to the remarked priority.</p><p id="p0082" num="0082">The general service flow mapping module 72 includes a message characteristic configuration module, a message characteristic matching module and a service flow mapping module.</p><p id="p0083" num="0083">The message characteristic configuration module is configured to receive the configuration parameters for the message characteristic from the service processing module 71 and performing configuration.<!-- EPO <DP n="18"> --></p><p id="p0084" num="0084">The message characteristic matching module is configured to receive the service flow from the service processing module 71, matching the message characteristics configured by the message characteristic configuration module with the service flow, stopping the comparing when the service flow matches the message characteristic, and sending an instruction for service flow mapping to the service flow mapping module.</p><p id="p0085" num="0085">The service flow mapping module is configured to receive the instruction for service flow mapping from the message characteristic matching module and mapping the service flow to the specified service transmission channel.</p><p id="p0086" num="0086">For the case that the message characteristic is a sequence of continuous bytes in the message, the message characteristic matching module includes a first message characteristic matching module, which is configured to receive the service flow from the service processing module 71, and determining one by one a part of data in a service flow data frame with a byte number the same as a corresponding message characteristic, based on the offset position in bytes of the message characteristics configured by the message characteristic configuration module, and comparing the part of data with the corresponding message characteristic, stopping the comparing when it is determined that the part of data and the corresponding message characteristic match each other, and sending the instruction for mapping to the service flow mapping module.</p><p id="p0087" num="0087">For the case that the message characteristic is a sequence of continuous or noncontinuous bytes in the message, the message characteristic matching module includes a second message characteristic matching module, which is configured to receive the service flow from the service processing module 71, and performing one by one a bitwise AND operation on the configured message characteristic and a corresponding mask to obtain a first operation result; performing a bitwise AND operation on the mask and a part of data with a byte number the same as the message characteristic in a service flow data frame determined based on an offset position in bytes of corresponding message characteristics, to obtain a second operation result; comparing the first operation result and the second operation result; stopping the comparing when it is determined that the first operation result and the second operation result match each other, and sending an instruction for mapping to the service flow mapping module.</p><p id="p0088" num="0088">The general service flow mapping module 72 may further include a priority determining module.</p><p id="p0089" num="0089">The service flow mapping module is further configured to send an instruction for determining the priority to the priority determining module, receiving feedback information<!-- EPO <DP n="19"> --> from the priority determining module, and mapping the service flow to a specified service transmission channel.</p><p id="p0090" num="0090">The priority determining module is configured to receive the instruction for determining priority from the service flow mapping module, retaining the priority of the service flow, and sending feedback information to the service flow mapping module; or remarking the priority of the service flow, determining the specified service transmission channel according to the remarked priority, and sending feedback information to the service flow mapping module.</p><p id="p0091" num="0091">In order to map the identified service flow to the specified service transmission channel, i.e., the GEM PORT, the general service flow mapping module 72 receives Ethernet frames from the inner Ethernet port connected with the MAC bridge, classifying the Ethernet frames based on the message characteristics in the configured service flow configuration parameters for a message characteristic, and mapping directly the Ethernet frames with different message characteristics to different service transmission channels. It may be selected to remark the priority of the service flow in the mean time, or to remark the Ethernet frames with different message characteristics with different priorities, and mapping the messages to different GEM PORTs according to the remarked message priority flags. Different GEM PORTs converge into one T-CONT or are carried by a single T-CONT. The ONT sends data to the OLT based on T-CONT, with the T-CONT scheduled by the OLT.</p><p id="p0092" num="0092">The OLT is responsible for down-sending configuration parameters for a message characteristic to the general service flow mapping module 72 of the ONT. Specifically, the OLT sends the configuration parameters for the message characteristic to the general service flow mapping module 72 by means of OMCI messages.<br/>
It is not feasible to send service flows with different characteristics to the GEM PORT or PVP/PVC using the management methods of the 802.1p mapping table ME (802.1p mapper service profile) in the GPON standard. The 802.1p mapping table ME defines corresponding GEM Interworking Termination Point ME pointer for each value of 802.1p, according to the eight different values of the 802.1p. When the IP address is used as the message characteristic, the number of IP addresses is the 32<sup>nd</sup> power of 2. When the VLAN ID is used as the message characteristic, the number of VLAN ID is 4096. If a corresponding GEM Interworking Termination Point ME pointer is specified for each characteristic of each<!-- EPO <DP n="20"> --> message, the entries to be managed will be very complex. Therefore, the embodiments of the invention define a new general service flow mapping ME, in order to maintain the message characteristic, the mask for the message characteristic and the offset position in bytes of the message characteristic, so as to support the representation of the general message characteristics in the embodiments of the invention.</p><p id="p0093" num="0093">The property fields included in the general service flow mapping ME are shown in Table 1.
<tables id="tabl0001" num="0001"><table frame="all"><title>Table 1</title><tgroup cols="2"><colspec colnum="1" colname="col1" colwidth="84mm"/><colspec colnum="2" colname="col2" colwidth="82mm"/><thead><row><entry align="center" valign="middle">Property Field</entry><entry align="center" valign="middle"/></row></thead><tbody><row><entry valign="middle">Number of the representation entries of the general message characteristic</entry><entry valign="middle">The number of the representation entries of the general message characteristic supported by ONT</entry></row><row><entry valign="middle">Representation entry 1 of the general message characteristic</entry><entry valign="middle">The representation entry of the general message characteristic includes three fields: the field of message characteristic the mask for the field of message characteristic the offset position in bytes of the field of message characteristic</entry></row><row><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry 1 corresponds</entry><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry 1 corresponds, being 0 means that the mapping of the message with matched characteristic should be canceled.</entry></row><row><entry valign="middle">The general message characteristic representation entry 2</entry><entry valign="middle">The general message characteristic representation entry includes three fields: the field of message characteristic the mask for the field of message characteristic the offset position in bytes of the field of message characteristic</entry></row><row><entry valign="middle">The GEM Interworking</entry><entry valign="middle">The GEM Interworking Termination Point ME pointer</entry></row><!-- EPO <DP n="21"> --><row><entry valign="middle">Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry 2 corresponds</entry><entry valign="middle">and the remarked message priority flag to which the general message characteristic representation entry 2 corresponds, being 0 means that the mapping of the message with matched characteristic should be canceled.</entry></row><row><entry valign="middle">The general message characteristic representation entry 3</entry><entry valign="middle">The general message characteristic representation entry includes three fields: the field of message characteristic the mask for the field of message characteristic the offset position in bytes of the field of message characteristic</entry></row><row><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry 3 corresponds</entry><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry 3 corresponds, being 0 means that the mapping of the message with matched characteristic should be canceled.</entry></row><row><entry valign="middle">...</entry><entry valign="middle">...</entry></row><row><entry valign="middle">The general message characteristic representation entry N</entry><entry valign="middle">The general message characteristic representation entry includes three fields: the field of message characteristic the mask for the field of message characteristic the offset position in bytes of the field of message characteristic</entry></row><row><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry N corresponds</entry><entry valign="middle">The GEM Interworking Termination Point ME pointer and the remarked message priority flag to which the general message characteristic representation entry N corresponds, being 0 means that the mapping of the message with matched characteristic should be canceled.</entry></row></tbody></tgroup><!-- EPO <DP n="22"> --></table></tables></p><p id="p0094" num="0094">The number of the general message characteristic representation entry in the general service flow mapping ME is defined according to the system specification of the OLT and ONT, the general message characteristic representation entry N, where N is an odd number, which includes three fields for storing respectively a message characteristic, a mask and an offset position in bytes of the message characteristic, the lengths of the three fields may be defined flexibly.</p><p id="p0095" num="0095">The GEM PORT-ID is stored in the corresponding property field of the corresponding GEM PORT Network Connection Termination Point ME (GEM Port Network CTP), the GEM Interworking Termination Point ME is used to store the pointer for locating the GEM PORT Network Connection Termination Point ME.</p><p id="p0096" num="0096">MAC Bridge Port Configuration Data ME is responsible for the management of the properties of various configuration data of the Ethernet port. If at the same time when the service flow is mapped to the specified service transmission channel, the priority of the service flow needs to be remarked, the MAC Bridge Port Configuration Data ME in the prior art should also be modified, and the property fields included in the new MAC Bridge Port Configuration Data ME are shown in Table 2.
<tables id="tabl0002" num="0002"><table frame="all"><title>Table 2</title><tgroup cols="2"><colspec colnum="1" colname="col1" colwidth="54mm"/><colspec colnum="2" colname="col2" colwidth="112mm"/><thead><row><entry align="center" valign="middle">Property Field</entry><entry valign="middle"/></row><row><entry valign="middle">MAC Bridge Port Number</entry><entry valign="middle">The number of the MAC bridge</entry></row></thead><tbody><row><entry morerows="2" rowsep="1" valign="middle">The type of the Termination Point</entry><entry valign="middle">0x1 means external Ethernet port;</entry></row><row><entry valign="middle">0x2 means internal Ethernet port, connecting the GEM Interworking Termination Point ME;</entry></row><row><entry valign="middle">0x3 means internal Ethernet port, connecting the general service flow mapping ME.</entry></row><row><entry morerows="2" valign="middle">The pointer of the Termination Point</entry><entry rowsep="0" valign="middle">Termination Point type of 0x1 means external Etheenet port, the value of which field is the physical property of the Ethernet port;</entry></row><row><entry rowsep="0" valign="middle">Termination Point type of 0x2 means internal Ethernet port, connecting the GEM Interworking Termination Point ME, the value of which field is the GEM Interworking Termination Point ME;</entry></row><row><entry valign="middle">Termination Point type of 0x3 means internal Ethernet port, connecting the general service flow mapping ME, the value of which field is the general service flow mapping ME.</entry></row><!-- EPO <DP n="23"> --><row><entry valign="middle">Other configuration properties</entry><entry valign="middle"/></row></tbody></tgroup></table></tables></p><p id="p0097" num="0097">If the priority of the service flow needs to be remarked when the service flow is mapped to the specified service transmission channel, the ME relationship diagram of the general service flow mapping ME is supported, as shown in <figref idrefs="f0006">Figure 8a</figref>. The difference of <figref idrefs="f0006">Figure 8</figref> from the prior art ME relationship diagram lies in that the 802.1 mapping table entity (802.1p Mapper Service Profile) in the prior art is replaced by a general service flow mapping ME (General Traffic Mapper Service Profile), the general service flow mapping ME may include N general message representation entries.</p><p id="p0098" num="0098">If the priority of the service flow is remarked and the specified service transmission channel is determined according to the remarked priority before the service flow is mapped to the specified service transmission channel, the ME relationship diagram of the general service flow mapping ME is supported, as shown in <figref idrefs="f0006">Figure 8b. Figure 8b</figref> is different from the prior art ME relationship diagram in the addition of general service flow mapping ME (General Traffic Mapper Service Profile).</p><p id="p0099" num="0099">One embodiment of the configuration flow of the general service flow mapping ME is shown in <figref idrefs="f0007">Figure 9</figref>. The embodiment takes as an example the case that the same OMCI channel message is configured with one property, which includes the following steps.</p><p id="p0100" num="0100">In step 901, the configuration terminal 93 notifies the OLT 92 to configure the property the general service flow mapping ME of the ONT connected by the OLT 92. The configuration parameters include ONUID, a message characteristic, a mask for the message characteristic, an offset position in bytes of the message characteristic, and GEM PORT-ID.</p><p id="p0101" num="0101">In step 902, the OLT 92 transforms the GEM PORT data carried in the received configuration parameters into a GEM Interworking Termination Point ME pointer corresponding one-to-one to the GEM PORT, sends through the OMCI channel a message requesting the configuration of an ONT general service flow mapping ME property. The message carries the following configuration parameters: ONUID, a message characteristic, a mask for the message characteristic, an offset position in bytes of the message characteristic,<!-- EPO <DP n="24"> --> a GEM Interworking Termination Point ME pointer, and a priority flag of the remarked message.</p><p id="p0102" num="0102">The message characteristic, the mask for the message characteristic and the offset position in bytes of the message characteristic in the configuration parameters distributed to the OLT 92 by the configuration terminal 93 may be in a way easy to be understood by users, such as VLAND ID, IP addresses etc. The OLT 92 splits the received VLAND ID and/or IP address into the message characteristic, the mask for the message characteristic and the offset position in bytes of the message characteristic to be distributed to the ONT 91.</p><p id="p0103" num="0103">Step 903, when the ONT configuration is completed, a response message of success or failure is returned.</p><p id="p0104" num="0104">One embodiment of the invention further includes canceling the configuration of the general service flow mapping ME, which includes the steps shown in <figref idrefs="f0007">Figure 10</figref>. In <figref idrefs="f0007">Figure 10</figref>, the same OMCI channel message cancels the configuration of one message characteristic configuration parameter as an example, which includes the following steps.</p><p id="p0105" num="0105">In step 1001, the configuration terminal 103 notifies the OLT 102 to cancel the configuration of the property of the general service flow mapping ME of the ONT 101 which the OLT 102 connects. The configuration parameters include ONUID, the message characteristic, the mask for the message characteristic and the offset position in bytes of the message characteristic.</p><p id="p0106" num="0106">In step 1002, OLT 102 sends through the OMCI channel a message requesting the cancellation of the configuration of the ONT general service flow mapping ME property. The message carries the following configuration parameters: ONUID, the message characteristic, the mask for the message characteristic, the offset position in bytes of the message characteristic and 0.</p><p id="p0107" num="0107">In step 1003, when the ONT configuration is completed, a response message of success or failure is returned.</p></description><claims mxw-id="PCLM56986241" lang="DE" load-source="patent-office"><!-- EPO <DP n="33"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zur Abbildung eines Dienstflusses auf einen Dienstübertragungskanal mit den folgenden Schritten:
<claim-text>A. Konfigurieren von Konfigurationsparametern für eine Nachrichteneigenschaft in einem optischen Netzwerkterminal, ONT; und</claim-text>
<claim-text>B. Abbilden eines Dienstflusses auf einen spezifizierten Dienstübertragungskanal, wenn festgestellt wird, dass der Dienstfluss zur konfigurierten Nachrichteneigenschaft passt, nachdem der Dienstfluss durch das ONT empfangen wird,<br/>
<b>dadurch gekennzeichnet, dass</b>:
<claim-text>die Konfigurationsparameter für die Nachricht eine Nachrichteneigenschaft, eine Versatzposition in Bytes der Nachrichteneigenschaft, eine Maske für die Nachrichteneigenschaft und eine Kennung des spezifizierten Dienstübertragungskanals aufweisen,</claim-text>
<claim-text>wobei</claim-text>
<claim-text>der Schritt B Folgendes aufweist:
<claim-text>nacheinander Durchführen einer bitweisen UND-Verknüpfung an der konfigurierten Maske und einer entsprechenden Nachrichteneigenschaft, nachdem der Dienstfluss durch das ONT empfangen wird, um ein erstes Verknüpfungsergebnis zu erhalten; Durchführen einer bitweisen UND-Verknüpfung an der Maske und einem Teil der Daten mit einer Byteanzahl, die zur entsprechenden Nachrichteneigenschaft identisch ist, in einem Dienstflussdatenrahmen, der beruhend auf einer Versatzposition in Bytes der entsprechenden Nachrichteneigenschaft bestimmt wird, um ein zweites Verknüpfungsergebnis zu erhalten;</claim-text>
<claim-text>Vergleichen des ersten Verknüpfungsergebnisses mit dem zweiten Verknüpfungsergebnis;</claim-text>
<claim-text>Stoppen des Vergleichens, wenn festgestellt wird, dass das erste Verknüpfungsergebnis mit dem zweiten Verknüpfungsergebnis übereinstimmt, und Abbilden des Dienstflusses auf einen Dienstübertragungskanal, dem die Kennung des spezifizierten Dienstübertragungskanals entspricht.</claim-text></claim-text></claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, wobei nach dem Vergleichen des ersten Verknüpfungsergebnisses mit dem zweiten Verknüpfungsergebnis das Verfahren ferner Folgendes aufweist:
<claim-text>Durchführen einer Fehleralarmverarbeitung und Stoppen der Verknüpfung durch das ONT, wenn festgestellt wird, dass das erste Verknüpfungsergebnis und das zweite Verknüpfungsergebnis, das beruhend auf irgendeinem der konfigurierten Konfigurationsparameter<!-- EPO <DP n="34"> --> für die Nachrichteneigenschaft erhalten wird, nicht übereinstimmen;</claim-text>
<claim-text>oder</claim-text>
<claim-text>Abbilden des Dienstflusses auf einen entsprechenden Dienstübertragungskanal gemäß einem vorgegebenen Standardabbildungsverfahren.</claim-text></claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach einem der Ansprüche 1 bis 2, wobei vor dem Schritt B das Verfahren ferner Folgendes aufweist:
<claim-text>Bestimmen durch das ONT, ob das ONT selbst eine allgemeine Dienstflussabbildungsoperation unterstützt; und</claim-text>
<claim-text>Durchführen des Schritts B, wenn festgestellt wird, dass das ONT selbst die allgemeine Dienstflussabbildungsoperation unterstützt; andernfalls Abbildung aller empfangenen Dienstflüsse auf einen festen Dienstübertragungskanal.</claim-text></claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach einem der Ansprüche 1 bis 2, wobei<br/>
die Konfigurationsparameter für die Nachrichteneigenschaft ferner einen Prioritätsmerker eines neu markierten Dienstflusses aufweisen;<br/>
wenn der Dienstfluss auf den spezifizierten Dienstübertragungskanal abgebildet wird, der Schritt B ferner das Neumarkieren der Priorität des Dienstflusses aufweist; oder bevor der Dienstfluss auf den spezifizierten Dienstübertragungskanal abgebildet wird, der Schritt B ferner das Neumarkieren der Priorität des Dienstflusses aufweist; das Abbilden des Dienstflusses auf den spezifizierten Dienstübertragungskanal das Bestimmen des spezifizierten Dienstübertragungskanals gemäß der neu markierten Priorität und das Abbilden des Dienstflusses auf den spezifizierten Dienstübertragungskanal aufweist.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach einem der Ansprüche 1 bis 2, wobei das Konfigurieren der Konfigurationsparameter für die Nachrichteneigenschaft im ONT Folgendes aufweist:
<claim-text>Empfangen der Konfigurationsparameter für die Nachrichteneigenschaft von einem Konfigurationsterminal durch ein optisches Leitungsterminal, OLT;</claim-text>
<claim-text>Transformieren von Portdaten in einem Format einer Kapselung eines passiven optischen Netzwerks, PON, die in den Konfigurationsparametern für die Nachrichteneigenschaft enthalten sind, in einen Verknüpfungsabschlusspunktzeiger im Format der PON-Kapselung, der dem Port im Format der PON-Kapselung eineindeutig entspricht, und Konfigurieren der bestimmten Konfigurationsparameter für die Nachrichteneigenschaft im ONT.</claim-text></claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Verfahren nach einem der Ansprüche 1 bis 2, wobei das Abbilden des Dienstflusses auf den spezifizierten Dienstübertragungskanal Folgendes aufweist:<!-- EPO <DP n="35"> -->
<claim-text>Abbilden eines Steuernachrichtendienstflusses bzw. eines Datennachrichtendienstflusses, die so festgelegt sind, dass sie zu den konfigurierten Nachrichteneigenschaften passen, auf den spezifizierten Dienstübertragungskanal.</claim-text></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Verfahren nach Anspruch 6, wobei die Abbildung des Steuernachrichtendienstflusses bzw. des Datennachrichtendienstflusses auf die spezifizierten Dienstübertragungskanäle Folgendes aufweist:
<claim-text>Abbilden des Steuernachrichtendienstflusses, der so festgelegt wird, dass er zur konfigurierten Nachrichteneigenschaft passt, auf einen Dienstübertragungskanal mit einer hohen Priorität; oder</claim-text>
<claim-text>Festlegen durch das ONT des Dienstübertragungskanals, auf den der Steuemachrichtendienstfluss so abgebildet wird, dass er eine hohe Priorität aufweist, nach dem Abbilden des Steuernachrichtendienstflusses bzw. des Datennachrichtendienstflusses auf die spezifizierten Dienstübertragungskanäle; oder</claim-text>
<claim-text>Durchführen einer Hochprioritätsverarbeitung am Steuernachrichtendienstfluss auf dem OLT nach dem Abbilden des Steuernachrichtendienstflusses bzw. des Datennachrichtendienstflusses auf die spezifizierten Dienstübertragungskanäle.</claim-text></claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Verfahren nach Anspruch 7, wobei die Abbildung des Steuernachrichtendienstflusses durch das ONT auf den Dienstübertragungskanal mit hoher Priorität Folgendes aufweist:
<claim-text>Abbilden von Steuernachrichtendienstflüssen aller Benutzer durch das ONT auf eine Warteschlange mit hoher Priorität eines selben T-CONT; oder</claim-text>
<claim-text>jeweiliges Abbilden des Steuernachrichtendienstflusses jedes Benutzers durch das ONT auf eine Warteschlange mit hoher Priorität des T-CONT, dem jeder Benutzer entspricht.</claim-text></claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>System zur Abbildung eines Dienstflusses auf einen Dienstübertragungskanal, das ein optisches Netzwerkterminal, ONT (91, 101), und ein optisches Leitungsterminal, OLT (92, 102), umfasst, wobei<br/>
das OLT (92, 102) konfiguriert ist, Konfigurationsparameter für eine Nachrichteneigenschaft von einem Konfigurationsterminal (93, 103) zu empfangen und die Konfigurationsparameter für die Nachrichteneigenschaft nach der Verarbeitung der Konfigurationsparameter an das ONT (91, 101) zu senden; und<br/>
das ONT (91, 101) konfiguriert ist, die durch das OLT (92, 102) gesendeten Konfigurationsparameter für die Nachrichteneigenschaft zu empfangen und konfigurieren; und den Dienstfluss auf einen spezifizierten Dienstübertragungskanal abzubilden,<br/>
<!-- EPO <DP n="36"> -->wenn festgestellt wird, dass der empfangene Dienstfluss zur konfigurierten Nachrichteneigenschaft passt, nachdem der Dienstfluss empfangen wird,<br/>
<b>dadurch gekennzeichnet, dass</b>:
<claim-text>die Konfigurationsparameter für die Nachricht eine Nachrichteneigenschaft, eine Versatzposition in Bytes der Nachrichteneigenschaft, eine Maske für die Nachrichteneigenschaft und eine Kennung des spezifizierten Dienstübertragungskanals aufweisen,</claim-text>
<claim-text>wobei das ONT (91, 101) konfiguriert ist, den Dienstfluss auf den spezifizierten Dienstübertragungskanal in den folgenden Schritten abzubilden:</claim-text>
nacheinander Durchführen einer bitweisen UND-Verknüpfung an der konfigurierten Maske und einer entsprechenden Nachrichteneigenschaft, nachdem der Dienstfluss durch das ONT empfangen wird, um ein erstes Verknüpfungsergebnis zu erhalten; Durchführen einer bitweisen UND-Verknüpfung an der Maske und einem Teil der Daten mit einer Byteanzahl, die zur entsprechenden Nachrichteneigenschaft identisch ist, in einem Dienstflussdatenrahmen, der beruhend auf einer Versatzposition in Bytes der entsprechenden Nachrichteneigenschaft bestimmt wird, um ein zweites Verknüpfungsergebnis zu erhalten;<br/>
Vergleichen des ersten Verknüpfungsergebnisses mit dem zweiten Verknüpfungsergebnis;<br/>
Stoppen des Vergleichens, wenn festgestellt wird, dass das erste Verknüpfungsergebnis mit dem zweiten Verknüpfungsergebnis übereinstimmt, und Abbilden des Dienstflusses auf einen Dienstübertragungskanal, dem die Kennung des spezifizierten Dienstübertragungskanals entspricht.</claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>System nach Anspruch 9, wobei das ONT (91, 101) ferner konfiguriert ist:
<claim-text>eine Priorität des Dienstflusses neu zu markieren, wenn der Dienstfluss auf den spezifizierten Dienstübertragungskanal abgebildet wird; oder</claim-text>
<claim-text>die Priorität des Dienstflusses neu zu markieren, bevor der Dienstfluss auf den spezifizierten Dienstübertragungskanal abgebildet wird, und den spezifizierten Dienstübertragungskanal gemäß der neu markierten Priorität zu bestimmen.</claim-text></claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Optisches Netzwerkterminal ONT mit einem Dienstverarbeitungsmodul (71) und einem allgemeinen Dienstflussabbildungsmodul (72), wobei<br/>
das Dienstverarbeitungsmodul (71) konfiguriert ist, einen Dienstfluss von einem Benutzer zu empfangen und den Dienstfluss an das allgemeine Dienstflussabbildungsmodul (72) zu senden;<br/>
das allgemeine Dienstflussabbildungsmodul (72) konfiguriert ist, durch das optische<!-- EPO <DP n="37"> --> Leitungsterminal, OLT, gesendete Konfigurationsparameter für eine Nachrichteneigenschaft zu konfigurieren, den Dienstfluss vom Dienstverarbeitungsmodul (71) zu empfangen und den Dienstfluss auf den Dienstübertragungskanal in einem spezifizierten Protokollverarbeitungsmodul für ein optisches Netzwerk abzubilden, wenn festgestellt wird, dass der empfangene Dienstfluss zur konfigurierten Nachrichteneigenschaft passt, <b>dadurch gekennzeichnet, dass</b>:
<claim-text>die Konfigurationsparameter für die Nachricht eine Nachrichteneigenschaft, eine Versatzposition in Bytes der Nachrichteneigenschaft, eine Maske für die Nachrichteneigenschaft und eine Kennung des spezifizierten Dienstübertragungskanals aufweisen,</claim-text>
<claim-text>wobei das Nachrichteneigenschaftsanpassungsmodul ein zweites Nachrichteneigenschaftsanpassungsmodul aufweist, das konfiguriert ist:
<claim-text>den Dienstfluss vom Dienstverarbeitungsmodul (71) zu empfangen;</claim-text>
<claim-text>nacheinander eine bitweise UND-Verknüpfung an der konfigurierten Nachrichteneigenschaft und einer entsprechenden Maske durchzuführen, um ein erstes Verknüpfungsergebnis zu erhalten;</claim-text>
<claim-text>eine bitweise UND-Verknüpfung an der Maske und einem Teil der Daten mit einer Byteanzahl, die zur Nachrichteneigenschaft identisch ist, in einem Dienstflussdatenrahmen durchzuführen, der beruhend auf einer Versatzposition in Bytes einer entsprechenden Nachrichteneigenschaft bestimmt wird, um ein zweites Verknüpfungsergebnis zu erhalten;</claim-text>
<claim-text>das erste Verknüpfungsergebnis mit dem zweiten Verknüpfungsergebnis zu vergleichen;</claim-text>
<claim-text>die Vergleichsoperation zu stoppen, wenn festgestellt wird, dass das erste Verknüpfungsergebnis mit dem zweiten Verknüpfungsergebnis übereinstimmt, und</claim-text>
<claim-text>einen Abbildungsbefehl an das Dienstflussabbildungsmodul zu senden.</claim-text></claim-text></claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>ONT nach Anspruch 11, wobei das allgemeine Dienstflussabbildungsmodul (72) ein Nachrichteneigenschaftskonfigurationsmodul, ein Nachrichteneigenschaftsanpassungsmodul und ein Dienstflussabbildungsmodul aufweist, wobei<br/>
das Nachrichteneigenschaftskonfigurationsmodul konfiguriert ist, die Konfigurationsparameter für die Nachrichteneigenschaft vom Dienstverarbeitungsmodul (71) zu empfangen und eine Konfiguration durchzuführen;<br/>
das Nachrichteneigenschaftsanpassungsmodul konfiguriert ist, den Dienstfluss vom Dienstverarbeitungsmodul (71) zu empfangen; die durch das Nachrichteneigenschaftskonfigurationsmodul konfigurierte Nachrichteneigenschaft mit dem Dienstfluss zu vergleichen; die Vergleichsoperation zu stoppen, wenn der Dienstfluss zur<!-- EPO <DP n="38"> --> Nachrichteneigenschaft passt; und einen Dienstflussabbildungsbefehl an das Dienstflussabbildungsmodul zu senden;<br/>
das Dienstflussabbildungsmodul konfiguriert ist, den Dienstflussabbildungsbefehl vom Nachrichteneigenschaftsanpassungsmodul zu empfangen und den Dienstfluss auf den spezifizierten Dienstübertragungskanal abzubilden.</claim-text></claim><claim id="c-de-01-0013" num="0013"><claim-text>ONT nach Anspruch 12, wobei das allgemeine Dienstflussabbildungsmodul (72) ferner ein Prioritätsbestimmungsmodul aufweist, wobei<br/>
das Dienstflussabbildungsmodul ferner konfiguriert ist, einen Befehl zur Bestimmung der Priorität an das Prioritätsbestimmungsmodul zu senden, Rückinformationen vom Prioritätsbestimmungsmodul zu empfangen und den Dienstfluss auf einen spezifizierten Dienstübertragungskanal abzubilden;<br/>
das Prioritätsbestimmungsmodul konfiguriert ist, den Befehl zur Bestimmung der Priorität vom Dienstflussabbildungsmodul zu empfangen, die Priorität zur Markierung des Dienstflusses zu bestimmen und die Rückinformationen an das Dienstflussabbildungsmodul zu senden; oder die Priorität des Dienstflusses neu zu markieren, den spezifizierten Dienstübertragungskanal gemäß der neu markierten Priorität zu bestimmen, und die Rückinformationen an das Dienstflussabbildungsmodul zu senden.</claim-text></claim></claims><claims mxw-id="PCLM56986242" lang="EN" load-source="patent-office"><!-- EPO <DP n="25"> --><claim id="c-en-01-0001" num="0001"><claim-text>A method for mapping a service flow to a service transmission channel, comprising:
<claim-text>A. configuring configuration parameters for a message characteristic into an Optical Network Terminal, ONT; and</claim-text>
<claim-text>B. mapping a service flow to a specified service transmission channel when it is determined that the service flow matches the configured message characteristic after the service flow is received by the ONT,</claim-text>
<b>characterized in that</b>:
<claim-text>wherein the configuration parameters for the message comprise a message characteristic, an offset position in bytes of the message characteristic, a mask for the message characteristic, and an identifier of the specified service transmission channel,</claim-text>
<claim-text>wherein</claim-text>
<claim-text>the step B comprises :
<claim-text>performing one by one a bitwise AND operation on the configured mask and a corresponding message characteristic, after the service flow is received by the ONT, to obtain a first operation result;</claim-text>
<claim-text>performing a bitwise AND operation on the mask and a part of data with a byte number being identical to the corresponding message characteristic in a service flow data frame determined based on an offset position in bytes of the corresponding message characteristic, to obtain a second operation result;</claim-text>
<claim-text>comparing the first operation result with the second operation result;</claim-text>
<claim-text>stopping the comparing when it is determined that the first operation result matches the second operation result, and mapping the service flow to a service transmission channel which the identifier of the specified service transmission channel corresponds to.</claim-text></claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The method according to claim 1, wherein after comparing the first operation result with the second operation result the method further comprises:<!-- EPO <DP n="26"> -->
<claim-text>performing an error alarm processing and stopping the operation by the ONT when it is determined that the first operation result and the second operation result obtained based on any of the configured configuration parameters for the message characteristic do not match; or</claim-text>
<claim-text>mapping the service flow to a corresponding service transmission channel according to a predetermined default mapping method.</claim-text></claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The method according to any one of claims 1 to 2, wherein before the step B the method further comprises:
<claim-text>determining by the ONT whether the ONT itself supports a general service flow mapping operation; and</claim-text>
<claim-text>performing the step B if it is determined that the ONT itself supports the general service flow mapping operation; otherwise, mapping all service flows received to a fixed service transmission channel.</claim-text></claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The method according to any one of claims 1 to 2, wherein<br/>
the configuration parameters for the message characteristic further comprise a priority flag of a remarked service flow;<br/>
when mapping the service flow to the specified service transmission channel, the step B further comprises remarking the priority of the service flow; or<br/>
before mapping the service flow to the specified service transmission channel, the step B further comprises remarking the priority of the service flow;<br/>
the mapping of the service flow to the specified service transmission channel comprises determining the specified service transmission channel according to the remarked priority, and mapping the service flow to the specified service transmission channel.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The method according to any one of claims 1 to 2, wherein configuring the configuration parameters for the message characteristic into the ONT comprises:
<claim-text>receiving the configuration parameters for the message characteristic from a configuration terminal by an Optical Line Terminal ,OLT;<!-- EPO <DP n="27"> --></claim-text>
<claim-text>transforming a port data in a format of a Passive Optical Network, PON, encapsulation contained in the configuration parameters for the message characteristic into an Interworking Termination Point Pointer in the format of PON encapsulation which corresponds one to one to the port in the format of PON encapsulation, and configuring the determined configuration parameters for the message characteristic into the ONT.</claim-text></claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>The method according to any one of claims 1 to 2, wherein mapping the service flow to the specified service transmission channel comprises:
<claim-text>mapping a control message service flow and a data message service flow, which are determined to match the configured message characteristics, to the specified service transmission channel, respectively.</claim-text></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The method according to claim 6, wherein mapping the control message service flow and the data message service flow to the specified service transmission channels respectively comprises:
<claim-text>mapping the control message service flow which is determined to match the configured message characteristic to a service transmission channel with high priority; or</claim-text>
<claim-text>setting, by the ONT, the service transmission channel to which the control message service flow is mapped to be of high priority, after mapping the control message service flow and the data message service flow to the specified service transmission channels respectively; or</claim-text>
<claim-text>performing a high priority processing on the control message service flow on the OLT, after mapping the control message service flow and the data message service flow to the specified service transmission channels, respectively.</claim-text></claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The method according to claim 7, wherein mapping by the ONT the control message service flow to the service transmission channel with high priority comprises:
<claim-text>mapping, by the ONT, control message service flows of all users to a queue with high priority of a same T-CONT; or</claim-text>
<claim-text>mapping respectively by the ONT the control message service flow of each user to a queue with high priority of the T-CONT to which each user corresponds.</claim-text><!-- EPO <DP n="28"> --></claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>A system for mapping a service flow into a service transmission channel, comprising an Optical Network Terminal, ONT (91, 101), and an Optical Line Terminal, OLT (92, 102), wherein<br/>
the OLT (92, 102) is configured to receive configuration parameters for a message characteristic from a configuration terminal (93, 103), and to send the configuration parameters for the message characteristic to the ONT (91, 101) after processing the configuration parameters; and<br/>
the ONT (91, 101) is configured to receive and configure the configuration parameters for the message characteristic sent by the OLT (92, 102); and to map the service flow to a specified service transmission channel when it is determined that the service flow received matches the message characteristic configured after the service flow is received,<br/>
<b>characterized in that</b>:
<claim-text>wherein the configuration parameters for the message comprise a message characteristic, an offset position in bytes of the message characteristic, a mask for the message characteristic, and an identifier of the specified service transmission channel;</claim-text>
<claim-text>wherein the ONT (91, 101) is configured to map the service flow to the specified service transmission channel in the following steps:
<claim-text>performing one by one a bitwise AND operation on the configured mask and a corresponding message characteristic after the service flow is received by the ONT, to obtain a first operation result;</claim-text>
<claim-text>performing a bitwise AND operation on the mask and a part of data with a byte number being identical to the corresponding message characteristic in a service flow data<!-- EPO <DP n="29"> --> frame determined based on an offset position in bytes of the corresponding message characteristic, to obtain a second operation result;</claim-text>
<claim-text>comparing the first operation result with the second operation result;</claim-text>
<claim-text>stopping the comparing when it is determined that the first operation result matches the second operation result, and mapping the service flow to a service transmission channel which the identifier of the specified service transmission channel corresponds to.</claim-text></claim-text><!-- EPO <DP n="30"> --></claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>The system according to claim 9, wherein the ONT (91, 101) is further configured to:
<claim-text>remark a priority of the service flow when the service flow is mapped to the specified service transmission channel; or</claim-text>
<claim-text>remark the priority of the service flow before the service flow is mapped to the specified service transmission channel, and determining the specified service transmission channel according to the remarked priority.</claim-text></claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>An Optical Network Terminal, ONT, comprising a service processing module (71) and a general service flow mapping module (72), wherein<br/>
the service processing module (71) is configured to receive a service flow from a user, and to send the service flow to the general service flow mapping module (72);<br/>
the general service flow mapping module (72) is configured to configure configuration parameters for a message characteristic sent by the Optical Line Terminal, OLT, receive the service flow from the service processing module (71), and map the service flow to the service transmission channel in a specified optical network protocol processing module when it is determined that the service flow received matches the message characteristic configured, <b>characterized in that</b>:
<claim-text>wherein the configuration parameters for the message comprise a message characteristic, an offset position in bytes of the message characteristic, a mask for the message characteristic, and an identifier of the specified service transmission channel,</claim-text>
<claim-text>wherein the message characteristic matching module comprises a second message characteristic matching module, configured to:
<claim-text>receive the service flow from the service processing module (71);</claim-text>
<claim-text>perform one by one a bitwise AND operation on the configured message characteristic and a corresponding mask to obtain a first operation result;<!-- EPO <DP n="31"> --></claim-text>
<claim-text>perform a bitwise AND operation on the mask and a part of data with a byte number being identical to the message characteristic in a service flow data frame determined based on an offset position in bytes of a corresponding message characteristic, to obtain a second operation result;</claim-text>
<claim-text>compare the first operation result with the second operation result;</claim-text>
<claim-text>stop the comparing operation when it is determined that the first operation result matches the second operation result, and</claim-text>
<claim-text>send a mapping instruction to the service flow mapping module.</claim-text></claim-text></claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>The ONT according to claim 11, wherein the general service flow mapping module (72) comprises a message characteristic configuration module, a message characteristic matching module and a service flow mapping module, wherein<br/>
the message characteristic configuration module is configured to receive the configuration parameters for the message characteristic from the service processing module (71) and perform a configuration;<br/>
the message characteristic matching module is configured to receive the service flow from the service processing module (71); compare the message characteristic configured by the message characteristic configuration module with the service flow; stop the comparing operation when the service flow matches the message characteristic; and send a service flow mapping instruction to the service flow mapping module;<br/>
the service flow mapping module is configured to receive the service flow mapping instruction from the message characteristic matching module, and map the service flow to the specified service transmission channel.<!-- EPO <DP n="32"> --></claim-text></claim><claim id="c-en-01-0013" num="0013"><claim-text>The ONT according to claim 12, wherein the general service flow mapping module (72) further comprises a priority determining module, wherein<br/>
the service flow mapping module is further configured to send an instruction for determining priority to the priority determining module, receive feedback information from the priority determining module, and map the service flow to a specified service transmission channel;<br/>
the priority determining module is configured to receive the instruction for determining priority from the service flow mapping module, determine the priority for marking the service flow and send the feedback information to the service flow mapping module; or remark the priority of the service flow, determine the specified service transmission channel according to the remarked priority, and send the feedback information to the service flow mapping module.</claim-text></claim></claims><claims mxw-id="PCLM56986243" lang="FR" load-source="patent-office"><!-- EPO <DP n="39"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé de mise en correspondance d'un flux de services avec un canal de transmission de services, comprenant :
<claim-text>A. la configuration de paramètres de configuration d'une caractéristique de message dans un Terminal de Réseau Optique, ONT (Optical Network Terminal) ; et</claim-text>
<claim-text>B. la mise en correspondance d'un flux de services avec un canal de transmission de services spécifié lorsqu'il est déterminé que le flux de services concorde avec la caractéristique de message configurée après réception du flux de services par l'ONT, <b>caractérisé en ce que</b> :
<claim-text>les paramètres de configuration du message comprennent une caractéristique de message, une position de décalage en octets de la caractéristique de message, un masque pour la caractéristique de message et un identifiant du canal de transmission de services spécifié,</claim-text>
<claim-text>l'étape B comprenant :
<claim-text>l'exécution une par une d'une opération ET bit à bit sur le masque configuré et la caractéristique de message correspondante après réception du flux de services par l'ONT, afin d'obtenir un premier résultat d'opération ;</claim-text>
<claim-text>l'exécution d'une opération ET bit à bit sur le masque et une partie de données, le nombre d'octets étant identique à la caractéristique de message correspondante dans une trame de données du flux de services déterminée sur la base d'une position de décalage en octets de la caractéristique de message correspondante, afin d'obtenir un second résultat d'opération ;</claim-text>
<claim-text>la comparaison du premier résultat d'opération au second résultat d'opération ;</claim-text>
<claim-text>l'interruption de la comparaison s'il est déterminé que le premier résultat d'opération concorde avec le second résultat d'opération, et la mise en correspondance du flux de services avec un canal de transmission de services auquel correspond l'identifiant du canal de transmission de services spécifié.</claim-text></claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, dans lequel, après comparaison du premier résultat d'opération au second résultat d'opération, le procédé comprend en outre :
<claim-text>l'exécution d'un traitement d'alarme d'erreur et l'interruption de l'opération effectuée par l'ONT lorsqu'il est déterminé que le premier résultat d'opération et que le second résultat d'opération obtenus sur la base de l'un quelconque des paramètres de configuration configurés pour la caractéristique de message ne concordent pas ; ou</claim-text>
<claim-text>la mise en correspondance du flux de services avec un canal de transmission de services correspondant conformément à un procédé de mise en correspondance prédéterminé par défaut.</claim-text><!-- EPO <DP n="40"> --></claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon l'une quelconque des revendications 1 à 2, dans lequel, avant l'étape B, le procédé comprend en outre :
<claim-text>la détermination par l'ONT du fait de savoir si l'ONT lui-même prend en charge une opération de mise en correspondance générale du flux de services ; et</claim-text>
<claim-text>l'exécution de l'étape B s'il est déterminé que l'ONT lui-même prend en charge l'opération de mise en correspondance générale de flux de services ; dans le cas contraire, mettre en correspondance tous les flux de services reçus avec un canal de transmission de services fixe.</claim-text></claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon l'une quelconque des revendications 1 à 2, dans lequel<br/>
les paramètres de configuration de la caractéristique de message comprennent en outre un indicateur de priorité d'un flux de services marqué à nouveau ;<br/>
lors de la mise en correspondance de flux de services avec le canal de transmission de services spécifié, l'étape B comprend en outre le fait de marquer à nouveau la priorité du flux de services ; ou<br/>
avant de mettre en correspondance le flux de services avec le canal de transmission de services spécifié, l'étape B comprend en outre le fait de marquer à nouveau la priorité du flux de services ;<br/>
la mise en correspondance de flux de services avec le canal de transmission de services spécifié comprend la détermination du canal de transmission de services spécifié conformément à la priorité marquée à nouveau, et la mise en correspondance de flux de services avec le canal de transmission de services spécifié.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon l'une quelconque des revendications 1 à 2, dans lequel la configuration des paramètres de configuration de la caractéristique de message dans l'ONT comprend :
<claim-text>la réception des paramètres de configuration de la caractéristique de message en provenance d'un terminal de configuration par un Terminal de Ligne Optique, OLT (Optical Line Terminal) ;</claim-text>
<claim-text>la transformation d'une donnée de port en un format d'encapsulation de Réseau Optique Passif, PON (Passive Optical Network), contenu dans les paramètres de configuration de la caractéristique de message dans un Pointeur de Point de Terminaison d'Interfonctionnement au format d'encapsulation de PON qui correspond de manière biunivoque au port dans le format d'encapsulation de PON, et la configuration des paramètres de configuration déterminés pour la caractéristique de message dans l'ONT.</claim-text><!-- EPO <DP n="41"> --></claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Procédé selon l'une quelconque des revendications 1 à 2, dans lequel la mise en correspondance du flux de services avec le canal de transmission de services spécifié comprend :
<claim-text>la mise en correspondance d'un flux de services de messages de commande et d'un flux de services de messages de données dont il est déterminé qu'ils concordent avec les caractéristiques de message configurées, respectivement avec le canal de transmission de services spécifié.</claim-text></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Procédé selon la revendication 6, dans lequel la mise en correspondance du flux de services de messages de commande et du flux de services de messages de données avec les canaux respectifs de transmission de services spécifiés comprend :
<claim-text>la mise en correspondance du flux de services de messages de commande dont il est déterminé qu'il concorde respectivement avec la caractéristique de message configurée, avec un canal de transmission de services de priorité élevée ; ou</claim-text>
<claim-text>le réglage, par l'ONT, du canal de transmission de services avec lequel est mis en correspondance le flux de services de messages de commande à une priorité élevée, après mise en correspondance du flux de services de messages de commande et du flux de services de messages de données avec les canaux respectifs de transmission de services spécifiés ; ou</claim-text>
<claim-text>l'exécution d'un traitement de priorité élevée sur le flux de services de messages de commande sur l'OLT, après mise en correspondance du flux de services de messages de commande et du flux de services de messages de données avec les canaux respectifs de transmission de services spécifiés.</claim-text></claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Procédé selon la revendication 7, dans lequel la mise en correspondance par l'ONT du flux de services de messages de commande avec le canal de transmission de services de priorité élevée comprend :
<claim-text>la mise en correspondance, par l'ONT, des flux de services de messages de commande de tous les utilisateurs avec une file d'attente de priorité élevée ayant le même T-CONT ; ou</claim-text>
<claim-text>la mise en correspondance respective, par l'ONT, du flux de services de messages de commande de chaque utilisateur avec une file d'attente de priorité élevée ayant le T-CONT auquel correspond chaque utilisateur.</claim-text></claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Système de mise en correspondance d'un flux de services avec un canal de transmission de services, comprenant un Terminal de Réseau Optique, ONT (91, 101), et un Terminal de Ligne Optique, OLT (92, 102), dans lequel<!-- EPO <DP n="42"> --> l'OLT (92, 102) est configuré pour recevoir des paramètres de configuration d'une caractéristique de message en provenance d'un terminal de configuration (93, 103), et pour envoyer les paramètres de configuration de la caractéristique de message à l'ONT (91, 101) après traitement des paramètres de configuration ; et<br/>
l'ONT (91, 101) est configuré pour recevoir et configurer les paramètres de configuration de la caractéristique de message envoyée par l'OLT (92, 102), et pour mettre en correspondance le flux de services avec un canal de transmission de services lorsqu'il est déterminé que le flux de services reçu concorde avec la caractéristique de message configurée après réception du flux de services,<br/>
<b>caractérisé en ce que</b> :
<claim-text>les paramètres de configuration du message comprennent une caractéristique de message, une position de décalage en octets de la caractéristique de message, un masque pour la caractéristique de message et un identifiant du canal de transmission de services spécifié,</claim-text>
<claim-text>l'ONT (91, 101) est configuré pour mettre en correspondance le flux de services avec le canal de transmission de services spécifié lors des étapes suivantes :
<claim-text>l'exécution une par une d'une opération ET bit à bit sur le masque configuré et une caractéristique de message correspondante après réception du flux de services par l'ONT, afin d'obtenir un premier résultat d'opération ;</claim-text>
<claim-text>l'exécution d'une opération ET bit à bit sur le masque et une partie de données ayant un nombre d'octets identique à la caractéristique de message correspondante dans une trame de données de flux de services sur la base d'une position de décalage en octets de la caractéristique de message correspondante, afin d'obtenir un second résultat d'opération ;</claim-text>
<claim-text>la comparaison du premier résultat d'opération au second résultat d'opération ; l'interruption de la comparaison lorsqu'il est déterminé que le premier résultat d'opération concorde avec le second résultat d'opération, et la mise en correspondance du flux de services avec un canal de transmission de services auquel correspond l'identifiant du canal de transmission de services spécifié.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Système selon la revendication 9, dans lequel l'ONT (91, 101) est en outre configuré pour :
<claim-text>marquer à nouveau une priorité du flux de services lorsque le flux de services est mis en correspondance avec le canal de transmission de services spécifié ; ou</claim-text>
<claim-text>marquer à nouveau la priorité du flux de services avant que le flux de services ne soit mis en correspondance avec le canal de transmission de services spécifié, et déterminer le canal de transmission de services spécifié conformément à la priorité marquée à nouveau.</claim-text><!-- EPO <DP n="43"> --></claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Terminal de Réseau Optique, ONT, comprenant un module de traitement de services (71) et un module de mise en correspondance générale de flux de services (72),<br/>
le module de traitement de services (71) étant configuré pour recevoir d'un utilisateur un flux de services et pour envoyer le flux de services au module de mise en correspondance générale de flux de services (72) ;<br/>
le module de mise en correspondance générale de flux de services (72) étant configuré pour configurer des paramètres de configuration d'une caractéristique de message envoyée par le Terminal de Ligne Optique, OLT, recevoir le flux de services du module de traitement de services (71), et mettre en correspondance le flux de services avec le canal de transmission de services dans un module de traitement de protocole de réseau optique spécifié lorsqu'il est déterminé que le flux de services reçu concorde avec la caractéristique de message configurée,<br/>
<b>caractérisé en ce que</b> :
<claim-text>les paramètres de configuration du message comprennent une caractéristique de message, une position de décalage en octets de la caractéristique de message, un masque pour la caractéristique de message et un identifiant du canal de transmission de services spécifié,</claim-text>
<claim-text>le module de comparaison de caractéristique de message comprend un second module de comparaison de caractéristique de message, configuré pour :
<claim-text>recevoir le flux de services du module de traitement de services (71) ;</claim-text>
<claim-text>effectuer une opération ET bit à bit biunivoque sur la caractéristique de message configurée et un masque correspondant afin d'obtenir un premier résultat d'opération ; effectuer une opération ET bit à bit sur le masque et une partie de données ayant un nombre d'octets identique à la caractéristique de message dans une trame de données de flux de services déterminée sur la base d'une position de décalage en octets d'une caractéristique de message correspondante, afin d'obtenir un second résultat d'opération ;</claim-text>
<claim-text>comparer le premier résultat d'opération au second résultat d'opération ;</claim-text>
<claim-text>interrompre l'opération de comparaison lorsqu'il est déterminé que le premier résultat d'opération concorde avec le second résultat d'opération, et</claim-text>
<claim-text>envoyer une instruction de mise en correspondance au module de mise en correspondance de flux de services.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>ONT selon la revendication 11, dans lequel le module de mise en correspondance générale de flux de services (72) comprend un module de configuration de caractéristique de message, un module de comparaison de caractéristique de message et un module de mise en correspondance de flux de services,<br/>
<!-- EPO <DP n="44"> -->le module de configuration de caractéristique de message étant configuré pour recevoir des paramètres de configuration de la caractéristique de message en provenance du module de traitement de services (71) et effectuer une configuration ; le module de comparaison de caractéristique de message étant configuré pour recevoir le flux de services du module de traitement de services (71) ; comparer la caractéristique de message configurée par le module de configuration de caractéristique de message au flux de services ; interrompre l'opération de comparaison lorsque le flux de services concorde avec la caractéristique de message ;<br/>
et envoyer une instruction de mise en correspondance de flux de services au module de mise en correspondance de flux de services ;<br/>
le module de mise en correspondance de flux de services étant configuré pour recevoir l'instruction de mise en correspondance de flux de services du module de comparaison de caractéristiques de message et pour mettre en correspondance le flux de services avec le canal de transmission de services spécifié.</claim-text></claim><claim id="c-fr-01-0013" num="0013"><claim-text>ONT selon la revendication 12, dans lequel le module de mise en correspondance générale de flux de services (72) comprend en outre un module de détermination de priorité,<br/>
le module de mise en correspondance de flux de services étant en outre configuré pour envoyer une instruction de détermination de priorité au module de détermination de priorité, recevoir des informations de rétroaction du module de détermination de priorité, et mettre en correspondance le flux de services avec un canal de transmission de services spécifié ;<br/>
le module de détermination de priorité étant configuré pour recevoir l'instruction de détermination de priorité du module de mise en correspondance de flux de services, déterminer la priorité de marquage du flux de services et envoyer les informations de rétroaction au module de mise en correspondance de flux de services ; ou marquer à nouveau la priorité du flux de services, déterminer le canal de transmission de services spécifié conformément à la priorité marquée à nouveau, et envoyer les informations de rétroaction au module de mise en correspondance de flux de services.</claim-text></claim></claims><drawings mxw-id="PDW16672396" load-source="patent-office"><!-- EPO <DP n="45"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="166" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0003" num="5,6a"><img id="if0003" file="imgf0003.tif" wi="165" he="186" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0004" num="6b,6c"><img id="if0004" file="imgf0004.tif" wi="165" he="185" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0005" num="6d,7"><img id="if0005" file="imgf0005.tif" wi="165" he="177" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0006" num="8a,8b"><img id="if0006" file="imgf0006.tif" wi="109" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="51"> --><figure id="f0007" num="9,10"><img id="if0007" file="imgf0007.tif" wi="159" he="203" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
