<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2156199-B1" country="EP" doc-number="2156199" kind="B1" date="20140108" family-id="38219334" file-reference-id="318257" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146588279" ucid="EP-2156199-B1"><document-id><country>EP</country><doc-number>2156199</doc-number><kind>B1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-08750574-A" is-representative="NO"><document-id mxw-id="PAPP154850471" load-source="docdb" format="epo"><country>EP</country><doc-number>08750574</doc-number><kind>A</kind><date>20080512</date><lang>EN</lang></document-id><document-id mxw-id="PAPP263243585" load-source="docdb" format="original"><country>EP</country><doc-number>08750574.9</doc-number><date>20080512</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140554897" ucid="GB-0709200-A" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>0709200</doc-number><kind>A</kind><date>20070512</date></document-id></priority-claim><priority-claim mxw-id="PPC140550779" ucid="GB-2008001640-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>2008001640</doc-number><kind>W</kind><date>20080512</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130812</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989325152" load-source="docdb">H02P   6/18        20060101AFI20130628BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1611591942" load-source="docdb" scheme="CPC">H02P2207/05        20130101 LA20180803BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1611591943" load-source="docdb" scheme="CPC">H02P2203/01        20130101 LA20180803BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1611591944" load-source="docdb" scheme="CPC">H02P   6/186       20130101 FI20180803BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132369470" lang="DE" load-source="patent-office">STROMMESSVORRICHTUNG ZUR VERWENDUNG MIT ELEKTROMOTOREN</invention-title><invention-title mxw-id="PT132369471" lang="EN" load-source="patent-office">CURRENT MEASURING APPARATUS FOR USE WITH ELECTRIC MOTORS</invention-title><invention-title mxw-id="PT132369472" lang="FR" load-source="patent-office">APPAREIL DE MESURE DE COURANT, DESTINÉ À ÊTRE UTILISÉ AVEC DES MOTEURS ÉLECTRIQUES</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919504637" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TRW LTD</last-name><address><country>GB</country></address></addressbook></applicant><applicant mxw-id="PPAR919532303" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TRW LIMITED</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919517681" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>INTROWICZ ERNEST HENRY</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR919544847" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>INTROWICZ, ERNEST, HENRY</last-name></addressbook></inventor><inventor mxw-id="PPAR919022365" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>INTROWICZ, ERNEST, HENRY</last-name><address><street>26 Avon Road Shirley</street><city>Solihull B90 4RJ</city><country>GB</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR919022367" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TRW Limited</last-name><iid>101059979</iid><address><street>Stratford Road</street><city>Solihull B90 4AX</city><country>GB</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR919022366" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tranter, Andrew David</last-name><iid>101051329</iid><address><street>Barker Brettell LLP 100 Hagley Road Edgbaston</street><city>Birmingham B16 8QQ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="GB-2008001640-W"><document-id><country>GB</country><doc-number>2008001640</doc-number><kind>W</kind><date>20080512</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2008139178-A1"><document-id><country>WO</country><doc-number>2008139178</doc-number><kind>A1</kind><date>20081120</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549868842" load-source="docdb">AT</country><country mxw-id="DS549876809" load-source="docdb">BE</country><country mxw-id="DS549801114" load-source="docdb">BG</country><country mxw-id="DS549923420" load-source="docdb">CH</country><country mxw-id="DS549876818" load-source="docdb">CY</country><country mxw-id="DS549868843" load-source="docdb">CZ</country><country mxw-id="DS549891291" load-source="docdb">DE</country><country mxw-id="DS549876819" load-source="docdb">DK</country><country mxw-id="DS549876820" load-source="docdb">EE</country><country mxw-id="DS549783507" load-source="docdb">ES</country><country mxw-id="DS549801115" load-source="docdb">FI</country><country mxw-id="DS549923421" load-source="docdb">FR</country><country mxw-id="DS549891292" load-source="docdb">GB</country><country mxw-id="DS549876821" load-source="docdb">GR</country><country mxw-id="DS549891297" load-source="docdb">HR</country><country mxw-id="DS549868844" load-source="docdb">HU</country><country mxw-id="DS549923422" load-source="docdb">IE</country><country mxw-id="DS549876826" load-source="docdb">IS</country><country mxw-id="DS549801116" load-source="docdb">IT</country><country mxw-id="DS549876827" load-source="docdb">LI</country><country mxw-id="DS549801125" load-source="docdb">LT</country><country mxw-id="DS549871941" load-source="docdb">LU</country><country mxw-id="DS549801126" load-source="docdb">LV</country><country mxw-id="DS549801127" load-source="docdb">MC</country><country mxw-id="DS549871946" load-source="docdb">MT</country><country mxw-id="DS549783508" load-source="docdb">NL</country><country mxw-id="DS549784332" load-source="docdb">NO</country><country mxw-id="DS549783513" load-source="docdb">PL</country><country mxw-id="DS549801128" load-source="docdb">PT</country><country mxw-id="DS549868845" load-source="docdb">RO</country><country mxw-id="DS549783514" load-source="docdb">SE</country><country mxw-id="DS549923423" load-source="docdb">SI</country><country mxw-id="DS549784341" load-source="docdb">SK</country><country mxw-id="DS549871947" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><description mxw-id="PDES63960704" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This invention relates to a current measuring apparatus for use with an electric motor, and to a drive apparatus for an electric motor which uses a current measuring apparatus in determining the angular position of the electric motor. It has particular application in an electric power steering system.</p><p id="p0002" num="0002">Electric motors have found application in a wide range of situations. One particular area in which they have found use in the last two decades is electric power steering systems. In such a system, an electric motor is used to provide an assistance torque for the driver. The motor is connected to the steering system and applies a torque that is dependent on the torque applied to the steering system by the driver. This is typically measured using a torque sensor connected to the steering column.</p><p id="p0003" num="0003">In order to control the motor, it is often required to know the position of the motor. This measurement can also be used in a steering system to determine the position of the steering column and hence the angle of the roadwheels and steering wheel. Provided that there is a fixed relationship between the motor angle and the steering wheel then knowledge of the position of one allows the position of the other to be calculated. This measurement is usually performed using an angular position sensor.</p><p id="p0004" num="0004">It has been appreciated that it would be advantageous to be able to measure motor position without the need for a dedicated position sensor. This would allow sensorless control and potentially reduce both costs and complexity of the system.<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">In applicants earlier patent application published as <patcit id="pcit0001" dnum="WO2004023639A"><text>WO2004/023639</text></patcit>. There is disclosed a method of controlling a motor which provides for a low level of acoustic noise by careful selection of the voltage waveforms used to drive the motor phases. In that application, a technique for sensorless control which exploits measurements of the instantaneous motor phase current is proposed. Changes in reluctance with motor position are determined by measurement of the rate of change of current in a phase of the motor. This means that a dedicated position sensor is no longer needed and can instead be replaced by a measuring circuit 600 as shown in <figref idrefs="f0005">Figure 6</figref> of the accompanying drawings. By measuring the di/dt of the motor current ripple with sufficient resolution and accuracy such that in conjunction with a known motor inductance variation with position the motor position can be determined even at low motor speeds, perhaps down to zero rpm.</p><p id="p0006" num="0006">A simple position measuring circuit is suggested in <patcit id="pcit0002" dnum="WO2004023639A"><text>WO2004/023639</text></patcit> involving a differential amplifier 610 connected directly across a shunt resistor 620 to measure the rate of change of current di/dt in a phase and from this determine the phase inductance and then position. The amplifier will amplify the voltage dropped across the resistor and must have a high dynamic range to accommodate the large change in voltage at the start of a test pulse as well as the small changes in voltage within a test pulse. The need for the high precision amplifier high dynamic range amplifier increases costs which the applicant now realises is undesirable.</p><p id="p0007" num="0007"><patcit id="pcit0003" dnum="US5015939A"><text>US-A-5 015 939</text></patcit> discloses an alternative circuit for measuring current in a phase of a motor in which a mask is applied to an output of a slope detector so that only the change in voltage from the slope detector during a measurement window of interest is passed on for further processing. This does not solve the problem of having to use a slope detector with a high dynamic range.</p><p id="p0008" num="0008">The invention provides a drive system as defined in claim 1.<!-- EPO <DP n="3"> --></p><p id="p0009" num="0009">The use of a switch which selectively permits transmission of a voltage dependent upon the instantaneous voltage dropped across the current measurement element (by being opened and closed or vice versa) to provide a measurement period can be used to ensure that at least a part of measuring circuit is not exposed to the voltage across the element at a time when excessively high rates of change of current occur in the phase such as the leading and trailing edges of a pulse of a pulse width modulation scheme.</p><p id="p0010" num="0010">The switch may be operable between a first state in which it is closed and a second state in which it is open.<!-- EPO <DP n="4"> --></p><p id="p0011" num="0011">The current measuring element may comprise one or more resistors connected in series with a phase of the motor such that current flowing through the motor phase flows through the resistor. The measuring circuit may measure the voltage dropped across the resistor, or more preferably the change in the voltage dropped across the resistor during the measurement period of time. From this change the rate of change can be calculated which is dependent on the motor phase inductance.</p><p id="p0012" num="0012">The measurement circuit may further include a capacitor which prior to the measurement period of time is electrically connected (directly or indirectly) to the resistive element (or another component which has a voltage dropped across it that depends on the voltage dropped across the resistive element) when the switch is in the first state such that the voltage across the capacitor is dependent on the voltage across the element, and which during the measurement period of time the capacitor is electrically isolated from the resistive element so as to hold across its terminals a voltage equal to the voltage across the current sensing element at the time that the switch is moved to it second state.</p><p id="p0013" num="0013">Thus, in the second state the switch selectively isolates that part of the circuit that includes the capacitor from the instantaneous voltage dropped across the element during the measurement period of time.</p><p id="p0014" num="0014">In the second state the switch may be open and in the first state it may be closed. For a perfect switch having zero conductance and infinite impedance when closed this will mean that the capacitor is completely isolated. Of course, a practical switch will have a non-zero conductance and finite impedance when closed but the scope of claim should be construed such that the presence of such a finite impedance is still considered to represent isolation of the capacitor and element.<!-- EPO <DP n="5"> --></p><p id="p0015" num="0015">In this arrangement the switch selectively isolates the resistive element of the circuit from the capacitor during measurement so that is then prevented from discharge. This held voltage on the capacitor can then be used by the measuring circuit to indicate the voltage at the start of the measuring period and provides a reference against which the voltage across the element during the measurement period can be compared to give a measurement of the change of voltage and hence change of current.</p><p id="p0016" num="0016">The capacitor and switch may therefore form part of a sample and hold circuit with the switch performing the function of the trigger for the sample and hold circuit.<!-- EPO <DP n="6"> --></p><p id="p0017" num="0017">More specifically, the circuit may comprise a differential amplifier having a first input connected to the current measuring element and a second input connected to the side of the capacitor that is not connected to the switch, (i.e. the output of a sample and hold circuit as described above). The first input may comprise the positive input and the second the negative input of the amplifier.</p><p id="p0018" num="0018">The amplifier will therefore give an output at any instant during the measurement period of time indicative of the change in current in the phase. At other times, both inputs may receive the same voltage and hence the amplifier may produce a zero output voltage. By using a high input impedance amplifier and a short measuring period there will be little or no discernible drop in the charge on the capacitor, and hence its held voltage.</p><p id="p0019" num="0019">In an alternative arrangement the measurement circuit may include a capacitor which prior to the measurement period of time is electrically connected (directly or indirectly) to the resistive element (or another component which has a voltage dropped across it that depends on the voltage dropped across the resistive element) both immediately prior to the measuring period and during the measuring period and in which the switch is adapted to connect the other side of the capacitor to ground immediately prior to the measuring period of time and to isolate the other side of the capacitor from ground during the measurement period of time.</p><p id="p0020" num="0020">Thus the switch selectively isolates that part of the circuit which contains the input to the amplifier from the voltage dropped across the resistor during the measurement period of time.</p><p id="p0021" num="0021">In this alternative arrangement the effect of the capacitor and switch is to<!-- EPO <DP n="7"> --> selectively clamp the output side of capacitor to the ground level prior to the measurement period such that during the measurement period the voltage at the output of the capacitor only reflects the changes in the voltage across the measurement element that occur during the measurement period. Any DC component to the voltage is therefore effectively removed.</p><p id="p0022" num="0022">The switched side of the capacitor may be electrically connected to the input of an amplifier so that the circuit functions as a keyed clamp or DC restoration amplifier circuit with respect to the DC component of the voltage dropped across the resistive element. The signal applied to the switch acts as the "key". Other arrangements of components forming a keyed clamp can be used, the common aim being to remove the DC component of the voltage across the element such that the amplifier then amplifies only the AC part.</p><p id="p0023" num="0023">Both arrangements (sample and hold and DC restoration) offer the advantage over a simple differential amplifier that they will not be saturated by the high swings in current that occur during initial switch on of a phase and are simpler to implement than the differential amplifier which would need very high precision components to measure the small expected ripples in current. The output of the amplifier also only reflects the change in voltage during the measurement period rather than the absolute voltage across the measurement element.</p><p id="p0024" num="0024">The switch may comprise a transistor such as a field effect transistor, the control signal being applied to the base of the transistor to vary the impedance between its collector and emitter. It may comprise a mechanical switch such as a relay.<!-- EPO <DP n="8"> --></p><p id="p0025" num="0025">The output from the measuring circuit may further be amplified using an analogue amplifier. It may then be fed to an A/D converter where the magnitude of the signal is converted into digital form as a measured current value.</p><p id="p0026" num="0026">The digital measured current/ di/dt value may be stored in a memory such that a running temporal window of measurements is stored for subsequent analysis. The apparatus may therefore include an area of volatile memory in which samples can be stored prior to processing.</p><p id="p0027" num="0027">The current measuring circuit may be provided as an ASIC.</p><p id="p0028" num="0028">The apparatus may include a pulse generator circuit which generates a pulse waveform that is applied to the motor phase, the switch controller starting the measurement period after the leading edge of the pulse and ending it before the trailing edge of the pulse (or vice versa) by operating the switch. The pulse may be of a known nominally constant current value , i.e. it may be a square wave pulse. The pulse may comprise a normal pulse used within a motor PWM control scheme.</p><p id="p0029" num="0029">The switch controller may receive a signal from the test pulse generator, which may form part of a motor controller circuit.</p><p id="p0030" num="0030">The current measurement circuit may take measurements as soon as the measurement period starts. Otherwise, the switch may be moved from a closed position to an open position (or from an open position to a closed position) to define the start of a measurement period of time at a time of less than 10useconds before the measurement circuit starts to take measurements, or less than 5useconds or less than 1usecond. This short delay allows a short measurement period to be used if desired. This is only possible because the switch, together with correct timing of the<!-- EPO <DP n="9"> --> measurement period of time as will be described later, ensures the measurement circuit does not need time to "recover" from exposure to the edge of a pulse signal.</p><p id="p0031" num="0031">By providing an output we may mean that the output comprises an intermediary signal which is subsequently processed to provide a measure of motor position. The output may therefore not be readily accessible and may simply function as an input to a further electronic circuit. For instance, the circuit may be embodied as an ASIC and the output may comprise a process signal which is used as an input to a further circuit provided on the same ASIC.</p><p id="p0032" num="0032">The application provides a drive system for a multi-phase brushless electric motor comprising a plurality of phases, the system comprising a drive circuit including phase switching means for varying the phase voltage applied across each of the phases, and control means arranged to control the phase switching means so as to provide PWM control of the phase voltages to control the mechanical output of the motor, measure a rate of change of current in at least one of the phases during a test period and to determine therefrom the inductance of at least one of the phases thereby to determine the rotational position of the motor, the control means determining the change of current using the output of a current measuring circuit comprising:
<ul><li>a current measurement element having a resistance;</li><li>a switch which in use selectively permits transmission of a voltage dependent upon the voltage dropped across the current measurement element to a part of the circuit; and</li><li>a switch controller which is adapted to operate the switch in response to timing signals supplied by the switch controller so as to define the measurement period of time.</li></ul><!-- EPO <DP n="10"> --></p><p id="p0033" num="0033">The system may include a memory which stores inductance values relative to motor angular position.</p><p id="p0034" num="0034">The drive system may control the motor using a PWM scheme and as such may produce a PWM voltage pattern. The test period may be chosen to lie wholly within one pulse of the PWM pattern such that the voltage applied to the motor phases is known to be substantially constant throughout that period.</p><p id="p0035" num="0035">The means for varying may comprise a plurality of phase switches.</p><p id="p0036" num="0036">There will now be described, by way of example only one embodiment of the present invention with reference to and as illustrated in the accompanying drawings of which:
<ul><li><figref idrefs="f0001"><b>Figure 1</b></figref> is an illustration of an embodiment of a motor position measurement apparatus in accordance with one aspect of the present invention;</li><li><figref idrefs="f0002"><b>Figure 2</b></figref> is an illustration of the motor current measurement stage of the embodiment of <figref idrefs="f0001">Figure 1</figref>;</li><li><figref idrefs="f0002"><b>Figure 3</b></figref> is an illustration of an alternative motor current measurement stage of the embodiment of <figref idrefs="f0001">Figure 1</figref>; and</li><li><figref idrefs="f0003 f0004"><b>Figures 4(a) to (d)</b></figref>are graphs showing typical stored inductance values, current measurements and the manner in which they can be matched to the stored inductance values to determine both motor position and speed by the apparatus of <figref idrefs="f0001">Figure 1</figref>;</li><li><figref idrefs="f0005"><b>Figure 5</b></figref> shows a typical voltage waveform in a phase of the motor driven using a square wave PWM drive signal;<!-- EPO <DP n="11"> --></li><li><figref idrefs="f0005"><b>Figure 6</b></figref> illustrates a prior art current measuring circuit used in measuring the rate of change of current in a phase of a motor.</li></ul></p><p id="p0037" num="0037"><figref idrefs="f0001">Figure 1</figref> shows an overview of an embodiment of a motor drive system in accordance with the second aspect of the invention. The system is shown connected to a motor, which in this example is a permanent magnet sinusoidal motor (also known as PMAC motor) having three phases. Such motors are well known in the art, and the skilled man will understand that they can be driven by applying square waveform voltages to each of the phases of the motor to approximate a sinusoidal waveform, the duty cycle of the square waveforms determining the motor speed. The PWM waveforms are generated by a PWM control stage 60 and implemented by a drive stage 70 comprising a plurality of phase switches.</p><p id="p0038" num="0038">A typical set of waveforms to be applied to the 3 phases is shown in <figref idrefs="f0005">Figure 5</figref> of the drawings and in which a two test periods can be seen of equal length T. Note that at switch on of each phase the current rises rapidly in a phase, with a high corresponding di/dt and then settles down at a substantially constant DC level before it again falls rapidly. In reality small changes in the DC level will occur due to changes in phase inductance as the motor rotates.</p><p id="p0039" num="0039">Optionally, within the PWM pattern as shown in <figref idrefs="f0005">Figure 5</figref> a test pulse may be applied to the motor. The purpose of this test pulse is to provide a period of time in which a known current flows in only one phase of the motor (with no current applied to the others). This can then be measured, or more correctly the rate of change of that current can be measured, for use in determining the motor position. This test pulse should be kept as short as possible, say less than 10useconds allowing many such short test pulses to be applied within a single motor revolution.<!-- EPO <DP n="12"> --></p><p id="p0040" num="0040">The system further comprises a motor current measurement circuit 20 and a comparison stage 30. The measurement circuit 20 determines the change of current in a motor phase over time during a test period (i.e. the ac component of the current), and the comparison stage 30 compares this with known motor inductance information 40 stored in memory. Since the change in current is caused by changes in inductance, knowledge of the former is used by the comparison stage to determine the corresponding changes in inductance and hence motor position 50. The more test pulses in a revolution, the more position measurements can be made allowing greater control.</p><p id="p0041" num="0041">A first embodiment of a motor current measurement circuit in accordance with a first aspect of the invention is shown in <figref idrefs="f0002">Figure 2</figref> of the accompanying drawings. The role of the circuit is to measure the change in instantaneous current during the time that current is applied to a phase of the motor during the test pulse period. As shown in <figref idrefs="f0005">figure 5</figref>, for example, several different periods in which the current flowing through the shunt resistor is equal to the current in phase A, B and C respectively are provided.</p><p id="p0042" num="0042">The measuring stage may comprise a shunt resistor 100 as shown through which the current applied to one of the phases is passed. The voltage V dropped across this resistor 100 then gives a measure of the current assuming that the value of the resistance is known, according to Ohms law.</p><p id="p0043" num="0043">The voltage V dropped across the resistor is fed to a keyed clamp circuit. In this example it comprises a capacitor C 200 which is connected on one side to the end of the resistor fed with the current from the phase winding and on its other side to an input of an operational amplifier 300. A switch<!-- EPO <DP n="13"> --> in the form of a transistor 400, is then connected between that input of the amplifier and a ground plane. A control signal is applied to the base of the transistor from a switch controller (not shown).</p><p id="p0044" num="0044">The operation of the circuit is as follows. The switch is normally closed so that the transistor pulls the input of the amplifier to ground. This state is held prior to the start of a measurement period of time. The input of the amplifier is held to ground and so the amplifier will give a zero voltage output. At the start of the measurement period of time the switch is opened so that the transistor presents a high impedance path from the amplifier input to the ground. The output of the amplifier 300 will then comprise a voltage whose amplitude varies as a function of the change in voltage across the resistor since the measurement period started. This occurs because a voltage across the capacitor is clamped at the time that the switch is opened.</p><p id="p0045" num="0045">An alternative embodiment of a motor current measurement circuit in accordance with the present invention is shown in <figref idrefs="f0002">Figure 3</figref> of the accompanying drawings. This uses a sample and hold circuit to capture the current value just after the current flows in the phase, and then sends this to one input of an differential amplifier.</p><p id="p0046" num="0046">The circuit comprises a sample and hold amplifier which stores voltage across the resistor on a capacitor whilst a control switch is closed (the "sample" state of the amplifier). In this state the voltage presented at the output of the amplifier will be equal to the voltage dropped across the resistor. When the switch is hold open (the "hold" state of the amplifier) the voltage is held on the capacitor and is presented at the output of the amplifier as the held value.<!-- EPO <DP n="14"> --></p><p id="p0047" num="0047">The output of the sample and hold amplifier is fed to the negative input of a differential amplifier. The other input of the amplifier receives the voltage across the resistor directly. The output of the amplifier prior to the measurement period will therefore be zero, since the voltage at both inputs will be the same and during the measurement period will be a function of the change in voltage across the resistor 100 since one input is held at a fixed level.</p><p id="p0048" num="0048">This alternative circuit is slightly less preferred as the operational amplifier would require a positive and negative supply voltage which makes it less suited to battery powered applications such as automotive applications.</p><p id="p0049" num="0049">In both cases, the output of the measurement circuit is an analogue signal whose voltage varies as the current in the phase varies, and which has the DC offset removed from it. This is an analogue signal and is converted to digital using an A/D converter. Because the measurements only start after current has started to flow, the large initial rise in di/dt is not included in the measurements. This could otherwise saturate the circuits which may then need some time to recover. Leaving it until this event has passed removes this problem.</p><p id="p0050" num="0050">The comparison stage performs the function of comparing the changes in the rate of change of current over time with the known changes in inductance of the motor as it rotates. To perform this comparison the stage requires access to inductance values as a function of position. A table of such values are therefore stored in a memory which can be accessed by the comparison stage. A set of values for a complete motor revolution is shown in <figref idrefs="f0003">Figure 4(a)</figref>.<!-- EPO <DP n="15"> --></p><p id="p0051" num="0051">A set of current rate of change measurements are shown in <figref idrefs="f0003">Figure 4(b)</figref> for a time period which corresponds to 2 rotations of the motor. Of course, if the motor were to be slowed down, this time period would correspond to less rotations, and the opposite if it were sped up. At this stage the motor speed is not known, nor is its position at any time.</p><p id="p0052" num="0052">A window is then applied to the current samples having a centre time T and spanning from a time T1 to T2. This window will comprise a predetermined number of samples. This window of samples is then compared with the set of inductance values to find a best match. The aim is to find the inductance value that best corresponds to the central sample at time T.</p><p id="p0053" num="0053">This match can be seen conceptually in <figref idrefs="f0003 f0004">Figure 4(c) and (d)</figref> of the accompanying drawings. In making the match, the comparison stage needs to take into consideration that the speed of the motor as well as the position are unknown. The current samples may therefore need to be "speeded up" or "slowed down" to match the stored inductance samples. This is shown in <figref idrefs="f0004">Figure 4(c)</figref> where in the example they are slowed down by a factor α so that it matches a portion of the inductance sample shown in 4(d).</p><p id="p0054" num="0054">The amount of stretch, i.e. the value of α can be determined by seeing how many samples have been captured before the pattern repeats, and interpolating to make the same number of samples fit this period as there are stored inductance samples for one revolution.</p><p id="p0055" num="0055">The amount of stretch or compression gives a measure of the motor speed. The position on the rotor that corresponds to the inductance value that matches the sample at time T indicates the rotor position at that time. In the example this is about 180 degrees.<!-- EPO <DP n="16"> --></p><p id="p0056" num="0056">Having matched the current samples to the inductance samples the speed of the motor has therefore been determined as well as the motor position.</p><p id="p0057" num="0057">In a refinement, a number of sets of samples obtained from different motor drive pulses can be combined to smooth out the measurements. This can be used to reduce the effects of noise and increase the accuracy of the measurements. Also, the process can be repeated for more than one phase.</p></description><claims mxw-id="PCLM56984849" lang="DE" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-de-01-0001" num="0001"><claim-text>Ein Antriebssystem für einen mehrphasigen bürstenlosen Elektromotor (10), umfassend eine Vielzahl von Phasen, wobei das System eine Antriebsschaltung (70) umfasst, welche Phasenumschaltmittel zum Verändern der über jede der Phasen angelegten Phasenspannung beinhaltet, sowie ein Steuermittel (60), das angeordnet ist, um die Phasenumschaltmittel zu steuern, damit eine Impulsbreitenmodulationssteuerung der Phasenspannungen bereitgestellt wird, um die mechanische Leistung des Motors (10) und eine Strommessschaltung (20) zu steuern, welche geeignet ist, eine Ausgabe bereitzustellen, die die Veränderung des Stromes, welcher während eines Messzeitraumes in mindestens einer der Phasen fließt, anzeigt, und um daraus die Induktivität von mindestens einer der Phasen zu ermitteln, wodurch die Drehstellung des Motors (10) aus einer bekannten Variation der Induktivität mit der Motorstellung bestimmt wird, wobei die Strommessschaltung (20) Folgendes umfasst:
<claim-text>ein Strommesselement, das einen Widerstand (100) aufweist, welcher mit mindestens einer Phase des Motors (10) in Reihe geschaltet ist, <b>dadurch gekennzeichnet, dass</b> die Strommessungsschaltung (10) überdies umfasst:
<claim-text>einen Schalter (400), der in Verwendung selektiv die Übertragung einer Spannung, die abhängig ist vom momentanen Spannungsabfall über dem Widerstand (100) des Strommesselements, zu einem Teil der Schaltung erlaubt, welcher die Veränderung des Spanungsabfalls über dem Widerstand (100) des Strommesselements während des Messzeitraumes misst; und</claim-text>
<claim-text>eine Schaltersteuerung, die geeignet ist, den Schalter (400) als Reaktion auf Taktsignale zu betätigen, die durch die Schaltersteuerung geliefert werden, um den Messzeitraum zu definieren, welcher entweder nach der Vorderflanke eines Impulses beginnt und vor der nächsten Rückflanke des Impulses endet oder nach einer Rückflanke des Impulses und vor der nächsten Vorderflanke eines Impulses beginnt, wobei die an die Phase angelegte Spannung während des Messzeitraumes im Wesentlichen konstant ist.</claim-text></claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Ein Antriebssystem gemäß Anspruch 1, in dem der Schalter (400) zwischen einem ersten Zustand, in dem er offen ist, und einem zweiten Zustand, in dem er geschlossen ist, betätigbar ist.</claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Ein Antriebssystem gemäß Anspruch 1, in dem das Strommesselement einen oder mehrere Widerstände umfasst, die mit einer Phase des Motors (10) in Reihe geschaltet sind, sodass Strom, der durch die Motorphase fließt, durch den Widerstand fließt, wobei die<!-- EPO <DP n="21"> --> Messschaltung (20) angeordnet ist, um die Veränderung des Spannungsabfalls über dem Widerstand während des Messzeitraumes zu messen.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Ein Antriebssystem gemäß Anspruch 3, das überdies einen Kondensator (C) beinhaltet, der vor dem Messzeitraum elektrisch mit dem Widerstandselement verbunden ist, wenn sich der Schalter im ersten Zustand befindet, sodass die Spannung über dem Kondensator (C) von der Spannung über dem Widerstand abhängt, und wobei der Kondensator (C) während des Messzeitraumes elektrisch vom Widerstand isoliert ist, um über seinen Anschlüssen eine Spannung zu halten, die der Spannung über dem Widerstand zum Zeitpunkt, wenn der Schalter in seinen zweiten Zustand geschaltet wird, entspricht.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Ein Antriebssystem gemäß Anspruch 4, in dem der Schalter im zweiten Zustand offen ist und im ersten Zustand geschlossen ist.</claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Ein Antriebssystem gemäß Anspruch 4 oder Anspruch 5, in dem der Kondensator (C) und der Schalter einen Teil einer Abtast-Halte-Schaltung (500) bilden, wobei der Schalter die Funktion des Auslösers für die Abtast-Halte-Schaltung (500) ausübt.</claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Ein Antriebssystem gemäß Anspruch 6, in dem die Strommessschaltung einen Differentialverstärker (300) einschließt, der einen ersten Eingang, welcher mit dem Widerstand (100) der Strommessschaltung (20) verbunden ist, und einen zweiten Eingang, welcher mit dem Ausgang der Abtast-Halte-Schaltung (500) verbunden ist, aufweist.</claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Ein Antriebssystem gemäß einem der Ansprüche 1 bis 3, das einen Kondensator (200) einschließt, welcher vor dem Messzeitraum elektrisch an einem Ende des Widerstands (100) der Strommessschaltung (20) sowohl unmittelbar vor als auch während des Messzeitraumes verbunden ist, und in dem der Schalter geeignet ist, das andere Ende des Kondensators (200) unmittelbar vor dem Messzeitraum an Masse anzuschließen und das genannte andere Ende des Kondensators (200) während des Messzeitraumes von Masse zu trennen.</claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Ein Antriebssystem gemäß Anspruch 8, in dem das genannte andere Ende des Kondensators (200) elektrisch an den Eingang eines Verstärkers (300) angeschlossen ist, um eine DC-Erneuerungsschaltung im Hinblick auf die DC-Komponente des Spannungsabfalls über dem Widerstandselement zu bilden.<!-- EPO <DP n="22"> --></claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Ein Antriebssystem gemäß einem vorhergehenden Anspruch, in dem der Schalter einen Feldeffekttransistor (400) umfasst, wobei das Steuersignal an die Basis des Transistors angelegt wird, um die Impedanz zwischen seinem Kollektor und Emitter zu verändern.</claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Ein Antriebssystem gemäß einem vorhergehenden Anspruch, in dem die Ausgabe von der Messschaltung unter Verwendung eines Analogverstärkers (300) weiter verstärkt wird und dann einem A/D-Wandler zugeführt wird, in welchem die Größe des Signals als gemessener Stromwert in eine digitale Form umgewandelt wird.</claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>Das Antriebssystem von Anspruch 1, das einen Speicher beinhaltet, welcher die Induktivitätswerte relativ zur Winkelposition des Motors speichert.</claim-text></claim></claims><claims mxw-id="PCLM56984850" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-01-0001" num="0001"><claim-text>A drive system for a multi-phase brushless electric motor (10) comprising a plurality of phases, the system comprising a drive circuit (70) including phase switching means for varying the phase voltage applied across each of the phases, and control means (60) arranged to control the phase switching means so as to provide pulse width modulation control of the phase voltages to control the mechanical output of the motor (10), and a current measurement circuit (20) adapted to provide an output indicative of the change in the current flowing in at least one of the phases during a measurement period of time and to determine therefrom the inductance of at least one of the phases thereby to determine the rotational position of the motor (10) from a known variation of inductance with motor position, the current measurement circuit (20) comprising:
<claim-text>a current measurement element having a resistance (100) in series with at lease one phase of the motor (10) <b>characterised in that</b> the current measurement circuit (10) further comprises;</claim-text>
<claim-text>a switch (400) which in use selectively permits transmission of a voltage dependent upon the instantaneous voltage dropped across the resistance (100) of the current measurement element to a part of the circuit which measures the change in the voltage dropped across the resistance (100) of the current measurement element during the measurement period of time; and</claim-text>
<claim-text>a switch controller which is adapted to operate the switch (400) in response to timing signals supplied by the switch controller so as to define the measurement period of time which either starts after the leading edge of a pulse and ends before the next trailing edge of the pulse or starts after a trailing edge of the pulse and before the next leading edge of a pulse, the voltage applied to the phase being substantially constant during the measurement period of time.</claim-text><!-- EPO <DP n="18"> --></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>A drive system according to claim 1 in which the switch (400) is operable between a first state in which it is open and a second state in which it is closed.</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>A drive system according to claim 1 in which the current measuring element comprises one or more resistors connected in series with a phase of the motor (10) such that current flowing through the motor phase flows through the resistor, the measuring circuit (20) being arranged to measure the change in the voltage dropped across the resistor during the measurement period of time.</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>A drive system according to claim 3 which further includes a capacitor (C) which prior to the measurement period of time is electrically connected to the resistive element when the switch is in the first state such that the voltage across the capacitor (C) is dependent on the voltage across the resistor, and which during the measurement period of time the capacitor (C) is electrically isolated from the resistor so as to hold across its terminals a voltage equal to the voltage across the resistor at the time that the switch is moved to it second state.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>A drive system according to claim 4 in which in the second state the switch is open and in the first state it is closed.</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>A drive system according to claim 4 or claim 5 in which the capacitor (C) and switch form part of a sample and hold circuit (500) with the switch performing the function of the trigger for the sample and hold circuit (500).</claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>A drive system according to claim 6 in which the current measuring circuit includes a differential amplifier (300) having a first input connected to the resistance (100) of the current measuring circuit (20) and a second input connected to the output of the sample and hold circuit (500).<!-- EPO <DP n="19"> --></claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>A drive system according to any one of claims 1 to 3 which includes a capacitor (200) which prior to the measurement period of time is electrically connected at one end to the resistance (100) of the current measurement circuit (20) both immediately prior to the measuring period and during the measuring period and in which the switch is adapted to connect the other end of the capacitor (200) to ground immediately prior to the measuring period of time and to isolate the said other end of the capacitor (200) from ground during the measurement period of time.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>A drive system according to claim 8 in which the said other end of the capacitor (200) is electrically connected to the input of an amplifier (300) to form a DC restoration circuit with respect to the DC component of the voltage dropped across the resistive element.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>A drive system according to any preceding claim in which the switch comprises a field effect transistor (400), the control signal being applied to the base of the transistor to vary the impedance between its collector and emitter.</claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>A drive system according to any preceding claim in which the output from the measuring circuit is further amplified using an analogue amplifier (300) and then fed to an A/D converter where the magnitude of the signal is converted into digital form as a measured current value.</claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>The drive system of claim 1 which includes a memory which stores inductance values relative to motor angular position.</claim-text></claim></claims><claims mxw-id="PCLM56984851" lang="FR" load-source="patent-office"><!-- EPO <DP n="23"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Un système d'entraînement pour un moteur électrique sans balais multiphase (10) comprenant une pluralité de phases, le système comprenant un circuit d'entraînement (70) comprenant un moyen de commutation de phase destiné à varier la tension de phase appliquée sur chacune des phases, et un moyen de commande (60) agencé de façon à commander le moyen de commutation de phase de façon à fournir une commande de modulation en largeur d'impulsion des tensions de phase destinée à commander la sortie mécanique du moteur (10) et un circuit de mesure de courant (20) adapté de façon à fournir une sortie indicative du changement dans le courant circulant dans au moins une des phases au cours d'une période de mesure, et de façon à déterminer à partir de celle-ci l'inductance d'au moins une des phases, de façon à déterminer ainsi la position de rotation du moteur (10) à partir d'une variation connue d'inductance avec une position de moteur, le circuit de mesure de courant (20) comprenant :
<claim-text>un élément de mesure de courant possédant une résistance (100) en série avec au moins une phase du moteur (10) <b>caractérisé en ce que</b> le circuit de mesure de courant (20) comprend en outre :
<claim-text>un commutateur (400) qui, en utilisation, permet de manière sélective une transmission d'une tension dépendante de la tension instantanée perdue au travers de la résistance (100) de l'élément de mesure de courant vers une partie du circuit qui mesure le changement dans la tension perdue au travers de la résistance (100) de l'élément de mesure de courant au cours de la période de mesure, et</claim-text>
<claim-text>un dispositif de commande de commutateur qui est adapté de façon à actionner le commutateur (400) en réponse à des signaux de synchronisation fournis par le dispositif de commande de commutateur de façon à définir la période de mesure qui soit débute après le bord d'attaque d'une impulsion et se termine avant le bord de fuite suivant de l'impulsion ou débute après un bord de fuite de l'impulsion et avant le bord d'attaque suivant d'une impulsion, la tension appliquée à la phase étant sensiblement constante au cours de la période de mesure.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Un système d'entraînement selon la Revendication 1 dans lequel le commutateur (400) est actionnable entre un premier état dans lequel il est ouvert et un deuxième état dans lequel il est fermé.<!-- EPO <DP n="24"> --></claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Un système d'entraînement selon la Revendication 1 dans lequel l'élément de mesure de courant comprend une ou plusieurs résistances raccordées en série à une phase du moteur (10) de sorte qu'un courant circulant au travers de la phase de moteur circule au travers de la résistance, le circuit de mesure (20) étant agencé de façon à mesurer le changement dans la tension perdue au travers de la résistance au cours de la période de mesure.</claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Un système d'entraînement selon la Revendication 3 qui comprend en outre un condensateur (c) qui, avant la période de mesure, est raccordé électriquement à l'élément résistif lorsque le commutateur est dans le premier état de sorte que la tension au travers du condensateur (c) dépende de la tension au travers de la résistance, et, au cours de la période de mesure, le condensateur (c) est électriquement isolé de la résistance de façon à maintenir sur ses bornes une tension égale à la tension au travers de la résistance au moment où le commutateur est déplacé vers son deuxième état.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Un système d'entraînement selon la Revendication 4 dans lequel, dans le deuxième état, le commutateur est ouvert et dans le premier état est fermé.</claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Un système d'entraînement selon la Revendication 4 ou 5, dans lequel le condensateur (c) et le commutateur forment une partie d'un circuit échantillon et de maintien (500) avec le commutateur exécutant la fonction de déclencheur pour le circuit échantillon et de maintien (500).</claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Un système d'entraînement selon la Revendication 6 dans lequel le circuit de mesure de courant comprend un amplificateur différentiel (300) possédant une première entrée raccordée à la résistance (100) du circuit de mesure de courant (20) et une deuxième entrée raccordée à la sortie du circuit échantillon et de maintien (500).</claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Un système d'entraînement selon l'une quelconque des Revendications 1 à 3 qui comprend un condensateur (200) qui, avant la période de mesure, est raccordé électriquement à une extrémité de la résistance (100) du circuit de mesure de courant (20) immédiatement avant la période de mesure et au cours de la période de mesure et dans lequel le commutateur est adapté de façon à raccorder l'autre extrémité du condensateur (200) à la terre immédiatement avant la période de mesure et de façon à isoler ladite autre extrémité du condensateur (200) de la terre au cours de la période de mesure.</claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Un système d'entraînement selon la Revendication 8 dans lequel ladite autre extrémité du condensateur (200) est raccordée électriquement à l'entrée d'un amplificateur (300) de façon à former un circuit de rétablissement de courant continu par rapport à la composante de courant continu de la tension perdue au travers de l'élément résistif.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Un système d'entraînement selon l'une quelconque des Revendications précédentes dans lequel le commutateur comprend un transistor à effet de champ (400), le signal de commande étant appliqué à la base du transistor de façon à varier l'impédance entre son collecteur et son émetteur.</claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Un système d'entraînement selon l'une quelconque des Revendications précédentes dans lequel la sortie du circuit de mesure est encore amplifiée au moyen d'un amplificateur analogique (300) et ensuite acheminée vers un convertisseur analogique/numérique où la magnitude du signal est convertie sous forme numérique en tant que valeur de courant mesurée.</claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>Le système d'entraînement selon la Revendication 1 qui comprend une mémoire qui contient des valeurs d'inductances relatives à une position angulaire de moteur.</claim-text></claim></claims><drawings mxw-id="PDW16671978" load-source="patent-office"><!-- EPO <DP n="26"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="198" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="163" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0003" num="4(a),4(b)"><img id="if0003" file="imgf0003.tif" wi="158" he="190" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0004" num="4(c),4(d)"><img id="if0004" file="imgf0004.tif" wi="165" he="198" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0005" num="5,6"><img id="if0005" file="imgf0005.tif" wi="152" he="233" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
