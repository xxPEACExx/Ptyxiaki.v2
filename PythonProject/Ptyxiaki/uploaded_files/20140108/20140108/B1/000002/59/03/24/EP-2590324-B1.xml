<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2590324-B1" country="EP" doc-number="2590324" kind="B1" date="20140108" family-id="45406548" file-reference-id="315077" date-produced="20180825" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146588070" ucid="EP-2590324-B1"><document-id><country>EP</country><doc-number>2590324</doc-number><kind>B1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11306421-A" is-representative="YES"><document-id mxw-id="PAPP154850262" load-source="docdb" format="epo"><country>EP</country><doc-number>11306421</doc-number><kind>A</kind><date>20111103</date><lang>EN</lang></document-id><document-id mxw-id="PAPP176648349" load-source="docdb" format="original"><country>EP</country><doc-number>11306421.6</doc-number><date>20111103</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140556609" ucid="EP-11306421-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>11306421</doc-number><kind>A</kind><date>20111103</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130711</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989324650" load-source="docdb">H03G   5/00        20060101AFI20120328BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989324651" load-source="docdb">H03G   5/16        20060101ALI20120328BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2027185472" load-source="docdb" scheme="CPC">H03G   5/005       20130101 LI20150822BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2044368183" load-source="docdb" scheme="CPC">H03G   5/165       20130101 FI20150626BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2044373440" load-source="docdb" scheme="CPC">H03G   3/20        20130101 LI20150625BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132368843" lang="DE" load-source="patent-office">Numerische Audiosignalentzerrung</invention-title><invention-title mxw-id="PT132368844" lang="EN" load-source="patent-office">Numeric audio signal equalization</invention-title><invention-title mxw-id="PT132368845" lang="FR" load-source="patent-office">Égalisation de signal audio numérique</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919517501" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ST ERICSSON SA</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR919530169" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ST-ERICSSON SA</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919522128" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TASSART STEPHAN</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR919539834" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>Tassart, Stephan</last-name></addressbook></inventor><inventor mxw-id="PPAR919021385" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tassart, Stéphan</last-name><address><street>1 Square du Diapason</street><city>75019 Paris</city><country>FR</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR919021384" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ST-Ericsson SA</last-name><iid>101105885</iid><address><street>Chemin du Champ-des-Filles 39</street><city>1228 Plan-les-Ouates</city><country>CH</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR919021383" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hirsch &amp; Associés</last-name><iid>100061101</iid><address><street>58, avenue Marceau</street><city>75008 Paris</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS549782105" load-source="docdb">AL</country><country mxw-id="DS549922520" load-source="docdb">AT</country><country mxw-id="DS549797560" load-source="docdb">BE</country><country mxw-id="DS549781012" load-source="docdb">BG</country><country mxw-id="DS549866809" load-source="docdb">CH</country><country mxw-id="DS549797573" load-source="docdb">CY</country><country mxw-id="DS549922521" load-source="docdb">CZ</country><country mxw-id="DS549782106" load-source="docdb">DE</country><country mxw-id="DS549797574" load-source="docdb">DK</country><country mxw-id="DS549797575" load-source="docdb">EE</country><country mxw-id="DS549869214" load-source="docdb">ES</country><country mxw-id="DS549781021" load-source="docdb">FI</country><country mxw-id="DS549866822" load-source="docdb">FR</country><country mxw-id="DS549782107" load-source="docdb">GB</country><country mxw-id="DS549797576" load-source="docdb">GR</country><country mxw-id="DS549782108" load-source="docdb">HR</country><country mxw-id="DS549922522" load-source="docdb">HU</country><country mxw-id="DS549866823" load-source="docdb">IE</country><country mxw-id="DS549797585" load-source="docdb">IS</country><country mxw-id="DS549781022" load-source="docdb">IT</country><country mxw-id="DS549797586" load-source="docdb">LI</country><country mxw-id="DS549781023" load-source="docdb">LT</country><country mxw-id="DS549872893" load-source="docdb">LU</country><country mxw-id="DS549781024" load-source="docdb">LV</country><country mxw-id="DS549781029" load-source="docdb">MC</country><country mxw-id="DS549872898" load-source="docdb">MK</country><country mxw-id="DS549872899" load-source="docdb">MT</country><country mxw-id="DS549797587" load-source="docdb">NL</country><country mxw-id="DS549782113" load-source="docdb">NO</country><country mxw-id="DS549797588" load-source="docdb">PL</country><country mxw-id="DS549781030" load-source="docdb">PT</country><country mxw-id="DS549922523" load-source="docdb">RO</country><country mxw-id="DS549781031" load-source="docdb">RS</country><country mxw-id="DS549797601" load-source="docdb">SE</country><country mxw-id="DS549866824" load-source="docdb">SI</country><country mxw-id="DS549782114" load-source="docdb">SK</country><country mxw-id="DS549782115" load-source="docdb">SM</country><country mxw-id="DS549872900" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63960498" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>TECHNICAL FIELD</u></heading><p id="p0001" num="0001">The invention relates to the field of signal processing, and more particularly to a method, a program, a data storage medium and an electronic device for equalizing a numeric audio signal and/or for configuring an equalizer.</p><heading id="h0002"><u>BACKGROUND</u></heading><p id="p0002" num="0002">Digital (i.e. numeric) audio Equalization (also noted EQ or EQUA) is a widely known functionality needed in many audio applications, such as the enhancement of audio rendering in music player configuration or the correction of audio transducers such as loudspeakers or microphones. Among equalization techniques, graphic audio equalization allows the user to modify the audio equalization curve visually and in real-time. A graphic equalizer generally presents a limited amount of spectral bands and the user of the equalizer is free to modify the amplitude, generally in a decibel (dB) scale, in a limited range for each band (e.g. between -12dB and +12dB).</p><p id="p0003" num="0003">Many audio graphic equalization realizations exist. The complexity of realizations usually depends on the relying technology (whether the signal is analog or digital). A vast literature describes many ways of realizing graphic audio equalizers suited for processing a numeric audio signal. Different designs correspond to different needs.</p><p id="p0004" num="0004">One category of graphic audio equalizers suited for processing a numeric audio signal relies on multi-rate implementations with a polyphase analysis (respectively synthesis) network. These are known as efficient digital implementations for uniform filter bank. With these equalizers, a tree structured filter bank can implement logarithmic scaled bands. Multi-rate solutions are efficient but quite complex to realize. Thus, multi-rate implementations are not appropriate for low-latency applications.</p><p id="p0005" num="0005">Another category of graphic audio equalizers suited for processing a numeric audio signal relies on a FIR direct-form implementation with an adhoc FIR coefficient optimization procedure, such as the well known least-square procedure. This design method is well suited for linear-phase filter design cases. However, these equalizers<!-- EPO <DP n="2"> --> also present a high latency. Furthermore, a FIR direct-form implementation requires a large amount of taps (and therefore a significant complexity) in order to cover low-frequency bands.</p><p id="p0006" num="0006">A last category of graphic audio equalizers suited for processing a numeric audio signal relies on a bank (i.e. a set) of band-pass filters, tuneable in gain. Such equalizers have an improved latency and a simple architecture.</p><p id="p0007" num="0007">The filters of the bank may be of constant band-pass. The paper entitled "<nplcit id="ncit0001" npl-type="s"><text>Using Stereo 10-Band Graphic Equalizer using the DSP56001", Motorola, 1988</text></nplcit> provides an example of a graphic equalizer belonging to this last category with ten bands implemented as a constant band-pass biquadratic filter. In other words, the band-pass, or the quality factor (<i>Q</i>)<i>,</i> is not tuneable. Such equalizers present an issue of spectral ripples, notably when similar gains are given in adjacent bands. The paper entitled "<nplcit id="ncit0002" npl-type="s"><text>Graphic Equalizer design Using High-Order Recursive Filters", M. Holters, U. Zölzer, Proc of DAFx-06, 2006</text></nplcit>, and United State Patent <patcit id="pcit0001" dnum="US5687104A"><text>US 5,687,104</text></patcit>, discuss ways of limiting such spectral ripples. However, the issue of ripples remains significant.</p><p id="p0008" num="0008">Other graphic equalizers belonging to this last category, based on variable-Q filters (e.g. band-pass filters with a tuneable, i.e. configurable, band-pass), such as the solution discussed in United State Patent <patcit id="pcit0002" dnum="US7266205B2"><text>US 7,266,205 B2</text></patcit> allow a better control of the ripple phenomenon. The implementation of variable-Q filters however presents some issues, notably within the context of fixed-point processors. Variable-Q filters may present ringing audio artefacts when IIR parameters are switched (while the signal is processed). Also, local filter divergence or clipping may occur when IIR parameters are interpolated. Finally, there may be a formation of limit cycles when the system returns to rest. This is notably due to the fact that variable-Q filters have variable parameters that belong to feedback loops. Document <patcit id="pcit0003" dnum="EP1087532A2"><text>EP 1 087532 A2</text></patcit> shows a digital graphic equalizer control system. A set of gains is provided to minimize an error.</p><heading id="h0003"><u>SUMMARY</u></heading><p id="p0009" num="0009">The object of the present invention is to alleviate at least partly the above mentioned drawbacks. More particularly, the invention aims at improving the equalization of a numeric audio signal.</p><p id="p0010" num="0010">This object is achieved with a method for configuring an electronic device comprising an equalizer suited for processing a numeric audio signal according to an objective equalization. The equalizer has a transfer function that implements a set of<!-- EPO <DP n="3"> --> band-pass filters. Each band-pass filter has a constant band-pass. Each band-pass filter has a weight in the transfer function that is configurable. The method comprises providing a set of objective gains representing the objective equalization. Each objective gain corresponds to a respective frequency. The method also comprises determining values of the weights of the band-pass filters that minimize an error. The error is evaluated by comparing the set of objective gains to the transfer function. The set of band-pass filters comprises at least one pair of band-pass filters having a common central frequency and distinct band-passes. The method further comprises setting the weights of the band-pass filters to the determined values.</p><p id="p0011" num="0011">This object is also achieved with a computer program comprising instructions for performing the method.</p><p id="p0012" num="0012">This object is also achieved with a data storage medium having recorded thereon the program.</p><p id="p0013" num="0013">This object is also achieved with an electronic device. The device comprises an equalizer suited for processing a numeric audio signal according to an objective equalization. The equalizer has a transfer function that is based on a set of band-pass filters. Each band-pass filter has a constant band-pass. Each band-pass filter has a weight in the transfer function that is configurable. The set of band-pass filters comprises at least one pair of band-pass filters having a common central frequency and distinct band-passes. The device also comprises at least one memory having recorded thereon instructions for performing the above method. The device further comprises at least one processor configured for executing the program recorded on the memory.</p><p id="p0014" num="0014">The memory and/or the processor may be, at least partly, part of (or alternatively totally distinct from) the equalizer. The equalizer may in any case comprise at least one memory (e.g. volatile and/or persistent) and at least one processor for processing a numeric audio signal inputted to the equalizer. In an example, the device is a mobile communication device.</p><p id="p0015" num="0015">The invention offers many advantages, including the following:
<ul><li>Because the equalizer is suited for processing a numeric audio signal according to an objective equalization, the electronic device may be used for equalization of a numeric audio signal, and may thus improve the quality of a numeric audio signal, and/or adapt it to a user's wishes.<!-- EPO <DP n="4"> --></li><li>The equalizer has a transfer function that implements a set of band-pass filters. Thus, the equalizer performs equalization with a low complexity and a low latency.</li><li>Each band-pass filter has a constant band-pass. Thus, the equalizer does not suffer from the issues inherent to variable band-pass filters, such as ringing audio artefacts, local filter divergence or clipping, and formation of limit cycles. The quality of the equalization is thus improved.</li><li>The invention allows providing an objective equalization under the form of a set of objective gains and, accordingly, setting the variable parameters of the transfer function (i.e. the weights of the band-pass filters). The invention is thus well-suited for graphic equalization. The transfer function indeed corresponds to the objective equalization.</li><li>The set of band-pass filters comprises at least one pair of band-pass filters having a common central frequency and distinct band-passes. Such pair(s) of filters offers a degree of freedom as to the band-pass when determining values of the weights of the band-pass filters that minimize an error. This degree of freedom allows the simulation of the behaviour of a variable band-pass filter. Indeed, for the common central frequency of a pair, many different band-passes (i.e. different values of bandwidth, or, quality factor) may be simulated by combining the two filters of the pair. This allows the reduction of the spectral ripples phenomenon and thereby improves the quality of the equalization.</li></ul></p><p id="p0016" num="0016">Further features and advantages of the invention will appear from the following description of embodiments of the invention, given as non-limiting examples, with reference to the accompanying drawings listed hereunder.</p><heading id="h0004"><u>BRIEF DESCRIPTION OF THE DRAWINGS</u></heading><p id="p0017" num="0017"><ul><li><figref idrefs="f0001">FIG. 1</figref> shows a schematic representation of an example of the electronic device,</li><li><figref idrefs="f0002">FIG. 2</figref> shows a flowchart of an example of the method,</li><li><figref idrefs="f0002 f0003">FIGS. 3-5</figref> show examples of the responses of transfer functions, and</li><li><figref idrefs="f0004 f0005">FIGS. 6-10</figref> show examples of the architecture of the equalizer.</li></ul><!-- EPO <DP n="5"> --></p><heading id="h0005"><u>DETAILED DESCRIPTION</u></heading><p id="p0018" num="0018">The method may be performed based on a computer program comprising instructions for performing the method, e.g. by reading the instructions by a processor. The program may be executable on a programmable device. The application program may be implemented in a high-level procedural or object-oriented programming language, or in assembly or machine language if desired. In any case, the language may be a compiled or interpreted language. The program may be a full installation program, or an update program. In the latter case, the program is an update program that updates a programmable device, previously programmed for performing parts of the method, to a state wherein the device is suitable for performing the whole method.</p><p id="p0019" num="0019">The program may be recorded on a data storage medium. The data storage medium may be any memory adapted for recording computer instructions. The data storage medium may thus be any form of nonvolatile memory, including by way of example semiconductor memory devices, such as EPROM, EEPROM, and flash memory devices; magnetic disks such as internal hard disks and removable disks; magneto-optical disks; and CD-ROM disks.</p><p id="p0020" num="0020">A device suitable for performing the method may be an electronic device comprising hardware memory, including volatile and/or non volatile memory, and having recorded thereon the program. The memory may store any other information used by the method. For example, the memory may store information such as the values of the weights of the band-pass filters. Also, the memory may store objective gains that are provided. Also, the memory may store a numeric audio signal. The memory is accessible by at least one processor, e.g. a Central Processing Unit (CPU) of the device. The processor may execute the program and may thereby perform the method, without further programming of the device.</p><p id="p0021" num="0021">The device comprises an equalizer suited for processing a numeric audio signal according to an objective equalization. The equalizer comprises at least one processor and has a transfer function. The transfer function is a relationship between frequencies and gains that may be applied to an input numeric audio signal. In the case of the invention, the transfer function has variable parameters so as to approach the objective equalization.</p><p id="p0022" num="0022">In an example, the device may further comprise audio convertors and transducers, such as digital to analog convertor (DAC) and a loudspeaker. In such a<!-- EPO <DP n="6"> --> case, the device may play the numeric audio signal. The device may further comprise a user graphical interface, such as a sensitive screen or a screen and keyboard, for example for performing graphic equalization.</p><p id="p0023" num="0023">The device may be a communication device. The device may thus comprise a signal emitter and a signal receiver. For example, the device may be a telephone. The device may be a wireless communication device. The device may be mobile (i.e. transportable). The device may for example be a mobile phone (e.g. a cell phone).</p><p id="p0024" num="0024">It is referred to <figref idrefs="f0001">FIG. 1</figref> which shows a block diagram representing an example of a mobile electronic device 30, which may be a mobile phone, suitable for implementing the method.</p><p id="p0025" num="0025">In the example, device 30 may be used for capturing audio and image data. For this, device 30 comprises camera 32 and microphone 34 for respectively capturing image and audio data. Device 30 also comprises memory 36 which may comprise volatile and non-volatile memory (not distinguished on the figure). Memory 36 may be divided in several compartments, possibly physically apart in device 30. Memory 36 stores, recorded thereon, instructions for performing the method, possibly already compiled or pre-compiled. Memory 36 also stores, in a volatile or non-volatile way, any captured image and audio data, and any other information used when using device 30 e.g. for performing the method. Device 30 also comprises processors including CPU 38, Image Signal Processor 46 (ISP) and Audio Signal Processor 48 (ASP). These processors access data through bus 44, process the data and circulate the data through the bus 44. Of course, fewer than three processors may physically be embodied, e.g. if one processor accomplishes all computations. On the other hand, more than three processors may physically be embodied, e.g. in the case of parallel processing. Device 30 also comprises display 50 and loudspeaker 52 for outputting data, i.e. for respectively displaying image data and playing audio data. Device 30 also comprises receiver 40 and emitter 42, which are for communicating with the exterior e.g. with other devices, e.g. if device 30 is a cellular phone.</p><p id="p0026" num="0026">Device 30 also comprises equalizer 49, which is coupled with Audio Signal Processor 48 in the example. The functions performed by the equalizer for the equalization of an audio signal may be performed by ASP 48. For example, device 30 may be used for playing (or rendering) a numeric audio signal stored in memory 36. A user may require equalization through a graphical user interface which may be for<!-- EPO <DP n="7"> --> example display 50, which may be a sensitive screen. This launches configuration of equalizer 49, driven by a processor such as ASP 48 and/or CPU 38. After that or meanwhile, the numeric audio signal, for example a musical signal, may be accessed by equalizer 49 which applies the transfer function to it and the transformed signal may be played with loudspeaker 52.</p><p id="p0027" num="0027">It is now referred to <figref idrefs="f0002">FIG. 2</figref> which shows a flowchart of an example of the method for configuring any electronic device comprising an equalizer suited for processing a numeric audio signal according to an objective equalization.</p><p id="p0028" num="0028">The equalizer is suited for processing a numeric audio signal according to an objective equalization. In other words, the equalizer is adapted to modify (i.e. equalize) a numeric audio signal according to a gain/frequency relationship (called the objective equalization, or equalization curve). The equalizer applies a transfer function to the numeric audio signal taken as input and outputs an equalized numeric audio signal. Now, the transfer function of the equalizer of the method implements a set of band-pass filters. This means that the equalizer processes an inputted numeric audio signal via an architecture comprising band-pass filters. (In other words, the equalizer is implemented by a set of band-pass filters.) A filter is a processing module that performs computations on an input numeric signal. A band-pass filter amplifies the signal for frequencies inside a band-pass (i.e. an interval of frequencies, i.e. values inside a band of frequencies). Each band-pass filter has a weight in the transfer function that is configurable (i.e. tuneable, modifiable, settable). In other words, in the equalizer implementation, a configurable weight is applied (or given) to each of the band-pass filters. The weight of a given filter is a scalar factor, or coefficient, that modulates the response of the filter when the transfer function is applied to an input signal. This offers a degree of freedom for each filter and allows the configuration of the equalizer, in other words the modification of the transfer function, e.g. to make it close to the objective equalization.</p><p id="p0029" num="0029">The method of the example comprises providing (S10) a set of objective gains representing the objective equalization. Each objective gain corresponds (i.e. is associated) to a respective frequency. In other words, the method comprises providing a set of points in the gain/frequency domain. The method then comprises determining (S20) values of the weights of the band-pass filters according to the set of objective gains (possibly via the values of variable parameters of which the weights are<!-- EPO <DP n="8"> --> functions). The variable parameters of the equalizer (e.g. the weights of the filters) are thus modified to comply with the objective equalization. This is done by determining the values that minimize an error. This may be done by actually solving such a minimum problem, or by any procedure leading to the same result. The error is evaluated by comparing the set of objective gains to the transfer function. In other words, for a given set of values of the weights of the band-pass filters, the error is a measure of difference, or distance, between the objective equalization (represented by the set of objective gains) and the transfer function (which is evaluated with the given set of values used for the weights of the filters in the transfer function). For example, the error is evaluated by comparing the magnitude from the realized transfer function to the idealized transfer function of the objective equalization. The method may thus comprise performing such evaluation or retrieving such evaluation, and modifying the weights until the error is minimized. The method then comprises setting (S30) the weights of the band-pass filters (in the equalizer, as represented by dotted arrow from the box (S30) to the equalizer on <figref idrefs="f0002">FIG. 2</figref>) to the determined values (i.e. the values that are determined at (S20)). Thus, when equalizing an audio signal, a transfer function closer to the objective equalization is used.</p><p id="p0030" num="0030">The band-pass filters have a constant band-pass. The term "band-pass" refers to any band-related characteristic of a band-pass filter. Notably, the term "band-pass" may refer to the Q-factor, or the bandwidth. In other words, the band-pass filters may have a constant Q-factor, or a constant bandwidth (i.e. the term "band-pass" may thus be replaced by "bandwidth" or "Q-factor" in the following). This implies that the retroacting loops of the band-pass filters, as the band-pass filter may have such, only involve constant parameters (i.e. they do not involve any variable parameter). The equalizer thus presents a higher quality of the output signal compared to prior art equalizer that implement variable band-pass filters, notably at transition time when the objective equalization is modified.</p><p id="p0031" num="0031">This is particularly advantageous in the case of the example, as in the method of <figref idrefs="f0002">FIG. 2</figref>, the equalizer continuously applies (S40) the transfer function to a numeric audio signal which is provided (S38) in order to output (S42) an equalized numeric audio signal, the steps (S38), (S40) and (S42) being performed simultaneously while performing the providing (S10), the determining (S20) and the setting (S30). In other words, while the equalizer is equalizing an input numeric audio signal, the<!-- EPO <DP n="9"> --> configuration of the equalizer may simultaneously occur via (S10)-(S30). The method of the example is thus both for configuring an electronic device comprising an equalizer suited for processing a numeric audio signal according to an objective equalization and for simultaneously processing a numeric audio signal according to the objective equalization (i.e. both for configuring the equalizer and for simultaneously equalizing a numeric audio signal). Indeed, the applying (S40) is always performed by the equalizer as it is configured at the time of the applying (S40). In such a situation, variable band-pass or parameters would generally present risks of ringing artefacts that impact the numeric signal and reduce the quality of the equalized signal at transitions when requiring a new objective equalization. On the contrary, in the case of the method of <figref idrefs="f0002">FIG. 2</figref>, the band-pass, and so the parameters, of the filters are constant (i.e. fixed), which allows to avoid the issue. However, the set of band-pass filters comprises at least one pair of band-pass filters having a common central frequency and distinct band-passes. This allows the simulation of a variable band-pass filter and thus the reduction of spectral ripples, which achieves a high quality of equalization.</p><p id="p0032" num="0032">The equalizer may perform fixed-point implementation, e.g. for performing an equalization of an audio signal. In other words, the processor(s) involved in computations that are performed by the equalizer at least partly implement fixed-point computations. This keeps the equalizer simple and efficient. The band-pass filters may for example be constant-Q biquadratic IIR (Infinite Impulse Response) filters, which are widely known and efficient. The configuration of the equalizer according to the method may however be performed with floating-point implementation.</p><p id="p0033" num="0033">The determining (S20) of the values of the weights of the band-pass filters that minimize the error may be performed under the constraint of interpolating linearly the band-pass filters for each pair of band-pass filters having a common central frequency and distinct band-passes. In other words, for each central frequency for which there is a pair of band-pass filters having a distinct band-pass, the solution (i.e. the optimal weights, in other words, the weights that minimize the error) may be searched among all interpolations of the two filters of the pair (instead of all linear combinations of the two filters of the pair). This allows a good result in a faster way, as the optimization is performed faster (e.g. local minima are efficiently avoided).<!-- EPO <DP n="10"> --></p><p id="p0034" num="0034">An example of the method for configuring any electronic device comprising an equalizer suited for processing a numeric audio signal according to an objective equalization is now presented with reference to <figref idrefs="f0002 f0003 f0004 f0005">FIGS. 3-10</figref> which illustrate the transfer function and the architecture of the equalizer.</p><p id="p0035" num="0035">The method of the example relies on an architecture of the equalizer that leads to a transfer function similar to the simple solution presented in the paper entitled "<nplcit id="ncit0003" npl-type="s"><text>Using Stereo 10-Band Graphic Equalizer using the DSP56001", Motorola, 1988</text></nplcit>. Therefore, the method of the example relies on an equalizer that uses a bank of constant-Q biquadratic IIR filters. However, in order to simulate a variable-Q configuration, according to the method, one pair of constant-Q filters is associated for each band (instead of one single constant-Q filter). Furthermore, each filter in one pair is configured as a band-pass biquadratic filter with the same central frequency (common central frequency) as the other filter of the pair but with a different bandwidth. A linear interpolation between the two filters of the pair of filters (as a constraint for performing the minimization of the error) simulates a variable-Q filter.</p><p id="p0036" num="0036">In must be noted that the linear interpolation between two biquadratic band-pass filters (BPF) with the same central frequency but with different bandwidths is not equivalent to one single biquadratric BPF with a variable bandwidth. However, the approximation is good enough. Indeed, interpolating two constant Q-filters has the same effect as tuning a real variable Q-filter with regard to the optimization procedure. Once the variable-Q filter is implemented as the interpolation of two constant-Q biquadratic filters, the embedding system is modified in such a way that the optimization happens jointly for the gain and the interpolation value instead of the gain and the bandwidth (when a bank of variable-Q filters is used as in prior art), or the gain solely (when a bank of constant-Q filters without pairs is used as in prior art). The variable nature of the bandwidth of the realized filters of the equalizer ensures that the behaviour of the equalizer is similar to those implemented with variable-Q biquadratic filters. The performance of the equalizer implemented is similar to those implemented with true variable-Q biquadratic filters. The variable parameters (i.e. the gains and the interpolation parameters) do not belong to any feedback loop. Therefore, no ringing artefact occurs. For each filter, the weight of the filter is equal to the gain parameter multiplied by the interpolation parameter. The legacy signal processing architecture of the paper entitled "<nplcit id="ncit0004" npl-type="s"><text>Using Stereo 10-Band Graphic Equalizer using the<!-- EPO <DP n="11"> --> DSP56001", Motorola, 1988</text></nplcit> can thus be used. Such simple architecture facilitates fixed-point implementation.</p><p id="p0037" num="0037">The equalizer of the example may comprise separate asynchronous functional entities (i.e. different blocks comprising processing capabilities which may perform different functions in an asynchronous manner), including a digital signal processing entity, an objective function entity, and a control entity. The entities perform parts of the method. The functions performed by the entities are now discussed.</p><p id="p0038" num="0038">The equalizer of the example may comprise a digital signal processing entity.</p><p id="p0039" num="0039">The digital signal processing entity transforms an input audio sample flow <i>x</i> in an output audio sample flow <i>y</i> at the same sampling rate. In other words, the digital signal processing entity is responsible of applying (S40) the transfer function to an input numeric audio signal x. Any sampling rate may be contemplated.</p><p id="p0040" num="0040"><figref idrefs="f0004">FIG. 6</figref> illustrates the architecture of the digital signal processing entity (i.e. the operations performed by the digital signal processing entity) for a parallel 8-band equalizer. In other words, <figref idrefs="f0004">FIG. 6</figref> illustrates the architecture of a transfer function that implements filters for eight central frequencies. The central frequencies correspond to respective transfer blocks 62 on the figure. The equalizer comprises a pair of filters for each of the eight central frequencies which have a different bandwidth. Each block 62 implements an interpolation of two filters having a common central frequency but different bandwidths. However, any number of central frequencies may be contemplated. For the purpose of generality, in the following the amount of available blocks (i.e. the number of central frequencies) is labelled <i>N.</i></p><p id="p0041" num="0041">In this example, the input signal <i>x</i> is filtered in parallel by each transfer block 62 which z-transform is given by <i>H<sub>k</sub></i>(<i>z</i>)<i>.</i> The output of each block is weighted by a scalar (i.e. gain) <i>g<sub>k</sub></i> and summed to the weighted direct signal so that the transfer function of the complete equalizer is:
<chemistry id="chem0001" num="0001"><img id="ib0001" file="imgb0001.tif" wi="39" he="10" img-content="chem" img-format="tif"/></chemistry></p><p id="p0042" num="0042">The weight <i>g<sub>0</sub></i> of the direct signal may be set to 1 but a variable parameter is alternatively introduced in the example for the sake of generality. The filters of the blocks <i>H<sub>k</sub></i>(<i>z</i>) may be implemented for instance as a serial chain of biquadratic cells, possibly limited to one single cell. The filters of the blocks <i>H<sub>k</sub></i>(<i>z</i>) are constant. In other<!-- EPO <DP n="12"> --> words, their parameters (e.g. central frequency, bandwidth) is decided during the equalizer design/configuration and do not vary at run time (during equalization).</p><p id="p0043" num="0043"><figref idrefs="f0002">FIG. 3</figref> shows an example of the response of the transfer functions for every filter of the equalizer of <figref idrefs="f0004">FIG. 6</figref>. As can be seen on the figure, the responses form curves with a boss which are typical of biquadratic band-pass filters. The responses are organized in pairs (64, 66) with a common central frequency (the peak of the boss of the response of the transfer function occur for the same frequency for each pair, i.e. the central frequency of the pair) and a different bandwidth (e.g. the width of the boss is wider for a curve 64 than for its corresponding pair curve 66). The pairs separate a specific spectral band organized in an octave scale, which is to say that the central frequency of any pair doubles the central frequency of its adjacent left neighbour.</p><p id="p0044" num="0044"><figref idrefs="f0003">FIG. 4</figref> shows an example of the response of the transfer functions of a variable-Q biquadratic filter which has a 1000 Hz central frequency. As can be seen on <figref idrefs="f0003">FIG. 4</figref>, such a filter may implement a transfer function which has for response one of the extreme responses 65 or 67 or any intermediate response 69.</p><p id="p0045" num="0045"><figref idrefs="f0003">FIG. 5</figref> shows an example of the responses 64 and 66 of the transfer function of the pair of constant band-pass biquadratic filters having a common central frequency equal to 1000 Hz and distinct band-passes, as well as interpolations 68 thereof. The pair of filters of <figref idrefs="f0003">FIG. 5</figref> may be one of the pairs of filters of <figref idrefs="f0002">FIG. 3</figref>. In other words, <figref idrefs="f0003">FIG. 5</figref> shows the response of the transfer function of a block 62 of <figref idrefs="f0002">FIG. 3</figref> having a central frequency of 1000 Hz. It must be noted that, although similar, the response curves 64, 66 and 68 of <figref idrefs="f0003">FIG. 5</figref> are not exactly the same as the response curves 65, 67 and 69 of <figref idrefs="f0003">FIG. 4</figref>. However, the similarity between them shows that the interpolation of two constant band-pass filters with the same central frequency but different band-passes (such interpolation being achieved by blocks 62 of <figref idrefs="f0004">FIG. 6</figref>) simulates the behaviour of one variable band-pass filter with said central frequency.</p><p id="p0046" num="0046">Now, different configurations of the blocks 62 of <figref idrefs="f0004">FIG. 6</figref> may implement the contemplated interpolation of two constant band-pass filters with the same central frequency but distinct band-passes. <figref idrefs="f0004">FIG. 7</figref> shows an example of an architecture of a block 62 of <figref idrefs="f0004">FIG. 6</figref> that implements such interpolation. The block 62 of <figref idrefs="f0004">FIG. 7</figref> is the one having transfer function <i>H</i><sub>1</sub>(<i>z</i>). The input signal <i>x</i> goes through two constant biquadratic IIR band-pass filters with the same central frequency and distinct band-passes that transform the signal with transfer functions respectively noted as <i>H</i><sub>1</sub><sup>+</sup>(<i>z</i>)<!-- EPO <DP n="13"> --> and <i>H</i><sub>1</sub><sup>-</sup>(<i>z</i>). Thus, with such an architecture, this part of the architecture of the equalizer performs the transfer function <i>H</i><sub>1</sub>(<i>z</i>) = <i>λ</i>(1) ×<i>H</i><sub>1</sub><sup>+</sup>(<i>z</i>) + (1 - <i>λ</i>(1)) ×<i>H</i><sub>1</sub><sup>-</sup>(<i>z</i>). The weights of filters <i>H</i><sub>1</sub><sup>+</sup>(<i>z</i>) and <i>H</i><sub>1</sub><i><sup>-</sup></i>(<i>z</i>) in the final transfer function <i>H</i><sub>1</sub>(<i>z</i>) are thus respectively λ(1) × <i>g</i>(1) and (1 - λ(1)) × <i>g</i>(1). Alternatively, the band-pass filters may (all) be parallel, as shown on <figref idrefs="f0005">FIG. 8</figref>. In other words, the band-pass filters all process the input signal in parallel, are applied a coefficient which is already their final weight in the transfer function and are finally summed. <figref idrefs="f0005">FIG. 8</figref> indeed shows an example of the same block 62 of <figref idrefs="f0004">FIG. 6</figref> that is shown in <figref idrefs="f0004">FIG. 7</figref>, which implements the same interpolation with a different architecture. This allows a faster adaptation of existing digital signal processing entities which are based on such a parallel architecture.</p><p id="p0047" num="0047">The equalizer is not limited to the architecture of <figref idrefs="f0004">FIG. 6</figref>. As an alternate example, the diagrams of <figref idrefs="f0005">FIGS. 9 and 10</figref> describe the digital signal processing operations for a serial 8-band equalizer with different architectures. In <figref idrefs="f0005">FIG.9</figref>, filters <i>H<sub>k</sub></i>(<i>z</i>) commonly implement peaking biquadratic filters. The bandwidth control can be obtained with two interpolated constant-Q filter as shown on <figref idrefs="f0005">FIG. 10</figref>.</p><p id="p0048" num="0048">The transfer function may further implement at least one shelving filter. Indeed, all results of the example are based on a transfer function only implementing band-pass filters but similar results apply for shelving (high-shelving and low-shelving) filters that may be used on the extreme bands. For example, a high-shelving filter may be implemented for the large frequency end and/or a low-shelving filter may be implemented for the low frequency end (the term "end" designates an extremity of the total frequency spectrum covered by the band-pass filters). This offers new possibilities to better approach the objective equalization for large frequencies and/or low frequencies.</p><p id="p0049" num="0049">The equalizer of the example may comprise an objective function entity.</p><p id="p0050" num="0050">The equalizer may be a graphic equalizer, thereby allowing the method to comprise the provision, e.g. by a user, of a set of gains (i.e. a set of gains that are to be applied for different bands, or frequencies). The set of objective gains may be derived from such a set of provided gains (as will be explained later) and represents the objective equalization.</p><p id="p0051" num="0051">The method may then comprise defining an objective function on the frequency domain, constrained by the set of objective gains. The objective function may be a function that best approaches the set of objective gains, with any distance measure.<!-- EPO <DP n="14"> --> Once defined, the objective function represents the objective equalization. The minimization of the error may then be performed by computing a value representative of the difference between the objective function and the transfer function and minimizing such value. Indeed, the method may comprise requesting a new equalizer configuration, noted <i>h<sub>p</sub></i> by the user. As soon as the user requests a new equalizer configuration, a new objective function, in the spectral (frequency) domain, may be computed. The usage of the objective function is explained later.</p><p id="p0052" num="0052">The equalizer configuration hp corresponds to an objective gain set by the user for the bands <i>p</i>, where <i>p</i> is any band identifier from 1 to <i>P</i>. Each band <i>p</i> is characterized by its central frequency ω<i><sub>p</sub></i>. The method may also define ω<i><sub>0</sub></i>=0 and <i>ω<sub>P+1</sub>=π.</i> The objective function <i>F</i>(<i>ω</i>) is searched as a piecewise 3<sup>rd</sup> order polynomial expression, defined on each segment [ω<i><sub>p</sub>, ω<sub>p+1</sub></i>] for <i>p</i> ∈ [0, <i>P</i>] with the equality constraints:
<ul><li><i>F</i> (ω) and its derivative <i>F'</i> (ω) are continuous on [0,π];</li><li>∀ <i>p</i>∈[1,<i>P</i>], <i>F</i> (<i>ω<sub>p</sub></i>) = <i>h<sub>p</sub></i>;</li><li>∀ <i>p∈</i>[2,<i>P</i>-1], <i>F'</i> (<i>ω<sub>p</sub></i>)=0, if (<i>h<sub>p</sub>-h</i><sub><i>p</i>-1</sub>)(<i>h<sub>p</sub>-h<sub>p+1</sub></i>)≥0; and</li><li><i>F'</i> (0)=<i>F'</i> (π)=0.</li></ul></p><p id="p0053" num="0053">Those equality constraints define a set of admissible objective functions. The objective function is a piecewise polynomial function that may be further constrained by the set of objective gains and that minimizes a measure of oscillations (i.e. a cost function that is increased as the function oscillates more). The method may indeed choose the objective function that minimizes a cost function taking into account ripples: <maths id="math0001" num=""><math display="block"><mi>J</mi><mfenced><mi>F</mi></mfenced><mo>=</mo><munderover><mo>∫</mo><mn>0</mn><mi>π</mi></munderover><mrow><mo>|</mo><msup><mrow><mi mathvariant="italic">Fʹ</mi><mfenced><mi mathvariant="normal">ω</mi></mfenced><mo>|</mo></mrow><mn>2</mn></msup></mrow><mi>d</mi><mo>⁢</mo><mi mathvariant="normal">ω</mi></math><img id="ib0002" file="imgb0002.tif" wi="53" he="15" img-content="math" img-format="tif"/></maths></p><p id="p0054" num="0054">The constraints are linear and the cost function is quadratic with regard to the unknown polynomial coefficients. Therefore the objective function <i>F</i>(<i>ω</i>) is found as the solution of a classic quadratic minimization subject to linear equality constraints. Several domains are possible for the objective function, for instance the linear domain, i.e. <i>F</i>(<i>ω</i>) and |<i>H</i>(<i>e<sup>jω</sup></i>)| are proportional, or the dB domain, i.e. <i>F</i>(<i>ω</i>) and log(|<i>H</i>(<i>e<sup>jω</sup></i>)|) are proportional.</p><p id="p0055" num="0055">The method may comprise providing a set of final gains (e.g. by a user), each final gain corresponding to a respective frequency. For each final gain corresponding<!-- EPO <DP n="15"> --> to a respective frequency, the method may comprise determining a list (i.e. an ordered set) of objective gains corresponding to the respective frequency. The objective gains are successive (within a list). They are ordered from a current gain corresponding to the respective frequency, to the final gain. The difference between two successive objective gains may be bounded, e.g. by a predetermined threshold. The method may then comprise iterating the providing (S10), the determining (S20) and the setting (S30) over the successive objective gains. In other words, the method divides the request of the user (corresponding to the final gains) into sub-requests (corresponding to the objective gains) and configures the equalizer step by step for each sub-request. The sub-requests are intermediate states between a current state of the equalizer and a final state requested by the user. This allows a smoother transition of the configuration of the equalizer.</p><p id="p0056" num="0056">For reasons that will be explained later, it is not advisable to deliver to the next processing entities an objective function which is very different from the objective function evaluated from the previous user request. Therefore, the objective function entity may embed a state that is used in order to slice every user request into many sub-requests ensuring that the step <i>Δh<sub>p</sub></i> between each sub-request is bounded in absolute value by Δ<i>h<sub>max</sub></i>. Provided that the mapping h→<i>F</i>(ω) is continuous, bounding the input steps is equivalent to bounding the output steps Δ<i>F</i>(ω).</p><p id="p0057" num="0057">The equalizer of the example may comprise a control entity.</p><p id="p0058" num="0058">The control entity serves new weights for the band-pass filters (via the <i>λ</i>(<i>k</i>) and the <i>g</i>(<i>k</i>) parameters) to the Digital Signal Processing entity each time a new objective function <i>F</i>(<i>ω</i>) is delivered by the objective function entity. The weights are evaluated so that an error <i>E</i>(<i>F</i>, g) between the objective function <i>F</i>(<i>ω</i>) and the equalizer transfer function <i>H</i>(<i>e<sup>jω</sup></i>) is minimized. The error thereby constitutes value representative of the difference between the objective function and the transfer function.</p><p id="p0059" num="0059">The error may be a spectral difference between the objective function and the transfer function in the decibel domain. Notably, the error may be evaluated as a weighted spectral error in the dB domain: <maths id="math0002" num=""><math display="block"><mi>E</mi><mfenced><mi>F</mi><mi>g</mi><mi>λ</mi></mfenced><mo>=</mo><munderover><mo>∫</mo><mn>0</mn><mi>π</mi></munderover><mi>W</mi><mfenced><mi mathvariant="normal">ω</mi></mfenced><mo>⁢</mo><msup><mfenced separators=""><mi>log</mi><mfenced separators=""><mi>H</mi><mfenced><msup><mi>e</mi><mrow><mi>j</mi><mo>⁢</mo><mi mathvariant="italic">ω</mi></mrow></msup></mfenced></mfenced><mo>-</mo><mi>log</mi><mfenced separators=""><mi>F</mi><mfenced><mi mathvariant="normal">ω</mi></mfenced></mfenced></mfenced><mn>2</mn></msup><mo>⁢</mo><mi>d</mi><mo>⁢</mo><mi mathvariant="normal">ω</mi></math><img id="ib0003" file="imgb0003.tif" wi="94" he="18" img-content="math" img-format="tif"/></maths><br/>
wherein <i>g</i> and λ designate respectively the vector of the <i>g</i>(<i>k</i>) and the vector of the <i>λ</i>(<i>k</i>).<!-- EPO <DP n="16"> --></p><p id="p0060" num="0060">Determining (S20) values of the weights of the band-pass filters may further comprise discretizing the spectral difference. It is indeed well known that the solution of the above problem can be approximated by a discrete problem where the continuous sum is replaced by a sum on a discrete mesh, wherein the expression of the error becomes: <maths id="math0003" num=""><math display="block"><mi>E</mi><mfenced><mi>F</mi><mi>g</mi><mi>λ</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>L</mi></munderover></mstyle><msub><mi>W</mi><mi>i</mi></msub><mo>⁢</mo><msup><mfenced separators=""><mi>log</mi><mfenced separators=""><mi>H</mi><mfenced><msup><mi>e</mi><mrow><mi>j</mi><mo>⁢</mo><msub><mi mathvariant="normal">ω</mi><mi>i</mi></msub></mrow></msup></mfenced></mfenced><mo>-</mo><mi>log</mi><mfenced separators=""><mi>F</mi><mfenced><msub><mi mathvariant="normal">ω</mi><mi>i</mi></msub></mfenced></mfenced></mfenced><mn>2</mn></msup></math><img id="ib0004" file="imgb0004.tif" wi="102" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0061" num="0061">It is noted that the spectral weight <i>W</i>(<i>ω</i>) can be simplified with an appropriate non-uniform sampling of the spectrum.</p><p id="p0062" num="0062">Given the human auditory model properties, it is preferable to select a mesh that appears regular in the Mel domain.</p><p id="p0063" num="0063">The weight and interpolated bandwidth for each band may thus minimize a spectral error evaluated for instance in dB, on a Mel scale and with a specific spectral weighting for flat spectral area.</p><p id="p0064" num="0064">The discrete spectral weight <i>W<sub>i</sub></i> can be chosen as a function of <i>F</i>(<i>W</i>) measuring a spectral transition criterion in order to emphasize flat spectral area.</p><p id="p0065" num="0065">Determining (S20) values of the weights of the band-pass filters may further comprise applying the Newton-Raphton method (to minimize the discrete error). Usually, there is no closed solution for the minimization of the error. Instead, an iterative procedure such as a steepest descent method or a Newton-Raphton method can be used.</p><p id="p0066" num="0066">Here follows the application of the Newton-Raphton method: <maths id="math0004" num=""><math display="block"><msub><mi>g</mi><mrow><msub><mi>n</mi><mo>+</mo></msub><mo>⁢</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>g</mi><mi>n</mi></msub><mo>+</mo><mi>μ</mi><mo>×</mo><mi mathvariant="normal">d</mi><mo>⁢</mo><msub><mi>g</mi><mi>n</mi></msub><mspace width="1em"/><mi>with d</mi><mo>⁢</mo><msub><mi>g</mi><mi>n</mi></msub><mo>=</mo><mo>-</mo><msup><mi mathvariant="normal">S</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mfenced><mi>F</mi><msub><mi>g</mi><mi>n</mi></msub><msub><mi>λ</mi><mi>n</mi></msub></mfenced><mo>⁢</mo><msub><mo>∇</mo><mi>g</mi></msub><mo>⁢</mo><mi>E</mi><mfenced><mi>F</mi><msub><mi>g</mi><mi>n</mi></msub><msub><mi>λ</mi><mi>n</mi></msub></mfenced></math><img id="ib0005" file="imgb0005.tif" wi="113" he="10" img-content="math" img-format="tif"/></maths> <maths id="math0005" num=""><math display="block"><msub><mi>λ</mi><mrow><msub><mi>n</mi><mo>+</mo></msub><mo>⁢</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>λ</mi><mi>n</mi></msub><mo>+</mo><mi>μ</mi><mo>×</mo><mi mathvariant="normal">d</mi><mo>⁢</mo><msub><mi>λ</mi><mi>n</mi></msub><mspace width="1em"/><mi>with d</mi><mo>⁢</mo><msub><mi>λ</mi><mi>n</mi></msub><mo>=</mo><mo>-</mo><msup><mi mathvariant="normal">S</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mfenced><mi>F</mi><msub><mi>g</mi><mi>n</mi></msub><msub><mi>λ</mi><mi>n</mi></msub></mfenced><mo>⁢</mo><msub><mo>∇</mo><mi>λ</mi></msub><mo>⁢</mo><mi>E</mi><mfenced><mi>F</mi><msub><mi>g</mi><mi>n</mi></msub><msub><mi>λ</mi><mi>n</mi></msub></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="116" he="7" img-content="math" img-format="tif"/></maths> wherein ∇<sub>g</sub> <i>E(F , g<sub>n</sub> ,</i> λ<i><sub>n</sub></i>) and ∇<sub>λ</sub> <i>E</i>(<i>F</i> , <i>g<sub>n</sub></i> , λ<i><sub>n</sub></i>) respectively represent the gradient vector of the scalar error function <i>E</i>(<i>F , g , λ</i>) with respect to the parameters g and <i>λ</i>, evaluated at the current approximation (<i>g<sub>n</sub></i> , <i>λ<sub>n</sub></i>);<br/>
and wherein S<sup>-1</sup>(<i>F</i> , <i>g<sub>n</sub></i>, λ<i><sub>n</sub></i>) represents the inverse of the hessian matrix of the scalar error function <i>E</i>(<i>F, g</i> , λ) evaluated at the current approximation <i>(g<sub>n</sub></i> , λ<i><sub>n</sub></i>).</p><p id="p0067" num="0067">The Newton steps d<i>g<sub>n</sub></i> and dλ<i><sub>n</sub></i> are evaluated first. The value of µ is determined next through a procedure known as a line search which seeks minimum for <i>E</i>(<i>F</i> , <i>g<sub>n</sub></i> + µ × d<i>g<sub>n</sub></i>, <i>λ<sub>n</sub></i> + <i>µ</i> × dλ<i><sub>n</sub></i>), for positive µ. The line search is also an iterative<!-- EPO <DP n="17"> --> procedure which approximates <i>E(F , g<sub>n</sub></i> +<i>µ</i> ×d<i>g<sub>n</sub></i>, <i>λ<sub>n</sub></i> + µ ×dλ<i><sub>n</sub></i>) at each step as a second order polynomial in <i>µ</i>.</p><p id="p0068" num="0068">The method may limit the search to a bounded subregion of every possible parameters in order to prevent signal overflow and clipping in the Digital Signal Processing entity. A set of additional linear constraints can thus be used: <maths id="math0006" num=""><math display="block"><msub><mi mathvariant="italic">g</mi><mi mathvariant="italic">min</mi></msub><mo>≤</mo><msub><mi mathvariant="italic">g</mi><mi mathvariant="italic">n</mi></msub><mo>≤</mo><msub><mi mathvariant="italic">g</mi><mi mathvariant="italic">max</mi></msub></math><img id="ib0007" file="imgb0007.tif" wi="26" he="4" img-content="math" img-format="tif"/></maths> wherein the vector comparison means that the comparison stands, line per line, for every elements of the vectors.</p><p id="p0069" num="0069">The method may also better take into account the interpolation process, in order to prevent the Control entity to choose a couple that corresponds to a value <i>λ<sub>n</sub></i> greater than 1 or lesser than 0. A simple solution consists in introducing the additional constraint: 0 ≤ λ<i><sub>n</sub></i> ≤ 1.</p><p id="p0070" num="0070">Given those constraints, the Newton step obtained must be replaced by the solution of a quadratic programming problem (i.e. quadratic minimization subject to linear inequalities).</p><p id="p0071" num="0071">The iteration procedure needed for the aforementioned minimization example cannot diverge since, by construction of the algorithm, the optimized parameters are bounded. This bounding box prevents signal overflow and clipping in the Digital Signal Processing entity.</p><p id="p0072" num="0072">Furthermore, the line search procedure may be slightly modified by constraining <i>µ</i> to stay in [0, 1]. Since the sub-region defined by the constraints <i>g<sub>min</sub> ≤g<sub>n</sub> ≤g<sub>max</sub></i> and ≤ <i>λ<sub>n</sub></i> ≤ 1 is convex, this modifications insures that these constraints are still met after the line search procedure has converged.</p><p id="p0073" num="0073">Other adaptations driven by real-time constraints and discussed below may be implemented. For example, the method may comprise providing a new set of objective gains while applying the Newton-Raphton method and continuing the applying of the Newton-Raphton method on the basis of the new set of objective gains.</p><p id="p0074" num="0074">It is not necessary to restart the iterative procedure (e.g. steepest descent, Newton-Raphton, etc.) with the default starting values <i>g</i><sub>0</sub> and <i>λ</i><sub>0</sub> each time a new objective function <i>F</i> is delivered to the Control entity. Provided that <i>F</i> evolves with small steps, which is insured by the Objective Function entity, the method may continue the iterative procedure instead with the last parameters <i>g<sub>n</sub></i> and λ<i><sub>n</sub></i>, presumably<!-- EPO <DP n="18"> --> corresponding to the weights obtained from a previous evocation of the Control entity with a previous obj ective function <i>F<sub>prev</sub>.</i></p><p id="p0075" num="0075">It is not necessary either to wait for the final convergence of the iterative procedure from the Control entity in order to serve a new weight vector to the Digital Signal Processing entity. Consider instead to serve asynchronously the Digital Signal Processing entity on a regular basis, for instance, every <i>N</i> iterations, or every time the weight parameter step is above a threshold.</p><p id="p0076" num="0076">The weights of the filters in the transfer function may thus vary in order to answer a new request from the user. In this case, the variations of the weights may be further smoothed, in order to prevent any audible clicks or distortions.</p></description><claims mxw-id="PCLM56984231" lang="DE" load-source="patent-office"><!-- EPO <DP n="22"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zum Konfigurieren eines elektronischen Geräts, welches einen Equalizer umfasst, der geeignet ist, um ein numerisches Audiosignal gemäß einer Zielentzerrung zu verarbeiten, wobei der Equalizer eine Übertragungsfunktion aufweist, welche einen Satz von Bandpassfiltern verwirklicht, wobei jeder Bandpassfilter einen konstanten Durchlassbereich aufweist, wobei jeder Bandpassfilter eine Gewichtung in der Übertragungsfunktion besitzt, welche einstellbar ist, und wobei das Verfahren umfasst:
<claim-text>Bereitstellen (S10) eines Satzes von Zielverstärkungen, welche eine Zielentzerrung darstellen, wobei jede Zielverstärkung einer jeweiligen Frequenz entspricht,</claim-text>
<claim-text>Bestimmen (S20) der Werte der Gewichtung der Bandpassfilter, welche den Fehler, der durch Vergleichen des Satzes von Zielverstärkungen mit der Übertragungsfunktion bewertet wird, minimieren, wobei der Satz Bandpassfilter wenigstens ein Paar von Bandpassfiltern umfasst, welches eine gemeinsame zentrale Frequenz aufweist, und</claim-text>
<claim-text>Einstellen (S30) der Gewichtungen der Bandpassfilter auf die bestimmten Werte.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, wobei der Equalizer ununterbrochen die Übertragungsfunktion auf ein numerisches Eingangsaudiosignal anwendet (S40), während er gleichzeitig die Schritte des Bereitstellens (S10), des Bestimmens (S20) und Einstellens (S30) ausführt.<!-- EPO <DP n="23"> --></claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach Anspruch 1 oder 2, wobei der Equalizer Festkomma-Implementierung durchführt.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach einem beliebigen der Ansprüche 1-3, wobei der Schritt des Bestimmens (S20) der Werte der Gewichtungen der Bandpassfilter, welche den Fehler minimieren, unter der Einschränkung des linearen Interpolierens der Bandpassfilter für jedes Paar von Bandpassfiltern, welches eine gemeinsame zentrale Frequenz und eigene Durchlassbereiche aufweist, durchgeführt wird.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach einem beliebigen der Ansprüche 1-4, wobei die Bandpassfilter parallel geschaltet sind.</claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Verfahren nach einem beliebigen der Ansprüche 1-5, wobei das Verfahren umfasst:
<claim-text>Bereitstellen eines Satzes endgültiger Verstärkungen, wobei jede endgültige Verstärkung einer jeweiligen Frequenz entspricht,</claim-text>
<claim-text>für jede endgültige Verstärkung, welche einer jeweiligen Frequenz entspricht, Bestimmen einer Liste von Zielverstärkungen, welche der jeweiligen Frequenz entsprechen, wobei die Zielverstärkungen von einer laufenden Verstärkung, welche der jeweiligen Frequenz entspricht, zu einer endgültigen Verstärkung aufeinanderfolgend sind, wobei der Unterschied zwischen zwei aufeinanderfolgenden Zielverstärkungen begrenzt ist,</claim-text>
<claim-text>Wiederholen der Schritte des Bereitstellens (S10), Bestimmens (S20) und Einstellens (S30) über die aufeinanderfolgenden Zielverstärkungen.</claim-text><!-- EPO <DP n="24"> --></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Verfahren nach einem beliebigen der Ansprüche 1-6, wobei das Vergleichen des Satzes von Zielverstärkungen mit der Übertragungsfunktion das Definieren einer Zielfunktion auf den Frequenzbereich und das Berechnen eines Wertes umfasst, welcher repräsentativ für den Unterschied zwischen der Zielfunktion und der Übertragungsfunktion ist, wobei die Zielfunktion eine stückweise polynomiale Funktion ist, welche durch den Satz von Zielverstärkungen beschränkt ist und welche ein Maß von Schwingungen minimiert.</claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Verfahren nach Anspruch 7, wobei der Wert, welcher für den Unterschied zwischen der Zielfunktion und der Übertragungsfunktion repräsentativ ist, ein Spektralunterschied zwischen der Zielfunktion und der Übertragungsfunktion im Dezibelbereich ist.</claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Verfahren nach Anspruch 8, wobei Bestimmen (S20) von Werten für die Gewichte der Bandpassfilter das Diskretisieren der Spektraldifferenz und Anwenden des Newton-Raphton-Verfahrens umfasst.</claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Verfahren nach Anspruch 9, wobei das Verfahren Bereitstellen eines neuen Satzes von Zielverstärkungen, während das Newton-Raphton-Verfahren angewendet wird, und Anwenden des Newton-Raphton-Verfahrens auf der Grundlage des neuen Satzes von Zielverstärkungen umfasst.</claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Verfahren nach einem beliebigen der Ansprüche 1-10, wobei die Übertragungsfunktion des Weiteren wenigstens einen Shelving-Filter einführt.</claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>Computerprogramm, umfassend Befehle zum Durchführen des Verfahrens nach einem beliebigen der Ansprüche 1-11.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-de-01-0013" num="0013"><claim-text>Datenspeichermedium, welches darauf das Programm nach Anspruch 12 aufgezeichnet hat.</claim-text></claim><claim id="c-de-01-0014" num="0014"><claim-text>Elektronisches Gerät, umfassend:
<claim-text>einen Equalizer, welcher geeignet ist, ein numerisches Audiosignal gemäß einer Zielverstärkung zu verarbeiten, wobei:
<claim-text>der Equalizer eine Übertragungsfunktion aufweist, welche auf einem Satz von Bandpassfiltern aufbaut,</claim-text>
<claim-text>jeder Bandpassfilter einen konstanten Durchlassbereich aufweist,</claim-text>
<claim-text>jeder Bandpassfilter ein Gewicht in der Übertragungsfunktion aufweist, das einstellbar ist,</claim-text>
<claim-text>der Satz von Bandpassfiltern wenigstens ein Paar von Bandpassfiltern umfasst, welche eine gemeinsame zentrale Frequenz und eigene Durchlassbereiche aufweisen,</claim-text></claim-text>
<claim-text>wenigstens einen Speicher mit darauf aufgezeichneten Befehlen zum Durchführen des Verfahrens nach einem beliebigen der Ansprüche 1-11 und</claim-text>
<claim-text>wenigstens einen Prozessor, welcher zum Ausführen des Programms, das im Speicher aufgezeichnet ist, konfiguriert ist.</claim-text></claim-text></claim><claim id="c-de-01-0015" num="0015"><claim-text>Gerät nach Anspruch 14, wobei das Gerät ein mobiles Kommunikationsgerät ist.</claim-text></claim></claims><claims mxw-id="PCLM56984232" lang="EN" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-en-01-0001" num="0001"><claim-text>A method for configuring an electronic device comprising an equalizer suited for processing a numeric audio signal according to an objective equalization, wherein the equalizer has a transfer function that implements a set of band-pass filters, each band-pass filter has a constant band-pass, each band-pass filter has a weight in the transfer function that is configurable, and wherein the method comprises:
<claim-text>providing (S10) a set of objective gains representing the objective equalization, each objective gain corresponding to a respective frequency,</claim-text>
<claim-text>determining (S20) values of the weights of the band-pass filters that minimize an error evaluated by comparing the set of objective gains to the transfer function, wherein the set of band-pass filters comprises at least one pair of band-pass filters having a common central frequency and distinct band-passes, and</claim-text>
<claim-text>setting (S30) the weights of the band-pass filters to the determined values.</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The method of claim 1, wherein the equalizer continuously applies (S40) the transfer function to an input numeric audio signal while simultaneously performing the steps of providing (S10), determining (S20) and setting (S30).</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The method of claim 1 or 2, wherein the equalizer performs fixed-point implementation.</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The method of any of claims 1-3, wherein the step of determining (S20) the values of the weights of the band-pass filters that minimize the error is performed under the constraint of interpolating linearly the band-pass filters for each pair of band-pass filters having a common central frequency and distinct band-passes.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The method of any of claims 1-4, wherein the band-pass filters are parallel.</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>The method of any of claims 1-5, wherein the method comprises:
<claim-text>providing a set of final gains, each final gain corresponding to a respective frequency,<!-- EPO <DP n="20"> --></claim-text>
<claim-text>for each final gain corresponding to a respective frequency, determining a list of objective gains corresponding to the respective frequency, wherein the objective gains are successive, from a current gain corresponding to the respective frequency, to the final gain, wherein the difference between two successive objective gains is bounded,</claim-text>
<claim-text>iterating the steps of providing (S10), determining (S20) and setting (S30) over the successive objective gains.</claim-text></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The method of any of claims 1-6, wherein comparing the set of objective gains to the transfer function comprises defining an objective function on the frequency domain and computing a value representative of the difference between the objective function and the transfer function, wherein the objective function is a piecewise polynomial function that is constrained by the set of objective gains and that minimizes a measure of oscillations.</claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The method of claim 7, wherein the value representative of the difference between the objective function and the transfer function is a spectral difference between the objective function and the transfer function in the decibel domain.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>The method of any of claim 8, wherein determining (S20) values of the weights of the band-pass filters comprises discretizing the spectral difference and applying the Newton-Raphton method.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>The method of claim 9, wherein the method comprises providing a new set of objective gains while applying the Newton-Raphton method and continuing the applying of the Newton-Raphton method on the basis of the new set of objective gains.</claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>The method of any of claims 1-10, wherein the transfer function further implements at least one shelving filter.</claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>A computer program comprising instructions for performing the method of any of claims 1-11.<!-- EPO <DP n="21"> --></claim-text></claim><claim id="c-en-01-0013" num="0013"><claim-text>A data storage medium having recorded thereon the program of claim 12.</claim-text></claim><claim id="c-en-01-0014" num="0014"><claim-text>An electronic device comprising:
<claim-text>an equalizer suited for processing a numeric audio signal according to an objective equalization, wherein:
<claim-text>the equalizer has a transfer function that is based on a set of band-pass filters,</claim-text>
<claim-text>each band-pass filter has a constant band-pass,</claim-text>
<claim-text>each band-pass filter has a weight in the transfer function that is configurable,</claim-text>
<claim-text>the set of band-pass filters comprises at least one pair of band-pass</claim-text>
<claim-text>filters having a common central frequency and distinct band-passes,</claim-text></claim-text>
<claim-text>at least one memory having recorded thereon instructions for performing the method of any of claims 1-11, and</claim-text>
<claim-text>at least one processor configured for executing the program recorded on the memory.</claim-text></claim-text></claim><claim id="c-en-01-0015" num="0015"><claim-text>The device of claim 14, wherein the device is a mobile communication device.</claim-text></claim></claims><claims mxw-id="PCLM56984233" lang="FR" load-source="patent-office"><!-- EPO <DP n="26"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé pour configurer un dispositif électronique comprenant un égaliseur adapté au traitement d'un signal audio numérique en fonction d'une égalisation objective, dans lequel l'égaliseur possède une fonction de transfert qui met en oeuvre un ensemble de filtres passe-bande, chaque filtre passe-bande a une bande passante constante, chaque filtre passe-bande a un poids dans la fonction de transfert qui est configurable, et dans lequel le procédé comprend :
<claim-text>la fourniture (S10) d'un ensemble de gains objectifs représentant l'égalisation objective, chaque gain objectif correspondant à une fréquence respective,</claim-text>
<claim-text>la détermination (S20) des valeurs des poids des filtres passe-bande qui minimisent une erreur évaluée par comparaison de l'ensemble de gains objectifs et de la fonction de transfert, l'ensemble de filtres passe-bande comprenant au moins une paire de filtres passe-bande ayant une fréquence centrale commune et des bandes passantes distinctes, et</claim-text>
<claim-text>le réglage (S30) des poids des filtres passe-bande sur les valeurs déterminées.</claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, dans lequel l'égaliseur applique de manière continue (S40) la fonction de transfert à un signal audio numérique d'entrée tout en effectuant simultanément les étapes de fourniture (S10), de détermination (S20) et de réglage (S30).</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon la revendication 1 ou 2, dans lequel l'égaliseur met en oeuvre une implémentation par point fixe.</claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon l'une quelconque des revendications 1 à 3, dans lequel l'étape de détermination (S20) des valeurs des poids des filtres passe-bande qui minimisent l'erreur s'effectue sous la contrainte d'une interpolation linéaire des filtres passe-bande pour chaque paire de filtres passe-bande ayant une fréquence centrale commune et des bandes passantes distinctes.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon l'une quelconque des revendications 1 à 4, dans lequel les filtres passe-bande sont parallèles.<!-- EPO <DP n="27"> --></claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Procédé selon l'une quelconque des revendications 1 à 5, le procédé comprenant :
<claim-text>la fourniture d'un ensemble de gains définitifs, chaque gain définitif correspondant à une fréquence respective,</claim-text>
<claim-text>pour chaque gain définitif correspondant à une fréquence respective, la détermination d'une liste de gains objectifs correspondant à la fréquence respective, les gains objectifs se suivant, depuis le gain actuel correspondant à la fréquence respective jusqu'au gain définitif, la différence entre deux gains objectifs successifs étant limitée,</claim-text>
<claim-text>l'itération des étapes de fourniture (S10), de détermination (S20) et de réglage (S30) sur les gains objectifs successifs.</claim-text></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Procédé selon l'une quelconque des revendications 1 à 6, dans lequel la comparaison de l'ensemble de gains objectifs et de la fonction de transfert comprend la définition d'une fonction objective sur le domaine de fréquences et le calcul d'une valeur représentant la différence entre la fonction objective et la fonction de transfert, la fonction objective étant une fonction polynomiale par morceaux qui est contrainte par l'ensemble de gains objectifs et qui minimise la mesure des oscillations.</claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Procédé selon la revendication 7, dans lequel la valeur représentant la différence entre la fonction objective et la fonction de transfert est une différence spectrale entre la fonction objective et la fonction de transfert dans le domaine de décibels.</claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Procédé selon la revendication 8, dans lequel la détermination (S20) des valeurs des poids des filtres passe-bande comprend la discrétisation de la différence spectrale et l'application de la méthode de Newton-Raphson.</claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Procédé selon la revendication 9, le procédé comprenant la fourniture d'un nouvel ensemble de gains objectifs durant l'application de la méthode de Newton-Raphson et la poursuite de l'application de la méthode de Newton-Raphson sur la base du nouvel ensemble de gains objectifs.<!-- EPO <DP n="28"> --></claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Procédé selon l'une quelconque des revendications 1 à 10, dans lequel la fonction de transfert met en oeuvre en outre au moins un filtre en plateau.</claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>Programme informatique comprenant des instructions permettant d'effectuer le procédé selon l'une quelconque des revendications 1 à 11.</claim-text></claim><claim id="c-fr-01-0013" num="0013"><claim-text>Support de stockage de données sur lequel est enregistré le programme selon la revendication 12.</claim-text></claim><claim id="c-fr-01-0014" num="0014"><claim-text>Dispositif électronique comprenant :
<claim-text>un égaliseur adapté au traitement d'un signal audio numérique en fonction d'une égalisation objective, dans lequel :
<claim-text>l'égaliseur possède une fonction de transfert qui repose sur un ensemble de filtres passe-bande,</claim-text>
<claim-text>chaque filtre passe-bande a une bande passante constante,</claim-text>
<claim-text>chaque filtre passe-bande a un poids dans la fonction de transfert qui est configurable,</claim-text>
<claim-text>l'ensemble de filtres passe-bande comprend au moins une paire de filtres passe-bande ayant une fréquence centrale commune et des bandes passantes distinctes,</claim-text></claim-text>
<claim-text>au moins une mémoire dans laquelle sont enregistrées des instructions permettant d'effectuer le procédé selon l'une quelconque des revendications 1 à 11, et</claim-text>
<claim-text>au moins un processeur conçu pour exécuter le programme enregistré dans la mémoire.</claim-text></claim-text></claim><claim id="c-fr-01-0015" num="0015"><claim-text>Dispositif selon la revendication 14, le dispositif étant est un dispositif de communication mobile.</claim-text></claim></claims><drawings mxw-id="PDW16671791" load-source="patent-office"><!-- EPO <DP n="29"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="188" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="165" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0003" num="4,5"><img id="if0003" file="imgf0003.tif" wi="162" he="217" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0004" num="6,7"><img id="if0004" file="imgf0004.tif" wi="151" he="212" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0005" num="8,9,10"><img id="if0005" file="imgf0005.tif" wi="149" he="222" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
