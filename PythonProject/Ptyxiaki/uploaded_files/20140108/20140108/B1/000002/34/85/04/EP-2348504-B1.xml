<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2348504-B1" country="EP" doc-number="2348504" kind="B1" date="20140108" family-id="42780147" file-reference-id="315032" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146588580" ucid="EP-2348504-B1"><document-id><country>EP</country><doc-number>2348504</doc-number><kind>B1</kind><date>20140108</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-09842069-A" is-representative="YES"><document-id mxw-id="PAPP154850772" load-source="docdb" format="epo"><country>EP</country><doc-number>09842069</doc-number><kind>A</kind><date>20090327</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140553742" ucid="CN-2009071051-W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2009071051</doc-number><kind>W</kind><date>20090327</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130723</date></intention-to-grant-date><search-report-dispatch-date><date>20120416</date></search-report-dispatch-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1989326030" load-source="ipcr">G10L  19/032       20130101ALI20130703BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989326031" load-source="ipcr">G10L  19/24        20130101AFI20130703BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1989623762" load-source="ipcr">G10L  19/02        20060101A N20120713RMEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1989620066" load-source="docdb" scheme="CPC">G10L  19/24        20130101 FI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1989642610" load-source="docdb" scheme="CPC">G10L  19/032       20130101 LA20130101BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132370373" lang="DE" load-source="patent-office">KODIERUNGS- UND DEKODIERUNGSVERFAHREN UND -VORRICHTUNG</invention-title><invention-title mxw-id="PT132370374" lang="EN" load-source="patent-office">ENCODING AND DECODING METHOD AND DEVICE</invention-title><invention-title mxw-id="PT132370375" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF DE CODAGE ET DE DÉCODAGE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR919524074" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR919534688" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR919517940" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HU CHEN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919508534" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HU, CHEN</last-name></addressbook></inventor><inventor mxw-id="PPAR919023763" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HU, CHEN</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>518129 Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919527095" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MIAO LEI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919523043" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MIAO, LEI</last-name></addressbook></inventor><inventor mxw-id="PPAR919023764" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MIAO, LEI</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>Shenzhen 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919514919" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LIU ZEXIN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919514383" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LIU, ZEXIN</last-name></addressbook></inventor><inventor mxw-id="PPAR919023765" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LIU, ZEXIN</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>Shenzhen 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919506192" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>CHEN LONGYIN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919530527" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>CHEN, LONGYIN</last-name></addressbook></inventor><inventor mxw-id="PPAR919023766" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>CHEN, LONGYIN</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>Shenzhen 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919545846" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>ZHANG QING</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919521186" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>ZHANG, QING</last-name></addressbook></inventor><inventor mxw-id="PPAR919023762" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>ZHANG, QING</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>Shenzhen 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919510006" load-source="docdb" sequence="6" format="epo"><addressbook><last-name>TADDEI HERVE MARCEL</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR919534449" load-source="docdb" sequence="6" format="intermediate"><addressbook><last-name>TADDEI, HERVE MARCEL</last-name></addressbook></inventor><inventor mxw-id="PPAR919023767" load-source="patent-office" sequence="6" format="original"><addressbook><last-name>TADDEI, HERVE MARCEL</last-name><address><street>Huawei Technologies Co., Ltd. Intellectual Property department, B1-3A, Bantian, Longgang District</street><city>Shenzhen 518129</city><country>CN</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR919023768" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>101172919</iid><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR919023769" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Kreuz, Georg Maria</last-name><suffix>et al</suffix><iid>101240797</iid><address><street>Huawei Technologies Duesseldorf GmbH Dessauerstrasse 3</street><city>80992 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2009071051-W"><document-id><country>CN</country><doc-number>2009071051</doc-number><kind>W</kind><date>20090327</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2010108332-A1"><document-id><country>WO</country><doc-number>2010108332</doc-number><kind>A1</kind><date>20100930</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS549786957" load-source="docdb">AT</country><country mxw-id="DS549924652" load-source="docdb">BE</country><country mxw-id="DS549804036" load-source="docdb">BG</country><country mxw-id="DS549894362" load-source="docdb">CH</country><country mxw-id="DS549787788" load-source="docdb">CY</country><country mxw-id="DS549786958" load-source="docdb">CZ</country><country mxw-id="DS549924653" load-source="docdb">DE</country><country mxw-id="DS549787801" load-source="docdb">DK</country><country mxw-id="DS549787802" load-source="docdb">EE</country><country mxw-id="DS549881636" load-source="docdb">ES</country><country mxw-id="DS549804037" load-source="docdb">FI</country><country mxw-id="DS549894363" load-source="docdb">FR</country><country mxw-id="DS549924654" load-source="docdb">GB</country><country mxw-id="DS549787803" load-source="docdb">GR</country><country mxw-id="DS549924655" load-source="docdb">HR</country><country mxw-id="DS549786959" load-source="docdb">HU</country><country mxw-id="DS549881637" load-source="docdb">IE</country><country mxw-id="DS549787804" load-source="docdb">IS</country><country mxw-id="DS549804038" load-source="docdb">IT</country><country mxw-id="DS549787817" load-source="docdb">LI</country><country mxw-id="DS549804039" load-source="docdb">LT</country><country mxw-id="DS549877489" load-source="docdb">LU</country><country mxw-id="DS549804044" load-source="docdb">LV</country><country mxw-id="DS549804045" load-source="docdb">MC</country><country mxw-id="DS549877494" load-source="docdb">MK</country><country mxw-id="DS549877495" load-source="docdb">MT</country><country mxw-id="DS549881642" load-source="docdb">NL</country><country mxw-id="DS549871724" load-source="docdb">NO</country><country mxw-id="DS549881643" load-source="docdb">PL</country><country mxw-id="DS549877496" load-source="docdb">PT</country><country mxw-id="DS549894364" load-source="docdb">RO</country><country mxw-id="DS549881644" load-source="docdb">SE</country><country mxw-id="DS549786960" load-source="docdb">SI</country><country mxw-id="DS549871725" load-source="docdb">SK</country><country mxw-id="DS549804046" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63961000" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>FIELD OF THE INVENTION</b></heading><p id="p0001" num="0001">The present invention relates to signal processing technologies, and in particular, to an encoding and decoding method and device.</p><heading id="h0002"><b>BACKGROUND OF THE INVENTION</b></heading><p id="p0002" num="0002">In prior arts, coded bits are generally added to improve the quality of speech/audio signals encoded by traditional encoding methods, such as the pulse code modulation (PCM) method and the adaptive differential pulse code modulation (ADPCM) method.</p><p id="p0003" num="0003">However, the following problems have become apparent in the prior arts:</p><p id="p0004" num="0004">After coded bits are added, if a decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the decoder can only decode the encoded signals of the low bit rate, resulting in poor quality of decoded signals. For example, if the encoder and decoder use the traditional ADPCM encoding and decoding method, the encoded signals of a low bit rate decoded by the decoder are even worse than the decoded encoded signals that are generated without adding extra bits.</p><p id="p0005" num="0005"><patcit id="pcit0001" dnum="GB2073554A"><text>GB 2073554A</text></patcit> disclose a layered encoding method by using two level quantization. A sample of a signal is encoded to generate a residual, and the residual is further encoded with only one bit per sample to generate encoding result.</p><p id="p0006" num="0006"><patcit id="pcit0002" dnum="WO2005036528A1"><text>WO 2005/036528 A1</text></patcit> also discloses a decoder. In the decoder, the coefficients of the transformed signal may be reconstructed by the error mapping procedure according to the following equation: c( k)= e' ( k)+ thr( k), wherein e' (k) are the decoded error coefficients which describe the bit-plane decoded enhancement-layer bitstream, and thr(k) is the quantization threshold. In the decoder, each element of the bit-plane decoded data vector can<!-- EPO <DP n="2"> --> be scaled back to obtain a reconstructed data vector and the scaled data vector can be obtained by bit-shifting each element in the original data vector.</p><p id="p0007" num="0007"><patcit id="pcit0003" dnum="EP1619664A1"><text>EP 1619664 A1</text></patcit> also discloses an encoding section encodes an input signal to obtain base layer coded information. An adding section inverts the polarity of the base layer decoded signal to add to the input signal, and obtains a residual signal. An enhancement layer coding section encodes the residual signal to obtain enhancement layer coded information. Another adding section adds the base layer decoded signal and enhancement layer decoded signal to obtain a speech/sound signal. It is thereby possible to implement scalable coding with small amounts of calculation and coded information.</p><heading id="h0003"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0008" num="0008">The present invention provides an encoding method and device to improve decoding quality.</p><p id="p0009" num="0009">To fulfill the objective, the invention provides a method and device as defined in the claims.</p><p id="p0010" num="0010">With the encoding and decoding methods and devices provided by the present invention, the encoder may encode each sample of the input signal to generate an encoded signal of the core layer; compare residuals of all or a part of the samples of the input signal with encoding thresholds, where the residuals are generated by core layer encoding, and perform encoding according to comparison results to generate an encoded signal of the enhancement layer, thus improving encoding quality; because the encoded signal of the enhancement layer is generated by comparing residuals of all or a part of the samples of the input signal with encoding thresholds, where the residuals are generated by core layer encoding, if the decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoder according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved.<!-- EPO <DP n="3"> --></p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0011" num="0011">To make the technical solution of the present invention clearer, the accompanying drawings for illustrating the embodiments of the present invention are outlined below. Apparently, the accompanying drawings are exemplary only.<!-- EPO <DP n="4"> -->
<ul><li><figref idrefs="f0001">FIG. 1</figref> is a flowchart of an encoding method provided by an embodiment of the present invention;</li><li><figref idrefs="f0002">FIG. 2</figref> shows a structure for implementing an encoding method provided by another embodiment of the present invention;</li><li><figref idrefs="f0003">FIG. 3</figref> is a flowchart of an encoding method provided by another embodiment of the present invention;</li><li><figref idrefs="f0004">FIG. 4</figref> is a flowchart of step 301 in an encoding method provided by another embodiment of the present invention;</li><li><figref idrefs="f0005">FIG. 5</figref> is a flowchart of step 302 in an encoding method provided by another embodiment of the present invention;</li><li><figref idrefs="f0005">FIG. 6</figref> shows a mapping relation between a quantized value of 3 bits and a quantized value of 2 bits in the encoding method illustrated in <figref idrefs="f0005">FIG. 5</figref>;</li><li><figref idrefs="f0006">FIG. 7</figref> shows a structure of an encoding device provided by an embodiment of the present invention;</li><li><figref idrefs="f0006">FIG. 8</figref> shows a structure of a second encoding unit 702 in the encoding device illustrated in <figref idrefs="f0006">FIG. 7</figref>;</li><li><figref idrefs="f0007">FIG. 9</figref> shows a structure of a first encoding sub-unit 801 in the second encoding unit 702 illustrated in <figref idrefs="f0006">FIG. 8</figref>;</li><li><figref idrefs="f0007">FIG. 10</figref> is a flowchart of a decoding method provided by an embodiment of the present invention;</li><li><figref idrefs="f0008">FIG. 11</figref> shows a structure for implementing a decoding method provided by another embodiment of the present invention;</li><li><figref idrefs="f0009">FIG. 12</figref> shows a structure of a decoding device provided by an embodiment of the present invention; and</li><li><figref idrefs="f0009">FIG. 13</figref> shows a structure of a generating unit 1202 in the decoding device illustrated in <figref idrefs="f0009">FIG. 12</figref>.</li></ul><!-- EPO <DP n="5"> --></p><heading id="h0005"><b>DETAILED DESCRIPTION OF THE EMBODIMENTS</b></heading><p id="p0012" num="0012">The technical solution of the embodiments of the present invention is hereinafter described in detail with reference to the accompanying drawings. Apparently, the embodiments are only exemplary embodiments of the present invention and the present invention is not limited to such embodiments.</p><p id="p0013" num="0013">Embodiments of the present invention provide an encoding and decoding method and device to solve the following problem in the prior arts: When coded bits are added to improve the encoding quality, if the decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoder is poor.</p><p id="p0014" num="0014">As shown in <figref idrefs="f0001">FIG. 1</figref>, the encoding method provided by an embodiment of the present invention includes:</p><p id="p0015" num="0015">Step 101: Encode each sample of an input signal to generate an encoded signal of a core layer.</p><p id="p0016" num="0016">Step 102: Compare residuals of all or a part of the samples of the input signal with encoding thresholds, where the residuals are generated by core layer encoding, and perform encoding according to comparison results to generate an encoded signal of an enhancement layer.</p><p id="p0017" num="0017">Step 103: Write the encoded signal of the core layer and the encoded signal of the enhancement layer into a bitstream to generate an encoded signal of the input signal.</p><p id="p0018" num="0018">With the encoding method provided by the embodiment of the present invention, the encoder encodes each sample of the input signal to generate an encoded signal of the core layer, compares residuals of all or a part of the samples of the input signal with encoding thresholds, where the residuals are generated by core layer encoding, and performs encoding according to comparison results to generate an encoded signal of the enhancement layer, thus improving encoding quality; because the encoded signal of the enhancement layer is generated by comparing residuals of all or a part of the samples of the input signal with encoding thresholds, where the residuals are generated by core layer encoding, if the decoder<!-- EPO <DP n="6"> --> supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoder according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved.</p><p id="p0019" num="0019">The encoding method provided by the embodiment of the present invention may encode narrowband, wideband, ultra-wideband or full-band speech/audio signals. To make the technical solution of the embodiments of the present invention clearer to those skilled in the art, the following describes the technical solution by using the encoding method provided by an embodiment of the present invention to encode an ultra-wideband audio signal with the valid bandwidth being 14 KHz.</p><p id="p0020" num="0020">An encoding method provided by another embodiment of the present invention may encode the ultra-wideband audio signal through three encoding modules. As shown in <figref idrefs="f0002">FIG. 2</figref>, the three encoding modules are: core layer encoding module, enhancement layer encoding module, and extended layer encoding module.</p><p id="p0021" num="0021">As shown in <figref idrefs="f0003">FIG. 3</figref>, the steps of encoding the ultra-wideband audio signal by using the three encoding modules shown in <figref idrefs="f0002">FIG. 2</figref> by using the encoding method provided by another embodiment of the present invention may include:</p><p id="p0022" num="0022">Step 301: Use the core layer encoding module shown in <figref idrefs="f0002">FIG. 2</figref> to encode the wideband part of the ultra-wideband audio signal to generate an encoded signal of a core layer.</p><p id="p0023" num="0023">In this embodiment, the wideband part of the ultra-wideband audio signal is the 0-8 KHz part of the ultra-wideband audio signal, and the encoder may divide the ultra-wideband audio signal to obtain the 0-8 KHz part of the ultra-wideband audio signal.</p><p id="p0024" num="0024">As shown in <figref idrefs="f0004">FIG. 4</figref>, step 301 may specifically include:</p><p id="p0025" num="0025">Step 401: Divide the wideband part of the ultra-wideband audio signal to obtain the low-band part of 0-4 KHz and the high-band part of 4-8 KHz.</p><p id="p0026" num="0026">Step 402: Encode the low-band part and high-band part of the ultra-wideband audio signal obtained in step 401 to generate an encoded signal of a first core sub-layer and an encoded signal of a second core sub-layer, respectively, where the encoded signal of the first<!-- EPO <DP n="7"> --> core sub-layer is generated after encoding the low-band part of the ultra-wideband audio signal and the encoded signal of the second core sub-layer is generated after encoding the high-band part of the ultra-wideband audio signal.</p><p id="p0027" num="0027">The encoder encodes the low-band part and high-band part of the ultra-wideband audio signal in the same way. The following describes the case that the encoder encodes the high-band part of the ultra-wideband audio signal.</p><p id="p0028" num="0028">In this embodiment, the high-band part of the ultra-wideband audio signal X<sub>H</sub> = {x<sub>H1</sub>, x<sub>H2</sub>, ..., x<sub>HM</sub>}, where M indicates the number of samples of the high-band part of the ultra-wideband audio signal; step 402 may use the ADPCM encoding method to encode each sample x<sub>Hi</sub>(i ∈ [1, M]) of the high-band part X<sub>H</sub> of the ultra-wideband audio signal and include:
<ol><li>1. Obtain a predicated value s<sub>Hi</sub> of the current sample x<sub>Hi</sub> to be encoded.
<br/>
In this embodiment, if i = 1, s<sub>Hi</sub> = 0; otherwise, s<sub>Hi</sub> = x̂<sub>H(i-1)</sub>, where x̂<sub>H(i-1)</sub> is the local decoded signal of x<sub>H(i-1)</sub>.
</li><li>2. Obtain a predicated difference e<sub>Hi</sub> of the current sample x<sub>Hi</sub> to be encoded by using the following formula (1): <maths id="math0001" num="(1)"><math display="block"><msub><mi mathvariant="normal">x</mi><mi>Hi</mi></msub><mo>-</mo><msub><mi mathvariant="normal">s</mi><mi>Hi</mi></msub><mo>=</mo><msub><mi mathvariant="normal">e</mi><mi>Hi</mi></msub></math><img id="ib0001" file="imgb0001.tif" wi="136" he="6" img-content="math" img-format="tif"/></maths></li><li>3. Quantize e<sub>Hi</sub> according to the quantized table corresponding to the coded bit number of the sample to obtain the index of the quantized difference ê<sub>Hi</sub> in the quantized table, and encode the index to generate an encoded signal x'<sub>Hi</sub>.</li></ol></p><p id="p0029" num="0029">In this embodiment, each sample uses 2 bits for encoding, that is, the coded bit number of each sample is 2, and the quantized table corresponding to 2 bits includes 4 quantized values, represented by -a<sub>1</sub>, -a<sub>2</sub>, a<sub>2</sub>, and a<sub>1</sub> respectively; the mapping relation between the quantized value corresponding to 2 bits and the index may be shown in Table 1.
<tables id="tabl0001" num="0001"><table frame="all"><title><b>Table 1</b></title><tgroup cols="2"><colspec colnum="1" colname="col1" colwidth="14mm"/><colspec colnum="2" colname="col2" colwidth="29mm"/><thead><row><entry align="center" valign="middle"><b>Index</b></entry><entry align="center" valign="middle"><b>Quantized value</b></entry></row></thead><tbody><row><entry align="center" valign="middle">0</entry><entry align="center" valign="middle">-a<sub>1</sub></entry></row><!-- EPO <DP n="8"> --><row><entry align="center" valign="middle">1</entry><entry align="center" valign="middle">-a<sub>2</sub></entry></row><row><entry align="center" valign="middle">2</entry><entry align="center" valign="middle">a<sub>2</sub></entry></row><row><entry align="center" valign="middle">3</entry><entry align="center" valign="middle">a<sub>1</sub></entry></row></tbody></tgroup></table></tables></p><p id="p0030" num="0030">The encoder may quantize e<sub>Hi</sub> through the quantized value and encode the index of the quantized difference ê<sub>Hi</sub> in the quantized table to generate an encoded signal x'<sub>Hi</sub>. For example, if ê<sub>Hi</sub> = a<sub>1</sub> after e<sub>Hi</sub> is quantized by the quantized table, the encoder uses 2 bits to encode the index 3 corresponding to a<sub>1</sub> as shown in Table 1 to generate an encoded signal x'<sub>Hi</sub> = 11.</p><p id="p0031" num="0031">Certainly, in practice, the coded bit number of each sample may be not limited to 2 bits; when any other coded bit number is used to encode each sample, the specific implementation is the same as above, and therefore is not described here.</p><p id="p0032" num="0032">4. Write the encoded signal of each sample x<sub>Hi</sub> of the high-band part X<sub>H</sub> of the ultra-wideband audio signal into a bitstream to generate an encoded signal of the second core sub-layer.</p><p id="p0033" num="0033">It should be noted that in practice, step 402 may also encode the low-band part and high-band part of the ultra-wideband audio signal by using other encoding methods; for example, step 402 may encode the low-band part and high-band part of the ultra-wideband audio signal by using the ADPCM method with noise shaping or other methods similar to PCM. In step 402, the encoder may also use different encoding methods to encode the low-band part and high-band part of the ultra-wideband audio signal; for example, the encoder may use the PCM encoding method to encode the low-band part of the ultra-wideband signal and use the ADPCM encoding method to encode the high-band part of the ultra-wideband signal.</p><p id="p0034" num="0034">Step 403: Write the encoded signals of the first and second core sub-layers generated in step 402 into a bitstream to generate an encoded signal of the core layer.</p><p id="p0035" num="0035">Step 302: Use the enhancement layer encoding module shown in <figref idrefs="f0002">FIG. 2</figref> to compare residuals of all or a part of the samples of the input signal with encoding thresholds, where the<!-- EPO <DP n="9"> --> residuals are generated by core layer encoding, and perform encoding according to comparison results to generate an encoded signal of the enhancement layer.</p><p id="p0036" num="0036">In this embodiment, step 302 specifically encodes the residuals of the high-band part of the ultra-wideband audio signal, where the residuals are generated by core layer encoding. The encoded signal of the enhancement layer is formed by encoded signals ofN enhancement sub-layers, where N is a natural number, and may be determined according to the available coded bit number after the encoding of the core layer.</p><p id="p0037" num="0037">As shown in <figref idrefs="f0005">FIG. 5</figref>, step 302 may specifically include:</p><p id="p0038" num="0038">Step 501: Compare residuals of each sample of the high-band part of the ultra-wideband audio signal with encoding thresholds, where the residuals are generated by core layer encoding, and perform encoding according to comparison results to generate an encoded signal of the first enhancement sub-layer. This step includes:</p><p id="p0039" num="0039">1. Set an encoding threshold for the first enhancement sub-layer. In this embodiment, the encoder may use two methods to set an encoding threshold for the first enhancement sub-layer:</p><p id="p0040" num="0040">The first method is: The encoder sets the encoding threshold for the first enhancement sub-layer by setting the encoding threshold to a constant; in this embodiment, the encoder may set the encoding threshold to 0.</p><p id="p0041" num="0041">The second method is: The encoder sets the encoding threshold for the first enhancement sub-layer according to the quantized value; specifically, the encoder sets the encoding threshold for the first enhancement sub-layer according to the quantized value corresponding to the total coded bit number of the samples used in the core layer and the first enhancement sub-layer.</p><p id="p0042" num="0042">In this embodiment, each enhancement sub-layer uses 1 bit to encode the residual t<sub>Hi</sub> of each sample <b>x<sub>Hi</sub>(i</b> ∈ [1, M]) of the high-band part <b>X<sub>H</sub></b> = <b>{x<sub>H1</sub>, x<sub>H2</sub>, ..., x<sub>HM</sub>}</b> of the ultra-wideband audio signal, where the residual is generated by core layer encoding; in step 402, because the encoder uses 2 bits to encode each sample <b>x<sub>Hi</sub></b> of the high-band signal <b>X<sub>H</sub>,</b> the encoder in this step uses the quantized value of the quantized table corresponding to 3 bits to set the encoding threshold for the first enhancement sub-layer; for example, the encoder<!-- EPO <DP n="10"> --> uses a mid-value or a multiple of the mid-value of every two adjacent quantized values in the quantized table corresponding to 3 bits to set the encoding threshold for the first enhancement sub-layer; specifically, the quantized table corresponding to 3 bits contains 8 quantized values, represented by -b<sub>1</sub>, -b<sub>2</sub>, -b<sub>3</sub>, -b<sub>4</sub>, b<sub>4</sub>, b<sub>3</sub>, b<sub>2</sub>, and b<sub>1</sub> respectively; assuming the encoding threshold of the first enhancement sub-layer C<sub>H</sub> = {C<sub>H1</sub>, C<sub>H2</sub>, C<sub>H3</sub>, C<sub>H4</sub>}, <maths id="math0002" num=""><math display="inline"><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>1</mn></mrow></msub><mo>=</mo><mfrac><mrow><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">1</mn></msub><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">2</mn></msub></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>2</mn></mrow></msub><mo>=</mo><mfrac><mrow><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">3</mn></msub><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">4</mn></msub></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>3</mn></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">3</mn></msub><mo>+</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">4</mn></msub></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>4</mn></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">1</mn></msub><mo>+</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">2</mn></msub></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo></math><img id="ib0002" file="imgb0002.tif" wi="121" he="11" img-content="math" img-format="tif" inline="yes"/></maths> where <i>β</i> is a multiple and may be any value; the encoder may also set the encoding threshold for the first enhancement sub-layer according to the relation between the quantized table corresponding to 2 bits and the quantized table corresponding to 3 bits; for example, the encoder sets the encoding threshold for the first enhancement sub-layer by using a mid-value of the differences between every two quantized values in the 3-bit quantized table and the corresponding quantized values in the 2-bit quantized table or a multiple of the mid-value thereof, and specifically, <maths id="math0003" num=""><math display="inline"><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>1</mn></mrow></msub><mo>=</mo><mfrac><mrow><mfenced separators=""><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">1</mn></msub><mo>+</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">1</mn></msub></mfenced><mo>+</mo><mfenced separators=""><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">2</mn></msub><mo>+</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">1</mn></msub></mfenced></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>2</mn></mrow></msub><mo>=</mo><mfrac><mrow><mfenced separators=""><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">3</mn></msub><mo>+</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">2</mn></msub></mfenced><mo>+</mo><mfenced separators=""><mo>-</mo><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">4</mn></msub><mo>+</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">2</mn></msub></mfenced></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo></math><img id="ib0003" file="imgb0003.tif" wi="138" he="11" img-content="math" img-format="tif" inline="yes"/></maths> <maths id="math0004" num=""><math display="inline"><msub><mi mathvariant="bold">c</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>3</mn></mrow></msub><mo>=</mo><mfrac><mrow><mfenced separators=""><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">3</mn></msub><mo>-</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">2</mn></msub></mfenced><mo>+</mo><mfenced separators=""><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">4</mn></msub><mo>-</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">2</mn></msub></mfenced></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo><mspace width="1em"/><msub><mi mathvariant="bold">ic</mi><mrow><mi mathvariant="normal">H</mi><mo>⁢</mo><mn>4</mn></mrow></msub><mo>=</mo><mfrac><mrow><mfenced separators=""><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">1</mn></msub><mo>-</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">2</mn></msub></mfenced><mo>+</mo><mfenced separators=""><msub><mi mathvariant="bold">b</mi><mn mathvariant="bold">2</mn></msub><mo>-</mo><msub><mi mathvariant="bold">a</mi><mn mathvariant="bold">1</mn></msub></mfenced></mrow><mn mathvariant="bold">2</mn></mfrac><mo>×</mo><mi>β</mi><mo>,</mo></math><img id="ib0004" file="imgb0004.tif" wi="102" he="13" img-content="math" img-format="tif" inline="yes"/></maths> where <i>β</i> is a multiple and may be any value.</p><p id="p0043" num="0043">In practice, the encoder may use any one or any combination of the above methods to set the encoding threshold for the first enhancement sub-layer; it should be noted that, to meet requirements of different encoding devices, this step may scale up or down the obtained encoding threshold C<sub>H</sub> = {c<sub>H1</sub>, c<sub>H2</sub>, c<sub>H3</sub>, c<sub>H4</sub>}.</p><p id="p0044" num="0044">2. Establish a mapping relation between the encoding threshold of the first enhancement sub-layer and the quantized value used in the core layer encoding.</p><p id="p0045" num="0045">When the encoding threshold of the first enhancement sub-layer is set according to the above quantized value, the mapping relation between the encoding threshold of the first enhancement sub-layer C<sub>H</sub>= {c<sub>H1</sub>, c<sub>H2</sub>, c<sub>H3</sub>, c<sub>H4</sub>} and the quantized value used in the core layer encoding may be shown in Table 2.<!-- EPO <DP n="11"> -->
<tables id="tabl0002" num="0002"><table frame="all"><title><b>Table 2</b></title><tgroup cols="3"><colspec colnum="1" colname="col1" colwidth="14mm"/><colspec colnum="2" colname="col2" colwidth="29mm"/><colspec colnum="3" colname="col3" colwidth="36mm"/><thead><row><entry align="center" valign="middle"><b>Index</b></entry><entry align="center" valign="middle"><b>Quantized value</b></entry><entry align="center" valign="middle"><b>Encoding Threshold</b></entry></row></thead><tbody><row><entry align="center" valign="middle">0</entry><entry align="center" valign="middle">-a<sub>1</sub></entry><entry align="center" valign="middle">C<sub>H1</sub></entry></row><row><entry align="center" valign="middle">1</entry><entry align="center" valign="middle">-a<sub>2</sub></entry><entry align="center" valign="middle">C<sub>H2</sub></entry></row><row><entry align="center" valign="middle">2</entry><entry align="center" valign="middle">a<sub>2</sub></entry><entry align="center" valign="middle">C<sub>H3</sub></entry></row><row><entry align="center" valign="middle">3</entry><entry align="center" valign="middle">a<sub>1</sub></entry><entry align="center" valign="middle">C<sub>H4</sub></entry></row></tbody></tgroup></table></tables></p><p id="p0046" num="0046">When the encoding threshold of the first enhancement sub-layer is set to the constant 0, the mapping relation between the encoding threshold 0 and the quantized value used in the core layer encoding may also be shown in Table 2; in this case, all encoding thresholds in Table 2 are 0.</p><p id="p0047" num="0047">In practice, if the encoding threshold of the first enhancement sub-layer is 0, the mapping relation between the encoding threshold and the quantized value may not be established.</p><p id="p0048" num="0048">3. Obtain the encoding threshold of the first enhancement sub-layer corresponding to each sample of the high-band part of the ultra-wideband audio signal.</p><p id="p0049" num="0049">In this embodiment, the encoder may obtain the encoding threshold C<sub>Hi</sub> of the first enhancement sub-layer corresponding to each sample x<sub>Hi</sub> of the high-band part X<sub>H</sub> of the ultra-wideband audio signal from the pre-stored encoding thresholds or from the above step of setting the encoding threshold for the first enhancement sub-layer.</p><p id="p0050" num="0050">If the encoding threshold of the first enhancement sub-layer is 0, the encoder may directly obtain the encoding threshold C<b><sub>Hi</sub></b> = 0 of the first enhancement sub-layer corresponding to each sample <b>x<sub>Hi</sub></b> of the high-band part X<sub>H</sub> of the ultra-wideband audio signal.</p><p id="p0051" num="0051">If the encoding threshold of the first enhancement sub-layer is set according to the above quantized value, perform local decoding on the encoded signal x<sub>Hi</sub> generated from <b>x<sub>Hi</sub></b> by core layer encoding to obtain the index of the quantized table corresponding to 2 bits; according to the index and the mapping relation between the encoding threshold of the first enhancement sub-layer and the quantized value used in the core layer encoding, obtain the encoding threshold C<b><sub>Hi</sub></b> corresponding to <b>x<sub>Hi</sub></b>; for example, if x'<sub>Hi</sub> = 11, the index of the quantized table corresponding to 2 bits obtained after decoding x'<sub>Hi</sub> is 3, and the encoding threshold C<b><sub>Hi</sub></b> corresponding to <b>x<sub>Hi</sub></b> is <b>c<sub>H4</sub></b> according to Table 2.<!-- EPO <DP n="12"> --></p><p id="p0052" num="0052">4. Compare the residual of each sample of the high-band part of the ultra-wideband audio signal with the encoding threshold of the first enhancement sub-layer, where the residual is generated by core layer encoding.</p><p id="p0053" num="0053">In this embodiment, the residual <b>t<sub>Hi</sub></b> of each sample <b>x<sub>Hi</sub></b> of the high-band part <b>X<sub>H</sub></b> of the ultra-wideband audio signal may be obtained by using the following formula (2) or (3), where the residual is generated by core layer encoding: <maths id="math0005" num="(2)"><math display="block"><msub><mi mathvariant="normal">t</mi><mi mathvariant="bold">Hi</mi></msub><mo>=</mo><msub><mi mathvariant="bold">x</mi><mi mathvariant="bold">Hi</mi></msub><mo>-</mo><msub><mover><mi mathvariant="normal">x</mi><mo>^</mo></mover><mi>Hi</mi></msub></math><img id="ib0005" file="imgb0005.tif" wi="136" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0054" num="0054">x<sub>Hi</sub> is a sample to be encoded, and x̂<sub>Li</sub> is a local decoding value of x<sub>Hi</sub>. <maths id="math0006" num="(3)"><math display="block"><msub><mi mathvariant="normal">t</mi><mi mathvariant="bold">Hi</mi></msub><mo>=</mo><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">Hi</mi></msub><mo>-</mo><msub><mover><mi mathvariant="normal">e</mi><mo>^</mo></mover><mi>Hi</mi></msub></math><img id="ib0006" file="imgb0006.tif" wi="136" he="7" img-content="math" img-format="tif"/></maths> <b>e<sub>Hi</sub></b> is a predicated difference of <b>x<sub>Hi</sub></b> and ê<sub>Hi</sub> is a local decoded signal of <b>e<sub>Hi</sub>.</b></p><p id="p0055" num="0055">In practice, the residual <b>t<sub>Hi</sub></b> of each sample <b>x<sub>Hi</sub></b> of the high-band part <b>X<sub>H</sub></b> of the ultra-wideband audio signal by the core layer encoding may be obtained through other methods, and is not described here.</p><p id="p0056" num="0056">To reduce noise interference on the residual <b>t<sub>Hi</sub>,</b> this step may further include the following step: Perform noise shaping processing on the residual <b>t<sub>Hi</sub></b> to generate the residual <b>t</b>'<sub>Hi</sub> after noise shaping; in this case, the encoder may compare t'<sub>Hi</sub> with <b>C<sub>Hi</sub>.</b></p><p id="p0057" num="0057">In this embodiment, to ensure the reliability of the comparison result of <b>t<sub>Hi</sub></b> (or t'<sub>Hi</sub>) and <b>C<sub>Hi</sub>, tH<sub>i</sub></b> (or t'<sub>Hi</sub>) or <b>C<sub>Hi</sub></b> needs to be scaled up or down, and the value after scaling is used for comparison. Specifically, multiply <b>C<sub>Hi</sub></b> by step information deth in the core layer encoding information and compare the result with <b>t<sub>Hi</sub></b> (or t'<sub>Hi</sub>), or, divide <b>t<sub>Hi</sub></b> (or t'<sub>Hi</sub>) by deth and compare the result with <b>C<sub>Hi</sub>.</b> Certainly, in practice, <b>t<sub>Hi</sub></b> (or t'<sub>Hi</sub>) or <b>C<sub>Hi</sub></b> may also be scaled up or down through other methods, which is not describe here.</p><p id="p0058" num="0058">5. According to the comparison result, generate encoded values for the residual <b>t<sub>Hi</sub></b> (or <b>t'<sub>Hi</sub></b>) of each sample <b>x<sub>Hi</sub> of the</b> high-band part <b>X<sub>H</sub></b> of the ultra-wideband audio signal by the core layer encoding, and write the encoded value of each sample of the high-band part of the<!-- EPO <DP n="13"> --> ultra-wideband audio signal into a bitstream sequentially to generate an encoded signal of the first enhancement sub-layer.</p><p id="p0059" num="0059">In this embodiment, if t<sub>Hi</sub> (or t'<sub>Hi</sub>) &gt; C<sub>Hi</sub>, the encoded value of the residual t<b><sub>Hi</sub></b> (or t'<sub>Hi</sub>) generated from <b>x<sub>Hi</sub></b> by core layer encoding is 1; if t<sub>Hi</sub>; (or t'<sub>Hi</sub> &lt; C<sub>Hi</sub>, or t<sub>Hi</sub> (or t'<sub>Hi</sub>) = <b>C<sub>Hi</sub>,</b> the encoded value is 0.</p><p id="p0060" num="0060">Step 502: If N &gt; 1, compare residuals of each sample of the high-band part of the ultra-wideband audio signal with the encoding threshold of the n<sup>th</sup> enhancement sub-layer, where the residuals are generated by core layer encoding and the encoding of the first (n-1) enhancement sub-layers, and perform encoding according to the comparison result to generate an encoded signal of the n<sup>th</sup> enhancement sub-layer, where 1 &lt; <i>n ≤ N</i>. For the specific implementation, see step 501.</p><p id="p0061" num="0061">Step 503: Write the encoded signals ofN enhancement sub-layers generated in steps 501 and 502 into a bitstream to generate an encoded signal of the enhancement layer.</p><p id="p0062" num="0062">It should be noted that, in practice, step 302 may encode not only the residual of the high-band part of the ultra-wideband audio signal but also the residual of the low-band part of the ultra-wideband audio signal, where the residuals are generated by core layer encoding, or encode the residuals of the low-band part and high-band part of the ultra-wideband audio signal generated after the core layer encoding, where the residuals are generated by core layer encoding.</p><p id="p0063" num="0063">Step 303: Use the extended layer encoding module shown in <figref idrefs="f0002">FIG. 2</figref> to encode the ultra-wideband part of the ultra-wideband audio signal to generate an encoded signal of an extended layer.</p><p id="p0064" num="0064">In this embodiment, the ultra-wideband part of the ultra-wideband audio signal is the 8-14 KHz part of the ultra-wideband audio signal, and the encoder may divide the ultra-wideband audio signal to obtain the 8-14 KHz part of the ultra-wideband audio signal.</p><p id="p0065" num="0065">The specific implementation of step 303 is basically the same as that of step 301 and is not described here.<!-- EPO <DP n="14"> --></p><p id="p0066" num="0066">Step 304: Write the core layer encoded signal generated in step 301, the enhancement layer encoded signal generated in step 302, and the extended layer encoded signal generated in step 303 into a bitstream to generate an encoded signal of the ultra-wideband audio signal.</p><p id="p0067" num="0067">With the encoding method provided by the embodiment of the present invention, the encoder encodes the wideband part of the ultra-wideband audio signal to generate an encoded signal of the core layer, compares residuals of the wideband part of the ultra-wideband audio signal by the core layer encoding with encoding thresholds, and performs encoding according to comparison results to generate an encoded signal of the enhancement layer, thus improving encoding quality; because the encoded signal of the enhancement layer is generated by comparing residuals of the wideband part of the ultra-wideband audio signal by the core layer encoding with encoding thresholds, if the decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoder according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved.</p><p id="p0068" num="0068">As shown in <figref idrefs="f0006">FIG. 7</figref>, an embodiment of the present invention further provides an encoding device, including:
<ul><li>a first encoding unit 701, configured to encode each sample of an input signal to generate an encoded signal of a core layer;</li><li>a second encoding unit 702, configured to compare residuals of all or a part of the samples of the input signal by the core layer encoding with encoding thresholds, and perform encoding according to comparison results to generate an encoded signal of an enhancement layer; and</li><li>a generating unit 703, configured to write the encoded signal of the core layer generated by the first encoding unit 701 and the encoded signal of the enhancement layer generated by the second encoding unit 702 into a bitstream to generate an encoded signal of the input signal.</li></ul><!-- EPO <DP n="15"> --></p><p id="p0069" num="0069">Further, the encoded signal of the enhancement layer is formed by encoded signals of N enhancement sub-layers, where N is a natural number. As shown in <figref idrefs="f0006">FIG. 8</figref>, the second encoding unit 702 may include:
<ul><li>a first encoding sub-unit 801, configured to compare residuals of all or a part of the samples of the input signal by the core layer encoding with encoding thresholds of the first enhancement sub-layer, and perform encoding according to comparison results to generate an encoded signal of the first enhancement sub-layer;</li><li>a second encoding sub-unit 802, configured to compare the residuals of all or a part of the samples of the input signal with encoding thresholds of the n<sup>th</sup> enhancement sub-layer, where the residuals are generated by core layer encoding and encoding of the first (n-1) enhancement sub-layers, and perform encoding according to comparison results to generate an encoded signal of the n<sup>th</sup> enhancement sub-layer if N &gt; 1, where 1 &lt; <i>n</i> ≤ <i>N</i>; and</li><li>a first generating sub-unit 803, configured to write the encoded signals of the N enhancement sub-layers generated by the first encoding sub-unit 801 and the second encoding sub-unit 802 into the bitstream to generate the encoded signal of the enhancement layer.</li></ul></p><p id="p0070" num="0070">Further, as shown in <figref idrefs="f0007">FIG. 9</figref>, the first encoding sub-unit 801 may include:
<ul><li>an obtaining unit 901, configured to obtain the encoding threshold of the first enhancement sub-layer corresponding to each sample in all or a part of the samples of the input signal;</li><li>a comparing unit 902, configured to compare the residual of each sample in all or a part of the samples of the input signal by the core layer encoding with the obtained encoding threshold of the first enhancement sub-layer corresponding to the sample; and</li><li>a second generating sub-unit 903, configured to generate an encoded value for the residual of each sample in all or a part of the samples of the input signal by the core layer encoding according to the comparison result of the comparing unit 902, and write the encoded value of each sample in all or a part of the samples into the bitstream sequentially to generate the encoded signal of the first enhancement sub-layer.</li></ul></p><p id="p0071" num="0071">Further, as shown in <figref idrefs="f0007">FIG. 9</figref>, the first encoding sub-unit 801 may include:<!-- EPO <DP n="16"> -->
<ul><li>a relation establishing unit 904, configured to establish a mapping relation between the encoding threshold of the first enhancement sub-layer and the quantized value used in the core layer encoding.</li></ul></p><p id="p0072" num="0072">In this case, the obtaining unit 901 is further configured to obtain the encoding threshold of the first enhancement sub-layer corresponding to each sample in all or a part of the samples of the input signal according to the mapping relation between the encoding threshold of the first enhancement sub-layer and the quantized value used in the core layer encoding established by the relation establishing unit 904.</p><p id="p0073" num="0073">For the specific implementation of the encoding device provided by the embodiment of the present invention, see the encoding method provided by embodiments of the present invention.</p><p id="p0074" num="0074">With the encoding device provided by the embodiment of the present invention, the encoder encodes the input signal to generate an encoded signal of the core layer, compares residuals of all or a part of the samples of the input signal by the core layer encoding with encoding thresholds, and performs encoding according to comparison results to generate an encoded signal of the enhancement layer, thus improving encoding quality; because the encoded signal of the enhancement layer is generated by comparing residuals of all or a part of the samples of the input signal by the core layer encoding with encoding thresholds, if the decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoder according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved.</p><p id="p0075" num="0075">As shown in <figref idrefs="f0007">FIG. 10</figref>, an embodiment of the present invention further provides an decoding method, including:</p><p id="p0076" num="0076">Step 1001: Obtain an encoded signal of a core layer from an encoded signal, and decode the encoded signal of the core layer to obtain each index corresponding to each sample, of a quantized table of the core layer.<!-- EPO <DP n="17"> --></p><p id="p0077" num="0077">In this embodiment, the encoded signal of the core layer X' = {x'<sub>1</sub>,x'<sub>2</sub>, ..., x'<sub>M</sub>}, where M is the number of encoded samples in the encoded signal <i>X</i>', and step 1001 is: Decode each sample x; (i ∈ [1, M]) sequentially to obtain the index of the quantized table of the core layer, and the index is corresponding to each encoded sample x'<sub>i</sub>.</p><p id="p0078" num="0078">Step 1002: If the encoded signal further includes an encoded signal of an enhancement layer, use the encoded signal of the enhancement layer to modify the index corresponding to each sample, of the quantized table of the core layer, and obtain a quantized value to generate a decoded signal according to the modified index; if the encoded signal does not include the encoded signal of the enhancement layer, obtain the quantized value to generate the decoded signal according to the index corresponding to each sample, of the quantized table of the core layer.</p><p id="p0079" num="0079">In this embodiment, the process of modifying the index corresponding to each sample, of the quantized table of the core layer and obtaining the quantized value to generate a decoded signal according to the modified index, including: Left shift the encoded signal of the core layer by n bits, and fill the encoded signal of the enhancement layer into the n bits to generate a modified encoded signal, wherein n is a coded bit number of the encoded sample in the enhancement layer; and decode the modified encoded signal to obtain the modified index, and obtain the quantized value to generate the decoded signal according to the modified index.</p><p id="p0080" num="0080">It should be noted that the encoder may perform decoding to obtain the narrowband or wideband input signal by performing steps 1001 and 1002 illustrated in <figref idrefs="f0007">FIG. 10</figref>; if the input signal is an ultra-wideband or full-band signal, the encoded signal further carries an encoded signal of the extended layer, and the decoding method provided in the embodiment of the present invention may further decode the encoded signal of the extended layer to generate an ultra-wideband or full-band input signal, which may be implemented by the module illustrated in <figref idrefs="f0008">FIG. 11</figref>.</p><p id="p0081" num="0081">With the decoding method provided by the embodiment of the present invention, if the decoder supports only the decoding of encoded signals of a low bit rate, or if the decoder receives only the encoded signals of the low bit rate due to insufficient network bandwidth<!-- EPO <DP n="18"> --> and poor transmission quality, the quality of the decoded signals generated by the decoder according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved; if the encoded signal received by the decoder further includes the encoded signal of the enhancement layer, the encoded signal of the enhancement layer may be used to modify the encoded signal of the core layer to obtain an input signal of good quality, which further improves the quality of the decoded signal.</p><p id="p0082" num="0082">As shown in <figref idrefs="f0009">FIG. 12</figref>, an embodiment of the present invention further provides a decoding device, including:
<ul><li>a decoding unit 1201, configured to obtain an encoded signal of a core layer from an encoded signal, and decode the encoded signal of the core layer to obtain each index corresponding to each sample, of the quantized table of the core layer; and</li><li>a generating unit 1202, configured to: if the encoded signal further includes an encoded signal of an enhancement layer, use the encoded signal of the enhancement layer to modify the index corresponding to each sample, of the quantized table of the core layer, and obtain a quantized value to generate a decoded signal according to the modified index; if the encoded signal further does not include the encoded signal of the enhancement layer, obtain the quantized value to generate the decoded signal according to the index corresponding to each sample, of the quantized table of the core layer.</li></ul></p><p id="p0083" num="0083">Further, as shown in <figref idrefs="f0009">FIG. 13</figref>, the generating unit 1202 may include:
<ul><li>a modifying sub-unit 1301, configured to left shift the encoded signal of the core layer by n bits, and fill the encoded signal of the enhancement layer into the n bits to generate a modified encoded signal, where n is a coded bit number of the encoded sample in the enhancement layer;</li><li>a generating sub-unit 1302, configured to decode the modified encoded signal obtained by the modifying sub-unit to obtain the modified index, and obtain the quantized value to generate the decoded signal according to the modified index.</li></ul></p><p id="p0084" num="0084">For the implementation of the decoding device, see the decoding method provided by embodiments of the present invention.<!-- EPO <DP n="19"> --></p><p id="p0085" num="0085">With the decoding device provided by the embodiment of the present invention, if the decoding device supports only the decoding of encoded signals of a low bit rate, or if the decoding device receives only the encoded signals of the low bit rate due to insufficient network bandwidth and poor transmission quality, the quality of the decoded signals generated by the decoding device according to the encoded signals of the core layer may be the same as the quality of the encoded signals that are generated by low bit rate encoding, and therefore the decoding quality is improved; if the encoded signal received by the decoding device further includes the encoded signal of the enhancement layer, the encoded signal of the enhancement layer may be used to modify the encoded signal of the core layer to obtain an input signal of good quality, which further improves the quality of the decoded signal.</p><p id="p0086" num="0086">It is understandable to those skilled in the art that all or a part of the steps of the embodiments can be implemented by hardware following instructions of a program. The program may be stored in a computer readable storage medium. When the program is executed, the processes of the above embodiments may be all included. The storage medium may be a read only memory (ROM), a random access memory (RAM), a magnetic disk or a compact disk-read only memory (CD-ROM).</p><p id="p0087" num="0087">The above descriptions are merely exemplary embodiments of the present invention, but not intended to limit the present invention.</p></description><claims mxw-id="PCLM56985740" lang="DE" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-de-01-0001" num="0001"><claim-text>Codierungsverfahren für Audiosignale, umfassend:
<claim-text>Codieren (101) jedes Abtastwerts eines Eingangssignals, um ein codiertes Signal einer Kernschicht zu erzeugen;</claim-text>
<claim-text>Vergleichen (102) von Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen, wobei die Reste durch Kernschichtcodierung erzeugt werden, und Durchführen von Codierung gemäß Vergleichsergebnissen, um ein codiertes Signal einer Erweiterungsschicht zu erzeugen, wobei die Erweiterungsschicht eine erste Erweiterungs-Subschicht umfasst und ein codierter Wert jedes Rests in einem codierten Signal der ersten Erweiterungs-Subschicht 1 oder 0 ist; und</claim-text>
<claim-text>Schreiben (103) des codierten Signals der Kernschicht und des codierten Signals der Erweiterungsschicht in einen Bitstrom, um ein codiertes Signal des Eingangssignals zu erzeugen;</claim-text>
<claim-text><b>dadurch gekennzeichnet, dass</b> die Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht in den Codierungsamplitudenschwellen gemäß einem quantisierten Wert der Kernschicht gesetzt wird.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, wobei das codierte Signal der Erweiterungsschicht durch codierte Signale von N Erweiterungs-Subschichten gebildet wird, wobei N eine natürliche Zahl ist; und<br/>
das Vergleichen von Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen, wobei die Reste durch Kernschichtcodierung erzeugt werden, und das Durchführen von Codierung gemäß Vergleichsergebnissen, um ein codiertes Signal einer Erweiterungsschicht zu erzeugen, Folgendes umfasst:
<claim-text>Vergleichen von ersten Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen einer ersten Erweiterungs-Subschicht, um erste Vergleichsergebnisse zu erzeugen, wobei die ersten Reste durch Kernschichtcodierung erzeugt werden, und Durchführen von Codierung gemäß den ersten Vergleichsergebnissen, um das codierte Signal der ersten Erweiterungs-Subschicht zu erzeugen;</claim-text>
<claim-text>im Fall N &gt; 1 Vergleichen von zweiten Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen einer n-ten Erweiterungs-Subschicht, um zweite Vergleichsergebnisse zu erzeugen, wobei die<!-- EPO <DP n="25"> --> zweiten Reste durch die Kernschichtcodierung und Codierung von ersten (n-1) Erweiterungs-Subschichten erzeugt werden, und Durchführen von Codierung gemäß den zweiten Vergleichsergebnissen, um das codierte Signal der n-ten Erweiterungs-Subschicht zu erzeugen, wobei 1 &lt; n ≤ N ist; und</claim-text>
<claim-text>Schreiben von codierten Signalen der N Erweiterungs-Subschichten in den Bitstrom, um das codierte Signal der Erweiterungsschicht zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach Anspruch 2, wobei das Vergleichen (102) von ersten Resten aller oder eines Teils der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen einer ersten Erweiterungs-Subschicht, um erste Vergleichsergebnisse zu erzeugen, wobei die ersten Reste durch Kernschichtcodierung erzeugt werden und das Durchführen von Codierung gemäß den ersten Vergleichsergebnissen, um das codierte Signal der ersten Erweiterungs-Subschicht zu erzeugen, Folgendes umfasst:
<claim-text>Erhalten einer Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht, die jedem Abtastwert in allen oder einem Teil der Abtastwerte des Eingangssignals entspricht;</claim-text>
<claim-text>Vergleichen eines ersten Rests jedes besagten Abtastwerts mit der codierten Amplitudenschwelle der ersten Erweiterungs-Subschicht, die dem besagten jeden Abtastwert entspricht, um ein erstes Vergleichsergebnis zu erzeugen, wobei der erste Rest des besagten jeden Abtastwerts durch Kernschichtcodierung erzeugt wird; und</claim-text>
<claim-text>Erzeugen eines codierten Werts für den ersten Rest des besagten jeden Abtastwerts gemäß dem ersten Vergleichsergebnis und sequenzielles Schreiben des codierten Werts in den Bitstrom, um das codierte Signal der ersten Erweiterungs-Subschicht zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach Anspruch 1 oder 3, wobei die Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht gemäß einem quantisierten Wert gesetzt wird, der einer gesamten codierten Bitzahl von Abtastwerten in der Kernschichtcodierung und der Codierung der ersten Erweiterungs-Subschicht entspricht.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach Anspruch 3, ferner umfassend:
<claim-text>Herstellen einer Abbildungsbeziehung zwischen der Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht und einem quantisierten Wert in der Kernschichtcodierung.</claim-text><!-- EPO <DP n="26"> --></claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Codierungseinrichtung für Audiosignale, umfassend:
<claim-text>eine erste Codierungseinheit (701), ausgelegt zum Codieren jedes Abtastwerts eines Eingangssignals, um ein codiertes Signal einer Kernschicht zu erzeugen;</claim-text>
<claim-text>eine zweite Codierungseinheit (702), ausgelegt zum Vergleichen von Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen, wobei die Reste durch Kernschichtcodierung erzeugt werden, und Durchführen von Codierung gemäß Vergleichsergebnissen, um ein codiertes Signal einer Erweiterungsschicht zu erzeugen, wobei die zweite Codierungseinheit (702) ausgelegt ist, die Erweiterungsschicht, die eine erste Erweiterungs-Subschicht umfasst, zu erzeugen und ein codierter Wert jedes Rests in einem codierten Signal der ersten Erweiterungs-Subschicht 1 oder 0 ist; und</claim-text>
<claim-text>eine Erzeugungseinheit (703), ausgelegt zum Schreiben des codierten Signals der Kernschicht, das von der ersten Codierungseinheit erzeugt wird, und des codierten Signals der Erweiterungsschicht, das von der zweiten Codierungseinheit erzeugt wird, in einen Bitstrom, um ein codiertes Signal des Eingangssignals zu erzeugen;</claim-text>
<claim-text><b>dadurch gekennzeichnet, dass</b> die Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht in den von der zweiten Codierungseinheit (702) verwendeten Codierungsamplitudenschwellen gemäß einem quantisierten Wert der Kernschicht gesetzt wird.</claim-text></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Einrichtung nach Anspruch 6, wobei das codierte Signal der Erweiterungsschicht durch codierte Signale von N Erweiterungs-Subschichten gebildet wird, wobei N eine natürliche Zahl ist; und die zweite Codierungseinheit (702) Folgendes umfasst:
<claim-text>eine erste Codierungs-Subeinheit (801), ausgelegt zum Vergleichen von ersten Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen einer ersten Erweiterungs-Subschicht, um erste Vergleichsergebnisse zu erzeugen, wobei die ersten Reste durch Kernschichtcodierung erzeugt werden, und Durchführen von Codierung gemäß den ersten Vergleichsergebnissen, um ein codiertes Signal der ersten Erweiterungs-Subschicht zu erzeugen;</claim-text>
<claim-text>eine zweite Codierungs-Subeinheit (802), ausgelegt zum Vergleichen von zweiten Resten von allen oder einem Teil der Abtastwerte des Eingangssignals mit Codierungsamplitudenschwellen einer n-ten Erweiterungs-Subschicht, um zweite Vergleichsergebnisse zu erzeugen, wobei die zweiten Reste durch Kernschichtcodierung und Codierung von ersten (n-1) Erweiterungs-Subschichten erzeugt werden, und Durchführen von Codierung gemäß den zweiten<!-- EPO <DP n="27"> --> Vergleichsergebnissen, um ein codiertes Signal der n-ten Erweiterungs-Subschicht zu erzeugen, falls N &gt; 1 ist, wobei 1 &lt; n ≤ N ist; und</claim-text>
<claim-text>eine erste Erzeugungs-Subeinheit (803), ausgelegt zum Schreiben von codierten Signalen der N Erweiterungs-Subschichten, die durch die erste Codierungs-Subeinheit und die zweite Codierungs-Subeinheit erzeugt werden, in den Bitstrom, um das codierte Signal der Erweiterungsschicht zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Einrichtung nach Anspruch 7, wobei die erste Codierungs-Subeinheit (801) Folgendes umfasst:
<claim-text>eine Erhaltungseinheit (901), ausgelegt zum Erhalten einer Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht, die jedem Abtastwert in allen oder einem Teil der Abtastwerte des Eingangssignals entspricht;</claim-text>
<claim-text>eine Vergleichseinheit (902), ausgelegt zum Vergleichen eines ersten Rests jedes Abtastwerts mit der codierten Amplitudenschwelle der ersten Erweiterungs-Subschicht, die dem besagten jeden Abtastwert entspricht, der von der Erhaltungseinheit (901) erhalten wird, um ein erstes Vergleichsergebnis zu erzeugen,</claim-text>
<claim-text>wobei der erste Rest des besagten jeden Abtastwerts durch Kernschichtcodierung erzeugt wird; und</claim-text>
<claim-text>eine zweite Erzeugungs-Subeinheit (903), ausgelegt zum Erzeugen eines codierten Werts für den ersten Rest des besagten jeden Abtastwerts gemäß dem ersten Vergleichsergebnis der Vergleichseinheit (902) und sequenzielles Schreiben des codierten Werts in den Bitstrom, um das codierte Signal der ersten Erweiterungs-Subschicht zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Einrichtung nach Anspruch 8, wobei die erste Codierungs-Subeinheit (801) ferner Folgendes umfasst:
<claim-text>eine Beziehungsherstellungseinheit (904), ausgelegt zum Herstellen einer Abbildungsbeziehung zwischen der Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht und einem quantisierten Wert in der Kernschichtcodierung;</claim-text>
<claim-text>wobei</claim-text>
<claim-text>die Erhaltungseinheit (901) ferner ausgelegt ist zum Erhalten der Codierungsamplitudenschwelle der ersten Erweiterungs-Subschicht gemäß der durch die Beziehungsherstellungseinheit hergestellten Abbildungsbeziehung.</claim-text></claim-text></claim></claims><claims mxw-id="PCLM56985741" lang="EN" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-en-01-0001" num="0001"><claim-text>An encoding method for audio signals, comprising:
<claim-text>encoding (101) each sample of an input signal to generate an encoded signal of a core layer;</claim-text>
<claim-text>comparing (102) residuals of all or a part of the samples of the input signal with encoding amplitude thresholds, wherein the residuals are generated by core layer encoding, and performing encoding according to comparison results to generate an encoded signal of an enhancement layer; wherein the enhancement layer comprises a first enhancement sub-layer and an encoded value of each residual in an encoded signal of the first enhancement sub-layer is 1 or 0; and</claim-text>
<claim-text>writing (103) the encoded signal of the core layer and the encoded signal of the enhancement layer into a bitstream to generate an encoded signal of the input signal;</claim-text>
<claim-text><b>characterized by</b> that the encoding amplitude threshold of the first enhancement sub-layer in the encoding amplitude thresholds is set according to a quantized value of the core layer.</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The method according to claim 1, wherein the encoded signal of the enhancement layer is formed by encoded signals of N enhancement sub-layers, wherein N is a natural number; and<br/>
the comparing residuals of all or a part of the samples of the input signal with encoding amplitude thresholds, wherein the residuals are generated by core layer encoding, and performing encoding according to comparison results to generate an encoded signal of an enhancement layer comprises:
<claim-text>comparing first residuals of all or a part of the samples of the input signal with encoding amplitude thresholds of a first enhancement sub-layer to generate first comparison results, wherein the first residuals are generated by core layer encoding, and performing encoding according to the first comparison results to generate the encoded signal of the first enhancement sub-layer;</claim-text>
<claim-text>if N &gt; 1, comparing second residuals of all or a part of the samples of the input signal with encoding amplitude thresholds of an n<sup>th</sup> enhancement sub-layer to generate second<!-- EPO <DP n="21"> --> comparison results, wherein the second residuals are generated by the core layer encoding and encoding of first (n-1) enhancement sub-layers, and performing encoding according to the second comparison results to generate the encoded signal of the n<sup>th</sup> enhancement sub-layer, wherein 1 &lt; n ≤ N; and</claim-text>
<claim-text>writing encoded signals of the N enhancement sub-layers into the bitstream to generate the encoded signal of the enhancement layer.</claim-text></claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The method according to claim 2, wherein the comparing (102) first residuals of all or a part of the samples of the input signal with encoding amplitude thresholds of a first enhancement sub-layer to generate first comparison results, wherein the first residuals are generated by core layer encoding, and performing encoding according to the first comparison results to generate the encoded signal of the first enhancement sub-layer comprises:
<claim-text>obtaining an encoding amplitude threshold of the first enhancement sub-layer corresponding to each sample in all or a part of the samples of the input signal;</claim-text>
<claim-text>comparing a first residual of said each sample with the encoding amplitude threshold of the first enhancement sub-layer corresponding to said each sample to generate a first comparison result, wherein the first residual of said each sample is generated by core layer encoding; and</claim-text>
<claim-text>generating an encoded value for the first residual of said each sample according to the first comparison result, and writing the encoded value into the bitstream sequentially to generate the encoded signal of the first enhancement sub-layer.</claim-text></claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The method according to claim 1 or 3, wherein the encoding amplitude threshold of the first enhancement sub-layer is set according to a quantized value corresponding to a total coded bit number of samples in the core layer encoding and the first enhancement sub-layer encoding.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The method according to claim 3, further comprising:
<claim-text>establishing a mapping relation between the encoding amplitude threshold of the first enhancement sub-layer and a quantized value in the core layer encoding.</claim-text></claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>An encoding device for audio signals, comprising:<!-- EPO <DP n="22"> -->
<claim-text>a first encoding unit (701), configured to encode each sample of an input signal to generate an encoded signal of a core layer;</claim-text>
<claim-text>a second encoding unit (702), configured to compare residuals of all or a part of the samples of the input signal with encoding amplitude thresholds, wherein the residuals are generated by core layer encoding, and perform encoding according to comparison results to generate an encoded signal of an enhancement layer; wherein the second encoding unit (702) is configured to generate the enhancement layer comprising a first enhancement sub-layer and an encoded value of each residual in an encoded signal of the first enhancement sub-layer is 1 or 0; and</claim-text>
<claim-text>a generating unit (703), configured to write the encoded signal of the core layer generated by the first encoding unit and the encoded signal of the enhancement layer generated by the second encoding unit into a bitstream to generate an encoded signal of the input signal;</claim-text>
<claim-text><b>characterized by</b> that the encoding amplitude threshold of the first enhancement sub-layer in the encoding amplitude thresholds used by the second encoding unit (702) is set according to a quantized value of the core layer.</claim-text></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The device according to claim 6, wherein the encoded signal of the enhancement layer is formed by encoded signals of N enhancement sub-layers, wherein N is a natural number; and the second encoding unit (702) comprises:
<claim-text>a first encoding sub-unit (801), configured to compare first residuals of all or a part of the samples of the input signal with encoding amplitude thresholds of a first enhancement sub-layer to generate first comparison results, wherein the first residuals are generated by core layer encoding, and perform encoding according to the first comparison results to generate an encoded signal of the first enhancement sub-layer;</claim-text>
<claim-text>a second encoding sub-unit (802), configured to compare second residuals of all or a part of the samples of the input signal with encoding amplitude thresholds of an n<sup>th</sup> enhancement sub-layer to generate second comparison results, wherein the second residuals are generated by core layer encoding and encoding of first (n-1) enhancement sub-layers, and perform<!-- EPO <DP n="23"> --> encoding according to the second comparison results to generate an encoded signal of the n<sup>th</sup> enhancement sub-layer if N &gt; 1, wherein 1 &lt; n ≤ N; and</claim-text>
<claim-text>a first generating sub-unit (803), configured to write encoded signals of the N enhancement sub-layers generated by the first encoding sub-unit and the second encoding sub-unit into the bitstream to generate the encoded signal of the enhancement layer.</claim-text></claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The device according to claim 7, wherein the first encoding sub-unit (801) comprises:
<claim-text>an obtaining unit (901), configured to obtain an encoding amplitude threshold of the first enhancement sub-layer corresponding to each sample in all or a part of the samples of the input signal;</claim-text>
<claim-text>a comparing unit (902), configured to compare a first residual of each sample with the encoding amplitude threshold of the first enhancement sub-layer corresponding to said each sample obtained by the obtaining unit (901) to generate a first comparison result, wherein the first residual of said each sample is generated by core layer encoding; and</claim-text>
<claim-text>a second generating sub-unit (903), configured to generate an encoded value for the first residual of said each sample according to the first comparison result of the comparing unit (902), and write the encoded value into the bitstream sequentially to generate the encoded signal of the first enhancement sub-layer.</claim-text></claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>The device according to claim 8, wherein the first encoding sub-unit (801) further comprises:
<claim-text>a relation establishing unit (904), configured to establish a mapping relation between the encoding amplitude threshold of the first enhancement sub-layer and a quantized value in the core layerencoding; wherein</claim-text>
<claim-text>the obtaining unit (901) is further configured to obtain the encoding amplitude threshold of the first enhancement sub-layer according to the mapping relation established by the relation establishing unit.</claim-text></claim-text></claim></claims><claims mxw-id="PCLM56985742" lang="FR" load-source="patent-office"><!-- EPO <DP n="28"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé de codage de signaux audio, le procédé comprenant les étapes consistant à :
<claim-text>coder (101) chaque échantillon d'un signal d'entrée pour générer un signal codé d'une couche centrale ;</claim-text>
<claim-text>comparer (102) des résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage, lesquels résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction de résultats de comparaison pour générer un signal codé d'une couche d'amélioration ; laquelle couche d'amélioration comprend une première sous-couche d'amélioration, et une valeur codée de chaque résidu dans un signal codé de la première sous-couche d'amélioration vaut 1 ou 0 ; et</claim-text>
<claim-text>écrire (103) le signal codé de la couche centrale et le signal codé de la couche d'amélioration dans un flux binaire pour générer un signal codé du signal d'entrée ;</claim-text>
<claim-text>le procédé étant <b>caractérisé en ce que</b> le seuil d'amplitude de codage de la première sous-couche d'amélioration parmi les seuils d'amplitude de codage est fixé en fonction d'une valeur quantifiée de la couche centrale.</claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, dans lequel le signal codé de la couche d'amélioration est formé de signaux codés de N sous-couches d'amélioration, N étant un entier naturel ; et<br/>
l'étape consistant à comparer des résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage, lesquels résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction de résultats de comparaison pour générer un signal codé d'une couche d'amélioration comprend les étapes consistant à :
<claim-text>comparer des premiers résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage d'une première sous-couche d'amélioration pour générer des premiers résultats de comparaison, lesquels premiers résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction des premiers résultats de comparaison pour générer le signal codé de la première sous-couche d' amélioration ;</claim-text>
<claim-text>si N &gt; 1, comparer des deuxièmes résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage d'une n-ième sous-couche d'amélioration pour générer des deuxièmes résultats de comparaison, lesquels deuxièmes résidus sont générés par le codage de la couche centrale et par codage de<!-- EPO <DP n="29"> --> (n-1) premières sous-couches d'amélioration, et effectuer un codage en fonction des deuxièmes résultats de comparaison pour générer le signal codé de la n-ième sous-couche d'amélioration, avec 1 &lt; n ≤ N ; et</claim-text>
<claim-text>écrire des signaux codés des N sous-couches d'amélioration dans le flux binaire pour générer le signal codé de la couche d'amélioration.</claim-text></claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon la revendication 2, dans lequel l'étape consistant à comparer (102) des premiers résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage d'une première sous-couche d'amélioration pour générer des premiers résultats de comparaison, lesquels premiers résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction des premiers résultats de comparaison pour générer le signal codé de la première sous-couche d'amélioration comprend les étapes consistant à :
<claim-text>obtenir un seuil d'amplitude de codage de la première sous-couche d'amélioration correspondant à chaque échantillon dans la totalité ou une partie des échantillons du signal d' entrée ;</claim-text>
<claim-text>comparer un premier résidu de chaque dit échantillon au seuil d'amplitude de codage de la première sous-couche d'amélioration correspondant à chaque dit échantillon pour générer un premier résultat de comparaison, lequel premier résidu de chaque dit échantillon est généré par codage de la couche centrale ; et</claim-text>
<claim-text>générer une valeur codée pour le premier résidu de chaque dit échantillon en fonction du premier résultat de comparaison, et écrire la valeur codée dans le flux binaire de manière séquentielle pour générer le signal codé de la première sous-couche d'amélioration.</claim-text></claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon la revendication 1 ou 3, dans lequel le seuil d'amplitude de codage de la première sous-couche d'amélioration est fixé en fonction d'une valeur quantifiée correspondant à un nombre total de bits codés d'échantillons dans le codage de la couche centrale et le codage de la première sous-couche d'amélioration.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon la revendication 3, comprenant en outre l'étape consistant à :
<claim-text>établir une relation de correspondance entre le seuil d'amplitude de codage de la première sous-couche d'amélioration et une valeur quantifiée dans le codage de la couche centrale.</claim-text></claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Dispositif de codage de signaux audio, comprenant :<!-- EPO <DP n="30"> -->
<claim-text>une première unité de codage (701), conçue pour coder chaque échantillon d'un signal d'entrée pour générer un signal codé d'une couche centrale ;</claim-text>
<claim-text>une deuxième unité de codage (702), conçue pour comparer des résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage, lesquels résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction de résultats de comparaison pour générer un signal codé d'une couche d'amélioration ; laquelle deuxième unité de codage (702) est conçue pour générer la couche d'amélioration comprenant une première sous-couche d'amélioration, et une valeur codée de chaque résidu dans un signal codé de la première sous-couche d'amélioration vaut 1 ou 0 ; et</claim-text>
<claim-text>une unité de génération (703), conçue pour écrire le signal codé de la couche centrale généré par la première unité de codage et le signal codé de la couche d'amélioration généré par la deuxième unité de codage dans un flux binaire pour générer un signal codé du signal d'entrée ;</claim-text>
<claim-text>le dispositif étant <b>caractérisé en ce que</b> le seuil d'amplitude de codage de la première sous-couche d'amélioration parmi les seuils d'amplitude de codage utilisés par la deuxième unité de codage (702) est fixé en fonction d'une valeur quantifiée de la couche centrale.</claim-text></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Dispositif selon la revendication 6, dans lequel le signal codé de la couche d'amélioration est formé de signaux codés de N sous-couches d'amélioration, N étant un entier naturel ; et la deuxième unité de codage (702) comprend :
<claim-text>une première sous-unité de codage (801), conçue pour comparer des premiers résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage d'une première sous-couche d'amélioration pour générer des premiers résultats de comparaison, lesquels premiers résidus sont générés par codage de la couche centrale, et effectuer un codage en fonction des premiers résultats de comparaison pour générer un signal codé de la première sous-couche d' amélioration ;</claim-text>
<claim-text>une deuxième sous-unité de codage (802), conçue pour comparer des deuxièmes résidus de la totalité ou d'une partie des échantillons du signal d'entrée à des seuils d'amplitude de codage d'une n-ième sous-couche d'amélioration pour générer des deuxièmes résultats de comparaison, lesquels deuxièmes résidus sont générés par codage de la couche centrale et par codage de (n-1) premières sous-couches d'amélioration, et effectuer un codage en fonction des deuxièmes résultats de comparaison pour générer un signal codé de la n-ième sous-couche d'amélioration si N &gt; 1, avec 1 &lt; n ≤ N ; et<!-- EPO <DP n="31"> --></claim-text>
<claim-text>une première sous-unité de génération (803), conçue pour écrire des signaux codés des N sous-couches d'amélioration générés par la première sous-unité de codage et la deuxième sous-unité de codage dans le flux binaire pour générer le signal codé de la couche d'amélioration.</claim-text></claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Dispositif selon la revendication 7, dans lequel la première sous-unité de codage (801) comprend :
<claim-text>une unité d'obtention (901), conçue pour obtenir un seuil d'amplitude de codage de la première sous-couche d'amélioration correspondant à chaque échantillon dans la totalité ou une partie des échantillons du signal d'entrée ;</claim-text>
<claim-text>une unité de comparaison (902), conçue pour comparer un premier résidu de chaque échantillon au seuil d'amplitude de codage de la première sous-couche d'amélioration correspondant à chaque dit échantillon obtenu par l'unité d'obtention (901) pour générer un premier résultat de comparaison, lequel premier résidu de chaque dit échantillon est généré par codage de la couche centrale ; et</claim-text>
<claim-text>une deuxième sous-unité de génération (903), conçue pour générer une valeur codée pour le premier résidu de chaque dit échantillon en fonction du premier résultat de comparaison de l'unité de comparaison (902), et écrire la valeur codée dans le flux binaire de manière séquentielle pour générer le signal codé de la première sous-couche d'amélioration.</claim-text></claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Dispositif selon la revendication 8, dans lequel la première sous-unité de codage (801) comprend en outre :
<claim-text>une unité d'établissement de relation (904), conçue pour établir une relation de correspondance entre le seuil d'amplitude de codage de la première sous-couche d'amélioration et une valeur quantifiée dans le codage de la couche centrale ;</claim-text>
<claim-text>laquelle unité d'obtention (901) est en outre conçue pour obtenir le seuil d'amplitude de codage de la première sous-couche d'amélioration en fonction de la relation de correspondance établie par l'unité d'établissement de relation.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16672247" load-source="patent-office"><!-- EPO <DP n="32"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="143" he="103" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="119" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="152" he="142" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="147" he="107" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0005" num="5,6"><img id="if0005" file="imgf0005.tif" wi="155" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0006" num="7,8"><img id="if0006" file="imgf0006.tif" wi="148" he="158" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0007" num="9,10"><img id="if0007" file="imgf0007.tif" wi="162" he="210" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0008" num="11"><img id="if0008" file="imgf0008.tif" wi="105" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0009" num="12,13"><img id="if0009" file="imgf0009.tif" wi="122" he="106" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
