<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680609-A1" country="EP" doc-number="2680609" kind="A1" date="20140101" family-id="46720728" file-reference-id="252638" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549079" ucid="EP-2680609-A1"><document-id><country>EP</country><doc-number>2680609</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12749314-A" is-representative="YES"><document-id mxw-id="PAPP154823002" load-source="docdb" format="epo"><country>EP</country><doc-number>12749314</doc-number><kind>A</kind><date>20120214</date><lang>JA</lang></document-id><document-id mxw-id="PAPP220439651" load-source="docdb" format="original"><country>EP</country><doc-number>12749314.6</doc-number><date>20120214</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140446619" ucid="JP-2011036221-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011036221</doc-number><kind>A</kind><date>20110222</date></document-id></priority-claim><priority-claim mxw-id="PPC140449413" ucid="JP-2012053418-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012053418</doc-number><kind>W</kind><date>20120214</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988128758" load-source="docdb">H04R   3/02        20060101AFI20120912BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988100116" load-source="docdb" scheme="CPC">H04R   3/02        20130101 LI20131206BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988112962" load-source="docdb" scheme="CPC">H03G   3/20        20130101 LI20131127BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988114467" load-source="docdb" scheme="CPC">G10K  11/16        20130101 FI20131127BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988125467" load-source="docdb" scheme="CPC">H04R2430/03        20130101 LA20130823BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179721" lang="DE" load-source="patent-office">AUDIOVERARBEITUNGSVORRICHTUNG, AUDIOVERARBEITUNGSVERFAHREN UND PROGRAMM</invention-title><invention-title mxw-id="PT132179722" lang="EN" load-source="patent-office">AUDIO PROCESSING DEVICE, AUDIO PROCESSING METHOD, AND PROGRAM</invention-title><invention-title mxw-id="PT132179723" lang="FR" load-source="patent-office">DISPOSITIF DE TRAITEMENT AUDIO, PROCÉDÉ DE TRAITEMENT AUDIO ET PROGRAMME</invention-title><citations><non-patent-citations><nplcit><text>See references of WO 2012114946A1</text><sources><source mxw-id="PNPL67455007" load-source="docdb" name="SEA"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918134367" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SONY CORP</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918170655" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SONY CORPORATION</last-name></addressbook></applicant><applicant mxw-id="PPAR918986604" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Sony Corporation</last-name><iid>100830309</iid><address><street>1-7-1 Konan Minato-ku</street><city>Tokyo 108-0075</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918141975" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SAKURABA YOHEI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918152384" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SAKURABA, YOHEI</last-name></addressbook></inventor><inventor mxw-id="PPAR918986980" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SAKURABA, YOHEI</last-name><address><street>c/o SONY CORPORATION, 1-7-1 Konan Minato-ku</street><city>Tokyo 108-0075</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918158514" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KIHARA NOBUYUKI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918136146" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KIHARA, NOBUYUKI</last-name></addressbook></inventor><inventor mxw-id="PPAR918991765" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KIHARA, NOBUYUKI</last-name><address><street>c/o SONY CORPORATION, 1-7-1 Konan Minato-ku</street><city>Tokyo 108-0075</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918991843" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Mills, Julia</last-name><iid>100047838</iid><address><street>D Young &amp; Co LLP 120 Holborn</street><city>London EC1N 2DY</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2012053418-W"><document-id><country>JP</country><doc-number>2012053418</doc-number><kind>W</kind><date>20120214</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012114946-A1"><document-id><country>WO</country><doc-number>2012114946</doc-number><kind>A1</kind><date>20120830</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548839214" load-source="docdb">AL</country><country mxw-id="DS548843236" load-source="docdb">AT</country><country mxw-id="DS548839215" load-source="docdb">BE</country><country mxw-id="DS548801970" load-source="docdb">BG</country><country mxw-id="DS548840010" load-source="docdb">CH</country><country mxw-id="DS548801116" load-source="docdb">CY</country><country mxw-id="DS548801117" load-source="docdb">CZ</country><country mxw-id="DS548834821" load-source="docdb">DE</country><country mxw-id="DS548839216" load-source="docdb">DK</country><country mxw-id="DS548839217" load-source="docdb">EE</country><country mxw-id="DS548837339" load-source="docdb">ES</country><country mxw-id="DS548801971" load-source="docdb">FI</country><country mxw-id="DS548801972" load-source="docdb">FR</country><country mxw-id="DS548834822" load-source="docdb">GB</country><country mxw-id="DS548839850" load-source="docdb">GR</country><country mxw-id="DS548834823" load-source="docdb">HR</country><country mxw-id="DS548801118" load-source="docdb">HU</country><country mxw-id="DS548840011" load-source="docdb">IE</country><country mxw-id="DS548839851" load-source="docdb">IS</country><country mxw-id="DS548801973" load-source="docdb">IT</country><country mxw-id="DS548839852" load-source="docdb">LI</country><country mxw-id="DS548834824" load-source="docdb">LT</country><country mxw-id="DS548843237" load-source="docdb">LU</country><country mxw-id="DS548801978" load-source="docdb">LV</country><country mxw-id="DS548834825" load-source="docdb">MC</country><country mxw-id="DS548843238" load-source="docdb">MK</country><country mxw-id="DS548843239" load-source="docdb">MT</country><country mxw-id="DS548837340" load-source="docdb">NL</country><country mxw-id="DS548840724" load-source="docdb">NO</country><country mxw-id="DS548837341" load-source="docdb">PL</country><country mxw-id="DS548801979" load-source="docdb">PT</country><country mxw-id="DS548801119" load-source="docdb">RO</country><country mxw-id="DS548801980" load-source="docdb">RS</country><country mxw-id="DS548837342" load-source="docdb">SE</country><country mxw-id="DS548840012" load-source="docdb">SI</country><country mxw-id="DS548840725" load-source="docdb">SK</country><country mxw-id="DS548840726" load-source="docdb">SM</country><country mxw-id="DS548843240" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669750" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Provided is an audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.<img id="iaf01" file="imgaf001.tif" wi="163" he="104" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499123" lang="EN" source="EPO" load-source="docdb"><p>Provided is an audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.</p></abstract><description mxw-id="PDES63955180" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">The present invention relates to an audio processing apparatus, an audio processing method, and a program.</p><heading id="h0002">Background Art</heading><p id="p0002" num="0002">It has been known that so-called howling occurs in various audio signal transmission systems such as an audio amplification system from a microphone to a speaker. It is an important issue to suppress this howling.</p><p id="p0003" num="0003">For example, technologies disclosed in Patent Literatures 1 and 2 are used as a way of suppressing howling. Patent Literature 1 discloses a technique for detecting occurrence of howling upon detecting an envelope increase tendency that continues for a predetermined time or more. Patent Literature 2 discloses a technique for gradually suppressing howling.</p><heading id="h0003">Citation List</heading><heading id="h0004">Patent Literature</heading><p id="p0004" num="0004"><ul><li>Patent Literature 1: <patcit id="pcit0001" dnum="JPH8223684A"><text>JP H8-223684A</text></patcit></li><li>Patent Literature 2: <patcit id="pcit0002" dnum="JPH3237899A"><text>JP H3-237899A</text></patcit></li></ul></p><heading id="h0005">Summary of Invention</heading><heading id="h0006">Technical Problem</heading><!-- EPO <DP n="2"> --><p id="p0005" num="0005">However, even if the techniques described above are adopted, it is impossible to appropriately detect howling in the actual environment due to influences of various reflected sounds, which arrive with delay, and various non-howling sounds such as a noise and a voice to be input to a microphone. Consequently, there is a problem that howling is not properly suppressed.</p><p id="p0006" num="0006">In view of the problem, the object of the present disclosure is to provide an audio processing device, an audio processing method, and a program that are novel and improved, and are capable of properly suppressing howling even if a reflected sound or a non-howling sound occurs.</p><heading id="h0007">Solution to Problem</heading><p id="p0007" num="0007">According to the first aspect of the present disclosure in order to solve the above-mentioned problem, there is provided an audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.</p><p id="p0008" num="0008">The adjustment amount may include a first suppression amount having a long time for suppressing the gain, and a second suppression amount having a short time for suppressing the gain.</p><p id="p0009" num="0009">The gain adjustment unit may set a combined suppression amount for each of the bands, the combined suppression amount being a combination of the first suppression amount and the second suppression amount.<!-- EPO <DP n="3"> --></p><p id="p0010" num="0010">The gain adjustment unit may set the combined suppression amount obtained by increasing the first suppression amount when a maximum value of the acquired autocorrelation value is greater than a predetermined threshold value, and sets the combined suppression amount obtained by increasing the second suppression amount when the maximum value of the acquired autocorrelation value is smaller than the threshold value.</p><p id="p0011" num="0011">The autocorrelation value of the power may be an absolute value of an autocorrelation normalized based on the power.</p><p id="p0012" num="0012">A time domain conversion unit configured to convert the audio signal subjected to gain adjustment by the gain adjustment unit to a time domain, and an output unit configured to output the audio signal converted to the time domain to a speaker may further be included.</p><p id="p0013" num="0013">A coefficient conversion unit configured to convert a filter coefficient to a minimum phase filter coefficient, the filter coefficient corresponding to the adjustment amount of the gain according to the autocorrelation value, and a convolution unit configured to convolute the minimum phase filter coefficient with the audio signal in the time domain, the audio signal being input from the microphone may further be included.</p><p id="p0014" num="0014">According to another aspect of the present disclosure in order to solve the above-mentioned problem, there is provided an audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit adjusts the gain for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression<!-- EPO <DP n="4"> --> amount having a short suppression time.</p><p id="p0015" num="0015">According to another aspect of the present disclosure in order to solve the above-mentioned problem, there is provided an audio processing method including converting an audio signal input from a microphone to a frequency domain for each of frames, and performing gain adjustment for each of bands on the audio signal converted to the frequency domain. In performing the gain adjustment, an autocorrelation value of power of the audio signal between the frames for each of the bands is acquired, and an adjustment amount of the gain is set in accordance with the acquired autocorrelation value.</p><p id="p0016" num="0016">According to another aspect of the present disclosure in order to solve the above-mentioned problem, there is provided an audio processing method including converting an audio signal input from a microphone to a frequency domain for each of frames, and performing gain adjustment for each of bands on the audio signal converted to the frequency domain. In performing the gain adjustment, the gain is adjusted for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression amount having a short suppression time.</p><p id="p0017" num="0017">According to another aspect of the present disclosure in order to solve the above-mentioned problem, there is provided a program for causing a computer to function as an audio processing apparatus, the audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.</p><p id="p0018" num="0018"><!-- EPO <DP n="5"> --> According to another aspect of the present disclosure in order to solve the above-mentioned problem, there is provided a program for causing a computer to function as an audio processing apparatus, the audio processing apparatus including a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain. The gain adjustment unit adjusts the gain for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression amount having a short suppression time.</p><heading id="h0008">Advantageous Effects of Invention</heading><p id="p0019" num="0019">As described above, according to the present invention, it is possible to properly suppress howling even if a reflected sound or a non-howling sound occurs.</p><heading id="h0009">Brief Description of Drawings</heading><p id="p0020" num="0020"><ul><li>[<figref idrefs="f0001">FIG. 1] FIG. 1</figref> is a functional block diagram of an audio processing apparatus according to a first embodiment.</li><li>[<figref idrefs="f0002">FIG. 2] FIG. 2</figref> is a schematic view for describing block processing.</li><li>[<figref idrefs="f0003">FIG. 3A] FIG. 3A</figref> is a diagram illustrating a power difference Δp(ω) in one band.</li><li>[<figref idrefs="f0003">FIG. 3B] FIG. 3B</figref> is a diagram illustrating absolute values of an autocorrelation normalized based on power.</li><li>[<figref idrefs="f0004">FIG. 4] FIG. 4</figref> is a flowchart describing howling suppression processing.</li><li>[<figref idrefs="f0005">FIG. 5] FIG. 5</figref> is a functional block diagram of an audio processing apparatus according to a second embodiment.</li><li>[<figref idrefs="f0006">FIG. 6] FIG. 6</figref> is a diagram for describing a linear phase FIR filter coefficient.</li><li>[<figref idrefs="f0007">FIG. 7] FIG. 7</figref> is a diagram for describing conversion of a FIR filter coefficient to a minimum phase FIR filter coefficient.</li></ul><!-- EPO <DP n="6"> --></p><heading id="h0010">Description of Embodiments</heading><p id="p0021" num="0021">Hereinafter, preferred embodiments of the present invention will be described in detail with reference to the appended drawings. Note that, in this specification and the drawings, elements that have substantially the same function and structure are denoted with the same reference signs, and repeated explanation is omitted.</p><p id="p0022" num="0022">The description will be made in the following order.</p><heading id="h0011">1. First Embodiment</heading><p id="p0023" num="0023"><ul><li>1-1. Configuration of Audio Processing Apparatus</li><li>1-2. Suppression of Howling</li><li>1-3. Configuration of Signal Processing Unit</li><li>1-4. Howling Suppression Processing</li></ul></p><heading id="h0012">2. Second Embodiment</heading><heading id="h0013">3. Conclusion</heading><heading id="h0014">&lt;1. First Embodiment&gt;</heading><heading id="h0015">(1-1. Configuration of Audio Processing Apparatus)</heading><p id="p0024" num="0024">A configuration of an audio processing apparatus according to a first embodiment will be described with reference to <figref idrefs="f0001">FIG. 1. FIG. 1</figref> is a functional block diagram of the audio processing apparatus according to the first embodiment.</p><p id="p0025" num="0025">As illustrated in <figref idrefs="f0001">FIG. 1</figref>, the audio processing apparatus 10 according to the first embodiment includes a microphone 20, an A/D converter 30, a signal processing unit 40, a D/A converter 50, and a speaker 60.</p><p id="p0026" num="0026">The microphone 20 collects a sound, and converts the collected sound to an audio signal. The mic 20 outputs the audio signal to the A/D converter 30. Additionally, the audio signal output from the microphone 20 is amplified by an amplifier that is not shown in the drawings, and is input to the A/D converter 30.<!-- EPO <DP n="7"> --></p><p id="p0027" num="0027">The A/D converter 30 performs digital conversion on the audio signal input from the microphone 20. The A/D converter 30 outputs the audio signal subjected to the digital conversion to the signal processing unit 40. Additionally, the audio signal input to the A/D converter 30 may be a signal input from an external device other than the microphone 20.</p><p id="p0028" num="0028">The signal processing unit 40 performs various signal processing such as gain adjustment on the audio signal input from the A/D converter 30. The signal processing unit 40 outputs the audio signal subjected to the signal processing to the D/A converter 50. The signal processing unit 40 according to the present embodiment performs gain adjustment for suppressing howling, which will be described below in detail. A detailed configuration of the signal processing unit 40 will be described below.</p><p id="p0029" num="0029">The D/A converter 50 performs analog conversion on the audio signal input from the signal processing unit 40. The D/A converter 50 outputs the audio signal subjected to the analog conversion to the speaker 60. The speaker 60 emits the audio signal input from the D/A converter 50.</p><p id="p0030" num="0030">Additionally, the audio processing apparatus 10 includes memory (not shown) for storing various data. The memory stores, for example, data of an audio signal input from a microphone, and data processed by the signal processing unit 40. The memory also stores a program for operating the audio processing apparatus 10. A CPU that is not shown in the drawings executes the program so that a process (such as howling suppression processing described below) to be performed by the audio processing apparatus 10 is realized.</p><heading id="h0016">(1-2. Suppression of Howling)</heading><p id="p0031" num="0031">In the above-described audio processing apparatus, howling may occur while an audio signal is transmitted from the microphone 20 to the speaker 60. It is<!-- EPO <DP n="8"> --> an important issue to suppress this howling.</p><p id="p0032" num="0032">Incidentally, upon suppressing howling, it has been known that an indicator for determining howling likeness and a time spent for restoring a howling suppression gain have a great influence on performance of suppressing howling.</p><p id="p0033" num="0033">First, the indicator for determining howling likeness (in other words, an indicator for detecting howling) will be described. As the indicator for determining howling likeness, a technology has been known which determines howling if, due to counter processing performed on a power difference (Δpower) of audio signals subjected to the Fourier transform, a state continues in which a Δpower value is continuously equal to or more than a threshold value. However, in the actual environment, there is a problem that howling is not properly suppressed due to various reflected sounds, which arrive with delay, and a non-howling sound such as a noise and a sound input to a microphone.</p><p id="p0034" num="0034">Next, the time spent for restoring the howling suppression gain will be described. If a time spent until a howling suppression gain has been restored is lengthened, there is an advantage that howling does not occur again for some time while there is also probability that quality of a non-howling sound would be degraded during this period. To the contrary, if the time spent until the howling suppression gain has been restored is shortened, quality of a non-howling sound is not so eminently degraded while howling probably occurs again soon or howling is not probably cancelled completely. It is therefore necessary to prevent both sound quality from being degraded and howling from occurring again.</p><p id="p0035" num="0035">For this object, in the audio processing apparatus 10 according to the present embodiment, an autocorrelation of a power difference of audio signals subjected to the Fourier transform, which will be described below in detail, is used as the indicator for determining howling likeness, and howling suppression is controlled in accordance with the autocorrelation value. It is hereby possible to properly<!-- EPO <DP n="9"> --> suppress howling even if a reflected sound and a non-howling sound occur. It is also possible to prevent both the sound quality from being degraded and the howling from occurring again by combining a plurality of amounts of suppression having different suppression times as amounts of howling suppression.</p><heading id="h0017">(1-3. Configuration of Signal Processing Unit)</heading><p id="p0036" num="0036">A configuration of the signal processing unit 40 will be described with reference to <figref idrefs="f0001">FIG. 1</figref>. As illustrated in <figref idrefs="f0001">FIG. 1</figref>, the signal processing unit 40 includes a Fourier transform unit 42, which is an example of a frequency domain transformation unit, a gain adjustment unit 44, and an inverse Fourier transform unit 46, which is a time domain conversion unit.</p><heading id="h0018">(Fourier Transform Unit)</heading><p id="p0037" num="0037">The Fourier transform unit 42 performs Fourier transformation (FFT) on an audio signal (input sound) input from the A/D converter 30 for each of frames, which is a unit time, and converts the audio signals to signals in a frequency domain. The Fourier transform unit 42 divides the audio signals, which have been subjected to Fourier transform and converted to the frequency domain, into a plurality of bands, and outputs an audio signal in each band to the gain adjustment unit 44. A known filter bank may divide the audio signals into the plurality of bands.</p><p id="p0038" num="0038">Here, using <figref idrefs="f0002">FIG. 2</figref>, block processing in the Fourier transform processing will be described. <figref idrefs="f0002">FIG. 2</figref> is a schematic view for describing the block processing. Here, data of an input sound input from the microphone 20 is, for example, 512 samples, and let us assume that the 512 samples include, for example, samples S(1), S(2), S(3), ... S(n). The Fourier transform is performed using two samples in the block processing. For example, the Fourier transform is performed on both the sample S(1) and the sample S(2) to acquire a frequency spectrum F(1), and the Fourier transform is performed on both the sample S(2) and the sample S(3) to acquire a frequency spectrum F(2). Consequently, a processing frame of the block processing includes 1024 samples.<!-- EPO <DP n="10"> --></p><heading id="h0019">(Gain Adjustment Unit)</heading><p id="p0039" num="0039">The gain adjustment unit 44 performs gain adjustment on the audio signal input from the Fourier transform unit 42 for each band. The gain adjustment unit 44 also yields a power difference between frames by using a frequency spectrum, and acquires an autocorrelation value for detecting howling. It will be described below how the autocorrelation value is acquired.</p><p id="p0040" num="0040">First, the gain adjustment unit 44 acquires a power difference between frames from the acquired frequency spectra F(1), F(2), ... F(n). For example, the gain adjustment unit 44 acquires a power difference Δp(ω) as illustrated in <figref idrefs="f0003">FIG. 3A. FIG. 3A</figref> is a diagram illustrating a power difference Δp(ω) in one band. For convenience of explanation, a solid line indicates Δp(ω) during howling, and a dotted line indicates Δp(ω) during non-howling in <figref idrefs="f0003">FIG. 3A</figref>. As seen from <figref idrefs="f0003">FIG. 3A</figref>, ΔP(ω) during howling represents a greater value than Δp(ω) during non-howling.</p><p id="p0041" num="0041">The gain adjustment unit 44 acquires an autocorrelation of Δp(ω) based on the acquired Δp(ω). Here, the autocorrelation will be described. The autocorrelation is a measurement for measuring to what extent a signal matches a signal obtained by performing time shift on the signal itself. As described in Formula 1 below, the autocorrelation is represented in the form of a function for amplitude of time shift. That is, an autocorrelation r<sub>m</sub>(ω) in Formula 1 is the sum of the product of Δp(ω) and point obtained by shifting Δp(ω) by m points.</p><p id="p0042" num="0042">[Formula 1] <maths id="math0001" num="(Formula 1)"><math display="block"><mtable><mtr><mtd><msub><mi>r</mi><mi>m</mi></msub><mfenced><mi>ω</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mi>i</mi><mi>N</mi></munderover></mstyle><mi mathvariant="normal">Δ</mi><mo>⁢</mo><mi>p</mi><mfenced><mi>ω</mi><mi>t</mi></mfenced><mo>×</mo><mi mathvariant="normal">Δ</mi><mo>⁢</mo><mi>p</mi><mo>⁢</mo><mfenced separators=""><mi>ω</mi><mo>,</mo><mi>t</mi><mo>+</mo><mi>m</mi></mfenced></mtd><mtd><mi>m</mi><mo>=</mo><mn>1</mn><mo>,</mo><mo>⋯</mo><mo>,</mo><mi>N</mi></mtd></mtr></mtable></math><img id="ib0001" file="imgb0001.tif" wi="149" he="20" img-content="math" img-format="tif"/></maths><br/>
Additionally, Δp(ω, t) represents Δpower value of a frequency ω and time t.</p><p id="p0043" num="0043">The autocorrelation is useful in finding a repeated pattern included in<!-- EPO <DP n="11"> --> signals. For example, the autocorrelation is used in determining the presence of periodic signals within noises. If there is periodicity, the autocorrelation has a greater value while the autocorrelation has a smaller value if there is no periodicity. Since Δpower is periodic during howling, a high autocorrelation is shown. Since Δpower is not periodic during non-howling, a low autocorrelation is shown.</p><p id="p0044" num="0044">The gain adjustment unit 44 uses the acquired autocorrelation r<sub>m</sub>(ω) to acquire an absolute value (referred to as autocorrelation value) of an autocorrelation normalized based on power, as described in Formula 2 below. Normalization based on power makes the autocorrelation between howling and non-howling more distinguishable.</p><p id="p0045" num="0045">[Formula 2] <maths id="math0002" num="(Formula 2)"><math display="block"><mfenced open="|" close="|"><mfrac><mrow><msub><mi>r</mi><mi>m</mi></msub><mfenced><mi>ω</mi></mfenced></mrow><mrow><msub><mi>r</mi><mn>0</mn></msub><mfenced><mi>ω</mi></mfenced></mrow></mfrac></mfenced></math><img id="ib0002" file="imgb0002.tif" wi="57" he="24" img-content="math" img-format="tif"/></maths></p><p id="p0046" num="0046">Autocorrelation values acquired from Δp(ω) in <figref idrefs="f0003">FIG. 3A</figref> are illustrated in <figref idrefs="f0003">FIG. 3B. FIG. 3B</figref> is a diagram illustrating absolute values of the autocorrelation normalized based on power. A solid line indicates autocorrelation values during howling, and a dotted line indicates autocorrelation values during non-howling in <figref idrefs="f0003">FIG. 3B</figref>. As seen from <figref idrefs="f0003">FIG. 3B</figref>, the autocorrelation values during howling are periodic, and greater than the autocorrelation values during non-howling. Using this nature of the autocorrelation, it is possible to appropriately distinguish howling from non-howling.</p><p id="p0047" num="0047">In this way, detection of howling using the autocorrelation has an advantage described below over detection of howling using counter processing when Δpower is beyond a threshold value, for example. That is, howling is repeatedly amplified and attenuated to be gradually greater (howling is not simply amplified, but is also sometimes attenuated to be greater) in a short time especially under an environment<!-- EPO <DP n="12"> --> under which complicated reflection is observed, a Δpower value temporarily becomes small and a counter is reset so that howling is not problematically suppressed. To the contrary, since the present embodiment focuses on only periodicity of Δpower, it is possible to suppress howling even if Δpower temporarily becomes small.</p><p id="p0048" num="0048">The gain adjustment unit 44 also sets a gain adjustment amount for each band in accordance with the acquired autocorrelation value. Specifically, the gain adjustment unit 44 adjusts a gain for each band by using a combined suppression amount obtained by combining a plurality of suppression amounts. In the present embodiment, the combined suppression amount is described as an amount obtained by combining a long time suppression amount with a short time suppression amount. The long time suppression amount corresponds to a first suppression amount having a long suppression time, and the short time suppression amount corresponds to a second suppression amount having a short suppression time. Additionally, the combined suppression amount may be obtained by combining three or more suppression amounts. For example, when three suppression amounts are used, a suppression time of a third suppression amount is set to be longer than the suppression time of the short time suppression amount and shorter than the suppression time of the long time suppression amount.</p><p id="p0049" num="0049">The gain adjustment unit 44 compares a maximum value (x(ω) in <figref idrefs="f0003">FIG. 3B</figref>) of the acquired autocorrelation values with a predetermined threshold value to set a combined suppression value (final suppression amount). The predetermined threshold value is a value indicating a border between howling and non-howling. When the maximum value x(ω) of the autocorrelation values is greater than the threshold value, the gain adjustment unit 44 determines that howling occurs. To the contrary, when the maximum value x(ω) of the autocorrelation values is smaller than the threshold value, the gain adjustment unit 44 determines that howling does not occur. In addition, when the maximum value of the acquired autocorrelation values is greater than the threshold value, the gain adjustment unit 44 sets a combined<!-- EPO <DP n="13"> --> suppression amount obtained by increasing the long time suppression amount. To the contrary, when the maximum value of the acquired autocorrelation values is smaller than the threshold value, the gain adjustment unit 44 sets a combined suppression amount obtained by increasing the short time suppression amount.</p><p id="p0050" num="0050">The gain adjustment unit 44 also performs processing for restoring the long time suppression amount and the short time suppression amount because a frequency characteristic continues to be degraded when howling suppression is continued. The long time suppression amount is slowly restored, and the short time suppression amount is restored fast. By using a plurality of suppression amounts having different times spent for restoring suppression in this way, it is possible to prevent both sound quality from being degraded and howling from occurring again. Data (such as data D(1) and D(2) illustrated in <figref idrefs="f0002">FIG. 2</figref>) of an audio signal in each band, which has been subjected to gain adjustment, is output to the inverse Fourier transform unit 46.</p><heading id="h0020">(Inverse Fourier Transform Unit)</heading><p id="p0051" num="0051">The inverse Fourier transform unit 46 synthesized the audio signals in each band, which have been input from the Fourier transform unit 46, and performs inverse Fourier transform processing to convert the audio signals to a time domain. The inverse Fourier transform unit 46 according to the present embodiment converts an audio signal whose suppression amount is opened to the time domain. The inverse Fourier transform unit 46 outputs the audio signal converted to the time domain to the D/A converter 50. The audio signal whose suppression amount has been opened is hereby output to the speaker 60.</p><p id="p0052" num="0052">According to the signal processing unit 40 configured as described above, the gain adjustment unit 44 acquires an autocorrelation value, and sets a final suppression amount in accordance with the acquired autocorrelation value. It is therefore possible to properly suppress howling even if a reflected sound or a non-howling sound occurs. It is also possible to prevent both sound quality from being<!-- EPO <DP n="14"> --> degraded and howling from occurring again by combining two suppression amounts (long time suppression amount and short time suppression amount) having different suppression times as a final suppression amount.</p><heading id="h0021">(1-4. Howling Suppression Processing)</heading><p id="p0053" num="0053">Howling suppression processing according to the present embodiment will be described with reference to <figref idrefs="f0004">FIG. 4. FIG. 4</figref> is a flowchart describing the howling suppression processing. A CPU of the audio processing apparatus 10 executes a program stored in memory to realize the present processing.</p><p id="p0054" num="0054">The flowchart in <figref idrefs="f0004">FIG. 4</figref> starts when the Fourier transform unit 42 of the signal processing unit 40 converts an audio signal input from the microphone 20 to a frequency domain, and outputs the converted audio signal to the gain adjustment unit 44.</p><p id="p0055" num="0055">First, the gain adjustment unit 44 acquires a maximum value x(ω) of autocorrelation values indicating howling likeness, as illustrated in <figref idrefs="f0003">FIG. 3B</figref>, based on a power difference Δp(ω) between frames (step S2).</p><p id="p0056" num="0056">Next, the gain adjustment unit 44 sets a short time suppression amount G1(ω) and a long time suppression amount G2(ω) for each band in accordance with the acquired maximum value x(ω) of the autocorrelation values. The gain adjustment unit 44 sets a final suppression amount G(ω) obtained by combining the two suppression amounts G1(ω) and G2(ω). Additionally, a unit for each suppression amount is a decibel (dB). The present processing is repeated, and then the last values are used as the short time suppression amount G1(ω) and the long time suppression amount G2(ω). That is, the short time suppression amount G1(ω) and the long time suppression amount G2(ω) are values to be integrated.</p><p id="p0057" num="0057">Next, the gain adjustment unit 44 determines whether the maximum value x(ω) of the autocorrelation values is equal to or more than a predetermined threshold<!-- EPO <DP n="15"> --> value (step S4). When the autocorrelation value x(ω) is equal to or more than the predetermined threshold value (step S4: Yes), the gain adjustment unit 44 increases the long time suppression amount G2(ω) of the two suppression amounts G1(ω) and G2(ω) (step S6).</p><p id="p0058" num="0058">For example, the gain adjustment unit 44 increases the long time suppression amount G2(ω) in accordance with a value of x(ω), as described in Formula 3 below.</p><p id="p0059" num="0059">[Formula 3] <maths id="math0003" num="(Formula 3)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>×</mo><mi>T</mi><mo>⁢</mo><mn>2</mn><mfenced separators=""><mi>x</mi><mfenced><mi>ω</mi></mfenced></mfenced></math><img id="ib0003" file="imgb0003.tif" wi="114" he="12" img-content="math" img-format="tif"/></maths><br/>
where T2(x(ω)) is, for example, a constant value or a value in proportion to howling likeness, but is not limited thereto.</p><p id="p0060" num="0060">The gain adjustment unit 44 may also increase the long time suppression amount G2(ω) by using multiplication, as described in Formula 4 below.</p><p id="p0061" num="0061">[Formula 4] <maths id="math0004" num="(Formula 4)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>×</mo><mi>T</mi><mo>⁢</mo><mn>2</mn><mfenced separators=""><mi>x</mi><mfenced><mi>ω</mi></mfenced></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="101" he="14" img-content="math" img-format="tif"/></maths><br/>
Additionally, when the maximum value x(ω) of the autocorrelation values is equal to or more than the predetermined threshold value, the gain adjustment unit 44 retains the amplitude of the short time suppression amount G1(ω).</p><p id="p0062" num="0062">To the contrary, if the maximum value x(ω) of the autocorrelation values is equal to or less than the predetermined value in step S4 (step S4: No), the gain adjustment unit 44 increases the short time suppression amount G1(ω) of the two suppression amounts G1(ω) and G2(ω) (step S8).</p><p id="p0063" num="0063">For example, the gain adjustment unit 44 increases the short time<!-- EPO <DP n="16"> --> suppression amount G1(ω) in accordance with a value of x(ω), as described in Formula 5 below.</p><p id="p0064" num="0064">[Formula 5] <maths id="math0005" num="(Formula 5)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>×</mo><mi>T</mi><mo>⁢</mo><mn>1</mn><mfenced separators=""><mi>x</mi><mfenced><mi>ω</mi></mfenced></mfenced></math><img id="ib0005" file="imgb0005.tif" wi="98" he="11" img-content="math" img-format="tif"/></maths><br/>
where T1(x(ω)) is, for example, a constant value or a value in proportion to howling likeness, but is not limited thereto.</p><p id="p0065" num="0065">The gain adjustment unit 44 may also increase the short time suppression amount G1(ω) by using multiplication, as described in Formula 6 below.</p><p id="p0066" num="0066">[Formula 6] <maths id="math0006" num="(Formula 6)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>×</mo><mi>T</mi><mo>⁢</mo><mn>1</mn><mfenced separators=""><mi>x</mi><mfenced><mi>ω</mi></mfenced></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="101" he="13" img-content="math" img-format="tif"/></maths><br/>
Additionally, if the maximum value x(ω) of the auto correlation values is equal to or less than the predetermined value, the gain adjustment unit 44 retains the amplitude of the long time suppression amount G2(ω).</p><p id="p0067" num="0067">Next, the gain adjustment unit 44 yields the final suppression amount G(ω) by combining the two suppression amounts G1(ω) and G2(ω) (step S10). For example, the gain adjustment unit 44 yields the final suppression amount G(ω), as described in Formula 7 below.</p><p id="p0068" num="0068">[Formula 7] <maths id="math0007" num="(Formula 7)"><math display="block"><mi>G</mi><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>+</mo><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="100" he="16" img-content="math" img-format="tif"/></maths></p><p id="p0069" num="0069">The gain adjustment unit 44 yields the final suppression amount G(ω) by combining the two suppression amounts G1(ω) and G2(ω), but the way of yielding the final suppression amount G(ω) is not limited thereto. For example, the gain<!-- EPO <DP n="17"> --> adjustment unit 44 may adopt one of the two suppression amounts G1(ω) and G2(ω) that has the greater suppression gain as the final suppression amount G(ω) when focusing on suppressing howling. The gain adjustment unit 44 may also adopt the suppression amount that has the smaller suppression gain as the final suppression amount G(ω) when focusing on quality of a non-howling sound.</p><p id="p0070" num="0070">Incidentally, the gain adjustment unit 44 performs processing for restoring a suppression amount (step S12) because a frequency characteristic continues to be degraded when howling suppression is continued. For example, the gain adjustment unit 44 controls a suppression gain, as described in Formulas 8 and 9 below. Additionally, a short time suppression amount G1(ω) and a long time suppression amount G2(ω) obtained by restoring the suppression amounts are used in step S6 and S8.</p><p id="p0071" num="0071">[Formula 8] <maths id="math0008" num="(Formula 8)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>1</mn><mfenced><mi>ω</mi></mfenced><mo>-</mo><mi>R</mi><mo>⁢</mo><mn>1</mn></math><img id="ib0008" file="imgb0008.tif" wi="87" he="12" img-content="math" img-format="tif"/></maths><br/>
[Formula 9] <maths id="math0009" num="(Formula 9)"><math display="block"><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mo>⁢</mo><mn>2</mn><mfenced><mi>ω</mi></mfenced><mo>-</mo><mi>R</mi><mo>⁢</mo><mn>2</mn></math><img id="ib0009" file="imgb0009.tif" wi="84" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0072" num="0072">Let us assume here that R1 is a value greater than R2. Consequently, the short suppression amount G1(ω) is restored in a short time, while the long time suppression amount G2(ω) is restored slowly. That is, when howling likeness is small (autocorrelation value is small), the gain is restored fast. When howling likeness is great (autocorrelation value is great), the gain is restored slowly.</p><p id="p0073" num="0073">The more detailed description will be made regarding this point. It is needed to start suppression when an autocorrelation value x(ω) is still small in order to perform suppression before howling stands out. However, if suppression has been performed since the correlation value x(ω) is still small, a non-howling sound<!-- EPO <DP n="18"> --> such as a voice is possibly suppressed by mistake. Meanwhile, since the short time suppression amount G1(ω) is restored fast in the present embodiment, a non-howling sound is prevented from being degraded by mistake suppression.</p><p id="p0074" num="0074">When howling is actually occurring, the howling is suppressed by using the long time suppression amount G2(ω) because the autocorrelation value x(ω) becomes a great value during the short time suppression. At this time, the howling is not so much outstanding in the present embodiment because the howling is suppressed by using the short time suppression amount G1(ω). Since the howling also continues to be suppressed for a long time by using the long time suppression amount G2(ω), the howling can be prevented from occurring again soon.</p><p id="p0075" num="0075">Incidentally, when howling is suppressed by using only the short time suppression amount G1(ω), quality degradation of a non-howling sound does not stand out while the howling occurs problematically again soon or is not cancelled completely. To the contrary, when howling is suppressed by using only the long time suppression amount G2(ω), the howling does not occur again for some time while a non-howling sound is problematically degraded. For these problems, suppression is performed by using a plurality of suppression amounts G1(ω) and G2(ω) having different suppression times in the present embodiment described above so that suppression is properly performed even when a non-howling sound occurs. It is also possible to prevent both sound quality from being degraded and howling from occurring again.</p><p id="p0076" num="0076">Returning to the flowchart in <figref idrefs="f0004">FIG. 4</figref>, the description of the processing will be made. The gain adjustment unit 44 multiplies an input S(ω) by the yielded final suppression amount G(ω), as described in Formula 10 below, to acquire the processed output Y(ω) (step S 14).</p><p id="p0077" num="0077">[Formula 10]<!-- EPO <DP n="19"> --> <maths id="math0010" num="(Formula 10)"><math display="block"><mi>Y</mi><mfenced><mi>ω</mi></mfenced><mo>=</mo><mi>G</mi><mfenced><mi>ω</mi></mfenced><mo>×</mo><mi>S</mi><mfenced><mi>ω</mi></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="88" he="13" img-content="math" img-format="tif"/></maths><br/>
An audio signal subjected to the howling suppression processing is output to the speaker 60.</p><p id="p0078" num="0078">The processing in step S14 is performed after the processing in step S12 above, but the order is not limited thereto. For example, the processing in step S12 and the processing in step S 14 may be performed in parallel. The processing in step S 12 may be performed after the processing in step S 14.</p><heading id="h0022">&lt;2. Second Embodiment&gt;</heading><p id="p0079" num="0079">An audio processing apparatus according to a second embodiment will be described with reference to <figref idrefs="f0005">FIG. 5. FIG. 5</figref> is a functional block diagram of the audio processing apparatus according to the second embodiment.</p><p id="p0080" num="0080">The suppression gain G(ω) of howling is multiplied in the frequency domain in the above-described first embodiment. Meanwhile, howling is suppressed in the time domain by using an FIR coefficient having a minimum phase, which will be described in detail below, in the second embodiment. Delay of an output sound, which may occur due to the block processing of the Fourier transform (see <figref idrefs="f0002">FIG. 2</figref>), can be hereby overcome.</p><p id="p0081" num="0081">Compared with the audio processing apparatus 10 according to the first embodiment, an audio processing apparatus 100 according to the second embodiment in <figref idrefs="f0005">FIG. 5</figref> has the signal processing unit 40 configured differently, and the others configured in the same way. Mainly, the configuration of the signal processing unit 140 in the audio processing apparatus 100 will therefore be described below, and the description for the other configurations will be omitted.</p><p id="p0082" num="0082">The signal processing unit 140 performs various signal processing such as gain adjustment on an audio signal (input sound) input from the A/D converter 30,<!-- EPO <DP n="20"> --> and outputs the audio signal subjected to the signal processing to the D/A converter 50. The signal processing unit 140 includes a Fourier transform unit 142, a gain adjustment unit 144, an FIR coefficient calculation unit 146, a coefficient conversion unit 148, and a convolution unit 150.</p><p id="p0083" num="0083">The Fourier transform unit 142 divides audio signals converted to the frequency domain into a plurality of bands in the same way as the first embodiment, and outputs the audio signal in each band to the gain adjustment unit 144.</p><p id="p0084" num="0084">The gain adjustment unit 144 acquires an autocorrelation value in the same way as the first embodiment, and sets a final suppression amount G(ω) in accordance with the acquired autocorrelation value. Consequently, howling can also be properly suppressed in the second embodiment even if a reflected sound or a non-howling sound occurs. The gain adjustment unit 144 can also prevent both sound quality from being degraded and howling from occurring again by combining a plurality of suppression amounts and performing suppression.</p><p id="p0085" num="0085">The FIR coefficient calculation unit 146 calculates a linear phase FIR filter coefficient for realizing the final suppression amount G(ω) input from the gain adjustment unit 144. For example, the FIR coefficient calculation unit 146 calculates the linear phase FIR filter coefficient by using the window function method, the Remez method, and the like, which have been known, as illustrated in <figref idrefs="f0006">FIG. 6</figref>. The FIR coefficient calculation unit 146 outputs the calculated linear phase FIR filter coefficient to the coefficient conversion unit 148. Naturally, the linear phase FIR filter coefficient may be calculated by using a technology other than the window function method and the Remez method. <figref idrefs="f0006">FIG. 6</figref> is a diagram for describing the linear phase FIR filter coefficient.</p><p id="p0086" num="0086">The coefficient conversion unit 148 converts the linear phase FIR filter coefficient input from the FIR coefficient calculation unit 146 to a minimum phase FIR filter coefficient. For example, as illustrated in <figref idrefs="f0007">FIG. 7</figref>, the coefficient<!-- EPO <DP n="21"> --> conversion unit 148 converts the FIR filter coefficient to the minimum phase FIR filter coefficient by using the know method such as the Remez method. The coefficient conversion unit 148 outputs the minimum phase FIR filter coefficient to the convolution unit 150. Additionally, <figref idrefs="f0007">FIG. 7</figref> is a diagram for describing the conversion of the FIR filter coefficient to the minimum phase FIR filter coefficient.</p><p id="p0087" num="0087">The convolution unit 150 convolutes the minimum phase FIR filter coefficient output from the coefficient conversion unit 148 with an input sound (input sound in the time domain) from the microphone 20. The convolution unit 150 outputs the input sound with which the minimum phase FIR filter coefficient has been convoluted to the speaker 60 via the D/A converter 50.</p><p id="p0088" num="0088">In this way, according to the second embodiment, the minimum phase FIR filter coefficient is convoluted with the input sound so that it is possible to suppress howling in the time domain by using the minimum phase FIR coefficient. As a result, it is possible to suppress howling without delay in the input sound.</p><heading id="h0023">&lt;3. Conclusion&gt;</heading><p id="p0089" num="0089">In the above-described audio processing apparatuses 10 and 100, the gain adjustment unit 44 acquires the autocorrelation value x(ω) of power of the audio signals between the frames for each band, and sets an adjustment amount of a gain in accordance with the acquired autocorrelation value x(ω). According to the configuration, if an autocorrelation of power differences of howling having periodicity is used, it is possible to appropriately detect the howling even when a reflected sound or a non-howling sound occurs. As a result, it is possible to properly suppress howling.</p><p id="p0090" num="0090">Meanwhile, the gain adjustment unit 44 adjusts, for each band, a gain by using the combined suppression amount G(ω) obtained by combining the long time suppression amount G2(ω) having a long suppression time with the short time suppression amount G1(ω) having a short suppression time. According to the<!-- EPO <DP n="22"> --> configuration, the long time suppression amount G2(ω) and the short time suppression amount G1(ω) each have a different time used in restoring the suppression amount to resolve a problem arising in performing suppression with only one suppression amount. That is, it is possible to prevent both sound quality from being degraded and howling from occurring again, which are problematic in suppressing howling.</p><p id="p0091" num="0091">The preferred embodiments of the present invention have been described above with reference to the accompanying drawings, whilst the present invention is not limited to the above examples, of course. A person skilled in the art may find various alternations and modifications within the scope of the appended claims, and it should be understood that they will naturally come under the technical scope of the present invention.</p><p id="p0092" num="0092">The audio processing apparatus includes both the microphone and the speaker in the above-described embodiments, but it is not necessarily the case. For example, the audio processing apparatus does not have to include the microphone and the speaker, and the microphone and the speaker may be provided in an external apparatus connected to the audio processing apparatus.</p><p id="p0093" num="0093">The series of processing, which have been described in the above-described embodiments, may be executed by dedicated hardware or software (application). When the series of processing are executed by software, the series of processing can be executed by causing a general-purpose or dedicated computer to execute a program.</p><p id="p0094" num="0094">The steps illustrated in the flowchart in the above-described embodiment naturally include processing that is chronologically performed in order of mention, and also include processing that is not necessarily chronologically performed, but is performed in parallel or is individually performed. Needless to say, it is possible to change the order as necessary even in the chronologically performed steps.<!-- EPO <DP n="23"> --></p><heading id="h0024">Reference Signs List</heading><p id="p0095" num="0095"><dl id="dl0001" compact="compact"><dt>10</dt><dd>Audio processing apparatus</dd><dt>20</dt><dd>Microphone</dd><dt>30</dt><dd>A/D converter</dd><dt>40</dt><dd>Signal processing unit</dd><dt>42</dt><dd>Fourier transform unit</dd><dt>44</dt><dd>Gain adjustment unit</dd><dt>46</dt><dd>Inverse Fourier transform unit</dd><dt>50</dt><dd>D/A converter</dd><dt>60</dt><dd>Speaker</dd><dt>100</dt><dd>Audio processing apparatus</dd><dt>140</dt><dd>Signal processing unit</dd><dt>142</dt><dd>Fourier transform unit</dd><dt>144</dt><dd>Gain adjustment unit</dd><dt>146</dt><dd>FIR coefficient calculation unit</dd><dt>148</dt><dd>Coefficient conversion unit</dd><dt>150</dt><dd>Convolution unit</dd></dl></p></description><claims mxw-id="PCLM56976093" lang="EN" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-en-0001" num="0001"><claim-text>An audio processing apparatus comprising:
<claim-text>a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames; and</claim-text>
<claim-text>a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain,</claim-text>
<claim-text>wherein the gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The audio processing apparatus according to claim 1, wherein the adjustment amount includes a first suppression amount having a long time for suppressing the gain, and a second suppression amount having a short time for suppressing the gain.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The audio processing apparatus according to claim 2, wherein the gain adjustment unit sets a combined suppression amount for each of the bands, the combined suppression amount being a combination of the first suppression amount and the second suppression amount.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The audio processing apparatus according to claim 3, wherein the gain adjustment unit sets the combined suppression amount obtained by increasing the first suppression amount when a maximum value of the acquired autocorrelation value is greater than a predetermined threshold value, and sets the combined suppression amount obtained by increasing the second suppression amount when the maximum value of the acquired autocorrelation value is smaller than the threshold value.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The audio processing apparatus according to claim 1, wherein the autocorrelation value of the power is an absolute value of an autocorrelation normalized based on the power.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The audio processing apparatus according to claim 1, further comprising:
<claim-text>a time domain conversion unit configured to convert the audio signal subjected to gain adjustment by the gain adjustment unit to a time domain; and</claim-text>
<claim-text>an output unit configured to output the audio signal converted to the time domain to a speaker.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The audio processing apparatus according to claim 1, further comprising:
<claim-text>a coefficient conversion unit configured to convert a filter coefficient to a minimum phase filter coefficient, the filter coefficient corresponding to the adjustment amount of the gain according to the autocorrelation value; and</claim-text>
<claim-text>a convolution unit configured to convolute the minimum phase filter coefficient with the audio signal in the time domain, the audio signal being input from the microphone.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>An audio processing apparatus comprising:
<claim-text>a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames; and</claim-text>
<claim-text>a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain,</claim-text>
<claim-text>wherein the gain adjustment unit adjusts the gain for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression amount having a short<!-- EPO <DP n="26"> --> suppression time.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>An audio processing method comprising:
<claim-text>converting an audio signal input from a microphone to a frequency domain for each of frames; and</claim-text>
<claim-text>performing gain adjustment for each of bands on the audio signal converted to the frequency domain,</claim-text>
<claim-text>wherein, in performing the gain adjustment, an autocorrelation value of power of the audio signal between the frames for each of the bands is acquired, and an adjustment amount of the gain is set in accordance with the acquired autocorrelation value.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>An audio processing method comprising:
<claim-text>converting an audio signal input from a microphone to a frequency domain for each of frames; and</claim-text>
<claim-text>performing gain adjustment for each of bands on the audio signal converted to the frequency domain,</claim-text>
<claim-text>wherein, in performing the gain adjustment, the gain is adjusted for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression amount having a short suppression time.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A program for causing a computer to function as an audio processing apparatus, the audio processing apparatus including<br/>
a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and<br/>
a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain,<br/>
<!-- EPO <DP n="27"> -->wherein the gain adjustment unit acquires an autocorrelation value of power of the audio signal between the frames for each of the bands, and sets an adjustment amount of the gain in accordance with the acquired autocorrelation value.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A program for causing a computer to function as an audio processing apparatus, the audio processing apparatus including<br/>
a frequency domain conversion unit configured to convert an audio signal input from a microphone to a frequency domain for each of frames, and<br/>
a gain adjustment unit configured to perform gain adjustment for each of bands on the audio signal converted to the frequency domain,<br/>
wherein the gain adjustment unit adjusts the gain for each of the bands with a combined suppression amount obtained by combining a first suppression amount having a long suppression time with a second suppression amount having a short suppression time.</claim-text></claim></claims><drawings mxw-id="PDW16666878" load-source="patent-office"><!-- EPO <DP n="28"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="154" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="163" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0003" num="3A,3B"><img id="if0003" file="imgf0003.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="154" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="147" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="147" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="227" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="227" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="165" he="227" type="tif"/><doc-page id="srep0004" file="srep0004.tif" wi="159" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
