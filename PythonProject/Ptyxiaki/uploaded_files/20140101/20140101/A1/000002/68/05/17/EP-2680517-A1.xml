<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680517-A1" country="EP" doc-number="2680517" kind="A1" date="20140101" family-id="46384245" file-reference-id="318307" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549171" ucid="EP-2680517-A1"><document-id><country>EP</country><doc-number>2680517</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12174103-A" is-representative="YES"><document-id mxw-id="PAPP154823094" load-source="docdb" format="epo"><country>EP</country><doc-number>12174103</doc-number><kind>A</kind><date>20120628</date><lang>EN</lang></document-id><document-id mxw-id="PAPP179671981" load-source="docdb" format="original"><country>EP</country><doc-number>12174103.7</doc-number><date>20120628</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140452436" ucid="EP-12174103-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12174103</doc-number><kind>A</kind><date>20120628</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1919313506" load-source="docdb">H04L   5/00        20060101AFI20160706BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1919314911" load-source="docdb">H04L  25/02        20060101ALI20160706BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1786199597" load-source="docdb" scheme="CPC">H04L   5/0023      20130101 LA20170710BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1786199624" load-source="docdb" scheme="CPC">H04L  25/0212      20130101 LI20170710BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1786205663" load-source="docdb" scheme="CPC">H04L  25/022       20130101 LI20170710BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036690415" load-source="docdb" scheme="CPC">H04L  25/0202      20130101 FI20150723BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036692679" load-source="docdb" scheme="CPC">H04W  24/10        20130101 LI20150723BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036694381" load-source="docdb" scheme="CPC">H04W  72/0453      20130101 LI20150723BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2036695229" load-source="docdb" scheme="CPC">H04L   5/0053      20130101 LI20150723BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179997" lang="DE" load-source="patent-office">Kanalstreuungsschätzung</invention-title><invention-title mxw-id="PT132179998" lang="EN" load-source="patent-office">Channel spread estimation</invention-title><invention-title mxw-id="PT132179999" lang="FR" load-source="patent-office">Estimation d'étalement de canal</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652004" load-source="docdb" ucid="EP-1675335-A1"><document-id format="epo"><country>EP</country><doc-number>1675335</doc-number><kind>A1</kind><date>20060628</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652005" load-source="docdb" ucid="EP-2071784-A1"><document-id format="epo"><country>EP</country><doc-number>2071784</doc-number><kind>A1</kind><date>20090617</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>ERICSSON ET AL: "Discussion on quasi co-located antennas", 3GPP DRAFT; R4-122702COLOCATEDERICSSON, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX ; FRANCE, vol. RAN WG4, no. Prague, Czech Republic; 20120521 - 20120525, 14 May 2012 (2012-05-14), XP050614453</text><sources><source mxw-id="PNPL62473375" load-source="docdb" name="SEA" category="Y"/></sources></nplcit><nplcit><text>TEVFIK YUCEK ET AL: "Time Dispersion and Delay Spread Estimation for Adaptive OFDM Systems", IEEE TRANSACTIONS ON VEHICULAR TECHNOLOGY, IEEE SERVICE CENTER, PISCATAWAY, NJ, US, vol. 57, no. 3, 1 May 2008 (2008-05-01), pages 1715 - 1722, XP011201868, ISSN: 0018-9545</text><sources><source mxw-id="PNPL62473376" load-source="docdb" name="SEA" category="Y"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918155376" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ERICSSON TELEFON AB L M</last-name><address><country>SE</country></address></addressbook></applicant><applicant mxw-id="PPAR918157797" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TELEFONAKTIEBOLAGET L M ERICSSON (PUBL)</last-name></addressbook></applicant><applicant mxw-id="PPAR918985406" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Telefonaktiebolaget L M Ericsson (publ)</last-name><iid>101299908</iid><address><city>164 83 Stockholm</city><country>SE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918164418" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>NILSSON THOMAS</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918156112" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>NILSSON, THOMAS</last-name></addressbook></inventor><inventor mxw-id="PPAR918984836" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>NILSSON, THOMAS</last-name><address><street>Södra Förstadsgatan 95 D</street><city>SE-214 20 Malmö</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918162730" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>ANDGART NIKLAS</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918138409" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>ANDGART, NIKLAS</last-name></addressbook></inventor><inventor mxw-id="PPAR918979740" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>ANDGART, NIKLAS</last-name><address><street>Femmötesvägen 48</street><city>SE-247 33 Södra Sandby</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918152958" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>NORDSTROEM FREDRIK</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918169353" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>NORDSTROEM, FREDRIK</last-name></addressbook></inventor><inventor mxw-id="PPAR918994102" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Nordström, Fredrik</last-name><address><street>Lilla Tvärgatan 16A</street><city>SE-223 53 Lund</city><country>SE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918992365" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Kransell &amp; Wennborg KB</last-name><iid>101410948</iid><address><street>P.O. Box 27834</street><city>115 93 Stockholm</city><country>SE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548852757" load-source="docdb">AL</country><country mxw-id="DS548853537" load-source="docdb">AT</country><country mxw-id="DS548852758" load-source="docdb">BE</country><country mxw-id="DS548847839" load-source="docdb">BG</country><country mxw-id="DS548837200" load-source="docdb">CH</country><country mxw-id="DS548852759" load-source="docdb">CY</country><country mxw-id="DS548867488" load-source="docdb">CZ</country><country mxw-id="DS548801675" load-source="docdb">DE</country><country mxw-id="DS548852760" load-source="docdb">DK</country><country mxw-id="DS548852761" load-source="docdb">EE</country><country mxw-id="DS548802892" load-source="docdb">ES</country><country mxw-id="DS548847840" load-source="docdb">FI</country><country mxw-id="DS548847841" load-source="docdb">FR</country><country mxw-id="DS548801676" load-source="docdb">GB</country><country mxw-id="DS548852762" load-source="docdb">GR</country><country mxw-id="DS548801677" load-source="docdb">HR</country><country mxw-id="DS548867489" load-source="docdb">HU</country><country mxw-id="DS548837201" load-source="docdb">IE</country><country mxw-id="DS548852763" load-source="docdb">IS</country><country mxw-id="DS548847842" load-source="docdb">IT</country><country mxw-id="DS548852764" load-source="docdb">LI</country><country mxw-id="DS548801678" load-source="docdb">LT</country><country mxw-id="DS548853542" load-source="docdb">LU</country><country mxw-id="DS548847843" load-source="docdb">LV</country><country mxw-id="DS548801679" load-source="docdb">MC</country><country mxw-id="DS548853543" load-source="docdb">MK</country><country mxw-id="DS548853544" load-source="docdb">MT</country><country mxw-id="DS548802893" load-source="docdb">NL</country><country mxw-id="DS548847876" load-source="docdb">NO</country><country mxw-id="DS548802894" load-source="docdb">PL</country><country mxw-id="DS548847844" load-source="docdb">PT</country><country mxw-id="DS548867490" load-source="docdb">RO</country><country mxw-id="DS548847845" load-source="docdb">RS</country><country mxw-id="DS548802895" load-source="docdb">SE</country><country mxw-id="DS548837202" load-source="docdb">SI</country><country mxw-id="DS548847877" load-source="docdb">SK</country><country mxw-id="DS548847878" load-source="docdb">SM</country><country mxw-id="DS548853545" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669841" lang="EN" load-source="patent-office"><p id="pa01" num="0001">There is provided a method of estimating channel spread at a receiver of a user equipment, UE, for one antenna port of a network node. The method is performed in the UE. The method comprises acquiring channel estimates for one antenna port of a network node. The method further comprises determining a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE. The method further comprises estimating the channel spread by using a pre-determined mapping from the determined variation to a channel spread value. A user equipment and a computer program are also provided
<img id="iaf01" file="imgaf001.tif" wi="78" he="113" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499214" lang="EN" source="EPO" load-source="docdb"><p>There is provided a method of estimating channel spread at a receiver of a user equipment, UE, for one antenna port of a network node. The method is performed in the UE. The method comprises acquiring channel estimates for one antenna port of a network node. The method further comprises determining a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE. The method further comprises estimating the channel spread by using a pre-determined mapping from the determined variation to a channel spread value. A user equipment and a computer program are also provided</p></abstract><description mxw-id="PDES63955271" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">Embodiments presented herein relate to channel spread estimation, and particularly to a method, a user equipment and a computer program for estimation of channel spread at the user equipment in a mobile communication network.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">In mobile communication networks, there is always a challenge to obtain good performance and capacity for a given communications protocol, its parameters and the physical environment in which the mobile communication network is deployed.</p><p id="p0003" num="0003">The evolution of the Universal Mobile Telecommunications Standard Long Term Evolution (UMTS LTE) for mobile communications continues with new features to increase the overall capacity and to increase the general performance of the communications network. Coordinated Multi-point transmission/reception (CoMP) is one concept that was first introduced in Release 10 of LTE. In CoMP, UEs (user equipment, which in LTE is the terminology for the mobile communication terminals) can receive coordinated data transmissions from multiple sectors or cells.</p><p id="p0004" num="0004">In CoMP scenarios, it may be advantageous to map transmitter (TX) antenna ports of the network node to geographically separated antennas at different transmission points (TPs) within a cell of the base. Commonly there may be in the order of 1 to 8 antenna ports. The antenna ports are then geographically non-co-located, meaning that each antenna port may have different channel properties, like delay spread, Doppler spread, signal-to-noise ratio (SNR) and frequency offset.</p><p id="p0005" num="0005">A UE may thus face new challenges when receiving data transmissions from non-co-located antenna ports. In principle, the UE cannot assume antenna<!-- EPO <DP n="2"> --> ports to be co-located and should hence estimate the channel properties separately for each antenna port.</p><p id="p0006" num="0006">Existing solutions to estimate the channel properties, e.g. the delay spread, are mainly based on the Cell Reference Symbols (CRS) and use a large number of samples (channel estimates) in time and frequency to give reliable estimates of the channel properties. Averaging over CRS ports may then be used to further improve the estimates.</p><p id="p0007" num="0007">However, there is still a need for an improved estimation of channel properties.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0008" num="0008">An object of embodiments herein is to provide estimation of channel spread, e.g. delay spread and/or Doppler spread, at a user equipment.</p><p id="p0009" num="0009">The inventors of the enclosed embodiments have through a combination of practical experimentation and theoretical derivation discovered that one problem with non-co-located antenna ports is that a very limited number of channel estimates will be available for estimating the channel properties for each antenna port. This may severely influence the quality of the estimates at the corresponding receiver.</p><p id="p0010" num="0010">Existing solutions like zero or level crossing algorithms, for example as disclosed in <patcit id="pcit0001" dnum="EP2071784A"><text>EP2071784</text></patcit> or <patcit id="pcit0002" dnum="EP1675335A"><text>EP1675335</text></patcit>, require a large number of channel estimates to give a reliable estimate of the delay spread. These algorithms are also very sensitive to noise. Alternative solutions based on computing the RMS delay spread from the Channel Impulse Response (CIR) require a large number of channel estimates in the frequency domain to get a reliable CIR in the time domain. These methods make use of the computationally costly inverse FFT (Fast Fourier Transform). Filtering of the CIR in the time domain may be used to further improve the estimates. Previous methods are not considered efficient and/or reliable enough when it comes to situations with a very limited number of channel estimates.<!-- EPO <DP n="3"> --></p><p id="p0011" num="0011">A particular object is therefore to provide estimation of channel spread at a receiver of the UE for one transmitting antenna port.</p><p id="p0012" num="0012">According to a first aspect there is presented a method of estimating channel spread at a receiver of a user equipment, UE, for one antenna port of a network node. The method is performed in the UE. The method comprises acquiring channel estimates for one antenna port of a network node. The method further comprises determining a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE. The method further comprises estimating the channel spread by using a pre-determined mapping from the determined variation to a channel spread value.</p><p id="p0013" num="0013">Advantageously the method produces reliable estimates of the channel spread with a very limited number of channel estimates. The performance of the method is similar to legacy methods that require a larger number of channel estimates and more computational complexity, e.g. the use of the inverse FFT.</p><p id="p0014" num="0014">According to embodiments the channel spread is delay spread. The variation of channel estimates may then be determined as variation over frequency of the channel estimates.</p><p id="p0015" num="0015">The variation of channel estimates is associated with one or more frequency bands. Each frequency band may be associated with a range of subcarriers.</p><p id="p0016" num="0016">According to embodiments the channel spread is Doppler spread. The variation of channel estimates may then be determined as variation over time of the channel estimates.</p><p id="p0017" num="0017">The variation may be determined from at least two channel estimate variations. Both the at least two channel estimate variations are associated with the subframes.<!-- EPO <DP n="4"> --></p><p id="p0018" num="0018">The channel estimate variations may be filtered to obtain an average variation. The determined variation may thus be an average of the at least two channel estimate variations.</p><p id="p0019" num="0019">The mapping may be a function of signal to noise and interference ratio (SNR) at the receiver for the transmitting antenna port. The signal to noise and interference ratio may be determined from the acquired channel estimates. The SNR estimation (and compensation) may advantageously be performed to determine how much of the observed variation that is due to noise and not due to channel spread. The SNR compensation is thus advantageously made when completing the mapping to avoid bias (e.g., due to noise that is interpreted in the receiver as frequency selectivity) in the channel spread estimation.</p><p id="p0020" num="0020">The channel estimates may be part of one precoding resource block group, PRG. The variation determination considers only those parts of the channel estimates which represent pilot symbols. In some embodiments, the pilot symbols are demodulation reference symbols, DM-RS.</p><p id="p0021" num="0021">The variation may be determined from at least one second order statistics determination of the channel estimates.</p><p id="p0022" num="0022">According to a second aspect there is presented a user equipment, UE, for estimating channel spread at a receiver of the UE for one antenna port of a network node. The UE comprises a processing unit arranged to acquire channel estimates for one antenna port of a network node. The processing unit is further arranged to determine a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE. The processing unit is further arranged to estimate the channel spread by using a pre-determined mapping from the determined variation to a channel spread value.</p><p id="p0023" num="0023">According to a third aspect there is presented a computer program of estimating channel spread at a receiver of a user equipment, UE, for one<!-- EPO <DP n="5"> --> antenna port of a network node, the computer program comprising computer program code which, when run on a UE, causes the UE to perform a method according to the first aspect.</p><p id="p0024" num="0024">According to a fourth aspect there is presented a computer program product comprising a computer program according to the third aspect and a computer readable means on which the computer program is stored.</p><p id="p0025" num="0025">It is to be noted that any feature of the first, second, third and fourth aspects may be applied to any other aspect, wherever appropriate. Likewise, any advantage of the first aspect may equally apply to the second, third, and/or fourth aspect, respectively, and vice versa. Other objectives, features and advantages of the enclosed embodiments will be apparent from the following detailed disclosure, from the attached dependent claims as well as from the drawings.</p><p id="p0026" num="0026">Generally, all terms used in the claims are to be interpreted according to their ordinary meaning in the technical field, unless explicitly defined otherwise herein. All references to "a/an/the element, apparatus, component, means, step, etc." are to be interpreted openly as referring to at least one instance of the element, apparatus, component, means, step, etc., unless explicitly stated otherwise. The steps of any method disclosed herein do not have to be performed in the exact order disclosed, unless explicitly stated.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0027" num="0027">The invention is now described, by way of example, with reference to the accompanying drawings, in which:
<ul><li><figref idrefs="f0001">Fig 1</figref> is a schematic diagram illustrating a mobile communication network where embodiments presented herein may be applied;</li><li><figref idrefs="f0001">Fig 2</figref> is a schematic diagram showing functional modules of a user equipment;<!-- EPO <DP n="6"> --></li><li><figref idrefs="f0002">Fig 3</figref> shows one example of a computer program product comprising computer readable means;</li><li><figref idrefs="f0002">Fig 4</figref> is a flowchart of a method according to embodiments;</li><li><figref idrefs="f0003">Fig 5</figref> illustrates a time-frequency grid representing a downlink physical resource;</li><li><figref idrefs="f0004">Fig 6</figref> illustrates a relationship between channel estimation variation and delay spread; and</li><li><figref idrefs="f0005">Fig 7</figref> illustrates normalized throughput.</li></ul></p><heading id="h0005"><b>DETAILED DESCRIPTION</b></heading><p id="p0028" num="0028">The invention will now be described more fully hereinafter with reference to the accompanying drawings, in which certain embodiments of the invention are shown. This invention may, however, be embodied in many different forms and should not be construed as limited to the embodiments set forth herein; rather, these embodiments are provided by way of example so that this disclosure will be thorough and complete, and will fully convey the scope of the invention to those skilled in the art. Like numbers refer to like elements throughout the description.</p><p id="p0029" num="0029"><figref idrefs="f0001">Fig 1</figref> is a schematic diagram illustrating a mobile communication network 1 where embodiments presented herein can be applied. The mobile communications network comprises a network node 2 and a user equipment (UE) 4. Generally, the network node 2 provides radio connectivity to a plurality of UE 4. The term UE is also known as mobile communication terminal, mobile terminal, user terminal, user agent, or other wireless device etc. The communication between the UE 4 and the network node 2 occurs over a wireless radio interface.</p><p id="p0030" num="0030">The mobile communication network 1 may generally comply with the LTE standard. The mobile communication network 1 is the evolved UMTS Terrestrial Radio Access Network (E-UTRA) in one embodiment. Typically<!-- EPO <DP n="7"> --> the E-UTRA network consists only of network nodes 2 in the form of eNBs (E-UTRAN NodeB, also known as Evolved NodeB) on the network side. The eNB is the hardware that is connected to the core network 5 and that communicates directly with the UE 4. Several eNBs may typically connected to each other via the so-called X2 interface, and they connect to the packet switched (PS) core network 5 via the so-called S1 interface (as illustrated by reference numeral 7). The network node 2 generally comprises a number of antenna ports K associated via a precoder with a number K of antenna elements 3a, 3b, 3K (thus one antenna port corresponds to one or more antenna elements via a mapping. One port can further be a linear combination of one or more antenna elements).</p><p id="p0031" num="0031">LTE uses orthogonal frequency-division multiplexing (OFDM) for the downlink transmission (i.e. from network node to UE) and DFT-spread OFDM for the uplink transmission (i.e. from UE to network node). The basic LTE downlink physical resource can thus be seen as a time-frequency grid as illustrated in <figref idrefs="f0003">Fig 5</figref> where each resource element corresponds to one OFDM subcarrier during one OFDM symbol interval.</p><p id="p0032" num="0032">In the time domain, LTE downlink transmissions are organized into radio frames of 10 ms, each radio frame comprising ten equally-sized subframes of length T = 1 ms.</p><p id="p0033" num="0033">Furthermore, the resource allocation in LTE is typically described in terms of resource blocks (RB), where a resource block corresponds to one slot (0.5 ms) in the time domain and 12 contiguous subcarriers sc1-sc12 in the frequency domain. <figref idrefs="f0003">Fig 5</figref> illustrates at reference numeral 24 two resource blocks in the frequency dimension and two resource blocks in the time dimension for one subframe. A pair of two adjacent resource blocks in time direction (1.0 ms) is known as a resource block pair.</p><p id="p0034" num="0034">A resource block pair comprising two Physical Resource Blocks (PRB), where each PRB typically comprises 12 subcarriers and lasts for one slot (0.5 msec) is the smallest unit of resources that can be allocated to a UE. In<!-- EPO <DP n="8"> --></p><p id="p0035" num="0035">Transmission mode 9 of LTE, Precoding Resource Block Group (PRG) defines a set of PRBs where the same precoder is used. The frequency size of the PRG ranges from 1-3 depending on the system bandwidth, see 3GPP TS 36.213 V10.4.0.</p><p id="p0036" num="0036">Different precoders may be used by the network node for each PRG allocated to a UE. This implies that the delay spread might be different for neighboring PRGs. Furthermore, neighboring PRGs can be transmitted from non-co-located antennas resulting in different delay spreads. The transmission point in time may also change between PRGs. The UEs should under these circumstances advantageously estimate the delay spread independently for each PRG.</p><p id="p0037" num="0037">Downlink transmissions are dynamically scheduled, i.e., in each subframe the network node transmits control information about to which terminals data is transmitted and upon which resource blocks the data is transmitted, in the current downlink subframe. This control signalling is typically transmitted in the first 1, 2, 3 or 4 OFDM symbols in each subframe and is known as the Control Format Indicator (CFI). The downlink subframe also contains common reference signals (CRS), which are known to the receiver (i.e. the UE) and used for coherent demodulation of e.g. the control information.</p><p id="p0038" num="0038">Different Reference Signals (RS) may be used for estimating the channel properties, like the Cell-specific RS (CRS), the Demodulation RS (DM-RS) and the Channel State Information RS (CSI-RS). Each RS is mapped to a TX antenna port.</p><p id="p0039" num="0039">The CRS are transmitted in every downlink resource block and cover the entire cell bandwidth. The CRS can be used for coherent demodulation of all downlink physical channels except for the PMCH (Physical Multicast Channel) and for the PDSCH (Physical Downlink Shared Channel) in case of transmission mode 7, 8 and 9. DM-RS are UE specific reference signals intended to be used for channel estimation for PDSCH in transmission mode 7, 8 and 9. The DM-RS are typically only transmitted within the resource<!-- EPO <DP n="9"> --> blocks assigned to the specific UE. In the illustration of <figref idrefs="f0003">Fig 5</figref> DM-RS resource element pairs H(f, t) (the hatched elements) are associated with subcarriers sc2, sc7 and sc12 in each resource block.</p><p id="p0040" num="0040">In a typical scenario, the CRS may be transmitted from a TP of a macro cell while the DM-RS are transmitted from a TP of one or several micro or pico cells. Each DM-RS port may then be regarded as non-co-located.</p><p id="p0041" num="0041">The embodiments disclosed herein relate to estimation of channel spread at a receiver of the UE for one antenna port at a network node. In order to obtain estimation of channel spread for one antenna port at a receiver of the UE there is provided a method performed in the UE, a computer program comprising code, for example in the form of a computer program product, that when run on a UE, causes the UE to perform the method.</p><p id="p0042" num="0042"><figref idrefs="f0001">Fig 2</figref> schematically illustrates, in terms of a number of functional modules, the components of a UE 4. A processing unit 6 is provided using any combination of one or more of a suitable central processing unit (CPU), multiprocessor, microcontroller, digital signal processor (DSP), application specific integrated circuit (ASIC) etc., capable of executing software instructions stored in a computer program product 18 (as in <figref idrefs="f0002">Fig 3</figref>), e.g. in the form of a memory 16. Thus the processing unit 6 is thereby arranged to execute methods as herein disclosed. The memory 16 may also comprise persistent storage, which, for example, can be any single one or combination of magnetic memory, optical memory, solid state memory or even remotely mounted memory. The UE 4 may further comprise an input/output (I/O) interface 18 for receiving and providing information to a user interface. The UE 4 also comprises one or more transmitters 12 and receivers 10, comprising analogue and digital components forming the functionalities of a transmitter and a receiver, and a suitable number of antennae 14 for radio communication with the network node 2. The processing unit 6 controls the general operation of the UE 4, e.g. by sending control signals to the transmitter 12 and/or receiver 10 and receiving reports from the transmitter 12 and/or receiver 10 of its operation. Other components, as well as the<!-- EPO <DP n="10"> --> related functionality, of the network UE 4 are omitted in order not to obscure the concepts presented herein.</p><p id="p0043" num="0043"><figref idrefs="f0002">Fig 4</figref> is flow chart illustrating embodiments of methods of estimating channel spread at a receiver 10 of a UE 4 for one antenna port 3a, 3b, 3K at a network node 2. The methods are performed in the UE 4. The methods are advantageously provided as computer programs 20. <figref idrefs="f0002">Fig 3</figref> shows one example of a computer program product 18 comprising computer readable means 22. On this computer readable means 22, a computer program 20 can be stored, which computer program 20 can cause the processing unit 6 and thereto operatively coupled entities and devices, such as the memory 16, the I/O interface 8, the transmitter 12, the receiver 10 and/or the antennae 14 to execute methods according to embodiments described herein. In the example of <figref idrefs="f0002">Fig 3</figref>, the computer program product 18 is illustrated as an optical disc, such as a CD (compact disc) or a DVD (digital versatile disc) or a Blu-Ray disc. The computer program product could also be embodied as a memory (RAM, ROM, EPROM, EEPROM) and more particularly as a non-volatile storage medium of a device in an external memory such as a USB (Universal Serial Bus) memory. Thus, while the computer program 20 is here schematically shown as a track on the depicted optical disk, the computer program 20 can be stored in any way which is suitable for the computer program product 18.</p><p id="p0044" num="0044">The enclosed embodiments are based on determining an estimate of the delay spread by using the limited number of channel estimates found in one PRG. In brief, the estimation may be accomplished by determining the variation of the channel estimates in the frequency direction for a number of slots containing pilots in the frequency direction. An average may then be determined based on two or more samples of the variation. A mapping table (e g. a look-up table) or mapping function may then be used to map the determined variation to specific values of the delay spread in dependence of a SNR value.<!-- EPO <DP n="11"> --></p><p id="p0045" num="0045">Returning now to <figref idrefs="f0002">Fig. 4</figref>, during a step S2 channel estimates H for one antenna port of the network node 2 (such as an eNB) is acquired. The channel estimates H are acquired by the processing unit 6 of the UE 4. Let H(p,f,t) denote the channel estimate for antenna port p of the network node 2, subcarrier f and symbol t. The channel estimates are part of one precoding resource block. group, PRG.</p><p id="p0046" num="0046">In a step S4 a variation of acquired channel estimates representing a limited number of subframes is determined. The variation is determined by the processing unit 6 of the UE 4. The limited number of subframes may be defined as subframes being associated with a common precoder. According to another embodiment the precoder is defined by a unity matrix, reflecting a case when a precoder is not used. The subframes generally comprise resource blocks scheduled to the UE.</p><p id="p0047" num="0047">According to one embodiment the variation is determined from at least two channel estimate variations. Both the at least two channel estimate variations may be associated with the subframes. The variation for antenna port p (for the example assumption that f and t only span the pilot positions within the PRB Group) may be determined, for example, from an average of the at least two channel estimate variations. The variation determination thus considers only those parts of the channel estimates which represent pilot symbols. In general terms the channel estimates are based on pilots or other known signals, or even generated from the data transmission. The pilot symbols are demodulation reference symbols, DM-RS, in some embodiments.</p><p id="p0048" num="0048">Firstly, consider a case where the channel spread represents delay spread. The variation may then be determined as variation over frequency of the channel estimates. The variation may be associated with one or more frequency bands, each frequency band being associated with a range of subcarriers (in <figref idrefs="f0003">Fig 5</figref>: sc2, sc7, sc12). The range of subcarriers may be associated with a resource block, RB.<!-- EPO <DP n="12"> --></p><p id="p0049" num="0049">In general terms the variation used to determine the channel spread for antenna port p may be determined from at least one second order statistics determination of the channel estimates. The second order statistics may for example be represented by a standard deviation or a variance function.</p><p id="p0050" num="0050">According to a first example the variation is determined from a standard deviation determination of the channel estimates. Thus, in pseudo-code: <maths id="math0001" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>=</mo><mi>sdev</mi><mfenced><mfenced open="{" close="}" separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">M</mi></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">N</mi><mo>,</mo></math><img id="ib0001" file="imgb0001.tif" wi="109" he="13" img-content="math" img-format="tif"/></maths><br/>
where 'sdev' denotes the standard deviation operator, where M is the largest subcarrier within the PRB group that contains pilots and where N is the last symbol within the PRB Group that contains pilots.</p><p id="p0051" num="0051">According to a second example the variation is determined from a standard deviation determination of the matrix product of H and H*. Thus, in pseudo-code: <maths id="math0002" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>=</mo><mi>sdev</mi><mo>⁢</mo><mfenced><mfenced open="{" close="}" separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced><mspace width="1em"/><mi>H</mi><mo>⁢</mo><mfenced separators=""><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">f</mi><mo>+</mo><mn>1</mn><mo>,</mo><mi mathvariant="normal">t</mi></mfenced><mo>*</mo><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">M</mi><mo>-</mo><mn>1</mn></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">N</mi><mn>.</mn></math><img id="ib0002" file="imgb0002.tif" wi="134" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0052" num="0052">According to a third example the variation is determined from a standard deviation determination of the absolute value, 'abs', of a higher order moment k of the channel estimates. Thus, in pseudo-code: <maths id="math0003" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>=</mo><mi>sdev</mi><mfenced><mfenced open="{" close="}" separators=""><mi>abs</mi><mo>⁢</mo><msup><mfenced separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced></mfenced><mi mathvariant="normal">k</mi></msup><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">M</mi></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">N</mi><mn>.</mn></math><img id="ib0003" file="imgb0003.tif" wi="120" he="15" img-content="math" img-format="tif"/></maths></p><p id="p0053" num="0053">According to a fourth example the variation is determined from a standard deviation determination of the argument or phase, 'arg', of the channel estimates. Thus, in pseudo-code: <maths id="math0004" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>=</mo><mi>sdev</mi><mfenced><mfenced open="{" close="}" separators=""><mi>arg</mi><mfenced separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">M</mi></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">N</mi><mn>.</mn></math><img id="ib0004" file="imgb0004.tif" wi="119" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0054" num="0054">The two or more estimates S<sub>p,t</sub> may then be filtered to determine an averaged estimation S<sub>p</sub>.</p><p id="p0055" num="0055">According to a first example the averaged estimation S<sub>p</sub> is determined by averaging S<sub>p,t</sub> over time. Thus, in pseudo-code:<!-- EPO <DP n="13"> --> <maths id="math0005" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><mi>mean</mi><mfenced><mfenced open="{" close="}" separators=""><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">N</mi></mfenced></mfenced><mo>,</mo></math><img id="ib0005" file="imgb0005.tif" wi="67" he="14" img-content="math" img-format="tif"/></maths><br/>
where 'mean' denotes the mean value operator.</p><p id="p0056" num="0056">According to a second example the averaged estimation S<sub>p</sub> is determined by determining a weighted sum of S<sub>p,t</sub> over time. Thus, in pseudo-code: <maths id="math0006" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><mi>sum</mi><mfenced><mfenced open="{" close="}" separators=""><msub><mi mathvariant="normal">c</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>⋅</mo><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">t</mi></mrow></msub><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">N</mi></mfenced></mfenced><mo>,</mo></math><img id="ib0006" file="imgb0006.tif" wi="81" he="13" img-content="math" img-format="tif"/></maths><br/>
where c<sub>p,t</sub> denotes general weights for antenna port p at time t. Generally, all c<sub>p,t</sub> &gt;0 and all c<sub>p,t</sub> sum up to 1.</p><p id="p0057" num="0057">Secondly, consider a case where the channel spread represents Doppler spread. In general terms, Doppler spread is a property describing how much the channel phases varies over time, and is directly dependent on the speed at which the UE 4 is moving. The Doppler spread affects e.g. how much filtering that can be performed in the time direction. The variation may then be determined as variation over time of the channel estimates.</p><p id="p0058" num="0058">In general terms, similar to the variation used to determine the delay spread, the variation used to determine the Doppler spread may be determined from at least one second order statistics determination of the channel estimates.</p><p id="p0059" num="0059">Estimation of the Doppler spread may generally be obtained in similar ways as the estimation of the delay spread. Estimation of the Doppler spread may for example be obtained by determining the variation in the time direction instead of in the frequency direction (as above).</p><p id="p0060" num="0060">Thus, in comparison to the above first example, the variation is determined from a standard deviation determination of the channel estimates. Thus, in pseudo-code: <maths id="math0007" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">f</mi></mrow></msub><mo>=</mo><mi>sdev</mi><mfenced><mfenced open="{" close="}" separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">N</mi></mfenced></mfenced><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">M</mi><mn>.</mn></math><img id="ib0007" file="imgb0007.tif" wi="111" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0061" num="0061">The variation may likewise be determined in accordance with the above disclosed second, third, or fourth examples.<!-- EPO <DP n="14"> --></p><p id="p0062" num="0062">The two or more estimates S<sub>p,f</sub> may then be filtered to determine an averaged estimation S<sub>p</sub>. Thus, in pseudo-code: <maths id="math0008" num=""><math display="block"><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><mi>mean</mi><mfenced><mfenced open="{" close="}" separators=""><msub><mi mathvariant="normal">S</mi><mrow><mi mathvariant="normal">p</mi><mo>,</mo><mi mathvariant="normal">f</mi></mrow></msub><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">2</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">M</mi></mfenced></mfenced><mn>.</mn></math><img id="ib0008" file="imgb0008.tif" wi="68" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0063" num="0063">The estimation S<sub>p</sub> may also be determined from a weighted sum of S<sub>p,f</sub> over frequency.</p><p id="p0064" num="0064">In a step S6 the channel spread is estimated by using a pre-determined mapping from the determined variation to a channel spread value. The channel spread value thus represents either a delay spread T<sub>p</sub> or a Doppler spread f<sub>p</sub>. The channel spread is estimated by the processing unit 6 of the UE 4.</p><p id="p0065" num="0065">Thus, to obtain an estimate of the delay spread T<sub>p</sub> a mapping table or a mapping function is used. As an example the mapping may be performing a table look-up operation based on S<sub>p</sub> (for the delay spread). Thus, in pseudo-code: <maths id="math0009" num=""><math display="block"><msub><mi mathvariant="normal">T</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><msub><mi>lookup</mi><mi>Tp</mi></msub><mfenced><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub></mfenced><mn mathvariant="normal">.</mn></math><img id="ib0009" file="imgb0009.tif" wi="44" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0066" num="0066">Likewise, to obtain an estimate of the Doppler spread f<sub>p</sub> a table look-up operation based on S<sub>p</sub> (for the Doppler spread) is performed. Thus, in pseudo-code: <maths id="math0010" num=""><math display="block"><msub><mi mathvariant="normal">f</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><msub><mi>lookup</mi><mi>fp</mi></msub><mfenced><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub></mfenced><mn mathvariant="normal">.</mn></math><img id="ib0010" file="imgb0010.tif" wi="54" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0067" num="0067">A mapping table or a mapping function is used for the mapping. The mapping table or mapping function describes the relationship between the variation and the channel spread. In particular there may be one mapping table from the variation to the delay spread and another mapping table from the variation to the Doppler spread. An illustration of the relationship between the variation and the delay spread is illustrated in <figref idrefs="f0004">Fig 6</figref>.</p><p id="p0068" num="0068">The mapping may be pre-calculated and stored, for example as one or more mapping tables in the memory 16. The mapping can also be implemented by<!-- EPO <DP n="15"> --> a suitable mapping function, e.g., with a polynomial approximation. The values of the mapping may be generated in multiple ways. Computer simulations can be used to determine the values of the mapping, for example by estimating the variation in simulation scenarios with known signal-to-noise ratios and delay spread (or Doppler spread). Controlled field tests with known propagation condition can also be used to derive the values of the mapping.</p><p id="p0069" num="0069">As foreshadowed above the mapping is, according to an embodiment, a function of signal to noise and interference ratio γ<sub>p</sub> at the receiver for the antenna port p. In an embodiment, the signal to noise and interference ratio is determined from the acquired channel estimates.</p><p id="p0070" num="0070">The SNR can be obtained in a number of different ways. For example the SNR can be estimated by first determining <maths id="math0011" num=""><math display="block"><msub><mi mathvariant="normal">H</mi><mi>avg</mi></msub><mfenced><mi mathvariant="normal">p</mi></mfenced><mo>=</mo><mi>sum</mi><mfenced separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">N</mi><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">M</mi></mfenced><mo>/</mo><mfenced separators=""><mi mathvariant="normal">M</mi><mo>*</mo><mi mathvariant="normal">N</mi></mfenced><mo>,</mo></math><img id="ib0011" file="imgb0011.tif" wi="98" he="14" img-content="math" img-format="tif"/></maths><br/>
where H<sub>avg</sub>(p) is the average of the channel estimate H, and then determining <maths id="math0012" num=""><math display="block"><msup><mi mathvariant="normal">σ</mi><mn mathvariant="normal">2</mn></msup><mfenced><mi mathvariant="normal">p</mi></mfenced><mo>=</mo><mi>sum</mi><mo>⁢</mo><mfenced separators=""><mi>abs</mi><mo>⁢</mo><mfenced separators=""><mi mathvariant="normal">H</mi><mfenced separators=""><mi mathvariant="normal">p</mi><mo>⁢</mo><mi mathvariant="normal">f</mi><mo>⁢</mo><mi mathvariant="normal">t</mi></mfenced><mo>-</mo><msub><mi mathvariant="normal">H</mi><mi>avg</mi></msub><mfenced><mi mathvariant="normal">p</mi></mfenced></mfenced><mo>⁢</mo><mn mathvariant="normal">2</mn><mo>,</mo><mi mathvariant="normal">t</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mn mathvariant="normal">..</mn><mo>,</mo><mi mathvariant="normal">N</mi><mo>,</mo><mi mathvariant="normal">f</mi><mo>=</mo><mn mathvariant="normal">1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi mathvariant="normal">M</mi></mfenced><mo>/</mo><mfenced separators=""><mi mathvariant="normal">M</mi><mo>*</mo><mi mathvariant="normal">N</mi></mfenced><mo>,</mo></math><img id="ib0012" file="imgb0012.tif" wi="121" he="15" img-content="math" img-format="tif"/></maths><br/>
where σ<sup>2</sup>(p) is the variance of the of the channel estimate H.</p><p id="p0071" num="0071">The SNR parameter γ<sub>p</sub> can then be approximated by the estimate SNR<sub>est</sub> where: <maths id="math0013" num=""><math display="block"><msub><mi>SNR</mi><mi>est</mi></msub><mo>=</mo><mi>abs</mi><mo>⁢</mo><msup><mfenced separators=""><msub><mi mathvariant="normal">H</mi><mi>avg</mi></msub><mfenced><mi mathvariant="normal">p</mi></mfenced></mfenced><mn mathvariant="normal">2</mn></msup><mo>/</mo><msup><mi mathvariant="normal">σ</mi><mn mathvariant="normal">2</mn></msup><mfenced><mi mathvariant="normal">p</mi></mfenced><mn mathvariant="normal">.</mn></math><img id="ib0013" file="imgb0013.tif" wi="63" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0072" num="0072">Other examples to obtain the SNR include for example to use the CRS based channel estimates and the residuals from the same. Another alternative can be to use the DMRS based channel estimates from one or more previous subframes and their residuals.</p><p id="p0073" num="0073">To obtain an estimate of the delay spread T<sub>p</sub> a table look-up operation based on Sp (for the delay spread) and γ<sub>p</sub> may then be performed. Thus, in pseudo-code:<!-- EPO <DP n="16"> --> <maths id="math0014" num=""><math display="block"><msub><mi mathvariant="normal">T</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><msub><mi>lookup</mi><mi>Tp</mi></msub><mfenced separators=""><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub><mo>⁢</mo><msub><mi mathvariant="normal">γ</mi><mi mathvariant="normal">p</mi></msub></mfenced><mn mathvariant="normal">.</mn></math><img id="ib0014" file="imgb0014.tif" wi="58" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0074" num="0074">Likewise, to obtain an estimate of the Doppler spread f<sub>p</sub> a table look-up operation based on S<sub>p</sub> (for the Doppler spread) and γ<sub>p</sub> may then be. Thus, in pseudo-code: <maths id="math0015" num=""><math display="block"><msub><mi mathvariant="normal">f</mi><mi mathvariant="normal">p</mi></msub><mo>=</mo><msub><mi>lookup</mi><mi>fp</mi></msub><mfenced separators=""><msub><mi mathvariant="normal">S</mi><mi mathvariant="normal">p</mi></msub><mo>⁢</mo><msub><mi mathvariant="normal">γ</mi><mi mathvariant="normal">p</mi></msub></mfenced><mn mathvariant="normal">.</mn></math><img id="ib0015" file="imgb0015.tif" wi="55" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0075" num="0075">The estimated variation may generally be biased by the noise and for low SNRs the noise will be dominant over the variation caused by the delay spread. <figref idrefs="f0004">Fig 6</figref> illustrates the measured standard deviation (S<sub>p</sub>) as function of T<sub>p</sub> (the length of the channel impulse response) for different SNRs. The variation is a linear function of T<sub>p</sub> but with a decreasing gradient for lower SNRs.</p><p id="p0076" num="0076">A simulation study has been carried out to test the performance of the herein disclosed methods. <figref idrefs="f0005">Fig 7</figref> shows example resulting normalized throughput for the herein disclosed methods and for a CRS based estimation method assuming co-located ports. The normalized throughput is shown as a function of the SNR for three different modulation types. From <figref idrefs="f0005">Fig 7</figref> it is clear that the herein disclosed methods achieve similar performance as the CRS based method. The CRS based method assumes co-located ports and performs the channel spread estimation based on the complete bandwidth (a large set of channel estimates).</p><p id="p0077" num="0077">In conclusion, the herein disclosed methods have shown to produce very reliable estimates of the delay spread and the Doppler spread with a very limited number of channel estimates. The performance result of the herein disclosed methods is similar to legacy methods that require a larger number of channel estimates and more computational complexity, e.g. the use of the inverse FFT.</p><p id="p0078" num="0078">To summarize, estimation of a channel spread property at a receiver of a UE for one transmission antenna port p of a network node may comprise determination of channel estimates (for a limited number of pilot signals);<!-- EPO <DP n="17"> --> determination of a variation of the channel estimates for resource blocks scheduled to the UE and only for channel estimates from the one transmission antenna port p; and mapping of the variation to an estimate of the channel spread property by a (pre-defined) mapping function or look-up table. The mapping of variation to a channel spread estimate may be a function of SNR. According to a first embodiment the channel spread property is delay spread, and the variation is calculated as variation over the frequency direction. According to a second embodiment the channel spread property is Doppler spread, and the variation is calculated as variation over the time direction.</p><p id="p0079" num="0079">The invention has mainly been described above with reference to a few embodiments. However, as is readily appreciated by a person skilled in the art, other embodiments than the ones disclosed above are equally possible within the scope of the invention, as defined by the appended patent claims.</p></description><claims mxw-id="PCLM56976186" lang="EN" load-source="patent-office"><!-- EPO <DP n="18"> --><claim id="c-en-0001" num="0001"><claim-text>A method of estimating channel spread at a receiver (10) of a user equipment, UE, (4) for one antenna port of a network node (2), the method being performed in the UE, comprising the steps of:
<claim-text>acquiring (S2) channel estimates (H) for one antenna port of a network node (2);</claim-text>
<claim-text>determining (S4) a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE; and</claim-text>
<claim-text>estimating (S6) the channel spread by using a pre-determined mapping from the determined variation to a channel spread value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein the channel spread is delay spread, and wherein the variation is determined as variation over frequency of the channel estimates.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 1 or 2, wherein the variation is associated with one or more frequency bands, each frequency band being associated with a range of subcarriers (sc2, sc7, sc12).</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 1, wherein the channel spread is Doppler spread, and wherein the variation is determined as variation over time of the channel estimates.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any one of the preceding claims, wherein the variation is determined from at least two channel estimate variations, both the at least two channel estimate variations being associated with said subframes.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 5, wherein the determined variation is an average of said at least two channel estimate variations.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to any one of the preceding claims, wherein the mapping further is a function of signal to noise and interference ratio at the receiver for the antenna port.<!-- EPO <DP n="19"> --></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method according to claim 7, wherein the signal to noise and interference ratio is determined from the acquired channel estimates.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method according to any one of the preceding claims, wherein the channel estimates are part of one precoding resource block group, PRG.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method according to any one of the preceding claims, wherein the variation determination considers only those parts of the channel estimates which represent pilot symbols, wherein the pilot symbols are demodulation reference symbols, DM-RS.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method according to any one of the preceding claims, wherein the variation is determined from at least one second order statistics determination of the channel estimates.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A user equipment, UE, (4) for estimating channel spread at a receiver (10) of the UE for one antenna port of a network node (2), comprising:
<claim-text>a processing unit (6) arranged to acquire channel estimates (H) for one antenna port of a network node (2);</claim-text>
<claim-text>the processing unit further being arranged to determine a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising resource blocks scheduled to the UE; and</claim-text>
<claim-text>the processing unit further being arranged to estimate the channel spread by using a pre-determined mapping from the determined variation to a channel spread value.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A computer program (20) of estimating channel spread at a receiver (10) of a user equipment, UE, (4) for one antenna port of a network node (2), the computer program comprising computer program code which, when run on a UE, causes the UE to:
<claim-text>acquire (S2) channel estimates (H) for one antenna port of a network node (2);</claim-text>
<claim-text>determine (S4) a variation of acquired channel estimates representing subframes associated with a common precoder, the subframes comprising<!-- EPO <DP n="20"> --> resource blocks scheduled to the UE; and</claim-text>
<claim-text>estimate (S6) the channel spread by using a pre-determined mapping from the determined variation to a channel spread value.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A computer program product (18) comprising a computer program (20) according to claim 13 and a computer readable means (22) on which the computer program is stored.</claim-text></claim></claims><drawings mxw-id="PDW16666969" load-source="patent-office"><!-- EPO <DP n="21"> --><figure id="f0001" num="1,2,"><img id="if0001" file="imgf0001.tif" wi="140" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0002" num="3,4,"><img id="if0002" file="imgf0002.tif" wi="139" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0003" num="5"><img id="if0003" file="imgf0003.tif" wi="156" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="165" he="168" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0005" num="7"><img id="if0005" file="imgf0005.tif" wi="165" he="157" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
