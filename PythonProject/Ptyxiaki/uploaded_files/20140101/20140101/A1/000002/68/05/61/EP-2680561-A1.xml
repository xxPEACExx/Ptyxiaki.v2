<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680561-A1" country="EP" doc-number="2680561" kind="A1" date="20140101" family-id="48746288" file-reference-id="263985" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549127" ucid="EP-2680561-A1"><document-id><country>EP</country><doc-number>2680561</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13173733-A" is-representative="YES"><document-id mxw-id="PAPP154823050" load-source="docdb" format="epo"><country>EP</country><doc-number>13173733</doc-number><kind>A</kind><date>20130626</date><lang>EN</lang></document-id><document-id mxw-id="PAPP222431571" load-source="docdb" format="original"><country>EP</country><doc-number>13173733.0</doc-number><date>20130626</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454858" ucid="JP-2012143140-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012143140</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988106829" load-source="docdb">H04N   1/00        20060101AFI20130828BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1863146179" load-source="docdb" scheme="CPC">H04N   1/00904     20130101 LI20161229BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1863146933" load-source="docdb" scheme="CPC">H04N   1/00928     20130101 LI20161229BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1863147898" load-source="docdb" scheme="CPC">H04N   1/00901     20130101 LI20161229BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1863152551" load-source="docdb" scheme="CPC">H04N2201/0094      20130101 LA20161229BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988928793" load-source="docdb" scheme="CPC">H04N   1/00891     20130101 FI20140103BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179865" lang="DE" load-source="patent-office">Bilderzeugungsvorrichtung, Steuerverfahren dafür, Aufzeichnungsmedium, und Bilderzeugungssystem</invention-title><invention-title mxw-id="PT132179866" lang="EN" load-source="patent-office">Image forming apparatus, method for controlling the same, recording medium, and image forming system</invention-title><invention-title mxw-id="PT132179867" lang="FR" load-source="patent-office">Appareil de formation d'image, son procédé de commande, support d'enregistrement et système de formation d'image</invention-title><citations><patent-citations><patcit mxw-id="PCIT242651899" load-source="docdb" ucid="JP-H05162421-A"><document-id format="epo"><country>JP</country><doc-number>H05162421</doc-number><kind>A</kind><date>19930629</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651900" load-source="docdb" ucid="JP-H08238822-A"><document-id format="epo"><country>JP</country><doc-number>H08238822</doc-number><kind>A</kind><date>19960917</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651901" load-source="docdb" ucid="US-20070183107-A1"><document-id format="epo"><country>US</country><doc-number>20070183107</doc-number><kind>A1</kind><date>20070809</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651902" load-source="docdb" ucid="US-20080158616-A1"><document-id format="epo"><country>US</country><doc-number>20080158616</doc-number><kind>A1</kind><date>20080703</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651903" load-source="docdb" ucid="US-20110235083-A1"><document-id format="epo"><country>US</country><doc-number>20110235083</doc-number><kind>A1</kind><date>20110929</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651904" load-source="docdb" ucid="US-20120044530-A1"><document-id format="epo"><country>US</country><doc-number>20120044530</doc-number><kind>A1</kind><date>20120223</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651905" load-source="docdb" ucid="US-20120084585-A1"><document-id format="epo"><country>US</country><doc-number>20120084585</doc-number><kind>A1</kind><date>20120405</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918149966" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CANON KK</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918155735" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CANON KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR918982879" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>CANON KABUSHIKI KAISHA</last-name><iid>100094800</iid><address><street>30-2, Shimomaruko 3-chome</street><city>Ohta-ku Tokyo 146-8501</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918139960" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HIKICHI ATSUSHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918146077" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HIKICHI, ATSUSHI</last-name></addressbook></inventor><inventor mxw-id="PPAR918986234" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HIKICHI, ATSUSHI</last-name><address><street>c/o Canon Kabushiki Kaisha 3-30-2, Shimomaruko</street><city>Ohta-ku, Tokyo</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918982948" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Keane, David Colman</last-name><iid>101339516</iid><address><street>Canon Europe Ltd Legal, IP and EPS 3 The Square Stockley Park</street><city>GB-Uxbridge, Middlesex UB11 1ET</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548846441" load-source="docdb">AL</country><country mxw-id="DS548802311" load-source="docdb">AT</country><country mxw-id="DS548846443" load-source="docdb">BE</country><country mxw-id="DS548848444" load-source="docdb">BG</country><country mxw-id="DS548801459" load-source="docdb">CH</country><country mxw-id="DS548842835" load-source="docdb">CY</country><country mxw-id="DS548802312" load-source="docdb">CZ</country><country mxw-id="DS548846444" load-source="docdb">DE</country><country mxw-id="DS548842836" load-source="docdb">DK</country><country mxw-id="DS548842837" load-source="docdb">EE</country><country mxw-id="DS548845154" load-source="docdb">ES</country><country mxw-id="DS548848445" load-source="docdb">FI</country><country mxw-id="DS548848446" load-source="docdb">FR</country><country mxw-id="DS548846445" load-source="docdb">GB</country><country mxw-id="DS548842838" load-source="docdb">GR</country><country mxw-id="DS548846446" load-source="docdb">HR</country><country mxw-id="DS548802313" load-source="docdb">HU</country><country mxw-id="DS548801460" load-source="docdb">IE</country><country mxw-id="DS548842839" load-source="docdb">IS</country><country mxw-id="DS548848447" load-source="docdb">IT</country><country mxw-id="DS548842840" load-source="docdb">LI</country><country mxw-id="DS548856761" load-source="docdb">LT</country><country mxw-id="DS548835904" load-source="docdb">LU</country><country mxw-id="DS548857506" load-source="docdb">LV</country><country mxw-id="DS548857507" load-source="docdb">MC</country><country mxw-id="DS548835905" load-source="docdb">MK</country><country mxw-id="DS548835906" load-source="docdb">MT</country><country mxw-id="DS548845155" load-source="docdb">NL</country><country mxw-id="DS548848448" load-source="docdb">NO</country><country mxw-id="DS548835907" load-source="docdb">PL</country><country mxw-id="DS548801461" load-source="docdb">PT</country><country mxw-id="DS548845156" load-source="docdb">RO</country><country mxw-id="DS548801462" load-source="docdb">RS</country><country mxw-id="DS548835908" load-source="docdb">SE</country><country mxw-id="DS548846447" load-source="docdb">SI</country><country mxw-id="DS548848449" load-source="docdb">SK</country><country mxw-id="DS548835909" load-source="docdb">SM</country><country mxw-id="DS548842841" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669797" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An image forming apparatus (1) capable of communicating with the post-processing apparatus (700). The image forming apparatus (1) includes an execution means configured to execute a shift processing for shifting the image forming apparatus (1) into a power saving state, a notification unit configured to notify the post-processing apparatus (700) of an instruction to stop supply of power to the post-processing apparatus, and a power supply control means configured to control the supply of power to the execution unit. The notification means is configured, if the supply of power to the notification means is stopped in a case where the execution means executes the shift processing, control so that power is supplied power to the notification means. The notification means supplied with power by the power control unit notifies the post-processing apparatus (700) of the instruction.
<img id="iaf01" file="imgaf001.tif" wi="73" he="131" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499170" lang="EN" source="EPO" load-source="docdb"><p>An image forming apparatus (1) capable of communicating with the post-processing apparatus (700). The image forming apparatus (1) includes an execution means configured to execute a shift processing for shifting the image forming apparatus (1) into a power saving state, a notification unit configured to notify the post-processing apparatus (700) of an instruction to stop supply of power to the post-processing apparatus, and a power supply control means configured to control the supply of power to the execution unit. The notification means is configured, if the supply of power to the notification means is stopped in a case where the execution means executes the shift processing, control so that power is supplied power to the notification means. The notification means supplied with power by the power control unit notifies the post-processing apparatus (700) of the instruction.</p></abstract><description mxw-id="PDES63955227" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">BACKGROUND OF THE INVENTION</heading><heading id="h0002">Field of the Invention</heading><p id="p0001" num="0001">The present invention relates to an image forming apparatus, a method for controlling the same, a recording medium, and an image forming system.</p><heading id="h0003">Description of the Related Art</heading><p id="p0002" num="0002">In recent years, a shutdown function for flexibly turning off the power state of an image forming apparatus has been proposed as the demand for a power saving of appliances has increased. As examples of the shutdown function, there are an auto shutdown function, a weekly shutdown function, and a remote shutdown function.</p><p id="p0003" num="0003">The auto shutdown function is to start a timer when an image forming apparatus is brought into a sleep state and maintain the sleep state. The timer is stopped when a predetermined period of time elapses to automatically turn off the image forming apparatus.</p><p id="p0004" num="0004">The weekly shutdown function is to previously set a day of the week and the image forming apparatus is automatically turned off when the time counted by a timer of the image forming apparatus reaches the set time.</p><p id="p0005" num="0005">Further, by the remote shutdown function, the image<!-- EPO <DP n="2"> --> forming apparatus is remotely turned off by an external apparatus using a Management Information Base (MIB) of a Simple Mail Transfer Protocol (SMPT) or a unique application programming interface (API).</p><p id="p0006" num="0006">The image forming apparatus is turned off by the above shutdown function to enable power saving of the image forming apparatus. On the other hand, there is a demand for the power saving of the image forming apparatus even in the case where the image forming apparatus is not in an off-state. A technique to save the power of the image forming apparatus has been known , by which power is supplied to a device only when the device is used, in the case where the image forming apparatus is not in the off-state (refer to Japanese Patent Application Laid-Open Nos. <patcit id="pcit0001" dnum="JP5162421A"><text>5-162421</text></patcit> and <patcit id="pcit0002" dnum="JP8238822A"><text>8-238822</text></patcit>). In the image forming apparatus discussed in Japanese Patent Application Laid-Open Nos. <patcit id="pcit0003" dnum="JP5162421A"><text>5-162421</text></patcit> and <patcit id="pcit0004" dnum="JP8238822A"><text>8-238822</text></patcit>, a printer is energized (powered) only when a print function is used and the printer is not energized (powered) when the print function is not used.</p><p id="p0007" num="0007">The image forming apparatus can be connected to a post-processing apparatus for discharging, sorting, stapling, punching, and cutting a paper output from the image forming apparatus. In general, the image forming apparatus and the post-processing apparatus use their respective power supplies different from each other. More specifically, a switch for shutting down a controller unit mounted on the image forming apparatus (hereinafter referred to as a main body controller), a scanner unit, a printer unit, a FAX unit, various boards and<!-- EPO <DP n="3"> --> chips, and the image forming apparatus use a power supply different from a switch for shutting down a controller unit mounted on a finisher apparatus (hereinafter referred to as a finisher controller) and shutting down the finisher controller. Therefore, both switches for the image forming apparatus and the finisher apparatus need to be turned off to shut down both the image forming apparatus and the finisher apparatus by the above shutdown function. In a printing system equipped with the image forming apparatus and the finisher apparatus connected to the image forming apparatus, the finisher apparatus is communicably connected to a printer unit to handle the paper printed by the printer unit of the image forming apparatus. For this reason, the image forming apparatus communicates with the finisher apparatus via the printer unit. For this reason, if the shutdown function is to be executed, the main body controller of the image forming apparatus notifies the finisher controller of an operation end via the printer unit.</p><p id="p0008" num="0008">However, as discussed in Japanese Patent Application Laid-Open Nos. <patcit id="pcit0005" dnum="JP5162421A"><text>5-162421</text></patcit> and <patcit id="pcit0006" dnum="JP8238822A"><text>8-238822</text></patcit>, the printer unit through which an end notification between the main body controller and the finisher controller goes is not always constantly supplied with power. If the supply of power to the printer unit is stopped, the image forming apparatus cannot send an end notification to the finisher apparatus. As a result, the finisher controller for turning off the finisher apparatus in response to the reception of the end notification cannot receive<!-- EPO <DP n="4"> --> the notification because the supply of power to the printer unit is stopped, so that the finisher controller cannot turn off the finisher apparatus.</p><p id="p0009" num="0009">Even in a case where the supply of power not only to the above printer but also to pathway devices between the main body controller and the finisher controller is stopped, the image forming apparatus cannot send the end notification to a post-processing apparatus. As a result, the finisher apparatus cannot execute the shutdown function, so that the finisher apparatus cannot be turned off.</p><heading id="h0004">SUMMARY OF THE INVENTION</heading><p id="p0010" num="0010">The present invention is directed to the image forming apparatus which sends an end notification to a post-processing apparatus by supplying power to a pathway device which is a path for the end notification in a case where the image forming apparatus notifies the post-processing apparatus of the end processing.</p><p id="p0011" num="0011">The present invention in its first aspect provides an image forming apparatus as specified in claims 1 to 10.</p><p id="p0012" num="0012">Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.</p><heading id="h0005">BRIEF DESCRIPTION OF THE DRAWINGS</heading><!-- EPO <DP n="5"> --><p id="p0013" num="0013">The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.</p><p id="p0014" num="0014"><figref idrefs="f0001">Fig. 1</figref> is a block diagram illustrating a general configuration of an image forming system.</p><p id="p0015" num="0015"><figref idrefs="f0002">Fig. 2</figref> is a block diagram illustrating a configuration of a main body controller of an image forming apparatus.</p><p id="p0016" num="0016"><figref idrefs="f0003">Fig. 3</figref> is a block diagram illustrating a power state of the main body controller in the sleep state of the image forming apparatus.</p><p id="p0017" num="0017"><figref idrefs="f0004">Fig. 4</figref> is a block diagram illustrating the configuration of a power supply of the image forming system.</p><p id="p0018" num="0018"><figref idrefs="f0005">Fig. 5</figref> is a block diagram illustrating the configuration of the power supply of the image forming apparatus.</p><p id="p0019" num="0019"><figref idrefs="f0006">Fig. 6</figref> is a block diagram illustrating a configuration of a power supply unit and the vicinity of the power supply unit of the image forming apparatus.</p><p id="p0020" num="0020"><figref idrefs="f0007">Fig. 7</figref> illustrates the power state of the main body controller, a scanner unit, and a printer unit in each state of the image forming apparatus.</p><p id="p0021" num="0021"><figref idrefs="f0008">Fig. 8</figref> is a flow chart of the end processing executed by the image forming apparatus.</p><p id="p0022" num="0022"><figref idrefs="f0009">Fig. 9</figref> is a flow chart for the end processing executed<!-- EPO <DP n="6"> --> by the finisher apparatus.</p><heading id="h0006">DESCRIPTION OF THE EMBODIMENTS</heading><p id="p0023" num="0023">Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.</p><heading id="h0007">[General configuration of image forming system]</heading><p id="p0024" num="0024"><figref idrefs="f0001">Fig. 1</figref> is a block diagram illustrating a general configuration of an image forming system.</p><p id="p0025" num="0025">An image forming system100 includes an image forming apparatus 1 and a finisher apparatus (a post-processing apparatus) 700 connected to the image forming apparatus 1. The image forming apparatus 1 forms an image on a sheet. The sheet on which an image is formed by the image forming apparatus 1 is received by the finisher apparatus 700. The finisher apparatus 700 applies post processing (stapling, punching, and others) to the sheet received by the image forming apparatus 1. The image forming apparatus 1 of the image forming system 100 is connected to a personal computer (PC) 9 via a local area network (LAN) 8. The image forming apparatus 1 is communicably connected to the finisher apparatus 700.</p><p id="p0026" num="0026">The image forming apparatus 1 includes a scanner unit 2, a printer unit 4, an operation unit 5, a hard disk 6, a facsimile (FAX) unit 7, and a main body controller 3.</p><p id="p0027" num="0027">The scanner unit 2 reads a document and outputs image data. The scanner unit 2 includes a document feeding unit 21<!-- EPO <DP n="7"> --> and a scanner unit 22. The document feeding unit 21 conveys the document. The scanner unit 22 optically reads the conveyed document and converts the read data into image data as an electric signal.</p><p id="p0028" num="0028">The printer unit 4 prints on the sheet based on the image data. The printer unit 4 includes a sheet feeding unit 42, a marking unit 41, and a sheet discharge unit 43. The sheet feeding unit 42 includes a sheet cassette with a plurality of stages storing recording paper. The marking unit 41 transfers the image data to the recording paper and fixes the image data onto the recording paper. The sheet discharge unit 43 outputs the printed recording paper to the finisher apparatus 700. The conveyance of the paper by the printer 4 needs to be synchronized with that of the paper by the finisher apparatus 700 to convey the paper printed by the printer 4 to the finisher apparatus 700. For this reason, the printer 4 of the image forming apparatus 1 is connected to the finisher apparatus 700.</p><p id="p0029" num="0029">The operation unit 5 includes various keys and a panel. The operation unit 5 receives various instructions from a user via the various keys. The operation unit 5 displays various information via the panel.</p><p id="p0030" num="0030">The hard disk 6 stores control programs and image data.</p><p id="p0031" num="0031">The FAX unit 7 performs input/output processing via a telephone line.</p><p id="p0032" num="0032">The main body controller 3 is connected to the above configuration blocks such as the scanner unit 2, the printer<!-- EPO <DP n="8"> --> unit 4, the operation unit 5, the hard disk 6, and the FAX unit 7 to controls the configuration blocks.</p><p id="p0033" num="0033">The finisher apparatus 700 subjects the recording paper output from the sheet discharge unit 43 of the printer unit 4 to processing such as discharging, sorting, stapling, punching, and cutting.</p><p id="p0034" num="0034">The image forming apparatus 1 of the present exemplary embodiment is a multifunction peripheral in which the scanner unit 2, the printer unit 4, and the FAX unit 7 can execute a plurality of functions. The functions which can be executed by the image forming apparatus 1 are exemplified below.</p><p id="p0035" num="0035">Copy Function: The image data of the document read by the scanner unit 2 are stored in the hard disk 6 and the printer unit 4 prints on the paper based on the image data.</p><p id="p0036" num="0036">SEND Function: The image data of the document read by the scanner unit 2 are transmitted to the PC 9 via the LAN 8.</p><p id="p0037" num="0037">BOX Function: The image data of the document read by the scanner unit 2 are stored in the hard disk 6. The image data transmitted from the PC 9 are stored in the hard disk 6. Print Function: Page description language (PDL) data transmitted from the PC 9 are interpreted and printed by the printer unit 4.</p><heading id="h0008">[Configuration of main body controller 3]</heading><p id="p0038" num="0038"><figref idrefs="f0002">Fig. 2</figref> is a block diagram illustrating a configuration of the main body controller 3.</p><p id="p0039" num="0039">The main body controller 3 includes a main board 200<!-- EPO <DP n="9"> --> performing general information processing and a sub-board 220 performing image forming processing. The main board 200 and the sub-board 220 may be formed as one board.</p><p id="p0040" num="0040">The main board 200 includes a central processing unit (CPU) 201, a BootRom 202, a memory 203, a bus controller 204, a nonvolatile memory 205, a disk controller 206, a flash disk 207, a universal serial bus (USB) controller 208, an interrupt controller 210, a network controller 211, and a real time clock (hereinafter referred to as RTC 212. The BootRom 202 is a nonvolatile storage memory and stores a boot program. The CPU 201 executes the boot program, an operating system (OS), and an application program. The memory 203 is used as a work memory of the CPU 201. The bus controller 204 has a bridge function with the sub-board 220 and performs control to communicate data with the sub-board 220. The disk controller 206 controls the hard disk 6 and the flash disk 207. The flash disk 207 is a comparatively small-capacity storage apparatus (a solid state disk (SSD), for example) formed of a semiconductor device. The USB controller 208 controls a USB memory 209. The interrupt controller 210 performs interrupt processing according to the key operation of the operation unit 5 and the reception of facsimile by the FAX unit 7. The network controller 211 controls communication with the PC 9. The RTC 212 is supplied with power from a battery and counts a current time. The main board 200 is connected to the USB memory 209, the operation unit 5 and the hard disk 6.</p><p id="p0041" num="0041">The sub-board 220 includes a CPU 221, a memory 223,<!-- EPO <DP n="10"> --> a bus controller 224, a nonvolatile memory 225, an image processing processor 227, a device controller 228, and a device controller 229. The CPU 221 executes a boot program, an OS, and an application program. The memory 223 is used as a work memory of the CPU 221. The bus controller 224 has a bridge function with the main board 200 and performs control to communicate data with the main board 200. The image processing processor 227 subjects image data to various image processing. The image processing processor 227 performs a real-time digital image processing. The image processing processor 227 communicates digital image data with the printer unit 4 via the device controller 228. The image processing processor 227 communicates digital image data with the scanner unit 2 via the device controller 229. The FAX unit 7 is connected to the CPU 221 which controls the FAX unit 7. The finisher apparatus 700 applies the post processing to the printed paper output from the printer unit 4.</p><p id="p0042" num="0042">The block diagram in <figref idrefs="f0002">Fig. 2</figref> is a simplified drawing. Actually, however, the CPUs 201 and 221 include a large number of hardware components in the vicinity of the CPUs such as a chip set, a bus bridge, and a clock generator.</p><p id="p0043" num="0043">The operation of the abovementioned copy function is described below with reference to the blocks in <figref idrefs="f0002">Fig. 2</figref>.</p><p id="p0044" num="0044">When the user issues instructions for copying via the operation unit 5, the CPU 201 transmits a command for reading the set document to the scanner unit 2 via the CPU 221. The scanner unit 2 which receives the command for reading optically<!-- EPO <DP n="11"> --> scans the set document to convert the scanned data into digital image data. The digital image data are input to the image processing processor 227 via the device controller 229. The image processing processor 227 performs a direct memory access (DMA) transfer to temporarily store the digital image data into the memory 223 via the CPU 221. When the CPU 201 confirms that a certain amount or all of the digital image data are input to the memory 223, the CPU 201 transmits an image output command to the printer unit 4 via the CPU 221. The CPU 221 notifies the image processing processor 227 of the position of the digital image data in the memory 223. The digital image data in the memory 223 is transmitted to the printer unit 4 via the image processing processor 227 and the device controller 228 according to a synchronizing signal from the printer unit 4. The printer unit 4 which receives the digital image data prints an image on the paper based on the digital image data. If a plurality of prints is made, the CPU 201 stores the digital image data of the memory 223 into the hard disk 6 and transmits the digital image data stored in the hard disk 6 to the printer unit 4 to perform the second and the subsequent prints.</p><heading id="h0009">[Power state of main body controller in sleep state]</heading><p id="p0045" num="0045"><figref idrefs="f0003">Fig. 3</figref> is a block diagram illustrating a power state of the main body controller 3 in the sleep state of the image forming apparatus 1. Power supply to the shaded blocks in <figref idrefs="f0003">Fig. 3</figref> is stopped in the sleep state described below. The power state of the image forming apparatus 1 takes any one of an IDLE state in which the copy function and the SEND function can be<!-- EPO <DP n="12"> --> immediately executed, a sleep state which is smaller in power consumption than the IDLE state, and an off-state (power saving state) in which the supply of power to each block of the image forming apparatus 1 is shut off. The power state of the image forming apparatus 1 is not limited to the above IDLE state, the Sleep state, and the off-state.</p><p id="p0046" num="0046">The term "IDLE state" refers to a state in which power is supplied to each unit of the image forming apparatus 1 and the above various functions (such as the copy function, the SEND function, the BOX function, and the print function) can be immediately executed.</p><p id="p0047" num="0047">The term "Sleep state" refers to a state in which the image forming apparatus 1 operates with power consumption smaller than that in the IDLE state. The starting time of the image forming apparatus 1 required for shifting from the sleep state to the IDLE state is shorter than that for shifting from the off-state to the IDLE state. If the image forming apparatus 1 is in the IDLE state and receives not print data from the PC 9 for a certain period of time or the user does not operate the operation unit 5 for a certain period of time, the image forming apparatus 1 shifts from the IDLE state to the sleep state. The condition under which the image forming apparatus 1 shifts to the sleep state is not limited to the above condition. For example, the image forming apparatus 1 may shift from the IDLE state to the sleep state by the user operating a sleep shift key provided on the operation unit 5.</p><p id="p0048" num="0048">As illustrated in <figref idrefs="f0003">Fig. 3</figref>, if the image forming<!-- EPO <DP n="13"> --> apparatus 1 is in the sleep state, power is supplied to only the required places of the main body controller 3. More specifically, in the sleep state, power is supplied to the memory 203, the USB controller 208, the network controller 211, and the interrupt controller 210 of the main board 200 of the main body controller 3. Further, in the sleep state, power is supplied to the operation unit 5 and the FAX unit 7. The RTC 212 is backed up by a battery that is a power supply different from an alternating current (AC) power supply 304.</p><p id="p0049" num="0049">In the sleep state, the interrupt controller 210 receives interrupt from the network controller 211 due to the reception of a signal from the network, interrupt from the RTC due to timeout of the RTC 212, interrupt from the FAX unit 7 due to the reception of facsimile, interrupt from the operation unit 5 due to the key operation of the operation unit 5, and interrupt from the USB controller 208 due to attachment and detachment of the USB device and communication. If the interrupt controller 210 receives the above interrupt, the interrupt controller 210 requests a below mentioned power supply unit 500 to start the CPU 201. The CPU 201 supplied with power from the power supply unit 500 performs processing for returning the state of software to the IDLE state.</p><heading id="h0010">[Configuration of power supply of image forming system]</heading><p id="p0050" num="0050"><figref idrefs="f0004">Fig. 4</figref> is a block diagram illustrating the configuration of power supply for the image forming system 100. The configuration of power supply for the image forming system 100<!-- EPO <DP n="14"> --> is described below with reference to <figref idrefs="f0004">Fig. 4</figref>.</p><p id="p0051" num="0051">The power supply unit 500 of the image forming apparatus 1 converts an AC power supply supplied from the AC power supply 304 into a direct current (DC) power supply. The detailed configuration of the power supply unit 500 is described below. The power supply unit 500 supplies DC power to the scanner unit 2, the main body controller 3, the printer unit 4, and a solenoid 311 for turning off a mechanical seesaw switch 301 which is turned on/off according to the user's operation. The seesaw switch 301 is a toggle switch and can mechanically maintain any one of an on-state or off-state. The power supply unit 500 supplies power to the solenoid 311 to drive the solenoid 311. Thereby, the seesaw switch 301 is pulled by the solenoid 311 to turn the seesaw switch 301 off. This turns off the image forming apparatus 1.</p><p id="p0052" num="0052">A printer controller 750 of the printer unit 4 is a general CPU system such as a CPU, a memory, and a nonvolatile memory which are not illustrated.</p><p id="p0053" num="0053">A power supply unit 720 of the finisher apparatus 700 converts an AC power supplied from an AC power supply 740 different from the AC power supply 304 of the image forming apparatus 1 into a DC power. The power supply unit 720 supplies the DC power to a solenoid 731 for turning off a mechanical seesaw switch 730 which is turned on/off according to the user's operation and a finisher controller 710. The seesaw switch 730 is a toggle switch and can mechanically maintain one of the on-state or off-state. The power supply unit 720 supplies power<!-- EPO <DP n="15"> --> to the solenoid 731 to drive the solenoid 731 in turning off the finisher apparatus 700. Thereby, the seesaw switch 730 is pulled by the solenoid 731 to turn the seesaw switch 730 off. This turns off the finisher apparatus 700. The finisher controller 710 is a general CPU system such as a CPU, a memory, and a nonvolatile memory which are not illustrated. The image forming apparatus 1 communicates with the finisher apparatus 700 via the printer controller 750 and finisher controller 710.</p><heading id="h0011">[Detailed configuration of power supply of image forming apparatus]</heading><p id="p0054" num="0054"><figref idrefs="f0005">Fig. 5</figref> is a block diagram illustrating the detailed configuration of power supply for the image forming apparatus 1. The detailed configuration of power supply for the image forming apparatus 1 is described below with reference to <figref idrefs="f0005">Fig. 5</figref>.</p><p id="p0055" num="0055">The image forming apparatus 1 is equipped with the power supply unit 500 for converting the AC power supply of the AC power supply 304 into the DC power supply to supply the DC power to each unit. The power supply unit 500 is connected to the solenoid 311 via a power supply cable 309. The power supply unit 500 supplies power to the solenoid 311 via the power supply cable 309 to drive the solenoid 311. The supply of power to the solenoid 311 drives the solenoid 311, turning off the seesaw switch 301.</p><p id="p0056" num="0056">The power supply unit 500 supplies power to the scanner unit 2 via a power supply cable 310. The power supply unit 500 supplies power to the printer unit 4 via a power supply<!-- EPO <DP n="16"> --> cable 305. The power supply unit 500 supplies power to the main body controller 3 via a power supply cable 306.</p><p id="p0057" num="0057">A line 307 for notifying the interrupt controller 210 of the state of the seesaw switch 301 (on- or off-state) is provided between the seesaw switch 301 and the interrupt controller 210. A signal line 308 through which a power supply remote signal is transmitted from a general purpose input/output (GPIO) included in the CPU 201 is provided between the CPU 201 and the power supply unit 500. The power supply remote signal is used to perform software control of the output of the power supply unit 500. Even in a state where the supply of power to the CPU 201 is stopped, the power supply unit 500 can be notified of the state of the seesaw switch 301 transmitted from the interrupt controller 210 via the GPIO.</p><p id="p0058" num="0058">The user can turn off the image forming apparatus 1 by operating the seesaw switch 301. When the user operates the seesaw switch 301 to turn off the image forming apparatus 1, the interrupt controller 210 notifies the power supply unit 500 of the state of the seesaw switch 301 via the GPIO of the CPU 201. At this point, if the supply of power to the CPU 201 is being stopped, the power supply unit 500 supplies power to the CPU 201. The CPU 201 supplied with power executes end processing (first shift processing). When the end processing is completed, the power supply remote signal is transmitted to the power supply unit 500 via the signal line 308. Thereby, the power supply unit 500 receiving the power supply remote signal stops supplying power to the main body controller 3.<!-- EPO <DP n="17"> --> This turns off the image forming apparatus 1. The use of an aftermentioned shutdown function can turn off the image forming apparatus 1 without the user operating the seesaw switch 301. If a factor for executing the shutdown function appears, the CPU 201 executes the end processing of the image forming apparatus 1. If the end processing is completed, the CPU 201 transmits the power supply remote signal to the power supply unit 500 via the signal line 308. The power supply unit 500 receiving the power supply remote signal stops supplying power to the main body controller 3. Furthermore, the power supply unit 500 receiving the power supply remote signal supplies power to the solenoid 311 via the power supply cable 309. As a result, the solenoid is driven to turn off the seesaw switch 301.</p><heading id="h0012">[Shutdown function]</heading><p id="p0059" num="0059">The shutdown function executed by the image forming system 100 of the present exemplary embodiment is described below.</p><p id="p0060" num="0060">The image forming system 100 executes the auto shutdown function, the weekly shutdown function, and the remote shutdown function.</p><p id="p0061" num="0061">The auto shutdown function executes the end processing (the first shift processing) when the image forming system 100 is not continuously operated for a predetermined period of time (shifting factor). When the image forming system 100 ends operation, the CPU 201 sets a shutdown shift time (of three hours, for example) to the RTC 212. The RTC 212 counts the shutdown shift time and then executes the end processing.</p><p id="p0062" num="0062">The weekly shutdown function executes the end<!-- EPO <DP n="18"> --> processing (the first shift processing) when a previously set specified time is reached. The CPU 201 sets the weekly shutdown time to the RTC 212 (for example, Monday 17:00, Tuesday 17:00, Wednesday 17:00, Thursday 17:00, and Friday 17:00). When the time counted by the RTC 212 reaches the weekly shutdown time, the CPU 201 executes the end processing.</p><p id="p0063" num="0063">The remote shutdown function executes the end processing (the first shift processing) when an external apparatus such as the PC 9 performs notification through a management information base (MIB) of a protocol simple network management protocol (SNMP) or a unique protocol</p><p id="p0064" num="0064">When the end processing is completed, the power supply unit 500 supplies power to the solenoid 311 via the power supply cable 309. Thereby, the solenoid 311 is driven to pull and turn off the seesaw switch 301. In the present exemplary embodiment, before the image forming apparatus 1 executes the end processing, the CPU 201 notifies the finisher controller 710 of the end processing via the printer controller 750. The end processing which the image forming apparatus 1 notifies to the finisher apparatus 700 is sent to the power supply unit 720 via the finisher controller 710. The power supply unit 720 which receives the notification supplies power to the solenoid 731 of the finisher apparatus 700. Thereby, the solenoid 731 is driven to pull and turn off the seesaw switch 730.</p><heading id="h0013">[Power supply unit 500]</heading><p id="p0065" num="0065"><figref idrefs="f0006">Fig. 6</figref> is a block diagram illustrating a configuration of the power supply unit 500 and the vicinity of the power supply unit<!-- EPO <DP n="19"> --> 500 of the image forming apparatus 1. The configuration of the power supply unit 500 and the vicinity thereof of the image forming apparatus 1 is described below with reference to <figref idrefs="f0006">Fig. 6</figref>.</p><p id="p0066" num="0066">The image forming apparatus 1 is connected to the AC power supply 304 and the seesaw switch 301 is connected between the AC power supply 304 and the main body controller 3. The AC power supply 304 is connected to the power supply unit 500. The AC power supply 304 is connected to the main body controller 3, the printer unit 4, and the scanner unit 2 via the power supply unit 500. The power supply unit 500 includes a power supply control unit 501, a first power source supply unit 502, a second power source supply unit 503, a third power source supply unit 504, relays 505 and 506, and a field effect transistor (FET) 507. The first power source supply unit 502 provided between the AC power supply 304 and the main body controller 3 converts the AC power supplied by the AC power supply 304 into the DC power and supplies the DC power to the main body controller 3. An FET 507 is provided between the first power source supply unit 502 and the main body controller 3. Turning on and off of the FET 507 is controlled by the above power supply control unit 501. The second power source supply unit 503 and the relay 505 are provided between the AC power supply 304 and the printer unit 4. The third power source supply unit 504 and the relay 506 are provided between the AC power supply 304 and the scanner unit 2. The second power source supply unit 503 converts the AC power supplied by the AC power supply 304 into the DC power<!-- EPO <DP n="20"> --> supply and supplies the DC power to the printer unit 4. The third power source supply unit 504 converts the AC power supplied by the AC power supply 304 into the DC power supply and supplies the DC power to the scanner unit 2. The power supply control unit 501 performs various power controls of devices around the power supply unit 500. Turning on and off of the relays 505 and 506 is controlled by the above power supply control unit 501. The power supply control unit 501 turns on the relay 505 to supply power to the printer unit 4 only when using the printer unit 4. Otherwise, the power supply control unit 501 turns off the relay 505 to stop the supply of power to the printer unit 4. The power supply control unit 501 turns on the relay 506 to supply power to the scanner unit 2 only when using the scanner unit 2. Otherwise, the power supply control unit 501 turns off the relay 506 to stop the supply of power to the scanner unit 2. The power supply control unit 501 causes the first power source supply unit 502 to supply power to the solenoid 311 of the seesaw switch 301. This causes the solenoid 311 to pull the seesaw switch 301 to turn off the seesaw switch 301. The power supply control unit 501 controls switches (not illustrated) of the main body controller 3 to control the power state of the main body controller 3. Specifically, when a certain period of time elapses in the IDLE state, the power supply control unit 501 controls the switches (not illustrated) so that the power state of the main body controller 3 is brought into the state illustrated in <figref idrefs="f0003">Fig. 3</figref>.</p><heading id="h0014">[Power control of image forming system]</heading><!-- EPO <DP n="21"> --><p id="p0067" num="0067"><figref idrefs="f0007">Fig. 7</figref> illustrates the power state of the main body controller 3, the scanner unit 2, and the printer unit 4 in each state of the image forming apparatus 1. In <figref idrefs="f0007">Fig. 7</figref>, the abscissa indicates time. Characters in block in <figref idrefs="f0007">Fig. 7</figref> correspond to states (1) to (9) described below, respectively. The power control of the image forming apparatus 1 is described below with reference to <figref idrefs="f0007">Fig. 7</figref>.</p><p id="p0068" num="0068">(1) State of the image forming apparatus 1: Off state When the image forming apparatus 1 is in an off-state, the power of the main body controller 3, the scanner unit 2, and the printer unit 4 is shut off.</p><heading id="h0015">(2) State of the image forming apparatus 1: Start processing</heading><p id="p0069" num="0069">When the seesaw switch 301 of the image forming apparatus 1 is turned on by a user's operation, the image forming apparatus 1 is started. The start processing of the main body controller 3 is described below. When the state of the seesaw switch 301 is detected by the interrupt controller 210, the interrupt controller 210 notifies the power supply 500 that the seesaw switch 301 is brought into an on-state via the GPIO of the CPU 201. The power supply 500 supplies power to the main body controller 3. The CPU 201 supplied with power initializes hardware devices. The initialization of the hardware devices refers to register initialization, interrupt initialization, registration of a device driver in starting a kernel, and initialization of the operation unit 5. Next, the CPU 201 initializes software. The initialization of the software<!-- EPO <DP n="22"> --> refers to call of initialization routine of each library, start of a process and a thread, start of software service for communication with the printer unit 4 and the scanner unit 2, and rendering of the operation unit 5. In the process of the start processing, the printer 4 and the scanner unit 2 are temporarily supplied with power. When the above initialization is completed, the image forming apparatus 1 is brought into the IDLE state.</p><p id="p0070" num="0070">The main body controller 3 establishes the configuration of the finisher apparatus 700 in the start processing. More specifically, the main body controller 3 negotiates with the finisher apparatus 700 via the printer unit 4 temporarily supplied with power in the start processing to establishes the device configuration of the finisher apparatus 700.</p><heading id="h0016">(3) State of the image forming apparatus 1: IDLE state</heading><p id="p0071" num="0071">When the start processing is completed, the image forming apparatus 1 is brought into the IDLE state. In the IDLE state, the supply of power to the printer 4 and the scanner unit 2 is stopped, but the main body controller 3 is supplied with power (refer to <figref idrefs="f0002">Fig. 2</figref>).</p><heading id="h0017">(4) State of the image forming apparatus 1: Sleep state</heading><p id="p0072" num="0072">When a certain period of time elapses while the image forming apparatus 1 is in the IDLE state, the image forming apparatus 1 is brought into the sleep state. When a certain period of<!-- EPO <DP n="23"> --> time elapses while the image forming apparatus 1 is in the IDLE state, the CPU 201 notifies the power supply unit 500 that the image forming apparatus is brought into the sleep state. The notified power supply unit 500 stops supplying power to a part of the main body controller 3 and changes the power state of the main body controller 3 from that of <figref idrefs="f0002 f0003">Fig. 2 to Fig. 3</figref>.</p><heading id="h0018">(5) State of the image forming apparatus 1: Print state</heading><p id="p0073" num="0073">A return processing in which the image forming apparatus 1 returns from the sleep state is described below. When the CPU 201 receives while in the sleep state a print job of the PDL which is a factor for returning from the sleep state, via the network, the CPU 201 notifies the power supply unit 500 of the reception of the print job. The notified power supply unit 500 supplies power to the main body controller 3 and the printer unit 4 via the power supply cables 306 and 305 respectively. The printer unit 4 supplied with power executes the print job received via the network.</p><heading id="h0019">(6) State of the image forming apparatus 1: Copy state</heading><p id="p0074" num="0074">A case is considered where a copy job is generated by the user' s operation of the operation unit 5 during the execution of the print job. When the copy job is generated, the CPU 201 notifies the power supply unit 500 that the copy job is generated. The notified power supply unit 500 supplies power to the main body controller 3, the printer unit 4, and the scanner unit 2 via the power supply cables 306, 305, and 310 respectively. The scanner unit 2 supplied with power reads the set document and<!-- EPO <DP n="24"> --> generates image data and the printer unit 4 prints an image on paper based on the image data.</p><heading id="h0020">(7) State of the image forming apparatus 1: Sleep state</heading><p id="p0075" num="0075">When a certain period of time elapses after the execution of the copy job, the image forming apparatus 1 is brought into the sleep state. When the image forming apparatus 1 is brought into the sleep state, the CPU 201 notifies the power supply unit 500 that the image forming apparatus 1 is brought into the sleep state. The notified power supply unit 500 stops supplying power to a part of the main body controller 3 and changes the power state of the main body controller 3 from that of <figref idrefs="f0002 f0003">Fig. 2 to Fig. 3</figref>.</p><heading id="h0021">(8) State of the image forming apparatus 1: End processing (first shift processing)</heading><p id="p0076" num="0076">When a predetermined period of time elapses while the image forming apparatus 1 is in the sleep state, the image forming apparatus 1 shifts from the sleep state to the off-state. At this stage, the image forming apparatus 1 executes the end processing. The end processing is described below.</p><heading id="h0022">(9) State of the image forming apparatus 1: Off-state</heading><p id="p0077" num="0077">When the end process is executed, the image forming apparatus 1 is brought into the off-state. In the off-state, the power supply unit 500 stops supplying power to the printer unit 4, the scanner unit 2, and the main body controller 3.</p><heading id="h0023">[End processing of image forming apparatus]</heading><p id="p0078" num="0078"><figref idrefs="f0008">Fig. 8</figref> is a flow chart of the end processing (first shift<!-- EPO <DP n="25"> --> processing) executed by the image forming apparatus 1. The above end processing (8) is described above with reference to <figref idrefs="f0007">Fig. 7</figref>.</p><p id="p0079" num="0079">In the sleep state before the end process is performed, as illustrated in <figref idrefs="f0003">Fig. 3</figref>, the supply of power to the printer unit 4 is being stopped, so that the image forming apparatus 1 cannot notify the finisher apparatus 700 of the execution of the end processing. Therefore, in the image forming apparatus 1 according to the present exemplary embodiment, the printer unit 4 is temporarily supplied with power so that the image forming apparatus 1 can notify the finisher apparatus 700 of the execution of the end processing. The following describes the end process in detail.</p><p id="p0080" num="0080">The flow chart illustrated in <figref idrefs="f0008">Fig. 8</figref> is executed by the CPU 201 not only in the case where the shutdown function is executed but also in the case where the seesaw switch 301 is turned off by the user's operation. If a predetermined period of time elapses while the sleep state is kept unchanged, the following processing is executed. However, in the sleep state, the supply of power to the CPU 201 is being stopped. For this reason, in the present exemplary embodiment, power is supplied from the first power source supply unit 502 to the CPU 201 before the following processing is executed. The CPU 201 supplied with power executes the following processing.</p><p id="p0081" num="0081">In step S101, the operation unit 5 is controlled so that the CPU 201 causes the screen of the operation unit 5 to display information indicating that the end processing of the<!-- EPO <DP n="26"> --> image forming system 100 has been executed. The display is not requisite in the case of the end processing executed by the weekly shutdown function or by the auto shutdown function differently from the end processing executed by the operation of the seesaw switch 301 or by the remote shutdown function. This is because the image forming system 100 executes the end processing from the sleep state in which the screen of the operation unit 5 is not displayed.</p><p id="p0082" num="0082">In step S102, the CPU 201 confirms whether power is supplied to pathway devices from the CPU 201 to the finisher apparatus 700. If the CPU 201 determines that the power supplies of the pathway devices are in the off-state (YES in step S102), in step S103, the CPU 201 instructs the power supply unit 500 to turn on the power supplies of the pathway devices via the signal line 308. The pathway devices are chips of the printer unit 4 (the printer controller 750), the sub-board 220 (the device controller 228, the image processor 227, the CPU 221, and the bus controller 224), and the bus controller 204 of the main board 200.</p><p id="p0083" num="0083">In the present exemplary embodiment, the supply of power to the print unit 4 is stopped when the print function is not used. If the print function is not used, the CPU 201 instructs the power supply unit 500 to supply power to the print unit 4 via the signal line 308. To flexibly control the power of the sub-board 220, if the supply of power to the printer unit 4 and the sub-board 220 as the pathway devices is stopped, the CPU 201 instructs the power supply unit 500 to supply power to<!-- EPO <DP n="27"> --> the printer unit 4 and the sub-board 220 via the signal line 308. If the supply of power to the bus controller 204 is stopped along with the stop of power supply to the sub-board 220, the CPU 201 instructs the power supply unit 500 to supply power to the printer unit 4, the sub-board 220, and the bus controller 204 via the signal line 308.</p><p id="p0084" num="0084">The pathway devices is different for each apparatus. In other words, devices different from the above pathway devices can be pathway devices. In the present exemplary embodiment, as examples of the pathway devices between the CPU 201 and the finisher apparatus 500, the printer unit 4, the sub-board 220 (the device controller 228, the image processor 227, the CPU 221, and the bus controller 224), and the bus controller 204 are provided. However, the pathway devices of the present invention are not limited to the above pathway devices. If a different finisher apparatus is connected between the finisher apparatus 500 and the image forming apparatus 1, the different finisher apparatus can be a pathway device.</p><p id="p0085" num="0085">In step S103, the pathway devices are supplied with power. In step S104, the CPU 201 notifies the finisher controller 710 of the finisher apparatus 700 of the end processing via the pathway devices supplied with power. More specifically, the CPU 201 notifies the finisher controller 710 of the end processing via the bus controller 204 of the main board 200, the bus controller 224 of the sub-board 220, the CPU 221 of the sub-board 220, the image processing processor 227, the device controller 228, and the printer controller 750 of<!-- EPO <DP n="28"> --> the printer unit 4. The finisher controller 710 can perform the end processing of the finisher apparatus 700 according to the reception of the end processing.</p><p id="p0086" num="0086">In step S106, the CPU 201 determines whether a response to the notification of the end processing has been received from the finisher apparatus 700. If the CPU 201 determines that the response has been received (YES in step S106), in step S107, the CPU 201 instructs the power supply unit 500 to stop supplying power to the pathway devices via the signal line 308. The instructed power supply unit 500 stops supplying power to the pathway devices. In step S108, the CPU 201 confirms whether the end processing of the pathway devices is completed. The CPU 201 does not always need to stop supplying power to the pathway devices (in step S107) and confirm whether the end processing of the pathway devices is completed (in step S108) before the end processing of the image forming apparatus 1 is performed (in step S109 described below). The CPU 201 may stop supplying power to the pathway devices (in step S107) and confirm whether the end processing of the pathway devices is completed (in step S108) at the same timing that the end processing of the image forming apparatus 1 is performed (in step S109 described below) or that the seesaw switch 301 is turned off (in step S110 described below).</p><p id="p0087" num="0087">In step S109, the image forming apparatus 1 executes the end processing. The image forming apparatus 1 performs several end processing steps. Specifically, the CPU 201 performs the end processing of the process for controlling the<!-- EPO <DP n="29"> --> image forming apparatus 1 and software applications. The CPU 201 performs processing for syncing a storage buffer cached on the memory 203 with a storage such as the hard disk 6 or the flash disk 207. Furthermore, the CPU 201 performs processing for shutting down the OS. The CPU 201 executing the end processing instructs the power supply unit 500 to supply power to the solenoid 311 of the seesaw switch 301. Thereby, in step S110, the power supply unit 500 supplies power to the solenoid 311 to turn off the seesaw switch 301. Finally, the power supply control unit 501 turns off the FET 507 to stop supplying power to the main body controller 3, turning off the image forming apparatus 1.</p><p id="p0088" num="0088">In the present exemplary embodiment, the end processing is executed by the auto shutdown function, the weekly shutdown function, and the remote shutdown function to turn off the seesaw switch 301. As a result, the image forming apparatus 1 is brought into the off-state (the power saving state). In the present exemplary embodiment, however, the power saving state of the present invention may be a suspension state or a hibernation state as well as the above off-state. The suspension state refers to the one that power is supplied to the GPIO (complex programmable logic device (CPLD)) managed by the CPU 201 and a part of memory 203 even if the seesaw switch 301 is in the off-state and is one of methods for increasing the speed of the next start. The GPIO (CPLD) is used as a flag for discriminating a specific off-state at the next start. The hibernation state refers to the state where the seesaw switch<!-- EPO <DP n="30"> --> 301 is in the off-state and which can be returned to the state assumed just before the power of the image forming system 100 is shut off. The state before the power of the image forming system 100 is shut off is stored in the hard disk 6. The image forming system 100 is brought into the state immediately before the power supply is shut off based on the state stored in the hard disk 6 when the seesaw switch 301 is brought into the on-state.</p><heading id="h0024">[End processing of finisher apparatus]</heading><p id="p0089" num="0089"><figref idrefs="f0009">Fig. 9</figref> is a flow chart for the end processing (a second shift processing) executed by the finisher apparatus 700. The end processing executed by the finisher apparatus 700 is described in detail below with reference to <figref idrefs="f0009">Fig. 9</figref>.</p><p id="p0090" num="0090">In step S201, the finisher controller 710 determines whether an end notification (a shift notification) has been received from the main body controller 3 of the image forming apparatus 1. The end notification is sent from the CPU 201 of the image forming apparatus 1 to the finisher controller 710 of the finisher apparatus 700 in step S104 described above. If the finisher controller 710 determines that the end notification has been received from the main body controller 3 (YES in step S201), in step S202, the finisher controller 710 instructs the power supply unit 720 to supply power to the solenoid 731 of the seesaw switch 730. Thereby, in step S203, the solenoid 731 is driven to turn off the seesaw switch 730. In step S204, the finisher controller 710 determines whether an interrupt has been received from the seesaw switch 730. The<!-- EPO <DP n="31"> --> interrupt is issued when the seesaw switch 730 is brought into the off-state. If the finisher controller 710 receives the interrupt (YES in step S204), in step S205, the finisher controller 710 transmits a response to the end processing to the main board 200 via the printer controller 750 and the sub-board 220.</p><p id="p0091" num="0091">As illustrated in <figref idrefs="f0004">Fig. 4</figref>, even if the seesaw switch 730 is brought into the off-state, the finisher apparatus 700 according to the present exemplary embodiment does not instantly stop supplying power to the finisher controller 710. This is because power is supplied from the power supply unit 720 thereto even if the seesaw switch 730 is brought into the off-state. Therefore, the finisher controller 710 can send back a response to the end notification, to the image forming apparatus 1. On the other hand, when the seesaw switch 730 of the finisher apparatus 700 is brought into the off-state, the supply of power to each unit in the finisher apparatus 700 is sometimes stopped. In this case, the supply of power to the finisher controller 710 is also stopped, so that the finisher controller 710 cannot send back a response to the end notification, to the image forming apparatus 1. Accordingly, in the system in which the supply of power to each unit in the finisher apparatus 700 is stopped, the finisher controller 710 may send back a response to the end notification, to the CPU 201 in a period immediately after the end notification is received until the seesaw switch 730 is brought into the off-state.<!-- EPO <DP n="32"> --></p><heading id="h0025">[Effect of present exemplary embodiment]</heading><p id="p0092" num="0092">In the present exemplary embodiment, when the end processing of the image forming system 100 is performed, power is supplied to the pathway devices between the CPU 201 of the image forming apparatus 1 and the finisher apparatus 700 to allow the CPU 201 to notify the finisher apparatus 700 of the end processing. Thereby, the finisher apparatus 700 can execute the end processing.</p><heading id="h0026">[Modification]</heading><p id="p0093" num="0093">In the present exemplary embodiment, as an example, the mechanical seesaw switch 301 is used that maintains the on and off-states according to the user' s operation, however, a switch according to the present invention is not limited to the mechanical seesaw switch 301. For example, a tact switch which does not maintain the on and off-states may be used instead of the seesaw switch 301. If the tact switch is used, the image forming apparatus 1 operates in the following patterns. However, the following patterns are only an example.</p><p id="p0094" num="0094">1. In the state where the power supply of the image forming apparatus 1 is turned on, the tact switch is pressed to bring the image forming apparatus 1 into the off-state or the sleep state.</p><p id="p0095" num="0095">2. In the state where the power supply of the image forming apparatus 1 is not turned on, the tact switch is pressed to bring the image forming apparatus 1 into the on-state.</p><p id="p0096" num="0096">3. In the state where the power supply of the image forming apparatus 1 is turned on, the tact switch is pressed<!-- EPO <DP n="33"> --> to forcibly bring the image forming apparatus 1 into the off-state.</p><p id="p0097" num="0097">In the present exemplary embodiment, the control of power supply is described as power control of the printer unit 4 and the scanner unit 2, however, the present invention is not limited to the above exemplary embodiment. Instead, clock supply to the printer unit 4 and the scanner unit 2 may be controlled.</p><p id="p0098" num="0098">The example in which the flow chart in <figref idrefs="f0008">Fig. 8</figref> is executed by one CPU is described above, but the flow chart may be distributed among a plurality of CPUs and executed.</p><p id="p0099" num="0099">If a plurality of the finisher apparatuses is connected, the printer unit 4 sends the end notification to a single finisher apparatus adjacent to the image forming apparatus 1. The printer unit 4 receives response to the end notification from all of the finisher apparatuses connected to the image forming apparatus 1 and then transmits a response to the end processing, to the main board 200.</p><p id="p0100" num="0100">If a response to the end notification cannot be received from the finisher apparatus 700, the main board 200 waits for the response from the printer unit 4 until a predetermined period of time elapses. The predetermined period of time is 50 seconds, for example. If there is no response from the finisher apparatus 700 for 50 seconds after the end notification is transmitted, the CPU 201 starts the end processing. If the software of the image forming apparatus 1 of the present invention hangs up, the power supply shutdown<!-- EPO <DP n="34"> --> processing is executed after a predetermined period of time elapses.</p><heading id="h0027">Other Embodiments</heading><p id="p0101" num="0101">Embodiments of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions recorded on a storage medium (e.g., non-transitory computer-readable storage medium) to perform the functions of one or more of the above-described embodiment (s) of the present invention, and by a method performed by the computer of the system or apparatus by, for example, reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above-described embodiment (s). The computer may comprise one or more of a central processing unit (CPU), micro processing unit (MPU), or other circuitry, and may include a network of separate computers or separate computer processors. The computer executable instructions may be provided to the computer, for example, from a network or the storage medium. The storage medium may include, for example, one or more of a hard disk, a random-access memory (RAM), a read only memory (ROM), a storage of distributed computing systems, an optical disk (such as a compact disc (CD), digital versatile disc (DVD), or Blu-ray Disc (BD)™), a flash memory device, a memory card, and the like.</p><p id="p0102" num="0102">While the present invention has been described with reference to exemplary embodiments, it is to be understood that<!-- EPO <DP n="35"> --> the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.</p></description><claims mxw-id="PCLM56976140" lang="EN" load-source="patent-office"><!-- EPO <DP n="36"> --><claim id="c-en-0001" num="0001"><claim-text>An image forming apparatus (1) capable of communicating with a post-processing apparatus (700) comprising:
<claim-text>an execution means for executing a shift processing for shifting the image forming apparatus (1) into a power saving state;</claim-text>
<claim-text>a notification means (204, 220, 4) for notifying the post-processing apparatus (700) of an instruction to stop supply of power to the post-processing apparatus; and</claim-text>
<claim-text>a power supply control means (501) for controlling supply of power to the execution means and the notification means; wherein, if the supply of power to the notification means is stopped in a case where the execution means executes the shift processing, the power supply control means (501) is configured to control so that power is supplied to the notification means and the notification means supplied with power by the power supply control means (501) notifies the post-processing apparatus (700) of the instruction.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The image forming apparatus (1) according to claim 1, wherein the notification means includes an image forming means (4) for forming an image on a sheet based on a received image data and for outputting the sheet on which the image is formed to the post-processing apparatus (700).</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The image forming apparatus (1) according to claim 2,<!-- EPO <DP n="37"> --> wherein the notification means includes an image processing means (227) for subjecting an input image data to image processing and for transmitting the image data subjected to the image processing to the image forming means (4).</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The image forming apparatus (1) according to any preceding claim, further comprising a determination means (201) for determining whether power is supplied to the notification means, wherein, if the determination means determines that the supply of power to the notification means is stopped in a case where the execution means executes the shift processing, the power supply control means (501) is configured to control so that power is supplied to the notification means.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The image forming apparatus (1) according to claim 4, further comprising a storage means (6) for storing the power state of the image forming apparatus (1), wherein the determination means is configured to determine whether power is supplied to the notification means based on the power state of the image forming apparatus (1) stored in the storage means (6).</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The image forming apparatus (1) according to any preceding claim, further comprising a reception means for receiving a response to a notification transmitted from the notification means to the post-processing apparatus (700), wherein the execution means is configured to execute the shift<!-- EPO <DP n="38"> --> processing in response to the response received by the reception means.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The image forming apparatus (1) according to any preceding claim, further comprising a switch (301) which can be switched between an on-state or an off-state by a user's operation, wherein the execution means is configured to execute the shift processing in a case where the switch is switched to the off-state by the user's operation.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The image forming apparatus (1) according to claim 7, wherein the switch is a toggle switch capable of maintaining the on-state in which power can be supplied to the image forming apparatus (1) and the off-state in which power cannot be supplied to the image forming apparatus (1).</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The image forming apparatus (1) according to any preceding claim, wherein the execution means is configured to execute the shift processing in a case where the image forming system is not operated continuously for a predetermined period of time.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The image forming apparatus (1) according to any preceding claim, wherein the power saving state is any one of the off-state in which the supply of power to the image forming apparatus (1) is shut off, a hibernation state, or suspension state.<!-- EPO <DP n="39"> --></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A method for controlling an image forming apparatus (1) capable of communicating with a post-processing apparatus (700) via a notification means, the method comprising:
<claim-text>executing (S101) a shift processing for shifting the image forming apparatus (1) into a power saving state;</claim-text>
<claim-text>supplying, before the shift processing is executed, power to the notification means; and</claim-text>
<claim-text>notifying the post-processing apparatus (700) of an instruction to stop supply of power to the post-processing apparatus.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A program which, when executed by a computer of an image forming apparatus, causes the image forming apparatus to carry out the method of claim 11.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A program which, when executed by a computer of an image forming apparatus, causes the image forming apparatus to function as the image forming apparatus of any one of claims 1 to 10.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A storage medium storing the program according to claim 12 or claim 13.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>An image forming system equipped with an image forming apparatus (1) and a post-processing apparatus (700) configured to subject a sheet output from the image forming apparatus (1)<!-- EPO <DP n="40"> --> to post-processing, the image forming system comprising:
<claim-text>a first execution means for executing a first shift processing for shifting the image forming apparatus (1) into a power saving state;</claim-text>
<claim-text>a second shift means for executing a second shift processing for shifting the post-processing apparatus (700) into a power saving state;</claim-text>
<claim-text>a notification means for notifying the post-processing apparatus (700) of an instruction to shift the post-processing apparatus into the power saving state; and</claim-text>
<claim-text>a power supply control means (501) for controlling the supply of power to the first execution means and the notification means; wherein, if the supply of power to the notification means is stopped in a case where the first execution means executes the first shift processing, the power supply control means (501) is configured to control so that power is supplied to the notification means and the notification means supplied with power by the power supply control means (501) notifies the post-processing apparatus (700) of the instruction.</claim-text></claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The image forming system according to claim 15, wherein the notification means includes an image forming means for forming an image on a sheet based on a received image data and for outputting the sheet on which the image is formed to the post-processing apparatus (700).<!-- EPO <DP n="41"> --></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The image forming system according to claim 15 or claim 16, wherein the post-processing apparatus (700) further includes a reception means for receiving the instruction notified from the notification means to the post-processing apparatus (700) and the second execution means is configured to execute the second processing in response to the instruction received by the reception means.</claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>The image forming system according to any one of claims 15 to 17, wherein the image forming apparatus (1) is configured to be supplied with power from a first alternating current (AC) power supply, the post-processing apparatus (700) is configured to be supplied with power from a second AC power supply different from the first AC power supply, the first execution means is configured to execute the first shift processing to shut off the power supplied from the first AC power supply to the image forming apparatus (1), and the second execution means is configured to execute the second shift processing to shut off the power supplied from the second AC power supply to the post-processing apparatus (700).</claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>The image forming system according to any one of claims 15 to 18, wherein the post-processing apparatus (700) is configured to subject the sheet received from the image forming apparatus (1) to discharging, sorting, stapling, punching, or cutting.</claim-text></claim></claims><drawings mxw-id="PDW16666925" load-source="patent-office"><!-- EPO <DP n="42"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="165" he="211" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
