<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680608-A1" country="EP" doc-number="2680608" kind="A1" date="20140101" family-id="45360247" file-reference-id="315083" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549080" ucid="EP-2680608-A1"><document-id><country>EP</country><doc-number>2680608</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12822487-A" is-representative="YES"><document-id mxw-id="PAPP154823003" load-source="docdb" format="epo"><country>EP</country><doc-number>12822487</doc-number><kind>A</kind><date>20120316</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP178958725" load-source="docdb" format="original"><country>EP</country><doc-number>12822487.0</doc-number><date>20120316</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140451592" ucid="CN-201110229003-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110229003</doc-number><kind>A</kind><date>20110810</date></document-id></priority-claim><priority-claim mxw-id="PPC140449252" ucid="CN-2012072483-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2012072483</doc-number><kind>W</kind><date>20120316</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2114903983" load-source="docdb">H04R   3/00        20060101AFI20140912BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1928752584" load-source="docdb" scheme="CPC">H04R   1/1041      20130101 LA20160607BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1928754947" load-source="docdb" scheme="CPC">H04R   3/005       20130101 LA20160607BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1928756348" load-source="docdb" scheme="CPC">H04R2410/05        20130101 LA20160607BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1928756862" load-source="docdb" scheme="CPC">H04R2410/01        20130101 LA20160607BHEP        </classification-cpc><classification-cpc mxw-id="PCL2090176600" load-source="docdb" scheme="CPC">G10L  21/0208      20130101 FI20140619BHEP        </classification-cpc><classification-cpc mxw-id="PCL2090176601" load-source="docdb" scheme="CPC">H04R   1/1083      20130101 LI20140620BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179724" lang="DE" load-source="patent-office">SPRACHVERBESSERUNGSVERFAHREN UND -VORRICHTUNG FÜR KOMMUNIKATIONSKOPFHÖRER SOWIE KOMMUNIKATIONSKOPFHÖRER MIT RAUSCHMINDERUNG</invention-title><invention-title mxw-id="PT132179725" lang="EN" load-source="patent-office">COMMUNICATION HEADSET SPEECH ENHANCEMENT METHOD AND DEVICE, AND NOISE REDUCTION COMMUNICATION HEADSET</invention-title><invention-title mxw-id="PT132179726" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF D'AMÉLIORATION DE PAROLE DE CASQUE D'ÉCOUTE DE COMMUNICATION, ET CASQUE D'ÉCOUTE DE COMMUNICATION À RÉDUCTION DE BRUIT</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918146741" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GOERTEK INC</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918138697" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GOERTEK INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918981443" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Goertek Inc.</last-name><iid>101337770</iid><address><street>No. 268 Dong Fang Road Hi-Tech Industry Development District</street><city>Wei Fang, Shandong 261031</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918164041" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>LIU SONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918145528" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>LIU, SONG</last-name></addressbook></inventor><inventor mxw-id="PPAR918981294" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>LIU, SONG</last-name><address><street>NO.268 Dongfang Road Hi-Tech Industry Development District</street><city>Weifang Shandong 261031</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918171180" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LI BO</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918166998" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LI, BO</last-name></addressbook></inventor><inventor mxw-id="PPAR918991228" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LI, BO</last-name><address><street>NO.268 Dongfang Road Hi-Tech Industry Development District</street><city>Weifang Shandong 261031</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918170629" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>ZHAO JIAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918171079" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>ZHAO, JIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918986096" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>ZHAO, JIAN</last-name><address><street>NO.268 Dongfang Road Hi-Tech Industry Development District</street><city>Weifang Shandong 261031</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918980170" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Epping - Hermann - Fischer</last-name><iid>100061188</iid><address><street>Patentanwaltsgesellschaft mbH Ridlerstrasse 55</street><city>80339 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2012072483-W"><document-id><country>CN</country><doc-number>2012072483</doc-number><kind>W</kind><date>20120316</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2013020380-A1"><document-id><country>WO</country><doc-number>2013020380</doc-number><kind>A1</kind><date>20130214</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548801120" load-source="docdb">AL</country><country mxw-id="DS548834826" load-source="docdb">AT</country><country mxw-id="DS548839853" load-source="docdb">BE</country><country mxw-id="DS548843241" load-source="docdb">BG</country><country mxw-id="DS548840727" load-source="docdb">CH</country><country mxw-id="DS548839854" load-source="docdb">CY</country><country mxw-id="DS548834827" load-source="docdb">CZ</country><country mxw-id="DS548801121" load-source="docdb">DE</country><country mxw-id="DS548839855" load-source="docdb">DK</country><country mxw-id="DS548839856" load-source="docdb">EE</country><country mxw-id="DS548837343" load-source="docdb">ES</country><country mxw-id="DS548843242" load-source="docdb">FI</country><country mxw-id="DS548840728" load-source="docdb">FR</country><country mxw-id="DS548801122" load-source="docdb">GB</country><country mxw-id="DS548839857" load-source="docdb">GR</country><country mxw-id="DS548801123" load-source="docdb">HR</country><country mxw-id="DS548834828" load-source="docdb">HU</country><country mxw-id="DS548837344" load-source="docdb">IE</country><country mxw-id="DS548839858" load-source="docdb">IS</country><country mxw-id="DS548843243" load-source="docdb">IT</country><country mxw-id="DS548839859" load-source="docdb">LI</country><country mxw-id="DS548843244" load-source="docdb">LT</country><country mxw-id="DS548801981" load-source="docdb">LU</country><country mxw-id="DS548843245" load-source="docdb">LV</country><country mxw-id="DS548843246" load-source="docdb">MC</country><country mxw-id="DS548801986" load-source="docdb">MK</country><country mxw-id="DS548801987" load-source="docdb">MT</country><country mxw-id="DS548839860" load-source="docdb">NL</country><country mxw-id="DS548801124" load-source="docdb">NO</country><country mxw-id="DS548839861" load-source="docdb">PL</country><country mxw-id="DS548843247" load-source="docdb">PT</country><country mxw-id="DS548834829" load-source="docdb">RO</country><country mxw-id="DS548843248" load-source="docdb">RS</country><country mxw-id="DS548839862" load-source="docdb">SE</country><country mxw-id="DS548840729" load-source="docdb">SI</country><country mxw-id="DS548801125" load-source="docdb">SK</country><country mxw-id="DS548801126" load-source="docdb">SM</country><country mxw-id="DS548801988" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669751" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention provides a speech enhancing method for communication earphone including two parts: sending end noise reduction processing and receiving end noise reduction processing, wherein the sending end noise reduction processing part includes: determining a wearing condition of the earphone by comparing energy difference of sound signals picked up by microphones of the communication earphone; if the earphone is normally worn, subjecting the sound signal first to multi-microphone noise reduction and then to single channel noise reduction to further suppress residuary stationary noise; otherwise suppressing stationary noise in the sound signal by single channel noise reduction directly. With the present invention, it is possible to effectively multiplex signals picked up by a plurality of microphones, and acoustics signal processing and active noise control methods are respectively applied at both sending and receiving end of the communication earphones at the same time for speech enhancement, thereby ensuring high SNR of speech at both local and remote sides under noisy environment, providing highly clear and understandable speech signal for both sides.<img id="iaf01" file="imgaf001.tif" wi="78" he="61" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499124" lang="EN" source="EPO" load-source="docdb"><p>The present invention provides a speech enhancing method for communication earphone including two parts: sending end noise reduction processing and receiving end noise reduction processing, wherein the sending end noise reduction processing part includes: determining a wearing condition of the earphone by comparing energy difference of sound signals picked up by microphones of the communication earphone; if the earphone is normally worn, subjecting the sound signal first to multi-microphone noise reduction and then to single channel noise reduction to further suppress residuary stationary noise; otherwise suppressing stationary noise in the sound signal by single channel noise reduction directly. With the present invention, it is possible to effectively multiplex signals picked up by a plurality of microphones, and acoustics signal processing and active noise control methods are respectively applied at both sending and receiving end of the communication earphones at the same time for speech enhancement, thereby ensuring high SNR of speech at both local and remote sides under noisy environment, providing highly clear and understandable speech signal for both sides.</p></abstract><description mxw-id="PDES63955181" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Field of the Invention</heading><p id="p0001" num="0001">Present invention relates to the field of speech enhancement and noise reduction technology, more particularly, to a speech enhancing method and device for noise reduction at sending and receiving ends of a communication earphone by multiplexing sound signals picked up by a plurality of microphones, and a noise reducing communication earphone.</p><heading id="h0002">Background</heading><p id="p0002" num="0002">Development of informatization allows people to communicate at any moment and everywhere and widespread use of various communication equipments and technologies greatly facilitates life and enhances work efficiency. However, social development results in a severe issue, noise. In a noisy environment, definition and intelligibility of communication voice are severely compromised and when noise is high to a certain degree, communication can not proceed, and people's audition and physical and mental health will be injured.</p><p id="p0003" num="0003">In view of communication under very noisy background, existing art implements noise reduction through the following schemes: on the one hand, acoustics signal processing technology is applied at the sending end of communication<!-- EPO <DP n="2"> --> earphone to enhance Signal-to-Noise Ratio (SNR) of voice signal picked up by a microphone, allowing remote user to hear speech by the user of the communication earphone clearly. On the other hand, it is necessary to enhance SNR of voice at the receiving end of the communication earphone, allowing local earphone wearer to hear voice signal sent from the remote user clearly.</p><p id="p0004" num="0004">At present, common speech enhancing methods for sending end of a communication earphone are mainly to utilize a single or multiple common microphone to pick up signals and then realize speech enhancement with acoustics signal processing method.</p><p id="p0005" num="0005">Speech enhancement with a single microphone is generally referred to as single channel spectral subtraction speech enhancement technology (see China patent of invention publications <patcit id="pcit0001" dnum="CN1684143A"><text>CN1684143A</text></patcit> and <patcit id="pcit0002" dnum="CN101477800A"><text>CN101477800A</text></patcit>).This technology generally estimates energy of stationary noise in current voice by analyzing historical data and then achieve speech enhancement by canceling noise in voice with spectral subtraction method. However, this method can only suppress steady noise such as white noise and has limited noise reduction amount. Too big noise reduction amount may impair voice and for nonsteady noise such as surrounding voice noise and knocking noise, it is impossible to estimate its energy accurately, and hence impossible to cancel it effectively.</p><p id="p0006" num="0006">Another method that can effectively suppress nonsteady noise is to apply the speech enhancement technology with microphone array consisting of two or more microphones (see China patent of invention publications <patcit id="pcit0003" dnum="CN101466055A"><text>CN101466055A</text></patcit> and<!-- EPO <DP n="3"> --> <patcit id="pcit0004" dnum="CN1967158A"><text>CN1967158A</text></patcit>).With this technology, generally, a signal received by one microphone is used as reference signal, and noise component in signal picked up by another microphone is estimated and canceled out in real time with an adaptive filtering method, while leaving speech component, hence achieving speech enhancement purpose. The multi-microphone technology may suppress nonsteady noise and has noise reduction amount greater than that of single microphone technology. However, this method requires accurate detection of speech state, otherwise the speech may be canceled as noise.</p><p id="p0007" num="0007">Some prior multi-microphone technologies use directive microphones (see China patent of invention publication <patcit id="pcit0005" dnum="CN101466055A"><text>CN101466055A</text></patcit>) or a plurality of microphones to form directivity (see China patent of invention publication <patcit id="pcit0006" dnum="CN101466056A"><text>CN101466056A</text></patcit>) to detect voice from a specific direction, which is only applicable to the case of fixed microphone array shape and fixed location and direction with respect to user. When the user deviate from the directing scope of the microphone array or the shape or position of microphone array changes resulting microphone array direction deviating the user, the speech may be suppressed as noise. The case is for example as shown in <figref idrefs="f0001">Fig. 1</figref>, in which the microphone is mounted on earphone flexible cord.</p><p id="p0008" num="0008">In the communication earphone shown in <figref idrefs="f0001">Fig. 1</figref>, the microphone 112 is mounted on the earphone flexible cord. In specific application process, this earphone microphone is not fixed relative to the user's mouth and it forms a microphone array with non-fixed shape together with microphones mounted<!-- EPO <DP n="4"> --> on other positions of the earphone. In communication, the user would place the microphone on flexible cord at any location near the mouth. When the user places the microphone outside the directivity scope of the microphone array, speech may be treated as noise and then it is impossible to detect speech accurately with the directivity of microphone array.</p><p id="p0009" num="0009">Speech enhancing methods commonly used presently at receiving end of communication earphone mainly adopt two technologies. One is to adopt an automatic volume control technology (see China patent of invention publication <patcit id="pcit0007" dnum="CN1507293A"><text>CN1507293A</text></patcit>), i.e, automatically enhancing power supplied to the speaker unit when outside noise is high, which is a passive method limited by the industry standard for power of speaker unit itself and the sound pressure fed into ears by an inserted earplug. It is not possible to enhance volume of speaker unit unlimitedly, and the high intensity speech emitted by the speaker may damage the user's audition and physical and mental health. Another method is to apply a noise control technology that combines traditional active/passive technologies to a communication earphone (see China patent of invention publication <patcit id="pcit0008" dnum="CN101432798A"><text>CN101432798A</text></patcit>).The earphone may be classified into head worn and earplug. The earplug type earphone typically takes a sealed coupling form between leather sheathes and ears. On the one hand, sound absorption and sound isolation of materials is used to depress intermediate and high frequency noise. On the other hand, low frequency (mainly below 300Hz) noise is effectively depressed with active noise control technologies, thus realizing good control over outside noise in the full band<!-- EPO <DP n="5"> --> and enhancing SNR of speech at the receiving end of communication earphone effectively.</p><heading id="h0003">Summary of the Invention</heading><heading id="h0004">Technical Problem</heading><p id="p0010" num="0010">However, by long time wearing sealed communication earphone in earplug type, a user may feel unbalanced air pressure between inside and outside of the auditory canal. Therefore, discomfort when wearing the earphone is the main factor that constraints this configuration of active noise reduction technique from being widely used in communication earphones.</p><p id="p0011" num="0011">In addition, communication under strong noise circumstance requires noise reduction and enhancement for speech at both sending and receiving ends simultaneously (see China patent of invention <patcit id="pcit0009" dnum="CN101853667A"><text>CN101853667A</text></patcit>). For this technology in which speech enhancement for both communication sides is realized by adaptive filtering plus single channel noise reduction at the sending end and implementing closed feedback active noise reduction at the receiving end respectively, besides the above-mentioned limitations at sending and receiving ends respectively, there is also a problem that it's impossible to guarantee correlation and causality of noise, since the noise reference signal for local adaptive filtering is taken from the closed feedback active noise control system at the receiving end.<!-- EPO <DP n="6"> --></p><heading id="h0005">Technical solution</heading><p id="p0012" num="0012">In view of the above problem, an object of the present invention is to provide a technology for speech enhancement and noise reduction by multiplexing signals collected by a plurality of microphones, wherein the speech enhancement technology at the sending end identifies wearing condition of earphone according to energy difference of speech signals picked up by a plurality of microphones to select different noise reduction method, thereby ensuring speech will not be damaged no matter how the earphone is worn and achieving good noise reduction effect in case of normal wearing. While the non-closed feed-forward active noise control technology is applied to the receiving end to ensure comfortable wearing of earphones while reducing noise.</p><p id="p0013" num="0013">In accordance with one aspect of the present invention, there is provided a speech enhancing method for a communication earphone, said communication earphone comprising a sending end consisting of at least two microphones and a receiving end consisting of at least one microphone and one speaker, said method implementing noise reduction at the sending end and the receiving end of said communication earphone respectively by multiplexing a plurality of microphones' signals, wherein the noise reduction at said sending end comprises:</p><p id="p0014" num="0014">Determining a condition in which the communication earphone is worn by comparing difference in energies of sound signals picked up by microphones of the communication earphone with a preset threshold; if said energy difference is greater than a first preset threshold, it is determined<!-- EPO <DP n="7"> --> that said communication earphone is normally worn, and said sound signal being first subjected to multi-microphone noise reduction and then to single channel noise reduction to further suppress residuary stationary noise; otherwise, it is determined that said communication earphone is abnormally worn and suppressing stationary noise in said sound signal directly by single channel noise reduction.</p><p id="p0015" num="0015">A preferred scheme is as follows: the process of subjecting said sound signal to multi-microphone noise reduction specifically comprises: distinguishing speech signal components and noise signal components in said sound signal by comparing energy difference among components of various frequencies in said sound signal; subjecting said noise signal components to attenuation processing.</p><p id="p0016" num="0016">According to another aspect of the present invention, there is provided a communication earphone comprising a sending end consisting of at least two microphones and a receiving end consisting of at least one microphone and one speaker as well as a sending end noise reduction unit and a receiving end noise reduction unit, wherein said sending end noise reduction unit comprises:
<ul><li>a wearing condition determining module configured to determine a wearing condition of said communication earphone by comparing with a preset threshold an difference in energies of sound signals picked up by microphones constituting said sending end, and if said energy difference is greater than a first preset threshold, it is determined that said communication earphone is normally worn, otherwise<!-- EPO <DP n="8"> --> determining that said communication earphone is abnormally worn;</li><li>a multi-microphone noise reduction module configured to subject said sound signal to multi-microphone noise reduction processing when said communication earphone is normally worn;</li><li>a single channel noise reduction module configured to further suppress residuary stationary noise after said multi-microphone noise reduction module has subjected said sound signal to noise reduction processing, or to directly suppress the stationary noise in said sound signal if said communication earphone is abnormally worn.</li></ul></p><p id="p0017" num="0017">According to another aspect of the present invention, there is provided a speech enhancement device including a sending end noise reduction unit and a receiving end noise reduction unit wherein said sending end noise reduction unit includes:
<ul><li>a sending end noise reduction mode determining module configured to determine a noise reduction mode for said sending end by comparing an energy difference of sound signals picked up by microphones of said sending end;</li><li>a multi-microphone noise reduction module configured to subject said sound signal to multi-microphone noise reduction processing when said energy difference is greater than a first preset threshold;</li><li>a single channel noise reduction module configured to further suppress residuary stationary noise after said multi-microphone noise reduction module has subjected said sound signal to noise reduction processing, and subject stationary noise in said sound signal to suppressing process directly<!-- EPO <DP n="9"> --> when said energy difference is less than or equal to said first preset threshold.</li></ul></p><p id="p0018" num="0018">In addition, at the receiving end, the earplug design of the present invention takes a non-closed inserting structure to be inserted into ears to ensure comfort for long time wearing and at the same time, the feed-forward active noise control technology is implemented on the non-closed earphone to reduce noise on speech frequency band, ensuring high SNR of speech at the receiving end.</p><p id="p0019" num="0019">In one preferred implementation of the present invention, a howling detection unit is further added to adjust noise reduction processing mode for the receiving end in time by detecting a change of the sound signals picked up at the sending end, hence enhancing robustness of the system.</p><p id="p0020" num="0020">With the above-mentioned speech enhancing method for communication earphones, the communication earphone and the speech enhancement device according to the present invention, it is possible to effectively multiplex signals picked up by a plurality of microphones, and meanwhile acoustics signal processing methods are applied at both sending and receiving end of the communication earphones for speech enhancement, thereby ensuring high SNR of speech at both local and remote sides under noisy environment, providing highly clear and understandable speech signal for both sides.</p><p id="p0021" num="0021">To achieve the above described and related objects, one or more aspects of the present invention include features that will be described in detail hereinbelow and specifically defined in claims. The following description and accompanying drawings elaborate some illustrative aspects of the present<!-- EPO <DP n="10"> --> invention. However, these aspects only illustrate some of the various modes in which the principle of the present invention may be applied. Furthermore, it is intended that the present invention comprises all these aspects and their equivalents.</p><heading id="h0006">Brief Description of Drawings</heading><p id="p0022" num="0022">Other purposes and results of the present invention will be more clear and easy to understand by reference to the description with respect to drawings and contents of claims, and with more comprehensive understanding of the present invention. In the drawings:
<ul><li><figref idrefs="f0001">Fig. 1</figref> is a schematic diagram showing a configuration in prior art wherein a microphone is assembled on a communication earphone;</li><li><figref idrefs="f0001">Fig. 2</figref> is a diagram schematically showing structure of a communication earphone according to an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 3</figref> is a diagram schematically showing the structure of a communication earphone according to an embodiment of the present invention;</li><li><figref idrefs="f0002">Fig. 4</figref> is a flow chart showing the section of sending end noise reduction processing in a speech enhancing method for a communication earphone according to the present invention;</li><li><figref idrefs="f0003">Fig. 5</figref> is a schematic diagram showing a logical structure of a sending end noise reduction unit according to an embodiment of the present invention;</li><li><figref idrefs="f0003">Fig. 6</figref> is a flow chart showing the section of receiving end noise reduction processing in a speech enhancing method<!-- EPO <DP n="11"> --> for a communication earphone according to the present invention;</li><li><figref idrefs="f0004">Fig. 7</figref> is a schematic diagram showing a logical structure of a receiving end noise reduction unit according to an embodiment of the present invention;</li><li><figref idrefs="f0004">Fig. 8</figref> is a schematic diagram showing normal wearing condition of the earphone according to an embodiment of the present invention;</li><li><figref idrefs="f0004">Fig. 9</figref> is a schematic diagram showing abnormal wearing condition of the earphone according to an embodiment of the present invention.</li></ul></p><p id="p0023" num="0023">Identical reference numerals indicate similar or corresponding features or functions throughout the figures.</p><heading id="h0007">Embodiments</heading><p id="p0024" num="0024">In order to overcome shortages with prior art noise reduction solutions and effectively attenuate and suppress noise without damaging voice signal, according to the present invention, noise reduction is implemented at both sending end and receiving end at the same time and wearing conditions of the earphones are identified according to specific features of sound signals received by the multiple microphones, which primarily is the difference of energies between speech signal components and noise signal components contained therein, and respective speech enhancement and noise reduction methods are applied to make the noise reduction processing more targeted, hence ensuring speech quality and better noise reduction.</p><p id="p0025" num="0025">In the following, the flow of speech enhancing method and device structure proposed in the present invention will be<!-- EPO <DP n="12"> --> described in detail with a common communication earphone as an example.</p><p id="p0026" num="0026">The speech enhancing method for communication earphone according to the present invention relies essentially in effectively multiplexing sound signals collected by a microphone array, at the sending and receiving ends of a communication earphone, multi-microphone speech enhancement technology and non-closed feed-forward active noise control technology are applied respectively to enhance SNRs of speech at sending and receiving ends of a communication earphone under noisy environment, hence ensuring definition and intelligibility of speech in communication.</p><p id="p0027" num="0027">The present invention proposes a multi-microphone noise reduction technology at the sending end by recognition wearing condition of the user, which detects speech without using microphone directivity, but identify different wearing conditions of the user by detecting energy difference between a master signal and a reference signal in sound signals picked by microphone, so as to apply different noise reduction methods accordingly, thereby ensuring that noise reduction will not damage speech in case of non-fixed position or shape of the microphone. At the receiving end, the present invention adopts the non-closed feed-forward active noise control technology to effectively depressing noise signal in speech frequency band while ensuring wearing comfortability.</p><p id="p0028" num="0028">Specific embodiments of the present invention will be described in detail below with reference to the accompanying figures.<!-- EPO <DP n="13"> --></p><p id="p0029" num="0029">The speech enhancing method provided in the present invention for communication earphone implements noise reduction at both sending end and receiving end. Since in the present invention, noise reduction is implemented on the basis of multiplexing sound signal collected by microphones, the communication earphone adopted in the present invention includes a sending end consisting of at least two microphones, a receiving end consisting of at least one microphone and one speaker and a host for implementing noise reduction processing with respect to sound signals. <figref idrefs="f0001">Fig. 2</figref> is a diagram schematically showing structure of a communication earphone according to an embodiment of the present invention.</p><p id="p0030" num="0030">As shown in <figref idrefs="f0001">Fig. 2</figref>, the in-ear part of the communication earphone which is used in the present embodiment is a non-closed in-ear earplug, which can couple well with an ear, and be worn firmly and avoid complete sealing of ear canal, ensuring comfortability for long time wearing. The communication earphone includes a sending end, a receiving end, an earphone cord and a host 230, wherein the sending end utilizes signals collected by three microphones, the microphone 212 is fixed on the earphone cord, and the microphones 214 and 216 are mounted on the back of earphone rack post with opening facing outward. The receiving end includes two microphones 214 and 216 and two speakers 224 and 226.</p><p id="p0031" num="0031">Regarding this communication earphone, when the earphone is normally worn, the user may place the microphone 212 fixed to the earphone cord nearby his mouth (as shown in <figref idrefs="f0004">Fig.8</figref>) for communication. Since the microphone 212 is close to the<!-- EPO <DP n="14"> --> mouth, capable of picking up sound signal with high SNR, this microphone 212 will be regarded as the primary microphone. Since the microphones 214 and 216 are mounted on the back of earphone rack post with openings facing outward, and when the communication earphone is normally used, they are far away from the mouth, it is convenient for them to pick up good noise reference signal, these two microphones are regarded as reference microphones.</p><p id="p0032" num="0032">According to one specific implementation of the present invention, a communication earphone 300 applies three microphones, of which a block diagram is shown in <figref idrefs="f0002">Fig. 3</figref>, wherein the host side includes a DSP unit 200 and a receiving end noise reduction unit 700 consisting of analog circuits, the sending end noise reduction unit 400 of the DSP section fulfills speech enhancement at the sending end and at the same time a howling detection unit 500 provides a control signal for howling detection for the receiving end speech enhancement module; and a receiving end noise reduction unit 700 implements noise reduction at the receiving end for speech signals. Among them, the host side may be separately realized with DSP plus some analog circuits and may also be realized as a part of some audio equipment or a cellular phone.</p><p id="p0033" num="0033">Notably, although the embodiment shown in <figref idrefs="f0002">Fig. 3</figref> employs 3 microphones, other number of microphones may also be used in specific applications of the present invention, say, only two microphones such as 214 and 216 each mounted on the rack post. Then there is no difference between the primary microphone and the reference microphone, it is enough to use<!-- EPO <DP n="15"> --> only the single channel noise reduction mode. If two microphones such as 212 and 214 mounted on the earphone cord and the back of rack post respectively are employed, the multi-microphone noise reduction mode and/or single channel noise reduction mode may be chosen according to user's wearing condition. Alternatively, more microphones may be used according to specific requirements for communication products to better pick up useful speech signal and noise signal, then it is possible to determine whether there are primary and secondary microphones based on sound signals picked up specifically by microphones and adopt a respective noise reduction mode accordingly.</p><p id="p0034" num="0034">The speech enhancing method and device according to the present invention will be described below in terms of two sections, i.e., sending end and receiving end.</p><p id="p0035" num="0035"><figref idrefs="f0002">Fig. 4</figref> is a flow chart showing a noise reduction processing at the sending end in a speech enhancing method for a communication earphone according to the present invention.</p><p id="p0036" num="0036">As shown in <figref idrefs="f0002">Fig. 4</figref>, the flow of the noise reduction processing for the sending end includes:
<ul><li>S410: determining energy difference between signals picked up by microphones at receiving end of the communication earphone by comparing energies of sound signals picked up by the microphones, wherein a sound signal includes a speech signal and a noise signal;</li><li>S420: identifying wearing condition of the earphone by determining whether the obtained energy difference is greater<!-- EPO <DP n="16"> --> than a first preset threshold, if greater than the first preset threshold, the earphone is normally worn as shown in <figref idrefs="f0004">Fig. 8</figref>, the flow proceeds to step S430, otherwise the earphone is abnormally worn as shown in <figref idrefs="f0004">Fig. 9</figref>, the flow proceeds to step S440;</li><li>S430: subjecting the picked up sound signal to multi-microphone noise reduction;</li><li>S440: suppressing stationary noise in the sound signal by single channel noise reduction.</li></ul></p><p id="p0037" num="0037"><figref idrefs="f0003">Fig. 5</figref> is a schematic diagram showing a logical structure of a sending end noise reduction unit that uses acoustic signal processing method for speech enhancement at the sending end of the communication earphone according to an embodiment of the present invention.</p><p id="p0038" num="0038">As shown in <figref idrefs="f0003">Fig. 5</figref>, the sending end noise reduction unit 400 includes a wearing condition determining module 420, a multi-microphone noise reduction module 440 and single channel noise reduction module 460.</p><p id="p0039" num="0039">Among them, the wearing condition determining unit 420 is configured to determine wearing condition of communication earphones by comparing energy difference of sound signals picked up by microphones consisting the sending end, if the energy difference is greater than a first preset threshold, it is determined said communication earphone is normally worn, otherwise, it is determined that said communication earphone is abnormally worn, wherein the picked up sound signal includes a speech signal and a noise signal.<!-- EPO <DP n="17"> --></p><p id="p0040" num="0040">The multi-microphone noise reduction module 440 is configured to subject the picked up sound signal to multi-microphone noise reduction processing if the above-mentioned energy difference is greater than the first preset threshold and the communication earphone is normally worn.</p><p id="p0041" num="0041">The single channel noise reduction module 460 is configured to further suppress residuary stationary noise after the multi-microphone noise reduction module 440 has subjected the sound signal to noise reduction processing, and subject stationary noise in the sound signal to suppressing processing directly if the above-mentioned energy difference is less than or equal to the first preset threshold and the communication earphone is in abnormal wearing condition.</p><p id="p0042" num="0042">The noise reduction processing method at the sending end and the noise reduction processing module of the present invention will be described in more detail below with reference to <figref idrefs="f0002">Figs. 3, 4</figref> and <figref idrefs="f0003">5</figref>.</p><p id="p0043" num="0043">When the earplug of the communication earphone is in wearing condition, the distances and positions of microphone 214 and 216, which are regarded as reference microphones in the present invention, with respect to the mouth are substantially determined, the sound signals picked up by microphone 214 and 216 are regarded as reference signals. When normally used, microphone 212 is placed to a position very close to mouth of a user, which is regarded as the primary microphone in the present invention and the picked up sound signal is regarded as primary signal.</p><p id="p0044" num="0044">However, there is a large uncertainty for the position of the microphone 212 in practical use. It may be very close to<!-- EPO <DP n="18"> --> the mouth or may be at a distance to the mouth equivalent to that of microphones 214 and 216. Typically, it is defined as normal wearing mode where the microphone 212 is close to the mouth, in which case the microphone 212 picks up a primary signal stronger than the reference signal picked up by microphones 214 and 216, in a general communication environment in a voice-sending state, the primary signal is typically higher than the reference signal by 6dB or more; while it's defined as an abnormal wearing mode when the microphone 212 moves away from the mouth, in which case the microphone 212 picks up a primary signal with energy approximated to that of the reference signals picked up by microphones 214 and 216. With this feature, it is possible to determine whether the earphone is in normal wearing condition by comparing energy difference between sound signals picked up by the primary and reference microphone respectively given that the primary microphone and the reference microphone have been distinguished.</p><p id="p0045" num="0045">Specifically, as an example, in the process of determining the energy difference, firstly, signals collected by the primary microphone 212 and the reference microphone 214 are grouped into two frames of data respectively with each frame consisting of N (N= 512) sampling points. Sums of energy for the two frames of data, P_ 112 and P_ 114 are evaluated. Then the ratio of energy sum Rp= P_ 112 / P_ 114 is calculated. When Rp is greater than a threshold Rth (e.g., Rth&gt;6dB), it is a normal wearing mode, in which case the sound signal is subjected to multi-microphone noise reduction processing by using the multi-microphone noise reduction unit<!-- EPO <DP n="19"> --> 460 subjects and then to single channel noise reduction. When Rp is smaller than the threshold Rth, it's an abnormal wearing mode, it is impossible to distinguish speech and noise very well. If the multi-microphone noise reduction is also applied, speech may be suppressed as noise, therefore only single channel noise reduction unit 480 is used for noise reduction to avoid speech damage.</p><p id="p0046" num="0046">Among them, the multi-microphone noise reduction module 440 includes a sound signal component distinguishing module 442 and a noise signal attenuating module 444. The sound signal component distinguishing module 442 is configured to evaluate energy difference among frequency components in the sound signal to distinguish speech signal components and noise signal components in the sound signal. The noise signal attenuating module 444 is configured to subject the noise signal components distinguished by the sound signal component distinguishing module 442 to attenuation processing.</p><p id="p0047" num="0047">Specifically, for example, when a user is normally wearing the earphone, speech signal components picked up by the microphone 212 in the near field are larger than those picked by microphones 214 and 216 by 6dB or more, while microphones 214, 216 and 212 pick up noise components having equivalent energies. Therefore, the multi-microphone noise reduction unit 460 utilizes the energy difference among frequency components in signals picked up by the microphone 212 and the microphone 214 (namely, primary microphone and reference microphone) to distinguish speech component from noise component and subjects noise components to noise reduction processing.<!-- EPO <DP n="20"> --></p><p id="p0048" num="0048">First of all, the sound signal component distinguishing module 442 distinguishes speech signal and noise signal. The specific processing thereof includes:</p><p id="p0049" num="0049">Subjecting one frame of data of microphones 112 and 214 to fast Fourier transform respectively to transform time domain data into frequency components Fi_112 and Fi_114 (i stands for the i<sup>th</sup> frequency component);</p><p id="p0050" num="0050">Calculating energy Pi_112 and Pi_114 for each frequency and comparing energies of each frequency component to obtain an energy ratio Ri= Pi_112 /Pi_114;</p><p id="p0051" num="0051">When Ri is greater than a threshold Rthi (Rthi&gt;6dB), the i<sup>th</sup> frequency component is determined as speech; when Ri is smaller than Rthi (Rthi&gt;6dB), the i<sup>th</sup> frequency component is noise.</p><p id="p0052" num="0052">Then, the speech component is kept, and the noise signal attenuating module 444 attenuates the noise components. That is, when Ri is greater than threshold Rthi (Rthi&gt;6dB), Fi_112 is left as is; when Ri is smaller than threshold Rthi (Rthi&gt;6dB), Fi_112 is multiplied by a gain Gi (0&lt;Gi&lt;1) to achieve noise reduction effect.</p><p id="p0053" num="0053">Finally, the processed Fi_112 is subjected to reverse Fourier transform to obtain pure speech signal where noise has been reduced.</p><p id="p0054" num="0054">The principle of noise reduction of the single channel noise reduction module 460 in the present invention is as follows: since noises are statistically steady, energy of steady noise in each frequency band of input signal is<!-- EPO <DP n="21"> --> calculated and then canceled. In one implementation of the present invention, the single channel noise reduction module 460 includes a noise energy calculating module 462 and a noise energy canceling module 464, wherein the noise energy calculating module 462 is configured to calculate noise energy of various frequencies in the sound signal with a smoothing averaging method; and the noise energy canceling module 464 is configured to cancel noise energy calculated by the noise energy calculating module 462 in the sound signal so as to further reduce noise components and reserve speech components, realizing the effect of enhancing SNR of speech signal.</p><p id="p0055" num="0055">In the present invention, the feed-forward active noise control method is applied at the receiving end for noise reduction. The in-ear part of the communication earphone takes non-closed earplug structure, which mainly serves to ensure a constant air pressure inside ear canal before and after the wearing earphone, so as to ensure comfort for long time wearing. While a microphone adopting feed-forward active noise control is generally located at an external surface of the communication earphone to pick up as much as possible outside noises. Therefore, this communication earphone applying feed-forward active noise control is configured to generally satisfy causality required by the system. Sound propagating from front of the microphone necessarily arrives at the microphone first, then arrives at ears, and noises coming in other directions are basically also picked up by the microphone first, since it has to be diffracted by the head.<!-- EPO <DP n="22"> --></p><p id="p0056" num="0056"><figref idrefs="f0003">Fig. 6</figref> is a flow chart showing the section of noise reduction processing in a speech enhancing method at the receiving end of a communication earphone according to the present invention.</p><p id="p0057" num="0057">As shown in <figref idrefs="f0003">Fig. 6</figref>, in the present invention, the process of applying the feed-forward active noise control method at the receiving end to reduce noise signal in the frequency band of the received speech specifically includes:
<ul><li>S610: picking up a noise signal by the microphone at the receiving end of the communication earphone;</li><li>S620: determining an antinoise signal according to the picked up noise signal;</li><li>S630: superimposing the determined antinoise signal and the speech signal received at the receiving end and then feeding it into ears via a speaker constituting the receiving end, with said antinoise and the original noise entering ears being canceled out with each other while the speech signal remaining unchanged, thus reducing the noise signal in the frequency band of received speech.</li></ul></p><p id="p0058" num="0058">Further, in the process of determining antinoise signal according to noise signal in step S620, first inverting the noise signal by an inverter to obtain a primary antinoise signal; then utilizing a phase compensator to modify and adjust the phase of the primary antinoise signal in the range of audio frequency, so as to obtain the antinoise signal with a phase exactly opposite to that of said noise signal, and applying an active filter implemented by twin T network to<!-- EPO <DP n="23"> --> compensate for phase loss at low frequency part caused by the non-closed structure.</p><p id="p0059" num="0059"><figref idrefs="f0004">Fig. 7</figref> is a schematic diagram showing a logical structure of a receiving end noise reduction unit according to an embodiment of the present invention.</p><p id="p0060" num="0060">As shown in <figref idrefs="f0004">Fig. 7</figref>, the receiving end noise reduction unit 700 includes a noise signal determining module 720, an antinoise signal determining module 740 and an output signal mixing module 760, wherein the antinoise signal determining module 740 may include an inverter 743 and a phase compensator 744.</p><p id="p0061" num="0061">The noise signal picking module 720 is configured to pick up a noise signal with the microphone at the receiving end of the communication earphone. Since when the receiving end is receiving speech signal from far field, the sound signal picked up by the microphone is generally regarded as a noise signal totally, the microphones 214 and 216 mounted on the back of earphone rack post are equivalent to the noise signal picking module 720. The antinoise signal determining module 740 is configured to obtain an antinoise signal according to the noise signal determined by the noise signal determining module 720. The output signal mixing module 760 is configured to superimpose the antinoise signal obtained by the antinoise signal determining module 740 and the speech signal received at the receiving end and then feeding it into ears via a speaker 224 constituting the receiving end, with said antinoise and the original noise entering ears (transmitting via natural acoustics channel) being canceled out with each<!-- EPO <DP n="24"> --> other while speech signal remaining unchanged, thus reducing the noise signal in the frequency band of received speech.</p><p id="p0062" num="0062">The inverter 742 is configured to invert said noise signal and obtain the primary antinoise signal.</p><p id="p0063" num="0063">The phase compensator 744 is configured to modify and adjust the phase of the primary antinoise signal in the range of audio frequency, and obtain an antinoise signal with a phase exactly opposite to that of said noise signal, and apply an active filter implemented by twin T network to compensate for phase loss at low frequency part caused by the non-closed structure.</p><p id="p0064" num="0064">In addition, the receiving end noise reduction unit 700 may further include a first amplifier 730 and second amplifier 750, wherein the first amplifier 730 is configured to amplify the noise signal picked up by the noise signal picking module 720, and the second amplifier 750 is configured to amplify the mixed signal resulted from superimposing the antinoise signal and speech signal.</p><p id="p0065" num="0065">Specifically, as an example, the noise signal picked up by the microphone 214 is amplified by a first pre-amplifier 730, and then processed by an inverter 742 and a phase compensator 744 to generate an antinoise signal with identical amplitude and opposite phase with respect to the original noise.</p><p id="p0066" num="0066">The phase compensator 744 mainly functions to address time delay problem with the feed-forward active noise control technology when applied to a non-closed communication earphone, which modifies and adjusts the phase of the antinoise signal in audio frequency range accordingly by<!-- EPO <DP n="25"> --> using the circuits to allow the antinoise has a phase exactly opposite to that of the original noise. It's generally implemented by using a passive or active twin T network.</p><p id="p0067" num="0067">The antinoise signal and the input speech signal are mixed via an output signal mixing module consisting of an adder to be input to the second amplifier 750 as a back end that amplifying the mixed signal including antinoise and speech signal to drive speaker 224 directly.</p><p id="p0068" num="0068">Similarly, the noise signal picked up by the microphone 216 is amplified by the first pre-amplifier 730, inverted by the inverter 742, compensated by the phase compensator 744, mixed by the adder and amplified by the second amplifier 750, and then drives the speaker 226 directly.</p><p id="p0069" num="0069">The first pre-amplifier 730 of the microphone, the inverter 742, the phase compensator 744, the adder, the second power amplifier 750 of the speaker may separately be implemented by individual devices, and it is also possible to implement one or several module's functions with one device.</p><p id="p0070" num="0070">The mixed signal resultant from superimposing an antinoise and speech signal is converted into acoustic signal via the speaker to be fed into ears, the antinoise signal emitted from the speaker and the original noise signal propagated into ears from an acoustics channel have same amplitude and opposite phases, therefore they may be superposed with each other and canceled out at ears, thereby canceling original noise and antinoise at the same time. Therefore, noise is reduced, while speech energy remains unchanged, which effectively enhances SNR of a speech signal<!-- EPO <DP n="26"> --> and what propagates into ears will be clear, understandable and pure speech signal.</p><p id="p0071" num="0071">For conventional earphone adopting enclosed feed-forward active noise control, outside noise must pass through passive sound insulation material to propagate from the reference microphone to ears, which would increase delay of the acoustics channel, thereby allowing longer time for processing for the electronic channel to ensure causality of the system. In order to address the time delay problem with the feed-forward active noise control technology when applied to a communication earphone in non-closed structure, it is necessary to design the system in two aspects. First, a good design and processing is needed for front and back cavity of the individual speaker, the size and opening of the front and back cavity need to be adjusted to improve phase response in audio frequency range from the speaker to ears. Secondly, it is necessary to phase compensate the inverter via the circuit to modify and compensate for time delay using the circuit itself, in the hope of good noise reduction effect in the entire audio frequency range.</p><p id="p0072" num="0072">From the viewpoint of distance design between the microphone and ears, on the one hand, it is expected the closer the better. The closer the microphone is from the ears, the better the noise relevance of the two points is, the better the noise cancellation is. On the other hand, it is required that there is a certain distance between the microphone and ears to allow a longer time for electronic processing, during which noise is propagating from microphone to ears. In addition, it is necessary to keep a<!-- EPO <DP n="27"> --> certain spatial distance and good acoustics isolation between the microphone and speaker to prevent signals emitted by the speaker from being picked up by the microphone, avoiding that noise signal picked up by the microphone includes useful speech signal and avoiding a feedback loop with feedback howling in this system. If there is any feedback loop, there may be howling phenomena if the system gain is too high.</p><p id="p0073" num="0073">In addition, for the earphone applying non-closed feed-forward active noise reduction, there is an intrinsic leaking channel between the speaker and the reference microphone that picks up outside noise. When the earphone is normally worn, the acoustics transfer function between the speaker and the reference microphone has very small amplitude, therefore in normal use, the non-closed feed-forward active noise control technology will not degrade speech signal and the system has no howling phenomena. However, when the earphone is placed in a closed or semi-closed space, the amplitude of the acoustics transfer function between the speaker and the reference microphone will increase sharply, especially for the high frequency part.</p><p id="p0074" num="0074">This kind of acoustics transfer function with large amplitude, together with a control circuit with high gain, forms a closed loop feedback system, and when the amplitude and phase of the closed loop feedback system satisfy certain conditions, the system will encounter self-excitation howling, which is a robustness problem.</p><p id="p0075" num="0075">Therefore, in one preferred implementation of the present invention, the DSP unit further includes a howling detection unit for providing a howling detection control signal to the<!-- EPO <DP n="28"> --> receiving end speech enhancement module. Specifically, when energy of a certain frequency in a frequency spectrum of the sound signal picked up by the microphone of the communication earphone is higher than energy of other frequency band by a preset value or more and the energy of this certain frequency is increasing continuously, the noise reduction processing at the receiving end is autonomously modulated by the control signal.</p><p id="p0076" num="0076">Generally, if it is determined that the energy at a certain frequency is higher than energy of other frequency band by 10dB or more and the energy at this frequency is still increasing, it is determined that the system is in abnormal condition, and the howling detection unit would output a control signal to modulate the active noise control circuit. The control mode may be implemented by lowering the gain of the first amplifier or directly disconnecting the power supply of the active noise control circuit.</p><p id="p0077" num="0077">For speech signals at the sending end and receiving end, it may be connected with other equipments in a wired mode, or in a wireless mode such as Blue Tooth.</p><p id="p0078" num="0078">In the above, a technology and device for enhancing SNR of speech at sending and receiving end of a communication earphone in noisy environment according to the present invention have been described with respect to drawings and multiple specific implementations. It is understood that those skilled in the art can implement various applications and modifications to the specific device and technology disclosed herein without any creative efforts and without departing from the concept of the present invention and the<!-- EPO <DP n="29"> --> applications and modifications may be different from specific device and technology disclosed herein. Therefore, the present invention should be understood to include each novel feature and the combination thereof demonstrated by means of the device and technology disclosed herein, and all equivalent modifications and changes made by those of ordinary skill in the art according to contents disclosed by the present invention fall within the protection scope defined in the claims.</p></description><claims mxw-id="PCLM56976094" lang="EN" load-source="patent-office"><!-- EPO <DP n="30"> --><claim id="c-en-0001" num="0001"><claim-text>A speech enhancing method for a communication earphone, said communication earphone comprising a sending end consisting of at least two microphones and a receiving end consisting of at least one microphone and one speaker, said method implementing noise reduction at both the sending end and the receiving end of said communication earphone respectively by multiplexing a plurality of microphones' signals, wherein the noise reduction processing at said sending end comprises:
<claim-text>determining a wearing condition of said communication earphone by determining energy difference among sound signals picked up by the microphones constituting the sending end;</claim-text>
<claim-text>if said energy difference is greater than a first preset threshold, determining that said communication earphone is normally worn, said sound signal being first subjected to multi-microphone noise reduction and then to single channel noise reduction to further suppress residuary stationary noise; otherwise,</claim-text>
<claim-text>determining that said communication earphone is abnormally worn and suppressing stationary noise in said sound signal directly by single channel noise reduction.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The speech enhancing method for a communication earphone according to claim 1, wherein the process of subjecting said sound signal to multi-microphone noise reduction specifically comprises:<!-- EPO <DP n="31"> -->
<claim-text>distinguishing speech signal components and noise signal components in said sound signal by comparing energy difference among frequency components in said sound signal;</claim-text>
<claim-text>subjecting said noise signal components to attenuation processing.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The speech enhancing method for a communication earphone according to claim 2, wherein in the process of distinguishing speech signal components and noise signal components in said sound signal by comparing energy difference among frequency components in said sound signal,<br/>
if the energy difference of a certain frequency component in said sound signal is greater than a second preset threshold, the frequency component of which the energy difference is greater than said second preset threshold is determined as a speech signal component;<br/>
if the energy difference of a certain frequency component in said sound signal is less than or equal to said second preset threshold, the frequency component of which the energy difference is less than or equal to said second preset threshold is determined as a noise signal component.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The speech enhancing method for a communication earphone according to claim 1, wherein the process of suppressing stationary noise by single channel noise reduction specifically comprises:
<claim-text>calculating energies of noises of various frequencies in said sound signal by a smooth-average method;</claim-text>
<claim-text>removing said energies of noises in said sound signal.</claim-text><!-- EPO <DP n="32"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The speech enhancing method for a communication earphone according to any one of claims 1 to 4, wherein an in-ear part of said communication earphone has a non-closed earplug structure, and the position where the speaker of said communication earphone is coupled with the ear canal is relatively constant under normal wearing condition; and the noise reduction processing at said receiving end comprises:
<claim-text>utilizing microphones constituting said receiving end to pick up a noise signal;</claim-text>
<claim-text>obtaining an antinoise signal according to said noise signal;</claim-text>
<claim-text>mixing said antinoise signal with said speech signal received by the receiving end and feeding it into ears via the speaker constituting the receiving end.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The speech enhancing method for a communication earphone according to claim 5, wherein in the process of obtaining the antinoise signal according to said noise signal,<br/>
inverting said noise signal to by an inverter to obtain a primary antinoise signal;<br/>
then modifying and adjusting the phase of said primary antinoise signal in audio frequency range utilizing a phase compensator, to obtain an antinoise signal with a phase exactly opposite to that of said noise signal, wherein said phase compensator comprises an active filter implemented by a twin T network to compensate for phase loss at low frequency part caused by the non-closed structure.<!-- EPO <DP n="33"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The speech enhancing method for a communication earphone according to claim 1, wherein said method further comprises a process of detecting and suppressing howling, which specifically comprising:
<claim-text>if the energy of a certain frequency of the frequency spectrum of the sound signal picked up by microphones of said communication earphone is higher than that of other frequency bands by a preset value or more and the energy of said frequency is still increasing, then autonomously adjusting the noise reduction at said receiving end.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A communication earphone comprising a sending end consisting of at least two microphones and a receiving end consisting of at least one microphone and one speaker as well as a sending end noise reduction unit and a receiving end noise reduction unit, wherein said sending end noise reduction unit comprises:
<claim-text>a wearing condition determining module configured to determine a wearing condition of said communication earphone by comparing an energy difference of sound signals picked up by the microphones constituting said sending end, and if said energy difference is greater than a first preset threshold, then determining that said communication earphone is normally worn, otherwise determining that said communication earphone is abnormally worn;</claim-text>
<claim-text>a multi-microphone noise reduction module configured to subject said sound signal to multi-microphone noise reduction processing when said communication earphone is normally worn;<!-- EPO <DP n="34"> --></claim-text>
<claim-text>a single channel noise reduction module configured to further suppress residuary stationary noise after said multi-microphone noise reduction module has subjected said sound signal to noise reduction processing, or subject steady state noise in said sound signal to suppressing processing directly if said communication earphone is abnormally worn.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The communication earphone according to claim 8, wherein said multi-microphone noise reduction module further comprises:
<claim-text>a sound signal component distinguishing module configured to distinguish speech signal components and noise signal components in said sound signal by comparing energy difference among frequency components in said sound signal;</claim-text>
<claim-text>a noise signal attenuating module configured to subject said noise signal components to attenuation processing.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The communication earphone according to claim 8, wherein said single channel noise reduction module further comprises:
<claim-text>a noise energy calculating module configured to calculate noise energies of various frequencies in said sound signal by a smooth-average method;</claim-text>
<claim-text>a noise energy removing module configured to remove said noise energy in said sound signal.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The communication earphone according to any one of claims 8 to 10, wherein an in-ear part of said communication earphone has a non-closed earplug structure, and a position<!-- EPO <DP n="35"> --> where the speaker of said communication earphone is coupled with ear canal is relatively constant under normal wearing condition; and said receiving end noise reduction unit comprises:
<claim-text>A noise signal picking up module configured to pick up a noise signal utilizing microphones constituting said receiving end;</claim-text>
<claim-text>an antinoise signal determining module configured to obtain an antinoise signal according to said noise signal;</claim-text>
<claim-text>an output signal mixing module configured to superimposing said antinoise signal and said speech signal received by the receiving end and feeding it into ears via the speaker constituting the receiving end.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The communication earphone according to claim 11, wherein said antinoise signal determining module further comprises:
<claim-text>an inverter configured to invert said noise signal and obtain a primary antinoise signal;</claim-text>
<claim-text>a phase compensator configured to modify and adjust the phase of the primary antinoise signal in audio frequency range, in order to obtain an antinoise signal with a phase exactly opposite to that of said noise signal and apply an active filter implemented by a twin T network to compensate for phase loss at low frequency part caused by the non-closed structure.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The communication earphone according to claim 8, said communication earphone further comprises:<!-- EPO <DP n="36"> -->
<claim-text>a howling detection unit configured to autonomously adjust the noise reduction at said receiving end by a control signal, if the energy of a certain frequency of a frequency spectrum of the sound signal picked up by microphones of said communication earphone is higher than that of other frequency bands by a preset value or more and the energy of said frequency is still increasing.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16666879" load-source="patent-office"><!-- EPO <DP n="37"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="119" he="206" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="160" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="149" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0004" num="7,8,9"><img id="if0004" file="imgf0004.tif" wi="165" he="226" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="163" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
