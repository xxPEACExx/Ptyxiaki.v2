<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680469-A1" country="EP" doc-number="2680469" kind="A1" date="20140101" family-id="44194918" file-reference-id="315044" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549219" ucid="EP-2680469-A1"><document-id><country>EP</country><doc-number>2680469</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13186053-A" is-representative="NO"><document-id mxw-id="PAPP154823142" load-source="docdb" format="epo"><country>EP</country><doc-number>13186053</doc-number><kind>A</kind><date>20091224</date><lang>EN</lang></document-id><document-id mxw-id="PAPP179320830" load-source="docdb" format="original"><country>EP</country><doc-number>13186053.8</doc-number><date>20091224</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445391" ucid="CN-2009075987-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2009075987</doc-number><kind>W</kind><date>20091224</date></document-id></priority-claim><priority-claim mxw-id="PPC140453926" ucid="EP-09852451-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>09852451</doc-number><kind>A</kind><date>20091224</date></document-id></priority-claim><priority-claim mxw-id="PPC140450622" ucid="EP-13186053-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>13186053</doc-number><kind>A</kind><date>20091224</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988099798" load-source="docdb">H04J   3/16        20060101AFI20131112BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2032834070" load-source="docdb" scheme="CPC">H04L  47/12        20130101 LI20150806BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2123395070" load-source="docdb" scheme="CPC">H04J   3/07        20130101 LI20141220BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2123400087" load-source="docdb" scheme="CPC">H04J   3/12        20130101 LI20141220BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2123401602" load-source="docdb" scheme="CPC">H04J   3/1652      20130101 FI20141222BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180141" lang="DE" load-source="patent-office">Verfahren und Vorrichtung für GMP-Mapping und -Demapping</invention-title><invention-title mxw-id="PT132180142" lang="EN" load-source="patent-office">Method and apparatus for generic mapping procedure (GMP) mapping and demapping</invention-title><invention-title mxw-id="PT132180143" lang="FR" load-source="patent-office">Procédé et dispositif pour mappage et démappage GMP</invention-title><citations><non-patent-citations><nplcit><text>"Interfaces for the Optical Transport Network (OTN); G.709/Y.1331 (12/09)", ITU-T STANDARD, INTERNATIONAL TELECOMMUNICATION UNION, GENEVA ; CH, no. G.709/Y.1331 (12/09), 22 December 2009 (2009-12-22), pages 1 - 218, XP017575192</text><sources><source mxw-id="PNPL55258375" load-source="docdb" name="SEA" category="XD"/></sources></nplcit><nplcit><text>None</text><sources><source mxw-id="PNPL67455020" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><related-documents><relation type="division"><child-doc ucid="EP-13186053-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>13186053</doc-number><kind>A</kind><date>20091224</date></document-id></child-doc><parent-doc ucid="EP-09852451.5"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>09852451.5</doc-number><date>20091224</date></document-id><parent-grant-document ucid="EP-2518913-B1"><document-id><country>EP</country><doc-number>2518913</doc-number><kind>B1</kind><date>20131211</date></document-id></parent-grant-document></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR918148604" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918140592" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918993533" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>100970540</iid><address><street>Huawei Administration Building Bantian</street><city>Longgang District, Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918149914" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SU WEI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918158982" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SU, WEI</last-name></addressbook></inventor><inventor mxw-id="PPAR918983282" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SU, WEI</last-name><address><street>c/o Huawei Technologies Co., Ltd., Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen Guangdong</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918172562" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>DING CHIWU</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918155399" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>DING, CHIWU</last-name></addressbook></inventor><inventor mxw-id="PPAR918989816" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>DING, CHIWU</last-name><address><street>c/o Huawei Technologies Co., Ltd., Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen Guangdong</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918143858" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>DONG LIMIN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918158103" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>DONG, LIMIN</last-name></addressbook></inventor><inventor mxw-id="PPAR918980816" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>DONG, LIMIN</last-name><address><street>c/o Huawei Technologies Co., Ltd., Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen Guangdong</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918150835" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>XIANG JUNLING</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918141996" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>XIANG, JUNLING</last-name></addressbook></inventor><inventor mxw-id="PPAR918990167" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>XIANG, JUNLING</last-name><address><street>c/o Huawei Technologies Co., Ltd., Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen Guangdong</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918993020" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Reinhard - Skuhra - Weise &amp; Partner GbR</last-name><iid>100060500</iid><address><street>Patent- und Rechtsanwälte Friedrichstrasse 31</street><city>80801 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548849585" load-source="docdb">AT</country><country mxw-id="DS548803477" load-source="docdb">BE</country><country mxw-id="DS548855398" load-source="docdb">BG</country><country mxw-id="DS548873062" load-source="docdb">CH</country><country mxw-id="DS548838508" load-source="docdb">CY</country><country mxw-id="DS548849586" load-source="docdb">CZ</country><country mxw-id="DS548803478" load-source="docdb">DE</country><country mxw-id="DS548838509" load-source="docdb">DK</country><country mxw-id="DS548838510" load-source="docdb">EE</country><country mxw-id="DS548855371" load-source="docdb">ES</country><country mxw-id="DS548855399" load-source="docdb">FI</country><country mxw-id="DS548855400" load-source="docdb">FR</country><country mxw-id="DS548803479" load-source="docdb">GB</country><country mxw-id="DS548838511" load-source="docdb">GR</country><country mxw-id="DS548803480" load-source="docdb">HR</country><country mxw-id="DS548849587" load-source="docdb">HU</country><country mxw-id="DS548873063" load-source="docdb">IE</country><country mxw-id="DS548838512" load-source="docdb">IS</country><country mxw-id="DS548855401" load-source="docdb">IT</country><country mxw-id="DS548838513" load-source="docdb">LI</country><country mxw-id="DS548851655" load-source="docdb">LT</country><country mxw-id="DS548849588" load-source="docdb">LU</country><country mxw-id="DS548851656" load-source="docdb">LV</country><country mxw-id="DS548851657" load-source="docdb">MC</country><country mxw-id="DS548802087" load-source="docdb">MK</country><country mxw-id="DS548802088" load-source="docdb">MT</country><country mxw-id="DS548855372" load-source="docdb">NL</country><country mxw-id="DS548855402" load-source="docdb">NO</country><country mxw-id="DS548802089" load-source="docdb">PL</country><country mxw-id="DS548873064" load-source="docdb">PT</country><country mxw-id="DS548855373" load-source="docdb">RO</country><country mxw-id="DS548802094" load-source="docdb">SE</country><country mxw-id="DS548803481" load-source="docdb">SI</country><country mxw-id="DS548855403" load-source="docdb">SK</country><country mxw-id="DS548802095" load-source="docdb">SM</country><country mxw-id="DS548838514" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669889" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Embodiments of the present invention disclose a method for the generic mapping procedure GMP mapping, a method for GMP demapping, and an apparatus. The method for mapping includes: carrying, in an overhead GMP OH of the ith GMP block container, information about a TS that needs to be occupied by the (i+n)th GMP block container; adjusting the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container; performing, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be sent, so that a receive end is capable of adopting a corresponding demapping manner according to a change of the block container, which implements lossless mapping and demapping processing by adopting a GMP for a variable block container.
<img id="iaf01" file="imgaf001.tif" wi="93" he="80" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499262" lang="EN" source="EPO" load-source="docdb"><p>Embodiments of the present invention disclose a method for the generic mapping procedure GMP mapping, a method for GMP demapping, and an apparatus. The method for mapping includes: carrying, in an overhead GMP OH of the ith GMP block container, information about a TS that needs to be occupied by the (i+n)th GMP block container; adjusting the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container; performing, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be sent, so that a receive end is capable of adopting a corresponding demapping manner according to a change of the block container, which implements lossless mapping and demapping processing by adopting a GMP for a variable block container.</p></abstract><description mxw-id="PDES63955319" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>FIELD OF THE INVENTION</b></heading><p id="p0001" num="0001">The present invention relates to the communications technology field, and in particular, to a method and an apparatus for generic mapping procedure GMP mapping and a method and an apparatus for generic mapping procedure GMP demapping.</p><heading id="h0002"><b>BACKGROUND OF THE INVENTION</b></heading><p id="p0002" num="0002">As a core technology of a next-generation transport network, an OTN (Optical transport network, OTN) includes electrical layer and optical layer technical specifications. The OTN has rich OAM (Operation Administration and Maintenance, operation, administration and maintenance) functions, a powerful TCM (Tandem Connection Monitoring, tandem connection monitoring) capability, and an outband FEC (Forward Error Correction, forward error correction) capability, is capable of implementing flexible scheduling and management of a large-capacity service, and is becoming a main stream technology of a backbone transport network.</p><p id="p0003" num="0003">On an electrical processing layer, the OTN technology defines a "digital wrapper (Digital Wrapper)" structure with powerful functions to map and wrapper customer service data to facilitate transmission in the OTN and implement management and monitoring on the customer service data. The digital wrapper technology includes technical methods such as: mapping and a multiplexing structure of an optical channel transport unit (OUT, Optical Channel Transport Unit), time division multiplex of an optical channel data unit (ODU, Optical Channel Data Unit), time division multiplex of an optical channel payload unit (OPU, Optical Channel Payload Unit-k Overhead), and mapping of the customer service data.</p><p id="p0004" num="0004">With the rapid development of data services, more and more customer services need to be transmitted through the OTN. The present OTN mechanism cannot well satisfy and directly bear various services with different rates. In view of this problem, the ITU-T (International Telecommunication Union-Telecommunication Standardization Sector, International Telecommunication Union-Telecommunication Standardization Sector) is discussing on<!-- EPO <DP n="2"> --> formulating a new optical transport network frame ODUflex frame to solve this problem. The ODUflex still keeps an original ODU structure and is capable of bearing the services and packet services with any constant bit rate (CBR). For different services, different mapping procedures are used to map service signals to the OPU.</p><p id="p0005" num="0005">The ODUflex cannot be directly sent onto a line and needs to be encapsulated in an HO ODU (Higher Order Optical Channel Data Unit, higher order optical channel data unit) and transmitted through an HO OTU (Higher Order Optical Channel Transport Unit, higher order optical channel transport unit).</p><p id="p0006" num="0006">At present, a mode of mapping the ODUflex to the HO ODU uses a GMP (Generic Mapping Procedure, generic mapping procedure). The ODUflex occupies several TSs (Time Slots, time slots) of the HO ODU. The GMP is a generic mapping procedure of the OTN and is specifically as follows: Generate a customer entity quantity value Cn and clock information of per service frame period; then, use the sigma-delta algorithm to calculate a distribution pattern of customer data in a payload area; and map Cn records of customer data to corresponding locations of the distribution pattern.</p><p id="p0007" num="0007">It should be noted that, Interfaces for the Optical Transport Network: G.709/Y.1331(a Recommendation document provided by Telecommunication Standardization Sector of ITU) discloses Generic map-ping procedure principles. In particular, Generic mapping procedure mapping includes: (a) determine Cn(t); (b) insert Cn(t) into the overhead; (c) insert Cn(t) client data entities into the payload area.</p><p id="p0008" num="0008">Due to an irregularly change feature of packet service traffic, the ODUflex needs to provide different bandwidths in different periods to satisfy different service traffic and adjust a bandwidth of an ODUflex channel without interrupting the packet service. The adjustment process relates to an adjustment of bandwidth that is occupied when the HO ODU bears the ODUflex, that is, an adjustment of TSs in the HO ODU. A GMP block container is a space that bears the ODUflex and is formed from multiple TSs. Therefore, to adapt to the changes of the packet service traffic, a mechanism is required to adjust a size of the GMP block container.</p><heading id="h0003"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0009" num="0009">Embodiments of the present invention provide a method an apparatus for the generic mapping procedure GMP mapping and a method and an apparatus for generic mapping procedure GMP demapping.<!-- EPO <DP n="3"> --></p><p id="p0010" num="0010">According to the aspects of the invention, a method for GMP mapping, a method for GMP demapping, an apparatus for GMP mapping, an apparatus for GMP demapping are provided in the independent claims. Preferred implementation forms of these aspects are set out in the dependent claims.</p><p id="p0011" num="0011">The technical solutions of the embodiments of the present invention provide a mechanism for triggering a TS adjustment. A transmit end adds, in a GMP OH of a GMP block container, information about a TS that needs to be occupied by the GMP block container so that a receive end is capable of adopting a corresponding demapping mode according to changes of the block container. In this way, lossless mapping and demapping processing on a variable block container by adopting the GMP is implemented.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0012" num="0012">To make the technical solutions in the embodiments of the present invention or in the prior art clearer, the following briefly describes the accompanying drawings involved in the description about the embodiments or the prior art. Apparently, the accompanying drawings described below are merely some embodiments of the present invention, and a person skilled in the art can derive other accompanying drawings from these accompanying drawings without any creative effort.
<ul><li><figref idrefs="f0001">FIG. 1</figref> is a structural diagram of an OTN frame according to an embodiment of the present invention;</li><li><figref idrefs="f0002">FIG. 1a</figref> is an example diagram of TS distribution according to an embodiment of the present invention;</li><li><figref idrefs="f0003">FIG. 2</figref> is a flow chart of a general method according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0003">FIG. 3</figref> is a first schematic diagram of an encapsulation mode of information M according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0004">FIG. 4</figref> is a second schematic diagram of an encapsulation mode of information M according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0004">FIG. 5</figref> is a first flow chart of a specific method according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0005">FIG. 6</figref> is an example diagram of performing GMP mapping based on the method in <figref idrefs="f0004">FIG. 5</figref> according to an embodiment of the present invention;</li><li><figref idrefs="f0006">FIG. 7</figref> is a second flow chart of a specific method according to Embodiment 1 of the present<!-- EPO <DP n="4"> --> invention;</li><li><figref idrefs="f0007">FIG. 8</figref> is an example diagram of performing GMP mapping based on the method in <figref idrefs="f0006">FIG. 7</figref> according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0008">FIG. 9</figref> is a schematic diagram of a TS adjustment and a mapping granularity change according to Embodiment 1 of the present invention;</li><li><figref idrefs="f0009">FIG. 10</figref> is a flow chart of a general method according to Embodiment 2 of the present invention;</li><li><figref idrefs="f0009">FIG. 11</figref> is a first flow chart of a specific method according to Embodiment 2 of the present invention;</li><li><figref idrefs="f0010">FIG. 12</figref> is a second flow chart of a specific method according to Embodiment 2 of the present invention;</li><li><figref idrefs="f0010">FIG. 13</figref> is a general function block diagram of an apparatus for GMP mapping according to Embodiment 3 of the present invention;</li><li><figref idrefs="f0011">FIG. 14</figref> is a detailed function block diagram of an apparatus for GMP mapping according to Embodiment 3 of the present invention;</li><li><figref idrefs="f0012">FIG. 15</figref> is a general function block diagram of an apparatus for GMP demapping according to Embodiment 4 of the present invention; and</li><li><figref idrefs="f0012">FIG. 16</figref> is a detailed function block diagram of an apparatus for GMP demapping according to Embodiment 4 of the present invention.</li></ul></p><heading id="h0005"><b>DETAILED DESCRIPTION OF THE EMBODIMENTS</b></heading><p id="p0013" num="0013">On a first aspect, an embodiment of the present invention provides a method for generic mapping procedure GMP mapping. The method includes: carrying, in an overhead GMP OH of the ith GMP block container, information about a time slot TS that needs to be occupied by the (i+n)th GMP block container; adjusting the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container; and performing, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be sent.</p><p id="p0014" num="0014">In a first implementation according to the first aspect, the TS information comprises TS quantity and the TS quantity is associated with a mapping granularity; the carrying, in the overhead GMP OH of the ith GMP block container, the information about the time slot TS that needs to be occupied by the (i+n)th GMP block container comprises: carrying, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block<!-- EPO <DP n="5"> --> container that needs to be adjusted; the adjusting the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container comprises: adjusting the size of the (i+n)th GMP block container and adjusting the mapping granularity according to the TS quantity; and the performing, according to the adjusted (i+n)th GMP block container, the GMP mapping on the customer service data to be sent comprises: performing, according to the adjusted size and mapping granularity of the (i+n)th GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0015" num="0015">In a second implementation according to the first aspect, the TS information comprises TS quantity and a mapping granularity; the carrying, in the overhead GMP OH of the ith GMP block container, the information about the time slot TS that needs to be occupied by the (i+n)th GMP block container comprises: carrying, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block container that needs to be adjusted; the adjusting the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container comprises: adjusting the size of the (i+n)th GMP block container according to the TS quantity; and the performing, according to the adjusted (i+n)th GMP block container, the GMP mapping on the customer service data to be sent comprises: performing, according to the adjusted size of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0016" num="0016">In an implementation according to the second implementation, the method further comprises: carrying, in an overhead GMP OH of the jth GMP block container, a mapping granularity of the (j+m)th GMP block container that needs to be adjusted; adjusting the mapping granularity of the (j+m)th GMP block container according to the carried mapping granularity; and performing, according to the size of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0017" num="0017">On a second aspect, an embodiment of the present invention provides a method for generic mapping procedure GMP demapping. The method includes: obtaining information about a time slot TS that needs to be occupied by the (i+n)th GMP block container, where the information is carried in an overhead GMP OH of the ith GMP block container; and performing the GMP demapping on customer service data of the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container.</p><p id="p0018" num="0018">In a first implementation according to the second aspect, the TS information comprises TS<!-- EPO <DP n="6"> --> quantity and the TS quantity is associated with a mapping granularity; the obtaining the information about the time slot TS that needs to be occupied by the (i+n)th GMP block container, wherein the information is carried in the overhead GMP OH of the ith GMP block container, comprises: obtaining the quantity of TSs that need to be occupied by the (i+n)th GMP block container, wherein the quantity of the TSs is carried in the overhead GMP OH of the ith GMP block container; and the performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container comprises: performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity associated with the TS quantity.</p><p id="p0019" num="0019">In a second implementation according to the second aspect, the TS information comprises TS quantity and a mapping granularity; the obtaining the information about the time slot TS that needs to be occupied by the (i+n)th GMP block container, wherein the information is carried in the overhead GMP OH of the ith GMP block container, comprises: obtaining the quantity of TSs that need to be occupied by the (i+n)th GMP block container, wherein the quantity of the TSs is carried in the overhead GMP OH of the ith GMP block container; and the performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS information of the (i+n)th GMP block container comprises: performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container.</p><p id="p0020" num="0020">In an implementation according to the second implementation according to the second aspect, the method further comprising: obtaining a mapping granularity of the (j+m)th GMP block container, wherein the mapping granularity is carried in an overhead GMP OH of the jth GMP block container; and performing the GMP demapping on customer service data of the (j+m)th GMP block container according to the TS quantity of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container.</p><p id="p0021" num="0021">On a third aspect, an embodiment of the present invention provides an apparatus for generic mapping procedure (GMP) mapping. The apparatus includes: an encapsulation unit, configured to carry, in an overhead GMP OH of the ith GMP block container, information about a time slot TS that needs to be occupied by the (i+n)th GMP block container; an adaptation unit, configured to adjust the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container; and a<!-- EPO <DP n="7"> --> mapping unit, configured to perform, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be sent.</p><p id="p0022" num="0022">In a first implementation according to the third aspect, the TS information comprises TS quantity and the TS quantity is associated with a mapping granularity; the encapsulation unit is configured to carry, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block container that needs to be adjusted; the adaptation unit is configured to adjust the size and mapping granularity of the (i+n)th GMP block container according to the TS quantity; and the mapping unit is configured to perform, according to the adjusted size and mapping granularity of the (i+n)th GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0023" num="0023">In a second implementation according to the third aspect, the TS information comprises TS quantity and a mapping granularity; the encapsulation unit is configured to carry, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block container that needs to be adjusted; the adaptation unit is configured to adjust the size of the (i+n)th GMP block container according to the TS quantity; and the mapping unit is configured to perform, according to the adjusted size of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container, the GMP mapping on the customer service data to be sent. More specifically, the encapsulation unit is further configured to carry, in an overhead GMP OH of the jth GMP block container, a mapping granularity of the (j+m)th GMP block container that needs to be adjusted; the adaptation unit is further configured to adjust the mapping granularity of the (j+m)th GMP block container according to the carried mapping granularity; and the mapping unit is further configured to perform, according to the size of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0024" num="0024">On a fourth aspect, an embodiment of the present invention provides an apparatus for generic mapping procedure GMP demapping. The apparatus includes: a decapsulation unit, configured to obtain information about a time slot TS that needs to be occupied by the (i+n)th GMP block container, where the information is carried in an overhead GMP OH of the ith GMP block container; and a demapping unit, configured to implement the GMP demapping on customer service data of the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container.</p><p id="p0025" num="0025">In a first implementation according to the fourth aspect, the TS information comprises TS quantity and the TS quantity is associated with a mapping granularity; the encapsulation unit is configured to obtain the quantity of TSs that need to be occupied by the (i+n)th GMP block<!-- EPO <DP n="8"> --> container, wherein the quantity of the TSs is carried in the overhead GMP OH of the ith GMP block container; and the demapping unit is configured to perform the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity associated with the TS quantity.</p><p id="p0026" num="0026">In a second implementation according to the fourth aspect, the TS information comprises TS quantity and a mapping granularity; the encapsulation unit is configured to obtain the quantity of TSs that need to be occupied by the (i+n)th GMP block container, wherein the quantity of the TSs is carried in the overhead GMP OH of the ith GMP block container; and the demapping unit is configured to perform the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container. More specifically, the decapsulation unit is further configured to obtain a mapping granularity of the (j+m)th GMP block container, wherein the mapping granularity is carried in an overhead GMP OH of the jth GMP block container; and the demapping unit is further configured to perform the GMP demapping on customer service data of the (j+m)th GMP block container according to the TS quantity of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container.</p><p id="p0027" num="0027">To meet a requirement of an ODUflex bandwidth adjustment and achieve a lossless TS adjustment, embodiments of the present invention provide a TS adjustment mechanism and a method and an apparatus for implementing GMP adaptive processing during the TS adjustment. To achieve the lossless TS adjustment, a transmit end includes, in a GMP overhead, TS information (which is represented as information M in the embodiments) used to indicate the TS adjustment so as to correlate the TS adjustment with GMP mapping and demapping processing. A receive end perceives a TS change of a GMP block container on the transmit end according to content of the information M and performs lossless demapping processing according to the adjusted GMP block container.</p><p id="p0028" num="0028">To make the objectives, technical solutions, and merits of the embodiments of the present invention clearer, the following clearly and completely describes the technical solutions in the embodiments of the present invention with reference to the accompanying drawings in the embodiments of the present invention. Obviously, the described embodiments are only a part of the embodiments of the present invention rather than all the embodiments. All other embodiments obtained by a person skilled in the art based on the embodiments in the present invention without creative efforts shall fall within the protection scope of the present invention.<!-- EPO <DP n="9"> --></p><heading id="h0006"><b>Embodiment 1</b></heading><p id="p0029" num="0029"><figref idrefs="f0001">FIG. 1</figref> is a diagram of a format of an OTN frame according to the present embodiment. As shown in <figref idrefs="f0001">FIG. 1</figref>, the OTN frame is a standard modular structure with 4080 columns x 4 rows. The 16 columns in a header of the OTN frame are overhead bytes, 3808 columns in the middle are payloads, and 256 columns in the tail are FEC check bytes. The OTN frame includes: FAS (Frame Alignment Signal, frame alignment signal) bytes that are located in row 1 and columns 1 - 7 and used to provide a function of frame synchronization location, where the seventh byte of the FAS is a multiframe indication (Multi-Frame Alignment Signal, MFAS) that is used to indicate overhead distribution when data of multiple customer services is borne in a time division multiplexing mode; OTUk OH (Optical Channel Transport Unit-k Overhead, optical channel transport unit-k overhead) bytes that are located in row 1 and columns 8 - 14 and used to provide a network management function at an optical channel transport unit level; ODUk OH (Optical Channel Data Unit-k Overhead, optical channel data unit-k overhead) bytes that are located in rows 24 and columns 114 and used to provide maintenance and operation functions; OPUk OH (Optical Channel Payload Unit-k Overhead, optical channel payload unit-k overhead) bytes that are located in columns 15 - 16 and used to provide a customer service data adaptation function, where the OPUk OH bytes include a payload structure identifier (Payload Structure Identifier, PSI), the PSI corresponds to 0 - 255 possible values under the MFAS indication, byte 0 is a customer service data type indication (Payload Type, PT), and other bytes are reserved (Reserved, RES) for future expansion; OPUk (Optical Channel Payload Unit-k, optical channel payload unit-k) bytes that are located in columns 17 - 3824 and used to provide a customer service data bearing function, where customer service data to be transmitted is encapsulated into the OPUk; and FEC bytes that are located in columns 3825 - 4080 and used to provide error detection and correction functions.</p><p id="p0030" num="0030">The coefficient k indicates a supported bit rate. Different bit rates correspond to different types of OPUk, ODUk, and OTUk. When k is 0, it indicates that the bit rate is 1.25 Gbit/s; when k is 1, it indicates that the bit rate is 2.5 Gbit/s; when k is 2, it indicates that the bit rate is 10 Gbit/s; when k is 3, it indicates that the bit rate is 100 Gbit/s. The OPUk bytes and the OPUk OH bytes form an OPUk frame; the OPUk frame, the ODUk OH bytes, and the FAS bytes form an ODUk frame; and the ODUk frame, the OTUk OH bytes, and the FEC bytes form an OTUk frame.</p><p id="p0031" num="0031">A mapping procedure refers to a method of mapping different types of services to be sent into<!-- EPO <DP n="10"> --> an OPU payload area (Payload Area). The present embodiment uses a GMP mapping procedure to map the customer service data into the OPU. <figref idrefs="f0002">FIG. 1a</figref> is an example diagram of TS distribution using GMP mapping according to the present embodiment. As shown in <figref idrefs="f0002">FIG. 1a</figref>, a GMP OH in <figref idrefs="f0002">FIG. 1a</figref> is equivalent to the OPUk OH in <figref idrefs="f0001">FIG. 1</figref>. The GMP OH in this embodiment includes TS information used to indicate a TS adjustment. One or more TSs in <figref idrefs="f0002">FIG. 1a</figref> form a GMP block container to transmit the customer service data.</p><p id="p0032" num="0032"><figref idrefs="f0002">FIG. 1a</figref> uses OPU2 to describe a specific GMP mapping method. The payload area of the OPU2 frame is divided into 8 TSs, where four rows of a column form a time slot and the TSs are identified as TS1, TS2, TS3, and till TS8. The TSs are identified in this manner in cyclic until the TSs of all columns in the payload area are allocated. Eight OPU2 frames form an OPU2 8-multiframe. The customer service data can be mapped into one or more time slots in a payload area of the OPU2 8-multiframe. One or more TSs in the OPU2 8-multiframe may form a GMP block container to bear the service data. Here, three TSs, namely, TS1, TS3, and TS4, are used to transmit the service data.</p><p id="p0033" num="0033">The customer service data is placed into the GMP block container in a unit of row. When time slots in a row are full, a similar placing operation is conducted in corresponding time slots in the next row. As shown in <figref idrefs="f0002">FIG. 1a</figref>, the GMP block container occupies three TSs and a mapping granularity is 3-byte (byte). When the customer data is placed into the GMP block container, 3 bytes of customer data are placed into the first row in column 17, column 19, and column 20 respectively in a clock period (determined by clock information during the mapping) and another 3 bytes of customer data are placed to the first row in column 25, column 27, and column 28 respectively in the second clock period. The rest can be deduced by analogy. After a row is full, a similar placing operation is conducted in the next row. Embodiment 1 of the present invention provides a method for generic mapping procedure GMP mapping. This method may be based on the frame structure in <figref idrefs="f0001">FIG. 1</figref>. The mapping method is a processing method on a transmit end.</p><p id="p0034" num="0034"><figref idrefs="f0003">FIG. 2</figref> is a flow chart of a general method according to Embodiment 1 of the present invention. As shown in <figref idrefs="f0003">FIG. 2</figref>, the method includes:
<ul><li>S201. Carry, in an overhead GMP OH of the ith GMP block container, information about a time slot TS that needs to be occupied by the (i+n)th GMP block container.</li><li>S202. Adjust the (i+n)th GMP block container according to the information about the TS that needs to be occupied by the (i+n)th GMP block container.</li><li>S203. Perform, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be transmitted.</li></ul><!-- EPO <DP n="11"> --></p><p id="p0035" num="0035">In the present embodiment, the TS may be adjusted when the transmit end receives an external TS adjustment instruction or a triggering command.</p><p id="p0036" num="0036">To facilitate description, this embodiment takes n = 1 as an example to describe a principle of the GMP mapping in detail. Assume that a size of the (i+1)th GMP block container is changed, information about a TS that needs to be occupied by the changed (i+1)th GMP block container is able to be obtained from the TS information carried in the GMP OH of the ith block container. A change of a next GMP block container is notified in advance in a previous GMP block container. Therefore, a receive end is capable of adaptively adjusting a demapping mode to achieve lossless data. A specific implementation manner on the receive end is described in detail in subsequent embodiments.</p><p id="p0037" num="0037">The TS information in the present embodiment includes TS quantity information, where the TS quantity information is associated with the mapping granularity. That is, the TS quantity is consistent with the mapping granularity, and the TS quantity and the mapping granularity are adjusted simultaneously. Alternatively, the TS information may also include the TS quantity information and mapping granularity information, where the TS quantity and the mapping granularity are adjusted separately. In this embodiment, a specific TS distribution condition, that is, which TSs transmit the customer service data, is indicated in the PSI of the OTN frame. 1. The TS quantity and the mapping granularity are adjusted simultaneously. For this condition, the TS information includes the TS quantity information. Optionally, the TS quantity information may be represented as a change indication of the TS quantity.</p><p id="p0038" num="0038">For this condition, step S202 and step S203, may specifically include: simultaneously adjusting the size and mapping granularity of the (i+1)th GMP block container according to the TS quantity; performing, according to the adjusted size and mapping granularity of the (i+1)th GMP block container, the GMP mapping on the customer service data to be transmitted. 2. The TS quantity and the mapping granularity are adjusted separately. For this condition, the TS information includes the TS quantity and the mapping granularity. The TS quantity may be adjusted first and then the mapping granularity is adjusted; or, the mapping granularity is adjusted first and then the TS quantity is adjusted, so that the TS quantity and the mapping granularity are consistent finally.</p><p id="p0039" num="0039">When the TS quantity is adjusted, the TS quantity of the (i+1)th GMP block container is carried in the overhead GMP OH of the ith GMP block container, where the TS quantity needs to be adjusted. Step S202 and step 203 include: adjusting the size of the (i+1)th GMP block<!-- EPO <DP n="12"> --> container according to the TS quantity; and performing, according to the adjusted size of the (i+1)th GMP block container and the mapping granularity of the ith GMP block container, the GMP mapping on the customer service data to be transmitted.</p><p id="p0040" num="0040">When the mapping granularity is adjusted after the TS quantity is adjusted, after step S202 and step 203, the method further includes: carrying a mapping granularity of the (j+m)th GMP block container in an overhead GMP OH of the jth GMP block container, where the mapping granularity needs to be adjusted; adjusting the mapping granularity of the (j+m)th GMP block container according to the carried mapping granularity; and performing, according to the size of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container, the GMP mapping on the customer service data to be transmitted. To facilitate description, this embodiment takes m=1 as an example to describe the principle of the GMP mapping.</p><p id="p0041" num="0041">In the present embodiment, optionally, when a bandwidth is to be increased, perform the TS adjustment first and then change the mapping granularity; when a reducing adjustment is performed on the TSs, that is, a reducing adjustment is performed on the TSs, change the mapping granularity first and then perform the TS adjustment. This embodiment of the present invention is not restricted herein and the adjustment may be performed in a reverse order according to the preceding manner. Regardless of whether the adjustments are performed simultaneously or separately, a final objective is to adjust the TS quantity and an M-byte to be consistent. For example, originally, there are 3 TSs and the mapping granularity is 3-byte; if the TSs are increased by 1, regardless of whether the adjustments are performed simultaneously or separately, a final result should be that there are 4 TSs and the mapping granularity is 4-byte.</p><p id="p0042" num="0042">The following describes an encapsulation mode of the information about the TS (information M for short) that needs to be occupied by the GMP block container in step S201 of Embodiment 1 of the present invention.</p><p id="p0043" num="0043"><figref idrefs="f0003">FIG. 3</figref> is a schematic diagram of an encapsulation mode of information M according to this embodiment of the present invention. This figure is applicable to a condition in which the TS quantity and a mapping granularity are adjusted simultaneously. As shown in <figref idrefs="f0003">FIG. 3</figref>, three same pieces of information M are placed in rows 1 - 3 of column 15 in the generic mapping procedure overhead GMP OH. The information M refers to the TS quantity information, ranging from 1 to 80. Specifically, in a byte in row 1 and column 15, bit 1 to bit 8 may all be used to place the information M, that is, the quantity information of the TSs occupied by the GMP block container. Similarly, the same TS quantity information as that in row 1 and<!-- EPO <DP n="13"> --> column 15 are placed in respective 8 bits in row 2 and column 15 and in row 3 and column 15. When the TS adjustment needs to be performed, the information M is directly changed to a value corresponding to the adjusted TSs so that the next GMP block container is adjusted to be of a size indicated by the changed information M.</p><p id="p0044" num="0044">Assume that the current GMP block container occupies three TSs and the next GMP block container needs to occupy four TSs. Uniformly change the values of the three pieces of information M in the GMP OH of the current GMP block container to 4 in a binary format so as to trigger that the size of the next GMP block container is adjusted to occupy 4 TSs. An objective of placing the three same pieces of information M is to ensure accuracy and prevent an error introduced during transmission. The receive end may obtain the information M through a majority decision. For example, when the three pieces of information M are consistent, it is indicated that the transmission is correct and any piece of information M is selected to indicate the quantity of the TSs occupied by the GMP block container. When two pieces among the three pieces of information M are consistent and another piece of information M is different, any one of the two pieces of information M that are consistent with each other is selected to indicate the quantity of the TSs occupied by the GMP block container. When all the three pieces of information M are different, it is indicated that the transmission is faulty and the quantity of the TSs occupied by the GMP block container remains unchanged.</p><p id="p0045" num="0045">In the present embodiment, when the TS quantity information and the mapping granularity information are adjusted simultaneously, in the preceding encapsulation mode, the information M is not only the TS quantity information but also the mapping granularity information M-bytes. A concept of the mapping granularity refers to the number of bytes used as a unit to map the customer data to be transmitted to the OPUk. If the mapping granularity is 1, the customer data to be transmitted is placed into the OPUk one byte by one byte. If the mapping granularity is 3-byte, the customer data to be transmitted is placed into the OPUk in a unit of 3 bytes. In this case, when the TS quantity is changed, the mapping granularity is also changed accordingly. The encapsulation mode in <figref idrefs="f0003">FIG. 3</figref> is applicable to the condition in which the GMP block container and the mapping granularity are changed simultaneously.</p><p id="p0046" num="0046">But a person skilled in the art should understand that the information M is not limited to include only the TS quantity information or the mapping granularity information. In another specific application, current TS status information or information about an interaction between a source end and a sink end may further be included. Moreover, the placing position and the encryption mode of the information M in this embodiment of the present invention are<!-- EPO <DP n="14"> --> not limited to the preceding described modes. That is, the overhead indication that triggers the TS adjustment is not limited to a change of the information M and may be specified to be an overhead indication that is specially formulated for triggering the TS adjustment. <figref idrefs="f0004">FIG. 4</figref> is a schematic diagram of another encapsulation mode of information M according to this embodiment of the present invention. This figure is not only applicable to the condition in which the TS quantity and the mapping granularity are adjusted simultaneously but also applicable to a condition in which the TS quantity and the mapping granularity are adjusted separately. To make the description uniform, the subsequent embodiments describe various encapsulation methods in the present invention in detail with reference to <figref idrefs="f0004">FIG. 4</figref> and specific tables.</p><p id="p0047" num="0047">In the following Table 1 to Table 6, the encapsulation mode of the information M is applicable to the condition in which the TS quantity and the mapping granularity are changed simultaneously. The TS quantity information is also the mapping granularity information. When the TS quantity is changed, the mapping granularity is also changed accordingly. For example, when it is indicated that the TS quantity is increased by 1, it is also indicated that the mapping granularity is increased by 1. Table 1 to Table 6 describe 6 states corresponding to changes of the information M, that is, states that the information M remains unchanged, is increased by 1, is decreased by 1, is increased by 2, is decreased by 2, and is increased or decreased by a value greater than 2.
<tables id="tabl0001" num="0001"><table frame="all"><title><b>Table 1 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>0</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0048" num="0048">As shown in Table 1, 16 bits in rows 1 - 2 and column 15 in <figref idrefs="f0004">FIG. 4</figref> are expanded to form Table 1. Bit 1 to bit 14 in rows 1 - 2 and column 15 in <figref idrefs="f0004">FIG. 4</figref> correspond to bit 1 to bit 14 in Table 1, which are all used to store the information M, where "U" indicates data and a value is 0 or 1. Bit 15 to bit 16 correspond to bit 15 to bit 16 in Table 1, where the letter I indicates an increasing indication while the letter D indicates a decreasing indication. When I/D=00, it is indicated that the TS quantity remains unchanged. In this case, "U" in bit 1 to bit 14 indicates the actual quantity of TSs.<!-- EPO <DP n="15"> -->
<tables id="tabl0002" num="0002"><table frame="all"><title><b>Table 2 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0049" num="0049">As shown in Table 2, "U" indicates the data and "I" indicates that the bit is reversed. In Table 2, odd bits among bit 1 to bit 14 are reversed based on Table 1. That is, bit 1, bit 3, bit 5, bit 7, bit 9, bit 11, and bit 13 are reversed. In addition, I/D=10, which indicates that the information M is changed and specifically indicates that the TS quantity is increased by 1 in the next GMP block container.
<tables id="tabl0003" num="0003"><table frame="all"><title><b>Table 3 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0050" num="0050">In Table 3, when even bits among bit 1 to 14 are reversed based on Table 1, that is, bit 2, bit 4, bit 6, bit 8, bit 10, bit 12, and bit 14 are reversed, and I/D=01, it is indicated that the TS quantity is decreased by 1 in the next GMP block container.
<tables id="tabl0004" num="0004"><table frame="all"><title><b>Table 4 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0051" num="0051">As shown in Table 4, when bit 2, bit 3, bit 6, bit 7, bit 10, bit 11, and bit 14 are reversed based on Table 1 and I/D=10, it is indicated that the TS quantity needs to be increased by 2 in the next GMP block container.
<tables id="tabl0005" num="0005"><table frame="all"><title><b>Table 5 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0052" num="0052">As shown in Table 5, when bit 1, bit 4, bit 5, bit 8, bit 9, bit 12, and bit 13 are reversed based<!-- EPO <DP n="16"> --> on Table 1 and I/D=01, it is indicated that the TS quantity needs to be decreased by 2 in the next GMP block container.
<tables id="tabl0006" num="0006"><table frame="all"><title><b>Table 6 Information M change indication table</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry namest="col1" nameend="col14" align="left">Binary value binary value</entry><entry>1</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0053" num="0053">As shown in Table 6, when I/D=11, it is indicated that the increasing or decreasing amplitude of the TS quantity value is greater than 2. In this case, directly enter a binary value in bit 1 to bit 14 to indicate the TS quantity value after a large-amplitude adjustment is made. For example, the original quantity of the TSs occupied by the GMP block container is 30; at present, the size of the block container needs to be adjusted to occupy 35 TSs; because the TS change amplitude is greater than 2, the I/D is set to 11 and the information M in bit 1 to bit 14 is changed to a binary value of 35.</p><p id="p0054" num="0054">The preceding is merely an exemplary implementation mode. Various change conditions of the TS quantity may also be indicated by using another bit reversal rule together with different I/D values, which is not restricted in this embodiment of the present invention.</p><p id="p0055" num="0055">In the present embodiment, when the TS quantity information and the mapping granularity information are adjusted separately, the encapsulation mode shown in <figref idrefs="f0004">FIG. 4</figref> may be modified so that both the TS quantity information M and the mapping granularity information M' are included in the GMP OH. A 14-bit space may house two times information M. Therefore, it may be considered to save the capacity, that is, the capacity for placing the information M is reduced to 7 bits and the other 7 bits are used to place the information M'. As shown in <figref idrefs="f0004">FIG. 4</figref>, bit 1 to bit 7 in rows 1 - 2 of column 15 of the GMP OH are used to store the information M, where the information M is the TS quantity information ranging from 1 to 80; bit 8 to bit 14 are used to store the information M', where the information M' is the mapping granularity information ranging from 1 to 80. The I/D is an increasing or decreasing indication, where the value is 0 or 1 and is shared by the information M and information M'.</p><p id="p0056" num="0056">Table 7 to Table 17 are separate change indication tables of the information M (TS quantity) and the information M' (mapping granularity). As shown in Table 7 to Table 17, this encapsulation mode is applicable to the condition in which the GMP block container and the mapping granularity are changed separately. That is, when the TS quantity is changed, the mapping granularity remains unchanged; when the mapping granularity is changed, the TS<!-- EPO <DP n="17"> --> quantity remains unchanged. The present embodiment uses the values of the information M, information M', and I/D to indicate the change conditions of the TS quantity and mapping granularity.
<tables id="tabl0007" num="0007"><table frame="all"><title><b>Table 7 Indication table for unchanged information M and information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>0</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0057" num="0057">As shown in Table 7, when I/D=00, it is indicated that the TS quantity information and the mapping granularity information remain unchanged.
<tables id="tabl0008" num="0008"><table frame="all"><title><b>Table 8 Indication table for changed information M and unchanged information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0058" num="0058">As shown in Table 8, when any one of the TS quantity and the mapping granularity is changed, the other one remains unchanged. For example, when the TS quantity is changed, the I/D is set to 10 and odd bits among bit 1 to bit 7, that is, bit 1, bit 3, bit 5, and bit 7 are reversed based on Table 7, indicating that the TS quantity is increased by 1 in the next GMP block container. Data in bit 8 and bit 14 is unchanged, indicating that the mapping granularity remains unchanged.
<tables id="tabl0009" num="0009"><table frame="all"><title><b>Table 9 Indication table for changed information M and unchanged information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0059" num="0059">As shown in Table 9, when even bits among bit 1 to bit 7 are reversed based on Table 7, the I/D is set to 01, and the data in bit 8 to bit 14 is unchanged, it is indicated that the TS quantity needs to be decreased by 1 in the next GMP block container while the mapping granularity remains unchanged.<!-- EPO <DP n="18"> -->
<tables id="tabl0010" num="0010"><table frame="all"><title><b>Table 10 Indication table for changed information M and unchanged information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0060" num="0060">As shown in Table 10, when bit 2, bit 3, bit 6, and bit 7 among bit 1 to bit 7 are reversed based on Table 7, the I/D is set to 10, and the data in bit 8 to bit 14 is unchanged, it is indicated that the TS quantity needs to be increased by 2 in the next GMP block container while the mapping granularity remains unchanged.
<tables id="tabl0011" num="0011"><table frame="all"><title><b>Table 11 Indication table for changed information M and unchanged information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0061" num="0061">As shown in Table 11, when bit 1, bit 4, and bit 5 among bit 1 to bit 7 are reversed based on Table 7, the I/D is set to 01, and the data in bit 8 to bit 14 is unchanged, it is indicated that the TS quantity needs to be decreased by 2 in the next GMP block container while the mapping granularity remains unchanged.
<tables id="tabl0012" num="0012"><table frame="all"><title><b>Table 12 Indication table for changed information M and unchanged information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry namest="col1" nameend="col7" align="left">Binary value binary value</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>1</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0062" num="0062">As shown in Table 12, when the increasing or decreasing amplitude of the TS quantity is greater than 2, a binary value is directly entered in bit 1 to bit 7, indicating the TS quantity value after the large-amplitude adjustment is made, that is, indicating that the TS quantity is changed to a value represented by the binary value in the next GMP block container. Because the data in bit 8 to bit 14 is unchanged, the mapping granularity remains unchanged.
<tables id="tabl0013" num="0013"><table frame="all"><title><b>Table 13 Indication table for unchanged information M and changed information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables><!-- EPO <DP n="19"> --></p><p id="p0063" num="0063">As shown in Table 13, when the mapping granularity is changed, the TS quantity remains unchanged. For example, the I/D is set to 10, even bits among bit 8 to bit 14 are reversed based on Table 7, and data in bit 1 to bit 7 is unchanged so as to indicate that the mapping granularity needs to be increased by 1 in the next GMP block container while the TS quantity remains unchanged.
<tables id="tabl0014" num="0014"><table frame="all"><title><b>Table 14 Indication table for unchanged information M and changed information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0064" num="0064">As shown in Table 14, the I/D is set to 01, odd bits among bit 8 to bit 14 are reversed based on Table 7, and the data in bit 1 to bit 7 is unchanged so as to indicate that the mapping granularity needs to be decreased by 1 in the next GMP block container while the TS quantity remains unchanged.
<tables id="tabl0015" num="0015"><table frame="all"><title><b>Table 15 Indication table for unchanged information M and changed information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>1</entry><entry>0</entry></row></tbody></tgroup></table></tables></p><p id="p0065" num="0065">As shown in Table 15, the I/D is set to 10, bit 9, bit 10, bit 13, and bit 14 among bit 8 to 14 are reversed based on Table 7, and the data in bit 1 to bit 7 is unchanged so as to indicate that the mapping granularity needs to be increased by 2 in the next GMP block container while the TS quantity remains unchanged.
<tables id="tabl0016" num="0016"><table frame="all"><title><b>Table 16 Indication table for unchanged information M and changed information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>I</entry><entry>I</entry><entry>U</entry><entry>U</entry><entry>0</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0066" num="0066">As shown in Table 16, the I/D is set to 01, bit 8, bit 11, and bit 12 among bit 8 to bit 14 are reversed based on Table 7, and the data in bit 1 to bit 7 is unchanged so as to indicate that the mapping granularity needs to be decreased by 2 in the next GMP block container while the TS<!-- EPO <DP n="20"> --> quantity remains unchanged.
<tables id="tabl0017" num="0017"><table frame="all"><title><b>Table 17 Indication table for unchanged information M and changed information M'</b></title><tgroup cols="16"><colspec colnum="1" colname="col1" colwidth="11mm"/><colspec colnum="2" colname="col2" colwidth="11mm"/><colspec colnum="3" colname="col3" colwidth="11mm"/><colspec colnum="4" colname="col4" colwidth="11mm"/><colspec colnum="5" colname="col5" colwidth="11mm"/><colspec colnum="6" colname="col6" colwidth="11mm"/><colspec colnum="7" colname="col7" colwidth="11mm"/><colspec colnum="8" colname="col8" colwidth="11mm"/><colspec colnum="9" colname="col9" colwidth="11mm"/><colspec colnum="10" colname="col10" colwidth="11mm"/><colspec colnum="11" colname="col11" colwidth="11mm"/><colspec colnum="12" colname="col12" colwidth="11mm"/><colspec colnum="13" colname="col13" colwidth="11mm"/><colspec colnum="14" colname="col14" colwidth="11mm"/><colspec colnum="15" colname="col15" colwidth="11mm"/><colspec colnum="16" colname="col16" colwidth="11mm"/><tbody><row><entry>1</entry><entry>2</entry><entry>3</entry><entry>4</entry><entry>5</entry><entry>6</entry><entry>7</entry><entry>8</entry><entry>9</entry><entry>10</entry><entry>11</entry><entry>12</entry><entry>13</entry><entry>14</entry><entry>I</entry><entry>D</entry></row><row><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry>U</entry><entry namest="col8" nameend="col14" align="left">Binary value binary value</entry><entry>1</entry><entry>1</entry></row></tbody></tgroup></table></tables></p><p id="p0067" num="0067">As shown in Table 17, when the increasing or decreasing amplitude of the mapping granularity is greater than 2, a binary value is directly entered in bit 8 to bit 14, indicating a mapping granularity after the large-amplitude adjustment is made, that is, indicating that the mapping granularity is changed to the value represented by the binary value in the next GMP block container. Because the data in bits1 to bit 7 is unchanged, the TS quantity remains unchanged.</p><p id="p0068" num="0068">The preceding specific encapsulation mode is used for only describing this embodiment of the present invention. The placing position and encapsulation mode of the information M or information M' in Embodiment 1 of the present invention are not limited to the preceding described modes.</p><p id="p0069" num="0069"><figref idrefs="f0004">FIG. 5</figref> is a first flow chart of a specific method according to Embodiment 1 of the present invention. An execution body of this method is a transmit end. <figref idrefs="f0004">FIG. 5</figref> describes a condition in which a GMP block container and a mapping granularity are changed simultaneously. As shown in <figref idrefs="f0004">FIG. 5</figref>, the method includes:
<ul><li>S501. Use a PSI [0 - 255] of a 256-multiframe of an HO ODU to complete a condition indication of an HO ODU TS occupied by an optical transport network frame ODUflex. Specifically, the TS condition indication indicates the TSs that form the ODUflex (that is, a specific TS distribution condition).</li><li>S502. After the TS condition indication is complete, trigger operations of TS switchover and mapping granularity changing through a change of information M in a GMP OH, where the information M is condition information about the TSs occupied by the GMP block container, which includes at least quantity information of the TSs occupied by the GMP block container and may further include, for example, a current TS status information or information about an interaction between a source end and a sink end.</li></ul></p><p id="p0070" num="0070">Optionally, the specific process of S502 may include:</p><p id="p0071" num="0071">Modify information M in a GMP OH of the ith GMP block container, where i is a positive integer and is equal to or greater than 1, and may be flexibly controlled according to an<!-- EPO <DP n="21"> --> adjustment requirement after the TS condition indication is complete, that is, the information M in the GMP OH of the first, the second...or the ith GMP block container may be modified after the TS condition indication is complete; if the GMP uses a mapping granularity that associates with the TS quantity to perform mapping, the information M is also mapping granularity information M-byte. Modify the information M in the GMP OH of the ith GMP block container to indicate that a container adjustment and mapping granularity changing are performed in the next (the (i+1)th) GMP block container, where the size of the ith GMP block container remains the quantity of the originally occupied TSs and the original mapping granularity is still used, in the ith GMP block container, to perform mapping processing on customer service data.</p><p id="p0072" num="0072">The TS switchover and the mapping granularity changing are completed in the next (the (i+1)th) GMP block container. A condition about an adjustment that needs to be performed in the (i+1)th GMP block container may be obtained according to the information M in the GMP OH of the previous (the ith) GMP block container. The size of the (i+1)th GMP block container is adjusted to a size specified by the changed information M in the GMP OH of the ith GMP block container. If the GMP uses the mapping granularity that associates with the TS quantity to perform the mapping, the information M is also the mapping granularity information M-byte. In this case, the (i+1)th GMP block container also uses the mapping granularity specified by the changed information M in the GMP OH of the ith GMP.</p><p id="p0073" num="0073">S503. After the TS adjustment and the mapping granularity changing are completed, in the (i+1)th GMP block container, perform mapping processing on the customer service data to be sent according to the adjusted container size and the changed mapping granularity, that is, place the customer service data into the adjusted GMP block container in the changed mapping granularity by using the GMP mapping processing method. In a subsequent GMP block container, perform normal GMP mapping processing on the customer service data to be sent in the adjusted block container according to the changed mapping granularity.</p><p id="p0074" num="0074"><figref idrefs="f0005">FIG. 6</figref> is an example diagram of performing GMP mapping according to the method in <figref idrefs="f0004">FIG. 5</figref>. As shown in <figref idrefs="f0005">FIG. 6</figref>, the ith GMP block container occupies three TSs and the customer service data is mapped into the GMP block container based on a 3-byte mapping granularity; the size of the (i+1)th GMP block container is adjusted to four TSs and the customer service data is mapped into the GMP block container based on a 4-byte mapping granularity.</p><p id="p0075" num="0075"><figref idrefs="f0006">FIG. 7</figref> is a second flow chart of a specific method according to Embodiment 1 of the present invention. An execution body of this method is a transmit end. <figref idrefs="f0006">FIG. 7</figref> describes a condition in which a GMP block container and a mapping granularity are changed separately. As shown in<!-- EPO <DP n="22"> --> <figref idrefs="f0006">FIG. 7</figref>, the method includes:
<ul><li>S701. Use a PSI [0 - 255] of a 256-multiframe of an HO ODU to complete condition indication of an HO ODUTS occupied by an ODUflex.</li><li>S702. After the TS condition indication is complete, perform the TS switchover operation through a change of information M in a GMP OH and use the switched TS to perform GMP mapping.</li></ul></p><p id="p0076" num="0076">Optionally, the specific process of S702 may include:</p><p id="p0077" num="0077">Modify information M in a GMP OH of the ith GMP block container to indicate that a container adjustment is performed in the next (the (i+1)th) GMP block container, where i is a positive integer and this step may be flexibly controlled according to an adjustment requirement after the TS indication is completed, that is, the information M in the GMP OH of the first, the second...and the ith GMP block container may be modified after the TS condition indication is completed. The information M is information about the TSs occupied by the GMP block container, which includes at least the TS quantity information. The size of the ith GMP block container remains the quantity of the originally occupied TSs and the original mapping granularity is still used, in the ith GMP block container, to perform mapping processing on customer service data.</p><p id="p0078" num="0078">The TS switchover is completed in the (i+1)th GMP block container. A condition of an adjustment in the (i+1)th GMP block container may be known according to the information M in the GMP OH of the previous (the ith) GMP block container. The (i+1)th GMP block container is adjusted to be of a size specified by the information M. The mapping granularity used to perform the mapping processing in the (i+1)th GMP block container remains unchanged.</p><p id="p0079" num="0079">S703. Trigger an operation of mapping granularity changing through a change of information M' in the GMP OH.</p><p id="p0080" num="0080">Optionally, the specific process of S703 may include:</p><p id="p0081" num="0081">Modify information M' in a GMP OH of the jth GMP block container, where j is a positive integer. When the TS quantity is adjusted first and then the mapping granularity is adjusted, j is greater than i+1. In the present embodiment, however, the mapping granularity may also be adjusted first and then the TS quantity is adjusted. Therefore, the present embodiment does not restrict a relationship between i and j.</p><p id="p0082" num="0082">In this case, the information M' is GMP mapping granularity information, that is, M-byte. Modify the information M to indicate that in the next (the (j+1)th) GMP block container, the mapping granularity is changed to that specified by the information M'.<!-- EPO <DP n="23"> --></p><p id="p0083" num="0083">The size of the jth GMP block container remains unchanged. The original mapping granularity is still used, in the GMP block container j, to perform the mapping processing on the customer service data to be sent. The mapping granularity changing is completed in the (j+1)th GMP block container. The size of the (j+1)th GMP block container remains unchanged; that is, the size of the 0+1)th GMP block container is consistent with that of the jth GMP block container. The mapping granularity used by the (j+1)th GMP block container may be known according to the information M' in the GMP OH of the previous (the jth) GMP block container. The mapping granularity in the (j+1)th GMP block container is changed to a a value specified by the information M'.</p><p id="p0084" num="0084">S704. After the TS adjustment and the mapping granularity changing are completed, in the (j+1)th GMP block container, perform the mapping processing on the customer service data to be sent by using the changed mapping granularity. In a subsequent GMP block container, perform, according to the changed mapping granularity and the adjusted size of the block container, normal GMP mapping processing on the customer service data to be sent.</p><p id="p0085" num="0085"><figref idrefs="f0007">FIG. 8</figref> is an example diagram of performing GMP mapping based on the method in <figref idrefs="f0006">FIG. 7</figref> according to Embodiment 1 of the present invention. As shown in <figref idrefs="f0007">FIG. 8</figref>, the ith GMP block container occupies three TSs and customer service data is mapped into the GMP block container in a 3-byte granularity; the size of the (i+1)th GMP block container is adjusted to four TSs and the customer service data is still mapped into the GMP block container in the 3-byte granularity; the size of the jth GMP block container still occupies four TSs and the customer service data is still mapped into the GMP block container in the 3-byte granularity; the size of the (j+1)th GMP block container still occupies four TSs and the mapping granularity is adjusted to 4-byte, that is, the customer service data is mapped into the GMP block container in a 4-byte granularity.</p><p id="p0086" num="0086"><figref idrefs="f0008">FIG. 9</figref> is a schematic diagram of a TS adjustment and a mapping granularity change according to Embodiment 1 of the present invention. Information M or information M' in <figref idrefs="f0008">FIG. 9</figref> is placed in the first GMP overhead position of each GMP block container. As shown in <figref idrefs="f0008">FIG. 9</figref>, assume that an ODUflex is transmitted over an HO ODU2. The ODUflex occupies 3 TSs (TS1, TS3, and TS4, where a TS rate level is 1.25 Gbit/s) of the HO ODU2. After the ODUflex is mapped to an HO ODTU2.3 through a GMP, the ODUflex is multiplexed to the HO ODU2 through the HO ODTU2.3. Due to an increase of the ODUflex rate, four TSs (TS1, TS3, TS4, and TS5) of the HO ODU2 need to be occupied. In this case, to use the GMP processing method in this embodiment of the present invention, operations are performed based on the following mode (a mode in which a GMP block container and a mapping<!-- EPO <DP n="24"> --> granularity are changed simultaneously):
<ul><li>1. Complete a condition indication of an HO ODU2 TS occupied by the ODUflex through a PSI [0 - 255] of a 256-multiframe of the HO ODU2, where PSI [2], PSI [4], PSI [5], and PSI [6] indicate that the current ODUflex needs to occupy TS1, TS3, TS4, and TS5.</li><li>2. After the TS condition indication is completed, trigger the TS switchover and the mapping granularity changing by changing the information M in the GMP OH.</li><li>2.1 Change the information M in a GMP OH of the ith GMP block container, where the information M is changed from 3TS to 4TS.<br/>
The size of the ith GMP block container remains HO ODTU2.3.<br/>
The 3-byte mapping granularity is still used in the ith GMP block container to perform the mapping processing on the ODUflex.<br/>
The value i is a positive integer and may be flexibly controlled according to an adjustment requirement after the TS condition indication is completed.</li><li>2.2 Complete the TS switchover and the mapping granularity changing in the (i+1)th GMP block container.<br/>
Adjust the current GMP block container to HO ODTU2.4 according to the information M in the GMP OH of the previous (the ith) GMP block container.<br/>
Meanwhile, perform the mapping processing on the ODUflex in the (i+1)th GMP block container using a 4-byte mapping granularity.</li><li>3. After the TS adjustment and the mapping granularity changing are completed, the GMP performs normal mapping processing in block container HO ODTU2.4 based on the 4-byte mapping granularity.</li></ul></p><p id="p0087" num="0087">In the prior art, when the TS adjustment needs to be performed, the transmit end is capable of completing the condition indication of the HO ODU TS occupied by the ODUflex only by sending the PSI [0 - 255] of the 256-multiframe to the receive end, and cannot enable the receive end to perceive when the transmit end performs the TS switchover operation. Due to different HO ODUk rate levels, a phenomenon that boundaries of the GMP block container and boundaries of a 256-multiframe period are not aligned exists (for example, in ODU3, the GMP block container occupies a 32-multiframe TS of ODU3; in ODU4, the GMP block container occupies an 80-multiframe TS of ODU4; 80 and 256 does not have a multiple relationship, and therefore, the phenomenon that the boundaries of the GMP block container and the boundaries of the 256-multiframe period are not aligned may exist), which results in data damage during the TS switchover.<!-- EPO <DP n="25"> --></p><p id="p0088" num="0088">In conclusion, a GMP in the prior art is capable of performing the mapping processing for only a fixed container and cannot perform valid processing for a case of a variable container. With the adjustment of GMP block container, to avoid data damage, the GMP needs to have an adaptive capability during the container adjustment. The GMP in the prior art, however, cannot perform adaptive processing for a variable container. As a result, the objective of lossless data cannot be achieved.</p><p id="p0089" num="0089">According to the method in Embodiment 1 of the present invention, the generic mapping procedure overhead GMP OH carries the information about the time slot TS that needs to be occupied by the GMP block container and an adjustment of the size of the next GMP block obtainer is triggered through a change of the TS information. In this manner, lossless TS switchover during the TS adjustment is implemented. The mapping granularity that is associated with the information about the occupied TS is used to perform the mapping processing. Therefore, the mapping granularity used by the next GMP block container may be changed accordingly by modifying the TS information added in the GMP OH; or, the GMP block container and the mapping granularity may be changed separately by modifying the TS information and mapping granularity information added in the GMP OH respectively. This method enhances adaptation of the GMP and is capable of achieving lossless mapping and demapping processing for a variable container and a variable mapping granularity.</p><heading id="h0007"><b>Embodiment 2</b></heading><p id="p0090" num="0090">Embodiment 2 of the present invention provides a method for generic mapping procedure GMP demapping. The method is a processing method on a receive end.</p><p id="p0091" num="0091"><figref idrefs="f0009">FIG. 10</figref> is a flow chart of a general method according to Embodiment 2 of the present invention. As shown in <figref idrefs="f0009">FIG. 10</figref>, the method includes:
<ul><li>S1001. Obtain information about a TS that needs to be occupied by the (i+n)th GMP block container, where the information is carried in an overhead GMP OH of the ith GMP block container.</li><li>S1002. Perform GMP demapping on customer service data of the (i+n)th GMP block container according to the TS information of the (i+n)th GMP block container.</li></ul></p><p id="p0092" num="0092">A processing object of the demapping is the customer service data. That is, the customer service data is demapped from the GMP block container.</p><p id="p0093" num="0093">In an optional implementation manner, the TS information includes TS quantity, where the TS quantity and a mapping granularity are associated and the GMP block container and the<!-- EPO <DP n="26"> --> mapping granularity are changed simultaneously, which corresponds to this optional implementation manner.</p><p id="p0094" num="0094">The preceding method specifically includes: obtaining the quantity of TSs that need to be occupied by the (i+n)th GMP block container, where the information is carried in the overhead GMP OH of the ith GMP block container; and performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to TS quantity of the (i+n)th GMP block container and a mapping granularity associated with the TS quantity.</p><p id="p0095" num="0095">In another optional implementation manner, the TS information includes the TS quantity and the mapping granularity, where the GMP block container and the mapping granularity are changed separately, which corresponds to this optional implementation manner.</p><p id="p0096" num="0096">The preceding method specifically includes: obtaining the quantity of the TSs that need to be occupied by the (i+n)th GMP block container, where the information is carried in the overhead GMP OH of the ith GMP block container; performing the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container; obtaining a mapping granularity of the (j+m)th GMP block container, where the mapping granularity is carried in an overhead GMP OH of the jth GMP block container; and performing the GMP demapping on the customer service data of the (j+m)th GMP block container according to the TS quantity of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container.</p><p id="p0097" num="0097">To facilitate description, the present embodiment takes n = 1 as an example to describe a principle of the GMP demapping in detail. <figref idrefs="f0009">FIG. 11</figref> is a first flow chart of a specific method according to Embodiment 2 of the present invention. The flowchart corresponds to a condition in which a GMP block container and a mapping granularity are changed simultaneously. As shown in <figref idrefs="f0009">FIG. 11</figref>, the method includes:
<ul><li>S1101. Obtain, based on a received PSI [0 - 255] indication of a 256-multiframe of an HO ODU, a condition about an HO ODU TS that needs to be occupied by an ODUflex.</li><li>S1102. After obtain the TS condition indication, perform corresponding GMP demapping processing by detecting a change of information M in a GMP OH.</li></ul></p><p id="p0098" num="0098">Optionally, the process of S1102 specifically includes:</p><heading id="h0008">1) Detect the information M in the GMP OH of the GMP block container and perform corresponding processing.</heading><p id="p0099" num="0099">When detecting that information M in a GMP OH of a (for example, the ith) GMP block container is changed, it is indicated that a TS adjustment is performed in the next (the (i+1)th)<!-- EPO <DP n="27"> --> GMP block container, that is, the size of the GMP block container is adjusted and the mapping granularity is also changed accordingly, indicating that demapping processing needs to be performed in the next (the (i+1)th) GMP block container according to the mapping granularity and block container specified by the information M. If no change is detected, it is indicated that in the next (the (i+1)th) GMP block container, the GMP demapping processing is performed still according to the original mapping granularity and the original block container. 2) Perform demapping processing in the next GMP block container.</p><p id="p0100" num="0100">Perform the corresponding demapping processing according to an indication of the information M in the GMP OH of the previous (the ith) GMP block container. When the information M indicates that the TS is switched over, perform, according to the mapping granularity specified by the information M, the demapping processing in the GMP block container specified by the information M; that is, perform the demapping processing in the (i+1)th GMP block container according to the block container size specified by the information M and the mapping granularity specified by the information M; or that is, demap customer service data in the mapping granularity specified by the information M by performing the GMP demapping processing in the block container of the size specified by the information M. When the information M indicates that the TS is not switched over, perform the GMP demapping processing still in the original GMP block container according to the original mapping granularity.</p><p id="p0101" num="0101">S 1103. After the TS adjustment and the mapping granularity changing are complete, perform normal GMP demapping processing in the adjusted block container according to the changed mapping granularity.</p><p id="p0102" num="0102">For an example diagram of performing the GMP demapping based on the method shown in <figref idrefs="f0009">FIG. 11</figref> in Embodiment 2 of the present invention, see <figref idrefs="f0005">FIG. 6</figref>. As shown in <figref idrefs="f0005">FIG. 6</figref>, the ith GMP block container occupies three TSs and the customer service data is demapped from the GMP block container based on a 3-byte mapping granularity; the size of the (i+1)th GMP block container is adjusted to 4 TSs and the customer service data is demapped from the GMP block container based on a 4-byte mapping granularity.</p><p id="p0103" num="0103"><figref idrefs="f0010">FIG. 12</figref> is a second flow chart of a specific method according to Embodiment 2 of the present invention. This flow chart corresponds to a condition in which a GMP block container and a mapping granularity are changed separately. As shown in <figref idrefs="f0010">FIG. 12</figref>, the method includes: S1201. Obtain, based on a received PSI [0-255] indication of a 256-multiframe of an HO ODU, a condition about an HO ODU TS that needs to be occupied by an ODUflex.</p><p id="p0104" num="0104">S1202: After obtaining the TS condition indication, perform corresponding GMP demapping<!-- EPO <DP n="28"> --> processing during a condition adjustment by detecting a change of information M in a GMP OH.</p><p id="p0105" num="0105">Optionally, the specific process of S1202 includes:</p><heading id="h0009">1) Detect the information M in the GMP OH of the GMP block container and performing corresponding processing.</heading><p id="p0106" num="0106">When detecting that information M in a GMP OH of the ith GMP block container is changed, it is indicated that a TS adjustment is performed in the next (the (i+1)th) GMP block container, that is, the size of the (i+1)th GMP block container is adjusted, indicating that the demapping processing needs to be performed in the next GMP block container according to a block container specified by the changed information M. If no change is detected, it is indicated that in the next GMP block container, the demapping processing is performed still according to the original block container. In the ith GMP block container, the demapping processing is performed still according to the original block container. 2) Perform the demapping processing in the next (the (i+1)th) GMP block container.</p><p id="p0107" num="0107">Perform the corresponding demapping processing according to an indication of the information M in the GMP OH of the previous (the ith) GMP block container. When it is indicated that the TS is switched over, perform the demapping processing in the (i+1)th GMP block container according to the block container size specified by the changed information M; when it is indicated that the TS is not switched over, perform the demapping processing in the (i+1)th GMP block container still according to the original block container size. The mapping granularity used when the demapping is performed in the (i+1)th GMP block container remains unchanged.</p><p id="p0108" num="0108">S1203. Perform corresponding GMP demapping during mapping granularity changing by detecting a change of information M' in the GMP OH.</p><p id="p0109" num="0109">Optionally, the specific process of S1203 may include:</p><heading id="h0010">1) Detect the information M' in the GMP OH of the GMP block container and performing the corresponding processing.</heading><p id="p0110" num="0110">When information M' in a GMP OH of the jth GMP block container is changed, it is indicated that the mapping granularity is changed in the next (the (j+1)th) GMP block container and that the demapping processing needs to be performed in the next (the (j+1)th) GMP block container according to the mapping granularity specified by the information M'. When the information M' in the GMP OH of the jth GMP block container remains unchanged, it is indicated that in the next (the (j+1)th) GMP block container, the demapping processing is performed still according to the original mapping granularity. The value j is a positive integer.<!-- EPO <DP n="29"> --></p><heading id="h0011">2) Perform the demapping processing in the next (the (j+1)th) GMP block container.</heading><p id="p0111" num="0111">Perform the corresponding demapping processing according to an indication of the information M' in the GMP OH of the previous (the jth) GMP block container. When it is indicated that the mapping granularity of the GMP is changed, perform the demapping processing in the (j+1)th GMP block container according to the mapping granularity specified by the information M'; when it is indicated that the mapping granularity of the GMP remains unchanged, perform the demapping processing in the (j+1)th GMP block container still according to the original mapping granularity, where the size of the (j+1)th GMP block container remains unchanged.</p><p id="p0112" num="0112">S1204: After the TS adjustment and the mapping granularity changing are completed, perform normal GMP demapping processing in the adjusted block container according to the changed mapping granularity.</p><p id="p0113" num="0113">For an example diagram of performing the GMP demapping based on the method shown in <figref idrefs="f0010">FIG. 12</figref> in Embodiment 2 of the present invention, see <figref idrefs="f0007">FIG. 8</figref>. As shown in <figref idrefs="f0007">FIG. 8</figref>, the ith GMP block container occupies 3 TSs and the customer service data is demapped from the GMP block container based on a 3-byte granularity; the size of the (i+1)th GMP block container is adjusted to 4 TSs and the customer service data is demapped from the GMP block container still based on the 3-byte granularity; the jth GMP block container still occupies 4 TSs and the customer service data is demapped from the GMP block container still based on the 3-byte granularity; the (j+1)th GMP block container still occupies 4 TSs and the mapping granularity is adjusted to 4-byte, that is, the customer service data is demapped from the GMP block container based on a 4-byte granularity.</p><p id="p0114" num="0114">The following describes the technical solution in Embodiment 2 of the present invention by using a specific example:
<ul><li>1. Obtain an indication about TS1, TS3, TS4, and TS5 of HO ODU2 that need to be occupied by the ODUflex based on the received PSI[0 - 255] of the 256-multiframe of the HO ODU2.</li><li>2. After obtaining the TS condition indication, perform the corresponding GMP demapping processing by detecting a change of the information M in the GMP OH.</li><li>2.1. Detect that the information M in the GMP OH of the ith GMP block container is changed from 3TS to 4TS and trigger a response operation.</li></ul></p><p id="p0115" num="0115">It is indicated that a TS adjustment is performed in the next (the (i+1)th) GMP block container, that is, the (i+1)th GMP block container is adjusted to HO ODTU2.4; meanwhile, the mapping granularity is changed to 4-byte.</p><p id="p0116" num="0116">The size of the ith GMP block container remains HO ODTU2.3.<!-- EPO <DP n="30"> --></p><p id="p0117" num="0117">In the ith GMP block container, the ODUflex is demapped still by using the 3-byte mapping granularity.</p><heading id="h0012">2.2. Perform demapping processing in the next (the (i+1)th) GMP block container.</heading><p id="p0118" num="0118">According to the indication of information M in the GMP OH of the previous (the ith) GMP block container, perform the demapping processing in the adjusted GMP block container HO ODTU2.4 based on the changed mapping granularity 4-byte. 3. After the TS adjustment and the mapping granularity changing are completed, the GMP performs normal demapping processing in block container HO ODTU2.4 based on the 4-byte mapping granularity.</p><p id="p0119" num="0119">In the method in Embodiment 2 of the present invention, whether the information about the time slot TS occupied by the GMP block container is changed in the generic mapping procedure GMP OH is detected. When it is detected that the TS information or the mapping granularity information is changed, corresponding adjustments on the size of the GMP block container and the mapping granularity are triggered and the demapping processing is performed according to the block container size specified by the changed TS information. In this way, adaptive processing for a variable container and a variable mapping granularity is achieved and a lossless TS adjustment is implemented.</p><heading id="h0013"><b>Embodiment 3</b></heading><p id="p0120" num="0120">Embodiment 3 of the present invention provides an apparatus for generic mapping procedure GMP mapping. The apparatus is capable of implementing the mapping method in Embodiment 1.</p><p id="p0121" num="0121"><figref idrefs="f0010">FIG. 13</figref> is a function block diagram of an apparatus for GMP mapping according to Embodiment 3 of the present invention. As shown in <figref idrefs="f0010">FIG. 13</figref>, the apparatus 10 includes:
<ul><li>an encapsulation unit 101, configured to carry, in an overhead GMP OH of the ith GMP block container, information about a TS that needs to be occupied by the (i+n)th GMP block container;</li><li>an adaptation unit 102, configured to adjust the (i+n)th GMP block container according to the information about the TS the needs to be occupied by the (i+n)th GMP block container; and</li><li>a mapping unit 103, configured to perform, according to the adjusted (i+n)th GMP block container, the GMP mapping on customer service data to be sent.</li></ul></p><heading id="h0014">1) Optionally, the TS information includes TS quantity. The TS quantity and a mapping<!-- EPO <DP n="31"> --> granularity are associated.</heading><p id="p0122" num="0122">For this condition, the encapsulation unit 101 may further be configured to carry, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block container, where the TS quantity needs to be adjusted; the adaptation unit 102 may further be configured to simultaneously adjust the size of the (i+n)th GMP block container and the mapping granularity according to the TS quantity; and the mapping unit 103 may further configured to perform, according to the adjusted size of the (i+n)th GMP block container and the adjusted mapping granularity, the GMP mapping on the customer service data to be sent. 2) Optionally, the TS information includes the TS quantity and the mapping granularity.</p><p id="p0123" num="0123">For this condition, the encapsulation unit 101 may further configured to carry, in the overhead GMP OH of the ith GMP block container, the TS quantity of the (i+n)th GMP block container that needs to be adjusted; the adaptation unit 102 may further be configured to adjust the size of the (i+n)th GMP block container according to the TS quantity; and the mapping unit 103 may further be configured to perform the GMP mapping on the customer service data to be sent according to the adjusted size of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container.</p><p id="p0124" num="0124">Optionally, the encapsulation unit 101 may further be configured to carry, in the overhead GMP OH of the jth GMP block container, a mapping granularity of the (j+m)th GMP block container, where the mapping granularity needs to be adjusted; the adaptation unit 102 may further be configured to adjust the mapping granularity of the (j+m)th GMP block container according to the carried mapping granularity; and the mapping unit 103 may further be configured to perform, according to the size of jth GMP block container and the mapping granularity of the (j+m)th GMP block container, the GMP mapping on the customer service data to be sent.</p><p id="p0125" num="0125"><figref idrefs="f0011">FIG. 14</figref> is a detailed function block diagram of the apparatus in Embodiment 3 of the present invention. As shown in <figref idrefs="f0011">FIG. 14</figref>, the apparatus 20 includes:
<ul><li>a serial-to-parallel conversion unit 201, configured to distribute serial data to M cache pipes based on a byte granularity, where M is the quantity of TSs of an HO ODU that are occupied by an ODUflex and is also a mapping granularity; when the mapping granularity is 3-byte, the serial-to-parallel conversion unit 201 writes three bytes of customer data into three cache pipes at a time in a parallel manner, that is, writes one byte of the customer data into each of the three cache pipes;</li><li>a channel unit (Channel 1 - Channel M) 206, configured to serve as a cache<!-- EPO <DP n="32"> --> pipe in the byte granularity;</li><li>an information generation unit 202, configured to generate data information C8M and clock information C8-delta during mapping, where C8M indicates the amount of data in an M-byte granularity, where the data is mapped into a GMP block container; and the clock information refers to a speed or mapping rate when the customer data is mapped into the GMP block container;</li><li>a mapping unit 203, configured to read data from the M cache pipes according to a particular mapping algorithm, where the mapping algorithm is, for example, a "sigma-delta" algorithm; for example, when the mapping granularity is 3, the customer data is read from 3 cache pipes in a unit of three bytes to an encapsulation unit;</li><li>the encapsulation unit 204, configured to encapsulate the data and an overhead into a frame; and</li><li>a TS adaptation unit 205, configured to perform a triggering operation on a TS adjustment and mapping granularity changing during GMP mapping. When the TS adjustment is performed (assuming that the TS quantity is changed from M-1 to M), the serial-to-parallel conversion unit 201, the mapping unit 203, and the encapsulation unit 204 are triggered according to a particular sequence to perform corresponding processing. The specific processing method includes: The TS adaptation unit 205 calculates, based on the pipe data depth (the amount of data stored in the current cache pipe), the C8M value, and a GMP block period (the time for completing mapping processing on a GMP block container, also referring to a multiframe period), the time when the serial-to-parallel conversion unit is triggered to switch from distributing data to M-1 cache pipes to distributing data to M cache pipes. That is, after the switchover, the data written into the cache pipes is mapped into a GMP block of an adjusted container.</li></ul></p><p id="p0126" num="0126">The following example describes a processing process when the TS and the M are switched over simultaneously.</p><p id="p0127" num="0127">Assume that the cache pipe data depth at a start time point of the GMP block container is D; the amount of customer data that is in an M-1 byte granularity and needs to be mapped into the current GMP block container is represented as C8(M-1)_cur, where C8(M-1)_cur is greater than or equal to D, and D is greater than 0; after C8(M-1)_cur-D records of data in the M-1 byte granularity are written into ingresses of M-1 cache pipes, the serial-to-parallel conversion unit 201 switches from distributing data to M-1 cache pipes to distributing data to<!-- EPO <DP n="33"> --> M cache pipes, that is, switches to writing data in an M-byte granularity into ingresses of M cache pipes.</p><p id="p0128" num="0128">After reading C8(M-1)_cur records of data in the M-1 byte granularity in the M-1 cache pipes in the current GMP block period, the mapping unit 203 switches to reading data in the M-byte granularity in the M cache pipes in the next GMP block period. The switchover time point is a GMP block boundary. The encapsulation unit 204 multiplexes the GMP block container (HO ODTU.M) to the HO ODU at a boundary of an HO ODU multiframe. The information generation unit 202 is configured to input the generated data information and clock information into the encapsulation unit 204, where the data information and the clock information are included in the GMP OH. The encapsulation unit 204 is further configured to generate an ODU OH and an OTU OH. In this case, the encapsulation unit 204 may be configured to uses the ODU OH, the OTU OH, and the GMP OH as an overhead of an OTN frame, and encapsulate the frame overhead and valid customer data into a frame.</p><p id="p0129" num="0129">The apparatus in this embodiment performs the triggering operation on the time slot TS adjustment and the mapping granularity changing, which may enhance the GMP adaptation and achieve lossless mapping and demapping processing for a variable container and a variable mapping granularity.</p><heading id="h0015"><b>Embodiment 4</b></heading><p id="p0130" num="0130">Embodiment 4 of the present invention provides an apparatus for generic mapping procedure GMP demapping. The apparatus is capable of implementing the demapping method in Embodiment 2.</p><p id="p0131" num="0131"><figref idrefs="f0012">FIG. 15</figref> is a general function block diagram of the apparatus for GMP demapping in Embodiment 4 of the present invention. As shown in <figref idrefs="f0012">FIG. 15</figref>, the apparatus 30 includes:
<ul><li>a decapsulation unit 301, configured to obtain information about a time slot TS that needs to be occupied by the (i+n)th GMP block container in an overhead GMP OH of the ith GMP block container; and</li><li>a demapping unit 302, configured to perform GMP demapping on customer service data of the (i+n)th GMP block container according to the TS information of the (i+n)th GMP block container.</li></ul></p><p id="p0132" num="0132">Optionally, the TS information includes TS quantity, where the TS quantity is associated with a mapping granularity. The decapsulation unit 301 is configured to obtain the quantity of TSs that need to be occupied by the (i+n)th GMP block container, where the quantity of the TSs is<!-- EPO <DP n="34"> --> carried in the overhead GMP OH of the ith GMP block container. The demapping unit 302 is configured to perform the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity associated with the TS quantity.</p><p id="p0133" num="0133">Optionally, the TS information includes the TS quantity and the mapping granularity. The decapsulation unit 301 may be configured to obtain the quantity of the TSs that need to be occupied by the (i+n)th GMP block container, where the quantity of the TSs is carried in the overhead GMP OH of the ith GMP block container. The demapping unit 302 may be configured to perform the GMP demapping on the customer service data of the (i+n)th GMP block container according to the TS quantity of the (i+n)th GMP block container and the mapping granularity of the ith GMP block container. The decapsulation unit 301 may further be configured to obtain a mapping granularity of the (j+m)th GMP block container, where the mapping granularity is carried in an overhead GMP OH of the jth GMP block container. The demapping unit 302 may further be configured to perform the GMP demapping on customer service data of the (j+m)th GMP block container according to the TS quantity of the jth GMP block container and the mapping granularity of the (j+m)th GMP block container.</p><p id="p0134" num="0134"><figref idrefs="f0012">FIG. 16</figref> is a detailed specific function block diagram of the apparatus in Embodiment 4 of the present invention. As shown in <figref idrefs="f0012">FIG. 16</figref>, the apparatus 40 includes:
<ul><li>a decapsulation unit 401, configured to abstract an overhead from an optical transport network frame;</li><li>a TS adaptation unit 402, configured to obtain time slot TS change information and mapping granularity information during mapping from the overhead and perform a corresponding triggering operation;</li><li>an information capture unit 403, configured to obtain data information C8M and clock information C8-delta from the overhead;</li><li>a demapping unit 404, configured to demap customer service data carried in the optical transport network frame and write the data into a cache pipe 406 in a multiple-byte granularity; and</li><li>a parallel-to-serial conversion unit 405, configured to combine payload data in the cache pipe 406 (Channel 1 to Channel M) in the multiple-byte granularity as a serial data flow.</li></ul></p><p id="p0135" num="0135">A DDS (Direct Digital Synthesizer) is a direct digital frequency synthesizer, configured to recover a customer service clock.</p><p id="p0136" num="0136">The apparatus in this embodiment of the present invention obtains the time slot TS change<!-- EPO <DP n="35"> --> information and the mapping granularity change information during the mapping from the overhead and performs the corresponding triggering operation, which provides a GMP adaptation processing method for a variable container and a variable mapping granularity and a triggering mechanism for lossless TS switchover. The apparatus enhances the GMP adaptation and achieves lossless mapping and demapping processing for the variable container and the variable mapping granularity.</p><p id="p0137" num="0137">Persons of ordinary skill in the art should understand that all or part of the processes in the methods of the preceding embodiments may be implemented by a program instructing relevant hardware. The program may be stored in a computer readable storage medium. When the program runs, the processes in the embodiments of each of the preceding methods may be performed. The storage medium may be a magnetic disk, a CD-ROM, a read-only memory (Read-Only Memory, ROM), a random access memory (Random Access Memory, RAM), and so on.</p><p id="p0138" num="0138">The preceding embodiments are merely provided for describing the technical solutions in the embodiments of the present invention, but not intended to limit the present invention. Persons of ordinary skill in the art should understand that modifications may be made on the technical solutions recorded in each of the preceding embodiments, or equivalent replacements may be made on a part of the technical features; and these modifications or replacements do not make the nature of the corresponding technical solutions depart from the scope of the technical solutions in each of the embodiments of the present invention.</p></description><claims mxw-id="PCLM56976235" lang="EN" load-source="patent-office"><!-- EPO <DP n="36"> --><claim id="c-en-0001" num="0001"><claim-text>A method for generic mapping procedure, GMP, mapping, <b>characterized in that</b> the method comprises:
<claim-text>carrying, in an optical channel payload unit, OPU, overhead in a first higher order, HO, OPU multiframe, a change indication of a quantity of one or more time slots that need to be occupied by a GMP block container in a second HO OPU multiframe;</claim-text>
<claim-text>adjusting, the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe in accordance with the change indication, to obtain a adjusted GMP block container in the second HO OPU multiframe;</claim-text>
<claim-text>performing, GMP mapping on customer service data to be sent into the adjusted GMP block container.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein:
<claim-text>the change indication is an increase indication or a decrease indication, wherein the increase indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be increased, and the decrease indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be decreased;</claim-text>
<claim-text>the adjusting, the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe in accordance with the change indication, to obtain a adjusted GMP block container in the second HO OPU multiframe comprising: increasing or decreasing, the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe in accordance with the increase indication or the decrease indication respectively, to obtain a adjusted GMP block container in the second HO OPU multiframe.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claims 1 or 2, wherein the method further comprising:
<claim-text>adjusting, the mapping granularity of GMP mapping of the customer service data in accordance with the change indication, wherein adjusted mapping granularity is associated with adjusted quantity of one or more time slots occupied by the adjusted GMP block container in the second HO OPU multiframe; and</claim-text>
<claim-text>the performing, GMP mapping on customer service data to be sent into the adjusted GMP block container comprises: performing, GMP mapping on the customer service data to be sent into the adjusted GMP block container according to the adjusted mapping granularity.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to any one of claims 1 to 3, wherein:<!-- EPO <DP n="37"> -->
<claim-text>the GMP block container and the adjusted GMP block container are HO ODTUs occupying different quantity of time slots respectively.</claim-text>
<claim-text>the change indication is an increase indication or a decrease indication, wherein the increase indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be increased, and the decrease indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be decreased.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any one of claims 1 to 4, wherein<br/>
the change indication is for triggering GMP demapping adjustment at a receive end receiving the first HO OPU multiframe.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to any one of claims 1 to 5, wherein<br/>
the customer service data is data of an ODUflex.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to any one of claims 1 to 6, wherein<br/>
the second HO OPU multiframe is the next HO OPU multiframe of the first HO OPU multiframe.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A method for generic mapping procedure, GMP, mapping, <b>characterized in that</b> the method comprises:
<claim-text>carrying, in an optical channel payload unit, OPU, overhead in a first higher order, HO, OPU multiframe, a change indication of a quantity of one or more time slots that need to be occupied in a second HO OPU multiframe by an ODUflex;</claim-text>
<claim-text>adjusting, in accordance with the change indication, the quantity of one or more time slots in the second HO OPU multiframe that need to be occupied by the ODUflex;</claim-text>
<claim-text>performing, GMP mapping on the data of the ODUflex, wherein the data of the ODUflex is to be sent through adjusted quantity of one or more time slots.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method according to claim 8, wherein:
<claim-text>the change indication is an increase indication or a decrease indication, wherein the increase indication indicates that the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex is to be increased, and the decrease indication indicates that the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex is to be decreased;</claim-text>
<claim-text>the adjusting, in accordance with the change indication, the quantity of one or more time slots in the second HO OPU multiframe that need to be occupied by the ODUflex comprising: increasing or decreasing, in accordance with the increase indication or the decrease indication respectively, the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex.</claim-text><!-- EPO <DP n="38"> --></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method according to claims 8 or 9, wherein the method further comprising:
<claim-text>adjusting, the mapping granularity of GMP mapping of the data in accordance with the change indication, wherein adjusted mapping granularity is associated with adjusted quantity of one or more time slots in the second HO OPU multiframe that need to be occupied by the ODUflex; and</claim-text>
<claim-text>the performing, GMP mapping on the data of the ODUflex comprises: performing, performing, GMP mapping on the data of the ODUflex according to the adjusted mapping granularity.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method according to any one of claims 8 to 10, wherein<br/>
the change indication is for triggering GMP demapping adjustment at a receive end receiving the first HO OPU multiframe.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A method for generic mapping procedure, GMP, demapping, <b>characterized in that</b> the method comprises:
<claim-text>obtaining, a change indication of a quantity of one or more time slots that need to be occupied by a GMP block container in a second higher order, HO, optical channel payload unit, OPU, multiframe, wherein the change indication is carried in an OPU overhead in a first HO OPU multiframe;</claim-text>
<claim-text>performing GMP demapping on customer service data of the GMP block container in the second HO OPU multiframe according to the change indication.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method according to claim 12, wherein<br/>
performing GMP demapping on customer service data of the GMP block container in the second HO OPU multiframe according to the change indication comprises: performing GMP demapping on customer service data of the GMP block container in the second HO OPU multiframe according to a changed quantity and a mapping granularity, wherein the changed quantity is in accordance with the change indication, and the mapping granularity is associated with the changed quantity.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The method according to claims 11 or 13, wherein<br/>
the GMP block container is a HO ODTU; and<br/>
the customer service data is data of an ODUflex.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The method according to any one of claims 12 to 14, wherein:
<claim-text>the second HO OPU multiframe is the next HO OPU multiframe of the first HO OPU multiframe.</claim-text></claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>A method for generic mapping procedure, GMP, demapping, <b>characterized in that</b> the method comprises:
<claim-text>obtaining, a change indication of a quantity of one or more time slots that need to be<!-- EPO <DP n="39"> --> occupied by an ODUflex in a second higher order, HO, optical channel payload unit, OPU, multiframe, wherein the change indication is carried in an OPU overhead in a first HO OPU multiframe;</claim-text>
<claim-text>performing GMP demapping on data of the ODUflex in the second HO OPU multiframe according to the change indication.</claim-text></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The method according to claim 16, wherein:
<claim-text>performing GMP demapping on data of the ODUflex in the second HO OPU multiframe according to the change indication comprises: performing GMP demapping on data of the ODUflex in the second HO OPU multiframe according to a changed quantity and a mapping granularity, wherein the changed quantity is in accordance with the change indication, and the mapping granularity is associated with the changed quantity.</claim-text></claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>An apparatus for generic mapping procedure, GMP, mapping, <b>characterized in that</b> the apparatus comprises:
<claim-text>a first means for carrying, in an optical channel payload unit, OPU, overhead in a first higher order, HO, OPU multiframe, a change indication of a quantity of one or more time slots that need to be occupied by a GMP block container in a second HO OPU multiframe;</claim-text>
<claim-text>a second means for adjusting, the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe in accordance with the change indication, to obtain a adjusted GMP block container in the second HO OPU multiframe;</claim-text>
<claim-text>a third means for performing, GMP mapping on customer service data to be sent into the adjusted GMP block container.</claim-text></claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>The apparatus according to claim 18, wherein:
<claim-text>the change indication is an increase indication or a decrease indication, wherein the increase indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be increased, and the decrease indication indicates that the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe is to be decreased;</claim-text>
<claim-text>the second means is for increasing or decreasing, the quantity of one or more time slots that need to be occupied by the GMP block container in the second HO OPU multiframe in accordance with the increase indication or the decrease indication respectively, to obtain a adjusted GMP block container in the second HO OPU multiframe.</claim-text></claim-text></claim><claim id="c-en-0020" num="0020"><claim-text>The apparatus according to claims 18 or 19, wherein:
<claim-text>the apparatus further comprises a fourth means for adjusting, the mapping granularity of GMP mapping of the customer service data in accordance with the change indication, wherein adjusted mapping granularity is associated with adjusted quantity of one or more time slots<!-- EPO <DP n="40"> --> occupied by the adjusted GMP block container in the second HO OPU multiframe;</claim-text>
<claim-text>the third means is for performing, GMP mapping on the customer service data to be sent into the adjusted GMP block container according to the adjusted mapping granularity;</claim-text></claim-text></claim><claim id="c-en-0021" num="0021"><claim-text>The apparatus according to any one of claims 18 to 20, wherein:
<claim-text>the GMP block container and the adjusted GMP block container are HO ODTUs occupying different quantity of time slots; and</claim-text>
<claim-text>the change indication is for triggering GMP demapping adjustment at a receive end receiving the first HO OPU multiframe; and</claim-text>
<claim-text>the customer service data is data of an ODUflex; and</claim-text>
<claim-text>the second HO OPU multiframe is the next HO OPU multiframe of the first HO OPU multiframe.</claim-text></claim-text></claim><claim id="c-en-0022" num="0022"><claim-text>An apparatus for generic mapping procedure, GMP, mapping, <b>characterized in that</b> the apparatus comprises:
<claim-text>a first means for carrying, in an optical channel payload unit, OPU, overhead in a first higher order, HO, OPU multiframe, a change indication of a quantity of one or more time slots that need to be occupied in a second HO OPU multiframe by an ODUflex;</claim-text>
<claim-text>a second means for adjusting, in accordance with the change indication, the quantity of one or more time slots in the second HO OPU multiframe that need to be occupied by the ODUflex;</claim-text>
<claim-text>a third means for performing, GMP mapping on the data of the ODUflex, wherein the data of the ODUflex is to be sent through adjusted quantity of one or more time slots.</claim-text></claim-text></claim><claim id="c-en-0023" num="0023"><claim-text>The apparatus according to claim 22, wherein:
<claim-text>the change indication is an increase indication or a decrease indication, wherein the increase indication indicates that the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex is to be increased, and the decrease indication indicates that the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex is to be decreased;</claim-text>
<claim-text>the second means is for increasing or decreasing, in accordance with the increase indication or the decrease indication respectively, the quantity of one or more time slots that need to be occupied in the second HO OPU multiframe by the ODUflex.</claim-text></claim-text></claim><claim id="c-en-0024" num="0024"><claim-text>The apparatus according to claims 22 or 23, wherein:
<claim-text>the apparatus further comprises a fourth means for adjusting, the mapping granularity of GMP mapping of the data in accordance with the change indication, wherein adjusted mapping granularity is associated with adjusted quantity of one or more time slots in the second HO OPU multiframe that need to be occupied by the ODUflex; and</claim-text>
<claim-text>the third means is for performing, performing, GMP mapping on the data of the ODUflex<!-- EPO <DP n="41"> --> according to the adjusted mapping granularity.</claim-text></claim-text></claim><claim id="c-en-0025" num="0025"><claim-text>An apparatus for generic mapping procedure, GMP, demapping, <b>characterized in that</b> the apparatus comprises:
<claim-text>a first means for obtaining, a change indication of a quantity of one or more time slots that need to be occupied by a GMP block container in a second higher order, HO, optical channel payload unit, OPU, multiframe, wherein the change indication is carried in an OPU overhead in a first HO OPU multiframe; and</claim-text>
<claim-text>a second means for performing GMP demapping on customer service data of the GMP block container in the second HO OPU multiframe according to the change indication.</claim-text></claim-text></claim><claim id="c-en-0026" num="0026"><claim-text>The apparatus according to claim 25, wherein:
<claim-text>the second means is for performing GMP demapping on customer service data of the GMP block container in the second HO OPU multiframe according to a changed quantity and a mapping granularity, wherein the changed quantity is in accordance with the change indication, and the mapping granularity is associated with the changed quantity.</claim-text></claim-text></claim><claim id="c-en-0027" num="0027"><claim-text>An apparatus for generic mapping procedure, GMP, demapping, <b>characterized in that</b> the apparatus comprises:
<claim-text>a first means for obtaining, a change indication of a quantity of one or more time slots that need to be occupied by an ODUflex in a second higher order, HO, optical channel payload unit, OPU, multiframe, wherein the change indication is carried in an OPU overhead in a first HO OPU multiframe; and</claim-text>
<claim-text>a second means for performing GMP demapping on data of the ODUflex in the second HO OPU multiframe according to the change indication.</claim-text></claim-text></claim><claim id="c-en-0028" num="0028"><claim-text>The apparatus according to claim 27, wherein:
<claim-text>the second means is for performing GMP demapping on data of the ODUflex in the second HO OPU multiframe according to a changed quantity and a mapping granularity, wherein the changed quantity is in accordance with the change indication, and the mapping granularity is associated with the changed quantity</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667017" load-source="patent-office"><!-- EPO <DP n="42"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="108" he="230" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0002" num="1a"><img id="if0002" file="imgf0002.tif" wi="92" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0003" num="2,3"><img id="if0003" file="imgf0003.tif" wi="165" he="215" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0004" num="4,5"><img id="if0004" file="imgf0004.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0005" num="6"><img id="if0005" file="imgf0005.tif" wi="161" he="164" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0006" num="7"><img id="if0006" file="imgf0006.tif" wi="165" he="141" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="134" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0008" num="9"><img id="if0008" file="imgf0008.tif" wi="132" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0009" num="10,11"><img id="if0009" file="imgf0009.tif" wi="162" he="189" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="51"> --><figure id="f0010" num="12,13"><img id="if0010" file="imgf0010.tif" wi="155" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="52"> --><figure id="f0011" num="14"><img id="if0011" file="imgf0011.tif" wi="165" he="159" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="53"> --><figure id="f0012" num="15,16"><img id="if0012" file="imgf0012.tif" wi="165" he="215" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
