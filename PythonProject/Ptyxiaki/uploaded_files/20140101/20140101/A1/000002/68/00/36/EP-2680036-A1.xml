<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680036-A1" country="EP" doc-number="2680036" kind="A1" date="20140101" family-id="46384231" file-reference-id="315734" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549533" ucid="EP-2680036-A1"><document-id><country>EP</country><doc-number>2680036</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12173796-A" is-representative="YES"><document-id mxw-id="PAPP154823456" load-source="docdb" format="epo"><country>EP</country><doc-number>12173796</doc-number><kind>A</kind><date>20120627</date><lang>EN</lang></document-id><document-id mxw-id="PAPP175868108" load-source="docdb" format="original"><country>EP</country><doc-number>12173796.9</doc-number><date>20120627</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449877" ucid="EP-12173796-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12173796</doc-number><kind>A</kind><date>20120627</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1853818290" load-source="docdb">H04K   3/00        20060101ALN20170117BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853818291" load-source="docdb">H04B   1/16        20060101ALN20170117BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1853818292" load-source="docdb">G01S  19/21        20100101AFI20170117BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1927409424" load-source="docdb" scheme="CPC">H04K   3/822       20130101 LI20160611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1927411569" load-source="docdb" scheme="CPC">H04K   3/45        20130101 LI20160611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1927412171" load-source="docdb" scheme="CPC">H04K   3/228       20130101 LI20160611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1927412358" load-source="docdb" scheme="CPC">G01S  19/21        20130101 LI20160611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048000724" load-source="docdb" scheme="CPC">H04B   1/16        20130101 LI20150611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048003118" load-source="docdb" scheme="CPC">H04K   3/42        20130101 FI20150611BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132181083" lang="DE" load-source="patent-office">Signalerkennung bei Vorhandensein eines Störsignals</invention-title><invention-title mxw-id="PT132181084" lang="EN" load-source="patent-office">Signal detection in the presence of a jamming signal</invention-title><invention-title mxw-id="PT132181085" lang="FR" load-source="patent-office">Détection de signaux en présence d'un signal de brouillage</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652618" load-source="docdb" ucid="US-20020005802-A1"><document-id format="epo"><country>US</country><doc-number>20020005802</doc-number><kind>A1</kind><date>20020117</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652619" load-source="docdb" ucid="US-20070211793-A1"><document-id format="epo"><country>US</country><doc-number>20070211793</doc-number><kind>A1</kind><date>20070913</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT373869176" load-source="docdb" ucid="US-20090128403-A1"><document-id format="epo"><country>US</country><doc-number>20090128403</doc-number><kind>A1</kind><date>20090521</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652620" load-source="docdb" ucid="WO-2008017860-A1"><document-id format="epo"><country>WO</country><doc-number>2008017860</doc-number><kind>A1</kind><date>20080214</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45131187" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918146652" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ST ERICSSON SA</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR918159686" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ST-ERICSSON SA</last-name></addressbook></applicant><applicant mxw-id="PPAR918990209" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ST-Ericsson SA</last-name><iid>101265257</iid><address><street>Chemin du Champ-des-Filles 39</street><city>1228 Plan-les-Ouates</city><country>CH</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918156571" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WHITWORTH GERALD</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918150661" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WHITWORTH, GERALD</last-name></addressbook></inventor><inventor mxw-id="PPAR918985899" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WHITWORTH, GERALD</last-name><address><street>62 Riverside Drive Weedon</street><city>Northampton, Northamptonshire NN7 4RT</city><country>GB</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918983217" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>O'Connell, David Christopher</last-name><iid>100030418</iid><address><street>Haseltine Lake LLP Redcliff Quay 120 Redcliff Street</street><city>Bristol BS1 6HU</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548843396" load-source="docdb">AL</country><country mxw-id="DS548871123" load-source="docdb">AT</country><country mxw-id="DS548843398" load-source="docdb">BE</country><country mxw-id="DS548806617" load-source="docdb">BG</country><country mxw-id="DS548873535" load-source="docdb">CH</country><country mxw-id="DS548867576" load-source="docdb">CY</country><country mxw-id="DS548871124" load-source="docdb">CZ</country><country mxw-id="DS548843399" load-source="docdb">DE</country><country mxw-id="DS548867577" load-source="docdb">DK</country><country mxw-id="DS548867578" load-source="docdb">EE</country><country mxw-id="DS548897302" load-source="docdb">ES</country><country mxw-id="DS548806618" load-source="docdb">FI</country><country mxw-id="DS548806619" load-source="docdb">FR</country><country mxw-id="DS548843400" load-source="docdb">GB</country><country mxw-id="DS548867579" load-source="docdb">GR</country><country mxw-id="DS548843401" load-source="docdb">HR</country><country mxw-id="DS548871125" load-source="docdb">HU</country><country mxw-id="DS548873536" load-source="docdb">IE</country><country mxw-id="DS548843710" load-source="docdb">IS</country><country mxw-id="DS548806620" load-source="docdb">IT</country><country mxw-id="DS548867580" load-source="docdb">LI</country><country mxw-id="DS548888497" load-source="docdb">LT</country><country mxw-id="DS548871126" load-source="docdb">LU</country><country mxw-id="DS548888498" load-source="docdb">LV</country><country mxw-id="DS548888499" load-source="docdb">MC</country><country mxw-id="DS548805500" load-source="docdb">MK</country><country mxw-id="DS548805501" load-source="docdb">MT</country><country mxw-id="DS548871127" load-source="docdb">NL</country><country mxw-id="DS548897303" load-source="docdb">NO</country><country mxw-id="DS548873537" load-source="docdb">PL</country><country mxw-id="DS548888501" load-source="docdb">PT</country><country mxw-id="DS548871128" load-source="docdb">RO</country><country mxw-id="DS548888502" load-source="docdb">RS</country><country mxw-id="DS548873874" load-source="docdb">SE</country><country mxw-id="DS548888503" load-source="docdb">SI</country><country mxw-id="DS548897304" load-source="docdb">SK</country><country mxw-id="DS548873875" load-source="docdb">SM</country><country mxw-id="DS548805502" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670202" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A signal is detected and an unwanted jamming signal is removed from the detected signal. Respective first, second and third correlations between a received signal and signals at first, second and third frequencies are determined over a plurality of taps. The second frequency is higher than the first frequency and lower than the third frequency, and is equally spaced from the first and third frequencies. The second frequency is adapted to a frequency of the received signal such that peaks in the first and third correlations after corresponding adaptation of the first and third frequencies have substantially equal magnitudes. A difference is determined between non-peak magnitudes of the first and third correlations; and at least one of the correlations is compensated for the effects of the jamming signal, based on said difference.
<img id="iaf01" file="imgaf001.tif" wi="161" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499575" lang="EN" source="EPO" load-source="docdb"><p>A signal is detected and an unwanted jamming signal is removed from the detected signal. Respective first, second and third correlations between a received signal and signals at first, second and third frequencies are determined over a plurality of taps. The second frequency is higher than the first frequency and lower than the third frequency, and is equally spaced from the first and third frequencies. The second frequency is adapted to a frequency of the received signal such that peaks in the first and third correlations after corresponding adaptation of the first and third frequencies have substantially equal magnitudes. A difference is determined between non-peak magnitudes of the first and third correlations; and at least one of the correlations is compensated for the effects of the jamming signal, based on said difference.</p></abstract><description mxw-id="PDES63955632" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This invention relates to signal detection, and in particular to signal detection in the presence of a jamming signal.</p><p id="p0002" num="0002">In the case of a Global Navigation Satellite System (GNSS), such as the Global Positioning System (GPS), user equipment devices are used to detect radio signals transmitted by satellites in earth orbits.</p><p id="p0003" num="0003">Each satellite transmits signals at a frequency of 1575.42 MHz, referred to as the L1 frequency. GPS user equipment devices therefore include receivers for receiving these signals, and for extracting the information that allows the position of the device to be deduced. Such GPS receivers are known to be vulnerable to carrier wave (CW) signals within the GPS L1 frequency spectrum. These signals can "jam" the GPS receiver, and either reduce or prevent its ability to acquire and track the GPS satellite signals. Such "jamming" signals can be locally generated, possibly even from within the user's own platform, or radiated from other equipment in the local vicinity. In the vast majority of cases, these "jamming" signals are unintentional, often being a byproduct of the particular equipment design. For example, the "jamming signal" might be a harmonic of the fundamental clock frequency generated in the device. Without sufficient filtering in place, the harmonic signals might be radiated and picked up by the GPS receiver.</p><p id="p0004" num="0004">It is possible to remove "jamming" signals using hardware or discrete filters. However, some existing mass market GPS user equipment devices have inadequate hardware filters for some applications. After manufacture, adding further hardware filters is not a cost effective option, but it is possible to improve the performance of such devices by downloading software upgrades.</p><p id="p0005" num="0005">According to a first aspect of the present invention, there is provided a method of detecting a signal and removing an unwanted signal from the detected signal, the method comprising:
<ul><li>determining respective first, second and third correlations over a plurality of taps between a received signal and signals at first, second and third frequencies, wherein the second frequency is higher than the first frequency and lower than the third frequency, and is equally spaced from the first and third frequencies;<!-- EPO <DP n="2"> --></li><li>adapting the second frequency to a frequency of the received signal such that peaks in the first and third correlations after corresponding adaptation of the first and third frequencies have substantially equal magnitudes;</li><li>characterized by:
<ul><li>determining a difference between non-peak magnitudes of the first and third correlations; and</li><li>compensating at least one of the correlations for the effects of a jamming signal, based on said difference.</li></ul></li></ul></p><p id="p0006" num="0006">This has the advantage that the signal detection can be improved, because the second frequency can be more accurately adapted to the frequency of the received signal if the effect of the jamming signal is removed from the correlation values used in the adaption.</p><p id="p0007" num="0007">According to a second aspect of the invention, there is provided a receiver operating in accordance with the method of the first aspect.</p><heading id="h0001"><b><u>Brief description of drawings</u></b></heading><p id="p0008" num="0008"><ul><li><figref idrefs="f0001">Figure 1</figref> is a block schematic diagram showing a GPS receiver in accordance with an aspect of the present invention.</li><li><figref idrefs="f0002">Figure 2</figref> illustrates a stage in the operation of the receiver of <figref idrefs="f0001">Figure 1</figref>.</li><li><figref idrefs="f0002">Figure 3</figref> illustrates a second stage in the operation of the receiver of <figref idrefs="f0001">Figure 1</figref>.</li><li><figref idrefs="f0002">Figure 4</figref> illustrates a third stage in the operation of the receiver of <figref idrefs="f0001">Figure 1</figref>.</li><li><figref idrefs="f0003">Figure 5</figref> is a block diagram, illustrating the data flow in a method in accordance with an aspect of the present invention.</li></ul></p><heading id="h0002"><b><u>Detailed description</u></b></heading><!-- EPO <DP n="3"> --><p id="p0009" num="0009"><figref idrefs="f0001">Figure 1</figref> shows a GPS user equipment device 10 in the form of a communications device such as a mobile phone, personal computer, tracking device, or the like.</p><p id="p0010" num="0010">The user equipment device 10 in this embodiment comprises a cellular communication unit 12 and a Global Navigation Satellite System (GNSS) receiver unit 14, such as a Global Positioning System (GPS) receiver unit. Many features of these units are conventional, and will not be described further herein, except to the extent that that is necessary for an understanding of the present invention.</p><p id="p0011" num="0011">The cellular communication unit 12 comprises a transceiver 16, connected to a modem 18 and a processor 20, such that the cellular communication unit 12 can communicate through an antenna 22 with a base station 24 of a cellular communications network.</p><p id="p0012" num="0012">The GPS receiver unit 14 has receiver circuitry 24, connected to an antenna 26, for receiving signals from a satellite 28. The receiver circuitry 24 is also connected to a modem 30, which is connected in turn to a processor 32, which is configured to extract data from received GPS signals, in order to be able to determine the location of the unit. The processor 32 operates on the basis of algorithms stored in a memory 34. The location is then displayed on a display unit 36, for example in graphical form.</p><p id="p0013" num="0013">In order to be able to demodulate the received GPS signals, and extract the GPS data from them, in particular at low signal levels, it is advantageous to demodulate the signals using a signal at a frequency that is as close as possible to that of the received GPS signals. The frequency of the received signals is not exactly the same as the frequency of the transmitted signals, because of Doppler effects caused by the relative movement of the satellite 28 and the unit 14.</p><p id="p0014" num="0014">This illustrated embodiment of the invention therefore includes a tracking unit, comprising a frequency generator 50, which generates signals at three frequencies. The centre frequency is intended to be as close as possible to the frequency of the signals received by the GPS receiver unit 14, taking account of Doppler effects. Upper and lower frequency signals are also generated, at frequencies that are respectively higher and lower than the centre frequency by a fixed frequency margin, for example in the region of 20Hz.<!-- EPO <DP n="4"> --></p><p id="p0015" num="0015">The lower frequency signal, the centre frequency signal and the upper frequency signal are passed to the respective first inputs of three correlators 52, 54, 56. The received GPS signal, detected by the receiver circuitry 24, is passed to the respective second inputs of each of the three correlators 52, 54, 56.</p><p id="p0016" num="0016">Output signals from the correlators 52, 54, 56 are then passed to the processor 32.</p><p id="p0017" num="0017">Detection of the location of the unit 14 is then determined by the processor 32 based on algorithms described in more detail below. The algorithms can be downloaded in the form of computer readable code via the cellular communications network using the cellular communication unit 12 and stored in the memory 34. Alternatively, the algorithms can be stored in the device in the form of computer readable code at the time of manufacture of the device.</p><p id="p0018" num="0018"><figref idrefs="f0002">Figure 2</figref> is a schematic illustration of the operation of the frequency generator 50 and the correlators 52, 54, 56, as they act to track the GPS signal at low signal levels.</p><p id="p0019" num="0019">As mentioned above, three frequencies are generated locally, separated by typically 20 Hz. The centre one is set to be as close as possible to the anticipated Doppler frequency of the GPS satellite. The three correlators 52, 54, 56 then perform respective incoherent correlations between the received signal and all three of the locally generated frequencies. For each of the three frequencies, correlation is performed across 24 code taps, typically separated by a quarter chip of code phase. This gives a visibility of a range of 6 chips, corresponding to a physical distance in the order of 1800 meters. This allows the device to detect direct signals, but also reflected signals that will have a greater path length from the satellite than the direct line of sight signal.</p><p id="p0020" num="0020">The receiver software then attempts to maintain the peak code signal in the eighth tap of the 24 tap code array. <figref idrefs="f0002">Figure 2</figref> shows, schematically, the typical outputs of these correlators.</p><p id="p0021" num="0021">In <figref idrefs="f0002">Figure 2</figref>, the output of the first correlator 52, corresponding to the lower frequency signal, is shown by the reference numeral 82, the output of the second correlator 54, corresponding to the centre frequency signal, is shown by the reference numeral 84, and the output of the third correlator 56, corresponding to the upper frequency signal, is<!-- EPO <DP n="5"> --> shown by the reference numeral 86. As described above, each of these outputs has a peak, and the timings of the signals are adjusted so that the peak appears on the eighth tap.</p><p id="p0022" num="0022">The outputs of the first correlator 52 and the third correlator 56 are fed back to the frequency generator 50 as part of a frequency lock loop.</p><p id="p0023" num="0023">Thus, the output of the second correlator 54 has a higher peak than either of the outputs of the first correlator 52 and the third correlator 56, reflecting the fact that the centre frequency is the closest of the three frequencies to the Doppler frequency of the received signals.</p><p id="p0024" num="0024">The lower and upper frequencies are spaced equally from the centre frequency and so, when the peaks of the outputs of the first correlator 52 and the third correlator 56 are the same height (as shown in <figref idrefs="f0002">Figure 2</figref>), this indicates that the upper and lower frequencies are equidistant from the Doppler frequency of the received signals, and hence that the centre frequency is very close to the frequency of the received signals.</p><p id="p0025" num="0025">In the event that there is any change in the frequency of the received signals, for example due to a change in velocity of the unit, then this frequency moves closer to either the upper frequency or the lower frequency. As a result, a difference arises in the heights of the peaks in the correlator outputs 82, 86. The frequency generator 50 detects this difference, and adjusts the centre frequency so that the heights of the peaks in the correlator outputs 82, 86 remain equal. This ensures that the centre frequency remains very close to the frequency of the received signals.</p><p id="p0026" num="0026">The output of the correlator 54 is then used on that basis to make pseudorange measurements in the processor 32 in a conventional manner.</p><p id="p0027" num="0027">However, this feedback loop is unable to operate correctly if a carrier wave (CW) jamming signal is present, and is within a few tens of Hz of any of the three locally generated frequencies. When a jamming signal is present in the band of one of the three frequencies, it has the effect of increasing the count of each tap of the affected frequency. All 24 code taps of the associated frequency are affected to a similar degree as a pure CW jamming signal has no pseudo-random code associated with its signal.<!-- EPO <DP n="6"> --></p><p id="p0028" num="0028">Thus, the effect of the jamming signal is illustrated in <figref idrefs="f0002">Figure 3</figref>. In <figref idrefs="f0002">Figure 3</figref>, the output of the first correlator 52, corresponding to the lower frequency signal, is shown by the reference numeral 92, the output of the second correlator 54, corresponding to the centre frequency signal, is shown by the reference numeral 94, and the output of the third correlator 56, corresponding to the upper frequency signal, is shown by the reference numeral 96. As before, each of these outputs has a peak, and the timings of the signals are adjusted so that the peak appears on the eighth tap.</p><p id="p0029" num="0029">However, in this illustrated case, there is a jamming signal at a frequency close to the upper frequency, and this has had the effect of increasing the correlation count value for all code taps of the third correlator 56.</p><p id="p0030" num="0030">It can therefore be seen that the peak in the output 96 of the third correlator 56 is now higher than the peak in the output 92 in the output of the first correlator 52.</p><p id="p0031" num="0031">The effect of this is that, when the outputs of the first correlator 52 and the third correlator 56 are fed back to the frequency generator 50, the frequency generator adjusts the three frequencies in order to equalise the heights of the peaks in these two outputs.</p><p id="p0032" num="0032">This is illustrated in <figref idrefs="f0002">Figure 4</figref>, in which the output of the first correlator 52, corresponding to the lower frequency signal, is shown by the reference numeral 102, the output of the second correlator 54, corresponding to the centre frequency signal, is shown by the reference numeral 104, and the output of the third correlator 56, corresponding to the upper frequency signal, is shown by the reference numeral 106.</p><p id="p0033" num="0033">Thus, it can be seen that the peaks of the outputs of the first correlator 52 and the third correlator 56 are the same height, but this has been achieved only by adjusting the centre frequency so that it is less close to the frequency of the received signals.</p><p id="p0034" num="0034">Thus, the method according to the present invention seeks to mitigate this problem by removing at least some of the effects of a jamming signal on the correlator outputs.</p><p id="p0035" num="0035"><figref idrefs="f0003">Figure 5</figref> illustrates the relevant data flows 120.<!-- EPO <DP n="7"> --></p><p id="p0036" num="0036">Over a first detection period, namely one 20ms data period of the satellite signals, the correlators 52, 54, 56 produce correlations in the complex I, Q domain (that is, with in-phase and quadrature components) on a coherent basis. These correlation values are passed to respective magnitude detection blocks 122, 124, 126.</p><p id="p0037" num="0037">However, when there are obstructions between the user and the satellites, for example when the GPS receiver is indoors, the GPS signals can be heavily attenuated. Under these conditions, coherent phase lock to the GPS satellite signal is not normally possible, and tracking can typically only be achieved by incoherently correlating over a second period of time, which may be up to several seconds. At these indoor GPS signal levels, the tracking is affected by jamming signals at much lower levels. For example, performance can start to degrade once the jamming signal power exceeds a level that is more than 10 dB less than the satellite signal.</p><p id="p0038" num="0038">A signal strength detection block 128 determines the strength of the received GPS signal. Based on this determination, the duration of the second, incoherent, period is determined. As mentioned above, the incoherent period can be up to several seconds when the received signal is very weak, or can in principle be equal to the first, coherent, detection period of 20ms if the signal is strong enough</p><p id="p0039" num="0039">The magnitudes determined by the magnitude detection blocks 122, 124, 126 are passed to respective adders 130, 132, 134, which sum their respective inputs over the duration of the incoherent period, as determined by the strength detection block 128.</p><p id="p0040" num="0040">The outputs of the adders 130, 132, 134 are passed to respective average base value calculators 136, 138, 140.</p><p id="p0041" num="0041">The outputs of the adders 130, 132, 134 are the magnitudes of the outputs of the correlators 52, 54, 56, summed over the incoherent period. As such, these outputs have the general form shown in <figref idrefs="f0002">Figure 4</figref>. It is therefore necessary to estimate the power of the jamming signal contained in each of the three frequencies of code tap arrays.</p><p id="p0042" num="0042">This estimate relies on the assumption that the jamming signal affects all code taps of a specific frequency to a similar degree. Thus, as shown in <figref idrefs="f0002">Figure 4</figref>, there is a<!-- EPO <DP n="8"> --> jamming signal at a frequency close to the upper frequency, and this has had the effect of increasing the correlation count value for all code taps of the third correlator 56.</p><p id="p0043" num="0043">The base value calculators 136, 138, 140 determine the count values of the respective correlator outputs, at tap values where these are not influenced by the received satellite signal. Thus, a subset of the tap values is considered. In this illustrated example, where the peak is controlled so that it appears at the eighth tap, all taps before the eighth are ignored for this purpose, because they might include the effect of reflected signals. In addition, taps within one chip period of the peak are also ignored, because they will be influenced by the received satellite signal. In this case, the taps are separated by one quarter of a chip period, and so it is only taps after the twelfth that are considered when determining the respective base values.</p><p id="p0044" num="0044"><figref idrefs="f0002">Figure 4</figref> shows the forms of the correlator outputs in a schematic, idealised form, but it will be appreciated that in practice there will be variation in the count values at different taps.</p><p id="p0045" num="0045">Thus, the base value calculators 136, 138, 140 determine the count values of the respective correlator outputs, averaged across the tap values of the subset of the tap values that is being considered.</p><p id="p0046" num="0046">In this example, the outputs 102, 104 are not influenced by the jamming signal, and so they each have the base value L1. However, the output 106 is influenced by the jamming signal, and so it has the higher base value L2.</p><p id="p0047" num="0047">The three base values determined by the base value calculators 136, 138, 140 are passed to a minimum determining block 142, which determines the lowest of these three base values. Of course, in this illustrated example, the smallest base value, L1, applies to two of the outputs.</p><p id="p0048" num="0048">The three base values determined by the base value calculators 136, 138, 140 are also passed to the respective first inputs of subtractors 144, 146, 148, and the lowest value calculated by the minimum determining block 142 is passed to the respective second inputs of the subtractors 144, 146, 148. The result, in each case, is the increase in the base level, caused by the influence of the jamming signal. Thus, in this illustrated<!-- EPO <DP n="9"> --> example, the result of the subtraction is zero in the case of the lower and centre frequencies, but is equal to (L2 - L1) in the case of the upper frequency.</p><p id="p0049" num="0049">The outputs of the subtractors 144, 146, 148 thus represent the effect of the jamming signal over the whole incoherent period, and they are passed to respective dividers 150, 152, 154. The purpose of the dividers 150, 152, 154 is to determine the effect of the jamming signal in each 20ms coherent detection period. Thus, the signal strength detection block 128, which determined the length of the incoherent period, supplies a signal to an incoherent to coherent scaling block 156, which determines the ratio of the lengths of the incoherent period and the coherent period. That is, when the incoherent period is equal to the coherent period, this ratio is equal to one, while, when the incoherent period is 2s while the coherent period is 20ms, this ratio is 100.</p><p id="p0050" num="0050">This ratio is passed to the dividers 150, 152, 154, and used to divide the outputs of the subtractors 144, 146, 148. Thus, the result of the division represents the effect of the jamming signal in each 20ms coherent detection period. The outputs of the dividers 150, 152, 154 are passed to respective delay units 158, 160, 162, where they are stored during the whole of the next incoherent period, and passed as inputs to respective subtractors 164, 166, 168 throughout that incoherent period.</p><p id="p0051" num="0051">The other inputs of the subtractors 164, 166, 168 receive inputs from the magnitude detection blocks 122, 124, 126. As noted above, the magnitude detection blocks produce an output value during each 20ms coherent detection period. Thus, the output of each divider 150, 152, 154 is subtracted from the corresponding magnitude value produced by the respective magnitude detection block 122, 124, 126 during each coherent detection period during the appropriate incoherent period.</p><p id="p0052" num="0052">The jamming signal and the satellite signal are correlated in the complex I, Q domain, whereas the incoherent measurements are made in the magnitude domain. Hence the jamming signal can in fact both add to, and subtract from, the satellite signal, in the coherent period. To compensate for this, it is possible to subtract only a portion of the detected jamming signal from the incoherent period during each subsequent coherent period.</p><p id="p0053" num="0053">Thus, this removes at least some of the effects of the jamming signal. The results are passed to the FLL filter 170. The block represented as the FLL filter 170 is a software<!-- EPO <DP n="10"> --> algorithm that enables the frequency generated by the frequency generator 50 to be kept aligned with the Doppler frequency of the signal received from the satellite 28, as described above with reference to <figref idrefs="f0002">Figure 2</figref>. In general terms, the frequency generator 50 is able to adapt the centre frequency based on a frequency error that is indicated by the relative heights of the peaks in the correlations at the upper and lower frequencies, using correlations which have been adjusted as described here to remove the effects of the jamming signal.</p><p id="p0054" num="0054">Thus, the method described in this example determines the effect of the jamming signals over the whole of an incoherent period, and then applies the results during every coherent period of the following incoherent period. This latency means that the method is unable to deal with the effects of rapidly varying jamming signals, for example when the unit is accelerating rapidly. However, the low level of jamming signals relative to the random noise in the signal means that jamming signals will typically not be detectable within a 20 ms interval, and so it is not always possible to determine (and hence remove) the effect of the jamming signal in each individual coherent period.</p><p id="p0055" num="0055">In addition to mitigating the effects of the jamming signal, and thus improving the accuracy of the centre frequency, the magnitude of the jamming signal can also calculated, allowing determination of the Jammer to Noise ratio (JNR), which can then be output for information. The JNR figure is calculated from the non peak correlations of all three frequencies, for example Jammer to Noise power (in dB Hz) is calculated as 6 times log (base 2) (Jammer Power / Noise Power), where the Jammer Power and Noise Power are read from the magnitude detectors 122, 124, 126, and normalized to a one second period. As all three frequencies are used, a large JNR figure could be published when the jammer is coincident with the centre frequency. For example, the calculated JNR figure can be used when estimating the degradation of the signal in the Position Engine in which the GPS signals are used.</p><p id="p0056" num="0056">When there are no obstructions between the users GPS antenna and the satellite, the received signal power will be strong, and the receiver will be able to maintain a coherent phase lock on the satellite signals. With strong GPS signals, jamming occurs only infrequently, and generally, the receivers will not be affected by jamming signals until the magnitude of the jamming signal approaches that of the GPS satellite signal. The use of software algorithms is thus of maximum benefit when the GPS signals are<!-- EPO <DP n="11"> --> low level, i.e. less than 25 dB Hz, and jamming signals are present between this level and 10 dB below this level.</p><p id="p0057" num="0057">There is therefore disclosed a method that mitigates the effect of jamming signals, and hence enables lock to be maintained on the satellite, and hence measurements to be available, in circumstances where the signal lock might otherwise have been lost due to the influence of the jamming signals.</p></description><claims mxw-id="PCLM56976550" lang="EN" load-source="patent-office"><!-- EPO <DP n="12"> --><claim id="c-en-0001" num="0001"><claim-text>A method of detecting a signal and removing an unwanted signal from the detected signal, the method comprising:
<claim-text>determining respective first, second and third correlations over a plurality of taps between a received signal and signals at first, second and third frequencies, wherein the second frequency is higher than the first frequency and lower than the third frequency, and is equally spaced from the first and third frequencies;</claim-text>
<claim-text>adapting the second frequency to a frequency of the received signal such that peaks in the first and third correlations after corresponding adaptation of the first and third frequencies have substantially equal magnitudes;</claim-text>
<claim-text><b>characterized by</b>:
<claim-text>determining a difference between non-peak magnitudes of the first and third correlations; and</claim-text><claim-text>compensating at least one of the correlations for the effects of a jamming signal, based on said difference.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>A method as claimed in claim 1, wherein the step of determining the difference between non-peak magnitudes of the first and third correlations comprises determining a difference between magnitudes of the first and third correlations at tap positions corresponding to signals arriving before the respective peaks.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>A method as claimed in claim 2, wherein the step of determining the difference between non-peak magnitudes of the first and third correlations comprises determining a difference between average magnitudes of the first and third correlations over a range of tap positions corresponding to signals arriving before the respective peaks.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>A method as claimed in any preceding claim, wherein the steps of determining the difference between non-peak magnitudes of the first and third correlations; and compensating at least one of the correlations for the effects of a jamming signal, based on said difference, comprise:
<claim-text>determining non-peak magnitudes of the first, second third correlations;</claim-text>
<claim-text>determining a lowest of the non-peak magnitudes of the first, second third correlations;<!-- EPO <DP n="13"> --></claim-text>
<claim-text>selecting said lowest of the non-peak magnitudes of the first, second third correlations from each of the non-peak magnitudes of the first, second third correlations to form respective differences; and</claim-text>
<claim-text>subtracting the respective differences from the magnitudes of the first, second third correlations.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A method as claimed in any preceding claim, further comprising:
<claim-text>determining said first, second and third correlations during each of a plurality of first periods;</claim-text>
<claim-text>determining a duration for a second period, based on a signal strength of the received signal, said second period extending over at least one first period;</claim-text>
<claim-text>determining said difference between the non-peak magnitudes of the first and third correlations over a second period; and</claim-text>
<claim-text>compensating at least one of the correlations for the effects of a jamming signal, based on said difference, during the or each first period of a following second period.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>A method as claim in any preceding claim, comprising using the adapted second frequency for demodulating the signal for detection from the received signal.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A method as claimed in any preceding claim, wherein the received signal is a signal from a satellite navigation system.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A receiver, for detecting a signal and removing an unwanted signal from the detected signal, the receiver comprising:
<claim-text>at least one correlator for determining respective first, second and third correlations over a plurality of taps between a received signal and signals at first, second and third frequencies, wherein the second frequency is higher than the first frequency and lower than the third frequency, and is equally spaced from the first and third frequencies;</claim-text>
<claim-text>a controller for adapting the second frequency to a frequency of the received signal such that peaks in the first and third correlations after corresponding adaptation of the first and third frequencies have substantially equal magnitudes;</claim-text>
<claim-text><b>characterized in that</b> the controller is configured to:
<claim-text>determine a difference between non-peak magnitudes of the first and third correlations; and<!-- EPO <DP n="14"> --></claim-text>
<claim-text>compensate at least one of the correlations for the effects of a jamming signal, based on said difference.</claim-text></claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A receiver as claimed in claim 8, wherein the controller is configured to determine the difference between non-peak magnitudes of the first and third correlations by determining a difference between magnitudes of the first and third correlations at tap positions corresponding to signals arriving before the respective peaks.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A receiver as claimed in claim 9, wherein the controller is configured to determine the difference between non-peak magnitudes of the first and third correlations by determining a difference between average magnitudes of the first and third correlations over a range of tap positions corresponding to signals arriving before the respective peaks.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A receiver as claimed in any of claims 8 to 10, wherein the controller is configured to determine the difference between non-peak magnitudes of the first and third correlations; and compensate at least one of the correlations for the effects of a jamming signal, based on said difference, by:
<claim-text>determining non-peak magnitudes of the first, second third correlations;</claim-text>
<claim-text>determining a lowest of the non-peak magnitudes of the first, second third correlations;</claim-text>
<claim-text>selecting said lowest of the non-peak magnitudes of the first, second third correlations from each of the non-peak magnitudes of the first, second third correlations to form respective differences; and</claim-text>
<claim-text>subtracting the respective differences from the magnitudes of the first, second third correlations.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A receiver as claimed in any of claims 8 to 11, wherein the controller is further configured to:
<claim-text>determine said first, second and third correlations during each of a plurality of first periods;</claim-text>
<claim-text>determine a duration for a second period, based on a signal strength of the received signal, said second period extending over at least one first period;</claim-text>
<claim-text>determine said difference between the non-peak magnitudes of the first and third correlations over a second period; and<!-- EPO <DP n="15"> --></claim-text>
<claim-text>compensate at least one of the correlations for the effects of a jamming signal, based on said difference, during the or each first period of a following second period.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A receiver as claimed in any of claims 8 to 12, comprising a demodulator configured to demodulate the signal for detection from the received signal using the adapted second frequency.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A satellite navigation system receiver as claimed in any of claims 8 to 13.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A computer program product, comprising a computer readable medium, containing instructions for performing a method as claimed in any of claims 1 to 7.</claim-text></claim></claims><drawings mxw-id="PDW16667330" load-source="patent-office"><!-- EPO <DP n="16"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="157" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="17"> --><figure id="f0002" num="2,3,4"><img id="if0002" file="imgf0002.tif" wi="157" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="18"> --><figure id="f0003" num="5"><img id="if0003" file="imgf0003.tif" wi="150" he="163" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
