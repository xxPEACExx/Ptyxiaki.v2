<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680452-A1" country="EP" doc-number="2680452" kind="A1" date="20140101" family-id="48803370" file-reference-id="315100" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549236" ucid="EP-2680452-A1"><document-id><country>EP</country><doc-number>2680452</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13172503-A" is-representative="YES"><document-id mxw-id="PAPP154823159" load-source="docdb" format="epo"><country>EP</country><doc-number>13172503</doc-number><kind>A</kind><date>20130618</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449225" ucid="US-201213531917-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201213531917</doc-number><kind>A</kind><date>20120625</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2102369662" load-source="ipcr">G01R  27/28        20060101ALI20140721BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2102380187" load-source="ipcr">H04B   3/46        20060101AFI20140721BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2100276855" load-source="docdb" scheme="CPC">G01R  27/28        20130101 LA20140103BHEP        </classification-cpc><classification-cpc mxw-id="PCL2100278043" load-source="docdb" scheme="CPC">H04B   3/46        20130101 FI20140103BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180192" lang="DE" load-source="patent-office">Neuabtastung von S-Parametern für serielle Datenstreckenanalyse</invention-title><invention-title mxw-id="PT132180193" lang="EN" load-source="patent-office">Re-Sampling S-Parameters for Serial Data Link Analysis</invention-title><invention-title mxw-id="PT132180194" lang="FR" load-source="patent-office">Rééchantillonnage des paramètres S pour une analyse de liaison de données en série</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652092" load-source="docdb" ucid="US-20070073499-A1"><document-id format="epo"><country>US</country><doc-number>20070073499</doc-number><kind>A1</kind><date>20070329</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652093" load-source="docdb" ucid="US-20090195498-A1"><document-id format="epo"><country>US</country><doc-number>20090195498</doc-number><kind>A1</kind><date>20090806</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652094" load-source="docdb" ucid="US-20110286506-A1"><document-id format="epo"><country>US</country><doc-number>20110286506</doc-number><kind>A1</kind><date>20111124</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45130894" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918143676" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TEKTRONIX INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918164028" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TEKTRONIX, INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918979950" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TEKTRONIX, INC.</last-name><iid>101002579</iid><address><street>14150 S.W. Karl Braun Drive P.O. Box 500, M/S 50-LAW</street><city>Beaverton, OR 97077-0001</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918173109" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TAN KAN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918172441" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TAN, KAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918981011" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TAN, KAN</last-name><address><street>13805 NW Trevino Street</street><city>Portland, OR Oregon 97229</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918160183" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>PICKERD JOHN J</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918169632" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>PICKERD, JOHN J</last-name></addressbook></inventor><inventor mxw-id="PPAR918987681" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>PICKERD, JOHN J</last-name><address><street>1885 SE 61st Court</street><city>Hillsboro, OR Oregon 97123</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918981698" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Brinck, David John Borchardt</last-name><suffix>et al</suffix><iid>100827955</iid><address><street>R.G.C. Jenkins &amp; Co 26 Caxton Street</street><city>London SW1H 0RJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548803616" load-source="docdb">AL</country><country mxw-id="DS548855814" load-source="docdb">AT</country><country mxw-id="DS548803618" load-source="docdb">BE</country><country mxw-id="DS548850686" load-source="docdb">BG</country><country mxw-id="DS548802324" load-source="docdb">CH</country><country mxw-id="DS548852909" load-source="docdb">CY</country><country mxw-id="DS548855815" load-source="docdb">CZ</country><country mxw-id="DS548803619" load-source="docdb">DE</country><country mxw-id="DS548852914" load-source="docdb">DK</country><country mxw-id="DS548852915" load-source="docdb">EE</country><country mxw-id="DS548856048" load-source="docdb">ES</country><country mxw-id="DS548850687" load-source="docdb">FI</country><country mxw-id="DS548850688" load-source="docdb">FR</country><country mxw-id="DS548803620" load-source="docdb">GB</country><country mxw-id="DS548852916" load-source="docdb">GR</country><country mxw-id="DS548803621" load-source="docdb">HR</country><country mxw-id="DS548855816" load-source="docdb">HU</country><country mxw-id="DS548802325" load-source="docdb">IE</country><country mxw-id="DS548852917" load-source="docdb">IS</country><country mxw-id="DS548850689" load-source="docdb">IT</country><country mxw-id="DS548852922" load-source="docdb">LI</country><country mxw-id="DS548838591" load-source="docdb">LT</country><country mxw-id="DS548855817" load-source="docdb">LU</country><country mxw-id="DS548838592" load-source="docdb">LV</country><country mxw-id="DS548838593" load-source="docdb">MC</country><country mxw-id="DS548873785" load-source="docdb">MK</country><country mxw-id="DS548873790" load-source="docdb">MT</country><country mxw-id="DS548856049" load-source="docdb">NL</country><country mxw-id="DS548855818" load-source="docdb">NO</country><country mxw-id="DS548873791" load-source="docdb">PL</country><country mxw-id="DS548852923" load-source="docdb">PT</country><country mxw-id="DS548856050" load-source="docdb">RO</country><country mxw-id="DS548852924" load-source="docdb">RS</country><country mxw-id="DS548873792" load-source="docdb">SE</country><country mxw-id="DS548852925" load-source="docdb">SI</country><country mxw-id="DS548855819" load-source="docdb">SK</country><country mxw-id="DS548873793" load-source="docdb">SM</country><country mxw-id="DS548802330" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669906" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A device and method of re-sampling a plurality of S-parameters for serial data link analysis is dislosed. The method includes storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having associated impulse responses and a time interval. An increased time interval is determine based on the time interval associated with each S-parameter set. The impulse responses are zero filled in each S-parameter set to maintain any wrapped ripples and increase the time interval. A plurality of resampled S-parameter sets are generated with a finger frequency resolution to cover the increased time interval.
<img id="iaf01" file="imgaf001.tif" wi="96" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499279" lang="EN" source="EPO" load-source="docdb"><p>A device and method of re-sampling a plurality of S-parameters for serial data link analysis is dislosed. The method includes storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having associated impulse responses and a time interval. An increased time interval is determine based on the time interval associated with each S-parameter set. The impulse responses are zero filled in each S-parameter set to maintain any wrapped ripples and increase the time interval. A plurality of resampled S-parameter sets are generated with a finger frequency resolution to cover the increased time interval.</p></abstract><description mxw-id="PDES63955336" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD OF INVENTION</heading><p id="p0001" num="0001">This invention relates generally to signal acquisition and analysis systems and, more particularly, to a system, apparatus and method for re-sampling S-parameters for serial data link analysis.</p><heading id="h0002">BACKGROUND</heading><p id="p0002" num="0002">In high speed serial data link systems and in RF systems, S-parameters are often used characteristic system behavior. S-parameters are generally used to characterize n-port networks. A complex system may be composed of multiple subsystems. Each subsystem may be represented by one S-parameter set. There is a need to combine these S-parameter sets to obtain the S-parameter model for the complete system. For example, multiple sets of S-parameters may be cascaded to obtain a combined overall characteristic for multiple devices connected together. It is required that S-parameter data needs to cover a specific bandwidth of interest. It is also required that the S parameter data needs to have frequency resolution that is fine enough to prevent aliasing in the time domain. This means that the frequency resolution needs to be fine enough to provide a time interval long enough to cover the impulse response duration of the system. Even though all the S-parameter data for an individual sub-system may have appropriate frequency resolution, the same frequency resolution may become inadequate when combining them together in a cascade. For example, the combined system may have longer impulse response duration because of longer propagation time and multiple reflections. There is a need for improved resampling techniques for S-parameter data that allows for combination of multiple S-parameter sets without introducing errors, e.g., aliasing errors.<!-- EPO <DP n="2"> --></p><heading id="h0003">SUMMARY OF THE INVENTION</heading><p id="p0003" num="0003">A method of re-sampling a plurality of S-parameters for serial data link analysis is disclosed. The method includes storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having associated impulse responses and a time interval. An increased time interval is determined based on the time interval associated with each S-parameter set. The impulse responses are zero filled in each S-parameter set to maintain any wrapped ripples and increase the time interval. A plurality of resampled S-parameter sets are generated with a finer frequency resolution to cover the increased time interval.</p><p id="p0004" num="0004">The impulse responses in each S-parameter set may be zero filled at a zero fill location based on a ripple threshold. The impulse responses in each S-parameter set may be zero filled at a zero fill location based on a percentage of the time interval associated with each S-parameter set. Each S-parameter set may be extrapolated to DC for any S-parameters sets that don't have a DC value. The method may further include determining a maximum common frequency for all of the S-parameter sets and extrapolating each S-parameter set to beyond the maximum common frequency.</p><p id="p0005" num="0005">The extrapolated frequency domain S-parameters may be converted to time domain impulse responses using an Inverse Fast Fourier Transform (IFFT). An actual common sample period may be determined between the impulse responses based on a sample rate associated with each of the S-parameters sets. The time domain zero filled S-parameters impulses may be converted to frequency domain using a Fast Fourier Transform (FFT). Lower frequency and high frequency points that are extrapolated may also be truncated.</p><p id="p0006" num="0006">A serial data link analysis device is also disclosed. The device includes a memory configured to storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having<!-- EPO <DP n="3"> --> associated impulse responses and a time interval. The device also includes a processor configured to determine an increased time interval based on the time interval associated with of each S-parameter set. The processor is also configured to zero fill the impulse responses in each S-parameter set to maintain any wrapped ripples and increase the time interval and generate a plurality of resampled S-parameter sets with a finer frequency resolution to cover the increased time interval.</p><p id="p0007" num="0007">The processor may be configured to zero fill the impulse responses in each S-parameter set at a zero fill location based on a ripple threshold. The processor may be configured to zero filled the impulse responses in each S-parameter set at a zero fill location based on a percentage of the time interval associated with each S-parameter set. The processor may be configured extrapolate each S-parameter set to DC for any S-parameters sets that don't have a DC value. The processor may be configured to determine a maximum common frequency for all of the S-parameter sets and extrapolate each S-parameter set to beyond the maximum common frequency.</p><p id="p0008" num="0008">The processor may be configured to convert the extrapolated frequency domain S-parameters to time domain impulse responses using an Inverse Fast Fourier Transform (IFFT). The processor may be configured to determine an actual common sample period between the impulse responses based on a sample rate associated with each of the S-parameters sets. The processor may be configured to convert the time domain zero filled S-parameters impulses to frequency domain using a Fast Fourier Transform (FFT). The processor may be configured to truncate lower frequency and high frequency points that are extrapolated.</p><heading id="h0004">BRIEF DESCRIPTION OF THE FIGURES</heading><p id="p0009" num="0009"><figref idrefs="f0001">Figure 1</figref> is a block diagram of a signal path window from a serial data link application;<!-- EPO <DP n="4"> --></p><p id="p0010" num="0010"><figref idrefs="f0002">Figure 2</figref> is a block diagram showing an SDLA signal path window that includes the capability to cascade multiple blocks of 4-port S-parameters;</p><p id="p0011" num="0011"><figref idrefs="f0003">Figure 3</figref> is a set of graphs showing the frequency domain magnitude plots for all 16 S-parameter vectors in a 4-port S-parameter set;</p><p id="p0012" num="0012"><figref idrefs="f0004">Figure 4</figref> is a set of graphs showing the time domain impulse response representation of each of the S-parameter vectors in <figref idrefs="f0003">Figure 3</figref>;</p><p id="p0013" num="0013"><figref idrefs="f0005">Figure 5</figref> is a graph of the S12 impulse response for a single block with a time duration of 20ns;</p><p id="p0014" num="0014"><figref idrefs="f0006">Figure 6</figref> is a graph showing the impulse response of resampled S12 S-parameter with a time duration of 90ns;</p><p id="p0015" num="0015"><figref idrefs="f0007">Figure 7</figref> is a graph showing the impulse response for an S11 data sample;</p><p id="p0016" num="0016"><figref idrefs="f0008">Figure 8</figref> is a graph showing the zero fill position after the ripples settle;</p><p id="p0017" num="0017"><figref idrefs="f0009">Figure 9</figref> is a graph showing zero fill after the zero fill position is located;</p><p id="p0018" num="0018"><figref idrefs="f0010">Figure 10</figref> is a graph showing resampled S-parameters as compared to original S-parameters; and</p><p id="p0019" num="0019"><figref idrefs="f0011">Figure 11</figref> is a block diagram of a test and measurement instrument configured to carry out serial data link analysis.</p><heading id="h0005">DETAILED DESCRIPTION OF THE INVENTION</heading><p id="p0020" num="0020">Serial data link applications (SDLA) are an important feature of high performance oscilloscopes. Such applications allow users to model the function of a given design using S-parameters representing their devices and test fixtures. The SDLA can convert these S-parameters into FIR filters which are applied to acquired waveforms to allow test fixtures and probes to be de-embedded from a measurement. They also allow the user to simulate<!-- EPO <DP n="5"> --> the effects a serial channel would have on the acquired signal. Users can also use the application to simulate transmitter (Tx) and receiver (Rx) equalizers.</p><p id="p0021" num="0021"><figref idrefs="f0001">Figure1</figref> shows a block diagram of a signal path window 10 from a SDLA. In this example, the SDLA is configured to model the full signal path. In this example, the signal path includes four circuit blocks including a fixture circuit block 12, emphasis circuit block 14 (transmitter Tx), channel circuit block 16 and an equalizer circuit block 18 (receiver Rx).</p><p id="p0022" num="0022">An SDLA oscilloscope source signal is coupled to one of the oscilloscope channels, e.g., channel 1, and is acquired through fixture from the transmitter output. The oscilloscope source signal is typically digitized and stored in memory prior to running a serial data link analysis. Test points TpA-TpD allow the user to monitor the effects of the individual circuit blocks on the source signal. In this example, fixture circuit block 12 has associated S-parameters to represent the fixture, and emphasis circuit block 14 can represent the transmitter equalizer. The channel circuit block 16 has associated S-parameters and simulates the transmission channel. The equalizer circuit block 18 also has an associated Continuous Time Linear Equalization, Feed Forward Equalization and/or Decision Feedback Equalization (CTLE/FFE/DFE) definition and simulates the receiver equalizer. It should be understood that each circuit block may simulate multiple components each of which may have associated with S-parameters.</p><p id="p0023" num="0023"><figref idrefs="f0002">Figure 2</figref> is a block diagram showing an SDLA cascade tool 20 that includes the capability to cascade multiple blocks of 4-port S-parameters. In this example, the s-parameter blocks 24-40 are arranged in a cascade used to simulate the individual components that make up fixture circuit block 12 (<figref idrefs="f0001">Figure 1</figref>). The SDLA also allows an S-parameter set for a probe 44 to be placed in parallel with any point in the cascade.</p><p id="p0024" num="0024">The source 22 and load blocks 42 represent the loading at each end of the cascade. Each of the blocks 24-40 in the cascade are represented by 4-port S-parameters. The 4-port S-parameters may be obtained from<!-- EPO <DP n="6"> --> measured data or derived from a simulated circuit. Each block may be configured as one full 4-port S-parameter set or it can be configured from the combination of two 2-port S-parameters. In addition RLC or transmission line circuit models may be provided in the block and the S-parameters for the block may then be derived from these models.</p><p id="p0025" num="0025"><figref idrefs="f0003">Figure 3</figref> is a set of graphs showing the frequency domain magnitude plots for all 16 S-parameter vectors in a 4-port S-parameter set. <figref idrefs="f0004">Figure 4</figref> is a set of graphs showing the time domain impulse response representation of each of the S-parameter vectors in <figref idrefs="f0003">Figure 3</figref>. S-parameters may be measured via a variety of techniques. When a set of S-parameters is measured using a vector network analyzer (VNA), a sine wave incident signal is placed on a port. For reflection coefficients the reflected sine wave magnitude and phase are measured. All other ports are terminated with reference impedance resistors. The ratio of reflected and incident signals is represented as S11, S22, S33, or S44. This process is repeated for a range of frequencies. For S21 a sine wave is placed on port 1 and measured on port 2 and their ratio becomes S21. This process requires that the sine waves are at steady state after all reflections and transmissions have stabilized.</p><p id="p0026" num="0026">If an S-parameter set is measured with Time-Domain Reflectometer (TDR) steps then incident, reflected and transmitted waveforms are obtained in the time domain, then a derivative may be performed on the steps to get the impulse responses appearing as shown in <figref idrefs="f0004">Figure 4</figref>. Measuring a valid S-parameter set also requires that the time domain waveforms are settled and have reached a steady state by the end of the time interval. These waveforms may then be transformed to the frequency domain by using a Fast Fourier Transform (FFT). The result is essentially equivalent to the measurements made via the VNA using sine waves.</p><p id="p0027" num="0027">The frequency spacing of the VNA measured data will determine the number of samples up to the sample rate frequency at which the time<!-- EPO <DP n="7"> --> domain waveforms are to be represented. The smaller the frequency spacing, the more samples there are and the longer the time interval will be. If the frequency spacing is too large and the resulting time interval is too short for the time domain data to be settled, then time domain aliasing occurs. This results in the time domain signal being wrapped to incorrect positions. The equation to determine the time interval is given below:</p><p id="p0028" num="0028"><maths id="math0001" num=""><math display="block"><mi mathvariant="normal">T</mi><mo>=</mo><mn>1</mn><mo>/</mo><mi mathvariant="normal">Δ</mi><mo>⁢</mo><mi>f</mi></math><img id="ib0001" file="imgb0001.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0029" num="0029">Where T is the time interval covered by the S-parameter set, and Δ<i>f</i> is the frequency spacing. This inverse relationship infers that in order to cover a longer T, the Δ<i>f</i> needs to be smaller. This results in a finer frequency resolution which in turn results in a larger number of frequency domain samples up to the Nyquist frequency determined by desired sample rate.</p><p id="p0030" num="0030">The number of samples, N, may be computed from the following equation:</p><p id="p0031" num="0031"><maths id="math0002" num=""><math display="block"><mi mathvariant="normal">N</mi><mo>=</mo><mn>0.5</mn><mspace width="1em"/><mi>f</mi><mo>⁢</mo><mi mathvariant="normal">s</mi><mo>/</mo><mi mathvariant="normal">Δ</mi><mo>⁢</mo><mi>f</mi></math><img id="ib0002" file="imgb0002.tif" wi="34" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0032" num="0032">Where <i>f</i>s is the sample rate. 0.5<i>f</i>s is the Nyquist frequency. The number of frequency domain samples is proportional to the number of time domain samples when the IFFT is computed to obtain the time domain response. Therefore, the time interval is longer for a given sample rate when Δ<i>f</i> is made smaller.</p><p id="p0033" num="0033">A problem occurs when S-parameter blocks are combined. These S-parameter blocks may have been obtained from different sources or laboratories and may not have been sampled with the same frequency spacing, or number of points.</p><p id="p0034" num="0034">To illustrate the problems involved consider the following example where three blocks are to be cascaded. Assume that all blocks are the same and their s12 data has the impulse response shown in <figref idrefs="f0005">Figure 5</figref>. It is observed from the figure that the propagation delay is about 10ns. The S-parameter's frequency spacing of 50MHz covers time interval of 20ns. This<!-- EPO <DP n="8"> --> may be sufficient for this s12 data set when considering only a single block. When three of these S-parameter blocks are cascaded, the total propagation delay would be 30ns. Using the same frequency spacing is no longer sufficient to cover the cascaded blocks. This example demonstrates an issue addressed by this disclosure. The individual S-parameters must be resampled to provide smaller frequency spacing to cover the increased time interval for the combined S-parameters. <figref idrefs="f0006">Figure 6</figref> is a graph showing the impulse response of resampled s12 that covers 90ns. This time interval is sufficient to cover a total propagation delay of 30ns.</p><p id="p0035" num="0035">Various approaches can be taken to address the resampling problem. For example, one approach is to perform interpolation in the frequency domain. This may be done by either interpolating the real and imaginary components, or it may be done by interpolating the magnitude and phase components.</p><p id="p0036" num="0036">The following is an improved approach for resampling multiple S parameters that potentially have different frequency spacing and different bandwidth;</p><p id="p0037" num="0037">1. Extrapolate all S-parameters data to DC if the S-parameters don't have a DC value. Usually S-parameters measured from a VNA do not have a DC value. TDR measured S-parameters typically have a DC value.</p><p id="p0038" num="0038">2. Determine the common maximum frequency for all of the S-parameter sets. This value may be the maximum frequency of all of the S-parameter sets in the cascade. Extrapolate each S-parameter set to beyond the maximum common frequency.</p><p id="p0039" num="0039">3. Convert extrapolated frequency domain S-parameters to time domain impulse responses using an inverse FFT (IFFT).</p><p id="p0040" num="0040">4. Determine the actual common sample period between the impulse responses. The actual common sample period can be taken as the<!-- EPO <DP n="9"> --> minimum of sample periods of the impulse responses. The impulse responses are then resampled so they all have same sample rate.</p><p id="p0041" num="0041">5. Zero fill the impulse responses at proper positions, as described below, to yield increased time interval. The increased time interval can be determined as multiples of sum of all the time intervals represented by each S-parameter.</p><p id="p0042" num="0042">6. Convert time domain zero filled impulses to frequency domain using FFT.</p><p id="p0043" num="0043">7. Truncate the lower frequency and high frequency points that are extrapolated (optional).</p><p id="p0044" num="0044">8. At this point all S-parameters have been resampled at the same frequency points with sufficient frequency resolution. For each frequency point, combine the S-parameters for each block to be cascaded. This may be done directly or through T-parameters to get the combined S parameter. Additional information on the combination of S-Parameters is available in the following publications which are incorporated herein in their entirety: "<nplcit id="ncit0001" npl-type="s"><text>S-parameter design", Agilent Technologies Application Note, 1972</text></nplcit> and "<nplcit id="ncit0002" npl-type="s"><text>RF and microwave coupled-line circuits", Artech House, 1999, Rajesh Mongia, Inder Bahl and Prakash Bhartia</text></nplcit>.</p><p id="p0045" num="0045">As explained above, the impulse responses are zero-filled at proper positions to yield an increased time interval. The position of zero filling is not arbitrary and it is not necessarily started at the end of right side of the time domain response.</p><p id="p0046" num="0046">For all of the impulse responses in the S-parameter set the, the zero phase time reference position is at the beginning of the time record. If the data were all ideal the zero fill would be added to the right side of the record. However, the leakage from IFFT calculations can sometimes result in ripple from the beginning of the time record being wrapped to the end of the time record. Therefore, the impulse responses obtained from step 4 can have some ripple response at the end of the time record. This ripple response at<!-- EPO <DP n="10"> --> the end the impulse response is caused by band limited nature of S-parameters and is affected by sample offset.</p><p id="p0047" num="0047">For example, <figref idrefs="f0007">Figure 7</figref> is a graph showing the impulse response for an S11 data sample obtained in step 4 above. The small ripples at the end are wrapped from the left end 62 to the right end 50. Regular zero padding, where zeros are padded to the right end of the impulse response would yield an S-parameter set with errors. This example demonstrates another problem addressed by this disclosure. Zeros must be filled at the proper zero fill position 54 to maintain the wrapped ripples at the end of the impulse response. To address this zero fill requirement, the following two options may be used to find the proper zero fill position.</p><p id="p0048" num="0048">Option 1 - threshold based: Starting from the end, e.g., right side, of the impulse response, determine if there is ripple at the end. If there is no ripple, then the zeros can be filled right after the last point of the impulse response. If there are ripples, then search backwards to find the position where the ripples settle, e.g., below a predetermined ripple threshold 56. Zeros can be filled in the settled position 55 as shown in <figref idrefs="f0008">Figure 8</figref>.</p><p id="p0049" num="0049">Option 2 - percentage based: Select a predetermined percentage of the impulse response to locate the zero fill position. For example, zero fill at a position of 5% from the end. For example, the zero-fill position 54 is located at 19ns, 5% from the end of the 20ns sample shown in <figref idrefs="f0007">Figure 7</figref>.</p><p id="p0050" num="0050"><figref idrefs="f0009">Figure 9</figref> is a graph showing zero fill after the zero fill position is located using one of the above options. Using the techniques disclosed above, the resampled S-parameters are matched well with the original S-parameters, as shown in <figref idrefs="f0010">Figure 10</figref>.</p><p id="p0051" num="0051">The disclosed re-sampling techniques provide a variety of advantages over previously known techniques. They provide a robust, easy to implement, and fast way to re-sample S-parameters to obtain sufficient frequency resolution and uniform frequency samples. This results in S-parameters that can be combined without aliasing. Some approaches default<!-- EPO <DP n="11"> --> to using the most coarse frequency resolution of S-parameter sets. This is most likely to cause aliasing which cannot be easily detected.</p><p id="p0052" num="0052">Re-sampling the frequency domain complex S-parameters using the time domain real impulse response is more robust compared to directly resampling complex frequency domain data. This procedure uses FFT/IFFT which is computation is more efficient than other approaches.</p><p id="p0053" num="0053">The disclosed zero filling positioning method is different than known zero padding methods. These techniques provide better frequency responses, for the common use cases of S-parameters, where the S-parameters are band limited and sample offset can be arbitrary.</p><p id="p0054" num="0054"><figref idrefs="f0011">Figure 11</figref> is a block diagram of a test and measurement instrument configured to carry out the above techniques. In this case, the instrument 100 is an oscilloscope having a display 102 and an acquisition system 104. The acquisition system 104 includes a processor 106 with associated memory 110 and input/output circuitry 108. A variety of user controls 112 and electrical inputs 114 are coupled to the acquisition system 104. The processor 106 is also configured to run the SDLA application as explained in detailed above.</p><p id="p0055" num="0055">It should be understood that many variations are possible based on the disclosure herein. Although features and elements are described above in particular combinations, each feature or element can be used alone without the other features and elements or in various combinations with or without other features and elements. The methods or flow charts provided herein may be implemented in a computer program, software, or firmware incorporated in a computer-readable (non-transitory) storage medium for execution by a general purpose computer or a processor. Examples of computer-readable storage mediums include a read only memory (ROM), a random access memory (RAM), a register, cache memory, semiconductor memory devices., magnetic media such as internal hard disks<!-- EPO <DP n="12"> --> and removable disks, magneto-optical media, and optical media such as CD-ROM disks, and digital versatile disks (DVDs).</p><p id="p0056" num="0056">Suitable processors include, by way of example, a general purpose processor, a special purpose processor, a conventional processor, a digital signal processor (DSP), a plurality of microprocessors, one or more microprocessors in association with a DSP core, a controller, a microcontroller, Application Specific Integrated Circuits (ASICs), Field Programmable Gate Arrays (FPGAs) circuits, any other type of integrated circuit (IC), and/or a state machine.</p></description><claims mxw-id="PCLM56976252" lang="EN" load-source="patent-office"><!-- EPO <DP n="13"> --><claim id="c-en-0001" num="0001"><claim-text>A method of re-sampling a plurality of S-parameters for serial data link analysis, the method comprising:
<claim-text>storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having associated impulse responses and a time interval;</claim-text>
<claim-text>determining an increased time interval based on the time interval associated with each S-parameter set;</claim-text>
<claim-text>zero filling the impulse responses in each S-parameter set to maintain any wrapped ripples and increase the time interval and generating a plurality of resampled S-parameter sets with a finer frequency resolution to cover the increased time interval.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1 wherein the impulse responses in each S-parameter set are zero filled at a zero fill location based on a ripple threshold.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 1 wherein the impulse responses in each S-parameter set are zero filled at a zero fill location based on a percentage of the time interval associated with each S-parameter set.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of any preceding claim further comprising extrapolating each S-parameter set to DC for any S-parameters sets that don't have a DC value.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of any preceding claim further comprising:
<claim-text>determining a maximum common frequency for all of the S-parameter sets; and</claim-text>
<claim-text>extrapolating each S-parameter set to beyond the maximum common frequency.</claim-text><!-- EPO <DP n="14"> --></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of claim 5 further comprising converting extrapolated frequency domain S-parameters to time domain impulse responses using an Inverse Fast Fourier Transform (IFFT).</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 5 further comprising truncating lower frequency and high frequency points that are extrapolated.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of any preceding claim further comprising determining an actual common sample period between the impulse responses based on a sample rate associated with each of the S-parameters sets.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of any preceding claim further comprising converting time domain zero filled S-parameters impulses to frequency domain using a Fast Fourier Transform (FFT).</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A serial data link analysis device comprising:
<claim-text>a memory configured to storing a plurality of S-parameters sets, each S-parameter set being associated with a subsystem and having associated impulse responses and a time interval; and</claim-text>
<claim-text>a processor configured to determine an increased time interval based on the time interval associated with each S-parameter set;</claim-text>
<claim-text>the processor being configured to zero fill the impulse responses in each S-parameter set to maintain any wrapped ripples and increase the time interval and generate a plurality of resampled S-parameter sets with a finer frequency resolution to cover the increased time interval.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The device of claim 10 wherein the impulse responses in each S-parameter set are zero filled at a zero fill location based on a ripple threshold.<!-- EPO <DP n="15"> --></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The device of claim 10 wherein the impulse responses in each S-parameter set are zero filled at a zero fill location based on a percentage of the time interval associated with each S-parameter set.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The device of any of claims 10 to 12, wherein the processor is operable to convert time domain zero filled S-parameters impulses to frequency domain using a Fast Fourier Transform (FFT).</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>Apparatus operable to perform a method as claimed in any of claims 1 to 9.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A computer readable medium having stored thereon a computer program for execution by a processor configured to perform a method of re-sampling a plurality of S-parameters for serial data link analysis according to any of claims 1-9.</claim-text></claim></claims><drawings mxw-id="PDW16667034" load-source="patent-office"><!-- EPO <DP n="16"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="121" he="221" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="17"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="126" he="221" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="18"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="160" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="211" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="109" he="114" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="110" he="119" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="109" he="126" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="116" he="89" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="120" he="126" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0010" num="10"><img id="if0010" file="imgf0010.tif" wi="125" he="130" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0011" num="11"><img id="if0011" file="imgf0011.tif" wi="157" he="146" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="156" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
