<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680498-A1" country="EP" doc-number="2680498" kind="A1" date="20140101" family-id="48747356" file-reference-id="318320" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549190" ucid="EP-2680498-A1"><document-id><country>EP</country><doc-number>2680498</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13173746-A" is-representative="YES"><document-id mxw-id="PAPP154823113" load-source="docdb" format="epo"><country>EP</country><doc-number>13173746</doc-number><kind>A</kind><date>20130626</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP177814737" load-source="docdb" format="original"><country>EP</country><doc-number>13173746.2</doc-number><date>20130626</date><lang>ZH</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454633" ucid="CN-201210213301-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201210213301</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2040293013" load-source="docdb">H04L  12/28        20060101ALI20150626BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2040298030" load-source="docdb">H04L  29/06        20060101AFI20150626BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1852739846" load-source="docdb" scheme="CPC">H04L  12/2832      20130101 LA20170131BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1852739847" load-source="docdb" scheme="CPC">H04L  12/282       20130101 LI20170202BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1852739848" load-source="docdb" scheme="CPC">H04L  12/2814      20130101 LI20170202BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1852739849" load-source="docdb" scheme="CPC">H04L  12/2809      20130101 LI20170202BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1852739850" load-source="docdb" scheme="CPC">H04N  21/43615     20130101 LI20170131BHEP        </classification-cpc><classification-cpc mxw-id="PCL1991313099" load-source="docdb" scheme="CPC">H04L  65/60        20130101 FI20140102BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180054" lang="DE" load-source="patent-office">VERFAHREN, VORRICHTUNG UND SYSTEM FÜR DIE IMPLEMENTIERUNG VON DIENSTSTEUERUNG VON GERÄTEN IN EINEM HEIMNETZ</invention-title><invention-title mxw-id="PT132180055" lang="EN" load-source="patent-office">Method, apparatus and system for implementing service control of home network device</invention-title><invention-title mxw-id="PT132180056" lang="FR" load-source="patent-office">PROCEDE, DISPOSITIV ET SYSTEME POUR L'IMPLEMENTATION DE CONTROL DE SERVICES DES APPAREILS DANS UN RESEAU A DOMICILE</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652040" load-source="docdb" ucid="US-20100257455-A1"><document-id format="epo"><country>US</country><doc-number>20100257455</doc-number><kind>A1</kind><date>20101007</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT376756185" load-source="docdb" ucid="US-20110296460-A1"><document-id format="epo"><country>US</country><doc-number>20110296460</doc-number><kind>A1</kind><date>20111201</date></document-id><sources><source name="SEA" category="XA" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652042" load-source="docdb" ucid="WO-2012057661-A1"><document-id format="epo"><country>WO</country><doc-number>2012057661</doc-number><kind>A1</kind><date>20120503</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45130836" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918157409" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918161465" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918991099" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>100970540</iid><address><street>Huawei Administration Building Bantian</street><city>Longgang District, Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918155118" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>XIA HUI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918152690" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>XIA, Hui</last-name></addressbook></inventor><inventor mxw-id="PPAR918993444" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>XIA, Hui</last-name><address><street>Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918140889" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>HUANG ZHIGANG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918167202" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>HUANG, ZHIGANG</last-name></addressbook></inventor><inventor mxw-id="PPAR918978926" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>HUANG, ZHIGANG</last-name><address><street>Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918173563" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>CHENG JIAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918160221" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>CHENG, JIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918981436" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>CHENG, JIAN</last-name><address><street>Huawei Administration Building, Bantian, Longgang District</street><city>518129 Shenzhen</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918992903" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Thun, Clemens</last-name><iid>101098074</iid><address><street>Mitscherlich &amp; Partner Sonnenstrasse 33</street><city>80331 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548837425" load-source="docdb">AL</country><country mxw-id="DS548801793" load-source="docdb">AT</country><country mxw-id="DS548837427" load-source="docdb">BE</country><country mxw-id="DS548848259" load-source="docdb">BG</country><country mxw-id="DS548803213" load-source="docdb">CH</country><country mxw-id="DS548854233" load-source="docdb">CY</country><country mxw-id="DS548801798" load-source="docdb">CZ</country><country mxw-id="DS548837428" load-source="docdb">DE</country><country mxw-id="DS548854234" load-source="docdb">DK</country><country mxw-id="DS548854235" load-source="docdb">EE</country><country mxw-id="DS548868245" load-source="docdb">ES</country><country mxw-id="DS548848260" load-source="docdb">FI</country><country mxw-id="DS548848261" load-source="docdb">FR</country><country mxw-id="DS548837429" load-source="docdb">GB</country><country mxw-id="DS548854236" load-source="docdb">GR</country><country mxw-id="DS548837430" load-source="docdb">HR</country><country mxw-id="DS548801799" load-source="docdb">HU</country><country mxw-id="DS548803218" load-source="docdb">IE</country><country mxw-id="DS548854237" load-source="docdb">IS</country><country mxw-id="DS548848262" load-source="docdb">IT</country><country mxw-id="DS548854238" load-source="docdb">LI</country><country mxw-id="DS548848537" load-source="docdb">LT</country><country mxw-id="DS548801800" load-source="docdb">LU</country><country mxw-id="DS548848538" load-source="docdb">LV</country><country mxw-id="DS548848539" load-source="docdb">MC</country><country mxw-id="DS548854308" load-source="docdb">MK</country><country mxw-id="DS548854309" load-source="docdb">MT</country><country mxw-id="DS548848263" load-source="docdb">NL</country><country mxw-id="DS548868246" load-source="docdb">NO</country><country mxw-id="DS548803219" load-source="docdb">PL</country><country mxw-id="DS548854626" load-source="docdb">PT</country><country mxw-id="DS548848264" load-source="docdb">RO</country><country mxw-id="DS548854627" load-source="docdb">RS</country><country mxw-id="DS548803220" load-source="docdb">SE</country><country mxw-id="DS548854628" load-source="docdb">SI</country><country mxw-id="DS548868247" load-source="docdb">SK</country><country mxw-id="DS548803221" load-source="docdb">SM</country><country mxw-id="DS548848541" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669860" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention provides a method, an apparatus and a system for implementing service control of a home network device. The present invention includes: sending, by a first DLNA device, a service request to a user interface server; receiving, by the first DLNA device, a DLNA device list of the home network where the first DLNA device is located and a control script corresponding to a media service to be executed that are sent by the user interface server in response to the service request; selecting, by the first DLNA device, a second DLNA device from the DLNA device list; and controlling, by the first DLNA device according to the control script, the second DLNA device to execute the media service to be executed. Embodiments of the present invention are mainly applied to multi-screen switching service control of the device inside the home network.
<img id="iaf01" file="imgaf001.tif" wi="114" he="97" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499233" lang="EN" source="EPO" load-source="docdb"><p>The present invention provides a method, an apparatus and a system for implementing service control of a home network device. The present invention includes: sending, by a first DLNA device, a service request to a user interface server; receiving, by the first DLNA device, a DLNA device list of the home network where the first DLNA device is located and a control script corresponding to a media service to be executed that are sent by the user interface server in response to the service request; selecting, by the first DLNA device, a second DLNA device from the DLNA device list; and controlling, by the first DLNA device according to the control script, the second DLNA device to execute the media service to be executed. Embodiments of the present invention are mainly applied to multi-screen switching service control of the device inside the home network.</p></abstract><description mxw-id="PDES63955290" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The present invention relates the field of communication technologies, and in particular, to a method, an apparatus and a system for implementing service control of a home network device.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">The digital living network alliance (full name: Digital Living Network Alliance, DLNA for short) is an organization formed by manufactures of consumer electronics, mobile phones and computers. The aim of the organization is to establish a set of industry standards so that products of the manufacturers are connected and adapted to each other, thereby implementing digital living for consumers. DLNA devices are set in a home network, and are connected to an operator network through network address translation (full name: Network Address Translation, NAT for short). The DLNA devices can be classified into three types based on function: a digital media server (full name: Digital Media Server, DMS for short), a digital media renderer (full name: Digital Media Renderer, DMR for short), and a digital media controller (full name: Digital Media Controller, DMC for short), where DMS is configured to store media such as a video or a picture, DMR is configured to decode media and display the decoded media, and DMC is configured to control DMS and DMR to process media services such as video playing and picture browsing.</p><p id="p0003" num="0003">In an existing home network, at least one DLNA device that can support the DMC function needs to be set, so that other DLNA devices can process services, thereby improving technical requirements of service support, and increasing costs and expenses.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0004" num="0004">Embodiments of the present invention provide a method, an apparatus and a system for implementing service control of a home network device. An outside network device provides a service control capability for a DLNA device of the internal network at home, so as to reduce technical requirements and dependence of an operator service on the device of the internal network at home, facilitate development and deployment and centralized control of services of an operator,<!-- EPO <DP n="2"> --> and reduce costs and expenses.</p><p id="p0005" num="0005">In order to achieve the objectives, the embodiments of the present invention adopt the following technical solutions:</p><p id="p0006" num="0006">A method for implementing service control of a home network device is provided, including:
<ul><li>sending, by a first digital living network alliance DLNA device, a service request to a user interface server, where the first DLNA device is any device inside a home network, the user interface server is a device outside the home network, and the service request carries a media service to be executed;</li><li>receiving, by the first DLNA device, a DLNA device list of the home network where the first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, where the control script can be used by the first DLNA device, to control the media service to be executed;</li><li>selecting, by the first DLNA device, a second DLNA device from the DLNA device list, where the second DLNA device is capable of executing the media service to be executed; and</li><li>controlling, by the first DLNA device according to the control script, the second DLNA device to execute the media service to be executed.</li></ul></p><p id="p0007" num="0007">A DLNA device is provided, including:
<ul><li>a sending unit, configured to send a service request to a user interface server, where the user interface server is a device outside a home network, and the service request carries a media service to be executed;</li><li>a receiving unit, configured to receive a DLNA device list of a home network where a first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, where the control script can be used by the first DLNA device, to control the media service to be executed;</li><li>a selection unit, configured to select a second DLNA device from the DLNA device list received by the receiving unit, where the second DLNA device is capable of executing the media service to be executed; and</li><li>a service implementation unit, configured to control, according to the control script received by the receiving unit, the second DLNA device to execute the media service to be executed.</li></ul></p><p id="p0008" num="0008">A media server is provided, including:
<ul><li>an acquisition unit, configured to acquire description information corresponding to a DLNA device inside a home network; and<!-- EPO <DP n="3"> --></li><li>a sending unit, configured to send the description information acquired by the acquisition unit to a user interface server, so that the user interface server generates a DLNA device list of the home network and a control script according to the description information.</li></ul></p><p id="p0009" num="0009">A user interface server is provided, including:
<ul><li>a receiving unit, configured to receive description information sent by a media server, where the description information is description information of DLNA devices belonging to the same home network; and</li><li>a generation unit, configured to generate a DLNA device list of the home network and a control script according to the description information received by the receiving unit, where the control script is used to provide a service control function for the DLNA device inside the home network.</li></ul></p><p id="p0010" num="0010">A system for implementing service control of a home network device is provided, including a DLNA device, a media server and a user interface server.</p><p id="p0011" num="0011">The DLNA device is configured to: send a service request to a user interface server, where the DLNA device is any DLNA device inside a home network, the user interface server is a device outside the home network, and the service request carries a media service to be executed; receive a DLNA device list of the home network where the DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, where the control script can be used by the DLNA device, to control the media service to be executed; select a DLNA device capable of executing the media service to be executed from the DLNA device list; and control, according to the control script, the DLNA device capable of executing the media service to be executed to execute the media service to be executed;</p><p id="p0012" num="0012">The media server is configured to: acquire description information corresponding to the DLNA device inside the home network; and send the description information acquired by an acquisition unit to the user interface server, so that the user interface server generates the DLNA device list of the home network and the control script according to the description information; and</p><p id="p0013" num="0013">The user interface server is configured to: receive the description information sent by the media server, where the description information is description information of DLNA devices belonging to the same home network; and generate the DLNA device list of the home network and the control script according to the description information received by the receiving unit, where the control script is used to provide a service control function for the DLNA device inside the home network.</p><p id="p0014" num="0014">The embodiments of the present invention provide the method, apparatus and system for<!-- EPO <DP n="4"> --> implementing service control of a home network device. The device outside the home network provides the DLNA device list and the service control script for the DLNA device inside the home network to implement a service control capability of the DLNA device inside the home network, thereby reducing technical requirements and dependence of an operator service on the device of the internal network at home, facilitating development and deployment and centralized control of services of an operator, and reducing costs and expenses.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF DRAWINGS</b></heading><p id="p0015" num="0015">To illustrate the technical solutions according to the embodiments of the present invention or in the prior art more clearly, the accompanying drawings required for describing the embodiments or the prior art are introduced below briefly. Apparently, the accompanying drawings in the following descriptions merely show some of the embodiments of the present invention, and persons of ordinary skill in the art can obtain other drawings according to the accompanying drawings without creative efforts.
<ul><li><figref idrefs="f0001">FIG. 1</figref> is a flow chart of a method for implementing service control of a home network device in Embodiment 1 of the present invention;</li><li><figref idrefs="f0001">FIG. 2</figref> is a flow chart of a method for generating a DLNA device list and a control script in Embodiment 1 of the present invention;</li><li><figref idrefs="f0002">FIG. 3</figref> is a flow chart of a method for generating a DLNA device list and a control script in Embodiment 1 of the present invention;</li><li><figref idrefs="f0002">FIG. 4</figref> is a constitutional block diagram of DLNA network architecture in Embodiment 2 of the present invention;</li><li><figref idrefs="f0003">FIG. 5</figref> is an information exchange diagram of implementing service control of a home network device in Embodiment 2 of the present invention;</li><li><figref idrefs="f0004">FIG. 6</figref> is an information exchange diagram of implementing service control of a home network device in Embodiment 3 of the present invention;</li><li><figref idrefs="f0005">FIG. 7</figref> is a constitutional block diagram of a DLNA device in Embodiment 4 of the present invention;</li><li><figref idrefs="f0005">FIG. 8</figref> is a constitutional block diagram of another DLNA device in Embodiment 4 of the present invention;</li><li><figref idrefs="f0006">FIG. 9</figref> is a constitutional block diagram of a media server in Embodiment 4 of the present invention;</li><li><figref idrefs="f0006">FIG. 10</figref> is a constitutional block diagram of another media server in Embodiment 4 of the present invention;<!-- EPO <DP n="5"> --></li><li><figref idrefs="f0006">FIG. 11</figref> is a constitutional block diagram of a user interface server in Embodiment 4 of the present invention;</li><li><figref idrefs="f0007">FIG. 12</figref> is a constitutional block diagram of another user interface server in Embodiment 4 of the present invention; and</li><li><figref idrefs="f0007">FIG. 13</figref> is a constitutional block diagram of a system for implementing service control of a home network device in Embodiment 4 of the present invention.</li></ul></p><heading id="h0005"><b>DESCRIPTION OF EMBODIMENTS</b></heading><p id="p0016" num="0016">The technical solutions of the present invention are clearly described in the following with reference to the accompanying drawings. It is obvious that the embodiments to be described are only a part rather than all of the embodiments of the present invention. All other embodiments obtained by persons of ordinary skill in the art based on the embodiments of the present invention without creative efforts shall fall within the protection scope of the present invention.</p><p id="p0017" num="0017">An embodiment of the present invention provides a method for implementing service control of a home network device. As shown in <figref idrefs="f0001">FIG. 1</figref>, the method includes the following steps.</p><p id="p0018" num="0018">101: A first DLNA device sends a service request to a user interface server, where the service request carries a media service to be executed.</p><p id="p0019" num="0019">The first DLNA device may be any DLNA device inside the home network, and may be a device having a DLNA function such as a mobile phone, a tablet, or a desktop computer, which is not listed in detail in the embodiment of the present invention. The user interface server is a device outside the home network, set in an operator network, and configured to provide a control script and a DLNA device list for the DLNA device.</p><p id="p0020" num="0020">The DLNA device list includes description information of a DLNA device inside the home network, for example, information such as an IP address of the DLNA device inside the home network and the type of an executable media service. Optionally, DLNA device lists of different home networks may be stored in the user interface server separately, and an identity of the home network may be used to identify a corresponding DLNA device list.</p><p id="p0021" num="0021">102: The first DLNA device receives a DLNA device list of the home network where the first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request.</p><p id="p0022" num="0022">The control script can be used by the first DLNA device, to control the media service to be executed. Optionally, the control script may be written by JavaScript or other script languages, which is not limited in the embodiment of the present invention.</p><p id="p0023" num="0023">103: The first DLNA device selects a second DLNA device from the DLNA device list,<!-- EPO <DP n="6"> --> where the second DLNA device is capable of executing the media service to be executed.</p><p id="p0024" num="0024">Optionally, selecting the second DLNA device from the DLNA device list specifically includes:
<ul><li>selecting the second DLNA device from the DLNA device list at the first DLNA device in a manual selection manner; or selecting, by the first DLNA device according to a preset policy, the second DLNA device from the DLNA device list.</li></ul></p><p id="p0025" num="0025">For example, the device list may be displayed on a man-machine interface (for example, a display) of the first DLNA device, and the manipulator of the first DLNA device may select the second device through clicking or checking.</p><p id="p0026" num="0026">For another example, when there are multiple DLNA devices capable of executing the media service to be executed, the preset policy may be selecting a DLNA device with the highest priority as the second DLNA device. For example, it is assumed that the media service to be executed is music playing, and a DLNA device capable of playing music in the home network has a moving picture experts group audio layer III (full name: Moving Picture Experts Group Audio Layer III, MP3 for short) player, a mobile phone, a computer, and a television. The MP3 player has the highest priority, and the MP3 player is selected as the second DLNA device according to the preset policy. Of course, the preset policy may be others, for example, the computer may be fixedly selected as the second DLNA device for the media service of music playing.</p><p id="p0027" num="0027">104: The first DLNA device controls, according to the control script, the second DLNA device to execute the media service to be executed.</p><p id="p0028" num="0028">In this embodiment, the first DLNA device controls the media service inside the home network by using the device list and the control script provided by the user interface server outside the home network, and a DMCA function does not need to be configured for the DLNA device inside the home network, thereby reducing technical requirements on the DLNA device inside the home network, and reducing costs and expenses.</p><p id="p0029" num="0029">Another embodiment of the present invention further provides a method for generating a DLNA device list and a control script. As shown in <figref idrefs="f0001">FIG. 2</figref>, the method includes the following steps.</p><p id="p0030" num="0030">201. A media server acquires description information of a DLNA device inside a home network.</p><p id="p0031" num="0031">Optionally, that a media server acquires description information of a DLNA device inside a home network may be:
<ul><li>the media server sends a multicast message to the DLNA device inside the home network, so that the DLNA device returns a response message after receiving the multicast message, where the response message carries the description information of<!-- EPO <DP n="7"> --> the DLNA device; and</li><li>the media server receives the response message sent by the DLNA device, and acquires the description information from the response message.</li></ul></p><p id="p0032" num="0032">Or, that a media server acquires description information of a DLNA device inside a home network may be:
<ul><li>the media server receives a notification message sent by the DLNA device, where the notification message carries the description information of the DLNA device; and acquires the description information from the notification message.</li></ul></p><p id="p0033" num="0033">The method for transmitting the multicast message, response message, and notification information may be a transmission method specified by a universal plug and play (full name: The Universal Plug and Play, UPnP for short) protocol. The transmission method is based on the simple service discovery protocol (full name: Simple Service Discovery Protocol, SSDP for short), and the media server may send, according to the specification of the SSDP protocol, an "ssdp:discover" multicast message to an SSDP port at a specific multicast address through an M-SEARCH method. When the DLNA device intercepts the message, the DLNA device sends the response message in a unicast manner. The DLNA device may also send an "ssdp:alive" notification message to an SSDP port at a specific multicast address through a NOTIFY method, and the media server intercepts the notification messages.</p><p id="p0034" num="0034">202: The media server sends the description information to a user interface server, so that the user interface server generates a device list of the home network and a control script according to the description information.</p><p id="p0035" num="0035">In this embodiment, a media server outside the home network acquires the description information of the device inside the home network, and sends the description information to the user interface server outside the home network, so that the user interface server generates the device list and the control script according to the description information, thereby facilitating development and deployment and centralized control of services of an operator, and reducing costs and expenses.</p><p id="p0036" num="0036">Another embodiment of the present invention further provides a method for generating a DLNA device list and a control script. As shown in <figref idrefs="f0002">FIG. 3</figref>, the method includes the following steps.</p><p id="p0037" num="0037">301. A user interface server receives description information sent by a media server, where the description information is description information of DLNA devices belonging to the same home network.</p><p id="p0038" num="0038">302: The user interface server generates a DLNA device list of the home network and a control script according to the description information, where the control script is used to provide a service control function for the DLNA device inside the home network.<!-- EPO <DP n="8"> --></p><p id="p0039" num="0039">Optionally, the DLNA device list of the home network and the control script may be generated through a web technology, and stored in the user interface server, and the control script file may be implemented by the Java Script language.</p><p id="p0040" num="0040">In this embodiment, the user interface server outside the home network is configured to directly provide the DLNA device list and a service control script for a device inside the home network, so that a service control capability does not need to be configured for the DLNA device inside the home network, thereby reducing technical requirements and dependence of an operator service on the device of the internal network at home, and reducing costs and expenses.</p><p id="p0041" num="0041">The embodiment of the present invention provides the method for implementing service control of a home network device. The device outside the home network provides the device list and a service control script for the DLNA device inside the home network to implement a service control capability of the DLNA device inside the home network, thereby reducing technical requirements and dependence of an operator service on the device of the internal network at home, facilitating development and deployment and centralized control of services of an operator, and reducing costs and expenses.</p><p id="p0042" num="0042">Another embodiment of the present invention provides a method for implementing service control of a home network device, which may be, but not limited to, applied to a DLNA network shown in <figref idrefs="f0002">FIG. 4</figref>. The DLNA network includes device A, device B, a media server, and a user interface server. Device A and device B are set in a home network, and may be a DLNA device such as a mobile phone, a laptop computer, or a media player. The media server and the user interface server are set in an operator network, where the home network may access an operator network through a home gateway, and the home gateway may work in routing mode or bridge mode, and access the operator network through an asymmetric digital subscriber line (full name: Asymmetric Digital Subscriber Line, ADSL for short), a very high bit rate digital subscriber loop (full name: Very High Bit Rate Digital Subscriber Loop, VDSL for short) or a fiber to the home (full name: Fiber To The Home, FTTH for short).</p><p id="p0043" num="0043">With a process that a DLNA device in a home network controls other DLNA devices in the home network to display as an example, an information exchange procedure involved in a method according to an embodiment of the present invention is described. As shown in <figref idrefs="f0003">FIG. 5</figref>, the procedure includes the following steps.</p><p id="p0044" num="0044">401: A media server acquires description information of a device inside a home network, where the description information includes a device type, an executable media service type, and address information of device A, and a device type, an executable media service type, and address information of device B.<!-- EPO <DP n="9"> --></p><p id="p0045" num="0045">402: The media server sends the description information to a user interface server.</p><p id="p0046" num="0046">403. The user interface server receives the description information, and generates a DLNA device list and a control script according to the description information.</p><p id="p0047" num="0047">404: Device A sends a video playing request to the user interface server.</p><p id="p0048" num="0048">405: The user interface server returns the DLNA device list and the control script required for implementing video playing to device A according to the video playing request.</p><p id="p0049" num="0049">406: Device A receives the DLNA device list and the control script.</p><p id="p0050" num="0050">407: Device A selects a DLNA device capable of playing a video from the DLNA device list, where the DLNA device capable of playing the video in this embodiment is device B.</p><p id="p0051" num="0051">408: Device A controls, according to the control script, device B to perform video playing.</p><p id="p0052" num="0052">For example, device A sends a directory query request to the media server, and the media server returns a directory corresponding to a video in the media server according to the directory query request. Device A receives the directory, selects a video to be played from the directory, and acquires corresponding address information. Device A sends a playing command to device B according to the control script, where the playing command carries the address information corresponding to the video to be played.</p><p id="p0053" num="0053">Device B receives the playing command, acquires the video to be played from the media server according to the address information corresponding to the video to be played, and plays the video.</p><p id="p0054" num="0054">It should be noted that, device A may acquire the device list and the control script first, or may first acquire the directory corresponding to the video for selection, which is not limited in the embodiment of the present invention.</p><p id="p0055" num="0055">With a process of implementing media switching between multiple devices in a home network as an example, an information exchange procedure involved in a method according to an embodiment of the present invention is described. As shown in <figref idrefs="f0004">FIG. 6</figref>, the procedure includes the following steps.</p><p id="p0056" num="0056">501: A media server acquires description information corresponding to a device inside a home network, where the description information includes a device type, an executable media service type, and address information of device A, and a device type, an executable media service type, and address information of device B.</p><p id="p0057" num="0057">502: The media server sends the description information to a user interface server.</p><p id="p0058" num="0058">503. The user interface server receives the description information, and generates a DLNA device list and a control script according to the description information.<!-- EPO <DP n="10"> --></p><p id="p0059" num="0059">504: Device A sends a video playing switching request to the user interface server when playing a video.</p><p id="p0060" num="0060">505: The user interface server returns the DLNA device list and the control script required for implementing video playing to device A according to the video playing switching request.</p><p id="p0061" num="0061">506: Device A receives the DLNA device list and the control script.</p><p id="p0062" num="0062">507: Device A selects a DLNA device capable of continuing playing the video from the DLNA device list, where the DLNA device capable of continuing playing the video in this embodiment is device B.</p><p id="p0063" num="0063">508: Device A stops playing a current video, and controls, according to the control script, device B to perform video playing.</p><p id="p0064" num="0064">For example, device A sends a directory query request to the media server, and the media server returns a directory corresponding to a video in the media server according to the directory query request. Device A receives the directory, and selects a video currently played from the directory and acquires corresponding address information. Device A sends a playing command to device B according to the control script, where the playing command carries the address information and current playing progress corresponding to the video currently played.</p><p id="p0065" num="0065">Device B receives the playing command, acquires the video currently played from the media server according to the address information corresponding to the video currently played, and continues playing the video according to the current progress of playing.</p><p id="p0066" num="0066">It should be noted that, device A may acquire the device list and the control script first, or may first acquire the directory corresponding to the video for selection, which is not limited in the embodiment of the present invention.</p><p id="p0067" num="0067">Device A may stop video playing immediately after selecting device B, or may stop video playing after sending the playing command to device B, which is not limited in the embodiment of the present invention.</p><p id="p0068" num="0068">It should be noted that, the method for implementing service control of a home network device provided in the embodiment of the present invention may be, but not limited to, applied to a process that a user uses a device in the home network to control other DLNA display devices in the home network to display, and other media services such as audio playing may also adopt this method.</p><p id="p0069" num="0069">The embodiment of the present invention provides the method for implementing service control of a home network device. The device outside the home network provides the device list and a service control script for the DLNA device inside the home network to implement a service<!-- EPO <DP n="11"> --> control capability of the DLNA device inside the home network, thereby reducing technical requirements and dependence of an operator service on the device of the internal network at home, facilitating development and deployment and centralized control of services of an operator, and reducing costs and expenses.</p><heading id="h0006"><b>Embodiment 4</b></heading><p id="p0070" num="0070">An embodiment of the present invention provides a DLNA device. As shown in <figref idrefs="f0005">FIG. 7</figref>, the device includes a sending unit 61, a receiving unit 62, a selection unit 63, and a service implementation unit 64.</p><p id="p0071" num="0071">The sending unit 61 is configured to send a service request to a user interface server, where the user interface server is a device outside a home network, and the service request carries a media service to be executed.</p><p id="p0072" num="0072">The receiving unit 62 is configured to receive a DLNA device list of a home network where a first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, where the control script can be used by the first DLNA device, to control the media service to be executed.</p><p id="p0073" num="0073">The selection unit 63 is configured to select a second DLNA device from the DLNA device list received by the receiving unit 62, where the second DLNA device is capable of executing the media service to be executed.</p><p id="p0074" num="0074">The service implementation unit 64 is configured to control, according to the control script received by the receiving unit 62, the second DLNA device to execute the media service to be executed.</p><p id="p0075" num="0075">Optionally, as shown in <figref idrefs="f0005">FIG. 8</figref>, the selection unit 63 specifically includes a manual selection module 631 and a preset policy selection module 632.</p><p id="p0076" num="0076">The manual selection module 631 is configured to select the second DLNA device from the DLNA device list at the first DLNA device in a manual selection manner.</p><p id="p0077" num="0077">The preset policy selection module 632 is configured to select the second DLNA device from the DLNA device list according to a preset policy.</p><p id="p0078" num="0078">An embodiment of the present invention provides a media server. As shown in <figref idrefs="f0006">FIG. 9</figref>, the apparatus includes an acquisition unit 71 and a sending unit 72.</p><p id="p0079" num="0079">The acquisition unit 71 is configured to acquire description information of a DLNA device inside a home network.</p><p id="p0080" num="0080">The sending unit 72 is configured to send the description information acquired by the acquisition unit 71 to a user interface server, so that the user interface server generates a DLNA<!-- EPO <DP n="12"> --> device list of the home network and a control script according to the description information.</p><p id="p0081" num="0081">Optionally, as shown in <figref idrefs="f0006">FIG. 10</figref>, the acquisition unit 71 further includes a sending module 711, a receiving module 712, and an acquisition module 713.</p><p id="p0082" num="0082">The sending module 711 is configured to send a multicast message to the DLNA device inside the home network, so that the DLNA device returns a response message after receiving the multicast message, where the response message carries the description information of the DLNA device.</p><p id="p0083" num="0083">The receiving module 712 is configured to receive the response message sent by the DLNA device.</p><p id="p0084" num="0084">The acquisition module 713 is configured to acquire the description information from the response message received by the receiving module 712.</p><p id="p0085" num="0085">The receiving module 712 is further configured to receive a notification message sent by the DLNA device, where the notification message carries the description information of the DLNA device.</p><p id="p0086" num="0086">The acquisition module 713 is further configured to acquire the description information from the notification message received by the receiving module 712.</p><p id="p0087" num="0087">An embodiment of the present invention further provides a user interface server. As shown in <figref idrefs="f0006">FIG. 11</figref>, the apparatus includes a receiving unit 81 and a generation unit 82.</p><p id="p0088" num="0088">The receiving unit 81 is configured to receive description information sent by a media server, where the description information is description information of DLNA devices belonging to the same home network.</p><p id="p0089" num="0089">The generation unit 82 is configured to generate a DLNA device list of the home network and a control script according to the description information received by the receiving unit 81, where the control script is used to provide a service control function for the DLNA device inside the home network.</p><p id="p0090" num="0090">Optionally, as shown in <figref idrefs="f0007">FIG. 12</figref>, the apparatus further includes a sending unit 82.</p><p id="p0091" num="0091">The receiving module 81 is configured to receive a service request sent by the DLNA device inside the home network.</p><p id="p0092" num="0092">The sending unit 82 is configured to send a DLNA device list of the home network where the DLNA device is located and a control script corresponding to a service type of the service request to the DLNA device according to the service request received by the receiving unit 81.</p><p id="p0093" num="0093">An embodiment of the present invention further provides a system for implementing service control of a home network device. As shown in <figref idrefs="f0007">FIG. 13</figref>, the system includes a DLNA device 91, a media server 92, and a user interface server 93.<!-- EPO <DP n="13"> --></p><p id="p0094" num="0094">The DLNA device 91 is configured to: send a service request to the user interface server 93, where the DLNA device 91 is any DLNA device inside a home network, the user interface server 93 is a device outside the home network, and the service request carries a media service to be executed; receive a DLNA device list of the home network where the DLNA device 91 is located and a control script corresponding to the media service to be executed that are sent by the user interface server 93 in response to the service request, where the control script can be used by the DLNA device 91, to control the media service to be executed; select a DLNA device capable of executing the media service to be executed from the DLNA device list; and control, according to the control script, the DLNA device capable of executing the media service to be executed to execute the media service to be executed.</p><p id="p0095" num="0095">The media server 92 is configured to: acquire description information corresponding to the DLNA device 91 inside the home network; and send the description information acquired by the acquisition unit to the user interface server 93, so that the user interface server 93 generates the DLNA device list of the home network and the control script according to the description information.</p><p id="p0096" num="0096">The user interface server 93 is configured to: receive the description information sent by the media server 92, where the description information is description information of the DLNA devices 91 belonging to the same home network; and generate the DLNA device list of the home network and the control script according to the description information received by the receiving unit, where the control script is used to provide a service control function for the DLNA device 91 inside the home network.</p><p id="p0097" num="0097">The embodiment of the present invention provides the apparatus and system for implementing service control of a home network device. The device outside the home network provides the device list and a service control script for the DLNA device inside the home network to implement a service control capability of the DLNA device inside the home network, thereby reducing technical requirements and dependence of an operator service on the device of the internal network at home, facilitating development and deployment and centralized control of services of an operator, and reducing costs and expenses.</p><p id="p0098" num="0098">Through the foregoing description of the embodiments, it is apparent to persons skilled in the art that the present invention may be accomplished by software plus necessary universal hardware, and of course, may also be accomplished by hardware, but in most cases, the present invention is preferably implemented through the former method. Based on such understanding, the technical solutions of the present invention or the part that makes contributions to the prior art can be substantially embodied in the form of a software product. The computer software product is<!-- EPO <DP n="14"> --> stored in a readable storage medium, for example, a floppy disk, hard disk, or optical disk of the computer, and contains several instructions used to instruct a computer device (for example, a personal computer, a server, or a network device) to perform the methods according to the embodiments of the present invention.</p><p id="p0099" num="0099">The foregoing description is merely about several embodiments of the present invention, but is not intended to limit the present invention. Various variations and modifications that can be easily thought of by persons skilled in the art without departing from the technical scope of the present invention fall within the scope of the present invention. Therefore, the protection scope of the present invention is subject to the appended claims.</p></description><claims mxw-id="PCLM56976206" lang="EN" load-source="patent-office"><!-- EPO <DP n="15"> --><claim id="c-en-0001" num="0001"><claim-text>A method for implementing service control of a home network device, comprising:
<claim-text>sending, by a first digital living network alliance DLNA device, a service request to a user interface server, wherein the first DLNA device is any device inside a home network, the user interface server is a device outside the home network, and the service request carries a media service to be executed;</claim-text>
<claim-text>receiving, by the first DLNA device, a DLNA device list of the home network where the first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, wherein the control script can be used by the first DLNA device, to control the media service to be executed;</claim-text>
<claim-text>selecting, by the first DLNA device, a second DLNA device from the DLNA device list, wherein the second DLNA device is capable of executing the media service to be executed; and</claim-text>
<claim-text>controlling, by the first DLNA device according to the control script, the second DLNA device to execute the media service to be executed.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein selecting, by the first DLNA device, the second DLNA device capable of implementing a service corresponding to the service request from the device list specifically comprises:
<claim-text>selecting, by the first DLNA device in a manual selection manner, the second DLNA device from the DLNA device list at the first DLNA device; or,</claim-text>
<claim-text>selecting, by the first DLNA device according to a preset policy, the second DLNA device from the DLNA device list.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>A DLNA device, comprising:
<claim-text>a sending unit, configured to send a service request to a user interface server, wherein the user interface server is a device outside a home network, and the service request carries a media service to be executed;</claim-text>
<claim-text>a receiving unit, configured to receive a DLNA device list of a home network where a first DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, wherein the control script can be used by the first DLNA device, to control the media service to be executed;</claim-text>
<claim-text>a selection unit, configured to select a second DLNA device from the DLNA device list received by the receiving unit, wherein the second DLNA device is capable of executing the media service to be executed; and</claim-text>
<claim-text>a service implementation unit, configured to control, according to the control script received<!-- EPO <DP n="16"> --> by the receiving unit, the second DLNA device to execute the media service to be executed.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The device according to claim 3, wherein the selection unit specifically comprises:
<claim-text>a manual selection module, configured to select the second DLNA device from the DLNA device list at the first DLNA device in a manual selection manner; and</claim-text>
<claim-text>a preset policy selection module, configured to select the second DLNA device from the DLNA device list according to a preset policy.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A media server, comprising:
<claim-text>an acquisition unit, configured to acquire description information corresponding to a DLNA device inside a home network; and</claim-text>
<claim-text>a sending unit, configured to send the description information acquired by the acquisition unit to a user interface server, so that the user interface server generates a DLNA device list of the home network and a control script according to the description information.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The media server according to claim 5, wherein the acquisition unit specifically comprises:
<claim-text>a sending module, configured to send a multicast message to the DLNA device inside the home network, so that the DLNA device returns a response message after receiving the multicast message, wherein the response message carries the description information of the DLNA device;</claim-text>
<claim-text>a receiving module, configured to receive the response message sent by the DLNA device;</claim-text>
<claim-text>an acquisition module, configured to acquire the description information from the response message received by the receiving module;</claim-text>
<claim-text>the receiving module is further configured to receive a notification message sent by the DLNA device, wherein the notification message carries the description information of the DLNA device; and</claim-text>
<claim-text>the acquisition module is further configured to acquire the description information from the notification message received by the receiving module.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A user interface server, comprising:
<claim-text>a receiving unit, configured to receive description information sent by a media server, wherein the description information is description information of DLNA devices belonging to a same home network; and</claim-text>
<claim-text>a generation unit, configured to generate a DLNA device list of the home network and a control script according to the description information received by the receiving unit, wherein the control script is used to provide, a service control function for a DLNA device inside the home network.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The user interface server according to claim 7, wherein the apparatus further comprises:
<claim-text>the receiving unit, configured to receive a service request sent by the DLNA device inside the<!-- EPO <DP n="17"> --> home network, wherein the service request carries a media service to be executed by the DLNA device; and</claim-text>
<claim-text>a sending unit, configured to send a DLNA device list of a home network where a first DLNA device is located and a control script corresponding to the media service to be executed to the DLNA device according to the service request received by the receiving unit, wherein the control script can be used by the first DLNA device, to control the media service to be executed.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A system for implementing service control of a home network device, comprising: a DLNA device, a media server and a user interface server, wherein<br/>
the DLNA device is configured to: send a service request to a user interface server, wherein the DLNA device is any DLNA device inside a home network, the user interface server is a device outside the home network, and the service request carries a media service to be executed; receive a DLNA device list of the home network where the DLNA device is located and a control script corresponding to the media service to be executed that are sent by the user interface server in response to the service request, wherein the control script can be used by the DLNA device, to control the media service to be executed; select a DLNA device capable of executing the media service to be executed from the DLNA device list; and control, according to the control script, the DLNA device capable of executing the media service to be executed to execute the media service to be executed;<br/>
the media server is configured to: acquire description information corresponding to the DLNA device inside the home network; and send the description information acquired by an acquisition unit to the user interface server, so that the user interface server generates the DLNA device list of the home network and the control script according to the description information; and<br/>
the user interface server is configured to: receive the description information sent by the media server, wherein the description information is description information of DLNA devices belonging to a same home network; and generate the DLNA device list of the home network and the control script according to the description information received by a receiving unit, wherein the control script is used to provide a service control function for the DLNA device inside the home network.</claim-text></claim></claims><drawings mxw-id="PDW16666988" load-source="patent-office"><!-- EPO <DP n="18"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="197" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="19"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="154" he="216" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0003" num="5"><img id="if0003" file="imgf0003.tif" wi="165" he="183" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="165" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0005" num="7,8"><img id="if0005" file="imgf0005.tif" wi="125" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0006" num="9,10,11"><img id="if0006" file="imgf0006.tif" wi="122" he="214" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0007" num="12,13"><img id="if0007" file="imgf0007.tif" wi="84" he="163" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="159" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="157" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
