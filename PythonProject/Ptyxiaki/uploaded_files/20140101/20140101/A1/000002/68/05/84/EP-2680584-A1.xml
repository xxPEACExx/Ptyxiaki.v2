<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680584-A1" country="EP" doc-number="2680584" kind="A1" date="20140101" family-id="47755343" file-reference-id="312918" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549104" ucid="EP-2680584-A1"><document-id><country>EP</country><doc-number>2680584</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12826856-A" is-representative="YES"><document-id mxw-id="PAPP154823027" load-source="docdb" format="epo"><country>EP</country><doc-number>12826856</doc-number><kind>A</kind><date>20120831</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP181443893" load-source="docdb" format="original"><country>EP</country><doc-number>12826856.2</doc-number><date>20120831</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445950" ucid="CN-201110255252-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110255252</doc-number><kind>A</kind><date>20110831</date></document-id></priority-claim><priority-claim mxw-id="PPC140453720" ucid="CN-2012080856-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2012080856</doc-number><kind>W</kind><date>20120831</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2070992625" load-source="docdb">H04N  19/46        20140101ALN20140411BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2070997058" load-source="docdb">H04N  19/159       20140101ALN20140411BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2071001499" load-source="docdb">H04N  19/119       20140101ALI20140411BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2071003229" load-source="docdb">H04N  19/122       20140101AFI20140411BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1886974494" load-source="docdb" scheme="CPC">H04N  19/50        20130101 LI20161013BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974495" load-source="docdb" scheme="CPC">H04N  19/136       20141101 LI20161019BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974496" load-source="docdb" scheme="CPC">H04N  19/61        20141101 LI20161019BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974497" load-source="docdb" scheme="CPC">H04N  19/176       20130101 FI20161019BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974498" load-source="docdb" scheme="CPC">G06T   9/007       20130101 LI20161019BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1953523173" load-source="docdb" scheme="CPC">H04N  19/96        20141101 LA20160405BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1953523175" load-source="docdb" scheme="CPC">H04N  19/46        20130101 LA20160405BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1953523177" load-source="docdb" scheme="CPC">H04N  19/122       20141101 LI20160405BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1953523179" load-source="docdb" scheme="CPC">H04N  19/119       20130101 LI20160405BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179796" lang="DE" load-source="patent-office">VERFAHREN UND MODUL ZUM ABRUFEN VON POSITIONSINFORMATIONEN EINES TRANSFORMATIONSBLOCKS</invention-title><invention-title mxw-id="PT132179797" lang="EN" load-source="patent-office">METHOD AND MODULE FOR ACQUIRING LOCATION INFORMATION OF TRANSFORM BLOCK</invention-title><invention-title mxw-id="PT132179798" lang="FR" load-source="patent-office">PROCÉDÉ ET MODULE D'ACQUISITION D'INFORMATIONS DE LOCALISATION D'UN BLOC DE TRANSFORMÉE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918155812" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918164398" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD</last-name></addressbook></applicant><applicant mxw-id="PPAR918987749" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd</last-name><iid>101353631</iid><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918160953" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZHENG XIAOZHEN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918135124" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZHENG, XIAOZHEN</last-name></addressbook></inventor><inventor mxw-id="PPAR918984846" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ZHENG, XIAOZHEN</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918994161" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Goddar, Heinz J.</last-name><iid>100002032</iid><address><street>Boehmert &amp; Boehmert Pettenkoferstrasse 20-22</street><city>80336 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2012080856-W"><document-id><country>CN</country><doc-number>2012080856</doc-number><kind>W</kind><date>20120831</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2013029559-A1"><document-id><country>WO</country><doc-number>2013029559</doc-number><kind>A1</kind><date>20130307</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548802173" load-source="docdb">AL</country><country mxw-id="DS548841175" load-source="docdb">AT</country><country mxw-id="DS548802174" load-source="docdb">BE</country><country mxw-id="DS548842015" load-source="docdb">BG</country><country mxw-id="DS548801299" load-source="docdb">CH</country><country mxw-id="DS548842451" load-source="docdb">CY</country><country mxw-id="DS548842452" load-source="docdb">CZ</country><country mxw-id="DS548834944" load-source="docdb">DE</country><country mxw-id="DS548802175" load-source="docdb">DK</country><country mxw-id="DS548802176" load-source="docdb">EE</country><country mxw-id="DS548846080" load-source="docdb">ES</country><country mxw-id="DS548842016" load-source="docdb">FI</country><country mxw-id="DS548842017" load-source="docdb">FR</country><country mxw-id="DS548834945" load-source="docdb">GB</country><country mxw-id="DS548802177" load-source="docdb">GR</country><country mxw-id="DS548834946" load-source="docdb">HR</country><country mxw-id="DS548842453" load-source="docdb">HU</country><country mxw-id="DS548801300" load-source="docdb">IE</country><country mxw-id="DS548802178" load-source="docdb">IS</country><country mxw-id="DS548843042" load-source="docdb">IT</country><country mxw-id="DS548802179" load-source="docdb">LI</country><country mxw-id="DS548834947" load-source="docdb">LT</country><country mxw-id="DS548841176" load-source="docdb">LU</country><country mxw-id="DS548843043" load-source="docdb">LV</country><country mxw-id="DS548834948" load-source="docdb">MC</country><country mxw-id="DS548841177" load-source="docdb">MK</country><country mxw-id="DS548842614" load-source="docdb">MT</country><country mxw-id="DS548846081" load-source="docdb">NL</country><country mxw-id="DS548842197" load-source="docdb">NO</country><country mxw-id="DS548846082" load-source="docdb">PL</country><country mxw-id="DS548842615" load-source="docdb">PT</country><country mxw-id="DS548801301" load-source="docdb">RO</country><country mxw-id="DS548842616" load-source="docdb">RS</country><country mxw-id="DS548846083" load-source="docdb">SE</country><country mxw-id="DS548842454" load-source="docdb">SI</country><country mxw-id="DS548842198" load-source="docdb">SK</country><country mxw-id="DS548842199" load-source="docdb">SM</country><country mxw-id="DS548843044" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669775" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An embodiment of the present invention provides a method for acquiring position information of a transform block. The method includes: obtaining a splitting manner of an image block; obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block, or obtaining splitting direction information according to the splitting manner of the image block and a numerical relationship between a width and a height of a transform block; and obtaining position information of a post-splitting transform block according to the splitting direction information. In embodiments of the present invention, splitting direction information is obtained directly according to a splitting manner of an image block and a layer number, and then, size information of a transform block is coded according to the splitting direction information, thereby effectively reducing complexity of a coding process.<img id="iaf01" file="imgaf001.tif" wi="139" he="83" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499148" lang="EN" source="EPO" load-source="docdb"><p>An embodiment of the present invention provides a method for acquiring position information of a transform block. The method includes: obtaining a splitting manner of an image block; obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block, or obtaining splitting direction information according to the splitting manner of the image block and a numerical relationship between a width and a height of a transform block; and obtaining position information of a post-splitting transform block according to the splitting direction information. In embodiments of the present invention, splitting direction information is obtained directly according to a splitting manner of an image block and a layer number, and then, size information of a transform block is coded according to the splitting direction information, thereby effectively reducing complexity of a coding process.</p></abstract><description mxw-id="PDES63955205" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The present invention relates to the field of communications technologies, and in particular, to a method and a module for acquiring position information of a transform block.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">Multiple video compression methods may be used to compress video data in order to minimize a bandwidth required for transmitting the video data as much as possible. The video compression methods include intra-frame compression and inter-frame compression. Now an inter-frame compression method based on motion estimation is often used. Specifically, a process in which a coding end of an image uses the inter-frame compression method to compress and code the image includes: splitting, by the coding end, a to-be-coded image block into several image sub-blocks of a same size; for each image sub-block, searching a reference image for an image block that best matches a current image sub-block and using the image block as a prediction block; subtracting a pixel value of each pixel of the prediction block from a pixel value of each corresponding pixel of the current image sub-block to obtain a residual; performing entropy coding on a value obtained after the residual is transformed and quantified; and finally sending a bit stream and motion vector information that are obtained through the entropy coding to a decoding end, where the motion vector information indicates a position difference between the current image sub-block and the prediction block. After obtaining the bit stream obtained through the entropy coding, the decoding end of the image first performs entropy decoding to obtain the corresponding residual and the corresponding motion vector information; obtains the corresponding matched image block (that is, the prediction block) from the reference image according to the motion vector information; and then adds a value of each pixel point in the matched image block and a value of a corresponding pixel point in the residual to obtain a value of each pixel point in the current image sub-block. The intra-frame prediction is to utilize information inside a current image to predict an image block to obtain a prediction block. The coding end obtains a corresponding pixel of the<!-- EPO <DP n="2"> --> prediction block according to a prediction mode, a prediction direction, and pixel values around the image block, and subtracts the pixel of the prediction block from a pixel of the image block to obtain a residual, where the residual is written into a code stream after undergoing transform, quantification, and entropy coding; and the decoding end parses the code stream, obtains a residual block after performing entropy decoding, de-quantification, and de-transform on the code stream, obtains the prediction block according to the prediction mode, the prediction direction, and the pixel values around the image block, and adds a pixel of the residual block and the pixel of the prediction block to obtain a reconstructed image block.</p><p id="p0003" num="0003">Concepts of a coding unit (coding unit), a prediction unit (prediction unit), and a transform unit (transform unit) exist in a current video coding and decoding standard. The coding unit is an image block operated when a coding end performs coding or a decoding end performs decoding. The prediction unit is an image block that has an independent prediction mode in the coding unit. One prediction unit may include multiple prediction blocks, where a prediction block is an image block operated when a coding unit performs a prediction operation. The transform unit is an image block operated when a coding unit performs a transform operation, and may also be called a transform block. Considering that difference signals inside a prediction block are strongly correlated, large-block transform brings higher energy concentration performance than small-block transform. In a broader sense, one image block may include one or more prediction blocks, and prediction is performed by using a prediction block as a unit at the coding and decoding ends; and meanwhile, one image block includes one or more transform blocks, and transform is performed by using a transform block as a unit at the coding and decoding ends.</p><p id="p0004" num="0004">In an existing video coding and decoding process, one image block, which is also called a macroblock (macroblock), a super-macroblock (super-macroblock), or the like, is split into several image sub-blocks. Sizes of these image sub-blocks may be 64x64, 64x32, 32x64, 32x32, 32x16, 16x32, 16x16, 16x8, 8x16, 8x8, 8x4, 4x8, 4x4, and the like. Pixel prediction, motion estimation, and motion compensation are performed by using these image sub-blocks as a unit for the image block. Accordingly, the coding end of the image sends information of a splitting manner of the image block in a code stream to the decoding end of the image, so that the decoding end of the image learns a splitting manner at the coding end of the image, and performs a corresponding decoding operation according to the splitting manner. In an existing video coding and decoding standard, each of these image sub-blocks is an N×M rectangular block (both N and M are an integer greater than 0), and N and M are in a multiple relationship.</p><p id="p0005" num="0005">In an existing video coding and decoding technology, a transform matrix may be used to remove redundant information of the image block, so as to improve coding efficiency. Generally,<!-- EPO <DP n="3"> --> two-dimensional transform is used for transform of a data block in an image block. That is, the coding end multiplies residual information of the data block, one N×M transform matrix, and a transpose matrix of the N×M transform matrix to obtain a transform coefficient. The preceding step may be described by using the following formula: <maths id="math0001" num=""><math display="block"><mi>f</mi><mo>=</mo><mi mathvariant="italic">Tʹ</mi><mo>×</mo><mi>C</mi><mo>×</mo><mi>T</mi></math><img id="ib0001" file="imgb0001.tif" wi="37" he="7" img-content="math" img-format="tif"/></maths><br/>
where C represents residual information of a data block, <i>T</i> and <i>T'</i> represent a transform matrix and a transpose matrix of the transform matrix, and <i>f</i> represents a transform coefficient matrix obtained after the residual information of the data block is transformed. The transform matrix may be a discrete cosine transform (Discrete Cosine Transform, DCT) matrix, an integer transform (Integer Transform) matrix, a KL transform (Karhunen Lòeve Transform, KLT) matrix, or the like. KLT may better consider texture information of an image block or an image block residual, and therefore, using KLT may achieve a better effect.</p><p id="p0006" num="0006">Performing the preceding processing on the residual information of the image block is equivalent to transforming the residual information of the image block from a space domain to a frequency domain, and the transform coefficient matrix <i>f</i> obtained after the processing is concentrated in a low-frequency area. After performing the preceding transform on the residual information of the image block, the coding end performs processing such as quantification and entropy coding on the transform coefficient matrix obtained after the transform, and sends a bit stream obtained through the entropy coding to the decoding end. To enable the decoding end to learn a type and a size of a transform matrix used at the coding end, generally the coding end sends indication information that represents a transform matrix used by a current image block to the decoding end.</p><p id="p0007" num="0007">Subsequently, the decoding end determines, according to the indication information, the transform matrix used at the coding end; decodes, according to a characteristic (such as orthogonality of the transform matrix) of the transform matrix, the bit stream sent by the coding end to obtain the transform coefficient matrix; multiplies the transform coefficient matrix and the transform matrix and the transpose matrix of the transform matrix, to restore and obtain residual information of a data block that is approximately consistent with that of the coding end. The preceding step may be described by using the following formula: <maths id="math0002" num=""><math display="block"><mi>C</mi><mo>=</mo><mi mathvariant="italic">T</mi><mo>×</mo><mi>f</mi><mo>×</mo><mi mathvariant="italic">Tʹ</mi></math><img id="ib0002" file="imgb0002.tif" wi="31" he="8" img-content="math" img-format="tif"/></maths><br/>
where <i>C</i> represents residual information of a data block, <i>T</i> and <i>T'</i> represent a transform matrix and a transpose matrix of the transform matrix, and <i>f</i> represents a transform coefficient matrix obtained by the decoding end.<!-- EPO <DP n="4"> --></p><p id="p0008" num="0008">Because different regularities of distribution may exist for a residual of an image block, a good transform effect often cannot be achieved by using a transform matrix of a specific size. Therefore, in the prior art, it is attempted to use transform matrices (also called transform blocks) of different sizes for the residual of the image block. For this reason, for a 2Nx2N image block, a transform matrix whose size is 2Nx2N may be used, or transform matrices whose sizes are N×N or transform matrices whose sizes are 0.5N×0.5N may be used.</p><p id="p0009" num="0009">However, currently only a transform matrix of a square size is used. For striped texture that frequently occurs, a transform matrix of a square (square) size cannot effectively remove redundant information of an image block. Therefore, performing coding by using a non-square (non-square or rectangular) transform matrix occurs. However, the non-square transform matrix increases coding complexity. In order to code position information of a transform block, repetitive conversion is required for splitting an image block and a code block, thereby increasing complexity of a coding process.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0010" num="0010">An embodiment of the present invention provides a method for acquiring position information of a transform block. The method includes: obtaining a splitting manner of an image block; obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block; and obtaining position information of a post-splitting transform block according to the splitting direction information.</p><p id="p0011" num="0011">An embodiment of the present invention further provides a method for acquiring position information of a transform block. The method includes: obtaining splitting direction information according to information of a transform block and a splitting manner of an image block, where the information of the transform block includes a width of the transform block and a height of the transform block; and obtaining position information of a post-splitting transform block according to the splitting direction information.</p><p id="p0012" num="0012">Accordingly, an embodiment of the present invention further provides a module for acquiring position information of a transform block. The module includes: a splitting manner obtaining module, configured to obtain a splitting manner of an image block; a splitting direction information obtaining module, configured to obtain splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block; and a position information obtaining module, configured to obtain position information of a post-splitting transform block according to the splitting direction information; or<br/>
<!-- EPO <DP n="5"> -->the module includes: a splitting manner obtaining module, configured to obtain a splitting manner of an image block; a splitting direction information obtaining module, configured to obtain splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block, or obtain splitting direction information according to a numerical relationship between a width and a height of a transform block; and a position information obtaining module, configured to obtain position information of a post-splitting transform block according to the splitting direction information.</p><p id="p0013" num="0013">In the method and the module for acquiring position information of a transform block provided in the embodiments of the present invention, splitting direction information is obtained according to a splitting manner of an image block and a layer number, and then, size information of a transform block is coded according to the splitting direction information, thereby effectively reducing complexity of a coding process.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF DRAWINGS</b></heading><p id="p0014" num="0014">To illustrate the technical solutions in the embodiments of the present invention more clearly, the following briefly introduces accompanying drawings required for describing the embodiments or the prior art. Apparently, the accompanying drawings in the following description show merely some embodiments of the present invention, and a person of ordinary skill in the art may still derive other drawings according to these accompanying drawings without creative efforts.</p><p id="p0015" num="0015"><figref idrefs="f0001">FIG. 1a to FIG. 1d</figref> are schematic diagrams of examples of a symmetrical splitting manner of an image block;</p><p id="p0016" num="0016"><figref idrefs="f0002">FIG. 2a to FIG. 2d</figref> are schematic diagrams of examples of an asymmetrical splitting manner of an image block;</p><p id="p0017" num="0017"><figref idrefs="f0003">FIG. 3a to FIG. 3c</figref> are schematic diagrams of transform blocks corresponding to different layer numbers;</p><p id="p0018" num="0018"><figref idrefs="f0004">FIG. 4</figref> is a method for acquiring position information of a transform block according to an embodiment of the present invention;</p><p id="p0019" num="0019"><figref idrefs="f0004">FIG. 5a and FIG. 5b</figref> are schematic diagrams of transform blocks according to an embodiment of the present invention;</p><p id="p0020" num="0020"><figref idrefs="f0005">FIG. 6</figref> and <figref idrefs="f0006">FIG. 7</figref> are schematic diagrams of transform blocks according to an embodiment of the present invention;</p><p id="p0021" num="0021"><figref idrefs="f0006">FIG. 8</figref> is a method for acquiring position information of a transform block according to another embodiment of the present invention; and<!-- EPO <DP n="6"> --></p><p id="p0022" num="0022"><figref idrefs="f0007">FIG. 9</figref> is a schematic diagram of a module for acquiring position information of a transform block according to an embodiment of the present invention.</p><heading id="h0005"><b>DESCRIPTION OF EMBODIMENTS</b></heading><p id="p0023" num="0023">The following clearly and completely describes the technical solutions in the embodiments of the present invention with reference to the accompanying drawings in the embodiments of the present invention. Apparently, the embodiments to be described are merely a part rather than all of the embodiments of the present invention. All other embodiments obtained by a person of ordinary skill in the art based on the embodiments of the present invention without creative efforts shall fall within the protection scope of the present invention.</p><p id="p0024" num="0024"><figref idrefs="f0001">FIG. 1a to FIG. 1d</figref> are schematic diagrams of examples of a symmetrical splitting manner of an image block.</p><p id="p0025" num="0025">Common manners of splitting an image block into a image sub-block are as follows: a 2Nx2N splitting manner, in which an image block includes only one image sub-block, that is, the image block is not split into smaller image sub-blocks, as shown in <figref idrefs="f0001">FIG. 1a</figref>; a 2NxN splitting manner, in which an image block is split into one upper image sub-block and one lower image sub-block that are of a same size, as shown in <figref idrefs="f0001">FIG. 1b</figref>; an Nx2N splitting manner, in which an image block is split into one left image sub-block and one right image sub-block that are of a same size, as shown in <figref idrefs="f0001">FIG. 1c</figref>; and an N×N splitting manner, in which an image block is split into four image sub-blocks of a same size, as shown in <figref idrefs="f0001">FIG. 1d</figref>. N is any positive integer and indicates the number of pixels.</p><p id="p0026" num="0026"><figref idrefs="f0002">FIG. 2a to FIG. 2d</figref> are schematic diagrams of examples of an asymmetrical splitting manner of an image block.</p><p id="p0027" num="0027">An asymmetrical splitting manner may also be applied to an image block, as shown in <figref idrefs="f0002">FIG. 2a to FIG. 2d</figref>. In splitting manners shown in <figref idrefs="f0002">FIG. 2a and FIG. 2b</figref>, one image block is split into one upper rectangular image sub-block and one lower rectangular image sub-block that are of different sizes. In two image sub-blocks obtained through splitting in a 2NxnU splitting manner (in the figure, n=0.5 N) shown in <figref idrefs="f0002">FIG. 2a</figref>, lengths of two sides of an upper image sub-block are 2N and 0.5N, and lengths of two sides of a lower image sub-block are 2N and 1.5N. Generally, in 2NxnU, U indicates that an image splitting line shifts upward to a midnormal of the image block. 2NxnU indicates that the image splitting line shifts upward by n to the midnormal of the image block, where n=xxN and x is greater than or equal to 0 and smaller than or equal to 1.</p><p id="p0028" num="0028">In two image sub-blocks obtained through splitting in a 2NxnD splitting manner (in the<!-- EPO <DP n="7"> --> figure, n=0.5 N) shown in <figref idrefs="f0002">FIG. 2b</figref>, lengths of two sides of an upper image sub-block are 2N and 1.5N, and lengths of two sides of a lower image sub-block are 2N and 0.5N. Generally, in 2NxnD, D indicates that an image splitting line shifts downward to a midnormal of the image block. 2NxnD indicates that the image splitting line shifts downward by n to the midnormal of the image block, where n=xxN and x is greater than or equal to 0 and smaller than or equal to 1.</p><p id="p0029" num="0029">In splitting manners shown in <figref idrefs="f0002">FIG. 2c and FIG. 2d</figref>, one image block is split into one left rectangular image sub-block and one right rectangular image sub-block of different sizes. In two image sub-blocks obtained through splitting in an nLx2N splitting manner (in the figure, n=0.5 N) shown in <figref idrefs="f0002">FIG. 2c</figref>, lengths of two sides of a left image sub-block are 0.5N and 2N, and lengths of two sides of a right image sub-block are 1.5N and 2N. Generally, in nLx2N, L indicates that an image splitting line shifts leftward to a midnormal of the image block. nL×2N indicates that the image splitting line shifts leftward by n to the midnormal of the image block, where n=xxN and x is greater than or equal to 0 and smaller than or equal to 1.</p><p id="p0030" num="0030">In two image sub-blocks obtained through splitting in an nRx2N splitting manner (in the figure, n=0.5 N) shown in <figref idrefs="f0002">FIG. 2d</figref>, lengths of two sides of a left image sub-block are 1.5N and 2N, and lengths of two sides of a right image sub-block are 0.5N and 2N. Generally, in nRx2N, R indicates that an image splitting line shifts rightward to a midnormal of the image block. nR×2N indicates that the image splitting line shifts rightward by n to the midnormal of the image block, where n=xxN and x is greater than or equal to 0 and smaller than or equal to 1.</p><p id="p0031" num="0031">The preceding image block splitting manners may also be represented by using prediction block types. 2Nx2N, 2NxN, Nx2N, 2NxnU, 2NxnD, nLx2N, and nRx2N all represent prediction block types corresponding to the image block splitting manners.</p><p id="p0032" num="0032">Among the preceding image block splitting manners, a splitting manner of splitting an image block or a transform block by a horizontal splitting line into multiple image sub-blocks or transform blocks or prediction blocks that are arranged along a vertical direction is a horizontal splitting manner, and a splitting direction used in this case is a horizontal splitting direction. The 2NxN splitting manner, the 2NxnU splitting manner, and the 2NxnD splitting manner are collectively referred to as a horizontal splitting manner; while a splitting manner of splitting an image block or a transform block by a vertical splitting line into multiple image sub-blocks or transform blocks or prediction blocks that are arranged along a horizontal direction is a vertical splitting manner, and a splitting direction used in this case is a vertical splitting direction. The Nx2N splitting manner, the nLx2N splitting manner, and the nRx2N splitting manner are collectively referred to as a vertical splitting manner; and a splitting manner of splitting an image block or a transform block by a horizontal splitting line into four image sub-blocks or transform<!-- EPO <DP n="8"> --> blocks or prediction blocks is a horizontal and vertical splitting manner, and a splitting direction used in this case is a horizontal and vertical splitting direction. The N×N splitting manner is a horizontal and vertical splitting manner.</p><p id="p0033" num="0033">To effectively represent how transform matrices of different sizes are used for an image block, a tree identification method may be used to identify a transform block layer by layer. In the layer-by-layer identification method, first identification information corresponding to a transform block is determined, and then, whether to split the transform block into transform blocks of a smaller size is determined according to the identification information. <figref idrefs="f0003">FIG. 3a to FIG. 3c</figref> are schematic diagrams of transform blocks corresponding to different layer numbers.</p><p id="p0034" num="0034">As shown in <figref idrefs="f0003">FIG. 3a to FIG. 3c</figref>, during identification of a size of a transform block used by an image block, a code stream at a coding end is set with an indicator bit (identification information) used to identify whether a transform matrix whose size is 2Nx2N is used in a 0<sup>th</sup> splitting layer of the transform block. If the transform matrix whose size is 2Nx2N (as shown in <figref idrefs="f0003">FIG. 3a</figref>) is used by the transform block, the indicator bit is 0. If 2Nx2N transform is not used by the transform block, the indicator bit is 1, indicating that the transform matrix whose size is 2Nx2N needs to be further split into four transform matrices whose sizes are N×N, and four bits are used in the code stream to respectively identify whether to further split each transform matrix whose size is N×N in a 1<sup>st</sup> splitting layer. If a transform structure shown in <figref idrefs="f0003">FIG. 3b</figref> is used by the transform block, all the four bits are 0, indicating that each transform matrix whose size is N×N is not further split.</p><p id="p0035" num="0035">When a transform structure shown in <figref idrefs="f0003">FIG. 3c</figref> is used, two of the four bits are 0 and the rest two bits are 1. The two bits being 0 indicate that a lower left transform matrix and an upper right transform matrix whose sizes are N×N are not further split. The rest two bits being 1 indicate that an upper left transform matrix and a lower right transform matrix whose sizes are N×N need to be further split to obtain transform matrices whose sizes are 0.5N×0.5N. In this case, the transform block corresponds to a 3<sup>rd</sup> splitting layer. Then, four bits are used in the code stream to indicate whether upper left transform matrices whose sizes are 0.5N×0.5N need to be further split in a second layer structure; and four bits are used to indicate whether lower right transform matrices whose sizes are 0.5N×0.5N need to be further split. If the transform structure shown in <figref idrefs="f0003">FIG. 3c</figref> is used by the transform block, all the 4+4 bits are 0, indicating that further splitting is not performed. The layer-by-layer identification in the code stream may effectively and flexibly represent sizes of transform blocks used by the image block and the image sub-blocks.</p><p id="p0036" num="0036">A layer-by-layer identification method at a decoding end is a reverse process of that at the coding end. For example, first an indicator bit (identification information) which is used to identify whether a transform matrix whose size is 2Nx2N is used in a 0<sup>th</sup> layer of the transform<!-- EPO <DP n="9"> --> block and is in a code stream is decoded. If a value of the indicator bit is 0, it indicates that 2Nx2N transform and the structure shown in <figref idrefs="f0003">FIG. 3a</figref> are used by the transform block; if the indicator bit is 1, it indicates that the transform matrix whose size is 2Nx2N needs to be further split into four transform matrices whose sizes are N×N, and the code stream continues to be decoded to obtain four bits which respectively indicate whether to further split each transform matrix whose size is N×N. If all the four bits are 0, it indicates that each transform matrix whose size is N×N is not further split and the structure shown in <figref idrefs="f0003">FIG. 3b</figref> is used; if two bits of the four bits are 0 and the rest two bits are 1, the structure shown in <figref idrefs="f0003">FIG. 3c</figref> is used.</p><p id="p0037" num="0037">In the layer-by-layer identification method, a splitting layer corresponding to a transform block is used to identify a number of the splitting layer where the transform block is located. Generally, a size of a transform block corresponding to the 0<sup>th</sup> splitting layer of the transform block is consistent with a size of the image block or a size of a prediction block, or is a specific block size.</p><p id="p0038" num="0038">In addition to the preceding method for identifying a layer number and a size that correspond to a transform block layer by layer, there is also a method for determining a size of a transform block according to a prediction block type used by an image block. Different prediction block types correspond to different image block splitting manners, and a prediction block may be obtained according to a splitting manner of an image block. For example, the 2NxN splitting manner indicates that a size of a corresponding prediction block is 2NxN (as shown in <figref idrefs="f0001">FIG. 1b</figref>).</p><p id="p0039" num="0039">In a video coding and decoding technology, usually leap transform exists for residual data corresponding to boundaries of two prediction blocks. Therefore, if a transform matrix crosses the boundaries of the two prediction blocks, a transform effect is weakened; correlation of a residual of an image block cannot be effectively removed; redundant information of the image block cannot be effectively removed; and coding efficiency is lowered.</p><p id="p0040" num="0040">In addition, in the prior art, a size of a transform matrix is not correlated to a size of a prediction block. As shown in <figref idrefs="f0001">FIG. 1b</figref>, when the 2NxN splitting manner is applied to a 2Nx2N image block, because a splitting manner reflects texture information of an area where an image block is located, texture of the area where the image block is located tends more to have a horizontal texture characteristic, but N×N transform blocks are still used by the image block.</p><p id="p0041" num="0041">Because a size of a transform matrix is not correlated to a size of a prediction block, the transform matrix does not utilize information of the prediction block to effectively remove redundant information of the image block, thereby affecting coding efficiency. In an embodiment of the present invention, during determination of a size of a transform block, a transform block of an appropriate splitting manner is used, thereby improving image compression efficiency.</p><p id="p0042" num="0042">In the present invention, a splitting direction of a transform block is obtained according<!-- EPO <DP n="10"> --> to a splitting layer number of the transform block and a splitting manner of an image block, thereby obtaining position information of a post-splitting transform block, or obtaining a splitting direction of the transform block according to splitting information of the transform block and the splitting manner of the image block; corresponding residual data is obtained at a coding end according to the position information of the post-splitting transform block, and then the residual data is transformed; and residual data is obtained after inverse transform is performed at a decoding end, and a decoded image block is obtained according to the position information of the post-splitting transform block and the residual data. In the present invention, when the splitting direction of the transform block is obtained, the splitting manner of the image block, the splitting layer number of the transform block, and the splitting information of the transform block are considered, so as to obtain the splitting direction of the transform block. A shape of a prediction block and texture information of the prediction block are considered in a size parameter and a position parameter of the post-splitting transform block, thereby improving coding efficiency. In addition, a position parameter of a filtering boundary of the post-splitting transform block may be further set according to the splitting direction of the transform block, thereby more accurately setting a filtering boundary of the transform block and improving the coding efficiency.</p><p id="p0043" num="0043"><figref idrefs="f0004">FIG. 4</figref> is a method for acquiring position information of a transform block according to an embodiment of the present invention. The method includes:</p><p id="p0044" num="0044">501: Obtain a splitting manner of an image block.</p><p id="p0045" num="0045">Alternatively, in an embodiment, a splitting layer number used to identify a transform block is trafoDepth. When a transform block matrix of only one size is used by the transform block, a value of trafoDepth is 0.</p><p id="p0046" num="0046">During determination of a splitting direction, considering that the preceding transform block should not cross a boundary of a prediction block and the transform block should be correlated to a size of the prediction block, a basic principle of determining the splitting direction is as follows: When a manner of splitting an image block along a horizontal direction shown in <figref idrefs="f0001">FIG. 1b</figref>, <figref idrefs="f0002">FIG. 2a, or FIG. 2b</figref> is applied to the image block, the splitting direction should be a vertical direction, that is, a transform block obtained through splitting is of a horizontal stripe shape, and this splitting manner may ensure that the transform block does not cross a boundary of a prediction block and a shape and texture information of the prediction block are considered; when a manner of splitting an image block along a vertical direction shown in <figref idrefs="f0001">FIG. 1c</figref>, <figref idrefs="f0002">FIG. 2c, or FIG. 2d</figref> is applied to the image block, the splitting direction should be a horizontal direction, that is, a transform block obtained through splitting is of a vertical stripe shape, and this splitting manner may ensure that the transform block does not cross a boundary of a prediction block and a shape and texture information<!-- EPO <DP n="11"> --> of the prediction block are considered; when a manner of splitting an image block along a horizontal and vertical direction shown in <figref idrefs="f0001">FIG. 1d</figref>, the splitting direction should be a horizontal and vertical direction, that is, the transform block is split into four transform blocks; and if a current transform block needs to be further split into four smaller transform blocks, the splitting direction should be the horizontal and vertical direction.</p><p id="p0047" num="0047">502: Determine a splitting direction parameter according to the splitting manner of the image block and the splitting layer number of the transform block.</p><p id="p0048" num="0048">It is assumed that the splitting direction parameter is interTUSplitDirection.</p><p id="p0049" num="0049">When a splitting layer number of the current transform block is 0 and the image block is split into two prediction blocks along the vertical direction, the splitting direction parameter is 1, that is, interTUSplitDirection is equal to 1, and the splitting direction of the transform block is the horizontal splitting direction. In this case, the current transform block is split into sub-transform blocks that are arranged along the horizontal direction, the sub-transform blocks are post-splitting transform blocks, and a width or a height of a sub-transform block is smaller than a width or a height of a pre-splitting transform block; when the splitting layer number of the current transform block is 0 and the image block is split into two prediction blocks along the horizontal direction, the splitting direction parameter is 0, that is, a value of interTUSplitDirection is equal to 0, and the splitting direction of the transform block is the vertical splitting direction. In this case, the current transform block is split into sub-transform blocks that are arranged along the vertical direction, the sub-transform blocks are post-splitting transform blocks, and a width or a height of a sub-transform block is smaller than a width or a height of a pre-splitting transform block; when the splitting layer number of the current transform block is greater than 0 and the image block is split into two prediction blocks along the vertical direction or the image block is split into two prediction blocks along the horizontal direction, and both a width and a height of the transform block are greater than a preset minimum size, the splitting direction parameter is 2, that is, a value of interTUSplitDirection is 2, and the splitting direction of the transform block is the horizontal and vertical splitting direction. The current transform block is split by both a horizontal splitting line and a vertical splitting line into four sub-transform blocks, the sub-transform blocks are post-splitting transform blocks, and a width or a height of a sub-transform block is smaller than a width or a height of a pre-splitting transform block.</p><p id="p0050" num="0050">When the splitting layer number of the current transform block is greater than 0 and the image block is split into two prediction blocks along the vertical direction or the image block is split into two prediction blocks along the horizontal direction, and a width of the current transform block is equal to the preset minimum size, the current transform block is split into four sub-transform<!-- EPO <DP n="12"> --> blocks along the vertical direction and the splitting direction parameter is set to 0, that is, a value of interTUSplitDirection is 0.</p><p id="p0051" num="0051">When the splitting layer number of the current transform block is greater than 0 and the image block is split into two prediction blocks along the vertical direction or the image block is split into two prediction blocks along the horizontal direction, and the splitting layer number of the current transform block is greater than 0, the current transform block is split into four sub-transform blocks along the horizontal direction and the splitting direction parameter is set to 1, that is, the value of interTUSplitDirection is 1.</p><p id="p0052" num="0052">The following describes this embodiment of the present invention in more detail with reference to specific examples and by using a coding end as an example. For ease of description, it is assumed that a splitting direction parameter is interTUSplitDirection. It should be understood that both the coding end and a decoding end determine position information of a current transform block according to a same or similar parameter and condition.</p><p id="p0053" num="0053"><figref idrefs="f0004">FIG. 5a and FIG. 5b</figref> are schematic diagrams of transform blocks according to an embodiment of the present invention.</p><p id="p0054" num="0054">In this embodiment, when only one layer of code is used by the transform block, that is, when only one fixed transform block size is used by an image block for coding, a value of trafoDepth is 0.</p><p id="p0055" num="0055">As shown in <figref idrefs="f0004">FIG. 5a</figref>, a splitting manner of an image block is 2NxN. Because only one layer of code is used by the transform block, in this case, a splitting direction is a vertical direction and a value of interTUSplitDirection is set to 0.</p><p id="p0056" num="0056">As shown in <figref idrefs="f0004">FIG. 5a</figref>, a splitting manner of an image block is Nx2N. Because only one layer of code is used by the transform block, in this case, a splitting direction is a horizontal direction and a value of interTUSplitDirection is set to 1.</p><p id="p0057" num="0057">In another embodiment, a coding manner of three-layer splitting is used by a transform block, that is, a value of trafoDepth may be 0, 1, or 2. It is assumed that size parameters of a transform block corresponding to a specific splitting layer are log2TrafoHeight and log2TrafoWidth, where log2TrafoHeight indicates that a height of the transform block is 1 &lt;&lt; log2TrafoHeight and log2TrafoWidth indicates that a width of the transform block is 1 « log2TrafoWidth. In addition, the size parameters of the transform block may also be represented by using log2TrafoSize. A relationship between log2TrafoSize, log2TrafoHeight, and log2TrafoWidth is log2TrafoSize = (log2TrafoHeight + log2TrafoHeight) » 1.</p><p id="p0058" num="0058">As shown in <figref idrefs="f0005">FIG. 6</figref>, when the splitting manner of the image block is 2NxN, 2NxnU, or 2N×nD, a 0<sup>th</sup> layer (trafoDepth is equal to 0) corresponding to the transform block uses a transform<!-- EPO <DP n="13"> --> block that is consistent with a size of the image block. A purpose lies in that: When residual data corresponding to the image block is relatively small, using a greater transform block may improve coding efficiency. In this case, when it is determined that the transform block needs to be split from the 0<sup>th</sup> layer (trafoDepth is equal to 0) to a 1<sup>st</sup> layer (trafoDepth is equal to 1), according to the preceding principle, in this case, the splitting direction is the vertical direction and the value of interTUSplitDirection is 0, that is, the transform block is split into four transform blocks of a smaller size along the vertical direction, a width of each transform block is consistent with that of transform of the 0<sup>th</sup> layer, and a height of each transform block is one fourth of that of transform of the 0<sup>th</sup> layer; when it is determined that a transform blocks need to be split from the 1<sup>st</sup> layer (trafoDepth is equal to 1) to a 2<sup>nd</sup> layer (trafoDepth is equal to 2), because a transform block is always split by using a one-into-four rule and according to the preceding principle of correlating a size of a transform block to a size of a prediction block (a shape of the transform block may be consistent with that of the prediction block as much as possible), in this case (trafoDepth is equal to 1 and the splitting manner of the image block is one of 2NxN, 2NxnU, and 2NxnD), the splitting direction is the horizontal and vertical direction and the value of interTUSplitDirection is 2, that is, a transform block is split into four stripes of a smaller size along the horizontal direction, and a width and a height of each transform block are half of a width and half of a height of a transform block in the 1<sup>st</sup> layer.</p><p id="p0059" num="0059">When the splitting manner of the image block is Nx2N, nLx2N, or nRx2N, similar to the principle shown in <figref idrefs="f0005">FIG. 6</figref>, the 0<sup>th</sup> layer (trafoDepth is equal to 0) corresponding to the transform block uses a transform block that is consistent with the size of the image block. A purpose lies in that: When residual data corresponding to the image block is relatively small, using a greater transform block may improve coding efficiency.</p><p id="p0060" num="0060">When it is determined that the transform block needs to be split from the 0<sup>th</sup> layer (trafoDepth is equal to 0) to the 1<sup>st</sup> layer (trafoDepth is equal to 1), according to the preceding principle, in this case, the splitting direction is the horizontal direction and the value of interTUSplitDirection is 1, that is, the transform block is split into four transform blocks of a smaller size along the horizontal direction, a height of each transform block is consistent with that of transform of the 0<sup>th</sup> layer, and a width of each transform block is one fourth of that of transform of the 0<sup>th</sup> layer; when it is determined that a transform block needs to be split from the 1<sup>st</sup> layer (trafoDepth is equal to 1) to the 2<sup>nd</sup> layer (trafoDepth is equal to 2), because a transform block is always split by using a one-into-four rule and according to the preceding principle of correlating a size of a transform block to a size of a prediction block, in this case (trafoDepth is equal to 1 and the splitting manner of the image block is one of Nx2N, nLx2N, and nRx2N), the splitting direction is<!-- EPO <DP n="14"> --> the horizontal and vertical direction and the value of interTUSplitDirection is 2, that is, the transform block is split into four stripes of a smaller size along the vertical direction, and a width and a height of each transform block are half of a width and half of a height of a transform block in the 1<sup>st</sup> layer.</p><p id="p0061" num="0061">In another embodiment, a coding manner of three-layer splitting is used by a transform block, that is, a value of trafoDepth may be 0, 1, or 2. It is assumed that size parameters of a transform block corresponding to a specific splitting layer are log2TrafoHeight and log2TrafoWidth, where log2TrafoHeight indicates that a height of the transform block is 1 &lt;&lt; log2TrafoHeight and log2TrafoWidth indicates that a width of the transform block is 1 « log2TrafoWidth. In addition, the size parameters of the transform block may also be represented by using log2TrafoSize. A relationship between log2TrafoSize, log2TrafoHeight, and log2TrafoWidth is log2TrafoSize = (log2TrafoHeight + log2TrafoHeight) » 1. Furthermore, a minimum transform block size for use by a coder of an image is regulated. In this embodiment, it is regulated that the minimum transform block size that may be used by the coder is 4, and it is assumed that the size of the image block is 16×16.</p><p id="p0062" num="0062">As shown in <figref idrefs="f0005">FIG. 6</figref>, the splitting manner of the image block is one of 2NxN, 2NxnU, and 2NxnD, and the horizontal splitting manner is used by the image block. When the transform block is located in a 0<sup>th</sup> layer (trafoDepth is equal to 0), a size of the transform bock is 16x16. When it is determined that the transform block needs to be split from the 0<sup>th</sup> layer (trafoDepth is equal to 0) to a 1<sup>st</sup> layer (trafoDepth is equal to 1), according to the preceding principle, in this case, the splitting direction is the vertical direction and the value of interTUSplitDirection is 0 and then a size of a transform block in the 1<sup>st</sup> layer is 16x4; when it is determined that a transform block needs to be split from the 1<sup>st</sup> layer (trafoDepth is equal to 1) to a 2<sup>nd</sup> layer (trafoDepth is equal to 2), because a transform block is always split by using a one-into-four rule and the minimum transform block size that may be used by the coder is 4, the transform block cannot be split into four 8x2 transform blocks, and therefore, in this case, the splitting direction is the horizontal direction and the value of interTUSplitDirection is set to 1, that is, the transform block is split into four 4x4 transform blocks along the horizontal direction.</p><p id="p0063" num="0063">As shown in <figref idrefs="f0006">FIG. 7</figref>, the splitting manner of the image block is one of Nx2N, nLx2N, and nRx2N, and the horizontal splitting manner is used by the image block. When the transform block is located in a 0<sup>th</sup> layer (trafoDepth is equal to 0), a size of the transform bock is 16x16. When it is determined that the transform block needs to be split from the 0<sup>th</sup> layer (trafoDepth is equal to 0) to a 1<sup>st</sup> layer (trafoDepth is equal to 1), according to the preceding principle, in this case, the splitting direction is the horizontal direction and the value of interTUSplitDirection is 1 and then a<!-- EPO <DP n="15"> --> size of a transform block in the 1<sup>st</sup> layer is 4x16; when it is determined that a transform block needs to be split from the 1<sup>st</sup> layer (trafoDepth is equal to 1) to a 2<sup>nd</sup> layer (trafoDepth is equal to 2), because a transform block is always split by using a one-into-four rule and the minimum transform block size that may be used by the coder is 4, the transform block cannot be split into four 2x8 transform blocks, and therefore, in this case, the splitting direction is the vertical direction and the value of interTUSplitDirection is set to 0, that is, the transform block is split into four 4x4 transform blocks along the vertical direction.</p><p id="p0064" num="0064">503: Obtain position information of the current transform block according to the splitting direction parameter.</p><p id="p0065" num="0065">The position information of the transform block includes a position parameter of the transform block or a position parameter of a filtering boundary of the transform block.</p><p id="p0066" num="0066">In the method for acquiring position information of a transform block provided in this embodiment of the present invention, splitting direction information is obtained directly according to a splitting manner of an image block and a layer number, and then, size information of a transform block is coded according to the splitting direction information, thereby effectively reducing complexity of a coding process.</p><p id="p0067" num="0067">Referring to <figref idrefs="f0006">FIG. 8</figref>, an embodiment of the present invention further provides a method for acquiring position information of a transform block. The method includes:</p><p id="p0068" num="0068">801: Obtain a splitting manner of an image block.</p><p id="p0069" num="0069">Step 802: Obtain splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block; or obtain splitting direction information according to a numerical relationship between a width and a height of a transform block.</p><p id="p0070" num="0070">803: Obtain position information of a post-splitting transform block according to the splitting direction information.</p><p id="p0071" num="0071">Information of a current transform block includes a width of the current transform block, a height of the current transform block, a preset maximum transform block size, and a preset minimum transform block size.</p><p id="p0072" num="0072">The splitting direction information includes a splitting direction parameter. The splitting direction parameter is used to identify a splitting direction of the transform block.</p><p id="p0073" num="0073">In this embodiment of the present invention, the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block; or the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block includes that:<!-- EPO <DP n="16"> -->
<ul><li>when a size parameter of the current transform block is smaller than or equal to the preset maximum transform block size, the height of the current transform block is equal to the width of the current transform block, both the height and the width of the current transform block are greater than the preset minimum transform block size, and the image block is split into two prediction blocks along a vertical direction, it may be known that in this case the current transform block is equivalent to the following described in step 502: when a splitting layer number of the current transform block is 0 and the image block is split into two prediction blocks along the vertical direction, the splitting direction parameter is set to 1, that is, interTUSplitDirection is equal to 1;</li><li>when a size parameter of the current transform block is smaller than or equal to the preset maximum transform block size, the height of the current transform block is equal to the width of the current transform block, both the height and the width of the current transform block are greater than the preset minimum transform block size, and the image block is split into two prediction blocks along a horizontal direction, it may be known that in this case the current transform block is equivalent to the following described in step 502: when a splitting layer number of the current transform block is 0 and the image block is split into two prediction blocks along the horizontal direction, the splitting direction parameter is set to 0, that is, interTUSplitDirection is equal to 0;</li><li>when the width of the current transform block is not equal to the height of the current transform block and both the width and the height of the current transform block are greater than the preset minimum transform block size, it may be known that the width and the height of the current transform block may be further split into half of the width and half of the height of the current transform block and the splitting direction parameter is set to 2, that is, a value of interTUSplitDirection is 2;</li><li>when the height of the current transform block is equal to the preset minimum size and the width of the current transform block is greater than the height of the current transform block, the splitting direction parameter is set to 1, that is, a value of interTUSplitDirection is 1;</li><li>when the width of the current transform block is equal to the preset minimum size and the width of the current transform block is smaller than the height of the current transform block, the splitting direction parameter is set to 0, that is, a value of interTUSplitDirection is 0;</li><li>a value of the size parameter of the current transform block is equal to an average value of the height of the current transform block and the width of the current transform block.</li></ul></p><p id="p0074" num="0074">The following gives an explanation with reference to a specific example.</p><p id="p0075" num="0075">As shown in <figref idrefs="f0005">FIG. 6</figref>, a splitting manner of an image block is 2NxN, 2NxnU, or 2NxnD, a<!-- EPO <DP n="17"> --> size of an image block is 16x 16, a preset maximum transform block size is 16, and a preset minimum transform block size is 4. It is assumed that a width and a height of a transform block are represented by using parameters log2TrafoHeight and log2TrafoWidth. A relationship between the height of the transform block and log2TrafoHeight is as follows: Height of the transform block = 1 &lt;&lt; log2TrafoHeight; and a relationship between the width of the transform block and log2TrafoWidth is as follows: Width of the transform block = 1 « log2TrafoWidth. In addition, a size parameter of the transform block may also be represented by using log2TrafoSize. A relationship between log2TrafoSize, log2TrafoHeight, and log2TrafoWidth is log2TrafoSize = (log2TrafoHeight + log2TrafoHeight) » 1.</p><p id="p0076" num="0076">In the preceding arithmetic operation, "&lt;&lt;" represents a left shift operation, 1 « log2TrafoHeight is equivalent to a 2<sup>log2TrafoHeight</sup> operation, 1 &lt;&lt; log2TrafoWidth is equivalent to a 2<sup>log2TrafoWidth</sup> operation, and 1 &lt;&lt; log2TrafoSize is equivalent to a 2<sup>log2TrafoSize</sup> operation; and "&gt;&gt;" represents a right shift operation, (log2TrafoHeight + log2TrafoHeight) » 1 is equivalent to an operation of (log2TrafoHeight + log2TrafoHeight)/2, and the following is the same.</p><p id="p0077" num="0077">It can be known from the preceding description that, log2TrafoHeight, log2TrafoWidth, and log2TrafoSize represent a size of the transform block in an exponential form. Therefore, when the transform block is split into smaller sub-transform blocks, a change to the size of the transform block may be reflected by addition or subtraction of numerical values of the parameters log2TrafoHeight, log2TrafoWidth, and log2TrafoSize. For example, when a size of a current transform block is 16x16, a value of log2TrafoHeight is 4, a value of log2TrafoWidth is 4, and a value of log2TrafoSize is 4. When the transform block is split into 16x4 sub-transform blocks, the size changes to 16x4. In this case, the value of log2TrafoWidth does not change and is still 4, the value of log2TrafoHeight changes to 2 (4 - 2), and the value of log2TrafoSize changes to 3 (4 - 1, that is, an average value of 4 and 2).</p><p id="p0078" num="0078">An initial size of a transform block used by the image block is consistent with a size of the image block. That is, both the width and the height of the current transform block are 16. In this case, the value of log2TrafoHeight is 4, the value of log2TrafoWidth is 4, and the value of log2TrafoSize is 4. In this case, when the current transform block is further split into smaller transform blocks, because both the width and the height of the current transform block are 16 (log2TrafoHeight is equal to log2TrafoWidth) and the splitting manner of the image block is 2NxN, 2NxnU, or 2NxnD, it may be known that the transform block is further split into four transform blocks whose width is 16 (the value of log2TrafoWidth does not change) and whose height is 4 (the value of log2TrafoHeight decrements by 2) along a vertical direction and a value of a splitting parameter interTUSplitDirection is set to 0. When the width of transform blocks obtained through<!-- EPO <DP n="18"> --> further splitting is 16 and the height is 4, because the height of the transform blocks is equal to the preset minimum transform block size (that is, log2TrafoHeight is equal to 2), in this case, the transform blocks cannot be further split into smaller transform blocks along the vertical direction or along both a horizontal direction and the vertical direction. In this case, a transform block may be further split into four transform blocks whose width and height are both 4 along the horizontal direction, and the value of the splitting parameter interTUSplitDirection is set to 1.</p><p id="p0079" num="0079">In the preceding step of determining whether the width or the height of the transform block is equal to the preset minimum transform block size, an average value (log2TrafoSize) of the width and the height of the transform block may also be used for the determination. In the preceding method, a width (or height) of a post-splitting transform block is one fourth of a width (or height) of a pre-splitting transform block but a height (or width) of the transform block does not change. That is, a value of log2TrafoWidth or log2TrafoHeight of the post-splitting transform block is a value of log2TrafoWidth or log2TrafoHeight of the pre-splitting transform block minus 2 but a value of log2TrafoHeight (or log2TrafoWidth) of the transform block does not change. It may be known that, when the value of log2TrafoHeight is not equal to that of log2TrafoWidth, the value of log2TrafoSize is always greater than a smallest value of log2TrafoHeight and log2TrafoWidth plus 1. Therefore, when the value of log2TrafoSize is equal to the preset minimum transform block size plus 1, a value of one parameter of log2TrafoHeight and log2TrafoWidth is surely equal to the preset minimum transform block size; and a parameter whose value is equal to the preset minimum transform block size may be known through a numerical relationship (greater than, equal to, or smaller than) between log2TrafoHeight and log2TrafoWidth.</p><p id="p0080" num="0080">Further, if the maximum transform block size is set in a coding and decoding system, a condition for determining the width of the transform block, the height of the transform block, an average value of the width of the transform block and the height of the transform block, and the preset maximum transform block size needs to be added in the preceding determining method. When the size of the transform block exceeds the preset maximum transform block size, the transform block should be split into transform blocks of a smaller size.</p><p id="p0081" num="0081">Because a size of a post-splitting transform block and the number of transform blocks may be determined according to a splitting direction, a position of a transform block may be further obtained; and because a filtering operation needs to be performed on a boundary of a transform block, a position of a filtering boundary of the transform block may be obtained according to the splitting direction.</p><p id="p0082" num="0082">When the splitting direction of the transform block is a vertical splitting direction or the splitting direction parameter is 0, because post-splitting transform blocks are arranged along the<!-- EPO <DP n="19"> --> vertical direction, horizontal coordinate values of the post-splitting transform blocks are the same as a horizontal coordinate value of the transform block, and a vertical coordinate value of at least one of the post-splitting transform blocks is different from a vertical coordinate value of the transform block;<br/>
when the splitting direction of the transform block is a vertical splitting direction or the splitting direction parameter is 0, because post-splitting transform blocks are arranged along the vertical direction, horizontal coordinate values of filtering boundaries of the post-splitting transform blocks are the same as a horizontal coordinate value of a filtering boundary of the transform block, and a vertical coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from a vertical coordinate value of the filtering boundary of the transform block;<br/>
when the splitting direction of the transform block is a horizontal splitting direction or the splitting direction parameter is 1, because post-splitting transform blocks are arranged along the horizontal direction, vertical coordinate values of the post-splitting transform blocks are the same as a vertical coordinate value of the transform block, and a horizontal coordinate value of at least one of the post-splitting transform blocks is different from a horizontal coordinate value of the transform block;<br/>
when the splitting direction of the transform block is a horizontal splitting direction or the splitting direction parameter is 1, because post-splitting transform blocks are arranged along the horizontal direction, vertical coordinate values of filtering boundaries of the post-splitting transform blocks are the same as a vertical coordinate value of a filtering boundary of the transform block, and a horizontal coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from a horizontal coordinate value of the filtering boundary of the transform block;<br/>
when the splitting direction of the transform block is a horizontal and vertical splitting direction or the splitting direction parameter is 2, because post-splitting transform blocks are arranged along the horizontal and vertical direction, a horizontal coordinate value of at least one of the post-splitting transform blocks is different from a horizontal coordinate value of the transform block, and a vertical coordinate value of the at least one of the post-splitting transform blocks is different from a vertical coordinate value of the transform block;<br/>
when the splitting direction of the transform block is a horizontal and vertical splitting direction or the splitting direction parameter is 2, because post-splitting transform blocks are arranged along the horizontal and vertical direction, a horizontal coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from a horizontal coordinate value of a filtering boundary of the transform block, and a vertical coordinate value of<!-- EPO <DP n="20"> --> the filtering boundary of the at least one of the post-splitting transform blocks is different from a vertical coordinate value of the filtering boundary of the transform block.</p><p id="p0083" num="0083">In this embodiment of the present invention, the horizontal coordinate value of the transform block refers to a horizontal coordinate value of a specific position of the transform block, the vertical coordinate value of the transform block refers to a vertical coordinate value of a specific position of the transform block, the horizontal coordinate value of the filtering boundary of the transform block refers to a horizontal coordinate value of a specific position of the transform block, and the vertical coordinate value of the filtering boundary of the transform block refers to a vertical coordinate value of a specific position of the transform block. The specific position may be an upper left corner, an upper right corner, a lower left corner, a lower right corner, a central point, or the like of the transform block.</p><p id="p0084" num="0084">Specifically, it is assumed that coordinate values of an upper left corner of the current transform block are (xm0, ym0), and coordinate values of upper left corners of four transform blocks obtained through splitting are (xn0, yn0), (xn1, xn1), (xn2, yn2), and (yn3, yn3), where xm0, xn0, xn1, xn2, and xn3 indicate horizontal coordinate values, and ym0, yn0, yn1, yn2, and yn3 indicate vertical coordinate values. It is assumed that the width of the current transform block is log2TrafoWidth, and the height of the current transform block is log2TrafoHeight.</p><p id="p0085" num="0085">When the value of interTUSplitDirection is 0, horizontal coordinate values of sub-transform blocks obtained through splitting do not change. Relationships between (xn0, yn0)/(xn1, yn1)/(xn2, yn2)/(yn3, yn3) and (xm0, ym0) are as follows: <maths id="math0003" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0003" file="imgb0003.tif" wi="26" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0004" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0004" file="imgb0004.tif" wi="26" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0005" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0005" file="imgb0005.tif" wi="26" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0006" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="77" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0007" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0007" file="imgb0007.tif" wi="27" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0008" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0008" file="imgb0008.tif" wi="77" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0009" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0009" file="imgb0009.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0010" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="77" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0086" num="0086">When the value of interTUSplitDirection is 1, vertical coordinate values of the sub-transform blocks obtained through splitting do not change. Relationships between (yn0, yn0)/(yn1, yn1)/(yn2, yn2)/(yn3, yn3) and (xm0, ym0) are as follows: <maths id="math0011" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0011" file="imgb0011.tif" wi="28" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0012" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0012" file="imgb0012.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0013" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0013" file="imgb0013.tif" wi="74" he="8" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="21"> --> <maths id="math0014" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0014" file="imgb0014.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0015" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0015" file="imgb0015.tif" wi="79" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0016" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>1</mn></math><img id="ib0016" file="imgb0016.tif" wi="29" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0017" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0017" file="imgb0017.tif" wi="79" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0018" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>2</mn></math><img id="ib0018" file="imgb0018.tif" wi="29" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0087" num="0087">When the value of interTUSplitDirection is 2, relationships between (yn0, yn0)/(yn1, yn1)/(yn2, yn2)/(yn3, yn3) and (xm0, ym0) are as follows: <maths id="math0019" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0019" file="imgb0019.tif" wi="26" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0020" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0020" file="imgb0020.tif" wi="26" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0021" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0021" file="imgb0021.tif" wi="78" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0022" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0022" file="imgb0022.tif" wi="28" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0023" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0023" file="imgb0023.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0024" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0024" file="imgb0024.tif" wi="78" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0025" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0025" file="imgb0025.tif" wi="78" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0026" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0026" file="imgb0026.tif" wi="78" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0088" num="0088">The preceding method of calculating (yn0, yn0), (yn1, yn1), (yn2, yn2), and (yn3, yn3) according to the value of interTUSplitDirection may be further simplified into the following form:</p><p id="p0089" num="0089">When the value of interTUSplitDirection is 2, relationships between (yn0, yn0)/(yn1, yn1)/(yn2, yn2)/(yn3, yn3) and (xm0, ym0) are as follows: <maths id="math0027" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0027" file="imgb0027.tif" wi="26" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0028" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0028" file="imgb0028.tif" wi="26" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0029" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0029" file="imgb0029.tif" wi="79" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0030" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0030" file="imgb0030.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0031" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0031" file="imgb0031.tif" wi="28" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0032" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>1</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0032" file="imgb0032.tif" wi="79" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0033" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0033" file="imgb0033.tif" wi="79" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0034" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>2</mn><mo>+</mo><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mfenced separators=""><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi><mo>-</mo><mn>2</mn></mfenced></math><img id="ib0034" file="imgb0034.tif" wi="79" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0090" num="0090">When the value of interTUSplitDirection is not 2, relationships between (yn0, yn0)/(yn1, yn1)/(yn2, yn2)/(yn3, yn3) and (xm0, ym0) are as follows: <maths id="math0035" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>xm</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0035" file="imgb0035.tif" wi="28" he="6" img-content="math" img-format="tif"/></maths> <maths id="math0036" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>=</mo><mi>ym</mi><mo>⁢</mo><mn>0</mn></math><img id="ib0036" file="imgb0036.tif" wi="28" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0037" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>xn</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mi>interTUSplitDirection</mi></math><img id="ib0037" file="imgb0037.tif" wi="134" he="9" img-content="math" img-format="tif"/></maths> <maths id="math0038" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi>yn</mi><mo>⁢</mo><mn>0</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mfenced separators=""><mn>1</mn><mo>-</mo><mi>interTUSplitDirection</mi></mfenced></math><img id="ib0038" file="imgb0038.tif" wi="134" he="6" img-content="math" img-format="tif"/></maths> <maths id="math0039" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>xn</mi><mo>⁢</mo><mn>1</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mi>interTUSplitDirection</mi></math><img id="ib0039" file="imgb0039.tif" wi="134" he="11" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="22"> --> <maths id="math0040" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><mi>yn</mi><mo>⁢</mo><mn>1</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mfenced separators=""><mn>1</mn><mo>-</mo><mi>interTUSplitDirection</mi></mfenced></math><img id="ib0040" file="imgb0040.tif" wi="138" he="11" img-content="math" img-format="tif"/></maths> <maths id="math0041" num=""><math display="block"><mi>xn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>xn</mi><mo>⁢</mo><mn>2</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoWidth</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mi>interTUSplitDirection</mi></math><img id="ib0041" file="imgb0041.tif" wi="138" he="7" img-content="math" img-format="tif"/></maths> <maths id="math0042" num=""><math display="block"><mi>yn</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><mi>yn</mi><mo>⁢</mo><mn>2</mn><mo>+</mo><mfenced separators=""><mfenced separators=""><mn>1</mn><mo>&lt;</mo><mo>&lt;</mo><mi>log</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>TrafoHeight</mi></mfenced><mo>&gt;</mo><mo>&gt;</mo><mn>2</mn></mfenced><mo>*</mo><mfenced separators=""><mn>1</mn><mo>-</mo><mi>interTUSplitDirection</mi></mfenced></math><img id="ib0042" file="imgb0042.tif" wi="138" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0091" num="0091">A position of a filtering boundary of a post-splitting transform block is consistent with a position of the transform block, and details are not repeatedly described herein.</p><p id="p0092" num="0092">Accordingly, referring to <figref idrefs="f0007">FIG. 9</figref>, an embodiment of the present invention further provides a module for acquiring position information of a transform block, where the module is configured to execute the preceding steps 501 to 503.</p><p id="p0093" num="0093">In <figref idrefs="f0007">FIG. 9</figref>, the module for acquiring position information of a transform block provided in this embodiment of the present invention includes:
<ul><li>a splitting manner obtaining module 901, configured to obtain a splitting manner of an image block;</li><li>a splitting direction information obtaining module 902, configured to obtain splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block; and</li><li>a position information obtaining module 903, configured to obtain position information of a post-splitting transform block according to the splitting direction information.</li></ul></p><p id="p0094" num="0094">For a specific working method of each module described in the foregoing, reference may be made to the preceding description, and details are not repeatedly described herein.</p><p id="p0095" num="0095">Certainly, with reference to steps 801 to 803, each module in the module for acquiring position information of a transform block provided in this embodiment of the present invention may be configured to:
<ul><li>a splitting manner obtaining module 901, configured to obtain a splitting manner of an image block;</li><li>a splitting direction information obtaining module 902, configured to obtain splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block, or obtain splitting direction information according to a numerical relationship between a width and a height of a transform block; and</li><li>a position information obtaining module 903, configured to obtain position information of a post-splitting transform block according to the splitting direction information.</li></ul></p><p id="p0096" num="0096">Similarly, for a specific working method of each module described in the foregoing, reference may be made to the preceding description, and details are not repeatedly described herein.</p><p id="p0097" num="0097">A person of ordinary skill in the art may understand that all or a part of the steps in the<!-- EPO <DP n="23"> --> methods of the foregoing embodiments may be implemented by a program instructing relevant hardware. The program may be stored in a computer readable storage medium, such as a read-only memory, a magnetic disk, or an optical disk.</p><p id="p0098" num="0098">A method for coding an image, a method for decoding an image, a device for coding an image, a device for decoding an image, and a network system provided in the embodiments of the present invention are described in detail in the foregoing. Specific examples are used in this specification for illustrating principles and implementation manners of the present invention. The description of the foregoing embodiments is merely used to help understanding of the methods and core ideas of the present invention. Meanwhile, a person of ordinary skill in the art may make variations to the specific implementation manners and application scopes according to the ideas of the present invention. In conclusion, the content of this specification should not be construed as a limitation on the present invention.</p></description><claims mxw-id="PCLM56976118" lang="EN" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-en-0001" num="0001"><claim-text>A method for acquiring position information of a transform block, comprising:
<claim-text>obtaining a splitting manner of an image block;</claim-text>
<claim-text>obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block; and</claim-text>
<claim-text>obtaining position information of a post-splitting transform block according to the splitting direction information.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein the splitting direction information comprises a splitting direction parameter, and the splitting direction parameter is used to identify a splitting direction of the transform block.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 2, wherein the obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block comprises that:
<claim-text>when the splitting layer number of the transform block is 0 and the splitting manner of the image block is a horizontal splitting manner, the splitting direction parameter is a first parameter value; or</claim-text>
<claim-text>when the splitting layer number of the transform block is 0 and the splitting manner of the image block is a vertical splitting manner, the splitting direction parameter is a second parameter value; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a vertical splitting manner or a horizontal splitting manner, and both a width and a height of the transform block are greater than a preset minimum size or a size parameter of the transform block is greater than the preset minimum transform block size plus 1, the splitting direction parameter is a third parameter value; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a vertical splitting manner, and a width of the current transform block is equal to a preset minimum size, the splitting direction parameter is a first parameter value; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a horizontal splitting manner, and a height of the current transform block is equal to a preset minimum size, the splitting direction parameter is a second parameter value; and<!-- EPO <DP n="25"> --></claim-text>
<claim-text>a value of the size parameter of the transform block is equal to an average value of the height of the transform block and the width of the transform block.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 1, wherein the splitting direction information comprises a splitting direction of the transform block, and the splitting direction of the transform block comprises a horizontal splitting direction, a vertical splitting direction, and a horizontal and vertical splitting direction.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method for acquiring position information of a transform block according to claim 4, wherein the obtaining splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block comprises that:
<claim-text>when the splitting layer number of the transform block is 0 and the splitting manner of the image block is a vertical splitting manner, the splitting direction of the transform block is the horizontal splitting direction; or</claim-text>
<claim-text>when the splitting layer number of the transform block is 0 and the splitting manner of the image block is a horizontal splitting manner, the splitting direction of the transform block is the vertical splitting direction; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a vertical splitting manner or a horizontal splitting manner, and both a width and a height of the transform block are greater than a preset minimum size or a size parameter of the transform block is greater than the preset minimum transform block size plus 1, the splitting direction of the transform block is the horizontal and vertical splitting direction; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a vertical splitting manner, and a width of the current transform block is equal to a preset minimum size, the splitting direction is the vertical splitting direction; or</claim-text>
<claim-text>when the splitting layer number of the transform block is greater than 0 and the splitting manner of the image block is a horizontal splitting manner, and a height of the current transform block is equal to a preset minimum size, the splitting direction of the transform block is the horizontal splitting direction; and</claim-text>
<claim-text>a value of the size parameter of the transform block is equal to an average value of the height of the transform block and the width of the transform block.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 1, wherein the position information of the transform block comprises a position parameter of the transform block or a position parameter of a filtering boundary of the transform block.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to claim 6, wherein:
<claim-text>the position parameter of the transform block comprises a horizontal coordinate value of the<!-- EPO <DP n="26"> --> transform block and a vertical coordinate value of the transform block; and</claim-text>
<claim-text>the position parameter of the filtering boundary of the transform block comprises a horizontal coordinate value of the filtering boundary of the transform block and a vertical coordinate value of the filtering boundary of the transform block.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method according to claim 7, wherein:
<claim-text>when a splitting direction of the transform block is a vertical splitting direction or a splitting direction parameter is a first parameter value, horizontal coordinate values of the post-splitting transform blocks are the same as the horizontal coordinate value of the transform block, and a vertical coordinate value of at least one of the post-splitting transform blocks is different from the vertical coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a vertical splitting direction or a splitting direction parameter is a first parameter value, horizontal coordinate values of filtering boundaries of the post-splitting transform blocks are the same as the horizontal coordinate value of the filtering boundary of the transform block, and a vertical coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from the vertical coordinate value of the filtering boundary of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal splitting direction or a splitting direction parameter is a second parameter value, vertical coordinate values of the post-splitting transform blocks are the same as the vertical coordinate value of the transform block, and a horizontal coordinate value of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal splitting direction or a splitting direction parameter is a second parameter value, vertical coordinate values of filtering boundaries of the post-splitting transform blocks are the same as the vertical coordinate value of the filtering boundary of the transform block, and a horizontal coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the filtering boundary of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal and vertical splitting direction or a splitting direction parameter is a third parameter value, a horizontal coordinate value of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of transform block, and a vertical coordinate value of the at least one of the post-splitting transform blocks is different from the vertical coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal and vertical splitting direction or a splitting direction parameter is a third parameter value, a horizontal coordinate value of a<!-- EPO <DP n="27"> --> filtering boundary of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the filtering boundary of the transform block, and a vertical coordinate value of the filtering boundary of the at least one of the post-splitting transform blocks is different from the vertical coordinate value of the filtering boundary of the transform block.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A method for acquiring position information of a transform block, comprising:
<claim-text>obtaining a splitting manner of an image block;</claim-text>
<claim-text>obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block; or obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block; and</claim-text>
<claim-text>obtaining position information of a post-splitting transform block according to the splitting direction information.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method according to claim 9, wherein the numerical relationship comprises "greater than", "equal to", and "smaller than".</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method according to claims 9 and 10, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block comprises that:
<claim-text>when the height of the transform block is equal to the width of the transform block and the splitting manner of the image block is a horizontal splitting manner, a splitting direction of the transform block is a vertical splitting direction; or</claim-text>
<claim-text>when the height of the transform block is equal to the width of the transform block and the splitting manner of the image block is a vertical splitting manner, a splitting direction of the transform block is a horizontal splitting direction; or</claim-text>
<claim-text>when the height of the transform block is not equal to the width of the transform block, a splitting direction of the transform block is a horizontal and vertical splitting direction.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method according to claims 9 to 11, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block comprises that:
<claim-text>the splitting direction of the transform block is the horizontal splitting direction when a size parameter of the transform block is smaller than or equal to a preset maximum transform block size, the height of the transform block is equal to the width of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or the size parameter of the transform block is greater than a preset minimum transform block size plus 1, and the splitting manner of the image block is a vertical splitting manner;<!-- EPO <DP n="28"> --></claim-text>
<claim-text>the splitting direction of the transform block is the vertical splitting direction when a size parameter of the transform block is smaller than or equal to a preset maximum transform block size, the height of the transform block is equal to the width of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or the size parameter of the transform block is greater than a preset minimum transform block size plus 1, and the splitting manner of the image block is a horizontal splitting manner;</claim-text>
<claim-text>the splitting direction of the transform block is the horizontal and vertical splitting direction when the width of the transform block is not equal to the height of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or a size parameter of the transform block is greater than a preset minimum transform block size plus 1; and</claim-text>
<claim-text>a value of the size parameter of the transform block is equal to an average value of the height of the transform block and the width of the transform block.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method according to claims 9 to 12, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block comprises that:
<claim-text>when the height of the transform block is equal to a preset minimum size and the width of the transform block is greater than the height of the current transform block, the splitting direction of the transform block is the horizontal splitting direction;</claim-text>
<claim-text>when the width of the transform block is equal to a preset minimum size and the width of the transform block is smaller than the height of the current transform block, the splitting direction of the transform block is the vertical splitting direction.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The method according to claim 9, wherein the splitting direction information comprises a splitting direction parameter, and the splitting direction parameter is used to identify a splitting direction of the transform block.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The method according to claim 14, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a current transform block and the splitting manner of the image block comprises that:
<claim-text>when the height of the transform block is equal to the width of the transform block and the splitting manner of the image block is a horizontal splitting manner, the splitting direction parameter is a first parameter value;</claim-text>
<claim-text>when the height of the transform block is equal to the width of the transform block and the splitting manner of the image block is vertical, the splitting direction parameter is a second parameter value;<!-- EPO <DP n="29"> --></claim-text>
<claim-text>when the height of the transform block is not equal to the width of the transform block, the splitting direction parameter is a third parameter value.</claim-text></claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The method according to claims 14 and 15, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block comprises that:
<claim-text>the splitting direction parameter is the second parameter value when a size parameter of the transform block is smaller than or equal to a preset maximum transform block size, the height of the transform block is equal to the width of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or the size parameter of the transform block is greater than a preset minimum transform block size plus 1, and the splitting manner of the image block is a vertical splitting manner;</claim-text>
<claim-text>the splitting direction parameter is the first parameter value when a size parameter of the transform block is smaller than or equal to a preset maximum transform block size, the height of the transform block is equal to the width of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or the size parameter of the transform block is greater than a preset minimum transform block size plus 1, and the splitting manner of the image block is a horizontal splitting manner;</claim-text>
<claim-text>the splitting direction parameter is the third parameter value when the width of the transform block is not equal to the height of the transform block, both the height and the width of the transform block are greater than a preset minimum transform block size or a size parameter of the transform block is greater than a preset minimum transform block size plus 1;</claim-text>
<claim-text>a value of the size parameter of the transform block is equal to an average value of the height of the transform block and the width of the transform block.</claim-text></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The method according to claim 14, wherein the obtaining splitting direction information according to a numerical relationship between a width and a height of a transform block comprises that:
<claim-text>when the height of the transform block is equal to a preset minimum size and the width of the transform block is greater than the height of the current transform block, the splitting direction parameter is a second parameter value;</claim-text>
<claim-text>when the width of the transform block is equal to a preset minimum size and the width of the transform block is smaller than the height of the current transform block, the splitting direction parameter is a first parameter value.</claim-text></claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>The method according to claims 15, 16, and 17, wherein the first parameter value is 0, the second parameter value is 1, and the third parameter value is 2.<!-- EPO <DP n="30"> --></claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>The method according to claim 9, wherein the position information of the transform block comprises a position parameter of the transform block or a position parameter of a filtering boundary of the transform block.</claim-text></claim><claim id="c-en-0020" num="0020"><claim-text>The method according to claim 19, wherein:
<claim-text>the position parameter of the transform block comprises a horizontal coordinate value of the transform block and a vertical coordinate value of the transform block; and</claim-text>
<claim-text>the position parameter of the filtering boundary of the transform block comprises a horizontal coordinate value of the filtering boundary of the transform block and a vertical coordinate value of the filtering boundary of the transform block.</claim-text></claim-text></claim><claim id="c-en-0021" num="0021"><claim-text>The method according to claim 20, wherein:
<claim-text>when a splitting direction of the transform block is a vertical splitting direction or a splitting direction parameter is a first parameter value, horizontal coordinate values of the post-splitting transform blocks are the same as the horizontal coordinate value of the transform block, and a vertical coordinate value of at least one of the post-splitting transform blocks is different from the vertical coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a vertical splitting direction or a splitting direction parameter is a first parameter value, horizontal coordinate values of filtering boundaries of the post-splitting transform blocks are the same as the horizontal coordinate value of the filtering boundary of the transform block, and a vertical coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from the vertical coordinate value of the filtering boundary of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal splitting direction or a splitting direction parameter is a second parameter value, vertical coordinate values of the post-splitting transform blocks are the same as the vertical coordinate value of the transform block, and a horizontal coordinate value of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal splitting direction or a splitting direction parameter is a second parameter value, vertical coordinate values of filtering boundaries of the post-splitting transform blocks are the same as the vertical coordinate value of the filtering boundary of the transform block, and a horizontal coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the filtering boundary of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal and vertical splitting direction or a splitting direction parameter is a third parameter value, a horizontal coordinate value of at least<!-- EPO <DP n="31"> --> one of the post-splitting transform blocks is different from the horizontal coordinate value of transform block, and a vertical coordinate value of the at least one of the post-splitting transform blocks is different from the vertical coordinate value of the transform block; or</claim-text>
<claim-text>when a splitting direction of the transform block is a horizontal and vertical splitting direction or a splitting direction parameter is a third parameter value, a horizontal coordinate value of a filtering boundary of at least one of the post-splitting transform blocks is different from the horizontal coordinate value of the filtering boundary of the transform block, and a vertical coordinate value of the filtering boundary of the at least one of the post-splitting transform blocks is different from the vertical coordinate value of the filtering boundary of the transform block.</claim-text></claim-text></claim><claim id="c-en-0022" num="0022"><claim-text>A module for acquiring position information of a transform block, comprising:
<claim-text>a splitting manner obtaining module, configured to obtain a splitting manner of an image block;</claim-text>
<claim-text>a splitting direction information obtaining module, configured to obtain splitting direction information according to the splitting manner of the image block and a splitting layer number of a transform block; and</claim-text>
<claim-text>a position information obtaining module, configured to obtain position information of a post-splitting transform block according to the splitting direction information.</claim-text></claim-text></claim><claim id="c-en-0023" num="0023"><claim-text>A module for acquiring position information of a transform block, comprising:
<claim-text>a splitting manner obtaining module, configured to obtain a splitting manner of an image block;</claim-text>
<claim-text>a splitting direction information obtaining module, configured to obtain splitting direction information according to a numerical relationship between a width and a height of a transform block and the splitting manner of the image block, or obtain splitting direction information according to a numerical relationship between a width and a height of a transform block; and</claim-text>
<claim-text>a position information obtaining module, configured to obtain position information of a post-splitting transform block according to the splitting direction information.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16666903" load-source="patent-office"><!-- EPO <DP n="32"> --><figure id="f0001" num="1a,1b,1c,1d"><img id="if0001" file="imgf0001.tif" wi="146" he="157" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0002" num="2a,2b,2c,2d"><img id="if0002" file="imgf0002.tif" wi="140" he="158" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0003" num="3a,3b,3c"><img id="if0003" file="imgf0003.tif" wi="165" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0004" num="4,5a,5b"><img id="if0004" file="imgf0004.tif" wi="153" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0005" num="6"><img id="if0005" file="imgf0005.tif" wi="162" he="126" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0006" num="7,8"><img id="if0006" file="imgf0006.tif" wi="153" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0007" num="9"><img id="if0007" file="imgf0007.tif" wi="137" he="86" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="164" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="228" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
