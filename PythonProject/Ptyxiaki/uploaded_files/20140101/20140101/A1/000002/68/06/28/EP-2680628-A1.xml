<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680628-A1" country="EP" doc-number="2680628" kind="A1" date="20140101" family-id="48087360" file-reference-id="234543" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549442" ucid="EP-2680628-A1"><document-id><country>EP</country><doc-number>2680628</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13159144-A" is-representative="YES"><document-id mxw-id="PAPP154823365" load-source="docdb" format="epo"><country>EP</country><doc-number>13159144</doc-number><kind>A</kind><date>20130314</date><lang>EN</lang></document-id><document-id mxw-id="PAPP175460558" load-source="docdb" format="original"><country>EP</country><doc-number>13159144.8</doc-number><date>20130314</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449641" ucid="US-201261665109-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201261665109</doc-number><kind>P</kind><date>20120627</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988122225" load-source="docdb">H04W   8/20        20090101ALI20131001BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988129880" load-source="docdb">H04W  12/04        20090101AFI20131001BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2025721787" load-source="docdb" scheme="CPC">H04W   8/205       20130101 LI20150903BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047999614" load-source="docdb" scheme="CPC">H04W  12/04        20130101 LI20150611BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047999874" load-source="docdb" scheme="CPC">H04W   8/183       20130101 LI20150611BHEP        </classification-cpc><classification-cpc mxw-id="PCL1991315424" load-source="docdb" scheme="CPC">H04W   8/22        20130101 FI20131226BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180810" lang="DE" load-source="patent-office">System und Verfahren zur Fernbereitstellung von eingebetteten universellen Karten mit integrierter Schaltung</invention-title><invention-title mxw-id="PT132180811" lang="EN" load-source="patent-office">System and method for remote provisioning of embedded universal integrated circuit cards.</invention-title><invention-title mxw-id="PT132180812" lang="FR" load-source="patent-office">Système et procédé destiné à la fourniture de cartes à circuit intégré universel intégré</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652458" load-source="docdb" ucid="US-20090205028-A1"><document-id format="epo"><country>US</country><doc-number>20090205028</doc-number><kind>A1</kind><date>20090813</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652459" load-source="docdb" ucid="US-20110136471-A1"><document-id format="epo"><country>US</country><doc-number>20110136471</doc-number><kind>A1</kind><date>20110609</date></document-id><sources><source name="SEA" category="I" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652460" load-source="docdb" ucid="WO-2012076425-A1"><document-id format="epo"><country>WO</country><doc-number>2012076425</doc-number><kind>A1</kind><date>20120614</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>"3rd Generation Partnership Project; Technical Specification Group Services and System Aspects; Feasibility Study on Remote Management of USIM Application on M2M Equipment; (Release 8)", 3GPP STANDARD; 3GPP TR 33.812, 3RD GENERATION PARTNERSHIP PROJECT (3GPP), MOBILE COMPETENCE CENTRE ; 650, ROUTE DES LUCIOLES ; F-06921 SOPHIA-ANTIPOLIS CEDEX ; FRANCE, no. V1.0.0, 1 September 2008 (2008-09-01), pages 1-80, XP050376873,</text><sources><source mxw-id="PNPL45131068" load-source="docdb" name="SEA" category="I"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR962410338" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ROGERS COMMUNICATIONS INC</last-name><address><country>CA</country></address></addressbook></applicant><applicant mxw-id="PPAR918159896" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ROGERS COMMUNICATIONS INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918986593" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Rogers Communications Inc.</last-name><iid>101282249</iid><address><street>333 Bloor Street East, 9th Floor</street><city>TORONTO, ONTARIO M4W 1G9</city><country>CA</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918137959" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>O'LEARY EDWARD A</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918155676" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>O'LEARY, EDWARD A</last-name></addressbook></inventor><inventor mxw-id="PPAR918993072" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>O'LEARY, EDWARD A</last-name><address><street>333 Bloor St. E., 9th Floor</street><city>TORONTO, ONTARIO M4W 1G9</city><country>CA</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918981765" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Algemeen Octrooi- en Merkenbureau</last-name><iid>100061505</iid><address><street>P.O. Box 645</street><city>5600 AP Eindhoven</city><country>NL</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548894437" load-source="docdb">AL</country><country mxw-id="DS548865506" load-source="docdb">AT</country><country mxw-id="DS548894443" load-source="docdb">BE</country><country mxw-id="DS548804357" load-source="docdb">BG</country><country mxw-id="DS548880744" load-source="docdb">CH</country><country mxw-id="DS548804970" load-source="docdb">CY</country><country mxw-id="DS548865507" load-source="docdb">CZ</country><country mxw-id="DS548869647" load-source="docdb">DE</country><country mxw-id="DS548894444" load-source="docdb">DK</country><country mxw-id="DS548804971" load-source="docdb">EE</country><country mxw-id="DS548842041" load-source="docdb">ES</country><country mxw-id="DS548804358" load-source="docdb">FI</country><country mxw-id="DS548804359" load-source="docdb">FR</country><country mxw-id="DS548869648" load-source="docdb">GB</country><country mxw-id="DS548894445" load-source="docdb">GR</country><country mxw-id="DS548894450" load-source="docdb">HR</country><country mxw-id="DS548804972" load-source="docdb">HU</country><country mxw-id="DS548880745" load-source="docdb">IE</country><country mxw-id="DS548894451" load-source="docdb">IS</country><country mxw-id="DS548804360" load-source="docdb">IT</country><country mxw-id="DS548804973" load-source="docdb">LI</country><country mxw-id="DS548869649" load-source="docdb">LT</country><country mxw-id="DS548865508" load-source="docdb">LU</country><country mxw-id="DS548869650" load-source="docdb">LV</country><country mxw-id="DS548869651" load-source="docdb">MC</country><country mxw-id="DS548862440" load-source="docdb">MK</country><country mxw-id="DS548862441" load-source="docdb">MT</country><country mxw-id="DS548804361" load-source="docdb">NL</country><country mxw-id="DS548842042" load-source="docdb">NO</country><country mxw-id="DS548804366" load-source="docdb">PL</country><country mxw-id="DS548842043" load-source="docdb">PT</country><country mxw-id="DS548804367" load-source="docdb">RO</country><country mxw-id="DS548842044" load-source="docdb">RS</country><country mxw-id="DS548804368" load-source="docdb">SE</country><country mxw-id="DS548862778" load-source="docdb">SI</country><country mxw-id="DS548880746" load-source="docdb">SK</country><country mxw-id="DS548880747" load-source="docdb">SM</country><country mxw-id="DS548869653" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670111" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Methods and devices are described for provisioning embedded universal integrated circuit cards (EUICCs). A certification server may store records for each EUICC containing provisioned profile data. A regulatory domain server may govern a regulatory domain containing a plurality of mobile network operators (MNOs) and may assist with provisioning wireless devices containing EUICCs. The EUICC may store a hierarchy of profiles, including a device profile, a regulatory domain profile, and/or an MNO profile. The EUICC may include a fully-qualified domain name for the certification server, the device installation server, and/or the regulatory domain server so as to trigger provisioning or re-provisioning over an IP connection.
<img id="iaf01" file="imgaf001.tif" wi="140" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499484" lang="EN" source="EPO" load-source="docdb"><p>Methods and devices are described for provisioning embedded universal integrated circuit cards (EUICCs). A certification server may store records for each EUICC containing provisioned profile data. A regulatory domain server may govern a regulatory domain containing a plurality of mobile network operators (MNOs) and may assist with provisioning wireless devices containing EUICCs. The EUICC may store a hierarchy of profiles, including a device profile, a regulatory domain profile, and/or an MNO profile. The EUICC may include a fully-qualified domain name for the certification server, the device installation server, and/or the regulatory domain server so as to trigger provisioning or re-provisioning over an IP connection.</p></abstract><description mxw-id="PDES63955541" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>FIELD</b></heading><p id="p0001" num="0001">The present application generally relates to radio communications, in particular, to systems and methods for remotely provisioning devices that use an embedded universal integrated circuit card.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">Mobile phones and other devices that operate on public land mobile networks (PLMNs) currently contain a Subscriber Identity Module (SIM) card that specifies the mobile network operator (MNO) to which the device user is subscribed. In this manner, the device is granted appropriate access to the available network resources and billing is allocated correctly. Users are able to change their subscription to a different MNO by inserting a new SIM card, subject to possible SIM-locks implemented within the phones or networks to prevent subscription changes that undermine device-cost-subsidy plans. A SIM is technically an application that resides within what is properly termed a universal integrated circuit card (UICC).</p><p id="p0003" num="0003">Development is underway on an embedded UICC (EUICC), which would be an integrated circuit component soldered directly to a circuit board within a wireless device. This creates an issue because it is not possible to change the EUICC if the device owner wishes to change to a new active MNO. Current expectations are that EUICCs will be used primarily in machine-to-machine (M2M) wireless devices, although they may become prevalent in other wireless devices.</p><p id="p0004" num="0004">The current process for provisioning a SIM card may not be desireable for EUICC cards. As things currently stand, the SIM manufactures are accredited as "qualified" manufacturers in a certification process. Once "qualified", they are entitled to produce SIM cards. SIM cards are often pre-provisioned with "personalization" data, <i>i.e.</i> an active International Subscriber Mobile Identity (IMSI) associated with the MNO that has ordered the<!-- EPO <DP n="2"> --> SIM card. During sale of the wireless device, the SIM card may be removed from the wireless device and re-provisioned at the point-of-sale using its hard-wired contacts to install an active user IMSI, <i>i.e.</i> an IMSI reflecting the actual assigned phone number and MNO under which the user has purchased service and, in many cases, the device. The MNO has a record of the subscription package associated with this IMSI, <i>i.e.</i> the services to which the device is entitled as a result of their subscription. A home location register (HLR) for the MNO is eventually provided with a record that enables the HLR to verify the IMSI's authenticity and the services to which it has access.</p><p id="p0005" num="0005">It may be advantageous to provide for systems and methods of provisioning or re-provisioning EUICCs that do not rely upon installation of an active MNO profile or donor MNO profile at the EUICC soldering stage.</p><heading id="h0003"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0006" num="0006">Reference will now be made, by way of example, to the accompanying drawings which show example embodiments of the present application, and in which:</p><p id="p0007" num="0007"><figref idrefs="f0001">Figure 1</figref> shows diagrammatically shows an example provisioning system for an example wireless device containing an EUICC;</p><p id="p0008" num="0008"><figref idrefs="f0002">Figure 2</figref> shows a block diagram of an EUICC memory;</p><p id="p0009" num="0009"><figref idrefs="f0003">Figure 3</figref> shows a signal diagram illustrating one example process for provisioning an EUICC;</p><p id="p0010" num="0010"><figref idrefs="f0004">Figure 4</figref> shows, in flowchart form, another example method for provisioning an EUICC; and</p><p id="p0011" num="0011"><figref idrefs="f0005">Figure 5</figref> shows, in flowchart form, an example method for IMSI-based provisioning of an EUICC.</p><p id="p0012" num="0012">Similar reference numerals may have been used in different figures to denote similar components.<!-- EPO <DP n="3"> --></p><heading id="h0004"><b>DESCRIPTION OF EXAMPLE EMBODIMENTS</b></heading><p id="p0013" num="0013">In one aspect, the present application describes method of provisioning an embedded universal integrated circuit card (EUICC) in a wireless device with an active profile, wherein the active profile corresponds to an mobile network operator (MNO) subscription for service and includes an active profile international mobile subscriber identity (IMSI) and key material, the EUICC storing a fully-qualified domain name (FQDN) that resolves to a server. The method includes establishing an IP connection between the wireless device and the server; receiving, at the server, a provisioning request from the wireless device; querying a certification server database for a record associated with the EUICC; identifying, based on the record, an MNO provisioning server for provisioning the EUICC; redirecting the wireless device to the MNO provisioning server, from which the EUICC is provisioned the active profile.</p><p id="p0014" num="0014">In another aspect, the present application describes a method of provisioning an embedded universal integrated circuit card (EUICC) in a wireless device with an active profile, wherein an active profile corresponds to an mobile network operator (MNO) subscription for service and includes an active profile international mobile subscriber identity (IMSI) and key material, the EUICC storing a current IMSI. The method includes receiving, at a server, a cellular connection from the wireless device having the current IMSI; determining that the current IMSI is a provisioning IMSI and not an active profile IMSI; and redirecting the wireless device to a provisioning server, wherein the provisioning server comprises one of a certification server, a device provisioning server, a regulatory domain provisioning server, and an MNO provisioning server.</p><p id="p0015" num="0015">In yet another aspect, the present application discloses a certification server. The certification server includes a processor; memory storing a plurality of records, each record storing a respective EUICC identifier and an associated certificate; and an authentication application stored in memory that, when executed, configures the processor to receive a query from a server regarding a wireless device containing an EUICC, the query including an identifier associated with the EUICC, select one of the plurality of records based on the received identifier matching the respective EUICC identifier, and send a reply to the server, wherein the reply includes information regarding an MNO provisioning server associated with the EUICC.<!-- EPO <DP n="4"> --></p><p id="p0016" num="0016">In a further aspect, the present application discloses a regulatory domain server operated by a regulatory domain operator for a regulatory domain, wherein the regulatory domain includes a plurality of mobile network operators (MNO) each having a public land mobile network. The regulatory domain server includes a processor; and a memory storing records for embedded universal integrated circuit cards (EUICCs) associated with wireless devices. The processor is configured to receive a provisioning request from a wireless device, the provisioning request including an EUICC identifier, determine whether the EUICC identifier matches one of the records stored in the memory and, if so, redirect the wireless device to a provisioning server for one of the MNOs within the regulatory domain based on the contents of the record matching the EUICC identifier, or, if not, query another server for provisioning information regarding the wireless device and receive a response thereto and redirect the wireless device based upon the response.</p><p id="p0017" num="0017">In yet a further aspect, the present application describes non-transitory computer-readable media storing computer-executable program instructions which, when executed, configured a processor to perform the described methods.</p><p id="p0018" num="0018">Other aspects and features of the present application will be understood by those of ordinary skill in the art from a review of the following description of examples in conjunction with the accompanying figures.</p><p id="p0019" num="0019">The present application relates to wireless network access for wireless devices. Many wireless devices may be mobile devices, such as tablets, mobile telephones, smartphones, laptops, and the like. Other wireless devices may be non-mobile devices, such as parking meters, vending machines, power-line equipment, remote sensing devices, and the like. There are a number of devices that are incorporating wireless connectivity other than conventional mobile telephones.</p><p id="p0020" num="0020">Wireless devices typically contain a removable Universal Integrated Circuit Card (UICC), which is often referred to as a SIM (Services Identity Module) card. The UICC is a smart card that features a CPU, ROM, RAM, and input/output contacts. The UICC runs one or more SIM applications (different applications may be resident on the UICC for connecting to different types of networks - <i>i.e.</i> GSM, CDMA, UMTS, <i>etc.</i>)<i>.</i> The SIM application securely stores the International Mobile Subscriber Identity (IMSI) and related keys to enable access and authentication on a wireless network. The SIM application may<!-- EPO <DP n="5"> --> also securely store information regarding the local network, information regarding services that the subscriber is able to access, and passwords or PINs. In some cases, the UICC may also store messaging data, such as contact information.</p><p id="p0021" num="0021">A user of a conventional mobile wireless device obtains the UICC from a particular mobile network operator (MNO). Based on the subscription purchased by the user, the MNO provisions the UICC with an MNO IMSI prior to distribution so that the mobile device wirelessly connects to the MNO's public land mobile network (PLMN). The user of the mobile device may change the MNO the device uses by changing the UICC. In some cases, however, an MNO may "lock" a mobile device to prevent carrier changes; particularly, where the MNO has provided the device to a user free or at a substantial discount in exchange for the user's commitment to a long-term service contract. This is typically referred to as a "SIM-lock".</p><p id="p0022" num="0022">Removable smart-card-based UICCs are expected to be replaced by embedded UICCs (EUICCs), which are soldered directly onto the circuit board within a wireless device. Expectations are that EUICCs may be particularly common in non-conventional wireless devices engaged in Machine-to-Machine (M2M) communications such as, for example, smart meters, automobiles, m-health cards or devices, various monitoring or tracking devices, <i>etc.</i> The EUICC may end up being the <i>de facto</i> technology used in most, if not all, wireless devices, including mobile devices such as smart phones, mobile telephones, tablets, and other user-centric devices. As noted above, the EUICC may also be embedded in non-mobile devices to enable those devices to engage in communications normally considered "mobile" communications.</p><p id="p0023" num="0023">Embedding the EUICC presents a challenge to conventional UICC technology in that the EUICC cannot simply be removed and replaced in order to change the MNO that the device uses to access wireless services. Also, the EUICC is affixed to a single device at the device factory. In the past, a set of UICCs may be manufactured and sent to a particular MNO. This meant that the UICCs could be pre-loaded with MNO IMSIs in some cases. In other cases, the UICCs may not be pre-loaded and may be provisioned by an MNO when a corresponding device is sold over-the-counter, but this requires that the MNO personnel extract and actively provision the UICC at the point-of-sale of the device/UICC. With EUICCs, the device manufacturer obtains EUICCs and solders them into the devices prior to distribution. Pairing a pre-provisioned EUICC with a specific device intended for distribution<!-- EPO <DP n="6"> --> to an MNO that matches the provisioning on the EUICC may be difficult. In some cases, this may be addressed by provisioning the EUICC as it comes off the assembly line using the EUICC contacts or short-range communications, like NFC or the like, but this requires that the device be pre-destined for a particular country and, in many cases, a particular MNO. Some manufacturers may want to allow for more flexibility.</p><p id="p0024" num="0024">The term "provisioning" as used herein refers to the loading or storing of a subscriber profile in memory on the EUICC. The subscriber profile is an "active profile" if it is specific to an MNO and includes an MNO IMSI and related keying material (<i>e.g.</i> Ki value). The subscriber profile also typically includes a file structure that defines parameters necessary for operating on the MNO's wireless network and may include an authentication key. Other keys and parameters may be included in a "provisioned" profile for an EUICC. In some cases, the provisioning of an EUICC with an active MNO profile may be referred to as "personalization".</p><p id="p0025" num="0025">The present application proposes a system architecture, servers and methods that enable the remote provisioning and management ofEUICCs.</p><p id="p0026" num="0026">Reference is first made to <figref idrefs="f0001">Figure 1</figref>, which diagrammatically shows an example provisioning system 50 for an example wireless device 10 containing an EUICC 12. The provisioning system 50 may include at least one certification server 14 and one or more SIM vendor servers 20 (although "SIM" refers generally to the software on the EUICC, the manufacturers/vendors of EUICC devices are referred to herein as SIM vendors). Each authorized or certified SIM vendor may have one or more of its own servers 20 for communicating with the certification server 14 in order to certify EUICCs that it has manufactured. Other elements of the system 50 may include one or more device installation servers 16, one of which is shown. The device installation server 16 includes a device database. The system 50 also includes the networks of a plurality of MNOs. Each MNO network includes an MNO database 30 (although for simplicity one is shown, the MNO database 30 may be implemented as a plurality of linked distributed databases). A collection of MNO networks common to a regulatory domain, <i>e.g.</i> a country, in some cases, may also have a related regulatory domain database 40 operated and maintained by a regulator for the domain. The regulator may be government regulator, a consortium of the relevant MNOs, or some other entity charged with operating the regulatory domain database 40 for the region.<!-- EPO <DP n="7"> --></p><p id="p0027" num="0027">The certification server 14 certifies EUICCs for SIM vendors. In particular, a SIM vendor server 20 connects to the certification server 14 to request certification of an EUICC 12 (or, a batch of EUICCs). The certification server 14 authenticates the SIM vendor server 20 as being associated with an authorized SIM manufacturer and provides the SIM vendor server 20 with some basic data for provisioning the EUICC 12. The basic provisioning data from the certification server 14 may include an certification token. The SIM vendor provides the certification server 14 with the EUICC identification (ID) number or code. This may be a serial number uniquely identifying the EUICC 12.</p><p id="p0028" num="0028">The certification server 14 stores a record for each certified EUICC 12 that contains the EUICC ID number and the assigned certification token. In some cases it may contain other data, some examples of which are provided below.</p><p id="p0029" num="0029">The SIM vendor server 20 may provision the EUICC 12 with the certification token, its EUICC ID number (if not already stored in non-volatile memory on the EUICC 12). It may also provision the EUICC 12 with a fully-qualified domain name (FQDN) for the certification server 14. This will allow the EUICC 12 to reach the certification server 14 in the future to be authenticated and, if necessary, to trigger further provisioning or re-provisioning of the EUICC 12 by other layers/entities in the system 50.</p><p id="p0030" num="0030">As will be described below, the record for each EUICC 12 maintained by the certification server 14 may be updated from time-to-time as the EUICC 12 is further provisioned with profile data, whether by a device manufacturer, a regulatory domain operator, a donor MNO, or an active MNO. The certification server 14 may, in some implementations, remove expired or de-authorized profile data from the record for an EUICC 12.</p><p id="p0031" num="0031">The certification of the EUICC 12 may occur post-installation from the device factory. In such a case, the device installation server 16 may contact the SIM vendor server 20 and certification server 14 to initiate the certification process.</p><p id="p0032" num="0032">Irrespective of whether certification occurs before or after embedding of the EUICC 12 in the device 10, the device installation server 16 may provision the EUICC 12 with a profile. The profile installed by the device installation server 16 may be a device-level profile in cases where the device 10 is not designated for a particular regulatory domain and/or MNO. A device-level profile may provide the EUICC 12 with an international mobile<!-- EPO <DP n="8"> --> station identity (IMEI), keying material, and a device FQDN. The device FQDN may point to the device installation server 16 or another such server associated with the device manufacturer for provisioning/managing device profiles.</p><p id="p0033" num="0033">In some example embodiments, the device-level profile may also include allocation of a device International Mobile Subscriber Identity (IMSI). This IMSI is not specific to a country. That is the mobile country code (MCC) and/or mobile network code (MNC) within the IMSI are a unique code assigned to the device manufacture or SIM vendor. The fact that the EUICC 12 has been provisioned with a device IMSI also serves as notice that the device is not provisioned with an MNO profile - <i>i.e.</i> it requires further provisioning before it is able to freely access mobile networks - and it associates the device with a given manufacturer and/or SIM vendor. In one example, the MCC is set to a predefined code, like 999, that is not associated with a country and the MNCs are assigned to individual SIM vendors. Yet another MCC (or more than one) may be predefined as being for vendors, and the MNCs for that MCC may point to individual device vendors.</p><p id="p0034" num="0034">In some implementations, the device-level profile (or other profile) may be stored on and provisioned by the SIM vendor server 20 with the device installation server 16 acting as proxy.</p><p id="p0035" num="0035">In some cases, the device installation server 16 may be able to provision the EUICC 12 with a more specific profile. For example, it may know the country and/or regulatory domain to which the device 10 will be sent. In this case, the device installation server 16 itself, or as proxy, may install a regulatory domain profile. This type of profile is not an MNO-level profile, but rather is more specific than a device-level profile. It may provide the EUICC 12 with a regulatory domain server FQDN, for example the regulatory domain database 40 or a related server.</p><p id="p0036" num="0036">The regulatory domain profile may further include keying material and, in some cases, a regulatory domain IMSI. The regulatory domain IMSI may include an MCC and/or MNC code specific to the regulatory domain. Like the device-level IMSI, the regulatory domain IMSI is not an "active" IMSI with which the device is able to operate normally on mobile networks, but rather is a "provisioning" IMSI that, in some implementations, may trigger a provisioning operation when the device connects to a mobile network, as will be explained further below.<!-- EPO <DP n="9"> --></p><p id="p0037" num="0037">In both cases (device-level profile and regulatory domain profile) the provisioning server updates the certification server 14 with the profile data. That is, the certification server 14 maintains a record specific to the EUICC 12 that reflects the current provisioned profile information and, in some embodiments, a hierarchy of provisioned profile information. In the latter case, the certification server 14 maintains profile information at the certification or SIM vendor level, the device level, the regulatory domain level, and/or the MNO level, if any such profiles have been provisioned to the EUICC 12. The profile at a given level may be overwritten if the EUICC 12 is re-provisioned (keeping in mind that re-provisioning at a higher level, like device-level, will necessarily invalidate profiles at the lower level, like MNO-level, at the same time). Re-provisioning and restrictions on re-provisioning are described later below.</p><p id="p0038" num="0038">In some cases, the EUICC 12 may be provisioned with a donor MNO profile or an active MNO profile. An active MNO profile is associated with a specific MNO and a subscription package that defines the device's access credentials and entitlements with respect to mobile network communications. The MNO profile has an MNO IMSI and associated keying material. The EUICC 12 may also be provided with an MNO FQDN in the MNO profile, such as a FQDN pointing to the MNO database 30 or a similar server.</p><p id="p0039" num="0039">A donor MNO profile is a concept created for EUICCs 12. The donor MNO profile is an actual active MNO profile, as described above, but may, through business arrangements, be intended to be temporary. For example, the device manufacturer may have a relationship with a designated MNO that serves as an initial MNO. In another example, several MNOs in a consortium may designate one of them to serve as the initial MNO. When a donor MNO profile is installed in the EUICC 12, the device containing that EUICC 12 will function normally on an MNO network. When activated, it will seek and obtain services on the MNO network and it may appear to be roaming (if not the same MNO as the donor MNO profile).</p><p id="p0040" num="0040">In some cases, one of the above-described types of profiles may be installed at the device factory: device-level profile, regulatory domain profile, or MNO profile (donor or otherwise). The device-level profile and regulatory domain profiles may be termed "provisioning profiles" since they are not active MNO profiles. Moreover, a donor MNO profile may also be termed a "provisioning profile", although it is specific to an MNO and is capable of functioning as an active profile. In some cases, mechanisms may be implemented<!-- EPO <DP n="10"> --> in the networks to try to recognize an active MNO profile as a donor profile and thereby treat it as a "provisioning profile".</p><p id="p0041" num="0041">The provisioning of profiles may additionally or alternatively occur at other points in the distribution process, such as at the point-of-sale or in the after-market. Other servers may proxy the provisioning function and contact the certification server 14 or any other servers required for provisioning the EUICC 12 with a particular profile, including the device installation server 16, the SIM vendor server 20, a regulatory domain server, or an MNO server.</p><p id="p0042" num="0042">The certification server 14, which maintains up-to-date records for certified EUICCs and the various profiles that have been provisioned to those EUICCs, is illustrated in <figref idrefs="f0001">Figure 1</figref> as a single device for simplicity. Nevertheless, it will be understood that the certification server 14, and other servers shown in <figref idrefs="f0001">Figure 1</figref>, may be implemented using multiple servers, server farms, distributed databases, redundant back-up servers, <i>etc.</i></p><p id="p0043" num="0043">Reference is now made to <figref idrefs="f0002">Figure 2</figref>, which shows, in block diagram form, an example EUICC 12. The EUICC 12 in this example has been provisioned with a number of profiles. Initially, the EUICC 12 is certified by the certification server 14 (<figref idrefs="f0001">Fig. 1</figref>) and is provide with certification token(s) 50 and the certification server FQDN 52. On device installation, the EUICC 12 is provisioned with a device database FQDN 54. It may also, in some cases, be provided with device-level key material 56 and, in some embodiments, a device-level IMSI 58.</p><p id="p0044" num="0044">In this example, the EUICC 12 has also been provisioned with a regulatory domain FQDN 60. This may be further associated with a regulatory domain key 62 and, in some cases, a regulatory domain IMSI 64. The EUICC 12 has further been provisioned with an MNO FQDN 66 and MNO key material 68. Having been provisioned by an MNO with an active MNO profile, the EUICC 12 now has an MNO IMSI 70.</p><p id="p0045" num="0045">The profiles stored in the EUICC 12 are hierarchical. The EUICC 12 is configured to attempt to use the most particular of the profiles to obtain services on the wireless network. For example, when an active MNO profile has been provisioned to the EUICC 12, then the EUICC 12 uses this active profile for communications with wireless networks. In the event that that profile is invalidated, de-activated, or otherwise refused by the wireless network, the EUICC 12 may be configured to use the next most particular FQDN<!-- EPO <DP n="11"> --> (and, if necessarily, key material) in the stack of profiles to trigger or request the provisioning of a new active MNO profile. In the case where a regulatory domain FQDN 60 is stored on EUICC 12, the EUICC 12 requests access to that regulatory domain FQDN 60 once an IP connection has been obtained, whether over a public land mobile network (PLMN), <i>e.g.</i> cellular, or over wireless local access network (WLAN), <i>e.g.</i> a WiFi access point. In the event the device is unable to obtain an IP connection over the cellular network due to the invalid or de-activated MNO profile, it may rely on WiFi or other short-range wireless communications to obtain IP connectivity through a suitable access point in order to contact the regulatory domain FQDN 60.</p><p id="p0046" num="0046">If no regulatory domain FQDN 60 is stored on the EUICC 12, then it may request access to the device-level FQDN 54, or if that is not available, the certification server FQDN 52.</p><p id="p0047" num="0047">Any of these FQDN 52, 54, 60 end-points may refer the EUICC 12 to another server for provisioning or further redirection. For example, the regulatory domain FQDN 60 may result in contact with a regulatory domain server that consults the regulatory domain database 40 (<figref idrefs="f0001">Fig. 1</figref>) and authenticates the EUICC 12. It may then apply any suitable routing policies for referring the EUICC 12 to one of the MNOs within the regulatory domain for provisioning of an active MNO profile. If the EUICC 12 cannot be authenticated, it may send a refusal message to the device and/or it may refer the EUICC 12 to the applicable device database or certification server 14. In this manner, the EUICC 12 contains the domain information for reaching back to various points in the provisioning architecture in order to trigger or request re-provisioning, including as far back as the certification server 14. The certification server 14 maintains a record of all provisioning for the EUICC 12, thereby enabling the certification server 14 to play a role in authenticating or authorizing provisioning/re-provisioning requests and/or managing the re-provisioning process.</p><p id="p0048" num="0048">Reference is now made to <figref idrefs="f0003">Figure 3</figref>, which shows a signal diagram 100 for provisioning an EUICC 12 in a device 10. As described above, the EUICC 12 initially is provisioned with, at least, a certification server FQDN. The device 10 obtains an IP connection, for example through WiFi or any other wired or wireless connection through which an IP connection may be established, and contacts the certification server FQDN to reach a certification server 110. The device 10 establishes a secure connection 130, such as<!-- EPO <DP n="12"> --> an IPSec tunnel, with a security gateway 112 in the certification server 110. The device 10 may then send the certification server 110 a request 132 to be provisioned with a profile.</p><p id="p0049" num="0049">The certification server 110 may include an authentication/referral service 114 for authenticating device requests and referring them to suitable servers for provisioning. In some cases, the request 132 (illustrated as a single request, although in some cases the device 10 and server 110 may exchange multiple communications as part of the request) may include contextual data from the device 10 that assists the authentication/referral service 114 in redirecting the device 10. For example, the contextual data may, in some embodiments, include geo-location data, if available, RF parameters or data, including cell tower information, or other such data. The contextual data helps the authentication/referral service 114 identify whether the device 10 should be redirected to a particular regulatory domain server, MNO server, <i>etc.</i> For example, the contextual data may inform the authentication/referral service 114 that the device is in a particular country or a particular city. That information may be used to route the device request to a particular server for further provisioning decisions.</p><p id="p0050" num="0050">In some embodiments the certification server 110 may already have redirection information for the device 10. For example, upon initial provisioning of the EUICC 12 with the certification server FQDN, the end destination for the EUICC 12 or the device 10 may have been unknown. In the meantime, the certification server 110 may have received updated information regarding the MNO or regulatory domain to which the device/EUICC 10, 12 are associated, and that information may be stored in the EUICC 12 record maintained by the certification server 110. When the device 10 later connects and requests provisioning, the certification server 110 may therefore already know to which other server the device request should be redirected.</p><p id="p0051" num="0051">The authentication/referral service 114 refers the device 10 to another server for provisioning, as indicated by reference numeral 134. As a result, the device 10 contacts a provisioning server 120, such as a device-level server, regulatory-domain server, or MNO server, as examples. The provisioning server 120 and device 10 establish a secure connection 140, such as an IPSec tunnel, via a security gateway 122 in the provisioning server 120. The device 10 then sends its request for provisioning 142 to the provisioning server 120, and in particular to a provisioning service 124 implemented within the provisioning server 120. In<!-- EPO <DP n="13"> --> response, in this example, the provisioning server 120 provisions the device 10 with profile data 144 for installation in the EUICC 12.</p><p id="p0052" num="0052">In another embodiment (not illustrated), the certification server 110 itself, or a proxy, may have been provided with the active MNO profile that is intended to be associated with and installed on the EUICC 12, and the certification server 110 may itself (or through a proxy) install the profile on the EUICC 12.</p><p id="p0053" num="0053">Note that in some other embodiments, instead of first contacting the certification server 110, the device 10 may have a FQDN for another entity, such as an MNO server, device server, SIM vendor server, or regulatory domain server. These servers may be configured to contact (perhaps as proxy) the certification server on behalf of the device 10 in order to authenticate the EUICC 12 and obtain redirection/provisioning instructions, if any. These servers may further request information from other servers, including device or SIM vendor servers.</p><p id="p0054" num="0054">Reference is now made to <figref idrefs="f0004">Figure 4</figref>, which shows, in flowchart form, an example process 200 for provisioning an EUICC. The process begins when the device establishes an IP connection with the server corresponding to a FQDN stored in the EUICC, as indicated by operation 202. This server may be an MNO server, a regulatory-domain server, a device-level server, or another type of server, <i>e.g.</i> SM-SR. The IP connection may be established over WiFi, NFC, or other short-range data connection.</p><p id="p0055" num="0055">In operation 204, the server receives a provisioning request from the device. The provisioning request may include data stored in the EUICC, including current non-active profile information. The provisioning request may also include contextual data, such as geo-location data, or local MNO data obtained via radio scanning.</p><p id="p0056" num="0056">The server may, in operation 206, query the certification database for a record corresponding to the EUICC. In some cases, the server may refer/redirect the wireless device to the certification server. In this example, the server requests and obtains information from the certification server. The server may authenticate the EUICC based on information received from the certification server. In some cases, the information provided by the certification server may specify an MNO or regulatory domain to which the wireless device/EUICC is associated and to which it should be redirected. In some other cases, the certification server may not provide information regarding an associated MNO or regulatory<!-- EPO <DP n="14"> --> domain. In the latter situation, the server may rely upon contextual data provided by the wireless device and/or regulatory policy and rules for identifying an MNO and/or regulatory domain to which the wireless device belongs. In some cases, the server may query one or more regulatory domain or MNO servers to determine whether the wireless device is associated with that domain or MNO. In any of these situations, as indicated by operation 208, the server identifies an MNO provisioning server.</p><p id="p0057" num="0057">Operation 208 may include identifying a server with the associated MNO that is local to the wireless device, based upon contextual data provided by the device. In one example, operation 208 may include redirecting the request to an MNO server, which then identifies the MNO provisioning server to which to refer the device on the basis of the contextual data.</p><p id="p0058" num="0058">In operation 210, the wireless device is redirected to an MNO provisioning server. This may include providing the wireless device with an FQDN for the MNO provisioning server. The wireless device may then establish a secure connection, such as an IPSec tunnel, with a security gateway of the MNO provisioning server. The MNO provisioning server then, in operation 212, provisions the EUICC with an active MNO profile.</p><p id="p0059" num="0059">Note that if the server is an MNO server then, in some examples, it may install an active profile without further redirection. In some other cases, if the server is a donor MNO server, then it may install an active profile if the device is to remain with the MNO, refer the device to another MNO, or redirect the device to a regulatory domain server. If the server is a regulatory domain server, then it may redirect the device to an MNO within the domain for obtaining a subscription and installing a profile.</p><p id="p0060" num="0060">Referring again to <figref idrefs="f0001">Figure 1</figref>, example processes for re-provisioning the EUICC 12 will now be described. The re-provisioning may be initiated over an IP connection or over an air interface. In some embodiments, an IP connection may be required for finalizing transactions.</p><p id="p0061" num="0061">In a first example process, the EUICC 12 contains an active MNO profile, but the owner/user initiates a change request offline. That is, the change request is not implemented via the device 10 itself, but rather through an in-store or web-based transaction with a new MNO. The user/owner of the device 10 initiates the transaction by contracting for<!-- EPO <DP n="15"> --> subscription services with the new MNO. These first example processes describe re-provisioning processes managed by the MNOs/network(s).</p><p id="p0062" num="0062">The new MNO registers the requested change with another entity in the system 10, such as the old MNO and/or the regulatory domain database 40. Processes are in place to authenticate the requested change. For example, business rules may govern whether the change is permitted, such as whether there are outstanding payments owed to the old MNO or whether a device-cost-subsidy buyout is required or whether an existing contract with the old MNO requires a cancellation payment, etc. The old MNO may have one or more servers configure to receive and authorize (or reject) requests from new MNO servers relating to change requests. In one embodiment, the regulatory domain operator (via one or more regulatory domain servers) manages or negotiates these authorizations as intermediary between the various MNOs.</p><p id="p0063" num="0063">Assuming that the change is authorized, then the new MNO profile may be provisioned to the EUICC 12 in a number of ways. In a first example, the device may be instructed by the regulatory domain server, or old MNO server, or new MNO server or other such server, to access a provisioning server (which may include any of the above servers) to be provisioned with the new MNO profile. The instruction to the device 10 may be communicated over-the-air (OTA) using a data connection authorized by the old MNO profile, or over an IP connection using WiFi or the like.</p><p id="p0064" num="0064">In another example, the old MNO may be configured to detect the OTA connection of the device using the old MNO profile and may be configured, for example at the HLR level, to restrict the device's access to services to connecting with a provisioning server. The provisioning server may include a regulatory domain server, a new MNO server, or an old MNO server that has been provided with the MNO profile for installation in the EUICC 12.</p><p id="p0065" num="0065">In a third example, in some cases the old MNO profile may simply be deactivated such that when the device 10 connects to the old MNO network and HLR is it unable to authenticate and obtain services. As a result, it may seek provisioning using the next most specific FQDN with which it has been provisioned, <i>e.g.</i> a regulatory domain server FQDN. Accordingly, the device 10 may connect to the regulatory domain server FQDN (or the like) using an IP connection over WiFi or other IP connectivity. Depending on the<!-- EPO <DP n="16"> --> profiles provisioned to the EUICC 12, it may contact the regulatory domain database 40, the device installation server 50, the SIM vendor server 20 or the certification server 14 for provisioning of the new MNO profile. In some cases, the server contacted may refer the device 10 to a provisioning server operated by the new MNO for installation of the new MNO profile.</p><p id="p0066" num="0066">In a variation to the foregoing processes, the change in MNO may not be initiated by the user, but rather may result from a reassignment of the subscriptions from the old MNO to the new MNO, for example as a result of acquisition of some or all of the old MNO's business. Transfer of subscriptions from one MNO to another may occur for other reasons as well. The foregoing processes may be used to facilitate the change in MNO for each subscribed by automatically updating the active MNO profile for their device(s).</p><p id="p0067" num="0067">In a second example process, the change in MNO is initiated by a command from the device 10. In one embodiment, the device 10 may include an application or process that enables user selection of a new MNO and subscription plan. Using an interface on the device 10, the user may request a new subscription and new MNO. That change request received by the device 10 may trigger a change command request to a current MNO server and/or to an intermediary server, such as a regulatory domain server. The change command may be send OTA in some embodiments. In another embodiment, the change command may be implicitly made by requesting access to an FQDN associated with re-provisioning. In some cases, the FQDN may include one or more of the FQDNs provisioned to the EUICC 12, such as the regulatory domain FQDN 60, the device database FQDN 54, and/or the certification server FQDN 52. In some instances, the device 10 may send selected subscription information to the FQDN, which in some cases may include the identity of the newly-selected MNO.</p><p id="p0068" num="0068">As above, processes may be put in place for authorizing a change request. For example, the old MNO may need to authorize the change in accordance with business rules regarding outstanding accounts, SIM locks, etc. The regulatory domain database 40 may manage negotiation of the change in MNOs and authorization of the change command. Presuming the change is authorized, the new MNO profile may be installed an activated by the new MNO server, or the regulatory domain server, etc. The old MNO profile is deactivated.<!-- EPO <DP n="17"> --></p><p id="p0069" num="0069">It will be appreciated that the various servers that may be involved in the re-provisioning processes may contact the certification server 14 for validating EUICC information and updating the records maintained by the certification server 14.</p><p id="p0070" num="0070">In one example embodiment, a factory reset (network or user-initiated) may by implemented using one of the above-described re-provisioning processes. During fatory reset, the user may be provided with an option of selecting a new MNO/subscription if the old MNO profile (if any) is deactivated (subject to MNO change authorization rules).</p><p id="p0071" num="0071">It will also be understood that re-provisioning may occur prior to installation of an MNO active profile. For example, the certification server 14 or other system entity may be configured to provision the EUICC 12 with new key material, etc. In one embodiment, this may be part of a security change/upgrade. The certification server 14 may advertise the availability or necessity of a profile update to other entities in the system (<i>e.g.</i> device vendor or regulatory domain operator). If the device 10 connects to seek provisioning, for example through the device vendor and/or the regulatory domain operator, the new key material is also installed either by one of those entities or by referring the device 10 to the certification server 14. If device has an active MNO profile, the MNO may be notified, which may cause device (when connected to MNO network) to be re-provisioned with new certification-level (or other level) key material (either by redirecting to the certification server 14 or other provisioning entity, or by provisioning through the MNO).</p><p id="p0072" num="0072">Reference will now be made to <figref idrefs="f0005">Figure 5</figref>, which shows, in flowchart form, another example method 400 of provisioning an EUICC. In this method 400, the device and, in particular, the EUICC, has a provisioning IMSI. That is, at some point during the certification or distribution process, the device was provisioned with an IMSI, such as a device-level IMSI, a regulatory domain IMSI, or a donor IMSI, that is not an active MNO IMSI. The IMSI may be identifiable as a provisioning IMSI on the basis that the MCC or MNC (or both) resolve to non-country codes or non-network carrier codes.</p><p id="p0073" num="0073">In operation 402, the mobile network receives a connection from an device that features a provisioning IMSI. Upon detecting the provisioning IMSI, the mobile network may be configured to block access to any services other than provisioning. For example, a name server may block access to any domain other than FQDNs associated with certification<!-- EPO <DP n="18"> --> servers or provisioning servers. In this example, the mobile network may automatically route the connection to a local provisioning server for the MNO.</p><p id="p0074" num="0074">In operation 404, the local MNO provisioning server may determine whether it can provision a profile to the device. This may include querying the certification server, or other servers, in some embodiments to authenticate the EUICC. If the local MNO provisioning server is able to provision the EUICC, then in operation 406 it provides an active MNO profile to the EUICC.</p><p id="p0075" num="0075">If it cannot provision the device, then the local MNO provisioning server may determine whether it can identify the regulatory domain to which the wireless device may be referred, as indicated by operation 408. If it can, perhaps based upon contextual data provided by the wireless device and/or information obtained from the certification server, the SIM vendor server, or other such servers, then the wireless device is redirected to the identified regulatory domain server, as indicated by operation 410. The regulatory domain may also be identifiable based upon the MCC and/or MNC of the provisioning IMSI.</p><p id="p0076" num="0076">If the regulatory domain is not identifiable, then the local MNO provisioning server may attempt to identify a device vendor to which to refer the device, as indicated by operation 412. This may be identifiable using the provisioning IMSI if the MCC and/or MNC correspond to a device vendor. It may also be identifiable based upon device identifying information provided by the device to the server. If the local MNO provisioning server is identify a suitable device vendor server to which to refer the device then it does so in operation 414. Otherwise, it may redirect the device to the certification server, as indicated by operation 416, whereupon the device/EUICC may initiate a provisioning process anew.</p><p id="p0077" num="0077">Note that many of these functions and determinations may be implemented on other servers and/or proxied.</p><p id="p0078" num="0078">It will be appreciated that some embodiments of the foregoing process 400 involve triggering a provisioning process based upon a device having a provisioning IMSI. It will further be appreciated that, in some cases, the IMSI itself may help determine the entity to provision the device.</p><p id="p0079" num="0079">Certain adaptations and modifications of the described embodiments can be made. Therefore, the above discussed embodiments are considered to be illustrative and not restrictive.</p></description><claims mxw-id="PCLM56976459" lang="EN" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-en-0001" num="0001"><claim-text>A method of provisioning an embedded universal integrated circuit card, EUICC, in a wireless device with an active profile, wherein the active profile corresponds to an mobile network operator, MNO, subscription for service and includes an active profile international mobile subscriber identity, IMSI, and key material, the EUICC storing a fully-qualified domain name, FQDN, that resolves to a server, the method comprising:
<claim-text>establishing an IP connection between the wireless device and the server;</claim-text>
<claim-text>receiving, at the server, a provisioning request from the wireless device;</claim-text>
<claim-text>querying a certification server database for a record associated with the EUICC;</claim-text>
<claim-text>identifying, based on the record, an MNO provisioning server for provisioning the EUICC;</claim-text>
<claim-text>redirecting the wireless device to the MNO provisioning server, from which the EUICC is provisioned the active profile.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method claimed in claim 1, wherein establishing an IP connection includes establishing a non-cellular connection between a network and the wireless device, and providing IP connectivity to the wireless device via the non-cellular connection.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method claimed in claim 2, wherein the non-cellular connection comprises one of a WiFi connection, an Ethernet connection, a Bluetooth connection, and a Zigbee connection.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method claimed in any one of claims 1 to 3, wherein the provisioning request comprises a request to access the FQDN.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method claimed in claim 4, wherein the server associated with the FQDN comprises a regulatory domain server associated with a regulatory domain operator, and wherein the regulatory domain operator governs a regulatory domain that includes the MNO or a plurality of mobile network operators including the MNO.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method claimed in claim 4, wherein the server associated with the FQDN comprises one of a regulatory domain server, a device installation server, and an MNO server.<!-- EPO <DP n="20"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method claimed in any one of claims 1 to 6, wherein the active profile comprises a new active profile, and wherein the wireless device includes an old active profile, and wherein the provisioning request comprises an MNO change command, and, optionally, the method further comprises receiving authorization from an old MNO server for a change to the new active profile with respect to the wireless device.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method claimed in any one of claims 1 to 7, wherein the provisioning request includes geo-location information, and wherein the identifying further includes identifying the MNO provisioning server based upon the geo-location information, and, optionally, wherein the geo-location information includes one of GPS data and cellular network identifier data.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A method of provisioning an embedded universal integrated circuit card, EUICC, in a wireless device with an active profile, wherein an active profile corresponds to an mobile network operator, MNO, subscription for service and includes an active profile international mobile subscriber identity, IMSI, and key material, the EUICC storing a current IMSI, the method comprising:
<claim-text>receiving, at a server, a cellular connection from the wireless device having the current IMSI;</claim-text>
<claim-text>determining that the current IMSI is a provisioning IMSI and not an active profile IMSI; and</claim-text>
<claim-text>redirecting the wireless device to a provisioning server, wherein the provisioning server comprises one of a certification server, a device provisioning server, a regulatory domain provisioning server, and an MNO provisioning server.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method claimed in claim 9, wherein detecting that the current IMSI is a provisioning IMSI comprises determining that the mobile network code, MNC, corresponds to a regulatory domain, a device manufacturer, or a SIM vendor, and not an MNO.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method claimed in claim 9 or claim 10, wherein detecting that the current IMSI is a provisioning IMSI comprises determining that the mobile country code, MCC, is a provisioning country code.<!-- EPO <DP n="21"> --></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method claimed in any one of claims 9 to 11, wherein redirecting includes providing the device with IP connectivity and providing the device with a fully-qualified domain name for the provisioning server.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A certification server, comprising:
<claim-text>a processor;</claim-text>
<claim-text>memory storing a plurality of records, each record storing a respective embedded universal integrated circuit card, EUICC, identifier and an associated certificate; and</claim-text>
<claim-text>an authentication application stored in memory that, when executed, configures the processor to<br/>
receive a query from a server regarding a wireless device containing an<br/>
EUICC, the query including an identifier associated with the EUICC, select one of the plurality of records based on the received identifier matching<br/>
the respective EUICC identifier, and<br/>
send a reply to the server, wherein the reply includes information regarding an mobile network operator, MNO, provisioning server associated with the EUICC.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A regulatory domain server operated by a regulatory domain operator for a regulatory domain, wherein the regulatory domain includes a plurality of mobile network operators, MNO, each having a public land mobile network, the regulatory domain server comprising:
<claim-text>a processor; and</claim-text>
<claim-text>a memory storing records for embedded universal integrated circuit cards, EUICCs,<br/>
associated with wireless devices;</claim-text>
<claim-text>wherein the processor is configured to<br/>
receive a provisioning request from a wireless device, the provisioning request including an EUICC identifier,<br/>
determine whether the EUICC identifier matches one of the records stored in the memory and,<br/>
<!-- EPO <DP n="22"> -->if so, redirect the wireless device to a provisioning server for one of the MNOs within the regulatory domain based on the contents of the record matching the EUICC identifier, or,<br/>
if not, query another server for provisioning information regarding the wireless device and receive a response thereto and redirect the wireless device based upon the response.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The regulatory domain server claimed in claim 14, wherein the another server comprises a certification server.</claim-text></claim></claims><drawings mxw-id="PDW16667239" load-source="patent-office"><!-- EPO <DP n="23"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="142" he="181" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="162" he="141" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="162" he="141" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="151" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="158" he="194" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="157" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="161" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
