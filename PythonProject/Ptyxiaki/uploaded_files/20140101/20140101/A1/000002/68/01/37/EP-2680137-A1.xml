<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680137-A1" country="EP" doc-number="2680137" kind="A1" date="20140101" family-id="45381248" file-reference-id="301915" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549493" ucid="EP-2680137-A1"><document-id><country>EP</country><doc-number>2680137</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11869795-A" is-representative="YES"><document-id mxw-id="PAPP154823416" load-source="docdb" format="epo"><country>EP</country><doc-number>11869795</doc-number><kind>A</kind><date>20110727</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP205140157" load-source="docdb" format="original"><country>EP</country><doc-number>11869795.2</doc-number><date>20110727</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445273" ucid="CN-2011077680-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2011077680</doc-number><kind>W</kind><date>20110727</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2032328172" load-source="docdb">G06F   9/445       20060101AFI20140214BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2032328173" load-source="docdb">G06F   9/44        20060101ALI20140214BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2032328174" load-source="docdb">G06F  11/14        20060101ALI20140214BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2007295666" load-source="docdb" scheme="CPC">G06F   8/65        20130101 LA20140205BHEP        </classification-cpc><classification-cpc mxw-id="PCL2062882396" load-source="docdb" scheme="CPC">G06F   9/4401      20130101 LI20140321BHEP        </classification-cpc><classification-cpc mxw-id="PCL2062882397" load-source="docdb" scheme="CPC">G06F   9/44505     20130101 FI20140313BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180963" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR VERWALTUNG VON BIOS-KONFIGURATIONSDATEN EINES BASISEIN-/AUSGABESYSTEM</invention-title><invention-title mxw-id="PT132180964" lang="EN" load-source="patent-office">METHOD AND SYSTEM FOR MANAGING BIOS CONFIGURATION DATA OF BASIC INPUT/OUTPUT SYSTEM</invention-title><invention-title mxw-id="PT132180965" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME DE GESTION DE DONNÉES DE CONFIGURATION DE SYSTÈME D'ENTRÉE/SORTIE DE BASE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918137643" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918149354" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD</last-name></addressbook></applicant><applicant mxw-id="PPAR918978830" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd</last-name><iid>101353631</iid><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918149265" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TAO LIN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918142094" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TAO, LIN</last-name></addressbook></inventor><inventor mxw-id="PPAR918981409" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TAO, LIN</last-name><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918146079" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LI YI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918163813" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LI, YI</last-name></addressbook></inventor><inventor mxw-id="PPAR918982479" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LI, YI</last-name><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918156183" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>WANG FEIZHOU</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918148850" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>WANG, FEIZHOU</last-name></addressbook></inventor><inventor mxw-id="PPAR918986325" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>WANG, FEIZHOU</last-name><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918169520" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>LI HUADONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918154823" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>LI, HUADONG</last-name></addressbook></inventor><inventor mxw-id="PPAR918989277" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>LI, HUADONG</last-name><address><street>Huawei Administration Building Bantian Longgang District</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918983357" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Pfenning, Meinig &amp; Partner GbR</last-name><iid>101244111</iid><address><street>Theresienhöhe 13</street><city>80339 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2011077680-W"><document-id><country>CN</country><doc-number>2011077680</doc-number><kind>W</kind><date>20110727</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2013013396-A1"><document-id><country>WO</country><doc-number>2013013396</doc-number><kind>A1</kind><date>20130131</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548865350" load-source="docdb">AL</country><country mxw-id="DS548896691" load-source="docdb">AT</country><country mxw-id="DS548868756" load-source="docdb">BE</country><country mxw-id="DS548842982" load-source="docdb">BG</country><country mxw-id="DS548884785" load-source="docdb">CH</country><country mxw-id="DS548868757" load-source="docdb">CY</country><country mxw-id="DS548805316" load-source="docdb">CZ</country><country mxw-id="DS548865351" load-source="docdb">DE</country><country mxw-id="DS548869090" load-source="docdb">DK</country><country mxw-id="DS548869091" load-source="docdb">EE</country><country mxw-id="DS548806021" load-source="docdb">ES</country><country mxw-id="DS548842983" load-source="docdb">FI</country><country mxw-id="DS548842984" load-source="docdb">FR</country><country mxw-id="DS548865352" load-source="docdb">GB</country><country mxw-id="DS548869092" load-source="docdb">GR</country><country mxw-id="DS548865353" load-source="docdb">HR</country><country mxw-id="DS548805317" load-source="docdb">HU</country><country mxw-id="DS548884786" load-source="docdb">IE</country><country mxw-id="DS548869093" load-source="docdb">IS</country><country mxw-id="DS548842985" load-source="docdb">IT</country><country mxw-id="DS548869094" load-source="docdb">LI</country><country mxw-id="DS548842986" load-source="docdb">LT</country><country mxw-id="DS548896692" load-source="docdb">LU</country><country mxw-id="DS548842987" load-source="docdb">LV</country><country mxw-id="DS548842988" load-source="docdb">MC</country><country mxw-id="DS548896693" load-source="docdb">MK</country><country mxw-id="DS548896702" load-source="docdb">MT</country><country mxw-id="DS548896703" load-source="docdb">NL</country><country mxw-id="DS548884787" load-source="docdb">NO</country><country mxw-id="DS548896704" load-source="docdb">PL</country><country mxw-id="DS548806026" load-source="docdb">PT</country><country mxw-id="DS548871657" load-source="docdb">RO</country><country mxw-id="DS548806027" load-source="docdb">RS</country><country mxw-id="DS548896705" load-source="docdb">SE</country><country mxw-id="DS548865354" load-source="docdb">SI</country><country mxw-id="DS548884796" load-source="docdb">SK</country><country mxw-id="DS548884797" load-source="docdb">SM</country><country mxw-id="DS548869095" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670162" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Disclosed in the present invention are a method and a system for managing BIOS configuration data of a basic input/output system. The method includes: reading a BIOS program code, and executing a BIOS program; when executing the BIOS program, executing different code segments in the BIOS program according to read BIOS configuration data; and when new BIOS configuration data is required for executing the BIOS program, using a value in a new storage area as the new BIOS configuration data. Through the solution provided by the present invention, it can be ensured that, after the BIOS program is upgraded and when the number of configuration items is increased, current BIOS configuration data in a storage medium is still read effectively.<img id="iaf01" file="imgaf001.tif" wi="106" he="81" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499535" lang="EN" source="EPO" load-source="docdb"><p>Disclosed in the present invention are a method and a system for managing BIOS configuration data of a basic input/output system. The method includes: reading a BIOS program code, and executing a BIOS program; when executing the BIOS program, executing different code segments in the BIOS program according to read BIOS configuration data; and when new BIOS configuration data is required for executing the BIOS program, using a value in a new storage area as the new BIOS configuration data. Through the solution provided by the present invention, it can be ensured that, after the BIOS program is upgraded and when the number of configuration items is increased, current BIOS configuration data in a storage medium is still read effectively.</p></abstract><description mxw-id="PDES63955592" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The present invention relates to the technical field of communications devices, and in particular, to a method and a system for managing BIOS configuration data of a basic input/output system.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">In a server or personal computer, a BIOS (Base Input/Output System), basic input/output system) is a program solidified on a system motherboard, which is usually referred to as a BIOS program. When the BIOS motherboard is started and a CPU (Central Processing Unit, central processing unit) executes the BIOS program, different code segments in the BIOS program are executed according to read BIOS configuration data stored in a CMOS (Complementary Metal Oxide Semiconductor, complementary metal oxide semiconductor) storage medium, thereby finally implementing basic configuration of the basic input/output system. The CMOS storage medium is a readable and writable RAM (Random Access Memory, random access memory) on the motherboard and is powered by a motherboard battery, to ensure that after the system is powered down, current stored BIOS configuration data of a user is not lost, so that the CPU utilizes the BIOS configuration data set by the user to execute the BIOS program, thereby implementing the basic configuration of the basic input/output system.</p><p id="p0003" num="0003">When different manufacturers dynamically allocate a storage area to BIOS configuration data corresponding to each version of BIOS programs, so that each version of the BIOS program corresponds to the BIOS configuration data one by one. For example, when a BIOS program of version A is executed, different codes in the BIOS program may be executed according to BIOS configuration data corresponding to the version; when a BIOS program of version B is executed, different codes in the BIOS program may be executed according to BIOS configuration data corresponding to the version. That is to say, the BIOS program is coupled with the BIOS configuration data.</p><p id="p0004" num="0004">In a case that the system motherboard needs to adapt to a new-typed CPU, identify new hardware or solve some special failure problems in the telecommunication field, the BIOS program<!-- EPO <DP n="2"> --> needs to be upgraded to adapt to requirements of new hardware and software. However, because the BIOS program is coupled with the BIOS configuration data, when a BIOS program of a new version is executed, if a new configuration item is added, the layout of current BIOS configuration data is destroyed, so that the current BIOS configuration data cannot be normally invoked and reconfiguration is required, so a workload is extremely heavy.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0005" num="0005">In view of this, the present invention provides a method and a system for managing BIOS configuration data of a basic input/output system, so as to ensure that, after a BIOS program is upgraded and when the number of configuration items is increased, current BIOS configuration data in a storage medium can still be read effectively. Specific solutions are as follows.</p><p id="p0006" num="0006">A method for managing BIOS configuration data of a basic input/output system includes:
<ul><li>reading a BIOS program code and executing a BIOS program;</li><li>when executing the BIOS program, executing different code segments in the BIOS program according to read BIOS configuration data, where the BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium and the fixed storage area is independent of a storage area of the BIOS program code; and</li><li>when new BIOS configuration data is required for executing the BIOS program, using a value in a new storage area as the new BIOS configuration data, where the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value.</li></ul></p><p id="p0007" num="0007">Accordingly, an embodiment of the present invention further provides a system for managing BIOS configuration data of a basic input/output system, including:
<ul><li>a central processing unit, configured to read a BIOS program code and execute a BIOS program;</li><li>when executing the BIOS program, execute different code segments in the BIOS program according to read BIOS configuration data, where the BIOS configuration data is stored in a fixed area of a non-volatile storage medium and the fixed area is independent of a storage area of the BIOS program code; and</li><li>when new BIOS configuration data is required for executing the BIOS program, use a value in a new storage area as the new BIOS configuration data, where the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of<!-- EPO <DP n="3"> --> the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value;</li><li>the non-volatile storage medium, configured to store, in the fixed area, the BIOS configuration data which is required for executing the different code segments in the BIOS program; and</li><li>a BIOS program storage medium, configured to store the BIOS program code.</li></ul></p><p id="p0008" num="0008">Compared with an existing manner of dynamically storing BIOS configuration data, in the present invention, BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium, where the fixed storage area is independent of a storage area of a BIOS program code; when new BIOS configuration data is required for executing an upgraded BIOS program, a value in a new storage area independent of a current BIOS configuration area is used as the new BIOS configuration data. Therefore, in a manner of fixedly storing the BIOS configuration data and allocating a pre-agreed area to a newly added configuration item, after the BIOS program is upgraded and when the number of configuration items is increased, it can be ensured that the current BIOS configuration data in the storage medium is still read effectively.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF DRAWINGS</b></heading><p id="p0009" num="0009">To describe the technical solutions in the embodiments of the present invention or in the prior art more clearly, the following briefly introduces the accompanying drawings required for describing the embodiments or the prior art. Apparently, the accompanying drawings in the following description show merely some embodiments of the present invention, and persons of ordinary skill in the art may still derive other drawings from the accompanying drawings without creative efforts.</p><p id="p0010" num="0010"><figref idrefs="f0001">FIG. 1</figref> is a schematic structural diagram of a configuration data storage manner according to an embodiment of the present invention;</p><p id="p0011" num="0011"><figref idrefs="f0001">FIG. 2</figref> is a first flow chart of a method for managing BIOS configuration data of a basic input/output system according to an embodiment of the present invention;</p><p id="p0012" num="0012"><figref idrefs="f0002">FIG. 3</figref> is another schematic structural diagram of a configuration data storage manner according to an embodiment of the present invention;</p><p id="p0013" num="0013"><figref idrefs="f0003">FIG. 4</figref> is a second flow chart of a method for managing BIOS configuration data of a basic input/output system according to an embodiment of the present invention; and</p><p id="p0014" num="0014"><figref idrefs="f0004">FIG. 5</figref> is a schematic structural diagram of a system for managing BIOS configuration data of a basic input/output system according to an embodiment of the present invention.<!-- EPO <DP n="4"> --></p><heading id="h0005"><b>DESCRIPTION OF EMBODIMENTS</b></heading><p id="p0015" num="0015">In an actual application, a system motherboard of a server or a personal computer needs to adapt to a new-typed CPU, identify new hardware or solve some special failure problems in the telecommunication field, so that a BIOS needs to be upgraded to adapt to requirements of new hardware and software. To ensure that, after the BIOS is upgraded and when the number of configuration items is increased, current configuration data in a storage medium can still be read effectively, embodiments of the present invention provide a method and a system for managing BIOS configuration data of a basic input/output system.</p><p id="p0016" num="0016">First, a method for managing BIOS configuration data of a basic input/output system provided by the present invention is described in the following.</p><p id="p0017" num="0017">A method for managing BIOS configuration data of a basic input/output system includes:
<ul><li>reading a BIOS program code and executing a BIOS program;</li><li>when executing the BIOS program, executing different code segments in the BIOS program according to read BIOS configuration data, where the BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium and the fixed storage area is independent of a storage area of the BIOS program code; and</li><li>when new BIOS configuration data is required for executing the BIOS program, using a value in a new storage area as the new BIOS configuration data, where the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value.</li></ul></p><p id="p0018" num="0018">Compared with an existing manner of dynamically storing BIOS configuration data, in the present invention, BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium, where the fixed storage area is independent of a storage area of a BIOS program code; when new BIOS configuration data is required for executing an upgraded BIOS program, a value in a new storage area independent of a current BIOS configuration area is used as the new BIOS configuration data. Therefore, in a manner of fixedly storing the BIOS configuration data and allocating a pre-agreed area to a newly added configuration item, after the BIOS program is upgraded and when the number of configuration items is increased, it can be ensured that the current BIOS configuration data in the storage medium is still read effectively.</p><p id="p0019" num="0019">In the following, the technical solutions of the embodiments of the present invention are described clearly and completely with reference to the accompanying drawings in the embodiments of the present invention. Apparently, the described embodiments are only a part rather than all of the<!-- EPO <DP n="5"> --> embodiments of the present invention. All other embodiments obtained by persons of ordinary skill in the art based on the embodiments of the present invention without creative efforts shall fall within the protection scope of the present invention.</p><p id="p0020" num="0020">The method for managing BIOS configuration data of a basic input/output system provided by the present invention is described in the following by using an example where a BIOS program needs to be upgraded to identify new hardware.</p><p id="p0021" num="0021">In this embodiment, it is assumed that a version of the BIOS program is version 01, and after a BIOS motherboard is started, a CPU executes code segments of the BIOS program that correspond to configuration of device A, device B, and device C in sequence by reading BIOS configuration data in storage areas in a storage medium: configuration item 1, configuration item 2, and configuration item 3, so as to implement basic configuration of device A, device B, and device C. After the BIOS program is upgraded to version 02, different code segments in the BIOS program need to be executed to implement the basic configuration of device A, device B, device C, and device D in sequence. That is to say, after the BIOS program is upgraded from version 01 to version 02, the number of configuration items is increased.</p><p id="p0022" num="0022">In the prior art, the BIOS configuration data is allocated dynamically, so that the BIOS program and the BIOS configuration data are in one-to-one correspondence. When the BIOS program is upgraded from version 01 to version 02, the number of configuration items is increased, and a previous storage layout of the BIOS configuration data may be destroyed, so that when the BIOS program of version 02 is executed, the BIOS configuration data in the storage medium cannot be read effectively, and execution of different code segments of the BIOS program finally leads to disorder of a configuration function.</p><p id="p0023" num="0023">In this embodiment, a non-volatile storage medium relatively independent of a storage area of a BIOS program code is divided into multiple storage areas, BIOS configuration data required for executing the BIOS program is stored in corresponding fixed areas in the non-volatile storage medium in sequence according to preset order, and a value of an idle area storing no BIOS configuration data is set to a pre-agreed default value. It should be noted that, after the BIOS program is upgraded so that a configuration item is newly added, when a BIOS program of a new version is executed, original BIOS configuration data and newly added BIOS configuration data needs to be read effectively, so a function of the newly added configuration item needs to use the pre-agreed default value of the idle area as a default value the newly added configuration item, so as to ensure that the BIOS configuration data in the storage medium remains unchanged and can be read effectively after the BIOS program is upgraded.</p><p id="p0024" num="0024">It can be understood that, when storage of BIOS configuration data is performed, the storage can be performed according to a pre-agreed address, so as to ensure fixed storage of the<!-- EPO <DP n="6"> --> BIOS configuration data.</p><p id="p0025" num="0025">As shown in <figref idrefs="f0001">FIG. 1</figref>, in a storage structure of BIOS configuration data corresponding to a BIOS program of version 01, a fixed starting position corresponding to configuration item 1 is 00, a fixed starting position corresponding to configuration item 2 is 02, and a fixed starting position corresponding to configuration item 3 is 04; a pre-agreed default value is stored in an idle storage area. For example, the default value is 0.</p><p id="p0026" num="0026">After the BIOS program is upgraded from version 01 to version 02 and when the number of configuration items is increased, through the method for managing the BIOS configuration data of the basic input/output system provided by the embodiment of the present invention, the BIOS configuration data currently stored in the non-volatile storage medium can be read effectively. When a BIOS program code of version 02 is read and the BIOS program is executed, as shown in <figref idrefs="f0001">FIG. 2</figref>, the method may include:</p><p id="p0027" num="0027">S101: Read the BIOS configuration data stored in the non-volatile storage medium in sequence.</p><p id="p0028" num="0028">When the BIOS program is executed, different code segments of the program need to be executed according to the read corresponding BIOS configuration data, thereby finally implementing basic configuration of each basic input/output system. Because a storage area of the BIOS configuration data is relatively independent of a storage area of the BIOS program code, after the BIOS program is upgraded from version 01 to version 02, BIOS configuration data in the storage medium corresponding to version 01 remains unchanged. Therefore, when the BIOS program of version 02 is executed, original stored BIOS configuration data is first read in sequence.</p><p id="p0029" num="0029">S102: Use a default value in a new storage area as BIOS configuration data corresponding to a newly added configuration item.</p><p id="p0030" num="0030">After the BIOS program is upgraded from version 01 to version 02, the number of configuration items is increased, so an idle area storing no BIOS configuration data, unoccupied area 1, is used as a storage area of the BIOS configuration data corresponding to the newly added configuration item, so as to ensure that before and after the upgrading, a layout of the original BIOS configuration data in the storage medium remains unchanged, and a fixed storage area is allocated to the newly added configuration item. It can be understood that, a default function configuration value of the newly added configuration item is the same as a default value stored in the unoccupied area 1, so as to implement effective initial configuration of the newly added configuration item.</p><p id="p0031" num="0031">S103: Execute different code segments in the BIOS program of version 02 according to the read BIOS configuration data.</p><p id="p0032" num="0032">When the BIOS program of version 02 is executed, according to the read BIOS configuration data in configuration item 1, configuration item 2, configuration item 3, and<!-- EPO <DP n="7"> --> unoccupied area 1, the different code segments in the BIOS program are executed in sequence, so as to implement basic configuration of device A, device B, device C, and device D.</p><p id="p0033" num="0033">It can be understood that, the order for executing step S101 and step S102 is not limited to the order described in this embodiment. For example, step S102 may be executed first and then S101 is executed, or step S101 and step S102 are executed simultaneously, which are all reasonable.</p><p id="p0034" num="0034">In the embodiment of the present invention, the BIOS configuration data is stored in the fixed storage area of the non-volatile storage medium, where the fixed storage area is independent of the storage area of the BIOS program code; when new BIOS configuration data is required for executing the upgraded BIOS program, a value in a new storage area independent of the current BIOS configuration area is used as the new BIOS configuration data. Therefore, in a manner of fixedly storing the BIOS configuration data and allocating a pre-agreed area to a newly added configuration item, after the BIOS program is upgraded and when the number of configuration items is increased, it can be ensured that the current BIOS configuration data is still read effectively.</p><p id="p0035" num="0035">It should be noted that, in a case that the number of configuration items is decreased after a BIOS program is upgraded, BIOS configuration data in a subtracted configuration item is retained, so as to prevent storage locations of other BIOS configuration data from shifting, and ensure that storage areas of the BIOS configuration data are fixed and unchanged.</p><p id="p0036" num="0036">In an actual application, BIOS configuration data in a non-volatile storage medium may be invalid for reasons such as virus intrusion, and using the invalid BIOS configuration data to configure the basic input/output system leads to function disorder. In order to ensure that, on the premise that current BIOS configuration data is valid, the current BIOS configuration data can be read effectively when the BIOS program is upgraded and the number of configuration items is increased, another embodiment of the present invention provides a method for managing of BIOS configuration data of a basic input/output system.</p><p id="p0037" num="0037">In this embodiment, in a storage area of the non-volatile storage medium, not only is BIOS configuration data stored in a fixed location, but also a check value Checksum for identifying whether the current BIOS configuration data is readable is stored. The check value Checksum may be obtained by a CPU combining all bytes of stored BIOS configuration data through a series of arithmetic or logic operations. When normal modification, such as user modification, is performed on the BIOS configuration data in the non-volatile storage medium, the CPU recalculates the check value Checksum and performs updating processing. The CPU fails to sense abnormal modification through a communication interface and cannot recalculate the check value to rewrite the currently stored check value Checksum.</p><p id="p0038" num="0038">Still it is assumed that the version of the BIOS program is version 01, and after a BIOS motherboard is started, the CPU executes code segments of the BIOS program that correspond to<!-- EPO <DP n="8"> --> configuration of device A, device B, and device C in sequence by reading the storage areas in the non-volatile storage medium: configuration item 1, configuration item 2, and configuration item 3, so as to implement basic configuration of device A, device B, and device C. After the BIOS program is upgraded to version 02, different code segments in the BIOS program need to be executed to implement basic configuration of device A, device B, device C, and device D in sequence. That is to say, after the BIOS program is upgraded from version 01 to version 02, the number of configuration items is increased.</p><p id="p0039" num="0039">A storage structure of the check value Checksum and the configuration items in the non-volatile storage medium is shown in <figref idrefs="f0002">FIG. 3</figref>. As shown in <figref idrefs="f0003">FIG. 4</figref>, the method for managing BIOS configuration data of a basic input/output system provided by this embodiment may include:</p><p id="p0040" num="0040">S201: Calculate a current check value Checksum of BIOS configuration data stored in the non-volatile storage medium.</p><p id="p0041" num="0041">When the BIOS program of version 02 is executed, a check value Checksum corresponding to current BIOS configuration data is calculated first to perform validity determination of subsequent BIOS configuration data. A calculation method of the check value Checksum may still be that: the CPU combines all the bytes of the stored BIOS configuration data through a series of arithmetic or logic operations.</p><p id="p0042" num="0042">S202: Determine whether the current check value Checksum is equal to a check value Checksum stored in the non-volatile storage medium; if no, execute step S203; if yes, directly execute step S204.</p><p id="p0043" num="0043">The calculated current check value Checksum is compared with the check value Checksum stored in the non-volatile storage medium, if equal, it is indicated that the BIOS configuration data in the storage medium is not abnormally modified and is in a valid state; and if not equal, it is indicated that the BIOS configuration data in the storage medium is abnormally modified so that the BIOS configuration data in the storage medium is in an invalid state.</p><p id="p0044" num="0044">S203: Write initial default values of the BIOS configuration data into the non-volatile storage medium in sequence, and update the stored check value Checksum.</p><p id="p0045" num="0045">When it is determined that the BIOS configuration data in the storage medium is in the invalid state, configuration items in the storage medium need to be initialized, so that the BIOS configuration data is the initial default values. In addition, a check value Checksum of the initialized BIOS configuration data needs to be calculated, so as to update data in a check value area in the storage medium.</p><p id="p0046" num="0046">S204: Read, in sequence, the BIOS configuration data stored in the non-volatile storage medium.</p><p id="p0047" num="0047">S205: Use a default value in a new storage area as BIOS configuration data<!-- EPO <DP n="9"> --> corresponding to a newly added configuration item.</p><p id="p0048" num="0048">S206: Execute different code segments in the BIOS program of version 02 according to the read BIOS configuration data.</p><p id="p0049" num="0049">Step S204 to step S206 are similar to step S101 to step S103 of the foregoing embodiment, which are not repeated here.</p><p id="p0050" num="0050">In this embodiment, in the storage area of the non-volatile storage medium, not only is the BIOS configuration data stored in a fixed location, but also a check value Checksum for identifying whether the current BIOS configuration data is readable is stored. In a manner of adding the check value in the storage medium, before the configuration data is read, the validity of the current BIOS configuration data is determined and analyzed. In this way, on the premise that the current BIOS configuration data is valid, it is ensured that the current BIOS configuration data can be read effectively in the case that the number of configuration items is increased after the BIOS program is upgraded.</p><p id="p0051" num="0051">It should be noted that, the non-volatile storage medium may be a CMOS memory. The CMOS requires a specific power supply battery and the power supply battery is affected by factors such as temperature, life, and bad contact. Therefore, preferably, the non-volatile storage medium may be an EEPROM (Electrically Erasable Programmable Read-Only Memory, electrically erasable programmable read-only memory) mounted to a SMBUS (System Management Bus, system management bus) controller of a south bridge of the system, or a specific configuration area is marked off on a storage medium where the BIOS program is located, to store the BIOS configuration data. It can be understood that, the storage medium where the BIOS configuration data is located is relatively independent of a storage area where the BIOS program is located, so as to ensure that the BIOS configuration data does not change along with the upgrading of the BIOS program.</p><p id="p0052" num="0052">The Embodiments in the present specification are described in a progressive manner. Each embodiment focuses on its difference from other embodiments, and for the same or similar parts of the embodiments, reference may be made to each other. The apparatus disclosed in the embodiments corresponds to the method disclosed in the embodiments, so description of the apparatus is relatively simple. For a related part, reference may be made to description of the method part.</p><p id="p0053" num="0053">Professional persons may further realize that, the units and the steps of algorithms of each example described in combination with the embodiments disclosed in this document may be implemented by electronic hardware, computer software, or a combination of the two. In order to illustrate interchangeability of the hardware and the software, the compositions and steps of the examples are generally described according to functions in the foregoing description. Whether these<!-- EPO <DP n="10"> --> functions are executed in a manner of hardware or software depends upon a particular application and design constraint conditions of the technical solution. Professional technicians can use different methods to implement the described functions for each particular application, but it should not be deemed that such implementation goes beyond the scope of the present invention.</p><p id="p0054" num="0054">Accordingly, an embodiment of the present invention further provides a system for managing BIOS configuration data of a basic input/output system, which may include:
<ul><li>a central processing unit, configured to read a BIOS program code and execute a BIOS program,</li><li>when executing the BIOS program, execute different code segments in the BIOS program according to read BIOS configuration data, where the BIOS configuration data is stored in a fixed area of a non-volatile storage medium and the fixed area is independent of a storage area of the BIOS program code, and</li><li>when new BIOS configuration data is required for executing the BIOS program, use a value in a new storage area as the new BIOS configuration data, where the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value;</li><li>the non-volatile storage medium, configured to store, in the fixed area, the BIOS configuration data which is required for executing the different code segments in the BIOS program; and</li><li>a BIOS program storage medium, configured to store the BIOS program code.</li></ul></p><p id="p0055" num="0055">Compared with the existing manner of dynamically storing BIOS configuration data, in the present invention, BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium, where the fixed storage area is independent of a storage area of a BIOS program code; when new BIOS configuration data is required for executing an upgraded BIOS program, a value in a new storage area independent of a current BIOS configuration area is used as the new BIOS configuration data. Therefore, in a manner of fixedly storing the BIOS configuration data and allocating a pre-agreed area to a newly added configuration item, after the BIOS program is upgraded and when the number of configuration items is increased, it can be ensured that the current BIOS configuration data is still read effectively.</p><p id="p0056" num="0056">The non-volatile storage medium is specifically configured to:
<ul><li>Store the BIOS configuration data, which is required for executing the different code segments in the BIOS program, in multiple fixed areas in the non-volatile storage medium in sequence according to preset order; and</li><li>set a value of an area storing no BIOS configuration data to a pre-agreed default value.</li></ul><!-- EPO <DP n="11"> --></p><p id="p0057" num="0057">Further, in order to ensure that, on the premise that the current BIOS configuration data is valid, the current BIOS configuration data can be read effectively when the BIOS program is upgraded and the number of configuration items is increased, the non-volatile storage medium is specifically configured to:
<ul><li>store, in the fixed area, the BIOS configuration data which is required for executing the different code segments in the BIOS program, and store a check value Checksum corresponding to the BIOS configuration data.</li></ul></p><p id="p0058" num="0058">Accordingly, the central processing unit is specifically configured to:
<ul><li>calculate a current check value Checksum of the BIOS configuration data stored in the non-volatile storage medium;</li><li>determine whether the current check value Checksum is equal to a check value Checksum stored in the non-volatile storage medium;</li><li>if no, write default values of the BIOS configuration data into corresponding fixed areas in the non-volatile storage medium in sequence, and after updating the stored check value Checksum, read the BIOS program code and execute the BIOS program; and</li><li>if yes, read the BIOS program code and execute the BIOS program.</li></ul></p><p id="p0059" num="0059">In this embodiment, in the storage area of the non-volatile storage medium, not only is the BIOS configuration data stored in a fixed location, but also a check value Checksum for identifying whether the current BIOS configuration data is readable is stored. In a manner of adding the check value in the storage medium, before the configuration data is read, the validity of the current BIOS configuration data is determined and analyzed. In this way, on the premise that the current BIOS configuration data is valid, it is ensured that the current BIOS configuration data can be read effectively in the case that the number of configuration items is increased after the BIOS program is upgraded.</p><p id="p0060" num="0060">In an actual application, the non-volatile storage medium is a CMOS memory. In order to prevent the non-volatile storage medium from being affected by factors such as temperature, bad contact of a power supply battery, and life, as shown in <figref idrefs="f0004">FIG. 5</figref>, the non-volatile storage medium may be an EEPROM (Electrically Erasable Programmable Read-Only Memory, electrically erasable programmable read-only memory) mounted to a system management bus SMBUS controller of a south bridge opposite a north bridge. When executing the BIOS program, the CPU may access the EEPROM through the SMBUS.</p><p id="p0061" num="0061">It can be understood that, in a case that it is ensured that the BIOS program code and the BIOS configuration data are completely separated from each other, the non-volatile storage medium may also be a dedicated area for the BIOS configuration data in a storage medium where the BIOS program is located.<!-- EPO <DP n="12"> --></p><p id="p0062" num="0062">Steps of the method or algorithm described in combination with the embodiments disclosed in this document may be directly implemented by using hardware, a software module executed by a processor, or a combination of the two. The software module may be placed in a random access memory (RAM), a memory, a read-only memory (ROM), an electrically programmable ROM, an electrically erasable programmable ROM, a register, a hard disk, a removable magnetic disk, a CD-ROM, or any storage medium of another form well-known in the technical field.</p><p id="p0063" num="0063">The foregoing descriptions of the disclosed embodiments enable persons skilled in the art implement or use the present invention. Various modifications of the embodiments are apparent to persons skilled in the art, and the general principle defined in this document can be implemented in other embodiments without departing from the spirit or scope of the present invention. Therefore, the present invention is not limited to these embodiments described herein, but should conform to the widest scope consistent with the principle and novel features disclosed in this document.</p></description><claims mxw-id="PCLM56976510" lang="EN" load-source="patent-office"><!-- EPO <DP n="13"> --><claim id="c-en-0001" num="0001"><claim-text>A method for managing BIOS configuration data of a basic input/output system, comprising:
<claim-text>reading a BIOS program code and executing a BIOS program;</claim-text>
<claim-text>when executing the BIOS program, executing different code segments in the BIOS program according to read BIOS configuration data, wherein the BIOS configuration data is stored in a fixed storage area of a non-volatile storage medium and the fixed storage area is independent of a storage area of the BIOS program code; and</claim-text>
<claim-text>when new BIOS configuration data is required for executing the BIOS program, using a value in a new storage area as the new BIOS configuration data, wherein the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein the storing the BIOS configuration data in the fixed storage area of the non-volatile storage medium is specifically:
<claim-text>storing the BIOS configuration data, which is required for executing the different code segments in the BIOS program, in multiple fixed areas in the non-volatile storage medium in sequence according to preset order; and</claim-text>
<claim-text>setting a value of an area storing no BIOS configuration data to the pre-agreed default value.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 1, wherein before the reading the BIOS program code and executing the BIOS program, the method further comprises:
<claim-text>calculating a current check value Checksum of the BIOS configuration data stored in the non-volatile storage medium;</claim-text>
<claim-text>determining whether the current check value Checksum is equal to a check value Checksum stored in the non-volatile storage medium; and</claim-text>
<claim-text>if no, writing default values of the BIOS configuration data into corresponding fixed areas in the non-volatile storage medium in sequence, and updating the stored check value Checksum.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 1, wherein BIOS configuration data that is not read when the BIOS program is executed is retained.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A system for managing BIOS configuration data of a basic input/output system, comprising:
<claim-text>a central processing unit, configured to read a BIOS program code and execute a BIOS program,</claim-text>
<claim-text>when executing the BIOS program, execute different code segments in the BIOS program<!-- EPO <DP n="14"> --> according to read BIOS configuration data, wherein the BIOS configuration data is stored in a fixed area of a non-volatile storage medium and the fixed area is independent of a storage area of the BIOS program code, and</claim-text>
<claim-text>when new BIOS configuration data is required for executing the BIOS program, use a value in a new storage area as the new BIOS configuration data, wherein the new storage area is an area independent of the storage area of the current BIOS configuration data and the storage area of the BIOS program code, and the value in the new storage area is a pre-agreed default configuration value;</claim-text>
<claim-text>the non-volatile storage medium, configured to store, in the fixed area, the BIOS configuration data which is required for executing the different code segments in the BIOS program; and</claim-text>
<claim-text>a BIOS program storage medium, configured to store the BIOS program code.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The system according to claim 5, wherein the non-volatile storage medium is specifically configured to:
<claim-text>store the BIOS configuration data, which is required for executing the different code segments in the BIOS program, in multiple fixed areas in the non-volatile storage medium in sequence according to preset order; and</claim-text>
<claim-text>set a value of an area storing no BIOS configuration data to the pre-agreed default value.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The system according to claim 5, wherein<br/>
the non-volatile storage medium is specifically configured to:
<claim-text>store, in the fixed area, the BIOS configuration data which is required for executing the different code segments in the BIOS program, and store a check value Checksum corresponding to the BIOS configuration data; and</claim-text>
<claim-text>accordingly, the central processing unit is specifically configured to:
<claim-text>calculate a current check value Checksum of the BIOS configuration data stored in the non-volatile storage medium;</claim-text>
<claim-text>determine whether the current check value Checksum is equal to the check value Checksum stored in the non-volatile storage medium;</claim-text>
<claim-text>if no, write default values of the BIOS configuration data into corresponding fixed areas in the non-volatile storage medium in sequence, and after updating the stored check value Checksum, read the BIOS program code and execute the BIOS program; and</claim-text>
<claim-text>if yes, read the BIOS program code and execute the BIOS program.</claim-text></claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The system according to claim 5, wherein the non-volatile storage medium is a CMOS memory, an electrically erasable programmable read-only memory EEPROM mounted to a system management bus SMBUS controller of a south bridge, or a dedicated area for the BIOS configuration data in the BIOS program storage medium.</claim-text></claim></claims><drawings mxw-id="PDW16667290" load-source="patent-office"><!-- EPO <DP n="15"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="135" he="195" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="16"> --><figure id="f0002" num="3"><img id="if0002" file="imgf0002.tif" wi="93" he="114" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="17"> --><figure id="f0003" num="4"><img id="if0003" file="imgf0003.tif" wi="157" he="194" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="18"> --><figure id="f0004" num="5"><img id="if0004" file="imgf0004.tif" wi="102" he="93" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
