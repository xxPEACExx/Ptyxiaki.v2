<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680155-A1" country="EP" doc-number="2680155" kind="A1" date="20140101" family-id="46149167" file-reference-id="293445" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549475" ucid="EP-2680155-A1"><document-id><country>EP</country><doc-number>2680155</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12166454-A" is-representative="YES"><document-id mxw-id="PAPP154823398" load-source="docdb" format="epo"><country>EP</country><doc-number>12166454</doc-number><kind>A</kind><date>20120502</date><lang>EN</lang></document-id><document-id mxw-id="PAPP252971045" load-source="docdb" format="original"><country>EP</country><doc-number>12166454.4</doc-number><date>20120502</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140455413" ucid="EP-12166454-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12166454</doc-number><kind>A</kind><date>20120502</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988119015" load-source="docdb">G06F  13/38        20060101AFI20131126BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988122272" load-source="docdb">H04L  12/54        20130101ALI20131126BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1713567935" load-source="docdb" scheme="CPC">Y02D  10/151       20180101 LA20180103BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1713569560" load-source="docdb" scheme="CPC">Y02D  10/14        20180101 LA20180103BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988100983" load-source="docdb" scheme="CPC">G06F2213/0026      20130101 LA20130924BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988925430" load-source="docdb" scheme="CPC">G06F  13/385       20130101 FI20140103BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180909" lang="DE" load-source="patent-office">Hybride Computeranlage</invention-title><invention-title mxw-id="PT132180910" lang="EN" load-source="patent-office">Hybrid computing system</invention-title><invention-title mxw-id="PT132180911" lang="FR" load-source="patent-office">Système de calcul hybride</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652530" load-source="docdb" ucid="US-20090216920-A1"><document-id format="epo"><country>US</country><doc-number>20090216920</doc-number><kind>A1</kind><date>20090827</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT405773602" load-source="docdb" ucid="US-20120096196-A1"><document-id format="epo"><country>US</country><doc-number>20120096196</doc-number><kind>A1</kind><date>20120419</date></document-id><sources><source name="SEA" category="XI" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918171375" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>AGORA TECH DEVELOPMENTS LTD</last-name><address><country>VG</country></address></addressbook></applicant><applicant mxw-id="PPAR918139008" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>AGORA TECH DEVELOPMENTS LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918991443" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Agora Tech Developments Ltd.</last-name><iid>101310630</iid><address><street>Omar Hodge Building Chera Chambers</street><city>Road Town, Tortola</city><country>VG</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918133902" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BILLI EMILIO</last-name><address><country>IT</country></address></addressbook></inventor><inventor mxw-id="PPAR918132459" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>BILLI, EMILIO</last-name></addressbook></inventor><inventor mxw-id="PPAR918984928" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>BILLI, EMILIO</last-name><address><street>Via Cesare Battisti 21</street><city>28100 Novara</city><country>IT</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918980280" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>OK pat AG</last-name><iid>100060842</iid><address><street>Chamerstrasse 50</street><city>6300 ZUG</city><country>CH</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548805292" load-source="docdb">AL</country><country mxw-id="DS548896339" load-source="docdb">AT</country><country mxw-id="DS548805298" load-source="docdb">BE</country><country mxw-id="DS548842599" load-source="docdb">BG</country><country mxw-id="DS548805202" load-source="docdb">CH</country><country mxw-id="DS548882961" load-source="docdb">CY</country><country mxw-id="DS548896340" load-source="docdb">CZ</country><country mxw-id="DS548864273" load-source="docdb">DE</country><country mxw-id="DS548805299" load-source="docdb">DK</country><country mxw-id="DS548882962" load-source="docdb">EE</country><country mxw-id="DS548868111" load-source="docdb">ES</country><country mxw-id="DS548842600" load-source="docdb">FI</country><country mxw-id="DS548842601" load-source="docdb">FR</country><country mxw-id="DS548805300" load-source="docdb">GB</country><country mxw-id="DS548805301" load-source="docdb">GR</country><country mxw-id="DS548805634" load-source="docdb">HR</country><country mxw-id="DS548896341" load-source="docdb">HU</country><country mxw-id="DS548805203" load-source="docdb">IE</country><country mxw-id="DS548805635" load-source="docdb">IS</country><country mxw-id="DS548842602" load-source="docdb">IT</country><country mxw-id="DS548882963" load-source="docdb">LI</country><country mxw-id="DS548864274" load-source="docdb">LT</country><country mxw-id="DS548896358" load-source="docdb">LU</country><country mxw-id="DS548864275" load-source="docdb">LV</country><country mxw-id="DS548864276" load-source="docdb">MC</country><country mxw-id="DS548871283" load-source="docdb">MK</country><country mxw-id="DS548871284" load-source="docdb">MT</country><country mxw-id="DS548896359" load-source="docdb">NL</country><country mxw-id="DS548868112" load-source="docdb">NO</country><country mxw-id="DS548896360" load-source="docdb">PL</country><country mxw-id="DS548864278" load-source="docdb">PT</country><country mxw-id="DS548896361" load-source="docdb">RO</country><country mxw-id="DS548864279" load-source="docdb">RS</country><country mxw-id="DS548896374" load-source="docdb">SE</country><country mxw-id="DS548864280" load-source="docdb">SI</country><country mxw-id="DS548805204" load-source="docdb">SK</country><country mxw-id="DS548805205" load-source="docdb">SM</country><country mxw-id="DS548871285" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670144" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A hybrid computing system (100) comprising: a network fabric (8); at least one Root Complex board (RCB) and at least one Endpoint Board (EB). Each Root Complex board (RCB) comprises a first processor (1); a PCIe root complex (2) connected to the first processor (1); and a first PCIe network switch (4) directly connected to the PCIe root complex (2).Each Endpoint Board (EB) comprises a second processor (10); a PCIe interface (11) connected to the second processor (10); and a second PCIe network switch (16) connected to the PCIe interface (11). The PCIe network switches (4, 16) of each board (RCB, EB) are connected to the network fabric (8) wherein each Root Complex board (RCB) and each Endpoint Board (EB) are configured for simultaneous use within the hybrid computing system (100).
<img id="iaf01" file="imgaf001.tif" wi="161" he="111" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499517" lang="EN" source="EPO" load-source="docdb"><p>A hybrid computing system (100) comprising: a network fabric (8); at least one Root Complex board (RCB) and at least one Endpoint Board (EB). Each Root Complex board (RCB) comprises a first processor (1); a PCIe root complex (2) connected to the first processor (1); and a first PCIe network switch (4) directly connected to the PCIe root complex (2).Each Endpoint Board (EB) comprises a second processor (10); a PCIe interface (11) connected to the second processor (10); and a second PCIe network switch (16) connected to the PCIe interface (11). The PCIe network switches (4, 16) of each board (RCB, EB) are connected to the network fabric (8) wherein each Root Complex board (RCB) and each Endpoint Board (EB) are configured for simultaneous use within the hybrid computing system (100).</p></abstract><description mxw-id="PDES63955574" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>FIELD OF THE INVENTION</b></heading><p id="p0001" num="0001">The present invention relates to a scalable and reconfigurable highly efficient hybrid computing system comprising multiple boards interconnected by a network fabric.</p><heading id="h0002"><b>BACKGROUND OF THE INVENTION</b></heading><p id="p0002" num="0002">Today's datacenters are basically a collection of standard servers interconnected with non optimized networks like Ethernet and 10 Gbit Ethernet or in some cases using Infiniband or exotic high performance interconnections. However these architectures are no optimized and modern literature shows that these architectures are inefficient in terms of power and computational efficiency.<!-- EPO <DP n="2"> --></p><p id="p0003" num="0003">Several approaches have been proposed to overcome these problems. A first approach has been the optimization in terms of network. However this solution is too complex and therefore too power demanding.</p><p id="p0004" num="0004">According to a second approach, described for example in <patcit id="pcit0001" dnum="US20090216920A"><text>US 2009/0216920</text></patcit>, the underutilization of the server resources has been reduced by a solution where multiple hardware resources are shared between computing boards.</p><p id="p0005" num="0005">In addition CPU vendors are focusing on creating new low power CPUs (such as the Intel® Atom™ CPUs) but this approach alone - if not integrated with a more radical redesign of the server architecture - is not sufficient to address the power consumption of modern datacenters. In fact it is possible to demonstrate that using a very low power CPU in a standard datacenter can generate a worse power optimization than using high power CPUs in the same scenario. The solution described in <patcit id="pcit0002" dnum="US20090216920A"><text>US 2009/0216920</text></patcit> also uses low-power CPUs in an attempt to reduce power consumption. However, the solution described in this document has the major disadvantage that all boards must be identical. In fact many micro-server architectures are de facto a simple collection of CPUs interconnected with a more efficient interconnection but it is not possible to reconfigure the system to have CPUs and GPUs and DSPs and storage in the same time into the same architecture. Therefore this solution might be scalable but it is not flexible in terms of customization.</p><heading id="h0003"><b>TECHNICAL PROBLEM TO BE SOLVED</b></heading><p id="p0006" num="0006">In a modern datacenter one will need the integration of different computational resources (not only CPU based but also GPU and DSP) and one will need a more efficient architecture in storage and data management at the hardware level. A datacenter needs a more complex mix of capabilities than what can be achieved with the known server architectures only as distributed in many different servers and interconnected together using different networks such as fiberchannel for storage, InfiniBand® or a mix of fiber channel and Ethernet and so on.<!-- EPO <DP n="3"> --></p><p id="p0007" num="0007">The objective of the present invention is thus to provide a scalable and at the same time highly configurable computing system with low power consumption.</p><heading id="h0004"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0008" num="0008">The above-identified objective of the invention is achieved by a hybrid computing system comprising a network fabric interconnecting multiple computing blades (at least one Root Complex board and at least one Endpoint Board). Each Root Complex board comprises a first processor, a PCIe root complex connected to the first processor and a first PCIe network switch directly connected to the PCIe root complex. Each Endpoint Board comprises a second processor, a PCIe interface connected to the second processor and a second PCIe network switch connected to the PCIe interface.</p><p id="p0009" num="0009">According to the present invention the PCIe network switch of each board is connected to the network fabric, wherein each Root Complex board and each Endpoint Board are configured for simultaneous use within the hybrid computing system, i.e. each processor on each board can be active at the same time.</p><heading id="h0005"><b>ADVANTAGEOUS EFFECTS</b></heading><p id="p0010" num="0010">The present invention is thus a completely new concept of multiple computing boards ("micro-servers") with very high computational power density with the capability to integrate as modules storage cards, DSP coprocessors, GPUs modules, FPGAs modules and so on.</p><p id="p0011" num="0011">In view of the above-identified objective and its solution, the most important advantages of the present invention are:
<ul><li>Configurability through modularity: since the hybrid computing system of the present invention can accommodate any combination of different types of boards, the resulting computing system can be customized to exactly fit the exact requirements;</li><li>Integration: by custom configuration of different modules (Storage boards, DSP-Processors, FPGA modules, etc) a high level of integration<!-- EPO <DP n="4"> --> can be achieved and in this way extremely optimized datacenters can be created in a single computing system;</li></ul>
<ul><li>Low power usage: through integration and sharing of hardware resources - which used to require a full datacenter - down to a single computing system results in substantial reduction of the power usage. Furthermore, the optimization of the hardware layout results in additional savings in power consumption;</li><li>Cost efficiency: since the computing system of the present invention can be configured to replace a broad range of servers, a significant cost-saving is achieved (in addition to costs savings due to reduced power consumption and physical space requirements); and</li><li>Flexibility: due to the reconfigurable nature of the computing system of the present invention, the system is very flexible according to various usage scenarios. For example the computing system is fitted with preponderantly storage boards for a data-storage application, while the same system can be fitted with processor boards for data processing and calculation-intensive application. Again if a lower amount of traffic is expected, than a single IO-Board may be shared between all boards, while in a high traffic scenario, each board may be provided with a dedicated IO-Fabric.</li></ul></p><p id="p0012" num="0012">For example, a five rack unit 5U rack-based server containing up to 32 boards that can be CPU based, GPU based, DPS based, or storage (HDD, SSD, etc) based is capable to replace an entire forty rack unit 40U cabinet of traditional commodity servers creating a new datacenter architecture, i.e. a real datacenter in a single chassis adding capabilities that normally can not be integrated into a standard server. These capabilities enable a power boost for the most demanding present and future applications starting from data-intensive applications to computing-intensive processing applications.</p><heading id="h0006"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><!-- EPO <DP n="5"> --><p id="p0013" num="0013">Further characteristics and advantages of the invention will in the following be described in detail by means of the description and by making reference to the drawings. Which show:
<dl id="dl0001"><dt>Fig. 1A</dt><dd>a symbolic block diagram of the network fabric of the computing system according to the present invention;</dd><dt>Fig. 1B</dt><dd>a perspective view of a backplane BK for receiving various boards connecting to the network fabric of the computing system according to the present invention;</dd><dt>Fig. 1C</dt><dd>a top view of a backplane according to a particular embodiment of the present invention;</dd><dt>Fig. 2A</dt><dd>a symbolic block diagram of a first configuration of the computing system according to the present invention;</dd><dt>Fig. 2B</dt><dd>a perspective view of a first configuration of the computing system according to the present invention;</dd><dt>Fig. 3</dt><dd>a symbolic block diagram of the communication path between the processor of one board and the IO-Fabric of a different board using remote PCIe memory mapping;</dd><dt>Fig. 4</dt><dd>an illustrative diagram of a preferred implementation of non-transparent shared memory;</dd><dt>Fig. 5</dt><dd>a perspective view of a particular configuration of the computing system according to the present invention, with emphasis on processing power;</dd><dt>Fig. 6</dt><dd>a perspective view of a further particular configuration of the computing system according to the present invention, with emphasis on storage capacity;</dd><dt>Fig. 7</dt><dd>a Root Complex Board with an x86 processor as first processor;</dd><dt>Fig. 8</dt><dd>an Endpoint Board in a specific configuration of storage cards for SSD storage;<!-- EPO <DP n="6"> --></dd><dt>Fig. 9</dt><dd>shows an FPGA-based Endpoint Board;</dd></dl>
Note: The figures are not drawn to scale, are provided as illustration only and serve only for better understanding but not for defining the scope of the invention. No limitations of any features of the invention should be implied form these figures.</p><heading id="h0007"><b>DESCRIPTION OF PREFERRED EMBODIMENTS</b></heading><p id="p0014" num="0014">Certain terms will be used in this patent application, the formulation of which should not be interpreted to be limited by the specific term chosen, but as to relate to the general concept behind the specific term.</p><p id="p0015" num="0015">The term "board" shall be used to refer to a computing board, comprising a motherboard (as well known in the art) carrying various hardware components such as computing, storage and/or IO-Components. The motherboard of the boards is fitted with appropriate interfaces to connect to the network fabric and the IO-components may comprise further interfaces of their own.</p><p id="p0016" num="0016">The term "processor" shall refer in the context of the present application to any kind of processor and/or controller from the non-exhaustive list below:
<ul><li>a central processing unit (CPU) such as a microprocessor;</li><li>a Field-programmable gate array (FPGA);</li><li>an accelerator, such as a graphics processing unit (GPU);</li><li>a Digital signal possessor (DSP);</li><li>a physics processing unit (PPU);</li><li>a front end processor,</li><li>a memory controller;</li><li>a drive controller such as solid-state drive (SSD) controller, a hard drive- controller or a disk array controller; or</li><li>a network interface controller (NIC), such as an InfiniBand® controller.</li></ul><!-- EPO <DP n="7"> --></p><p id="p0017" num="0017">PCI-SIG stands for Peripheral Component Interconnect Special Interest Group. The abbreviation PCI shall be used for Peripheral Component Interconnect and PCIe stands for PCI Express or Peripheral Component Interconnect Express as defined by the well-known international standards by PCI-SIG. The present invention is not limited to a single version of the PCIe standard or to any particular form factor thereof.</p><p id="p0018" num="0018"><figref idrefs="f0001">Fig. 1A</figref> shows a symbolic block diagram of the network fabric 8 of the computing system 100 according to the present invention. The network fabric 8 is a switched fabric according to a network topology where network nodes (in the present case boards) connect with each other via one or more network switches. Switched fabrics can offer better total throughput than broadcast networks, because traffic is spread across multiple physical links.</p><p id="p0019" num="0019">The network fabric 8 is a PCIe cluster of one of the following network topologies (non-exhaustive list):
<ul><li>point-to-point;</li><li>bus;</li><li>sta r;</li><li>ring, preferably a 3D torus;</li><li>mesh; or</li><li>tree.</li></ul></p><p id="p0020" num="0020">In other words, the present invention uses a fabric attached I/O network which enables a high degree of flexibility in the computing system 100 by physically separating the provisioning, monitoring and management of I/O, like HDD, NIC and co-processors from the physical hosts and virtual machines VMs utilizing the I/O. This means that the I/O can be remotely assigned, managed and adjusted as required and on-demand without affecting other hardware assets (server, storage and networking), thus providing the computing system administrator increased flexibility to match resources to individual application workloads, improve application uptime and reduce management overhead, all in real time.<!-- EPO <DP n="8"> --></p><p id="p0021" num="0021">Once I/O becomes fabric-attached, the I/O can then be treated as a pool of resources from which an application workload can draw from, either as dedicated resources (where performance is essential) or shared resources (where cost reduction through better utilization is essential).</p><p id="p0022" num="0022">The underlying network may be one of Gigabit Ethernet or InfiniBand, the choice of any particular type not affecting the concept of the invention.</p><p id="p0023" num="0023">In a preferred embodiment of the present invention, the network fabric 9 comprises standard PCIe switches, preferably switches compliant with specification of PCI-SIG PCIw gen 2.1.</p><p id="p0024" num="0024"><figref idrefs="f0001">Figure 1A</figref> symbolically shows the n fabric ports 8a<sub>1-n</sub> for connecting various boards (to be described later) with the network fabric. The term fabric port shall cover both logical (communication controller) and physical components (slot for receiving a computing board) of the ports required for attaching a computing board to the network fabric 8 or to a particular switch within the network fabric 8.</p><p id="p0025" num="0025"><figref idrefs="f0002">Fig. 1B</figref> shows a perspective view of the backplane BK for receiving various boards RCBs (Root Complex boards) or EBs (Endpoint boards) and connecting these to the network fabric 8 of the computing system 100 according to the present invention with the n fabric ports 8a<sub>1-n</sub>. The figure shows only a possible layout of the backplane BK, the physical layout of the computing system 100 having no effect on the concept of the invention. However, the layout depicted on this figure (and also <figref idrefs="f0004">figure 2B</figref>) provides a very compact design of the computing system 100 while at the same time allowing good airflow to facilitate cooling</p><p id="p0026" num="0026"><figref idrefs="f0002">Fig. 1C</figref> shows a top view of a backplane BK depicting only one very particular implementation of the ports 8a<sub>1-n</sub> in the form of 32 identical backplane-to-board connectors 20 each of them being divided into a PCI connector 21 used to connect the boards RCB or EB to the network fabric 8, and power connectors 23 for supplying the boards RCB or EB with electrical power. Two brackets 24, 25 are used to support the boards RCB, EB and to<!-- EPO <DP n="9"> --> aid in correctly plugging into the backplane-to-board connectors 20. Further backplane connectors 22 are used to carry out the PCIe signals dedicated to the IO Fabric.</p><p id="p0027" num="0027"><figref idrefs="f0003">Fig. 2A</figref> shows a symbolic block diagram of a first configuration of the computing system 100 according to the present invention.</p><p id="p0028" num="0028">As shown on this figure, the computing system 100 comprises at least one of each of the two main types of boards connected to the network fabric 8:
<ul><li>Root Complex board(s) (RCB); and</li><li>Endpoint board(s) (EB).</li></ul></p><p id="p0029" num="0029">Each <b>Root Complex board (s) (RCB)</b> comprises a first processor 1, such as an x86 based processor for example. In addition, each Root Complex board (s) RCB has a PCIe root complex 2 connected to the first processor 1.</p><p id="p0030" num="0030">In the context of PCIe systems of the present application, a PCIe root complex 2 is a device that connects the processor and memory subsystems to the PCI Express switch 4, 16 composed of one or more switch devices. Similar to a host bridge in a PCI system, the root complex 2 generates transaction requests on behalf of the processor 1, which is interconnected through a local bus. Root complex functionality may be implemented as a discrete device, or may be integrated with the processor. A root complex may contain more than one PCI Express port and multiple switch devices can be connected to ports on the root complex or cascaded.</p><p id="p0031" num="0031">Each Root Complex board (s) RCB also comprises a first PCIe network switch 4 directly connected to the PCIe root complex 2. Each PCIe network switch 4 inside the boards is configured in order to have many different communication channels that can be used to realize different type of topology and to connect directly to other network cards used for external communication and for interfacing. In the most preferred embodiment, the<!-- EPO <DP n="10"> --> PCIe network switch 4 has at least two different type of links connected to two different type of ports. PCIe network switches 4 are capable of creating multiple endpoints out of one endpoint to allow sharing one endpoint with multiple devices.</p><p id="p0032" num="0032">In the preferred embodiment of the invention, the first PCIe network switch 4 is directly connected to the PCIe root complex 2 within the respective Root Complex board RCB through a first main link 3 by a first dedicated port 3a of the first PCIe network switch 4 wherein the first dedicated port 3a and the first main link 3 are configured to perform communication with the first processor 1 via the root complex 2 using non-transparent shared memory operations. One particular implementation for non-transparent shared memory shall be described later in relation with <figref idrefs="f0006">figures 4A and 4B</figref>. However the choice of the particular implementation of the non-transparent shared memory does not affect the concept of the invention.</p><p id="p0033" num="0033">Every <b>Endpoint board (EB)</b> comprises a second processor 10, such as a memory controller; a drive controller (e.g. a solid-state drive SSD-controller, a hard drive- controller or a disk array controller) or a network interface controller NIC (e.g. an InfiniBand® controller). The second processor 10 of the Endpoint board(s) is connected to a PCIe interface 11. Each Endpoint board(s) EB further comprises a second PCIe network switch 16 connected to the PCIe interface 11.</p><p id="p0034" num="0034">In the preferred embodiment of the invention, the second PCIe network switch 16 is directly connected to the PCIe interface 11 within the respective Endpoint Board EB through a second main link 12 by a second dedicated port 12a of the second PCIe network switch 16, wherein the second dedicated port 12a and the second main link 12 are configured to perform communication with the second processor 10 via the PCIe interface 11 using direct-shared memory operations.</p><p id="p0035" num="0035">The first PCIe network switch(es) 4 of the Root Complex board (s) RCB and the second PCIe network switch(es) 16 of the Endpoint board(s) EB is each connected to the network fabric 8, preferably through at least one switch port 5a of the respective PCIe network switch 4, 16 and at least one<!-- EPO <DP n="11"> --> corresponding fabric port 8a<sub>1-n</sub> of the network fabric 8 via a corresponding fabric link 5. The fabric link(s) 5 are configured to perform non transparent shared memory operations via the network fabric 8 for inter nodes communications between any Root Complex board RCB and/or Endpoint Board EB.</p><p id="p0036" num="0036">Furthermore at least one IO-Fabric 9 is provided within at least one board RCB, EB, i.e. at least one IO-Fabric 9 is provided within the hybrid computing system 100 of the present invention, the IO-Fabric 9 providing external communication with the computing system 100. The at least one IO-fabric 9 is connected to the PCIe network switch(es) 4, 16 of the corresponding board(s) RCB, EB via an IO-port(s) 6a of the corresponding PCIe network switch(es) 4, 16 by a corresponding IO-link 6. The IO-Link 6 connecting the PCIe network switch(es) 4, 16 with the at least one IO-fabric 9 is configured for direct communication between the processor(s) 1, 10 and the IO-Fabric 9, wherein the IO-port 6a is configured to perform transparent shared memory communications.</p><p id="p0037" num="0037">One of the most essential features of the present invention is that each Root Complex board RCB and each Endpoint Board EB are configured for simultaneous use within the hybrid computing system 100. In other words, all boards RCB, EB may be active at the same time to provide parallel capabilities to the computing system 100 allowing different boards to perform different tasks/ subtasks in parallel. However, the term "configured for simultaneous use" does not mean that all boards are necessarily simultaneously used but that the system 100 offers this possibility and each board is in a state where it could be activated regardless of the state of the other boards and that there is no limitation to simultaneous use of any combination of all boards. In this way depending on the specific usage scenario, the computing system 100 may be configured for high degree of parallelism; scalable capacity - where boards with storage are accessed one at a time; or configured for redundancy or any combination in between.</p><p id="p0038" num="0038"><figref idrefs="f0004">Fig. 2B</figref> shows a perspective view of a first configuration of the computing system 100 according to the present invention with a Root<!-- EPO <DP n="12"> --> Complex board RCB fully inserted into a corresponding backplane connector 20 of a fabric port 8a<sub>n</sub> and an Endpoint board EB about to be inserted into a corresponding backplane connector 20 of a subsequent fabric port 8a<sub>n-1</sub>.</p><p id="p0039" num="0039"><figref idrefs="f0005">Fig. 3</figref> shows a symbolic block diagram of the communication path (shown with a dashed line) between the processor 1 of one board (RCB in this case) and the IO-Fabric 9 of a different board (EB in the shown illustration) using remote PCIe memory mapping. According to the present invention in order to allow sharing of the at least one IO-Fabric 9 within the entire computing system 100, the PCIe network switches 4, 16 of the corresponding boards RCB, EB, the network fabric 8 and the at least one IO-fabric 9 are configured such that each processor 1, 10 of each board RCB, EB is connectable to the at least one IO-Fabric 9 using remote PCIe memory mapping.</p><heading id="h0008"><b>Non transparent shared memory</b></heading><p id="p0040" num="0040">In the following, one of the various possible implementations of non transparent shared memory is described:</p><p id="p0041" num="0041">Each system in the interconnect has a static number that uniquely identifies the system, called the system ID. The address of the queue is programmed into the remote system's lookup table LUT. This is done after the memory addresses are exchanged. <figref idrefs="f0006">Figure 4</figref> depicts the local queue for each remote system. The remote address base address register BAR2 is remapped and then partitioned equally among all the systems. Each partition points to the remote aperture. <figref idrefs="f0006">Figure 4</figref> depicts the remote queues on the local system. The BAR2 lookup table LUT is programmed by the remote system during its local memory initialization. Part of the lookup table entry is the partition number that is used to route the transaction. Furthermore this partition number is used in the ID translation.</p><p id="p0042" num="0042">The lookup table LUT for both base address registers BARs is configured using the lookup table offset LUTOFFSET, lookup table lower data LUTLDATA, lookup table middle data LUTMDATA and lookup table upper data LUTUDATA registers.<!-- EPO <DP n="13"> -->
<ul><li>Fields associated with lookup entries are modified by accessing the LUTLDATA, LUTLMDATA and LUTUDATA registers.</li><li>A read from one of these registers returns the field values of the lookup table entry pointed to by the LUTOFFSET register. Similarly, a write updates the fields of the lookup entry pointed to by the LUTOFFSET register.</li><li>The BAR field in the LUTOFFSET register selects the lookup table associated with the corresponding BAR while the INDEX field in the LUTOFFSET field selects the lookup table entry.</li><li>Address translation for the aperture mapping is done using BAR2 LUT table. Address translation for configuration mapping is done using BAR4 LUT table.</li><li>For each aperture allocated for data transfer, an entry is allocated in the BAR2 LUT table and initialized to the remote address. That entry number is stored in the endpoint EP structure.</li><li>An entry is allocated in BAR4 LUT table to map remote BAR0 configuration space. The entry number is stored in the EP structure.</li><li>Address mapping for RP to EP is different from EP to EP in the current scenario.</li><li>RP to EP aperture mapping is similar to case 1. For instance system III aperture address is set in the LUT entry for BAR2. And system I aperture address is stored in the LUT table for BAR2. The address mapping is the same between system II and system III.</li><li>Address mapping for EP to EP requires two LUT entries to be setup. One entry translates from EP to RP's system space. And the other translates from RPs system space to remote EPs local space. There are two translations to access remote EPs memory from local EP. For instance in order to access system III's aperture from system I, an entry needs to be setup on BAR2 LUT of port 0 on network processor. This translates to BAR2 enumerated address in RP PCIe space. Another entry needs to be setup on the relative BAR2 LUT on remote network processor to translate into system II local memory.</li></ul><!-- EPO <DP n="14"> --></p><p id="p0043" num="0043"><figref idrefs="f0007">Fig. 5</figref> shows a perspective view of a particular configuration of the computing system 100 according to the present invention, with emphasis on processing power. Therefore preponderantly Root Complex boards RCB with high processing power are connected to the backplane BK.</p><p id="p0044" num="0044"><figref idrefs="f0007">Fig. 6</figref> shows a perspective view of a further particular configuration of the computing system 100 according to the present invention, with emphasis on storage capacity. For this purpose, preponderantly Endpoint boards EB with multiple solid state drives SSDs and respective controllers are connected to the backplane BK alongside with one Root Complex boards RCB.</p><p id="p0045" num="0045"><figref idrefs="f0008">Fig. 7</figref> shows a diagram of a Root Complex Board with an x86 processor as first processor 1. The X86 CPU is connected to its memory 32, its South bridge 33 and to its Network engine 34.</p><p id="p0046" num="0046">The network engine 34 is connected to the backplane BK using the network connector 36. The network connector 36 is used to carry out from the network processor 34 all the necessary links in order to perform all the connection to the network fabric 8 and the IO fabric 9. A Gigabit ETH interface 37 is used to manage the motherboards in case of necessity.</p><p id="p0047" num="0047"><figref idrefs="f0009">Fig. 8</figref> shows an Endpoint Board EB in a specific configuration of storage cards for SSD storage. The network processor 41 is connected to a PCIe controller 43 that perform all the operations necessary to drive the SSD disks 44, 45, 46.</p><p id="p0048" num="0048">The network processor 41 is connected to the global backplane BK using the network connector 36.</p><p id="p0049" num="0049"><figref idrefs="f0010">Fig. 9</figref> shows a field-programmable gate array FPGA-based Endpoint Board EB for specific co- processing, in this case the network processor 41 is connected to a PCIe interface realized into an FPGA 54 this FPGA being connected to other FPGAs (51, 52, 53) using different communication mechanisms. The network processor 41 is connected to the global backplane BK using the network connector 36.<!-- EPO <DP n="15"> --></p><p id="p0050" num="0050">The boards - both Root Complex board(s) RCB and Endpoint board(s) EB - presented above can be configured into a hybrid computing system 100 according to the present invention in any combination desired by the specific usage scenario.</p><p id="p0051" num="0051">It will be understood that many variations could be adopted based on the specific structure hereinbefore described without departing from the scope of the invention as defined in the following claims.<!-- EPO <DP n="16"> --></p><heading id="h0009"><b>REFERENCE LIST:</b></heading><p id="p0052" num="0052"><tables id="tabl0001" num="0001"><table frame="bottom"><tgroup cols="2" colsep="0"><colspec colnum="1" colname="col1" colwidth="69mm"/><colspec colnum="2" colname="col2" colwidth="17mm"/><tbody><row><entry>hybrid computinq system</entry><entry align="right">100</entry></row><row><entry>network fabric</entry><entry align="right">8</entry></row><row><entry>Root Complex board</entry><entry align="right">RCB</entry></row><row><entry>first processor</entry><entry align="right">1</entry></row><row><entry>PCIe root complex</entry><entry align="right">2</entry></row><row><entry>first PCIe network switch</entry><entry align="right">4</entry></row><row><entry>Endpoint Board</entry><entry align="right">EB</entry></row><row><entry>second processor</entry><entry align="right">10</entry></row><row><entry>PCIe interface</entry><entry align="right">11</entry></row><row><entry>second PCIe network switch</entry><entry align="right">16</entry></row><row><entry>dedicated port (of the first PCIe network switch)</entry><entry align="right">3a</entry></row><row><entry>first main link</entry><entry align="right">3</entry></row><row><entry>second dedicated port</entry><entry align="right">12a</entry></row><row><entry>second main link</entry><entry align="right">12</entry></row><row><entry>fabric port</entry><entry align="right">8a<sub>1-n</sub></entry></row><row><entry>switch port</entry><entry align="right">5a</entry></row><row><entry>fabric link</entry><entry align="right">5</entry></row><row><entry>IO fabric</entry><entry align="right">9</entry></row><row><entry>IO-port</entry><entry align="right">6a</entry></row><row><entry>IO-Link</entry><entry align="right">6</entry></row><row><entry>backplane</entry><entry align="right">BK</entry></row><row><entry>backplane-to-board connector</entry><entry align="right">20</entry></row><row><entry>PCI connector</entry><entry align="right">21</entry></row><row><entry>bracket</entry><entry align="right">24, 25</entry></row><row><entry>memory</entry><entry align="right">32</entry></row><row><entry>southbridqe</entry><entry align="right">33</entry></row><row><entry>network engine</entry><entry align="right">34</entry></row><row><entry>network connector</entry><entry align="right">36</entry></row><row><entry>gigabit interface</entry><entry align="right">37</entry></row><row><entry>network processor</entry><entry align="right">41</entry></row><row><entry>PCIe controller</entry><entry align="right">43</entry></row><row><entry>solid state drive SSD</entry><entry align="right">44,45,46</entry></row></tbody></tgroup></table></tables></p></description><claims mxw-id="PCLM56976492" lang="EN" load-source="patent-office"><!-- EPO <DP n="17"> --><claim id="c-en-0001" num="0001"><claim-text>A hybrid computing system (100) comprising:
<claim-text>- a network fabric (8)</claim-text>
<claim-text>- at least one Root Complex board (RCB) comprising:
<claim-text>- a first processor (1);</claim-text>
<claim-text>- a PCIe root complex (2) connected to the first processor (1);</claim-text>
<claim-text>- a first PCIe network switch (4) directly connected to the PCIe root complex (2);</claim-text></claim-text>
<claim-text>- at least one Endpoint Board (EB) comprising:
<claim-text>- a second processor (10);</claim-text>
<claim-text>- a PCIe interface (11) connected to the second processor (10);</claim-text>
<claim-text>- a second PCIe network switch (16) connected to the PCIe interface (11);<br/>
<b>wherein:</b></claim-text></claim-text>
<claim-text>- the first PCIe network switch (4) of each Root Complex board (RCB) is connected to the network fabric (8),</claim-text>
<claim-text>- the second PCIe network switch (16) of each Endpoint Board (EB) is connected to the network fabric (8),</claim-text>
<claim-text>- each Root Complex board (RCB) and each Endpoint Board (EB) are configured for simultaneous use within the hybrid computing system (100).</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>A hybrid computing system (100) according to claim 1 <b>characterized in that:</b>
<claim-text>- a first dedicated port (3a) of the first PCIe network switch (4) is directly connected to the PCIe root complex (2) within the respective Root Complex board (RCB) through a first main link (3); and</claim-text>
<claim-text>- a second dedicated port (12a) of the second PCIe network switch (16) is directly connected to the PCIe interface (11) within the respective Endpoint Board (EB) through a second main link (12).</claim-text><!-- EPO <DP n="18"> --></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>A hybrid computing system (100) according to claim 2 <b>characterized in that:</b>
<claim-text>- the first dedicated port (3a) and the first main link (3) are configured to perform communication with the first processor (1) via the root complex (2) <b>using non-transparent shared memory operations;</b> and</claim-text>
<claim-text>- the second dedicated port (12a) and the second main link (12) are configured to perform communication with the second processor (10) via the PCIe interface (11) <b>using direct-shared memory operations.</b></claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>A hybrid computing system (100) according to one of the claims 1 to 3 <b>characterized in that:</b>
<claim-text>- the PCIe network switch (4, 16) of each board (RCB, EB) is connected to the network fabric (8) through at least one switch port (5a) of the respective PCIe network switch (4, 16) and at least one corresponding fabric port (8a<sub>1-n</sub>) of the network fabric (8) via a corresponding fabric link (5), said fabric link(s) (5) being configured to perform <b>non transparent shared memory operations</b> via the network fabric (8) for inter nodes communications between any Root Complex board (RCB) and/or Endpoint Board (EB).</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A hybrid computing system (100) according to claim 4, <b>characterized in that</b> it further comprises a backplane (BK) for receiving said fabric ports (8a<sub>1-n</sub>) corresponding to each board (RCB, EB), wherein the backplane (BK) comprises:
<claim-text>- n backplane-to-board connectors (20) corresponding to each of said fabric ports (8a<sub>1-n</sub>), wherein each backplane-to-board connectors (20) comprises:
<claim-text>- a PCI connector (21) used to connect the boards (RCB, EB) to the network fabric (8), and</claim-text>
<claim-text>- power connectors (23) for supplying the boards (RCB, EB) with electrical power;<!-- EPO <DP n="19"> --></claim-text>
<claim-text>- n pairs of brackets (24, 25) to support the boards (RCB, EB) and to aid in correctly plugging the boards (RCB, EB) into the backplane-to-board connectors (20).</claim-text></claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>A hybrid computing system (100) according to one of the previous claims <b>characterized in that:</b>
<claim-text>- at least one IO-Fabric (9) is provided within at least one board (RCB, EB);</claim-text>
<claim-text>- said IO-fabric (9) is connected to the PCIe network switch (4, 16) of the corresponding board (RCB, EB) via an IO-port (6a) of the PCIe network switch (4, 16) by a corresponding IO-link (6), said IO-Link (6) being configured for direct communication between the processor (1, 10) and IO-Fabric (9),</claim-text>
<claim-text>- said IO-port (6a) is configured to perform transparent shared memory communications;</claim-text>
<claim-text>- the PCIe network switches (4, 16) of the corresponding boards (RCB, EB), the network fabric (8) and the at least one IO-fabric (9) are configured such that each processor (1, 10) of each board (RCB, EB) is connectable to the at least one IO-Fabric (9) using remote PCIe memory mapping.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A hybrid computing system (100) according to one of the previous claims <b>characterized in that</b> the network fabric (8) comprises standard PCIe switches, preferably switches compliant with specification of PCI-SIG PCIw gen 2.1.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A hybrid computing system (100) according to one of the previous claims <b>characterized in that</b> the first processor (1) and/or the second processor (10) is one of the following:
<claim-text>- a central processing unit (CPU) such as a microprocessor;</claim-text>
<claim-text>- a Field-programmable gate array (FPGA);</claim-text>
<claim-text>- an accelerator, such as a graphics processing unit (GPU);</claim-text>
<claim-text>- a Digital signal possessor (DSP);</claim-text>
<claim-text>- a physics processing unit (PPU);<!-- EPO <DP n="20"> --></claim-text>
<claim-text>- a front end processor,</claim-text>
<claim-text>- a memory controller;</claim-text>
<claim-text>- a drive controller such as solid-state drive (SSD) controller, a hard drive- controller or a disk array controller; or</claim-text>
<claim-text>- a network interface controller (NIC), such as an InfiniBand controller.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A hybrid computing system (100) according to one of the previous claims <b>characterized in that</b> the network fabric (8) is a PCIe cluster of one of the following network topologies:
<claim-text>- point-to-point;</claim-text>
<claim-text>- bus;</claim-text>
<claim-text>- sta r;</claim-text>
<claim-text>- ring, preferably a 3D torus;</claim-text>
<claim-text>- mesh; or</claim-text>
<claim-text>- tree.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A hybrid computing system (100) according to one of the previous claims <b>characterized in that</b> it is configured to receive a number of n (up to 32) boards (1 or 10), the network fabric (8) comprising n fabric ports (8a<sub>1-n</sub>) for receiving any combination of Root Complex boards (RCB) and/or Endpoint Boards (EB) configured for simultaneous use within the hybrid computing system (100).</claim-text></claim></claims><drawings mxw-id="PDW16667272" load-source="patent-office"><!-- EPO <DP n="21"> --><figure id="f0001" num="1A"><img id="if0001" file="imgf0001.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0002" num="1B,1C"><img id="if0002" file="imgf0002.tif" wi="165" he="226" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0003" num="2A"><img id="if0003" file="imgf0003.tif" wi="165" he="226" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0004" num="2B"><img id="if0004" file="imgf0004.tif" wi="165" he="172" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0005" num="3"><img id="if0005" file="imgf0005.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0006" num="4"><img id="if0006" file="imgf0006.tif" wi="161" he="120" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0007" num="5,6"><img id="if0007" file="imgf0007.tif" wi="155" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0008" num="7"><img id="if0008" file="imgf0008.tif" wi="165" he="211" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0009" num="8"><img id="if0009" file="imgf0009.tif" wi="158" he="231" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0010" num="9"><img id="if0010" file="imgf0010.tif" wi="163" he="171" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="157" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
