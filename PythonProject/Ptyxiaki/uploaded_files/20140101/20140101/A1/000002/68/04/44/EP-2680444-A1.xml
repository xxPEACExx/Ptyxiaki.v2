<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680444-A1" country="EP" doc-number="2680444" kind="A1" date="20140101" family-id="41495006" file-reference-id="295632" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549244" ucid="EP-2680444-A1"><document-id><country>EP</country><doc-number>2680444</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13186070-A" is-representative="NO"><document-id mxw-id="PAPP154823167" load-source="docdb" format="epo"><country>EP</country><doc-number>13186070</doc-number><kind>A</kind><date>20091230</date><lang>EN</lang></document-id><document-id mxw-id="PAPP173923774" load-source="docdb" format="original"><country>EP</country><doc-number>13186070.2</doc-number><date>20091230</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140453379" ucid="CN-200810247427-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>200810247427</doc-number><kind>A</kind><date>20081231</date></document-id></priority-claim><priority-claim mxw-id="PPC140454634" ucid="CN-200910151835-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>200910151835</doc-number><kind>A</kind><date>20090625</date></document-id></priority-claim><priority-claim mxw-id="PPC140454086" ucid="EP-09836079-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>09836079</doc-number><kind>A</kind><date>20091230</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988111804" load-source="docdb">H04N   7/24        20110101ALI20131023BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988121196" load-source="docdb">H03M   7/30        20060101AFI20131023BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988123460" load-source="docdb">G10L  19/09        20130101ALI20131023BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2137533289" load-source="docdb" scheme="CPC">H04N  19/50        20130101 LI20141108BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988112057" load-source="docdb" scheme="CPC">G10L  19/0017      20130101 LA20131022BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988139118" load-source="docdb" scheme="CPC">G10L  19/09        20130101 FI20131121BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180216" lang="DE" load-source="patent-office">Signalcodierungsverfahren und Signaldecodierungsverfahren</invention-title><invention-title mxw-id="PT132180217" lang="EN" load-source="patent-office">Method for encoding signal, and method for decoding signal</invention-title><invention-title mxw-id="PT132180218" lang="FR" load-source="patent-office">Procédé de codage d'un signal et procédé de décodage d'un signal</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652098" load-source="docdb" ucid="US-20040148162-A1"><document-id format="epo"><country>US</country><doc-number>20040148162</doc-number><kind>A1</kind><date>20040729</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652099" load-source="docdb" ucid="US-20060143002-A1"><document-id format="epo"><country>US</country><doc-number>20060143002</doc-number><kind>A1</kind><date>20060629</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652100" load-source="docdb" ucid="WO-1995016260-A1"><document-id format="epo"><country>WO</country><doc-number>1995016260</doc-number><kind>A1</kind><date>19950615</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>GHIDO F ET AL: "Accounting for Companding Nonlinearities in Lossless Audio Compression", 2007 IEEE INTERNATIONAL CONFERENCE ON ACOUSTICS, SPEECH, AND SIGNAL PROCESSING 15-20 APRIL 2007 HONOLULU, HI, USA, IEEE, PISCATAWAY, NJ, USA, 15 April 2007 (2007-04-15), pages I - 261, XP031462848, ISBN: 978-1-4244-0727-9</text><sources><source mxw-id="PNPL54154367" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>None</text><sources><source mxw-id="PNPL45130901" load-source="docdb" name="APP"/></sources></nplcit><nplcit><text>TILMAN LIEBCHEN: "Proposed 2nd Edition of ISO/IEC 14496-3:2005/Amd.2, Audio Lossless Coding (ALS), new audio profiles and BSAC extensions", 79. MPEG MEETING; 15-01-2007 - 19-01-2007; MARRAKECH; (MOTION PICTUREEXPERT GROUP OR ISO/IEC JTC1/SC29/WG11),, no. M14193, 10 January 2007 (2007-01-10), XP030042849, ISSN: 0000-0146</text><sources><source mxw-id="PNPL54154368" load-source="docdb" name="SEA" category="I"/></sources></nplcit></non-patent-citations></citations></technical-data><related-documents><relation type="division"><child-doc ucid="EP-13186070-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>13186070</doc-number><kind>A</kind><date>20091230</date></document-id></child-doc><parent-doc ucid="EP-09836079.5"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>09836079.5</doc-number><date>20091230</date></document-id></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR918167915" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918154886" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918985263" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>101192985</iid><address><street>B1-3A Intellectual Property Dept. Huawei Administration Building Bantian Longgang</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918158040" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ZHANG DEJUN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918158699" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ZHANG, DEJUN</last-name></addressbook></inventor><inventor mxw-id="PPAR918990530" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ZHANG, DEJUN</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918138393" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MIAO LEI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918167984" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>MIAO, LEI</last-name></addressbook></inventor><inventor mxw-id="PPAR918980369" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>MIAO, LEI</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918168873" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>XU JIANFENG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918166444" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>XU, JIANFENG</last-name></addressbook></inventor><inventor mxw-id="PPAR918991138" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>XU, JIANFENG</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918172997" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>QI FENGYAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918158705" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>Qi, Fengyan</last-name></addressbook></inventor><inventor mxw-id="PPAR918988700" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>Qi, Fengyan</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918171032" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>ZHANG QING</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918173473" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>ZHANG, QING</last-name></addressbook></inventor><inventor mxw-id="PPAR918988894" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>ZHANG, QING</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918153907" load-source="docdb" sequence="6" format="epo"><addressbook><last-name>LI LIXIONG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918139106" load-source="docdb" sequence="6" format="intermediate"><addressbook><last-name>LI, LIXIONG</last-name></addressbook></inventor><inventor mxw-id="PPAR918988082" load-source="patent-office" sequence="6" format="original"><addressbook><last-name>LI, LIXIONG</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918157429" load-source="docdb" sequence="7" format="epo"><addressbook><last-name>MA FUWEI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918157664" load-source="docdb" sequence="7" format="intermediate"><addressbook><last-name>MA, FUWEI</last-name></addressbook></inventor><inventor mxw-id="PPAR918991766" load-source="patent-office" sequence="7" format="original"><addressbook><last-name>MA, FUWEI</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918159694" load-source="docdb" sequence="8" format="epo"><addressbook><last-name>GAO YANG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918170374" load-source="docdb" sequence="8" format="intermediate"><addressbook><last-name>GAO, YANG</last-name></addressbook></inventor><inventor mxw-id="PPAR918986285" load-source="patent-office" sequence="8" format="original"><addressbook><last-name>GAO, YANG</last-name><address><street>Huawei Technologies Co.,Ltd., Intellectual Property Department B1-3A, Bantian, Longgang District</street><city>Shenzhen</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918991547" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Kreuz, Georg Maria</last-name><suffix>et al</suffix><iid>101240889</iid><address><street>Huawei Technologies Dessauerstrasse 3</street><city>80992 Munich</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548803670" load-source="docdb">AT</country><country mxw-id="DS548851630" load-source="docdb">BE</country><country mxw-id="DS548856410" load-source="docdb">BG</country><country mxw-id="DS548874163" load-source="docdb">CH</country><country mxw-id="DS548838746" load-source="docdb">CY</country><country mxw-id="DS548803671" load-source="docdb">CZ</country><country mxw-id="DS548851631" load-source="docdb">DE</country><country mxw-id="DS548838747" load-source="docdb">DK</country><country mxw-id="DS548838748" load-source="docdb">EE</country><country mxw-id="DS548856090" load-source="docdb">ES</country><country mxw-id="DS548856411" load-source="docdb">FI</country><country mxw-id="DS548856412" load-source="docdb">FR</country><country mxw-id="DS548851632" load-source="docdb">GB</country><country mxw-id="DS548838749" load-source="docdb">GR</country><country mxw-id="DS548851633" load-source="docdb">HR</country><country mxw-id="DS548803672" load-source="docdb">HU</country><country mxw-id="DS548874164" load-source="docdb">IE</country><country mxw-id="DS548838750" load-source="docdb">IS</country><country mxw-id="DS548856413" load-source="docdb">IT</country><country mxw-id="DS548838751" load-source="docdb">LI</country><country mxw-id="DS548802402" load-source="docdb">LT</country><country mxw-id="DS548853277" load-source="docdb">LU</country><country mxw-id="DS548802403" load-source="docdb">LV</country><country mxw-id="DS548802404" load-source="docdb">MC</country><country mxw-id="DS548853278" load-source="docdb">MK</country><country mxw-id="DS548853279" load-source="docdb">MT</country><country mxw-id="DS548851634" load-source="docdb">NL</country><country mxw-id="DS548856414" load-source="docdb">NO</country><country mxw-id="DS548802405" load-source="docdb">PL</country><country mxw-id="DS548874165" load-source="docdb">PT</country><country mxw-id="DS548851635" load-source="docdb">RO</country><country mxw-id="DS548802410" load-source="docdb">SE</country><country mxw-id="DS548856091" load-source="docdb">SI</country><country mxw-id="DS548856415" load-source="docdb">SK</country><country mxw-id="DS548802411" load-source="docdb">SM</country><country mxw-id="DS548838752" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669914" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present disclosure relates to a method, apparatus, and system for encoding and decoding signals. The encoding method includes: converting a first-domain signal into a second-domain signal; performing Linear Prediction (LP) processing and Long-Term Prediction (LTP) processing for the second-domain signal; obtaining a long-term flag value according to a decision criterion; obtaining a second-domain predictive signal according to the LP processing result and the LTP processing result when the long-term flag value is a first value; obtaining a second-domain predictive signal according to the LP processing result when the long-term flag value is a second value; converting the second-domain predictive signal into a first-domain predictive signal, and calculating a first-domain predictive residual signal; and outputting a bit stream that includes the first-domain predictive residual signal.
<img id="iaf01" file="imgaf001.tif" wi="65" he="94" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499287" lang="EN" source="EPO" load-source="docdb"><p>The present disclosure relates to a method, apparatus, and system for encoding and decoding signals. The encoding method includes: converting a first-domain signal into a second-domain signal; performing Linear Prediction (LP) processing and Long-Term Prediction (LTP) processing for the second-domain signal; obtaining a long-term flag value according to a decision criterion; obtaining a second-domain predictive signal according to the LP processing result and the LTP processing result when the long-term flag value is a first value; obtaining a second-domain predictive signal according to the LP processing result when the long-term flag value is a second value; converting the second-domain predictive signal into a first-domain predictive signal, and calculating a first-domain predictive residual signal; and outputting a bit stream that includes the first-domain predictive residual signal.</p></abstract><description mxw-id="PDES63955344" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The present disclosure relates to speech encoding and decoding, and in particular, to methods, apparatuses, and system for encoding and decoding signals.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">One of the coding models widely applied in the speech coding field is Code Excited Linear Prediction (CELP) model. The CELP model uses an almost white excitation signal to excite two time-varying linear recursive filters. The excitation signal is generally selected out of a codebook composed of Gaussian white noise sequences. The feedback loop of each filter includes a predictor. One of the predictors is a long-term predictor (or a pitch predictor), which is represented by <i>P(z)</i>. <i>P(z)</i> is used to generate the tone structure of a voiced speech (for example, the fine structure of a spectrum). Another common predictor is a short-term predictor, represented by <i>F(z)</i>. <i>F(z)</i> is used to recover the short-term spectrum envelope of a speech. This model derives from its reverse process. That is, <i>F(z)</i> is used to remove the redundancy of a near sample point of the speech signal, and <i>P(z)</i> is used to remove the redundancy of a far sample point of the speech signal. A normalized residual signal is obtained through two levels of prediction. The residual signals take on standard normal distribution approximately.</p><p id="p0003" num="0003">When the CELP model is applied to the lossy compression field, a speech signal <i>x(i)</i> undergoes a Linear Predictive Coding (LPC) analysis first to obtain a LPC residual signal <i>res(i).</i> After the LPC residual signal <i>res(i)</i> is framed, each subframe signal undergoes a Long-Term Prediction (LTP) analysis to obtain a corresponding adaptive codebook and an adaptive codebook gain. The adaptive codebook may be searched out in many methods such as autocorrelation. After the long-term dependence of the LPC residual signal <i>res(i)</i> is removed, a LTP residual signal <i>x2(i)</i> is obtained. After an algebraic codebook is used to characterize or fit the LTP residual signal <i>x2(i),</i> the whole coding process is completed. Finally, the adaptive codebook and the fixed codebook are coded and written into the bit stream, and a joint vector quantization or a scalar<!-- EPO <DP n="2"> --> quantization is performed for the adaptive codebook gain and the fixed codebook gain. In the codebook, either the adaptive codebook gain or the fixed codebook gain is selected as the best gain. The index corresponding to the best gain is transmitted to the decoder. The whole coding process takes place in a Pulse Code Modulation (PCM) domain.</p><p id="p0004" num="0004">In the lossless compression field, a Moving Pictures Experts Group Audio Lossless Coding (MPEG ALC) apparatus also uses the short-term and long-term dependence of speech signals for prediction. Its prediction process is: first, a LPC analysis is performed for a speech signal, and a LPC coefficient undergoes entropy coding and is written into a bit stream; second, LTP is performed for the LPC residual signal to obtain the pitch and the pitch gain of the LTP, and the LPC residual signal is written into the bit stream; after the LTP, the LTP residual signal is obtained; and then, finally, the LTP residual signal undergoes entropy coding and is written into the bit stream, and the whole coding process is ended.</p><p id="p0005" num="0005">In the prior art described above, when the speech signal is less periodic, the LTP processing almost makes no contribution. In this case, the LTP residual signal is still written into the bit stream. Consequently, the pitch gain quantization consumes too many bits, and the compression performance of the coder is reduced.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0006" num="0006">Embodiments of the present disclosure provide method, apparatus, and system for encoding and decoding signals to improve the compression performance of the codec.</p><p id="p0007" num="0007">In a first aspect, a signal encoding method is provided. The method includes:
<ul><li>converting a first-domain signal into a second-domain signal;</li><li>performing a Linear Predictive (LP) processing and a Long-Term Prediction (LTP) processing for the second-domain signal;</li><li>obtaining a long-term flag value according to a decision criterion;</li><li>obtaining a second-domain predictive signal according to the LP processing result and the LTP processing result when the long-term flag value is a first value, or obtaining a second-domain predictive signal according to the LP processing result when the long-term flag value is a second value;</li><li>converting the second-domain predictive signal into a first-domain predictive signal, and calculating a first-domain predictive residual signal; and</li><li>outputting a bit stream that comprises the first-domain predictive residual signal.</li></ul><!-- EPO <DP n="3"> --></p><p id="p0008" num="0008">In a second aspect, a signal decoding method is provided. The method includes:
<ul><li>decoding a received bit stream to obtain a first-domain predictive residual signal;</li><li>decoding the first sample point of a current frame of the bit stream;</li><li>performing the following decoding steps consecutively for every sample point starting from the second sample point of the current frame:
<ul><li>calculating an Linear Predictive (LP) signal of the sample point according to a second-domain signal of the decoded sample point;</li><li>obtaining a second-domain predictive signal according to the LP signal and an LTP contribution signal if an obtained long-term flag value is a first value, wherein the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point;</li><li>obtaining a second-domain predictive signal according to the LP signal if they obtained long-term flag value is not a first value;</li><li>converting the second-domain predictive signal into a first-domain predictive signal, and decoding a first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and</li><li>converting the first-domain signal of the current sample point into a second-domain signal, and obtaining an LP residual signal according to the second-domain signal and the LP signal.</li></ul></li></ul></p><p id="p0009" num="0009">In a third aspect, a signal encoding apparatus is provided. The signal encoding apparatus includes:
<ul><li>a converting module, configured to convert a first-domain signal into a second-domain signal, and convert a second-domain predictive signal into a first-domain predictive signal;</li><li>an Linear Predictive (LP) module, configured to perform a LP processing for the second-domain signal;</li><li>an Long-Term Prediction (LTP) module, configured to perform a LTP processing for the second-domain signal;</li><li>a deciding module, configured to obtain a long-term flag value according to a decision criterion;<!-- EPO <DP n="4"> --></li><li>a second-domain prediction module, configured to obtain the second-domain predictive signal according to the LP processing result and the LTP processing result of the second-domain signal when the long-term flag value is a first value; and obtain the second-domain predictive signal according to the LP processing result of the second-domain signal when the long-term flag value is a second value;</li><li>a first-domain predictive residual module, configured to calculate a first-domain predictive residual signal according to the first-domain predictive signal;</li><li>an outputting module, configured to output a bit stream that includes the first-domain predictive residual signal.</li></ul></p><p id="p0010" num="0010">In a fourth aspect, a signal decoding apparatus is provided. The signal decoding apparatus includes:
<ul><li>a bit stream decoding module, configured to decode a received bit stream to obtain a first-domain predictive residual signal;</li><li>a first sample point decoding module, configured to decode a first sample point of the signals of a current frame;</li><li>an LP module, configured to calculate an LP signal of a current sample point according to a second-domain signal of the decoded sample point;</li><li>a second-domain prediction module, configured to obtain a second-domain predictive signal according to the LP signal and an LTP contribution signal if an obtained long-term flag value is a first value, or obtain a second-domain predictive signal according to the LP signal if the obtained long-term flag value is not a first value, where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point;</li><li>a converting module, configured to: convert the second-domain predictive signal into a first-domain predictive signal, and convert the first-domain signal of the current sample point into the second-domain signal;</li><li>a current sample point decoding module, configured to decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and</li><li>an LP residual module, configured to obtain an LP residual signal according to the second-domain signal and the LP signal.</li></ul><!-- EPO <DP n="5"> --></p><p id="p0011" num="0011">In a fifth aspect, a signal encoding/decoding (codec) system is provided. The signal codec system includes:
<ul><li>a signal encoding apparatus, configured to: convert a first-domain signal into a second-domain signal; perform a Linear Predictive (LP) processing and a Long-Term Prediction (LTP) processing for the second-domain signal; obtain a long-term flag value according to a decision criterion; obtain a second-domain predictive signal according to the LP processing result and the LTP processing result of the second-domain signal when the long-term flag value is a first value; or obtain a second-domain predictive signal according to the LP processing result of the second domain signal when the long-term flag value is a second value; convert the second-domain predictive signal into a first-domain predictive signal, and calculate a first-domain predictive residual signal; and output a bit stream that includes the first-domain predictive residual signal; and</li><li>a signal decoding apparatus, configured to: decode the received bit stream to obtain the first-domain predictive residual signal and the long-term flag value; decode a first sample point of the signals of a current frame; perform the following decoding steps consecutively for every current sample point from a second sample point of the signals of the current frame: calculate an LP signal of a current sample point according to the second-domain signal of the decoded sample point; obtain the second-domain predictive signal according to the LP signal and an LTP contribution signal if the obtained long-term flag value is the first value, or obtain the second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value, where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point; convert the second-domain predictive signal into the first-domain predictive signal, and decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and convert the first-domain signal of the current sample point into the second-domain signal, and obtain the LP residual signal according to the second-domain signal and the LP signal.</li></ul></p><p id="p0012" num="0012">According to the embodiments of the present disclosure, a subsequent encoding or decoding process is performed adaptively according to a long-term flag value; when the long-term flag value is a second value, it is not necessary to consider the LTP processing result, thus improving the compression performance of the codec.<!-- EPO <DP n="6"> --></p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0013" num="0013"><figref idrefs="f0001">FIG. 1</figref> is a flowchart of a signal encoding method according to the first embodiment of the present disclosure;</p><p id="p0014" num="0014"><figref idrefs="f0002">FIG. 2</figref> is a flowchart of a signal encoding method according to the second embodiment of the present disclosure;</p><p id="p0015" num="0015"><figref idrefs="f0003">FIG. 3</figref> shows signals of a frame after framing in the signal encoding method according to the second embodiment of the present disclosure;</p><p id="p0016" num="0016"><figref idrefs="f0004">FIG. 4</figref> is a flowchart of a signal decoding method according to the third embodiment of the present disclosure;</p><p id="p0017" num="0017"><figref idrefs="f0005">FIG. 5</figref> is a flowchart of a signal decoding method according to the fourth embodiment of the present disclosure;</p><p id="p0018" num="0018"><figref idrefs="f0006">FIG. 6</figref> is a flowchart of step 404 in the signal decoding method according to the fourth embodiment of the present disclosure;</p><p id="p0019" num="0019"><figref idrefs="f0007">FIG. 7</figref> is a flowchart of step 405 in the signal decoding method according to the fourth embodiment of the present disclosure;</p><p id="p0020" num="0020"><figref idrefs="f0008">FIG. 8</figref> is a simplified block diagram of a signal encoding apparatus according to a fifth embodiment of the present disclosure;</p><p id="p0021" num="0021"><figref idrefs="f0009">FIG. 9</figref> is a simplified block diagram of a signal decoding apparatus according to a sixth embodiment of the present disclosure; and</p><p id="p0022" num="0022"><figref idrefs="f0009">FIG. 10</figref> is a simplified block diagram of a signal codec system according to a seventh embodiment of the present disclosure.</p><heading id="h0005"><b>DETAILED DESCRIPTION</b></heading><p id="p0023" num="0023">The present disclosure is hereinafter described in more detail with reference to accompanying drawings and exemplary embodiments.</p><heading id="h0006"><i><u>First Embodiment</u></i></heading><p id="p0024" num="0024"><figref idrefs="f0001">FIG. 1</figref> is a flowchart of a signal encoding method according to the first embodiment of the present disclosure. The method includes the following steps:</p><p id="p0025" num="0025">Step 101: Convert a first-domain signal into a second-domain signal.</p><p id="p0026" num="0026">Step 102: Perform a Linear Predictive (LP) processing and a Long-Term Predication (LTP) processing for the second-domain signal.</p><p id="p0027" num="0027">Step 103: Obtain a long-term flag value according to a decision criterion.<!-- EPO <DP n="7"> --></p><p id="p0028" num="0028">Step 104: Obtain a second-domain predictive signal according to the LP processing result and the LTP processing result of the second-domain signal when the long-term flag value is a first value; or obtain a second-domain predictive signal according to the LP processing result of the second-domain signal when the long-term flag value is a second value.</p><p id="p0029" num="0029">Step 105: Convert the second-domain predictive signal into the first-domain predictive signal, and calculate a first-domain predictive residual signal.</p><p id="p0030" num="0030">Step 106: Output a bit stream that includes the first-domain predictive residual signal.</p><p id="p0031" num="0031">In this embodiment, the long-term flag value is obtained according to the decision criterion; the second-domain predictive signal is obtained according to the LP processing result and the LTP processing result when the long-term flag value is the first value, or the second-domain predictive signal is obtained according to the LP processing result when the long-term flag value is the second value, and the bit stream is obtained according to the second-domain predictive signal. In this embodiment, the subsequent encoding process is performed adaptively according to the long-term flag value. When the long-term flag value is the second value, it is not necessary to consider the LTP processing result, thus improving the compression performance of the codec.</p><heading id="h0007"><i><u>Second Embodiment</u></i></heading><p id="p0032" num="0032"><figref idrefs="f0002">FIG. 2</figref> is a flowchart of a signal encoding method according to the second embodiment of the present disclosure. In this embodiment, the first domain is a nonlinear domain, and further, the first domain may be an A-law or Mu-law domain; the second domain is a PCM domain; the LP processing is a Linear Predictive Coding (LPC) processing, and the LTP processing is a Long Term Prediction processing.</p><p id="p0033" num="0033">The method according to this embodiment includes the following steps:</p><p id="p0034" num="0034">Step 201: Convert a nonlinear-domain signal into a PCM-domain signal.</p><p id="p0035" num="0035">Input signals may be formatted in frames. A frame length <i>L</i> is represented by the number of samples in a frame. Supposing that <i>x(i)</i> represents the nonlinear-domain signal, and <i>y(i)</i> represents the PCM-domain signal, where <i>i</i> is the i<sup>th</sup> sample in the frame. Also supposing that the conversion process involves precision loss, and the corresponding back-conversion process involves no precision loss.<!-- EPO <DP n="8"> --></p><p id="p0036" num="0036">Step 202: Perform the LPC processing for the entire-frame signal <i>y(i)</i> of the PCM domain to obtain an LP processing result. The LP processing result includes a LPC predictive signal <i>y'(i)</i> which serves as an LP signal, and an LP coefficient, as expressed in the following equation: <maths id="math0001" num="(1)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="italic">lpc_order</mi></munderover></mstyle><msub><mi>a</mi><mi>j</mi></msub><mo>⋅</mo><mi mathvariant="italic">y</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>j</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0001" file="imgb0001.tif" wi="155" he="15" img-content="math" img-format="tif"/></maths><br/>
where <i>a<sub>j</sub></i> is an LP coefficient; <i>L</i> is the frame length; and <i>lpc_order</i> is an LP order. Supposing <i>y'(0)</i>=<i>0</i>, when i &lt; 0, <i>y(i)</i> = 0.</p><p id="p0037" num="0037">Step 203: Calculate a LPC residual signal <i>res(i)</i> that serves as an LP residual signal according to the PCM-domain signal <i>y(i)</i> and the LPC predictive signal <i>y'(i)</i>, where the LPC residual signal may also be regarded as the LP processing result. <maths id="math0002" num="(2)"><math display="block"><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>y</mi><mfenced><mi>i</mi></mfenced><mo>-</mo><mtable><mtr><mtd><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0002" file="imgb0002.tif" wi="150" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0038" num="0038">Step 204: Perform framing for the LPC residual signal <i>res(i),</i> and then perform an LTP processing to obtain an LTP processing result. The framing operation is optional, and it may be an adaptive framing operation. The LTP processing result includes a pitch and a pitch gain.</p><p id="p0039" num="0039">Specifically, the LTP processing in this step may include: performing a pitch search for the LPC residual signal, obtaining the best pitch of the LPC residual signal, or obtaining both the best pitch and the pitch gain of the LPC residual signal.</p><p id="p0040" num="0040">Specifically, this step may include:
<ul><li>if no framing is performed, performing the pitch search for the PCM-domain signal of the current frame to obtain the best pitch of the PCM-domain signal, and then performing a fine search for the LPC residual signal according to the best pitch of the PCM-domain signal to obtain the best pitch of the LPC residual signal or obtain both the best pitch and</li><li>the pitch gain of the LPC residual signal; if framing is performed, before the framing operation, performing pitch search for the PCM-domain signal of the current frame to obtain the best pitch of the PCM-domain signal, using the best pitch of the PCM-domain signal of the current frame as the best pitch of the first subframe, and performing framing for the LPC residual signal according to the best pitch; performing a fine search for the pitch of each subframe in the residual domain, namely, searching for the pitch of each subframe around the pitch of the previous subframe, thus facilitating differential coding<!-- EPO <DP n="9"> --> for the subframe pitch, and obtaining the best pitch of each subframe, or obtaining both the best pitch and the pitch gain.</li></ul></p><p id="p0041" num="0041">In the foregoing process of searching for a pitch, if no pitch gain is obtained, the pitch gain may be selected adaptively according to the obtained best pitch.</p><p id="p0042" num="0042">In the LPC processing, the prediction result of the first few samples is generally inaccurate. To avoid impacting the LTP performance, this embodiment specifies that the first M samples do not participate in the LTP processing, where M is a specified number. The pitch search is performed for the LPC residual signals <i>res(i)</i> of the samples other than the first M samples to obtain the pitch, pitch gain, and LTP residual signal <i>z(i)</i> of each subframe.</p><p id="p0043" num="0043"><figref idrefs="f0003">FIG. 3</figref> shows signals of a frame after framing in the signal encoding method according to the second embodiment of the present disclosure. The first M samples do not participate in the framing or LTP processing, and the relation between M and <i>lpc_order</i> is: 0 ≤ M ≤ <i>lpc_order. T<sub>1</sub></i> represents the pitch of the first subframe, and the samples from M to <i>T<sub>1</sub></i>+<i>M-1</i> are the samples in the buffer. Supposing <i>n<sub>0</sub></i>=<i>T<sub>1</sub></i>+<i>M</i>, then the samples from <i>n<sub>0</sub></i> to <i>n<sub>1</sub>-1</i> are the samples in the first subframe, and the length of the first subframe is <i>N<sub>1</sub></i>=<i>n<sub>1</sub>-n<sub>0</sub>.</i> By analogy, the samples from <i>n<sub>j-1</sub></i> to <i>n<sub>j</sub>-1</i> are the samples in subframe <i>j</i>, and the length of subframe <i>j</i> is <i>N<sub>j</sub></i>=<i>n<sub>j</sub>-n<sub>j-1</sub>.</i> The total quantity of samples of the signals in a frame is <i>L.</i></p><p id="p0044" num="0044">For the samples from 0 to <i>T<sub>1</sub></i>+<i>M-1,</i> the following equation applies: <maths id="math0003" num="(3)"><math display="block"><mtable><mtr><mtd><mi>z</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><mi>M</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0003" file="imgb0003.tif" wi="148" he="8" img-content="math" img-format="tif"/></maths><br/>
where <i>z(i)</i> are LTP residual signals.</p><p id="p0045" num="0045">For the samples of the first subframe, the following equation applies: <maths id="math0004" num="(4)"><math display="block"><mtable><mtr><mtd><msub><mi>z</mi><mi>i</mi></msub><mfenced><mi>i</mi></mfenced><mo>=</mo><msub><mi mathvariant="italic">res</mi><mi>i</mi></msub><mfenced><mi>i</mi></mfenced><mo>-</mo><msub><mi>g</mi><mn>1</mn></msub><mo>⋅</mo><mi mathvariant="italic">res</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><msub><mi>T</mi><mn>1</mn></msub></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>n</mi><mn>1</mn></msub><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0004" file="imgb0004.tif" wi="151" he="8" img-content="math" img-format="tif"/></maths><br/>
where <i>g<sub>1</sub></i> represents the pitch gain of the first subframe.</p><p id="p0046" num="0046">For the samples of subframe <i>j</i>, the following equation applies: <maths id="math0005" num="(5)"><math display="block"><mtable><mtr><mtd><msub><mi>z</mi><mi>j</mi></msub><mfenced><mi>i</mi></mfenced><mo>=</mo><msub><mi mathvariant="italic">res</mi><mi>j</mi></msub><mfenced><mi>i</mi></mfenced><mo>-</mo><msub><mi>g</mi><mi>j</mi></msub><mo>⋅</mo><msub><mi mathvariant="italic">res</mi><mi>j</mi></msub><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><msub><mi>T</mi><mi>j</mi></msub></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><msub><mi>n</mi><mrow><mi>j</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>n</mi><mi>j</mi></msub><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0005" file="imgb0005.tif" wi="151" he="10" img-content="math" img-format="tif"/></maths><br/>
where <i>T<sub>j</sub></i> represents the pitch of subframe <i>j</i>, and <i>g<sub>j</sub></i> represents the pitch gain of subframe <i>j</i>.</p><p id="p0047" num="0047">Step 205: Judge whether a product of an empirical factor and the energy of the LPC residual signals <i>res(i)</i> (which have undergone no LTP processing) is greater than the<!-- EPO <DP n="10"> --> energy of the LTP residual signals <i>z(i)</i> (which have undergone LTP processing); if so, proceed to step 206; otherwise, go to step 207. <maths id="math0006" num="(6)"><math display="block"><mi>E</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi></mrow><mrow><mi>L</mi><mo>-</mo><mn>1</mn></mrow></munderover></mstyle><mi mathvariant="italic">z</mi><mfenced><mi>i</mi></mfenced><mo>⋅</mo><mi mathvariant="italic">z</mi><mfenced><mi>i</mi></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="152" he="14" img-content="math" img-format="tif"/></maths> <maths id="math0007" num="(7)"><math display="block"><mi>E</mi><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mi>k</mi></mrow><mrow><mi>L</mi><mo>-</mo><mn>1</mn></mrow></munderover></mstyle><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced><mo>⋅</mo><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="152" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0048" num="0048">E1 represents the energy of the LTP residual signal <i>z(i)</i>; E represents the energy of the LPC residual signal <i>res(i)</i>; and k may be 0 or M. This step judges whether E*fac is greater than E1, where fac is the empirical factor. Generally, fac = 0.94.</p><p id="p0049" num="0049">As an another embodiment, an alternative of this step is: Judge whether the product of the empirical factor and the sum of absolute values of the LPC residual signals <i>res(i)</i> (which have undergone no LTP processing) is greater than the sum of absolute values of the LTP residual signals <i>z(i)</i> (which have undergone LTP processing); if so, proceed to step 206; otherwise, go to step 207.</p><p id="p0050" num="0050">Step 206: Assign a first value to the long-term flag Tflag. Specifically, let Tflag be 1. Go to step 208.</p><p id="p0051" num="0051">The long-term flag may be a trigger signal for the LTP processing. If Tflag is equal to 1, the LTP processing is performed.</p><p id="p0052" num="0052">Step 207: Assign a second value to the long-term flag Tflag. Specifically, let Tflag be 0. Go to step 210. If Tflag is equal to 0, the LTP processing is not performed.</p><p id="p0053" num="0053">Step 208: Obtain an LTP contribution signal <i>res'(i)</i> according to the pitch, pitch gain and the LPC residual signal <i>res(i).</i> This step may also be included in step 204. That is, this step may be included in the LTP processing, and the LTP processing result further includes the LTP contribution signal <i>res'(i)</i>, as expressed in equation (8): <maths id="math0008" num="(8)"><math display="block"><mi mathvariant="italic">resʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>g</mi><mo>⋅</mo><mi mathvariant="italic">res</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>T</mi></mfenced></math><img id="ib0008" file="imgb0008.tif" wi="150" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0054" num="0054">Step 209: Use the sum of the LPC predictive signal <i>y'(i)</i> and the LTP contribution signal <i>res'(i)</i> as the PCM predictive signal <i>y"(i),</i> and go to step 211, as expressed in equation (9): <maths id="math0009" num="(9)"><math display="block"><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>+</mo><mi mathvariant="italic">resʹ</mi><mfenced><mi>i</mi></mfenced></math><img id="ib0009" file="imgb0009.tif" wi="150" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0055" num="0055">Step 210: Use the LPC predictive signal <i>y'(i)</i> as the PCM predictive signal <i>y"(i)</i>, and proceed to step 211, as expressed in equation (10): <maths id="math0010" num="(10)"><math display="block"><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="148" he="10" img-content="math" img-format="tif"/></maths><!-- EPO <DP n="11"> --></p><p id="p0056" num="0056">Step 211: Convert the PCM predictive signal <i>y"(i)</i> into the nonlinear-domain predictive signal <i>x'(i),</i> as expressed in equation (11): <maths id="math0011" num="(11)"><math display="block"><mi mathvariant="italic">xʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">PCM</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>A</mi><mfenced open="[" close="]" separators=""><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced></mfenced></math><img id="ib0011" file="imgb0011.tif" wi="151" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0057" num="0057">The function <i>PCM</i>2<i>A</i>[] refers to converting the PCM-domain signal into the A-law domain signal.</p><p id="p0058" num="0058">Step 212: Calculate the difference between <i>x(i)</i> and <i>x'(i)</i> to obtain the nonlinear-domain predictive residual signal, and perform entropy coding for the nonlinear-domain predictive residual signal.</p><p id="p0059" num="0059">Step 213: Output the bit stream that includes the entropy code of the nonlinear-domain predictive residual signal and the long-term flag value. Specifically, when Tflag is equal to 0, the bit stream further includes an LPC coefficient <i>a<sub>j</sub></i>; when Tflag is equal to 1, the bit stream further includes an LPC coefficient <i>a<sub>j</sub>,</i> a pitch, and a pitch gain.</p><p id="p0060" num="0060">In some instances, in the length-varying coding field, when Tflag is equal to 0, the LTP processing is not performed, and there is no need to include the long term flag value in the bit stream; when Tflag is equal to 1, the LTP processing is performed, and the long term flag value is included in the bit stream, and this bit stream further includes an LPC coefficient <i>a<sub>j</sub></i>, a pitch, and a pitch gain.</p><p id="p0061" num="0061">In this embodiment, by judging whether the product of the empirical factor and the energy of the LPC residual signals (which have undergone no LTP processing) is greater than the energy of the LTP residual signals (which have undergone LTP processing), the system knows whether the LTP processing is performed or not. When the speech signals are less periodic, the LTP processing almost makes no contribution, and the LTP processing is not performed. Therefore, it is not necessary to consider the LTP contribution signals; fewer bits are consumed; and the compression performance of the encoder is improved.</p><heading id="h0008"><i><u>Third Embodiment</u></i></heading><p id="p0062" num="0062"><figref idrefs="f0004">FIG. 4</figref> is a flowchart of a signal decoding method according to the third embodiment of the present disclosure. The method in this embodiment may correspond to the signal encoding method in the first embodiment, and the definitions of the terms and<!-- EPO <DP n="12"> --> parameter expressions in this embodiment are the same as those in the first embodiment. The method includes the following steps:</p><p id="p0063" num="0063">Step 301: Decode a received bit stream to obtain the first-domain predictive residual signal.</p><p id="p0064" num="0064">Step 302: Decode the first sample point of the signals of the current frame.</p><p id="p0065" num="0065">Perform the decoding steps 303-306 consecutively for every current sample point from the second sample point of the signals of the current frame:</p><p id="p0066" num="0066">Step 303: Calculate the LP signal and the LP residual signal of the current sample point according to the second-domain signal of the decoded sample point.</p><p id="p0067" num="0067">Step 304: Obtain the second-domain predictive signal according to the LP signal and the LTP contribution signal if the obtained long-term flag value is the first value, or obtain the second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value, where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point.</p><p id="p0068" num="0068">Step 305: Convert the second-domain predictive signal into the first-domain predictive signal, and decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal.</p><p id="p0069" num="0069">Step 306: Convert the first-domain signal of the current sample point into the second-domain signal.</p><p id="p0070" num="0070">In this embodiment, the subsequent decoding process is performed adaptively according to the long-term flag value; when the long-term flag value is the second value, it is not necessary to consider the LTP contribution signals, thus simplifying the decoding process.</p><heading id="h0009"><i>Fourth Embodiment</i></heading><p id="p0071" num="0071"><figref idrefs="f0005">FIG. 5</figref> is a flowchart of a signal decoding method according to the fourth embodiment of the present disclosure. The method in this embodiment may correspond to the signal encoding method in the second embodiment, and the definitions of the terms and parameter expressions in this embodiment are the same as those in the second embodiment. The method in this embodiment includes the following steps:</p><p id="p0072" num="0072">Step 401: Decode a received bit stream to obtain the nonlinear-domain predictive residual signal and the long-term flag value.<!-- EPO <DP n="13"> --></p><p id="p0073" num="0073">In some instances, if the bit stream is a bit stream encoded with the long-term flag value, the bit stream may be decoded to obtain the long-term flag value. Specifically, when the long-term flag value Tflag is equal to 0, the bit stream further includes an LPC coefficient <i>a<sub>j</sub></i>; when Tflag is equal to 1, the bit stream further includes an LPC coefficient <i>a<sub>j</sub></i>, a best pitch, and may further include a pitch gain. If the bit stream includes no pitch gain, the method in this embodiment further includes: selecting the pitch gain adaptively according to the best pitch.</p><p id="p0074" num="0074">Supposing <i>d(i)</i> represents the nonlinear-domain predictive residual signal, the following equation applies: <maths id="math0012" num="(12)"><math display="block"><mtable><mtr><mtd><mi>d</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>x</mi><mfenced><mi>i</mi></mfenced><mo>-</mo><mi mathvariant="italic">xʹ</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>..</mn><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0012" file="imgb0012.tif" wi="147" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0075" num="0075">Therefore, the nonlinear-domain signal <i>x(i)</i> may be obtained through equation (13) after decoding: <maths id="math0013" num="(13)"><math display="block"><mtable><mtr><mtd><mi>x</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>d</mi><mfenced><mi>i</mi></mfenced><mo>+</mo><mi mathvariant="italic">xʹ</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>..</mn><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0013" file="imgb0013.tif" wi="147" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0076" num="0076">Step 402: Decode the first sample point of the signals of the current frame.</p><p id="p0077" num="0077">The first sample point has undergone no LPC processing. Therefore, the nonlinear-domain predictive signal of the first sample point is <i>x'(0)</i>=<i>0.</i> Equation (13) reveals that the first sample point of the nonlinear domain may be decoded without loss, namely, <i>x(0)</i>=<i>d(0).</i></p><p id="p0078" num="0078">For the subsequent decoding process, this embodiment needs to retain the PCM-domain signal <i>y(0)</i> of the first sample point and the LPC residual signal <i>res(0)</i> (namely, the LP residual signal), where: <maths id="math0014" num="(14)"><math display="block"><mi>y</mi><mfenced><mn>0</mn></mfenced><mo>=</mo><mi mathvariant="italic">A</mi><mo>⁢</mo><mn mathvariant="normal">2</mn><mo>⁢</mo><mi mathvariant="italic">PCM</mi><mfenced open="[" close="]" separators=""><mi mathvariant="italic">x</mi><mfenced><mn>0</mn></mfenced></mfenced><mo>,</mo><mi mathvariant="italic">res</mi><mfenced><mn>0</mn></mfenced><mo>=</mo><mi>y</mi><mfenced><mn>0</mn></mfenced></math><img id="ib0014" file="imgb0014.tif" wi="148" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0079" num="0079">The function <i>A</i>2<i>PCM</i>[] refers to converting the A-law domain signal into the PCM-domain signal.</p><p id="p0080" num="0080">In some instances, in the length-varying coding field, the received bit stream is decoded to obtain the first-domain predictive residual signal, without obtaining the long-term flag value which is the second value. When the decoding result includes the long-term flag value which is the first value, it indicates that the LTP module is enabled; otherwise, the LTP module is disabled. The system obtains the second-domain predictive signal according to the LP signal and the LTP contribution signal if the obtained long-term flag value is the first value, or obtains the second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value,<!-- EPO <DP n="14"> --> where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point.</p><p id="p0081" num="0081">Step 403: Judge whether the value of the long-term flag value is the first value; if it is the first value, proceed to steps 404-405; otherwise, skip to steps 406-408.</p><p id="p0082" num="0082">The LTP processing comes in two options: performed (Tflag = 1), and not performed (Tflag = 0). In this step, the system judges whether Tflag is equal to 1; alternatively, the system may judge whether Tflag is equal to 0 to know whether the LTP processing is performed. Different options of the LTP processing correspond to different subsequent decoding processes.</p><p id="p0083" num="0083">After completion of step 403 in this embodiment, the following decoding process is a cyclic recursive process. The following decoding steps are performed consecutively for every current sample point from the second sample point of the signals of the current frame:</p><p id="p0084" num="0084">In some instances, if the encoder side does not output the codes of the long-term flag value which is the second value, the system judges whether the first value is obtained as the long-term flag value; if it is the first value, steps 404-405 are performed; otherwise, steps 406-408 are performed.</p><p id="p0085" num="0085">Step 404: Decode the first <i>T</i><sub>1</sub> + <i>M -</i>1 samples except the first sample point.</p><p id="p0086" num="0086">The method in this embodiment corresponds to the signal encoding method in the second embodiment. That is, in the encoding process, the first M samples the current frame do not participate in the LTP processing. Therefore, in this embodiment, the first M samples and the samples in the buffer are decoded first.</p><p id="p0087" num="0087"><figref idrefs="f0006">FIG. 6</figref> is a flowchart of step 404 in the signal decoding method in the fourth embodiment of the present disclosure. Further, step 404 may include the following steps:</p><p id="p0088" num="0088">Step 4041: Calculate the LPC predictive signal <i>y'(i)</i> of the current sample point according to the PCM-domain signal <i>y(i)</i> of the decoded sample point through equation (15): <maths id="math0015" num="(15)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="italic">lpc_order</mi></munderover></mstyle><msub><mi>a</mi><mi>j</mi></msub><mo>⋅</mo><mi mathvariant="italic">y</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>j</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><mi>M</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0015" file="imgb0015.tif" wi="151" he="14" img-content="math" img-format="tif"/></maths><br/>
When i ≤ 0<i>, y</i>(<i>i</i>) = 0<i>.</i></p><p id="p0089" num="0089">For example, if the current sample point is the second sample point of the signals of the current frame, the decoded sample point is the first sample point of the<!-- EPO <DP n="15"> --> signals of the current frame. In this case, the decoding result in step 402 serves as a reference.</p><p id="p0090" num="0090">Step 4042: Obtain the PCM-domain predictive signal <i>y"(i)</i> according to the LPC predictive signal <i>y'(i)</i> of the current sample. Because the first <i>T<sub>1</sub></i>+<i>M</i> samples are not involved in the LTP processing, <i>y"(i)</i>=<i>y'(i).</i> That is, the value of the LPC predictive signal of the current sample point is assigned to the PCM-domain predictive signal <i>y"(i).</i></p><p id="p0091" num="0091">Step 4043: Convert the PCM-domain predictive signal <i>y"(i)</i> into the nonlinear-domain predictive signal <i>x'(i)</i>: <maths id="math0016" num="(16)"><math display="block"><mi mathvariant="italic">xʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">PCM</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>A</mi><mfenced open="[" close="]" separators=""><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced></mfenced></math><img id="ib0016" file="imgb0016.tif" wi="151" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0092" num="0092">Step 4044: Obtain the nonlinear-domain signal <i>x(i)</i> through equation (13) according to the nonlinear-domain predictive signal <i>x'(i)</i> and the nonlinear-domain predictive residual signal <i>d(i).</i></p><p id="p0093" num="0093">Step 4045: For the purpose of decoding subsequent samples, convert the nonlinear-domain signal <i>x(i)</i> into the PCM-domain signal <i>y(i),</i> and obtain the LPC residual signal <i>res(i)</i> according to the PCM-domain signal <i>y(i)</i> and the LPC predictive signal <i>y'(i).</i> <maths id="math0017" num="(17)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>y</mi><mfenced><mi>i</mi></mfenced><mo>-</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>T</mi><mn>1</mn></msub><mo>+</mo><mi>M</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0017" file="imgb0017.tif" wi="151" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0094" num="0094">Step 405: Decode all the subframe signals except the first <i>T<sub>1</sub></i>+<i>M</i> samples.</p><p id="p0095" num="0095"><figref idrefs="f0007">FIG. 7</figref> is a flowchart of step 405 in the signal decoding method according to the fourth embodiment of the present disclosure. Step 405 may include the following steps:</p><p id="p0096" num="0096">Step 4051: Calculate the LPC predictive signal <i>y'(i)</i> of the current sample point according to the PCM-domain signal <i>y(i)</i> of the decoded sample point through equation (18): <maths id="math0018" num="(18)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="italic">lpc_order</mi></munderover></mstyle><msub><mi>a</mi><mi>j</mi></msub><mo>⋅</mo><mi mathvariant="italic">y</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>j</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0018" file="imgb0018.tif" wi="151" he="14" img-content="math" img-format="tif"/></maths><br/>
When i ≤ 0, <i>y</i>(<i>i</i>) = 0.</p><p id="p0097" num="0097">For example, if the current sample point is the first sample point of the first subframe, the decoded samples are the first <i>T<sub>1</sub></i>+<i>M</i> samples. In this case, the decoding result in step 404 serves as a reference.</p><p id="p0098" num="0098">Step 4052: Calculate the PCM-domain predictive signal <i>y"(i)</i> according to the LPC predictive signal <i>y'(i)</i> of the current sample point through equation (19):<!-- EPO <DP n="16"> --></p><p id="p0099" num="0099"><maths id="math0019" num="(19)"><math display="block"><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>+</mo><mi mathvariant="italic">resʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>+</mo><mi>g</mi><mo>⋅</mo><mi mathvariant="italic">res</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>T</mi></mfenced></math><img id="ib0019" file="imgb0019.tif" wi="153" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0100" num="0100">Step 4053: Convert the PCM-domain predictive signal <i>y"(i)</i> into the nonlinear-domain predictive signal <i>x'(i)</i>: <maths id="math0020" num="(20)"><math display="block"><mi mathvariant="italic">xʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi mathvariant="italic">PCM</mi><mo>⁢</mo><mn>2</mn><mo>⁢</mo><mi>A</mi><mfenced open="[" close="]" separators=""><mi mathvariant="italic">yʹʹ</mi><mfenced><mi>i</mi></mfenced></mfenced></math><img id="ib0020" file="imgb0020.tif" wi="152" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0101" num="0101">Step 4054: Obtain the nonlinear-domain signal <i>x(i)</i> through equation (13) according to the nonlinear-domain predictive signal <i>x'(i)</i> and the nonlinear-domain predictive residual signal <i>d(i).</i></p><p id="p0102" num="0102">Step 4055: For the purpose of decoding subsequent samples, convert the nonlinear-domain signal <i>x(i)</i> into the PCM-domain signal <i>y(i),</i> and obtain the LPC residual signal <i>res(i)</i> according to the PCM-domain signal <i>y(i)</i> and the LPC predictive signal <i>y'(i).</i> <maths id="math0021" num="(21)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">res</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mi>y</mi><mfenced><mi>i</mi></mfenced><mo>-</mo><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><msub><mi>n</mi><mn>0</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0021" file="imgb0021.tif" wi="151" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0103" num="0103">After completion of decoding the current sample point, in the process of decoding subsequent samples, the LPC residual signal obtained in step 4055 is used to calculate the PCM-domain predictive signals of subsequent samples.</p><p id="p0104" num="0104">Step 406: Calculate the LPC predictive signal <i>y'(i)</i> of the current sample point according to the PCM-domain signal <i>y(i)</i> of the decoded sample point through equation (22): <maths id="math0022" num="(22)"><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">yʹ</mi><mfenced><mi>i</mi></mfenced><mo>=</mo><mstyle displaystyle="true"><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant="italic">lpc_order</mi></munderover></mstyle><msub><mi>a</mi><mi>j</mi></msub><mo>⋅</mo><mi mathvariant="italic">y</mi><mo>⁢</mo><mfenced separators=""><mi>i</mi><mo>-</mo><mi>j</mi></mfenced></mtd><mtd><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mi>L</mi><mo>-</mo><mn>1</mn></mtd></mtr></mtable></math><img id="ib0022" file="imgb0022.tif" wi="151" he="17" img-content="math" img-format="tif"/></maths><br/>
When i ≤ 0, <i>y</i>(<i>i</i>) = 0<i>.</i></p><p id="p0105" num="0105">Step 407: Use the LPC predictive signal <i>y'(i)</i> as the PCM-domain predictive signal, and convert the PCM-domain predictive signal into the nonlinear-domain predictive signal <i>x'(i).</i></p><p id="p0106" num="0106">Because the LTP module is disabled and no sample point of the current frame signals is involved in the LTP processing, <i>y"(i)</i>=<i>y'(i),</i> and <i>y'(i)</i> may be converted into <i>x'(i)</i> directly.</p><p id="p0107" num="0107">Step 408: Obtain the nonlinear-domain signal <i>x(i)</i> through equation (13) according to the nonlinear-domain predictive signal <i>x'(i)</i> and the nonlinear-domain predictive residual signal <i>d(i).</i></p><p id="p0108" num="0108">In this embodiment, the subsequent decoding process is performed adaptively according to the long-term flag value; when the long-term flag value is the second value,<!-- EPO <DP n="17"> --> it is not necessary to consider the LTP contribution signals, thus simplifying the decoding process.</p><heading id="h0010"><i>Fifth embodiment</i></heading><p id="p0109" num="0109"><figref idrefs="f0008">FIG. 8</figref> shows a simplified structure of a signal encoding apparatus according to the fifth embodiment of the present disclosure. The apparatus includes: a converting module 11, an LP module 12, an LTP module 13, a deciding module 14, a second-domain prediction module 15, a first-domain predictive residual module 16, and an outputting module 17. The converting module 11 is configured to: convert a first-domain signal into a second-domain signal, and convert a second-domain predictive signal into a first-domain predictive signal. The LP module 12 is configured to perform LP processing for the second-domain signal. The LTP module 13 is configured to perform LTP processing for the second-domain signal. The deciding module 14 is configured to obtain a long-term flag value according to a decision criterion. The second-domain prediction module 15 is configured to: obtain the second-domain predictive signal according to the LP processing result and the LTP processing result when the long-term flag value is the first value, and obtain the second-domain predictive signal according to the LP processing result when the long-term flag value is the second value. The first-domain predictive residual module 16 is configured to calculate the first-domain predictive residual signal according to the first-domain predictive signal. The outputting module 17 is configured to output a bit stream that includes the first-domain predictive residual signal.</p><p id="p0110" num="0110">The foregoing LP processing result may include an LP coefficient, LP signals, and LP residual signals. The foregoing bit stream may further include an LP coefficient.</p><p id="p0111" num="0111">Further, the LTP module 13 may perform pitch search for the LP residual signals to obtain the best pitch or both the best pitch and the pitch gain of the LP residual signals, and obtain the LTP contribution signals. The LTP processing result may include the best pitch or both the best pitch and the pitch gain, LTP contribution signals, and LTP residual signals.</p><p id="p0112" num="0112">The second-domain prediction module 15 is configured to use the sum of the LP residual signal and the LTP contribution signal as the second-domain predictive signal when the long-term flag value is the first value, or use the LP signal as the second-domain predictive signal when the long-term flag value is the second value.<!-- EPO <DP n="18"> --></p><p id="p0113" num="0113">The deciding module 14 may make a decision according to one of the two decision criteria, namely, (a) judge whether the product of the empirical factor and the energy of the LP residual signal is greater than the energy of the LTP residual signal, or (b) judge whether the product of the empirical factor and the sum of the absolute values of the LP residual signals is greater than the sum of the absolute values of the LTP residual signals. If the product of the empirical factor and the energy of the LP residual signal is greater than the energy of the LTP residual signal, or the product of the empirical factor and the sum of the absolute values of the LP residual signals is greater than the sum of the absolute values of the LTP residual signals, the deciding module 14 assigns the value of the first flag to the long-term flag (i.e. the long-term flag value is the first value); otherwise, the deciding module 14 assigns the value of the second flag to the long-term flag (i.e. the long-term flag value is the second value).</p><p id="p0114" num="0114">The apparatus in this embodiment may further include a pitch gain module which selects the pitch gain adaptively according to the obtained best pitch, and may further include a framing module which performs framing for the LP residual signals.</p><p id="p0115" num="0115">In this embodiment, the subsequent encoding process is performed adaptively according to the long-term flag value; when the long-term flag value is the second value, it is not necessary to consider the LTP processing result, thus improving the compression performance of the codec.</p><heading id="h0011"><i><u>Sixth Embodiment</u></i></heading><p id="p0116" num="0116"><figref idrefs="f0009">FIG. 9</figref> shows a simplified structure of a signal decoding apparatus according to a sixth embodiment of the present disclosure. The apparatus includes: a bit stream decoding module 21, a first sample point decoding module 22, an LP module 23, a second-domain prediction module 24, a converting module 25, a current sample point decoding module 26, and an LP residual module 27. The bit stream decoding module 21 is configured to decode a received bit stream to obtain the first-domain predictive residual signal. The first sample point decoding module 22 is configured to decode the first sample point of the signals of the current frame. The LP module 23 is configured to calculate the LP signal of the current sample point according to the second-domain signal of the decoded sample point. The second-domain prediction module 24 is configured to: obtain the second-domain predictive signal according to the LP signal and the LTP contribution signal if the obtained long-term flag value is the first value, or obtain the<!-- EPO <DP n="19"> --> second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value, where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point. The converting module 25 is configured to convert the second-domain predictive signal into the first-domain predictive signal, and convert the first-domain signal of the current sample point into the second-domain signal. The current sample point decoding module 26 is configured to decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal. The LP residual module 27 is configured to obtain the LP residual signal according to the second-domain signal and the LP signal.</p><p id="p0117" num="0117">Further, when the long-term flag value is the first value and the current sample point is involved in the LTP processing at the encoder, the second-domain prediction module 24 uses the sum of the LP signal and the LTP contribution signal as the second-domain predictive signal; when the long-term flag value is the first value and the current sample point is not involved in the LTP processing at the encoder, the second-domain prediction module 24 uses the LP signal as the second-domain predictive signal.</p><p id="p0118" num="0118">The apparatus in this embodiment may further include a pitch gain module which selects the pitch gain adaptively according to the obtained best pitch.</p><p id="p0119" num="0119">In this embodiment, the subsequent decoding process is performed adaptively according to the long-term flag value; when the long-term flag value is the second value, it is not necessary to consider the LTP contribution signals, thus simplifying the decoding process.</p><heading id="h0012"><i><u>Seventh Embodiment</u></i></heading><p id="p0120" num="0120"><figref idrefs="f0009">FIG. 10</figref> shows a simplified structure of a signal codec system according to a seventh embodiment of the present disclosure. The system includes a signal encoding apparatus 31 and a signal decoding apparatus 32.</p><p id="p0121" num="0121">The signal encoding apparatus 31 is configured to convert a first-domain signal into a second-domain signal; perform LP processing and LTP processing for the second-domain signal; obtain a long-term flag value according to a decision criterion; obtain the second-domain predictive signal according to the LP processing result and the LTP processing result when the long-term flag value is the first value; obtain the<!-- EPO <DP n="20"> --> second-domain predictive signal according to the LP processing result when the long-term flag value is the second value; convert the second-domain predictive signal into the first-domain predictive signal, and calculate the first-domain predictive residual signal; and output a bit stream that includes the first-domain predictive residual signal.</p><p id="p0122" num="0122">The signal decoding apparatus 32 is configured to decode the received bit stream to obtain the first-domain predictive residual signal; decode the first sample point of the signals of the current frame; perform the following decoding steps consecutively for every current sample point from the second sample point of the signals of the current frame: calculate the LP signal of the current sample point according to the second-domain signal of the decoded sample point; obtain the second-domain predictive signal according to the LP signal and the LTP contribution signal if the obtained long-term flag value is the first value, where the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point; or obtain the second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value; convert the second-domain predictive signal into the first-domain predictive signal, and decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and convert the first-domain signal of the current sample point into the second-domain signal, and obtain the LP residual signal according to the second-domain signal and the LP signal.</p><p id="p0123" num="0123">Further, the signal encoding apparatus 31 in this embodiment may be any signal coding apparatus described in the foregoing embodiments; and the signal decoding apparatus 32 may be any signal decoding apparatus described in the foregoing embodiments.<br/>
It is understandable to those skilled in the art that all or part of the steps of the foregoing method embodiments may be implemented by hardware instructed by a program. The program may be stored in a computer-readable storage medium. When being executed, the program performs steps of the foregoing method embodiments. The storage medium may be any medium suitable for storing program codes, for example, a Read Only Memory (ROM), a Random Access Memory (RAM), a magnetic disk, or a compact disk.</p></description><claims mxw-id="PCLM56976260" lang="EN" load-source="patent-office"><!-- EPO <DP n="21"> --><claim id="c-en-0001" num="0001"><claim-text>A signal encoding method, comprising:
<claim-text>converting a first-domain signal into a second-domain signal;</claim-text>
<claim-text>performing a Linear Prediction (LP) processing and a Long-Term Prediction (LTP) processing for the second-domain signal to obtain a LP processing result and a LTP processing result;</claim-text>
<claim-text>obtaining a long-term flag value according to a decision criterion;</claim-text>
<claim-text>if the long-term flag value is a first value, obtaining a second-domain predictive signal according to the LP processing result and the LTP processing result, or, if the long-term flag value is a second value, obtaining a second-domain predictive signal according to the LP processing result;</claim-text>
<claim-text>converting the second-domain predictive signal into a first-domain predictive signal, and calculating a first-domain predictive residual signal; and</claim-text>
<claim-text>outputting a bit stream that comprises the first-domain predictive residual signal.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, wherein the LP processing result comprises one or more LP coefficients, a LP signal, and a LP residual signal, and the bit stream further comprises the LP coefficients, wherein the LTP processing result comprises a LTP contribution signal.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 2, wherein the LTP processing result further comprises a best pitch of the LP residual signal or both the best pitch of the LP residual signal and the pitch gain of the LP residual signal; and wherein performing the LTP processing comprises:
<claim-text>performing a pitch search for the LP residual signal;</claim-text>
<claim-text>obtaining the best pitch of the LP residual signal or both the best pitch of the LP residual signal and the pitch gain of the LP residual signal; and</claim-text>
<claim-text>obtaining an LTP contribution signal according to the LP residual signal and one of the best pitch of the LP residual signal and the pitch gain of the LP residual signal.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of claim 1, 2 or 3, wherein before performing the LP processing, the method further comprises:<!-- EPO <DP n="22"> -->
<claim-text>performing a pitch search for the second-domain signal; and</claim-text>
<claim-text>obtaining a best pitch of the second-domain signal.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of claim 4, wherein performing the LTP processing comprises:
<claim-text>performing a fine search for the LP residual signal according to the best pitch of the second-domain signal;</claim-text>
<claim-text>obtaining the best pitch of the LP residual signal or both the best pitch of the LP residual signal and the pitch gain of the LP residual signal; and</claim-text>
<claim-text>obtaining an LTP contribution signal according to the LP residual signal and one of the best pitch of the LP residual signal and the pitch gain of the LP residual signal.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of claim 4, wherein when performing the fine search for the LP residual signal and obtaining the best pitch of the LP residual signal, the method further comprises:
<claim-text>selecting the pitch gain adaptively according to the obtained best pitch.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 1, wherein the LP processing result comprises a LP signal, and<br/>
wherein obtaining a second-domain predictive signal according to the LP processing result comprises:
<claim-text>using the LP signal as the second-domain predictive signal.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of claim 1, wherein the LP processing result comprises a LP signal, the LTP processing result comprises a LTP contribution signal, and<br/>
wherein obtaining a second-domain predictive signal according to the LP processing result and the LTP processing result comprises:
<claim-text>using the sum of the LP signal and the LTP contribution signal as the second-domain predictive signal.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of claim 1, wherein the LTP processing result further comprises a LP residual signal, and obtaining a long-term flag value according to the decision criterion comprises:<!-- EPO <DP n="23"> -->
<claim-text>judging whether the product of the energy of the LP residual signal and an empirical factor is greater than the energy of the LTP residual signal; and</claim-text>
<claim-text>assigning the first value to the long-term flag if the product of the energy of the LP residual signal and an empirical factor is greater than the energy of the LTP residual signal; or</claim-text>
<claim-text>assigning the second value to the long-term flag if the product of the energy of the LP residual signal and an empirical factor is not greater than the energy of the LTP residual signal.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of claim 2, wherein the LTP processing result further comprises a LP residual signal, and obtaining a long-term flag value according to the decision criterion comprises:
<claim-text>judging whether the product of the sum of the absolute values of the LP residual signals and an empirical factor is greater than the sum of the absolute values of the LTP residual signals; and</claim-text>
<claim-text>assigning the first value to the long-term flag if the product of the sum of the absolute values of the LP residual signals and an empirical factor is greater than the sum of the absolute values of the LTP residual signals; or</claim-text>
<claim-text>assigning the second value to the long-term flag if the product of the sum of the absolute values of the LP residual signals and an empirical factor is not greater than the sum of the absolute values of the LTP residual signals.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A signal decoding method, comprising:
<claim-text>decoding a received bit stream to obtain a first-domain predictive residual signal and a long-term flag value;</claim-text>
<claim-text>decoding the first sample point of a current frame of the first-domain predictive residual signal;</claim-text>
<claim-text>performing the following decoding steps consecutively for every current sample point of the current frame of the first-domain predictive residual from the second sample point of the current frame of the first-domain predictive residual signal:
<claim-text>calculating a Linear Prediction (LP) signal of a current sample point according to a second-domain signal of the decoded sample point;<!-- EPO <DP n="24"> --></claim-text>
<claim-text>if the long-term flag value is a first value, obtaining a second-domain predictive signal according to the LP signal and a Long-Term Prediction (LTP) contribution signal, wherein the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point; or</claim-text>
<claim-text>if the long-term flag value is not the first value, obtaining a second-domain predictive signal according to the LP signal;</claim-text>
<claim-text>converting the second-domain predictive signal into a first-domain predictive signal, and decoding a first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and</claim-text>
<claim-text>converting the first-domain signal of the current sample point into a second-domain signal, and obtaining an LP residual signal according to the second-domain signal and the LP signal.</claim-text></claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of claim 11, wherein obtaining a second-domain predictive signal according to the LP signal and an LTP contribution signal comprises:
<claim-text>if the current sample point in encoder side participates in the LTP processing, using the sum of the LP residual signal and the LTP contribution signal as the second-domain predictive signal;</claim-text>
<claim-text>if the current sample point in encoder side does not participate in the LTP processing, using the LPC predictive signal as the second-domain predictive signal.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>A signal encoding apparatus, comprising:
<claim-text>a converting module, configured to convert a first-domain signal into a second-domain signal, and convert a second-domain predictive signal into a first-domain predictive signal;</claim-text>
<claim-text>a Linear Prediction (LP) module, configured to perform LP processing for the second-domain signal;</claim-text>
<claim-text>a Long-Term Prediction (LTP) module, configured to perform LTP processing for the second-domain signal;</claim-text>
<claim-text>a deciding module, configured to obtain a long-term flag value according to a decision criterion;<!-- EPO <DP n="25"> --></claim-text>
<claim-text>a second-domain prediction module, configured to obtain a second-domain predictive signal according to the LP processing result and the LTP processing result if the long-term flag value is a first value, and obtain a second-domain predictive signal according to the LP processing result if the long-term flag value is a second value;</claim-text>
<claim-text>a first-domain predictive residual module, configured to calculate a first-domain predictive residual signal according to a first-domain predictive signal; and</claim-text>
<claim-text>an outputting module, configured to output a bit stream that comprises the coded first-domain predictive residual signal,</claim-text>
<claim-text>wherein at least one of the converting module, the LP module, the LTP module, the deciding module, the second-domain prediction module, the first-domain predictive residual module or the outputting module, is a hardware module.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The apparatus of claim 13, wherein the LP processing result comprises: one or more LP coefficients, a LP predictive signal, and a LP residual signal, and the bit stream comprises the LP coefficients;<br/>
the LTP module is configured to perform pitch search for the LP residual signal and obtain the best pitch of the LP residual signal, or the best pitch of the LP residual signal and the pitch gain of the LPC residual signal, and obtain an LTP contribution signal.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The apparatus of claim 14, wherein, the apparatus further comprises:
<claim-text>a pitch gain module, configured to selecting a pitch gain adaptively according to the obtained best pitch.</claim-text></claim-text></claim><claim id="c-en-0016" num="0016"><claim-text>The apparatus of claim 14, further comprising:
<claim-text>a second-domain prediction module, configured to use the sum of the LP residual signal and the LTP contribution signal as the second-domain predictive signal when the LTP flag value is a first value; and</claim-text>
<claim-text>a second-domain prediction module, configured to use the LPC predictive signal as the second-domain predictive signal when the LTP flag value is a second value.</claim-text></claim-text></claim><claim id="c-en-0017" num="0017"><claim-text>The apparatus of claim 14, wherein the LTP processing result further comprises a LP residual signal; and<br/>
<!-- EPO <DP n="26"> -->the deciding module is configured to judge whether the product of the empirical factor and the energy of the LP residual signal is greater than the energy of the LTP residual signal or judge whether the product of the empirical factor and the sum of the absolute values of the LP residual signals is greater than the sum of the absolute values of the LTP residual signals;<br/>
if the product of the empirical factor and the energy of the LP residual signal is greater than the energy of the LTP residual signal or the product of the empirical factor and the sum of the absolute values of the LP residual signals is greater than the sum of the absolute values of the LTP residual signals, assigning the first value to the long-term flag;<br/>
if the product of the empirical factor and the energy of the LP residual signal is equal to or smaller than the energy of the LTP residual signal or the product of the empirical factor and the sum of the absolute values of the LP residual signals is equal to or smaller than the sum of the absolute values of the LTP residual signals, assigning the second value to the long-term flag.</claim-text></claim><claim id="c-en-0018" num="0018"><claim-text>A signal decoding apparatus, comprising:
<claim-text>a bit stream decoding module, configured to decode a received bit stream to obtain a first-domain predictive residual signal;</claim-text>
<claim-text>a first sample point decoding module, configured to decode a first sample point of a current frame signal;</claim-text>
<claim-text>an Linear Prediction (LP) module, configured to calculate a LP signal of a current sample point according to a second-domain signal of the decoded sample point;</claim-text>
<claim-text>a second-domain prediction module, configured to obtain a second-domain predictive signal according to the LP signal and a Long-Term Prediction (LTP) contribution signal if the obtained long-term flag value is a first value, or obtain a second-domain predictive signal according to the LP signal if the obtained long-term flag value is not a first value, wherein the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point;</claim-text>
<claim-text>a converting module, configured to convert the second-domain predictive signal into a first-domain predictive signal, and convert the first-domain signal of the current sample point into the second-domain signal;<!-- EPO <DP n="27"> --></claim-text>
<claim-text>a current sample point decoding module, configured to decode the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal; and</claim-text>
<claim-text>an LP residual module, configured to obtain an LP residual signal according to the second-domain signal and the LP signal,</claim-text>
<claim-text>wherein at least one of the bit stream decoding module, the first sample point decoding module, the LP module, the second-domain prediction module, the converting module, the current sample point decoding module or the LP residual module, is a hardware module.</claim-text></claim-text></claim><claim id="c-en-0019" num="0019"><claim-text>The apparatus of claim 18, wherein<br/>
if the long-term flag value is a first value and the current sample point in encoder participates in the LTP processing, using the sum of the LP residual signal and the LTP contribution signal as the second-domain predictive signal;<br/>
if the long-term flag value is a first value and the current sample point in encoder does not participate in the LTP processing, use the LPC predictive signal as the second-domain predictive signal.</claim-text></claim><claim id="c-en-0020" num="0020"><claim-text>A signal codec system, comprising:
<claim-text>a signal coding apparatus, configured to convert a first-domain signal into a second-domain signal, perform Linear Prediction (LP) processing and Long-Term Prediction (LTP) processing for the second-domain signal, obtain a long-term flag value according to a decision criterion; obtain a second-domain predictive signal according to the LP processing result and the LTP processing result if the long-term flag value is a first value, obtain a second-domain predictive signal according to the LP processing result if the long-term flag value is a second value, convert the second-domain predictive signal into a first-domain predictive signal, and calculate a first-domain predictive residual signal; and output a bit stream that includes the first-domain predictive residual signal;</claim-text>
<claim-text>a signal decoding apparatus, configured to decode the received bit stream to obtain the first-domain predictive residual signal and the long-term flag value, decode a first sample point of the signals of a current frame, and perform the following decoding steps consecutively for every current sample point from a second sample point of the signals of<!-- EPO <DP n="28"> --> the current frame: calculating an LP signal of a current sample point according to the second-domain signal of the decoded sample point, obtaining the second-domain predictive signal according to the LP signal and an LTP contribution signal if the obtained long-term flag value is the first value, or obtaining the second-domain predictive signal according to the LP signal if the obtained long-term flag value is not the first value, wherein the LTP contribution signal is obtained according to the LP residual signal of the decoded sample point, converting the second-domain predictive signal into the first-domain predictive signal, decoding the first-domain signal of the current sample point according to the first-domain predictive residual signal and the first-domain predictive signal, converting the first-domain signal of the current sample point into the second-domain signal, and obtaining the LP residual signal according to the second-domain signal and the LP signal.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667042" load-source="patent-office"><!-- EPO <DP n="29"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="139" he="190" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="63" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="146" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="160" he="185" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="160" he="178" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="160" he="141" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0009" num="9,10"><img id="if0009" file="imgf0009.tif" wi="156" he="213" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="157" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="164" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
