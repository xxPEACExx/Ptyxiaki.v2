<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680466-A1" country="EP" doc-number="2680466" kind="A1" date="20140101" family-id="46466135" file-reference-id="205009" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549222" ucid="EP-2680466-A1"><document-id><country>EP</country><doc-number>2680466</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12173562-A" is-representative="YES"><document-id mxw-id="PAPP154823145" load-source="docdb" format="epo"><country>EP</country><doc-number>12173562</doc-number><kind>A</kind><date>20120626</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445657" ucid="EP-12173562-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12173562</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988123781" load-source="ipcr">H04J   3/06        20060101AFI20121107BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988928794" load-source="docdb" scheme="CPC">H04J   3/0638      20130101 FI20140103BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180150" lang="DE" load-source="patent-office">Transparente Uhr mit niedriger Latenz</invention-title><invention-title mxw-id="PT132180151" lang="EN" load-source="patent-office">Low latency transparent clock</invention-title><invention-title mxw-id="PT132180152" lang="FR" load-source="patent-office">Horloge transparent à faible latence</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652073" load-source="docdb" ucid="US-20080075217-A1"><document-id format="epo"><country>US</country><doc-number>20080075217</doc-number><kind>A1</kind><date>20080327</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652074" load-source="docdb" ucid="US-20110051754-A1"><document-id format="epo"><country>US</country><doc-number>20110051754</doc-number><kind>A1</kind><date>20110303</date></document-id><sources><source name="SEA" category="Y" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652075" load-source="docdb" ucid="US-20120014377-A1"><document-id format="epo"><country>US</country><doc-number>20120014377</doc-number><kind>A1</kind><date>20120119</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652072" load-source="docdb" ucid="WO-2007098775-A1"><document-id format="epo"><country>WO</country><doc-number>2007098775</doc-number><kind>A1</kind><date>20070907</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>JASPERNEITE J ET AL:  "Enhancements to the time synchronization standard IEEE-1588 for a system of cascaded bridges", FACTORY COMMUNICATION SYSTEMS, 2004. PROCEEDINGS. 2004 IEEE INTERNATIO NAL WORKSHOP ON VIENNA, AUSTRIA SEPT. 22-24, 2004, PISCATAWAY, NJ, USA,IEEE, 22 September 2004 (2004-09-22), pages 239-244, XP010756406, DOI: 10.1109/WFCS.2004.1377716 ISBN: 978-0-7803-8734-8</text><sources><source mxw-id="PNPL45130876" load-source="docdb" name="SEA" category="Y"/></sources></nplcit><nplcit><text>MICHAEL D JOHAS TEENER ET AL:  "Overview and timing performance of IEEE 802.1AS", PRECISION CLOCK SYNCHRONIZATION FOR MEASUREMENT, CONTROL AND COMMUNICATION, 2008. ISPCS 2008. IEEE INTERNATIONAL SYMPOSIUM ON, IEEE, PISCATAWAY, NJ, USA, 22 September 2008 (2008-09-22), pages 49-53, XP031354122, ISBN: 978-1-4244-2274-6</text><sources><source mxw-id="PNPL45130877" load-source="docdb" name="SEA" category="Y"/></sources></nplcit><nplcit><text>SVEN MEIER ET AL:  "IEEE 1588 syntonization and synchronization functions completely realized in hardware", PRECISION CLOCK SYNCHRONIZATION FOR MEASUREMENT, CONTROL AND COMMUNICATION, 2008. ISPCS 2008. IEEE INTERNATIONAL SYMPOSIUM ON, IEEE, PISCATAWAY, NJ, USA, 22 September 2008 (2008-09-22), pages 1-4, XP031354119, ISBN: 978-1-4244-2274-6</text><sources><source mxw-id="PNPL45130878" load-source="docdb" name="SEA" category="Y"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918157204" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ABB RESEARCH LTD</last-name><address><country>CH</country></address></addressbook></applicant><applicant mxw-id="PPAR918138342" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ABB RESEARCH LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918990110" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ABB Research Ltd.</last-name><iid>100070070</iid><address><street>Affolternstrasse 44</street><city>8050 Zürich</city><country>CH</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918151376" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HONEGGER CLAUDIO</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR918167102" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HONEGGER, CLAUDIO</last-name></addressbook></inventor><inventor mxw-id="PPAR918992847" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HONEGGER, CLAUDIO</last-name><address><street>Im Ferch 46</street><city>8636 Wald</city><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR918147319" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>KIRRMANN HUBERT</last-name><address><country>CH</country></address></addressbook></inventor><inventor mxw-id="PPAR918170098" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>KIRRMANN, HUBERT</last-name></addressbook></inventor><inventor mxw-id="PPAR918985581" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>KIRRMANN, HUBERT</last-name><address><street>Im Rüteli 17</street><city>5405 Dättwil</city><country>CH</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918993459" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ABB Patent Attorneys</last-name><iid>101246581</iid><address><street>C/o ABB Schweiz AG Intellectual Property (CH-LI/IP) Brown Boveri Strasse 6</street><city>5400 Baden</city><country>CH</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548838522" load-source="docdb">AL</country><country mxw-id="DS548802123" load-source="docdb">AT</country><country mxw-id="DS548855704" load-source="docdb">BE</country><country mxw-id="DS548849601" load-source="docdb">BG</country><country mxw-id="DS548851668" load-source="docdb">CH</country><country mxw-id="DS548855705" load-source="docdb">CY</country><country mxw-id="DS548802124" load-source="docdb">CZ</country><country mxw-id="DS548838524" load-source="docdb">DE</country><country mxw-id="DS548855706" load-source="docdb">DK</country><country mxw-id="DS548855707" load-source="docdb">EE</country><country mxw-id="DS548803510" load-source="docdb">ES</country><country mxw-id="DS548849602" load-source="docdb">FI</country><country mxw-id="DS548851669" load-source="docdb">FR</country><country mxw-id="DS548838525" load-source="docdb">GB</country><country mxw-id="DS548855708" load-source="docdb">GR</country><country mxw-id="DS548838526" load-source="docdb">HR</country><country mxw-id="DS548802125" load-source="docdb">HU</country><country mxw-id="DS548851670" load-source="docdb">IE</country><country mxw-id="DS548855709" load-source="docdb">IS</country><country mxw-id="DS548849603" load-source="docdb">IT</country><country mxw-id="DS548855710" load-source="docdb">LI</country><country mxw-id="DS548849604" load-source="docdb">LT</country><country mxw-id="DS548855413" load-source="docdb">LU</country><country mxw-id="DS548849605" load-source="docdb">LV</country><country mxw-id="DS548849606" load-source="docdb">MC</country><country mxw-id="DS548855414" load-source="docdb">MK</country><country mxw-id="DS548855415" load-source="docdb">MT</country><country mxw-id="DS548803511" load-source="docdb">NL</country><country mxw-id="DS548873074" load-source="docdb">NO</country><country mxw-id="DS548803512" load-source="docdb">PL</country><country mxw-id="DS548855416" load-source="docdb">PT</country><country mxw-id="DS548851671" load-source="docdb">RO</country><country mxw-id="DS548855417" load-source="docdb">RS</country><country mxw-id="DS548803513" load-source="docdb">SE</country><country mxw-id="DS548802130" load-source="docdb">SI</country><country mxw-id="DS548873075" load-source="docdb">SK</country><country mxw-id="DS548873076" load-source="docdb">SM</country><country mxw-id="DS548849607" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669892" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention is concerned with synchronizing clocks within a communication network. Specifically, the present invention relates to a method and a bridging node (2) for handling a synchronization frame (1,21,22) using said bridging node (2) comprising two or more ports (3,4,5,6) connected to a communication network of an industrial process control system, in particular of a substation automation system. In particular, a method for handling a synchronization frame (1,21,22) producing a receive-time stamp (13) indicative of a receiving time of the synchronization frame (1,21,22) at a first port (3) of the bridging node (2), adding a receive-time stamp information in front of a header (31) of the synchronization frame (1,21,22), and forwarding of the synchronization frame (1,21,22) to a second port (4) of the bridging node (4).
<img id="iaf01" file="imgaf001.tif" wi="120" he="101" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499265" lang="EN" source="EPO" load-source="docdb"><p>The present invention is concerned with synchronizing clocks within a communication network. Specifically, the present invention relates to a method and a bridging node (2) for handling a synchronization frame (1,21,22) using said bridging node (2) comprising two or more ports (3,4,5,6) connected to a communication network of an industrial process control system, in particular of a substation automation system. In particular, a method for handling a synchronization frame (1,21,22) producing a receive-time stamp (13) indicative of a receiving time of the synchronization frame (1,21,22) at a first port (3) of the bridging node (2), adding a receive-time stamp information in front of a header (31) of the synchronization frame (1,21,22), and forwarding of the synchronization frame (1,21,22) to a second port (4) of the bridging node (4).</p></abstract><description mxw-id="PDES63955322" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD OF THE INVENTION</heading><p id="p0001" num="0001">The invention relates to the field of synchronizing clocks within a communication network of an industrial process control system, in particular of a substation automation system. Specifically, the present invention relates to a method of and a bridging node for handling synchronization frames.</p><heading id="h0002">BACKGROUND OF THE INVENTION</heading><p id="p0002" num="0002">In communication networks precise timing is crucial for operation. As networks grow in size and include more and more devices synchronization of clocks throughout the network is increasingly difficult. In state of the art precision time protocols (PTP) such as IEEE 1588 or IEEE 802.1AS a grandmaster clock MC may be connected to a GPS receiver (GPS: Global Positioning System), such that the grandmaster clock MC may be synchronized with an accurate time from one or more GPS satellites. According to these protocols, synchronization frames are distributed throughout the network to set ordinary, or slave, clocks according to a reference time information or timestamp from the grandmaster clock.</p><p id="p0003" num="0003">The original reference time information needs to be corrected for propagation delays incurred during propagation of the synchronization frames between two neighboring nodes of the network, as well as for residence delays incurred while processing synchronization frames at the nodes. Specifically, IEE1588-2008 introduces a transparent clock associated with network nodes or devices used to convey precision time protocol messages. The transparent clock modifies precision time protocol messages as they pass through the device by overwriting time delay correction fields within the message. To this purpose, timing information is needed including a point in time the message is received by the network device (receive-time), time spent within the network device from receiving to<!-- EPO <DP n="2"> --> sending (residence time), and a point in time the message is sent (send-time) to the neighbor node.</p><p id="p0004" num="0004">Accordingly the network device needs to store timing information including the receive-time, propagation delay, residence time and send-time in order to determine a correction to the original time information. A physical buffer of the network device is generally used for storing. Furthermore, information on the message needs to be stored in order to relate the timing information with the respective message at the time of correcting the original timing information and sending the message. Thus, a large overhead including extensive memory and protocols is generally needed to correct the original timing information according to IEE1588-2008.</p><p id="p0005" num="0005">In the patent application <patcit id="pcit0001" dnum="WO2007098775A"><text>WO 2007/098775</text></patcit> an improvement to the described standard is suggested, where the network device generates a receive-time upon reception of a message which is relevant to synchronization and inserts the receive-time into or appends the receive-time to the received message. The method according to <patcit id="pcit0002" dnum="WO2007098775A"><text>WO 2007/098775</text></patcit> uses an unused part or a part of the message reserved for other information for the insertion of the receive-time information.</p><p id="p0006" num="0006">However, the suggested improvement is only minor as the handling of PTP messages involves unnecessary delays. While sending the message screening of the message for the information necessary to correct the timestamp within the message is needed. Thus, at sending the timing information still needs to be stored temporarily in a physical buffer. The use of a physical buffer raises costs of synchronization.</p><p id="p0007" num="0007">Furthermore, the method is time intensive as the message needs to be screened, the timing information read and stored, time correction calculated, and inserted in the message. In addition, the method cannot be carried out while the message is sent, also known in the art as messaging on the fly. This results in limited capability to speed up the method.</p><heading id="h0003">DESCRIPTION OF THE INVENTION</heading><p id="p0008" num="0008">It is therefore an objective of the invention to streamline the process of network synchronization in a communication network of an industrial process control system, in particular a substation automation system. This objective is achieved by a method of<!-- EPO <DP n="3"> --> handling synchronization frames and a bridging node according to the independent claims. Preferred embodiments are evident from the dependent patent claims, wherein the claim dependency shall not be construed as excluding further meaningful claim combinations.</p><p id="p0009" num="0009">According to the invention, a precision time protocol message is sent as a time synchronization frame including a reference time to be distributed within a communication network of an industrial process control system, in particular a substation automation system. A bridging node within the communication network comprises two or more ports connected to the network, wherein the bridging node sends and receives messages in general and in particular synchronization frames. When the bridging node receives the synchronization frame a receive time stamp indicative of the receive time at a receiving port of the bridging node is produced. First time-correction information including the receive time stamp is then written to, and stored in, a field of the synchronization frame such as a preamble that time- and execution-wise precedes a header field of the received synchronization frame. In other words, the first time-correction information is prepended or added to a beginning of the synchronization frame as marked by a header of the synchronization frame. Subsequently, the synchronization frame including the first time-correction information is forwarded to a second port of the bridging node for further handling and sending to a neighbour node or device within the network.</p><p id="p0010" num="0010">As opposed to the <patcit id="pcit0003" dnum="WO2007098775A"><text>WO 2007/098775</text></patcit>, the present invention does not require unspecified "unused" fields located at unknown positions within the frame, but prepends the receive time information in a field originally used by a preamble of the received frame. This specific location enables subsequent on-the-fly manipulation of the synchronization frame at the second port of the bridging node, which ultimately reduces the need for intermediate storage memory at the second port and lowers processing time. Specifically, synchronization frames including the first time-correction information may be forwarded to a plurality of second, or send, ports of the bridging node.</p><p id="p0011" num="0011">In an advantageous embodiment of the invention, a propagation delay between a send-node that the synchronization frame originated from and the bridging node receiving the synchronization frame is included in the first time-correction information. In particular, the propagation delay may be appended to or concatenated with the receive-time stamp. Thus the relevant propagation delay is forwarded together with the receive time information only<!-- EPO <DP n="4"> --> to those second ports that will actually further handle the synchronization frame, and the propagation delay need not be distributed upfront to all potential send ports of the node.</p><p id="p0012" num="0012">In a further refined embodiment of the invention, the first time correction information is indicative of a difference of the propagation delay and the receive time stamp. Accordingly, some of the time correction effort is assigned to the first port, and less space is needed in the synchronization frame.</p><p id="p0013" num="0013">According to this embodiment, a send-time stamp is produced indicative of a send time of the synchronization frame from the second port of the bridging node. Second time correction information is calculated by summing (i) prior time correction information retrieved from, and previously stored at, a reference time correction field of the received synchronization frame, (ii) the first time correction information, i.e. the difference of the propagation delay and the receive time stamp, and (iii) the send time stamp. Accordingly, fewer calculations are due at the second port at send time, further benefitting an on-the-fly processing of the outgoing frame.</p><p id="p0014" num="0014">The present invention also relates to a bridging node with two or more ports connected to a communication network of an industrial process control system, in particular of a substation automation system, for receiving and sending a synchronization frame. The bridging node is adapted to produce a receive time stamp indicative of a receive time of the synchronization frame at a first port of the node, to calculate a first time correction information, and to write or store the latter in a correction field of the synchronization frame. The first time correction information is calculated as a sum of (i) a prior time correction information retrieved from the correction field of the received synchronization frame, and (ii) the difference of a send-to-bridging node propagation delay and the receive time stamp. Accordingly, some of the time correction update calculations are executed at the time of receiving the synchronization frame, and fewer calculations are due at the time of sending the synchronization frame by at least one second port of the bridging node, further benefitting on-the-fly processing of the outgoing frame.<!-- EPO <DP n="5"> --></p><heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0015" num="0015">The subject matter of the invention will be explained in more detail in the following text with reference to preferred exemplary embodiments which are illustrated in the attached drawings, in which:
<dl id="dl0001"><dt>Fig.1</dt><dd>schematically shows a bridging node comprised of four ports for handling a synchronization frame;</dd><dt>Fig.2</dt><dd>shows parts of an incoming synchronization frame;</dd><dt>Fig.3</dt><dd>shows parts of a modified synchronization frame; and</dd><dt>Fig.4</dt><dd>shows parts of an outgoing synchronization frame.</dd></dl></p><p id="p0016" num="0016">The reference symbols used in the drawings, and their meanings, are listed in summary form in the list of designations. In principle, identical parts are provided with the same reference symbols in the figures.</p><heading id="h0005">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading><p id="p0017" num="0017"><figref idrefs="f0001">Fig.1</figref> shows schematically handling of a synchronization frame 1, 21, 22 using a bridging node 2 according to the invention. The bridging node is comprised of four ports 3,4,5,6, wherein by way of example a first port 3 receives an incoming synchronization frame 1. However, one skilled in the art will understand that any other node 3,4,5,6 may receive an incoming synchronization frame 1 and one skilled in the art will apply necessary changes to the method laid out hereinafter. The incoming synchronization frame 1 is sent by a master clock 7 via a time route 25 and carries timing information for synchronization of clocks throughout the network, in particular slave clocks such as the processor clock 18.</p><p id="p0018" num="0018">After receiving the incoming synchronization frame 1 the first node 3 transfers the incoming synchronization frame 1 via a frame exchange 28 to a programmable array 8. Subsequently, the programmable array 8 modifies the incoming synchronization frame 1, wherein a receive-time stamp 13 taken from an internal clock 19 of the bridging node 2 is then written preferably to the beginning of the synchronization frame 1, 21, 22, in particular before a header field 31 of the synchronization frame 1, 21, 22. In an alternative<!-- EPO <DP n="6"> --> embodiment of the invention the receive time stamp 13 is stored in a correction field 32 of the synchronization frame 1, 21, 22.</p><p id="p0019" num="0019">The modified synchronization frame 21 is then forwarded via an internal frame route 23 to other nodes 4, 5, 6 of the bridging node 2 using the forwarding unit 20. For further processing, the modified synchronization frame 21 is received by respective programmable arrays 9, 10, 11 at the nodes 4, 5, 6.</p><p id="p0020" num="0020">By way of example a second port 4 of the bridging node 2 is used for further processing and forwarding an outgoing synchronization frame 22. However, one skilled in the art will understand that any other node 3, 4, 5, 6 may process and forward the outgoing synchronization frame 22 and one skilled in the art will apply necessary changes to the method laid out hereinafter.</p><p id="p0021" num="0021">The programmable array 9 fetches a send-time stamp 14 via a time route 24 from the internal clock 19 of the bridging node 2. Subsequently, the programmable array 9 calculates a first time correction information 34 as the sum of a prior time correction information 33 from the received synchronization frame 1, the send-time stamp 14, and the difference of the propagation delay 12 and the receive time-stamp 13. Subsequently, the prior time correction information 33 is further stored in the correction field 32 of the outgoing synchronization frame 22. Finally, the programmable array 9 forwards the outgoing synchronization frame 22 to said second node 4 for transmitting said outgoing synchronization frame 22 to a next node or a device within the communication network.</p><p id="p0022" num="0022">Alternatively, the programmable array 9 sends the synchronization frame without modifications to the incoming synchronization frame 1 and removing modifications made by the bridging node 2 where necessary. Subsequently, the programmable array 9 generates a follow-up message including the residence time and the propagation delay 12 and further transmits the follow-up message to a next node or a device within the communication network.</p><p id="p0023" num="0023">Additionally, the bridging node 2 can send an outgoing synchronization frame 22 via any other port 5, 6 in addition to the outgoing synchronization frame 22 sent by the second node 4 using the forwarding time 15, 16 at the respective node 5, 6. In this way synchronization via multiple outgoing routes 26, 26' is possible.<!-- EPO <DP n="7"> --></p><p id="p0024" num="0024">Furthermore, the bridging node may send an outgoing synchronization frame 22 to a device, e.g. a computer processor 17, connected by example via a fourth port 5 in order to synchronize the processor clock 18.</p><p id="p0025" num="0025"><figref idrefs="f0002">Fig.2</figref> shows part of said incoming synchronization frame 1 comprising a preamble 30, a header field 31, a correction frame 32 with a prior time correction information 33, and an master clock time 35 from the master clock 7. After receiving said incoming synchronization frame 1 by the bridging node 2 the preamble 30 is stripped of for further processing.</p><p id="p0026" num="0026"><figref idrefs="f0002">Fig.3</figref> shows parts of the modified synchronization frame 21, wherein said receive-time stamp 13 is written to the beginning of the modified synchronization frame 21, in particular before a header field 31 of the modified synchronization frame 21.</p><p id="p0027" num="0027"><figref idrefs="f0002">Fig. 4</figref> shows parts of the outgoing synchronization frame 22, wherein the time correction information 34 is removed and a message preamble according to the precision time protocol is appended before the header field 31. The time correction information 34 is calculated as the sum of prior time correction information 33, the send-time stamp 14, and the difference of the propagation delay 12 and the receive-time stamp 13 and subsequently written to the correction field 32.</p><heading id="h0006">LIST OF DESIGNATIONS</heading><p id="p0028" num="0028"><dl id="dl0002" compact="compact"><dt>1</dt><dd>Incoming synchronization frame</dd><dt>2</dt><dd>Bridging node</dd><dt>3</dt><dd>First Port</dd><dt>4</dt><dd>Second Port</dd><dt>5</dt><dd>Third Port</dd><dt>6</dt><dd>Fourth Port</dd><dt>7</dt><dd>Master clock</dd><dt>8</dt><dd>Programmable array</dd><dt>9</dt><dd>Programmable array</dd><dt>10</dt><dd>Programmable array</dd><dt>11</dt><dd>Programmable array</dd><dt>12</dt><dd>Propagation delay time<!-- EPO <DP n="8"> --></dd><dt>13</dt><dd>Receive-time stamp</dd><dt>14</dt><dd>Send-time stamp</dd><dt>15</dt><dd>Forwarding time stamp</dd><dt>16</dt><dd>Forwarding time stamp</dd><dt>17</dt><dd>Computer processor</dd><dt>18</dt><dd>Processor clock</dd><dt>19</dt><dd>Internal clock</dd><dt>20</dt><dd>Internal forwarding unit</dd><dt>21</dt><dd>Modified synchronization frame</dd><dt>22</dt><dd>Outgoing synchronization frame</dd><dt>23</dt><dd>Frame route</dd><dt>24</dt><dd>Time route</dd><dt>25</dt><dd>Incoming route</dd><dt>26</dt><dd>Outgoing route</dd><dt>26'</dt><dd>Outgoing route</dd><dt>27</dt><dd>Frame exchange</dd><dt>28</dt><dd>Frame exchange</dd><dt>29</dt><dd>Frame exchange</dd><dt>30</dt><dd>Preamble</dd><dt>31</dt><dd>Header field</dd><dt>32</dt><dd>Correction field</dd><dt>33</dt><dd>Prior time correction information</dd><dt>34</dt><dd>Time correction information</dd><dt>35</dt><dd>Master clock time</dd></dl></p></description><claims mxw-id="PCLM56976238" lang="EN" load-source="patent-office"><!-- EPO <DP n="9"> --><claim id="c-en-0001" num="0001"><claim-text>A method of handling a synchronization frame (1, 21, 22) in a bridging node (2) with two ports (3,4,5,6) connected to a communication network of an industrial process control system, in particular of a substation automation system, comprising
<claim-text>- producing a receive time stamp (13) indicative of a receive time of a received synchronization frame (1, 21, 22) at a first port (3) of the bridging node (2),</claim-text>
<claim-text>- writing first time-correction information including the receive time stamp (13) to a field of the synchronization frame that precedes a header field (31) of the received synchronization frame, and</claim-text>
<claim-text>- forwarding the synchronization frame (1, 21, 22) to a second port (4) of the bridging node.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1 wherein the first time-correction information includes a propagation delay (12) between a send-node of the synchronization frame (1, 21, 22) and the bridging node (2).</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 2 wherein the first time correction information is indicative of a difference of the propagation delay (12) and the receive-time stamp (13).</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 3 comprising
<claim-text>- producing a send time stamp (14) indicative of a send time of the synchronization frame (1, 21, 22) from the second port (4) of the bridging node (2), and</claim-text>
<claim-text>- calculating second time correction information (34) by summing
<claim-text>(i) a prior time correction information (33) retrieved from a correction field of the received synchronization frame,</claim-text>
<claim-text>(ii) the first time correction information (34), and</claim-text>
<claim-text>(iii) the send time stamp (14).</claim-text></claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to claim 4, comprising
<claim-text>- writing the second time correction information (34) in the correction field (32) of the synchronization frame (1, 21, 22), or<!-- EPO <DP n="10"> --></claim-text>
<claim-text>- generating and transmitting a follow-up frame including second time correction information (34).</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to any of the claims 1 to 5 comprising said bridging node (2) acting as a transparent clock according to the precision time protocol IEEE 1588.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A bridging node (2) comprising two ports (3,4,5,6) adapted to be connected to a communication network of an industrial process control system, in particular of a substation automation system, the bridging node (2) being adapted to
<claim-text>- produce a receive time stamp (13) indicative of a receive time of a received synchronization frame (1,21,22) at a first port (3) of the bridging node (2),</claim-text>
<claim-text>- calculate first time correction information (34) by summing
<claim-text>(i) a prior time correction information (33) retrieved from a correction field of the received synchronization frame, and</claim-text>
<claim-text>(ii) the difference of a propagation delay (12) between a send-node of the synchronization frame (1, 21, 22) and the bridging node (2) and the receive time stamp (13),</claim-text></claim-text>
<claim-text>- write the first time correction information for further processing in the correction field (32) of the synchronization frame (1,21,22), and</claim-text>
<claim-text>- forward the synchronization frame to a second port (4) of the bridging node (2).</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The bridging node according to claim 7, <b>characterized in that</b> it is adapted to
<claim-text>- produce a send time stamp (14) at the second port (4) indicative of a send time of the frame,</claim-text>
<claim-text>- calculate second time correction information (34) by summing the prior time correction information (33) and send time stamp (14), and</claim-text>
<claim-text>- write the second time correction information (34) in the correction field (32) of the synchronization frame (1, 21, 22).</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667020" load-source="patent-office"><!-- EPO <DP n="11"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="197" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="12"> --><figure id="f0002" num="2,3,4"><img id="if0002" file="imgf0002.tif" wi="145" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="159" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="158" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="158" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
