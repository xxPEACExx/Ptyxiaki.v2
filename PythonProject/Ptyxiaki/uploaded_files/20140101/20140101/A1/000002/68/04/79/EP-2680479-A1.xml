<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680479-A1" country="EP" doc-number="2680479" kind="A1" date="20140101" family-id="33449969" file-reference-id="311096" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549209" ucid="EP-2680479-A1"><document-id><country>EP</country><doc-number>2680479</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13177695-A" is-representative="NO"><document-id mxw-id="PAPP154823132" load-source="docdb" format="epo"><country>EP</country><doc-number>13177695</doc-number><kind>A</kind><date>20040504</date><lang>EN</lang></document-id><document-id mxw-id="PAPP246867067" load-source="docdb" format="original"><country>EP</country><doc-number>13177695.7</doc-number><date>20040504</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454520" ucid="EP-04731070-A" linkage-type="3" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>04731070</doc-number><kind>A</kind><date>20040504</date></document-id></priority-claim><priority-claim mxw-id="PPC140454826" ucid="US-44133503-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>44133503</doc-number><kind>A</kind><date>20030519</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988101664" load-source="docdb">H04L   1/00        20060101ALI20131128BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988110358" load-source="docdb">H04L   1/18        20060101AFI20131128BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988118200" load-source="docdb">H04Q   7/20        20060101A I20051110RMEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988128531" load-source="docdb">H04L   1/16        20060101ALI20131128BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988129187" load-source="docdb">H04Q   7/24        20060101A I20051110RMEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988098825" load-source="docdb" scheme="CPC">H04L   1/1832      20130101 FI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988099603" load-source="docdb" scheme="CPC">H04L   1/0026      20130101 LA20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988102050" load-source="docdb" scheme="CPC">H04L   1/1671      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988109958" load-source="docdb" scheme="CPC">H04L   1/187       20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988134251" load-source="docdb" scheme="CPC">H04L   1/1809      20130101 LI20130101BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988136127" load-source="docdb" scheme="CPC">H04L   1/1614      20130101 LI20130101BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180111" lang="DE" load-source="patent-office">Verfahren und Vorrichtung zur Bereitstellung der Steuerungsbestätigung für erweiterte Funkverbindung</invention-title><invention-title mxw-id="PT132180112" lang="EN" load-source="patent-office">Method and apparatus providing enhanced radio link control acknowledgement</invention-title><invention-title mxw-id="PT132180113" lang="FR" load-source="patent-office">Procédé et appareil permettant d'améliorer un accusé de réception de commande de liaison radio</invention-title><citations><patent-citations><patcit mxw-id="PCIT242652063" load-source="docdb" ucid="EP-0658028-A2"><document-id format="epo"><country>EP</country><doc-number>0658028</doc-number><kind>A2</kind><date>19950614</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652064" load-source="docdb" ucid="US-6557135-B1"><document-id format="epo"><country>US</country><doc-number>6557135</doc-number><kind>B1</kind><date>20030429</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>"Digital cellular telecommunications system (Phase 2+); General Packet Radio Service (GPRS); Mobile Station (MS) - Base Station System (BSS) interface; Radio Link Control/ Medium Access Control (RLC/MAC) protocol (3GPP TS 44.060 version 4.11.0 Release 4); ETSI TS 144 060", ETSI STANDARDS, LIS, SOPHIA ANTIPOLIS CEDEX, FRANCE, vol. 3-G2, no. V4.11.0, 1 April 2003 (2003-04-01), XP014010599, ISSN: 0000-0001</text><sources><source mxw-id="PNPL45130859" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>None</text><sources><source mxw-id="PNPL45130860" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><related-documents><relation type="division"><child-doc ucid="EP-13177695-A"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>13177695</doc-number><kind>A</kind><date>20040504</date></document-id></child-doc><parent-doc ucid="EP-04731070.1"><document-id load-source="patent-office" format="epo"><country>EP</country><doc-number>04731070.1</doc-number><date>20040504</date></document-id></parent-doc></relation></related-documents><parties><applicants><applicant mxw-id="PPAR918168502" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>CORE WIRELESS LICENSING SARL</last-name><address><country>LU</country></address></addressbook></applicant><applicant mxw-id="PPAR918141589" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>CORE WIRELESS LICENSING S.A.R.L.</last-name></addressbook></applicant><applicant mxw-id="PPAR918980791" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Core Wireless Licensing S.a.r.l.</last-name><iid>101292264</iid><address><street>16 Avenue Pasteur</street><city>2310 Luxembourg</city><country>LU</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918133490" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>GROENBERG PETRI</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR918158634" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>GROENBERG, PETRI</last-name></addressbook></inventor><inventor mxw-id="PPAR918993967" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>GRÖNBERG, Petri</last-name><address><street>Puistopiha 2A FIN-02610</street><city>Espoo</city><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR918153002" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SEBIRE GUILLAUME</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR918167836" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SEBIRE, GUILLAUME</last-name></addressbook></inventor><inventor mxw-id="PPAR918986032" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Sèbire, Guillaume</last-name><address><street>Munkkiniemen Puistotie 10829 00330</street><city>Helsinki</city><country>FI</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918979808" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Swindell &amp; Pearson Limited</last-name><iid>101236097</iid><address><street>48 Friar Gate</street><city>Derby Derbyshire DE1 1GY</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548837521" load-source="docdb">AT</country><country mxw-id="DS548801929" load-source="docdb">BE</country><country mxw-id="DS548872689" load-source="docdb">BG</country><country mxw-id="DS548803392" load-source="docdb">CH</country><country mxw-id="DS548801934" load-source="docdb">CY</country><country mxw-id="DS548854966" load-source="docdb">CZ</country><country mxw-id="DS548855038" load-source="docdb">DE</country><country mxw-id="DS548801935" load-source="docdb">DK</country><country mxw-id="DS548801936" load-source="docdb">EE</country><country mxw-id="DS548849674" load-source="docdb">ES</country><country mxw-id="DS548872690" load-source="docdb">FI</country><country mxw-id="DS548872691" load-source="docdb">FR</country><country mxw-id="DS548855039" load-source="docdb">GB</country><country mxw-id="DS548801937" load-source="docdb">GR</country><country mxw-id="DS548854967" load-source="docdb">HU</country><country mxw-id="DS548803393" load-source="docdb">IE</country><country mxw-id="DS548872692" load-source="docdb">IT</country><country mxw-id="DS548801942" load-source="docdb">LI</country><country mxw-id="DS548837522" load-source="docdb">LU</country><country mxw-id="DS548872693" load-source="docdb">MC</country><country mxw-id="DS548837523" load-source="docdb">NL</country><country mxw-id="DS548837524" load-source="docdb">PL</country><country mxw-id="DS548849675" load-source="docdb">PT</country><country mxw-id="DS548849240" load-source="docdb">RO</country><country mxw-id="DS548837525" load-source="docdb">SE</country><country mxw-id="DS548855040" load-source="docdb">SI</country><country mxw-id="DS548803398" load-source="docdb">SK</country><country mxw-id="DS548801943" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669879" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Methods and apparatuses are provided for operating a radio link protocol receiver when receiving data blocks from a transmitter. One method includes receiving a data block and making a determination as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message. If the determination is positive, then the reported bitmap covers the entire receive window, while if the determination is negative the reported bitmap covers only the beginning of the receive window and covers as many blocks as there are bits in the reported bitmap. Another method includes making a determination as to whether the size of the receive window is less than or equal to the bitmap size, and, if the determination is positive, the reported bitmap covers the entire receive window, while if the determination is negative, either a first partial bitmap covering an initial portion of the receive window is reported, or a next partial bitmap covering some portion other than the initial portion of the receive window is reported.
<img id="iaf01" file="imgaf001.tif" wi="78" he="117" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499252" lang="EN" source="EPO" load-source="docdb"><p>Methods and apparatuses are provided for operating a radio link protocol receiver when receiving data blocks from a transmitter. One method includes receiving a data block and making a determination as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message. If the determination is positive, then the reported bitmap covers the entire receive window, while if the determination is negative the reported bitmap covers only the beginning of the receive window and covers as many blocks as there are bits in the reported bitmap. Another method includes making a determination as to whether the size of the receive window is less than or equal to the bitmap size, and, if the determination is positive, the reported bitmap covers the entire receive window, while if the determination is negative, either a first partial bitmap covering an initial portion of the receive window is reported, or a next partial bitmap covering some portion other than the initial portion of the receive window is reported.</p></abstract><description mxw-id="PDES63955309" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD:</b></heading><p id="p0001" num="0001">This invention relates generally to wireless digital communications systems and terminals and, more specifically, this invention relates to an Enhanced Radio Link Control (RLC) acknowledgment technique to enable the use of a larger RLC window than is available with a conventional acknowledgment bitmap.</p><heading id="h0002"><b>BACKGROUND:</b></heading><p id="p0002" num="0002">RLC protocol performance is governed by, among other factors, the RLC window size (WS). The window size of a protocol indicates how many blocks of data (blocks) that a transmitter can send without the need to receive acknowledgment information from the receiver. Both of the peer RLC transmitter and receiver have an RLC transmit and an RLC receive window, respectively, of size WS. At any given time, there may be at most WS outstanding blocks in the transmit (receive) window. As an example, a window of size WS=1 implies the transmitter can only send one block at a time, and that an acknowledgment from the receiver is required after each transmitted block before the transmitter can send the next block. A window of size WS=64 implies that the transmitter can send up to 64 blocks without receiving an acknowledgment from the receiver. Hence the larger the window size, the larger is the effective data rate. Typically, a good balance between the window size, the maximum rate at which blocks are sent/received, and the available (radio) resources that the protocol can use is needed to ensure optimum data throughput of the protocol.</p><p id="p0003" num="0003">In the General Packet Radio Service (GPRS) RLC a WS=64 is available. However, a problem can arise when the amount of used radio resources becomes high (e.g., when four or more timeslots are used) and when the round-trip delay on the RLC layer is relatively long. For example, it may take up to about 200ms before an acknowledgment for a transmitted block is received. Under such conditions transmit window stalling regularly occurs (i.e., no new blocks can be sent, as all blocks within the transmit<!-- EPO <DP n="2"> --> window have already been transmitted). This problem is overcome in the Enhanced GPRS (EGPRS) RLC, which allows for defining the window size as a function of the number of allocated timeslots.</p><p id="p0004" num="0004">A disadvantage of the use of a large window size is the inherent need for a large acknowledgment bitmap. Ideally, the receiver should be able to send one acknowledgment bitmap that covers the entire receive window. In the acknowledgment bitmap there is one bit allocated per block in the WS, with each bit indicating the success or failure of the error-free reception of the corresponding block. However, a large acknowledgment bitmap may not fit within one RLC/MAC (Medium Access Control) control block. To this end a rather complex technique using bitmap compression and network-controlled partial bitmap reporting was introduced for EGPRS RLC, as well as the occasional dropping of channel quality reports from the mobile station.</p><p id="p0005" num="0005">The introduction of a new physical layer (flexible layer one) in the Global System for Mobile Communication/Enhanced Data rates for GSM Evolution (GSM/EDGE) Radio Access Network (GERAN) has motivated the need for a definition of new values for RLC parameters to allow for optimum RLC performance, while avoiding GPRS limitations with multislot transmission schemes and EGPRS complexity for acknowledgments.</p><p id="p0006" num="0006">In the prior art the network commands the mobile station to send either first partial bitmaps or next partial bitmaps, with or without channel quality reports, even in those cases where the RLC receiver (the mobile station in a downlink (DL) data transfer) may have better insight as to which partial bitmap(s) should be sent.</p><p id="p0007" num="0007">However, the data transfer could be also to the opposite direction (on the uplink (UL) from the mobile station to the network). In this case the current specifications allow either first partial bitmaps or next partial bitmaps to be sent, but the strategy to be used in this context has not been determined.</p><p id="p0008" num="0008">As was noted above, in EGPRS the problem of accommodating extensive acknowledgment information in one RLC/MAC control block was addressed by a<!-- EPO <DP n="3"> --> combination of network-controlled partial bitmap reporting, bitmap compression and dropping channel quality reports occasionally from the acknowledgment message. These mechanisms are defined in 3GPP TS 44.060 §§ 9.1.8.2 and 9.1.10. However, these approaches do not provide an optimum solution.</p><heading id="h0003"><b>SUMMARY OF THE PREFERRED EMBODIMENTS</b></heading><p id="p0009" num="0009">The foregoing and other problems are overcome, and other advantages are realized, in accordance with the presently preferred embodiments of this invention.</p><p id="p0010" num="0010">This invention both addresses and solves the problem of fitting acknowledgment information (along with other information, such as channel quality measurements) within one RLC/MAC control block, when a large window size is used, through the use ofRLC receiver-controlled partial bitmap strategies.</p><p id="p0011" num="0011">The invention provides improvements over both the GPRS and EGPRS solutions. The invention improves GPRS RLC operation by avoiding a loss of throughput caused by frequent window stalling due to the use of too small a window size when multislot operation is used. The invention also improves EGPRS RLC operation by fitting both the acknowledgment information and the channel quality report within one RLC/MAC control block, thereby decreasing the signaling load (no separate acknowledgment and measurement reporting is required) while permitting measurement reporting to occur as frequently as is permitted in GPRS.</p><p id="p0012" num="0012">In accordance with a first aspect of this invention there are disclosed methods and apparatus for operating a radio link protocol receiver when receiving data blocks from a transmitter. The method includes receiving a data block and making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size (i.e., whether the size of the receive window is less than or equal to the bitmap size). The bitmap size is the maximum size in bits of the bitmap to be sent in the acknowledgment message If the determination is positive, then the method sets SSN=V(R) (i.e., the reported bitmap covers the entire receive window), while if the determination is negative the method sets SSN=[V(Q)+bitmap size] mod SNS (i.e., the reported bitmap covers only the beginning<!-- EPO <DP n="4"> --> of the receive window and covers as many blocks as there are bits in the reported bitmap).</p><p id="p0013" num="0013">In accordance with a second aspect of this invention there are disclosed methods and apparatus for operating the radio link protocol receiver when receiving data blocks from the transmitter. The method includes making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size (i.e., whether the size of the receive window is less than or equal to the bitmap size) and, if the determination is positive, the method sets SSN=V(R) (i.e., the reported bitmap covers the entire receive window), while if the determination is negative, the method determines whether a first partial bitmap (covering an initial portion of the receive window) or a next partial bitmap (covering some portion other than the initial portion of the receive window) is sent.</p><p id="p0014" num="0014">The use of this invention avoids a requirement to have the wireless network control what information (which partial bitmap, with or without the channel quality report) the mobi le station must report, at the price of only minor additional complexity in the mobile station (essentially only a comparison between two numbers, i.e., a comparison between the receive window size versus the reported bitmap size).</p><heading id="h0004"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0015" num="0015">The foregoing and other aspects of these teachings are made more evident in the following Detailed Description of the Preferred Embodiments, when read in conjunction with the attached Drawing Figures, wherein:
<ul><li><figref idrefs="f0001">Fig. 1</figref> illustrates RLC parameters in both RLC transmitter (<figref idrefs="f0001">Fig. 1A</figref>) and RLC receiver (<figref idrefs="f0001">Fig. 1B</figref>).</li><li><figref idrefs="f0002">Fig. 2</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 200 milliseconds (ms), and a two timeslot (2-TS) mobile station.</li><li><figref idrefs="f0002">Fig. 3</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap<!-- EPO <DP n="5"> --> size = RLC window size, Round-trip delay = 200 ms, 4-TS mobile station.</li><li><figref idrefs="f0003">Fig. 4</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 200 ms, 6-TS mobile station.</li><li><figref idrefs="f0003">Fig. 5</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 200 ms, 8-TS mobile station.</li><li><figref idrefs="f0004">Fig. 6</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 120 ms, 2-TS mobile station.</li><li><figref idrefs="f0004">Fig. 7</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 120 ms, 4-TS mobile station.</li><li><figref idrefs="f0005">Fig. 8</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 120 ms, 6-TS mobile station.</li><li><figref idrefs="f0005">Fig. 9</figref> is a graph showing RLC link throughput for different RLC window sizes, Bitmap size = RLC window size, Round-trip delay = 120 ms, 8-TS mobile station.</li><li><figref idrefs="f0006">Fig. 10</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 1 applied with bitmap size of 116, Round-trip delay = 200 ms, 2-TS mobile station.</li><li><figref idrefs="f0006">Fig. 11</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 1 applied with bitmap size of 116, Round-trip delay = 200 ms, 4-TS mobile station.</li><li><figref idrefs="f0007">Fig. 12</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 1 applied with bitmap size of 116, Round-trip delay = 200 ms, 6-TS mobile station.</li><li><figref idrefs="f0007">Fig. 13</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial<!-- EPO <DP n="6"> --> bitmap strategy 1 applied with bitmap size of 116, Round-trip delay = 200 ms, 8-TS mobile station.</li><li><figref idrefs="f0008">Fig. 14</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 2 applied with bitmap size of 116, Round-trip delay = 200 ms, 2-TS mobile station.</li><li><figref idrefs="f0008">Fig. 15</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 2 applied with bitmap size of 116, Round-trip delay = 200 ms, 4-TS mobile station.</li><li><figref idrefs="f0009">Fig. 16</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 2 applied with bitmap size of 116, Round-trip delay = 200 ms, 6-TS mobile station.</li><li><figref idrefs="f0009">Fig. 17</figref> is a graph showing RLC link throughput for different RLC window sizes, Partial bitmap strategy 2 applied with bitmap size of 116, Round-trip delay = 200 ms, 8-TS mobile station.</li><li><figref idrefs="f0010">Fig. 18</figref> is a graph showing RLC link throughput for different partial bitmap strategies, RLC window size = 512, Round-trip delay = 200 ms, 2-TS mobile station.</li><li><figref idrefs="f0010">Fig. 19</figref> is a graph showing RLC link throughput for different partial bitmap strategies, RLC window size = 512, Round-trip delay = 200 ms, 4-TS mobile station.</li><li><figref idrefs="f0011">Fig. 20</figref> is a graph showing RLC link throughput for different partial bitmap strategies, RLC window size = 512, Round-trip delay = 200 ms, 6-TS mobile station.</li><li><figref idrefs="f0011">Fig. 21</figref> is a graph showing RLC link throughput for different partial bitmap strategies, RLC window size = 512, Round-trip delay = 200 ms, 8-TS mobile station.</li><li><figref idrefs="f0012">Fig. 22</figref> is a simplified block diagram of a wireless communication system that contains a transmitter and a receiver that operate in accordance with this invention.<!-- EPO <DP n="7"> --></li><li><figref idrefs="f0012">Fig. 23</figref> is a logic flow diagram that illustrates the operation of a first partial bitmap strategy (PBS1) in accordance with this invention.</li><li><figref idrefs="f0013">Fig. 24</figref> is a logic flow diagram that illustrates the operation of a second partial bitmap strategy (PBS2) in accordance with a further embodiment of this invention.</li></ul></p><heading id="h0005"><b>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</b></heading><p id="p0016" num="0016">The presently preferred, but non-limiting, embodiment of this invention is based on RLC parameters defined in the specification: 3GPP TS 44.060. The most relevant parameters to the teachings of this invention are summarized below, and certain of these are shown in <figref idrefs="f0001">Figs. 1A and 1B</figref>.</p><p id="p0017" num="0017">Ack: Acknowledgment<br/>
EDGE: Enhanced Data rates for GSM Evolution<br/>
EGPRS: Enhanced GPRS<br/>
GERAN: GSM/EDGE Radio Access Network<br/>
GPRS: General Packet Radio Service<br/>
GSM: Global System for Mobile communications<br/>
MAC: Medium Access Control<br/>
Nack: Negative Acknowledgment<br/>
PCU: Packet Control Unit<br/>
RLC: Radio Link Control<br/>
WS: window size<br/>
SNS: sequence number space-the sequence number space denotes the range [0; SNS-1] in which the BSN takes its value.<br/>
BSN: block sequence number-each transmitted RLC data block is assigned a block sequence number equal to V(S) at the time of transmission.<br/>
V(A): acknowledge state variable-the acknowledge state variable contains the BSN value of the oldest RLC data block that has not been positively acknowledged by its peer. V(A) is updated after each reception of the RBB (Received block bitmap) from the peer RLC. V(S): send state variable-the send-state variable denotes the sequence number of the next<!-- EPO <DP n="8"> --> in-sequence RLC data block to be transmitted. V(S) is incremented by 1 (modulo SNS) after transmission of the RLC data block with BSN=V(S).<br/>
V(Q): receive window state variable-the receive window state variable denotes the lowest BSN not yet received (modulo SNS) and represents the start of the receive window.<br/>
V(R): receive state variable-the receive state variable denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS).<br/>
V(N): receive state array-an array of SNS elements indicating the receive status of WS RLC data blocks that are to follow the block BSN=V(Q)-1 (modulo SNS). The array is indexed relative to V(Q) modulo SNS.<br/>
SSN: starting sequence number<br/>
RB: reported bitmap-the acknowledgment information sent to the RLC transmitter by the RLC receiver contains both a starting sequence number (SSN) and a reported bitmap (RB). The SSN. indicates the reference point (BSN) of the RB as follows: the BSN values specified in the RB are interpreted by subtracting the bit position in the bitmap from the SSN modulo SNS, where the first position of the bitmap has index '0'. A valid BSN in the RB is one in the range [V(A) ≤ BSN ≤ V(S)] modulo SNS. The BSN is valid if and only if [BSN-V(A)] mod SNS &lt; [V(S)-V(A)] mod SNS.<br/>
PBSN: partial block sequence number is an RLC state variable denoting the highest BSN that was included in the bitmap when the previous acknowledgment message was transmitted. The PBSN is, however, reset to the value of V(Q) when the bitmap includes the highest BSN received thus far, i.e., when SSN=V(R).</p><p id="p0018" num="0018"><figref idrefs="f0012">Fig. 22</figref> is a simplified block diagram of a wireless communication system 10 that contains a transmitter 12, such as a base station, and a receiver 14, such as a mobile station, that operate in accordance with this invention. The receiver 14 is assumed to include suitable radio frequency (RF) receiver circuitry 14A, a receive controller 14B, such as a programmed microprocessor or a digital signal processor, that operates in accordance with the methods disclosed herein for either one or both of the first and second partial bitmap strategies, and suitable RF transmitter circuitry 14C for transmitting the acknowledgment information generated by the controller 14B back to the RLC transmitter 12.<!-- EPO <DP n="9"> --></p><p id="p0019" num="0019">In accordance with an aspect of this invention, it is assumed below that acknowledgment information reported by the RLC receiver 14 to the RLC transmitter 12 is sent within an RLC/MAC control message, hereafter referred to as a Packet Acknowledgment Message (PAM) 16 that fits within one RLC/MAC control block.</p><p id="p0020" num="0020">With the assumption that the PAM 16 provides a given bitmap size (hereafter referred to as bitmap size) for acknowledgment, an object of this invention is to allow the use of an RLC window size that is larger than the bitmap size, as follows. If the size of the receive window is less than or equal to the available bitmap size, then acknowledgment information covering the entire receive window is transmitted within the PAM. If the size of the receive window is larger than the available bitmap size, the RLC receiver constructs a partial bitmap that covers only a portion of the receive window according to either one of two methods or strategies (PBS1, PBS2), as explained in detail below.</p><heading id="h0006"><b>Partial bitmap strategy 1 PBS1</b></heading><p id="p0021" num="0021">During the execution of PBS1, the SSN is determined as follows (reference is also made to <figref idrefs="f0012">Fig. 23</figref>):</p><p id="p0022" num="0022">If[V(R)-V(Q)] mod SNS ≤ bitmap size (i.e., if the size of the receive window is less than or equal to the bitmap size), then SSN=V(R) (i.e., the reported bitmap covers the entire receive window), and the bitmap covers a certain amount (determined by the bitmap size) of RLC data blocks having a BSN smaller than the SSN.</p><p id="p0023" num="0023">If [V(R)-V(Q)] mod SNS &gt; bitmap size then, SSN=[V(Q)+bitmap size] mod SNS, and the bitmap covers the RLC data blocks having a BSN within the interval [V(Q), SSN-1] (i.e., the reported bitmap covers only the beginning of the receive window and covers as many blocks as there are bits in the reported bitmap).</p><p id="p0024" num="0024">Since the RLC data block pointed to by the V(Q) state variable is included in the bitmap in every case, the BOW (beginning of window) bit can be set to '1'. This means that the RLC transmitter 12 can assume an implicit acknowledgment to the RLC data blocks which have a BSN within the interval [V(A), SSN - bitmap size -1] if V(A) is not explicitly covered by the bitmap.<!-- EPO <DP n="10"> --></p><p id="p0025" num="0025">One significant difference between the PBS1 and the prior art is the manner in which the SSN is calculated, which provides enhanced coverage for the bitmap. It is thus an aspect of this invention to define how SSN is calculated and, hence, how the bitmap is defined.</p><heading id="h0007"><b>Partial Bitmap Strategy 2 PBS2</b></heading><p id="p0026" num="0026">During the execution of the PBS2, the mobile station 14 updates the PBSN parameter as specified in 3GPP TS 44.060, and constructs the bitmap as follows (reference is also made to <figref idrefs="f0013">Fig. 24</figref>):</p><p id="p0027" num="0027">If [V(R)-V(Q)] mod SNS ≤ bitmap size, then SSN=V(R) (i.e., if the size of the receive window is less than or equal to the bitmap size, the reported bitmap covers the entire receive window), and the bitmap covers a certain amount (determined by the bitmap size) of RLC data blocks having a BSN smaller than the SSN.</p><p id="p0028" num="0028">If[V(R)-V(Q)] mod SNS &gt; bitmap size (i.e., if the size of the receive window is greater than the bitmap size), then the mobile station 14 determines whether a first partial bitmap or a next partial bitmap is transmitted as follows:</p><p id="p0029" num="0029">If [PBSN-V(Q)] mod SNS &lt; WS and if [V(R) - (PBSN + PBSN_Threshold)] mod SNS &lt; WS, then a next partial bitmap is sent; otherwise a first partial bitmap is sent. That is, if the previous acknowledgment message carried a partial bitmap that did not cover the highest BSN received at that time (SSN did not equal V(R)), and if the difference between: (a) the BSN that has a value one higher than the highest BSN yet received, and (b) the highest BSN that was included in the bitmap when the previous acknowledgment message was transmitted, is larger than a certain threshold value PBSN_Threshold, then the next partial bitmap is sent provided the PBSN is still larger than V(Q); otherwise the first partial bitmap is sent.</p><p id="p0030" num="0030">In the foregoing, PBSN_Threshold is the threshold value that identifies a limit for the difference between PBSN and V(R), beyond which a next partial bitmap is generated.</p><p id="p0031" num="0031">If a first partial bitmap is sent, then SSN = [V(Q) + bitmap size] mod SNS, and the bitmap covers the RLC data blocks having a BSN within the interval [V(Q), SSN-1].<!-- EPO <DP n="11"> --> If the next partial bitmap is sent, its characteristics are:</p><p id="p0032" num="0032">If [V(R) - (PBSN + 1)] mod SNS &gt; bitmap size then SSN = [PBSN+1+bitmap size] mod SNS, and the bitmap covers the RLC data blocks having a BSN within the interval [PBSN+1, SSN-1].</p><p id="p0033" num="0033">If[V(R) - (PBSN+1)] mod SNS ≤ bitmap size, then SSN = V(R), and the bitmap covers a certain amount (determined by the bitmap size) of RLC data blocks having a BSN smaller than the SSN.</p><p id="p0034" num="0034">The BOW is set to '0' when a next partial bitmap is transmitted (i.e., the reported bitmap does not cover the beginning of the receive window), otherwise BOW is set to '1' (i.e., the reported bitmap covers the beginning of the receive window).</p><p id="p0035" num="0035">A significant difference between the PBS2 and the prior art is that it is the responsibility of the RLC receiver 14 to determine whether the first partial bitmap or the next partial bitmap is sent. It is thus a further object of this invention to define how the partial bitmap selection is performed, how the SSN is calculated, and, hence, how the bitmap is defined.</p><p id="p0036" num="0036">A performance evaluation of the use of this invention is now provided in the context of certain simulation assumptions. The simulation results of this invention are presented in <figref idrefs="f0002 f0003 f0004 f0005 f0006 f0007 f0008 f0009 f0010 f0011">Figs. 2-21</figref>. The following default parameters were used in the simulations: coding scheme CS-3; RLC round-trip delay = 200ms; polling interval = 24 RLC radio blocks; and PBSN_Threshold = 80.</p><p id="p0037" num="0037">Ideal case: bitmap size equals RLC window size. This illustrates how the RLC window size value affects the RLC protocol performance. This also illustrates the limitations of GPRS that appear beyond a given multislot configuration.</p><p id="p0038" num="0038">PBS1: the bitmap size is set to the value of 116, an exemplary value that corresponds to the estimated space in the RLC acknowledgment message, considering RLC/MAC overhead and channel quality reports. The RLC window size is then varied from 116 to 512, the PBS1 is applied, and the RLC link throughput is measured for different multislot<!-- EPO <DP n="12"> --> capabilities and carrier/interference (C/I) values. <figref idrefs="f0006">Figs. 10, 11</figref>, <figref idrefs="f0007">12 and 13</figref> show the results for 2-, 4-, 6- and 8-TS mobile stations 14, respectively.</p><p id="p0039" num="0039">Based on these results it is apparent that an RLC window size of 256 or 512 yields higher RLC link throughput than the RLC window size of 116, even if the bitmap size is not greater than 116. The PBS1 does not, however, provide as high a throughput as the ideal reference case, where the bitmap size equals to the RLC window size of 512.</p><p id="p0040" num="0040">PBS2: The RLC link throughput is again measured for various RLC window sizes, C/I values and multislot capabilities. The results for 2-, 4-, 6- and 8-TS mobiles are presented in <figref idrefs="f0008">Figs. 14, 15</figref>, <figref idrefs="f0009">16 and 17</figref>, respectively.</p><p id="p0041" num="0041">It is apparent from these results that the PBS2 performs well with large RLC window sizes, even with high multislot capabilities. In other words, the use of the PBS2 with the RLC window size of 512 provides a throughput that is almost as high as that achieved with the ideal reference case, where the bitmap size equals the RLC window size and has a value of 512.</p><p id="p0042" num="0042">Finally, the performance of PBS1 vs PBS2 was assessed. The measured RLC link throughput values obtained with both strategies are represented in <figref idrefs="f0010 f0011">Figs. 18 - 21</figref>. From these graphs it can be seen that the use of PBS2 gives somewhat higher throughput than the use of PBS1, especially for the case where the mobile station 14 supports large multislot capability.</p><p id="p0043" num="0043">Based on the foregoing simulation results the following conclusions can be drawn. First, the use of too small an RLC window size may restrict the throughput considerably. The higher the mobile station's multislot capability, and the longer the round-trip delay on the RLC layer, the larger is the required RLC window size. Second, the PBS1 used with the RLC window size of 256 or 512 clearly provides higher RLC link throughput than the use of an RLC window size of 116, in the situation where the bitmap size was restricted to the value of 116. Third, the PBS2 used with the RLC window size of 512 and the bitmap size of 116 gives substantially the same throughput as the ideal reference case, where the bitmap size is equal to the RLC window size and has a value of 512.<!-- EPO <DP n="13"> --></p><p id="p0044" num="0044">In a non-limiting example, the format of an RLC/MAC control block, when FLO is used, is defined in 3GPP TR 45.902. The RLC/MAC control block is defined to have 23 octets, of which the first two bits are the RLC/MAC header (uplink), and the remainder (182 bits) is the content. The content is assumed to be composed of:
<ul><li>6 bits: message type;</li><li>5 bits: TFI (Transport Format Indicator);</li><li>n bits: Ack/Nack description; and</li><li>45 bits: channel quality report (maximum assuming BEP).</li></ul></p><p id="p0045" num="0045">Given these constraints, there are available 126 bits for the Ack/Nack description, of which one bit is used for the Final Ack Indication and eight (or more) bits are used by the SSN. This leaves 117 bits available for the reported bitmap. The above-mentioned use of 116 bits for the reported bitmap assumes that a larger SSN may be required.</p><p id="p0046" num="0046">As was noted above, in the prior art the network commands the mobile station to send either the first partial bitmaps or the next partial bitmaps, with or without channel quality reports, even in those cases where the mobile station in a DL data transfer may have better insight as to which partial bitmap(s) should be sent. This invention addresses and solves this problem, by enabling the RLC receiver to make the partial bitmap decisions.</p><p id="p0047" num="0047">As was also noted, the data transfer could be also to the opposite direction (on the UL from the mobile station to the network). In this case the current specifications allow either first partial bitmaps or next partial bitmaps to be sent, but the strategy to be deployed has not been specified.. This invention thus also addresses and solves this problem, as the described methods can be used by the RLC receiver, whether it is located in the mobile station or in the network.</p><p id="p0048" num="0048">The foregoing description has provided by way of exemplary and non-limiting examples a full and informative description of the best method and apparatus presently contemplated by the inventors for carrying out the invention. However, various modifications and adaptations may become apparent to those skilled in the relevant arts in view of the foregoing description, when read in conjunction with the accompanying<!-- EPO <DP n="14"> --> drawings and the appended claims.</p><p id="p0049" num="0049">For example, while this invention has been presented within the context of GERAN, those skilled in the art should realize that this invention is not restricted or limited for use only with the GERAN or a GERAN-like wireless communications system. The teachings of this invention apply in general to a case when the size of the bitmap in the acknowledgment message can be smaller than the window size. Furthermore, while this invention is disclosed and claimed in the context of specifically named parameters, message types and numbers of bits, these are merely exemplary of the presently preferred embodiments of this invention, and are not to be construed in a limiting sense upon the practice of this invention.</p><p id="p0050" num="0050">Thus, all such and similar modifications of the teachings of this invention will still fall within the scope of this invention. Further, while the method and apparatus described herein are provided with a certain degree of specificity, the present invention could be implemented with either greater or lesser specificity, depending on the needs of the user. Further, some of the features of the present invention could be used to advantage without the corresponding use of other features. As such, the foregoing description should be considered as merely illustrative of the principles of the present invention, and not in limitation thereof.</p><p id="p0051" num="0051">According to a first aspect of the disclosure there is provided a method to operate a radio link protocol receiver when receiving data blocks from a transmitter, comprising:
<ul><li>receiving a data block; and</li><li>making a determination in the receiver as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message;</li><li>if the determination is positive, then the reported bitmap covers the entire receive window, while if the determination is negative the reported bitmap covers only the beginning of the receive window and covers as many blocks as there are bits in the reported bitmap.</li></ul></p><p id="p0052" num="0052">The method to operate a radio link protocol receiver when receiving data blocks from a transmitter, may comprise:
<ul><li>receiving a data block; and</li><li>making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size;</li><li>if the determination is positive, then setting SSN=V(R);<!-- EPO <DP n="15"> --></li><li>if the determination is negative, then setting SSN= [V(Q)+bitmap size] mod SNS, where V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</li></ul></p><p id="p0053" num="0053">If the determination is negative, the bitmap may cover those data blocks having a BSN within the interval [V(Q), SSN-1].</p><p id="p0054" num="0054">The method may further comprise setting a beginning of window bit to a one.</p><p id="p0055" num="0055">According to a second aspect of the disclosure there is provided a radio link protocol receiver operable for receiving data blocks from a transmitter, comprising:
<ul><li>means for receiving a data block; and</li><li>coupled to said receiving means, receive control means for making a determination as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message, where if the determination is positive, then the reported bitmap covers the entire receive window, while if the determination is negative the reported bitmap covers only the beginning of the receive window and covers as many blocks as there are bits in the reported bitmap.</li></ul></p><p id="p0056" num="0056">According to a third aspect of the disclosure there is provided a radio link protocol receiver operable for receiving data blocks from a transmitter, comprising:
<ul><li>means for receiving a data block; and</li><li>coupled to said receiving means, receive control means for making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size and, if the determination is positive, for setting SSN=V(R), otherwise if the determination is negative, for setting SSN=[V(Q)+bitmap size] mod SNS, where<!-- EPO <DP n="16"> --></li><li>V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</li></ul></p><p id="p0057" num="0057">If the determination is negative, the bitmap may cover those data blocks having a BSN within the interval [V(Q), SSN-1].</p><p id="p0058" num="0058">Said receive control means may further set a beginning of window bit to a one.</p><p id="p0059" num="0059">According to a fourth aspect of the disclosure there is provided a method to operate a radio link protocol receiver when receiving data blocks from a transmitter, comprising:
<ul><li>receiving a data block; and</li><li>making a determination at the receiver as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message; and, if the determination is positive, the reported bitmap covers the entire receive window, while if the determination is negative, either a first partial bitmap covering an initial portion of the receive window is reported, or a next partial bitmap covering a portion other than the initial portion of the receive window is reported.</li></ul></p><p id="p0060" num="0060">Determining whether a first partial bitmap or a next partial bitmap is sent may comprise:
<ul><li>determining if the previous acknowledgment message carried a partial bitmap that did not cover the highest BSN received at the time, and if the difference between: (a) the BSN that has a value one higher than the highest BSN yet received (V(R)), and (b) the highest BSN that was included in the bitmap when the previous acknowledgment message was transmitted (PBSN), is larger than a certain threshold value, PBSN_Threshold, then the next partial bitmap is sent provided that PBSN is still larger than the start of the receive window (V(Q));</li><li>otherwise the first partial bitmap is sent.</li></ul><!-- EPO <DP n="17"> --></p><p id="p0061" num="0061">According to a fifth aspect of the disclosure there is provided a method to operate a radio link protocol receiver when receiving data blocks from a transmitter, comprising:
<ul><li>receiving a data block; and</li><li>making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size;</li><li>if the determination is positive, then setting SSN=V(R);</li><li>if the determination is negative, determining whether a first partial bitmap or a next partial bitmap is sent, where</li><li>V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</li></ul></p><p id="p0062" num="0062">Determining whether a first partial bitmap or a next partial bitmap is sent may comprise: determining if [PBSN-V(Q)] mod SNS &lt; WS and if [V(R) - (PBSN+PBSN_Threshold)] mod SNS &lt; WS and, if the determination is positive, sending the next partial bitmap, otherwise sending the first partial bitmap, where<br/>
PBSN_Threshold is a threshold value that identifies a limit for the difference between PBSN and V(R), beyond which a next partial bitmap is generated, and WS denotes window size.</p><p id="p0063" num="0063">If the first partial bitmap is sent, then SSN may equal [V(Q) + bitmap size] mod SNS, and the bitmap may cover those data blocks having a BSN within the interval [V(Q), SSN-1].</p><p id="p0064" num="0064">The next partial bitmap characteristics may be established by:
<ul><li>determining if [V(R) - (PBSN + 1)] mod SNS &gt; bitmap size and, if the determination is positive, then SSN = [PBSN+1+bitmap size] mod SNS, and the bitmap covers those data blocks that have a BSN within the interval [PBSN+1, SSN-1]; and</li><li>if the determination is negative, then SSN = V(R), and the bitmap covers a number of data blocks, determined by the bitmap size, that have a BSN smaller than the SSN.</li></ul><!-- EPO <DP n="18"> --></p><p id="p0065" num="0065">The method may further comprise setting a beginning of window bit to a zero if the next partial bitmap is sent, or to a one if the first partial bitmap is sent.</p><p id="p0066" num="0066">According to a sixth aspect of the invention there is provided a radio link protocol receiver operable for receiving data blocks from a transmitter, comprising:
<ul><li>means for receiving a data block; and</li><li>coupled to said receiving means, receive control means for making a determination as to whether the size of a receive window is less than or equal to a bitmap size, where the bitmap size is the maximum size, in bits, of the bitmap to be reported in an acknowledgment message; and, if the determination is positive, the reported bitmap covers the entire receive window, while if the determination is negative, either a first partial bitmap covering an initial portion of the receive window is reported, or a next partial bitmap covering a portion other than the initial portion of the receive window is reported.</li></ul></p><p id="p0067" num="0067">Said controller, when determining whether the first partial bitmap or the next partial bitmap is sent, may make a determination as to whether the previous acknowledgment message carried a partial bitmap that did not cover the highest BSN received at the time, and if the difference between: (a) the BSN that has a value one higher than the highest BSN yet received (V(R)), and (b) the highest BSN that was included in the bitmap when the previous acknowledgment message was transmitted (PBSN), is larger than a certain threshold value, PBSN_Threshold, then the next partial bitmap is sent provided that PBSN is still larger than the start of the receive window (V(Q)); otherwise the first partial bitmap is sent.</p><p id="p0068" num="0068">According to a seventh aspect of the disclosure there is provided a radio link protocol receiver operable for receiving data blocks from a transmitter, comprising:
<ul><li>means for receiving a data block; and</li><li>coupled to said receiving means, receive control means for making a determination as to whether [V(R)-V(Q)] mod SNS ≤ bitmap size; if the determination is positive, for setting SSN=V(R); and if the determination is negative, for determining whether a first partial bitmap or a next partial bitmap is sent, where</li><li>V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is<!-- EPO <DP n="19"> --> assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</li></ul></p><p id="p0069" num="0069">Said receive control means may determine whether a first partial bitmap or a next partial bitmap by determining if [PBSN-V(Q)] mod SNS &lt; WS and if [V(R) - (PBSN + PBSN_Threshold)] mod SNS &lt; WS and, if the determination is positive, said receive control means sends the next partial bitmap, otherwise said receive control means sends the first partial bitmap, where<br/>
PBSN_Threshold is a threshold value that identifies a limit for the difference between PBSN and V(R), beyond which a next partial bitmap is generated, and WS denotes window size.</p><p id="p0070" num="0070">If the first partial bitmap is sent, said receive control means may set SSN = [V(Q) + bitmap size] mod SNS, and the bitmap covers those data blocks having a BSN within the interval [V(Q), SSN-1].</p><p id="p0071" num="0071">Said receive control means may establish the next partial bitmap characteristics by making a determination if [V(R) - (PBSN + 1)] mod SNS &gt; bitmap size and, if the determination is positive, said receive control means sets SSN = [PBSN+1+bitmap size] mod SNS, and the bitmap covers those data blocks that have a BSN within the interval [PBSN+1, SSN-1]; and if the determination is negative, said receive control means sets SSN = V(R), and the bitmap covers a number of data blocks, determined by the bitmap size, that have a BSN smaller than the SSN.</p><p id="p0072" num="0072">Said receive control means may set a beginning of window bit to a zero if the next partial bitmap is sent, or to a one if the first partial bitmap is sent.</p><p id="p0073" num="0073">According to an eighth aspect of the disclosure there is provided a method to operate a radio link protocol mobile station when receiving data blocks from a base station, comprising: receiving a data block; and<br/>
determining whether to transmit in an acknowledgment message a bitmap that reports an entire receive window or a bitmap that reports only a portion of the receive window based on<!-- EPO <DP n="20"> --> a comparison made by the mobile station between a size of the receive window and a size of the bitmap.</p><p id="p0074" num="0074">The entire receive window may be reported if the size of the receive window is less than or equal to the size of the bitmap, and where the portion of the receive window is reported if the size of the receive window is greater than the size of the bitmap.</p><p id="p0075" num="0075">The bitmap may be transmitted as part of an acknowledgment message that always includes a channel measurement report.</p><p id="p0076" num="0076">According to a ninth aspect of the disclosure there is provided a mobile station comprising a receiver for receiving data blocks from a base station and a controller for determining whether to transmit in an acknowledgment message a bitmap that reports an entire receive window or a bitmap that reports only a portion of the receive window based on a comparison made by the mobile station between a size of the receive window and a size of the bitmap, where the size of the bitmap is the maximum size, in bits, of the bitmap to be reported in the acknowledgment message.</p><p id="p0077" num="0077">Said controller may report the entire receive window if the size of the receive window is less than or equal to the size of the bitmap, and reports the portion of the receive window if the size of the receive window is greater than the size of the bitmap.</p><p id="p0078" num="0078">The bitmap may be transmitted as part of an acknowledgment message that always includes a channel measurement report.</p><p id="p0079" num="0079">The invention is defined by the claims which follow.</p></description><claims mxw-id="PCLM56976225" lang="EN" load-source="patent-office"><!-- EPO <DP n="21"> --><claim id="c-en-0001" num="0001"><claim-text>A method for operating a radio link protocol receiver (14) when receiving datablocks from a transmitter (12), comprising:
<claim-text>receiving a data block;</claim-text>
<claim-text>determining in the receiver (14) whether a size of a receive window is less than or equal to a bitmap size, the bitmap size comprising a maximum size, in bits, of the bitmap to be reported in an acknowledgment message, and based on the determination, if the size of the receive window is not less than or equal to the bitmap size, the reported bitmap comprises a partial bitmap covering one of an initial portion of the receive window and a portion other than the initial portion of the receive window; and</claim-text>
<claim-text>further determining, in the receiver (14), which portion of the receive window is reported, wherein said further determining comprises:
<claim-text>determining If the a previous acknowledgment message carried a partial bitmap that did not cover the a highest BSN received at the time, and if the difference between: (a) the BSN that has a value one higher than the highest BSN yet received (V(R)), and (b) the highest BSN that was included in the bitmap when the prevlous acknowledgment message was transmitted (PBSN), is larger than a certain threshold value. PBSN_Threshold, then the partial bitmap covering a portion other than the initial portion of the receive window Is sent provided that PBSN is still larger than the start of the receive window (V(Q)); otherwise the partial bitmap covering the</claim-text>
<claim-text>initial portion of the receive window is sent;</claim-text></claim-text>
<claim-text>where: BSN is a block sequence number, PBSN is a partial block sequence number, PBSN_Threshold is a threshold value partial block sequence number, V(R) is a receive state variable that denotes the BSN which has a<!-- EPO <DP n="22"> --> value one higher than the highest BSN yet received (modulo SNS); SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, and V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>A method as claimed in claim 1, where the partial bitmap covering an initial portion of the recelve window is reported.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>A method as in claim 2, wherein said determining in the receiver (14) whether the size of the receive window is less than or equal to the bitmap size is based on a condition [V(R)-V(Q)] mod SNS≤bitmap size; then<br/>
if the determination is positive, the reported bitmap covers the entire receive window which is provided by setting SSN=V(R); and<br/>
if the determination is negative, the reported bitmap covers only the beginning of the receive window which is provided by setting SSN=[V(Q)+bitmap size] mod SNS,<br/>
where: V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0: SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SNS) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>A method as in claim 3, where if the determination is negative, the bitmap covers those data blocks having a BSN within the interval [V(Q), SSN-1].<!-- EPO <DP n="23"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>A method as in claim 3, further comprising setting a beginning of window bit to a one.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>A method as claimed in claim 1 where determining at the receiver (14) whether the size of a receive window is less than or equal to a bitmap size is based on a condition [V(R)-V(Q)] mod SNS≤bitmap size; then<br/>
if the determination is positive, the reported bitmap covers the entire receive window which is provided by setting SSN=V(R);<br/>
where: V(S) is a send state variable that denotes a sequence number of a next in-sequence data block to be transmitted; SNS is a sequence number space that denotes a range [0; SNS-1] in which a block sequence number (BSN) takes its value, where each transmitted data block is assigned a BSN equal to V(S) at the time of transmission; V(Q) is a receive window state variable that denotes a lowest BSN not yet received (modulo SN5) and represents the start of a receive window; V(R) is a receive state variable that denotes the BSN which has a value one higher than the highest BSN yet received (modulo SNS); and SSN is a starting sequence number.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A method as in claim 6, where the further determining, In the receiver, which portion of the receive window is reported comprises:
<claim-text>determining if [PBSN-V(Q)] mod SNS&lt;WS and</claim-text>
<claim-text>if [V(R)-(PBSN+PBSN_Threshold)] mod SNS&lt;WS and, if the further determination is positive, sending the partial bitmap covering a portion other than the initial portion of the receive window, otherwise sending the</claim-text>
<claim-text>partial bitmap covering the initial portion of the receive window,<br/>
where PBSN_Threshold is a threshold value that identifies a limit for the difference between PBSN and V(R), beyond which a partial bitmap covering a portion<!-- EPO <DP n="24"> --> other than the initial portion of the receive window is generated, and WS denotes window size.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A method as in claim 7, where if the partial bitmap covering the initial portion of the receive window is sent, then SSN=[V(Q)+bitmap size] mod SNS, and the bitmap covers those data blocks having a BSN within the interval [V(Q), SSN-1].</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A method as in claim 7, where characteristics for the partial bitmap covering the portion other than the initial portion of the receive window are established by:
<claim-text>determining if [V(R)-(PBSN+1)] mod SNS&gt;bitmap size and, if the determination is positive, then SSN=[PBSN+1+bitmap size] mod SNS, and</claim-text>
<claim-text>the bitmap covers those data blocks that have a BSN within the interval [PBSN+1, SSN-1]; and</claim-text>
<claim-text>if the determination is negative, then SSN=V(R), and the bitmap covers a number of data blocks, determined by the bitmap size, that have a BSN smaller than the SSN.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A method as in claim 6, further comprising setting a beginning of window bit to a zero if the partial bitmap covering a portion other than the initial portion of the receive window is sent, or to a one if the partial bitmap covering the initial portion of the receive window is sent.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A method as in claim 1, where the bitmap is transmitted as part of an acknowledgment message that always includes a channel measurement report.<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A radio link protocol receiver (14) operable for receiving data blocks from a transmitter (12), comprising means configured to cause, at least, the performance of any one of claims 1 to 11,</claim-text></claim></claims><drawings mxw-id="PDW16667007" load-source="patent-office"><!-- EPO <DP n="26"> --><figure id="f0001" num="1A,1B"><img id="if0001" file="imgf0001.tif" wi="141" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="163" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0003" num="4,5"><img id="if0003" file="imgf0003.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0004" num="6,7"><img id="if0004" file="imgf0004.tif" wi="164" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0005" num="8,9"><img id="if0005" file="imgf0005.tif" wi="156" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0006" num="10,11"><img id="if0006" file="imgf0006.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0007" num="12,13"><img id="if0007" file="imgf0007.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0008" num="14,15"><img id="if0008" file="imgf0008.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0009" num="16,17"><img id="if0009" file="imgf0009.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0010" num="18,19"><img id="if0010" file="imgf0010.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="36"> --><figure id="f0011" num="20,21"><img id="if0011" file="imgf0011.tif" wi="160" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0012" num="22,23"><img id="if0012" file="imgf0012.tif" wi="157" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0013" num="24"><img id="if0013" file="imgf0013.tif" wi="158" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="157" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="155" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
