<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680072-A1" country="EP" doc-number="2680072" kind="A1" date="20140101" family-id="48692381" file-reference-id="299494" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549999" ucid="EP-2680072-A1"><document-id><country>EP</country><doc-number>2680072</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174278-A" is-representative="YES"><document-id mxw-id="PAPP154823922" load-source="docdb" format="epo"><country>EP</country><doc-number>13174278</doc-number><kind>A</kind><date>20130628</date><lang>EN</lang></document-id><document-id mxw-id="PAPP216345455" load-source="docdb" format="original"><country>EP</country><doc-number>13174278.5</doc-number><date>20130628</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454284" ucid="US-201213536625-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201213536625</doc-number><kind>A</kind><date>20120628</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988103325" load-source="docdb">G03F   7/20        20060101ALI20131018BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988125557" load-source="docdb">G03F   1/84        20120101AFI20131018BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1886974486" load-source="docdb" scheme="CPC">G01N2201/068       20130101 LA20161018BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974487" load-source="docdb" scheme="CPC">G01N  21/9501      20130101 LI20161018BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974488" load-source="docdb" scheme="CPC">G03F   1/84        20130101 LI20161020BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1886974489" load-source="docdb" scheme="CPC">G01N  21/8806      20130101 FI20161018BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2083192072" load-source="docdb" scheme="CPC">G01N  21/00        20130101 LI20150317BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2083196657" load-source="docdb" scheme="CPC">G03F   7/70116     20130101 LI20150318BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132182481" lang="DE" load-source="patent-office">Verfahren und System zur Erzeugung binärer Raumfilter</invention-title><invention-title mxw-id="PT132182482" lang="EN" load-source="patent-office">Method and system for creation of binary spatial filters</invention-title><invention-title mxw-id="PT132182483" lang="FR" load-source="patent-office">Procédé et système de génération de filtres spatiaux binaires</invention-title><citations><patent-citations><patcit mxw-id="PCIT242654739" load-source="docdb" ucid="US-20120008134-A1"><document-id format="epo"><country>US</country><doc-number>20120008134</doc-number><kind>A1</kind><date>20120112</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>MULDER M. ET AL.: "Performance of FlexRay, a fully programmable Illumination system for generation of Freeform Sources on high NA immersion systems", PROCEEDINGS OF SPIE, vol. 7640, 2010, pages 76401P1 - 76401P10, XP040533420</text><sources><source mxw-id="PNPL64705269" load-source="docdb" name="SEA" category="A"/></sources></nplcit><nplcit><text>RICHTER R. ET AL.: "AIMS mask qualification for 32 nm node", PROCEEDINGS OF SPIE, vol. 7488, 2009, pages 74882R1 - 74882R11, XP040502479</text><sources><source mxw-id="PNPL64705270" load-source="docdb" name="SEA" category="I"/></sources></nplcit><nplcit><text>SAGIV A. ET AL.: "Aerial Imaging for Source Mask Optimization: Mask and Illumination Qualification", PROCEEDINGS OF SPIE, vol. 7488, 2009, pages 74880Z1 - 74880Z12, XP055083695</text><sources><source mxw-id="PNPL64705271" load-source="docdb" name="SEA" category="A"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918152994" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>APPLIED MATERIALS ISRAEL LTD</last-name><address><country>IL</country></address></addressbook></applicant><applicant mxw-id="PPAR918140037" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>APPLIED MATERIALS ISRAEL LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918982718" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Applied Materials Israel Ltd.</last-name><iid>100077789</iid><address><street>9 Oppenheimer St.</street><city>Rehovot 76705</city><country>IL</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918145097" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MANGAN SHMUEL</last-name><address><country>IL</country></address></addressbook></inventor><inventor mxw-id="PPAR918161079" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MANGAN, SHMUEL</last-name></addressbook></inventor><inventor mxw-id="PPAR918984326" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MANGAN, SHMUEL</last-name><address><street>7 Paldi Street</street><city>76248 Rehovot</city><country>IL</country></address></addressbook></inventor><inventor mxw-id="PPAR918143029" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SAGIV AMIR</last-name><address><country>IL</country></address></addressbook></inventor><inventor mxw-id="PPAR918172934" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SAGIV, AMIR</last-name></addressbook></inventor><inventor mxw-id="PPAR918981975" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>SAGIV, AMIR</last-name><address><street>Derech Ein-Karem 72</street><city>90815 Beit-Zayit</city><country>IL</country></address></addressbook></inventor><inventor mxw-id="PPAR918136506" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>ABRAMSON MARIANO</last-name><address><country>IL</country></address></addressbook></inventor><inventor mxw-id="PPAR918159710" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>ABRAMSON, MARIANO</last-name></addressbook></inventor><inventor mxw-id="PPAR918987469" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>ABRAMSON, MARIANO</last-name><address><street>16 Shanar Street</street><city>96263 Jerusalem</city><country>IL</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918987487" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Zimmermann &amp; Partner</last-name><iid>101236430</iid><address><street>Josephspitalstr. 15</street><city>80331 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548905113" load-source="docdb">AL</country><country mxw-id="DS548889187" load-source="docdb">AT</country><country mxw-id="DS548897307" load-source="docdb">BE</country><country mxw-id="DS548899911" load-source="docdb">BG</country><country mxw-id="DS548819149" load-source="docdb">CH</country><country mxw-id="DS548897308" load-source="docdb">CY</country><country mxw-id="DS548889188" load-source="docdb">CZ</country><country mxw-id="DS548905163" load-source="docdb">DE</country><country mxw-id="DS548897309" load-source="docdb">DK</country><country mxw-id="DS548897314" load-source="docdb">EE</country><country mxw-id="DS548893352" load-source="docdb">ES</country><country mxw-id="DS548899912" load-source="docdb">FI</country><country mxw-id="DS548819150" load-source="docdb">FR</country><country mxw-id="DS548905164" load-source="docdb">GB</country><country mxw-id="DS548897315" load-source="docdb">GR</country><country mxw-id="DS548905165" load-source="docdb">HR</country><country mxw-id="DS548889189" load-source="docdb">HU</country><country mxw-id="DS548819151" load-source="docdb">IE</country><country mxw-id="DS548897316" load-source="docdb">IS</country><country mxw-id="DS548899913" load-source="docdb">IT</country><country mxw-id="DS548897317" load-source="docdb">LI</country><country mxw-id="DS548899918" load-source="docdb">LT</country><country mxw-id="DS548808762" load-source="docdb">LU</country><country mxw-id="DS548899919" load-source="docdb">LV</country><country mxw-id="DS548899920" load-source="docdb">MC</country><country mxw-id="DS548808763" load-source="docdb">MK</country><country mxw-id="DS548808764" load-source="docdb">MT</country><country mxw-id="DS548893353" load-source="docdb">NL</country><country mxw-id="DS548852728" load-source="docdb">NO</country><country mxw-id="DS548893362" load-source="docdb">PL</country><country mxw-id="DS548899921" load-source="docdb">PT</country><country mxw-id="DS548889190" load-source="docdb">RO</country><country mxw-id="DS548899926" load-source="docdb">RS</country><country mxw-id="DS548893363" load-source="docdb">SE</country><country mxw-id="DS548819152" load-source="docdb">SI</country><country mxw-id="DS548852729" load-source="docdb">SK</country><country mxw-id="DS548852730" load-source="docdb">SM</country><country mxw-id="DS548808765" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670667" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Methods and systems for designing a binary spatial filter based on data indicative of a desired exposure condition to be emulated by an inspection system, and for implementing the binary spatial filter in an optical path of the inspection system, thereby enabling emulation of the desired exposure condition by interacting a light beam of the inspection system with the binary spatial filter. The present Methods and systems enable on-the-fly and on-demand design and implementation/generation of spatial filters for use in inspection systems.
<img id="iaf01" file="imgaf001.tif" wi="85" he="114" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128500040" lang="EN" source="EPO" load-source="docdb"><p>Methods and systems for designing a binary spatial filter based on data indicative of a desired exposure condition to be emulated by an inspection system, and for implementing the binary spatial filter in an optical path of the inspection system, thereby enabling emulation of the desired exposure condition by interacting a light beam of the inspection system with the binary spatial filter. The present Methods and systems enable on-the-fly and on-demand design and implementation/generation of spatial filters for use in inspection systems.</p></abstract><description mxw-id="PDES63956097" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>FIELD OF THE INVENTION</b></heading><p id="p0001" num="0001">The present invention is generally in the field of patterning techniques such as photolithography, and relates to a method and system for creation of binary spatial filters, particularly aimed at optimization of spatial filter formation, e.g., for use in aerial imaging.</p><heading id="h0002"><b>BACKGROUND OF THE INVENTION</b></heading><p id="p0002" num="0002">Lithography is a widely used technique for the manufacture of various patterned structures such as integrated circuits, magnetic devices, and other devices. In lithography, a final product is manufactured in a multi-step process, where a "resist" material (sensitive to electromagnetic radiation) is produced for creation of an initial pattern. A pattern is formed in the resist material by exposing different regions of the resist material to different radiation doses. The radiation, e.g., optical radiation in the ultraviolet (UV) or deep UV (DUV) range, or x-rays regimes, is projected through a mask (e.g., reticle) onto the "resist" material.</p><p id="p0003" num="0003">There are several types of masks that are used in patterning and/or inspection systems. This includes, for example, binary reticles and phase-shift masks. Defects in a mask pattern result in a defected pattern created on an object. Defects in a reticle/mask may be a result of incorrect designing of the mask pattern. Defects may also be generated during a reticle's fabrication process as well as during subsequent processing and handling. A process for manufacturing a reticle/mask is typically similar to an object (e.g., wafer) patterning process. For example, the goal of reticle manufacturing is forming a pattern in an opaque material such as a relatively thin chrome layer on a substantially transparent substrate such as glass (e.g., chrome on glass COG reticles).<!-- EPO <DP n="2"> --></p><p id="p0004" num="0004">Various techniques have been developed for optimizing reticle/mask design and patterning techniques. Some examples of these techniques are described in the following publications:</p><p id="p0005" num="0005"><patcit id="pcit0001" dnum="US2002140920A"><text>US 2002/140920</text></patcit> describes a system and method for lithographically printing patterns on a semiconductor using combinations of illumination and mask patterns, which are optimized together to produce the desired pattern. The method of optimizing both illumination and mask patterns allows the development of mask patterns that arc not constrained by the geometry of the desired pattern to be printed. Thus, the method provides high quality images even when the desired printed patterns have critical dimensions that approach the resolution limits of a lithographic system. The resulting mask patterns using the method do not obviously correspond to the desired patterns to be printed. Such masks may include phase-shifting technology that use destructive interference to define dark areas of the image and are not constrained to conform to the desired printed pattern.</p><p id="p0006" num="0006"><patcit id="pcit0002" dnum="US5326659A"><text>US 5,326,659</text></patcit> describes a method for making a mask for optical lithography or other projection printing, wherein the mask is represented by a mask pattern. The mask provides a substantially binary output image on the surface of a wafer as light is applied to the mask. Light passes through the mask and onto a wafer at varying intensities, such intensities represented by output intensity values, the threshold values of which produce output images within predetermined constraints. The method includes the steps of defining sampling points, which arc representative of the binary output image. These sampling points are used in defining local objective functions, which are combined to give a total objective function.<!-- EPO <DP n="3"> --></p><heading id="h0003"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0007" num="0007">The present inventors have determined that there is a need for a novel technique of designing a mask suitable for creating a certain pattern on an object, such as a semiconductor wafer, and also for a technique enabling effective replacement of a mask pattern during the patterning process.</p><p id="p0008" num="0008">For example, known inspection/patterning techniques (e.g., those used in aerial inspection) utilize a static spatial filter (e.g., source masks) for filtering the inspecting light beam and emulating a desired exposure condition. Such static spatial filters are typically formed utilizing perforated foil structures, chrome on glass (COG) technique or other equivalent techniques. A typical aerial inspection system may accommodate about 15 spatial filters and respectively use them for simulating/producing about 15 exposure conditions. In such systems, replacement of a spatial filter may be a lengthy and, therefore, also costly procedure.</p><p id="p0009" num="0009">To this end, the present invention provides a complete solution that enables on- the-fly and on demand design and implementation/generation of a spatial filter for use in an inspection system. The invention allows receiving an exposure condition (EC) distribution map, corresponding to a desired exposure condition to be obtained and simulated by the inspection system, and to design and implement corresponding spatial filters that can be used for filtering/masking a light source and generating a light pattern emulating the desired exposure condition.</p><p id="p0010" num="0010">In this regard it should be noted that different types of inspection systems and particularly aerial inspection systems serve in various different environments, such as a lab environment and production environment, and may accordingly be configured with different performance characteristics. For example, Applied Materials' <i>Aera<sup>™</sup></i> system is an aerial inspection system which may be used in a production environment. In the production environment, an aerial inspection system is typically accommodated along the production line and should provide inspection (e.g., fast inspection) of an extensive area of the inspected object (e.g., inspecting most of the wafer or reticle area) to identify pattern defects in the inspected objects to allow removal of such objects from the<!-- EPO <DP n="4"> --> production line for further more precise inspection (i.e., review). In production environment, an aerial inspection system, such as the <i>Aera<sup>™</sup></i>, is generally required to provide high throughput to facilitate and not delay the production, while providing low rates of miss-identification of defective objects/wafers.</p><p id="p0011" num="0011">On the other hand, aerial inspection systems may also serve for reviewing wafers in the lab (or outside of the production line) for which a high level of accuracy is required even though there is no requirement for high inspection throughput. Carl Zeiss's <i>AIMS<sup>™</sup></i> is an example of a review system utilizing aerial imaging for reviewing the wafers in environments in which high throughput may not be required.</p><p id="p0012" num="0012">In many cases, significant delays in the operation of inspection systems in production environments result from the procedure associated with designing/generating an appropriate spatial filter suitable for inspection of the objects/patterns produced on the production line. Additionally, such delays may also occasionally be associated with the introduction and alignment of the spatial filters in the optical path of the inspecting light beam.</p><p id="p0013" num="0013">As compared with review systems that operate outside the production line, in the production environment less strict light conditions are required for identifying items/objects which might be defective with a low rate of miss-identification of such defective objects. It is noted that in the production line the low rate of defect miss identification is required while moderate rates of false identification may be tolerable since items/wafers that do not pass inspection on the production line are transferred for review (accurate inspection), which is performed outside of the production line.</p><p id="p0014" num="0014">In this connection, aerial inspection systems are in many cases utilized to inspect reticules, which are used in various steppers for projecting patterns on a photo resist layer of a wafer. To this end, in order to inspect such a reticule for use by a particular stepper, the exposure conditions provided by the inspection system should emulate the exposure conditions of the particular stepper. This is typically achieved by utilizing a spatial filter (source mask) arranged in the optical path of the inspection light beam of the inspection system. The source mask is designed in accordance with the particular stepper for emulating its exposure conditions. As there are many types of steppers,<!-- EPO <DP n="5"> --> exchange of source masks in the inspection system is typically frequently needed. This is associated with significant delays in the inspection, which may be due to the time required for designing, generating and/or replacing the source mask.</p><p id="p0015" num="0015">To this end, the inventors of the present invention have found that aerial inspection in production environments may utilize binary spatial filters to emulate desired exposure conditions with sufficient tolerance providing a good rate of identification of defective items and low rates of misidentification of such wafers. For providing low rates of misidentification of reticule defects, the emulated exposure conditions should only approximate the exposure conditions of the stepper. This is because when only the existence of defects is determined, less strict exposure conditions may be needed, as compared to the strict exposure conditions of a stepper, by which an accurate pattern should be actually printed on a photo resist layer of the wafer. This facilitates the use of binary spatial filters for emulating the desired exposure conditions.</p><p id="p0016" num="0016">The invention thus provides a system and method for designing and generating/implementing such binary spatial filters, on-the-fly (e.g., by a pattern generation module associated with the inspection system), thus facilitating high throughput in the production line and preventing delays which may be associated with design and generation of the filters upon their introduction to the optical path. Additionally, the invention provides for programmatically designing and implementing a spatial filter (source mask) corresponding to a desired exposure condition. This is achieved by appropriately converting an EC distribution map into a binary spatial filter design indicative of a pattern of spaced apart regions of different transmission properties. This is typically a pattern of regions with substantially opaque and substantially transparent properties with respect to light used in the inspection system (wavelength of light used in the patterning system).</p><p id="p0017" num="0017">Moreover, the invention allows implementing design of such a binary spatial filter (e.g., binary source mask) on-the-fly as a transient/dynamic filter. This may be achieved, according to the invention, by utilizing a novel beam shaping technique providing a spatial light modulator which may be configured to operate in various wavelength regimes including UV, DUV, X-ray and more.<!-- EPO <DP n="6"> --></p><p id="p0018" num="0018">According to one broad aspect of the invention, there is provided a method for use in creating a binary spatial filter for use in an optical path of an inspection system. The method comprises receiving intensity data indicative of an intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system; and processing the intensity data, based on predetermined tolerance data, generating filter data indicative of a binary spatial filter, thereby enabling to use the filter data for operating a pattern generation module to create a binary spatial filter.</p><p id="p0019" num="0019">The input data indicative of an intensity distribution map may actually be represented by a gray level image of the pattern to be obtained on an object being patterned. Preferably, predetermined tolerance data is initially provided, being indicative of an acceptable relation (degree of correlation) between the input intensity distribution map and a pattern obtainable through the binary filter.</p><p id="p0020" num="0020">In some embodiments, the processing of the intensity distribution map comprises: determining a set of transmission values, which do not exceed a predetermined maximal number of transmission values and associating values of the intensity distribution map with values of the set of transmission values to thereby divide the intensity distribution map into blobs of corresponding transmission values selected from the set of transmission values; and replacing one or more of the blobs with one or more binary transmission patterns having corresponding transmission values, thereby obtaining filter data indicative of the binary spatial filter corresponding to the intensity distribution map. To this end, the tolerance data used in the above processing may include for example any of the following: (i) transmittance tolerance data which is indicative of allowable variations in the transmissions of the blobs (e.g., as compared with the transmission through corresponding regions of the received intensity distribution map), (ii) geometric tolerance data indicative of allowable variations in the geometric shapes of the blobs, and (iii) production tolerance data indicative of the production tolerances of the pattern generation module.</p><p id="p0021" num="0021">Preferably, the set of transmission values has fewer transmission values than a number of distinct values in the intensity distribution map. For example, the set of transmission values substantially does not exceed six transmission values.<!-- EPO <DP n="7"> --></p><p id="p0022" num="0022">The division of the intensity distribution map into blobs may include replacement of values in the map with the corresponding transmission values from the set of transmission values.</p><p id="p0023" num="0023">According to some embodiments, the replacement of a blob with a binary transmission pattern is performed utilizing a binary transmission pattern with average or total transmittance that is substantially similar to the average or total transmission value of the blob respectively. In some embodiments, the replacement of a blob with a binary transmission pattern may include inflating or deflating at least one binary transmission pattern, which replaces a blob, such that it has total transmission that is substantially similar to the total transmission through the blob (e.g., similar in accordance with certain predetermined condition(s) specified in the tolerance data).</p><p id="p0024" num="0024">Each of the one or more binary transmission patterns may be formed by utilizing an arrangement of regions of a first transmission value spaced apart by regions of a second transmission value. In this case, the replacement of a blob with a binary transmission pattern may include configuring the sizes and density of the first and second regions such that the average transmittance through the binary transmission pattern substantially equals the transmission value of a blob to which the binary transmission pattern pertains. The size and density of the first and second regions may be configured such as to reduce at least one of the following effects: diffraction from the binary mask, interference and aliasing of light passing through the binary mask.</p><p id="p0025" num="0025">In some embodiments, the filter data indicative of the binary spatial filter is used to create the filter in the form of a perforated foil structure.</p><p id="p0026" num="0026">In some other embodiments, the filter data is used to create the filter in the form of a total internal reflection (TIR) pattern formed by a corresponding liquid pattern deployed on an optical surface. To this end, input light is directed to interact with the optical surface carrying a liquid pattern, to thereby create structured light corresponding to the binary spatial filter.</p><p id="p0027" num="0027">According to another broad aspect of the invention, there is provided a system for use in creation of a binary spatial filter for an inspection system. The system comprises: an input module configured and operable for receiving intensity data indicative of an<!-- EPO <DP n="8"> --> intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system; a processing utility configured and operable for processing the intensity data, utilizing a predetermined tolerance data, and generating filter data indicative of a binary spatial filter; and a patterning controller operable for using the filter data for generating data to operate a pattern generation module to create a corresponding binary spatial filter usable for emulating the desired exposure condition by the inspection system.</p><p id="p0028" num="0028">The processing utility may comprise a classification module, and a binary pattern design module. The classification module is adapted for processing the intensity data to determine a set of several transmission values not exceeding a predetermined maximal number of transmission values and associate values of the intensity distribution map with values of the set of several transmission values to thereby divide the intensity distribution the map into blobs of homogenous transmission values. The binary pattern design module is configured for replacing/substituting one or more of the blobs with one or more binary transmission patterns, thereby generating filter data indicative of a binary spatial filter having a binary pattern corresponding to said intensity distribution map.</p><p id="p0029" num="0029">The classification module may utilize a set of transmission values with fewer values than a number of distinct transmission values in said intensity distribution map. The association module may be configured and operable for dividing the map into blobs by replacing values in the map with corresponding transmission values in the association data. The system may utilize tolerance data as indicated above including transmittance tolerance data and/or geometric tolerance data and/or production tolerance data or possibly other types of tolerances which may facilitate adequate design and generation of the binary spatial filter. To this end, in order to determine a design of a spatial filter having a binary pattern corresponding to the intensity distribution map, the processing utility may be configured and operable to modify any of the following in accordance with the tolerance data: (i) the shapes of the blobs; (ii) the transmission values of the blobs; and (iii) the binary transmission patterns substituting the blobs. In this regard, the phrases <i>equal, similar</i> and <i>substantially similar</i> as referred to herein with reference to<!-- EPO <DP n="9"> --> properties of the binary filter (e.g., shapes of the blobs, transmission values etc.) should be considered in relation to similarity measures/predetermined-condition(s) indicated in the tolerance data.</p><p id="p0030" num="0030">The binary pattern design module may be configured and operable for replacing at least one blob with a binary transmission pattern having an average or total transmittance that is substantially similar to the average or total transmission of the blob respectively (similar in accordance with allowable tolerances). Alternatively, the pattern creation module may be operable for replacing a blob with a binary transmission pattern and inflating or deflating a binary transmission pattern such that the total transmittance therethrough is substantially similar to total transmission through the blob.</p><p id="p0031" num="0031">The binary pattern design module may be operable for generating data indicative of a binary spatial filter comprising an arrangement of regions of a first transmission value spaced apart by regions of a second transmission value. In some embodiments, this may be implemented by designing sizes and densities of the first and second regions such that that the average transmittance through the binary transmission patterns in the filter is substantially equal to the respective transmission values of the blobs to which the binary transmission patterns pertain. The binary pattern design module may be operable for configuring the size and density of the first and second regions such as to reduce at least one of the following effects: diffraction from the binary spatial filter, interference and aliasing of light passing through the binary spatial filter.</p><p id="p0032" num="0032">The system may further include a pattern generation module associated with an optical channel and configured and operable for deploying a liquid pattern corresponding to the binary source mask on an optical surface of the optical channel, thereby enabling creation of a structured light indicative of the binary source mask.</p><p id="p0033" num="0033">The present invention in yet another aspect provides a method and system for generation of an optical filter. The filter generation method comprises deploying a liquid pattern on an optical surface to form a transient pattern of regions having different critical angles of total internal reflection for light interacting with the regions, corresponding to a desired spatial filter for creation of structured light.<!-- EPO <DP n="10"> --></p><p id="p0034" num="0034">The method may comprise interacting a beam of substantially collimated light rays with the surface such that a fraction of the light rays interacting with the regions undergoes total internal reflection thereby forming structured light corresponding to the desired spatial filter.</p><p id="p0035" num="0035">The regions from which the light rays are totally reflected may be regions of liquid deployed on the optical surface, or spaces between the liquid regions. The optical surface with the liquid pattern is preferably substantially transparent for the light, thereby reducing light absorption by the surface.</p><p id="p0036" num="0036">The transient pattern of regions may be selectively removed enabling its replacement by a different pattern. The removal of the liquid pattern may be implemented by clearing the liquid from the optical surface by carrying out at least one of the following: heating the surface for evaporating the liquid, wiping the liquid, blowing the liquid, and changing affinity of the optical surface.</p><p id="p0037" num="0037">The system of the invention for generation of spatial filters for an inspection system includes a processing utility configured and operable for receiving and processing an intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system, and a filter generation module configured and operable for receiving the filter data and generating the binary spatial filter indicated thereby in an optical path of the inspection system. The processing may be carried out utilizing predetermined tolerance data corresponding to the inspection system. The processing utility is adapted and is usable for generating filter data indicative of a binary spatial filter for emulating the desired exposure condition. The inspection system thereby enables to emulate the desired exposure condition by enabling interaction of a light beam of the inspection system with the binary spatial filter.</p><p id="p0038" num="0038">According to some embodiments of the invention, the filter generation module includes a processing module that is configured and operable for processing the filter data to select, in accordance with the tolerance data, a combination of one or more static spatial filters which together form the binary spatial filter. In such embodiments, filter generation module may also include or be associated with a controller module configured and operable for interposing the selected combination static spatial filters in<!-- EPO <DP n="11"> --> the optical path for emulating the desired exposure condition. Specifically, in some embodiments, the filter generation module includes a carrier module connectable to the controller and configured and operable to enable controllable interposing of one or more static spatial filters in the optical path. The carrier module may include any of the following: (i) a multi wheel carrier assembly including at least two wheels each carrying one or more static spatial filters; and (ii) a cassette assembly configured and operable for carrying multiple static spatial filters and selectively interposing at least one of the multiple static spatial filters in the optical path.</p><p id="p0039" num="0039">Alternatively or additionally, according to some embodiments of the invention, the filter generation module includes a system for generating transient spatial filters. The system includes an optical surface for carrying a transient liquid pattern, and a liquid deployment module adapted for receiving filter data indicative of a desired spatial filter and deploying, on the optical surface, a corresponding transient liquid pattern forming an arrangement of regions of different critical total internal reflection angles corresponding to the desired spatial filter.</p><p id="p0040" num="0040">A system of the invention for generation of structured light corresponding to a desired spatial filter comprises: an optical surface exposed to deposition of a transient liquid pattern; a liquid deployment module adapted for receiving filter data indicative of a desired spatial filter and carrying out the deposition of a corresponding transient liquid pattern on the surface forming an arrangement of regions of different critical total internal reflection angles corresponding to the desired filter; and a light port configured and operable for interacting on a beam of substantially collimated light rays with the optical surface, such that a fraction of the light rays undergoes total internal reflection when impinging on the surface, thereby forming structured light corresponding to the desired spatial filter.<br/>
[0040a] Accordingly, in general terms, methods and systems are provided for designing a binary spatial filter based on data indicative of a desired exposure condition to be emulated by an inspection system, and for implementing the binary spatial filter in an optical path of the inspection system, thereby enabling emulation of the desired exposure condition by interacting a light beam of the inspection system with the binary spatial filter. The present method and systems enables on-the-fly and on-demand design and implementation/generation of spatial filters for use in inspection system.<br/>
<!-- EPO <DP n="12"> -->[0040b] The disclosure is also directed to an apparatus for carrying out the disclosed methods and including apparatus parts for performing each described method steps. These method steps may be performed by way of hardware components, a computer programmed by appropriate software, by any combination of the two or in any other manner. Furthermore, the disclosure is also directed to methods by which the described apparatus operates. It includes method steps for carrying out every function of the apparatus.<br/>
[0040c] Further embodiments, aspects, details and advantages are furthermore evident from the dependent claims, the description, and the drawings.</p><heading id="h0004"><b>DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0041" num="0041">In order to understand the invention and to see how it may be carried out in practice, embodiments will now be described, by way of non-limiting example only, with reference to the accompanying drawings, in which:</p><p id="p0042" num="0042"><figref idrefs="f0001"><b>Fig. 1</b></figref> is a block diagram schematically illustrating an example of a patterning system utilizing a filter/mask design system of the invention for implementing a patterning on demand technique to create a mask used in the patterning system.</p><p id="p0043" num="0043"><figref idrefs="f0002"><b>Figs. 2A</b></figref><b>and</b><figref idrefs="f0003"><b>2B</b></figref> exemplify the configuration of a filter/mask design system and a method for designing patterns of binary spatial filters (e.g., binary source masks).</p><p id="p0044" num="0044"><figref idrefs="f0003 f0004 f0005"><b>Figs. 3A to 3G</b></figref> exemplify design of a binary spatial filter pattern by processing the input exposure condition distribution map using the method of <figref idrefs="f0002">Figs. 2A</figref> and <figref idrefs="f0003">2B</figref>.</p><p id="p0045" num="0045"><figref idrefs="f0006"><b>Figs. 4A and 4B</b></figref> show schematically an implementation method and system according to the present invention for dynamic implementation/generation of binary filters (source masks).</p><p id="p0046" num="0046"><figref idrefs="f0007 f0008 f0009"><b>Figs. 4C to 4H</b></figref> show, schematically, several possible configurations of mask implementations according to the invention.</p><p id="p0047" num="0047"><figref idrefs="f0009 f0010"><b>Figs. 5A to 5C</b></figref> show, schematically, another example of a filter implementation/generation system configured according to the present invention for pseudo dynamic binary source mask implementation.</p><p id="p0048" num="0048"><figref idrefs="f0011"><b>Figs. 6A and 6B</b></figref> illustrate, schematically, an example of a filter implementation system configured according to another embodiment of the present invention.<!-- EPO <DP n="13"> --></p><heading id="h0005"><b>DETAILED DESCRIPTION</b></heading><p id="p0049" num="0049">According to the present invention, methods and systems are provided allowing patterning on demand of binary spatial filters for use in patterning and inspection systems such as aerial imaging and transient generation of such masks. The invention in its one aspect provides a novel binary filter design system, and in some other aspects provides a novel pattern generation system (e.g., mask creation system) which may or may not utilize the binary filter design system. The principles and operation of the present invention may be better understood with reference to the drawings and accompanying description.</p><p id="p0050" num="0050">Before explaining exemplary embodiments of the invention in detail, it is to be understood that the invention is not limited in its application to the details of construction and the arrangement of the components set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments or of being practiced or carried out in various ways. As used herein, the phrase "for example," "such as" and variants thereof describing exemplary implementations of the present invention are exemplary in nature and not limiting. Also, it is to be understood that the phraseology and terminology employed herein is for the purpose of description and should not be regarded as limiting.</p><p id="p0051" num="0051">Referring first to <figref idrefs="f0001"><b>Fig. 1</b></figref><b>,</b> there is illustrated in the form of a block diagram, an example of a patterning system <b>10</b> utilizing a filter design system <b>100</b> of the invention for implementing the patterning on demand technique to create a binary spatial filter. System <b>10</b> includes a patterning on demand system <b>20</b> for generating structured radiation (light) <b>L2</b> which is further used for patterning/inspection of wafers, reticules or other items Also shown in the figure is an aerial inspection system <b>400</b> which can use the binary filter created by the patterning on demand system <b>20</b> and/or may also be used for feedback control of the operation of the binary filter design system <b>100.</b> Patterning on demand system <b>20</b> includes filter design system <b>100</b> of the present invention.<!-- EPO <DP n="14"> --></p><p id="p0052" num="0052">Filter design system <b>100</b> is configured and operable for receiving intensity data indicative of an intensity distribution map corresponding to a desired exposure condition (EC) and being in the form of an EC distribution map <b>159</b> and utilizing this data for generating filter data indicative of a binary pattern of an optimized binary mask to be used for creating a desired light structure. Thus, in the present example, output of the filter design system <b>100</b> is directly connected to a pattern generation module <b>200</b> of patterning on demand system <b>20.</b></p><p id="p0053" num="0053">It should, however, be noted that the output of the filter design system may be stored in a storage device and used off-line for further filter/mask creation. As for the filter implementation system. <b>22,</b> it may be configured and operable according to the present invention for creating a filter based on a binary filter design pattern, as will be described more specifically further below.</p><p id="p0054" num="0054">It should be noted here that the terms <i>exposure condition (EC) distribution map.</i> e.g., <i>intensity distribution map,</i> and <i>transmittance condition (TC) distribution map</i> are generally used herein to denote a two dimensional map of values (e.g.. scalars or vectors). Such maps may be represented as images (e.g., pixilated images) and accordingly they may be described and referred to below using image terminology (e.g., values in such a map are also referred to as <i>pixels</i>). In certain applications to which the present invention pertains, the values in an EC distribution map are indicative of light intensity distribution to be obtained after the input light passage through/interaction with the mask, e.g., at the imaging plane as can be used/controlled by an aerial imaging/inspection system. The values in a TC distribution map may be indicative of a transmittance/reflectance distribution of a spatial filter/source mask (i.e., in the mask plane), which is designed for emulating exposure conditions as defined in an EC distribution map.</p><p id="p0055" num="0055">It should also be noted that terms binary pattern, binary map and the like are used herein to denote a two dimensional map which associates each point thereon with one of two values (e.g., with a binary/Boolean value). Such binary patterns may be represented/implemented in dynamic/transient or static masks including for example duo-chromatic/duo-transmissive images, spatial light modulators (SLM) of binary<!-- EPO <DP n="15"> --> nature (e.g., transmissive/semi-transmissive or transmissive/opaque modulators), patterned screens, perforated foils and also data indicative of such patterns or their digital representations.</p><p id="p0056" num="0056">In the present example of <figref idrefs="f0001"><b>Fig. 1</b></figref><b>,</b> patterning system <b>20</b> is associated with an aerial inspection system <b>400,</b> which utilizes an optimized binary spatial filter <b>420</b> formed by pattern generation module <b>200</b> for reticule inspection. Optionally, the aerial inspection system <b>400</b> may also provide a feedback control signal to the filter design system <b>100.</b> Aerial inspection system <b>400</b> includes a light port <b>410</b> providing inspection light <b>L1</b> (typically in the ultra violet (UV) regime or deep UV (DUV) regime) to propagate through the filter <b>420</b> towards an object being patterned and/or inspected located at inspection/imaging plane <b>PL.</b></p><p id="p0057" num="0057">Filter implementation system <b>22</b> typically includes a filter carrier module <b>300</b> used to hold the filter in the propagation path of Light <b>L1</b> such that after light <b>L1</b> interacts with the filter <b>420</b> it forms patterned/structured light <b>L2</b> propagating to the inspection plane <b>PL.</b></p><p id="p0058" num="0058">As will be described further below, the filter carrier module <b>300</b> may be configured according to the invention for selectively providing interaction of light <b>L1</b> with a desired spatial filter. The latter may be a dynamic/pseudo-dynamic filter/mask created by the pattern generation module <b>200</b> of the invention. Pattern generation module <b>200</b> may be configured and operable in accordance with the wavelength regime(s) used by aerial inspection system <b>400,</b> and is adapted for implementing/generating optimized binary spatial filter <b>(420)</b> capable of structuring/patterning light in these wavelength regimes (e.g., masking the UV or DUV radiation).</p><p id="p0059" num="0059">The filter design system <b>100</b> is configured and operable for receiving a desired EC distribution map <b>159</b> and designing a corresponding binary spatial filter pattern <b>170</b> (e.g., binary mask). The binary mask pattern <b>170</b> can then be implemented by filter implementation system <b>20</b> to create structured light <b>L2</b> approximating the desired EC distribution <b>159.</b> Optionally, filter design system <b>100</b> is also configured for receiving tolerance data <b>158</b> and is adapted to utilize that data for designing the pattern of the binary spatial filter such that a difference between the structure/pattern of light beam <b>L2</b><!-- EPO <DP n="16"> --> and the desired EC distribution <b>159</b> is within an acceptable tolerance level provided in tolerance data <b>158.As</b> noted above, patterning on demand system <b>20</b> may also be associated with a pattern generation module <b>200</b> (or a driver thereof) allowing on demand implementation of an optimized binary spatial filter <b>420</b> based on a binary filter pattern <b>170.</b> To this end, the optimized binary spatial filter <b>420</b> may be implemented by utilizing any known light patterning technique suitable for operating at desired wavelengths. For example, pattern generation module <b>200</b> may be configured and operable of implementing/generating filter <b>420</b> as a static mask by patterning the mask on a foil (i.e., perforated foil PF mask) and/or by patterning chrome on a glass COG mask.</p><p id="p0060" num="0060">In case of static masks, filter carrier module <b>300</b> may be configured for carrying /embedding one or more of such mask(s). An example of filter carrier module <b>300</b> adapted for carrying static masks and interposing a selected one of them in the optical path of a light source is known in the art as a sigma wheel module. A sigma wheel module is typically capable of carrying several static masks along its perimeter and is mounted for rotation about its central axis. Rotation of the sigma wheel allows engagement of a selected mask to interact with light impinging on the wheel. According to the invention, a controller unit may be associated with such a sigma wheel tool and may be configured and operable for receiving a desired binary filter design from the system <b>100</b> and switching/rotating the sigma wheel to locate the most suited static mask (which best approximates the desired binary mask pattern <b>170)</b> in the optical path of light propagating towards the wheel's plane.</p><p id="p0061" num="0061">Considering creation of a dynamic (i.e., transient) spatial filter <b>420,</b> this may be implemented by utilizing a spatial light modulation technique provided by the present invention. When configured according to this technique, filter implementation system <b>22</b> is capable of on-the-fly generation of transient binary spatial filters which may be adapted for marking/filtering light in various wavelength regimes including the UV and/or DUV regime. Embodiments of a filter implementation technique of the invention will be described below with reference to <figref idrefs="f0006 f0007 f0008 f0009"><b>Figs. 4A to 4H</b></figref> and <figref idrefs="f0009 f0010"><b>Figs. 5A to 5C</b></figref><b>.</b><!-- EPO <DP n="17"> --></p><p id="p0062" num="0062">Reference is now made to <figref idrefs="f0002"><b>Fig. 2A</b></figref> illustrating schematically, in the form of a block diagram, the configuration of a filter design system <b>100</b> according to the present invention. Common elements and features of the invention having similar purpose or functionality are identified by the same reference numerals in all the figures.</p><p id="p0063" num="0063">System <b>100</b> is confgured as a computer system including inter alia such utilities/modules as data input and output utilities (not shown); processor utility <b>102</b> for processing the input data and generating output data indicative of a binary spatial filter; and also preferably includes internal memory utility <b>140.</b> The system <b>100</b> is thus configured and operable for receiving/utilizing an input data indicative to the intensity distribution map or EC distribution map <b>159,</b> and processing the input EC distribution map <b>159</b> (preferably utilizing a predetermined tolerance data) to produce a filter data <b>170</b> corresponding to a binary spatial filter design/pattern. Possibly, the filter data <b>170</b> is then transferred to a storage device or to a pattern generation module <b>200</b> (or to a driver associated therewith) and is further used to generate a corresponding binary spatial filter.</p><p id="p0064" num="0064">In some embodiments, the processor utility <b>102</b> includes a conversion module <b>112</b> which performs a preliminary processing of the input EC distribution map <b>159</b> to convert the map data <b>159</b> into a transmittance distribution map data <b>160</b> indicative of desired distribution of optical properties to be obtained in the pattern of the binary spatial filter (filter data <b>170).</b> Examples of EC distribution map <b>159</b> and a filter data <b>170,</b> derived therefrom utilizing the technique of the present invention, are graphically illustrated respectively in <figref idrefs="f0003"><b>Figs. 3A</b></figref> <b>and</b> <figref idrefs="f0005"><b>3F</b></figref><b>.</b></p><p id="p0065" num="0065">The processor utility <b>102</b> includes classification module <b>110</b> which is adapted for processing data indicative of the received EC distribution map (e.g., in the form of the transmittance distribution map <b>160),</b> and generating a blobbed transmittance map <b>162</b> formed with blobs of homogeneous transmittances. The processor utility <b>102</b> also includes a binary pattern module <b>130</b> configured for analyzing the blobbed transmittance map and replacing blobs in the blobbed map <b>162</b> with binary patterns (e.g., with data indicative thereof), to thereby generate output filter data <b>170</b>indicative of a pattern of a binary spatial filter corresponding to the EC distribution map <b>159.</b><!-- EPO <DP n="18"> --></p><p id="p0066" num="0066">Optionally, in some embodiments of the present invention, the processor utility <b>102</b> of system <b>100</b> may also include a general processing unit <b>150</b> (e.g., processor) and a memory utility <b>140</b> which may be utilized by any of modules <b>110</b> and/or <b>130</b> for carrying out various types of data processing. The memory utility <b>140</b> may be used for storing various types of data, such as reference data (e.g., tolerance data), input EC map, as well as output filter data) and/or for communicating data (directly or indirectly) between the modules and external devices such as an external storage device and a pattern generation module <b>200</b> or a driver thereof.</p><p id="p0067" num="0067">As indicated above, the input EC distribution map <b>159</b> may typically represent a desired structure (e.g., intensity distribution, exposure/illumination pattern) of light <b>L2</b> to be used in creation of a binary spatial filter/mask intended for use in specific patterning/inspection applications. A TC distribution map <b>160</b> may be derived from the EC distribution map <b>159</b> (e.g., utilizing conversion module <b>112</b> described below). Alternatively or additionally, the input EC distribution map <b>159</b> may by itself include or be indicative of a TC distribution map <b>160</b> corresponding to a desired design of a spatial-filter/source-mask. In this regard, the EC distribution map <b>159</b> is indicative of a TC distribution map <b>160</b> (i.e., being a non binary map) which should be approximately implemented by binary spatial filter indicated by filter data <b>170.</b></p><p id="p0068" num="0068">For example, in some embodiments of the invention, EC distribution map <b>159</b> is indicative of a desired illumination pattern/structure at an optical plane spaced from the plane of the spatial filter/source mask (i.e., at any optical plane between the location of the filter/mask <b>420</b> and the image-plane/inspection surface/plane <b>PL).</b> EC distribution map <b>159</b> may represent a desired exposure condition to be approximately emulated at an image plane of the optical system or at a Fourier plane thereof. In such cases, conversion module <b>112</b> may optionally be employed to convert the received EC distribution map <b>159</b> into a desired TC distribution map <b>160</b> indicating a transmittance pattern which should be provided by the spatial filter to emulate the desired exposure condition. In the following, the operation of the classification module <b>110</b> and binary pattern module <b>130</b> are described enabling to approximate the desired exposure condition through binary spatial filter indicated by filter data <b>170.</b><!-- EPO <DP n="19"> --></p><p id="p0069" num="0069">The classification module <b>110</b> is configured and operable for receiving/retrieving EC distribution map <b>160</b> (or a TC distribution map <b>159)</b> and categorizing values in this map <b>160</b> into a set of bin values (bin values are also referred to herein as classes or categories) and replacing each value in said map <b>160</b> with a corresponding value in the set of bin values to thereby generate a blobbed map indicative of the desired spatial filter to be obtained. The set of classes/bin values may be a predetermined set (independent of the EC map <b>160</b> to be processed), or alternatively the bin values, and possibly also the number of bins, are determined based on the EC distribution map <b>160</b> and/or TC distribution map <b>159.</b> In some embodiments of the invention, the classification module <b>110</b> utilizes tolerance data <b>158,</b> for processing the EC distribution map <b>160.</b></p><p id="p0070" num="0070">For example, the tolerance data <b>158</b> may include any one or more of the following: (i) transmittance tolerance data indicative of allowable variation between the transmission values of the blobs and the transmission/intensity values of corresponding regions in the EC distribution map <b>160</b> (or TC map <b>159</b>);(ii) geometric tolerance data indicative of allowable variation in the geometric shapes of the blobs; and (iii) production tolerance data indicative of the production tolerances associated with the pattern generation module <b>200.</b> In accordance with the tolerance data <b>158,</b> the processing utility <b>102</b> may be configured and operable to modify any one or more of the shapes of the blobs, their respective transmission values and also the binary transmission patterns which may be subsequently used to substitute the blobs as described further below. Accordingly the processing utility <b>102,</b> determines a design data <b>170</b> of a spatial filter having a binary pattern corresponding to the intensity distribution map <b>160</b> within tolerances provided by the tolerance data <b>158.</b></p><p id="p0071" num="0071">Specifically, in the present example, the classification module <b>110</b> may utilize the transmittance tolerance data to determine a set of transmission values (bin values) which can be used to substitute the transmission values in the intensity distribution map <b>160</b> (e.g., or in its corresponding TC map 159 as the case may be). Typically, the number of bin transmission values complies with at least one of the following: being<!-- EPO <DP n="20"> --> less than a number of distinct transmission values in the intensity distribution map<b>160</b>, and not exceeding 6 transmission values.</p><p id="p0072" num="0072">Thus the classification module <b>110</b> may utilize the tolerance data <b>158</b> to determine the set of classes/bin values and/or to determine association data (e.g., rules, lookup tables and the like) associating each intensity value/pixel of EC distribution map <b>160</b> with a certain bin value. In this regard it should be understood that associating a pixel in the EC distribution map <b>160</b>with a corresponding bin value may be performed by selecting the bin value which is closest to the pixel value according to any suitable distance function (being a linear function or other).<br/>
72.1. The blobbed map <b>162</b> is thus obtained by classifying and replacing the values of "pixels" in the EC distribution map <b>160</b> with bin values corresponding thereto. In this manner, pixels of the EC distribution map <b>160</b> are grouped to form blobs of adjacent pixels of the same bin-value (class), and thus a blobbed map <b>162</b> is formed.</p><p id="p0073" num="0073">In some embodiments of the invention, the classification module <b>110</b> may be configured and operable for providing blobbed map <b>162</b> in which the blob sizes are above a certain minimal size. For example, in accordance with the tolerance data <b>158</b> (e.g., geometric tolerance data), the blobs' sizes may be manipulated and modified by inflating / dilating or deflating too small or too large blobs (e.g., in an isotropic manner). In some cases, the transmission value (bin value) of such a modified blob may be replaced/exchanged by another bin value, such as to approximately maintain the total transmittance through the blob and to thereby improve the accuracy of the approximated emulated exposure condition obtained by the binary spatial filter. Also in accordance with the tolerance data <b>158</b> (e.g., geometric tolerance data), classification module <b>110</b> may be configured and operable to consolidate small blobs, when possible, with adjacent blobs to thereby form consolidated blobs with sizes above a certain minimal size.</p><p id="p0074" num="0074">Binary pattern module <b>130</b> is configured for processing the blobbed intensity map <b>162</b> formed by classification module <b>110</b> and generating a binary filter design (filter data <b>170)</b> corresponding thereto and accordingly to the EC distribution map <b>160.</b> Each<!-- EPO <DP n="21"> --> blob in the blob map <b>162</b> is associated with a certain bin-value/class corresponding to a certain property of interest (typically, to the average transmittance/reflectance through the blob). Binary pattern module <b>130</b> is operable for replacing at least one blob of the blobbed map <b>162</b> with a corresponding binary pattern which has the similar value of that certain property (optimized binary transmission patterns having similar average transmissions).</p><p id="p0075" num="0075">It should be understood that according to certain embodiments of the invention, binary pattern module <b>130</b> utilizes a stock of binary patterns (reference data e.g., stored in memory <b>140</b>), and is operable for replacing blobs in the blobbed map <b>162</b> by selecting suitable binary patterns from the stock. Alternatively or additionally, according to certain embodiments of the invention, the binary pattern module <b>130</b> is operable for generating binary patterns based on certain properties of the blob to be replaced. Thus, the binary patterns may be generated from scratch in accordance with the blob property (e.g., transmission value), or they can be generated by manipulating ready binary patterns which are stored in memory (<b>e.g., 140).</b> In the latter case, binary pattern module <b>130</b> may be configured and operable for utilizing tolerance data <b>158</b> (e.g., geometric tolerance and/or production tolerance data) to determine which binary transmission pattern is most suited for replacing a blob.</p><p id="p0076" num="0076">Turning now to <figref idrefs="f0003"><b>Fig. 2B</b></figref> there is illustrated a flow chart <b>500</b> of an embodiment of a method for processing an EC distribution map <b>160</b> and generating data <b>170</b> indicative of an optimized binary mask. This method is an example of a possible operation of the binary filter design system <b>100</b> exemplified in <figref idrefs="f0001"><b>Figs. 1</b></figref> <b>and</b> <figref idrefs="f0002"><b>2A</b></figref>. Illustrations exemplifying the possible operation and the results at various stages of this method are shown for example in <figref idrefs="f0003 f0004 f0005"><b>Figs. 3A - 3G</b></figref> and are described together with the method steps of <figref idrefs="f0002 f0003"><b>Fig. 2</b></figref><b>B.</b></p><p id="p0077" num="0077">In <b>202,</b> an EC distribution map <b>160</b> is provided. Generally, the EC distribution map <b>160</b> is indicative of a desired distribution of a certain illumination/exposure property. For accurate patterning or aerial inspection, it is typically desirable to obtain an inspecting light (e.g., <b>L2</b> of <figref idrefs="f0001"><b>Fig. 1</b></figref><b>)</b> in which the distribution of the certain illumination property, at a certain imaging/inspection plane/surface, corresponds to the EC<!-- EPO <DP n="22"> --> distribution map <b>160.</b> This EC distribution map <b>160</b> is processed to determine an optimized binary filter pattern <b>170</b> (steps <b>205</b>). The filter pattern/data <b>170</b> is designed such that when light passing through this pattern at a first plane arrives at a certain second plane/surface (e.g., inspection plane on the aerial inspection system), it has intensity distribution resembling distribution of the certain illumination property comparable with the desired EC distribution <b>160</b> (e.g., approximating EC distribution in accordance with the predetermined tolerance data <b>158).</b></p><p id="p0078" num="0078">According to some embodiments of the invention, the first and second surfaces are located in different planes. In such embodiments, an additional procedure <b>203</b> may be employed (e.g., by conversion module <b>112</b> of <figref idrefs="f0002"><b>Fig. 2A</b></figref>) for converting the EC distribution map <b>160</b> into a desired TC distribution map <b>159.</b> This can be achieved by utilizing any algorithm capable of devising the distribution of an exposure property of interest within the light beam at one surface based on the distribution of a corresponding property at another surface (e.g., algorithms simulating/computing wavefront propagation of a light beam along an optical path between the two surfaces).</p><p id="p0079" num="0079">In some other embodiments, the received EC distribution map <b>160</b> may be identical to, or indicative of the desired TC distribution map <b>159</b> to be obtained/approximated by the optimized binary mask pattern indicated by filter data <b>170.</b> For example, the EC distribution map <b>160</b> may correspond to a desired lateral EC distribution of the light beam at a certain plane/surface and the TC distribution map <b>159</b> indicative of a certain transmittance pattern to be implemented by a filter (e.g., located at the same plane/surface) for obtaining/approximating the desired lateral intensity distribution.</p><p id="p0080" num="0080">The TC distribution map <b>159</b> is generally indicative of a desired design of an aperture arrangement to be applied to the light for obtaining the desired exposure condition or intensity distribution (as indicated by EC distribution map <b>160).</b> The TC distribution map <b>159</b> may be, for example, generated/provided in the form of a gray level square image of typically 101x101 or 201x201 pixels.</p><p id="p0081" num="0081">In the following, the processing to the EC distribution map <b>160</b> is considered for designing the binary filter and providing filter data <b>170</b> indicative thereof. It should be however noted that in some cases, the processing described below is actually carried out<!-- EPO <DP n="23"> --> on the TC distribution map, specifically in cases where some pre-conversion is applied to the EC distribution map <b>160</b> to produce a TC distribution map <b>159</b> that is indicative of the desired transmittance/reflectance through the spatial Filter.</p><p id="p0082" num="0082">The binary filter pattern/data <b>170</b> is determined based on the EC distribution map <b>160</b> typically via several stages including classification stage <b>210,</b> association stage <b>220,</b> and binary pattern design stage <b>230.</b> In the classification stage and association stages, <b>210</b> and <b>220</b> (e.g., performed by classification module <b>110</b> of <figref idrefs="f0002"><b>Fig. 2A</b></figref>), the EC distribution map <b>160</b> is processed to form a blobbed map <b>162.</b> Then, in the binary pattern design stage <b>230</b> (e.g., performed by binary pattern module <b>130</b> of <figref idrefs="f0002"><b>Fig. 2A</b></figref>), the blobs in the blobbed map <b>162</b> are replaced by suitable binary patterns allowing to approximately obtain the desired distribution of the certain illumination property as indicated by EC distribution map <b>160.</b></p><p id="p0083" num="0083">During the classification stage <b>210,</b> the "colors" (i.e., values/transmittance values) in the EC distribution map <b>160</b> arc classified and respectively associated with a smaller set of bins (i.e., category values). Optionally, classification data, including for example a set of rules or a lookup table (LUT), for classifying transmittance values into bins, is obtained.</p><p id="p0084" num="0084">As noted above, bin values may be a set of predetermined values. In some other embodiments, alternatively or additionally, the set of bin values (or some of them) may be determined based on the EC distribution map <b>160.</b> The set of bin values may be designed to optimally associate pixels in the EC distribution map <b>160</b> with a small number of "colors"/bin-values. In some embodiments the set of bin values is selected for reducing/minimizing both the number of colors/bin values and a variance between the EC distribution map <b>160</b> and a blobbed map <b>162</b> obtained in a manner described below. Typically, a number of bin values obtained at this stage substantially does not exceed 6 values. In some embodiments, the set of possible bin values are provided/determined independently from the EC distribution map <b>160.</b></p><p id="p0085" num="0085">In the association stage <b>220,</b> pixels in the EC distribution map <b>160</b> are replaced with the bin values which correspond thereto. The pixels' values may be replaced with the bin values for example based on LUT determined in the classification stage <b>210</b> or via<!-- EPO <DP n="24"> --> classification rule. Such a classification rule may be predetermined, for example based on a certain distance function to measure the "distance" between the pixels and bins and categorizing a pixel according to the nearest bin closest thereto. A distance function may be a linear or non linear function which provides a measure for a distance between a bin value and a pixel value (e.g., normalized pixel value or not).</p><p id="p0086" num="0086">By replacing pixels in the EC distribution map <b>160,</b> a blobbed map <b>162</b> is formed. For example, each blob has a single homogeneous transmission value. At this stage, several operations may be carried out in order to further optimize the design of the binary spatial filter. For example, if increased total transmission of the blobbed map is desired/required, then transmission through each of the blobs may be increased by the appropriate factor.</p><p id="p0087" num="0087">Optionally, during the classification and/or association stages, <b>210</b> and <b>220,</b> the values of the pixels may be normalized. Typically, pixel values are normalized to the scale of the bin values. Normalization may be performed utilizing any suitable function (i.e., representing linear or non-linear relation between the original pixel value and the normalized one). Generally, pixel values and/or bin values may be either scalars or multi-dimensional values (e.g., vectors, RGB values). Accordingly, the normalization and the distance function are selected in accordance with the dimensions of the pixel and bin values. It should also be understood that a normalization operation/function may be seamlessly incorporated in the distance computation function.</p><p id="p0088" num="0088"><figref idrefs="f0003 f0004 f0005"><b>Figs. 3A to 3G</b></figref> exemplify a pattern of a binary spatial filters obtained by applying the above described data processing method of the invention on an input EC distribution map. An example of the classification and blob creation stages <b>210</b> and <b>220</b> is illustrated by <figref idrefs="f0003 f0004"><b>Figs. 3A to 3D</b></figref><b>.</b> An image <b>160EX</b> exemplifying an EC distribution map <b>160</b> is shown in <figref idrefs="f0003"><b>Fig. 3A</b></figref><b>.</b> In this image, as in some embodiments of the invention, each pixel in the EC distribution map <b>160</b> is represented as a gray scale value between 0 and 255 (e.g., 8 bit value). A few bin-values (bins/classes/categories), to which the pixels of the TC distribution map <b>160EX</b> are classified, are shown for example in <figref idrefs="f0004"><b>Fig. 3C</b></figref>. The bin values are selected to cover a desired exposure condition of the EC distribution map<!-- EPO <DP n="25"> --> <b>160</b> (e.g., to provide a desired transmittance/reflectance range, as indicated by the EC distribution map <b>160EX</b>).</p><p id="p0089" num="0089">In the example of <figref idrefs="f0004"><b>Fig. 3C</b></figref><b>,</b> five predetermined bin values ranging from 0 (non-transmissive/reflective pixel) to 5 (fully- transmissive/reflective pixel) are used. The five bins <b>Bin1 ... Bin5</b> are respectively centered at 0, 0.25, 0.5, 0.75 and 1.</p><p id="p0090" num="0090">The set of bin-values, and possibly the bin-value number, arc determined based on the transmittance distribution map <b>160E.</b> To this end, various techniques may be used in the classification stage <b>210</b> (e.g., by classifier module <b>110</b>) to determine the set ofbin values, In a specific but not limiting example, during classification stage <b>210,</b> a histogram <b>160HIST</b> (illustrated in <figref idrefs="f0004"><b>Fig</b>. <b>3B</b></figref>) is processed (e.g., before or after normalization of pixel values). The histogram is indicative of the number of occurrences/frequency of various pixel values in the EC map <b>160EX.</b> The histogram profile is divided into several histogram regions. Each region is classified during the classification stage <b>210</b> and associated with a certain bin-value. Bin values used for classifying each region are typically selected such as to reduce the variance/"distance" between the EC map <b>160</b> and a blobbed map to be produced in the next stage <b>(220).</b> Division of the histogram may also be based on the histograms profile. For example, considering the locations of major minima's and maxima's in the histogram profile and/or the sizes of areas bounded below the histogram line at different regions and/or the number of bins to be obtained, each histogram region is associated with a corresponding bin value which may be computed from the histogram region itself. A bin value can be computed by averaging the frequencies of different values in this region utilizing a certain weighting function.</p><p id="p0091" num="0091">As noted above, in the blob creation stage <b>220,</b> a blobbed map <b>162</b> is generated by replacing pixels in the transmittance distribution map <b>160</b> with corresponding bin values (in accordance with classification data <b>161</b>). It should be noted here that stages classifying and blob creation steps <b>210</b> and <b>220</b> may be performed sequentially: the pixels are classified and then replaced with the proper bin values, or alternatively these steps (classifying and replacing pixel values with bin values) may be performed concurrently.<!-- EPO <DP n="26"> --></p><p id="p0092" num="0092">The blobbed map obtained in stage <b>220</b> is formed as an image in which each pixel value is one of a few possible bin values. Since typically a small number of bins are used (typically no more than 10 and preferably not exceeding 6), then adjacent pixels are typically associated with the same bin value and thus blob regions are formed (each blob is associated with a certain bin value). Typically, for most aerial inspection applications, four or five bin values are sufficient to generate an adequate binary spatial filter which, when used, provides good identification of defective items with low rate of miss-identification (namely low rate of cases at which a defective pattern is not identified as such). The number of bin values or other data indicative of the tolerable variation between the pixels values in the EC distribution map 160 and corresponding bin values by which the pixels are replaced, may for example be provided in the tolerance data <b>158.</b></p><p id="p0093" num="0093"><figref idrefs="f0004"><b>Fig. 3D</b></figref> shows an example of a blobbed map <b>162EX,</b> formed by applying the above described classifying and blob creation stages <b>210</b> and <b>220</b> to the EC distribution map <b>160EX</b> of <figref idrefs="f0003"><b>Fig. 3A</b></figref><b>.</b> Blobs <b>B0</b> to <b>B8</b> are depicted in the blobbed map <b>162EX</b>. Each of the blobs <b>B0</b> to <b>B8</b> is associated with one bin value (from the set of bin values <b>Bin1- Bin5</b> of <figref idrefs="f0004"><b>Fig. 3C</b></figref><b>)</b> indicating, in this example, transmittance through the blob. In <figref idrefs="f0004"><b>Fig. 3D</b></figref><b>,</b> blobs <b>B0</b> is associated with bin value <b>Bin1</b> of <figref idrefs="f0004"><b>Fig. 3D</b></figref><b>,</b> and accordingly blobs <b>B5</b> and <b>B8</b> are associated with <b>Bin2,</b> blobs <b>B1</b> and <b>B4</b> are associated with <b>Bin3,</b> blobs <b>B3</b> and <b>B6</b> are associated with <b>Bin4</b> and, blobs <b>B2</b> and <b>B7</b> arc associated with <b>Bin5</b>.</p><p id="p0094" num="0094">Thus, at the end of the blob creation stage <b>220,</b> a relatively large number of values in the EC distribution map <b>160</b> is reduced to a few transmittance values in the blobbed map <b>162.</b> Preferably, according to some embodiments of the invention, the total transmission through the blobs (e.g., <b>B0</b> to <b>B8)</b> is maintained equal to the total transmittance through corresponding regions of the TC distribution map <b>160EX</b> (e.g., <b>B_0</b> to <b>B_8</b> in <figref idrefs="f0003"><b>Fig. 3A</b></figref><b>).</b></p><p id="p0095" num="0095">In stage <b>230,</b> filter data/pattern <b>170</b> being a binary map/pattern of a binary source mask suited for use for aerial imaging, is obtained by replacing the blobs in the blobbed map <b>162</b> with suitable binary patterns. As noted above, each blob in the blobbed map <b>162</b> is associated with a certain bin value which is, in turn, associated with a certain<!-- EPO <DP n="27"> --> optical property such as an average transmittance, reflectance or luminance. One or more blobs of the blobbed map <b>162</b> are replaced by suitable binary patterns.</p><p id="p0096" num="0096">A binary pattern may be considered as being suitable to replace a blob, if it has either an average/specific value of the certain optical property that is substantially similar to the bin value of the blob, or alternatively or additionally, if the total value of that certain optical property (e.g., the total transmittance) is maintained while replacing the blob with the binary pattern. To this end, the tolerance data <b>158</b> may include data indicative of the allowable differences in between the transmission of the blobbed map <b>162</b> and the transmission of the EC map <b>160.</b></p><p id="p0097" num="0097">Alternatively or additionally, a binary pattern may be considered as being suitable to replace a blob, if it can modify (inflate or deflate) the size/region of the blob by a few percentages, such that when this binary pattern is used, the total value of that certain optical property is substantially maintained. For most imaging/inspection applications, a blob region can be inflated or deflated by up to 20 percentages (preferably by no more than 10 percentages) without substantially impairing the accuracy of inspection. Optionally, tolerance data <b>158</b> includes geometric tolerance data indicative of allowable variations in the blobs' sizes and possibly also production tolerances indicative of the variability and minimal feature size which can be implemented when generating the binary spatial filter.</p><p id="p0098" num="0098">In stage <b>230</b> (blob replacement by binary pattern), the following techniques may be used in order to optimize the resultant binary source mask <b>170:</b></p><p id="p0099" num="0099">Blobs associated with the highest energy bin(s) may be represented by "open polygons" (a polygon being a function describing the contour of a blob). Then isotropic inflation/dilation of such blobs may be applied to increase the energy/total-transmission of such blobs.</p><p id="p0100" num="0100">Blobs associated with the low energy bin, may be replaced by smaller regions of higher transmission (e.g., with fully transmitting regions such as "holes" or "perforations"). The size (area) of the regions should preferably be computed to give the required transmission. Moreover, a minimal size ("hole" size) of such blobs may be required to satisfy optical constraints (e.g., diffraction) and/or mechanical constraints<!-- EPO <DP n="28"> --> (e.g., production tolerances) which might be imposed by the technique used for implementing the binary source mask in accordance with data <b>170</b> (e.g., perforated foil, CUG or other)</p><p id="p0101" num="0101">Some small blobs of intermediate bin-values (e.g., partially transmitting blobs) may include only a few "holes"/transmission regions when replaced with their corresponding binary pattern. Then, such small blobs may be instead replaced by a single perforation/hole/transmitting region. The partial transmission of such blobs may be compensated for by an isotropic dilation of the blob.</p><p id="p0102" num="0102">Other optimizations of the binary source mask may include: (a) randomizing the positions of "holes"/transmitting regions, e.g., this may reduce aliasing and interference effects; (b) symmetrizing transmission-regions of symmetrical blobs; (c) confirming and adapting blob shapes such that blobs and/or transmission-regions thereon do not intersect and prune/replace intersecting/touching regions.</p><p id="p0103" num="0103">The arrangement and configuration of transmitting regions on the binary source mask data <b>170</b> may be further processed in order to determine other alternative configurations which minimize a number of transmission-regions. This might save design time, manufacturing time and costs in implementing the binary source mask.</p><p id="p0104" num="0104"><figref idrefs="f0005"><b>Fig. 3F</b></figref> shows an example of a filter data indicative of a binary spatial filter/mask <b>170EX</b> that corresponds to the exemplified transmittance distribution map <b>160EX.</b> The binary mask <b>170EX</b> is obtained by utilizing replacement of blobs in the blobbed map <b>162EX</b> (step <b>230)</b> with the binary patterns <b>Pat1</b> to <b>Pat4</b> shown in <figref idrefs="f0005"><b>Fig. 3E</b></figref><b>.</b> A contour plot <b>170CNTR</b> corresponding to the binary source mask <b>170EX</b> is shown in <figref idrefs="f0005"><b>Fig. 3G</b></figref><b>.</b> Contour plot <b>170CNTR</b> is an example of an operative map to be transferred to a cutting/pattern generation module for creating a mask, for example a perforated foil mask, corresponding to the mask <b>170EX.</b></p><p id="p0105" num="0105">The operation of the blob replacement stage <b>230</b> can be better understood by considering the example shown in <figref idrefs="f0005"><b>Figs</b>. <b>3E and 3F</b></figref><b>.</b> Referring to <figref idrefs="f0005"><b>Fig. 3E</b></figref>, bin values <b>Bin1</b> to <b>Bin5</b> are illustrated with association to corresponding binary patterns <b>Pat1</b> to <b>Pat4.</b> The binary patterns <b>Pat1</b> to <b>Pat4</b> are formed as spaced apart regions of two transmittance values. In this example, binary patterns <b>Pat1</b> to <b>Pat4</b> are marked with<!-- EPO <DP n="29"> --> black color for representing substantially non transmissive regions (opaque regions) and white color for representing substantially fully transmissive regions. Indeed, the average transmittance values of patterns <b>Pat1, Pat2, Pat3</b> and <b>Pat4</b> are approximately of the bin values <b>Bin1, Bin2, Bin3,</b> and <b>Bin5,</b> respectively. Accordingly, when these patterns are used to replace blobs corresponding to respectively bin values <b>Bin1, Bin2, Bin3,</b> and <b>Bin5,</b> the same average transmittance is obtained, and actually the same total transmittance of each blob is maintained. To this end, patterns <b>Pat1, Pat2, Pat3</b> and <b>Pat4</b> may be considered substantially equivalent to blobs with bin values <b>Bin1, Bin2, Bin3,</b> and <b>Bin5</b> respectively.</p><p id="p0106" num="0106">However, as can also be seen from <figref idrefs="f0005"><b>Fig</b>. <b>3E</b></figref><b>,</b> a binary pattern with a certain value of the certain optical property may also serve for replacing blobs with different bin values (e.g., that have different average value of said certain optical property). For example, blobs <b>B3</b> and <b>B6,</b> which are associated with bin value <b>Bin4,</b> are replaced in the present example by pattern <b>Pat4</b> which has a different average transmittance then bin value <b>Bin4.</b> The average transmittance value of <b>Bin4</b> is 0.75, while the average transmittance of <b>Pat4</b> is 1 (fully transmissive). This forms a discrepancy between a bin value of a blob and the average value of the certain optical property of the binary patterns used for replacing the blob. According to the invention, such discrepancy can be compensated by modifying the extent of the blob region, in which the pattern is introduced, such that the total value of the optical property is maintained (e.g., the total transmittance through the blob is maintained by inflating or deflating the blob).</p><p id="p0107" num="0107">In the present example, the total transmittance <b>T<sub>0</sub></b> through blob <b>B6</b> is proportional to its corresponding bin value <b>Bin4</b> multiplied by its area π<b>R<sub>0</sub><sup>2</sup></b> (<b>R<sub>0</sub></b> being the characteristic radius of the blob <b>B6</b>). The total transmittance <b>T<sub>1</sub></b>, obtained after replacing the blob with binary pattern <b>Pat4.</b> equals to the area of the replaced region π<b>R<sub>1</sub><sup>2</sup></b> times the average transmittance of pattern <b>Pat4,</b> which equals in this example to <b>Bin5.</b> The radius <b>R<sub>1</sub></b> is a new characteristic radius of a region to which pattern <b>Pat4</b> was inserted. Thus, in order to maintain the same total transmittance, namely in order to obtain a condition that <b>T<sub>0</sub></b> = <b>T<sub>1</sub></b>, the characteristic size <b>R<sub>1</sub></b> of the region to which <b>Pat4</b> is placed to replace blob <b>B6</b> should be <b>R<sub>1</sub></b> = <b>R<sub>0</sub>*Sqrt(Bin4/Bin5)</b>, where <b>Sqrt</b> represents<!-- EPO <DP n="30"> --> the square-root function. Thus, the characteristic size/radius of the replaced region is inflated or deflated with respect to the original characteristic size/radius of the blob. In this example, <b>Bin4</b> corresponds to a smaller transmission than <b>Bin5,</b> and thus the new characteristic size <b>R<sub>1</sub></b> of blob <b>B6</b> is smaller than its original size <b>R<sub>0</sub></b>.</p><p id="p0108" num="0108">It should be noted that the operation of the blob replacement stage <b>230</b> may utilize readymade binary patterns of predetermined optical properties and possibly predetermined characteristic feature sizes. Alternatively or additionally, during the blob replacement stage <b>230,</b> binary patterns, suitable for replacing certain blobs, may be created (obtained by suitable processing) on-the-fly in accordance with the desired optical property of the blob (e.g., 70% transmission) and in accordance with the characteristic properties of the two regions from which the spatial binary filter/mask is actually created (e.g., fully-transmissive and fully opaque regions such as in a pattered foil mask).</p><p id="p0109" num="0109">For example, binary patterns, such as those shown in <figref idrefs="f0005"><b>Fig. 3E</b></figref><b>,</b> may be formed on- the-fly by embedding regions of predetermined shape (e.g., circular regions) and of a certain value of the optical property of interest (e.g., fully transmissive regions) within regions of a certain other values of the optical property of interest (e.g., opaque regions). The size and density of the embedded regions are selected (e.g., obtained automatically) in accordance with the desired value of the optical property of interest with which the pattern should comply (e.g., 70% transmission) and possibly also in accordance with a desired feature size.</p><p id="p0110" num="0110">It should be noted that, typically, utilizing binary patterns with too small and/or too dense features (e.g., features below a few tens of microns) may introduce diffraction and/or interference effects. In many cases, this should be avoided in order not to impair aerial inspection / patterning. On the other hand, replacing blobs, or regions of the original transmittance distribution map <b>160,</b> with binary patterns with too large features (e.g., features in the order of few millimeters and larger) may introduce artifacts to the aerial inspection and impair its accuracy. Accordingly, the binary patterns used in the aerial inspection typically include features of size in the order of about 100 microns or a few hundreds of microns.<!-- EPO <DP n="31"> --></p><p id="p0111" num="0111">As a result of the technique of the present invention, as described above with reference to binary filter design system <b>100</b> and to the above-described method of designing a spatial binary mask, the suitable filters for use in aerial inspection or patterning system can be implemented as optimized spatial binary filters formed with spaced apart arrangement of two types of regions of different optical properties. In many embodiments of the present invention, the two types of regions correspondingly have two distinct levels of transmittance and/or two distinct levels of reflectance. This is advantageous over other techniques at least because it allows usage of simple binary filters instead of multi-value filters/masks which are harder to implement (specifically when on-the-fly implementation of such filters is being considered). One type of such binary spatial filter can be implemented utilizing for example, perforated/patterned foil to define a spaced apart arrangement of fully-opaque and fully-transmissive regions, i.e., an arrangement of spaced-apart apertures/perforations in a non-transparent substrate (foil).</p><p id="p0112" num="0112">Non-binary (multi-valued) mask/aperture designs (e.g., TC distribution maps), are typically difficult to implement and require techniques such as CUG. The mask design technique of the invention allows for reducing the mask requirements to binary mask designs, which can be implemented on demand more easily This is obtained without substantially impairing the performance of aerial inspection/patterning systems utilizing binary spatial filters.</p><p id="p0113" num="0113">As described above, a dynamic (i.e., transient) binary spatial filter may be implemented by utilizing a spatial light modulation technique of the present invention, according to which the filter implementation system (<b>22</b> in <figref idrefs="f0001"><b>Fig. 1</b></figref>) is capable of on-the-fly generation of transient binary spatial filters. According to this technique, an optimized binary spatial filter is formed by printing, on an optical surface, a fluid pattern corresponding to the desired pattern of the binary spatial filter. The optical surface serves as a filter carrier module (<b>300</b> in <figref idrefs="f0001"><b>Fig. 1</b></figref>). The optical properties of the optical surface, the ambient optical medium interfacing therewith and the printed fluid are selected such as to create an arrangement of spaced-apart regions of two different total internal reflection (TIR) angles. Patterning/structuring light beam is then achieved<!-- EPO <DP n="32"> --> by directing input light onto the optical surface with an angle between the TIR angles of the pattern, such that portions of this light are reflected (due to TIR condition) from the surface, while other portions of the light pass the surface without being reflected therefrom and preferably without being absorbed thereby. At least one of the reflected/transmitted light portions forms a structured light in accordance with the desired binary spatial filter pattern.</p><p id="p0114" num="0114">An example of the above-described technique of the present invention for implementing dynamic binary spatial filters (suitable for use in aerial inspection) will now be described with reference to <figref idrefs="f0006 f0007 f0008"><b>Figs. 4A-4F</b></figref><b>.</b> <figref idrefs="f0006"><b>Fig. 4A</b></figref> is a flow chart <b>600</b> of a method for implementing/generating a transient binary spatial filter in the form of an arrangement of spaced apart regions with two different optical properties. Specifically, this method is adapted for generating reflective and/or transmissive spatial filters from which a certain light pattern is respectively reflected and/or transmitted.</p><p id="p0115" num="0115">Initially, filter data indicative of a desired binary spatial filter (source mask) is provided (step <b>610</b>). The filter data is then utilized for forming a transient pattern of regions of different total internal reflection angles (step <b>620</b>). Then, a light pattern (structured light) can be created corresponding to the desired source mask (step <b>630</b>). This is achieved by interaction of an input light beam with the pattern of regions to cause reflection of a structured light pattern from said pattern of regions.</p><p id="p0116" num="0116">The desired source mask may be in the form of a binary pattern corresponding, for example, to a two dimensional arrangement of spaced apart regions of relatively high and low light intensity. Such a two dimensional arrangement may correspond to a desired intensity profile of light at a certain plane in the optical path of light propagation. According to certain embodiments of the invention, the desired source mask is obtained in accordance with the method described above with reference to <figref idrefs="f0003"><b>Fig. 2B</b></figref> (e.g., by filter design system <b>100</b> of <figref idrefs="f0002"><b>Fig. 2A</b></figref><b>).</b></p><p id="p0117" num="0117">In step <b>620,</b> the desired binary spatial filter is implemented as a pattern of different total internal reflection angles. This is achieved by deployment of a liquid pattern on an optical surface, such that a certain total internal reflection angle is formed at regions at which the liquid interfaces the surface, which is different from a certain<!-- EPO <DP n="33"> --> other total internal reflection angle in surface-regions/spaces between the liquid containing regions (e.g., at which the surface interfaces with ambient surroundings). This actually forms a pattern of reflection (e.g., a binary pattern) for light interacting with the optical surface in an angle between two total internal reflection angles. The technique of the invention may also be used to obtain a binary pattern of transmission (for example utilizing light guiding elements as described further below).</p><p id="p0118" num="0118">The optical surface is generally an interface between an optical medium (e.g., optical element) having a certain refraction index <i>N</i> interfacing an ambient environment/medium of refraction index <i>N<sub>1</sub></i>. A pattern of liquid with refraction index <i>N<sub>2</sub></i> is formed on the surface. A first critical (total internal reflection) angle Θ<sub>1</sub> of the pattern of different total internal reflection angles is associated with the interface between the optical surface and the ambient environment and equals Θ<sub>1</sub>=arcsin(N<sub>1</sub>/N).</p><p id="p0119" num="0119">According to some embodiments of the invention, the liquid pattern is formed on the surface from the side of the ambient medium, while the light is directed to interact with the other side of this surface. In these embodiments, the second total internal reflection angle Θ<sub>2</sub> of the pattern of different total internal reflection angles is associated with the interface between the optical medium and the liquid and equals Θ<sub>2</sub>=arcsin(N<sub>2</sub>/N), different from the first total internal reflection angle Θ<sub>1</sub></p><p id="p0120" num="0120">According to some other embodiments of the invention, the liquid pattern is formed on the surface from the side of the optical medium, onto which light is directed to interact with the surface. In these embodiments, the second critical total internal reflection angle Θ<sub>2</sub> is associated with an interface between the liquid and the ambient environment/medium and equals Θ<sub>2</sub>=arcsin(N<sub>2</sub>/N<sub>1</sub>). Possibly, in such embodiments, the ambient medium is solid and the optical medium may be liquid.</p><p id="p0121" num="0121">In step <b>630,</b> an input light beam of substantially collimated light rays is directed to impinge on the optical surface with an angle Θ that is between the first and second critical total internal reflection angles Θ<sub>1</sub> and Θ<sub>2</sub>. Some of the light rays (e.g., those impinging on regions of the surface interfacing the liquid) traverse the interface without being substantially reflected therefrom. Other light rays (e.g., those impinging on regions of the surface interfacing the ambient environment) undergo total internal<!-- EPO <DP n="34"> --> reflection when interacting with the surface thus creating reflected structured light corresponding to a binary pattern of reflection/transmission, indicative of the liquid pattern deployed on the surface (i.e., being the negative of that liquid pattern).</p><p id="p0122" num="0122">As noted above, this technique allows implementation of transient spatial-filters/masks of optical transmission and/or reflection. To this end, the term <i>transient</i> should be recognized with the ability to clear the spatial-filter implemented in step <b>620</b> and possibly replace it by another spatial-filter on demand.</p><p id="p0123" num="0123">Optionally, in step <b>640,</b> the transient pattern of regions of different total internal reflection angles is removed by clearing the liquid from the optical surface. Then, another transient pattern of regions corresponding to another optimized binary spatial filter and other structured light pattern can be formed on the optical surface by repeating steps <b>610</b> and <b>620</b> described above. Removing/clearing the transient pattern can be performed for example by heating the optical surface for evaporating the liquid deployed thereon, and/or wiping or blowing the liquid from the surface, and/or changing affinity of the optical surface, and/or any combination of these techniques.</p><p id="p0124" num="0124">Reference is made to <figref idrefs="f0006"><b>Fig. 4B</b></figref> illustrating more specifically, in a block diagram, an example of a filter implementation system <b>22</b> operative in accordance with the above described flow chart <b>600</b> and suitable for use in the system <b>10</b> of <figref idrefs="f0001"><b>Fig. 1</b></figref><b>.</b> Similarly to system <b>22</b> shown in <figref idrefs="f0001"><b>Fig. 1</b></figref><b>,</b> also here the mask implementation system <b>22</b> includes a mask pattern generation module <b>200</b> and a filter carrier module <b>300.</b> Additionally, and optionally, filter implementation system <b>22</b> may also include filter removal module <b>350</b> configured and operable to clear an implemented filter/mask from the filter carrier module <b>300.</b> This can be achieved utilizing any suitable technique as described above.</p><p id="p0125" num="0125">In this example, the filter carrier module <b>300</b> includes an optical element 333 of a certain refraction index N having an outer surface interfacing an ambient surroundings/environment with refraction index N<sub>1</sub>. Also, in this example, the pattern generation module <b>200</b> is a liquid deployment module <b>222</b> which is configured and operable for receiving filter data indicative of a binary spatial filter, e.g., an optimized binary mask data (i.e., filter data/pattern) <b>170</b> obtained as described above, and<!-- EPO <DP n="35"> --> deploying liquid on the optical surface of element <b>333</b> to form thereon a transient liquid pattern <b>330</b> corresponding to the received filter data.</p><p id="p0126" num="0126">The liquid deployment module <b>222</b> is typically adapted for deployment of suitable pattern of liquid with desired refraction index N<sub>2</sub>. Liquid deployment module <b>222</b> is configured to operate in accordance with the above described method steps <b>610</b> and <b>620</b> to create, on the optical surface, a desired pattern <b>335</b> of regions of different total reflection angles. To this end, pattern <b>335</b> of regions of different total reflection angles implements an optical mask <b>420</b> which can be used for creation of structured light.</p><p id="p0127" num="0127">It should be noted that liquid deployment module <b>222</b> may be implemented as a type of printer module similar to a jet printing unit. For example, the liquid deployment module <b>222</b> may be operable to inject, onto the optical surface, droplets of a selected liquid with refraction index N<sub>2</sub>. Typically, the liquid deployment module <b>222</b> and the liquid used are configured in accordance with one another to enable liquid patterns with a certain desired characteristic minimal feature size. This can be achieved for example by configuring the printer unit to dispose a droplet of a certain minimal size. This is in order to control and/or reduce or prevent interference and/or diffraction to affect the structure of light interacting with (reflected/transmitted) the liquid pattern carrying surface.</p><p id="p0128" num="0128">As further shown in <figref idrefs="f0006"><b>Fig. 4B</b></figref><b>,</b> an aerial inspection system <b>400</b> (constituting a patterning system) can be operated in accordance with the above described method (flow chart <b>600)</b> and generating structured light <b>L2</b> by utilizing the liquid deployment module <b>222</b> and the optical surface <b>333</b> described above. Similarly to the patterning/inspection technique described above in <figref idrefs="f0001"><b>Fig. 1</b></figref><b>,</b> also here the system <b>400</b> includes a light port <b>410</b> projecting collimated light beam (e.g., in the UV-DUV regimes) onto the spatial filter <b>420.</b> Here, the spatial filter <b>420</b> is a spatial light modulator implemented by utilizing an arrangement of spaced apart regions of different internal reflection properties.</p><p id="p0129" num="0129">Indeed, for aerial inspection or other patterning systems, a binary pattern, formed by two types of regions of different internal reflections, may be used. It should<!-- EPO <DP n="36"> --> be recognized that utilizing the above described binary filter design system <b>100</b> and method exemplified by flow chart <b>500,</b> such a binary pattern can be used for implementing various types of inspection/patterning filters corresponding to binary and non-binary intensity maps.</p><p id="p0130" num="0130">It should, however, be understood that the arrangement of spaced apart regions of different internal reflection properties can be formed, according to the invention, with more than two types of different internal reflection regions. Accordingly, such an arrangement may be used for generating a non binary filter with several different transmission levels (several "gray levels"). This can be achieved for example by employing the system <b>22</b> and the method exemplified by flow chart <b>600</b> described above, with more than one liquid. For example, system <b>22</b> and the liquid deployment module <b>222</b> may be configured to utilize two liquids having two different refraction indices <i>N2</i> and <i>N3</i> and respectively associated with two different internal reflection angles Θ<sub>2</sub>=arcsin(N<sub>2</sub>/N) and Θ<sub>3</sub>=arcsin(N<sub>3</sub>/N). The system <b>22</b> may then be configured to receive also non-binary filter data (with 3 "gray" levels) and to print a pattern of three different internal reflection properties.</p><p id="p0131" num="0131">Spatial modulation of light utilizing such a pattern of multiple region types of different internal reflection properties can then be formed for example utilizing a single input light beam and relying on different transmittance/reflectance from the different region types. Alternatively or additionally, multiple light-ports (e.g., such as <b>410)</b> with different properties, may be placed with different angular orientation with respect to the optical surface <b>333</b> (or using differently oriented light guiding units), for example a first light port <b>410</b> projecting light beam <b>L1</b> at an angle between Θ and Θ<sub>1</sub> and a second light port (not shown) projecting light beam (not shown) at an angle between Θ and Θ<sub>2</sub>. For example, one of the light beams (e.g., <b>L1)</b> would then be reflected by surface regions free of one of the liquids (i.e., that do not interface a certain one of the liquids), and the other light beam would be reflected only from surface regions that do not interface any one of the two liquids.</p><p id="p0132" num="0132">Reference is now made to <figref idrefs="f0007 f0008 f0009"><b>Figs. 4C to 4H</b></figref> schematically illustrating several different configurations of spatial filter implementation and corresponding<!-- EPO <DP n="37"> --> configurations of the filter carrier module <b>330</b> of <figref idrefs="f0006"><b>Fig. 4B</b></figref> with an optical spatial binary filter <b>420</b> thereon. Different implementations of transient liquid pattern <b>330</b> on an optical surface <b>333</b> of the filter carrier module <b>330</b> arc also illustrated being adapted for structuring a light beam reflected from and/or transmitted through the optical surface <b>333.</b></p><p id="p0133" num="0133">In these examples, the filter carrier module <b>330</b> includes an optical medium with refraction index <i>N</i> having an optical surface interfacing an ambient medium with refraction index <i>N<sub>1</sub>.</i> A transient liquid pattern <b>330</b> of liquid with refraction index <i>N<sub>2</sub></i> is deployed on the surface from one side thereof (e.g., by mask pattern generation module which is not shown). Collimated light beam <b>L1</b> is directed onto the surface with a certain incident angle Θ that is selected as described above such that certain rays of the light beam undergo total internal reflection when interacting with the surface.</p><p id="p0134" num="0134"><figref idrefs="f0007"><b>Figs. 4C</b> and <b>4D</b></figref> illustrate embodiments of the invention in which the light beam <b>L1</b> is directed towards an optical surface of the filter carrier module <b>333</b> from its one side (the side of the optical medium with refraction index <i>N</i>), while the liquid pattern <b>330</b> is formed on its other side. In the example of <figref idrefs="f0007"><b>Fig. 4C</b></figref><b>,</b> refractive index <i>N<sub>2</sub></i> of the liquid is greater than that of the ambient surroundings <i>N<sub>1</sub>.</i> The collimated light rays <b>L1</b> impinge on the surface and traverse the liquid containing regions <b>330</b> while undergoing total internal reflection from the surface regions that do not interface the liquid. In this example, a substantially accurate light pattern (structured light) <b>L2</b> is formed by light rays reflected from the surface regions free of liquid. Light rays <b>L2'</b> that are transmitted through the liquid carrying surface regions may be diffused to some extent (e.g., due to the surface tension shaping the liquid droplets). Diffused light portions <b>DL</b> are also illustrated in the figure.</p><p id="p0135" num="0135">In this example, the optical surface may be formed of materials such as glass, PMMA and other optical materials (e.g., with N ≅ 1.5). The ambient surroundings of the surface may be vacuum or air (e.g., with N<sub>1</sub> ≅ 1), and the liquid may be water (e.g., with N<sub>2</sub> ≅ 1.33). Accordingly, a first critical total internal reflection angle Θ<sub>1</sub> between the optical surface and the environment is Θ<sub>1</sub>≅arcsin(1/1.5) ≅42 deg,<!-- EPO <DP n="38"> --> and a second critical total internal reflection angle Θ<sub>2</sub> between the optical surface and the liquid is Θ<sub>2</sub>≅arcsin(1/1.33) ≅49 deg. In this case, collimated light beam may be structured by interacting with the optical surface at an angle Θ that is substantially equal to or slightly above Θ≥ 42 deg.</p><p id="p0136" num="0136"><figref idrefs="f0007"><b>Fig. 4D</b></figref> illustrates another example in which the refractive index <i>N<sub>2</sub></i> of the liquid is smaller than that of the ambient surroundings <i>N<sub>1</sub></i>. Collimated light rays <b>L1,</b> impinging on the surface with appropriate angle Θ of incidence, are reflected from the liquid pattern due to total internal reflection, while traversing surface regions interfacing the ambient surroundings. Here, substantially less or no light is diffused during interaction with the optical surface <b>333</b> and the liquid pattern <b>330.</b></p><p id="p0137" num="0137">As a result of the relation between the refractive index <i>N</i> of the optical medium from which the light propagates to the optical surface <b>333</b> and the refractive indices <i>N<sub>1</sub></i> and <i>N<sub>2</sub></i> of the liquid and ambient surroundings, neither the reflected light beam <b>L2</b> nor the transmitted light <b>L2'</b> is refracted while interacting with curved surfaces of the liquid which do not interface the optical surface <b>333.</b> Accordingly, in this example, reflected light <b>L2</b> as well as transmitted light <b>L2'</b> are both structured accurately due to interaction with the liquid pattern <b>330.</b> The reflected light <b>L2</b> and the transmitted light <b>L2'</b> form complementary light structures each of which may be used for aerial inspection/ patterning purposes.</p><p id="p0138" num="0138"><figref idrefs="f0008"><b>Figs. 4E and 4F</b></figref> illustrate embodiments of the invention in which input light <b>L1</b> is directed towards an optical surface <b>333</b> from the same side at which the liquid pattern <b>330</b> is formed. The first total internal reflection angle Θ<sub>1</sub> corresponds to the interface between the optical medium of the surface (N) and the ambient medium and the second total internal reflection angle Θ<sub>2</sub> corresponds to the interface between the liquid (N<sub>2</sub>) and the ambient medium, and these angles are respectively Θ<sub>1</sub>≅arcsin(N/N<sub>1</sub>) and Θ<sub>2</sub>≅arcsin(N<sub>2</sub>/N<sub>1</sub>).</p><p id="p0139" num="0139">The embodiment of <figref idrefs="f0008"><b>Fig. 4E</b></figref> is an example of a transmissive formation of an optical binary spatial filter <b>420.</b> The refractive indices <i>N</i>, <i>N<sub>1</sub></i> and <i>N<sub>2</sub></i> are selected such that Θ<sub>1</sub> is greater than Θ<sub>2</sub>. Light beam <b>L1</b> interacting with the optical surface <b>333</b> at an<!-- EPO <DP n="39"> --> angle Θ satisfying a condition that Θ<sub>2</sub> &lt; Θ &lt; Θ<sub>1</sub> traverses the optical surface at interface regions between the optical medium (<i>N</i>) and the ambient medium (<i>N<sub>1</sub></i>), without undergoing total internal reflection. This forms the transmitted structured light <b>L2'</b> at the other side of the optical surface. Structured light <b>L2'</b> is almost not diffused during interaction with the liquid pattern <i>inter alia</i> because it had not interacted with the "curved" surfaces of the liquid.</p><p id="p0140" num="0140">The embodiment of <figref idrefs="f0008">Fig. <b>4F</b></figref> is an example of a reflective formation of an optical mask <b>420</b> according to the invention. The refractive indices <i>N</i>, <i>N<sub>1</sub></i> and <i>N<sub>2</sub></i> are selected such that Θ<sub>1</sub> is smaller than Θ<sub>2</sub>. Light beam <b>L1</b> interacting with the optical surface <b>333</b> at an angle Θ satisfying a condition that Θ<sub>1</sub> &lt; Θ &lt; Θ<sub>2</sub> is reflected from the optical surface at interface regions between the optical medium (<i>N</i>) and the ambient medium (<i>N<sub>1</sub></i>). This forms the reflected structured light beam <b>L2</b> at the same side of the optical surface. Here, the structured light beam <b>L2</b> substantially did not interact with the liquid and it is thus substantially not diffused.</p><p id="p0141" num="0141"><figref idrefs="f0009"><b>Figs. 4G and 4H</b></figref> show schematically, in a self explanatory manner, a filter carrier module <b>300</b> according to another embodiment of the invention utilizing a light guiding member <b>LG.</b> In this example, the light guiding member <b>LG</b> is configured for implementing an optical mask <b>420</b> of a transmissive type. The filter carrier module <b>300 and</b> a light propagation scheme therethrough is illustrated in <figref idrefs="f0009"><b>Figs. 4G</b></figref><b>.</b> The general principles, configuration and operation of the filter carrier module <b>300</b> in this embodiment are similar to that described above with respect to <figref idrefs="f0007"><b>Fig. 4C</b></figref> and will therefore not be repeated here.</p><p id="p0142" num="0142">In this embodiment, a light guiding member <b>LG</b> (e.g., including an optical prism unit) is utilized to receive an input light beam <b>L1</b> through a light port <b>410</b> and to output light beam <b>L2</b> through its output port <b>450.</b> In this example, the input port <b>410</b> and output port <b>450</b> are facets of the guiding member. The light guiding member <b>LG</b> is optically configured to direct the light beam <b>L1</b> to interact with the optical surface <b>333</b> of the filter carrier module <b>300</b> at an appropriate angle Θ and to collect the reflected light beam and direct it to output port <b>450.</b> In this example, a surface of the light<!-- EPO <DP n="40"> --> guiding member <b>LG</b> is configured as the optical surface <b>333</b> of the filter carrier module <b>300.</b></p><p id="p0143" num="0143">As indicated above, the present invention also provides a semi-/pseudo-dynamic pattern generation module capable of utilizing a stack of multiple (two or more) sigma wheels arranged along the direction of light propagation in between a light port <b>(410</b> in <figref idrefs="f0001"><b>Fig. 1</b></figref><b>)</b> and an inspection plane <b>PL.</b> Each of the wheels may be configured for carrying several static filters/masks where the overall masking/filtering is formed by the accumulated effect of the selected combination of masks in all sigma wheels. Such a semi dynamic pattern generation module is adapted for receiving the desired filter design (e.g., optimized binary filter data obtained by the present invention as described above) and for switching/rotating the multiple sigma wheels to locate the most suited combination of static filters which best fits or approximates the desired filter design (e.g., within the acceptable tolerances as indicated by the tolerance data <b>158</b> of <figref idrefs="f0001"><b>Fig. 1</b></figref><b>).</b></p><p id="p0144" num="0144">In this connection, reference is made to <figref idrefs="f0009 f0010"><b>Figs. 5A to 5C</b></figref> illustrating schematically a filter implementation system <b>700</b> configured according to an embodiment of the present invention for implementing binary spatial filters interacting with the light beam of the inspection system. Filter implementation system <b>700</b> includes a pattern generation module <b>200</b> configured for generating/selecting a binary spatial filter approximating a desired binary pattern and a filter carrier tool <b>300</b> capable of carrying the so implemented binary source mask. The filter carrier tool <b>300</b> is configured for posing the binary spatial filter within an optical path of a light beam <b>L1</b> for structuring it forming the structured light <b>L2.</b></p><p id="p0145" num="0145">In this embodiment of the invention, filter carrier tool <b>300</b> includes several filter holders <b>300x</b> (e.g., 7 mask holders <b>300a</b> to <b>300g),</b> at least some of which are configured for carrying multiple source masks. In the present example, filter holders <b>300a</b> to <b>300g</b> are each configured for carrying 17 spatial filters/masks. Each of the filter holders <b>300x</b> is configured and operable for interposing a filter in the propagation path of the light beam <b>L1.</b> The filter carrier tool <b>300</b> is implemented as a stacked array of circular filter holders <b>300a to 300g</b> (e.g., sigma wheels), each carrying several static masks/filters at filter positions near its circumference. The filter holders <b>300a to 300g</b><!-- EPO <DP n="41"> --> are independently rotatable about a common rotation axis and configured to enable engagement and disengagement of different filters with the optical propagation path. This allows to pattern/structure the light beam <b>L1</b> utilizing various combinations of static filters from the different filter holders.</p><p id="p0146" num="0146">A filter holder may be configured similarly to the known in the art sigma wheel and may be capable of carrying one or more static spatial filters (typically several filters). The static spatial filters (serving as source masks for masking light from the light source) may be implemented by any suitable technique including COG and perforated foil techniques.</p><p id="p0147" num="0147">Optionally, the filter carrier tool <b>300</b> may be configured to enable interaction of the light beam <b>L1</b> with different combinations including more than one static filter. In this manner, using different combination of filters, a pseudo dynamic spatial filter may practically be provided. The number of possible combinations of static filters is a multiplication series of the numbers of static filters carried by each filter holder. For example, in the present example, where 7 filter holders are used each carrying 17 filters, the total number of possible combinations is 17^7 which is about half a billion combinations.</p><p id="p0148" num="0148">It should be noted that possibly one or more of the filter holders may include/carry a neutral filter/mask which does not affect the light beam <b>L1</b> interacting therewith (passing therethrough) or does not carry a filter at all at a certain filter position. Accordingly, the various combinations of static filters may also include combinations in which the number of active filters (not neutral filters) is less than the number of filter holders in the filter carrier tool <b>300.</b></p><p id="p0149" num="0149">As noted above, the filter implementation system <b>700</b> includes a pattern generation module <b>200</b> which is adapted for generating/implementing a spatial filter approximating a desired spatial filter pattern corresponding to an exposure condition to be emulated by the system. In the present embodiment, the pattern generation module <b>200</b> includes a control unit <b>200B</b> and an actuation assembly <b>200A.</b> The control unit <b>200B</b> is configured to receive filter data indicative of a desired filter pattern. The filter data may be obtained in accordance with the above described technique of <figref idrefs="f0001 f0002 f0003 f0004 f0005"><b>Figs. 1 to<!-- EPO <DP n="42"> --> 3G</b></figref><b>.</b> Pattern generation module <b>200</b> processes the filter data, utilizing stored data indicative of the static filters mounted on the filter holders <b>300x,</b> and determines a suitable combination of one or more static filters from filter holders <b>300a</b> to <b>300g</b> which will best approximate the desired spatial filter pattern. Control unit <b>200B</b> may also be configured to utilize an appropriate algorithm (processing utility) to determine desired combination of static filters based on the received filter data. The selection of the combination of filters may also be based on tolerance data to determine which combination of static filters best emulates the desired exposure condition. The tolerance data may be similar to that described above and may for example include geometric tolerance data and transmittance tolerance data indicative of the allowable variations in the shapes and transmissions of different regions in the desired spatial pattern of the desired filter.</p><p id="p0150" num="0150">Having determined a desired combination of static filters, the control unit <b>200B</b> may operate the actuation assembly <b>200A</b> to actuate the different filter holder into desired positions in which the desired combination of static filters is engaged with the light beam's <b>L1</b> propagation path. This provides patterning of the light beam <b>L1</b> to form structured light <b>L2.</b> To this end, actuation assembly <b>200A</b> may include one or more drivers or motors and possibly also a transmission/gear assembly which enable actuation of the different filter holders.</p><p id="p0151" num="0151">Reference is made together to <figref idrefs="f0011"><b>Figs. 6A</b> and <b>6B</b></figref> schematically illustrating another example of a filter implementation system <b>800</b> configured according to an embodiment of the present invention. Here, filter implementation system <b>800</b> includes a filter carrier tool <b>810</b> capable of carrying a large number of static filters (possibly hundreds of filters) and selectively interposing a selected filter within an optical path a light beam <b>L1</b> with an accurate positioning and orientation. The filter carrier tool <b>810</b> includes a cartridge slider <b>812</b> upon which multiple filters (e.g., about 200 filters in the present example) may be interchangeably arranged in a stack. The filter carrier tool <b>810</b> also includes a filter holder <b>814</b> that is located at a predetermined position with respect to the propagation path of light beam <b>L1.</b> The filter holder <b>814</b> is controllably actuated to engage and carry a selected filter which is mounted on the cartridge slider <b>812</b> and<!-- EPO <DP n="43"> --> located at a certain respective position from the filter holder <b>814.</b> Engaging with a filter, the filter holder <b>814</b> is adapted to carry the filter into the optical path of light with a certain predetermined position and orientation with respect thereto. The cartridge slider <b>812</b> is configured and operable to enable controllable actuation of the positions of the filters mounted thereon to thereby allow positioning of a selected filter to be grabbed by filter holder <b>814</b> and interacted with the light beam <b>L1.</b></p><p id="p0152" num="0152">Filter implementation system <b>800</b> also includes alignment assembly <b>816</b> arranged in the vicinity of the light propagation path and adapted for kinematic engagement with a filter unit which is interposed by holder <b>814</b> in the optical path of <b>L1.</b> Engagement of the alignment assembly <b>816</b> with the filter unit <b>820</b> facilitates precise alignment of the selected filter unit <b>820</b> with respect to the light beam and thus facilitates emulation of the desired exposure condition by the filter unit <b>820.</b> <figref idrefs="f0011"><b>Fig. 6B</b></figref> is a schematic illustration of an example of an alignment assembly <b>816</b> including two alignment pins in kinematic engagement with a filter unit <b>820.</b> The filter unit includes a frame <b>825</b> upon which a spatial filter aperture <b>821</b> is mounted and a tapered recess <b>827</b> formed on its top side. The position of the recess <b>827</b> is in accordance with the locations of the alignment pins of assembly <b>816</b> near the optical path to allow precise positioning and alignment of the filter with respect to the light beam by kinematic engagement of the alignment pins <b>816</b> with the frame <b>825</b> and recess <b>827.</b></p><p id="p0153" num="0153">Optionally, according to some embodiments of the invention, filter implementation system <b>800</b> may include multiple filter holders facilitating simultaneous engagement of multiple filters units with the light beam <b>L1.</b> Accordingly filter implementation system <b>800</b> may include a pattern generation module similar to the module <b>200</b> described with reference to <figref idrefs="f0009 f0010"><b>Figs. 5A to 5C</b></figref><b>.</b> Such a pattern generation module may be configured to receive filter data indicative of a desired filter pattern and utilize stored data indicative of the filters mounted on the filter cartridge <b>812</b> to determine a suitable combination of filter units which best approximates the desired filter data. The maximal number of filters in such a combination corresponds to the number of filter holders <b>(814)</b> utilized in the system <b>800.</b> Having determined such a suitable combination of one or more filter units, the pattern generation module may<!-- EPO <DP n="44"> --> operate to actuate the cartridge <b>812</b> and the one or more filter holders <b>(814)</b> to interpose the combination of filters in the propagation path of light beam <b>L1.</b> Optionally, in such embodiments including more than one filter holders <b>814,</b> alignment assembly <b>816</b> (or multiple respective alignment assemblies) may also be provided and configured to precisely position and align the filters carried by the multiple holders <b>814.</b></p><p id="p0154" num="0154">In the following, and additional to the claims that follow thereafter, central aspects of the invention and possible optional or preferred embodiments thereof shall be listed.</p><p id="p0155" num="0155">According to a typical embodiment that shall be called "first embodiment of the system", a system is provided for use in creation of a binary spatial filter for an inspection system, the system comprising:
<ol><li><b>(a)</b> a processing utility configured and operable for receiving data indicative of intensity distribution map which corresponds to a desired exposure condition to be emulated by the inspection system, and processing said intensity distribution map, utilizing predetermined tolerance data corresponding to said inspection system, for generating filter data indicative of a binary spatial filter for emulating said desired exposure condition; and</li><li><b>(b)</b> a filter generation module configured and operable for receiving said filter data and generating said binary spatial filter in an optical path of said inspection system, the system thereby enabling to emulate said desired exposure condition by interacting a light beam of said inspection system with said binary spatial filter.</li></ol></p><p id="p0156" num="0156">According to an embodiment that shall be called "second embodiment of the system" and that is particularly combinable with the first embodiment of the system, said filter generation module comprises a processing module configured and operable for processing said filter data to generate said binary spatial filter by selecting, in accordance with said tolerance data, a combination of one or more static<!-- EPO <DP n="45"> --> spatial filters; and a controller module configured and operable for interposing the combination static spatial filters in said optical path.</p><p id="p0157" num="0157">According to an embodiment that shall be called "third embodiment the system" and that may particularly be combined with the second embodiment of the system, said filter generation module comprises a carrier module connectable to said controller and configured and operable to enable controllable interposing of one or more static spatial filters in said optical path; said carrier module comprising at least one of the following: a multi wheel carrier assembly comprising at least two wheels each carrying one or more static spatial filters, and a cassette assembly configured and operable for carrying multiple static spatial filters and selectively interposing at least one of said multiple static spatial filters in said optical path.</p><p id="p0158" num="0158">According to an embodiment that shall be called "fourth embodiment of the system" and that is particularly combinable with any of the first to the third embodiments of the system, said filter generation module comprises one or more of the following elements:
<ol><li><b>(a)</b> an optical surface exposed to deposition of a transient liquid pattern;</li><li><b>(b)</b> a liquid deployment module adapted for receiving said data indicative of the binary spatial filter and carrying out said deposition of a corresponding transient liquid pattern on said surface forming an arrangement of regions of different critical total internal reflection angles corresponding to said binary spatial filter; and</li><li><b>(c)</b> a light port configured and operable for enabling interaction of a beam of substantially collimated light rays with said optical surface such that a fraction of the light rays undergoes total internal reflection when impinging on the surface, thereby forming structured light corresponding to said desired exposure condition.</li></ol></p><p id="p0159" num="0159">According to an embodiment that shall be called "fifth embodiment of the system" and that is particularly combinable with the fourth embodiment of the system, said liquid deployment module comprises a jet printing module configured and operable for deployment of liquid droplets on said optical surface.</p><p id="p0160" num="0160">According to an embodiment that shall be called "sixth embodiment of the system", and that is particularly combinable with the fourth or the fifth embodiment<!-- EPO <DP n="46"> --> of the system, said optical surface with the liquid pattern is substantially transparent for said light, thereby reducing light absorption by said surface.</p><p id="p0161" num="0161">According to an embodiment that shall be called "seventh embodiment of the system" and that is particularly combinable with the fourth, fifth or sixth embodiment of the system, the system comprises a pattern removal module configured and operable for controllable removal of said transient liquid pattern; said pattern removal module is configured and operable for clearing said liquid from said optical surface by carrying out at least one of the following: heating said surface for evaporating said liquid, wiping said liquid, blowing said liquid, and changing affinity of said optical surface.</p><p id="p0162" num="0162">According to an embodiment that shall be called "eighth embodiment of the system" and that is particularly combinable with any of the fourth to seventh embodiment of the system, said optical surface has a certain refraction index N, and interfaces ambient environment of a first refraction index N<sub>1</sub> associated with a first critical total internal reflection angle Θ=arcsin(N<sub>1</sub>/N), said liquid having a second refraction index N<sub>2</sub> associated with a second critical total internal reflection angle Θ<sub>2</sub>=arcsin(N<sub>2</sub>/N) different from said first total internal reflection angle Θ<sub>1</sub>.</p><p id="p0163" num="0163">According to an embodiment that shall be called "ninth embodiment of the system" and that is particularly combinable with any of the first to the seventh embodiments, and preferably with the eighth embodiment of the system, said light port is configured and operable for enabling interaction of a beam of substantially collimated light rays with said surface at an angle Θ being between said first and second critical total internal reflection angles Θ<sub>1</sub> and Θ<sub>2</sub>.</p><p id="p0164" num="0164">According to an embodiment that shall be called "tenth embodiment of the system" and that is particularly combinable with any of the first to the seventh embodiments and preferably with the eighth or the ninth embodiment of the system, a medium, being one of ambient medium interfacing said optical surface and said liquid, has a refraction index which is close to or above the refraction index N thereby reducing or eliminating internal reflection or rays impinging on an interface between said surface and said certain medium.<!-- EPO <DP n="47"> --></p><p id="p0165" num="0165">According to an embodiment that shall be called "eleventh embodiment of the system" and that is particularly combinable with the fourth embodiment of the system, or any of the first to the tenth embodiment that is combined therewith, said structured light comprises collimated light rays internally reflected from regions of said optical surface outside said regions interfacing said liquid.</p><p id="p0166" num="0166">According to an embodiment that shall be called "twelfth embodiment of the system" and that is particularly combinable with a combination of the fourth and the fifth embodiment of the system, as well as with additional combinations with any of the sixth to the eleventh embodiments of the system, said transient liquid pattern and said droplets are sufficiently large in size such as to reduce diffraction effects.</p><p id="p0167" num="0167">According to a typical embodiment that shall be called "first embodiment of the method", a method for use in creating a binary spatial filter for an inspection system is provided, the method comprising:
<ul><li>receiving intensity data indicative of an intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system;</li><li>processing the intensity data, based on predetermined tolerance data corresponding to said inspection system, to thereby generate filter data indicative of a binary spatial filter adapted for emulating said desired exposure condition; and</li><li>operating a filter generation utility to generate said binary spatial filter in an optical path of said inspection system thereby enabling to emulate said desired exposure condition by directing light beam of said inspection system to interact with said filter.</li></ul></p><p id="p0168" num="0168">According to an embodiment that shall be called "second embodiment of the method" and that is particularly combinable with the first embodiment of the method, operating said filter generation utility comprises deploying a liquid pattern on an optical surface to form a transient pattern of regions corresponding to said binary spatial filter and having different critical angles of total internal reflection for light interacting with said regions, thereby enabling interaction of light with said pattern for emulating said desired exposure condition.<!-- EPO <DP n="48"> --></p><p id="p0169" num="0169">According to an embodiment that shall be called "third embodiment of the method" and that is particularly combinable with the second embodiment of the method, the method comprises interaction of a beam of substantially collimated light rays with said surface such that a fraction of the light rays interacting with said regions undergoes total internal reflection thereby forming structured light corresponding to said desired source mask.</p><p id="p0170" num="0170">According to an embodiment that shall be called "fourth embodiment of the method" and that is particularly combinable with any of the first to third embodiment of the method, operating said pattern generation module comprises processing said data indicative of a binary spatial filter to select a combination of one or more static spatial filters which, in accordance with said tolerance data, corresponds to said binary spatial filter; and arranging said combination of static spatial filters in an optical path of a light beam to form a pattern on said light beam for emulating said desired exposure condition.</p></description><claims mxw-id="PCLM56977021" lang="EN" load-source="patent-office"><!-- EPO <DP n="49"> --><claim id="c-en-0001" num="0001"><claim-text>A method for use in creating a binary spatial filter for use in an optical path of an inspection system, the method comprising:
<claim-text>receiving intensity data indicative of an intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system;</claim-text>
<claim-text>processing the intensity data, based on predetermined tolerance data, and generating filter data indicative of a binary spatial filter corresponding to said intensity distribution map, thereby enabling use of said filter data for operating a pattern generation module to generate the binary spatial filter.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, wherein the processing of said intensity data comprises:
<claim-text><b>i)</b> based on said intensity data, determining a set of transmission values, which do not exceed a predetermined maximal number of transmission values, and associating values of said intensity distribution map with values in said set, thereby dividing said intensity distribution map into blobs of corresponding transmission values selected from said set; and</claim-text>
<claim-text><b>ii)</b> replacing one or more of said blobs with one or more binary transmission patterns having corresponding transmission values respectively thereby obtaining said filter data.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 1 or 2, wherein said tolerance data includes at least one of the following: transmittance tolerance data which is indicative of allowable variations in the transmissions of said blobs, geometric tolerance data indicative of allowable variations in the geometric shapes of said blobs and, production tolerance data indicative of the production tolerances of said pattern generation module.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 2 or 3, wherein the said number of transmission values in said set complies with at least one of the following: being less than a number<!-- EPO <DP n="50"> --> of distinct values in said intensity distribution map, and not exceeding six transmission values.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to any of claims 2 to 4, wherein said replacing of a blob with a binary transmission pattern is performed utilizing a binary transmission pattern with at least one of an average and a total transmittance that is substantially similar to a respective one of the average and total transmission value of the blob in accordance with said tolerance data.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to any of claims 2 to 5, wherein said replacing of one or more of said blobs comprises inflating or deflating the shape of at least one blob and replacing the blob with a corresponding binary transmission pattern; said inflating or deflating being performed in accordance with a certain predetermined condition corresponding to at least one of said tolerance data and said pattern generation module.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to any of claims 2 to 6, wherein each of said one or more binary transmission patterns is formed utilizing an arrangement of regions of a first transmission value spaced apart by regions of a second transmission value, said replacing comprising configuring sizes and densities of said first and second regions such that the average transmittance through the binary transmission pattern substantially equals the transmission value of a blob to which the binary transmission pattern pertains.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method according to claim 7, wherein the sizes and densities of said first and second regions are configured so as to reduce at least one of the following effects: diffraction from said binary mask, interference, and aliasing of light passing through the binary mask.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method according to any of the preceding claims, comprising using said filter data to create the binary spatial filter formed including at least one of the following: one or more perforated foil structures and a total internal reflection (TIR) pattern formed by a liquid pattern deployed on an optical surface.<!-- EPO <DP n="51"> --></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A system for use in creation of a binary spatial filter for an inspection system, the system comprising:
<claim-text><b>(a)</b> an input module configured and operable for receiving intensity data indicative of intensity distribution map corresponding to a desired exposure condition to be emulated by the inspection system;</claim-text>
<claim-text><b>(b)</b> a processing utility configured and operable for processing said intensity data, utilizing predetermined tolerance data corresponding to said inspection system, and generating filter data indicative of a binary spatial filter; and</claim-text>
<claim-text><b>(c)</b> a patterning controller operable for using said filter data for generating operational instructions to operate a pattern generation module for generating a corresponding binary spatial filter usable for emulating the desired exposure condition by said inspection system.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The system according to claim 10, wherein the processing utility comprises:
<claim-text>a classification module adapted for processing data indicative of the intensity distribution map to determine a set of several transmission values not exceeding a predetermined maximal number of transmission values and associating values of the intensity distribution map with values of said set, thereby dividing the intensity distribution map into blobs of homogenous transmission values; and</claim-text>
<claim-text>a binary pattern design module configured for substituting one or more of said blobs with one or more binary transmission patterns, thereby generating said filter data indicative of a binary pattern corresponding to said intensity distribution map.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The system according to claim 10 or 11, wherein said tolerance data comprises at least one of the following: transmittance tolerance data indicative of allowable variation in transmission values of said blobs, geometric tolerance data indicative of allowable variation in the geometric shapes of said blobs, and production tolerance data indicative of the production tolerances of said pattern generation module; said processing utility configured and operable to modify at least one of: the shapes of the blobs, the transmission values of the blobs and the binary transmission patterns substituting said<!-- EPO <DP n="52"> --> blobs, in accordance with said tolerance data to thereby determine a design of a spatial filter having a binary pattern which corresponds to said intensity distribution map within tolerances provided by said tolerance data.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The system according to claim 11 or 12, wherein said classification module utilizes a set of transmission values in which a number of said transmission values complies with at least one of the following: being less than a number of distinct transmission values in said intensity distribution map, and not exceeding six transmission values.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The system according to any of claims 11 to 13, wherein said binary pattern design module is configured and operable for carrying out at least one of the following: replacing a blob with a binary transmission pattern having an average or a total transmittance that is substantially similar to the average or total transmission of the blob, and modifying the shape of a blob such that the total transmittance through a transmission pattern substituted therein is substantially similar to the total transmission through the blob within tolerances provided by said tolerance data.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The system according to any of claims 11 to 14, wherein a binary pattern of said design of a spatial filter comprises an arrangement of regions of a first transmission value spaced apart by regions of a second transmission value; and wherein said binary pattern design module is operable for configuring the size and density of said first and second regions such as to reduce at least one of the following effects: diffraction from the binary spatial filter and interference and aliasing of light passing through the binary spatial filter.</claim-text></claim></claims><drawings mxw-id="PDW16667744" load-source="patent-office"><!-- EPO <DP n="53"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="218" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="54"> --><figure id="f0002" num="2A"><img id="if0002" file="imgf0002.tif" wi="165" he="135" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="55"> --><figure id="f0003" num="2B,3A"><img id="if0003" file="imgf0003.tif" wi="165" he="204" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="56"> --><figure id="f0004" num="3B,3C,3D"><img id="if0004" file="imgf0004.tif" wi="116" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="57"> --><figure id="f0005" num="3E,3F,3G"><img id="if0005" file="imgf0005.tif" wi="124" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="58"> --><figure id="f0006" num="4A,4B"><img id="if0006" file="imgf0006.tif" wi="165" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="59"> --><figure id="f0007" num="4C,4D"><img id="if0007" file="imgf0007.tif" wi="141" he="191" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="60"> --><figure id="f0008" num="4E,4F"><img id="if0008" file="imgf0008.tif" wi="148" he="193" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="61"> --><figure id="f0009" num="4G,4H,5A"><img id="if0009" file="imgf0009.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="62"> --><figure id="f0010" num="5B,5C"><img id="if0010" file="imgf0010.tif" wi="165" he="202" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="63"> --><figure id="f0011" num="6A,6B"><img id="if0011" file="imgf0011.tif" wi="165" he="193" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="160" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="160" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
