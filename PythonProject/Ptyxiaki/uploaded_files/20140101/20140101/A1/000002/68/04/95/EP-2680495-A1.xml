<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680495-A1" country="EP" doc-number="2680495" kind="A1" date="20140101" family-id="46903038" file-reference-id="252638" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549193" ucid="EP-2680495-A1"><document-id><country>EP</country><doc-number>2680495</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12764005-A" is-representative="YES"><document-id mxw-id="PAPP154823116" load-source="docdb" format="epo"><country>EP</country><doc-number>12764005</doc-number><kind>A</kind><date>20120328</date><lang>ZH</lang></document-id><document-id mxw-id="PAPP220439664" load-source="docdb" format="original"><country>EP</country><doc-number>12764005.0</doc-number><date>20120328</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140450672" ucid="CN-201110075547-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110075547</doc-number><kind>A</kind><date>20110328</date></document-id></priority-claim><priority-claim mxw-id="PPC140453830" ucid="CN-2012073204-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>2012073204</doc-number><kind>W</kind><date>20120328</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2001016853" load-source="docdb">H04L  12/28        20060101AFI20140114BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2001016854" load-source="docdb">H04L  12/46        20060101ALI20140114BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2001016848" load-source="docdb" scheme="CPC">H04L  12/4658      20130101 LI20140116BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001016849" load-source="docdb" scheme="CPC">H04L  12/4654      20130101 LI20140116BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001016850" load-source="docdb" scheme="CPC">H04L  12/2834      20130101 LI20140116BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001016851" load-source="docdb" scheme="CPC">H04L  12/2898      20130101 FI20140116BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001016852" load-source="docdb" scheme="CPC">H04L  12/2878      20130101 LI20140113BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180063" lang="DE" load-source="patent-office">VERFAHREN, SYSTEM UND ZUGANGSVORRICHTUNG FÜR EINEN BENUTZERSERVICEZUGANG</invention-title><invention-title mxw-id="PT132180064" lang="EN" load-source="patent-office">METHOD, SYSTEM, AND ACCESS DEVICE FOR USER SERVICE ACCESS</invention-title><invention-title mxw-id="PT132180065" lang="FR" load-source="patent-office">PROCÉDÉ, SYSTÈME ET DISPOSITIF D'ACCÈS POUR UN ACCÈS À DES SERVICES D'ABONNÉ</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918139398" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HUAWEI TECH CO LTD</last-name><address><country>CN</country></address></addressbook></applicant><applicant mxw-id="PPAR918163877" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HUAWEI TECHNOLOGIES CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918991061" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Huawei Technologies Co., Ltd.</last-name><iid>101263435</iid><address><street>Huawei Administration Building Bantian, Longgang</street><city>Shenzhen, Guangdong 518129</city><country>CN</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918173371" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WANG WENMING</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918169054" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WANG, WENMING</last-name></addressbook></inventor><inventor mxw-id="PPAR918983557" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WANG, WENMING</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918162419" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>CHEN ZHONGZHOU</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918148426" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>CHEN, Zhongzhou</last-name></addressbook></inventor><inventor mxw-id="PPAR918985806" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>CHEN, Zhongzhou</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918148769" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>YAO HEPING</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918140347" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>YAO, Heping</last-name></addressbook></inventor><inventor mxw-id="PPAR918989018" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>YAO, Heping</last-name><address><street>Huawei Administration Building Bantian Longgang</street><city>Shenzhen Guangdong 518129</city><country>CN</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918990749" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Maiwald Patentanwalts GmbH</last-name><iid>101330423</iid><address><street>Engineering Elisenhof Elisenstrasse 3</street><city>80335 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="CN-2012073204-W"><document-id><country>CN</country><doc-number>2012073204</doc-number><kind>W</kind><date>20120328</date><lang>ZH</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012130142-A1"><document-id><country>WO</country><doc-number>2012130142</doc-number><kind>A1</kind><date>20121004</date><lang>ZH</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548848546" load-source="docdb">AL</country><country mxw-id="DS548803239" load-source="docdb">AT</country><country mxw-id="DS548848547" load-source="docdb">BE</country><country mxw-id="DS548837441" load-source="docdb">BG</country><country mxw-id="DS548854245" load-source="docdb">CH</country><country mxw-id="DS548848281" load-source="docdb">CY</country><country mxw-id="DS548803240" load-source="docdb">CZ</country><country mxw-id="DS548848548" load-source="docdb">DE</country><country mxw-id="DS548848602" load-source="docdb">DK</country><country mxw-id="DS548848603" load-source="docdb">EE</country><country mxw-id="DS548801816" load-source="docdb">ES</country><country mxw-id="DS548837442" load-source="docdb">FI</country><country mxw-id="DS548854570" load-source="docdb">FR</country><country mxw-id="DS548848549" load-source="docdb">GB</country><country mxw-id="DS548848604" load-source="docdb">GR</country><country mxw-id="DS548848550" load-source="docdb">HR</country><country mxw-id="DS548803241" load-source="docdb">HU</country><country mxw-id="DS548801817" load-source="docdb">IE</country><country mxw-id="DS548848605" load-source="docdb">IS</country><country mxw-id="DS548854571" load-source="docdb">IT</country><country mxw-id="DS548848606" load-source="docdb">LI</country><country mxw-id="DS548837443" load-source="docdb">LT</country><country mxw-id="DS548868885" load-source="docdb">LU</country><country mxw-id="DS548837444" load-source="docdb">LV</country><country mxw-id="DS548837445" load-source="docdb">MC</country><country mxw-id="DS548869618" load-source="docdb">MK</country><country mxw-id="DS548869619" load-source="docdb">MT</country><country mxw-id="DS548869620" load-source="docdb">NL</country><country mxw-id="DS548854572" load-source="docdb">NO</country><country mxw-id="DS548869621" load-source="docdb">PL</country><country mxw-id="DS548801822" load-source="docdb">PT</country><country mxw-id="DS548854642" load-source="docdb">RO</country><country mxw-id="DS548801823" load-source="docdb">RS</country><country mxw-id="DS548871934" load-source="docdb">SE</country><country mxw-id="DS548848551" load-source="docdb">SI</country><country mxw-id="DS548854573" load-source="docdb">SK</country><country mxw-id="DS548854574" load-source="docdb">SM</country><country mxw-id="DS548848607" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669863" lang="EN" load-source="patent-office"><p id="pa01" num="0001">The present invention discloses a method and a system for user service access and an access device. The method includes: receiving a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet; acquiring, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet; establishing a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; sending, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.<img id="iaf01" file="imgaf001.tif" wi="78" he="77" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499236" lang="EN" source="EPO" load-source="docdb"><p>The present invention discloses a method and a system for user service access and an access device. The method includes: receiving a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet; acquiring, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet; establishing a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; sending, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</p></abstract><description mxw-id="PDES63955293" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">This application claims priority to Chinese Patent Application No. <patcit id="pcit0001" dnum="CN201110075547"><text>201110075547.4</text></patcit>, filed with the Chinese Patent Office on February March 28, 2011 and entitled "METHOD AND SYSTEM FOR USER SERVICE ACCESS AND ACCESS DEVICE", which is incorporated herein by reference in its entirety.</p><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0002" num="0002">Embodiments of the present invention relate to the field of communication technologies, and in particular, to a method and a system for user service access and an access device.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0003" num="0003">With the development of broadband services, more and more types of services are available for access by a home broadband user. For example, the user may access a set top box, a computer, and a telephone by using a home gateway, where the set top box, the computer, and the telephone correspond to an Internet Protocol television (Internet Protocol Television, IPTV for short) service, a high speed Internet (high speed internet, HSI for short) service, and a Voice over Internet Protocol (Voice over Internet Protocol, VOIP for short) service respectively.</p><p id="p0004" num="0004">In a current application scenario, certain configurations need to be performed to ensure that services reach a correct gateway or server. For example, different customer virtual local area networks (Customer Virtual Local Area Networks, CVLANs for short) are established for various types of services. On the access device, a service type is identified by a CVLAN, and the identified service type is bridged to a specified service virtual local area network (Service Virtual Local Area Network, SVLAN for short). When an operator provisions a service for a<!-- EPO <DP n="2"> --> home user, the operator needs to pre-configure CVLAN identifiers used by various types of uplink services on the home gateway of the user, and match the CVLAN identifiers with CVLANs configured on a port associated with the user. After a traffic stream is identified on the access device according to the user port and the CVLANs, the traffic stream is bridged to specified SVLANs.</p><p id="p0005" num="0005">In the prior art, a bridging correspondence between a CVLAN and an SVLAN needs to be pre-configured on the access device, and the bridging correspondence is a fixed mapping upon completion of the configuration. For example, when a service is provisioned for a home user, SVLANs of three types of services are firstly configured on the access device, that is, "SVLAN 100" corresponding to the HSI, "SVLAN 101" corresponding to the IPTV, and "SVLAN 102" corresponding to the VOIP; CVLANs corresponding to the three SVLANs are configured as "CVLAN10", "CVLAN 11", and "CVLAN 12" respectively on user port_1; then, the three types of services of the user port are bridged to (bridge to) the corresponding SVLANs respectively, for example, "PORT1 CVLAN10 bridge to SVLAN100", "PORT1 CVLAN11 bridge to SVLAN101", and "PORT1 CVLAN12 bridge to SVLAN102". Finally, the following service configurations are performed on each port (FE1, FE2, and FE3) of the home gateway of the user: "FE1 add CVLAN 10", "FE2 add CVLAN 11", and "FE3 add CVLAN 12". Under correct configurations, the FE1 port is connected to the HSI service, the FE2 port is connected to the IPTV service, and the FE3 port is connected to the VOIP service. However, during service provisioning by the operator, if the operator configures a service on the home gateway wrongly, the service fails, for example, if a CVLAN identifier of a packet on the port FE1 is configured as "CVLAN15" on the home gateway, the HSI service connected to the FE1 port fails because "CVLAN15" does not exist in the pre-configured correspondence on the access device. In addition, if the user inserts a network cable wrongly, the service also fails. For example, if the user inserts a network cable of the HSI service into the FE2 port and inserts a network cable of the IPTV service into the FE1 port, a packet of the HSI service, carries "CVLAN11" and a packet of the IPTV service carries "CVLAN10"; according to the pre-configured correspondence on the access device, the HSI service is<!-- EPO <DP n="3"> --> bridged to "SVLAN101" and the IPTV service is bridged to "SVLAN100", which causes failure of both the HSI service and the IPTV service.</p><p id="p0006" num="0006">In the prior art, a relationship between a CVLAN and an SVLAN needs to be pre-configured on an access device, and a CVLAN configured on the access device must be consistent with a CVLAN on a home gateway. The configuration method is complex and error-prone, thereby causing failure of services.</p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0007" num="0007">The present invention provides a method and a system for user service access and an access device to overcome defects in the prior art that a method for user service access configuration is complex and error-prone, and to simplify user service access configurations and reduce errors.</p><p id="p0008" num="0008">An embodiment of the present invention provides a method for user service access, including:
<ul><li>receiving a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet;</li><li>acquiring, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet;</li><li>establishing a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and</li><li>sending, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</li></ul></p><p id="p0009" num="0009">An embodiment of the present invention provides an access device, including:
<ul><li>a receiving unit, configured to receive a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet;<!-- EPO <DP n="4"> --></li><li>an acquiring unit, configured to acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet;</li><li>a mapping establishing unit, configured to establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and</li><li>a forwarding unit, configured to send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</li></ul></p><p id="p0010" num="0010">An embodiment of the present invention also provides a system for user service access, including a home gateway and an access device, where:
<ul><li>the home gateway is configured to receive a first packet sent by a user terminal, and send the first packet to an access service; and</li><li>the access device is configured to: receive a first packet sent by the home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet; acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet; establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service, virtual local area network identifier; and send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</li></ul></p><p id="p0011" num="0011">By using the method and the system for user service access and the access device, after a user port receiving a first packet acquires, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet, the user port may automatically establish, according to a customer virtual local area network identifier carried in<!-- EPO <DP n="5"> --> the first packet, a mapping between the customer virtual local area network identifier and the service virtual local area network identifier. This eliminates the need to pre-configure a mapping between the customer virtual local area network identifier and the service virtual local area network identifier on the access device, thereby simplifying access configurations during user service provisioning. In addition, a user is capable of always acquiring a correct mapping between the customer virtual local area network identifier and the service virtual local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.</p><heading id="h0004"><b>BRIEF DESCRIPTION OF DRAWINGS</b></heading><p id="p0012" num="0012">To illustrate the technical solutions in the embodiments of the present invention or in the prior art more clearly, the following briefly introduces the accompanying drawings required for describing the embodiments or the prior art. Apparently, the accompanying drawings in the following description show merely some embodiments of the present invention, and a person of ordinary skill in the art may still derive other drawings from these accompanying drawings without creative efforts.
<ul><li><figref idrefs="f0001">FIG. 1</figref> is a schematic diagram of a multi-service access scenario according to an embodiment of the present invention;</li><li><figref idrefs="f0001">FIG. 2</figref> is a flowchart of a method for user service access according to a first embodiment of the present invention;</li><li><figref idrefs="f0002">FIG. 3</figref> is a flowchart of a method for user service access according to a second embodiments of the present invention;</li><li><figref idrefs="f0002">FIG. 4</figref> is a schematic diagram of the application of the method for user service access provided in a second embodiment of the present invention in different service types;</li><li><figref idrefs="f0003">FIG. 5</figref> is a schematic diagram of the application of the method for user service access provided in a second embodiments of the present invention in an IP packet;<!-- EPO <DP n="6"> --></li><li><figref idrefs="f0003">FIG. 6</figref> is a schematic structural diagram of an access device according to a third embodiment of the present invention; and</li><li><figref idrefs="f0003">FIG. 7</figref> is a schematic structural diagram of an access device according to a fourth embodiment of the present invention.</li></ul></p><heading id="h0005"><b>DESCRIPTION OF EMBODIMENTS</b></heading><p id="p0013" num="0013">To make the objectives, technical solutions, and advantages of the embodiments of the present invention more comprehensible, the following clearly and completely describes the technical solutions in the embodiments of the present invention with reference to the accompanying drawings in the embodiments of the present invention. Apparently, the described embodiments are merely a part rather than all of the embodiments of the present invention. All other embodiments obtained by a person of ordinary skill in the art based on the embodiments of the present invention without creative efforts shall fall within the protection scope of the present invention.</p><p id="p0014" num="0014"><figref idrefs="f0001">FIG. 1</figref> is a schematic diagram of a multi-service access scenario according to an embodiment of the present invention. As shown in <figref idrefs="f0001">FIG. 1</figref>, a user may set a home gateway 20. In an HSI service, a personal computer (PC) may access the Internet (internet) by using the home gateway 20; in an IPTV service, a set top box (Set Top Box, STB for short) may receive television programs by using the home gateway 20; in a VOIP service, an IP phone (IP PHONE) may be connected to a softswitch by using the home gateway. In the multi-service access scenario, an access device 30 acting as a convergence device and a bridging device may converge services on the user home gateway 20 and then transmit the converged services to an upper layer network. A virtual local area network identifier (VLANID) added to a packet sent by the home gateway to the access device is a CVLAN identifier. After the packet reaches the access device, the access device adds a VLAN ID to the packet as an SVLAN identifier.</p><p id="p0015" num="0015">With respect to the structure diagram of <figref idrefs="f0001">FIG. 1</figref>, a method for user service access is further illustrated in <figref idrefs="f0001">FIG. 2. FIG. 2</figref> is a flowchart of a method for user service access according to a<!-- EPO <DP n="7"> --> first embodiment of the present invention. As shown in <figref idrefs="f0001">FIG. 2</figref>, the method for user service access includes:
<ul><li>Step 201: Receive a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet.</li></ul></p><p id="p0016" num="0016">Before step 201, a service access mode of each user port on an access device may be pre-configured as an auto-sensing mode. After receiving a packet sent by a home gateway, a user port set to the auto-sensing mode starts an auto-sensing process for the received packet: If the user port set to the auto-sensing mode receives the first packet (for example, an initial packet of a service type or a first packet after an access error occurs, where the user port does not have a mapping corresponding to a customer virtual local area network identifier carried in the first packet), the user port may establish a mapping between the customer virtual local area network identifier of the first packet and a service virtual local area network identifier; if the user port receives a packet except the first packet, the user port may directly query a corresponding service virtual local area network identifier according to the customer virtual local area network identifier of the packet, and then forward the packet.
<ul><li>Step 202: Acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet.</li></ul></p><p id="p0017" num="0017">Correspondence between a service type and a service virtual local area network identifier may be pre-configured on the access device. For example, the correspondence between the service type and the service virtual local area network identifier is stored in the access device by using a correspondence table. Further, step 202 may specifically include: acquiring a service type of the first packet through an analysis according to the feature information of the first packet; and acquiring, according to the service type, a service virtual local area network that matches the service type. The feature information may be preferentially at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type; and the service type may preferentially include at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an Internet Protocol version 4 (IPv4) service, and an Internet Protocol version 6 (IPv6) service.<!-- EPO <DP n="8"> -->
<ul><li>Step 203: Establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier.</li><li>Step 204: According to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, send the first packet to a network corresponding to the service virtual local area network identifier.</li></ul></p><p id="p0018" num="0018">A method for forwarding the first packet by a forwarding chip of a user port on the access device according to the mapping may be specifically as follows: The user port receiving the first packet may add, according to the mapping corresponding to the customer virtual local area network identifier of the first packet, a service virtual local area network identifier that matches the first packet to the first packet, and then forward the first packet; or, the user port receiving the first packet replaces, according to the mapping corresponding to the customer virtual local area network identifier of the first packet, the customer virtual local area network identifier in the first packet with a service virtual local area network identifier that matches the first packet, and then forwards the first packet.</p><p id="p0019" num="0019">Because a process of analyzing the feature information of the packet and acquiring the service type of the packet is relatively complex, the process may be performed by a CPU of the access device. Specifically, after a user port of the access device receives a first packet (generally an initial packet of a service type received by the user port), the CPU of the access device may analyze the first packet and after acquiring a matched service virtual local area network identifier according to the feature information of the first packet, establish a mapping between the customer virtual local area network identifier of the first packet and the service virtual local area network identifier; then, the CPU may instruct the forwarding chip of the user port to forward, according to the established mapping between the customer virtual local area network identifier and the service virtual local area network identifier, a second packet (a packet carrying a customer virtual local area network identifier same as that carried in the first packet) subsequently received by the user port. Therefore, step 202 and step 203 may be performed by the CPU of the access device, while step 204 may be performed by the forwarding chip on the user port of the access device.<!-- EPO <DP n="9"> --></p><p id="p0020" num="0020">In addition, mappings between the customer virtual local area network identifier and the service and the service virtual local area network identifier corresponding to each user port on the access device may be checked to age unnecessary mappings. Specific details may be illustrated by using the following examples:
<ul><li>Example 1: If a packet that carries the customer virtual local area network identifier is not received within a predetermined duration, the mapping between the customer virtual local area network identifier and the service virtual local area network identifier is aged; or</li><li>Example 2: If a port shutdown notification is received from the home gateway, the mapping between the customer virtual local area network identifier and the service virtual local area network identifier is aged.</li></ul></p><p id="p0021" num="0021">In this embodiment, after a user port that is of an access device and receives a first packet acquires, according to feature information of the first packet, a service virtual local area network identifier that matches the packet, the user port may automatically establish, according to a customer virtual local area network identifier carried in the first packet, a mapping between the customer virtual local area network identifier and the service virtual local area network identifier. This eliminates the need to pre-configure a mapping between the customer virtual local area network identifier and the service virtual local area network identifier on the access device, thereby simplifying access configurations during user service provisioning. In addition, a user is capable of always acquiring a correct mapping between the customer virtual local area network identifier and the service virtual local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.</p><p id="p0022" num="0022"><figref idrefs="f0002">FIG. 3</figref> is a flowchart of a method for user service access according to a second embodiment of the present invention. As shown in <figref idrefs="f0002">FIG. 3</figref>, the method for user service access includes:
<ul><li>Step 301: Configure a service access mode of a user port as an auto-sensing (auto-sensing) mode on an access device.</li></ul><!-- EPO <DP n="10"> --></p><p id="p0023" num="0023">After a user port set to the auto-sensing mode receives a packet sent by a home gateway, the user port starts an auto-sensing process. If a mapping between a CVLAN identifier and an SVLAN identifier on the user port includes a CVLAN identifier carried in the packet, the user port may forward the packet directly according to the mapping between the CVLAN identifier and the SVLAN identifier; otherwise, the user port may query, according to feature information of the packet, an SVLAN identifier corresponding to a service type of the packet, such as an encapsulation or a dial-up keyword, and establish a mapping between the CVLAN identifier carried in the packet and the SVLAN identifier.
<ul><li>Step 302: The home gateway marks packets of different Ethernet (ETH) ports with different CVLAN identifiers.</li><li>Step 303: After receiving a packet sent by the home gateway through the user port, the access device determines whether a CVLAN identifier carried in the packet already exists on the user port (the access device may store a mapping table, where the mapping table records mappings between the CVLAN identifiers and the SVLAN identifiers on each user port of the access device, and the access device may determine whether the CVLAN identifier carried in the packet exists in a mapping included by the user port stored in the mapping table; if the CVLAN identifier exists in the mapping, it indicates that the CVLAN identifier carried in the packet already exists on the user port); if yes, forwards the packet directly according to the mapping between the CVLAN identifier and the SVLAN identifier (that is, bridge the CVLAN in the packet to a corresponding SVLAN); if no, performs step 304.</li></ul></p><p id="p0024" num="0024">A specific method for forwarding the packet directly by a forwarding chip of the user port on the access device according to the mapping between the CVLAN identifier and the SVLAN identifier may be as follows: A corresponding SVLAN identifier is added to the packet carrying the CVLAN identifier, or the CVLAN identifier in the packet is replaced with a corresponding SVLAN identifier; then, the packet including the SVLAN identifier is sent to a network corresponding to the SVLAN identifier, such as a specified broadband remote access server (Broadband Remote Access Server, BRAS for short) or a server.
<ul><li>Step 304: The access device processes the packet as a first packet (an initial packet of a service type or a first packet after an error occurs) received by the user port, and sends the<!-- EPO <DP n="11"> --> first packet to a CPU of the access device for analysis. To free the CPU from impact, after the first packet is sent to the CPU, the CPU is disabled to refuse other packets. In this case, other packets to be sent to the CPU are all discarded during analysis of the first packet by the CPU. After the first packet is successfully analyzed, the CPU is enabled for receiving other packets.. The CPU firstly acquires through matching an SVLAN identifier corresponding to a user encapsulation type or a dial-up packet keyword of the first packet, and then extracts a CVLAN identifier of the first packet to establish a mapping between the CVLAN identifier and the SVLAN identifier, so as to establish a bridging relationship from the CVLAN of the first packet to a corresponding SVLAN. A second packet with the same CVLAN identifier subsequently received by the user port may be bridged to the corresponding SVLAN.</li><li>Step 305: When a port of the home gateway shuts down (shutdown) or does not receive a packet carrying the CVLAN identifier for a long time, the port may age the mapping corresponding to the CVLAN identifier.</li></ul></p><p id="p0025" num="0025">Specifically, the access device pre-configures a service access mode of a user port as a connection in auto-sensing (auto-sensing) mode, and an uplink packet sent by the home gateway to the access device carries a CVLAN identifier configured by a port of the home gateway; after the access device captures a first packet carrying a new CVLAN identifier or a second packet carrying the existing CVLAN identifier, the CVLAN identifier may be mapped to a corresponding SVLAN identifier on the access device.</p><p id="p0026" num="0026"><figref idrefs="f0002">FIG. 4</figref> is a schematic diagram of the application of the method for user service access provided in a second embodiment of the present invention in different service types. As shown in <figref idrefs="f0002">FIG. 4</figref>, for example, three types of services are configured on the home gateway: The first type of service is a high speed Internet (HSI) service, which dials up over the Point-to-Point Protocol over Ethernet (PPPOE); the second type of service is an Internet Protocol television (IPTV) service; and the third type of service is a voice over Internet Protocol (VOIP) service, which acquires an IP by using an IP phone over the Dynamic Host Configuration Protocol (Dynamic Host Configuration Protocol, DHCP for short), and uses a user encapsulation type IPOE. CVLAN identifiers of three ETH ports corresponding to the three types of services HSI, IPTV, and VOIP of the home gateway are "CVLAN1",<!-- EPO <DP n="12"> --> "CVLAN22", and "CVLAN3" respectively. The access device configures three auto-sensing modes (auto-sensing_1, auto-sensing_2, and auto-sensing_3) on the user ports respectively, and SVLAN identifiers of the user ports are "SVLAN1", "SVLAN2", and "SVLAN3" respectively. Service matching modes of the SVLANs are as follows: The SVLAN1 matches a user encapsulation type PPPOE packet, SVLAN2 matches a user encapsulation type IGMP packet, and SVLAN3 matches a user encapsulation type non-IGMP IPOE packet.</p><p id="p0027" num="0027">When a user of the HSI service dials up over the PPPOE, a PPPOE packet sent from the home gateway carries CVLAN1; after the access device captures the PPPOE packet on a user port and it is assumed the packet is a first PPPOE packet, the user encapsulation type PPPOE may be matched; then, a mapping between CVLAN1 and SVLAN1 is established, and CVLAN1 is configured on the user port.</p><p id="p0028" num="0028">When a user of the IPTV service plays the service on demand by using a set top box (STP), the user sends an IGMP packet to the access device over the Internet Group Management Protocol (Internet Group Management Protocol, IGMP for short), where the IGMP packet carries CVLAN2; after the access device identifies an IGMP packet sent by a user port, the user encapsulation type IGMP may be matched; then, a mapping between CVLAN2 and SVLAN2 is configured on the user port, and CVLAN2 is configured on the user port.</p><p id="p0029" num="0029">When an IP phone of a user of the VOIP service acquires an IP over the DHCP, the DHCP request packet carries CVLAN3, and the DHCP request packet is captured on the access device; if the user encapsulation type IPOE is matched, a mapping between CVLAN3 and SVLAN3 is established, and CVLAN3 is configured on the user port.</p><p id="p0030" num="0030">In addition, if the access device detects that a CVLAN identifier stored on the user port does not have uplink packets in a period of time, the access device may age a mapping corresponding to the CVLAN identifier; or when a port of the home gateway shuts down (shutdown), a port shutdown notification may be sent to the access device, where the port shutdown notification carries a CVLAN identifier corresponding to the shutdown port, and the access device may age a mapping of the CVLAN identifier corresponding to the shutdown port.<!-- EPO <DP n="13"> --></p><p id="p0031" num="0031"><figref idrefs="f0003">FIG. 5</figref> is a schematic diagram of the application of the method for user service access provided in a second embodiment of the present invention in an IP packet. As shown in <figref idrefs="f0003">FIG. 5</figref>, when a user accesses the Internet by using the home gateway, a packet thereof may be an IPv4 packet or an IPv6 packet, where the IPv4 packet and the IPv6 packet are IP packets. The IP packet may be encapsulated in a PPP packet and further encapsulated in an Ethernet packet, and the foregoing PPPOE packet uses this encapsulation form. The IP packet may also be encapsulated in an Ethernet packet directly, and the foregoing IPOE packet uses this encapsulation form. In a practical application, an operator expects to transmit the IPv4 packet and the IPv6 packet to different transport networks. Therefore, in this embodiment, on the access device, whether the IP packet is an IPv4 packet or an IPv6 packet may be differentiated by identifying a version (version) or an Ethernet type (ETHTYPE) of the IP packet, and the IPv4 packet and the IPv6 packet may be bridged to different SVLANs respectively.</p><p id="p0032" num="0032">In this embodiment, a mapping between a CVLAN identifier of a user and an SVLAN identifier is not pre-configured on an access device, but is acquired by analyzing a captured first packet (a user port receiving the first packet does not have the CVLAN identifier and the SVLAN identifier of the first packet). This is an auto-sensing (auto-sensing) process, which simplifies a configuration process. In addition, a user is capable of always acquiring a correct mapping between a customer virtual local area network identifier and a service local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Because the access device does not fix the configuration of the mapping between the CVLAN identifier and the SVLAN identifier, after a first packet of a service is captured on the access device, a matching SVLAN identifier may be acquired according to feature information of the packet, so that the packet is bridged to a correct SVLAN. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.</p><p id="p0033" num="0033"><figref idrefs="f0003">FIG. 6</figref> is a schematic structural diagram of an access device according to a third embodiment of the present invention. As shown in <figref idrefs="f0003">FIG. 6</figref>, the access device includes:<!-- EPO <DP n="14"> -->
<ul><li>a receiving unit 11, configured to receive a first packet sent by a home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet;</li><li>an acquiring unit 13, configured to acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet;</li><li>a mapping establishing unit 15, configured to establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and</li><li>a forwarding unit 17, configured to send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</li></ul></p><p id="p0034" num="0034">In this embodiment, after an acquiring unit of an access device acquires, according to feature information of a first packet, a service virtual local area network identifier that matches the first packet, a mapping establishing unit may automatically establish, according to a customer virtual local area network identifier carried in the first packet, a mapping between the customer virtual local area network identifier and the service virtual local area network identifier. This eliminates the need to pre-configure a mapping between the customer virtual local area network identifier and the service virtual local area network identifier on the access device, thereby simplifying access configurations during user service provisioning. In addition, a user is capable of always acquiring a correct mapping between the customer virtual local area network identifier and the service virtual local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.<!-- EPO <DP n="15"> --></p><p id="p0035" num="0035"><figref idrefs="f0003">FIG. 7</figref> is a schematic structural diagram of an access device according to a fourth embodiment of the present invention. As shown in <figref idrefs="f0003">FIG. 7</figref>, on the basis of the fourth embodiment, the acquiring unit 13 of the access device is specifically configured to: acquire a service type of the first packet through an analysis according to the feature information of the first packet, and acquire, according to the service type, a service virtual local area network identifier that matches the service.</p><p id="p0036" num="0036">The feature information may be at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type; and the service type may include at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an IPv4 service, and an IPv6 service.</p><p id="p0037" num="0037">Further, the access device may further include a configuring unit 21 configured to configure correspondence between the service type and the service virtual local area network identifier on the access device.</p><p id="p0038" num="0038">Further, the receiving unit 11 is further configured to receive a second packet sent by the home gateway, where the second packet carries a customer virtual local area network identifier that matches the second packet.</p><p id="p0039" num="0039">The forwarding unit 17 is further configured to: query, according to the carried customer virtual local area network identifier, the mapping between the customer virtual local area network identifier and the service virtual local area network identifier established by the mapping establishing unit so as to acquire a service virtual local area network identifier corresponding to the second packet, and send, according to the acquired service virtual local area network identifier, the second packet to a network corresponding to the service virtual local area network identifier.</p><p id="p0040" num="0040">In addition, the access device may further include an aging unit 23 configured to: if a packet that carries the customer virtual local area network identifier is not received within a predetermined duration, age the mapping between the customer virtual local area network identifier and the service virtual local area network identifier; or if a port shutdown notification is received from the home gateway, age the mapping between the customer virtual local area network identifier and the service virtual local area network identifier.<!-- EPO <DP n="16"> --></p><p id="p0041" num="0041">In this embodiment, after an acquiring unit of an access device acquires, according to feature information of a first packet, a service virtual local area network identifier that matches the first packet, a mapping establishing unit may automatically establish, according to a customer virtual local area network identifier carried in the first packet, a mapping between the customer virtual local area network identifier and the service virtual local area network identifier. This eliminates the need to pre-configure a mapping between the customer virtual local area network identifier and the service virtual local area network identifier on the access device, thereby simplifying access configurations during user service provisioning. In addition, a user is capable of always acquiring a correct mapping between the customer virtual local area network identifier and the service virtual local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.</p><p id="p0042" num="0042">A fifth embodiment of the present invention provides a system for user service access, and for specific details, reference may be made to <figref idrefs="f0001">FIG. 1</figref>. The system for user service access may include a home gateway 20 and an access device 30.</p><p id="p0043" num="0043">The home gateway 20 is configured to receive a first packet sent by a user terminal, and send the first packet to an access service.</p><p id="p0044" num="0044">The access device 30 is configured to: receive a first packet sent by the home gateway, where the first packet carries a customer virtual local area network identifier that matches the first packet; acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet; establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.<!-- EPO <DP n="17"> --></p><p id="p0045" num="0045">Specifically, the foregoing feature information may be at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type; and the service type may include at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an IPv4 service, and an IPv6 service. The access device provided in this embodiment may use an access device of any structure provided in the foregoing embodiments of the present invention.</p><p id="p0046" num="0046">In this embodiment, after a user port that is of an access device and receives a first packet acquires, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet, the user port may automatically establish, according to a customer virtual local area network identifier carried in the first packet, a mapping between the customer virtual local area network identifier and the service virtual local area network identifier. This eliminates the need to pre-configure a mapping between the customer virtual local area network identifier and the service virtual local area network identifier on the access device, thereby simplifying access configurations during user service provisioning. In addition, a user is capable of always acquiring a correct mapping between the customer virtual local area network identifier and the service virtual local area network identifier by inserting a network cable into any one network port of a home gateway, thereby avoiding a case where services fail because the user inserts a network cable into a wrong network port of the home gateway. Therefore, the configuration of the method for user service access is simple and less error-prone, and may ensure the smoothness of services.</p><p id="p0047" num="0047">A person of ordinary skill in the art may understand that, all or a part of the steps of the foregoing method embodiments may be implemented by a program instructing relevant hardware. The foregoing programs may be stored in a computer readable storage medium. When the program runs, the foregoing steps included in the method embodiments are performed. The foregoing storage medium includes various mediums capable of storing program codes, such as a ROM, a RAM, a magnetic disk or an optical disk.</p><p id="p0048" num="0048">Finally, it should be noted that the foregoing embodiments are merely intended for describing the technical solutions of the present invention other than limiting the present invention. Although the present invention is described in detail with reference to the foregoing<!-- EPO <DP n="18"> --> embodiments, a person of ordinary skill in the art should understand that they may still make modifications to the technical solutions described in the foregoing embodiments, or make equivalent replacements to some technical features thereof, without departing from the spirit and scope of the technical solutions of the embodiments of the present invention.</p></description><claims mxw-id="PCLM56976209" lang="EN" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-en-0001" num="0001"><claim-text>A method for user service access, comprising:
<claim-text>receiving a first packet sent by a home gateway, wherein the first packet carries a customer virtual local area network identifier that matches the first packet;</claim-text>
<claim-text>acquiring, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet;</claim-text>
<claim-text>establishing a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and</claim-text>
<claim-text>sending, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method for user service access according to claim 1, wherein the acquiring a service virtual local area network identifier that matches the first packet comprises:
<claim-text>acquiring a service type of the first packet through an analysis according to the feature information of the first packet; and</claim-text>
<claim-text>acquiring, according to the service type, a service virtual local area network identifier that matches the service type.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method for user service access according to claim 2, further comprising:
<claim-text>configuring correspondence between the service type and the service virtual local area network identifier on an access device.</claim-text></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method for user service access according to claims 2 or 3, wherein the feature information is at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type and the service type comprises at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an Internet Protocol version 4, IPv4, service, and an Internet Protocol version 6 IPv6 service.<!-- EPO <DP n="20"> --></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method for user service access according to any one of claims 1-3, further comprising:
<claim-text>receiving a second packet sent by the home gateway, wherein the second packet carries a customer virtual local area network identifier that matches the second packet;</claim-text>
<claim-text>querying the mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the carried customer virtual local area network identifier so as to acquire a service, virtual local area network identifier corresponding to the second packet; and</claim-text>
<claim-text>sending, according to the acquired service virtual local area network identifier, the second packet to a network corresponding to the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method for user service access according to any one of claims 1-3, before the receiving a first packet sent by a home gateway, comprising:
<claim-text>pre-configuring a service access mode of each user port on the access device as an auto-sensing mode.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method for user service access according to any one of claims 1-3, further comprising:
<claim-text>if a packet that carries the customer virtual local area network identifier is not received within a predetermined duration, aging the mapping between the customer virtual local area network identifier and the service virtual local area network identifier; or</claim-text>
<claim-text>if a port shutdown notification is received from the home gateway, aging the mapping between the customer virtual local area network identifier and the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>An access device, comprising:
<claim-text>a receiving unit, configured to receive a first packet sent by a home gateway, wherein the first packet carries a customer virtual local area network identifier that matches the first packet;</claim-text>
<claim-text>an acquiring unit, configured to acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet;<!-- EPO <DP n="21"> --></claim-text>
<claim-text>a mapping establishing unit, configured to establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and</claim-text>
<claim-text>a forwarding unit, configured to send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The access device according to claim 8, wherein the acquiring unit is specifically configured to acquire a service type of the first packet through an analysis according to the feature information of the first packet, and acquire, according to the service type, a service virtual local area network identifer that matches the service type.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The network device according to claim 9, further comprising:
<claim-text>a configuring unit, configured to configure correspondence between the service type and the service virtual local area network identifier on the access device.</claim-text></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The access device according to claim 9 or 10, wherein the feature information is at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type and the service type comprises at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an Internet Protocol version 4 IPv4 service, and an Internet Protocol version 6 IPv6 service.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The access device according to any one of claims 8-10, wherein:
<claim-text>the receiving unit is further configured to receive a second packet sent by the home gateway, wherein the second packet carries a customer virtual local area network identifier that matches the second packet; and</claim-text>
<claim-text>the forwarding unit is further configured to: query, according to the carried customer virtual local area network identifier, the mapping between the customer virtual local area network identifier and the service virtual local area network identifier established by the mapping establishing unit so as to acquire a service virtual local area network identifier corresponding to the second packet; and send, according to the acquired service virtual local<!-- EPO <DP n="22"> --> area network identifier, the second packet to a network corresponding to the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The access device according to any one of claims 8-10, further comprising:
<claim-text>an aging unit, configured to: if a packet that carries the customer virtual local area network identifier is not received within a predetermined duration, age the mapping between the customer virtual local area network identifier and the service virtual local area network identifier; or if a port shutdown notification is received from the home gateway, age the mapping between the customer virtual local area network identifier and the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>A system for user service access, comprising a home gateway and an access device, wherein:
<claim-text>the home gateway is configured to receive a first packet sent by a user terminal, and send the first packet to an access service; and</claim-text>
<claim-text>the access device is configured to: receive a first packet sent by the home gateway, wherein the first packet carries a customer virtual local area network identifier that matches the first packet; acquire, according to feature information of the first packet, a service virtual local area network identifier that matches the first packet; establish a mapping between the customer virtual local area network identifier and the service virtual local area network identifier according to the customer virtual local area network identifier and the service virtual local area network identifier; and send, according to the mapping between the customer virtual local area network identifier and the service virtual local area network identifier, the first packet to a network corresponding to the service virtual local area network identifier.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>The system for user service access according to claim 14, wherein the feature information is at least one of a user encapsulation type, a dial-up packet keyword, a packet format, a version number, or an Ethernet type and the service type comprises at least one of a high speed Internet service, an Internet Protocol television service, a voice over Internet Protocol service, an Internet Protocol version 4 IPv4 service, and an Internet Protocol version 6 IPv6 service.</claim-text></claim></claims><drawings mxw-id="PDW16666991" load-source="patent-office"><!-- EPO <DP n="23"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="155" he="198" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="157" he="203" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0003" num="5,6,7"><img id="if0003" file="imgf0003.tif" wi="157" he="189" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="228" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
