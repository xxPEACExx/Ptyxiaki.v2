<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680595-A1" country="EP" doc-number="2680595" kind="A1" date="20140101" family-id="46384220" file-reference-id="205009" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549093" ucid="EP-2680595-A1"><document-id><country>EP</country><doc-number>2680595</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12173491-A" is-representative="YES"><document-id mxw-id="PAPP154823016" load-source="docdb" format="epo"><country>EP</country><doc-number>12173491</doc-number><kind>A</kind><date>20120625</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445761" ucid="EP-12173491-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12173491</doc-number><kind>A</kind><date>20120625</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988126805" load-source="ipcr">H04N  21/236       20110101AFI20130402BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988922027" load-source="docdb" scheme="CPC">H04N  21/23608     20130101 FI20140103BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132179763" lang="DE" load-source="patent-office">Vorrichtung und Verfahren zum Multiplexing von Transportströmen zu einem Transportstrom</invention-title><invention-title mxw-id="PT132179764" lang="EN" load-source="patent-office">Apparatus and method thereof for multiplexing transport streams to a transport stream</invention-title><invention-title mxw-id="PT132179765" lang="FR" load-source="patent-office">Appareil et procédé associé de multiplexage des flux de transport vers un flux de transport</invention-title><citations><patent-citations><patcit mxw-id="PCIT242651858" load-source="docdb" ucid="EP-1056279-A1"><document-id format="epo"><country>EP</country><doc-number>1056279</doc-number><kind>A1</kind><date>20001129</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651859" load-source="docdb" ucid="GB-2363295-A"><document-id format="epo"><country>GB</country><doc-number>2363295</doc-number><kind>A</kind><date>20011212</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651861" load-source="docdb" ucid="US-20020064189-A1"><document-id format="epo"><country>US</country><doc-number>20020064189</doc-number><kind>A1</kind><date>20020530</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651862" load-source="docdb" ucid="US-20050114890-A1"><document-id format="epo"><country>US</country><doc-number>20050114890</doc-number><kind>A1</kind><date>20050526</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651863" load-source="docdb" ucid="US-20070263860-A1"><document-id format="epo"><country>US</country><doc-number>20070263860</doc-number><kind>A1</kind><date>20071115</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651860" load-source="docdb" ucid="US-5835493-A"><document-id format="epo"><country>US</country><doc-number>5835493</doc-number><kind>A</kind><date>19981110</date></document-id><sources><source name="SEA" category="X" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242651864" load-source="docdb" ucid="US-8155151-B2"><document-id format="epo"><country>US</country><doc-number>8155151</doc-number><kind>B2</kind><date>20120410</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918166805" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ITE TECH INC</last-name><address><country>TW</country></address></addressbook></applicant><applicant mxw-id="PPAR918158424" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ITE TECH. INC</last-name></addressbook></applicant><applicant mxw-id="PPAR918994124" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>ITE Tech. Inc</last-name><iid>101126790</iid><address><street>3F., No. 13, Chuangsin 1st Road Science-Based Industrial Park</street><city>Hsinchu</city><country>TW</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918146940" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WANG CHIEN-FA</last-name><address><country>TW</country></address></addressbook></inventor><inventor mxw-id="PPAR918169430" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WANG, CHIEN-FA</last-name></addressbook></inventor><inventor mxw-id="PPAR918983344" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WANG, CHIEN-FA</last-name><address><street>5F., No.13, Aly. 2, Ln. 257, Gongguan Rd., Beitou Dist.</street><city>112 Taipei City</city><country>TW</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918979220" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Wittmann, Günther</last-name><iid>101249680</iid><address><street>Wittmann Hernandez Patent Attorneys Boschetsrieder Straße 67</street><city>81379 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548840186" load-source="docdb">AL</country><country mxw-id="DS548802101" load-source="docdb">AT</country><country mxw-id="DS548840188" load-source="docdb">BE</country><country mxw-id="DS548834891" load-source="docdb">BG</country><country mxw-id="DS548801249" load-source="docdb">CH</country><country mxw-id="DS548840334" load-source="docdb">CY</country><country mxw-id="DS548802102" load-source="docdb">CZ</country><country mxw-id="DS548840189" load-source="docdb">DE</country><country mxw-id="DS548840335" load-source="docdb">DK</country><country mxw-id="DS548840336" load-source="docdb">EE</country><country mxw-id="DS548837747" load-source="docdb">ES</country><country mxw-id="DS548834892" load-source="docdb">FI</country><country mxw-id="DS548843609" load-source="docdb">FR</country><country mxw-id="DS548840190" load-source="docdb">GB</country><country mxw-id="DS548840337" load-source="docdb">GR</country><country mxw-id="DS548840191" load-source="docdb">HR</country><country mxw-id="DS548802103" load-source="docdb">HU</country><country mxw-id="DS548801254" load-source="docdb">IE</country><country mxw-id="DS548840338" load-source="docdb">IS</country><country mxw-id="DS548843610" load-source="docdb">IT</country><country mxw-id="DS548840339" load-source="docdb">LI</country><country mxw-id="DS548834893" load-source="docdb">LT</country><country mxw-id="DS548841093" load-source="docdb">LU</country><country mxw-id="DS548834894" load-source="docdb">LV</country><country mxw-id="DS548834895" load-source="docdb">MC</country><country mxw-id="DS548841094" load-source="docdb">MK</country><country mxw-id="DS548841095" load-source="docdb">MT</country><country mxw-id="DS548841096" load-source="docdb">NL</country><country mxw-id="DS548843611" load-source="docdb">NO</country><country mxw-id="DS548841097" load-source="docdb">PL</country><country mxw-id="DS548801255" load-source="docdb">PT</country><country mxw-id="DS548837748" load-source="docdb">RO</country><country mxw-id="DS548801256" load-source="docdb">RS</country><country mxw-id="DS548841098" load-source="docdb">SE</country><country mxw-id="DS548840193" load-source="docdb">SI</country><country mxw-id="DS548843612" load-source="docdb">SK</country><country mxw-id="DS548841099" load-source="docdb">SM</country><country mxw-id="DS548840340" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669764" lang="EN" load-source="patent-office"><p id="pa01" num="0001">In this invention, a method for multiplexing multiple transport streams into a single output transport stream and an apparatus thereof are disclosed. With such method, two or more transport streams are merged into a single transport stream without dividing the payload of each packet into multiple packets in the output transport stream. One way to achieve the merging of transport streams is by mapping the PID and the source port of a packet to a new tag to replace the PID of each packet so as to uniquely identify the packet in the output transport stream. By doing so, multiple transport streams can be merged into an output transport stream efficiently and transparently.
<img id="iaf01" file="imgaf001.tif" wi="128" he="116" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499137" lang="EN" source="EPO" load-source="docdb"><p>In this invention, a method for multiplexing multiple transport streams into a single output transport stream and an apparatus thereof are disclosed. With such method, two or more transport streams are merged into a single transport stream without dividing the payload of each packet into multiple packets in the output transport stream. One way to achieve the merging of transport streams is by mapping the PID and the source port of a packet to a new tag to replace the PID of each packet so as to uniquely identify the packet in the output transport stream. By doing so, multiple transport streams can be merged into an output transport stream efficiently and transparently.</p></abstract><description mxw-id="PDES63955194" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>BACKGROUND OF THE INVENTION</b></heading><heading id="h0002"><b>1. Field of the invention</b></heading><p id="p0001" num="0001">The invention relates in general to a transport stream to deliver video and sound information, and more particular to apparatus and method thereof for multiplexing transport streams.</p><heading id="h0003"><b>2. Description of the Prior Art</b></heading><p id="p0002" num="0002">Using digital format to transmit video or audio information has become more and more popular around the world because it will enhance the quality of video and allows two-way interactive communication compared with traditional analog format. A transport stream (TS) is a popular standard to carry programs of video/audio; a number of the video/audio programs can be delivered by a transport stream in which a PID is assigned to each program so that each program can be uniquely identified. The DVB standard is a new and widely used standard for broadcasting video and/or audio data using transport streams. In a transport stream (TS), there are two types of format for framing each packet in a transport stream. One is the 188-byte format and the other is the 204-byte format; the 204-byte format has a 16-byte suffix to carry Reed-Solomon code (RS code) for error correction. In each packet, there is a 4-byte header which includes a synchronous byte (sync-byte) predefined as 0x47, and a packet identifier (PID) to identify the program to which the packet belongs.<!-- EPO <DP n="2"> --></p><p id="p0003" num="0003">When combining multiple transport streams coming from different sources into a single transport stream, it requires a mechanism to distinguish PIDs between different sources; otherwise an error may occur if there is an identical PID in packets from different sources.</p><p id="p0004" num="0004">In a prior art, <patcit id="pcit0001" dnum="US8155151B"><text>US 8,155,151</text></patcit>, a method for solving this problem is disclosed. Please refer to <figref idrefs="f0001">Fig. 1</figref> which depicts the prior art. A multiplexing system receives a first transport stream from a first source and a second transport stream from a second source. The payload of a packet coming from the two sources is divided into a front portion and an ending portion; and the ending portion of the payload is re-packetized to form a new packet which has a new 4-bytes header to indicate which source the packet comes from. The original packets and the new packets from two sources are combined into an output transport stream. Then, at the receiving end of the output transport stream, the output transport stream will be processed to derive the packets as it was received by the above-mentioned multiplexing system. By using the method described in the prior art, <patcit id="pcit0002" dnum="US8155151B"><text>US 8,155,151</text></patcit>, the efficiency of carrying the payload by a packet is reduced significantly and the error rate will be increased due to the complexity of the re-packetizing. Therefore, what is needed is an efficient way for multiplexing transport streams into an output transport stream to solve the above issues.</p><heading id="h0004"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0005" num="0005">One objective of the present invention is to merge transport streams from multiple ports into an output transport stream transparently without dividing the payload of a packet into multiple packets to preserve the precious bandwidth of a transport<!-- EPO <DP n="3"> --> stream. Therefore, the efficiency can be greatly enhanced by using present invention to merge multiple transport streams into an output transport stream.</p><p id="p0006" num="0006">One embodiment discloses a method to merge multiple transport streams from multiple ports into an output transport stream by mapping the PID and the source port of the packet to a new tag to replace the PID of each packet so as to uniquely identify the packet in the output transport stream.</p><p id="p0007" num="0007">One embodiment discloses a method to merge multiple transport streams from multiple ports into an output transport stream by mapping the source port of the packet to a new tag for each packet, so that the new tag along with the PID of the packet will uniquely identify the packet in the output transport stream.</p><p id="p0008" num="0008">One embodiment discloses an apparatus, called multiple transport stream multiplexer, for merging transport stream from multiple ports into an output transport stream by mapping a PID and a source port of a packet to a new tag, so that the new tag will uniquely identify the packet in the output transport stream.</p><p id="p0009" num="0009">One embodiment discloses another apparatus to cascade multiple transport stream multiplexers mentioned above to scale up the number of ports to increase the capacity for merging transport streams.</p><heading id="h0005"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0010" num="0010">The foregoing aspects and many of the accompanying advantages of this invention will become more readily appreciated as the same becomes better understood by<!-- EPO <DP n="4"> --> reference to the following detailed description, when taken in conjunction with the accompanying drawings, wherein:
<ul><li><figref idrefs="f0001">Fig. 1</figref> illustrates an embodiment in a prior art;</li><li><figref idrefs="f0002">Fig. 2</figref> illustrates a flow chart of a method to merge multiple transport streams in accordance with one embodiment of this invention;</li><li><figref idrefs="f0002">Fig. 3</figref> illustrates an aggregator for merging multiple transport streams in accordance with one embodiment of this invention;</li><li><figref idrefs="f0003 f0004">Fig. 4A to 4D</figref> illustrate methods for stamping a tag in a packet in accordance with one embodiment of this invention;</li><li><figref idrefs="f0005">Fig. 5A</figref> and <figref idrefs="f0006">5B</figref> illustrate a method for stamping a tag by modifying the PID in a packet in accordance with one embodiment of this invention;</li><li><figref idrefs="f0007 f0008">Fig. 6A to 6C</figref> illustrate methods for modifying PIDs in a packet in accordance with one embodiment of this invention;</li><li><figref idrefs="f0009">Fig. 7</figref> illustrates an apparatus to cascade multiple aggregators in accordance with one embodiment of this invention.</li></ul></p><heading id="h0006"><b>Detailed Description of the Preferred Embodiments</b></heading><p id="p0011" num="0011">The detailed explanation of the present invention is described as follows. The<!-- EPO <DP n="5"> --> described preferred embodiments are presented for purposes of illustrations and description, and they are not intended to limit the scope of the present invention.</p><p id="p0012" num="0012">In this invention, a method for multiplexing a plurality of transport streams (TS) is disclosed. Compared with the prior art, the method in this invention doesn't divide the payload of a transport stream into multiple segments. With this method, a system is capable of multiplexing the plurality of transport streams easier.</p><heading id="h0007"><b>A first embodiment: assigning a tag according to the port identifier</b></heading><p id="p0013" num="0013">In one embodiment of this invention, please refer to <figref idrefs="f0002">Fig. 2</figref> which illustrates a flow chart of a preferred embodiment of this invention. First, a plurality of packets are received from multiple ports. Some of the packets are received from a first port and others are received from a second port, as in step 201. Then, a tag for each packet of the received transport streams from the plurality of input ports is determined according to the port-identifier, for uniquely identifying the packet in the output transport stream, as in step 202. Then, said each packet of the received transport streams is output to the output transport stream, wherein said each packet is embedded with a corresponding tag, as in step 203.</p><p id="p0014" num="0014">In one embodiment, please refer to <figref idrefs="f0002">Fig. 3</figref> which illustrates an aggregator implementing the method of this invention. An aggregator 30 comprises a first input port 301, a second input port 302, an output port 303, a multiplexer 304 and a stamp tag module 305. A first transport stream is received via the first input port 301, and a second transport stream is received via the second input port 302. Each of the first and the second transport streams comprises multiple packets. The stamp tag module<!-- EPO <DP n="6"> --> 305 is to generate a tag and assign the tag to a packet, wherein the tag is determined according to which input port the packet comes from, so a system receiving the packet is capable of identifying which port the packet comes from. The multiplexer 304 is to put the packet, with the assigned tag, in a sequence to form an output transport stream. The output port 303 is to transfer the output transport stream.</p><heading id="h0008"><b>Method of stamping a tag to the sync-byte</b></heading><p id="p0015" num="0015">While implementing the method mentioned above, there are a variety of ways to stamp a tag to a packet. In one embodiment, please refer to <figref idrefs="f0003">Fig. 4A</figref> which illustrates a variant of this invention. A system 40 comprises an aggregator 401, a memory 402, a processor 403 and a display module 404. The structure and function of the aggregator 401 is depicted in <figref idrefs="f0002">Fig. 3</figref> and described above. The memory 402 is to store a transport stream 405 generated by the aggregator 401. The processor 403 is to transfer the transport stream 405, stored in the memory 402, to a video and play the video on the display 404. Conventionally, a sync-byte 0x47 in a packet of a transport stream is an indicating pointer to inform a system that the packet starts. Any other data bytes, say 0x48, can also be used as a sync-byte if the processor 403 in the system 40 knows what other values the sync-byte could be, besides 0x47, Hence, while the aggregator 401 assigns a tag to a packet in the transport stream, the tag can be directly recorded in the sync-byte.</p><p id="p0016" num="0016">As an example, please refer to <figref idrefs="f0003">Fig. 4B</figref> which illustrates how the aggregator assigns tags. There are two transport streams received by the aggregator 401. A first transport stream (TS1) 410 and a second transport stream (TS2) 420 come from different sources. The aggregator puts each packet in the first transport stream 410 and<!-- EPO <DP n="7"> --> the second transport stream 420 in a sequence to form the transport stream 405 in which the sync-byte of each packet is re-assigned. The sync-byte 411 of each packet from the first transport stream 410 remains 0x47 while the sync-byte 421 of each packet from the second transport stream 420 is modified as 0x48. Then, each packet of both transport stream 410 and 420 is put in a sequence 415 to form the transport stream 405 mentioned in <figref idrefs="f0003">Fig. 4A</figref>. Although the method mentioned here only relates to modifying the sync-byte, a person having ordinary skill in the art can easily utilize the method to any other byte which will not affect the operation of DVB standard.</p><p id="p0017" num="0017">While a user of the system 40 selects to play a video broadcasted with the first transport stream 410, the processor 403 processes each packet of the transport stream 405 and selects those packets with 0x47 as their sync-byte. While the user of the system 40 selects to play a video broadcasted with the second transport stream 420, the processor 403 processes each packet of the transport stream 405 and selects those packets with 0x48 as their sync-byte.</p><heading id="h0009"><b>Method of stamping a tag with additional byte</b></heading><p id="p0018" num="0018">In one embodiment, a processor 403 in <figref idrefs="f0003">Fig. 4A</figref> is capable of processing transport streams which are not 188- or 204-byte long as in DVB standard. That is, the aggregator 401 is capable of adding an indicating byte to a packet in the transport stream 405 to tell the processor 403 where the packet comes from. For instance, please refer to <figref idrefs="f0004">Fig. 4C</figref> which illustrates another method for stamping a tag. A first transport stream 430 and a second transport stream 440 come from different sources and they are both 188-byte long. The aggregator puts each packet in the first<!-- EPO <DP n="8"> --> transport stream 430 and the second transport stream 440 in a sequence 435 to form the transport stream 405 in which each packet is added with an indicating byte so that the total length of each packet in the transport stream 405 will be 189 bytes. The indicating byte of each packet from the first transport stream 430 is 0x01; and the indicating byte of each packet from the second transport stream 440 is 0x02. Although the method described above only relates to the 188-byte transport stream standard, a person having ordinary skill in the art can easily utilize the method for the 204-byte transport stream standard.</p><p id="p0019" num="0019">While a user of the system 40 chooses to play a channel of video carried in a first transport stream 430, the processor 403 will process each packet of the transport stream 405 and select those packets with 0x01 as their indicating byte. While the user of the system 40 chooses to play a channel of video carried in a second transport stream 440, the processor 403 processes each packet of the transport stream 405 and selects those packets with 0x02 as their indicating byte.</p><heading id="h0010"><b>Method of stamping a tag in the RS code field</b></heading><p id="p0020" num="0020">It is known that the DVB standard provides two types of formats for framing a transport stream. One is a 188-byte format and the other is a 204-byte format. The 204-byte format, compared with the 188-byte format, further comprises a 16-byte field for Reed-Solomon code for detecting errors in a packet. However, it's not always necessary to utilize the RS code, so it provides an extra space for storing an indicator for the purpose of combining multiple transport streams into an output transport stream. In one embodiment, please refer to <figref idrefs="f0004">Fig. 4D</figref> which illustrates another method for stamping a tag. A first transport stream 450 and a second transport<!-- EPO <DP n="9"> --> stream 460 come in from different sources and they both carry packets in the 188-byte format. The aggregator puts each packet in the first transport stream 450 and the second transport stream 460 in a sequence 455 so as to form the transport stream 405, wherein each packet now has 204 bytes; and the information indicating the source of each packet, that is, tag1 or tag2, is now recorded in the last 16 bytes. That is, each packet in the transport stream 405 has a first tag in its last 16 bytes for those packets coming from the first transport stream 450 while each packet coming from the second transport stream 460 has a second tag in its last 16 bytes.</p><p id="p0021" num="0021">If a user of the system 40 chooses to play a channel of video carried in a transport stream 450, the processor 403 will process each packet of the transport stream 405 and select those packets with a first tag corresponding to the transport stream 450. At the same time, if the user of the system 40 decides to play another channel of video carried in a second transport stream 460, the processor 403 will process each packet of the transport stream 405 and select those packets with the second tag corresponding to the transport stream 460.</p><heading id="h0011"><b>A second embodiment: assigning a tag according to port number and PID</b></heading><p id="p0022" num="0022">In one embodiment of this invention, please refer to <figref idrefs="f0005">Fig. 5A</figref> which illustrates a flow chart of a preferred embodiment of this invention. First, a plurality of packets are received from multiple ports. Some of the packets are received from a first port and others are received from a second port, as in step 501. Then, a tag for each packet of the received transport streams from the plurality of input ports is determined according to the port-identifier and the PID of the packet, for uniquely identifying the packet in the output transport stream, as in step 502. Then, said each<!-- EPO <DP n="10"> --> packet of the received transport streams is outputted to an output transport stream, wherein said each packet is embedded with a corresponding tag, as in step 503.</p><p id="p0023" num="0023">In this embodiment, please refer back to <figref idrefs="f0002">Fig. 3</figref> which illustrates an aggregator implementing the method of this invention. A first transport stream is received via the first input port 301, and a second transport stream is received via the second input port 302. Each of the first and the second transport streams comprises multiple packets and each packet comprises a PID. The stamp tag module 305 is to generate a tag and assign the tag to a packet, wherein the tag is determined according to which input port the packet comes from and the PID of the packet, so a system receiving the packet is capable of identifying which port the packet comes from. The multiplexer 304 is to put the packet, with the assigned tag, in a sequence to form an output transport stream. The output port 303 is to transfer the output transport stream.</p><heading id="h0012"><b>Method of stamping a tag by modifying the PID</b></heading><p id="p0024" num="0024">In one embodiment, please refer to <figref idrefs="f0006">Fig. 5B</figref> which illustrates a method of stamping a tag by modifying the PID. A first transport stream 51 and a second transport stream 52 come from different sources and have a first PID list 510 and a second PID list 520, respectively. The first PID list 510 and the second PID list 520 have some identical PIDs. The aggregator 30 in <figref idrefs="f0002">Fig. 3</figref> combines packets in the first transport stream 51 and the second transport stream 52 together to form a third transport stream 53. Each packet in the third transport stream 53 is assigned a new PID to avoid PID confliction. Also, a mapping 54 between a new PID and the original PID is recorded in some additional packets in the third transport stream 53.<!-- EPO <DP n="11"> --></p><heading id="h0013"><b>Method of modifying PID</b></heading><p id="p0025" num="0025">There are several methods to realize stamping a tag by modifying PID. In one embodiment, please refer to <figref idrefs="f0007">Fig. 6A</figref>; there are two input transport streams, namely TS1 and TS2. Each packet in TS 1 and TS2 has a PID therein. PIDs in TS1 form a first PID list 601 and PIDs in TS2 form a second PID list 602. Some PIDs such as 6021, 6022, and 6023 in 602 are also found in 601, so the PIDs 6021, 6022, and 6023 should be modified to avoid PID conflicts for merging to a single transport stream. One way to avoid the conflicts is to modify 6021, 6022, and 6023 as 6031, 6032, and 6033 while maintaining other PIDs unchanged. By doing so, a third PID list 603 is generated. Each packet in TS2 is re-assigned with a PID according to the third PID list 603. After that, each packet in TS1 and TS2 is put together to form a third transport stream TS3 for outputting. Also, PID list 603 is embedded into one or more packets in the third transport stream TS3.</p><heading id="h0014"><b>Assign PIDs by a mapping table</b></heading><p id="p0026" num="0026">In one embodiment, please refer to <figref idrefs="f0008">Fig. 6B</figref>, a mapping table 604 is pre-arranged for mapping PIDs from multiple input ports into a set of PIDs in an output transport stream for uniquely identifying each packet in the output transport stream. That is, the mapping table maps the original PID and the source port-number to a new PID for each packet, wherein the new tag represents the PID of each packet transmitted in the output transport stream. Please note that the new tag may not be equal to the original PID for a packet if there is a conflict with another packet having an identical PID. On the other hand, the new tag may be equal to the original PID if there is no conflict with PIDs in other packets or the original PID remains the same<!-- EPO <DP n="12"> --> because the original PID is assigned first in the mapping table before any other conflicting PIDs.</p><heading id="h0015"><b>Assign PIDs dynamically</b></heading><p id="p0027" num="0027">In another embodiment, please refer to <figref idrefs="f0008">Fig. 6C</figref>; there are two transport streams, namely TS4 and TS5. While an aggregator receives a packet in TS4 or TS5 for the first time carrying such PID, the aggregator assigns a new tag which represents a PID of the packet in the output transport stream because the packet is received first time and there is no mapping found in the mapping table. Please note that the new tag can be assigned sequentially in a range of PIDs, such as 100 to 8100, to ensure there is no conflicting PID in the output stream for all the packets. Once, a new tag is dynamically assigned to a packet, the tag is to be used for other packets having the same port-number and PID as the packet, which means the other packets will have an existing mapping for them already when they are received, there is no need to generate another tag for them.</p><p id="p0028" num="0028">A table 605 is used to record a mapping from the PID and source port of a packet to a new tag whenever the new tag is assigned to the packet which is received first time with such PID, Although in this invention only two methods of re-assigning PID are disclosed, there are a variety of similar methods and a person having ordinary skill in the art can easily implement an aggregator with such flexibility according to the concept above.</p><heading id="h0016"><b>Apparatus of cascading aggregators</b></heading><!-- EPO <DP n="13"> --><p id="p0029" num="0029">In one embodiment, as depicted in <figref idrefs="f0009">Fig. 7</figref>, there are three aggregators mentioned in <figref idrefs="f0002">Fig. 3</figref> in cascade. A first aggregator 71 receives a first transport stream 701 and a second transport stream 702 to output a third transport stream 703 which com combines packets in 701 and 702. A second aggregator 72 receives a fourth transport stream 704 and the third transport stream 703 outputted from the first aggregator 71 to output a fifth transport stream 705 which combines packets in 703 and 704. A third aggregator 73 receives a sixth transport stream 706 and the fifth transport stream 705 outputted from the second aggregator 72 to output a seventh transport stream 707 which combines packets in 705 and 706. While a processor receives the seventh transport stream 707, the processor can easily recovers transport streams 701, 702, 704, and 706.</p><p id="p0030" num="0030">Although in this invention only an aggregator with two input ports is disclosed, an aggregator may have more than two input ports. That is, the aggregator is capable of receiving more than two transport streams.</p><p id="p0031" num="0031">In summary, in this invention a method for multiplexing multiple transport streams into a single transport stream and an apparatus thereof are disclosed. The present invention can map PIDs from multiple ports into an output transport stream transparently without dividing the payload of a packet into multiple packets. Furthermore, a mapping table is provided to map the PID and a source port of the packet to a new tag which can replace the PID when the packet is sent to the output transport stream without using any precious bandwidth to carry the payload of the packet. Therefore, the efficiency can be greatly enhanced by using present invention to merge multiple transport streams into an output transport stream.<!-- EPO <DP n="14"> --></p><p id="p0032" num="0032">The foregoing descriptions of specific embodiments of the present invention have been presented for purposes of illustration and description. They are not intended to be exclusive or to limit the invention to the precise forms disclosed, and obviously many modifications and variations are possible in light of the above teaching. The embodiments were chosen and described in order to best explain the principles of the invention and its practical application, to thereby enable others skilled in the art to best utilize the invention and various embodiments with various modifications as suited to particular use contemplated. It is intended that the scope of the invention be defined by the claims appended hereto and their equivalents.</p></description><claims mxw-id="PCLM56976107" lang="EN" load-source="patent-office"><!-- EPO <DP n="15"> --><claim id="c-en-0001" num="0001"><claim-text>A method of merging transport streams from a plurality of input ports into an output transport stream, wherein each of the plurality of input ports is assigned a port-identifier to identify a port on which the input transport streams is received, wherein each of the received transport streams comprises a plurality of packets, wherein each of the plurality of packets has a PID therein for identifying the type of the packet, the method <b>characterized by</b> comprising the steps of:
<claim-text>a. determining a tag for each packet of the received transport streams from the plurality of input ports according to the port-identifier and the PID of the packet, for uniquely identifying the packet in the output transport stream; and</claim-text>
<claim-text>b. outputting said each packet of the received transport streams to the output transport stream, wherein said each packet is embedded with a corresponding tag.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method according to claim 1, wherein the tag is determined according to a mapping table comprising a mapping to map the PID and the port-identifier of the packet to the tag.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method according to claim 2, wherein the tag is the same as the PID of the packet.<!-- EPO <DP n="16"> --></claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method according to claim 2, wherein the tag is different from the PID of the packet.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method according to claim 1, wherein the tag is embedded in the packet by replacing the PID of the packet with the tag.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method according to claim 1, wherein the tag is embedded in the packet by replacing the CRC of the packet.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method according to claim 1, wherein the tag is embedded in the packet by inserting the tag into the packet.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method according to claim 1, wherein the tag is dynamically generated when the packet is received for the first time, and the tag is to be used for other packets having the same port-identifier and PID as the packet.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method according to claim 8, wherein the tag is embedded by replacing the PID of the packet with the tag.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method according to claim 8, wherein the tag is embedded by inserting the tag into the packet.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A method of merging transport streams from a plurality of input ports into an output transport stream, wherein each of the plurality of input ports is assigned a port-identifier to identify a port on which the input transport streams is received, wherein each of the received transport streams comprises a plurality of packets,<!-- EPO <DP n="17"> --> wherein each of the plurality of packets of the received transport stream has a PID therein for identifying the type of the packet, the method <b>characterized by</b> comprising the steps of:
<claim-text>a. determining a tag for each packet of the received transport streams from the plurality of ports according to the port-identifier of the packet, for uniquely identifying the packet in the output transport stream; and</claim-text>
<claim-text>b. outputting said each packet of the received transport streams to the output transport stream, wherein said each packet is embedded with a corresponding tag, wherein the payload of the packet is not divided into two or more packets in the output transport stream.</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method according to claim 11, wherein the tag is equal to the port-identifier of the packet in step a.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method according to claim 11, wherein the tag is embedded by one of the following ways: inserting the tag into the packet, inserting the tag into a newly added CRC of the packet, replacing the CRC of the packet with the tag and replacing the sync-byte of the packet with the tag.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>An apparatus for merging transport streams from a plurality of input ports into an output transport stream via an output port, wherein each of the plurality of input ports is assigned a port-identifier to identify a port on which the input transport streams is received, wherein each of the received transport streams comprises a plurality of packets, wherein each of the plurality of packets of the received transport<!-- EPO <DP n="18"> --> stream has a PID therein for identifying the type of the packet, the apparatus <b>characterized by</b> comprising:
<claim-text>a mapping module for determining a tag for each packet of the received transport streams from the plurality of input ports according to the port-identifier and the PID of the packet, for uniquely identifying the packet in the output transport stream; and</claim-text>
<claim-text>an outputting module to output said each packet of the received transport streams to the output transport stream via the output port, wherein said each packet is embedded with its corresponding tag.</claim-text></claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>A transport system, <b>characterized by</b> comprising:
<claim-text>a first apparatus recited as in claim 14; and</claim-text>
<claim-text>a second apparatus recited as in claim 14, wherein the output port of the first apparatus of the plurality of apparatus is electrically coupled to an input port of the second apparatus.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16666892" load-source="patent-office"><!-- EPO <DP n="19"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0003" num="4A,4B"><img id="if0003" file="imgf0003.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0004" num="4C,4D"><img id="if0004" file="imgf0004.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0005" num="5A"><img id="if0005" file="imgf0005.tif" wi="165" he="199" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0006" num="5B"><img id="if0006" file="imgf0006.tif" wi="153" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0007" num="6A"><img id="if0007" file="imgf0007.tif" wi="165" he="202" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0008" num="6B,6C"><img id="if0008" file="imgf0008.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="27"> --><figure id="f0009" num="7"><img id="if0009" file="imgf0009.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="156" he="233" type="tif"/><doc-page id="srep0003" file="srep0003.tif" wi="163" he="233" type="tif"/><doc-page id="srep0004" file="srep0004.tif" wi="156" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
