<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679032-A1" country="EP" doc-number="2679032" kind="A1" date="20140101" family-id="46660236" file-reference-id="305010" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146551037" ucid="EP-2679032-A1"><document-id><country>EP</country><doc-number>2679032</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12749179-A" is-representative="NO"><document-id mxw-id="PAPP154824960" load-source="docdb" format="epo"><country>EP</country><doc-number>12749179</doc-number><kind>A</kind><date>20120104</date><lang>EN</lang></document-id><document-id mxw-id="PAPP216528183" load-source="docdb" format="original"><country>EP</country><doc-number>12749179.3</doc-number><date>20120104</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140448868" ucid="CN-201110046825-A" load-source="docdb"><document-id format="epo"><country>CN</country><doc-number>201110046825</doc-number><kind>A</kind><date>20110222</date></document-id></priority-claim><priority-claim mxw-id="PPC140447974" ucid="IB-2012000156-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>IB</country><doc-number>2012000156</doc-number><kind>W</kind><date>20120104</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1880667896" load-source="ipcr">H04W  80/04        20090101ALI20161102BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1880667897" load-source="ipcr">H04W   8/10        20090101AFI20161102BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988104724" load-source="docdb" scheme="CPC">H04M  15/63        20130101 LI20131126BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988105204" load-source="docdb" scheme="CPC">H04W   8/10        20130101 FI20131206BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988109176" load-source="docdb" scheme="CPC">H04M2215/208       20130101 LA20131126BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988123995" load-source="docdb" scheme="CPC">H04W   4/24        20130101 LI20131126BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988124395" load-source="docdb" scheme="CPC">H04M  15/8038      20130101 LI20131126BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988130837" load-source="docdb" scheme="CPC">H04M  15/80        20130101 LI20131126BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988132628" load-source="docdb" scheme="CPC">H04L  65/1016      20130101 LA20130926BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988136462" load-source="docdb" scheme="CPC">H04M  15/8033      20130101 LI20131126BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132185595" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNG ZUR ERFASSUNG UND VERWENDUNG VON STANDORTINFORMATIONEN</invention-title><invention-title mxw-id="PT132185596" lang="EN" load-source="patent-office">METHOD AND DEVICE FOR ACQUIRING AND USING LOCATION INFORMATION</invention-title><invention-title mxw-id="PT132185597" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF D'ACQUISITION ET D'UTILISATION D'INFORMATIONS DE POSITION</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918153617" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ALCATEL LUCENT</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR918165126" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>ALCATEL LUCENT</last-name></addressbook></applicant><applicant mxw-id="PPAR918980996" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Alcatel-Lucent</last-name><iid>101311164</iid><address><street>3, Avenue Octave Gréard</street><city>75007 Paris</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918153521" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>LI XIANG YANG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918172507" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>LI, XIANG YANG</last-name></addressbook></inventor><inventor mxw-id="PPAR918987439" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>LI, XIANG YANG</last-name><address><street>388 Ningqiao RD</street><city>Shanghai 201206</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918137288" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>CAI YIGANG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918149786" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>CAI, YIGANG</last-name></addressbook></inventor><inventor mxw-id="PPAR918980296" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>CAI, YIGANG</last-name><address><street>23643 Royal Worlington Dr.</street><city>Naperville, Illinois 60564</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918981784" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hervouet, Sylvie</last-name><suffix>et al</suffix><iid>101386033</iid><address><street>Ipsilon Feray Lenne Conseil Le Centralis 63 avenue du General Leclerc</street><city>92340 Bourg-la-Reine</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="IB-2012000156-W"><document-id><country>IB</country><doc-number>2012000156</doc-number><kind>W</kind><date>20120104</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012114171-A1"><document-id><country>WO</country><doc-number>2012114171</doc-number><kind>A1</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548863717" load-source="docdb">AL</country><country mxw-id="DS548909877" load-source="docdb">AT</country><country mxw-id="DS548863718" load-source="docdb">BE</country><country mxw-id="DS548835490" load-source="docdb">BG</country><country mxw-id="DS548921228" load-source="docdb">CH</country><country mxw-id="DS548923062" load-source="docdb">CY</country><country mxw-id="DS548909882" load-source="docdb">CZ</country><country mxw-id="DS548863719" load-source="docdb">DE</country><country mxw-id="DS548923063" load-source="docdb">DK</country><country mxw-id="DS548923064" load-source="docdb">EE</country><country mxw-id="DS548931742" load-source="docdb">ES</country><country mxw-id="DS548835491" load-source="docdb">FI</country><country mxw-id="DS548835492" load-source="docdb">FR</country><country mxw-id="DS548863720" load-source="docdb">GB</country><country mxw-id="DS548923065" load-source="docdb">GR</country><country mxw-id="DS548863721" load-source="docdb">HR</country><country mxw-id="DS548909883" load-source="docdb">HU</country><country mxw-id="DS548921229" load-source="docdb">IE</country><country mxw-id="DS548863722" load-source="docdb">IS</country><country mxw-id="DS548835493" load-source="docdb">IT</country><country mxw-id="DS548923066" load-source="docdb">LI</country><country mxw-id="DS548924871" load-source="docdb">LT</country><country mxw-id="DS548909884" load-source="docdb">LU</country><country mxw-id="DS548924872" load-source="docdb">LV</country><country mxw-id="DS548924873" load-source="docdb">MC</country><country mxw-id="DS548814792" load-source="docdb">MK</country><country mxw-id="DS548814793" load-source="docdb">MT</country><country mxw-id="DS548909885" load-source="docdb">NL</country><country mxw-id="DS548931743" load-source="docdb">NO</country><country mxw-id="DS548921234" load-source="docdb">PL</country><country mxw-id="DS548924874" load-source="docdb">PT</country><country mxw-id="DS548909890" load-source="docdb">RO</country><country mxw-id="DS548924875" load-source="docdb">RS</country><country mxw-id="DS548921235" load-source="docdb">SE</country><country mxw-id="DS548924876" load-source="docdb">SI</country><country mxw-id="DS548931744" load-source="docdb">SK</country><country mxw-id="DS548921236" load-source="docdb">SM</country><country mxw-id="DS548814794" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99625228" ref-ucid="WO-2012114171-A1" lang="EN" load-source="patent-office"><p num="0000">The present invention discloses a method and device for acquiring and using location information, where a mobility management entity acquires trusted user location information from a base station and provides a home subscriber server with the trusted location information. With enhanced interfaces between the home subscriber server, on one side, and a serving-call/session control function, a proxy subscriber server and the serving-call/session control function, an application server, an online charging system and an offline charging system respectively, on the other side, the home subscriber server can provide these network elements with the trusted user location information, and also with enhanced interfaces between the online charging system and the offline charging system, on one side, and the serving-call/session control function, the proxy subscriber server and the serving-call/session control function, and the application server respectively, on the other side, transmission of the trusted user location information via these interfaces can be supported.</p></abstract><abstract mxw-id="PA99823749" ref-ucid="WO-2012114171-A1" lang="EN" source="national office" load-source="docdb"><p>The present invention discloses a method and device for acquiring and using location information, where a mobility management entity acquires trusted user location information from a base station and provides a home subscriber server with the trusted location information. With enhanced interfaces between the home subscriber server, on one side, and a serving-call/session control function, a proxy subscriber server and the serving-call/session control function, an application server, an online charging system and an offline charging system respectively, on the other side, the home subscriber server can provide these network elements with the trusted user location information, and also with enhanced interfaces between the online charging system and the offline charging system, on one side, and the serving-call/session control function, the proxy subscriber server and the serving-call/session control function, and the application server respectively, on the other side, transmission of the trusted user location information via these interfaces can be supported.</p></abstract><abstract mxw-id="PA99625229" ref-ucid="WO-2012114171-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention concerne un procédé et un dispositif servant à acquérir et utiliser des informations de position, une entité de gestion de la mobilité (MME) acquérant des informations de position d'utilisateur de confiance depuis une station de base et fournissant à un serveur d'abonné résidentiel les informations de position de confiance. Avec des interfaces améliorées entre le serveur d'abonné résidentiel, d'un côté, et une fonction d'appel de service/commande de session, un serveur d'abonné mandataire et la fonction d'appel de service/commande de session, un serveur d'application, un système de taxation en ligne et un système de taxation hors ligne respectivement, d'un autre côté, le serveur d'abonné résidentiel peut fournir à ces éléments de réseau les informations de position d'utilisateur de confiance. De même, avec des interfaces améliorées entre le système de taxation en ligne et le système de taxation hors ligne, d'un côté, et la fonction d'appel de service/commande de session, le serveur d'abonné mandataire et la fonction d'appel de service/commande de session, et le serveur d'application, respectivement, d'un autre côté, il est possible d'effectuer une transmission des informations de position d'utilisateur de confiance via ces interfaces.</p></abstract><abstract mxw-id="PA99823750" ref-ucid="WO-2012114171-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention concerne un procédé et un dispositif servant à acquérir et utiliser des informations de position, une entité de gestion de la mobilité (MME) acquérant des informations de position d'utilisateur de confiance depuis une station de base et fournissant à un serveur d'abonné résidentiel les informations de position de confiance. Avec des interfaces améliorées entre le serveur d'abonné résidentiel, d'un côté, et une fonction d'appel de service/commande de session, un serveur d'abonné mandataire et la fonction d'appel de service/commande de session, un serveur d'application, un système de taxation en ligne et un système de taxation hors ligne respectivement, d'un autre côté, le serveur d'abonné résidentiel peut fournir à ces éléments de réseau les informations de position d'utilisateur de confiance. De même, avec des interfaces améliorées entre le système de taxation en ligne et le système de taxation hors ligne, d'un côté, et la fonction d'appel de service/commande de session, le serveur d'abonné mandataire et la fonction d'appel de service/commande de session, et le serveur d'application, respectivement, d'un autre côté, il est possible d'effectuer une transmission des informations de position d'utilisateur de confiance via ces interfaces.</p></abstract><description mxw-id="PDES50931181" ref-ucid="WO-2012114171-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> METHOD AND DEVICE FOR ACQUIRING AND USING LOCATION </p><p id="p0002" num="0002"> INFORMATION </p><p id="p0003" num="0003"> Field of the Invention </p><p id="p0004" num="0004"> The present invention relates to an Internet protocol multimedia subsystem and in particular to a method and device for acquiring and using location information in an Internet protocol multimedia subsystem. </p><p id="p0005" num="0005"> Background of the Invention </p><p id="p0006" num="0006"> Location information is important in charging for mobile voice and data. The location information typically includes the cell ID of a cell, or the sector ID of a sector, where a user equipment resides. </p><p id="p0007" num="0007"> In a traditional voice communication network, a Mobile Switching Center (MSC) typically provides a charging system with a cell ID or a sector ID for location-based billing and charging. The cell ID or the sector ID provided from the MSC is considered trusted. </p><p id="p0008" num="0008"> In an LTE network, a base station (eNodeB or eNB equivalent to an NB in GPRS and UMTS networks) provides a Signaling Gateway (S-GW) or a Public Data Network Gateway (PDN-GW or simply P-GW) with user location information (e.g., a User Location Identifier, ULI) via the GPRS Tunnel Protocol (GTP). However the LTE belongs to a bearer layer transparent to a core network, and therefore even if the URL is trusted user location information, it is impossible for an IMS network to acquire the trusted ULI. </p><p id="p0009" num="0009"> In an IP Multimedia Subsystem (IMS) network, cell ID information currently provided from a user equipment in the header of P-Access-Network-Information in a Session Initiation Protocol (SIP) message is acquired via the Ro interface of online charging and the Rf interface of offline charging in the Diameter protocol. The P-Access-Network-Information includes an access type and access information provided from the user equipment. However a cell ID provided from the UE can not be considered trusted. The charging research team of the 3GPP standard believes that a very serious problem may result from the use of a non-trusted cell ID for location-based billing and charging. Non-trusted location information may have a great influence upon location-based charging over the IMS network. A non-trusted cell ID can not be adopted over the IMS network because: </p><p id="p0010" num="0010"> - Current location information is required for an IMS charging record. A charging data record, i.e., a Charging Data Record (CDR) generated from the IMS, will 
<!-- EPO <DP n="3"/>-->
 include location information from the network, e.g., a cell ID, etc. This applies to a charging data record from any user and/or session. </p><p id="p0011" num="0011"> - A VoIP emergent communication service depends upon precise location information from the IMS. </p><p id="p0012" num="0012"> - Location information is required for an IMS charging system to charge for a localized service. For correct billing and charging, an Application Server (AS) in the IMS system has to be capable of acquiring location information provided from the network. </p><p id="p0013" num="0013"> In the prior art, if a subscription for a location change notice is active, then a public data network gateway or a Gateway GPRS Support Node (GGSN) can acquire current cell ID information. However this mechanism is inefficient. The use of the mechanism may result in a considerable load of messages in the Packet Switch (PS) domain. Furthermore neither the P-GW nor the GGSN can transport the acquired trusted cell ID directly to a Home Subscriber Server (HSS) or any other application server in the IMS network. </p><p id="p0014" num="0014"> For the existing standards and practical applications, charging based upon trusted location information in the SIP protocol has been absent so far in IMS and LTE networks. </p><p id="p0015" num="0015"> Summary of the Invention </p><p id="p0016" num="0016"> The invention provides a method and corresponding device for using trusted location information of a user equipment provided from a base station in an IP multimedia subsystem. </p><p id="p0017" num="0017"> Particularly a mobility management entity acquires trusted user location information from a base station and provides a home subscriber server with the trusted location information. With enhanced interfaces between the home subscriber server, on one side, and a serving-call/session control function (S-CSCF), a proxy subscriber server and the serving-call/session control function(S-CSCF), an application server, an online charging system(OCS) and an offline charging system (OFCS)respectively, on the other side, the home subscriber server can provide these network elements with the trusted user location information, and also with enhanced interfaces between the online charging system and the offline charging system, on one side, and the serving-call/session control function, the proxy subscriber server and the serving-call/session control function, and the application server respectively, on the other side, transmission of the trusted user location information via these interfaces can 
<!-- EPO <DP n="4"/>-->
 be supported. </p><p id="p0018" num="0018"> According to a first aspect of the invention, there is provided a method, in a mobility management entity of a core network, for processing location information of a user equipment, which includes the steps of acquiring the location information of the user equipment provided by a base station; and providing the home subscriber server with the location information. </p><p id="p0019" num="0019"> According to a second aspect of the invention, there is provided a method, in a home subscriber server of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, which includes the steps of: receiving the location information of the user equipment from a mobility management entity and storing the location information in a subscriber database; receiving from a first network entity related to the location information a request message for requesting the location information, wherein the request message requests the location information of the user equipment provided by a base station; and providing the location information to the first network entity requesting the location information. </p><p id="p0020" num="0020"> According to a third aspect of the invention, there is provided a method, in a second network entity of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, which includes the steps of: transmitting a request message to a home subscriber server to request the location information of the user equipment, wherein the request message requests the location information of the user equipment generated by a base station; and receiving from the home subscriber server the location information, wherein the location information includes the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </p><p id="p0021" num="0021"> According to a fourth aspect of the invention, there is provided a first device, in a mobility management entity of a core network, for processing location information of a user equipment, which includes: acquisition means for acquiring the location information of the user equipment provided by a base station; and first providing means for providing the home subscriber server with the location information. </p><p id="p0022" num="0022"> According to a fifth aspect of the invention, there is provided a second device, in a home subscriber server of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, which includes: first reception means for receiving the location information of the user equipment from a mobility management entity and storing the location information in a subscriber database, and for receiving from a first network entity related to the location 
<!-- EPO <DP n="5"/>-->
 information a request message for requesting the location information, wherein the request message requests the location information of the user equipment provided by a base station; and second providing means for providing the location information to the first network entity requesting the location information. </p><p id="p0023" num="0023"> According to a sixth aspect of the invention, there is provided a third device, in a second network entity of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, which includes: transmission means for transmitting a request message to a home subscriber server to request the location information of the user equipment, wherein the request message requests the location information of the user equipment generated by a base station; and second reception means for receiving from the home subscriber server the location information, wherein the location information includes the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </p><p id="p0024" num="0024"> With the solutions according to the embodiments of the invention, the trusted user location information can be transmitted over an IMS network, and preferably billing and charging can be based upon the trusted user location information so that charging based upon the user location information can reflect the real location of a user and hence be more accurate. </p><p id="p0025" num="0025"> Brief Description of the Drawings </p><p id="p0026" num="0026"> Other features, objects and advantages of the invention will become more apparent upon reviewing the following detailed description o f non-limiting embodiments thereof with reference to the drawings in which: </p><p id="p0027" num="0027"> Fig. l illustrates a schematic structural diagram of a network topology according to an embodiment of the invention; </p><p id="p0028" num="0028"> Fig.2 illustrates a flow chart of a systematic method according to an embodiment of the invention; and </p><p id="p0029" num="0029"> Fig.3 illustrates a block diagram of a device according to an embodiment of the invention. </p><p id="p0030" num="0030"> Wherein, identical or like reference numerals denote identical or like step features and/or means/modules. </p><p id="p0031" num="0031"> Detailed Description of the Invention </p><p id="p0032" num="0032"> Fig. l illustrates a schematic structural diagram of a network topology according to an embodiment of the invention. Fig. l illustrates a structural diagram of a 
<!-- EPO <DP n="6"/>-->
 charging system in LTE and IMS network. Particularly the LTE network is a bearer network responsible for transmission of data and signaling and includes respective gateways, e.g., an S-GW, a P-GW, etc., a base station in an access network (simply an NB in a 2G network or an evolved NB (simply eNB) in a 3G network), and a Mobility Management Entity (MME). The IMS network includes a Home Subscriber Server (HSS), a Proxy-Call/Session Control Function (P-CSCF), a Serving-Call/Session Control Function (S-CSCF), an Offline Charging System (OFCS), an Online Charging System (OCS) and an Application Server (AS). Particularly the Diameter protocol interfaces s6a, Cx and Sh related to the HSS are enhanced to support a new parameter, i.e., trusted location information. The Diameter protocols Ro interface for online charging and the Rf interface for offline charging are enhanced to support a new parameter, i.e., trusted location information. </p><p id="p0033" num="0033"> Fig.2 illustrates a flow chart of a systematic method according to an embodiment of the invention. Firstly in the step S20, the mobility management entity in the LTE network acquires a trusted cell ID from the base station through the reference point si . The trusted cell ID is an example of trusted location information of a user equipment provided from the base station. Of course those skilled in the art can appreciate the trusted location information of the user equipment may further include the sector identifier of a sector where the user equipment resides, and the trusted cell ID is given in a Global eNB ID Information Element (IE) to identify globally the base station. Table 1 depicts a specific description of the Global eNB ID IE. Reference can be made to 3 GPP TS 36.413 Section 9.2.1.37a for details. </p><p id="p0034" num="0034"> Table 1 </p><p id="p0035" num="0035"><img id="imgf000006_0001" he="66" wi="164" file="imgf000006_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0036" num="0036"> Then in the step S21, the mobility management entity stores the trusted cell ID and transmits the trusted cell ID to the home subscriber server through the reference point s6a. 
<!-- EPO <DP n="7"/>-->
 Then in the step S22, the home subscriber server updates and stores the user cell ID in a database. </p><p id="p0037" num="0037"> Specifically, Table 2 depicts subscriber profile data of the home subscriber server to support register an LTE user equipment. The s6a interface and the subscriber database of the home subscriber server are enhanced to support a service and charging based upon trusted location information. </p><p id="p0038" num="0038"> Table 2 </p><p id="p0039" num="0039"><img id="imgf000007_0001" he="103" wi="164" file="imgf000007_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0040" num="0040"> Particularly the cell ID is a trusted cell ID of the user equipment. A format of ID can be as depicted in Table 1. </p><p id="p0041" num="0041"> In another embodiment, the home subscriber server stores a timestamp for receiving the trusted cell ID in the database, where the timestamp identifies the time when the cell ID of the user equipment is received and stored by the home subscriber server. </p><p id="p0042" num="0042"> Then a first network entity transmits a request message to the home subscriber server to request location information of the user equipment, wherein the request message requests the location information of the user equipment generated by the base station. The first network entity is related to the location information and uses the location information to perform a relevant processing operation. The first network entity includes a proxy-call/session control function, a serving-call/session control function, an 
<!-- EPO <DP n="8"/>-->
 application server, an offline charging system and an online charging system. Specific descriptions will be given below respectively with respect to the different network entities. </p><p id="p0043" num="0043"> Firstly interaction between the serving-call/session control function and the home subscriber server, i.e., the Cx Diameter interface between the serving-call/session control function and the home subscriber server, will be described as an example. </p><p id="p0044" num="0044"> Firstly in the step S23, the serving-call/session control function requests in a Diameter Cx Server Assignment Request (SAR) command the home subscriber server for profile information of a user. </p><p id="p0045" num="0045"> Then in the step S24, the home subscriber server responds with a Cx Server Assignment Answer (SAA) command including the trusted cell ID or sector ID acquired in the step S22 (or the location information in the Attribute Value Pair (A VP)). </p><p id="p0046" num="0046"> The Cx interface data reference (see a user profile in Table E. l of 3GPP TS 29.228) shall be enhanced to support a new data reference value, that is, the new data reference value shall be included in information transmitted via the Cx interface, and for example, an XML label corresponding to the new data reference value is represented as a trustedCelllD, and an operation allowed for the new data reference value is SAA. </p><p id="p0047" num="0047"> Then in the step S25, the S-CSCF receives Cx SAA with the trustedCelllD and stores it together with other UE data. </p><p id="p0048" num="0048"> Then in the step S26, the S-CSCF receives a Session Initiation Protocol (SIP) invite m e s s a g e fr o m t h e u s e r e qu i p m e n t , w h e r e t h e h e a der of P-Access-Network-Information in the Session Initiation Protocol invite message includes the cell identifier. </p><p id="p0049" num="0049"> Then in the step S27, the S-CSCF judges whether the cell identifier in the header of P-Access-Network-Information is consistent with the cell identifier or the sector identifier included in the location information stored in the user profile database, which is received from the home subscriber server. </p><p id="p0050" num="0050"> If both are consistent, then in the step S28, the S-CSCF transmits the cell identifier directly to a next-hop network device. </p><p id="p0051" num="0051"> In another embodiment, the S-CSCF also transmits the timestamp corresponding to the cell identifier to the next-hop network device in addition to the cell identifier. The timestamp indicates the time when the HSS receives and stores the cell identifier in the local database, and the HSS transmits the timestamp to the S-CSCF in a Cx SAA message. 
<!-- EPO <DP n="9"/>-->
 Otherwise, when the two identifiers are inconsistent, the S-CSCF modifies the cell identifier in the header of P-Access-Network-Information of the Session Initiation Protocol invitate message to the cell identifier or the sector identifier included in the location information received from the home subscriber server and transmits the modified Session Initiation Protocol invitate message to the next-hop network device. </p><p id="p0052" num="0052"> In another embodiment, the S-CSCF also transmits the timestamp corresponding to the cell identifier to the next-hop network device in addition to the cell identifier. The timestamp indicates the time when the HSS receives and stores the cell identifier in the local database, and the HSS transmits the timestamp to the S-CSCF in a Cx S AA message. </p><p id="p0053" num="0053"> In this embodiment, the step 26 proceeds following the step S25, and the orders of these stems is merely illustrative. Those skilled in the art can appreciate that the S-CSCF may initiate a request to the home subscriber server at any time when it requests the home subscriber server for trusted location information instead of following the step S25. </p><p id="p0054" num="0054"> Similarly the P-CSCF may alternatively acquire the trusted user location information from the HSS through the S-CSCF. </p><p id="p0055" num="0055"> Furthermore, interaction between the application server and the home subscriber server is similar to interaction between the serving-call/session control function and the home subscriber. The Sh Diameter interface between the application server and the home subscriber server will be detailed below. </p><p id="p0056" num="0056"> Firstly in the step S23', the application server requests in a Diameter Sh User Data Request (UDR) command the home subscriber server for user data. </p><p id="p0057" num="0057"> Then in the step 24', the home subscriber server responds with a User Data Answer (UDA) including trusted location information in the user data AVP. </p><p id="p0058" num="0058"> The Sh interface data reference (see Table 7.6.1 of 3GPP 29.328) shall be enhanced to support a new data reference value, that is, the new data reference value shall be included in information transmitted via the Sh interface, and for example, an XML label corresponding to the new data reference value is represented as a trustedCelllD, and an operation allowed for the new data reference value is Sh-Pull (an Sh Diameter user data request). </p><p id="p0059" num="0059"> Then in the step S25 ' , the application server receives the Sh UDA with the trustedCelllD in the user data AVP and stores it together with other user profile data. </p><p id="p0060" num="0060"> Then, the step that the application server verifies the cell ID in the SIP request 
<!-- EPO <DP n="10"/>-->
 for consistency with the cell ID acquired from the home subscriber server is same as the corresponding step described above taking the S-CSCF as an example, and therefore a repeated description thereof will be omitted here. </p><p id="p0061" num="0061"> Furthermore, the Sh interfaces between the online charging system and the home subscriber server and between the offline charging system and the home subscriber server for billing and charging based upon the location information shall also be enhanced. </p><p id="p0062" num="0062"> Specifically in some IMS billing scenarios (e.g., an incoming call, etc.), no location information is available in an online charging Diameter Ro request when the user has not been called. When the online charging system performs charging based upon location information, the online charging system firstly may transmit a request to the home subscriber server to acquire user location information, for example, the online charging system transmits a UDR to request trusted location information of the user, in the step S23". </p><p id="p0063" num="0063"> Then in the step S24", the home subscriber server responds correspondingly with an UDA including the trusted location information in the user data AVP. </p><p id="p0064" num="0064"> The Sh interface data reference between the HSS and the online charging system (see Table 7.6.1 of 3GPP 29.328) shall be enhanced to support a new data reference value, and an XML label is a trustedCelllD. An allowed operation is Sh-Pull (an Sh Diameter user data request). </p><p id="p0065" num="0065"> Then in the step S25", the online charging system receives the Sh UDA with the trustedCelllD in the user data AVP and stores it together with other UE data. </p><p id="p0066" num="0066"> Thereafter the online charging system uses the trustedCelllD for location-based charging for the incoming call. </p><p id="p0067" num="0067"> In another embodiment, the online charging system checks all the time the timestamp of the trustedCelllD and performs location-based charging and billing based upon the latest information. The online charging system can set policy rules for the when the trustedCelllD expires for respective users, IP-Connectivity Access Network (IP-CAN) and networks. </p><p id="p0068" num="0068"> Similarly in offline charging, the offline charging system requires trusted location information when the offline charging system receives no trustedCelllD in a Diameter Rf Accounting Request (ACR). Therefore in the step S23", the offline charging system can transmit a request to the HSS to acquire user location information. Then in the step S24", the HSS responds with a UDA including the trusted location 
<!-- EPO <DP n="11"/>-->
 information in the user data AVP. Then in the step S25", the offline charging system acquires the trusted location information. </p><p id="p0069" num="0069"> Furthermore the Diameter Ro and Rf interfaces also shall be enhanced. </p><p id="p0070" num="0070"> For example, in the step S28, the S-CSCF forwards the trusted location information to a next-hop network device which is the online charging system, that is, the S-CSCF forwards the trusted location information to the online charging system through a gateway (e.g., an IP Multimedia Subsystem-Gateway Function, IMS-GWF, etc.) An interface between the S-CSCF and the IMS-GWF is the ISC interface, and an interface between the IMS-GWF and the OSC is the Ro interface. The IMS-GWF performs protocol translation between the S-CSCF and the OSC. In Fig. l, we have omitted the IMS-GWF between the S-CSCF and the OSC as well as corresponding interfaces, and only the Ro interface has been described for the sake of convenience. </p><p id="p0071" num="0071"> That is, the Ro interface has been extended to support a new group of parameters AVP-Trusted-Location-Information including the following sub-AVP: </p><p id="p0072" num="0072"> A trusted cell ID and a timestamp, where the timestamp represents the time when the S-CSCF receives and stores the trusted cell ID in local data base . </p><p id="p0073" num="0073"> In the foregoing embodiment, only the improved Ro interface between the S-CSCF and the online charging system has been described. Furthermore the LTE network element of P-GW and the IMS network element of AS may also transmit the trusted location information AVP to the online charging system via the Ro interface for online charging, and an interface between the online charging system and these network elements is also the improved Ro interface, therefore a repeated description thereof will be omitted here. </p><p id="p0074" num="0074"> Similarly the LTE network elements of S-GW and P-GW and the IMS network elements of S-CSCF, P-CSCF and AS may also transmit the trusted location information AVP to the offline charging system via the Rf interface for offline charging, and the Rf interface is improved similarly to the Ro interface, therefore a repeated description thereof will be omitted here. </p><p id="p0075" num="0075"> Then in the step S29, the online charging system performs location-based online charging based upon the value in the recently acquired trusted location information AVP according to the timestamp. </p><p id="p0076" num="0076"> Furthermore the offline charging system may also include the value in the recently acquired trusted location information AVP into a Charging Data Record (CDR) for offline charging. 
<!-- EPO <DP n="12"/>-->
 The invention has been detailed above from the perspective of the systematic method and will be described below in a block diagram of a device. </p><p id="p0077" num="0077"> Fig.3 illustrates a block diagram of a device according to an embodiment of the invention. Particularly a first device 10 is arranged in a mobility management entity to process location information of a user equipment. The first device 10 includes acquisition means 100 and first providing means 101, where the acquisition means 100 is configured to acquire the location information of the user equipment provided by a base station, and the first providing means 101 is configured to provide the home subscriber server with the location information. </p><p id="p0078" num="0078"> A second device 200 is arranged in a home subscriber server to process location information of a user equipment. The second device 200 includes first reception means 200 and second providing means 201, where the first reception means 200 is configured to receive the location information of the user equipment from a mobility management entity and store the location information in a subscriber database, and to receive from a first network entity related to the location information a request message for requesting the location information, where the request message requests the location information of the user equipment provided by a base station, and the second providing means 201 is configured to provide the location information to the first network entity requesting the location information. </p><p id="p0079" num="0079"> The first network entity related to the location information includes any one or more of a proxy-call/session control function, a serving-call/session control function, an application server, an offline charging system and an online charging system. </p><p id="p0080" num="0080"> A third device 30 is arranged in a second network entity of a core network to process location information of a user equipment. The third device 30 includes transmission means 300 and second reception means 301, where the transmission means 300 is configured to transmit a request message to a home subscriber server to request the location information of the user equipment, where the request message requests the location information of the user equipment generated by a base station, and the second reception means 301 is configured to receive from the home subscriber server the location information, where the location information includes the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </p><p id="p0081" num="0081"> The second network entity related to the location information includes any one or more of a proxy-call/session control function, a serving-call/session control function, an application server, an offline charging system and an online charging system. </p><p id="p0082" num="0082"> Those ordinarily skilled in the art can appreciate and make other modifications 
<!-- EPO <DP n="13"/>-->
 to the disclosed embodiments upon reviewing the description, the disclosure, the drawings and the appended claims. In the claims, the term "comprising/comprises" will not preclude another element(s) and step(s), and the term "a/an" will not preclude plurality. In a practical application of the invention, an element can perform the functions of a plurality of technical features recited in a claim. Any reference numeral in the claims will not be construed as liming the scope of the invention. 
</p></description><claims mxw-id="PCLM44727131" ref-ucid="WO-2012114171-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="14"/>-->CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method, in a mobility management entity of a core network, for processing location information of a user equipment, comprising the steps of: </claim-text><claim-text> A. acquiring the location information of the user equipment provided by a base station; and </claim-text><claim-text> B. providing the home subscriber server with the location information. </claim-text></claim><claim id="clm-0002" num="2"><claim-text> 2. The method according to claim 1, wherein the location information comprises the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </claim-text></claim><claim id="clm-0003" num="3"><claim-text> 3. A method, in a home subscriber server of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, comprising the steps of: </claim-text><claim-text> I. receiving the location information of the user equipment from a mobility management entity and storing the location information in a subscriber database; </claim-text><claim-text> II. receiving from a first network entity related to the location information a request message for requesting the location information, wherein the request message requests the location information of the user equipment provided by a base station; and</claim-text><claim-text>III. providing the location information to the first network entity requesting the location information. </claim-text></claim><claim id="clm-0004" num="4"><claim-text> 4. The method according to claim 3, wherein the step III further comprises providing the location information to the first network entity requesting the location information in a response message, wherein the response message comprises a cell identity indicating a cell, or a sector identity indicating a sector, where the user equipment resides. </claim-text></claim><claim id="clm-0005" num="5"><claim-text> 5. The method according to claim 4, wherein the response message further comprises an extensible markup language label indicating the cell identity or the sector identity as a trusted cell or sector identity and/or a timestamp related to the location information, wherein the timestamp represents the time when the location information of the user equipment is received and stored by the home subscriber server. </claim-text></claim><claim id="clm-0006" num="6"><claim-text> 6. The method according to any one of claims 3 to 5, wherein the first network entity related to the location information comprises any one or more of: </claim-text><claim-text> - a proxy-call/session control function; <!-- EPO <DP n="15"/>--> - a serving-call/session control function; </claim-text><claim-text> - an application server; </claim-text><claim-text> - an offline charging system; and </claim-text><claim-text> - an online charging system. </claim-text></claim><claim id="clm-0007" num="7"><claim-text> 7. A method, in a second network entity of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, comprising the steps of: </claim-text><claim-text> a. transmitting a request message to a home subscriber server to request the location information of the user equipment, wherein the request message requests the location information of the user equipment generated by a base station; and </claim-text><claim-text> b. receiving from the home subscriber server the location information, wherein the location information comprises the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </claim-text></claim><claim id="clm-0008" num="8"><claim-text> 8. The method according to claim 7, wherein the second network entity comprises any one or more of: </claim-text><claim-text> - a proxy-call/session control function; </claim-text><claim-text> - a serving-call/session control function; </claim-text><claim-text> - an application server; </claim-text><claim-text> - an offline charging system; and </claim-text><claim-text> - an online charging system. </claim-text></claim><claim id="clm-0009" num="9"><claim-text> 9. The method according to claim 7, wherein when the second network device comprises any one of a proxy-call/session control function, a serving-call/session control function and an application server, the method further comprises steps after the step b: </claim-text><claim-text> - receiving from the user equipment a session initiation protocol invite message with its private access network information header comprising a cell identity; </claim-text><claim-text> - determining whether the cell identity in the private access network information header is identical to the cell identity or the sector identity comprised in the location information received by the home subscriber server; and </claim-text><claim-text> - if they are identical, transmitting the cell identity directly to a next-hop network device; <!-- EPO <DP n="16"/>--> - otherwise, modifying the cell identity in the private access network information header of the session initiation protocol invite message to the cell identity or the sector identity comprised in the location information received by the home subscriber server, and transmitting the modified session initiation protocol invite message to the next-hop network device. </claim-text></claim><claim id="clm-0010" num="10"><claim-text> 10. The method according to claim 7, wherein when the second network device comprises any one of a proxy-call/session control function, a serving-call/session control function and an application server, the method further comprises a step after the step b: </claim-text><claim-text> - transmitting the location information of the user equipment and a timestamp related to the location information to an online charging system and/or an offline charging system, wherein the timestamp represents the time when the location information of the user equipment is received and stored by the home subscriber server. </claim-text></claim><claim id="clm-0011" num="11"><claim-text> 11. A first device, in a mobility management entity of a core network, for processing location information of a user equipment, comprising: </claim-text><claim-text> acquisition means for acquiring the location information of the user equipment provided by a base station; and </claim-text><claim-text> first providing means for providing the home subscriber server with the location information. </claim-text></claim><claim id="clm-0012" num="12"><claim-text> 12. A second device, in a home subscriber server of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, comprising: </claim-text><claim-text> first reception means for receiving the location information of the user equipment from a mobility management entity and storing the location information in a subscriber database, and for receiving from a first network entity related to the location information a request message for requesting the location information, wherein the request message requests the location information of the user equipment provided by a base station; and </claim-text><claim-text> second providing means for providing the location information to the first network entity requesting the location information. </claim-text></claim><claim id="clm-0013" num="13"><claim-text> 13. The second device according to claim 12, wherein the first network entity related to the location information comprises any one or more of: </claim-text><claim-text> - a proxy-call/session control function; <!-- EPO <DP n="17"/>--> - a serving-call/session control function; </claim-text><claim-text> - an application server; </claim-text><claim-text> - an offline charging system; and </claim-text><claim-text> - an online charging system. </claim-text></claim><claim id="clm-0014" num="14"><claim-text> 14. A third device, in a second network entity of a core network of an internet protocol multimedia subsystem, for processing location information of a user equipment, comprising: </claim-text><claim-text> transmission means for transmitting a request message to a home subscriber server to request the location information of the user equipment, wherein the request message requests the location information of the user equipment generated by a base station; and </claim-text><claim-text> second reception means for receiving from the home subscriber server the location information, wherein the location information comprises the cell identity of a cell, or the sector identity of a sector, where the user equipment resides. </claim-text></claim><claim id="clm-0015" num="15"><claim-text> 15. The third device according to claim 14, wherein the second network entity comprises any one or more of: </claim-text><claim-text> - a proxy-call/session control function; </claim-text><claim-text> - a serving-call/session control function; </claim-text><claim-text> - an application server; </claim-text><claim-text> - an offline charging system; and </claim-text><claim-text> - an online charging system. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
