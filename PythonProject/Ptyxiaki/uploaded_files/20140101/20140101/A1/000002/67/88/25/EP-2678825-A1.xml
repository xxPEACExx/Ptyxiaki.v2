<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678825-A1" country="EP" doc-number="2678825" kind="A1" date="20140101" family-id="44359521" file-reference-id="318301" date-produced="20180823" status="corrected" lang="FR"><bibliographic-data><publication-reference fvid="146550698" ucid="EP-2678825-A1"><document-id><country>EP</country><doc-number>2678825</doc-number><kind>A1</kind><date>20140101</date><lang>FR</lang></document-id></publication-reference><application-reference ucid="EP-12705144-A" is-representative="NO"><document-id mxw-id="PAPP154824621" load-source="docdb" format="epo"><country>EP</country><doc-number>12705144</doc-number><kind>A</kind><date>20120222</date><lang>FR</lang></document-id><document-id mxw-id="PAPP220438217" load-source="docdb" format="original"><country>EP</country><doc-number>12705144.9</doc-number><date>20120222</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140446203" ucid="EP-2012052973-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>2012052973</doc-number><kind>W</kind><date>20120222</date></document-id></priority-claim><priority-claim mxw-id="PPC140454987" ucid="FR-1151499-A" load-source="docdb"><document-id format="epo"><country>FR</country><doc-number>1151499</doc-number><kind>A</kind><date>20110224</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988138896" load-source="docdb">G06T   7/00        20060101AFI20120913BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1641024529" load-source="docdb" scheme="CPC">H04N  13/246       20180501 FI20180512BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1642417252" load-source="docdb" scheme="CPC">H04N  13/239       20180501 LI20180510BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1832250363" load-source="docdb" scheme="CPC">G06T2207/10012     20130101 LA20170406BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1832250364" load-source="docdb" scheme="CPC">G06T   7/85        20170101 LI20170406BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184578" lang="DE" load-source="patent-office">VERFAHREN ZUR KALIBRIERUNG EINER STEREOKOPISCHEN FOTOGRAFIEVORRICHTUNG</invention-title><invention-title mxw-id="PT132184579" lang="EN" load-source="patent-office">METHOD FOR CALIBRATING A STEREOSCOPIC PHOTOGRAPHY DEVICE</invention-title><invention-title mxw-id="PT132184580" lang="FR" load-source="patent-office">PROCÉDÉ DE CALIBRAGE D'UN DISPOSITIF DE PRISE DE VUE STÉRÉOSCOPIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918153718" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MOBICLIP</last-name><address><country>FR</country></address></addressbook></applicant><applicant mxw-id="PPAR918138329" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MOBICLIP</last-name></addressbook></applicant><applicant mxw-id="PPAR918994282" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Mobiclip</last-name><iid>101166426</iid><address><street>128 Rue de Rivoli</street><city>75001 Paris</city><country>FR</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918150594" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DELATTRE ALEXANDRE</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR918160085" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DELATTRE, ALEXANDRE</last-name></addressbook></inventor><inventor mxw-id="PPAR918982439" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>DELATTRE, ALEXANDRE</last-name><address><street>23bis rue Arthur Petit</street><city>F-78220 Viroflay</city><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR918135595" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>LARRIEU JEROME</last-name><address><country>FR</country></address></addressbook></inventor><inventor mxw-id="PPAR918152005" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>LARRIEU, JEROME</last-name></addressbook></inventor><inventor mxw-id="PPAR918987647" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>LARRIEU, Jérôme</last-name><address><street>Maison Ondoenia Quartier Hasquette</street><city>F-64240 Hasparren</city><country>FR</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918990490" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Maillet, Alain</last-name><suffix>et al</suffix><iid>101205837</iid><address><street>Cabinet le Guen Maillet 5, Place Newquay B.P. 70250</street><city>35802 Dinard Cedex</city><country>FR</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="EP-2012052973-W"><document-id><country>EP</country><doc-number>2012052973</doc-number><kind>W</kind><date>20120222</date><lang>FR</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012113810-A1"><document-id><country>WO</country><doc-number>2012113810</doc-number><kind>A1</kind><date>20120830</date><lang>FR</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548915290" load-source="docdb">AL</country><country mxw-id="DS548916502" load-source="docdb">AT</country><country mxw-id="DS548915291" load-source="docdb">BE</country><country mxw-id="DS548813014" load-source="docdb">BG</country><country mxw-id="DS548922832" load-source="docdb">CH</country><country mxw-id="DS548860781" load-source="docdb">CY</country><country mxw-id="DS548916503" load-source="docdb">CZ</country><country mxw-id="DS548915292" load-source="docdb">DE</country><country mxw-id="DS548860782" load-source="docdb">DK</country><country mxw-id="DS548860783" load-source="docdb">EE</country><country mxw-id="DS548913546" load-source="docdb">ES</country><country mxw-id="DS548813015" load-source="docdb">FI</country><country mxw-id="DS548813016" load-source="docdb">FR</country><country mxw-id="DS548915293" load-source="docdb">GB</country><country mxw-id="DS548860784" load-source="docdb">GR</country><country mxw-id="DS548915298" load-source="docdb">HR</country><country mxw-id="DS548916504" load-source="docdb">HU</country><country mxw-id="DS548922833" load-source="docdb">IE</country><country mxw-id="DS548860785" load-source="docdb">IS</country><country mxw-id="DS548813017" load-source="docdb">IT</country><country mxw-id="DS548860786" load-source="docdb">LI</country><country mxw-id="DS548896328" load-source="docdb">LT</country><country mxw-id="DS548833580" load-source="docdb">LU</country><country mxw-id="DS548896329" load-source="docdb">LV</country><country mxw-id="DS548896346" load-source="docdb">MC</country><country mxw-id="DS548833581" load-source="docdb">MK</country><country mxw-id="DS548833582" load-source="docdb">MT</country><country mxw-id="DS548915299" load-source="docdb">NL</country><country mxw-id="DS548813018" load-source="docdb">NO</country><country mxw-id="DS548896347" load-source="docdb">PL</country><country mxw-id="DS548922854" load-source="docdb">PT</country><country mxw-id="DS548915300" load-source="docdb">RO</country><country mxw-id="DS548922855" load-source="docdb">RS</country><country mxw-id="DS548896348" load-source="docdb">SE</country><country mxw-id="DS548913547" load-source="docdb">SI</country><country mxw-id="DS548813019" load-source="docdb">SK</country><country mxw-id="DS548896349" load-source="docdb">SM</country><country mxw-id="DS548860787" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99625617" ref-ucid="WO-2012113810-A1" lang="EN" load-source="patent-office"><p num="0000">The invention relates to the field of stereoscopic photography devices, and more specifically to the calibration thereof. The invention further relates to a method for calibrating a stereoscopic photography device that calculates a set of image correction parameters. Said parameters are classed in order of importance. The first-order correction parameters are estimated first, followed by the second-order correction parameters. Advantageously, the first-order parameters are refined, taking into account estimation values of the second-order parameters. Advantageously, a measurement of the relevance of the scene is carried out before the actual calibration.</p></abstract><abstract mxw-id="PA99824136" ref-ucid="WO-2012113810-A1" lang="EN" source="national office" load-source="docdb"><p>The invention relates to the field of stereoscopic photography devices, and more specifically to the calibration thereof. The invention further relates to a method for calibrating a stereoscopic photography device that calculates a set of image correction parameters. Said parameters are classed in order of importance. The first-order correction parameters are estimated first, followed by the second-order correction parameters. Advantageously, the first-order parameters are refined, taking into account estimation values of the second-order parameters. Advantageously, a measurement of the relevance of the scene is carried out before the actual calibration.</p></abstract><abstract mxw-id="PA99625618" ref-ucid="WO-2012113810-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention concerne le domaine des dispositifs de prise de vue stéréoscopique et plus précisément leur calibrage. L'invention propose un procédé de calibrage d'un dispositif de prise de vue stéréoscopique qui calcule un ensemble de paramètres de correction des images. Ces paramètres sont classés selon un ordre d'importance. Les paramètres de correction de premier ordre sont estimés dans un premier temps, les paramètres de correction de second ordre dans un second temps. Avantageusement,les paramètres de premier ordre sont affinés en tenant compte des valeurs d'estimation des paramètres de second ordre. Avantageusement, une mesure de la pertinence de la scène est effectuée préalablement au calibrage proprement dit.</p></abstract><abstract mxw-id="PA99824137" ref-ucid="WO-2012113810-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention concerne le domaine des dispositifs de prise de vue stéréoscopique et plus précisément leur calibrage. L'invention propose un procédé de calibrage d'un dispositif de prise de vue stéréoscopique qui calcule un ensemble de paramètres de correction des images. Ces paramètres sont classés selon un ordre d'importance. Les paramètres de correction de premier ordre sont estimés dans un premier temps, les paramètres de correction de second ordre dans un second temps. Avantageusement,les paramètres de premier ordre sont affinés en tenant compte des valeurs d'estimation des paramètres de second ordre. Avantageusement, une mesure de la pertinence de la scène est effectuée préalablement au calibrage proprement dit.</p></abstract><description mxw-id="PDES50931324" ref-ucid="WO-2012113810-A1" lang="FR" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> Procédé de calibrage d'un dispositif de prise de vue stéréo scopique </p><p id="p0002" num="0002">La présente invention concerne le domaine des dispositifs de prise de vue stéréo scopique et plus précisément leur calibrage. </p><p id="p0003" num="0003"> Les dispositifs de prise de vue stéréo scopique tendent à se généraliser et peuvent aujourd'hui être commercialisés à un coût raisonnable. De ce fait, ces dispositifs font leur apparition dans nombre d'appareils grand public tels que des caméscopes, des appareils photographiques et l'on entrevoit leur incorporation dans des appareils tels que les téléphones mobiles ou les consoles de jeux portables. Autrefois réservés à du matériel professionnel, ils sont aujourd'hui réalisés à l'aide de composants à bas coût. </p><p id="p0004" num="0004"> L' architecture générale de ces dispositifs est illustrée par la Fig 1. Ils sont constitués d'un support 1.1 intégré au produit qui porte deux caméras 1.2 et 1.3. Ces caméras sont typiquement espacées de quelques centimètres et doivent être idéalement strictement identiques. Elles doivent également avoir leurs axes optiques 1.5 et 1.6 idéalement parallèles. Lorsque ces conditions sont remplies, il est alors possible de prendre des images d'une scène 1.4 à l'aide du système. On obtient une image gauche prise par la caméra 1.2 et une image droite prise par la caméra 1.3. Les objets de la scène 1.4 situés suffisamment loin pour être considérés comme à l'infini sont alors 
<!-- EPO <DP n="4"/>-->
 parfaitement superposables dans les deux images. Les objets plus proches subissent une parallaxe se traduisant par un décalage horizontal en translation entre les deux images. Cette translation est d'autant plus importante que l'objet est proche des caméras en restant inférieur à la distance entre les caméras. </p><p id="p0005" num="0005"> Dans ce domaine de produits grand public produits à grande échelle et pour un coût réduit, les exigences de qualité sont moindres que dans le domaine professionnel. De ce fait, les caméras utilisées ne sont pas strictement identiques et le positionnement des deux caméras subit également des tolérances assez larges. </p><p id="p0006" num="0006"> De plus, l'aspect grand public des produits visés entraîne une grande variabilité au cours du temps de l'environnement des appareils qui peuvent être soumis à des chocs et à de grandes variations de température. Ces événements ont des conséquences sur les paramètres physiques des capteurs et leur positionnement. </p><p id="p0007" num="0007"> Tous ces phénomènes ont pour conséquence qu'il est difficile d'obtenir une information stéréo scopique fiable des images gauche et droite prises par les caméras. </p><p id="p0008" num="0008"> L'invention vise à résoudre les problèmes précédents en proposant un procédé de calibrage d'un dispositif de prise de vue stéréo scopique qui calcule un ensemble de paramètres de correction des images. Ces paramètres sont classés selon un ordre d'importance. Les paramètres de correction de premier ordre sont estimés dans un premier temps, les paramètres de correction de second ordre dans un second temps. Avantageusement, les paramètres de premier ordre sont affinés en tenant compte des valeurs d'estimation des paramètres de second ordre. Avantageusement, une mesure de la pertinence de la scène est effectuée préalablement au calibrage proprement dit. </p><p id="p0009" num="0009"> L'invention concerne un procédé de calibrage d'un dispositif de prise de vue stéréo scopique disposant de deux caméras pour la capture d'une image droite et d'une image gauche, ledit dispositif présentant une pluralité de défauts, chacun de ces défauts pouvant être corrigé par application d'une transformation à au moins une des deux images capturées, qui comporte, lesdits défauts étant hiérarchisés en au moins deux ordres une étape d'estimation des paramètres de correction des défauts d'un premier ordre donné ; une étape d'estimation des paramètres de correction des défauts d'un second ordre supérieur au premier ordre et une nouvelle étape d'estimation des paramètres de correction des défauts du premier ordre, l'estimation des paramètres du second ordre étant utilisée pour une nouvelle estimation des paramètres de correction des défauts du premier ordre. 
<!-- EPO <DP n="5"/>-->
 Selon un mode particulier de réalisation de l'invention, les défauts que l'on choisit de corriger sont choisis parmi : un décalage en translation global de l'image ; une déformation en trapèze horizontal et vertical ; une rotation ; un facteur de zoom et une distorsion en barillet ou en coussinet. </p><p id="p0010" num="0010"> Selon un mode particulier de réalisation de l'invention, le défaut de premier ordre consiste en un décalage en translation global de l'image ; le défaut de second ordre consiste en une déformation en trapèze horizontal et vertical ; le défaut de troisième ordre consiste en une rotation et le défaut de quatrième ordre consiste en un facteur de zoom. </p><p id="p0011" num="0011"> Selon un mode particulier de réalisation de l'invention, le procédé comporte en outre une étape de calcul d'un indice de la pertinence de la scène. </p><p id="p0012" num="0012"> Selon un mode particulier de réalisation de l'invention, le calcul d'un indice de pertinence de la scène comprend : une étape de calcul des histogrammes des images droite et gauche ; une étape de calcul des parallaxes sur une pluralité de zones des images gauche et droite ; une étape de calcul d'un indice de détails de la scène en fonction de l'étalement des histogrammes et des indices de corrélation entre les zones des images droite et gauche ; une étape de calcul d'un indice de distance qui sera d'autant plus grand que les indices de parallaxes sont uniformément faibles et une étape de formation de l'indice de pertinence en fonction de l'indice de détail et de l'indice de distance. </p><p id="p0013" num="0013"> Les caractéristiques de l'invention mentionnées ci-dessus, ainsi que d'autres, apparaîtront plus clairement à la lecture de la description suivante d'un exemple de réalisation, ladite description étant faite en relation avec les dessins joints, parmi lesquels : </p><p id="p0014" num="0014"> La Fig. 1 illustre l ' architecture générale d'un dispositif de prise de vue stéréo scopique. </p><p id="p0015" num="0015"> La Fig. 2 illustre l'organigramme du procédé de calibrage selon un mode de réalisation de l'invention. </p><p id="p0016" num="0016"> La Fig. 3 illustre l'organigramme de l'étape de mesure de la pertinence de la scène selon un mode de réalisation de l'invention. </p><p id="p0017" num="0017"> La Fig. 4 illustre le découpage de l'image utilisée dans un mode de réalisation de la mesure de pertinence. </p><p id="p0018" num="0018"> La Fig. 5 illustre le procédé de calcul de corrélation rapide utilisé dans un mode de réalisation de la mesure de pertinence. 
<!-- EPO <DP n="6"/>-->
 Un système de prise de vue stéréo scopique réel est sujet à un certain nombre d'imperfections physiques ayant des conséquences plus ou moins fortes sur les images capturées. Le placement physique des caméras sur le support n'est jamais parfaitement aligné ce qui induit que les axes optiques ne sont pas parfaitement parallèles. Pour pouvoir exploiter la stéréoscopie, il importe donc de corriger les effets dus à ces imperfections physiques. </p><p id="p0019" num="0019"> L'invention est basée sur le fait que les différents effets à corriger n'ont pas tous le même impact sur la stéréoscopie. Certains sont plus importants que d'autres. On distingue ainsi plusieurs ordres dans les diverses distorsions constatées dans les images capturées par rapport aux images qui seraient obtenues par un système idéal. On parle de distorsions de premier ordre, de second ordre, de troisième ordre et de quatrième ordre. </p><p id="p0020" num="0020"> On peut noter que, selon le processus de fabrication des caméras, l'ampleur et donc l'ordre de grandeur et donc de correction de chaque distorsion peut varier. On pourra donc avantageusement changer cet ordre de correction en fonction du besoin de correction du moment. Certaines distorsions n'apparaissant pas sur certaines caméras, on pourra avantageusement éviter de les corriger. D'autres distorsions « commutent » naturellement : l'estimation et la correction de la rotation et du zoom peuvent être réalisées de façon indépendante, donc dans un ordre indifférent. </p><p id="p0021" num="0021"> Le procédé de calibrage consiste donc à estimer les paramètres de correction que l'on doit appliquer aux images capturées pour obtenir des images qui soient le plus proches que l'on puisse atteindre des images qui seraient obtenues par un système de prise de vue qui n'aurait aucun défaut. </p><p id="p0022" num="0022"> Pour ce faire, on capture une scène qui doit avoir de bonnes propriétés. Tout d'abord, la scène doit être suffisamment éloignée pour que les images droite et gauche se superposent. On a vu que les points d'un objet au loin se superposent dans les deux images. Les défauts du système de prise de vue vont fausser cette superposition que l'on va chercher à retrouver. La scène doit aussi proposer un niveau de détails permettant la recherche d'une zone dans l'image. Une zone de couleur et de luminosité uniformes ne permettrait pas de mesurer les distorsions que l'on cherche à corriger. Elle doit aussi être exempte d'objets proches dont la parallaxe viendrait perturber les mesures. </p><p id="p0023" num="0023"> Le défaut de premier ordre consiste en un décalage en translation global de l'image. Il est dû au fait que les axes optiques n'étant pas parfaitement parallèles, la 
<!-- EPO <DP n="7"/>-->
 portion de scène capturée par la caméra gauche 1.2 ne correspond pas exactement à la portion de scène capturée par la caméra droite 1.3. On cherche donc à déterminer un paramètre de translation horizontal ΔΧ et un paramètre de translation vertical ΔΥ permettant de recaler les deux images. Cette détermination consiste à calculer, lors d'une étape 2.1, le décalage pour lequel les images sont corrélées. Pour ce faire, l'exemple de réalisation calcule pour un ensemble de valeurs de translation un coefficient de corrélation entre l'image droite et l'image gauche. Par exemple, on calcule la somme des valeurs absolues des différences de luminosité en chaque point de l'image. Les valeurs de translation pour lesquelles cette somme est minimale nous donnent une première estimation des paramètres de premier ordre. </p><p id="p0024" num="0024"> Le défaut de second ordre consiste en une déformation en trapèze, horizontal et vertical, due à la déformation de perspective induite par le non-parallélisme des axes optiques des deux caméras. Cette déformation se traduit par un rapport différent de un entre le bord gauche et le bord droit de l'image pour le trapèze horizontal et entre le bord haut et le bord bas pour le trapèze vertical. Ces paramètres sont estimés lors de l'étape 2.2 par calcul d'un coefficient de corrélation pour diverses valeurs de trapèze testées. Avantageusement, le trapèze étant dû à un effet de perspective résultant d'un défaut de parallélisme des axes optiques des caméras et ce défaut entraînant un décalage en translation associé, on associe les corrections de premier ordre de décalage en translation et les corrections de second ordre liées au trapèze pour l'estimation de ces paramètres. On applique alors à une image une translation et l'effet de trapèze associé lors des tests visant à l'estimation des valeurs de ces paramètres pour lesquels la corrélation est la plus forte entre les images. </p><p id="p0025" num="0025"> Le troisième ordre est la prise en compte d'une possible rotation d'une caméra par rapport à l'autre autour de leur axe optique. Cette rotation entraîne une rotation d'une des deux images par rapport à l'autre autour du centre de l'image situé sur le trajet de l'axe optique de la caméra. Lors de l'étape 2.3, on estime ce facteur de rotation par calcul du coefficient de rotation pour différentes valeurs de ce facteur de rotation et l'on retient la valeur pour laquelle on obtient la plus forte corrélation. </p><p id="p0026" num="0026"> Le quatrième ordre concerne une disparité d' angle de vue entre les deux caméras. Cette disparité entraîne un facteur de zoom entre les deux images. Lors de l'étape 2.4, la valeur de ce facteur de zoom est estimée par corrélation. </p><p id="p0027" num="0027"> Avantageusement, un cinquième ordre peut être considéré. Il s'agit des effets dus aux distorsions optiques des lentilles des caméras. Selon le cas, chaque caméra 
<!-- EPO <DP n="8"/>-->
 peut induire une distorsion en barillet (barrel distortion en anglais) ou en coussinet (pincushion distortion en anglais). Ces distorsions font apparaître l'image comme projetée sur une surface concave ou convexe. Lors de l'étape 2.5, ces distorsions sont estimées par corrélation. </p><p id="p0028" num="0028"> Les distorsions peuvent par exemple être estimées et corrigées par une approximation de premier ordre sous la forme : f(R)=R+aR<sup>3</sup> avec R la distance ou rayon entre chaque pixel et le centre optique situé a priori au centre de l'image et f(R) la nouvelle position de ce même pixel après correction de la distorsion. Le signe du facteur correcteur a, qui vaut 0 pour un objectif parfait, détermine si la déformation est en coussinet ou en barillet. </p><p id="p0029" num="0029"> Par comparaison, on peut donc estimer la différence de distorsion entre les deux caméras en « déformant » l'une pour qu'elle corresponde le mieux possible à l'autre. </p><p id="p0030" num="0030"> L'important est moins de corriger les déformations dans l'absolu des caméras, que de minimiser les disparités entre les caméras gauche et droite qui, elles, induisent un réel inconfort visuel en stéréoscopie. </p><p id="p0031" num="0031"> On constate qu'il est illusoire de chercher à corriger un effet d'un ordre donné si l'on n'a pas préalablement corrigé les effets d'ordre supérieur. On constate également que la correction d'un effet d'un ordre donné influe sur l'estimation des effets d'ordre supérieur. Pour améliorer l'estimation de ces paramètres, on adopte alors l'algorithme suivant. On fait une estimation des paramètres d'ordre 1, étape 2.1, puis l'on passe à l'estimation des paramètres d'ordre 2, étape 2.2, sur des images corrigées en utilisant les paramètres d'ordre 1 estimés. On obtient alors une première estimation des paramètres d'ordre 2. On affine alors l'estimation des paramètres d'ordre 1 en appliquant une correction aux images avec les paramètres d'ordre 2. On affine ensuite l'estimation des paramètres d'ordre 2 avec les nouvelles valeurs obtenues pour les paramètres d'ordre 1. Avantageusement, on poursuit cette boucle jusqu'à obtenir une convergence de l'estimation des paramètres. Ces paramètres sont ensuite utilisés pour l'estimation des paramètres d'ordre 3 et ainsi de suite. Selon ce mode de réalisation, l'estimation des paramètres d'un ordre donné est utilisée pour effectuer une nouvelle estimation des paramètres d'ordre supérieur. </p><p id="p0032" num="0032"> On comprend que les défauts effectifs que l'on choisit de corriger ainsi que l'ordre dans lequel ces défauts sont corrigés peuvent varier en fonction des systèmes. Les défauts cités et l'ordre cité ne représentent qu'un exemple de réalisation de l'invention. 
<!-- EPO <DP n="9"/>-->
 De cette manière, on obtient un jeu de paramètres qui permet de corriger les images obtenues en s' approchant des images qui seraient obtenues si le dispositif de prise de vue était idéal. Ces paramètres de correction peuvent être ensuite directement utilisés lors de la prise de vue pour une correction immédiate ou joints aux images pour une correction ultérieure. Ils sont utilisables tant pour une prise de vue unique de type photographique ou lors d'une série de prise de vue dans une application de type vidéo. </p><p id="p0033" num="0033"> Nous avons vu que l'efficacité de ce procédé de calibrage dépend en partie de la scène choisie pour la prise de vue utilisée pour l'estimation de ces paramètres. Cette scène doit être suffisamment éloignée, comporter un niveau de détails permettant des corrélations fiables et ne pas contenir d'objets proches dont la parallaxe viendrait perturber les opérations de corrélation. Ce procédé de calibrage pouvant être effectué à la demande tout au long de la vie de l'appareil, il peut être mis en œuvre par un utilisateur peu au fait de ces contraintes. Pour aider cet utilisateur à choisir une scène pertinente pour effectuer le procédé de calibrage, on ajoute à ce procédé une étape de mesure d'un indice de la pertinence de la scène. Avantageusement, le résultat de cette étape de mesure est affiché à l'écran de l'appareil sous la forme d'un indice de pertinence. Cet indice peut être affiché comme une note de pertinence ou sous une forme graphique. Par exemple, une barre de pertinence dont la longueur est proportionnelle à l'indice de pertinence peut être affichée sur l'écran de l'appareil. Avantageusement, la couleur de cette barre peut servir à déterminer des zones pour cet indice de pertinence, par exemple une barre verte si l'indice est suffisant pour un calibrage de qualité, orange si l'indice est utilisable bien qu'insuffisant pour assurer le meilleur calibrage et rouge s'il est inutilisable. </p><p id="p0034" num="0034"> L'organigramme Fig. 3 illustre le procédé de calcul de l'indice de pertinence selon l'exemple de réalisation de l'invention. Une première étape 3.1 consiste en un calcul des histogrammes des images droite et gauche. L'étalement de cet histogramme donne un premier indice en relation avec le niveau de détail de la scène. En effet, une scène trop uniforme donne un histogramme resserré tandis qu'un histogramme bien étalé est le signe que la scène possède une variabilité des couleurs et des luminances permettant, a priori, une bonne corrélation. </p><p id="p0035" num="0035"> Une seconde étape consiste à mesurer une grille de parallaxes sur la scène à partir des images capturées. Pour ce faire, l'image est divisée en une pluralité de zones. Cette division peut être quelconque. Selon l ' exemple de réalisation de 
<!-- EPO <DP n="10"/>-->
 l'invention, la division est faite selon une grille telle que celle illustrée à la Fig. 4. L'image 4.1 est ici divisée en neuf zones 4.2 de même taille. </p><p id="p0036" num="0036"> De façon à minimiser les temps de calcul nécessaires, un indice de parallaxe est calculé pour chaque zone selon la méthode illustrée par la Fig. 5. Selon ce mode de réalisation, la zone 5.2 est ramenée à une ligne unique 5.4 par une opération telle que la somme des colonnes 5.3. La ligne ainsi obtenue est comparée par corrélation avec la ligne équivalente de l'autre image. La corrélation est faite, par exemple, en faisant la somme des valeurs absolues des différences. Cette somme donne un indice de corrélation. On prend comme indice de parallaxe la translation qui donne le minimum de ces indices de corrélation. </p><p id="p0037" num="0037"> Avantageusement, on profite du calcul de ces indices de corrélation pour calculer également la valeur médiane des indices de corrélation puis la différence entre la valeur minimum retenue et cette valeur médiane. Cette différence est un autre indice du niveau de détail de l'image et de son adéquation avec la fiabilité de la corrélation. En effet, si l'on obtient un indice de corrélation minimum nettement différent de la valeur médiane des indices de corrélation obtenus pour les valeurs de translation voisines on peut dire que la corrélation est fiable et que le niveau de détail est donc pertinent. Au contraire, si la valeur minimale ne tranche pas nettement des autres valeurs de l'indice de corrélation, c'est que le niveau de détail ne permet pas une corrélation fiable. </p><p id="p0038" num="0038"> On obtient donc en sortie de l'étape 3.2 deux valeurs, un indice de parallaxe qui est une valeur de translation correspondant à un indice de corrélation minimal et un indice de fiabilité de corrélation correspondant à la différence entre l'indice de corrélation minimal et la valeur médiane des indices de corrélation. L'indice de fiabilité de corrélation est utilisé conj ointement à l ' indice d' étalement des histogrammes pour calculer un indice de détail global de l'image lors d'une étape 3.3. Par exemple, on calcule une moyenne pondérée des indices de fiabilité de corrélation de chaque zone et de l'indice d'étalement de l'histogramme. </p><p id="p0039" num="0039"> Les indices de parallaxe des différentes zones sont utilisés pour le calcul d'un indice de distance lors de l'étape 3.4. Ces indices de parallaxe sont une bonne approximation de la distance de la scène. Le calibrage n'ayant pas encore eu lieu, on ne peut pas en déduire une information fiable de la profondeur, toutefois on obtient tout de même une bonne idée. Avantageusement, on peut appliquer le processus de calibration de façon successive, ce qui permet à chaque étape de calibration de tirer 
<!-- EPO <DP n="11"/>-->
 parti d'images en entrée déjà « pré-calibrées », d'où un gain en précision. On tire aussi de l'information de la répartition des valeurs des indices de parallaxe. Si ces valeurs ont une grande variabilité, cela signifie qu'il existe des plans à différentes profondeurs dans l'image et donc des objets en premier plan. Cet aspect a un impact négatif sur le calibrage. Une scène pertinente pour le calibrage est une scène produisant des valeurs uniformément faibles des indices de parallaxe pour l'ensemble des zones. On calcule donc un indice de distance qui sera d'autant plus grand que les indices de parallaxe sont uniformément faibles. </p><p id="p0040" num="0040"> L'indice de pertinence est finalement calculé en fonction de l'indice de détails obtenu par l'étape 3.3 et de l'indice de distance obtenu à l'étape 3.4. Avantageusement, cet indice est une moyenne pondérée entre les deux indices. </p><p id="p0041" num="0041"> On voit que grâce au procédé décrit, il est possible à un utilisateur d'effectuer un calibrage d'un dispositif de prise de vue stéréo scopique à tout moment, ce calibrage permettant une exploitation de la stéréoscopie en corrigeant des défauts du système. Avantageusement, l'utilisateur est guidé lors du choix de la scène pour le calibrage. Ce procédé peut être utilisé dans tout type d'appareils, notamment grand public, tels qu'appareils photo, caméras vidéo, téléphones ou consoles de jeux. 
</p></description><claims mxw-id="PCLM44727278" ref-ucid="WO-2012113810-A1" lang="FR" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="12"/>--><claim-text/><claim-text>REVENDICATIONS </claim-text><claim-text>1/ Procédé de calibrage d'un dispositif de prise de vue stéréo scopique disposant de deux caméras pour la capture d'une image droite et d'une image gauche, ledit dispositif présentant une pluralité de défauts, chacun de ces défauts pouvant être corrigé par application d'une transformation à au moins une des deux images capturées, lesdits défauts étant hiérarchisés en au moins deux ordres : </claim-text><claim-text> une étape d'estimation des paramètres de correction des défauts d'un premier ordre donné ; </claim-text><claim-text> - une étape d'estimation des paramètres de correction des défauts d'un second ordre supérieur au premier ordre; </claim-text><claim-text> une nouvelle étape d'estimation des paramètres de correction des défauts du premier ordre, l'estimation des paramètres du second ordre étant utilisée pour une nouvelle estimation des paramètres de correction des défauts du premier ordre ; </claim-text><claim-text> caractérisé en ce que quatre ordres sont utilisés comprenant : </claim-text><claim-text> un décalage en translation global de l'image ; </claim-text><claim-text> une déformation en trapèze horizontal et vertical ; </claim-text><claim-text> une rotation ; </claim-text><claim-text> - un facteur de zoom. </claim-text><claim-text>21 Procédé de calibrage selon la revendication 1, caractérisée en ce que les défauts que l'on choisit de corriger sont choisis parmi : </claim-text><claim-text> un décalage en translation global de l'image ; </claim-text><claim-text> une déformation en trapèze horizontal et vertical ; </claim-text><claim-text> une rotation ; </claim-text><claim-text> un facteur de zoom ; </claim-text><claim-text> une distorsion en barillet ou en coussinet. </claim-text><claim-text>3/ Procédé de calibrage selon la revendication 1, caractérisé en ce qu'il comporte en outre une étape de calcul d'un indice de la pertinence de la scène. 
<!-- EPO <DP n="13"/>-->
 4/ Procédé de calibrage selon la revendication 3, caractérisé en ce que le calcul indice de pertinence de la scène comprend : </claim-text><claim-text> une étape de calcul des histogrammes des images droite et gauche ; une étape de calcul des parallaxes sur une pluralité de zones des images gauche et droite ; </claim-text><claim-text> une étape de calcul d'un indice de détails de la scène en fonction de l'étalement des histogrammes et des indices de corrélation entre les zones des images droite et gauche ; </claim-text><claim-text> une étape de calcul d'un indice de distance qui sera d'autant plus grand que les indices de parallaxes sont uniformément faibles ; </claim-text><claim-text> une étape de formation de l'indice de pertinence en fonction de l'indice de détail et de l'indice de distance. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
