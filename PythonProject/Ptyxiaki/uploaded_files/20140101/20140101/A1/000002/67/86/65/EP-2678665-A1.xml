<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678665-A1" country="EP" doc-number="2678665" kind="A1" date="20140101" family-id="46721183" file-reference-id="298922" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550808" ucid="EP-2678665-A1"><document-id><country>EP</country><doc-number>2678665</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12749012-A" is-representative="NO"><document-id mxw-id="PAPP154824731" load-source="docdb" format="epo"><country>EP</country><doc-number>12749012</doc-number><kind>A</kind><date>20120214</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438256" load-source="docdb" format="original"><country>EP</country><doc-number>12749012.6</doc-number><date>20120214</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454675" ucid="US-201161446404-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161446404</doc-number><kind>P</kind><date>20110224</date></document-id></priority-claim><priority-claim mxw-id="PPC140446146" ucid="US-2012024987-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012024987</doc-number><kind>W</kind><date>20120214</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988102226" load-source="docdb">G01N  21/89        20060101AFI20120910BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988132806" load-source="docdb">B65H  43/00        20060101ALI20120910BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2077489963" load-source="docdb" scheme="CPC">G06K   9/6218      20130101 LI20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077490824" load-source="docdb" scheme="CPC">G06T2207/20081     20130101 LA20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077492652" load-source="docdb" scheme="CPC">G01N  21/89        20130101 LA20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077495278" load-source="docdb" scheme="CPC">G06K2209/19        20130101 LA20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077496492" load-source="docdb" scheme="CPC">G06K   9/6253      20130101 LI20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077499113" load-source="docdb" scheme="CPC">G06T2207/30124     20130101 LA20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2077503517" load-source="docdb" scheme="CPC">G06Q  10/06        20130101 LI20150408BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988116119" load-source="docdb" scheme="CPC">G06T   7/0004      20130101 FI20131206BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184908" lang="DE" load-source="patent-office">SYSTEM ZUR ERFASSUNG VON UNREGELMÄSSIGKEITEN IN NETZBASIERTEN MATERIALIEN</invention-title><invention-title mxw-id="PT132184909" lang="EN" load-source="patent-office">SYSTEM FOR DETECTION OF NON-UNIFORMITIES IN WEB-BASED MATERIALS</invention-title><invention-title mxw-id="PT132184910" lang="FR" load-source="patent-office">SYSTÈME POUR LA DÉTECTION DE NON-UNIFORMITÉS DANS DES MATIÈRES À BASE DE BANDE CONTINUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918154952" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>3M INNOVATIVE PROPERTIES CO</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918168779" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>3M INNOVATIVE PROPERTIES COMPANY</last-name></addressbook></applicant><applicant mxw-id="PPAR918978881" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>3M Innovative Properties Company</last-name><iid>101046201</iid><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, MN 55133-3427</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918154343" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TARNOWSKI CATHERINE P</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918171201" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TARNOWSKI, CATHERINE P.</last-name></addressbook></inventor><inventor mxw-id="PPAR918987091" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TARNOWSKI, Catherine P.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918134874" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>BRITTAIN KENNETH G</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918161272" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>BRITTAIN, KENNETH G.</last-name></addressbook></inventor><inventor mxw-id="PPAR918992543" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>BRITTAIN, Kenneth G.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918163914" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>HOFELDT DAVID L</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918154534" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>HOFELDT, DAVID L.</last-name></addressbook></inventor><inventor mxw-id="PPAR918984561" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>HOFELDT, DAVID L.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918158386" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>JAWORSKI ANDRZEJ P</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918173072" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>JAWORSKI, ANDRZEJ P.</last-name></addressbook></inventor><inventor mxw-id="PPAR918988698" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>JAWORSKI, Andrzej P.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918158914" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>KOSTUCH GREGORY D</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918170691" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>KOSTUCH, GREGORY D.</last-name></addressbook></inventor><inventor mxw-id="PPAR918989912" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>KOSTUCH, GREGORY D.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918162274" load-source="docdb" sequence="6" format="epo"><addressbook><last-name>RAMTHUN JOHN A</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918137333" load-source="docdb" sequence="6" format="intermediate"><addressbook><last-name>RAMTHUN, JOHN A.</last-name></addressbook></inventor><inventor mxw-id="PPAR918990940" load-source="patent-office" sequence="6" format="original"><addressbook><last-name>RAMTHUN, John A.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918141858" load-source="docdb" sequence="7" format="epo"><addressbook><last-name>RIBNICK EVAN J</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918148283" load-source="docdb" sequence="7" format="intermediate"><addressbook><last-name>RIBNICK, EVAN J.</last-name></addressbook></inventor><inventor mxw-id="PPAR918992849" load-source="patent-office" sequence="7" format="original"><addressbook><last-name>RIBNICK, Evan J.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918144728" load-source="docdb" sequence="8" format="epo"><addressbook><last-name>VILKAMA ESA H</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918172072" load-source="docdb" sequence="8" format="intermediate"><addressbook><last-name>VILKAMA, ESA H.</last-name></addressbook></inventor><inventor mxw-id="PPAR918994131" load-source="patent-office" sequence="8" format="original"><addressbook><last-name>VILKAMA, Esa H.,</last-name><address><street>3M Center Post Office Box 33427</street><city>Saint Paul, Minnesota 55133-3427</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918133739" load-source="docdb" sequence="9" format="epo"><addressbook><last-name>JUSTICE DEREK H</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918146570" load-source="docdb" sequence="9" format="intermediate"><addressbook><last-name>JUSTICE, DEREK H.</last-name></addressbook></inventor><inventor mxw-id="PPAR918982218" load-source="patent-office" sequence="9" format="original"><addressbook><last-name>JUSTICE, Derek H.,</last-name><address><street>822 Blackmar Street</street><city>Cary, North Carolina 27519</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918158876" load-source="docdb" sequence="10" format="epo"><addressbook><last-name>SAPIRO GUILLERMO</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918134087" load-source="docdb" sequence="10" format="intermediate"><addressbook><last-name>SAPIRO, GUILLERMO</last-name></addressbook></inventor><inventor mxw-id="PPAR918983038" load-source="patent-office" sequence="10" format="original"><addressbook><last-name>SAPIRO, Guillermo,</last-name><address><street>3 Acornridge Court</street><city>Durham, North Carolina 27707</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918989055" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Fiesser, Gerold Michael</last-name><suffix>et al</suffix><iid>101155019</iid><address><street>Herzog Fiesser &amp; Partner Patentanwälte Isartorplatz 1</street><city>80331 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012024987-W"><document-id><country>US</country><doc-number>2012024987</doc-number><kind>W</kind><date>20120214</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012115819-A1"><document-id><country>WO</country><doc-number>2012115819</doc-number><kind>A1</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548813578" load-source="docdb">AL</country><country mxw-id="DS548916350" load-source="docdb">AT</country><country mxw-id="DS548813579" load-source="docdb">BE</country><country mxw-id="DS548917973" load-source="docdb">BG</country><country mxw-id="DS548834085" load-source="docdb">CH</country><country mxw-id="DS548903744" load-source="docdb">CY</country><country mxw-id="DS548916351" load-source="docdb">CZ</country><country mxw-id="DS548861812" load-source="docdb">DE</country><country mxw-id="DS548813580" load-source="docdb">DK</country><country mxw-id="DS548903745" load-source="docdb">EE</country><country mxw-id="DS548918539" load-source="docdb">ES</country><country mxw-id="DS548918054" load-source="docdb">FI</country><country mxw-id="DS548918055" load-source="docdb">FR</country><country mxw-id="DS548813581" load-source="docdb">GB</country><country mxw-id="DS548813582" load-source="docdb">GR</country><country mxw-id="DS548813583" load-source="docdb">HR</country><country mxw-id="DS548903746" load-source="docdb">HU</country><country mxw-id="DS548834086" load-source="docdb">IE</country><country mxw-id="DS548813584" load-source="docdb">IS</country><country mxw-id="DS548918056" load-source="docdb">IT</country><country mxw-id="DS548903747" load-source="docdb">LI</country><country mxw-id="DS548861813" load-source="docdb">LT</country><country mxw-id="DS548916352" load-source="docdb">LU</country><country mxw-id="DS548861814" load-source="docdb">LV</country><country mxw-id="DS548861815" load-source="docdb">MC</country><country mxw-id="DS548925856" load-source="docdb">MK</country><country mxw-id="DS548925857" load-source="docdb">MT</country><country mxw-id="DS548918540" load-source="docdb">NL</country><country mxw-id="DS548916353" load-source="docdb">NO</country><country mxw-id="DS548918541" load-source="docdb">PL</country><country mxw-id="DS548916354" load-source="docdb">PT</country><country mxw-id="DS548918622" load-source="docdb">RO</country><country mxw-id="DS548903748" load-source="docdb">RS</country><country mxw-id="DS548918623" load-source="docdb">SE</country><country mxw-id="DS548903749" load-source="docdb">SI</country><country mxw-id="DS548925862" load-source="docdb">SK</country><country mxw-id="DS548925863" load-source="docdb">SM</country><country mxw-id="DS548834087" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99619726" ref-ucid="WO-2012115819-A1" lang="EN" load-source="patent-office"><p num="0000">A system is described for detecting the presence of non-uniformity patterns and providing output indicative of a severity of each type of non-uniformity pattern. The system includes a computerized rating tool that assists a user in efficiently and consistently assigning expert ratings (i.e., labels) to a large collection of training images representing samples of a given product. In addition, the rating software develops a model that allows a computerized inspection system to detect the presence of non-uniformity patterns in a manufactured web material in real time and provide output indicative of a severity level of each pattern on a continuous scale. The system also includes algorithmic and hardware approaches to significantly that increase the throughput of the inspection system.</p></abstract><abstract mxw-id="PA99819405" ref-ucid="WO-2012115819-A1" lang="EN" source="national office" load-source="docdb"><p>A system is described for detecting the presence of non-uniformity patterns and providing output indicative of a severity of each type of non-uniformity pattern. The system includes a computerized rating tool that assists a user in efficiently and consistently assigning expert ratings (i.e., labels) to a large collection of training images representing samples of a given product. In addition, the rating software develops a model that allows a computerized inspection system to detect the presence of non-uniformity patterns in a manufactured web material in real time and provide output indicative of a severity level of each pattern on a continuous scale. The system also includes algorithmic and hardware approaches to significantly that increase the throughput of the inspection system.</p></abstract><abstract mxw-id="PA99619727" ref-ucid="WO-2012115819-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention a pour objet un système pour détecter la présence de motifs de non-uniformité et fournir un signal de sortie indicatif d'une gravité de chaque type de motif de non-uniformité. Le système comporte un outil de notation informatisé qui assiste un utilisateur dans l'attribution efficace et cohérente de notations d'expert (c'est-à-dire d'étiquettes) à une grande collection d'images expérimentales représentant des échantillons d'un produit donné. En outre, le logiciel de notation développe un modèle qui permet à un système d'inspection informatisé de détecter la présence de motifs de non-uniformité dans une matière en bande continue manufacturée en temps réel et de fournir un signal de sortie indicatif d'un niveau de gravité de chaque motif sur une échelle continue. Le système comporte aussi des approches algorithmiques et matérielles qui augmentent significativement le rendement du système d'inspection.</p></abstract><abstract mxw-id="PA99819406" ref-ucid="WO-2012115819-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention a pour objet un système pour détecter la présence de motifs de non-uniformité et fournir un signal de sortie indicatif d'une gravité de chaque type de motif de non-uniformité. Le système comporte un outil de notation informatisé qui assiste un utilisateur dans l'attribution efficace et cohérente de notations d'expert (c'est-à-dire d'étiquettes) à une grande collection d'images expérimentales représentant des échantillons d'un produit donné. En outre, le logiciel de notation développe un modèle qui permet à un système d'inspection informatisé de détecter la présence de motifs de non-uniformité dans une matière en bande continue manufacturée en temps réel et de fournir un signal de sortie indicatif d'un niveau de gravité de chaque motif sur une échelle continue. Le système comporte aussi des approches algorithmiques et matérielles qui augmentent significativement le rendement du système d'inspection.</p></abstract><description mxw-id="PDES50930407" ref-ucid="WO-2012115819-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> SYSTEM FOR DETECTION OF NON-UNIFORMITIES </p><p id="p0002" num="0002"> IN WEB-BASED MATERIALS </p><p id="p0003" num="0003">CROSS REFERENCE TO RELATED APPLICATION </p><p id="p0004" num="0004"> [0001] This application claims the benefit of U.S. Provisional Patent Application No. 61/446,404, filed February 24, 201 1, the disclosure of which is incorporated by reference herein in its entirety. </p><p id="p0005" num="0005">TECHNICAL FIELD </p><p id="p0006" num="0006"> [0002] The invention relates to automated inspection systems, such as computerized systems for inspection of moving webs. </p><p id="p0007" num="0007">BACKGROUND </p><p id="p0008" num="0008"> [0003] Computerized inspection systems for the analysis of moving web materials have proven critical to modern manufacturing operations. The goal of a production line is to produce material which is perfectly uniform and devoid of variability. However, non-uniformity is a common problem when manufacturing web-based materials. This can be caused by any number of process variables or formulation errors. Consequently, it is becoming increasingly common to deploy imaging-based inspection systems that can automatically classify the quality of a manufactured product based on digital images captured by optical inspection sensors (e.g., cameras). Some inspection systems apply algorithms, which are often referred to as "classifiers," that attempt to assign a rating to each captured digital image (i.e., "sample") indicating whether the sample, or portions thereof, is acceptable or unacceptable, in the simplest case. </p><p id="p0009" num="0009"> [0004] These inspection systems often attempt to identify "point" defects in which each defect is localized to a single area of the manufactured material. However, other types of defects, referred to "non-uniformity" defects or "patterns" may exist in which the web material exhibits non-uniform variability over a large area. Examples of such non-uniformities include mottle, chatter, banding, and streaks. Non-uniformity-type defects such as these are by definition distributed and non-localized. As a result, such defects may be more difficult for computerized inspection systems to detect and quantify than localized, point defects. </p><p id="p0010" num="0010"> [0005] When attempting to detect non-uniformity defects in manufactured material, the inspection system typically collects and processes sample images to extract features indicative of particular non- uniformities. On the basis of these features, the inspection system applies one or more classifiers to produce an assessment of the severity of the non-uniformity. The feature extraction can be </p><p id="p0011" num="0011">computationally intensive and a limiting factor of the inspection process. For example, in this step, high resolution images containing several million pixels are reduced to perhaps no more than fifty representative numbers (or features) through routines that may involve filtering, morphological, temporal, spectral, or statistical processing. The resulting numbers then form the basis for assessing the 
<!-- EPO <DP n="4"/>-->
 quality of the underlying product. The amount of time required to collapse millions of pixel values into tens of informative numbers can be substantial and, as such, cannot be performed in real-time for fast production rates, even on modern computers. One possibility could be to purchase higher quantities of more expensive computers, but this solution may make the cost of the inspection systems prohibitively expensive and gives rise to additional implementation problems of data distribution and result aggregation. </p><p id="p0012" num="0012">SUMMARY </p><p id="p0013" num="0013"> [0006] In general, this disclosure describes an overall computerized system to address non-uniformities in manufactured material. For example, the system includes a computerized rating tool that can assist a user in efficiently and consistently assigning expert ratings (i.e., labels) to a large collection of digital images representing samples of a given product. In addition, the rating software may develop a model that allows a computerized inspection system to detect the presence of non-uniformity defects in a manufactured web material in real time and provide output indicative of a severity level of each defect on a continuous scale. That is, the computerized inspection system utilizing the expert ratings as training data to be applied in real-time for detecting the presence of non-uniformity defects, i.e., patterns, and providing output indicative of a severity of each defect. The techniques may provide real-time output that provides a continuous charting of the non-uniformity severity. In other words, rather than being constrained to discrete rating labels, such as "acceptable" of "unacceptable," or a "1", "3", or "5", the computerized inspection system may provide a more continuous ranking of the samples. In addition, techniques are described that increase the throughput of the inspection system that is designed to detect and classify specific patterns in a web-manufactured material. Algorithmic and hardware approaches are described to significantly decrease the average amount of time required to inspect a given quantity of material that is expected to be mostly uniform. The algorithmic techniques described herein involve dynamic (i.e., online) determination of which image features to compute by starting with a base feature set and only triggering additional feature computations as needed. In some embodiments, the computations are performed in graphics processing units (GPUs), which can be optimized for many image processing routines. As such, the techniques may lead to substantial productivity gains. </p><p id="p0014" num="0014">[0007] In one embodiment, a method comprises executing rating software on a computer to </p><p id="p0015" num="0015">automatically assign a discrete rating label for a non-uniform defect to each of a plurality of training images and compute a classification model based on the rating labels assigned to the training samples. The rating software receives input from a user for only a subset of the training images and computes the rating labels for all of the remaining training images based upon the input. The method further comprises processing in real-time a sample image captured from a manufactured web material with hardware components of a pipelined graphical processing unit (GPU) integrated within a computerized inspection system to extract a first plurality of features from the image in parallel; and computing a severity level for 
<!-- EPO <DP n="5"/>-->
 the non-uniformity defect for the sample image of the web material with the computerized inspection system from the first plurality of features in accordance with the classification model. </p><p id="p0016" num="0016">[0008] In another embodiment, an online computerized inspection system is described for inspecting web material in real-time and computing a severity of a non-uniformity defect as the web material is manufactured. The inspection system comprises a memory to store a decision-making model that defines a chain of dynamic triggers for selecting in real-time which features to extract from an image, and a computer executing software to process a sample image captured from a manufactured web material currently being manufactured to extract a first set of features. The software applies the model to dynamically trigger selection of additional sets of features to extract from the sample image and invokes hardware components of a pipelined graphical processing unit (GPU) of the inspection system to extract the additional sets of features until the extracted features are sufficient to compute a severity level of a non-uniformity defect for the web material within a defined level of confidence. The dynamic triggering and computations are repeated as necessary as new material is presented to the inspection system. </p><p id="p0017" num="0017">[0009] In another embodiment, an online computerized inspection system is described for inspecting web material in real-time. The inspection system comprises a memory to store a model that represents a continuous ranking of the training images as a plurality of points within a multidimensional feature space, wherein each of the points within the multidimensional space corresponds to a feature vector for a different one of the training images. The inspection system further comprises a pipelined graphical processing unit (GPU) of the inspection system to process a sample image captured from a manufactured web material to extract a plurality of features in parallel from the sample image using parallel hardware components of the GPU. The computerized inspection system computes a severity level of a nonuniform defect from the extracted features for the sample image of the web material on a continuous scale based on the model of the training images. </p><p id="p0018" num="0018"> [0010] The techniques described herein have applicability and usefulness in numerous product lines, including any material that is produced on a web. The techniques have broad applicability to a wide range of products in which uniformity is important. A few examples are optical films, window films, and abrasives. </p><p id="p0019" num="0019"> [0011] The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features, objects, and advantages of the invention will be apparent from the description and drawings, and from the claims. </p><p id="p0020" num="0020">BRIEF DESCRIPTION OF DRAWINGS </p><p id="p0021" num="0021">[0012] FIG. 1 is a block diagram illustrating an example web manufacturing and conversion system in which the techniques described herein may be applied. </p><p id="p0022" num="0022"> [0013] FIG. 2 is a block diagram illustrating an exemplary embodiment of an inspection system in an exemplary web manufacturing plant. 
<!-- EPO <DP n="6"/>-->
 [0014] FIG. 3 is a flowchart illustrating an example operation of the systems described herein. </p><p id="p0023" num="0023"> [0015] FIG. 4 is a flowchart illustrating an example operation of a software rating tool. </p><p id="p0024" num="0024"> [0016] FIGS. 5-10 illustrate example features of a user interface presented by the rating tool. </p><p id="p0025" num="0025"> [0017] FIG. 11 illustrates a continuous three-dimensional (3D) surface, referred to as a "manifold," in reference to which the algorithms applied by the training software to produce a continuous ranking model are readily understood. </p><p id="p0026" num="0026"> [0018] FIG. 12 is a flowchart showing in more detail an example process by which training software processes feature vectors extracted from training images to develop a continuous ranking of the training images and produce a continuous ranking model. </p><p id="p0027" num="0027"> [0019] FIG. 13 is a flowchart showing in more detail an example process by which a charting module utilize the continuous ranking model in real-time to detect the presence of non-uniformity defects and to provide a continuous charting of a severity level for each defect. </p><p id="p0028" num="0028"> [0020] FIG. 14 is a graph providing a logical representation of finding the k-nearest neighbors in a 2-dimensional feature space. </p><p id="p0029" num="0029"> [0021] FIG. 15 illustrates a second technique for finding the k-nearest neighbors using a hashing algorithm. </p><p id="p0030" num="0030"> [0022] FIG. 16 is a flow diagram showing an example a dynamic system architecture in which a feature extraction module builds a "best feature set" in real-time by using the results from successively larger feature sets to trigger additional feature computations. </p><p id="p0031" num="0031"> [0023] FIG. 17 shows the performance of a three-step sequence in ROC-space. </p><p id="p0032" num="0032"> [0024] FIGS. 18 and 19 are plots showing performance results based on the simulation study. </p><p id="p0033" num="0033"> [0025] FIG. 20 is a comparative plot that shows the average (across trials) fraction of samples in which a particular triggering strategy yielded a lower cost. </p><p id="p0034" num="0034">DETAILED DESCRIPTION </p><p id="p0035" num="0035">[0026] FIG. 1 is a block diagram illustrating an example system 2 in which the techniques described herein may be applied. Web manufacturing plants 6A-6N (web manufacturing plants 6) represent manufacturing sites that produce and ship web material in the form of web rolls 7. Web manufacturing plants 6 may be geographically distributed, and each of the web manufacturing plants may include one or more manufacturing process lines. In general, web rolls 7 may be manufactured by any of manufacturing plants 6 and shipped between the web manufacturing plants for additional processing. Finished web rolls 10 are shipped to converting sites 8A-8N (converting sites 8) for conversion into products 12A-12N (products 12). As shown in FIG. 1, conversion control system 4, web manufacturing plants 6A-6N (web manufacturing plants 6) and converting sites 8A-8N (converting sites 8) are interconnected by a computer network 9 for exchanging information (e.g., defect information) related to manufacture of the web material and conversion into products 12. 
<!-- EPO <DP n="7"/>-->
 [0027] In general, web rolls 7, 10 may contain manufactured web material that may be any sheet- like material having a fixed dimension in one direction and either a predetermined or indeterminate length in the orthogonal direction. Examples of web materials include, but are not limited to, metals, paper, wovens, non-wovens, glass, polymeric films, flexible circuits or combinations thereof. Metals may include such materials as steel or aluminum. Wovens generally include various fabrics. Non-wovens include materials, such as paper, filter media, or insulating material. Films include, for example, clear and opaque polymeric films including laminates and coated films. </p><p id="p0036" num="0036"> [0028] Converting sites 8 may receive finished web rolls 10 from web manufacturing plants 6 and convert finished web rolls 10 into individual sheets for incorporation into products 12 for sale to customers 14A-14N (customers 14). Converting systems may determine into which products 14 a given finished web roll 10 is converted based on a variety of criteria, such as grade levels associated with the product. That is, the selection process of which sheets should be incorporated into which products 12 may be based on the specific grade levels each sheet satisfies. In accordance with the techniques described herein, converting sites 8 may also receive data regarding anomalies, i.e. potential defects, in the finished web rolls 10. Ultimately, converting sites 8 may convert finished web rolls 10 into individual sheets which may be incorporated into products 12 for sale to customers 14A-14N (customers 14). </p><p id="p0037" num="0037"> [0029] In order to produce a finished web roll 10 that is ready for conversion into individual sheets for incorporation into products 12, unfinished web rolls 7 may need to undergo processing from multiple process lines either within one web manufacturing plant, for instance, web manufacturing plant 6A, or within multiple manufacturing plants. For each process, a web roll is typically used as a source roll from which the web is fed into the manufacturing process. After each process, the web is typically collected again into a web roll 7 and moved to a different product line or shipped to a different manufacturing plant, where it is then unrolled, processed, and again collected into a roll. This process is repeated until ultimately a finished web roll 10 is produced. For many applications, the web materials for each of web rolls 7 may have numerous coatings applied at one or more production lines of one or more web manufacturing plants 6. The coating is generally applied to an exposed surface of either a base web material, in the case of the first manufacturing process, or a previously applied coating in the case of a subsequent manufacturing process. Examples of coatings include adhesives, hardcoats, low adhesion backside coatings, metalized coatings, neutral density coatings, electrically conductive or nonconductive coatings, or combinations thereof. </p><p id="p0038" num="0038"> [0030] During each manufacturing process for a given one of web rolls 7, one or more inspection systems acquire anomaly information for the web. For example, as illustrated in FIG. 2, an inspection system for a production line may include one or more image acquisition devices positioned in close proximity to the continuously moving web as the web is processed, e.g., as one or more coatings are applied to the web. The image acquisition devices scan sequential portions of the continuously moving 
<!-- EPO <DP n="8"/>-->
 web to obtain digital images. The inspection systems analyze the images with one or more algorithms to produce so-called "local" anomaly information that may represent an actual "defect" depending upon the ultimate product 12 into which the web is converted. The inspection systems may, for example, produce anomaly information for "point" defects in which each defect is localized to a single area. As another example, the inspections systems may produce anomaly information for "non-uniform" defects or "non- uniformities" in which the web material exhibits non-uniform variability over a large area larger than that of point defects. Examples of such non-uniformities include mottle, chatter, banding, and streaks. </p><p id="p0039" num="0039">[0031] The inspection systems within web manufacturing plants 6 may apply algorithms for detecting the presence of non-uniformity defects and providing output indicative of a severity of each defect in real-time as the web is manufactured. For example, the computerized inspection systems may provide real-time feedback to users, such as process engineers, within web manufacturing plants 6 regarding the presence of non-uniformities and their severity, thereby allowing the users to quickly respond to an emerging non-uniformity by adjusting process conditions to remedy the problem without significantly delaying production or producing large amounts of unusable material. The computerized inspection systems may apply algorithms to compute the severity level by ultimately assigning a rating label for the non-uniformity (e.g., "good" or "bad") or by producing a measurement of non-uniformity severity of a given sample on a continuous scale or more accurately sampled scale, such as 1.63 on a scale from 0 to 10. </p><p id="p0040" num="0040"> [0032] During this process, the inspection systems may apply techniques described herein to dynamically (i.e., in real-time during manufacture of a web material) determine which image features to compute. In one example, the inspection systems start by extracting a base feature set, the contents of such set may vary from system to system, and then triggering the computations of additional feature(s) as needed. For each sample image acquired, the techniques build a "best feature set" in real-time by using the results from successively larger feature sets to trigger the computation of additional features as needed. Each inspection system starts with an appropriate baseline feature set, then based on the values of the base feature set, decides which extra features (if any) to compute. Similarly, these additional features can be analyzed to determine which, if any, additional features are needed. The decision at each step of the feature extraction process is referred to herein as a potential trigger event. In one </p><p id="p0041" num="0041">embodiment, the inspection system makes the decision whether to trigger the computation of additional features at each potential trigger event as to optimize the expected gain in classification accuracy under a controlled Markov chain model. </p><p id="p0042" num="0042"> [0033] In some embodiments, analysis computers of the inspection systems process the captured digital images by application of a continuous ranking model that has been developed based on training data. The training data is typically processed during a "training phase" of the algorithms that often employs rather coarse discrete rating labels such as "acceptable" or "unacceptable" or a "1", "3", or "5", and the continuous ranking model is developed to best fit the training data. That is, after the training phase and 
<!-- EPO <DP n="9"/>-->
 development of the continuous ranking model, application of the continuous ranking model to the training data will label the training data with a high probability of correctness. Once the model has been developed from the training data, the analysis computers apply the model to samples captured from newly manufactured product, potentially in real-time, during the "classification phase" of the processing and provide a continuous charting of non-uniformity severity that is not constrained to discrete rating labels. The computerized inspection systems may thereby provide a continuous ranking of samples. For example, a computerized inspection system may apply algorithms to produce measurements of severity for non-uniformity defects within a web material on a continuous scale, such as 1.63 on a scale from 0 to 10. </p><p id="p0043" num="0043"> [0034] In some embodiments, additional analysis of digital images for a given manufactured web may be performed offline by conversion control system 4. Based on the classifications for a given web, conversion control system 4 may select and generate a conversion plan for each web roll 10. The analysis of the digital images and determination of the severity level may be application-specific in that a certain non-uniformity may result in a defect in one product, e.g., product 12A, whereas the anomaly may not cause a defect in a different product, e.g., product 12B. Each conversion plan represents defined instructions for processing a corresponding finished web roll 10 for creating products 12, which may ultimately be sold to customers 14. For example, a web roll 10 may be converted into final products, e.g., sheets of a certain size, for application to displays of notebook computers. As another example, the same web roll 10 may instead be converted into final products for application to displays of cell phones. Conversion control system 4 may identify which product best achieves certain parameters, such as a maximum utilization of the web, in view of the different defect detection algorithms that may be applied to the anomalies. </p><p id="p0044" num="0044"> [0035] FIG. 2 is a block diagram illustrating an exemplary embodiment of an inspection system located within a portion of a web process line 21 in exemplary web manufacturing plant 6A of FIG. 1. In the exemplary embodiment, a segment of a web 20 is positioned between two support rolls 22, 24. Image acquisition devices 26A-26N (image acquisition devices 26) are positioned in close proximity to the continuously moving web 20 and scan sequential portions of the continuously moving web 20 to obtain image data. Acquisition computers 27 collect image data from image acquisition devices 26 and transmit the image data to analysis computer 28. </p><p id="p0045" num="0045"> [0036] Image acquisition devices 26 may be conventional imaging devices that are capable of reading a sequential portion of the moving web 20 and providing output in the form of a digital data stream. As shown in FIG. 2, imaging devices 26 may be cameras that directly provide digital data streams or an analog cameras with an additional analog to digital converters. Other sensors, such as, for example, laser scanners, may be utilized as the imaging acquisition devices. A sequential portion of the web indicates that the data is acquired by a succession of single lines. Single lines comprise an area of the continuously moving web that maps to a single row of sensor elements or pixels. Examples of devices suitable for 
<!-- EPO <DP n="10"/>-->
 acquiring the image include linescan cameras such as Piranha Models from Dalsa (Waterloo, Ontario, Canada), or Model Aviiva SC2 CL from Atmel (San Jose, Calif). Additional examples include laser scanners from Surface Inspection Systems GmbH (Munich, Germany) in conjunction with an analog to digital converter. </p><p id="p0046" num="0046"> [0037] The image data may be optionally acquired through the utilization of optic assemblies that assist in the procurement of the image. The assemblies may be either part of a camera, or may be separate from the camera. Optic assemblies utilize reflected light, transmitted light, or transflected light during the imaging process. Reflected light, for example, is often suitable for the detection of defects caused by web surface deformations, such as surface scratches. </p><p id="p0047" num="0047"> [0038] In some embodiments, fiducial mark controller 30 controls fiducial mark reader 29 to collect roll and position information from web 20. For example, fiducial mark controller 30 may include one or more photo-optic sensors for reading bar codes or other indicia from web 20. In addition, fiducial mark controller 30 may receive position signals from one or more high-precision encoders engaged with web 20 and/or rollers 22, 24. Based on the position signals, fiducial mark controller 30 determines position information for each detected fiducial mark. Fiducial mark controller 30 communicates the roll and position information to analysis computer 28 for association with detected anomalies. </p><p id="p0048" num="0048">[0039] Analysis computer 28 processes streams of image data from acquisition computers 27. In accordance with the techniques described herein, a feature extraction module 43 executes on analysis computer 28 and dynamically determines which image features to compute on a per-image basis in realtime during manufacture of web material 20. That is, for each sample image acquired during manufacture, feature extraction module 43 builds a "best feature set" in real-time by using the results from successively larger feature sets to trigger additional feature computations until severity levels can be computed for each type of potential non-uniformity. In one example embodiment, computerized non- uniformity charting module 39 ("charting module 39") processes the extracted features by applying algorithms that utilize continuous ranking model 34 ("model 34") developed based on training data 35 to detect the presence of non-uniformity defects and provide a continuous charting of a severity level of each defect. </p><p id="p0049" num="0049"> [0040] Training data 35 typically consists of a large set of representative sample digital images that have been assigned ratings by one or more experts 38. Previously automatically ranked data can be used for training as well. The digital images may, for example, represent samples taken from web 20 or another web previously produced by web process line 21. Training server 36 may provide an operating environment for execution of software that provides a computerized expert rating tool 37 ("rating tool 37") to assist experts 38 in efficiently and consistently assigning ratings (i.e., labels) to the large collection of digital images representing the samples. </p><p id="p0050" num="0050"> [0041] Once training data 35 has been established, training module 41 processes the training data to generate continuous ranking model 34 for subsequent use by charting module 39 for real-time analysis of 
<!-- EPO <DP n="11"/>-->
 image data received from acquisition computers 27 for web material 20. In this way, new images of regions of web material 20 can be classified in accordance with continuous ranking model 34. Example defects that may be detected include non-uniformities such as mottle, chatter, banding, and streaks, as well as point defects including spots, scratches, and oil drips. </p><p id="p0051" num="0051"> [0042] Analysis computer 28 may store the anomaly information for web 20, including roll identifying information for the web 20 and possibly position information for each anomaly, within database 32. For example, analysis computer 28 may utilize position data produced by fiducial mark controller 30 to determine the spatial position or image region of each anomaly within the coordinate system of the process line. That is, based on the position data from fiducial mark controller 30, analysis computer 28 determines the x, y, and possibly z position or range for each anomaly within the coordinate system used by the current process line. For example, a coordinate system may be defined such that the x dimension represents a distance across web 20, a y dimension represents a distance along a length of the web, an the z dimension represents a height of the web, which may be based on the number of coatings, materials or other layers previously applied to the web. Moreover, an origin for the x, y, z coordinate system may be defined at a physical location within the process line, and is typically associated with an initial feed placement of the web 20. Database 32 may be implemented in any of a number of different forms including a data storage file or one or more database management systems (DBMS) executing on one or more database servers. The database management systems may be, for example, a relational (RDBMS), hierarchical (HDBMS), multidimensional (MDBMS), object oriented (ODBMS or OODBMS) or object relational (ORDBMS) database management system. As one example, database 32 is implemented as a relational database provided by SQL Server™ from Microsoft Corporation. </p><p id="p0052" num="0052"> [0043] Once the process has ended, analysis computer 28 may transmit the data collected in database 32 to conversion control system 4 via network 9. For example, analysis computer 28 may communicate the roll information as well as the anomaly information and respective sub-images for each anomaly to conversion control system 4 for subsequent, offline, detailed analysis in accordance with continuous ranking model 34. For example, the information may be communicated by way of database </p><p id="p0053" num="0053">synchronization between database 32 and conversion control system 4. In some embodiments, conversion control system 4 may determine those products of products 12 for which each anomaly may cause a defect, rather than analysis computer 28. Once data for the finished web roll 10 has been collected in database 32, the data may be communicated to converting sites 8 and/or used to mark anomalies on the web roll, either directly on the surface of the web with a removable or washable mark, or on a cover sheet that may be applied to the web before or during marking of anomalies on the web. </p><p id="p0054" num="0054">[0044] The components of analysis computer 28 and training server 36 may be implemented, at least in part, as software instructions executed by one or more processors of analysis computer 28, including one or more hardware microprocessors, digital signal processors (DSPs), application specific integrated circuits (ASICs), field programmable gate arrays (FPGAs), or any other equivalent integrated or discrete 
<!-- EPO <DP n="12"/>-->
 logic circuitry, as well as any combinations of such components. The software instructions may be stored within in a non-transitory computer readable medium, such as random access memory (RAM), read only memory (ROM), programmable read only memory (PROM), erasable programmable read only memory (EPROM), electronically erasable programmable read only memory (EEPROM), flash memory, a hard disk, a CD-ROM, a floppy disk, a cassette, magnetic media, optical media, or other computer-readable storage media. Although shown for purposes of example as positioned within manufacturing plant 6A, analysis computer 28 as well as training server 36 may be located external to the manufacturing plant, e.g., at a central location or at a converting site. For example, analysis computer 28 and training server 36 may operate within conversion control system 4. In another example, the described components execute on a single computing platform and may be integrated into the same software system. </p><p id="p0055" num="0055">[0045] FIG. 3 is a flowchart that provides an overview of the inspection system of FIG. 2. In this example, the process comprises two general phases of processing: training phase 45 and online estimation phase 47. </p><p id="p0056" num="0056"> [0046] Initially, training module 41 receives training data 35 as input, typically in the form of a set of images, for which severity rankings are already known on a possibly coarsely discretized scale (50). Next, a feature extraction software module executing on training server 36 processes each of the images to extract features (52). Feature extraction provides a numerical descriptor of each of the images as a compact numerical representation of the relevant information inherent in each image. As feature extraction during the training phase occurs offline, the feature extraction software module may perform the complete set of feature extraction computations for each of the training images. Features can be extracted in any way that preserves useful information about the relationships between images in the training set, and at the same time eliminates un-informative image characteristics. Examples of common feature extraction techniques include convolving the image with a set of filters and computing statistics of the filtered images, or extracting features based on color or intensity histograms. Sometimes the pixel values can be used as features, although in this case there is no compactness in the descriptor, since the entire image must typically be stored. In general, the resulting features are treated as compact descriptions of the relevant information in the corresponding images. </p><p id="p0057" num="0057"> [0047] The techniques described herein are not limited to use with any particular feature extraction methodology, and may readily be applied to applications in which other types of features are more appropriate. In general, the features extracted from the images are descriptive in that they contain discriminating information about the images with respect to a particular type of non-uniformity. As such, once features have been extracted, the feature vector corresponding to each image represents most of the relevant information contained in that image. </p><p id="p0058" num="0058"> [0048] One exemplary feature extraction algorithm, particularly as it relates to texture, is to compute a small covariance matrix of pixel features across the image or for sub-regions of the image. Once this small covariance matrix (e.g., 5x5) is extracted, pair-wise comparisons between images can be made 
<!-- EPO <DP n="13"/>-->
 efficiently based only on these matrices, instead of dealing with the images directly. For example, a grayscale image is defined as a two-dimensional array, indexed by pixel coordinates x and y, as I(x, y). At each pixel location (x, y), a feature vector is extracted based on the intensity values of the pixel and their first and second derivatives at that pixel: </p><p id="p0059" num="0059"><sup>,y</sup>■· 
<img id="imgf000013_0001" he="10" wi="68" file="imgf000013_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 &gt;:.¾" / <sup>v</sup> ' </p><p id="p0060" num="0060">Image derivatives (gradients) can be approximated simply by computing forward or central differences between intensity values at each pixel. Other features, including higher derivatives or results from filtered image(s), can also be incorporated in the vector in (eq. 1). Similarly, not all derivatives need to be included, e.g., if a derivative in a given direction provides no information for the particular defect, it can be removed from (eq. 1). Finally, the covariance matrix of these pixel features is computed across the entire image: </p><p id="p0061" num="0061">C[ = Y_ (fix, y) - μ) { f(x, y) - μ)<sup>Ύ</sup> , (2) where N is the number of pixels in the image, and: 
<img id="imgf000013_0002" he="17" wi="132" file="imgf000013_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 is the mean of the pixel features. In subsequent processing steps, it may be useful to compute pair-wise distances between images. In the case of these covariance matrix descriptors, pair-wise distances are computed as: 
<img id="imgf000013_0003" he="19" wi="47" file="imgf000013_0003.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 where λ<sub>;</sub>{(ϋιι ;Cn) is the ith generalized eigenvalue of the two covariance matrices. Further details can be found in O. Tuzel, F. Porikli, and P. Meer. "Region Covariance: A Fast Descriptor for Detection and Classification." Proceedings of the European Conference on Computer Vision, 2006, incorporated herein by reference. </p><p id="p0062" num="0062"> [0049] After extracting features for each of the training images, experts 38 interact with computerized expert rating tool 37 to assign discrete ratings 53 to each of the digital images in view of the extracted feature vectors in the manner described below (55). </p><p id="p0063" num="0063"> [0050] Next, training module 41 process the extracted feature vectors and the expert ratings 53 to generate a continuous ranking of the training images and produce continuous ranking model 34 based on 
<!-- EPO <DP n="14"/>-->
 the severity of their non-uniformities (54). Initially, all that is known about each training image is the expert rating, denoting if the corresponding sample is "good" or "bad," or a level "1", "3", or "5" with respect to a particular type of non-uniformity. These expert ratings provide an often coarse ordering of the training images, i.e., the training images can be ranked into 2 or 3 discrete categories, or more categories if the expert is able to provide such finer scale information. Training model 41 uses this coarse ordering as input and learns a continuous ranking in which the training images are ranked from best to worst along a continuous scale with respect to a particular non-uniformity. Although a good ranking should heed the expert ratings as much as possible, for example assigning "good" images lower severity ranking than those labeled "bad," in some instances training module 41 is not completely prevented from violating the coarse ranking implied by the discrete labels, since it is possible, and indeed common, that there are errors in the expert ratings due to the subjective nature of human perception, or even outright mistakes in manual labeling of the training data. </p><p id="p0064" num="0064"> [0051] During the online estimation phase 47, charting module 39 applies the learned continuous ranking model 34 in real-time on the production line. As a sample image of the web being produced is captured (56), feature extraction module 43 extracts features from the image (58). As described in further detail below, feature extraction module 43 dynamically determines which image features to compute on a per-image basis in real-time during manufacture of web material 20. For each sample image acquired during manufacture, feature extraction module 43 builds a "best feature set" in real-time by using the results from successively larger feature sets to trigger additional feature computations. Feature extraction module 43 may store a decision-making model (e.g., a Markov model) that defines a chain of dynamic triggers for selecting in real-time which features to extract from the sample image. Feature extraction module 43 applies the model to repeatedly dynamically trigger selection of additional sets of features to extract from the sample image until the extracted features are sufficient to compute a severity level of a non-uniformity defect for the web material (59, 60). As such, the number of features extracted for any given sample image, and the order in which the features are extracted, is dynamically determined in realtime by feature extraction module 43. The computer inspection system may compute the severity level by assigning a severity rating label such as "good" or "bad" or by producing a severity value such as "1.63" on a scale of 1 to 10. The computed severity for the non-uniformity defect may then be output to a user. For example, once the extracted features are sufficient for a severity rating to be assigned based on continuous ranking model 34, the severity rating may be output to the user. </p><p id="p0065" num="0065"> [0052] The techniques described herein may be utilizes for training new individuals to become expert raters. That is, the techniques described herein can be used to visually present examples of specific non- uniformity defects, possibly in response to adjustments made by operators to increase or decrease the number and severity of a particular non-uniformity defect. This allows new individual to visualize a defect in the same manner as existing experts and to develop a better understand of images used to train an expert rating system. For example, the computerized inspection system may process in real-time a 
<!-- EPO <DP n="15"/>-->
 sample image captured from a manufactured web material to extract a first plurality of features from the image. Rating tool 37, as implemented as training software for a user, may compute a severity level for the non-uniformity defect for the sample image of the web material with the computerized inspection system from the first plurality of features in accordance with the classification model and then display both the sample image and the severity level computed from the classification model to a user as training information. </p><p id="p0066" num="0066"> [0053] FIG. 4 is a flowchart illustrating an example operation of rating tool 37 in assisting experts 38 in assigning discrete ratings 53 to training data 35 (step 55 of FIG. 3). Initially, rating tool 37 receives training data 35 and the set of feature vectors extracted by the feature extraction software module as described above. </p><p id="p0067" num="0067"> [0054] At this point, rating tool 37 enters a clustering phase (63) in which the images are clustered based on the descriptive features extracted from the images. It is not uncommon for sets of images used for training and testing classification algorithms to be very large, often on the order of tens of thousands of images. Clustering and visualizing in detail this many images is typically not practical in a short period of time and may furthermore be unnecessary, since most large datasets contain significant redundancy, so that only a representative subset needs to be analyzed in detail. For these reasons, rating tool 37 automatically selects a representative subset of the images to aid expert 38 in the labeling process (64). To assist expert 38 in actively exploring the data and identifying the types of defects present, rating tool 37 automatically selects the subset so as to contain extreme examples of the different types of defects present within training data 35, as well as examples of images with normal levels of defectiveness. </p><p id="p0068" num="0068">[0055] In one example, rating tool 37 utilizes variance of pixel intensities for distinguishing cases of relatively extreme defectiveness, which has been observed to be sufficient in characterizing non- uniformities (i.e., textures) in images of web-based products. Furthermore, computing pixel variance is relatively computationally inexpensive, which may be advantageous for very large sets of training images. In the case the covariance matrix descriptors outlined above, the pixel intensity variance is given in the upper-left element of the matrix , so that no additional computation is necessary. In this example, the first step in selecting a subset is to identify the N/ images with the highest variance (64). These roughly correspond to the N most defective images in the training data 35. Since it is also important for the subset to be representative of the set as a whole, rating tool 37 also selects N2 images randomly from the remaining set. This set of N + N2 images comprises the initial subset So (denoted "subset 0" in FIG. 3). The sizes Nj and N2 are selected by the user. </p><p id="p0069" num="0069"> [0056] In addition, rating tool 37 generates the subset to include any outliers not already included in So that are not well represented by So (65). Each remaining image not in So is processed to identify its k nearest-neighbors (£N s) in a feature space using the distance function described above (eq. 4). The term "feature space" refers to the multi-dimensional space defined by the dimensions of a feature vector, such as the feature vector defined above in eq. 1. If the distances to all of its N s are greater than a 
<!-- EPO <DP n="16"/>-->
 threshold T<sub>d</sub>, then the image is considered an outlier. The parameters k and T<sub>d</sub> can be configured by expert 38, although default values may be used. This allows expert 38 to try different values and view the results. Example default values may be, for example, k = 5 and T<sub>d</sub> = 1.0. Rating tool 37 adds any outliers selected in this manner to the previously selected N<sub>/</sub> + N<sub>2</sub> images to form the complete subset Si (denoted "subset 1" in FIG. 1). </p><p id="p0070" num="0070"> [0057] After selecting representative subset Si of training images, rating tool 37 applies a clustering algorithm to the subset to form small groups of relatively similar images from those in subset S] (66). Rating tool 37 forms the clusters to present a more intuitive visualization of the training dataset and makes it easier for expert 38 to explore. In one example, rating tool 37 applies a bottom-up </p><p id="p0071" num="0071">agglomerative clustering algorithm to form image clusters in subset Si according to their covariance matrix descriptors. In this process, each image is initially treated as a separate cluster and successive clusters are identified using previously established clusters. For example, based on the inter-image distances computed using (4), rating tool 37 forms an agglomerative hierarchical linkage tree, which encapsulates the hierarchical inter-relationships between the training data. Rating tree terminates the process (i.e., "cuts off the linkage tree) at a certain point in order to generate the configured number of clusters N<sub>c</sub>, as specified by expert 38. Additional information on agglomerative hierarchical clustering can be found in W.H.E. Day and H. Edelsbrunner, "Efficient Algorithms for Agglomerative Hierarchical Clustering Methods", Journal of Classification, vol. 1, no. 1, pp. 7-24, 1984. </p><p id="p0072" num="0072"> [0058] Since there may be many clusters (e.g., several hundred in some cases), rating tool 37 also orders the clusters with respect to one another so that the most similar groups are displayed in close proximity to one another. This is accomplished by rating tool 37 forming a second agglomerative hierarchical linkage tree, in this case encapsulating the interrelationships between the clusters themselves. Thus, an ordering of the clusters can be obtained by observing the lowest level (leaf nodes) of the second tree. To form the second hierarchical linkage tree, rating tree 37 analyzes the image clusters in pair- wise fashion and computes pairwise inter-cluster distances between each cluster pair. The inter-cluster distances between each of the clusters is used to form the second linkage tree. In one example, rating tree 37 computes the distance between two clusters as the median of the individual distances between the images in the two clusters. Rating tool 37 utilizes the arrangement of the leaf nodes of the second tree to control display of the image clusters, thereby displaying the most similar image clusters in close spatial proximity to one another. This aids expert 38 in forming an understanding of the defects present within and represented by the training data. </p><p id="p0073" num="0073"> [0059] After clustering the training images by developing the linkage trees, rating tool 37 presents a user interface by which the expert is given an opportunity to visualize the clusters and re-assign images in cases where the clustering is visually unacceptable (67). The user then assigns expert ratings to each cluster of images as opposed to labeling each image independently (68), and rating tool 37 propagates these expert ratings to the remaining set of images without requiring further user interaction, thus 
<!-- EPO <DP n="17"/>-->
 resulting in expert ratings for the entire dataset (69). That is, the rating tool 37 applies algorithms described herein to automatically assign expert ratings to the entire dataset of training images. In other words, expert 38 need only assign expert ratings to all (or some) of the image clusters in the subset Sj, in each identified defect class, using the user interface provided by rating tool 37. Rating tool 37 automatically propagates these expert ratings to the remaining unlabeled images, including those images not within in subset S<sub>}</sub>. </p><p id="p0074" num="0074"> [0060] For each unlabeled image /„, rating tool 37 computes the pairwise distances from this image to each labeled image (i.e., to each image within subset Sj to which an expert ratings has been assigned) using the distance function (eq. 4). These distances are then converted to pairwise affinities according to: 
<img id="imgf000017_0001" he="11" wi="25" file="imgf000017_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0075" num="0075">where the bandwidth parameter σ is chosen according to a heuristic operating on the distances cC<sub>c</sub>^I Ί <sub>·</sub> Th<sup>ese</sup> affinities are normalized to weights: </p><p id="p0076" num="0076">{i</p><p id="p0077" num="0077">T<sub>:</sub> «{7.,. </p><p id="p0078" num="0078">The quantity w(J ,J ) corresponds to the probability of transitioning from image /„ to image in a random walk through feature space and w is normalized such that ^ ¼&gt;(/ ,/,.) = 1 · </p><p id="p0079" num="0079"> [0061] Finally, the probability of image /„ belonging to the expert rating e in this defect class is computed as: </p><p id="p0080" num="0080"> p<sub>e</sub>(I<sub>u</sub>) = «,<sup>&lt;</sup>(/„, I( l(Ie<sub>t</sub> G e). f 7) where I is the indicator function, so that <sup>e e</sup>) <sup>~</sup> ^ if the labeled image ¾ has been assigned expert rating e in this defect class, and is zero otherwise. The probability of membership p<sub>e</sub>(I<sub>u</sub>) is computed for each possible expert rating e, and the one with the highest probability is chosen as the Expert Rating for the unlabeled image /„. Rating tool 37 repeats this process for every unlabeled image, in each defect class. Further exemplary information related to label propagation can be found in X. Zhu and </p><p id="p0081" num="0081">Z. Ghahramani, "Learning from Labeled and Unlabeled Data with Label Propagation", CMU CALD Technical Report CMU-CALD-02- 107, 2002. </p><p id="p0082" num="0082"> [0062] Returning to FIG. 4, after expert 38 has assigned expert ratings to each cluster of images and the labels have been automatically propagated to the remaining images, rating tool 37 allows the expert to explore training data 35 and adjust the label assignments if necessary (70) to ultimately produce expert ratings for the entire set of training data 35 (71). In this way, rating tool 37 provides functionality for 
<!-- EPO <DP n="18"/>-->
 automatic subset selection and the subsequent propagation of expert ratings to the larger set of images within training data 35. As a result, rating tool 37 may allow experts 38 to easily manipulate and assign ratings to large datasets (e.g., on the order of tens of thousands of images) even though the images may contain significant redundancy. </p><p id="p0083" num="0083"> [0063] FIG. 5 is an illustration of an example window 80 presented by the user interface of rating tool 37 by which expert 38 configures parameters to control the clustering process. In this example, window 80 includes input mechanisms by which expert 38 specifies a directory of the training images, the format of the training images, a directory for outputting results and a selection indicating whether the rating tool should perform a new clustering of the images or read is input the results from a previous clustering process. </p><p id="p0084" num="0084"> [0064] In addition, expert 38 may specify certain parameters for controlling the clustering process. In particular, window 80 includes input fields for specifying the number of clusters into which rating tool 37 is to organize the training images. As described above, rating tool 37 utilizes the desired number of clusters specified by the user to truncate the clustering process upon generating the first linkage tree to have a number of leaf nodes that meet or exceed the specified number of clusters. In addition, expert 38 can specify whether training data 35 is a large dataset and that rating tool 37 should automatically identify a representative subset of images for clustering as described herein. In this case, expert 38 can also specify the parameters for controlling the size of the representative subset So, i.e., the number N of images having the highest variance to include (150 in FIG. 5) and the number N<sub>2</sub> of images to randomly select from the remaining images (50 in FIG. 5). This set of N<sub>/</sub> + N<sub>2</sub> images comprises the initial subset So. In addition, expert 38 can specify whether rating tool 37 is to include outliers in the representative set S] and, if so, the number k of nearest-neighbors ( N s) to examine in feature space for each image (5 in FIG. 5) and the threshold T<sub>d</sub> for characterizing the image as an outlier (1.0 in FIG. 5). </p><p id="p0085" num="0085">[0065] FIG. 6 is an illustration of an example cluster view window 90 presented by rating tool 37 to display the results of the clustering operation. As can be seen, the image clusters are displayed visually in two separate panels 91 A, 9 IB, through which the user can navigate and explore the clusters using the embedded hyperlinks. Left-hand panel 91 A provides a high-level overview of the clustering results by displaying a single representative (centroid) image from each clusters 92A-92N. For each cluster, panel 91 A displays the representative image, an identifier associated with the cluster and, in parentheses, the number of images assigned to that cluster. For example, cluster 92A has an identifier of "10" and three images have been assigned to the cluster. Rating tool 37 arranges clusters 94A-94N within scrollable panel 91 A in accordance with the second agglomerative hierarchical linkage tree described above so that clusters containing similar images are placed in close proximity to one another within the panel. In other words, rating tool 37 may arrange clusters within the scrollable panel 91 A in accordance with the leaf nodes of the second agglomerative hierarchical linkage tree. 
<!-- EPO <DP n="19"/>-->
 [0066] To explore in more detail, expert 38 can then select (e.g., click on) the representative image or identifier for any of clusters 92 in order to view the images contained therein within right-hand panel 9 IB. In the example of FIG. 6, expert 38 has selected cluster 92A (i.e., cluster having identifier "10") for review. In this example, panel 9 IB shows the three images that have been assigned to the cluster and all bear a strong resemblance to one another, indicating that the clustering algorithm appropriately grouped them. Due to the grouping and ordering of the images in subset SI as presented by panel 91 A, expert 28 can explore clustered training data 35 in a very intuitive manner. This may be advantageous over other techniques in which a user may simply be presented with a large unorganized collection of images for manual review and label assignment. The clustering and visualization capabilities described herein may simplify the data exploration task for expert 38, and enable the expert to quickly identify the types of defects present in the representative training data. </p><p id="p0086" num="0086"> [0067] As shown in FIG. 6, cluster view window 90 includes input region 96 with which expert 38 interacts to modifying the cluster assignments of individual images, including the ability to move an image to either a different cluster or to a new one. In some cases, rating tool 37 records when the user indicates that an image should be re-assigned to a different cluster and uses this information to automatically update the clustering based on this new input. For example, rating tool 37 may automatically determine which images in the original cluster are similar to the moved image and, based upon this determination, also move these images to the new cluster. In addition, input region 98 allows the user to interact with the clusters themselves, including the ability to merge two clusters, and the ability to physically move a cluster to a different position in the display order. Rating tool 37 automatically updates display panels 91 A, 9 IB in cluster viewing window 90 in real-time to reflect the changes made in the cluster assignments. In this way, rating tool 37 may be used in a manner that allows expert 38 to have the final say regarding any type of grouping or assignment of the representative images within training data 35. This also provides an extra measure of flexibility in terms of visualization, since ultimately the purpose of the clustering and ordering operations are to provide an enhanced ability to visualize and rate the training data. </p><p id="p0087" num="0087"> [0068] In addition, cluster view window 90 includes input region 100 for defining the number of defect classes present within training data 35. Cluster view window 90 also includes input region 104 for assigning expert ratings to the images. Each of input regions 100, 102 are discussed in further detail below. </p><p id="p0088" num="0088"> [0069] FIG. 7 shows input region 100 of viewing window 90 in further detail. In this example, expert 38 has indicated that three defect classes exist in the training data based on the review and exploration of clustered training data 35 via cluster viewing window 90. As shown in FIG. 8, once expert 38 sets the number of defect classes, cluster viewing window 90 presents another menu 102 in the same location to allow the user to enter the names of the defect classes which provide a meaningful way to identify them. In the example of FIG. 8, expert 38 has entered names of "chatter," "mottle" and "streaks" for the three 
<!-- EPO <DP n="20"/>-->
 types of defect classes identified within training data 35. Display panels 91A, 91B in the cluster viewing window 90 remain open while expert 38 interacts with input region 100 and menu 102, so that the expert still has the option to navigate and visualize the clustered training data while assigning the number of defect classes for the representative training data and names for each of the defect classes. </p><p id="p0089" num="0089">[0070] FIG. 9 shows input region 104 of cluster viewing window 90 for assigning expert rating labels to image clusters within the representative subset Sj of training data 35. Once expert 38 has interacted with input region 100 and menu 102 to assign the number and names of the defect classes present in the data, rating tool 37 allows the expert to interact with input region 104 to assign expert ratings to the images of training data 35. In order to greatly simplify this task, rating tool 37 allows expert 38 to assign rating labels to entire clusters, instead of having to label individual images, which could be quite tedious and error-prone. In addition, expert 38 has the option to not label any cluster. In subsequent processing, when the labels are propagated the remaining images not in subset Sj, the labels are also propagated to the images in any clusters which are not labeled. As can be seen in FIG. 9, cluster viewing window 90 allows expert 38 to label all defect classes in a cluster simultaneously. For example, in FIG. 9, expert 38 has specified labels of "5", "1" and "1" for the defects "chatter," "mottle" and "streaks" within cluster "13" of the training data. Furthermore, in one example, rating tool 37 puts no restriction on the types of expert ratings that can be assigned. Labels can be numerical, such as the " 1" and "5" labels shown here, or they could be textual "acceptable" and rejected" labels. Once expert ratings have been assigned to a cluster, panel displays 91 are updated in real-time to reflect these changes. </p><p id="p0090" num="0090"> [0071] FIG. 10 is an illustration of a final expert rating viewing window 110 presented by rating tool 37 with which expert 38 can visualize and modify the expert ratings in each defect class. Expert rating viewing window 110 displays the final expert rating labels for all images. As shown in FIG. 10, expert rating viewing window 110 contains two side-by-side HTML display panels 112, 114 through which the user can visualize the results by navigating through the pages using the embedded hyperlinks. Expert rating viewing window 110 also contains menu options 120 on the left-hand side for modifying expert ratings. </p><p id="p0091" num="0091"> [0072] In terms of visualization, expert rating viewing window 110 displays the results of the labeling process in a way that is intuitive and easy for expert 38 or other users to understand. As one example, expert rating viewing window 1 10 displays the results for each defect class in a separate HTML page. In each defect class, the images with each possible expert rating are shown within panel 114 as a separate part of the HTML page for that defect class. For example, as shown in FIG. 9, HTML panel 112 lists the defect classes. Upon selection of one of the defect classes, HTML panel 114 shows the images for each possible expert rating. This allows expert 38 to view defects in a cluster independent manner based on the different labels of that defect as assigned to the images. In the example of FIG. 9, the software tool presents the results in "Defect Class 1 (chatter)" starting with the images that have received a label of "1 " 
<!-- EPO <DP n="21"/>-->
 on the top of the page. HTML panel 114 is vertically scrollable so that expert 38 may review each label utilized for the defect class and, for that label, each image assigned with that label. </p><p id="p0092" num="0092">[0073] To further enhance the user's ability to comprehend the data, rating tool 37 performs another clustering operation to cluster the images within each possible expert rating in a given defect class into relatively small groups of similar images. Rating tool 37 generates HTML panel 114 for the currently selected defect class (e.g., "Defect Class 1 (chatter)") which shows only the centroid image of each cluster. This helps keep only a small, manageable number of images on the display. For example, for label "1" within the "chatter" defect class, rating tool 37 has generated HTML panel 114 to display centroid image 116. Expert 38 can click on the centroid image for each cluster in order to navigate to another HTML page on which all images contained in that cluster are displayed. </p><p id="p0093" num="0093"> [0074] With respect to the clustering operation for generating HMTL panel 114, rating tool 37 performs a separate clustering computation within each possible expert rating for every defect class. That is, as described, each image receives an expert rating in every defect class. In other words, each defect class contains all the images, but the images are in general distributed differently among the possible expert ratings in each defect class. For example, a certain image might have an expert rating of "1" in the defect class "chatter", but an expert rating of "5" in the defect class "mottle." Rating tool 37 performs separate clusterings so as to compute independent linkage trees for each label of each defect class. As one example, rating tool 37 may compute clusterings in defect class "chatter" for the images with expert Rating "1" and those with the expert rating "5," and likewise in the other defect classes. </p><p id="p0094" num="0094">[0075] In one example embodiment, the clusters are computed as follows. The set of images with expert rating e in defect class c is referred to as g<sup>c</sup> . The set g<sup>c</sup> is made up of both images from the initial subset S], as well as other images from ^to which the expert ratings were propagated. Images $' ΓΛ $<sub>Ι</sub> represent the images with expert rating e in defect class c that were in the initial subset Si that we labeled previously. Since the images in Si were clustered previously, each image in c<sup>e</sup> has already been assigned to a cluster. Rating tool 37 uses these cluster assignments to initialize the clustering of ·</p><p id="p0095" num="0095">That is, this is used as an initial clustering to start the process, then these clusters are modified as new images are added to them sequentially. For each image in <sup>"</sup>— (i.e., the images in <sup>c</sup> that do not already have cluster assignments), we assign it to the cluster in to which it is closest. This procedure is more efficient than computing an entirely new clustering for each set g<sup>c</sup> , since it exploits our previous clustering of Si, and clusters the remaining images n<sup>'</sup>g<sup>'</sup> incrementally. </p><p id="p0096" num="0096">[0076] Expert rating viewing window 110 also includes menu options 120 on the left-hand side for modifying expert ratings for any image by entering the image name. Using menu options 120, the user 
<!-- EPO <DP n="22"/>-->
 can both view the current expert ratings of an image in all defect classes, as well as change them if necessary. </p><p id="p0097" num="0097"> [0077] The expert ratings 53 ultimately produced by rating tool 37 can be utilized by training module 41 to generate a continuous ranking of the training images and produce continuous ranking model 34 based on the severity of their non-uniformities. FIG. 11 illustrates a continuous three-dimensional (3D) surface, referred to as a "manifold" 116, in reference to which the algorithms applied by training module 41 to produce continuous ranking model 34 are readily understood. The feature vector associated with each image can be thought of as a single point in a high-dimensional space. However, since all of the images are of the same type of material and are taken with the same imaging device or other sensor, under the same imaging conditions and geometry, the underlying number of degrees of freedom can be lower than the dimensionality of the embedding feature space. It is therefore useful to view each training image as one of the high- dimensional points lying on manifold 116 (i.e., the continuous 3D surface), or a collection of manifolds, which is embedded in this space, but which may have a lower intrinsic dimensionality (degrees of freedom) than the overall space. An illustrative example is shown in FIG. 11 for the simple case of a 3-dimensional space with a 2-dimensional object embedded in it, although in practice the dimensionality of the feature vectors is typically much higher. Further example details on manifold embeddings in high-dimensional spaces are described in H.S. Seung and Daniel D. Lee, "Cognition: The Manifold Ways of Perception," Science, vol. 290, no. 5500, pp. 2268-2269, Dec. 22, 2000. </p><p id="p0098" num="0098"> [0078] As one simple example with respect to FIG. 1 1 , a set of training images in which all of the training images show the same web material with different levels of down-web chatter. In this simple case, even though each training image may be represented by a high-dimensional feature vector that captures various texture -related characteristics, in this case there may be only one underlying degree of freedom within this set of images, corresponding to the level of chatter. As such, these training images can be viewed as points that lie on a one-dimensional manifold, e.g., a line that snakes through a curvy path in the high- dimensional space of FIG. 1 1. </p><p id="p0099" num="0099"> [0079] One advantage of this representation of feature vectors as points on a manifold is that the algorithms of training module 41 exploit this underlying structure in the training data in order to make use of only the most relevant and useful information contained therein. Moreover, the embedding in lower- dimensional spaces can be useful when learning from relatively few high- dimensional feature vectors. Algorithms exist for performing manifold embedding, which is the term used herein for the task of recovering low-dimensional representations of high-dimensional data while preserving the underlying structure. Some examples of such algorithms include Self-Organizing (Kohonen) Maps, Multi- Dimensional Scaling, Isomap, and Locally-Linear Embedding. One example algorithm is Diffusion Maps, as described in further detail below. Further details on Diffusion Maps can be found in S. Lafon and A.B. Lee, "Diffusion Maps and Coarse-Graining: A Unified Framework for Dimensionality 
<!-- EPO <DP n="23"/>-->
 Reduction, Graph Partitioning, and Data Set Parameterization," IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 28, no. 9, pp.1393-1403, Sep. 2006. </p><p id="p0100" num="0100"> [0080] Given the representation of each training image as a point on a manifold in feature space, the algorithms of training module 41 perform a discrete random walk around the feature space. During this random walk, for each time step, the random walker can move from one point on the manifold to another, without ever leaving the manifold. In this context, the algorithms compute the probability of </p><p id="p0101" num="0101">transitioning from a point on the manifold to all other points. In general, this transition probability is typically higher for nearby points in the manifold and lower for distant points. However, the algorithms take into consideration the expert ratings, penalizing for transitions between points with different discrete labels. These transition probabilities are then used to propagate the expert ratings from each point to all the surrounding points, so that every point ends up with some fraction of the discrete labels from the other points, which allows us to compute a continuous severity value for each point corresponding to one of the training images along the continuous surface. Both the extracted features and the provided (expert) rankings are exploited at this stage. </p><p id="p0102" num="0102"> [0081] FIG. 12 is a flowchart showing in more detail an example process by which training module 41 processes the feature vectors to learn a continuous ranking of the training images and produce continuous ranking model 34. </p><p id="p0103" num="0103"> [0082] First, training module 41 computes an affinity matrix K of size N-by-N, where N is the number of training samples (step 120). For example, to learn a continuous ranking of the N training images, the set of feature vectors are defined as 1■ 2 ? - - · - <sub>5</sub> with corresponding expert ratings ^1 ; ¾<sup>■</sup> · · · &lt; Qv. </p><p id="p0104" num="0104"> C- { 1 3 'Si- Each discrete rating is assumed as either a "1," "3," or "5," i.e., ' &lt;· ' ' &gt; , where a "1" is a sample that is acceptable, and a "5" is a sample that is clearly unacceptable. The expert ratings can be either more or less finely discretized than this, and the algorithms are not limited to this particular example.</p><p id="p0105" num="0105">Given the feature vectors, training module 41 computes the affinity matrix K of size N-by-N, where each element can be given, for example, by 
<img id="imgf000023_0001" he="8" wi="101" file="imgf000023_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0106" num="0106"> [0083] The affinity matrix gives a measure of similarity between each pair of training samples in feature space, and others different than (eq. 8) can be used, e.g., polynomial ones. The bandwidth parameter σ defines how quickly the exponential decays as the distance between a pair of points increases. In practice, a local parameter σ is estimated for each training sample according to a heuristic, such as the median distance to its k-nearest neighbors. In this case, the denominator of Equation (8) becomes the product of the local bandwidths corresponding to samples X, and X/. </p><p id="p0107" num="0107"> [0084] The distance used in the affinity matrix can be simply the Euclidean distance as in the example in (8) or more sophisticated ones, depending on the features, such as covariance distances or Kullback- Leibler distances. 
<!-- EPO <DP n="24"/>-->
 [0085] Next, from the affinity matrix, the transition probabilities can be calculated (step 122) according to: </p><p id="p0108" num="0108"> Pa( i, j) = k(i, j)/∑<sub>l</sub> k( i, l)<sub>f (9)</sub> </p><p id="p0109" num="0109">which corresponds to the probability of transitioning from X, to Xy on a random walk in feature space, based only on the affinities between points. This is a normalization of the affinity matrix K, which ensures that its rows are valid probability distributions (i.e., sum to one). </p><p id="p0110" num="0110"> [0086] In order to take the discrete labels given by the expert ratings into account, training module 41 compute the prior probabilities of transitioning from X, to Xy </p><p id="p0111" num="0111"> Pb(i ) = exp( -- c, - qf/a <sub>(10)</sub> </p><p id="p0112" num="0112">where σ<sub>ρ</sub> is a bandwidth parameter for this prior probability term (step 123). The expression for P<sub>b</sub>(iJ) penalizes more heavily for expert ratings that are farther part, so that the choice of the numerical values assigned to discrete labels is important in this context. </p><p id="p0113" num="0113"> [0087] Training module 41 then computes the overall transition probability for each pair of training samples by the product of p<sub>a</sub>(i,j) and P<sub>b</sub>(iJ) (in step 124), </p><p id="p0114" num="0114"> P( i ) = Pa(i )Pb{ i ). (1 1) </p><p id="p0115" num="0115">The components of the automatic diffusion matrix and the penalty for violating expert ratings may be combined in other ways. Collectively, the overall transition probabilities p(i,j) form the matrix P. Each entry in P represents the probability of transitioning between the corresponding pair of points in one time step. </p><p id="p0116" num="0116"> [0088] Training module 41 propagates the random walk transition probabilities for t time steps by raising the matrix P to the power t (step 125) </p><p id="p0117" num="0117"><sup>P</sup>t = P<sup>f</sup> , (12) </p><p id="p0118" num="0118">where Pt(iJ) corresponds to the probability of transitioning from X, to Xy in t time steps. The number of time steps t has no physical meaning, but is a configurable parameter that can be set in the software application by the user. </p><p id="p0119" num="0119"> [0089] Based on these transition probabilities, training module 41 computes diffusion distances (step 126). Each such distance is a measure of dissimilarity between each pair of points on the manifold. Two points are assigned a lower diffusion distance (i.e., are said to be closer together in diffusion space) if their distributions of transition probabilities are similar. In other words, if their respective rows of the matrix P<sub>t</sub> are similar to one another, the two points are assigned a lower diffusion distance. In one example, the squared diffusion distances are computed according to the equivalent expression:</p><p id="p0120" num="0120"><img id="imgf000024_0001" he="4" wi="103" file="imgf000024_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="yes"/>
 where I — ^ 1^1, i.e., Ψι Άηά <sub>/</sub> are the eigenvectors and eigenvalues of P, respectively. This may avoid the use of resources associated with explicitly raising the matrix P to the power f, which can be a 
<!-- EPO <DP n="25"/>-->
 computationally expensive operation if numerous training samples are available. Fast techniques for computing eigenvectors can be used, in particular those developed to compute the first eigenvectors corresponding to the largest eigenvalues. </p><p id="p0121" num="0121"> [0090] These diffusion distances, which are proportional to the dissimilarity between pairs of samples, are converted by training module 41 to weights (step 129) that are proportional to the similarities according to: 
<img id="imgf000025_0001" he="8" wi="103" file="imgf000025_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0122" num="0122">where O<sub>w</sub> is another bandwidth parameter, and η is simply a normalization constant which ensures that rows of the weight matrix W sum to one. Finally, training module 41 generates continuous ranking model 34 ("model 34") by computing the non-uniformity severity ranking value for each of the training samples x, (step 130) by: </p><p id="p0123" num="0123"> n =∑j W{i, j) Cj </p><p id="p0124" num="0124"> (15) </p><p id="p0125" num="0125"> The resulting ranking value r, is a weighted average of the Expert Ratings of all the training images. However, even though the expert ratings may be highly discrete (e.g., "1", "3", or "5"), the ranking values are on a continuous fine scale. Furthermore, the algorithm parameters can be adjusted by a user interface so as to give a ranking which is continuous overall. The weights in (eq. 15) are derived by the diffusion distance process that combines automatic image/feature comparisons with expert rankings. Other ways of normalized weighting can be considered, e.g., exponential weighting functions. </p><p id="p0126" num="0126">[0091] The process described above with respect to FIG. 12 can override incorrect labels in the expert ratings. That is, if the expert had mistakenly labeled a certain image as, for example, a "1" instead of a "5", the process could still assign this point a ranking value closer to the other "5" points. This is primarily due to the influence of the two different terms in the product of Equation (14). While the second term takes the discrete labels into account, the first term is based only on the intrinsic structure of the data on the manifold. The relative effects of these terms are controlled by their respective bandwidth parameters. If O<sub>p</sub> is set to a large value, then the prior probability term will have very little influence on the transition probabilities. </p><p id="p0127" num="0127"> [0092] Further, multiple experts can be combined as well. In this case, training module 41 utilizes an additional weight on the computation of the affinity matrix for each one of the experts. Reliability of the different experts can be assessed in the same fashion. </p><p id="p0128" num="0128"> [0093] FIG. 13 is a flowchart showing in more detail an example process by which charting module 39 utilize continuous ranking model 34 ("model 34") in real-time to detect the presence of non-uniformity defects and to provide a continuous charting of a severity level for each defect. </p><p id="p0129" num="0129"> [0094] As a new image of the web being produced is captured (130), features are extracted in the same way as for the training images (132). Specifically, given the feature vectors of the training samples</p><p id="p0130" num="0130">X-j , X2 , .. - , X/v <sub>s</sub> along with corresponding ranking values learned in the training phase ^<sup>■ ■■■■</sup> , the 
<!-- EPO <DP n="26"/>-->
 function of the real-time charting module 39 is to estimate the ranking value for a new feature vector Q extracted from the new image, which is referred to herein as the query sample. </p><p id="p0131" num="0131"> [0095] Initially, charting module 39 locates the K-Nearest Neighbors of Q among the training samples X-| , X2 , .... X/v f<sub>or a</sub> g ven defect (134). In one embodiment, charting module 39 uses the Euclidean distance in feature space to find the nearest neighbors, given by: </p><p id="p0132" num="0132"> d, <sup>■</sup>Ί Ι 2. (16)</p><p id="p0133" num="0133">Charting module 39 may present an interface by which the user is able to specify the number of nearest neighbors, K, as a configurable parameter. FIG. 14 is a graph providing a logical representation of finding the k-nearest neighbors in a 2-dimensional feature space. In this example, six nearest neighbors are identified for query point 135 within the feature space. </p><p id="p0134" num="0134"> [0096] Several techniques may be used to locate the k-nearest neighbors. One technique is to perform an exhaustive search by computing the distance from (the query point) to each sample </p><p id="p0135" num="0135">X-j . X2 , ... : X v in the training set. However, this type of exhaustive search can be computationally expensive, especially if the number of training samples is large and the feature space is high dimensional. Two other techniques are described. One is an exact search, i.e., the technique returns the same results as an exhaustive search but in a more efficient manner, and the other an approximate search. Both techniques provide significant improvement in terms of computational overhead in comparison to the exhaustive search. Any k-nearest neighbor search methods can be used, these just represent two examples. </p><p id="p0136" num="0136"> [0097] One technique for performing a more efficient K-Nearest Neighbors (kNN) search, but which still gives the same results as the exhaustive search, is to first organize the training samples Xl ; X-2 ? · ·<sup>■</sup> &gt; X/V into a "ball tree." The ball tree is a data structure which organizes the training samples into hierarchical groupings based on their proximity in feature space. At the lowest level of the tree, each "leaf node will contain one or several samples which are close together. As charting module 39 progresses higher up the tree, the groupings contain larger numbers of points, but still grouped based on proximity. Finally, at the top of the tree, the "root" node contains all points in this training set. Note that this structured is computed only once for the training samples, and then will be used multiple times for the queries. </p><p id="p0137" num="0137">Further details on use of a ball tree are described in A.W. Moore, "The Anchors Hierarchy: Using the Triangle Inequality to Survive High Dimensional Data," Proceedings of the 12<sup>th</sup> Conference on </p><p id="p0138" num="0138">Uncertainty in Artificial Intelligence, pp. 397-405, 2000. </p><p id="p0139" num="0139"> [0098] Once the training samples are organized in this hierarchical ball tree, they can be searched efficiently to find exactly the kNNs of a new query point. The algorithm for performing this search can be recursive, and exploits the intrinsic structure of the training data in order to search it efficiently. For </p><p id="p0140" num="0140"> y </p><p id="p0141" num="0141">example, if it is known that the query point is close to one particular node in the ball tree, then charting module 39 does not waste time to continue searching for the kNNs of the query point in another 
<!-- EPO <DP n="27"/>-->
 node far away. The computational price for this increased efficiency at search time is in the complexity of building the tree, which contains only the training samples and can thus be constructed offline. </p><p id="p0142" num="0142">[0099] As a second example, further computational efficiency can be achieved by using approximate kNN searches, which are designed to give results close to those of the exhaustive search, although they are not guaranteed to be exactly the same. One such approach is Locality- Sensitive Hashing (LSH). As before, charting module 39 organizes the training samples based on their structure in feature space in order to enable rapid kNN search. In this case, several hash tables are formed that index the training samples. Each hash table is formed by taking a random projection of the training samples, resulting in a one-dimensional representation for each sample, and then binning the samples along this line into a set of discrete groups. Repeating this procedure, several hash tables are formed and the approximate kNNs of a point can be quickly found with high probability based on these hash tables. An illustration of this is shown in FIG. 15, for the simple case of three hash tables 140 into which each of the three training samples 141 A, 141B and 141C and the query sample 142 are hashed. In this case, indexing the resulting hash tables results in correctly identifying the two nearest-neighbors 141A, 141B of the query sample. Further details on Locality-Sensitive Hashing (LSH) are described in "Locality-sensitive hashing: </p><p id="p0143" num="0143">A. Andoni and P. Indyk, Near-Optimal Hashing Algorithms for Approximate Nearest Neighbor in High Dimensions," Communications of the ACM, vol. 51, no. 1, pp. 1 17-122, Jan. 2008. </p><p id="p0144" num="0144">[00100] Returning to the flowchart of FIG. 13, after identifying the /(-Nearest Neighbors, charting module 39 computes the reconstruction weights for the query point that best express the query point as a linear combination of its /(-nearest neighbors (136). The weights can be either positive or negative, and can be computed by minimizing the following error: 
<img id="imgf000027_0001" he="8" wi="81" file="imgf000027_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0145" num="0145">where the tv,-'s are the reconstruction weights, and Ω is the set of /i-nearest neighbors. The error function (17) can be minimized in closed form. The weights can also be computed in a closed form. </p><p id="p0146" num="0146">[0100] Next, charting module 39 computes the severity ranking value of the query point for the particular defect as the weighted average of the ranking values of its /i-nearest neighbors for that defect (138). In one example, the severity ranking value can be calculated as: </p><p id="p0147" num="0147"> ∑en <sup>w</sup>i<sup>r</sup>' (18) </p><p id="p0148" num="0148"> As before, the non-uniformity severity ranking value of the query point is on a continuous scale. This approach allows the query point to receive a ranking value that is close to those of the most similar images in the training set. It is contemplated that other out-of-sample techniques can be used instead of the nearest-neighborhood technique. </p><p id="p0149" num="0149"> [0101] Finally, charting module 39 outputs the computed severity ranking value to the operator (140). The output may take the form of updating a chart so as to show a trend in the severity ranking for the defect, or charting module 39 may simply output the severity ranking value as a single number. For 
<!-- EPO <DP n="28"/>-->
 example, charting module 39 may update a chart upon processing each new image so as to graph the severity level of the non-uniform defect for the web material over time. The computerized inspection system or other component may subsequently receive input from the user specifying a change to a process control parameter for the manufacturing process, and may adjust the process control parameter in response to the input. Additionally, the user may view live images captured from the web or filtered version of the images that enhance visualization of the defect. For instance, a Gabor filter or other processing filter may be applied. The filters available to the user may be based on the filter(s) used to extract features from the training images when developing the model. In this way, the user may adjust process parameters and view the effects of the adjustments with respect to specific non-uniformity patterns by viewing the filtered images obtained in real-time from the web. </p><p id="p0150" num="0150"> [0102] FIG. 16 is a flow diagram showing an example a dynamic system architecture in which feature extraction module 43 of analysis computer 28 processes streams of image data from acquisition computers 27 to dynamically determine which image features to compute on a per-image basis in realtime during manufacture of web material 20. As shown, feature extraction module 43 dynamically builds a "best feature set" in real-time by using the results from successively larger feature sets to trigger additional feature computations. </p><p id="p0151" num="0151"> [0103] After capturing a new image of the web material, analysis computer 28 may perform some preprocessing, such as edge trimming, flattening, or the like, and compute some certain statistics for logging or output display presentation. Next, feature extraction module 43 reaches a first trigger point 160 where the decision is made whether to trigger additional processing by analyzing the features computed for the new image up to that point in the flow. For example, feature extraction module 43 may apply a base feature set that has been identified by the operator as simpler and faster processing in comparison to the other feature extraction computations. At trigger point 160, feature extraction module 43 may apply some morphological (blob) analysis using so called blob recipes to detect point defects using the base feature set. In parallel, feature extraction module 43 determines whether the base feature set provides sufficient evidence to assess non-uniformity variation within the new image within a level of confidence. For example, the decision regarding whether or not to trigger more features in order to help classify the current image can be made according to a simple heuristic. For example, one may set a simple decision rule such that, if an expected reduction in cost of misclassifying the image with respect to the non- uniformity defect from adding the dynamically determined next-best set of features is above some threshold, then feature extraction module triggers extraction of the additional features. The expected reduction in cost, i.e., the required level of confidence, can be determined using the learned Markov model, as further described below. If not, feature extraction module 43 proceeds to trigger point 162 and triggers successively more complex processing. That is, at second trigger point 162, feature extraction module 43 performs a second set of feature extraction computations, .e.g., image </p><p id="p0152" num="0152">filtering/marginalization, in order to extract additional features. This second set of feature extraction 
<!-- EPO <DP n="29"/>-->
 computation may be more complex and computationally intensive than the base feature set initially performed. Feature extraction module 43 again attempts to identify and degree and type of non- uniformity using image recipes, also referred to as classifiers, which are mathematical models whose inputs are some or all of the features extracted for the new image up to this point in the flow. </p><p id="p0153" num="0153">[0104] The processes repeats as a chain of trigger points, where at each trigger point the decision is made whether additional, more complex, image processing computations are necessary in order to determine the degree at which any type of non-uniformity exists within the image. This determination at each trigger point is made based on the features computed for the new image up to that point in the flow. </p><p id="p0154" num="0154">[0105] In some situations, a sample image captured in real-time from the web material may contain multiple patterns. In accordance with the process set forth in FIG. 16, feature extraction module 43 operates such that the features that are likely to enable the most accurate classification of any non- uniformity are triggered. This process may be performed for every individual sample imaged by the computerized inspection system. Alternatively, feature extraction module 43 may operate under a polling scheme, in which the necessity to trigger or retract process components is checked after every X samples, where X is a configurable parameter. </p><p id="p0155" num="0155"> [0106] In one example, feature extraction module 43 is configured to operate in accordance with a controlled Markov model for dynamic triggering. In this embodiment, feature extraction module 43 includes configuration data that defines a state vector x(t) which serves as a sufficient summary of information at any triggering step t relevant to future triggering events. For completeness, a triggering event any point in the process for analyzing a single image sample where feature extraction module 43 has an opportunity to select additional features to compute. </p><p id="p0156" num="0156"> [0107] In one example, the state vector is defined through a family of classifiers {0<sub>;</sub>(t)}<sub>i=1</sub><sup>N</sup>, where at triggering step t, &lt; <sub>;</sub>(t) only depends on the features triggered at step t and classifier family at the previous step {&lt; ;(t - l)}i<sub>=</sub>i<sup>N</sup>. An example of how such a sequence of classifier families may be constructed using the ROC-optimal classifier enhancement algorithm is described in PCT International Pub. No. </p><p id="p0157" num="0157">WO/2010/059679. In this example, the binary classifier consists of a set of decision rules (i.e., thresholds on possibly multiple variables) that are learned from labeled training data. However, in general any discrete classification algorithm could be used. Other examples included Support Vector Machines (SVM), Logistic Regression, or Decision Trees. </p><p id="p0158" num="0158"> [0108] With respect to defining the state vector of feature extraction module 43, the i<sup>th</sup> element of the state vector at step t is taken as the classification assigned by Φ;(ί), i.e. x;(t) = Φ;(ί). One example is binary classification, so that x(t)€{0, 1 }<sup>N</sup>, however, the method discussed herein can be extended to the multinomial case. </p><p id="p0159" num="0159"> [0109] The configuration data of feature extraction module 43 includes a control variable that determines the action at a given trigger event, i.e., the additional set of one or more features not already computed that are designated to be computed next. To simplify the discussion, it is assumed a single 
<!-- EPO <DP n="30"/>-->
 feature /is to be selected at each trigger event. However, the algorithm is similar if /is taken to represent a plurality of features instead. Since the classifiers determine the state vector through judgments on the current sample image, and they only depend on / and the family of classifiers at the previous step, feature extraction module 43 computes a prediction of a future state vector on the basis of the current state vector using the conditional distribution P<sub>f</sub>(x(t + l)|x(t)) parameterized by the control / to be optimally chosen. That is, P<sub>f</sub> is referred to as the transition function of the Markov chain. Feature extraction module 43 estimates the transition function in order to implement a control strategy. Given a training set of sample images and associated sequence of classifier families, feature extraction module 43 may be configured to use a simple histogram estimate P , where Pf(x(t + l)|x(t)) is the number of training samples for which the state at step t is x(t) and the state at step t + 1 is x(t + 1) when feature /is selected. To avoid problems associated with high dimensions, including noisy P<sub>f</sub> and sparse sampling of the space, N may be selected to be small. Alternatively, feature extraction module 43 may be configured to utilize parameterization or kernel smoothing of f<sup>'</sup> V-</p><p id="p0160" num="0160">[0110] With these components in place, feature extraction module 43 dynamically selects / at any triggering event utilizing the transition function estimate to choose an / that minimizes some expected loss. For example, assume a value c<sub>a|b</sub> is assigned as a cost of misclassifying an a as a b (with a,b E{0, 1 }), then if x<sub>;</sub>(t) = 1, the expected loss of using classifier lis made under the assumption that it is a mistake (i.e. the true class is 0). This gives an expected loss Ci<sub>|</sub>o <sub>t</sub>(0)FA<sub>f</sub> where p <sub>t</sub>(0) is the prior probability any given sample is truly 0, and FA<sub>f</sub>' is the false alarm rate (p<sub>t</sub>(0| l)) of classifier I (explicitly indexed by current control f to emphasize the dependence). Similarly, when x<sub>;</sub>(t) = 0, the expected loss of using classifier I is c<sub>0|</sub>ip<sub>t</sub>(l)(l - CD/) where CD <sub>f</sub>' is the correct detection rate p <sub>t</sub>(l 11) of classifier i. The loss function can be expressed as. </p><p id="p0161" num="0161"> C, {x,f)≡mm ^<sub>0</sub> Λ (0)πώ FA<sub>f</sub><sup>l</sup> , p<sub>t</sub> (1) min ..<sub>x =0</sub> (1 - CD<sub>f</sub><sup>l</sup> ) j </p><p id="p0162" num="0162"> [0111] As one example, feature extraction module 43 utilizes a control strategy that minimizes the total expected cost over all trigger events∑ <sub>t</sub>Ct(x,f). This problem can be solved exactly via dynamic programming if the sizes of the state and control spaces are not too large. Alternatively a greedy heuristic may applied at each step, selecting f<sub>t</sub><sup>*</sup> = min fC<sub>t</sub>(x,f), to find a reasonable sub-optimal solution. In one embodiment, all possible trigger event trajectories are computed offline and feature extraction module 43 is programmed to use a look-up table online. In this way, it is possible to reduce the number of features computed for each sample image using a controlled Markov chain model for triggering the most discriminative features for the current sample. Thus, the features selected in response to any triggering event may be dynamically determined based on the currently extracted features and computed transition function. </p><p id="p0163" num="0163"> [0112] The techniques described above can easily be extended to the multi-classifier case using, for example, a simple sum of single classifier loss functions. Also, c<sub>a|b</sub> can be scaled differently for different 
<!-- EPO <DP n="31"/>-->
 defect categories to capture relative importance or include an additive factor corresponding to feature dependent computation time. Further, the techniques above have been explained with respect to an example cost function. Other possibilities exist. For example, one might also consider a cost function that penalizes entropy of the class posterior distribution. </p><p id="p0164" num="0164">Example </p><p id="p0165" num="0165"> [0113] A simulation study was conducted using film images collected from a process development line. The complete sample set contains 8767 images that exhibited a variety of non-uniformities. Broadly, the non-uniformities can be grouped into seven categories. In addition to the chatter and (large) mottle categories, there are small mottle, bar marks/banding, splotches/watermarks, streaks, and diagonal variation defects. A sequence of classifier families were designed for each separate category. That is, seven different Boolean classifier family sequences (one for each non-uniformity category) were designed that determine presence/absence of a non-uniformity by thresholding selected features from a set 26 statistical and spectral features extracted using histogram and Gabor filter processing. The classifiers designed in accordance with the techniques described in PCT International Pub. No. </p><p id="p0166" num="0166">WO/2010/059679 and were trained on the complete sample set. </p><p id="p0167" num="0167"> [0114] Each classifier family sequence was designed to contain successively more complex classifiers (i.e. using more features), where each successive classifier in a give family sequence tended to assign the non-uniformity to its targeted category with higher accuracy. A trigger event was defined as the advancement of a single selected classifier family to the next most complex set of classifiers in its sequence. This corresponds directly to computing an additional set of features for the current sample at each trigger event, since it is additional features that enable the advancement in a classifier family sequence. </p><p id="p0168" num="0168"> [0115] FIG. 17 shows the performance of a three-step sequence in ROC-space. As shown, each family 180A,180B and 180C consisted of eight classifiers. The fact that the sequence is approaching the upper left corner of the ROC plot indicates improving performance at each step (red, then green, then blue). </p><p id="p0169" num="0169">[0116] A single simulation trial involved choosing 50 random image samples from the set of 8767 and analyzing each over ten trigger events, where each event was an advancement of a single defect category's classifier family. We computed the "best" ten triggers for each sample using the method described here with a "one step ahead" greedy optimization and all misclassification errors assigned unit cost. This was compared to a random trigger selection for each sample, where the ten trigger events were selected at random from the set of all possible triggers. To assess average performance, 1000 simulation trials were performed. FIG. 18 is a histogram that illustrates the difference between the baseline random (A) and greedy optimal (B). These histograms are aggregated over the 1000 trials and 50 image samples at each trial. </p><p id="p0170" num="0170"> [0117] FIGS. 19 and 20 are plots showing performance results based on the simulation study. FIG. 19 illustrates the average mis-classification cost across trials/images. As described above, all mis- 
<!-- EPO <DP n="32"/>-->
 classifications were assigned a unit cost. As shown, the greedy optimal controlled trigger has lower average cost across all events than a random trigger with the most substantial difference observed after the first couple of triggers. FIG. 20 is a comparative plot that shows the average (across trials) fraction of the 50 samples in which a particular triggering strategy yielded a lower cost. As shown, the greedy trigger gave better performance on average for a larger proportion of the 50 samples. </p><p id="p0171" num="0171">[0118] The controlled Markov chain model for feature triggering is demonstrated to give a clear improvement. Further improvement may be gained by using more sophisticated control optimization since the greedy algorithm may be considered a simple yet efficient scheme. Also, the set of features considered in the study is relatively small (26 features). The techniques may be even more advantageous when it is necessary to choose from a larger feature set. In such cases, dynamically discovering the best features to compute may have even more advantage in a live production line. There is minimal online computation associated with this technique since, in one embodiment, it can be implemented through a table lookup and the expensive construction of the lookup table can be done offline. </p><p id="p0172" num="0172">[0119] An alternative case of triggering is when images are compared to recent past frames to control for continuation of the current quality, and a change is detected, triggering more detailed analysis. For example, if the current web is in the stage of "good web," often simple features such as variance can be used to detect the appearance of a new non-uniformity. This detection triggers more detailed analysis, which then calls for the computation of additional features. For example, recent past sample images obtained from a material in an online product line can be charted following the procedure described therein. This can be done with previously labeled training data, a set that can be augmented with the recently charted frames. Once a significant change in charting value is discovered, triggering occurs, calling for an augmented set of features to detect the class and severity of any non-uniformity within the new frame. </p><p id="p0173" num="0173"> [0120] In some embodiments, computer hardware may be selected to complement the dynamic feature triggering algorithm to further reduce feature extraction time in an online environment. As mentioned previously, feature extraction usually involves some standard image processing routines. Such operations for online feature extraction for uniformity processing can be performed more quickly on graphics processing units (GPUs) than standard CPUs. </p><p id="p0174" num="0174"> [0121] GPUs were traditionally designed with graphics pipeline for rendering 3D scenes on a computer display. Specific processing components along the pipeline are often referred to as shaders. A set of geometric primitives (typically triangular) are first processed by vertex shaders to create the underlying shape of the figure in the GPUs coordinate system. Then lighting may be applied by pixel shaders, and camera projection via geometric shaders. Rasterization and texturing are next. Finally, the visible scenes are selected and the image is rendered. </p><p id="p0175" num="0175"> [0122] Several major steps in the pipeline amount to matrix-vector operations, which turn out to be exactly the operations required to apply certain types of feature extraction manipulations, e.g., 
<!-- EPO <DP n="33"/>-->
 Gabor-type filters, to an image captured from a web material. GPUs are highly optimized to perform these computations and exploit parallelism by using multiple processors to analyze different pixel regions simultaneously. All steps in the standard pipeline of a GPU may not be required and, as such, certain specialized shaders may be under-utilized. Fortunately, modern GPUs make use of unified shaders that can perform any processing step. Also, a more granular API is being exposed by modern GPUs, thus broadening the scope of potential applications for GPU processing. One example is the CUDA </p><p id="p0176" num="0176">(Compute Unified Device Architecture) API extension to the C programming language recently released by NVidia Corporation. Enhancements accompanying this architecture, such as an exposed shared memory region and faster communication with the driver CPU, aim to make the GPU suitable for general purpose high performance computing. </p><p id="p0177" num="0177"> [0123] For many applications of uniformity processing, a large bank of Gabor filters will be used to extract features using frequency domain filtering. Substantial performance gains may be achieved when implementing spatial and frequency domain filtering on GPUs as compared to a traditional CPU implementation. For large sets of features, it is often more efficient to perform the filtering in frequency domain. This is due to the fact that the FFT of the target image need only be computed once; it can then be processed in parallel by multiple filters. </p><p id="p0178" num="0178"> [0124] In some examples, uniformity processing uses Gabor filters having sinusoidal components directions that are aligned with one of the principle axes, and a Gaussian window which provides localization. This arises naturally from expected defects (such as chatter) that are similarly oriented. Such filters are separable, meaning they can be formed from an outer product of two one-dimensional filters. Spatial convolution can be sped up in this case by decomposing the full two-dimensional convolution into separate 1-D convolutions. This can be exploited when processing smaller filters to achieve the best performance. </p><p id="p0179" num="0179"> [0125] Aspects of GPUs, including parallel pixel computations and optimized matrix-vector operations, make them useful hardware components for feature extraction in rapid uniformity processing. Another method for accelerating the data processing is through implementation in hardware using ASICs (application-specific integrated circuits) or FPGAs (field-programmable gate arrays). </p><p id="p0180" num="0180">[0126] Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims. 
</p></description><claims mxw-id="PCLM44726328" ref-ucid="WO-2012115819-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="34"/>--> Claims: </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method comprising: </claim-text><claim-text> executing rating software on a computer to automatically assign a discrete rating label for a nonuniform pattern to each of a plurality of training images and compute a classification model based on the rating labels assigned to the training samples, wherein the rating software receives input from a user for only a subset of the training images and computes the rating labels for all of the remaining training images based upon the input; </claim-text><claim-text> processing in real-time a sample image captured from a manufactured web material with hardware components of a pipelined graphical processing unit (GPU) integrated within a computerized inspection system to extract a first plurality of features from the image in parallel; and </claim-text><claim-text> computing a severity level for the non-uniformity pattern for the sample image of the web material with the computerized inspection system from the first plurality of features in accordance with the classification model. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein automatically assigning the discrete rating labels comprises: computing, with the rating software, a plurality of image clusters for a representative subset of the training images; </claim-text><claim-text> receiving individual rating labels assigned to the image clusters by the user; </claim-text><claim-text> automatically propagating the individual rating labels assigned to the image clusters by a user to all of the training images within the respective image clusters; and </claim-text><claim-text> automatically computing rating labels and assigning the computed rating labels to all remaining ones of the training images not included within the representative subset of the training images for each of the classes of patterns. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 1, further comprising: </claim-text><claim-text> processing the first plurality of features with the inspection system with a decision-making model that defines a chain of triggers to dynamically select a second plurality of features to extract from the image in accordance with the model; </claim-text><claim-text> determining, in accordance with the decision-making model, an expected reduction in cost of misclassifying the sample image with respect to the non-uniformity pattern if the second plurality of features are extracted from the sample image; </claim-text><claim-text> when the expected reduction in cost exceeds a threshold, processing the sample image with the hardware components of the pipelined GPU of the inspection system to extract the second set of features; and <!-- EPO <DP n="35"/>--> computing the severity level for the non-uniformity pattern for the web material with the inspection system using the first plurality of features and the second plurality of features extracted from the image. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 1, wherein automatically assigning rating labels comprises, for each of the unlabeled training images not included within the representative subset of the training images: </claim-text><claim-text> computing a pair-wise distance for the numerical descriptor of the unlabeled training image to the numerical descriptor of each of the labeled images within the representative subset of the training images; </claim-text><claim-text> computing a set of probabilities for each specified class of patterns, wherein the set of probabilities for each class of patterns includes a probability for each of the rating labels specified for the class of pattern and indicates the probability that the unlabeled training image is a member of the training images that have been assigned that particular rating label for that particular class of pattern; and </claim-text><claim-text> assigning to the unlabeled training image the rating labels having the highest probability within each of the classes of patterns. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 1, further comprising: </claim-text><claim-text> computing, with the rating software, a continuous ranking of the training images based on the discrete rating labels assigned to the training images; and </claim-text><claim-text> computing, with the computerized inspection system, the severity level of the non-uniform pattern for the web based on the continuous ranking of the training image. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. A method for inspecting web material in real-time and computing a severity of a non-uniformity pattern as the web material is manufactured, the method comprising: </claim-text><claim-text> receiving, with an online computerized inspection system, an image captured from a web material being manufactured; </claim-text><claim-text> processing the image with the inspection system to extract a first set of features; </claim-text><claim-text> processing the first set of features with the inspection system with a decision-making model that defines a chain of triggers to dynamically select a second set of features to extract from the image in accordance with the model; </claim-text><claim-text> determining, in accordance with the model, an expected reduction in cost of misclassifying the image with respect to the non-uniformity pattern if the second set of features are extracted from the image; </claim-text><claim-text> when the expected reduction in cost exceeds a threshold, invoking hardware components of a pipelined graphical processing unit (GPU) integrated within the inspection system to process the image with the inspection system to extract the second set of features; and <!-- EPO <DP n="36"/>--> computing the severity level for the non-uniformity pattern for the web material with the inspection system using the first set of features and the second set of features extracted from the image. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 6, wherein the model comprises a Markov model that defines a chain of one or more dynamic triggers for controlling the selection of the second set of features to extract and any additional sets of features to extract from the image. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of claim 6, further comprising presenting a user interface to output the severity level to a user. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 8, wherein presenting a user interface comprises updating a chart to graph the severity level of the non-uniform pattern for the web material over time. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 8, further comprising: </claim-text><claim-text> receiving input from the user; and </claim-text><claim-text> adjusting one or more process control parameters for the manufactured web material in response to the input. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1. An online computerized inspection system for inspecting web material in real-time and computing a severity of a non-uniformity pattern as the web material is manufactured, the inspection system comprising: </claim-text><claim-text> a memory to store a decision-making model that defines a chain of dynamic triggers for selecting in real-time which features to extract from an image; and </claim-text><claim-text> a computer executing software to process a sample image captured from a manufactured web material currently being manufactured to extract a first set of features, </claim-text><claim-text> wherein the software applies the decision-making model to repeated dynamically trigger selection of additional sets of features and to extract from the sample image and invoke hardware components of a pipelined graphical processing unit (GPU) of the inspection system to extract the additional sets of features until the extracted features are sufficient to compute a severity level of a non- uniformity pattern for the web material within a defined level of confidence. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The inspection system of claim 1 1, </claim-text><claim-text> wherein the software applies the model to trigger selection of a second set of features to extract from the new image, </claim-text><claim-text> wherein, when triggered, the software dynamically selects the second set of features from an overall set of features based on the first set of features extracted from the image, and <!-- EPO <DP n="37"/>--> wherein the software processes the sample image to extract the second set of features from the image and compute the severity level of the non-uniformity pattern based on the first set of features and the second set of features. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The inspection system of claim 12, wherein the model comprises a Markov model. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. An online computerized inspection system for inspecting web material in real-time comprising: a memory to store a model that represents a continuous ranking of the training images as a plurality of points within a multidimensional feature space, wherein each of the points within the multidimensional space corresponds to a feature vector for a different one of the training images; and a pipelined graphical processing unit (GPU) of the inspection system to process a sample image captured from a manufactured web material to extract a plurality of features in parallel from the sample image using parallel hardware components of the GPU, </claim-text><claim-text> wherein the computerized inspection system computes a severity level of a non-uniform pattern from the extracted features for the sample image of the web material on a continuous scale based on the model of the training images. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. A system comprising: </claim-text><claim-text> rating software executing on a processor, wherein the rating software extracts features from each of a plurality of training images by computing a numerical descriptor for each of the training images from pixel values of the respective training image, wherein the rating software performs a first clustering process to process the numerical descriptors of the training images to automatically select a </claim-text><claim-text>representative subset of the training images and compute a plurality of image clusters for the </claim-text><claim-text>representative subset of training images; and </claim-text><claim-text> a user interface presented by the rating software having input mechanisms to receive input from a user specifying one or more classes of patterns present within the representative training images and a set of rating labels for each of the classes of patterns, wherein the user interface further includes input mechanisms to receive input assigning an individual rating label to each of the image clusters for each of the specified classes of patterns, wherein, for each of the image clusters, the rating software automatically propagates each of the individual rating labels assigned to the classes of patterns for the image cluster to all of the training images within that image cluster; </claim-text><claim-text> training software to compute a classification model based on the rating labels assigned to the training samples; and </claim-text><claim-text> an online computerized inspection system comprising a pipelined graphical processing unit (GPU) of the inspection system to process a new image captured from a manufactured web material to <!-- EPO <DP n="38"/>--> extract a plurality of features in parallel from the new image and compute a severity level of a nonuniform pattern for the web material continuous scale based on the classification model. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. A method of training a user comprising: </claim-text><claim-text> executing rating software on a computer to automatically assign a discrete rating label for a nonuniform pattern to each of a plurality of training images and compute a classification model based on the rating labels assigned to the training samples by one or more experts; </claim-text><claim-text> processing in real-time a sample image captured from a manufactured web material with a computerized inspection system to extract a first plurality of features from the image; </claim-text><claim-text> computing a severity level for the non-uniformity pattern for the sample image of the web material with the computerized inspection system from the first plurality of features in accordance with the classification model; and </claim-text><claim-text> displaying both the sample image and the severity level computed from the classification model to a user as training information for visualizing the non-uniformity pattern in the same manner as the experts. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The method of claim 16, </claim-text><claim-text> receiving input from the user requesting an increase or decrease in the severity level for the non- uniformity pattern; and </claim-text><claim-text> adjusting one or more process control parameters for the manufactured web material in response to the input. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The method of claim 16, wherein the rating software receives input from a user for only a subset of the training images and computes the rating labels for all of the remaining training images based upon the input </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
