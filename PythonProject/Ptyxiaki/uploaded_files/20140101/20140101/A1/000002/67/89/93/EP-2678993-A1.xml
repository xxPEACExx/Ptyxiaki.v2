<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678993-A1" country="EP" doc-number="2678993" kind="A1" date="20140101" family-id="44625825" file-reference-id="318288" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550504" ucid="EP-2678993-A1"><document-id><country>EP</country><doc-number>2678993</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11714610-A" is-representative="NO"><document-id mxw-id="PAPP154824427" load-source="docdb" format="epo"><country>EP</country><doc-number>11714610</doc-number><kind>A</kind><date>20110223</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438164" load-source="docdb" format="original"><country>EP</country><doc-number>11714610.0</doc-number><date>20110223</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454813" ucid="SE-2011050208-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>SE</country><doc-number>2011050208</doc-number><kind>W</kind><date>20110223</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988127484" load-source="docdb">H04L  29/08        20060101AFI20120910BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988096106" load-source="docdb" scheme="CPC">H04L  67/30        20130101 LI20131017BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988117189" load-source="docdb" scheme="CPC">H04L  67/2823      20130101 LI20131017BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988129454" load-source="docdb" scheme="CPC">H04L  67/24        20130101 LI20131129BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988138831" load-source="docdb" scheme="CPC">H04L  51/24        20130101 FI20131121BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132183996" lang="DE" load-source="patent-office">VERFAHREN UND ANORDNUNG FÜR BENACHRICHTIGUNGEN IN EINEM KOMMUNIKATIONSNETZWERK</invention-title><invention-title mxw-id="PT132183997" lang="EN" load-source="patent-office">METHOD AND ARRANGEMENT FOR NOTIFICATIONS IN A COMMUNICATION NETWORK</invention-title><invention-title mxw-id="PT132183998" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF POUR ENVOYER DES NOTIFICATIONS DANS UN RÉSEAU DE COMMUNICATION</invention-title><citations><non-patent-citations><nplcit><text>See references of WO 2012115549A1</text><sources><source mxw-id="PNPL67451454" load-source="docdb" name="SEA"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918132811" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>ERICSSON TELEFON AB L M</last-name><address><country>SE</country></address></addressbook></applicant><applicant mxw-id="PPAR918143573" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TELEFONAKTIEBOLAGET L M ERICSSON (PUBL)</last-name></addressbook></applicant><applicant mxw-id="PPAR918992545" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Telefonaktiebolaget L M Ericsson (PUBL)</last-name><iid>101131063</iid><address><city>164 83 Stockholm</city><country>SE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918160500" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KLEIN MIKAEL</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918172133" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KLEIN, MIKAEL</last-name></addressbook></inventor><inventor mxw-id="PPAR918991028" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KLEIN, MIKAEL</last-name><address><street>Gösta Lindells väg 19</street><city>S-141 69 Huddinge</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918141043" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>BOBERG CHRISTER</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918168293" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>BOBERG, CHRISTER</last-name></addressbook></inventor><inventor mxw-id="PPAR918986636" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>BOBERG, CHRISTER</last-name><address><street>Vinkelvägen 7</street><city>S-137 55 Tungelsta</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918146055" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LASSBORN SOFIE</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918162022" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LASSBORN, SOFIE</last-name></addressbook></inventor><inventor mxw-id="PPAR918993990" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LASSBORN, SOFIE</last-name><address><street>Edsviksvägen 75A</street><city>S-191 43 Sollentuna</city><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918160593" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>LINDGREN ANDERS</last-name><address><country>SE</country></address></addressbook></inventor><inventor mxw-id="PPAR918139996" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>LINDGREN, ANDERS</last-name></addressbook></inventor><inventor mxw-id="PPAR918989797" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>LINDGREN, ANDERS</last-name><address><street>Stamgatan 63 4tr</street><city>S-125 74 Älvsjö</city><country>SE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918981856" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Strandin, Heléne</last-name><suffix>et al</suffix><iid>100051477</iid><address><street>Bergenstrahle &amp; Lindvall AB P.O. Box 17704</street><city>118 93 Stockholm</city><country>SE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="SE-2011050208-W"><document-id><country>SE</country><doc-number>2011050208</doc-number><kind>W</kind><date>20110223</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012115549-A1"><document-id><country>WO</country><doc-number>2012115549</doc-number><kind>A1</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548894469" load-source="docdb">AL</country><country mxw-id="DS548917655" load-source="docdb">AT</country><country mxw-id="DS548894470" load-source="docdb">BE</country><country mxw-id="DS548858718" load-source="docdb">BG</country><country mxw-id="DS548911621" load-source="docdb">CH</country><country mxw-id="DS548894471" load-source="docdb">CY</country><country mxw-id="DS548907842" load-source="docdb">CZ</country><country mxw-id="DS548811757" load-source="docdb">DE</country><country mxw-id="DS548894472" load-source="docdb">DK</country><country mxw-id="DS548894473" load-source="docdb">EE</country><country mxw-id="DS548830863" load-source="docdb">ES</country><country mxw-id="DS548858719" load-source="docdb">FI</country><country mxw-id="DS548858720" load-source="docdb">FR</country><country mxw-id="DS548811762" load-source="docdb">GB</country><country mxw-id="DS548894474" load-source="docdb">GR</country><country mxw-id="DS548811763" load-source="docdb">HR</country><country mxw-id="DS548907843" load-source="docdb">HU</country><country mxw-id="DS548911626" load-source="docdb">IE</country><country mxw-id="DS548894475" load-source="docdb">IS</country><country mxw-id="DS548858721" load-source="docdb">IT</country><country mxw-id="DS548894476" load-source="docdb">LI</country><country mxw-id="DS548811764" load-source="docdb">LT</country><country mxw-id="DS548917656" load-source="docdb">LU</country><country mxw-id="DS548858722" load-source="docdb">LV</country><country mxw-id="DS548858723" load-source="docdb">MC</country><country mxw-id="DS548917657" load-source="docdb">MK</country><country mxw-id="DS548917658" load-source="docdb">MT</country><country mxw-id="DS548917659" load-source="docdb">NL</country><country mxw-id="DS548907844" load-source="docdb">NO</country><country mxw-id="DS548917660" load-source="docdb">PL</country><country mxw-id="DS548894477" load-source="docdb">PT</country><country mxw-id="DS548909839" load-source="docdb">RO</country><country mxw-id="DS548894478" load-source="docdb">RS</country><country mxw-id="DS548917661" load-source="docdb">SE</country><country mxw-id="DS548811765" load-source="docdb">SI</country><country mxw-id="DS548907845" load-source="docdb">SK</country><country mxw-id="DS548907846" load-source="docdb">SM</country><country mxw-id="DS548830864" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99620526" ref-ucid="WO-2012115549-A1" lang="EN" load-source="patent-office"><p num="0000">Method and arrangement in a notification server (100) for providing data of a presentity to a watcher (104). In this method, the notification server receives (1:1) published data from multiple sources (102) associated with the presentity. The notification server further selects (1:2) a composition policy from a set of predefined composition policies (100a) based on information regarding the watcher, and composes (1:3) a notification by applying the selected composition policy to the received data. The notification is then sent (1:4) to the watcher. In this way, it is possible to avoid any conflicting and/or overlapping data in the notification.</p></abstract><abstract mxw-id="PA99820185" ref-ucid="WO-2012115549-A1" lang="EN" source="national office" load-source="docdb"><p>Method and arrangement in a notification server (100) for providing data of a presentity to a watcher (104). In this method, the notification server receives (1:1) published data from multiple sources (102) associated with the presentity. The notification server further selects (1:2) a composition policy from a set of predefined composition policies (100a) based on information regarding the watcher, and composes (1:3) a notification by applying the selected composition policy to the received data. The notification is then sent (1:4) to the watcher. In this way, it is possible to avoid any conflicting and/or overlapping data in the notification.</p></abstract><abstract mxw-id="PA99620527" ref-ucid="WO-2012115549-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention se rapporte à un procédé et à un dispositif adaptés pour fournir des données d'une présentité à un spectateur (104), dans un serveur de notification (100). Dans le procédé selon l'invention, le serveur de notification reçoit (1:1) des données publiées, qui proviennent d'une pluralité de sources (102) associée à la présentité. Le serveur de notification sélectionne par ailleurs (1:2) une règle de composition à partir d'un ensemble de règles de composition prédéfini (100a) sur la base de données concernant le spectateur, et il compose (1:3) une notification en appliquant la règle de composition sélectionnée sur les données reçues. La notification est ensuite envoyée (1:4) au spectateur. De cette manière, il est possible d'éviter que des données n'entrent en conflit ou ne se chevauchent dans la notification.</p></abstract><abstract mxw-id="PA99820186" ref-ucid="WO-2012115549-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention se rapporte à un procédé et à un dispositif adaptés pour fournir des données d'une présentité à un spectateur (104), dans un serveur de notification (100). Dans le procédé selon l'invention, le serveur de notification reçoit (1:1) des données publiées, qui proviennent d'une pluralité de sources (102) associée à la présentité. Le serveur de notification sélectionne par ailleurs (1:2) une règle de composition à partir d'un ensemble de règles de composition prédéfini (100a) sur la base de données concernant le spectateur, et il compose (1:3) une notification en appliquant la règle de composition sélectionnée sur les données reçues. La notification est ensuite envoyée (1:4) au spectateur. De cette manière, il est possible d'éviter que des données n'entrent en conflit ou ne se chevauchent dans la notification.</p></abstract><description mxw-id="PDES50930668" ref-ucid="WO-2012115549-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> METHOD AND ARRANGEMENT FOR NOTIFICATIONS IN A </p><p id="p0002" num="0002"> COMMUNICATION NETWORK </p><p id="p0003" num="0003">Technical field </p><p id="p0004" num="0004"> [0001 ] The invention relates generally to a method and arrangement for </p><p id="p0005" num="0005"> providing notifications for terminal users in a communication network. </p><p id="p0006" num="0006">Background </p><p id="p0007" num="0007"> [0002]Messaging services are becoming increasingly popular amongst terminal users in communication networks today. A particular example of emerging services is the presence services which basically make data related to a specific client available to other clients over a communication network. In presence services, presence data of a client is collected and stored in a presence server and can then be delivered to clients subscribing to that presence data. In the following description, a "client" is typically a terminal user in the communication network, although in some practical cases it can also be a "machine function" such as an application, sensor or counter. </p><p id="p0008" num="0008">[0003]The presence data may refer to various different parameters and </p><p id="p0009" num="0009">characteristics of the clients, commonly referred to as "attributes", including information relating to, e.g., terminal status, capabilities, selections and settings, as well as information relating to the current situation of the client such as availability, geographic location and physical environment. The attributes may also include more personal client information, e.g. interests and needs, current activities, personal characteristics, moods, and so forth. </p><p id="p0010" num="0010">[0004]This type of information can thus be collected on a continuous basis in presence servers based on publications received from any "presence sources" associated with the clients, such as terminals and access networks, whenever any presence data for a client is introduced, updated, changed or deleted. A client may subscribe to selected presence data of other clients. In this field, the term </p><p id="p0011" num="0011">"watcher" generally represents a client that subscribes to or obtains presence data of one or more other clients, while a "presentity" generally represents a client that publishes presence data in the presence server to be available for any authorized 
<!-- EPO <DP n="3"/>-->
 watchers. The presence server sends published presence data in notifications to the watchers, typically in the form of XML (Extensible Mark-up Language) documents. </p><p id="p0012" num="0012">[0005]The well-known protocol SIP (Session Initiation Protocol) is typically used as a framework for the above handling of presence data over the communication network. The SIP message called "SIP PUBLISH" is used by presentities to send presence data to the presence server for publication. Another SIP message called "SIP SUBSCRIBE" is used by watchers to request for presence data of </p><p id="p0013" num="0013">presentities. Yet another SIP message called "SIP NOTIFY" is used by the presence server to deliver fresh presence data to watchers. Alternatively, HTTP (Hypertext Transfer Protocol) can be used in presence services, e.g. the watcher can fetch presence data from the server by means of a regular "HTTP GET" or "HTTP POST" message. Further, the presentity may use a regular "HTTP PUT" message or the HTTP POST message to publish data. The mechanisms above are commonly referred to as the PUBLISH, SUBSCRIBE and NOTIFY methods, enabling the watcher to always have up-to-date presence status regarding the presentity. Typically, the presence server sends a new NOTIFY to the watcher whenever the state of the presentity is updated. </p><p id="p0014" num="0014">[0006]A presentity client can be represented by more than one communication terminal or device, such as when the client has both a mobile phone and a PC (Personal Computer), and presence data of one client may be sent to the presence server from multiple presence sources associated with that client. As a result, the presence data published in the server may refer to the same attribute such that the published presence data from two sources overlap or even contradict each other, i.e. conflicting data. It is therefore useful to implement a composition function in the presence server that merges or aggregates such data from multiple sources into a joint notification according to specific composition rules. </p><p id="p0015" num="0015">[0007] In some conventional solutions, all published presence data, including any conflicting data of the same attribute, is simply concatenated in the notification, leaving the receiving watcher client to figure out what data is valid or not in the notification. The watcher would therefore be helped by a logic function for 
<!-- EPO <DP n="4"/>-->
 determining, e.g., which attribute value in the notification is valid if different values of the same attribute have been published with different timestamps from different sources, unless all presence data in the notification is presented to the user as is, i.e. without any processing. </p><p id="p0016" num="0016">[0008] US 2007/0233798 A1 discloses a procedure, executed by a "presence compositor" e.g. in a presence server, for applying a "composition rule" that dictates what presence information of a presentity is valid when sent to a watcher, which depends on a "presence information element" of the presentity or of the watcher. It is mentioned in the background that a fixed composition rule could say that the latest one of two conflicting information publications is always deemed to contain the most reliable information, which thus will be used to determine the valid presence state, see [0005]. A problem is identified in that this rule may still produce erroneous results, e.g. when a cellular phone publishes information indicating that the user is actually in his vehicle and a PC at a later time </p><p id="p0017" num="0017">automatically publishes information assuming that the user is in his office, the latter not being true in this example. </p><p id="p0018" num="0018">[0009]The solution to this problem presented in US 2007/0233798 A1 , is that the presence sources send composition rules together with information publications to the presence compositor which may reside in a presence server or in a watcher's equipment. The presence compositor then applies the received composition rules to resolve any conflict between the information publications and to determine the currently valid presence state, see [0017]. This solution thus relies on the presence sources to send composition rules. </p><p id="p0019" num="0019">[00010] Various problems may arise when using the above-described solutions. In the case when all presence data from multiple sources is concatenated in the notification to a watcher, either the user himself or a logic function in the watcher's equipment must evaluate any conflicting data to determine what is valid or not. Another drawback with this solution is that the notification may be excessively large when containing overlapping and/or conflicting data of the same attribute(s) originating from different sources, thus requiring undue resources for </p><p id="p0020" num="0020">communicating and processing the notification. Further, conventional composition 
<!-- EPO <DP n="5"/>-->
 rules are rather inflexible by not being adapted to the current situation of the watcher and/or the presentity. For example, some watcher equipments may not be capable of receiving and/or handling the resulting notification document. </p><p id="p0021" num="0021">[0001 1 ] In the solution of US 2007/0233798 A1 , a logic function is required in the presentity's equipment, i.e. the presence sources, for selecting and sending composition rules along with information publications to the presence compositor, which may be quite frequent and numerous thus requiring undue resources and logic for communicating and processing the publications and rules. Moreover, the composition rules in this solution are presumably sent with the publications regardless of whether they are needed or used at the receiver, i.e. also when no conflict or overlap of presence data from different sources occurs, and regardless of whether the watcher understands and is capable of applying the rule. As a result, bandwidth consuming information will be sent to no avail. </p><p id="p0022" num="0022">Summary </p><p id="p0023" num="0023"> [00012] It is an object of the invention to address at least some of the problems and issues outlined above. It is possible to achieve this object and others by using a method and an arrangement as defined in the attached independent claims. </p><p id="p0024" num="0024">[00013] According to one aspect, a method in a notification server is defined for providing data of a presentity to a watcher. In this method, the notification server receives published data from multiple sources associated with the presentity. The notification server further selects a composition policy from a set of predefined composition policies based on information regarding the watcher, and composes a notification by applying the selected composition policy to the received data. The notification is then sent to the watcher. </p><p id="p0025" num="0025">[00014] According to another aspect, an arrangement in a notification server is configured to provide data of a presentity to a watcher. According to this arrangement, a receiving module in the notification server is adapted to receive published data from multiple sources associated with the presentity. A selecting module is adapted to select a composition policy from a set of predefined composition policies based on information regarding the watcher. Further, a 
<!-- EPO <DP n="6"/>-->
 composing module in the notification server is adapted to compose a notification by applying the selected composition policy to the received data, and a </p><p id="p0026" num="0026">communication unit is adapted to send the notification to the watcher. </p><p id="p0027" num="0027">[00015] By using the above method or arrangement in the notification server, several benefits may be achieved. For example, different composition policies can be applied for notifications depending on the watcher's current abilities, </p><p id="p0028" num="0028">characteristics, conditions and/or situation. It is also possible to optimize and compose the notification with relevant and useful information without including conflicting and/or overlapping data. The notification can further be made of limited size without consuming undue bandwidth when communicated. </p><p id="p0029" num="0029">[00016] The above method and arrangement may be configured and </p><p id="p0030" num="0030">implemented according to different embodiments. In some possible embodiments, the information regarding the watcher refers to at least one of: a type of terminal used by the watcher, a current context of the watcher, characteristics of the watcher, a service agreement used by the watcher, and an access network currently used by the watcher. </p><p id="p0031" num="0031">[00017] In other possible embodiments, the current context of the watcher is determined from data published by the watcher. The information regarding the watcher may alternatively refer to a preferred composition policy in the set of predefined composition policies. In that case, a request received from the watcher for data of the presentity may indicate the preferred composition policy, and the preferred composition policy in the request is selected. </p><p id="p0032" num="0032">[00018] If the data received from the data sources is potentially overlapping or conflicting and include different timestamps, the selected composition policy may dictate that only the data with a latest timestamp should be included in the notification. In that case, any non-overlapping or non-conflicting data received from any of the data sources may be included as well in the notification regardless of timestamp. The composition policy may be selected further based on a current context of the presentity. 
<!-- EPO <DP n="7"/>-->
 [00019] Further possible features and benefits of this solution will become apparent from the detailed description below. </p><p id="p0033" num="0033">Brief description of drawings </p><p id="p0034" num="0034"> [00020] The invention will now be described in more detail by means of exemplary embodiments and with reference to the accompanying drawings, in which: </p><p id="p0035" num="0035">[00021 ] Fig. 1 is a schematic block diagram illustrating how a notification server can create a notification, according to a possible embodiment. </p><p id="p0036" num="0036">[00022] Fig. 2 is a flow chart with actions performed by a notification server, according to another possible embodiment. </p><p id="p0037" num="0037">[00023] Fig. 3 and Fig. 4 are exemplifying signaling diagrams for how a notification can be provided in practice, according to further possible </p><p id="p0038" num="0038">embodiments. </p><p id="p0039" num="0039">[00024] Fig. 5 is a block diagram illustrating a notification server in more detail, according to further possible embodiments. </p><p id="p0040" num="0040">[00025] Fig. 6 illustrates schematically an example of how a notification can be composed from data received from two presentity sources, according to a possible implementation. </p><p id="p0041" num="0041">Detailed description </p><p id="p0042" num="0042"> [00026] Briefly described, the invention can be used to provide a notification with data of a presentity to a watcher, when the data has been published from multiple sources associated with the presentity, i.e. from at least two such sources. In this solution, a logic for selecting and applying a composition policy to compose the notification from the published data, resides in a notification server configured to deliver notifications to watchers. The notification mechanism referred to in this description may be used to support the well-known presence services and the notification server can thus be a presence server, even though the invention is generally not limited to the concept of presence. 
<!-- EPO <DP n="8"/>-->
 [00027] In particular, the notification server selects a composition policy from a set of predefined composition policies at least based on information regarding the watcher. Thereby, the notification can be adapted to the receiving watcher, e.g. depending on its current abilities and situation. Further, no logic for selecting and communicating composition rules is needed in the presentity's data sources. It is thus possible to compose the notification at the notification server such that the information therein is potentially relevant and useful particularly for the receiving watcher, as well as being devoid of any conflicting and/or duplicated data. </p><p id="p0043" num="0043">[00028] In this way, the notification can be "optimized" and composed with reasonable size without consuming bandwidth unnecessarily when communicated. The notification server may obtain the above information regarding the watcher in different ways, e.g. from an access network or presence server of the watcher, or the information may be included in a request for data on the presentity received from the watcher, which will be described in more detail later below. The watcher information may also be stored and maintained in a local database at the notification server, e.g. on a regular basis, to be retrieved locally whenever a notification is to be composed and delivered. This solution is thus not limited to any particular way of obtaining the watcher information. </p><p id="p0044" num="0044">[00029] An example of how a notification can be composed for a watcher will now be described with reference to a communication scenario illustrated in Fig. 1 . A notification server 100 has been provisioned with a set of predefined composition policies 100a, which may include composition policies that are generic for any watchers or dedicated specifically for the watcher 104 or for a group or category of watchers. This example illustrates how the notification server 100 composes a notification for the watcher 104 from data received from multiple sources 102 associated with the presentity, not shown. For example, the data sources 102 may include a PC and a mobile phone used by the presentity although the invention is not limited to any particular types or number of such data sources. </p><p id="p0045" num="0045">[00030] In a first shown action 1 :1 , the data sources 102 publish data of the presentity which is received at the notification server 100, e.g. according to regular presence procedures or the like. Any of the above-mentioned messages SIP 
<!-- EPO <DP n="9"/>-->
 PUBLISH, HTTP PUT and HTTP POST may be used in this communication. The data published from different sources 102 may be mutually conflicting, overlapping or duplicated. It is assumed that the notification server 100 has received a request for data on the presentity at some point, either before or after action 1 .1 . The notification server 100 then selects a composition policy from the predefined composition policies 100a based on information regarding the watcher, in a next action 1 :2, to use when composing the notification. </p><p id="p0046" num="0046">[00031 ] In a further action 1 :3, the notification server 100 composes the notification by applying the selected composition policy to the data received in the above action 1 :1 . The composed notification is eventually delivered to the watcher in a final shown action 1 :4. The notification can thus be optimized or at least somehow adapted to the watcher by selecting the composition policy based on the watcher in action 1 :2. </p><p id="p0047" num="0047">[00032] The watcher information used for the policy selection in action 1 :2 may refer to different aspects of the watcher as follows. For example, the composition policy may be selected based on what type of terminal is used by the watcher, such that the format and/or size of the notification can be adapted to capabilities of the terminal type. The composition policy may also be selected based on a current context of the watcher which may be determined from data published by or for the watcher e.g. in a presence server of the watcher. The amount and/or type of information wanted in the notifications may thus be dependent on the watcher's current situation. For example, relatively shorter notifications may be desirable when the watcher is abroad or in a certain environment, or at certain times of day, week or season. Further possible factors for policy selection include various characteristics of the watcher, i.e. what "type" of user the watcher is, e.g. gender, age, interests, occupation, etc. A service agreement used by the watcher as well as what access network or communication channel is currently used by the watcher, may also be used as a basis for policy selection. This solution is thus not limited to any particular type(s) of watcher information. </p><p id="p0048" num="0048">[00033] It should be noted that the notification may be triggered at the notification server 100 by a request from the watcher, or when published data on the 
<!-- EPO <DP n="10"/>-->
 presentity has been received as of action 1 :1 , or at regular intervals according to a preset notification scheme, depending on the implementation. Notifications may be composed and sent to the watcher according to a watcher subscription for notifications on the presentity, e.g. started by an initial subscription request from the watcher. For example, the triggering mechanism for notifications may operate similar to any regular presence procedures or the like, and the invention is not limited in this respect. </p><p id="p0049" num="0049">[00034] Further, the information regarding the watcher may refer to a specific preferred composition policy in the set of predefined composition policies 100a. For example, a request for data of the presentity may be received from the watcher where the preferred composition policy is indicated in the request, using a suitable identification of the policy, and the notification server 100 accordingly selects the preferred composition policy in the request for composing the notification. </p><p id="p0050" num="0050">[00035] As mentioned above, the notification may be composed in different ways depending on the selected policy. For example, if the data received from the sources 102 is potentially overlapping or conflicting and include different timestamps, the selected composition policy may dictate that only the data with the latest timestamp should be included in the notification. In addition, any non- overlapping or non-conflicting data received from any of the sources 102 may also be included in the notification regardless of timestamp. A practical example of composing a notification from overlapping and conflicting data will be presented later below with reference to Fig. 6. In addition to the watcher information, the composition policy may be selected further based on a current context of the presentity. For example, the current activity or exact location of the presentity may not be of interest to have in the notification if he/she is abroad. </p><p id="p0051" num="0051">[00036] An exemplifying procedure for providing data of a presentity to a watcher, will now be described with reference to the flow chart in Fig. 2. The shown actions in this process can be executed by a notification server, such as the server 100 in Fig. 1 . It is again assumed that the notification server has been provisioned with set of predefined composition policies. In a first action 200, the notification server 
<!-- EPO <DP n="11"/>-->
 receives published data from multiple sources associated with the presentity, basically corresponding to action 1 :1 above. </p><p id="p0052" num="0052">[00037] The notification server then selects a composition policy from the set of predefined composition policies based on information regarding the watcher, in a next action 202, e.g. in the manner described for action 1 :2 above. In a further action 204, the notification server composes the notification by applying the selected composition policy to the received data, e.g. as described for action 1 :3 above. In a final action 206, the notification server sends the composed </p><p id="p0053" num="0053">notification to the watcher. Thereby, an optimized and reasonably sized notification with particularly relevant and useful information can be composed for the receiving watcher, and without including any conflicting and/or duplicated data. No particular functionality apart from normal is required at the sources nor at the presentity, to implement this process. </p><p id="p0054" num="0054">[00038] Some examples of how this solution can be implemented in practical communication scenarios, will now be described with reference to the signaling diagrams in Fig. 3 and Fig. 4. In either example, a notification server 300, 400 has been provisioned with set of predefined composition policies, not shown here, just as in the examples of Figs 1 and 2. Two different data sources associated with the presentity are involved in these examples: a PC 302a, 402a and a mobile phone 302b, 402b. In Fig. 3, the watcher 304 uses a mobile phone while in Fig. 4, the watcher 404 uses a PC. </p><p id="p0055" num="0055">[00039] In Fig. 3, the notification server 300 receives from a first source 302a, thus the presentity's PC, a published set of data with a timestamp "TV, in an action 3:1. This data includes the attribute "Activities: Working". The notification server 300 further receives from a second source 302b, thus the presentity's mobile phone, a published set of data with a later timestamp "T2", in another action 3:2. This data includes the attribute "Activities: Meeting" which actually conflicts in some sense with the previous attribute "Activities: Working" received from the PC 302a. 
<!-- EPO <DP n="12"/>-->
 [00040] In this example, the notification server 300 receives a request from watcher 304 for data on the presentity at this point, shown by action 3:3, which request indicates a preferred composition policy "X" amongst the set of predefined composition policies. The preferred composition policy "X" in the request thus constitutes the "information regarding the watcher" according to the terminology used in this description. </p><p id="p0056" num="0056">[00041 ] The notification server 300 then accordingly selects the preferred composition policy X in an action 3:4, and composes the notification by applying policy X to the received data in a further action 3:5. In this case, the policy X dictates that when conflicting data of the same attribute has been received with different timestamps, only the data with the latest timestamp should be included in the notification, in this case timestamp T2 in the publication received in action 3:2 from the mobile phone 302b. As a result, notification server 300 includes the attribute "Activities: Meeting" in the notification but omits the attribute "Activities: Working" in accordance with the timestamps T1 and T2 of the publications received in actions 3:1 and 3:2, respectively. The notification server 300 finally sends the notification to the watcher 304 in action 3:6. </p><p id="p0057" num="0057">[00042] Fig. 4 illustrates another example where the notification server 400 likewise receives published data with timestamps T1 and T2 from the PC 402a and mobile phone 402b in actions 4:1 and 4:2, respectively. In a further action 4:3, the notification server 400 receives a request from watcher 404 for data on the presentity, with no preferred composition policy indicated this time. Instead, the notification server 400 checks a service agreement of the watcher in an action 4:4, which dictates that a particular composition policy "Z" should be applied for this particular watcher when composing a notification. Therefore, policy Z is selected in a next action 4:5 which in turn dictates that both attribute values should be included in the notification, since the watcher uses a PC that can cope with lengthy notifications. Accordingly, notification server 400 composes a notification in action 4:6 with attributes "Activities: PC - Working" and "Activities: Mobile - Meeting" and sends the notification to the watcher 404 in action 4:7. 
<!-- EPO <DP n="13"/>-->
 [00043] A more detailed but non-limiting example of how an arrangement can be implemented in a notification server to accomplish the solution, is illustrated by the block diagram in Fig. 5. Various actions and messages are also schematically indicated in this figure. The notification server 500 is thus configured to provide data of a presentity to a watcher 504, e.g. in the manner described above for any of Figs 1 -4. As in the previous examples, notification server 500 has been provisioned with set of predefined composition policies 500e and two or more data sources 502 are associated with the presentity. </p><p id="p0058" num="0058">[00044] According to this arrangement, the notification server 500 comprises a receiving module 500a adapted to receive published data Pi, P<sub>2</sub> from the data sources 502 of the presentity. Notification server 500 further comprises a </p><p id="p0059" num="0059">selecting module 500b adapted to select a composition policy "X" from the predefined composition policies 500e based on information "Info" regarding the watcher 504. Dashed two-way arrows in the figure illustrate that selecting module 500b may obtain this watcher information from the watcher's access network 504a or from a presence server 504b holding information on the watcher. Alternatively, as described for the examples of Figs 3 and 4, the watcher information may be included in a request "Req" for data on the presentity received from the watcher, e.g. indicating a preferred composition policy. </p><p id="p0060" num="0060">[00045] A composing module 500c in server 500 is adapted to compose a notification N by applying the selected composition policy X to the received data</p><p id="p0061" num="0061">Pi, P<sub>2</sub>- The notification server 500 also comprises a communication unit 500d adapted to send the notification N to the watcher 504. </p><p id="p0062" num="0062">[00046] It should be noted that Fig. 5 merely illustrates various functional modules or units in the notification server 500 in a logical sense, although the skilled person is free to implement these functions in practice using suitable software and hardware means. Thus, the invention is generally not limited to the shown structures of the notification server 500, while its functional modules 500a - 500d may be configured to operate according to the features described for any of Figs 1 - 4 above, where appropriate. 
<!-- EPO <DP n="14"/>-->
 [00047] The functional modules 500a - 500d described above can be </p><p id="p0063" num="0063">implemented in the server 500 as program modules of a computer program comprising code means which, when run by a processor "P" in the server 500, causes the server 500 to perform the above-described functions and actions. The processor P may be a single CPU (Central processing unit), or could comprise two or more processing units. For example, the processor P may include general purpose microprocessors, instruction set processors and/or related chips sets and/or special purpose microprocessors such as ASICs (Application Specific Integrated Circuit). The processor P may also comprise a storage for caching purposes. </p><p id="p0064" num="0064">[00048] The computer program may be carried by a computer program product in the notification server 500 in the form of a memory "M" connected to the processor P. The computer program product or memory M comprises a computer readable medium on which the computer program is stored. For example, the memory M may be a flash memory, a RAM (Random-access memory), a ROM (Read-Only Memory) or an EEPROM (Electrically Erasable Programmable ROM), and the program modules could in alternative embodiments be distributed on different computer program products in the form of memories within the notification server 500. </p><p id="p0065" num="0065">[00049] The above notification server 500 and functional modules 500a - 500d may be configured or adapted to operate according to various optional </p><p id="p0066" num="0066">embodiments. For example, the information regarding the watcher may refer to at least one of: a type of terminal used by the watcher, a current context of the watcher, characteristics of the watcher, a service agreement used by the watcher, and an access network currently used by the watcher. If the watcher's context is used as the watcher information, the selecting module 500b may be further adapted to determine the current context of the watcher from data published by or for the watcher, e.g. in the presence server 504b. </p><p id="p0067" num="0067">[00050] The information regarding the watcher may also refer to a preferred composition policy in the set of predefined composition policies 500e.ln that case, the communication unit 500d may be further adapted to receive the request "Req" 
<!-- EPO <DP n="15"/>-->
 for data of the presentity from the watcher, where the request indicates the preferred composition policy, and the selecting module 500b may be further adapted to select the preferred composition policy in the request. </p><p id="p0068" num="0068">[00051 ] If the data received from data sources 502 is potentially overlapping or conflicting and include different timestamps, e.g. as described for Fig. 3 above, the selected composition policy X may dictate that only the data with a latest timestamp is included in the notification N. The composing module 500c may then be adapted to also include non-overlapping or non-conflicting data, if received from any of the sources 502, in the notification N regardless of timestamp. </p><p id="p0069" num="0069">[00052] The selecting module 500b could also be adapted to select the composition policy further based on a current context of the presentity, in addition to the watcher information, assuming that certain data is of no or little interest depending on the presentity's context, e.g. as exemplified above. </p><p id="p0070" num="0070">[00053] A practical example of composing a notification from overlapping and conflicting data according to a selected composition policy, will now be described with reference to Fig. 6. In this example, two sets of data of a presentity Pi, P<sub>2</sub> are sent from different data sources 1 and 2. The first data set Pi of a timestamp 13.00 includes the following attributes: </p><p id="p0071" num="0071">"Activities: Meeting" </p><p id="p0072" num="0072"> "Mood: Happy" </p><p id="p0073" num="0073"> "Location: Stockholm" </p><p id="p0074" num="0074"> "Timestamp: 13.00" </p><p id="p0075" num="0075">The second data set P<sub>2</sub> of a later timestamp 14.00 includes the following attributes: </p><p id="p0076" num="0076">"Activities: Lunch" </p><p id="p0077" num="0077"> "Location: Gothenburg" </p><p id="p0078" num="0078"> "Timestamp: 14.00" 
<!-- EPO <DP n="16"/>-->
 [00054] It should be noted that the timestamp may thus technically be included as an attribute in the published data sets although it is rather "metadata" effectively. It can thus be seen that the attributes "Activities" and "Location" are deemed to be conflicting by having contradicting values at different timestamps. In this example, a composition policy is selected which dictates that attributes "Activities" and "Location" of the latest timestamp only should be included in the notification, while the attribute "Mood" of the earlier timestamp can be included as well. The resulting notification N is thus composed as: </p><p id="p0079" num="0079">"Activities: Lunch" </p><p id="p0080" num="0080"> "Mood: Happy" </p><p id="p0081" num="0081"> "Location: Gothenburg" </p><p id="p0082" num="0082"> "Timestamp: 14.00". </p><p id="p0083" num="0083">[00055] It can be understood from the above description of various possible embodiments and features, that considerable advantages can be accomplished by using the solution. For example, it is possible to apply different composition policies for notifications depending on the watcher's current abilities, </p><p id="p0084" num="0084">characteristics, conditions and/or situation. The notification can also be more or less optimized and composed with potentially relevant and useful information, as well as being devoid of any conflicting and/or overlapping data thus having a reasonable size which can be adapted to the prevailing situation or conditions. </p><p id="p0085" num="0085">[00056] While the invention has been described with reference to specific exemplary embodiments, the description is generally only intended to illustrate the inventive concept and should not be taken as limiting the scope of the invention. For example, the terms "watcher", "presentity", "notification server", "data source" and "composition policy" have been used throughout this description, although any other corresponding nodes, functions, and/or parameters could also be used having the features and characteristics described here. The invention is defined by the appended claims. 
</p></description><claims mxw-id="PCLM44726604" ref-ucid="WO-2012115549-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="17"/>--> CLAIMS </claim-statement><claim id="clm-0001" num="1"><claim-text>1 . A method in a notification server (100) of providing data of a presentity to a watcher (104), the method comprising: </claim-text><claim-text>- receiving (1 :1 , 200) published data from multiple sources (102) associated with the presentity, </claim-text><claim-text>- selecting (1 :2, 202) a composition policy from a set of predefined composition policies (100a) based on information regarding the watcher, </claim-text><claim-text>- composing (1 :3, 204) a notification by applying the selected composition policy to the received data, and </claim-text><claim-text>- sending (1 :4, 206) the notification to the watcher. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. A method according to claim 1 , wherein the information regarding the watcher refers to at least one of: a type of terminal used by the watcher, a current context of the watcher, characteristics of the watcher, a service agreement used by the watcher, and an access network currently used by the watcher. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. A method according to claim 2, wherein the current context of the watcher is determined from data published by the watcher. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. A method according to claim 1 , wherein the information regarding the watcher refers to a preferred composition policy in said set of predefined </claim-text><claim-text>composition policies. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. A method according to claim 4, wherein a request (Req) for data of the presentity is received from the watcher, said request indicating the preferred composition policy, and the preferred composition policy in the request is selected. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. A method according to any of claims 1 -5, wherein if the data received from said sources is potentially overlapping or conflicting and include different timestamps, the selected composition policy dictates that only the data with a latest timestamp is included in the notification. <!-- EPO <DP n="18"/>--> </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. A method according to claim 6, wherein non-overlapping or non- conflicting data received from any of said sources is also included in the notification regardless of timestamp. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. A method according to any of claims 1 -7, wherein the composition policy is selected further based on a current context of the presentity. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. An arrangement in a notification server (500) configured to provide data of a presentity to a watcher (504), the notification server arrangement comprising: </claim-text><claim-text>- a receiving module (500a) adapted to receive published data from multiple sources (502) associated with the presentity, </claim-text><claim-text>- a selecting module (500b) adapted to select a composition policy from a set of predefined composition policies (500e) based on information (Info) regarding the watcher, </claim-text><claim-text>- a composing module (500c) adapted to compose a notification (N) by applying the selected composition policy to the received data, and </claim-text><claim-text>- a communication unit (500d) adapted to send the notification (N) to the watcher. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. An arrangement according to claim 9, wherein the information (Info) regarding the watcher refers to at least one of: a type of terminal used by the watcher, a current context of the watcher, characteristics of the watcher, a service agreement used by the watcher, and an access network currently used by the watcher. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1 . An arrangement according to claim 10, wherein the selecting module (500b) is further adapted to determine the current context of the watcher from data published by the watcher. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. An arrangement according to claim 9, wherein the information regarding the watcher refers to a preferred composition policy in said set of predefined composition policies. <!-- EPO <DP n="19"/>--> </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. An arrangement according to claim 12, wherein the communication unit (500d) is further adapted to receive a request (Req) for data of the presentity from the watcher, said request indicating the preferred composition policy, and the selecting module (500b) is further adapted to select the preferred composition policy in the request. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. An arrangement according to any of claims 9-13, wherein if the data received from said sources is potentially overlapping or conflicting and include different timestamps, the selected composition policy dictates that only the data with a latest timestamp is included in the notification. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. An arrangement according to claim 14, wherein the composing module (500c) is adapted to also include non-overlapping or non-conflicting data, received from any of said sources, in the notification regardless of timestamp. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. An arrangement according to any of claims 9-16, wherein the selecting module (500b) is adapted to select the composition policy further based on a current context of the presentity. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
