<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678940-A1" country="EP" doc-number="2678940" kind="A1" date="20140101" family-id="49115622" file-reference-id="280334" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550557" ucid="EP-2678940-A1"><document-id><country>EP</country><doc-number>2678940</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12756968-A" is-representative="NO"><document-id mxw-id="PAPP154824480" load-source="docdb" format="epo"><country>EP</country><doc-number>12756968</doc-number><kind>A</kind><date>20120220</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438182" load-source="docdb" format="original"><country>EP</country><doc-number>12756968.9</doc-number><date>20120220</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449444" ucid="US-201113169533-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113169533</doc-number><kind>A</kind><date>20110627</date></document-id></priority-claim><priority-claim mxw-id="PPC140455223" ucid="US-201161445640-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161445640</doc-number><kind>P</kind><date>20110223</date></document-id></priority-claim><priority-claim mxw-id="PPC140454126" ucid="US-2012025798-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012025798</doc-number><kind>W</kind><date>20120220</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988097582" load-source="docdb">H02P  21/00        20060101AFI20121001BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1779713410" load-source="docdb" scheme="CPC">H02P  21/0085      20130101 LA20170726BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988116889" load-source="docdb" scheme="CPC">H02P  21/14        20130101 FI20130115BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184155" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR STEUERUNG EINES ELEKTROMOTORS MIT ZEITVERZÖGERUNGSKOMPENSATION BEI POSITIONSBESTIMMUNGEN</invention-title><invention-title mxw-id="PT132184156" lang="EN" load-source="patent-office">METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH COMPENSATION FOR TIME DELAY IN POSITION DETERMINATION</invention-title><invention-title mxw-id="PT132184157" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME DE COMMANDE D'UN MOTEUR ÉLECTRIQUE AVEC COMPENSATION DE RETARD POUR LA DÉTERMINATION DE POSITION</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918163634" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DEERE &amp; CO</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918148319" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DEERE &amp; COMPANY</last-name></addressbook></applicant><applicant mxw-id="PPAR918982272" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Deere &amp; Company</last-name><iid>101150216</iid><address><street>One John Deere Place</street><city>Moline, IL 61265</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918135741" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WU LONG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918151627" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WU, LONG</last-name></addressbook></inventor><inventor mxw-id="PPAR918990871" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WU, LONG</last-name><address><street>2824 37th Avenue South</street><city>Fargo, North Dakota 58104</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918171219" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SHAW ROBERT</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918151164" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SHAW, ROBERT</last-name></addressbook></inventor><inventor mxw-id="PPAR918987760" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>SHAW, ROBERT</last-name><address><street>1822 42nd Avenue South</street><city>Moorhead, Minnesota 56560</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918167793" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>KUSUMBA SRUJAN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918161519" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>KUSUMBA, SRUJAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918982386" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>KUSUMBA, SRUJAN</last-name><address><street>2036 49th Street South Apt. 1</street><city>Fargo, North Dakota 58104</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918981318" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Holst, Sönke</last-name><iid>101371590</iid><address><street>John Deere GmbH &amp; Co. KG Mannheim Regional Center Global Intellectual Property Services John-Deere-Strasse 70</street><city>68163 Mannheim</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012025798-W"><document-id><country>US</country><doc-number>2012025798</doc-number><kind>W</kind><date>20120220</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012125259-A1"><document-id><country>WO</country><doc-number>2012125259</doc-number><kind>A1</kind><date>20120920</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548812051" load-source="docdb">AL</country><country mxw-id="DS548909203" load-source="docdb">AT</country><country mxw-id="DS548812052" load-source="docdb">BE</country><country mxw-id="DS548913209" load-source="docdb">BG</country><country mxw-id="DS548859276" load-source="docdb">CH</country><country mxw-id="DS548919078" load-source="docdb">CY</country><country mxw-id="DS548909204" load-source="docdb">CZ</country><country mxw-id="DS548894791" load-source="docdb">DE</country><country mxw-id="DS548919079" load-source="docdb">DK</country><country mxw-id="DS548919080" load-source="docdb">EE</country><country mxw-id="DS548911548" load-source="docdb">ES</country><country mxw-id="DS548913210" load-source="docdb">FI</country><country mxw-id="DS548913211" load-source="docdb">FR</country><country mxw-id="DS548812053" load-source="docdb">GB</country><country mxw-id="DS548919081" load-source="docdb">GR</country><country mxw-id="DS548812054" load-source="docdb">HR</country><country mxw-id="DS548909205" load-source="docdb">HU</country><country mxw-id="DS548859277" load-source="docdb">IE</country><country mxw-id="DS548812055" load-source="docdb">IS</country><country mxw-id="DS548913212" load-source="docdb">IT</country><country mxw-id="DS548919086" load-source="docdb">LI</country><country mxw-id="DS548894792" load-source="docdb">LT</country><country mxw-id="DS548909214" load-source="docdb">LU</country><country mxw-id="DS548894793" load-source="docdb">LV</country><country mxw-id="DS548894794" load-source="docdb">MC</country><country mxw-id="DS548831862" load-source="docdb">MK</country><country mxw-id="DS548831863" load-source="docdb">MT</country><country mxw-id="DS548911549" load-source="docdb">NL</country><country mxw-id="DS548913213" load-source="docdb">NO</country><country mxw-id="DS548911558" load-source="docdb">PL</country><country mxw-id="DS548859278" load-source="docdb">PT</country><country mxw-id="DS548911559" load-source="docdb">RO</country><country mxw-id="DS548859279" load-source="docdb">RS</country><country mxw-id="DS548911560" load-source="docdb">SE</country><country mxw-id="DS548859280" load-source="docdb">SI</country><country mxw-id="DS548831864" load-source="docdb">SK</country><country mxw-id="DS548831865" load-source="docdb">SM</country><country mxw-id="DS548919087" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA100258180" ref-ucid="WO-2012125259-A1" lang="EN" load-source="patent-office"><p num="0000">A sensor detects position data for a rotor of the motor at a first time. A data processor receives the detected position data associated with a first time delay. A sensing circuit senses an analog current at the motor during a second time delay. An analog-to-digital converter converts the analog current to a digital current data during a third time delay. The fourth time delay is detected between actual current reading instant and position reading instant in a data processor. The digital phase current data is transformed into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog phase current at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum.</p></abstract><abstract mxw-id="PA100507980" ref-ucid="WO-2012125259-A1" lang="EN" source="national office" load-source="docdb"><p>A sensor detects position data for a rotor of the motor at a first time. A data processor receives the detected position data associated with a first time delay. A sensing circuit senses an analog current at the motor during a second time delay. An analog-to-digital converter converts the analog current to a digital current data during a third time delay. The fourth time delay is detected between actual current reading instant and position reading instant in a data processor. The digital phase current data is transformed into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog phase current at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum.</p></abstract><abstract mxw-id="PA100258181" ref-ucid="WO-2012125259-A1" lang="FR" load-source="patent-office"><p num="0000">Un détecteur détecte pour la première fois des données de position pour un rotor de moteur. Un processeur de données reçoit les données de la position détectée associées à un premier retard. Un circuit de détection capte un courant analogique sur le moteur pendant un deuxième retard. Un convertisseur analogique-numérique convertit le courant analogique en un courant numérique pendant un troisième retard. Le quatrième retard est détecté entre l'instant de lecture de courant actuel et l'instant de lecture de position dans le processeur. Les données de courant de phase numérique sont transformées en données de courant continu de commande mesuré à axes en quadrature sur la base d'une synchronisation ou d'un alignement temporel des données de position avec le courant de phase analogique mesurée au point de départ. A cette fin, on compense des données de position par la somme du deuxième, du troisième et du quatrième retard, le premier retard étant est retranché de cette somme.</p></abstract><abstract mxw-id="PA100507981" ref-ucid="WO-2012125259-A1" lang="FR" source="national office" load-source="docdb"><p>Un détecteur détecte pour la première fois des données de position pour un rotor de moteur. Un processeur de données reçoit les données de la position détectée associées à un premier retard. Un circuit de détection capte un courant analogique sur le moteur pendant un deuxième retard. Un convertisseur analogique-numérique convertit le courant analogique en un courant numérique pendant un troisième retard. Le quatrième retard est détecté entre l'instant de lecture de courant actuel et l'instant de lecture de position dans le processeur. Les données de courant de phase numérique sont transformées en données de courant continu de commande mesuré à axes en quadrature sur la base d'une synchronisation ou d'un alignement temporel des données de position avec le courant de phase analogique mesurée au point de départ. A cette fin, on compense des données de position par la somme du deuxième, du troisième et du quatrième retard, le premier retard étant est retranché de cette somme.</p></abstract><description mxw-id="PDES51502449" ref-ucid="WO-2012125259-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH COMPENSATION FOR TIME DELAY IN POSITION DETERMINATION </p><p id="p0002" num="0002">This document claims priority based on U.S. provisional application serial number 61/445,640, filed on 23 February 2011 and entitled METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH COMPENSATION FOR TIME DELAY IN POSITION DETERMINATION, under 35 U.S.C. 119(e). </p><p id="p0003" num="0003">Field of the Invention </p><p id="p0004" num="0004"> This invention relates to a method and system for controlling an electric motor with compensation for time delay in position determination. </p><p id="p0005" num="0005">Background of the Invention </p><p id="p0006" num="0006"> An electric motor may feature a rotor with permanent magnets and a stator, such as an interior permanent magnet (IPM) motor or an IPM synchronous motor. In accordance with certain prior art, the position data may be delayed by electronic data processing or measurement circuitry, which produces an error between the actual measured position and the position intended to be used with phase currents for Park transformation. In turn, the control signals generated by the inverter may not be matched or synchronized in time with the position of the rotor, which results in inefficient or inaccurate control of the motor. Thus, there is a need for a method and system for controlling an electric motor with compensation for time delay in determined rotor position. </p><p id="p0007" num="0007">Summary of the Invention </p><p id="p0008" num="0008"> In accordance with one embodiment, a method and system is presented for controlling an electric motor, or determining a position of a rotor or motor shaft, with compensation for time delay. A sensor detects position data for a rotor of the motor at a first time. A data processor receives the detected position data associated with a first time delay. A sensing circuit senses analog current (e.g., an analog phase current) at the motor by operating during a second time delay. An analog-to-digital converter converts the analog current to a digital current data (e.g., digital phase current data) during a third time delay. The fourth time delay is detected between </p><p id="p0009" num="0009"> l 
<!-- EPO <DP n="4"/>-->
 actual current reading instant and position reading instant in a data processor. The digital current data is transformed into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog current at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. </p><p id="p0010" num="0010">Brief Description of the Drawings </p><p id="p0011" num="0011"> FIG. 1 is a block diagram of one embodiment of a system for controlling an electrical motor with time compensation for position sensing. </p><p id="p0012" num="0012"> FIG. 2 is a block diagram of an electronic data processing system consistent with FIG. 1. </p><p id="p0013" num="0013"> FIG. 3 is a graph of time delays associated with a pulse-width-modulation cycle of the electronic data processing system for controlling an electrical motor. </p><p id="p0014" num="0014"> FIG. 4 is a flow chart of a first embodiment of a method for controlling an electrical motor with time compensation for position sensing. </p><p id="p0015" num="0015"> FIG. 5 is a flow chart of a second embodiment of a method for controlling an electrical motor with time compensation for position sensing. </p><p id="p0016" num="0016"> FIG. 6 is a block diagram of another embodiment of an electronic data processing system consistent with FIG. 1. </p><p id="p0017" num="0017"> FIG. 7 is a block diagram of one possible configuration of the sensing circuit of FIG. 1 in greater detail. </p><p id="p0018" num="0018"> Description of the Preferred Embodiment </p><p id="p0019" num="0019"> In accordance with one embodiment, FIG. 1 discloses system for controlling a motor 117 (e.g., an interior permanent magnet (IPM) motor) or another alternating current machine. In one embodiment, the system, aside from the motor 117, may be referred to as an inverter or a motor controller. </p><p id="p0020" num="0020"> The system comprises electronic modules, software modules, or both. In one embodiment, the motor controller comprises an electronic data processing system 120 to support storing, processing or execution of software instructions of one or more software modules. The electronic data processing system 120 is indicated by the dashed lines in FIG. 1 and is shown in greater detail in FIG. 2. 
<!-- EPO <DP n="5"/>-->
 The data processing system 120 is coupled to an inverter circuit 188. The inverter circuit 188 comprises a semiconductor drive circuit that drives or controls switching semiconductors (e.g., insulated gate bipolar transistors (IGBT) or other power transistors) to output control signals for the motor 1 17. In turn, the inverter circuit 188 is coupled to the motor 117. The motor 117 is associated with a sensor 115 (e.g., a position sensor, a resolver or encoder position sensor) that is associated with the motor shaft 126 or the rotor. The sensor 115 and the motor 1 17 are coupled to the data processing system 120 to provide feedback data (e.g., current feedback data, such as i<sub>a</sub>, ib, ic). raw position signals, among other possible feedback data or signals, for example. Other possible feedback data includes, but is not limited to, winding temperature readings, semiconductor temperature readings of the inverter circuit 188, three phase voltage data, or other thermal or performance information for the motor 1 17. </p><p id="p0021" num="0021"> In one embodiment, the torque command generation module 105 is coupled to a d-q axis current generation manager 109 (e.g., d-q axis current generation lookup tables). D-q axis current refers to the direct axis current and the quadrature axis current as applicable in the context of vector-controlled alternating current machines, such as the motor 117. The output of the d-q axis current generation manager 109 and the output of a current adjustment module 107 (e.g., d-q axis current adjustment module 107) are fed to a summer 119. In turn, one or more outputs (e.g., direct axis current data (i&lt;j*) and quadrature axis current data (i<sub>q</sub>*)) of the summer 119 are provided or coupled to a current regulation controller 111. </p><p id="p0022" num="0022"> The current regulation controller 111 is capable of communicating with the pulse-width modulation (PWM) generation module 1 12 (e.g., space vector PWM generation module). The current regulation controller 111 receives respective d-q axis current commands (e.g., i<sub>d</sub>* and i<sub>q</sub>*) and actual d-q axis currents (e.g., id and i<sub>q</sub>) and outputs corresponding d-q axis voltage commands (e.g., v<sub>d</sub>* and v<sub>q</sub>* commands) for input to the PWM generation module 112. </p><p id="p0023" num="0023"> In one embodiment, the PWM generation module 112 converts the direct axis current and quadrature axis voltage data from two phase data representations into three phase representations (e.g., three phase voltage representations, such as v<sub>a</sub>*. V * and v<sub>c</sub><sup>*</sup>) for control of the motor 1 17, for example. Outputs of the PWM </p><p id="p0024" num="0024">generation module 112 are coupled to the inverter 188. </p><p id="p0025" num="0025"> The inverter circuit 188 comprises power electronics, such as switching 
<!-- EPO <DP n="6"/>-->
 semiconductors to generate, modify and control pulse-width modulated signals or other alternating current signals (e.g., pulse, square wave, sinusoidal, or other waveforms) applied to the motor 117. The PWM generation module 1 12 provides inputs to a driver stage within the inverter circuit 188. An output stage of the inverter circuit 188 provides a pulse-width modulated signal or other alternating current signal for control of the motor. In one embodiment, the inverter 188 is powered by a direct current (DC) voltage bus. </p><p id="p0026" num="0026"> The motor 117 is associated with a sensor 1 15 (e.g., a resolver, encoder, speed sensor, or another position sensor or sensors) that estimates at least one of an angular position of the motor shaft 126, a speed or velocity of the motor shaft 126, and a direction of rotation of the motor shaft 126. The sensor 115 may be mounted on or integral with the motor shaft 126. The output of the sensor 115 is capable of communication with the primary processing module 114 (e.g., position and speed processing module). In one embodiment, the sensor 115 may be coupled to an analog-to-digital converter (not shown) that converts analog position data or velocity data to digital position or velocity data, respectively. In other embodiments, the sensor 1 15 (e.g., digital position encoder) may provide a digital data output of position data or velocity data for the motor shaft 126 or rotor. </p><p id="p0027" num="0027"> A first output (e.g., position data and speed data for the motor 117) of the primary processing module 114 is communicated to the phase converter 113 (e.g., three-phase to two-phase current Park transformation module) that converts respective three-phase digital representations of measured current into </p><p id="p0028" num="0028">corresponding two-phase digital representations of measured current. A second output (e.g., speed data) of the primary processing module 1 14 is communicated to the calculation module 110 (e.g., adjusted voltage over speed ratio module). </p><p id="p0029" num="0029"> An input of a sensing circuit 124 is coupled to terminals of the motor 1 17 for sensing at least the measured three-phase currents and a voltage level of the direct current (DC) bus (e.g., high voltage DC bus which may provide DC power to the inverter circuit 188). An output of the sensing circuit 124 is coupled to an analog-to- digital converter 122 for digitizing the output of the sensing circuit 124. In turn, the digital output of the analog-to-digital converter 122 is coupled to the secondary processing module 116 (e.g., Direct current (DC) bus and three phase current processing module). For example, the sensing circuit 124 is associated with the motor 1 17 for measuring three phase currents (e.g., current applied to the windings 
<!-- EPO <DP n="7"/>-->
 of the motor 1 17, back EMF induced into the windings, or both). </p><p id="p0030" num="0030"> Certain outputs of primary processing module 1 4 and the secondary processing module 116 feed the phase converter 1 13. For example, the phase converter 1 13 may apply a Park transformation or other conversion equations (e.g., certain conversion equations that are suitable are known to those of ordinary skill in the art) to convert the measured three-phase representations of current into two- phase representations of current based on the digital three-phase current data from the secondary processing module 116 and position data from the sensor 115. The output of the phase converter 1 13 module is coupled to the current regulation controller 1 1 1. </p><p id="p0031" num="0031"> Other outputs of the primary processing module 14 and the secondary processing module 116 may be coupled to inputs of the calculation module 110 (e.g., adjusted voltage over-speed ratio calculation module). For example, the primary processing module 114 may provide speed data (e.g., motor shaft 126 revolutions per minute), whereas the secondary processing module 116 may provide a measured level of direct current voltage (e.g., on the direct current (DC) bus of a vehicle). The direct current voltage level on the DC bus that supplies the inverter circuit 188 with electrical energy may fluctuate or vary because of various factors, including, but not limited to, ambient temperature, battery condition, battery charge state, battery resistance or reactance, fuel cell state (if applicable), motor load conditions, respective motor torque and corresponding operational speed, and vehicle electrical loads (e.g., electrically driven air-conditioning compressor). The calculation module 110 is connected as an intermediary between the secondary processing module 1 16 and the dq-axis current generation manager 109. The output of the calculation module 10 can adjust or impact current commands generated by the d-q axis current generation manager 109 to compensate for fluctuation or variation in direct current bus voltage, among other things. </p><p id="p0032" num="0032"> The rotor magnet temperature estimation module 104, the current shaping module 106, and the terminal voltage feedback module 108 are coupled to or are capable of communicating with the dq-axis current adjustment module 07. In turn, the d-q axis current module 107 may communicate with the dq-axis current generation manager or the summer 119. </p><p id="p0033" num="0033"> The rotor magnet temperature module 104 estimates or determines the temperature of the rotor permanent magnet or magnets. In one embodiment, the 
<!-- EPO <DP n="8"/>-->
 rotor magnet temperature estimation module 104 may estimate the temperature of the rotor magnets from internal control variables calculation, one or more sensors located on the stator, in thermal communication with the stator, or secured to the housing of the motor 1 17. </p><p id="p0034" num="0034"> In one alternate embodiment, the rotor magnet temperature estimation module 104 may be replaced by or may estimate the temperature of the rotor magnets from one or more sensors located on the stator, in thermal communication with the stator, or secured to the housing of the motor 1 17. </p><p id="p0035" num="0035"> In another alternative embodiment, the rotor magnet temperature estimation module 104 may be replaced with a temperature detector (e.g., a thermistor and wireless transmitter) mounted on the rotor or the magnet, where the detector provides a signal (e.g., wireless signal) indicative of the temperature of the magnet or magnets. </p><p id="p0036" num="0036"> In one embodiment, the method or system may operate in the following manner. The torque command generation module 105 receives an input control data message, such as a speed control data message, a voltage control data message, or a torque control data message, over a vehicle data bus 118. The torque command generation module 105 converts the received input control message into torque control command data 316. </p><p id="p0037" num="0037"> The d-q axis current generation manager 109 selects or determines the direct axis current command data and the quadrature axis current command data associated with respective torque control command data and respective detected motor shaft 126 speed data. For example, the d-q axis current generation manager 109 selects or determines the direct axis current command, the quadrature axis current command by accessing one or more of the following: (1 ) a look-up table, database or other data structure that relates respective torque commands to corresponding direct and quadrature axes currents, (2) a set of quadratic equations or linear equations that relate respective torque commands to corresponding direct and quadrature axes currents, or (3) a set of rules (e.g., if-then rules) that relates respective torque commands to corresponding direct and quadrature axes currents. The sensor 115 on the motor 117 facilitates provision of the detected speed data for the motor shaft 126, where the primary processing module 114 may convert position data provided by the sensor 1 15 into speed data. </p><p id="p0038" num="0038"> The current adjustment module 107 (e.g., d-q axis current adjustment module) 
<!-- EPO <DP n="9"/>-->
 provides current adjustment data to adjust the direct axis current command data and the quadrature axis current command data based on input data from the rotor magnet temperature estimation module 104 and the current shaping module 106. </p><p id="p0039" num="0039"> The current shaping module 106 may determine a correction or preliminary adjustment of the quadrature axis (q-axis) current command and the direct axis (d- axis) current command based on one or more of the following factors: torque load on the motor 117 and speed of the motor 117, for example. The rotor magnet temperature estimation module 104 may generate a secondary adjustment of the q- axis current command and the d-axis current command based on an estimated change in rotor temperature or an estimated change in magnetic field strength of the rotor magnets with respect to a characterized rotor temperature or magnetic field strength at a known ambient temperature under known operational conditions, for example. The current adjustment module 107 may provide an aggregate current adjustment that considers at least one of the preliminary adjustment and one of the secondary adjustment. </p><p id="p0040" num="0040"> The sensor 115 (e.g., shaft or rotor speed detector) may comprise one or more of the following: a direct current motor, an optical encoder, a magnetic field sensor (e.g., Hall Effect sensor), magneto-resistive sensor, and a resolver (e.g., a brushless resolver). In one configuration, the sensor 115 comprises a position sensor, where position data and associated time data are processed to determine speed or velocity data for the motor shaft 126. In another configuration, the sensor 115 comprises a speed sensor, or the combination of a speed sensor and an integrator to determine the position of the motor shaft. </p><p id="p0041" num="0041"> In yet another configuration, the sensor 115 comprises an auxiliary, compact direct current generator that is coupled mechanically to the motor shaft 126 of the motor 117 to determine speed of the motor shaft 126, where the direct current generator produces an output voltage proportional to the rotational speed of the motor shaft 126. In still another configuration, the sensor 1 15 comprises an optical encoder with an optical source that transmits a signal toward a rotating object coupled to the shaft 126 and receives a reflected or diffracted signal at an optical detector, where the frequency of received signal pulses (e.g., square waves) may be proportional to a speed of the motor shaft 126. In an additional configuration, the sensor 1 15 comprises a resolver with a first winding and a second winding, where the first winding is fed with an alternating current, where the voltage induced in the 
<!-- EPO <DP n="10"/>-->
 second winding varies with the frequency of rotation of the rotor. </p><p id="p0042" num="0042"> In FIG. 2, the electronic data processing system 120 comprises an electronic data processor 264, a data bus 262, a data storage device 260, and one or more data ports (268, 270, 272, 274 and 276). The data processor 264, the data storage device 260 and one or more data ports are coupled to the data bus 262 to support communications of data between or among the data processor 264, the data storage device 260 and one or more data ports. </p><p id="p0043" num="0043"> In one embodiment, the data processor 264 may comprise one or more of the following electronic components: an electronic data processor, a microprocessor, a microcontroller, a programmable logic array, a field programmable gate array (FPGA), a logic circuit, an arithmetic logic unit, an application specific integrated circuit, a digital signal processor (DSP), a proportional-integral-derivative (PID) controller, or another data processing device. The above electronic components may be interconnected via one or more data buses, parallel data buses, serial data buses, or any combination of parallel and serial data buses, for example. </p><p id="p0044" num="0044"> The data storage device 260 may comprise any magnetic, electronic, or optical device for storing data. For example, the data storage device 260 may comprise an electronic data storage device, an electronic memory, non-volatile electronic random access memory, one or more electronic data registers, data latches, a magnetic disc drive, a hard disc drive, an optical disc drive, or the like. </p><p id="p0045" num="0045"> As shown in FIG. 2, the data ports comprise a first data port 268, a second data port 270, a third data port 272, a fourth data port 274 and a fifth data port 276, although any suitable number of data ports may be used. Each data port may comprise a transceiver and buffer memory, for example. In one embodiment, each data port may comprise any serial or parallel input/output port. </p><p id="p0046" num="0046"> In one embodiment as illustrated in FIG. 2, the first data port 268 is coupled to the vehicle data bus 118. In turn, the vehicle data bus 118 is coupled to the controller 266. In one configuration, the second data port 270 may be coupled to the inverter circuit 188; the third data port 272 may be coupled to the sensor 1 15; the fourth data port 274 may be coupled to the analog-to-digital converter 122; and the fifth data port 276 may be coupled to the terminal voltage feedback module 108. The analog-to-digital converter 122 is coupled to the sensing circuit 124. </p><p id="p0047" num="0047"> In one embodiment of the data processing system 120, the torque command generation module 105 is associated with or supported by the first data port 268 of 
<!-- EPO <DP n="11"/>-->
 the electronic data processing system 120. The first data port 268 may be coupled to a vehicle data bus 118, such as a controller area network (CAN) data bus. The vehicle data bus 18 may provide data bus messages with torque commands to the torque command generation module 105 via the first data port 268. The operator of a vehicle may generate the torque commands via a user interface, such as a throttle, a pedal, a controller 266, or other control device. </p><p id="p0048" num="0048"> In certain embodiments, the sensor 115 and the primary processing module 114 may be associated with or supported by a third data port 272 of the data processing system 120. </p><p id="p0049" num="0049"> FIG. 3 is a graph of time delays associated with a pulse-width-modulation cycle or another pulse cycle (e.g., clock pulse) of the electronic data processing system for controlling an electrical motor. In FIG. 3, the horizontal axis is the time axis, whereas the vertical axis is the amplitude axis. Although FIG. 3 shows a signal pulse of a pulse width modulation cycle, the signal pulse may be for a clock signal or another type of signal. In one embodiment, vertical axis represents the pulse width modulation time base counter in the data processing system 120 because the amplitude or voltage of the pulse has a known slope versus time or profile. The data processor 264 may read the counter value to get a corresponding time stamp for each instant to determine any time delay, or beginning time, termination time, or intermediate time. </p><p id="p0050" num="0050"> FIG. 3 illustrates the first time delay, the second time delay, the third time delay and the fourth time delay with respect to time points on the time axis. The time points comprise the starting time, the first time the second time, the second time, the third time and the fourth time. </p><p id="p0051" num="0051"> Alternatively, the time delays may be referred to by the following mathematical variables, where Td1 is the first time delay, Td2 is the fourth time delay; Td3 is the second time delay; Td4 is the third time delay; and Ttot or Ttotal is the determined in accordance with the following equation; </p><p id="p0052" num="0052"> Ttotal = Td3 + Td4 + Td2 - Td1. </p><p id="p0053" num="0053">FIG. 4 discloses a first embodiment of a method for controlling an electric motor (e.g., motor 1 17), or determining a position of a rotor or motor shaft 126, with compensation for time delay. The method of FIG. 4 begins in step S450. </p><p id="p0054" num="0054"> In step S450, a sensor 1 15 detects position data for a rotor of the motor 117 
<!-- EPO <DP n="12"/>-->
 at a first time. </p><p id="p0055" num="0055"> In step S452, a data processor 264 receives the detected position data associated with a first time delay. The first time delay (e.g., Td1 ) comprises the time period between a first time and a second time, where the first time is associated with detection of the raw position by the sensor 115 and where the second time is associated with the detection of the raw position at the data processor (264 or 664) or digital signal processor (606) (e.g., after transmission via one or more data paths or via one or more data buses). In one embodiment, the detected position data is received at a data processor 264 is communicated via a first data bus (e.g., 602 in FIG. 6) from the sensor 115 to a field programmable gate array (FPGA) and a second data bus (e.g., 608 in FIG. 6) from the field programmable gate array to a digital signal processor (DSP), where the first data bus comprises a serial data bus and the second data bus comprises a parallel bus. In one illustrative example, the first time delay comprises a time period associated with transmission of a sensor signal from the sensor 115 and receipt of the sensor signal at the primary processing module 114 or data processor 264. </p><p id="p0056" num="0056"> In step S454, a sensing circuit 124 senses an analog current (e.g., analog phase current or analog three phase currents) at the motor 1 17 by operation of the sensing circuit 124 during a second time delay. The second time delay (Td3) comprises the time period of hardware signal processing delay for a signal representative of the sensed position data to traverse the sensing circuit 124. The second time delay begins with the actual sensing of three phase analog current at the sensing circuit 124 and terminates with providing of the three phase analog current to the digital-to-analog converter 122. In one illustrative example, the second time delay comprises a time period when the sensing circuit 124 senses an analog phase current (e.g., analog three phase current) at the motor 117 via the sensor signal. </p><p id="p0057" num="0057"> In one embodiment, the second time delay (e.g., Td3) in the hardware sensing stage is determined by the following equation. </p><p id="p0058" num="0058"> T <sup>Φ</sup> Ρ 1 </p><p id="p0059" num="0059"> β ~ 360· <sup>"</sup> /. ' where /, is the electrical frequency corresponding to a specific motor speed and Φ|<sub>0(</sub> is the total phase delay or time delay caused by the sensing circuit 124. 
<!-- EPO <DP n="13"/>-->
 In step S456, an analog-to-digital converter 122 converts and stores the analog current (e.g., analog three phase current) to a digital current data (e.g., digital three phase current data) during a third time delay. For example, in the analog-to- digital converter 122, the storage may occur in sample-and-hold registers, in analog- to-digital converter peripheral registers, or both, where delay is associated with storage in the registers, or transfer of data between the registers. The analog current comprises analog three phase current and wherein digital current data comprises digital three phase current. The third time delay (e.g., Td4) comprises the time period associated with the analog-to-digital conversion process in the analog to digital converter 122. The third time delay includes analog-to-digital sampling and hold delay. At the termination of the third time delay, the digital three phase current data is provided to the data processor (264 or 664) or digital signal processor (606). </p><p id="p0060" num="0060"> In step S458, the fourth time delay is detected between actual current reading instant (e.g., digital three phase current reading) and corresponding position reading instant in a data processor 264. For example, a secondary processing module 16 or the data processor 264 detects the time difference between actual current reading instant and position reading instant in a data processor 264 (e.g., digital signal processor (DSP)) as a fourth time delay (e.g., Td2) between the fourth time and first time. The fourth time delay represents a time between the first time and the fourth time. The fourth time delay (Td2) comprises the difference between a current reading instant of the digital three phase current and the position reading instant in the data processor (264 or 664). In one illustrative example, the fourth time delay comprises a primary data processing time period (or through-put time) for position reading and determination in the data processor 264 (e.g., primary processing module 1 14), and a secondary data processing time period (or through-put time) for current phase reading and determination in the data processor 264 (e.g., secondary processing module 116). </p><p id="p0061" num="0061"> In step S460, the digital current data is transformed into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog current (e.g., three phase current) at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. For example, the data processor 264 provides respective position data of the rotor from the primary processing module 14 that is 
<!-- EPO <DP n="14"/>-->
 synchronized with the corresponding current phase data (e.g., i<sub>a</sub>, i<sub>b</sub>, and i<sub>e</sub>) from the secondary processing module 1 16 for temporally aligned input to the phase converter 113 (e.g., for Park transformation) because of the compensation (e.g., the offset provided by the first time delay, subtracted from the above sum). </p><p id="p0062" num="0062"> Step S460 may be carried out in accordance with various techniques that may be applied alternately or cumulatively. Under a first technique, the phase converter 113 or data processor (e.g., 264 or 664) transforms or converts three-phase current readings into actual direct and quadrature-axes current data by establishing an adjusted direct-quadrature axes for the motor by the data processor 264, where the adjustment relates to the applying the temporal alignment to a raw direct-quadrature axes determined by the raw position sensor reading. Under a second technique, the phase converter 13 or the data processor (e.g., 264 or 664) transforms or converts three-phase current readings into actual dq-axis currents by adjusting the </p><p id="p0063" num="0063">transfomiation angle or rotor position angle, defined from a phase-A magnetic axis to the positive direct axis. Under a third technique, the phase converter 1 12 or the data processor (e.g., 264 or 664) transforms by converting three-phase detected currents readings into actual direct and quadrature axes current data using actual position data of the rotor, which may be advanced in time from the detected position data in the data processor 264 at the second time due to serial and parallel bus </p><p id="p0064" num="0064">communication (e.g., the first data bus 602 and the second data bus 608 of FIG. 6, respectively). </p><p id="p0065" num="0065"> In an alternative embodiment, after step S460, the data processor (264 or 664) may apply an additional compensation to the raw detected rotor position data reading in the data processor 264 consistent with the following equation to adjust the hardware sensing stage delay of the sensing circuit 124, analog-to-digital conversion stage delay of the analog-to-digital converter 122, currents reading and position reading difference delay in the data processor (264 or 664) as well as raw position advancement due to serial and parallel bus communication (e.g., the first data bus 602 and the second data bus 608 of FIG. 6, respectively): </p><p id="p0066" num="0066">a a latest jp./ rpm . , . </p><p id="p0067" num="0067"> = ¾#- _«ta <sub>m</sub> <sup>■ 360</sup> · P°<sup>le</sup> - P°'<sup>n■ T</sup>J where „„<sub>Λ</sub>„ is the selected position between the predicted position and adjusted position reading, the latest spd_rpm is the last detected speed by data 
<!-- EPO <DP n="15"/>-->
 processor 264, and pole _pairs is a number of pole pairs within the motor (e.g., 117), and Td is the total time delay. </p><p id="p0068" num="0068"> FIG. 5 discloses a second embodiment of a method for controlling an electric motor, or determining a position of a rotor or motor shaft 126, with compensation for time delay. The method of FIG. 5 begins in step S400. </p><p id="p0069" num="0069"> In step S400, a sensor 115 detects position data for a rotor of the motor 117 at a first time. </p><p id="p0070" num="0070"> In step S402, a data processor 264 receives the detected position data at a second time, wherein a first time delay (e.g., Td1) is defined between the first time and the second time. At the first time the raw position was detected by the sensor 115 and at a second time the raw position was detected by the data processor 264 (e.g., digital signal processor (DSP) or the primary processing module 1 14) after transmission. In one embodiment, the receiving of the detected position data at a data processor 264 is communicated via a first data bus (602 in FIG. 6) from the sensor 115 to a field programmable gate array (FPGA) (e.g., 604 in FIG. 6) and a second data bus (608 in FIG. 6) from the field programmable gate array (e.g., 604) to a digital signal processor (DSP) (e.g., 606 in FIG. 6), the first data bus (602) comprising a serial data bus and the second bus (608) comprising a parallel bus. </p><p id="p0071" num="0071"> In step S404, a sensing circuit 124 senses an analog phase current (e.g., analog three phase currents) at the motor by operating during a second time delay (e.g., Td3) defined between a starting time and a third time. The second time delay is the time delay associated with the hardware in the sensing circuit 124. The starting time is when the sensing circuit 124 actually begins to sense the analog phase current (e.g., three phase currents) received from the sensor 115. The second time delay relates to the three phase currents after the hardware sensing delay in the sensing circuit 124 and terminates simultaneously with triggering of the analog-to digital conversion. In one example, the sensing circuit 124 senses the three phase actual currents that comprise first sensing by a current transducer (e.g., 701 in FIG. 7) and then adjusting the output of the current transducer by an amplifier (e.g., an operational amplifier) (e.g., 703 in FIG. 7). </p><p id="p0072" num="0072"> In one embodiment, the second time delay (e.g., Td3) in the hardware sensing stage is determined by the following equation: 
<!-- EPO <DP n="16"/>-->
 τ - <sup>φ</sup>- (/,) 1 </p><p id="p0073" num="0073"> 360' 7. ' </p><p id="p0074" num="0074">where /, is the electrical frequency corresponding to a specific motor speed and O<sub>tot</sub> is the total phase delay caused by the sensing circuit 124. </p><p id="p0075" num="0075"> In step S406, an analog-to-digital converter 122 converts the analog current (e.g., analog three phase current) to a digital current (e.g., digital three phase current data) during a third time delay (e.g., Td4) defined between the third time and a fourth time. The third time delay relates to a time delay between the third time and the fourth time. At the third time the actual three phase analog currents begin conversion to digital three phase currents. The analog-to-digital conversion process experience delays from one or more of the following: digital sampling and hold, a sampling-hold delay, storage of data in data registers, storage of data in sampling and hold registers, storing data in peripheral analog-to-digital registers, and transferring data between registers. Further, the analog to digital process may involve further delay in reading the three phase digital currents by the data processor 264 from peripheral registers of an analog-to-digital converter 122. At the fourth time the analog-to-digital conversion is completed. </p><p id="p0076" num="0076"> In step S408, a secondary processing module 1 16 or the data processor 264 detects the time difference between actual current reading instant and position reading instant in a data processor 264 (e.g., digital signal processor (DSP)) as a fourth time delay (e.g., Td2) between the fourth time and first time. The fourth time delay represents a time between the first time and the fourth time. </p><p id="p0077" num="0077"> In an alternative embodiment, the fourth time delay may be defined as the difference between a current reading instant of respective raw position data detection by the sensor 1 15 and the current reading instant of corresponding analog phase current data in the data processor 264 (e.g., digital signal processor). </p><p id="p0078" num="0078"> In another alternative embodiment, the fourth time delay may take into account the time delay or time difference associated with the digital signal processing of phase current data within the secondary processing module 1 16 and transmission time through a data port (e.g., fourth data port 274) to the secondary processing module 1 6 or data processor 264, for example. Further, the secondary processing module's or the data processor's detection of the time difference may 
<!-- EPO <DP n="17"/>-->
 involve further delay in reading the three phase digital currents by the data processor 264 from peripheral registers of an analog-to-digital converter 122. </p><p id="p0079" num="0079"> In step S410, the phase converter 113 or the data processor 264 transforms the digital current data (e.g., three phase current data) into measured direct-axis control current data and quadrature-axis control current data based on </p><p id="p0080" num="0080">synchronization or temporal alignment of the position data with the actual measured three phase currents at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. For example, the data processor 264 provides respective position data of the rotor from the primary processing module 14 that is synchronized with the corresponding current phase data (e.g., i<sub>a</sub>, it&gt;, and i<sub>c</sub>) from the secondary processing module 116 for temporally aligned input to the phase converter 113 (e.g., for Park transformation) because of the compensation (e.g., the offset provided by the first time delay, subtracted from the above sum). </p><p id="p0081" num="0081"> Step S410 may be carried out in accordance with various techniques that may be applied alternately or cumulatively. Under a first technique, the phase converter 113 or data processor (e.g., 264 or 664) transforms or converts three-phase current readings into actual direct and quadrature-axes current data by establishing an adjusted direct-quadrature axes for the motor by the data processor 264, where the adjustment relates to the applying the temporal alignment to a raw direct-quadrature axes determined by the raw position sensor 1 15 reading. Under a second technique, the phase converter 113 or the data processor (e.g., 264 or 664) transforms or converts three-phase current readings into actual dq-axis currents by adjusting the transformation angle or rotor position angle, defined from a phase-A magnetic axis to the positive direct axis. Under a third technique, the phase converter 112 or the data processor (e.g., 264 or 664) transforms by converting three-phase detected currents readings into actual direct and quadrature axes current data using actual position data of the rotor, which may be advanced in time from the detected position data in the data processor 264 at the second time due to serial and parallel bus </p><p id="p0082" num="0082">communication (e.g., the first data bus 602 and the second data bus 608 of FIG. 6, respectively). </p><p id="p0083" num="0083"> In an alternative embodiment, after step S4 0, the data processor (264 or 664) may apply an additional compensation to the raw detected rotor position data reading in the data processor 264 consistent with the following equation to adjust the 
<!-- EPO <DP n="18"/>-->
 hardware sensing stage delay of the sensing circuit 124, analog-to-digital conversion stage delay of the analog-to-digital converter 122, currents reading and position reading difference delay in the data processor (264 or 664) as well as raw position advancement due to serial and parallel bus communication(e.g., the first data bus 602 and the second data bus 608 of FIG. 6, respectively): </p><p id="p0084" num="0084"> . . latest spd torn . ... , _ </p><p id="p0085" num="0085">0<sub>lWV»</sub>, = ^„<sub>&lt;</sub>.,<sub>r</sub>._<sub>«</sub> gj 360 · pole _ pairs T, where θ^,, <sub>Kltmd</sub> is the selected position between the predicted position and adjusted position reading, the latest spd_rpm is the last detected speed by data processor 264, and pole _pairs is a number of pole pairs within the motor, and Td is the total time delay. </p><p id="p0086" num="0086"> The data processing system 620 of FIG. 6 is similar to the data processing system 120 of FIG. 1 , except the data processing system 620 of FIG. 6 features data processor 664 and the first data bus 602. Like reference numbers in FIG. 1 and FIG. 6 indicate like elements. </p><p id="p0087" num="0087"> In the illustrative configuration of FIG. 6, the first data bus 602 provides a first communication path for measured position data (or speed data) between the sensor 1 15 and a data port (e.g., the third data port 272) of the data processing system 620. In turn, the data port or third data port 272 supports communications with the data processor 664 via the data bus 262. The data processor 664 comprises a field programmable gate array (FPGA) coupled to a digital signal processor (DSP) via a second data bus 608. The second data bus 608 provides a second communication path for measured position data (or speed data) of the sensor 1 15. In one embodiment, the first data bus 602 comprises a serial data bus, whereas the second data bus 608 may comprise a parallel data bus. Accordingly, if the first data bus 602 comprises a serial data bus, it tends to have a lower data throughput or maximum transmission rate in bits or bytes per second than the parallel data bus. </p><p id="p0088" num="0088"> FIG. 7 shows a block diagram of one possible configuration the sensing circuit 124 of FIG. 1 , FIG. 2 and FIG. 6 in greater detail. In one embodiment, the sensing circuit 124 may comprise a current transducer 701 coupled to an amplifier 703 (e.g., an operational amplifier). In turn, the amplifier 703 is coupled to a filter 705 or antialiasing filter. The output of the filter 705 is capable of communicating with the inputs of the analog-to-digital converter 124. 
<!-- EPO <DP n="19"/>-->
 The current transducer 701 has a transducer input and a transducer output, where the transducer output is coupled to the amplifier input of the amplifier 703. </p><p id="p0089" num="0089"> The amplifier 703 may be used for scaling of voltages outputted by the current transducer 701 such that the voltages fall within a desired range (e.g., zero to three volts) for input to the analog-to-digital converter 124, or other digital logic circuitry. The amplifier 703 may also address any offset of the output voltages of the current transducer 701. In one embodiment, the amplifier 703 may comprise two successive or tandem stages of operational amplifiers, where an output of the first operational amplifier of the first stage feeds the input of a second operational amplifier of the second stage. If the sensing circuit 124 has two stages of amplification, each stage of amplification may add delay to the total delay or phase lag. The amplifier 703, or two stage operational amplifier configuration has an amplifier input and an amplifier output, where the amplifier output is coupled to a filter input of the filter 705. </p><p id="p0090" num="0090"> The filter 705 may comprise a low pass filter or another anti-aliasing filter. In one configuration, the filter 705 comprises a resistive capacitive (RC) network fitter. The filter has a filter input and a filter output. </p><p id="p0091" num="0091"> The method and system disclosed herein is well-suited for controlling an electric motor with compensation for time delay. The method and system facilitates accurate control signals based on position data that is adjusted for delays by electronic data processing or measurement circuitry. In particular, the method and system facilitates the reduction or elimination of error caused by temporal misalignment of the measured position data and corresponding phase current data that is inputted to the phase converter for control and regulation of current by the current regulation controller; hence, ultimately control of the inverter switching circuit. The method and system supports the reduction of an error between the actual measured position of the rotor and the position intended to be used with phase currents for Park transformation. Accordingly, the control signals generated by the inverter may be more precisely matched, aligned or synchronized in time with the actual position of the rotor than otherwise possible, which results in efficient or accurate control of the motor. </p><p id="p0092" num="0092"> Having described the preferred embodiment, it will become apparent that various modifications can be made without departing from the scope of the invention as defined in the accompanying claims. 
</p></description><claims mxw-id="PCLM45131972" ref-ucid="WO-2012125259-A1" lang="EN" load-source="patent-office"><claim id="clm-0001" num="0001"><!-- EPO <DP n="20"/>--><claim-text> The following is claimed: </claim-text><claim-text> 1. A method for controlling a motor, the method comprising: </claim-text><claim-text> detecting, by a sensor, position data for a rotor of the motor at a first time; receiving, by a data processor, the detected position data associated with a first time delay; </claim-text><claim-text> sensing, by a sensing circuit, an analog phase current at the motor by operating during a second time delay; </claim-text><claim-text> converting, by an analog-to-digital converter, the analog current to a digital current data during a third time delay; </claim-text><claim-text> detecting a fourth time delay between an actual current reading instant and a position reading instant in a data processor; </claim-text><claim-text> transforming the digital current data into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog current at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. </claim-text><claim-text>2. The method according to claim 1 wherein the analog current comprises analog three phase current and wherein digital current data comprises digital three phase current. </claim-text><claim-text>3. The method according to claim 1 wherein the first time delay comprises a time period associated with transmission of a sensor signal from the sensor and receipt of the sensor signal at the data processor; the second time delay comprises a time period when the sensing circuit senses an analog control current at motor windings of the motor via the sensor signal; the third time delay comprises a time period 
<!-- EPO <DP n="21"/>-->
 associated with the analog-to-digital conversion and storage process in the analog- to-digital converter; and the fourth time delay comprises a time period or offset from a phase current reading to a position data reading and determination in the data processor. </claim-text><claim-text>4. The method according to claim 1 wherein the receiving of the detected position data at a data processor is communicated via a first data bus from the sensor to a field programmable gate array (FPGA) and a second data bus from the field programmable gate array to a digital signal processor (DSP), the first data bus comprising a serial data bus and the second bus comprising a parallel bus. </claim-text><claim-text>5. The method according to claiml wherein the transforming or converting of three- phase current readings into actual direct and quadrature-axes current data comprises establishing an adjusted direct-quadrature axes for the motor by the data processor, where the adjustment relates to the applying the temporal alignment to a raw direct-quadrature axes determined by the raw position sensor reading. </claim-text><claim-text>6. The method according to claim 1 wherein the transforming or converting of three- phase current readings into actual dq-axis currents comprises adjusting the transformation angle or rotor position angle, defined from phase-A magnetic axis to the positive direct axis . </claim-text><claim-text>7. The method according to claim 1 wherein the second time delay in the hardware sensing stage is determined by the following equation. </claim-text><claim-text><sub>T</sub> *»(/,) 1 </claim-text><claim-text> 360· <sup>"</sup>/, <sup>1</sup> 
<!-- EPO <DP n="22"/>-->
 where /, is the electrical frequency corresponding to a specific motor speed and O<sub>to</sub>t is the total phase delay caused by the sensing circuit. </claim-text><claim-text>8. The method according to claim 1 wherein the transforming further comprises: </claim-text><claim-text> converting three-phase detected currents readings into actual direct and quadrature axes current data using actual position data of the rotor, which may be advanced in time from the detected position data in the data processor at the second time due to serial and parallel bus communication. </claim-text><claim-text>9. The method according to claim 1 further comprising: </claim-text><claim-text>applying, by the data processor, an additional compensation to the raw detected rotor position data reading in the data processor consistent with the following equation to adjust the hardware sensing stage delay, analog-to-digital conversion stage delay, currents reading and position reading difference delay in the data processor as well as raw position advancement due to serial and parallel bus communication: </claim-text><claim-text><sup>•</sup> 360'<sup>■</sup> pole _ pairs<sup>■</sup> 7<sub>t</sub></claim-text><claim-text><img id="imgf000022_0001" he="9" wi="56" file="imgf000022_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 where β is the selected position between the predicted position and adjusted position reading, the latest spdjrpm is the last detected speed by data processor, and pole _pairs is a number of pole pairs within the motor, and Td is the total time delay. </claim-text><claim-text>10. A method for controlling a motor, the method comprising: 
<!-- EPO <DP n="23"/>-->
 detecting, by a sensor, position data for a rotor of the motor at a first time; receiving the detected position data at a data processor at a second time, wherein a first time delay is defined between the first time and the second time; sensing an analog three phase control current at the motor by a hardware sensing stage that operates during a second time delay defined between the starting time and a third time; </claim-text><claim-text> converting the analog three phase current to a digital three phase current data during a third time delay defined between the third time and a fourth time; </claim-text><claim-text> detecting the time difference between actual current reading instant and position reading instant in the data processor as a fourth time delay between the fourth time and second time; and </claim-text><claim-text> transforming, at the data processor, the digital three phase current data into measured direct-axis control current data and quadrature-axis control current data based on synchronization or temporal alignment of the position data with the actual measured three phase currents at the starting time by compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. </claim-text><claim-text>1 1. The method according to claim 10 wherein the receiving of the detected position data at a data processor is communicated via a first data bus from the sensor to a field programmable gate array (FPGA) and a second data bus from the field programmable gate array to a digital signal processor (DSP), the first data bus comprising a serial data bus and the second bus comprising a parallel bus. </claim-text><claim-text>12. The method according to claim 10 wherein: 
<!-- EPO <DP n="24"/>-->
 the sensing of the three phase actual currents further comprises first sensing by a current transducer and then adjusting the output of the current transducer by an amplifier; </claim-text><claim-text> the converting further comprises converting the analog values to digital values after sampling-hold delay; and </claim-text><claim-text> the detecting the time difference further comprises reading the three phase digital currents which were read by the data processor from peripheral registers of an analog-to-digital converter. </claim-text><claim-text>13. The method according to claim 10 wherein the transforming or converting of three-phase current readings into actual direct and quadrature-axes current data comprises establishing an adjusted direct-quadrature axes for the motor by the data processor, where the adjustment relates to the applying the temporal alignment to a raw direct-quadrature axes determined by the raw position sensor reading. </claim-text><claim-text>14. The method according to claim 10 wherein the transforming or converting of three-phase current readings into actual dq-axis currents comprises adjusting the transformation angle or rotor position angle, defined from the positive direct axis to a phase-A magnetic axis. 5. The method according to claim 10 wherein the hardware sensing stage comprises: </claim-text><claim-text> a low pass filter having a filter output; </claim-text><claim-text> a two stage operational amplifier configuration with an amplifier input and an amplifier output, the amplifier output coupled to the filter input; and 
<!-- EPO <DP n="25"/>-->
 a current transducer with a transducer input and a transducer output, the transducer output is coupled to the amplifier input. </claim-text><claim-text>16. The method according to claim 10 wherein the second time delay in the hardware sensing stage is determined by the following equation. </claim-text><claim-text>T - *»( .)<sup>■</sup> i t </claim-text><claim-text> 360· 7<sub>t</sub> ' </claim-text><claim-text>where /, is the electrical frequency corresponding to a specific motor speed and Φ<sub>(0</sub>ι is the total phase delay caused by the sensing circuit. </claim-text><claim-text>17. The method according to claim 10 wherein the transforming further comprises: converting three-phase detected currents readings into actual direct and quadrature axes current data using actual position data of the rotor, which may be advanced in time from the detected position data in the data processor at the second time due to serial and parallel bus communication. </claim-text><claim-text>18. The method according to claim 10 further comprising: applying, by the data processor, an additional compensation to the raw detected rotor position data reading in the data processor consistent with the following equation to adjust the hardware sensing stage delay, analog-to-digital conversion stage delay, currents reading and position reading difference delay in the data processor as well as raw position advancement due to serial and parallel bus communication: </claim-text><claim-text> 'ales' spd _rpm , _ </claim-text><claim-text> = -, _„ — 360 · pole _ pairs T, 
<!-- EPO <DP n="26"/>-->
 where e^„<sub>ltJ</sub>„,<sub>tc</sub> is the selected position between the predicted position and adjusted position reading, the latest spd_rpm is the last detected speed by data processor, and pole _pairs is a number of pole pairs within the motor, and Td is the total time delay. </claim-text><claim-text>19. A system for controlling a motor, the system comprising: </claim-text><claim-text> a sensor for detecting position data for a rotor of the motor at a first time; a data processor for receiving the detected position data associated with a first time delay; </claim-text><claim-text> a sensing circuit for sensing an analog phase current at the motor by operating during a second time delay; </claim-text><claim-text> an analog-to-digital converter for converting the analog current to a digital current data during a third time delay; </claim-text><claim-text> a data processor for detecting a fourth time delay between an actual current reading instant and a position reading instant in the data processor; </claim-text><claim-text> a phase converter for transforming the digital current data into measured direct and quadrature axes control current data based on synchronization or temporal alignment of the position data with the actual measured analog current at the starting time by the data processor's compensating the position data by a sum of the second time delay, the third time delay and the fourth time delay, where the first time delay is subtracted from the sum. </claim-text><claim-text>20. The system according to claim 19 wherein the analog current comprises analog three phase current and wherein digital current data comprises digital three phase current. 
<!-- EPO <DP n="27"/>-->
</claim-text><claim-text>21. The system according to claim 19 wherein the first time delay comprises a time period associated with transmission of a sensor signal from the sensor and receipt of the sensor signal at the data processor; the second time delay comprises a time period when the sensing circuit senses an analog control current at motor windings of the motor via the sensor signal; the third time delay comprises a time period associated with the analog-to-digital conversion and storage process in the analog- to-digital converter; and the fourth time delay comprises a time period or offset from a phase current reading to a position data reading and determination in the data processor. </claim-text><claim-text>22. The system according to claim 19 wherein: </claim-text><claim-text> a first data bus for coupling the sensor to a data port capable of </claim-text><claim-text>communication with the data processor; </claim-text><claim-text> the data processor comprising a field programmable gate array coupled to a digital signal processor via a second data bus; and </claim-text><claim-text> detected position data communicated via the first data bus from the sensor to the field programmable gate array and from the field programmable gate array to the digital signal processor (DSP). </claim-text><claim-text>23. The system according to claim 22 wherein the first data bus comprises a serial data bus and the second bus comprises a parallel bus. 
</claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
