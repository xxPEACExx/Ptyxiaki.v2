<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678978-A1" country="EP" doc-number="2678978" kind="A1" date="20140101" family-id="43629840" file-reference-id="311172" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550519" ucid="EP-2678978-A1"><document-id><country>EP</country><doc-number>2678978</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12748933-A" is-representative="NO"><document-id mxw-id="PAPP154824442" load-source="docdb" format="epo"><country>EP</country><doc-number>12748933</doc-number><kind>A</kind><date>20120209</date><lang>FI</lang></document-id><document-id mxw-id="PAPP200056407" load-source="docdb" format="original"><country>EP</country><doc-number>12748933.4</doc-number><date>20120209</date><lang>FI</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454465" ucid="FI-20115168-A" load-source="docdb"><document-id format="epo"><country>FI</country><doc-number>20115168</doc-number><kind>A</kind><date>20110222</date></document-id></priority-claim><priority-claim mxw-id="PPC140447152" ucid="FI-2012050127-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>FI</country><doc-number>2012050127</doc-number><kind>W</kind><date>20120209</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2123395271" load-source="docdb">H04L  12/46        20060101ALI20141217BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2123395651" load-source="docdb">H04L  29/06        20060101ALI20141217BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2123406305" load-source="docdb">H04L  12/28        20060101AFI20141217BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2007295730" load-source="docdb" scheme="CPC">H04L  65/1069      20130101 LI20140130BHEP        </classification-cpc><classification-cpc mxw-id="PCL2007295734" load-source="docdb" scheme="CPC">H04L  67/125       20130101 FI20140130BHEP        </classification-cpc><classification-cpc mxw-id="PCL2112537087" load-source="docdb" scheme="CPC">H04L  63/0272      20130101 LI20140910BHEP        </classification-cpc><classification-cpc mxw-id="PCL2112540865" load-source="docdb" scheme="CPC">H04L  12/2818      20130101 LI20140910BHEP        </classification-cpc><classification-cpc mxw-id="PCL2112543882" load-source="docdb" scheme="CPC">H04L  12/4633      20130101 LI20140910BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184041" lang="DE" load-source="patent-office">VERFAHREN UND VORRICHTUNGSANORDNUNG ZUR IMPLEMENTIERUNG EINER FERNSTEUERUNG VON EIGENSCHAFTEN</invention-title><invention-title mxw-id="PT132184042" lang="EN" load-source="patent-office">METHOD AND DEVICE ARRANGEMENT FOR IMPLEMENTING REMOTE CONTROL OF PROPERTIES</invention-title><invention-title mxw-id="PT132357700" lang="FR" load-source="patent-office">PROCÉDÉ ET DISPOSITIF POUR METTRE EN  UVRE UNE COMMANDE À DISTANCE DE PROPRIÉTÉS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918157232" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOSIBOX OY</last-name><address><country>FI</country></address></addressbook></applicant><applicant mxw-id="PPAR918150567" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOSIBOX OY</last-name></addressbook></applicant><applicant mxw-id="PPAR918993959" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tosibox Oy</last-name><iid>101351736</iid><address><street>Elektroniikkatie 8</street><city>90590 Oulu</city><country>FI</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918169313" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>YLIMARTIMO VEIKKO</last-name><address><country>FI</country></address></addressbook></inventor><inventor mxw-id="PPAR918141870" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>YLIMARTIMO, VEIKKO</last-name></addressbook></inventor><inventor mxw-id="PPAR918980640" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>YLIMARTIMO, VEIKKO</last-name><address><street>Palokärjentie 4</street><city>FI-90420 Oulu</city><country>FI</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918985390" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Määttä, Jukka Tapani</last-name><iid>101002280</iid><address><street>Berggren Oy Ab Kirkkokatu 9</street><city>90100 Oulu</city><country>FI</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="FI-2012050127-W"><document-id><country>FI</country><doc-number>2012050127</doc-number><kind>W</kind><date>20120209</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012113975-A1"><document-id><country>WO</country><doc-number>2012113975</doc-number><kind>A1</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548858852" load-source="docdb">AL</country><country mxw-id="DS548830945" load-source="docdb">AT</country><country mxw-id="DS548858853" load-source="docdb">BE</country><country mxw-id="DS548894559" load-source="docdb">BG</country><country mxw-id="DS548908260" load-source="docdb">CH</country><country mxw-id="DS548912148" load-source="docdb">CY</country><country mxw-id="DS548830946" load-source="docdb">CZ</country><country mxw-id="DS548858854" load-source="docdb">DE</country><country mxw-id="DS548912149" load-source="docdb">DK</country><country mxw-id="DS548912150" load-source="docdb">EE</country><country mxw-id="DS548917987" load-source="docdb">ES</country><country mxw-id="DS548894560" load-source="docdb">FI</country><country mxw-id="DS548894561" load-source="docdb">FR</country><country mxw-id="DS548858855" load-source="docdb">GB</country><country mxw-id="DS548912151" load-source="docdb">GR</country><country mxw-id="DS548858856" load-source="docdb">HR</country><country mxw-id="DS548830947" load-source="docdb">HU</country><country mxw-id="DS548908261" load-source="docdb">IE</country><country mxw-id="DS548858857" load-source="docdb">IS</country><country mxw-id="DS548894562" load-source="docdb">IT</country><country mxw-id="DS548912152" load-source="docdb">LI</country><country mxw-id="DS548811860" load-source="docdb">LT</country><country mxw-id="DS548830948" load-source="docdb">LU</country><country mxw-id="DS548811861" load-source="docdb">LV</country><country mxw-id="DS548811862" load-source="docdb">MC</country><country mxw-id="DS548910075" load-source="docdb">MK</country><country mxw-id="DS548910076" load-source="docdb">MT</country><country mxw-id="DS548830949" load-source="docdb">NL</country><country mxw-id="DS548917988" load-source="docdb">NO</country><country mxw-id="DS548908270" load-source="docdb">PL</country><country mxw-id="DS548811863" load-source="docdb">PT</country><country mxw-id="DS548830950" load-source="docdb">RO</country><country mxw-id="DS548811864" load-source="docdb">RS</country><country mxw-id="DS548908271" load-source="docdb">SE</country><country mxw-id="DS548811865" load-source="docdb">SI</country><country mxw-id="DS548917989" load-source="docdb">SK</country><country mxw-id="DS548908272" load-source="docdb">SM</country><country mxw-id="DS548910077" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99624915" ref-ucid="WO-2012113975-A1" lang="EN" load-source="patent-office"><p num="0000">In a remote control method and remote control system according to the invention a virtual private network (55) is created between a home control network key (42) and a home control network device (61). In order to create the virtual private network both the home control network key and the home control network device determine their network paths to the Internet (2) from the data transfer network (3, 5) to which they are connected. The determined network paths are stored in a home control network server (21) on the Internet (2). When it is desired to form a virtual private network, the home control network server (21) supplies the stored network paths to the home control network key (42) and the home control network device (61). By using the received network paths the home control network key (42) and the home control network device (61) create between them a virtual private network (55), to which the client device (41a) used by the person performing the remote-controlling and the actuators (62-65) to be remote-controlled are also connected in order to implement the remote control.</p></abstract><abstract mxw-id="PA99823491" ref-ucid="WO-2012113975-A1" lang="EN" source="national office" load-source="docdb"><p>In a remote control method and remote control system according to the invention a virtual private network (55) is created between a home control network key (42) and a home control network device (61). In order to create the virtual private network both the home control network key and the home control network device determine their network paths to the Internet (2) from the data transfer network (3, 5) to which they are connected. The determined network paths are stored in a home control network server (21) on the Internet (2). When it is desired to form a virtual private network, the home control network server (21) supplies the stored network paths to the home control network key (42) and the home control network device (61). By using the received network paths the home control network key (42) and the home control network device (61) create between them a virtual private network (55), to which the client device (41a) used by the person performing the remote-controlling and the actuators (62-65) to be remote-controlled are also connected in order to implement the remote control.</p></abstract><abstract mxw-id="PA99624916" ref-ucid="WO-2012113975-A1" lang="FR" load-source="patent-office"><p num="0000">La présente invention se rapporte à un procédé de commande à distance et à un système de commande à distance. Dans le procédé et le système selon l'invention, un réseau privé virtuel (55) est créé entre une clé de réseau de commande domestique (42) et un dispositif de réseau de commande domestique (61). Afin de créer le réseau privé virtuel, la clé de réseau de commande domestique et le dispositif de réseau de commande domestique déterminent leurs chemins réseau respectifs jusqu'à Internet (2), à partir du réseau de transfert de données (3, 5) auquel ils sont connectés. Les chemins réseau déterminés sont enregistrés dans un serveur de réseau de commande domestique (21) sur Internet (2). Quand la formation d'un réseau privé virtuel est souhaitée, le serveur de réseau de commande domestique (21) communique les chemins réseau enregistrés à la clé de réseau de commande domestique (42) et au dispositif de réseau de commande domestique (61). Au moyen des chemins réseau reçus, la clé de réseau de commande domestique (42) et le dispositif de réseau de commande domestique (61) créent entre eux un réseau privé virtuel (55), auquel sont également connectés, afin de mettre en œuvre la commande à distance, le dispositif client (41a) utilisé par la personne qui accomplit la commande à distance et les actionneurs (62 à 65) qui doivent être commandés à distance.</p></abstract><abstract mxw-id="PA99823492" ref-ucid="WO-2012113975-A1" lang="FR" source="national office" load-source="docdb"><p>La présente invention se rapporte à un procédé de commande à distance et à un système de commande à distance. Dans le procédé et le système selon l'invention, un réseau privé virtuel (55) est créé entre une clé de réseau de commande domestique (42) et un dispositif de réseau de commande domestique (61). Afin de créer le réseau privé virtuel, la clé de réseau de commande domestique et le dispositif de réseau de commande domestique déterminent leurs chemins réseau respectifs jusqu'à Internet (2), à partir du réseau de transfert de données (3, 5) auquel ils sont connectés. Les chemins réseau déterminés sont enregistrés dans un serveur de réseau de commande domestique (21) sur Internet (2). Quand la formation d'un réseau privé virtuel est souhaitée, le serveur de réseau de commande domestique (21) communique les chemins réseau enregistrés à la clé de réseau de commande domestique (42) et au dispositif de réseau de commande domestique (61). Au moyen des chemins réseau reçus, la clé de réseau de commande domestique (42) et le dispositif de réseau de commande domestique (61) créent entre eux un réseau privé virtuel (55), auquel sont également connectés, afin de mettre en oeuvre la commande à distance, le dispositif client (41a) utilisé par la personne qui accomplit la commande à distance et les actionneurs (62 à 65) qui doivent être commandés à distance.</p></abstract><description mxw-id="PDES50931127" ref-ucid="WO-2012113975-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> Method and device arrangement for implementing remote control of properties </p><p id="p0002" num="0002">The invention relates to a remote control method of actuators in a property and a remote control system with its components. </p><p id="p0003" num="0003">Remote-controllable devices and systems are increasingly installed in properties and homes. The purpose of the systems is to secure and/or maintain such conditions in properties, that living in them is both safe and pleasant. The spectrum of remote-controlled on remote-monitored devices is wide. The same property may have devices from several suppliers. These devices can often not communicate directly with one another. It is also common that each system has its operation logic, the remote controlling of which requires the use of a particular data communications solution. Building service suppliers have lately started to solve the problem very generally by ordering from an operator for the customer target its own, separately costing additional connection, which contains certain target-specific agreed-on features and must be separately maintained, either via a telephone network or a broadband network, which broadband network can be a permanent of wireless 2G/3G net- work broadband connection. Most suppliers have found this to be the easiest mode of operation for them at the moment, even though it contains several prob lem points. </p><p id="p0004" num="0004">If a new additional connection is provided for the target, data communications mat- ters must often be agreed upon separately with an administrator of the local intranet. The intranet administrator probably has to make additional network configurations for the connection, so that establishing a remote connection can succeed. </p><p id="p0005" num="0005">Often one must wait for an additional connection, especially a permanent network connection, for a long time, even many weeks. When the connection is finally received, it often does not work in the way agreed upon when ordering it from the operator, and one must negotiate about repair procedures and wait for the operator to act in the matter. Operators still promise too much, when talking about the operation of wireless broadband connections. When the remote target is connected to the new wireless 
<!-- EPO <DP n="3"/>-->
 connection and it does not work correctly, prolonged and time-consuming, costly and on all parts draining negotiations are mostly ahead. </p><p id="p0006" num="0006">Additionally operators strive to commit customers to being connection users by lumping together the connection, a modem and for example a 24-month mandatory use time. Not all users however are willing to participate in this, but often want to "hold the reigns themselves". </p><p id="p0007" num="0007">There are always additional costs for starting up and using a new connection opened for remote use. Many private households or housing cooperatives are not prepared to pay additional costs. </p><p id="p0008" num="0008">On the other hand, if additional services, such as a permanent IP address or adynamic domain name service, which enable remote use, are procured from the serving operator or the network connection provider on top of the already existing connection, the following kinds of problems may for example appear. </p><p id="p0009" num="0009">A permanent IP address is not obtained, whereby a dynamic domain name service must be used. If the remote use device supplier does not provide dynamic domain name service, it must be procured from the market. Dynamic domain name service is provided also by some free parties (for example maintained by some student parties), such as dyndns.org, dy.fi etc. The integration of these domain name services is varying and availability and reacting to operation problems generally insufficient for implementing reliable remote control of a property. </p><p id="p0010" num="0010">Nowadays connection establishment to broadband connections occurring from outside is often restricted so that remote use at a target does not work. Operators may for example completely prevent the opening of a connection occurring from the Internet to the connection. Thus joining a dynamic domain name service is not useful. </p><p id="p0011" num="0011">The operation of the dynamic domain name service also requires that the target obtains a public Internet address from the connection it uses. In order for this to be possible, the connection feature must support the operation of several public ad^ dresses. </p><p id="p0012" num="0012">One alternative for getting the target into operational state is that a network specialist programs the connection to be suitable for remote use on-site at the target. 
<!-- EPO <DP n="4"/>-->
 Thus care must be taken that the operation of the other network devices and Internet connections of the connection is not prevented or disturbed. Additionally the original connection of the target often turns out to be unsuitable for remote use in its present form. Thus modems or connection type must be changed or alteration work must be negotiated with the operator. </p><p id="p0013" num="0013">Target-specifically customised solutions always incur additional costs for the service buyer. It is also an inefficient manner of operating for the service supplier. </p><p id="p0014" num="0014">One can try to solve remote use of the target also with an application-specific solution. Thus the device supplier can buy from the operator its own radio network and form in it a private access point name (APN), which determines data communications settings in GPRS (General Packet Radio Service) and HSDPA (Highspeed Downlink Packet Access) /HSUPA (Highspeed Uplink Packet Access) networks. By using APN settings, and Internet connection is provided via a wireless 2G/3G/4G network to the devices in the target. In such cases the user must pay separately for the connection and for the interface modems and programs enabling its remote use. Often such an additional connection cannot or may not be used for more than one use purpose, for example for the remote use of devices supplied by the building service supplier. Additionally operators nowadays generally limit the maximum amount of data transfer in such connections, which when exceeded may cause large additional invoices for the connection owner. In housing cooperative type targets, which have several properties, the properties may be connected to "remote use" occurring only within the intranet formed between the properties. No "real" remote contact is obtained for such targets, if the remote contact user is physically elsewhere than in one of the properties in question in the intranet. </p><p id="p0015" num="0015">It is an object of the invention to provide a new remote control arrangement for technical devices in a property and a remote control method utilising this remote control arrangement, where the Internet connection already existing in the properties and homes are utilised as such in the remote use of the building service and surveillance. With a remote use device pair according to the invention, the target connection of the property is altered to be as such suitable for remote use. Already existing functions of the data network connection in the target and the intranet in the target are not altered. 
<!-- EPO <DP n="5"/>-->
 The objects of the invention are attained with a device arrangement, in which a home control network device installed in a fixed manner in a property and a home control network key of a person realising monitoring of the property establish a se- cure two-way connection over the Internet based on contact information they have received from a home control network server according to the invention. The home control network device in the property, to which the devices to be remote- controlled or remote-monitored in the property are connected, are connected to a data network connection device/network terminal in the property, for example a modem. </p><p id="p0016" num="0016">The current IP addresses of the home control network device and the home control network key are maintained in the home control network server related to the invention, which IP addresses are used for establishing a connection between said devices. Due to the additional procedures and the connection establishing methods according to the invention both said devices can be connected to some private, non-public network, and they can still establish among themselves a data transfer connection over the Internet. Advantageously it is enough for establishing the data transfer connection over the Internet between the mobile home control network key and the fixed installed home control network device that said devices at some point in the established connection also obtain a public IP address, even though simultaneously the home control network device and the home control network key only have non-public IP addresses. The home control network server does not participate in the establishing of the actual data transfer connection after it has sent the IP addresses of the devices to be available to the devices. </p><p id="p0017" num="0017">An advantage with the property remote control system according to the invention is that both the devices in the home control network device pair can search their routing from their placement location to the IP address of the device of the proper- ty connecting to the Internet and to store the searched route in a separate storage server on the Internet for the identification and IP address of the device pairs. </p><p id="p0018" num="0018">It is further an advantage of the invention that each home control network device pair according to the invention forms independently among themselves a prede- termined unique device pair or device group, which identify each other in the network. Due to the identification method the home control network key carried with the user establishes a network connection only with its own unique home control network device pairs, and the connection cannot be established with any other 
<!-- EPO <DP n="6"/>-->
 network device. Thus the home control network key functions as a strong safety key to the "network doors" of the property. </p><p id="p0019" num="0019">It is further an advantage of the invention that the device pair of the remote control system according to the invention can among themselves independently with the aid of the address information of the home control network server establish a direct two-way secure OSI model (Open Systems Interconnection Reference Model) data link layer (Layer 2) level or also network layer (Layer 3) level data transfer connection through the serving local network devices and the Internet (VPN; Virtu- al Private Network) without having the established connection circulating at all through an external server. The data link layer level secured remote transfer connection is a basic requirement for many flexible uses and utilisations of building service control devices. It is further an advantage of the invention that the device pair of the remote control system according to the invention works in the connection types of all Internet connection suppliers with the original network settings of the connection supplier. No alterations are needed in the customer connection data communications settings and/or terminals, but they are utilised as such safely and functionally with their own setting established at the time of installation. </p><p id="p0020" num="0020">It is further an advantage of the invention that the establishment of a remote control connection does thus not require additional connections, changing modems or firewalls in the customer connections or re-programmings of the customer connec- tion terminals or payment for the use of separate devices. </p><p id="p0021" num="0021">It is further an advantage of the invention that the establishment of a remote control connection is not dependent on the user's operating system (e.g. MAC, Windows) or terminal. It is sufficient that the remote user's terminal has a browser program, which the network server of the device to be remote-controlled supports. The terminal may also be both a stationary PC and a mobile device, such as a portable computer, a tablet device or a smartphone. </p><p id="p0022" num="0022">It is further an advantage of the invention that in the remote control system accord- ing to the invention, the remote use of different manufacturers' different home control network devices is possible in an operator-independent environment. One manufacturer's safety camera, a second manufacturer's surveillance camera, a third manufacturer's ground heat pump and a fourth manufacturer's air condition- 
<!-- EPO <DP n="7"/>-->
 ing control system can be connected to the home control network device pair according to the invention. </p><p id="p0023" num="0023">It is further an advantage of the invention that the devices to be controlled and the controlling device may be in different operators' networks and the networks do not have to have the same type or brand of network technology. The device being controlled can for example be in a permanent broadband connection and the controlling device in a 3G or 2G network. The remote control method according to the invention is characterised in that</p><p id="p0024" num="0024">- the user's client device controlling the actuators is connected to a first network terminal in a first data transfer network </p><p id="p0025" num="0025"> - the actuator to be remote-controlled is connected to a second network terminal in a second data transfer network </p><p id="p0026" num="0026">- both the first network terminal and the second network terminal make contact with a home control network server </p><p id="p0027" num="0027"> - both the first network terminal and the second network terminal request routing information from the home control network server for establishing an end-to-end data transfer connection between said network terminals and that </p><p id="p0028" num="0028">- the home control network server sends the requested routing information to the first network terminal and the second network terminal, by using which the first network terminal and the second network terminal establish among themselves a virtual private network, to which the home control network server does not belong. A remote control system according to the invention, which comprises </p><p id="p0029" num="0029"> - a first data transfer network, to a first network terminal connected to which a user's client device controlling actuators to be remote-controlled is connected </p><p id="p0030" num="0030"> - at least one second data transfer network, to a second network terminal connected to which actuators to be remote-controlled are connected </p><p id="p0031" num="0031">- one or several other data transfer networks between the first data transfer network and the second data transfer network, one of which is the Internet network, and </p><p id="p0032" num="0032"> - a home control network server connected to the Internet </p><p id="p0033" num="0033">and which remote control system is characterised in that </p><p id="p0034" num="0034">- the first network terminal and the second network terminal are configured to establish a data transfer connection to the home control network server in order to establish the mutual end-to-end data transfer connection between said network terminals 
<!-- EPO <DP n="8"/>-->
 - the first network terminal and the second network terminal are arranged to request routing information from the home control network server for establishing an end-to-end data transfer connection between said network terminals and that</p><p id="p0035" num="0035">- the home control network server is arranged to send the routing information to the first network terminal and the second network terminal, by using which the first network terminal and the second network terminal are arranged to establish among themselves a virtual private network, to which the home control network server does not belong. The home control network key according to the invention is characterised in that a therein comprised processor, memory and therein stored computer program code are configured to </p><p id="p0036" num="0036"> - determine a network path from the home control network key to the Internet</p><p id="p0037" num="0037">- store the determined network path both in the memory of the home control net- work key and in the memory of the home control network server </p><p id="p0038" num="0038"> - request from the home control network server the network path information of its network terminal pair in order to establish an end-to-end data transfer connection between said network terminals </p><p id="p0039" num="0039"> - receive from the home control network server the network path information of its network terminal device pair and </p><p id="p0040" num="0040"> - establish with the aid of the received network path information with its network terminal pair a virtual private network for the remote control of the actuators of the property, to which virtual private network the home control network server does not belong. </p><p id="p0041" num="0041">The home control network device in the property according to the invention is characterised in that its processor, memory and therein stored computer program code are configured to </p><p id="p0042" num="0042"> - determine a network path from the home control network device to the Internet - store the determined network path both in the memory of the home control network device and in the memory of the home control network server </p><p id="p0043" num="0043"> - request from the home control network server the network path information of its network terminal pair in order to establish an end-to-end data transfer connection between said network terminals </p><p id="p0044" num="0044">- receive from the home control network server the network path information of its network terminal device pair and </p><p id="p0045" num="0045"> - establish with the aid of the received network path information with its network terminal pair a virtual private network for the remote control of the actuators of the 
<!-- EPO <DP n="9"/>-->
 property, to which virtual private network the home control network server does not belong. </p><p id="p0046" num="0046">The home control network server according to the invention is characterised in that its processor, memory and therein stored computer program code are configured to </p><p id="p0047" num="0047"> - store in the memory of the home control network server the identification data of the network terminal pair formed by two network terminals used for remote control in a property </p><p id="p0048" num="0048">- receive from the network terminal pair the network path information they have determined </p><p id="p0049" num="0049"> - receive from the first network terminal the network path information request of its network terminal pair </p><p id="p0050" num="0050"> - check which is the device pair of the first network terminal that made the network path request </p><p id="p0051" num="0051"> - send the network path information of the network terminal pair both to the first network terminal and the second network terminal </p><p id="p0052" num="0052"> - receive cyber space information used in connection with the network terminal pair and send the allowed cyber space information to the home control network device and </p><p id="p0053" num="0053"> - release the data transfer connection to the network device pair after the network path information is sent. </p><p id="p0054" num="0054">Some advantageous embodiments of the invention are presented in the depend- ent claims. </p><p id="p0055" num="0055">The basic idea of the invention is the following: In order to implement remote control, a device pair is manufactured, a home control network device and a home control network key, where the home control network device can establish a data transfer connection only with its home control network key pair. In one advantageous embodiment of the invention an individual home control network key can function as the device pair of two or more home control network devices in different properties. The identification codes of the home control network device and the home control network key are stored in said devices in connection with their manu- facturing. By using the identification codes the home control network device and home control network key can establish a two-way data transfer connection between them. The data transfer connection can advantageously be based on an OSI model data link layer (Layer 2) or network layer (Layer 3). 
<!-- EPO <DP n="10"/>-->
 In connection with installation, both devices determine routing information of the devices from their location network all the way to a network terminal connected to the Internet, which routing information is needed for the connection establishment. This routing information is stored in a home control network server according to the invention, connected to the Internet. When the home control network key wants to establish a data transfer connection via the Internet to its device pair in some property, it retrieves the routing information of the home control network device functioning as its pair from the home control network server. By utilising the obtained routing information the home control network key begins to establish a direct end-to-end data transfer connection. When the direct data transfer connection has been established, a direct VPN data transfer connection advantageously using the network layer has been established between the home control network key and the home control network device in the property. </p><p id="p0056" num="0056">A home control network device according to the invention is installed in the internal data transfer network of a property to be remote-controlled between an existing internal data transfer network related to control and management of the property and a network terminal relaying traffic from the property to the Internet. All devices related to property control are connected to the inputs of the home control network device and the output of the home control network device is connected to the input meant for the intranet device of the network terminal relaying Internet traffic. </p><p id="p0057" num="0057">The home control network key according to the invention can be connected to some data transfer device, which is able to establish a data transfer connection to the Internet. Possible data transfer devices are for example a PC, a tablet computer or a smartphone. The connection of the home control network key to the data transfer device can be done for example with the aid of a LAN interface (Local Area Network), a WLAN interface (Wireless LAN), a WAN interface (Wide Area Network), a USB interface (Universal Serial Bus) or an antenna interface. When the home control network key is connected to the data transfer device, the home control network key first ascertains its own routing through different subnetworks to the Internet network terminal. When the routing is ascertained, the routing information of the home control network key is stored in the home control network server according to the invention. </p><p id="p0058" num="0058">When a two-way end-to-end data transfer channel is formed between the home control network key and the home control network device, device pair routing in- 
<!-- EPO <DP n="11"/>-->
 formation through different subnetworks stored in the home control network server is utilised for forming the data transfer channel. When the data transfer connection has been established, the data transfer takes place so that the home control network server does in no way participate in the data transfer any longer. </p><p id="p0059" num="0059">In the following, the invention will be described in detail. In the description, reference is made to the appended drawings, in which </p><p id="p0060" num="0060">Figure 1 shows as an example how a two-way data transfer connection according to the invention can be established between a client device handling remote control and an individual control and management device of a property, </p><p id="p0061" num="0061">Figure 2 shows a second example according to the invention, where a two-way data transfer connection is established between a client device handling remote control and an individual control and management device of a property, </p><p id="p0062" num="0062">Figure 3 shows as an exemplary flow chart how the data transfer connection be^ tween the client device and the device in the property is established, </p><p id="p0063" num="0063">Figure 4 shows as an example a home control network device according to the invention, Figure 5a shows as an example a home control network key according to the invention, </p><p id="p0064" num="0064">Figure 5b shows as an example a home control network double key according to the invention and </p><p id="p0065" num="0065">Figure 6 shows as an example a home control network server according to the invention. </p><p id="p0066" num="0066">The embodiments in the following description are given as examples only and someone skilled in the art can carry out the basic idea of the invention also in some other way than what is described in the description. Though the description may refer to a certain embodiment or embodiments in several places, this does not mean that the reference would be directed towards only one described embodiment or that the described characteristic would be usable only in one described 
<!-- EPO <DP n="12"/>-->
 embodiment. The individual characteristics of two or more embodiments may be combined and new embodiments of the invention may thus be provided. </p><p id="p0067" num="0067">Figures 1 and 2 show two advantageous embodiments 1A and 1 B of the remote control system according to the invention. In the examples of Figures 1 and 2 one home control network key 42 is used to establish a data transfer connection to one home control network device 61. The home control network key 42 according to the invention can however also function with separate home control network devices in two or more properties. </p><p id="p0068" num="0068">In both embodiments of Figures 1 and 2 the data transfer network as a whole has the same basic network structure. In both Figures 1 and 2 the Internet is shown with reference 2. Some public network or an intranet, reference 3, is also connected to the Internet 2. The network 3 may be a permanent or wireless data transfer network. A first data transfer network 4, the house control remote network of the property, is connected to the network 3, to which house control remote network the client device implementing the remote control, references 41a and/or 41b, can be connected. The house intranet in the property to be remote-controlled is in Figures 1 and 2 designated with reference 5. A second data transfer network 6, a house control intranet according to the invention, is connected to the house intranet network 5. The actuators 62-65 to be remote-controlled in the property are connected to the house control intranet. </p><p id="p0069" num="0069">It is evident to someone skilled in the art that there may also be more subnetworks between the home control network device 61 and/or home control network key 42 according to the invention and the Internet 2 than what is shown in Figures 1 and 2. </p><p id="p0070" num="0070">In the examples of Figures 1 and 2 the second network terminal according to the invention, the home control network device 61 (HCND), is connected to the house intranet network 10.0.0.0/24, reference 5. The house intranet network 5 is connected to the Internet 2 with network terminal 51. The network terminal 51 can be a router, a modem or a firewall, which can include also a network address translator NAT. In the examples of Figures 1 and 2 the house intranet 5 is behind a firewall FW1 containing a NAT function, reference 51. The public IP address of the firewall FW1 is 240.1.1.2 in the examples of Figure 1 and 2. In the house intranet 5 
<!-- EPO <DP n="13"/>-->
 the internal IP address of the firewall FW1 is 10.0.0.1. Two exemplary other data processing devices are also connected to the house intranet network 5, the IP addresses of which in the house intranet network are 10.0.0.3 and 10.0.0.4. The house control intranet network 172.17.0.0/24 (HCI), reference 6, is connected to the house intranet network 5 via the home control network device 61. The IP address of the home control network device 61 in the house control intranet network is 172.17.0.1 and in the house intranet network 10.0.0.2. In the examples in Figures 1 and 2 four exemplary devices/servers 62, 63, 64 and 65 are connected to the house control intranet 6. The devices/servers can be connected to the house control intranet 6 either with a permanent connection or a wireless data transfer connection. </p><p id="p0071" num="0071">Reference 62 shows a lighting control webserver, the IP address of which in the house control intranet network is 172.17.0.5. For a remote user the lighting control webserver 62 is seen as device HCND4. </p><p id="p0072" num="0072">Reference 63 shows a heat control webserver, the IP address of which in the house control intranet network is 172.17.0.4. For a remote user the heat control webserver 63 is seen as device HCND1. </p><p id="p0073" num="0073">Reference 64 shows a surveillance camera webserver, the IP address of which in the house control intranet network is 172.17.0.3. For a remote user the surveillance camera webserver 62 is seen as device HCND2. </p><p id="p0074" num="0074">Reference 65 shows an air-conditioning webserver, the IP address of which in the house control intranet network is 172.17.0.2. For a remote user the air- conditioning webserver 65 is seen as device HCND3. In the examples of Figure 1 and 2 the first network terminal according to the invention, the home control network key 42 (HCNK), is connected to the house control remote network 172.17.0.0/24, reference 4. The house control remote network 4 is behind the intranet 3 firewall FW1 , reference 31. The public IP address of the NAT firewall 31 is in this example 240.2.1.2 and the internal IP address of the NAT fire- wall is 10.0.1.1. </p><p id="p0075" num="0075">The house control remote network 172.17.0.0/24 (HCRN), reference 4, is connected to the data transfer network 3 via a home control network key 42 according 
<!-- EPO <DP n="14"/>-->
 to the invention. The IP address of the home control network key 42 in the intranet network is 10.0.1.2 and in the house control remote network 172.17.0.6. In the examples of Figures 1 and 2 an exemplary data processing device 41a or 41b has been connected to the house control remote network 4, the IP address of which data processing device in the house control remote network 4 is 172.17.0.7. This data processing device 41 a/41 b is used, when it is desired to remotely control devices/servers 62, 63, 64 or 65 connected to the house control intranet network 6. </p><p id="p0076" num="0076">The home control network key 42 and home control network device 61 according to the invention need each other's routing information, in order for them to be able to establish between them an end-to-end data transfer connection based on the data link layer or network layer, in the examples of Figures 1 and 2 a VPN data transfer connection 55. The routing information is stored by both the home control network key 42 and the home control network device 61 according to the invention in a home control network server 21 (HCNS) on the Internet. </p><p id="p0077" num="0077">In the example of Figure 1 the NAT firewalls do not completely restrict outgoing UDP communication. They are so-called NAT firewalls in one state and "with memory" which also do not change the source port numbers of UDP connections (User Datagram Protocol) unforeseeably, if they do not have to. In the example of Figure 1 the object is to establish in the data link layer an Ethernet level connection between the home control network key 42 and the home control network device 61. When in the remote control system A according to Figure 1 it is desired to establish a data transfer connection 55 belonging to a virtual private network (VPN) between the devices, then both devices 42 and 61 retrieve from the home control network server 21 the routing information stored therein by the counterpart device. Before surrendering the routing information, the home control network server 21 checks that it is really a question of an allowed home control network key/home control network device pair. With the aid of the retrieved routing information the home control network key 42 and the home control network device 61 establish a direct VPN connection between them. When the VPN connection 55 is completed, a data processing device 41 a/41b in the house control remote network 4 can make contact with a device 62, 63, 64 or 65 in the house control network 6. </p><p id="p0078" num="0078">In order for it to be possible to establish the data transfer connection, the home control network key 42 and the home control network device 61 must determine 
<!-- EPO <DP n="15"/>-->
 their network path from their own network at least to the Internet 2. This network path determination can be made for example in the following manners, which the home control network key 42 and home control network device 61 advantageously utilise. </p><p id="p0079" num="0079">With a DHCP protocol (Dynamic Host Configuration Protocol) the IP settings for the network interface of the data processing device can be retrieved. Settings obtainable with the DHCP procedure are at least the IP address of the data processing device, the network mask, the default gateway and the DNS server (Do- main Name System), which transforms the domain names into IP addresses. </p><p id="p0080" num="0080">A Traceroute procedure is a tool which uses a TCP/IP protocol, which determines along what route or network path packets transfer to the determined machine. In the Traceroute procedure a data transfer device connected to the network ascer- tains the network path by adding a "Time to Live" value (TTL) of the packets it sends one at a time, starting from zero. </p><p id="p0081" num="0081">Ascertaining the network path typically occurs in the following way. The data processing device sends to a default gateway an IP packet with some target address in the external network using the TTL value "0". The default gateway responds to this with a "TTL expired" message. For example the IP address, delay etc. of the default gateway become clear from this message. </p><p id="p0082" num="0082">Thereafter the data processing device sends to the default gateway an IP packet with some target address in the external network using the TTL value 1. Again the router following the default gateway responds with a message "TTL expired", from which the IP address of this subsequent (second) router is clear. This transmission/response process is continued by increasing the TTL value until the desired goal is reached. In the case of the Internet the final goal is typically reached with a TTL value of 6-15. The final result is that the data processing device knows the network path to the outside world, for example the Internet. </p><p id="p0083" num="0083">An ICMP protocol (Internet Control Message Protocol) can be utilised for ascertaining external addresses. A "record route" flag of an ICMP packet is used in the ICMP procedure, which flag requests operating systems of the devices on the network path to record in the ICMP packet's title the IP address of the transmitting router. 
<!-- EPO <DP n="16"/>-->
 In the examples of Figures 1 and 2 the first and second home control network key 42, the home control network double key 22 and the home control network device 61 determine the network path with at least one of the above-described procedures. These devices store the discovered network path on the home control net- work server 21 , which stores them in its memory. </p><p id="p0084" num="0084">The home control network key 42 and the home control network device 61 according to the invention advantageously also have an ability to determine a free cyber space. Said devices are configured to determine for themselves an available cyber space automatically, by utilising the network path information on the home control network server 21. Said devices request the home control network server 21 to give some free part of the cyber space. The home control network server 21 goes through the network paths it has received and returns some network block, where not even one address is mentioned in the network path of any known device. </p><p id="p0085" num="0085">The home control network device 61 also advantageously offers DHCP and DNS Services in its own subnetwork 4 and 6 for devices connected thereto. Additionally the home control network key 42 and the home control network device 61 function as a default gateway for devices connected to the subnetwork. </p><p id="p0086" num="0086">The following is an example of the operation of the remote control system 1A according to the invention in the example of Figure 1. </p><p id="p0087" num="0087">The home control network device 6 : </p><p id="p0088" num="0088">The home control network device 61 is connected to the 10.0.0.0/24 network (the house intranet 5) for example by attaching a cable to the WAN port of the home control network device 61. The home control network device 61 automatically retrieves its IP settings with the DHCP procedure. A firewall FW1 in the house intra- net network 5 advantageously functions as the DHCP server, which firewall gives the home control network device 61 the IP address 10.0.0.2 in a 24 bit network mask (255.255.255.0). The DHCP server also gives the default router address 10.0.0.1 and the DNS server address 10.0.0.1. The home control network device 61 begins the communication by ascertaining with the aid of the DNS server the IP address of the home control network server 21 (HCNS, DNS address etahallinta.fi). The DNS server 10.0.0.1 gives the home control network server's 21 IP address as 240.1.1.1. 
<!-- EPO <DP n="17"/>-->
 The home control network device 61 makes contact 240.1.1.1 with the home control network server 21 over the Internet with a TCP or UDP protocol. The home control network device 61 authenticates mutual operational rights with the home control network server 21 with certificates and/or passwords determined in connection with manufacturing. This data transfer connection is advantageously encrypted for example with an SSL TLS encryption. The home control network server 21 sees from the incoming connection the public IP address of the home control network device 61 , which in the example of Figure 1 is 240.1.1.2. The home con- trol network device 61 notifies the home control network server 21 of its own address and network mask (10.0.0.2/24). The home control network server 21 stores this information in its database. </p><p id="p0089" num="0089">The home control network device 61 advantageously also performs a traceroute operation toward the home control network server 21 and reports the discovered network path to the home control network server 21. The home control network server 21 stores the received network path of the home control network device 61 in its database. - <sup>■■</sup> Next the home control network device 61 advantageously also performs a ICMP record route operation and reports the discovered route to the home control network server 21 : The home control network server 21 stores the route received from the home control network device 61 in its database. Thereafter the home control network device 61 performs an automatic determination of free cyber space by sending an inquiry to the home control network server 21. The home control network server 21 returns to the home control network device 61 in the examples of Figures 1 and 2 the cyber space 72.17.0.0/24. The home control network device 61 takes the cyber space into use for its intranet 6, and as its own IP address the home control network device 61 takes 172.17.0.1. The home control network device 61 notifies the home control network server 21 about the taking into use, which server stores the information in its database: The home control network key 42: </p><p id="p0090" num="0090">The WAN port of the home control network key 42 is connected to the 10.0.1.0/24 network (data transfer network 3). The home control network key 42 retrieves IP 
<!-- EPO <DP n="18"/>-->
 address information from the DHCP server, as which a firewall FW2 functions, reference 31. The home control network key obtains the IP address 10.0.1.2. The address of the default router 31 of the home control network key 42 is 10.0.1.1 and the address of the DNS server 31 is 10.0.1.1 , which are obtained from the DHCP server. </p><p id="p0091" num="0091">The home control network key 42 begins the communication by ascertaining with the aid of the DNS server the IP address of the home control network server 21 (HCNS, DNS address hcns.fi). In the examples of Figures 1 and 2 the DNS server 10.0.1.1 gives 240.1.1.1 as the IP address of the home control network server 21. </p><p id="p0092" num="0092">Thereafter the home control network key 42 contacts the home control network server 21 on address 240.1.1.1 over the Internet primarily with a UDP protocol, secondarily with a TCP protocol. The home control network key 42 authenticates mutual operational rights with the home control network server 21 with pre- distributed certificates and/or passwords. The data transfer connection is advantageously encrypted for example with an SSL/TLS encryption. The home control network server 21 sees from the incoming connection the public IP address 240.2.1.2 of the home control network key 42. The home control network key 42 additionally notifies the home control network server 21 of its own address and network mask 10.0.1.2/24. The home control network server 21 stores this information in its database. </p><p id="p0093" num="0093">Next the home control network key 42 performs a traceroute operation and reports the discovered network path to the home control network server 21 , which stores the information in its database. </p><p id="p0094" num="0094">The home control network key 42 advantageously also performs an ICMP record route operation and reports the discovered network path to the home control net- work server 21 , which stores the information in its database. </p><p id="p0095" num="0095">The home control network server 21 checks the received route information and if there are overlaps, the home control network server 21 reports them to the home control network key 42, which if necessary performs the automatic determination of free cyber space again. </p><p id="p0096" num="0096">The control of an actuator by using the remote control system 1A. 
<!-- EPO <DP n="19"/>-->
 Some device is connected to the remote control system 1A by connecting the device to be connected to an intranet interface of the home control network device 61 either with a permanent connection or wirelessly. For example a heat control webserver 63 (HCWS) is connected to the house control intranet network 6. In this example, after the heat control webserver 63 is connected, the heat control webserver 63 retrieves its IP settings with the DHCP service. The heat control webserver obtains from the home control network device 61 172.17.0.4 as its own address, 172.17.0.1 as the address of the default router, 172.17.0.1 as the address of the DNS server. Additionally it obtains from the DNS server hews. hend. local as its name in the example of Figure 1. </p><p id="p0097" num="0097">The home control network device 61 stores the DHGP information it gives to the heat control webserver 63 in its local database. </p><p id="p0098" num="0098">The home control network key 42 is predetermined to pair up with the home control network device 61. In this way it is possible to establish a direct data transfer connection between the house control intranet 6 and the Ethernet network 3, to which the home control network key 42 is connected. </p><p id="p0099" num="0099"> ■<sup> "</sup> · <sup>'</sup> . ' Γ - -<sup>''</sup> ·.<sup>■</sup>-</p><p id="p0100" num="0100">The home control network key 42 begins the pairing-up process. It notifies the home control network server 21 that it wants to establish a data transfer connection to the home control network device 61 advantageously by using the UDP protocol. The home control network server 21 decides that the requested data trans- fer connection should be established with the following port numbers: </p><p id="p0101" num="0101">- the home control network key: UDP source port 10500, UDP target port 10501 , target IP address 240.1.1.2 </p><p id="p0102" num="0102">- the home control network device: UDP source port 10501 , UDP target port 10500, target IP address 240.2.1.2 </p><p id="p0103" num="0103">The home control network server 21 reports this information to the home control network key 42 and the home control network device 61. Thereafter the home control network key 42 sends the UDP packet to the address 240.1.1.2 with source port 10500 to the target port 10501. The sent packet gets through the firewall FW2, which contains a NAT function, because outgoing traffic is not strongly restricted. The FW2 firewall 31 remembers the UDP packet as a 
<!-- EPO <DP n="20"/>-->
 connection for the following X seconds with the contact information 10.0.0.2, 240.1.1.2, 10500 and 10501. </p><p id="p0104" num="0104">The UDP packet arrives at the FW1 firewall 51 , which does not allow incoming traffic and it drops the packet. The packet does not arrive at the address 10.0.0.2. </p><p id="p0105" num="0105">The home control network device 61 sends a UDP packet to address 240.2.1.2 with source port 10501 to target port 10500. The sent UDP packet gets through the FW1 NAT firewall 51 , because outgoing traffic is not restricted. The FW1 fire- wall 51 remembers the UDP packet as a connection for the following X seconds with the contact information 10.0.0.2, 240.2.1.2, 10501 and 10500. </p><p id="p0106" num="0106">The UDP packet arrives at the FW2 firewall 31. The FW2 firewall 31 remembers that the IP address 10.0.1.2 had established a UDP connection to address 240.1.1.2 with source port 10500 and target port 10501. Because the UDP packet comes from said source address 240.2.1.2, with source port 10501 and to target port 10500, the FW2 firewall 31 interprets the packet as return communication related to the connection established by the device 10.0.1.2. The firewall FW2 thereafter performs ari address change operation. It changes the target address of the UDP packet to 10.0.1.2. Thereafter the FW2 firewall 31 routes the UDP packet to address 10.0.1.2. Now the home control network key 42 receives a message from the home control network device 61. A one-way data transfer connection from the home control network device 61 to the home control network key 42 now exists. </p><p id="p0107" num="0107">Next the home control network key 42 sends a UDP packet to the address 240.1.1.2 with source port 10500 to target port 10501. The UDP packet arrives at the FW1 firewall 51. The FW1 firewall 51 remembers that the address 10.0.0.2 had established a UDP connection to address 240.2.1.2 with source port 10501 and target port 10500. Because the packet comes from source address 240.2 1.2 with source port 10500 and to target port 10501 , the FW2 firewall 51 interprets the received UDP packet as return communication to the connection established by the device 10.0.0.2. The FW1 firewall 51 performs an address change, i.e. changes the target address of the packet to 10.0.0.2. Thereafter the FW1 firewall 51 routes the packet to address 10.0.0.2. </p><p id="p0108" num="0108">Now a two-way UDP connection exists between the home control network key 42 and the home control network device 61. These devices can communicate with 
<!-- EPO <DP n="21"/>-->
 each other bidirectionally. The home control network device 61 and the home control network key 21 advantageously form a data link layer level VPN tunnel between them, using for example the OpenVPN software. The home control network device 61 bridges the created VPN tunnel 55 with the house control remote network 172.17.0.0/24, reference 6, it administrates. In the same way the home control network key 42 bridges the created VPN tunnel 55 with its LAN port, so it is able to provide intranet interfaces in the network 172.17.0.0/24 on the data link layer level. After these operations the house control remote network 4 and the house control intranet 6 form a private VPN network over the Internet 2. </p><p id="p0109" num="0109">Now a client device 41 a can be connected via the Ethernet to the intranet interface of the home control network key 42, which interface can for example be a LAN'in- terface. After the made connection the client device 41a retrieves its IP settings from the home control network device 61 by using the DHCP protocol. The DHCP inquiry sent by the client device 41a or 41b goes to the LAN port of the home control network key 42, which port is bridged with the VPN tunnel 55. The home control network key 42 sends the Ethernet packet formed by the client device 41a or 41 b as such to the VPN tunnel 55. The DHCP packet sent by the client device 41a or 41b arrives to the home control network device 61 along the VPN tunnel 55. </p><p id="p0110" num="0110">The home control network device 61 has a DHCP server, which responds in a return message with IP address 172.17.0.7/24, default router 172.17.0.1 and DNS server 172.17.0.1. The return message of the home control network device 61 correspondingly goes along the VPN tunnel 55 to the home control network key 42, which sends the packet onward to its LAN network interface. Through the LAN network interface the client device 41a or 41 b receives the DHCP return packet and takes into use the settings included in the IP return packet. The IP address of the client device is now 172.17.0.7/24, the default router 172 17.0.1 , the DNS server 172.17.0.1. </p><p id="p0111" num="0111">The client device 41a is now logically a part of the 172.17.0.0/24 VPN network and is able to communicate directly on the Ethernet level with device 172.17.0.4 just as if it was directly physically attached to the 172.17.0.0/24 network (house control intranet 6). The technical limitations of the VPN tunnel 55 and Internet connections, such as connection speed and delays, must however be taken into account when communicating. 
<!-- EPO <DP n="22"/>-->
 Devices to be remote-controlled are connected to the LAN interface of the home control network device 61 , either permanently or wirelessly. In the examples of Figures 1 and 2 the devices to be connected are an air-conditioning control 65, a heat control 63, a surveillance camera 64 and a lighting control 62. The webservers of the devices to be remote-controlled receive their IP address from a DHCP server advantageously comprised in the home control network device. </p><p id="p0112" num="0112">The home control network device 61 names the IP addresses it gives in a prede- termined manner. In the examples of Figures 1 and 2 the IP address 172.17.0.4 is "HCND1", which is the heat control. Correspondingly IP address 172.17.0.3 is "HCND2", which is the surveillance camera. </p><p id="p0113" num="0113">The client device 41 user can now communicate directly on the Ethernet level with the devices 62, 63, 64 and 65 to be remote-controlled presented in Figure 1. The communication does not differ from the manner which would be used, if the client device 41a was directly physically attached to the house control intranet network 172.17:0.0/24 serving the devices to be remote-controlled. When utilising the remote control system 1A according to the invention the client device 41a user enters for example http://hcnd1 as an address in the browser: The client device's browser makes a DNS inquiry to the home control network device 61 (from address 172.17.0.1) for the name "HCND1". The home control network device 6 returns to the client device 41a the name with the IP address 172.17.0.4 of HCND1. The user's client device 41 a browser advantageously opens with HTTP the page http://HCND1 from the heat control webserver 172.17.0.4. The user now has a direct management connection to the heat control webserver 63 controlling the heat controls. The client device 41a user can also perform an address search for the primary name "HCND". The home control network device 61 responds to the inquiry with its own IP address 172.17.0.1 and provides an index page to be seen in the user's client device 41a browser. On the index page the user sees in a list form all the resources attached to the LAN interface of the home control network device 61. In the example of Figures 1 and 2 the following list is seen in the browser: ^ <sup>i! 1</sup> hcnd 172.17.0.4 </p><p id="p0114" num="0114"> hcnd2 172.17.0.3 
<!-- EPO <DP n="23"/>-->
 hcnd3 172.17.0.2 </p><p id="p0115" num="0115"> hcnd4 172.17.0.5 </p><p id="p0116" num="0116">On the index page it is possible for the client device user to rename the presented objects, e.g. "HCND1" with the name "heat control" and "HCND2" with the name "surveillance camera". The home control network device automatically stores the name changes for the IP addresses in question. Now the client device 41a user can contact for example the heat control by entering only "heat control" in the browser line. </p><p id="p0117" num="0117">In an embodiment according to remote control system 1 B shown in Figure 2, a separate home control network double key 22 is utilised in some rarely occurring remote connection problems. The home control network double key 22 ensures that a VPN connection is obtained also in these targets. In Figure 1 the VPN tun- nelling 55 is possible to provide directly between the home control network device 61 and the home control network key 42. <sup>'</sup>■·<sup>■■</sup>—<sup>■</sup> </p><p id="p0118" num="0118">If for some reason the creation of such a direct VPN tunnel does hot succeed with the method according to the first embodiment of the invention or succeeds sporad- ically, the remote control system 1 B according to Figure 2 can be utilised. In the remote control system of Figure 2 the home control network double key 22 assists in creating a VPN tunnel by bridging VPN tunnels 55a and 55b. For the client device user the remote control system functions in the same way, whether the remote control system according to Figure 1 or Figure 2 is used. ' : </p><p id="p0119" num="0119">Figure 2 shows a remote control system 1 B according to a second advantageous embodiment of the invention. With regards to its main parts the data transfer network arrangement 1 B corresponds to the data transfer network arrangement 1A according to Figure 1. As an addition this embodiment uses a second home con- trol network double key 22 (HCN2K) on the Internet 2 for establishing the data transfer connection 55a and 55b. - </p><p id="p0120" num="0120">The embodiment of the invention according to Figure 2 can be used in connection with different, rarely occurring routing problems. The embodiment according to remote control system 1 B ensures that also in such problem cases, a remote connection to the target can be established without target-specific programming performed in the remote control target by a network specialist. The embodiment according to Figure 2 is necessary in situations where the home control network 
<!-- EPO <DP n="24"/>-->
 key/home control network device pair for some exceptional reason cannot achieve direct contact with each other, such as for example due to very communication- restricted NAT firewall settings. A connection establishing problem arises if for example a NAT firewall in some data transfer connection replaces the outgoing UDP connection source port with some other than what the contacting device has originally requested. Thus the connection establishing does not necessarily succeed. The same thing might happen if, in addition to a complete blocking of incoming traffic, also the use of the outgoing ports is highly restricted or if the UDP connections are completely blocked. </p><p id="p0121" num="0121">The embodiment according to Figure 2 can also be used in a network, where the NAT operating environment is exceptionally complicated. A situation can be men- tioned as an example, where devices behind two different double firewalls want to communicate with each other, but cannot for some reason ascertain the external addresses of the NAT firewalls. </p><p id="p0122" num="0122">In the embodiment of Figure 2 the home control network double key 22 functions as a device bridging the VPN connection between the home control network key 42 and the home control network device 61. In this embodiment all communication passes through the home control network double key 22. Also the home control network double key 22 is equipped with an automatic IP address search. If necessary, it is however possible to determine a fixed IP address for this home control network double key. The home control network double key 22 also supports tunnels created both in http and HTTPS connections. The home control network double key 22 is advantageously also equipped with a proxy server support, by using which the property control method according to the invention can be used also when roaming through foreign data transfer networks. </p><p id="p0123" num="0123">When a problem connection occurs, on which the connection establishing correction logic of the remote control system 1A presented in Figure 1 does not work, then a home control network double key 22 included in the remote control system 1 B according to Figure 2 is sent to the customer. </p><p id="p0124" num="0124">As a first measure the home control network double key 22 and the actual home control network key 42 are used while physically attached to each other's network interface, whereby the home control network double key 22 retrieves device pair 
<!-- EPO <DP n="25"/>-->
 information for itself from the memory of the actual home control network key 42. Thereafter the home control network double key 22 is connected to the public Internet 2. Thus the home control network double key 22 obtains a public IP address from the Internet network 2. After it has obtained the public IP address the home control network double key 22 makes contact with the home control network server 21. The home control network server 21 correspondingly stores in its database information about the public IP address of the home control network double key 22 and the network path inquiries it has made. Thereafter the home control network double key 22 notifies the home control network server 21 about which its home control network key 42 is. The home control network double key 22 has received the information regarding this home control network key 42 when it was connected to the network interface of the home control network key 42. The home control network server 21 thereafter sends to the home control network double key 22 the information regarding the home control network device 61 of the home control network key 42 in question. </p><p id="p0125" num="0125">In the remote control system 1 B according to Figure 2 the home control network key 42 and the home control network device 61 receive information about a new "additional member" from the home control network server 21. Thereafter they re- quest the public IP address of the home control network double key 22 from the home control network server 21. Thereafter both the home control network key 42 and the home control network device 61 can if necessary directly contact the public address of the home control network double key 22. The relaying of packets from the home control network device 61 or the first home control network key 42 via the home control network double key 22 through the firewalls FW1 and FW2 is successful, because the firewalls 31 and 51 always at least let through outgoing TCP packets to the home control network double key 22. On the other hand the firewalls FW1 and FW2 interpret the packets coming from the home control network double key 22 as response packets to packets sent earlier to the home con- trol network double key 22 from the subnetwork 3 or 4 they protect. Therefore the firewalls FW1 and FW2 let these packets received from the home control network double key 22 through into the subnetwork 3 or 4 they protect. In this way VPN tunnels 55a and 55b can be formed also in these above-described, rarely occurring problem cases. </p><p id="p0126" num="0126">The home control network double key 22 is arranged to "bridge" the VPN connection of the home control network device pair 42 and 61 , so that it functions as a communication mediator between these two devices 42 and 61. This advanta- 
<!-- EPO <DP n="26"/>-->
 geously takes place by bridging the data link layer VPN tunnels 55a and 55b together in the home control network double key 22 in the above-described manner. After the bridging the home control network device pair 42 and 61 has a direct Ethernet level data transfer connection between them. </p><p id="p0127" num="0127">In connection with Figures 1 and 2 an example has been used to show how the client device and the device to be remote-controlled in the property can be made to exchange information and control commands in the remote control system according to the invention. Figure 3 shows the above-described procedures as a flowchart. </p><p id="p0128" num="0128">In step 300 the home control network device 61 is connected to the house intranet network 5 and the home control network key 42 to the intranet network 3. All devices to be remote-controlled in the property are connected to the home control network device 61 either with a permanent connection or a wireless connection. </p><p id="p0129" num="0129">In step 301 both the home control network device 61 and the home control network key 42 determine their network path. In step 302 both the home control network device 61 and the home control network key 42 stores their determined net- work paths on the home control network server 21. </p><p id="p0130" num="0130">In step 303 the devices 42 and 61 according to the invention to be utilised in the remote-controlling receive information that their device pair has registered with the home control network server 21 or that the registration is missing. If one of the de- vices 42 or 61 according to the invention belonging to the device pair has not registered, then the remote control system 1A or 1 B moves after a specified delay 312 to the listening step 313 of the home control network server connection. </p><p id="p0131" num="0131">At the start of the connection establishing, both the home control network key 42 and the home control network device 61 request in step 304 the network path of the counterpart from the home control network server 21. The home control network server 21 checks that it is a question of an allowed device pair, and after the checking it sends the network paths to both devices in step 305. Thereafter the home control network server 21 releases the connection to both devices 42 and 61 and thus it is no longer a part of the VPN tunnel 55 or 55a+55b being formed. </p><p id="p0132" num="0132">In step 306 the home control network key 42 and the home control network device 61 form a VPN tunnel 55 or 55a+55b between them. 
<!-- EPO <DP n="27"/>-->
 In step 307 both the user's client device 41a or 41b and the target device 62-65 in the property are connected to the established VPN network. The user's client device 41a or 41b is connected to the VPN network by the home control network key 42. The device 62-65 to be remote-controlled in the target is connected to the VPN network by the home control network device 61. </p><p id="p0133" num="0133">In step 308 the user's client device 41a or 41b and the device 62-65 in the property are part of the same VPN network, whereby they may exchange information with each other. After a delay specified in the remote control system, step 309 consists of checking whether the data transfer connection between the client device 41 a/41 b and the target device 62-65 is still active. If the data transfer connection is active, the process returns to step 308 and the data transfer is allowed to continue. </p><p id="p0134" num="0134">If it is in step 309 found that the VPN connection is no longer active, then a decision is made in step 310 regarding a possible new attempt at establishing a connection. If it is decided to make a new attempt at establishing a connection, then the process returns to step 301. In this alternative the process advantageously al- so includes necessary procedures for releasing the VPN connection, so that the connection establishing process according to the invention itself can be renewed successfully. The connection establishing is attempted according to a predetermined number. If it is in step 310 decided that a new attempt to establish a VPN connection is no longer made, because a predetermined number of connection establishing attempts have been made or it is for some other reason not desired to establish a VPN connection, then the process moves to step 311. In step 311 the used VPN data transfer network is released. </p><p id="p0135" num="0135">After the VPN data transfer network is released, a predetermined delay 312 follows in the process utilised in the remote control system 1A or 1 B. After the delay 312 the process moves to the listening function 313 of the home control network server. There the current-carrying home control network device 61 sends contact requests via the network to the home control network server 21. </p><p id="p0136" num="0136">The home control network device 61 repeats the process, step 314, until a network connection to the home control network server 21 is established. 
<!-- EPO <DP n="28"/>-->
 When a data transfer connection to the home control network server 21 is established, then in step 314 a decision is made about moving to a process of establishing a VPN connection, whereby the process returns to step 301. </p><p id="p0137" num="0137">All the above-described process steps are implemented with program commands, which are performed in a suitable special-purpose or general-purpose processor. The program commands are stored on a storage medium utilised by the home control network device 61 and home control network key 42, such as memories, from which the processor can retrieve and implement them. The references to computer-readable medium can for example also contain special components, such as programmable USB Flash memories, logic arrays (FPLA), application- specific integrated circuits (ASIC) and signal processors (DSP). Figure 4 shows the functional main parts of the home control network device 61 according to the invention. The home control network device 61 has a power source 621. It can be an accumulator or a power source based on mains current. All the electric components of the home control network device get their operating voltage from the power source 621. </p><p id="p0138" num="0138"> '<sup> '</sup> ~ - '. ! &lt; : . - <sup>■</sup> ·.</p><p id="p0139" num="0139">The home control network device 61 has one or more processors 622. The processor or processor means can comprise an arithmetic logic unit, a group of different registers and control circuits. A data storing arrangement 623, such as a memory unit or memory means, whereon computer-readable information or pro- grams or user information can be stored, has been connected to the processor means. The memory means 623 typically contain memory units, which allow both reading and writing functions (Random Access Memory, RAM), and memory units containing non-volatile memory, from which data can only be read (Read Only Memory, ROM). The identification information of the device, its current network path, the identification information of the home control network key 42 functioning as its pair and all the programs needed for the operation of the home control network device 61 are advantageously stored in the memory means. </p><p id="p0140" num="0140">Some examples of programs stored in the memory of the home' control network device 61 are an operating system (e.g. Linux), TCP/IP programs, a VPN program (e.g. OpenVPN), a DHCP client device/server program (e.g. ISC DHCP), a DNS server program (e.g. dnsmasq), a database program (e.g. SQLite), a remote con- </p><p id="p0141" num="0141">1 
<!-- EPO <DP n="29"/>-->
 trol program (e.g. OpenSSH), a certificate management/confirmation program (e.g. GPG) and a user interface library (e.g. LuCI). </p><p id="p0142" num="0142">The home control network device 61 also comprises interface elements, which comprise an input/output or input/output means 624, 625 and 626 for receiving or sending information. The information received with the input means is transferred to be processed by the processor means 622 of the home control network device 61. The interface elements of the home control network device transfer information either to the data transfer network or to external data processing devices. The in- terface elements of the home control network device 61 are advantageously a WAN port 624, one or more LAN ports 625 and an antenna port 626. </p><p id="p0143" num="0143">Figure 5a shows the functional main parts of the home control network key 42 according to the invention. The home control network device 42 has a power source 421. It can be an accumulator or a power source based on mains current. All the electric components of the home control network device get their operating voltage from the power source 421. </p><p id="p0144" num="0144">The home control network key 42 has one or more processors 422. The processor or processor means can comprise an arithmetic logic unit, a group of different registers and control circuits. A data storing arrangement 423, such as a memory unit or memory means, whereon computer-readable information or programs or user information can be stored, has been connected to the processor means. The memory means 423 typically contain memory units, which allow both reading and writing functions (Random Access Memory, RAM), and memory units containing non-volatile memory, from which data can only be read (Read Only Memory, ROM). The identification information of the device, its current network path, the identification information of the home control network devices functioning as its device pairs and all the programs needed for the operation of the home control network key 42 are advantageously stored in the memory means. </p><p id="p0145" num="0145">Some examples of programs stored in the memory of the home control network key 42 are an operating system (e.g. Linux), TCP/IP programs, a VPN program (e.g. OpenVPN), a DHCP server/client device program (e.g. ISC DHCP), a DNS server program (e.g. dnsmasq), a database program (e.g. SQLite), a remote control program (e.g. OpenSSH), a certificate management/confirmation program (e.g. GPG) and a user interface library (e.g. LuCI). 
<!-- EPO <DP n="30"/>-->
 The home control network key 42 also comprises interface elements, which comprise an input/output or input/output means 424, 425 and 426 for receiving or sending information. The information received with the input means is transferred to be processed by the processor means 422 of the home control network key 42. The interface elements of the home control network device transfer information either to the data transfer network or to external data processing devices. The interface elements of the home control network device 42 are advantageously a WAN port 424, a LAN port 425, a USB port 426 and an antenna port 627. Figure 5b shows the functional main parts of the home control network double key 22 according to the invention. The home control network double key 22 has a power source 421a. It can be an accumulator or a power source based on mains current. All the electric components of the home control network double key 22 get their operating voltage from the power source 421. The home control network double key 22 has one or more processors 422a. The processor or processor means can comprise an arithmetic logic unit, a group of different registers and control circuits. A data storing arrangement 423a, such as a memory unit or memory means, whereon computer-readable information or programs or user information can be stored, has been connected to the processor means. The memory means 423a typically contain memory units, which allow both reading and writing functions (Random Access Memory, RAM), and memory units containing non-volatile memory, from which data can only be read (Read Only Memory, ROM). The identification information of the device, its current network path, the identification information of the home control network key 42 and home control network device 61 functioning as its device pairs and all the programs needed for the operation of the home control network double key 22 are advantageously stored in the memory means. </p><p id="p0146" num="0146">Some examples of programs stored in the memory of the home control network double key 22 are an operating system (e.g. Linux), TCP/IP programs, a VPN pro- gram (e.g. OpenVPN), a DHCP client device program (e.g. ISC DHCP), a database program (e.g. SQLite), a certificate management/confirmation program (e.g. GPG) and a user interface library (e.g. LuCI). </p><p id="p0147" num="0147">The home control network double key 22 also comprises interface elements, which comprise an input/output or input/output means 424a and 424b for receiving or sending information. The information received with the input means is transferred to be processed by the processor means 422a of the home control network double 
<!-- EPO <DP n="31"/>-->
 key 22. The interface elements of the home control network device transfer information either to the data transfer network or to external data processing devices. The interface elements of the home control network double key 22 are advantageously WAN ports 424a and 434b, of which there are two or more. Figure 6 shows the functional main parts of the home control network server 21. The home control network server 21 comprises a power source 211. It can be an accumulator or a power source based on mains current. All the electric components of the home control network server 21 get their operating voltage from the power source 211. The home control network server 21 has one or more processors 212. The processor or processor means can comprise an arithmetic logic unit, a group of different registers and control circuits. A data storing arrangement 213, such as a memory unit or memory means, whereon computer-readable information or programs or user information can be stored, has been connected to the processor means. The memory means 213 typically contain memory units, which allow both reading and writing functions (Random Access Memory, RAM), and memory units containing non-volatile memory, from which data can only be read (Read Only Memory, ROM). The identification data of the device pairs in the remote control system, the current network paths of each device pair and all the programs need- ed for establishing the VPN data transfer connection to be established between the device pairs are advantageously stored in the memory means. </p><p id="p0148" num="0148">Some examples of programs stored in the memory of the home control network server 21 are an operating system (e.g. Linux), TCP/IP programs, a DHCP server/client device program (e.g. ISC DHCP), a DNS server program (e.g. bind), a da- tabase program (e.g. SQLite), a certificate management/confirmation program (e.g. GPG) and a user interface library (e.g. LuCI). </p><p id="p0149" num="0149">The home control network server 21 also comprises interface elements, which comprise an input/output or input/output means 214 and 215 for receiving or sending information. The information received with the input means is transferred to be processed by the processor means 222 of the home control network server 21. The interface elements of the home control network server 21 transfer information either to the data transfer network or to external data processing devices. The interface elements of the home control network server 21 are advantageously a WAN port 214 and one or more LAN ports 215. 
<!-- EPO <DP n="32"/>-->
 The home control network server 21 advantageously also comprises a user interface (not shown in Figure 6), which comprises means for receiving information from the server 21 user. The user interface can comprise a keyboard, a touch screen, a microphone and a speaker. </p><p id="p0150" num="0150">Some advantageous embodiments of the remote control method and remote control system according to the invention have been described above. The invention is not limited to the solutions described above, but the inventive idea can be applied in numerous ways within the scope of the claims. 
</p></description><claims mxw-id="PCLM44727075" ref-ucid="WO-2012113975-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="33"/>-->Claims </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A remote control method for actuators (62-65) in a property, in which method a virtual private network (55) is created between a user's client device (41a, 41b) controlling the actuators and situated in a first data transfer network (4) and an ac- tuator (62-65) to be remote-controlled situated in a second data transfer network (6), characterised in that </claim-text><claim-text> - the client device (41a, 41b) is connected (300) to a first network terminal (42) in the first data transfer network (4) </claim-text><claim-text> - the actuator (62-65) to be remote-controlled is connected (300) to a second network terminal (61) in the second data transfer network (6) </claim-text><claim-text> - both the first network terminal and the second network terminal make contact (301) with a home control network server (21) </claim-text><claim-text> - both the first network terminal (42) and the second network terminal (61) request (304) routing information from the home control network server (21) for establish- ing an end-to-end data transfer connection between said network terminals and that <sup>; ■</sup> - - · ·<sup>■</sup>··&lt;</claim-text><claim-text>- the home control network server (21) sends (305) the requested routing information to the first network terminal (42) and the second network terminal (61), by using which the first network terminal (42) and the second network terminal (61) establish among themselves a virtual private network (55), to which the home control network server (21) does not belong (306). </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The remote control method according to claim 1 , characterised in that the home control network server (21) identifies (303, 304) the first network terminal (42) and the second network terminal (61) as a device pair before sending (305) the network path information needed for forming the virtual private network (55) to the first network terminal (42) and the second network terminal (61) </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The remote control method according to claim 2, characterised in that the first network terminal (42) determines (301) its network path from the first data transfer network (4) to the Internet (2) and the second network terminal (61) determines (301) its network path from the second data transfer network (5) to the Internet (2) and that the first and the second network terminal store (302) the determined network path information on the home control network server (21), which network paths the home control network server sends to the first and second network terminal in order to form a virtual private network (55). <!-- EPO <DP n="34"/>--> </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The remote control method according to claim 3, characterised in that the virtual private network (42, 55, 61) formed (306) between the first network terminal (42) and the second network terminal (61), to which virtual private network both the client device (41a, 41 b) and the device (62-65) to be remote-controlled are</claim-text><claim-text>5 connected (307, 308), is formed either in the OSI model data link layer (Layer 2) or in the network layer (Layer 3). </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. A remote control system (1A, 1 B) for actuators (62-65) in a property, which system comprises </claim-text><claim-text> 10 - a first data transfer network (4), to a first network terminal (42) connected to which a user's client device (41a, 41 b) controlling actuators to be remote- controlled is connected </claim-text><claim-text> - at least one second data transfer network (6), to a second network terminal connected (61) to which actuators (62-65) to be remote-controlled are connected</claim-text><claim-text>15 - one or several other data transfer networks (2, 3, 5) between the first data transfer network (4) and the second data transfer network (6), one of which is the Internet network (2); and ~</claim-text><claim-text>- a home control network server (21) connected to the Internet (2), </claim-text><claim-text> characterised in that</claim-text><claim-text> 0 - the first network terminal and the second network terminal are configured to establish a data transfer connection to the home control network server (21) in order to establish a mutual end-to-end data transfer connection (55) between said network terminals (42, 61) ^ </claim-text><claim-text> - the first network terminal (42) and the second network terminal (61) are config- 5 ured to request routing information from the home control network server (21) for establishing an end-to-end data transfer connection between said network terminals and that </claim-text><claim-text> - the home control network server (21) is configured to send the routing information to the first network terminal (42) and the second network terminal (61), by 0 using which the first network terminal and the second network terminal are arranged to establish among themselves a virtual private network (55), to which the</claim-text><claim-text>' home control network server (21) does not belong. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The remote control system according to claim 5, characterised in that the 5 home control network server (21) is configured to identify the first network terminal</claim-text><claim-text>(42) and the second network terminal (61) as a device pair before sending the network path information needed for forming the virtual private network (55) to the first network terminal (42) and the second network terminal (61). <!-- EPO <DP n="35"/>--> </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The remote control system according to claim 6, characterised in that the first network terminal (42) is configured to determine its network path from the first data transfer network (4) to the Internet (2) and the second network terminal (61)</claim-text><claim-text>5 is configured to determine its network path from the second data transfer network (5) to the Internet (2) and that the first and the second network terminal are configured to store the determined network path information on the home control network server (21), which network paths the home control network server is configured to send to the first and second network terminal in order to form a virtual pri- 0 vate network (55). </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The remote control system according to claim 7, characterised in that the virtual private network (42, 55, 61) configured to be formed (306) between the first network terminal (42) and the second network terminal (61), to' which virtual pri- 5 vate network both the client device (41a, 41b) and the device (62-65) to be remote-controlled are connected (307, 308), is configured to be formed either in the OSI model data link layer (Layer 2) or in the network layer (Layer 3). </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. A home control network key (42) for actuators in a property, which comprises 0 - network interface elements, which comprise input/output means (424, 425, 426; </claim-text><claim-text> 427) for network interfaces (3, 4) </claim-text><claim-text> - a processor (422), and </claim-text><claim-text> - a memory (423), which contains computer program code </claim-text><claim-text> characterised in that the processor, the memory and the therein stored computer 5 program code are configured to </claim-text><claim-text> - determine a network path from the home control network key (42) to the Internet (2) </claim-text><claim-text> - store the determined network path both in the memory (423) of the home control network key and in a memory (213) of a home control network server (21)</claim-text><claim-text> 0 - request from the home control network server (21) a network path information of its network terminal pair (61) in order to establish an end-to-end data transfer con- <sup>:</sup> nection between said network terminals </claim-text><claim-text> - receive from the home control network server the network path information of its network terminal device pair (61) and</claim-text><claim-text> 5 - establish with the aid of the received network path information with its network terminal pair (61) a virtual private network (55) for the remote control of the actuators of the property, to which virtual private network the home control network server (21) does not belong. <!-- EPO <DP n="36"/>--> </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The home control network key according to claim 9, characterised in that it is arranged to form said virtual private network (42, 55, 61) either in the OSI model data link layer (Layer 2) or the network layer (Layer 3). </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1. A home control network device (61) for actuators in a property, which comprises </claim-text><claim-text> - network interface elements, which comprise input/output means (624, 625, 626) for a network interface (5) and devices (62-65) to be remote-controlled </claim-text><claim-text>- a processor (622), and </claim-text><claim-text> - a memory (623), which contains computer program code </claim-text><claim-text>characterised in that the processor, the memory and the therein stored computer program code are configured to </claim-text><claim-text> - determine a network path from the home control network device (61) to the In- ternet (2) </claim-text><claim-text> - store the determined network path both in the memory (623) of the home control network device and in a memory (213) of a home control network server (21)</claim-text><claim-text>- request from the home control network server (21) a network path information of its network terminal pair (42) in order to establish an end-to-end data transfer con- nection between said network terminals </claim-text><claim-text> - receive from the home control network server the network path information of its network terminal device pair (42) and </claim-text><claim-text> - establish with the aid of the received network path information with its network terminal pair (42) a virtual private network (55) for the remote control of the actua- tors of the property, to which virtual private network the home control network server (21) does not belong. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The home control network device according to claim 1 1 , characterised in that it is configured to form said virtual private network (42, 55, 61 ) either in the OSI model data link layer (Layer 2) or the network layer (Layer 3). </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. A home control network server (21), which comprises </claim-text><claim-text> - network interface elements, which comprise input/output means (214, 215)</claim-text><claim-text>- a processor (212), and </claim-text><claim-text>- a memory (213), Which contains computer program code, </claim-text><claim-text>characterised in that </claim-text><claim-text>the processor, the memory and the therein stored computer program code are configured to <!-- EPO <DP n="37"/>--> - store in the memory of the home control network server the identification information of a network terminal pair (42, 61) formed by two network terminals used for remote control of a property </claim-text><claim-text> - receive from the network terminal pair (42, 61) network path information they have determined </claim-text><claim-text> - receive from the first network terminal (42, 61) a network path information request of its network terminal pair </claim-text><claim-text> - check which is the device pair of the first network terminal that made the network path request </claim-text><claim-text>- send the network path information of the network terminal pair both to the first network terminal (42) and the second network terminal (61) </claim-text><claim-text> - receive cyber space information in use in connection with the network terminal pair (42, 61) and send the allowed cyber space information to the home control network device (61) and </claim-text><claim-text>- release the data transfer connection to the network device pair (42, 61) after the network path information is sent. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
