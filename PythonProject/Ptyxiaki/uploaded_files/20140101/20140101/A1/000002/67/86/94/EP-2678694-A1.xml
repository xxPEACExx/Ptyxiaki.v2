<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678694-A1" country="EP" doc-number="2678694" kind="A1" date="20140101" family-id="46028121" file-reference-id="301203" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550779" ucid="EP-2678694-A1"><document-id><country>EP</country><doc-number>2678694</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12719104-A" is-representative="NO"><document-id mxw-id="PAPP154824702" load-source="docdb" format="epo"><country>EP</country><doc-number>12719104</doc-number><kind>A</kind><date>20120224</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438247" load-source="docdb" format="original"><country>EP</country><doc-number>12719104.7</doc-number><date>20120224</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445575" ucid="US-201113034503-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113034503</doc-number><kind>A</kind><date>20110224</date></document-id></priority-claim><priority-claim mxw-id="PPC140445667" ucid="US-2012026657-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026657</doc-number><kind>W</kind><date>20120224</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988100887" load-source="docdb">G01C  22/00        20060101ALI20120914BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988106117" load-source="docdb">G06F   3/01        20060101ALI20120914BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988127613" load-source="docdb">G01P  13/00        20060101AFI20120914BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988096542" load-source="docdb" scheme="CPC">G01C  22/006       20130101 LI20131128BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988101416" load-source="docdb" scheme="CPC">G01P  13/00        20130101 FI20131128BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184821" lang="DE" load-source="patent-office">IDENTIFIKATION VON FUSSGÄNGERBEWEGUNGEN MIT NIEDRIGER GESCHWINDIGKEIT</invention-title><invention-title mxw-id="PT132184822" lang="EN" load-source="patent-office">LOW AVERAGE VELOCITY PEDESTRIAL MOTION IDENTIFICATION</invention-title><invention-title mxw-id="PT132184823" lang="FR" load-source="patent-office">IDENTIFICATION DE MOUVEMENT DE PIÉTON À VITESSE MOYENNE FAIBLE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918135575" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>QUALCOMM INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918161516" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>QUALCOMM INCORPORATED</last-name></addressbook></applicant><applicant mxw-id="PPAR918983772" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Qualcomm Incorporated</last-name><iid>101331414</iid><address><street>5775 Morehouse Drive</street><city>San Diego, CA 92121</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918136445" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>BURKE JOHN MICHAEL</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918166799" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>BURKE, JOHN MICHAEL</last-name></addressbook></inventor><inventor mxw-id="PPAR918981798" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>BURKE, JOHN MICHAEL</last-name><address><street>5775 Morehouse Drive</street><city>San Diego, California 92121</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918983436" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Richardson, Julie Kate</last-name><iid>100046251</iid><address><street>Reddie &amp; Grose LLP 16 Theobalds Road</street><city>London WC1X 8PL</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026657-W"><document-id><country>US</country><doc-number>2012026657</doc-number><kind>W</kind><date>20120224</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012116348-A1"><document-id><country>WO</country><doc-number>2012116348</doc-number><kind>A1</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548833943" load-source="docdb">AL</country><country mxw-id="DS548924994" load-source="docdb">AT</country><country mxw-id="DS548833944" load-source="docdb">BE</country><country mxw-id="DS548861632" load-source="docdb">BG</country><country mxw-id="DS548813443" load-source="docdb">CH</country><country mxw-id="DS548917718" load-source="docdb">CY</country><country mxw-id="DS548924995" load-source="docdb">CZ</country><country mxw-id="DS548917226" load-source="docdb">DE</country><country mxw-id="DS548833945" load-source="docdb">DK</country><country mxw-id="DS548917719" load-source="docdb">EE</country><country mxw-id="DS548902193" load-source="docdb">ES</country><country mxw-id="DS548861633" load-source="docdb">FI</country><country mxw-id="DS548861634" load-source="docdb">FR</country><country mxw-id="DS548917227" load-source="docdb">GB</country><country mxw-id="DS548833946" load-source="docdb">GR</country><country mxw-id="DS548833947" load-source="docdb">HR</country><country mxw-id="DS548917720" load-source="docdb">HU</country><country mxw-id="DS548813444" load-source="docdb">IE</country><country mxw-id="DS548833948" load-source="docdb">IS</country><country mxw-id="DS548861635" load-source="docdb">IT</country><country mxw-id="DS548917721" load-source="docdb">LI</country><country mxw-id="DS548917228" load-source="docdb">LT</country><country mxw-id="DS548924996" load-source="docdb">LU</country><country mxw-id="DS548917229" load-source="docdb">LV</country><country mxw-id="DS548917310" load-source="docdb">MC</country><country mxw-id="DS548915718" load-source="docdb">MK</country><country mxw-id="DS548915719" load-source="docdb">MT</country><country mxw-id="DS548924997" load-source="docdb">NL</country><country mxw-id="DS548902194" load-source="docdb">NO</country><country mxw-id="DS548925002" load-source="docdb">PL</country><country mxw-id="DS548902195" load-source="docdb">PT</country><country mxw-id="DS548925003" load-source="docdb">RO</country><country mxw-id="DS548902196" load-source="docdb">RS</country><country mxw-id="DS548925004" load-source="docdb">SE</country><country mxw-id="DS548917311" load-source="docdb">SI</country><country mxw-id="DS548813445" load-source="docdb">SK</country><country mxw-id="DS548813446" load-source="docdb">SM</country><country mxw-id="DS548915720" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99619226" ref-ucid="WO-2012116348-A1" lang="EN" load-source="patent-office"><p num="0000">Systems and methods for identifying a motion state of a mobile device are disclosed. In one embodiment, identifying a motion state of a mobile device using acceleration signals from one or more accelerometers comprises: detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps.</p></abstract><abstract mxw-id="PA99818907" ref-ucid="WO-2012116348-A1" lang="EN" source="national office" load-source="docdb"><p>Systems and methods for identifying a motion state of a mobile device are disclosed. In one embodiment, identifying a motion state of a mobile device using acceleration signals from one or more accelerometers comprises: detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps.</p></abstract><abstract mxw-id="PA99619227" ref-ucid="WO-2012116348-A1" lang="FR" load-source="patent-office"><p num="0000">L'invention concerne des systèmes et des procédés d'identification d'un état de mouvement d'un dispositif mobile. Dans un mode de réalisation, l'identification d'un état de mouvement d'un dispositif mobile à l'aide de signaux d'accélération provenant d'un ou de plusieurs accéléromètres consiste : à détecter n'importe quels pas de piéton associés à un utilisateur du dispositif mobile pendant une période d'observation sur la base des signaux d'accélération ; à déterminer un nombre maximal de pas de piéton consécutifs faits pendant la période d'observation à partir des pas de piéton détectés ; à déclarer un état de mouvement à vitesse moyenne élevée ou un état de mouvement à vitesse moyenne faible pour la période d'observation sur la base du nombre maximal déterminé de pas de piéton consécutifs.</p></abstract><abstract mxw-id="PA99818908" ref-ucid="WO-2012116348-A1" lang="FR" source="national office" load-source="docdb"><p>L'invention concerne des systèmes et des procédés d'identification d'un état de mouvement d'un dispositif mobile. Dans un mode de réalisation, l'identification d'un état de mouvement d'un dispositif mobile à l'aide de signaux d'accélération provenant d'un ou de plusieurs accéléromètres consiste : à détecter n'importe quels pas de piéton associés à un utilisateur du dispositif mobile pendant une période d'observation sur la base des signaux d'accélération ; à déterminer un nombre maximal de pas de piéton consécutifs faits pendant la période d'observation à partir des pas de piéton détectés ; à déclarer un état de mouvement à vitesse moyenne élevée ou un état de mouvement à vitesse moyenne faible pour la période d'observation sur la base du nombre maximal déterminé de pas de piéton consécutifs.</p></abstract><description mxw-id="PDES50930157" ref-ucid="WO-2012116348-A1" lang="EN" load-source="patent-office"><!-- EPO <DP n="3"/>--><p id="p0001" num="0001"> LOW AVERAGE VELOCITY PEDESTRIAL MOTION </p><p id="p0002" num="0002"> IDENTIFICATION </p><p id="p0003" num="0003"> Field of Disclosure </p><p id="p0004" num="0004"> [0001] The present disclosure relates generally to motion state identification, and more specifically to low average velocity motion state identification. </p><p id="p0005" num="0005">Background </p><p id="p0006" num="0006"> [0002] Microelectromechanical system (MEMS) sensors have recently been integrated within mobile devices to provide acceleration measurements for identifying movement. "Stationarity" of the mobile device (e.g., sitting unattended on a nightstand or desk) may be inferred from triaxial MEMS accelerometer signals when the acceleration change measured on all axes is insignificant. This type of movement detection operates independently from environmental RF signals, including those based on signals from wireless wide-area networks and local-area networks, as well as satellite or global positioning systems, and offers a way of optimizing cell phone performance if movement information is provided efficiently and accurately. </p><p id="p0007" num="0007"> [0003] However, problems arise with conventional MEMS stationarity detection schemes because they tend to indicate movement when the device is "fidgeting," such as when the device is attached to a person' s belt while sitting in a meeting or being held in a person's hand while standing conversing with a colleague, even though the mobile device is moving at low or near zero average velocity. </p><p id="p0008" num="0008">SUMMARY </p><p id="p0009" num="0009"> [0004] Embodiments of the invention are directed to systems and methods for identifying a motion state of a mobile device. </p><p id="p0010" num="0010"> [0005] In one aspect, a method is provided for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, comprising: detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. 
<!-- EPO <DP n="4"/>-->
 [0006] In another aspect, an apparatus is provided for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers. The apparatus comprises a step detector and a processor. The step detector is configured to detect any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals. The processor is configured to determine a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps, and to declare a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </p><p id="p0011" num="0011"> [0007] In another aspect, an apparatus is provided for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, comprising: means for detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; means for determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and means for declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </p><p id="p0012" num="0012"> [0008] In another aspect, a computer-readable medium comprising code is provided, which, when executed by a processor, causes the processor to perform operations for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers. The computer-readable medium comprises: code for detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; code for determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and code for declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </p><p id="p0013" num="0013">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0014" num="0014"> [0009] The accompanying drawings are presented to aid in the description of embodiments of the invention and are provided solely for illustration of the embodiments and not limitation thereof. </p><p id="p0015" num="0015"> [0010] FIG. 1 illustrates a motion state identification device according to an example embodiment. 
<!-- EPO <DP n="5"/>-->
 [0011] FIG. 2 illustrates a method of identifying a motion state of a mobile device according to an example embodiment. </p><p id="p0016" num="0016">[0012] FIG. 3 illustrates the determination of a maximum number of consecutive pedestrial steps taken during a given observation period according to an example embodiment. </p><p id="p0017" num="0017">DETAILED DESCRIPTION </p><p id="p0018" num="0018"> [0013] Aspects of the invention are disclosed in the following description and related drawings directed to specific embodiments of the invention. The term "embodiments of the invention" does not require that all embodiments of the invention include the discussed feature, advantage or mode of operation, and alternate embodiments may be devised without departing from the scope of the invention. Additionally, well-known elements of the invention will not be described in detail or will be omitted so as not to obscure the relevant details of the invention. </p><p id="p0019" num="0019"> [0014] The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of all embodiments of the invention. As used herein, the singular forms "a", "an" and "the" are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will be further understood that the terms "comprises," "comprising," "includes" and/or "including," when used herein, specify the presence of stated features, integers, steps, operations, elements, and/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components, and/or groups thereof. </p><p id="p0020" num="0020"> [0015] As discussed in the Background above, conventional MEMS accelerometer based motion state identification systems are not able to distinguish between low average velocity motion states (e.g., "fidgeting") and high average velocity motion states (e.g., continuous walking or running). However, the ability to accurately identify only high average velocity movement is desirable for a wide range of applications, such as cellular telephony and context aware computing, due to the ubiquity of fidgeting situations. Examples include wireless wide area network devices (e.g., for handoff searching and out-of-service situations), wireless local area network devices (e.g., for basic service set transition and signal drop situations), and global positioning system devices (e.g., for dynamic power optimization and loss of signal situations). 
<!-- EPO <DP n="6"/>-->
 Accordingly, techniques are provided herein for more particularly identifying a motion state of a mobile device. </p><p id="p0021" num="0021"> [0016] FIG. 1 illustrates a motion state identification device 100 according to an example embodiment. As shown, the motion state identification device 100 includes a motion state identification processor 102 that receives motion information from an "any-motion" detector 104 and step information from a step detector 106, and outputs a motion state identification. The motion state identification processor 102 is also coupled to a memory 108 configured to store related data and/or instructions. The any-motion detector 104 and step detector 106 operate according to acceleration signals received from an accelerometer 110. It will be appreciated that the any-motion detector 104 and step detector 106 may share the accelerometer 110 as shown, or may each have their own accelerometer, either internal or external to the respective detector. The accelerometer 110 is typically a triaxial accelerometer that provides acceleration data for three different axes. Other examples may include multiple (e.g., three) single axis accelerometers. Further, it will be appreciated that other devices from which acceleration may be derived can be used such as gyroscopes, so the embodiments should not be construed to be limited to the specific devices discussed herein. </p><p id="p0022" num="0022"> [0017] The any-motion detector 104 detects whether the mobile device is "stationary"</p><p id="p0023" num="0023">(i.e., whether a threshold level of movement has or has not been detected). For example, the any-motion detector 104 may monitor acceleration signals from the accelerometer 110 and determine an associated acceleration spread. Acceleration spread is the difference between the maximum and the minimum scalar acceleration values in a given observation window, where acceleration spread is deemed positive if the observation window minimum occurs before the maximum, and negative otherwise. If the maximum absolute value of acceleration spread is less than a specified threshold (e.g., a noise floor), the any-motion detector 104 determines that the mobile device is stationary. The noise floor threshold is typically on the order of a few hundredths of the acceleration due to gravity (go). In one design, the noise floor threshold was set to 0.016 go-</p><p id="p0024" num="0024">[0018] The step detector 106 detects pedestrial steps associated with a user of the mobile device. Step detection may be achieved in a variety of ways, but typically includes calculating scalar acceleration from triaxial accelerometer data, window averaging the scalar acceleration data, and calculating the acceleration spread. The 
<!-- EPO <DP n="7"/>-->
 acceleration spread may be amplitude filtered and time filtered to identify pedestrial steps. For example, a pedestrial step may be identified from the acceleration spread pattern when a minimum acceleration spread amplitude is maintained over a minimum step duration associated with pedestrial stepping. The minimum acceleration spread amplitude may be on the order of a few tenths of the acceleration due to gravity, and the minimum step duration may be on the order of a several hundredths of a second, for example. In one design, the minimum acceleration spread amplitude was set to 0.130 go, and the minimum step duration was set to 0.070 s. When a pedestrial step is detected, the step detector 106 outputs a time stamp associated with the detected step, and provides the time stamp to the motion state identification processor 102. </p><p id="p0025" num="0025"> [0019] As discussed above, not all pedestrial steps detected by the step detector 106 correspond to actual walking or running steps by the user of the mobile device. The motion state identification processor 102 therefore performs further processing to distinguish low average velocity motion states (e.g., "fidgeting") from the high average velocity motion states typically of interest (e.g., continuous walking or running). Operation of the motion state identification processor 102 is explained in more detail below with reference to FIGS. 2 and 3. </p><p id="p0026" num="0026"> [0020] FIG. 2 illustrates a method of identifying a motion state of a mobile device according to an example embodiment. The motion state identification process of FIG. 2 may be performed periodically in accordance with a given observation period T; and provides the ability to declare one of three distinct motion states: (1) a stationary motion state, (2) a low average velocity motion state, or (3) a high average velocity motion state, for each respective observation period T;. Experimentation by the inventors has revealed that the length of the observation period T; may be tailored to allow the three distinct motion states to be distinguished from one another. For example, while a mobile device such as a cellular telephone carried by a person might be deemed stationary when observed over shorter periods of time, it is unlikely that the person will be able to hold the mobile device in his or her hand steady enough for it to be judged stationary over longer periods of time. Similarly, even though the cellular telephone may sometimes be moved in a manner indistinguishable from individual walking or running steps during fidgeting situations, this behavior is unlikely to occur continuously over longer periods of time. Accordingly, the observation period T; may be configurable (e.g., by a system designer or an invoking application) and may be set to a time scale 
<!-- EPO <DP n="8"/>-->
 associated with human motion. For example, in some designs the observation period T; may be on the order of one or more seconds (e.g., between about two seconds and about ten seconds). In one design, the observation period T<sub>;</sub> was set to five seconds. However, it will be appreciated that the particular length of the observation period T<sub>;</sub> that is selected will be application specific, and may vary from application to application. </p><p id="p0027" num="0027"> [0021] Returning to FIG. 2, the motion state identification processor 102 begins each observation period T; by monitoring an output from the any-motion detector 104 (block 202) to determine if any-motion of the mobile device has occurred (block 204). As discussed above with reference to FIG. 1 , the any-motion detector 104 outputs an indication of whether the mobile device is "stationary" (i.e., whether a threshold level of movement has or has not been detected). If no motion is detected, the motion state identification processor 102 declares a stationary motion state (block 206). Using the any-motion detector 104 to detect any possible motion of the mobile device may provide significant power savings in some designs, such as battery powered mobile devices. For example, if the any-motion detector provides a negative output, the motion state identification processor 102 may safely declare a stationary state and effectively forgo any further motion state identification procedures for that observation period T;, thereby conserving power for the mobile device. </p><p id="p0028" num="0028"> [0022] If possible, motion is detected by the any-motion detector 104, the motion state identification processor 102 begins to monitor the step detector 106 to detect any pedestrial steps associated with a user of the mobile device during the observation period T<sub>;</sub> (block 208). For power conservation reasons, in some designs the step detector 106 may remain dormant until initial motion is detected and it is activated by the motion state identification processor 102. As discussed above, the step detector 106 monitors acceleration signals (e.g., triaxial accelerometer data) from the accelerometer 110 and outputs a time stamp corresponding to each identified pedestrial step. </p><p id="p0029" num="0029"> [0023] Using the output(s) of the step detector 106, the motion state identification processor 102 determines a maximum number of consecutive pedestrial steps N<sub>STEPS</sub>_<sub>MAX</sub> taken during the observation period T; (block 210). An example procedure for determining the maximum number of consecutive pedestrial steps N<sub>STEPS</sub>_<sub>MAX</sub> is explained below with reference to FIG. 3. </p><p id="p0030" num="0030"> [0024] FIG. 3 illustrates the determination of a maximum number of consecutive pedestrial steps N<sub>STEPS</sub>_<sub>MAX</sub> taken during a given observation period T; according to an 
<!-- EPO <DP n="9"/>-->
 example embodiment. As shown, two counters are used, including one for a number of continuous pedestrial steps NSTEPS and one for a maximum number of consecutive pedestrial steps NSTEPS_MAX, and both are initially set to zero (block 302). The motion state identification processor 102 then analyzes the sequence of step time stamps provided by the step detector 106 over the observation period of interest T; by comparing the time intervals between each detected step T_STEP<sub>j</sub> to maximum and minimum step frequency requirements fMAx and f¾nN (block 304). Each T_STEPi may be calculated as the difference between successive step time stamps, with the time stamp of the last step detected during the previous observation period T;_i being used to determine the step interval of the first step T_STEPi of the current observation period T<sub>;</sub>. </p><p id="p0031" num="0031"> [0025] The maximum and minimum step frequency requirements fMAx and f¾nN correspond to time intervals between steps that are indicative of actual, sustained pedestrial motion (e.g., continuous walking or running) as opposed to mere fidgeting. Experimentation by the inventors has revealed that steps associated with actual pedestrial motion occur within a range of characteristic time intervals between successive steps. For example, a person holding a cellular telephone that sits down in a chair may cause an isolated step to be detected, even though actual pedestrial motion of the type at interest has not occurred. This step may be distinguished as fidgeting by the fact that it is uncharacteristically isolated from other steps. Similarly, a person holding a cellular telephone and tapping it against their palm may cause a series of steps to be detected, even though again actual pedestrial motion of the type at interest has not occurred. This series of steps can likewise be distinguished as fidgeting by the fact that the steps occur uncharacteristically close together. Accordingly, the maximum frequency requirement fMAx is imposed to filter out step intervals that appear too short to represent actual pedestrial motion, while the minimum step frequency requirement fiviiN is imposed to filter out step intervals that appear too long to represent actual pedestrial motion. </p><p id="p0032" num="0032"> [0026] If a given step interval T_STEP<sub>j</sub> reported during the observation period T; indicates that successive steps have occurred within the acceptable step frequency requirements fMAx and ΪΜΊΝ, the number of consecutive pedestrial steps NSTEPS is incremented, and the maximum number of consecutive pedestrial steps NSTEPS_MAX is set to either the current value of consecutive pedestrial steps NSTEPS or the current value 
<!-- EPO <DP n="10"/>-->
 of the maximum number of consecutive pedestrial steps NSTEPS_MAX, whichever is greater (block 306). Otherwise, if a given step interval T_STEP<sub>j</sub> reported during the observation period T<sub>;</sub> indicates that the successive steps occurred outside of the acceptable step frequency requirements f<sub>M</sub>Ax and f<sub>M</sub>iN, the number of consecutive pedestrial steps NSTEPS is reset to zero (block 308). In this case, the maximum number of consecutive pedestrial steps NSTEPS_MAX is maintained at its current value. This series of determinations and calculations is repeated for each step interval T_STEP<sub>j</sub> in the current observation period T; (block 310). </p><p id="p0033" num="0033"> [0027] As for the observation period T, the maximum and minimum step frequency requirements fMAx and fMiN may be configurable, and are typically set to a time scale associated with human motion. For example, in some designs the maximum and minimum step frequency requirements fMAx and fMiN may be on the order of a few steps per second (e.g., between about two and three steps per second for fMAx, and between about one and two steps per second for fMiN)- In one design, the minimum step frequency requirement fMiN was set to 1.40 Hz, and the maximum step frequency requirement fMAx was set to 2.80 Hz. However, also as for the observation period T, it will be appreciated that the particular values for fMAx and fMiN that are selected will be application specific, and may vary from application to application. </p><p id="p0034" num="0034"> [0028] Returning to FIG. 2, once the maximum number of consecutive pedestrial steps</p><p id="p0035" num="0035">NSTEPS_MAX taken during the current observation period T; is determined (block 210), the motion state identification processor 102 compares it to a minimum threshold number of continuous steps NMIN (block 212). The minimum threshold number of continuous steps NMIN corresponds to a minimum number of continuous pedestrial steps required for the motion state identification processor 102 to determine that sustained pedestrial motion has occurred. For example, a relatively low number of consecutive pedestrial steps, or none at all, likely indicates that any detected pedestrial steps do not correspond to actual, sustained pedestrial motion. The minimum threshold number of continuous steps NMIN is naturally dependent on the length of the observation period T; selected, as well as characteristics of human walking. In some designs, the minimum threshold number of continuous steps NMIN may be set roughly equivalent to the number of seconds in the observation period (e.g., for an observation period T; of five seconds, the minimum threshold number of continuous steps NMIN may be set to five continuous steps). For relatively short observation periods T, the minimum threshold number of continuous 
<!-- EPO <DP n="11"/>-->
 steps NMIN may be slightly larger. It will be appreciated that the particular minimum threshold number of continuous steps NMIN that is selected will be application specific, and may vary from application to application. </p><p id="p0036" num="0036"> [0029] If the maximum number of consecutive pedestrial steps NSTEPS_MAX taken during the current observation period T; meets or exceeds the threshold NMIN, the motion state identification processor 102 declares a high average velocity motion state for the mobile device for the current observation period T; (block 214). Otherwise, if the maximum number of consecutive pedestrial steps NSTEPS_MAX taken during the current observation period T; is below the threshold NMIN, the motion state identification processor 102 declares a low average velocity motion state for the mobile device for the current observation period T; (block 216). </p><p id="p0037" num="0037"> [0030] The various illustrative logical blocks, modules, and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA) or other programmable logic device, discrete gate or transistor logic, discrete hardware components, or any combination thereof designed to perform the functions described herein. Further, the functionality associated with each illustrative logical blocks, modules, and circuits may be partially or fully subsumed by a different component, shown or not shown, in other embodiments. For example, the any-motion detector 104 and/or step detector 106 functionality may be integrated directly into the motion state identification processor 102, or the motion state identification processor 102 functionality may be performed by a general purpose processor of the mobile device employing the motion state identification device 100. A general purpose processor may be a microprocessor, but in the alternative, the processor may be any conventional processor, controller, microcontroller, or state machine. A processor may also be implemented as a combination of computing devices, e.g., a combination of a DSP and a microprocessor, a plurality of microprocessors, one or more microprocessors in conjunction with a DSP core, or any other such configuration. In addition, for each of the embodiments described herein, the corresponding form of any such embodiments may be described herein as, for example, "logic configured to" perform the described action. 
<!-- EPO <DP n="12"/>-->
 [0031] It will be appreciated that the various logical blocks, modules, circuits, and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware, computer software, or combinations of both. To clearly illustrate this interchangeability of hardware and software, various illustrative components, blocks, modules, circuits, and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application, but such implementation decisions should not be interpreted as causing a departure from the scope of the present invention. In addition, information and signals may be represented using any of a variety of different technologies and techniques. For example, data, instructions, commands, information, signals, bits, symbols, and chips that may be referenced throughout the above description may be represented by voltages, currents, electromagnetic waves, magnetic fields or particles, optical fields or particles, or any combination thereof. </p><p id="p0038" num="0038"> [0032] The methods, sequences and/or algorithms described in connection with the embodiments disclosed herein may be embodied directly in hardware, in a software module executed by a processor, or in a combination of the two. A software module may reside in RAM memory, flash memory, ROM memory, EPROM memory, EEPROM memory, registers, hard disk, a removable disk, a CD-ROM, or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from, and write information to, the storage medium. In the alternative, the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal (e.g., access terminal). In the alternative, the processor and the storage medium may reside as discrete components in a user terminal. </p><p id="p0039" num="0039"> [0033] In one or more exemplary embodiments, the functions described may be implemented in hardware, software, firmware, or any combination thereof. If implemented in software, the functions may be stored on or transmitted over as one or more instructions or code on a computer-readable medium. Computer-readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of 
<!-- EPO <DP n="13"/>-->
 example, and not limitation, such computer-readable media can comprise RAM, ROM, EEPROM, CD-ROM or other optical disk storage, magnetic disk storage or other magnetic storage devices, or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also, any connection is properly termed a computer-readable medium. For example, if the software is transmitted from a website, server, or other remote source using a coaxial cable, fiber optic cable, twisted pair, digital subscriber line (DSL), or wireless technologies such as infrared, radio, and microwave, then the coaxial cable, fiber optic cable, twisted pair, DSL, or wireless technologies such as infrared, radio, and microwave are included in the definition of medium. Disk and disc, as used herein, includes compact disc (CD), laser disc, optical disc, digital versatile disc (DVD), floppy disk and blu-ray disc where disks usually reproduce data magnetically, while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer-readable media. </p><p id="p0040" num="0040"> While the foregoing disclosure shows illustrative embodiments of the invention, it should be noted that various changes and modifications could be made herein without departing from the scope of the invention as defined by the appended claims. The functions, steps and/or actions of the method claims in accordance with the embodiments of the invention described herein need not be performed in any particular order. Furthermore, although elements of the invention may be described or claimed in the singular, the plural is contemplated unless limitation to the singular is explicitly stated. 
</p></description><claims mxw-id="PCLM44726077" ref-ucid="WO-2012116348-A1" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="14"/>-->CLAIMS WHAT IS CLAIMED IS: </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method of identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, comprising: </claim-text><claim-text> detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; </claim-text><claim-text> determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and </claim-text><claim-text> declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein the low average velocity motion state corresponds to fidgeting by the user. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 1, wherein the high average velocity motion state corresponds to continuous walking or running by the user. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 1, wherein detecting any pedestrial steps associated with the user comprises: </claim-text><claim-text> calculating an acceleration spread pattern from the acceleration signals; and identifying any peaks in the acceleration spread pattern that meet or exceed a minimum acceleration spread amplitude over a minimum time duration. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 1, wherein two or more consecutive pedestrial steps satisfy one or more step frequency requirements. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of claim 5, wherein the one or more step frequency requirements comprise a minimum frequency requirement of about 1.40 steps per second and a maximum frequency requirement of about 2.80 steps per second for successive steps to be deemed consecutive. <!-- EPO <DP n="15"/>--> </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method of claim 5, wherein determining the maximum number of consecutive pedestrial steps comprises: </claim-text><claim-text> calculating a time interval between successive pedestrial steps for each pedestrial step detected during the observation period; </claim-text><claim-text> comparing each time interval to the one or more step frequency requirements; and </claim-text><claim-text> identifying a maximum number of successive pedestrial steps detected during the observation period that have a time interval meeting the one or more step frequency requirements. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method of claim 1, wherein the high average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps meets or exceeds a threshold, and the low average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps is below the threshold. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method of claim 8, wherein the threshold equals about one consecutive pedestrial step per second of the observation period. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The method of claim 1, further comprising: </claim-text><claim-text> monitoring stationarity of the mobile device based on an acceleration change over time determined from the acceleration signals; and </claim-text><claim-text> declaring a stationary motion state for the observation period if the acceleration change over time measured on all accelerometer axes is less than one or more predetermined thresholds during the observation period. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method of claim 1, wherein the observation period is at least one second. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method of claim 1, wherein the observation period is between about two seconds and about ten seconds. <!-- EPO <DP n="16"/>--> </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method of claim 1, further comprising repeating the detecting, determining, and declaring over one or more subsequent observation periods. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. An apparatus for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, comprising: </claim-text><claim-text> a step detector configured to detect any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; and a processor configured to determine a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps, and to declare a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The apparatus of claim 14, wherein the low average velocity motion state corresponds to fidgeting by the user. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The apparatus of claim 14, wherein the high average velocity motion state corresponds to continuous walking or running by the user. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The apparatus of claim 14, wherein the step detector is configured to detect any pedestrial steps associated with the user by: </claim-text><claim-text> calculating an acceleration spread pattern from the acceleration signals; and identifying any peaks in the acceleration spread pattern that meet or exceed a minimum acceleration spread amplitude over a minimum time duration. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The apparatus of claim 14, wherein two or more consecutive pedestrial steps satisfy one or more step frequency requirements. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The apparatus of claim 18, wherein the one or more step frequency requirements comprise a minimum frequency requirement of about 1.40 steps per second and a maximum frequency requirement of about 2.80 steps per second for successive steps to be deemed consecutive. <!-- EPO <DP n="17"/>--> </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The apparatus of claim 18, wherein the processor is configured to determine the maximum number of consecutive pedestrial steps by: </claim-text><claim-text> calculating a time interval between successive pedestrial steps for each pedestrial step detected during the observation period; </claim-text><claim-text> comparing each time interval to the one or more step frequency requirements; and </claim-text><claim-text> identifying a maximum number of successive pedestrial steps detected during the observation period that have a time interval meeting the one or more step frequency requirements. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The apparatus of claim 14, wherein the processor is configured to declare the high average velocity motion state for the observation period when the determined maximum number of consecutive pedestrial steps meets or exceeds a threshold, and to declare the low average velocity motion state for the observation period when the determined maximum number of consecutive pedestrial steps is below the threshold. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The apparatus of claim 21, wherein the threshold equals about one consecutive pedestrial step per second of the observation period. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The apparatus of claim 14, further comprising an any-motion detector configured to: </claim-text><claim-text> monitor stationarity of the mobile device based on an acceleration change over time determined from the acceleration signals; and </claim-text><claim-text> declaring a stationary motion state for the observation period if the acceleration change over time measured on all accelerometer axes is less than one or more predetermined thresholds during the observation period. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The apparatus of claim 14, wherein the observation period is at least one second. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. The apparatus of claim 14, wherein the observation period is between about two seconds and about ten seconds. <!-- EPO <DP n="18"/>--> </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The apparatus of claim 14, wherein the step detector and the processor are configured to repeat the detecting, determining, and declaring over one or more subsequent observation periods. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. An apparatus for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, comprising: </claim-text><claim-text> means for detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; </claim-text><claim-text> means for determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and </claim-text><claim-text> means for declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </claim-text></claim><claim id="clm-0028" num="28"><claim-text>28. The apparatus of claim 27, wherein the low average velocity motion state corresponds to fidgeting by the user. </claim-text></claim><claim id="clm-0029" num="29"><claim-text>29. The apparatus of claim 27, wherein the high average velocity motion state corresponds to continuous walking or running by the user. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>30. The apparatus of claim 27, wherein the means for detecting any pedestrial steps associated with the user comprises: </claim-text><claim-text> means for calculating an acceleration spread pattern from the acceleration signals; and </claim-text><claim-text> means for identifying any peaks in the acceleration spread pattern that meet or exceed a minimum acceleration spread amplitude over a minimum time duration. </claim-text></claim><claim id="clm-0031" num="31"><claim-text>31. The apparatus of claim 27, wherein two or more consecutive pedestrial steps satisfy one or more step frequency requirements. </claim-text></claim><claim id="clm-0032" num="32"><claim-text>32. The apparatus of claim 31, wherein the one or more step frequency requirements comprise a minimum frequency requirement of about 1.40 steps per <!-- EPO <DP n="19"/>--> second and a maximum frequency requirement of about 2.80 steps per second for successive steps to be deemed consecutive. </claim-text></claim><claim id="clm-0033" num="33"><claim-text>33. The apparatus of claim 31, wherein the means for determining the maximum number of consecutive pedestrial steps comprises: </claim-text><claim-text> means for calculating a time interval between successive pedestrial steps for each pedestrial step detected during the observation period; </claim-text><claim-text> means for comparing each time interval to the one or more step frequency requirements; and </claim-text><claim-text> means for identifying a maximum number of successive pedestrial steps detected during the observation period that have a time interval meeting the one or more step frequency requirements. </claim-text></claim><claim id="clm-0034" num="34"><claim-text>34. The apparatus of claim 27, wherein the high average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps meets or exceeds a threshold, and the low average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps is below the threshold. </claim-text></claim><claim id="clm-0035" num="35"><claim-text>35. The apparatus of claim 34, wherein the threshold equals about one consecutive pedestrial step per second of the observation period. </claim-text></claim><claim id="clm-0036" num="36"><claim-text>36. The apparatus of claim 27, further comprising: </claim-text><claim-text> means for monitoring stationarity of the mobile device based on an acceleration change over time determined from the acceleration signals; and </claim-text><claim-text> means for declaring a stationary motion state for the observation period if the acceleration change over time measured on all accelerometer axes is less than one or more predetermined thresholds during the observation period. </claim-text></claim><claim id="clm-0037" num="37"><claim-text>37. The apparatus of claim 27, wherein the observation period is at least one second. <!-- EPO <DP n="20"/>--> </claim-text></claim><claim id="clm-0038" num="38"><claim-text>38. The apparatus of claim 27, wherein the observation period is between about two seconds and about ten seconds. </claim-text></claim><claim id="clm-0039" num="39"><claim-text>39. The apparatus of claim 27, further comprising means for repeating the detecting, determining, and declaring over one or more subsequent observation periods. </claim-text></claim><claim id="clm-0040" num="40"><claim-text>40. A computer-readable medium comprising code, which, when executed by a processor, causes the processor to perform operations for identifying a motion state of a mobile device using acceleration signals from one or more accelerometers, the computer-readable medium comprising: </claim-text><claim-text> code for detecting any pedestrial steps associated with a user of the mobile device during an observation period based on the acceleration signals; </claim-text><claim-text> code for determining a maximum number of consecutive pedestrial steps taken during the observation period from the detected pedestrial steps; and </claim-text><claim-text> code for declaring a high average velocity motion state or a low average velocity motion state for the observation period based on the determined maximum number of consecutive pedestrial steps. </claim-text></claim><claim id="clm-0041" num="41"><claim-text>41. The computer-readable medium of claim 40, wherein the low average velocity motion state corresponds to fidgeting by the user. </claim-text></claim><claim id="clm-0042" num="42"><claim-text>42. The computer-readable medium of claim 40, wherein the high average velocity motion state corresponds to continuous walking or running by the user. </claim-text></claim><claim id="clm-0043" num="43"><claim-text>43. The computer-readable medium of claim 40, wherein the code for detecting any pedestrial steps associated with the user comprises: </claim-text><claim-text> code for calculating an acceleration spread pattern from the acceleration signals; and </claim-text><claim-text> code for identifying any peaks in the acceleration spread pattern that meet or exceed a minimum acceleration spread amplitude over a minimum time duration. </claim-text></claim><claim id="clm-0044" num="44"><claim-text>44. The computer-readable medium of claim 40, wherein two or more consecutive pedestrial steps satisfy one or more step frequency requirements. <!-- EPO <DP n="21"/>--> </claim-text></claim><claim id="clm-0045" num="45"><claim-text>45. The computer-readable medium of claim 44, wherein the one or more step frequency requirements comprise a minimum frequency requirement of about 1.40 steps per second and a maximum frequency requirement of about 2.80 steps per second for successive steps to be deemed consecutive. </claim-text></claim><claim id="clm-0046" num="46"><claim-text>46. The computer-readable medium of claim 44, wherein the code for determining the maximum number of consecutive pedestrial steps comprises: </claim-text><claim-text> code for calculating a time interval between successive pedestrial steps for each pedestrial step detected during the observation period; </claim-text><claim-text> code for comparing each time interval to the one or more step frequency requirements; and </claim-text><claim-text> code for identifying a maximum number of successive pedestrial steps detected during the observation period that have a time interval meeting the one or more step frequency requirements. </claim-text></claim><claim id="clm-0047" num="47"><claim-text>47. The computer-readable medium of claim 40, wherein the high average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps meets or exceeds a threshold, and the low average velocity motion state is declared for the observation period when the determined maximum number of consecutive pedestrial steps is below the threshold. </claim-text></claim><claim id="clm-0048" num="48"><claim-text>48. The computer-readable medium of claim 47, wherein the threshold equals about one consecutive pedestrial step per second of the observation period. </claim-text></claim><claim id="clm-0049" num="49"><claim-text>49. The computer-readable medium of claim 40, further comprising: </claim-text><claim-text> code for monitoring stationarity of the mobile device based on an acceleration change over time determined from the acceleration signals; and </claim-text><claim-text> code for declaring a stationary motion state for the observation period if the acceleration change over time measured on all accelerometer axes is less than one or more predetermined thresholds during the observation period. <!-- EPO <DP n="22"/>--> </claim-text></claim><claim id="clm-0050" num="50"><claim-text>50. The computer-readable medium of claim 40, wherein the observation period is at least one second. </claim-text></claim><claim id="clm-0051" num="51"><claim-text>51. The computer-readable medium of claim 40, wherein the observation period is between about two seconds and about ten seconds. </claim-text></claim><claim id="clm-0052" num="52"><claim-text>52. The computer-readable medium of claim 40, further comprising code for repeating the detecting, determining, and declaring over one or more subsequent observation periods. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
