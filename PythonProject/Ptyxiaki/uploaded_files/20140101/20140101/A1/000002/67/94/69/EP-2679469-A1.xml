<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679469-A1" country="EP" doc-number="2679469" kind="A1" date="20140101" family-id="46506011" file-reference-id="299981" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550083" ucid="EP-2679469-A1"><document-id><country>EP</country><doc-number>2679469</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11859560-A" is-representative="YES"><document-id mxw-id="PAPP154824006" load-source="docdb" format="epo"><country>EP</country><doc-number>11859560</doc-number><kind>A</kind><date>20110221</date><lang>JA</lang></document-id><document-id mxw-id="PAPP172244688" load-source="docdb" format="original"><country>EP</country><doc-number>11859560.2</doc-number><date>20110221</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140446242" ucid="JP-2011053731-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011053731</doc-number><kind>W</kind><date>20110221</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2117097665" load-source="docdb">B62D 117/00        20060101ALN20150107BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2117097988" load-source="docdb">B62D   6/00        20060101AFI20150107BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2117098125" load-source="docdb">B62D 119/00        20060101ALN20150107BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2117098617" load-source="docdb">B62D 101/00        20060101ALN20150107BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2117103897" load-source="docdb">B62D   5/04        20060101ALI20150107BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2019237923" load-source="docdb" scheme="CPC">Y10T  74/19575     20130101 LA20151001BCEP        </classification-cpc><classification-cpc mxw-id="PCL-2062991854" load-source="docdb" scheme="CPC">B62D   5/049       20130101 LI20150501BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2062991933" load-source="docdb" scheme="CPC">B62D   5/0484      20130101 LI20150501BHEP        </classification-cpc><classification-cpc mxw-id="PCL2122921505" load-source="docdb" scheme="CPC">H02P  23/0072      20130101 FI20141003BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132182733" lang="DE" load-source="patent-office">ELEKTRISCHE SERVOLENKVORRICHTUNG</invention-title><invention-title mxw-id="PT132182734" lang="EN" load-source="patent-office">ELECTRIC POWER STEERING DEVICE</invention-title><invention-title mxw-id="PT132182735" lang="FR" load-source="patent-office">DISPOSITIF DE DIRECTION ASSISTÉE ÉLECTRIQUE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918162920" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOYOTA MOTOR CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918151007" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR918986533" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name><iid>101357811</iid><address><street>1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918158718" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>AOKI KENICHIRO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918150028" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>AOKI KENICHIRO</last-name></addressbook></inventor><inventor mxw-id="PPAR918991675" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>AOKI KENICHIRO</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1 Toyota-cho</street><city>Toyota-shi Aichi 471-8571</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918993678" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Winter, Brandl, Fürniss, Hübner, Röss, Kaiser, Polte - Partnerschaft</last-name><iid>100059963</iid><address><street>Alois-Steinecker-Strasse 22</street><city>85354 Freising</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2011053731-W"><document-id><country>JP</country><doc-number>2011053731</doc-number><kind>W</kind><date>20110221</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012114442-A1"><document-id><country>WO</country><doc-number>2012114442</doc-number><kind>A1</kind><date>20120830</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548853467" load-source="docdb">AL</country><country mxw-id="DS548822517" load-source="docdb">AT</country><country mxw-id="DS548853468" load-source="docdb">BE</country><country mxw-id="DS548809501" load-source="docdb">BG</country><country mxw-id="DS548890173" load-source="docdb">CH</country><country mxw-id="DS548896382" load-source="docdb">CY</country><country mxw-id="DS548822518" load-source="docdb">CZ</country><country mxw-id="DS548853469" load-source="docdb">DE</country><country mxw-id="DS548896383" load-source="docdb">DK</country><country mxw-id="DS548896384" load-source="docdb">EE</country><country mxw-id="DS548899259" load-source="docdb">ES</country><country mxw-id="DS548809502" load-source="docdb">FI</country><country mxw-id="DS548890174" load-source="docdb">FR</country><country mxw-id="DS548853470" load-source="docdb">GB</country><country mxw-id="DS548896385" load-source="docdb">GR</country><country mxw-id="DS548853471" load-source="docdb">HR</country><country mxw-id="DS548822519" load-source="docdb">HU</country><country mxw-id="DS548899260" load-source="docdb">IE</country><country mxw-id="DS548896394" load-source="docdb">IS</country><country mxw-id="DS548890175" load-source="docdb">IT</country><country mxw-id="DS548896395" load-source="docdb">LI</country><country mxw-id="DS548809503" load-source="docdb">LT</country><country mxw-id="DS548901307" load-source="docdb">LU</country><country mxw-id="DS548809504" load-source="docdb">LV</country><country mxw-id="DS548809505" load-source="docdb">MC</country><country mxw-id="DS548901308" load-source="docdb">MK</country><country mxw-id="DS548901309" load-source="docdb">MT</country><country mxw-id="DS548899261" load-source="docdb">NL</country><country mxw-id="DS548906276" load-source="docdb">NO</country><country mxw-id="DS548899262" load-source="docdb">PL</country><country mxw-id="DS548809506" load-source="docdb">PT</country><country mxw-id="DS548822520" load-source="docdb">RO</country><country mxw-id="DS548809507" load-source="docdb">RS</country><country mxw-id="DS548899263" load-source="docdb">SE</country><country mxw-id="DS548890176" load-source="docdb">SI</country><country mxw-id="DS548906277" load-source="docdb">SK</country><country mxw-id="DS548906278" load-source="docdb">SM</country><country mxw-id="DS548901314" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670750" lang="EN" load-source="patent-office"><p id="pa01" num="0001">When a current sensor fails, instead of a normal-time motor control section, an abnormal-time motor control section drives and controls a motor. The abnormal-time motor control section detects a timing at which motor current I becomes zero in a state in which all the switching devices are turned off (S11 to S13). Every time the motor current I becomes zero, the abnormal-time motor control section sets an ON time T0 corresponding to steering torque |tr| (S14 to S15), and turns on the switching devices corresponding to the direction of the steering torque for the ON time T0 (S17 to S20). With this operation, an average current lavg corresponding to the steering torque |tr| flows through the motor 20, whereby deterioration of the followability of steering assist is suppressed.<img id="iaf01" file="imgaf001.tif" wi="78" he="110" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128500123" lang="EN" source="EPO" load-source="docdb"><p>When a current sensor fails, instead of a normal-time motor control section, an abnormal-time motor control section drives and controls a motor. The abnormal-time motor control section detects a timing at which motor current I becomes zero in a state in which all the switching devices are turned off (S11 to S13). Every time the motor current I becomes zero, the abnormal-time motor control section sets an ON time T0 corresponding to steering torque |tr| (S14 to S15), and turns on the switching devices corresponding to the direction of the steering torque for the ON time T0 (S17 to S20). With this operation, an average current lavg corresponding to the steering torque |tr| flows through the motor 20, whereby deterioration of the followability of steering assist is suppressed.</p></abstract><description mxw-id="PDES63956180" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">TECHNICAL FIELD</heading><p id="p0001" num="0001">The present invention relates to an electric power steering apparatus which drives a motor in accordance with steering operation performed by a driver, to thereby generate steering assist torque.</p><heading id="h0002">BACKGROUND ART</heading><p id="p0002" num="0002">Conventionally, an electric power steering apparatus detects the steering torque applied to a steering wheel by a driver, and computes a target steering assist torque corresponding to the detected steering torque, and controls the supply of electricity to a motor so as to obtain the computed target steering assist torque. In general, the electric power steering apparatus calculates a target current which is proportional to the target steering assist torque, detects the current actually flowing through the motor by use of a current sensor, and applies to the motor a voltage corresponding to the difference between the target current and the current actually flowing through the motor. That is, the electric power steering apparatus drives and controls the motor while performing feedback control.</p><p id="p0003" num="0003">In the case where the current sensor has suffered a failure, feedback control cannot be performed. Patent Document 1 proposed the<!-- EPO <DP n="2"> --> electric power steering apparatus which assists steering even in such a case where the current sensor has suffered a failure. The electric power steering apparatus proposed in Patent Document 1 changes its control mode from feedback control to open loop control when a current sensor failure is detected. That is, the electric power steering apparatus controls switching devices of a motor driver circuit at a duty ratio set such that a voltage whose magnitude is proportional to the steering torque is applied to the motor.</p><heading id="h0003">PRIOR ART DOCUMENT</heading><heading id="h0004">PATENT DOCUMENT</heading><p id="p0004" num="0004">Patent Document 1: Japanese Patent Application Laid-Open (<i>kokai</i>) No. <patcit id="pcit0001" dnum="JP2005088877A"><text>2005-88877</text></patcit></p><p id="p0005" num="0005">However, in the case where the motor is driven by the above-described open loop control, the followability of the steering assist to the steering operation becomes extremely low, as compared with the case where feedback control is performed. Namely, the steering assist which can be provided when the steering operation is performed at high speed drops considerably. This is because voltage drop generated in the motor due to counter electromotive voltage is not used as a motor control quantity for performing the open loop control. When the motor rotates, the motor coil generates a counter electromotive voltage. Therefore, even in the case where the target application voltage of the motor is 5 V, for example, if the counter electromotive voltage is 3 V, only a current corresponding to 2 V,<!-- EPO <DP n="3"> --> which is the difference between the target application voltage and the counter electromotive voltage, flows through the motor. In the case where the counter electromotive voltage exceeds the application voltage as a result of a further increase in the rotational speed of the motor, energy returns to the motor drive circuit (the power supply side) due to the difference between the counter electromotive voltage and the application voltage. In such a case, the steering assist becomes impossible or the steering operation is braked. Therefore, in the case where the current sensor fails, a greater force is required to rotate the steering wheel for performing the steering operation.</p><p id="p0006" num="0006">The present invention has been accomplished in order to solve the above-described problem, and its object is to suppress deterioration of the followability of steering assist to thereby continue adequate steering assist even in the case where a current sensor fails.</p><p id="p0007" num="0007">In order to achieve the above-described object, the present invention provides an electric power steering apparatus comprising steering torque detection means (21) for detecting steering torque input from a steering wheel to a steering shaft; a motor (20) provided in a steering mechanism and generating steering assist torque; a motor drive circuit (40) composed of an H bridge circuit including switching devices (Q1H, Q2L) for normal rotation which are turned on so as to drive the motor in a normal rotation direction and switching devices (Q2H, Q1 L) for reverse rotation which are turned on so as to drive the motor in a reverse rotation direction; motor current detection means (31) for detecting motor current flowing through the<!-- EPO <DP n="4"> --> motor; anomaly detection means (91) for detecting an anomaly of the motor current detection means; normal-time motor control means (70), operable when the anomaly of the motor current detection means is not detected, for controlling the motor drive circuit by current feedback control based on a target current set in accordance with the steering torque detected by the steering torque detection means and the motor current detected by the motor current detection means; and abnormal-time motor control means (80), operable when the anomaly of the motor current detection means is detected, for controlling the motor drive circuit on the basis of the steering torque, detected by the steering torque detection means, without use of the current feedback control. The electric power steering apparatus is characterized in that the abnormal-time motor control means includes an off-state-voltage detection section (S11, S12, S52, S53) which detects voltage between terminals of the motor in a state in which the motor drive circuit is controlled so as not to apply a power supply voltage between the terminals of the motor; a current-zero timing detection section (S13, S36, S40) which detects a timing at which the current flowing through the motor becomes zero on the basis of the voltage between the terminals of the motor detected by the off-state-voltage detection section; an energization time setting section (S15, S32) which sets an energization time corresponding to the steering torque detected by the steering torque detection means; and a switching control section (S18, S19, S20, S33, S34, S37, S38) which turns on the switching devices for normal rotation or the switching devices for reverse rotation for the energization time, set by the energization time setting section, every time the current-zero timing detection section detects the timing at which the current flowing through the<!-- EPO <DP n="5"> --> motor becomes zero.</p><p id="p0008" num="0008">In the present invention, current flows from the motor drive circuit to the motor, whereby the motor generates steering assist torque. The motor drive circuit is formed by an H bridge circuit including switching devices for normal rotation and switching devices for reverse rotation. Accordingly, the motor is a brushed motor. For example, the switching devices for normal rotation include a switching device which connects one electricity supply terminal of the motor to a power supply, and a switching device which connects the other electricity supply terminal of the motor to a ground; and the switching devices for reverse rotation include a switching device which connects the other electricity supply terminal of the motor to the power supply, and a switching device which connects the one electricity supply terminal of the motor to the ground. In the motor drive circuit, the switching devices for normal rotation are turned on when the motor is caused to rotate in the normal direction, and the switching devices for reverse rotation are turned on when the motor is caused to rotate in the reverse direction. The current flowing through the motor is adjusted by adjusting the times over which the switching devices are turned on, whereby the steering assist torque is adjusted.</p><p id="p0009" num="0009">The normal-time motor control means controls the motor drive circuit by current feedback control based on the target current set in accordance with the steering torque detected by the steering torque detection means and the motor current detected by the motor current detection means, to thereby generate adequate steering assist torque. In the case where the<!-- EPO <DP n="6"> --> motor current detection means fails, such current feedback control cannot be performed. In order to overcome such a drawback, the present invention includes anomaly detection means and abnormal-time motor control means.</p><p id="p0010" num="0010">The anomaly detection means detects an anomaly of the motor current detection means. Namely, the anomaly detection means determines whether or not the motor current detection means is anomalous. When the anomaly of the motor current detection means is detected, instead of the normal-time motor control means, the abnormal-time motor control means controls the motor drive circuit. In order to prevent the followability of steering assist to steering operation from deteriorating, the abnormal-time motor control means includes an off-state-voltage detection section, a current-zero timing detection section, an energization time setting section, and a switching control section.</p><p id="p0011" num="0011">The off-state-voltage detection section detects the voltage generated between the terminals of the motor in a state in which the motor drive circuit is controlled such that no power supply voltage is applied between the terminals of the motor. For example, the off-state-voltage detection section detects the voltage generated between the terminals of the motor in a state in which the switching devices for normal rotation and the switching devices for reverse rotation are turned off. In the motor drive circuit, a reverse conducting diode (a diode through which current flows only in a direction opposite a direction in which current flows upon application of a voltage by a power supply apparatus) is provided in parallel with each switching device.<!-- EPO <DP n="7"> --> Therefore, even when each switching device is turned off, current is likely to flow through the reverse conducting diode for a short period of time. In view of this, the current-zero timing detection section detects a timing at which the current flowing through the motor becomes zero on the basis of the voltage between the terminals of the motor detected by the off-state-voltage detection section. Namely, the current-zero timing detection section obtains a timing at which the current flowing through the motor is determined to be zero.</p><p id="p0012" num="0012">The energization time setting section sets an energization time corresponding to the steering torque detected by the steering torque detection means. The switching control section turns on the switching devices for normal rotation or the switching devices for reverse rotation for the energization time, set by the energization time setting section, every time the current-zero timing detection section detects the timing at which the current flowing through the motor becomes zero; i.e., every time the current flowing through the motor is detected to be zero.</p><p id="p0013" num="0013">Accordingly, in the present invention, the switching devices for normal rotation or the switching devices for reverse rotation are turned on for the set energization time every time the current flowing through the motor becomes zero. Therefore, the current flowing through the motor has a triangular waveform. Accordingly, the average of the current flowing through the motor can be controlled by the energization time. This energization time is set in accordance with the steering torque. As a result, the average current flowing through the motor can be controlled in<!-- EPO <DP n="8"> --> accordance with the steering torque. Also, in the case where the average current is controlled in such a manner, even when the rotational speed of the motor increases, the average current decreases only slightly. Therefore, the followability of the steering assist is prevented from deteriorating, and adequate steering assist can be continued.</p><p id="p0014" num="0014">Another feature of the present invention resides in that the current-zero timing detection section detects, as the timing at which the current flowing through the motor becomes zero, at least one of a timing at which the voltage between the terminals of the motor is detected to assume a value between a positive-direction determination voltage level at which the flow direction of the current flowing through the motor can be determined as a positive direction and a negative-direction determination voltage level at which the flow direction of the current flowing through the motor can be determined as a negative direction, and a timing at which the voltage between the terminals of the motor is detected to have changed from the positive-direction determination voltage level to the negative-direction determination voltage level or have changed from the negative-direction determination voltage level to the positive-direction determination voltage level (S12 to 13, S50, S36, S40).</p><p id="p0015" num="0015">When the switching devices for normal rotation and the switching devices for reverse rotation are brought into the OFF state, the voltage between the terminals of the motor changes greatly depending on the rotational direction of the motor. If the voltage between the terminals of the motor has reached the positive-direction determination voltage level, it can<!-- EPO <DP n="9"> --> be determined that current flows through the motor in the positive direction. If the voltage between the terminals of the motor has reached the negative-direction determination voltage level, it can be determined that current flows through the motor in the negative direction. The terms "positive direction" and "negative direction" are used so as to distinguish from each other the two flow directions of the current flowing through the motor, and any one of the two flow directions may be defined as the positive direction.</p><p id="p0016" num="0016">By making use of this, the current-zero timing detection section detects, as the timing at which the current flowing through the motor becomes zero, at least one of a timing at which the voltage between the terminals of the motor is detected to assume a value between the positive-direction determination voltage level and the negative-direction determination voltage level and a timing at which the voltage between the terminals of the motor is detected to have changed from the positive-direction determination voltage level to the negative-direction determination voltage level or to have changed from the negative-direction determination voltage level to the positive-direction determination voltage level. Accordingly, the timing at which the motor current becomes zero can be detected easily.</p><p id="p0017" num="0017">Notably, the positive-direction determination voltage level and the negative-direction determination voltage level can be calculated, for example, from the power supply voltage applied to the motor drive circuit and the voltage drops at the reverse conducting diodes provided in parallel<!-- EPO <DP n="10"> --> to the switching devices.</p><p id="p0018" num="0018">Another feature of the present invention resides in that the switching control section selectively turns on the switching devices for normal rotation or the switching devices for reverse rotation in accordance with a rotational direction corresponding to the direction of the steering torque, for the energization time set by the energization time setting section (S17 to S20).</p><p id="p0019" num="0019">In the present invention, every time the timing at which the current flowing through the motor becomes zero is detected, the switching devices for normal rotation or the switching devices for reverse rotation selected in accordance with the rotational direction corresponding to the direction of the steering torque are turned on for the set energization time. For example, in the case where the steering torque is a torque acting in a leftward steering direction, every time the timing at which the current flowing through the motor becomes zero is detected, the switching devices (the switching devices for normal rotation or the switching devices for reverse rotation) which rotate the motor in the leftward steering direction are turned on for the set energization time corresponding to the magnitude of the steering torque. Accordingly, the average current flowing through the motor can be controlled in accordance with the magnitude of the steering torque by controlling the energization time of the switching devices corresponding to the direction of the steering torque.</p><p id="p0020" num="0020">Another feature of the present invention resides in that the energization time setting section individually sets the energization time of<!-- EPO <DP n="11"> --> the switching devices for normal rotation and the energization time of the switching devices for reverse rotation in accordance with the steering torque detected by the steering torque detection means (S31 to S32), and, every time the timing at which the current flowing through the motor becomes zero is detected, the switching control section alternately turns on the switching devices for normal rotation and the switching devices for reverse rotation for the respective energization times set individually (S33 to S40).</p><p id="p0021" num="0021">In the case where a very small current is caused to flow through the motor (in the case where the steering torque is very small), the energization time becomes very short. If the period of vibration generated in the steering system becomes short due to the shortened energization time, there may arise a problem in that other components of the vehicle resonate with this vibration. In order to solve such a problem, in the present invention, the energization time setting section individually sets the energization time of the switching devices for normal rotation and the energization time of the switching devices for reverse rotation in accordance with the steering torque. For example, when the direction of the steering torque corresponds to the normal rational direction of the motor, the energization time of the switching devices for normal rotation is set to be longer than the energization time of the switching devices for reverse rotation, and when the direction of the steering torque corresponds to the reverse rational direction of the motor, the energization time of the switching devices for reverse rotation is set to be longer than the energization time of the switching devices for normal rotation.</p><p id="p0022" num="0022"><!-- EPO <DP n="12"> --> Every time the timing at which the current flowing through the motor becomes zero is detected, the switching control section alternately turns on the switching devices for normal rotation and the switching devices for reverse rotation for the respective energization times set individually. Accordingly, current flows through the motor in the positive direction and the negative direction alternately. Thus, the average current can be controlled by adjusting the ratio between the energization time of the switching devices for normal rotation and the energization time of the switching devices for reverse rotation. Accordingly, even in the case where the steering torque is small, the period of the motor current having a triangular waveform can be increased. As a result, the period of vibration generated in the steering system can be set to be longer. Thus, the above-described problem of other components of the vehicle resonating with the vibration of the steering system can be solved.</p><p id="p0023" num="0023">Another feature of the present invention resides in that the electric power steering apparatus further comprises a rotational speed estimation section (S21) which operates, when the current-zero timing detection section detects the timing at which the current flowing through the motor becomes zero, so as to estimate the rotational speed of the motor on the basis of the voltage between the terminals of the motor detected by the off-state-voltage detection section before the switching devices for normal rotation or the switching devices for reverse rotation are turned on; and an energization time correction section (S22, S23) which corrects the energization time on the basis of the rotational speed of the motor estimated by the rotational speed estimation section such that in the case where the<!-- EPO <DP n="13"> --> rotational speed is high, the energization time becomes longer as compared with the case where the rotational speed is low.</p><p id="p0024" num="0024">The above-described inventions can improve the followability of the steering assist to the steering operation; however since the required steering torque increases as the motor rotational speed increases, a driver may sense a sharp increase in steering torque during the steering operation. In order to overcome such a drawback, in the present invention, the rotational speed estimation section operates, upon detection of the timing at which the current flowing through the motor becomes zero, in order to estimate the rotational speed of the motor on the basis of the voltage between the terminals of the motor before the switching devices for normal rotation or the switching devices for reverse rotation are turned on. The voltage between the terminals of the motor at the time when no current flows through the motor is equal to the counter electromotive voltage. Accordingly, the rotational speed of the motor can be estimated by dividing the voltage between the terminals of the motor by a counter electromotive voltage constant.</p><p id="p0025" num="0025">The energization time correction section corrects the energization time such that in the case where the estimated rotational speed of the motor is high, the energization time becomes longer as compared with the case where the estimated rotational speed is low. As a result, according to the present invention, the sharp increase in steering torque that a driver senses during the steering operation can be reduced even when the rotational speed of the motor is high.<!-- EPO <DP n="14"> --></p><p id="p0026" num="0026">Another feature of the present invention resides in that an upper limit is set for the energization time, and the electric power steering apparatus further comprises a steering position detection section (S61) which detects steering position, and an upper limit change section (S62) which changes the upper limit of the energization time such that in the case where the steering position detected by the steering position detection section is close to a stroke end which mechanically defines an end of a steerable range, the upper limit decreases as compared with the case where the detected steering position is located away from the stroke end.</p><p id="p0027" num="0027">When the steering wheel is rotated quickly and the steering position reaches the stroke end, due to butting against a stopper (hereinafter referred to as "stopper butting"), the rotation of the motor stops suddenly. Therefore, the counter electromotive force of the motor disappears suddenly. As a result, the current flowing through the motor increases sharply, and a current surge may be generated. In order solve such a drawback, in the present invention, the steering position detection section detects the steering position, and when the steering position is close to the stroke end, the upper limit change section lowers the upper limit of the energization time. By virtue of this operation, the average current flowing through the motor is reduced before the stopper butting occurs. Therefore, even when the stopper butting occurs, the current surge can be suppressed. Also, in a situation where such stopper butting does not occur, the current limit of the motor is relaxed. As a result, the present invention can provide circuit protection and a sufficient degree of operation assist at the same time.<!-- EPO <DP n="15"> --> Notably, the method of detecting the steering position is not limited to direct detection of steering angle, and the steering position may be estimated from other parameters representing the state of the vehicle.</p><p id="p0028" num="0028">Notably, in the above description, in order to facilitate understanding of the invention, symbols which are used in an embodiment and which are parenthesized are added to the constitution of the invention corresponding to the embodiment. However, the constituent elements of the invention are not limited to those in the embodiment denoted by the symbols.</p><heading id="h0005">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0029" num="0029"><ul><li><figref idrefs="f0001">FIG. 1</figref> is a schematic diagram of an electric power steering apparatus according to an embodiment of the present invention.</li><li><figref idrefs="f0002">FIG. 2</figref> is a functional block diagram of an assist ECU.</li><li><figref idrefs="f0003">FIG. 3</figref> is a flowchart showing a normal-time motor control routine.</li><li><figref idrefs="f0004">FIG. 4</figref> is a graph showing an assist map.</li><li><figref idrefs="f0005">FIG. 5</figref> is a flowchart showing an abnormal-time motor control routine.</li><li><figref idrefs="f0006">FIG. 6</figref> is a graph showing an on-time setting map.</li><li><figref idrefs="f0006">FIG. 7</figref> is a graph showing another on-time setting map.</li><li><figref idrefs="f0007">FIG. 8</figref> is a graph showing changes in a switch command signal, motor voltage Vm, and motor current I.</li><li><figref idrefs="f0008">FIG. 9</figref> is a graph showing the relation between motor rotational speed ω and actual current I in the case of open loop control of a conventional apparatus.<!-- EPO <DP n="16"> --></li><li><figref idrefs="f0008">FIG. 10</figref> is a graph showing the relation between motor rotational speed ω and average current lavg in the present embodiment.</li><li><figref idrefs="f0009">FIG. 11</figref> is a flowchart showing an abnormal-time motor control routine according to a first modification.</li><li><figref idrefs="f0010">FIG. 12</figref> is a graph showing an on-time setting map according to the first modification.</li><li><figref idrefs="f0011">FIG. 13</figref> is a flowchart showing current direction determination processing (subroutine) according to the first modification.</li><li><figref idrefs="f0012">FIG. 14</figref> is a graph showing changes in a switch command signal, motor voltage Vm, and motor current I in the first modification.</li><li><figref idrefs="f0013">FIG. 15</figref> is an enlarged view of a portion of <figref idrefs="f0012">FIG. 14</figref>.</li><li><figref idrefs="f0014">FIG. 16</figref> is a flowchart showing a modified portion of the abnormal-time motor control routine according to a second modification.</li><li><figref idrefs="f0015">FIG. 17</figref> is a graph showing a correction coefficient setting map according to the second modification.</li><li><figref idrefs="f0016">FIG. 18</figref> is a graph showing changes in a switch command signal and time count value in a third modification.</li><li><figref idrefs="f0017">FIG. 19</figref> is a graph showing an on-time setting map according to a fourth modification.</li><li><figref idrefs="f0018">FIG. 20</figref> is a flowchart showing a modified portion of the abnormal-time motor control routine according to a fifth modification.</li><li><figref idrefs="f0019">FIG. 21</figref> is an illustration showing parameters used for estimative calculation of a steering angle according to the fifth modification.</li><li><figref idrefs="f0020">FIG. 22</figref> is a graph showing an on-time upper limit map according to the fifth modification.</li></ul><!-- EPO <DP n="17"> --></p><heading id="h0006">BEST MODE FOR CARRYING OUT THE INVENTION</heading><p id="p0030" num="0030">Hereinafter, an electric power steering apparatus according to an embodiment of the present invention will be described with reference to the drawings. <figref idrefs="f0001">FIG. 1</figref> schematically shows the configuration of an electric power steering apparatus 1 for a vehicle according to the embodiment.</p><p id="p0031" num="0031">The electric power steering apparatus 1 includes, as main components, a steering mechanism 10 which steers steerable wheels in accordance with steering operation of a steering wheel 11; a motor 20 which is mounted in the steering mechanism 10 so as to generate steering assist torque; and an electronic control unit 100 which controls operation of the motor 20 in accordance with the operating state of the steering wheel 11. Hereinafter, the electronic control unit 100 will be referred to as an assist ECU 100.</p><p id="p0032" num="0032">The steering mechanism 10, which steers left and right front wheels FW1 and FW2 in accordance with rotational operation of the steering wheel 11, includes a steering shaft 12 whose upper end is connected to the steering wheel 11 for integral rotation therewith. A pinion gear 13 is connected to the lower end of the steering shaft 12 for integral rotation therewith. The pinion gear 13 is in meshing engagement with a gear section 14a formed on a rack bar 14, thereby constituting a rack-and-pinion mechanism in cooperation with the rack bar 14.</p><p id="p0033" num="0033">The gear section 14a of the rack bar 14 is accommodated in a rack<!-- EPO <DP n="18"> --> housing 16, and the left and right ends of the rack bar 14 projecting from the rack housing 16 are connected to corresponding tie rods 17. Stoppers 18 determining stroke ends are formed at connection portions between the rack bar 14 and the tie rods 17. The stoppers 18 abut against the corresponding ends of the rack housing 16, thereby mechanically restricting the stroke of horizontal motion of the rack bar 14. The other ends of the left and right tie rods 17 are connected to knuckles 19 provided in the left and right front wheels FW1 and FW2. By virtue of the above-described configuration, the left and right front wheels FW1 and FW2 are steered leftward or rightward in accordance with an axial displacement of the rack bar 14, which results from rotation of the steering shaft 12 about its axis.</p><p id="p0034" num="0034">The motor 20 is assembled to the steering shaft 12 via a reduction gear 25. The motor 20 rotates so as to turn the steering shaft 12 around its axis via the reduction gear 25, to thereby apply assist force to the rotational operation of the steering wheel 11. This motor 20 is a brushed DC motor.</p><p id="p0035" num="0035">A steering torque sensor 21 is assembled to the steering shaft 12 such that it is disposed at an intermediate position between the steering wheel 11 and the reduction gear 25. The steering torque sensor 21 detects the torsion angle of a torsion bar (not shown) inserted, for example, in the intermediate section of the steering shaft 12 through use of a resolver, etc., and detects the steering torque tr applied to the steering shaft 12 from the detected torsion angle. The steering torque tr represents the direction in which the steering wheel 11 is rotated by its polarity (positive or negative).<!-- EPO <DP n="19"> --> For example, the steering torque tr assumes a positive value when the steering wheel 11 is rotated to the left, and assumes a negative value when the steering wheel 11 is rotated to the right. Notably, in the present embodiment, the torsion angle of the torsion bar is detected by the resolver; however, it may be detected by another rotational angle sensor such as an encoder.</p><p id="p0036" num="0036">Next, the assist ECU 100 will be described with reference to <figref idrefs="f0002">FIG. 2</figref>. The assist ECU 100 includes an electric control circuit 50 which computes a target control quantity of the motor 20 and which outputs a switch drive signal corresponding to the computed target control quantity; and a motor drive circuit 40 which supplies electricity to the motor 20 in accordance with the switch drive signal received from the electric control circuit 50.</p><p id="p0037" num="0037">The electronic control circuit 50 includes a microcomputer 60 including a computation circuits (composed of a CPU, a ROM, a RAM, etc.) and an input/output interface; and a switch drive circuit 30 which amplifies the switch control signal received from the microcomputer 60 and which supplies the amplified switch control signal to the motor drive circuit 40.</p><p id="p0038" num="0038">The assist ECU 100 receives electricity from a power supply apparatus 200. This power supply apparatus 200 includes an unillustrated battery and an unillustrated alternator which generates electricity when an engine operates. The rated output voltage of the power supply apparatus 200 is set to, for example, 12 V. Notably, <figref idrefs="f0002">FIG. 2</figref> shows only a power line 210 which supplies electricity from the power supply apparatus 200 to the<!-- EPO <DP n="20"> --> motor drive circuit 40; however, electricity for operating the electric control circuit 50 is also supplied from the power supply apparatus 200.</p><p id="p0039" num="0039">The motor drive circuit 40 is provided between the power line 210 and a ground line 220, and is composed of an H-bridge circuit in which an upper arm circuit 45H (formed of a switching device Q1H and a switching device Q2H which are connected in parallel) and a lower arm circuit 45L (formed of a switching device Q1L and a switching device Q2L which are connected in parallel) are connected in series, and electricity supply lines 47a and 47b for supplying electricity to the motor 20 extend from connection portions A1 and A2 between the upper arm circuit 45H and the lower arm circuit 45L. Accordingly, one electricity supply terminal 20a of the motor 20 is connected to the power line 210 via the switching device Q1H, and is connected to the ground line 220 via the switching device Q1 L. The other electricity supply terminal 20b of the motor 20 is connected to the power line 210 via the switching device Q2H, and is connected to the ground line 220 via the switching device Q2L.</p><p id="p0040" num="0040">MOS-FETs (Metal Oxide Semiconductor Field Effect Transistors) are used as the switching devices Q1 H, Q2H, Q1 L, and Q2L provided in the motor drive circuit 40. The switching devices Q1H, Q2H, Q1 L, and Q2L are provided in the upper and lower arm circuits 45H and 45L such that a power supply voltage is applied between the source and drain of each switching device. In addition, the gate of each switching device is connected the switch drive circuit 30 of the electric control circuit 50.</p><p id="p0041" num="0041"><!-- EPO <DP n="21"> --> Notably, as indicated by circuit symbols in <figref idrefs="f0002">FIG. 2</figref>, each MOS-FET has a diode parasitically formed due to its structure. This diode is referred to as a parasitic diode. The parasitic diode of each of the switching devices Q1 H, Q2H, Q1 L, and Q2L is a reverse-conducting diode which blocks the current flow from the power line 210 toward the ground line 220, and permits only the current flow from the ground line 220 toward the power line 210. The motor drive circuit 40 may employ a configuration in which reverse-conducting diodes (diodes whose current block direction is the same as that of parasitic diodes, and conduct only in the reverse direction opposite the direction in which the power supply voltage is applied), which are different from parasitic diodes, are connected to the switching devices Q1H, Q2L, Q2H, Q1 L in parallel.</p><p id="p0042" num="0042">The microcomputer 60 outputs, via the switch drive circuit 30, independent drive signals to the gates of the switching devices Q1 H, Q2H, Q1 L, and Q2L of the motor drive circuit 40. These drive signals turn the switching devices Q1 H, Q2H, Q1 L, and Q2L ON and OFF.</p><p id="p0043" num="0043">In the motor drive circuit 40, when the switching devices Q1 H and Q2L are turned ON with the switching devices Q2H and Q1 L held OFF, a current flows in the (+) direction shown in <figref idrefs="f0002">FIG. 2</figref>. As a result, the motor 20 generates a torque in the normal rotational direction. Meanwhile, when the switching devices Q2H and Q1 L are turned ON with the switching devices Q1 H and Q2L held OFF, a current flows in the (-) direction shown in <figref idrefs="f0002">FIG. 2</figref>. As a result, the motor 20 generates a torque in the reverse rotational direction. Accordingly, the switching devices Q1 H and Q2L correspond to<!-- EPO <DP n="22"> --> the switching devices for normal rotation of the present invention, and the switching devices Q2H and Q1 L correspond to the switching devices for reverse rotation of the present invention.</p><p id="p0044" num="0044">The assist ECU 100 includes a current sensor 31 which detects the current flowing through the motor 20. The current sensor 31 is provided in the ground line 220, which connects the lower arm circuit 45L to the ground. The current sensor 31 having a shunt resistor (not shown) provided, for example, in the ground line 220 amplifies the voltage generated across the shunt resistor (not shown) through use of an amplifier (not shown), converts the amplified voltage to a digital signal through use of an A/D converter (not shown), and supplies the digital signal to the microcomputer 60. Hereinafter, the value of the current flowing through the motor 20 detected by the current sensor 31 will be referred to as a motor actual current Im. Notably, the current sensor 31 may be configured such that the function of amplifying the voltage signal and the function of converting the voltage signal to the digital signal are provided on the side of the microcomputer 60.</p><p id="p0045" num="0045">In addition, the assist ECU 100 includes a voltage sensor 32 which detects the inter-terminal voltage of the motor 20. This voltage sensor 32 converts the inter-terminal voltage of the motor 20 to a digital signal through use of an A/D converter (not shown), and supplies the digital signal to the microcomputer 60. Hereinafter, the value of the voltage detected by the voltage sensor 32 will be referred to as a motor voltage Vm. The motor voltage Vm corresponds to the difference (V1-V2) between a potential V1 (with respect to the ground level) at one connection portion A1 between the<!-- EPO <DP n="23"> --> upper arm circuit 45H and the lower arm circuit 45L and a potential V2 (with respect to the ground level) at the other connection portion A2 therebetween. Notably, the voltage sensor 32 may be configured such that the function of converting the voltage signal to the digital signal is provided on the side of the microcomputer 60.</p><p id="p0046" num="0046">In addition, the assist ECU 100 includes a voltage sensor 33 which detects the power supply voltage supplied to the motor drive circuit 40; namely, the output voltage of the power supply apparatus 200. This voltage sensor 33 converts the voltage of the power line 210 to a digital signal through use of an A/D converter (not shown), and supplies the digital signal to the microcomputer 60. Hereinafter the value of the voltage detected by the voltage sensor 33 will be referred to as a power supply voltage Vb. Notably, the voltage sensor 33 may be configured such that the function of converting the voltage signal to the digital signal is provided on the side of the microcomputer 60.</p><p id="p0047" num="0047">In addition, a vehicle speed sensor 34 is connected to the assist ECU 100. The vehicle speed sensor 34 outputs to the assist ECU 100 a detection signal representing a vehicle speed vx.</p><p id="p0048" num="0048">Next, control processing performed by the microcomputer 60 will be described. The microcomputer 60 includes four functional blocks; i.e., a normal-time motor control section 70, an abnormal-time motor control section 80, an anomaly detection section 91, and a control changeover section 92. The microcomputer 60 realizes these functional sections by<!-- EPO <DP n="24"> --> repeatedly executing control programs stored in the microcomputer 60 at predetermined intervals.</p><p id="p0049" num="0049">The normal-time motor control section 70 is a functional block which drives and controls the motor 20 when no anomaly is detected in the current sensor 31; namely, at the normal time. Hereinafter, there will be described the processing performed by the normal-time motor control section 70. <figref idrefs="f0003">FIG. 3</figref> shows a normal-time motor control routine executed by the normal-time motor control section 70.</p><p id="p0050" num="0050">When the present control routine starts, in step S71, the normal-time motor control section 70 first reads the vehicle speed vx detected by a vehicle speed sensor 22 and the steering torque tr detected by the steering torque sensor 21.</p><p id="p0051" num="0051">Next, in step S72, by means of referring to an assist map shown in <figref idrefs="f0004">FIG. 4</figref>, the normal-time motor control section 70 calculates a target assist torque t* which is set in accordance with the read vehicle speed vx and steering torque tr. The assist map is relational data which represents the relation between the steering torque tr and the target assist torque t* for each of a plurality of representative vehicle speeds vx. The assist map has a property that the target assist torque t* increases with the steering torque tr, and the target assist torque t* increases as the vehicle speed decreases. Notably, <figref idrefs="f0004">FIG. 4</figref> shows an assist map for leftward steering. In another map for rightward steering, the steering torque tr and the target assist torque t* have signs (i.e., negative signs) reverse to those in the assist map for<!-- EPO <DP n="25"> --> leftward steering.</p><p id="p0052" num="0052">Next, in step S73, the normal-time motor control section 70 calculates a target current I* which is a current value required to generate the target assist torque t*. The target current I* is obtained by dividing the target assist torque t* by a torque constant. Next, in step S74, the normal-time motor control section 70 computes a deviation ΔI by subtracting a motor actual current Im detected by the current sensor 31 from the target current I*, and calculates a target command voltage V* such that the motor actual current Im follows the target current I* under PI control (proportional-integral control) performed by use of the deviation ΔI. For example, the target command voltage V* is calculated from the following expression. <maths id="math0001" num=""><math display="block"><mi mathvariant="normal">V</mi><mo>*</mo><mo>=</mo><mi>Kp</mi><mo>⋅</mo><mi mathvariant="normal">Δl</mi><mo>+</mo><mi>Ki</mi><mo>⋅</mo><mo>∫</mo><mi mathvariant="normal">Δl</mi><mo>⁢</mo><mi>dt</mi></math><img id="ib0001" file="imgb0001.tif" wi="50" he="10" img-content="math" img-format="tif"/></maths> In the expression given above, Kp represents the control gain of the proportional term for the PI control, and Ki represents the control gain of the integral term for the PI control.</p><p id="p0053" num="0053">Next, in step S75, the normal-time motor control section 70 outputs to the control changeover section 92 a PWM (Pulse Width Modulation) control signal corresponding to the target command voltage V*. After outputting the PWM control signal, the normal-time motor control section 70 ends the current execution of the normal-time motor control routine. Subsequently, the normal-time motor control section 70 repeatedly performs the above-described processing at predetermined intervals.</p><p id="p0054" num="0054"><!-- EPO <DP n="26"> --> In the case where an anomaly determination signal Ffail output from the anomaly detection section 91 is "0," the control changeover section 92 outputs to the switch drive circuit 30 the PWM control signal output from the normal-time motor control section 70 as it is. In the case where the anomaly determination signal Ffail output from the anomaly detection section 91 is "1," the control changeover section 92 outputs to the switch drive circuit 30 the control signal output from the abnormal-time motor control section 80 as it is.</p><p id="p0055" num="0055">The switch drive circuit 30 amplifies the received control signal and outputs pulse trains corresponding to the control signal to the motor drive circuit 40. Thus, in the case where the anomaly determination signal Ffail output from the anomaly detection section 91 is "0," pulse trains whose duty ratios correspond to the target command voltage V* are output, as PWM control signals, to the motor drive circuit 40. By virtue of these PWM control signals, the duty ratios of the switching devices Q1 H, Q2H, Q1 L, and Q2L are controlled, whereby the drive voltage of the motor 20 is adjusted to the target command voltage V*. As a result, the target current I* flows through the motor 20 in a direction determined such that the motor 20 rotates in a direction corresponding to the direction of the steering operation. Thus, the motor 20 outputs a torque which is equal to the target assist torque t*, thereby assisting the steering operation performed by the driver.</p><p id="p0056" num="0056">The anomaly detection section 91 receives the motor actual current Im detected by the current sensor 31 and the target current I* calculated by the normal-time motor control section 70. In the case where the motor<!-- EPO <DP n="27"> --> actual current Im differs greatly from the target current I* over a predetermined period of time, the anomaly detection section 91 determines that the current sensor 31 is faulty. For example, the anomaly detection section 91 calculates the deviation (|Im-I*|) between the motor actual current Im and the target current I*, and determines that the current sensor 31 is faulty in the case where a period of time during which the calculated deviation is continuously greater than a reference value set in advance becomes longer than a predetermined reference time.</p><p id="p0057" num="0057">In the case where a failure of the current sensor 31 is not detected, the anomaly detection section 91 sets the anomaly determination signal Ffail to "0." In the case where a failure of the current sensor 31 is detected, the anomaly detection section 91 sets the anomaly determination signal Ffail to "1." The anomaly detection section 91 outputs the set anomaly determination signal Ffail to the normal-time motor control section 70, the abnormal-time motor control section 80, and the control changeover section 92. The normal-time motor control section 70 continues its operation in the case where the anomaly determination signal Ffail is "0," and stops its operation in the case where the anomaly determination signal Ffail is "1." In contrast, the abnormal-time motor control section 80 continues its operation in the case where the anomaly determination signal Ffail is "1," and stops its operation in the case where the anomaly determination signal Ffail is "0."</p><p id="p0058" num="0058">The abnormal-time motor control section 80 is a functional block which drives and controls, as emergency measures, the motor 20 in the<!-- EPO <DP n="28"> --> case where the current sensor 31 becomes faulty.</p><p id="p0059" num="0059">In the case where the motor 20 is to rotate in the normal direction, the abnormal-time motor control section 80 turns ON and OFF (repeatedly and alternately turns ON and OFF) the switching devices Q1 H and Q2L with the switching devices Q2H and Q1 L held OFF through use of the switch control signal to be output to the switch drive circuit 30. In contrast, in the case where the motor 20 is to rotate in the reverse direction, the abnormal-time motor control section 80 turns ON and OFF the switching devices Q2H and Q1L with the switching devices Q1H and Q2L held OFF. The abnormal-time motor control section 80 sets a singe-time ON time to a time corresponding to the steering torque tr. The singe-time ON time refers to a time over which the switching devices Q1 H and Q2L or the switching devices Q2H and Q1L are held ON in each ON-OFF period. In addition, the abnormal-time motor control section 80 sets a timing at which the switching devices Q1 H and Q2L or the switching devices Q2H and Q1 L are turned ON to a point in time at which the current flowing through the motor 20 has becomes zero. Accordingly, the abnormal-time motor control section 80 controls the timing (current = 0) at which the switching devices Q1 H and Q2L or the switching devices Q2H and Q1L are turned ON and the single-time ON time.</p><p id="p0060" num="0060">As a result of performance of the above-described control, a current having a triangular waveform flows through the motor 20, and its average current can be adjusted to a desired value corresponding to the steering torque tr. Hereinafter, the current flowing through the motor 20 will be<!-- EPO <DP n="29"> --> referred to the motor current I.</p><p id="p0061" num="0061">First, there will be described the method for determining that the motor current I has become zero when the current sensor 31 is faulty. In the case where the switching devices Q1 H and Q2L are turned ON at the same time with the switching devices Q2H and Q1L held OFF, the potential V1 at the connection portion A1 is approximately equal to the power supply voltage Vb (V1 ≅ Vb), and the potential V2 at the connection portion A2 is approximately equal to zero (V2 ≅ 0). In contrast, in the case where the switching devices Q2H and Q1L are turned ON at the same time with the switching devices Q1 H and Q2L held OFF, the potential V1 at the connection portion A1 is almost zero (V1 ≅ 0), and the potential V2 at the connection portion A2 is approximately equal to the power supply voltage Vb (V2 ≅ Vb).</p><p id="p0062" num="0062">In the case where all the switching devices Q1 H, Q2L, Q2H, and Q1 L are turned OFF at the same time, the potentials V1 and V2 are determined in accordance with the direction of the motor current I. That is, in the case where the current flows in the (+) direction shown in <figref idrefs="f0002">FIG. 2</figref>, the current is considered to flow through the parasitic diode of the switching device Q1L and the parasitic diode of the switching device Q2H. Accordingly, when the voltage drop at the parasitic diode is denoted by Vr, the potentials V1 and V2 are represented by the following expressions. <maths id="math0002" num=""><math display="block"><mi mathvariant="normal">V</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>≅</mo><mn mathvariant="normal">0</mn><mo>-</mo><mi>Vr</mi></math><img id="ib0002" file="imgb0002.tif" wi="33" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0003" num=""><math display="block"><mi mathvariant="normal">V</mi><mo>⁢</mo><mn>2</mn><mo>≅</mo><mi>Vb</mi><mo>+</mo><mi>Vr</mi></math><img id="ib0003" file="imgb0003.tif" wi="33" he="12" img-content="math" img-format="tif"/></maths></p><p id="p0063" num="0063"><!-- EPO <DP n="30"> --> Similarly, in the case where the current flows in the (-) direction shown in <figref idrefs="f0002">FIG. 2</figref> when all the switching devices Q1H, Q2L, Q2H, and Q1L are turned OFF at the same time, the current is considered to flow through the parasitic diode of the switching device Q2L and the parasitic diode of the switching device Q1 H. Accordingly, when the voltage drop at the parasitic diode is denoted by Vr, the potentials V1 and V2 are represented by the following expressions. <maths id="math0004" num=""><math display="block"><mi mathvariant="normal">V</mi><mo>⁢</mo><mn>1</mn><mo>≅</mo><mi>Vb</mi><mo>+</mo><mi>Vr</mi></math><img id="ib0004" file="imgb0004.tif" wi="37" he="10" img-content="math" img-format="tif"/></maths> <maths id="math0005" num=""><math display="block"><mi mathvariant="normal">V</mi><mo>⁢</mo><mn>2</mn><mo>≅</mo><mn>0</mn><mo>-</mo><mi>Vr</mi></math><img id="ib0005" file="imgb0005.tif" wi="37" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0064" num="0064">In the case where the motor current I becomes zero in the state in which all the switching devices Q1 H and Q2L, Q2H, and Q1 L are held OFF, the inter-terminal voltage Vm (= V1-V2) of the motor 20 is equal to the counter electromotive voltage E generated by the motor 20.</p><p id="p0065" num="0065">Accordingly, by means of detecting the inter-terminal voltage Vm of the motor 20 by the voltage sensor 32 in the state in which all the switching devices Q1 H, Q2L, Q2H, and Q1L are held OFF, the flow direction of the motor current I can be determined on the basis of the detected motor voltage Vm. That is, in the case where the motor voltage Vm (= V1-V2) detected by the voltage sensor 32 is approximately -(Vb+2Vr), the motor current I flows in the (+) direction. In the case where the motor voltage Vm is approximately (Vb+2Vr), the motor current I flows in the (-) direction. In the case where the motor voltage Vm is neither approximately -(Vb+2Vr) nor approximately (Vb+2Vr), it is determined that the motor current I is zero. Expressions for determining the direction of the motor current I are<!-- EPO <DP n="31"> --> represented by the following expressions. <maths id="math0006" num="(+) direction"><math display="block"><mi>Vm</mi><mo>≅</mo><mo>-</mo><mfenced separators=""><mi>Vb</mi><mo>+</mo><mn>2</mn><mo>⁢</mo><mi>Vr</mi></mfenced><mspace width="1em"/><mo>⋯</mo><mspace width="1em"/><mfenced><mo>+</mo></mfenced><mspace width="1em"/><mi>direction</mi></math><img id="ib0006" file="imgb0006.tif" wi="88" he="10" img-content="math" img-format="tif"/></maths> <maths id="math0007" num="(-) direction"><math display="block"><mi>Vm</mi><mo>≅</mo><mfenced separators=""><mi>Vb</mi><mo>+</mo><mn>2</mn><mo>⁢</mo><mi>Vr</mi></mfenced><mspace width="1em"/><mo>⋯</mo><mspace width="1em"/><mfenced><mo>-</mo></mfenced><mspace width="1em"/><mi>direction</mi></math><img id="ib0007" file="imgb0007.tif" wi="88" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0008" num="I = 0"><math display="block"><mo>-</mo><mfenced separators=""><mi>Vb</mi><mo>+</mo><mn>2</mn><mo>⁢</mo><mi>Vr</mi></mfenced><mo>&lt;</mo><mi>Vm</mi><mo>&lt;</mo><mfenced separators=""><mi>Vb</mi><mo>+</mo><mn>2</mn><mo>⁢</mo><mi>Vr</mi></mfenced><mspace width="1em"/><mo>⋯</mo><mspace width="1em"/><mi>l</mi><mo>=</mo><mn>0</mn></math><img id="ib0008" file="imgb0008.tif" wi="88" he="12" img-content="math" img-format="tif"/></maths> In this case, the voltage drop Vr at the parasitic diode may be set to a fixed value corresponding to an expected voltage drop.</p><p id="p0066" num="0066">Notably, an ordinary H-bridge circuit is controlled such that, in order to prevent a short circuit between the upper arm circuit 45H and the lower arm circuit 45L, a dead time is provided when the direction in which electricity is supplied to the motor 20 is changed. During the dead time, all the switching devices Q1 H, Q2L, Q2H, and Q1L are held OFF. Aside this dead time, in order to detect the inter-terminal voltage Vm of the motor 20, there is provided a period during which all the switching devices Q1 H, Q2L, Q2H, and Q1 L are held OFF.</p><p id="p0067" num="0067">By means of using the above-described principle, the abnormal-time motor control section 80 determines whether or not the motor current I is zero, and detects the timing at which the motor current I has become zero. Each time the abnormal-time motor control section 80 determines that the motor current I has become zero, it outputs an ON instruction signal for turning on the switching devices Q2H and Q1 L or the switching devices Q1 H and Q2L at the detected timing. The time during which the switching devices Q2H and Q1 L or the switching devices Q1 H and Q2L are held ON in each ON-OFF period is set in accordance with the magnitude |tr| of the steering torque tr. The time during which the switching devices Q2H and<!-- EPO <DP n="32"> --> Q1 L or the switching devices Q1 H and Q2L are held ON in each ON-OFF period is referred to as the ON time T0.</p><p id="p0068" num="0068">After being turned ON by the drive signals, the switching devices Q2H and Q1L or the switching devices Q1 H and Q2L are turned OFF again when the ON time T0 lapses. Accordingly, the motor current I has a triangular waveform. The abnormal-time motor control section 80 sets the ON time T0 to a time corresponding to the steering torque tr. As a result, a current corresponding to the steering torque tr flows through the motor 20, whereby the motor 20 generates an appropriate steering assist torque.</p><p id="p0069" num="0069">Next, there will be described an abnormal-time motor control routine executed by the abnormal-time motor control section 80. <figref idrefs="f0005">FIG. 5</figref> is a flowchart showing the abnormal-time motor control routine. The abnormal-time motor control routine starts when the anomaly determination signal Ffail output from the anomaly detection section 91 changes from "0" to "1."</p><p id="p0070" num="0070">When the abnormal-time motor control routine starts, in step S11, the abnormal-time motor control section 80 first outputs an OFF instruction signal for turning OFF all the switching devices Q1 H, Q2L, Q2H, and Q1L. Thus, the switching devices Q1 H, Q2L, Q2H, and Q1L of the motor drive circuit 40 are turned OFF. Next, in step S12, the abnormal-time motor control section 80 reads the motor voltage Vm detected by the voltage sensor 32 and the power supply voltage Vb detected by the voltage sensor 33.<!-- EPO <DP n="33"> --></p><p id="p0071" num="0071">Next, in step S13, the abnormal-time motor control section 80 determines whether or not the motor current I has become zero. As mentioned above, the direction of the motor current I can be determined from the motor voltage Vm (= V1-V2) detected by the voltage sensor 32. In this example, since the power supply voltage Vb is included in the expression for determining the direction of the current, the abnormal-time motor control section 80 reads the power supply voltage Vb detected by the voltage sensor 33. However, if the power supply voltage Vb is considered to be fixed, the step for reading the power supply voltage Vb may be omitted.</p><p id="p0072" num="0072">If the motor current I is zero, the abnormal-time motor control section 80 proceeds to step S14. If the motor current I is not zero, the abnormal-time motor control section 80 returns to step S12, to thereby wait until the motor current I becomes zero. The abnormal-time motor control section 80 determines, on the basis of the motor voltage Vm, that the motor current I has become zero in any one of the three cases, i.e., a case where the abnormal-time motor control section 80 has determined by the above-described expression for determination that the motor voltage Vm falls within the range where the motor current I becomes zero (-Vb+2Vr) &lt; Vm &lt; (Vb+2Vr)), a case where the abnormal-time motor control section 80 has determined that the direction of the motor current I has changed from the (+) direction to the (-) direction, and a case where the abnormal-time motor control section 80 has determined that the direction of the motor current I has changed from the (-) direction to the (+) direction.<!-- EPO <DP n="34"> --></p><p id="p0073" num="0073">Each time the abnormal-time motor control section 80 performs the loop processing of steps S12 and S13, it memorizes the direction of the motor current I determined on the basis of the motor voltage Vm. Subsequently, the abnormal-time motor control section 80 compares the direction of the motor current I detected during the preceding loop processing with the direction of the motor current I detected during the current loop processing, and determines that the motor current I has become zero even in the case where the direction of the motor current I has changed. By virtue of this, even if the motor voltage Vm does not satisfy the expression for determination (-(Vb+2Vr) &lt; Vm &lt; (Vb+2Vr)), the abnormal-time motor control section 80 can reliably detect the timing at which the motor current I becomes zero on the basis of the change of the direction of the motor current I. In this case, since the polarity (positive or negative) of the motor voltage Vm differs in accordance with the direction of the motor current I and the absolute value of the motor voltage Vm is large if the motor current I is not zero, the abnormal-time motor control section 80 can easily detect the reversal of the direction of the motor current I. Notably, the abnormal-time motor control section 80 may determine that the motor current I has become zero only when the motor voltage Vm satisfies the expression for determination (-(Vb+2Vr) &lt; Vm &lt; (Vb+2Vr)) without detecting the reversal of the direction of the motor current I.</p><p id="p0074" num="0074">If the abnormal-time motor control section 80 determines, through repetition of the above-described loop processing, that the motor current I has become zero (S13: Yes), it proceeds to step S14 in order to read the<!-- EPO <DP n="35"> --> steering torque tr detected by the steering torque sensor 21. Next, in step S15, the abnormal-time motor control section 80 sets, on the basis of the steering torque tr, the ON time T0 during which the switching devices Q2H and Q1 L or the switching devices Q1 H and Q2L are held ON in each ON-OFF period. The abnormal-time motor control section 80 stores the on-time setting map shown in <figref idrefs="f0006">FIG. 6</figref>, and sets the ON time T0 corresponding to the steering torque tr with reference to this on-time setting map. The on-time setting map has a property that the ON time T0 increases with the magnitude |tr| of the steering torque tr. The ON time T0 has a predetermined upper limit T0max such that it is set to the upper limit T0max in the case where the magnitude |tr| of the steering torque tr is tr0 or more. Notably, the map used for determining the ON time T0 is not limited to the map which provides the ON time T0 which changes in proportional to the magnitude |tr| of the steering torque tr as shown in <figref idrefs="f0006">FIG. 6</figref>. The map used for determining the ON time T0 may be a map (mp1) which represents the relation between the magnitude |tr| of the steering torque tr and the ON time T0 by a bent line having a plurality of bent points or a map (mp2) which represents the relation between the magnitude |tr| of the steering torque tr and the ON time T0 by a curve determined by a polynomial.</p><p id="p0075" num="0075">Next, in step S16, the abnormal-time motor control section 80 determines whether or not the ON time T0 is zero. In the case where the ON time T0 is zero; i.e., in the case where the magnitude |tr| of the steering torque tr is zero, the abnormal-time motor control section 80 returns to step S12.</p><p id="p0076" num="0076"><!-- EPO <DP n="36"> --> In the case where the ON time T0 is not zero, in step S17, the abnormal-time motor control section 80 checks the polarity (positive or negative) of the steering torque tr. In the case where the steering torque tr assumes a positive value; i.e., in the case where a leftward steering torque tr is detected, in step S18, the abnormal-time motor control section 80 outputs an ON instruction signal for turning ON the switching devices Q1 H and Q2L. In the case where the steering torque tr assumes a negative value; i.e., a rightward steering torque tr is detected, in step S19, the abnormal-time motor control section 80 outputs an ON instruction signal for turning ON the switching devices Q2H and Q1L. As a result, the switching devices Q1 H and Q2L or the switching devices Q2H and Q1L of the motor drive circuit 40 are turned ON, whereby the current supplied from the power supply apparatus 200 starts flowing through the motor 20.</p><p id="p0077" num="0077">After outputting the ON instruction signal in step S18 or S19, in step S20, the abnormal-time motor control section 80 counts the time elapsed since the ON instruction signal was output, and waits until the elapsed time reaches the ON time T0. When the elapsed time reaches the ON time T0, the abnormal-time motor control section 80 returns to step S11. Accordingly, all the switching devices Q1 H, Q2L, Q2H, and Q1 L are turned OFF, thereby interrupting the supply of electricity from the power supply apparatus 200 to the motor 20. As a result, the motor current I starts to decrease. When the motor current I reaches zero (S13: Yes), electricity is supplied to the motor 20 for the ON time T0 corresponding to the magnitude |tr| of the steering torque tr.</p><p id="p0078" num="0078"><!-- EPO <DP n="37"> --> As a result of repetition of the above-described processing, each time the motor current I is detected to have become zero, the switching devices Q2H and Q1 L or the switching devices Q1 H and Q2L are turned ON at that timing. Therefore, the motor current I has a triangular waveform shown in <figref idrefs="f0007">FIG. 8</figref>, and its average corresponds to the magnitude |tr| of the steering torque tr. As mentioned above, by means of adjusting the single-time ON time of the switching devices Q2H and Q1L or the switching devices Q1 H and Q2L in accordance with the magnitude |tr| of the steering torque tr, the abnormal-time motor control section 80 controls the average current flowing through the motor 20. Thus, the motor 20 generates a steering assist torque corresponding to the steering torque tr.</p><p id="p0079" num="0079">Notably, immediately after start of the abnormal-time motor control routine, the abnormal-time motor control section 80 may supply electricity to the motor 20 in such a direction that the absolute value of the motor current I decreases, when the abnormal-time motor control section 80 waits in step S13 until the motor current I becomes zero. That is, in the case where the motor current I is flowing in the (+) direction, the abnormal-time motor control section 80 may turn ON the switching devices Q2H and Q1 L in order to forcedly decrease the current flowing in the (+) direction. In the case where the motor current I is flowing in the (-) direction, the abnormal-time motor control section 80 may turn ON the switching devices Q1 H and Q2L in order to forcedly decrease the current flowing in the (-) direction, to thereby shorten the wait time.</p><p id="p0080" num="0080"><figref idrefs="f0007">FIG. 8</figref> is a graph showing changes in the switch command signal,<!-- EPO <DP n="38"> --> the motor voltage Vm, and the motor current I for the case where the abnormal-time motor control routine is executed. This graph shows an example of the case where the motor 20 is driven in the normal direction. The abnormal-time motor control section 80 waits until the motor current I is detected to have become zero. Upon determining that the motor current I has become zero at time t1, the abnormal-time motor control section 80 turns ON the switching devices Q1 H and Q2L which have been held OFF. As a result, the motor current I starts to flow in the (+) direction. The rate of increase of the current I at the time when it starts to flow can be approximated by an expression (Vb-ωφ)/L. In this expression, ω represents the rotational speed of the motor 20, φ represents the counter electromotive voltage constant of the motor 20, L represents the motor inductance, and ωφ represents the counter electromotive voltage generated by the motor 20.</p><p id="p0081" num="0081">When the ON time T0 elapses since the switching devices Q1 H and Q2L were turned ON, the switching devices Q1 H and Q2L are turned OFF (time t2). As a result, the motor current I starts to decrease and finally becomes zero, or its direction changes to the (-) direction (time t3). At the timing (time t4) at which the abnormal-time motor control section 80 determines that the motor current I has become zero, it supplies electricity again to the motor 20 for the ON time T0 corresponding to the magnitude |tr| of the steering torque tr. Thus, a current having a triangular waveform flows through the motor 20.</p><p id="p0082" num="0082">In <figref idrefs="f0007">FIG. 8</figref>, T1 represents the period from time t2 to time t3. The ON time T0 can be set arbitrarily; however, the period T1 is determined on the<!-- EPO <DP n="39"> --> basis of the circuit equation for the motor 20. Meanwhile, the average of the motor current I (referred to as average current I<sub>avg</sub>) is about half the peak value Ip in each period during which electricity is supplied to the motor 20. Accordingly, by means of adjusting the ON time T0, the average current I<sub>avg</sub> flowing through the motor 20 can be adjusted. In addition, by means of increasing the ON time T0 with the magnitude |tr| of the steering torque tr, the average current I<sub>avg</sub> which is proportional to the magnitude |tr| of the steering torque tr can be caused to flow through the motor 20.</p><p id="p0083" num="0083">Notably, the ON time T0 is set to, for example, several milliseconds. Considering the PWM carrier frequency of the normal-time motor control section 70 is, for example, 20 kHz, the ON time T0 is far longer than the single-time ON time of the PWM control signal.</p><p id="p0084" num="0084">In the case where current is caused to intermittently flow through the motor 20 as mentioned above, there is a possibility that the motion of the steering wheel 11 becomes vibratory. However, by means of supplying electricity to the motor 20 several times or more a second, the vibration can be reduced by virtue of the inertia of the motor 20 and that of the steering wheel 11. Accordingly, the electric power steering apparatus can assist steering operation while mitigating unnatural sensation.</p><p id="p0085" num="0085">Hereunder, the followability of the steering assist to the steering operation; namely, the steering assist performance provided when the steering operation is performed at high speed, for the case where the abnormal-time motor control section 80 drives and controls the motor 20 will<!-- EPO <DP n="40"> --> be described in contrast with the conventional apparatus. First, the conventional apparatus will be described. In the conventional apparatus proposed in Patent Document 1, open loop control is performed when the current sensor is faulty. Accordingly, when a target current Iref is given, the output voltage V corresponding thereto is calculated in accordance with the following expression (1). <maths id="math0009" num="(1)"><math display="block"><mi>V</mi><mo>=</mo><mi>R</mi><mo>⁢</mo><msub><mi>I</mi><mi mathvariant="italic">ref</mi></msub><mo>+</mo><mi>L</mi><mo>⁢</mo><mfrac><mrow><mi>d</mi><mo>⁢</mo><msub><mi>I</mi><mi mathvariant="italic">ref</mi></msub></mrow><mi mathvariant="italic">dt</mi></mfrac></math><img id="ib0009" file="imgb0009.tif" wi="68" he="18" img-content="math" img-format="tif"/></maths> However, actually, the current I flows in accordance with the following expression (2) which includes a term representing the counter electromotive voltage. <maths id="math0010" num="(2)"><math display="block"><mi>V</mi><mo>=</mo><mi mathvariant="italic">RI</mi><mo>+</mo><mi mathvariant="italic">L</mi><mo>⁢</mo><mfrac><mi mathvariant="italic">dI</mi><mi mathvariant="italic">dt</mi></mfrac><mo>+</mo><mi>ω</mi><mo>⁢</mo><mi>φ</mi></math><img id="ib0010" file="imgb0010.tif" wi="72" he="18" img-content="math" img-format="tif"/></maths> Accordingly, the ratio between the target current Iref and the actual current I is calculated in accordance with the following expression (3). Notably, since the change in the current is negligible, dI/dt is considered to be 0 (dl/dt = 0). <maths id="math0011" num="(3)"><math display="block"><mfrac><mi>I</mi><msub><mi>I</mi><mi mathvariant="italic">ref</mi></msub></mfrac><mo>=</mo><mfrac><mrow><mi>V</mi><mo>-</mo><mi>ω</mi><mo>⁢</mo><mi>φ</mi></mrow><mi>V</mi></mfrac></math><img id="ib0011" file="imgb0011.tif" wi="63" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0086" num="0086">The expression given above shows that the actual current I becomes equal to the target current Iref if the rotational speed ω of the motor 20 is zero (ω=0); however, the actual current I decreases as the rotational speed ω increases, and a force for braking the motor 20 is generated if the counter electromotive voltage ωφ exceeds the output voltage V. The characteristic of the above-described open loop control is shown in <figref idrefs="f0008">FIG. 9. FIG. 9</figref> shows<!-- EPO <DP n="41"> --> the relation between the rotational speed ω and the actual current I. The actual current I is represented by the expression (4) given below. In this expression, Imax represents the maximum current that can be supplied to the motor 20 by the motor drive circuit 40, and is determined on the basis of the specifications of the switching devices Q1 H, Q2L, Q2H, and Q1 L. Hereinafter, Imax will be referred to as the maximum current Imax. The maximum current Imax is set to, for example, 50 amperes. <maths id="math0012" num="(4)"><math display="block"><mi>I</mi><mo>=</mo><mo>-</mo><mfrac><mi>φ</mi><mi>R</mi></mfrac><mo>⁢</mo><mi>ω</mi><mo>+</mo><msub><mi>I</mi><mi>max</mi></msub></math><img id="ib0012" file="imgb0012.tif" wi="67" he="18" img-content="math" img-format="tif"/></maths></p><p id="p0087" num="0087">If the slope of the line represented by the above-described linear function is considered to be Δ, Δ can be represented by the expression (5) give below. In this expression, Vmax represents the value (Imax×R) calculated by multiplying the maximum current Imax by the internal resistance R of the motor 20. Hereinafter, Vmax will be referred to as the maximum voltage Vmax. If the internal resistance R of the motor 20 is considered to be, for example, 0.1 Ω, the maximum voltage Vmax is set to 5 volt (50 A x 0.1 Ω). <maths id="math0013" num="(5)"><math display="block"><mi mathvariant="normal">Δ</mi><mo>=</mo><mo>-</mo><mfrac><mi>φ</mi><mi>R</mi></mfrac><mo>=</mo><mo>-</mo><mfrac><mi>φ</mi><msub><mi>V</mi><mi>max</mi></msub></mfrac><mo>⁢</mo><msub><mi>I</mi><mi>max</mi></msub></math><img id="ib0013" file="imgb0013.tif" wi="72" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0088" num="0088">The counter electromotive voltage can be estimated from the rotational speed of the motor 20; however, in general, a brushed motor is not provided with a rotational angle sensor or a rotational speed sensor. Accordingly, the counter electromotive voltage cannot be estimated when the open loop control is performed in the case where the current sensor is<!-- EPO <DP n="42"> --> faulty.</p><p id="p0089" num="0089">Next, there will be described the ω-I characteristic controlled by the abnormal-time motor control section 80 of the present embodiment. If the above-described motor voltage expression (2) for calculating the motor voltage is solved, the motor current I is represented by the following expression (6). <maths id="math0014" num="(6)"><math display="block"><mi>I</mi><mo>=</mo><mfrac><mrow><msub><mi>V</mi><mi>b</mi></msub><mo>-</mo><mi>ω</mi><mo>⁢</mo><mi>φ</mi></mrow><mi>R</mi></mfrac><mo>⁢</mo><mfenced separators=""><mn>1</mn><mo>-</mo><mi>exp</mi><mfenced separators=""><mo>-</mo><mfrac><mi>R</mi><mi>L</mi></mfrac><mo>⁢</mo><mi>t</mi></mfenced></mfenced><mo>≈</mo><mfrac><mrow><msub><mi>V</mi><mi>b</mi></msub><mo>-</mo><mi>ω</mi><mo>⁢</mo><mi>φ</mi></mrow><mi>L</mi></mfrac><mo>⁢</mo><mi>t</mi></math><img id="ib0014" file="imgb0014.tif" wi="112" he="18" img-content="math" img-format="tif"/></maths> In the expression given above, in order to simplify calculation, the exponential function is approximated by the slope at the time when t is zero (t=0).</p><p id="p0090" num="0090">As mentioned above, in the case where electricity is intermittently supplied to the motor 20, the motor current I has a triangular waveform as shown in <figref idrefs="f0007">FIG. 8</figref>. Accordingly, about half the peak current Ip becomes an average current lavg. By means of substituting the ON time T0 into the expression (6) given above, the average current lavg is represented by the following expression (7). <maths id="math0015" num="(7)"><math display="block"><msub><mi>I</mi><mi mathvariant="italic">avg</mi></msub><mo>=</mo><mfrac><msub><mi>I</mi><mi>p</mi></msub><mn>2</mn></mfrac><mo>=</mo><mfrac><mrow><msub><mi>V</mi><mi>b</mi></msub><mo>-</mo><mi>ω</mi><mo>⁢</mo><mi>φ</mi></mrow><mrow><mn>2</mn><mo>⁢</mo><mi>L</mi></mrow></mfrac><mo>⁢</mo><msub><mi>T</mi><mn>0</mn></msub></math><img id="ib0015" file="imgb0015.tif" wi="76" he="19" img-content="math" img-format="tif"/></maths></p><p id="p0091" num="0091">As can be understood from the expression (7) given above, the average current lavg increases with the ON time T0. However, the maximum value of the ON time T0 must satisfy a condition that overcurrent does not occur even if the counter electromotive voltage becomes zero due<!-- EPO <DP n="43"> --> to sudden stop of the motor 20. That is, it is necessary to prevent the peak current Ip from exceeding the maximum current Imax permitted for the motor drive circuit 40. Accordingly, the upper limit T0max of the ON time T0 is represented by the following expression (8). <maths id="math0016" num="(8)"><math display="block"><msub><mi>T</mi><mrow><mn>0</mn><mo>⁢</mo><mi>max</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi>L</mi><mo>⋅</mo><msub><mi>I</mi><mi>max</mi></msub></mrow><msub><mi>V</mi><mi>b</mi></msub></mfrac></math><img id="ib0016" file="imgb0016.tif" wi="62" he="17" img-content="math" img-format="tif"/></maths></p><p id="p0092" num="0092">Accordingly, the average current lavg can be represented by the following expression (9). <maths id="math0017" num="(9)"><math display="block"><msub><mi>I</mi><mi mathvariant="italic">avg</mi></msub><mo>=</mo><mo>-</mo><mfrac><mrow><mi>φ</mi><mo>⋅</mo><msub><mi>I</mi><mi>max</mi></msub></mrow><mrow><mn>2</mn><mo>⁢</mo><msub><mi>V</mi><mi>b</mi></msub></mrow></mfrac><mo>⁢</mo><mi>ω</mi><mo>+</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo>⁢</mo><msub><mi>I</mi><mi>max</mi></msub></math><img id="ib0017" file="imgb0017.tif" wi="83" he="18" img-content="math" img-format="tif"/></maths></p><p id="p0093" num="0093"><figref idrefs="f0008">FIG. 10</figref> shows the ω-lave characteristic (the relation between the motor rotational speed ω and the average current lave) of the apparatus of the present embodiment. In <figref idrefs="f0008">FIG. 10</figref>, in order to compare with the ω-I characteristic of the conventional apparatus, the characteristic of the conventional apparatus is represented by a broken line, and the characteristic of the apparatus of the present embodiment is represented by a solid line. Hereunder, the slopes Δ of the lines represented by two linear functions will be compared. The slope of the line represented by the linear function according to the present embodiment is represented by the following expression (10). <maths id="math0018" num="(10)"><math display="block"><mi mathvariant="normal">Δ</mi><mo>=</mo><mo>-</mo><mfrac><mi>φ</mi><mrow><mn>2</mn><mo>⁢</mo><msub><mi>V</mi><mi>b</mi></msub></mrow></mfrac><mo>⁢</mo><msub><mi>I</mi><mi>max</mi></msub></math><img id="ib0018" file="imgb0018.tif" wi="63" he="18" img-content="math" img-format="tif"/></maths></p><p id="p0094" num="0094">When the slope Δ(=-φ·Imax/Vmax) of the line representing the<!-- EPO <DP n="44"> --> characteristic of the conventional apparatus is compared with the slope Δ(= -φ·Imax/2Vb) of the line representing the characteristic of the apparatus of the present embodiment, the latter slope Δ is smaller than the former slope Δ because the denominator of the expression representing the latter slope Δ is larger than that of the former slope. In an ordinary electric power steering apparatus, the maximum voltage Vmax is smaller than the power supply voltage Vb. For example, in the case where Vmax = 5 V and Vb = 12 V, the slope Δ representing the characteristic of the apparatus of the present embodiment is about 1/5 the slope Δ representing the characteristic of the conventional apparatus. Therefore, according to the present embodiment, a decrease in the output current can be suppressed even if the motor rotational speed ω increases.</p><p id="p0095" num="0095">According to the above-described electric power steering apparatus 1 of the present embodiment, in the case where the current sensor 31 fails, the functional block for driving and controlling the motor 20 is switched from the normal-time motor control section 70 to the abnormal-time motor control section 80. The abnormal-time motor control section 80 detects the motor voltage Vm in the state where all the switching devices Q1 H, Q2L, Q2H, and Q1 L of the motor drive circuit 40 are held OFF, and detects the state where the motor current I becomes zero on the basis of the detected motor voltage Vm. Each time the abnormal-time motor control section 80 detects that the motor current I has become zero, it turns ON the switching devices Q1 H and Q2L (in the case of normal rotation) or the switching devices Q2H and Q1 L (in the case of reverse rotation) at that timing for the ON time T0 which is set in accordance with the steering torque tr.<!-- EPO <DP n="45"> --></p><p id="p0096" num="0096">As a result, a current having a triangular waveform flows through the motor 20 intermittently. In this case, since the ON time T0 is set such that it increases with the magnitude |tr| of the steering torque tr, the average current lavg flowing through the motor 20 also increases with the magnitude |tr| of the steering torque tr. Even in the case where insufficiency of steering assist occurs because the current flowing through the motor 20 is less than the originally required current, the steering torque increases due to the insufficiency of steering assist, whereby the ON time T0 increases.</p><p id="p0097" num="0097">In addition, as can be understood from the current characteristic (<figref idrefs="f0008">FIG. 10</figref>), even in the case where the motor rotational speed ω increases, the degree of the resultant decrease in the output current is small.</p><p id="p0098" num="0098">As a result, according to the electric power steering apparatus 1 of the present embodiment, even in the case where the current sensor 31 fails, the desired steering assist corresponding to the steering torque tr can be obtained. In addition, reduction in the steering assist can be suppressed even in the case where the steering operation is performed quickly. That is, the followability of the steering assist to the steering operation can be improved. Thus, impairment of the steering feel can be suppressed.</p><heading id="h0007">&lt;First modification&gt;</heading><p id="p0099" num="0099">In the above-described embodiment, in the case where a very small current is caused to flow through the motor 20, the ON time T0 becomes<!-- EPO <DP n="46"> --> very short, and the period of vibration generated in the steering system (the motor 20 and the steering mechanism 10) becomes very short accordingly. When the period of vibration becomes short, there may arise a problem in that other components of the vehicle resonate with this vibration. In order to solve this problem, in a first modification, a very small current can be caused to flow through the motor 20 without rendering the ON time T0 extremely short.</p><p id="p0100" num="0100">In the first modification, current is caused to flow through the motor 20 in the (+) direction and the (-) direction alternately, and the average current lavg flowing through the motor 20 is controlled by adjusting the ratio of the time during which the current flows in the (+) direction to the time during which the current flows in the (-) direction. In the first modification, all of the four switching devices Q1H, Q2L, Q2H, and Q1L are momentarily held OFF only in the period during which the direction of the motor current I is detected. However, basically, either of a pair of the switching devices Q1H and Q2L or a pair of the switching devices Q2H and Q1L are held ON.</p><p id="p0101" num="0101">In the first modification, only the processing performed by the abnormal-time motor control section 80 differs from that of the above-described embodiment. The remaining configuration is the same as that of the above-described embodiment. Hereinafter, there will be described the processing performed by the abnormal-time motor control section 80. <figref idrefs="f0009">FIG. 11</figref> is a flowchart showing an abnormal-time motor control routine according to the first modification which is executed by the abnormal-time motor control section 80.<!-- EPO <DP n="47"> --></p><p id="p0102" num="0102">When the abnormal-time motor control routine according to the first modification starts, in step S31, the abnormal-time motor control section 80 first reads the steering torque tr detected by the steering torque sensor 21. Next, in step S32, on the basis of the steering torque tr, the abnormal-time motor control section 80 sets a normal-direction ON time T01 for adjusting the time during which current is caused to flow in such a direction that the motor 20 rotates in the normal direction; and a reverse-direction ON time T02 for adjusting the time during which current is caused to flow in such a direction that the motor 20 rotates in the reverse direction.</p><p id="p0103" num="0103">The abnormal-time motor control section 80 stores an on-time setting map shown in <figref idrefs="f0010">FIG. 12</figref>, and sets the normal-direction ON time T01 and the reverse-direction ON time T02 with reference to this on-time setting map. The on-time setting map has a property that the normal-direction ON time T01 is longer than the reverse-direction ON time T02 in the case where the steering torque tr assumes a positive value, and the reverse-direction ON time T02 is longer than the normal-direction ON time T01 in the case where the steering torque tr assumes a negative value. In the case where the steering torque tr is zero, the abnormal-time motor control section 80 sets the normal-direction ON time T01 and the reverse-direction ON time T02 to the same value. In addition, the abnormal-time motor control section 80 sets the normal-direction ON time T01 to a value which increases with the steering torque tr within the range where the steering torque tr is greater than a predetermined negative value -tr1, and sets it to zero within the range where the steering torque tr is equal to or less than the<!-- EPO <DP n="48"> --> predetermined negative value -tr1. The abnormal-time motor control section 80 sets the reverse-direction ON time T02 to a value which increases as the steering torque tr decreases (increase in the negative direction) within the range where the steering torque tr is less than a predetermined positive value +tr1, and sets it to zero within the range where the steering torque tr is equal to or greater than the predetermined positive value +tr1. In addition, an upper limit T0max is set for both the normal-direction ON time T01 and the reverse-direction ON time T02.</p><p id="p0104" num="0104">Next, in step S33, the abnormal-time motor control section 80 outputs the ON instruction signal for turning ON the switching devices Q1 H and Q2L and the OFF instruction signal for turning OFF the switching devices Q2H and Q1 L. As a result, the current supplied from the power supply apparatus 200 starts to flow through the motor 20 in the (+) direction. Notably, when this routine starts, all the switching devices Q1 H, Q2L, Q2H, and Q1 L are held OFF.</p><p id="p0105" num="0105">Next, in step S34, the abnormal-time motor control section 80 starts counting time, and waits until the time elapsed after output of the instruction signals to the switching devices Q1 H, Q2L, Q2H, and Q1 L reaches the normal-direction ON time T01. During this period, there increases the current flowing through the motor 20 in the (+) direction. After detecting elapse of the normal-direction ON time T01 (S34: Yes), in step S35, the abnormal-time motor control section 80 outputs the OFF instruction signals for turning OFF the switching devices Q1 H and Q2L and the ON instruction signals for turning ON the switching devices Q2H and Q1 L. That is, the<!-- EPO <DP n="49"> --> abnormal-time motor control section 80 outputs instruction signals for inverting the states of the switching devices Q1 H, Q2L, Q2H, and Q1 L such that a current flows through the motor 20 in a direction opposite the direction in which the current has been flowing. As a result, the motor current I which has been increasing in the (+) direction starts to decrease.</p><p id="p0106" num="0106">Next, in step S50, the abnormal-time motor control section 80 performs current direction determination processing. <figref idrefs="f0011">FIG. 13</figref> shows a subroutine representing this current direction determination processing. When the current direction determination processing starts, the abnormal-time motor control section 80 first determines whether or not now is the timing to detect the flow direction of the motor current I. In the first modification, the abnormal-time motor control section 80 estimates that the motor current I is zero by detecting reverse of the flow direction of the motor current I. Upon elapse of the normal-direction ON time T01 or the reverse-direction ON time T02 after the time at which the reverse of the flow direction was detected, the abnormal-time motor control section 80 inverts the direction in which electricity is supplied to the motor 20, to thereby cause a continuous current having a triangular waveform to flow through the motor 20. However, during the period in which the switching devices Q1 H and Q2L or the switching devices Q2H and Q1 L are held ON, the abnormal-time motor control section 80 cannot detect the flow direction of the motor current I from the motor voltage Vm detected by the voltage sensor 32. To solve this drawback, in this abnormal-time motor control routine, the abnormal-time motor control section 80 momentarily turns OFF the four switching devices Q1H, Q2L, Q2H, and Q1L at regular intervals so as to<!-- EPO <DP n="50"> --> detect the direction of the motor current I from the motor voltage Vm at that time. The purpose of the determination made in step S51 is to determine whether now is the timing for regularly detecting the direction of the motor current I.</p><p id="p0107" num="0107">In step S51, the abnormal-time motor control section 80 waits for the timing to detect the direction of the motor current I. The cycle of the detection timing is predetermined. Accordingly, arrival of the detection timing can be determined from the elapsed time counted by the timer. When the timing to detect the direction of the motor current I is reached (S51: Yes), in step S52, the abnormal-time motor control section 80 outputs the OFF instruction signals for turning OFF all the switching devices Q1 H, Q2L, Q2H, and Q1 L. As a result, the switching devices Q1 H, Q2L, Q2H, and Q1L of the motor drive circuit 40 are turned OFF. Next, in step S53, the abnormal-time motor control section 80 reads the motor voltage Vm detected by the voltage sensor 32 and the power supply voltage Vb detected by the voltage sensor 33, and then exists from this subroutine, thereby proceeding to step S36 of the main routine. Notably, if the value of the power supply voltage Vb is considered to be fixed, the step for reading the power supply voltage Vb may be omitted.</p><p id="p0108" num="0108">Next, in step S36, the abnormal-time motor control section 80 determines whether or not the direction of the motor current I has reversed on the basis of the motor voltage Vm (= V1-V2) detected by the voltage sensor 32. That is, the abnormal-time motor control section 80 determines whether or not the direction of the motor current I determined from the motor<!-- EPO <DP n="51"> --> voltage Vm detected at the preceding detection timing differs from the direction of the motor current I determined from the motor voltage Vm detected at the current detection timing. If the direction of the motor current I has not reversed (S36: No), the abnormal-time motor control section 80 returns to step S35. Accordingly, the switching devices Q2H and Q1L which have been temporarily held OFF return to their original states. Notably, each time the abnormal-time motor control section 80 performs the loop processing of steps S35 and S36, the abnormal-time motor control section 80 memorizes the direction of the motor current I determined from the motor voltage Vm. Next, in step S36, the abnormal-time motor control section 80 compares the direction of the motor current I detected during the preceding loop processing with the direction of the motor current I detected during the current loop processing, to thereby determine whether or not the direction of the motor current I has reversed.</p><p id="p0109" num="0109">Thus, the switching devices Q1 H, Q2L, Q2H, and Q1 L are temporarily held OFF at predetermined intervals, and the direction of the motor current I is determined from the motor voltage Vm at that time. After determining that the direction of the motor current I has changed through repetition of the above-described processing (S36: Yes), in the subsequent step S37, the abnormal-time motor control section 80 outputs the ON instruction signals for turning ON the switching devices Q2H and Q1 L, to thereby place the four switching devices Q1 H, Q2L, Q2H, and Q1 L in their original states (with the switching devices Q1 H and Q2L held OFF).</p><p id="p0110" num="0110">Next, in step S38, the abnormal-time motor control section 80 starts<!-- EPO <DP n="52"> --> counting time, and waits until the elapsed time after the detection of reverse of the direction of the motor current I reaches the reverse-direction ON time T02. During this period, there increases the current flowing through the motor 20 in the (-) direction. After detecting elapse of the reverse-direction ON time T02 (S38: Yes), in step S39, the abnormal-time motor control section 80 outputs the ON instruction signals for turning ON the switching devices Q1H and Q2L and the OFF instruction signals for turning OFF the switching devices Q2H and Q1 L. That is, the abnormal-time motor control section 80 outputs the instruction signals for inverting the states of the switching devices Q1H, Q2L, Q2H, and Q1 L such that a current flows in a direction opposite the direction in which the current has been flowing. As a result, the motor current I which has increased in the (-) direction starts to decrease.</p><p id="p0111" num="0111">Next, in step S50, the abnormal-time motor control section 80 performs the above-described current direction determination processing. That is, the abnormal-time motor control section 80 temporarily places all the switching devices Q1 H, Q2L, Q2H, and Q1 L in the OFF state at predetermined intervals, and reads the motor voltage Vm and the power supply voltage Vb in order to determine the direction of the motor current I on the basis of the current motor voltage Vm (= V1-V2).</p><p id="p0112" num="0112">Just like in step S36, in step S40, the abnormal-time motor control section 80 determines whether or not the direction of the motor current I has reversed. The abnormal-time motor control section 80 repeatedly performs this processing until the direction of the motor current I reverses. After<!-- EPO <DP n="53"> --> detecting reverse of the direction of the motor current I (S40: Yes), the abnormal-time motor control section 80 returns to step S31.</p><p id="p0113" num="0113"><figref idrefs="f0012">FIG. 14</figref> is a graph showing changes in the switch command signals, the motor voltage Vm, and the motor current I during execution of the abnormal-time motor control routine according to the first modification. The motor current I changes such that it has a triangular waveform. One cycle of the triangular waveform corresponds to a period during which the processing of steps S31 to S40 of the above-described abnormal-time motor control routine is performed one time. This graph shows an example of the case where the steering torque tr assumes a positive value; that is, a current is caused to flow through the motor 20 in the (+) direction. Accordingly, the normal rotation ON time T01 is set to be longer than the reverse rotation ON time T02.</p><p id="p0114" num="0114">For example, if reverse of the direction of the motor current I is detected at time t1, the switching devices Q1 H and Q2L are held ON until the normal rotation ON time T01 elapses after time t1. <figref idrefs="f0013">FIG. 15</figref> is an enlarged view of the hatched portion around time t1 in <figref idrefs="f0012">FIG. 14</figref>. As a result, the motor current I increases. Subsequently, at time t2 after elapse of the normal rotation ON time T01, states of the switching devices Q1H, Q2L, Q2H, and Q1L are inverted. That is, the switching devices Q2H and Q1L are turned ON, and the switching devices Q1 H and Q2L are turned OFF. Since the normal rotation ON time T01 is set to a value corresponding to the steering torque tr, the peak value of the motor current I at the time when the states of the switching devices Q1 H, Q2L, Q2H, and Q1 L are inverted<!-- EPO <DP n="54"> --> increases with the steering torque tr.</p><p id="p0115" num="0115">The motor current I starts to decrease at time t2. The abnormal-time motor control section 80 starts detecting the direction of the motor current I at predetermined intervals. In this case, each time the timing for detecting the direction of the motor current I comes, the four switching devices Q1 H, Q2L, Q2H, and Q1 L are brought into the OFF state temporarily. Since this temporary OFF state continues for only a short period of time, in <figref idrefs="f0012">FIG. 14</figref>, the OFF state is represented by a line having no time width. The motor current I decreases, and its flow direction reverses to the (-) direction at time t3. After detection of the reverse of the direction of the motor current I at time t4, the switching devices Q2H and Q1 L are held ON until the reverse rotation ON time T02 elapses from time t4. As a result, the motor current I flowing in the (-) direction increases. Subsequently, at time t5 after elapse of the reverse rotation ON time T02, the states of the switching devices Q1 H, Q2L, Q2H, and Q1 L are inverted. That is, the switching devices Q1 H and Q2L are turned ON, and the switching devices Q2H and Q1L are turned OFF. As a result, the motor current I starts to increase. Subsequently, the abnormal-time motor control section 80 starts detecting the direction of the motor current I at predetermined intervals. When the direction of the motor current I reverses at time t6, the switching devices Q1 H and Q2L are held ON until the normal rotation ON time T01 elapses from time t7 at which reverse of the direction of the current I has been detected.</p><p id="p0116" num="0116">In <figref idrefs="f0012">FIG. 14</figref>, T11 and T12 shown represent the periods from the time<!-- EPO <DP n="55"> --> at which the states of the switching devices Q1 H, Q2L, Q2H, and Q1 L are inverted to the time at which the motor current I becomes zero, and are determined on the basis of the circuit equation for the motor 20. Accordingly, the average current lavg flowing through the motor 20 is set in accordance with the normal rotation ON time T01 and the reverse rotation ON time T02. By means of setting the normal rotation ON time T01 and the reverse rotation ON time T02 to the values corresponding to the steering torque tr, an average current lavg corresponding to the steering torque can be caused to flow through the motor 20.</p><p id="p0117" num="0117">According to the above-described first modification, the average current lavg can be controlled by causing current to flow through the motor 20 in the (+) and (-)directions alternately and adjusting the ratio between the normal rotation ON time T01 during which current flows in the (+) direction and the reverse rotation ON time T02 during which current flows in the (-) direction. Accordingly, even in the case where the magnitude of the steering torque is small, the cycle of the motor current I having a triangular waveform can be rendered long. As a result, the period of vibration generated in the steering system can be set to be long. Thus, there can be solved the problem in that other components of the vehicle resonate with the vibration of the steering system.</p><heading id="h0008">&lt;Second modification&gt;</heading><p id="p0118" num="0118">According to the above-described embodiment, the followability of the steering assist to the steering operation can be improved. However, since the required steering torque increases with the motor rotational speed,<!-- EPO <DP n="56"> --> the driver may sense a sharp increase in steering torque during the steering operation. To solve this problem, in a second modification, the abnormal-time motor control section 80 estimates the motor rotational speed ω, and forcedly increases the ON time T0 in the case where the magnitude |ω| of the motor rotational speed ω is large, to thereby reduce the sharp increase in steering torque that a driver senses during the steering operation.</p><p id="p0119" num="0119">In the second modification, only the processing performed by the abnormal-time motor control section 80 differs from that of the above-described embodiment. The remaining configuration is the same as that of the above-described embodiment. <figref idrefs="f0014">FIG. 16</figref> is a flowchart showing a modified portion of the abnormal-time motor control routine executed by the abnormal-time motor control section 80 according to the second modification. In the second modification, the steps S21 to S25 shown in <figref idrefs="f0014">FIG. 16</figref> are added between the steps S16 and S17 of the abnormal-time motor control routine (<figref idrefs="f0005">FIG. 5</figref>) of the embodiment. Hereunder, there will be described the processing of the above-described modified portion executed by the abnormal-time motor control section 80.</p><p id="p0120" num="0120">Upon determining that the motor current I has become zero (S13: Yes), the abnormal-time motor control section 80 executes steps S14 to S16. In the case where the abnormal-time motor control section 80 has determined in step S16 that the ON time T0 is not zero, in step S21, the abnormal-time motor control section 80 calculates the motor rotational speed ω. This step S21 is executed when the motor current I is<!-- EPO <DP n="57"> --> determined to be zero. Accordingly, the current motor voltage Vm (= V1-V2) is equal to the counter electromotive voltage of the motor 20. Therefore, in step S21, the abnormal-time motor control section 80 calculates the motor rotational speed ω by dividing the motor voltage Vm by the counter electromotive voltage constant φ.</p><p id="p0121" num="0121">Next, in step S22, the abnormal-time motor control section 80 calculates a correction coefficient Kω corresponding to the magnitude |ω| of the motor rotational speed ω. The abnormal-time motor control section 80 stores a correction coefficient setting map shown in <figref idrefs="f0015">FIG. 17</figref>. This correction coefficient setting map has a property that the correction coefficient Kω increases with the magnitude |ω| of the motor rotational speed ω. The abnormal-time motor control section 80 calculates the correction coefficient Kω with reference to the correction coefficient setting map.</p><p id="p0122" num="0122">Next, in step S23, the abnormal-time motor control section 80 sets, as a new ON time T0, the value calculated by multiplying the ON time T0 set in step S15 by the correction coefficient Kω (T0 = T0×Kω). Next, in step S24, the abnormal-time motor control section 80 determines whether or not the corrected ON time T0 is greater than the upper limit T0max. In the case where the ON time T0 is greater than the upper limit T0max (S24: Yes), in step S25, the abnormal-time motor control section 80 sets the ON time T0 to the upper limit T0max (T0 = T0max). In the case where the ON time T0 is not greater than the upper limit T0max (S24: No), the abnormal-time motor control section 80 skips step S25.</p><p id="p0123" num="0123"><!-- EPO <DP n="58"> --> After setting the ON time T0 as mentioned above, the abnormal-time motor control section 80 executes the above-described step S17 and steps subsequent thereto.</p><p id="p0124" num="0124">According to the above-described second modification, the abnormal-time motor control section 80 estimates the motor rotational speed ω, and corrects the ON time T0 such that the ON time T0 increases with the magnitude |ω| of the motor rotational speed ω. Accordingly, the sharp increase in steering torque that a driver senses during the steering operation can be reduced.</p><p id="p0125" num="0125">Notably, when the inter-terminal voltage of the motor 20 is detected, a problem occurs depending on the configuration of the detection circuit. Specifically, when all the switching devices Q1H, Q2L, Q2H, and Q1L are held OFF, the voltages of the electricity supply terminals 20a and 20b of the motor 20 may become unstable, or the voltage of either one of the electricity supply terminals (20a or 20b) may become negative. In such a case, preferably, any one of the switching devices Q1H, Q2L, Q2H, and Q1L is held ON with the remaining three switching devices held OFF during the period T1 and at a later time at which the counter electromotive voltage is measured. For example, preferably, the switching device Q2H or Q1L is held ON in the case of normal rotation (current is caused to flow in the (+) direction), and the switching device Q1H or Q2L is held ON in the case of reverse rotation (current is caused to flow in the (-) direction).</p><heading id="h0009">&lt;Third modification&gt;</heading><!-- EPO <DP n="59"> --><p id="p0126" num="0126">In the above-described embodiment, during the ON time T0 (also referred to as ON period T0), the switching devices Q1H and Q2L or the switching devices Q2H and Q1L are continuously held ON. However, depending on the configuration of the motor drive circuit 40, there may be a case where the switching device Q1H or Q2H of the upper arm circuit 45H cannot be held ON for a long period of time. In such a case, as shown in <figref idrefs="f0016">FIG. 18</figref>, preferably, the abnormal-time motor control section 80 turns ON one pair of switching device, and turns OFF the other pair of switching devices at appropriate intervals during each ON period T0. <figref idrefs="f0016">FIG. 18</figref> shows an example of a case where the motor 20 is driven in the normal rotation direction. In this example, the abnormal-time motor control section 80 periodically inserts periods during which the switching devices Q1H and Q2L are temporarily held OFF in the ON period T0 during which the switching devices Q1 H and Q2L are held ON, and turns ON the other switching devices Q2H and Q1L during the inserted periods. Notably, when the motor 20 is driven in the reverse rotation direction, switch command signals are output to the opposite switching devices.</p><p id="p0127" num="0127">In this case, when counting the elapsed ON time T0 in step S20 of abnormal-time motor control routine, the abnormal-time motor control section 80 may not add to the elapsed time the periods during which the switching devices are held OFF (mode 1), or subtract from the elapsed time the periods during which the switching devices are held OFF (mode 2). The graph shown in the lower part of <figref idrefs="f0016">FIG. 18</figref> shows changes in count values of elapsed times in the modes 1 and 2. When a count value reaches the ON time T0, in step S20, the abnormal-time motor control section 80<!-- EPO <DP n="60"> --> makes a "Yes" determination.</p><p id="p0128" num="0128">Notably, in the above-described third modification, OFF periods are periodically inserted in the ON period T0 during which one switching device pair (the switching devices Q1 H and Q2L or the switching devices Q2H and Q1 L) is held ON, and the other switching device pair (the switching devices Q2H and Q1L or the switching devices Q1 H and Q2L) is turned ON during the inserted OFF periods. However, the other switching device pair (the switching devices Q2H and Q1L or the switching devices Q1H and Q2L) need not necessarily be brought into the ON state, and may be held OFF.</p><p id="p0129" num="0129">The above-described third modification reduces the restriction on the design of the motor drive circuit 40. Accordingly, various motor drive circuits can be employed.</p><heading id="h0010">&lt;Fourth modification&gt;</heading><p id="p0130" num="0130">In the above-described embodiment, the ON time T0 is set by use of the on-time setting map shown in <figref idrefs="f0006">FIG. 6 or FIG. 7</figref>; however, the ON time T0 may be changed not only with the magnitude |tr| of the steering torque tr but also the vehicle speed. For example, as shown in <figref idrefs="f0017">FIG. 19</figref>, a map for determining the ON time T0 from the magnitude |tr| of the steering torque tr may be provided for each of low and high vehicle speed ranges, and the ON time T0 for the high vehicle speed range may be rendered shorter than that for the low vehicle speed range. In addition, the ON time T0 characteristic may be switched, depending on the vehicle speed, among three or more characteristics, rather than between two characteristics as described above.</p><p id="p0131" num="0131"><!-- EPO <DP n="61"> --> In this case, in step S14 of the abnormal-time motor control routine, the abnormal-time motor control section 80 preferably reads the vehicle speed vx detected by the vehicle sensor 22 in addition to the steering torque tr. In step S15, preferably, the abnormal-time motor control section 80 sets the ON time T0 on the basis of the vehicle speed vx and the magnitude |tr| of the steering torque tr through use of the on-time setting map corresponding to the vehicle speed vx.</p><p id="p0132" num="0132">According to the above-described fourth modification, steering does not become too light during high-speed traveling of the vehicle, thereby improving the steering feel.</p><heading id="h0011">&lt;Fifth modification&gt;</heading><p id="p0133" num="0133">When the steering wheel 11 is rotated to the stroke end, the stopper 18 abuts against the corresponding end of the rack housing 16, thereby mechanically restricting the stroke of horizontal motion of the rack bar 14. This state is referred to as "stopper butting." When the steering wheel 11 is rotated quickly and the steering position reaches the stroke end, due to the stopper butting, the rotation of the motor 20 stops suddenly. Therefore, the counter electromotive force of the motor 20 disappears suddenly. As a result, the current flowing through the motor 20 increases sharply, and a current surge may be generated. In order to protect the circuit from such a current surge, the upper limit T0max of the ON time T0 is set. Accordingly, the upper limit T0max restricts the maximum assist quantity.</p><p id="p0134" num="0134">In order to solve such a drawback, in a fifth modification, a<!-- EPO <DP n="62"> --> determination is made as to whether or not the steering position is close to the stroke end, and only when the steering position is close to the stroke end, the upper limit T0max is lowered, thereby realizing circuit protection and a sufficient degree of steering assist at the same time.</p><p id="p0135" num="0135">In the fifth modification as well, only the processing performed by the abnormal-time motor control section 80 differs from that of the above-described embodiment. The remaining configuration is the same as that of the above-described embodiment. <figref idrefs="f0018">FIG. 20</figref> is a flowchart showing a modified portion of the abnormal-time motor control routine executed by the abnormal-time motor control section 80 according to the fifth modification. In the fifth modification, the steps S61 to S64 are added between the steps S16 and S17 of the abnormal-time motor control routine (<figref idrefs="f0005">FIG. 5</figref>) of the embodiment. Hereinafter, there will be described the processing of the modified portion of the abnormal-time motor control routine performed by the abnormal-time motor control section 80.</p><p id="p0136" num="0136">When the abnormal-time motor control section 80 has determined in step S16 that the ON time T0 is not zero, in step S61, it calculates a steering angle θ. For example, the abnormal-time motor control section 80 acquires information representing wheel speeds of the left and right rear wheels, and estimates (through calculation) the steering angle θ from the wheel speeds using the following expression (11). <maths id="math0019" num="(11)"><math display="block"><mi>θ</mi><mo>=</mo><mi>G</mi><mo>⋅</mo><msup><mi>tan</mi><mrow><mo>-</mo><mn>1</mn></mrow></msup><mo>⁢</mo><mfenced><mfrac><mrow><mn>2</mn><mo>⁢</mo><mi>b</mi><mo>⁢</mo><mfenced separators=""><msub><mi>V</mi><mn>1</mn></msub><mo>-</mo><msub><mi>V</mi><mn>2</mn></msub></mfenced></mrow><mrow><mi>a</mi><mo>⁢</mo><mfenced separators=""><msub><mi>V</mi><mn>1</mn></msub><mo>+</mo><msub><mi>V</mi><mn>2</mn></msub></mfenced></mrow></mfrac></mfenced></math><img id="ib0019" file="imgb0019.tif" wi="84" he="18" img-content="math" img-format="tif"/></maths> In the expression give above, as shown in <figref idrefs="f0019">FIG. 21</figref>, V1 represents<!-- EPO <DP n="63"> --> the rotational speed of the left rear wheel RW1, V2 represents the rotational speed of the right rear wheel RW2, G represents the gear ratio of the gear train between the motor 20 and the front wheels (FW1, FW2), a represents the tread between the left or right rear wheels (RW1, RW2), and b represents the wheelbase.</p><p id="p0137" num="0137">Next, in step S62, the abnormal-time motor control section 80 calculates the upper limit T0max of the ON time T0 corresponding to the magnitude |θ| of the steering angle θ. The abnormal-time motor control section 80 stores an ON time upper limit setting map shown in <figref idrefs="f0020">FIG. 22</figref>. The ON time upper limit setting map has a property that the upper limit T0max decreases as the magnitude |θ| of the steering angle θ increases after the magnitude |θ| of the steering angle θ becomes larger than a set angle θ1, and the upper limit T0max becomes the minimum after the magnitude |θ| becomes larger than a set angle θ2 (&gt; θ1) near the stroke end. That is, the ON time upper limit setting map has a property that the upper limit T0max used in a steering angle range near the stroke end is smaller than the upper limit T0max used in a steering angle range located away from the stroke end.</p><p id="p0138" num="0138">Next, in step S63, the abnormal-time motor control section 80 determines whether or not the ON time T0 set in step S15 is greater than the upper limit T0max, and when the On time T0 is greater than the upper limit T0max (S63: Yes), in step S64, the abnormal-time motor control section 80 sets the ON time T0 to the upper limit T0max (T0 = T0max). In contrast, when the ON time T0 is not greater than the upper limit T0max<!-- EPO <DP n="64"> --> (S63: No), the abnormal-time motor control section 80 skips step S64.</p><p id="p0139" num="0139">After setting the ON time T0 as mentioned above, the abnormal-time motor control section 80 executes the above mentioned step S17 and steps subsequent thereto.</p><p id="p0140" num="0140">According to the above-described fifth modification, the steering angle θ is estimated, and when it is determined on basis of the magnitude |θ| of the estimated steering angle θ that the steering position is close to the stroke end, the upper limit T0max of the ON time T0 is lowered. By virtue of this operation, the average current lavg flowing through the motor 20 is reduced before the stopper butting occurs. Therefore, even when the stopper butting occurs, the current surge can be suppressed. Also, in a situation where such stopper butting does not occur, the current limit of the motor 20 is relaxed. As a result, circuit protection and a sufficient degree of operation assist can be realized at the same time. Notably, if the steering mechanism 10 is provided with a rotational angle sensor that can detect the steering angle θ, the steering angle θ may be detected by use of this rotational angle sensor.</p><p id="p0141" num="0141">In the above, the electric power steering apparatuses 1 according to the present embodiment and its modifications have been described. However, the present invention is not limited to the above-described embodiment, and can be modified in various ways without departing from the scope of the present invention.</p><p id="p0142" num="0142"><!-- EPO <DP n="65"> --> For example, in the present embodiment, MOS-FETs are used as the switching devices Q1 H, Q2H, Q1 L, and Q2L provided in the motor drive circuit 40 (H-bridge circuit). Beside the MOS-FETs, other types of switching semiconductor devices may be used.</p><p id="p0143" num="0143">In addition, in the present embodiment, the inter-terminal voltage Vm of the motor 20 is detected directly. However, the present embodiment may be configured such that there are provided a voltage sensor for detecting the potential V1 at the electricity supply terminal 20a and a voltage sensor for detecting the potential V2 at the electricity supply terminal 20b, and the inter-terminal voltage Vm is detected by calculating the difference (V1-V2) between the potentials detected by these voltage sensors.</p><p id="p0144" num="0144">In addition, in the present embodiment, the target assist torque t*, the ON time T0, the correction coefficient Kω, and the upper limit T0max are set by use of the assist map, the on-time setting map, the correction coefficient setting map, and the ON time upper limit setting map. In place of these maps, expressions using a function, etc. may be employed.</p><p id="p0145" num="0145">In the present embodiment, there has been described the electric power steering apparatus 1 of a column assist type in which the torque generated by the motor 20 is applied to the steering shaft 12. However, the electric power steering apparatus may be of a rack assist type in which the torque generated by the motor is applied to the rack bar 14.</p><p id="p0146" num="0146">In addition, the above-described first to fifth modifications may be<!-- EPO <DP n="66"> --> combined arbitrarily.</p></description><claims mxw-id="PCLM56977108" lang="EN" load-source="patent-office"><!-- EPO <DP n="67"> --><claim id="c-en-0001" num="0001"><claim-text>An electric power steering apparatus comprising:
<claim-text>steering torque detection means for detecting steering torque input from a steering wheel to a steering shaft;</claim-text>
<claim-text>a motor provided in a steering mechanism and generating steering assist torque;</claim-text>
<claim-text>a motor drive circuit composed of an H bridge circuit including switching devices for normal rotation which are turned on so as to drive the motor in a normal rotation direction and switching devices for reverse rotation which are turned on so as to drive the motor in a reverse rotation direction;</claim-text>
<claim-text>motor current detection means for detecting motor current flowing through the motor;</claim-text>
<claim-text>anomaly detection means for detecting an anomaly of the motor current detection means;</claim-text>
<claim-text>normal-time motor control means, operable when the anomaly of the motor current detection means is not detected, for controlling the motor drive circuit by current feedback control based on a target current set in accordance with the steering torque detected by the steering torque detection means and the motor current detected by the motor current detection means; and</claim-text>
<claim-text>abnormal-time motor control means, operable when the anomaly of the motor current detection means is detected, for controlling the motor drive circuit on the basis of the steering torque, detected by the steering torque detection means, without use of the current feedback control,<!-- EPO <DP n="68"> --></claim-text>
<claim-text>the electric power steering apparatus being <b>characterized in that</b> the abnormal-time motor control means includes:
<claim-text>an off-state-voltage detection section which detects voltage between terminals of the motor in a state in which the motor drive circuit is controlled so as not to apply a power supply voltage between the terminals of the motor;</claim-text>
<claim-text>a current-zero timing detection section which detects a timing at which the current flowing through the motor becomes zero on the basis of the voltage between the terminals of the motor detected by the off-state-voltage detection section;</claim-text>
<claim-text>an energization time setting section which sets an energization time corresponding to the steering torque detected by the steering torque detection means; and</claim-text>
<claim-text>a switching control section which turns on the switching devices for normal rotation or the switching devices for reverse rotation for the energization time, set by the energization time setting section, every time the current-zero timing detection section detects the timing at which the current flowing through the motor becomes zero.</claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>An electric power steering apparatus according to claim 1, wherein the current-zero timing detection section detects, as the timing at which the current flowing through the motor becomes zero, at least one of a timing at which the voltage between the terminals of the motor is detected to assume a value between a positive-direction determination voltage level at which the flow direction of the current flowing through the motor can be determined as a positive direction and a negative-direction determination voltage level at<!-- EPO <DP n="69"> --> which the flow direction of the current flowing through the motor can be determined as a negative direction, and a timing at which the voltage between the terminals of the motor is detected to have changed from the positive-direction determination voltage level to the negative-direction determination voltage level or have changed from the negative-direction determination voltage level to the positive-direction determination voltage level.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>An electric power steering apparatus according to claim 1 or 2, wherein the switching control section selectively turns on the switching devices for normal rotation or the switching devices for reverse rotation in accordance with a rotational direction corresponding to the direction of the steering torque, for the energization time set by the energization time setting section.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>An electric power steering apparatus according to claim 1 or 2, wherein<br/>
the energization time setting section individually sets the energization time of the switching devices for normal rotation and the energization time of the switching devices for reverse rotation in accordance with the steering torque detected by the steering torque detection means; and<br/>
the switching control section alternately turns on the switching devices for normal rotation and the switching devices for reverse rotation for the individually set energization times every time the timing at which the current flowing through the motor becomes zero is detected.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>An electric power steering apparatus according to any one of claims 1<!-- EPO <DP n="70"> --> to 4, further comprising:
<claim-text>a rotational speed estimation section which operates, when the current-zero timing detection section detects the timing at which the current flowing through the motor becomes zero, so as to estimate the rotational speed of the motor on the basis of the voltage between the terminals of the motor detected by the off-state-voltage detection section before the switching devices for normal rotation or the switching devices for reverse rotation are turned on; and</claim-text>
<claim-text>an energization time correction section which corrects the energization time on the basis of the rotational speed of the motor estimated by the rotational speed estimation section such that in the case where the rotational speed is high, the energization time becomes longer as compared with the case where the rotational speed is low.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>An electric power steering apparatus according to any one of claims 1 to 5, wherein<br/>
an upper limit is set for the energization time; and the electric power steering apparatus further comprises:
<claim-text>a steering position detection section which detects steering position; and</claim-text>
<claim-text>an upper limit change section which changes the upper limit of the energization time such that in the case where the steering position detected by the steering position detection section is close to a stroke end which mechanically defines an end of a steerable range, the upper limit decreases as compared with the case where the detected steering position is located away from the stroke end.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667826" load-source="patent-office"><!-- EPO <DP n="71"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="142" he="210" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="72"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="147" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="73"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="104" he="152" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="74"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="153" he="121" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="75"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="144" he="207" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="76"> --><figure id="f0006" num="6,7"><img id="if0006" file="imgf0006.tif" wi="163" he="226" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="77"> --><figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="165" he="131" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="78"> --><figure id="f0008" num="9,10"><img id="if0008" file="imgf0008.tif" wi="165" he="221" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="79"> --><figure id="f0009" num="11"><img id="if0009" file="imgf0009.tif" wi="94" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="80"> --><figure id="f0010" num="12"><img id="if0010" file="imgf0010.tif" wi="129" he="128" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="81"> --><figure id="f0011" num="13"><img id="if0011" file="imgf0011.tif" wi="91" he="121" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="82"> --><figure id="f0012" num="14"><img id="if0012" file="imgf0012.tif" wi="148" he="184" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="83"> --><figure id="f0013" num="15"><img id="if0013" file="imgf0013.tif" wi="151" he="117" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="84"> --><figure id="f0014" num="16"><img id="if0014" file="imgf0014.tif" wi="98" he="187" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="85"> --><figure id="f0015" num="17"><img id="if0015" file="imgf0015.tif" wi="134" he="116" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="86"> --><figure id="f0016" num="18"><img id="if0016" file="imgf0016.tif" wi="141" he="208" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="87"> --><figure id="f0017" num="19"><img id="if0017" file="imgf0017.tif" wi="138" he="116" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="88"> --><figure id="f0018" num="20"><img id="if0018" file="imgf0018.tif" wi="78" he="145" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="89"> --><figure id="f0019" num="21"><img id="if0019" file="imgf0019.tif" wi="98" he="134" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="90"> --><figure id="f0020" num="22"><img id="if0020" file="imgf0020.tif" wi="131" he="120" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="230" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="165" he="230" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
