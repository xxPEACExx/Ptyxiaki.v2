<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679790-A1" country="EP" doc-number="2679790" kind="A1" date="20140101" family-id="46720312" file-reference-id="306785" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550280" ucid="EP-2679790-A1"><document-id><country>EP</country><doc-number>2679790</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-11859099-A" is-representative="YES"><document-id mxw-id="PAPP154824203" load-source="docdb" format="epo"><country>EP</country><doc-number>11859099</doc-number><kind>A</kind><date>20110224</date><lang>JA</lang></document-id><document-id mxw-id="PAPP182063449" load-source="docdb" format="original"><country>EP</country><doc-number>11859099.1</doc-number><date>20110224</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140451411" ucid="JP-2011054140-W" linkage-type="A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011054140</doc-number><kind>W</kind><date>20110224</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2019228616" load-source="docdb">F02D  11/10        20060101ALI20150922BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2019229295" load-source="docdb">F02D  45/00        20060101AFI20150922BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2019231107" load-source="docdb">F02D  41/00        20060101ALI20150922BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2019231785" load-source="docdb">F02D  41/30        20060101ALN20150922BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2019232714" load-source="docdb">F02D  37/02        20060101ALI20150922BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-2019233289" load-source="docdb">F02D  43/00        20060101ALI20150922BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2032328221" load-source="docdb" scheme="CPC">F02D  41/00        20130101 FI20140206BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119720291" load-source="docdb" scheme="CPC">F02D2250/18        20130101 LA20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119720736" load-source="docdb" scheme="CPC">F02D  43/00        20130101 LA20140923BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119720768" load-source="docdb" scheme="CPC">F02D2250/21        20130101 LA20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119722744" load-source="docdb" scheme="CPC">Y02T  10/42        20130101 LA20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119726344" load-source="docdb" scheme="CPC">F02D2200/0625      20130101 LA20140923BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119726822" load-source="docdb" scheme="CPC">F02D  37/02        20130101 LI20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119726930" load-source="docdb" scheme="CPC">F02D  41/0002      20130101 LI20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119727517" load-source="docdb" scheme="CPC">F02D  11/105       20130101 LI20140924BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132183324" lang="DE" load-source="patent-office">STEUERVORRICHTUNG FÜR EINEN VERBRENNUNGSMOTOR</invention-title><invention-title mxw-id="PT132183325" lang="EN" load-source="patent-office">INTERNAL COMBUSTION ENGINE CONTROL APPARATUS</invention-title><invention-title mxw-id="PT132183326" lang="FR" load-source="patent-office">APPAREIL DE COMMANDE DE MOTEUR À COMBUSTION INTERNE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918166416" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOYOTA MOTOR CO LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918152392" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name></addressbook></applicant><applicant mxw-id="PPAR918992987" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>TOYOTA JIDOSHA KABUSHIKI KAISHA</last-name><iid>101357811</iid><address><street>1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918163069" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>YOSHIZAKI SATOSHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918148363" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>YOSHIZAKI, SATOSHI</last-name></addressbook></inventor><inventor mxw-id="PPAR918979095" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>YOSHIZAKI, SATOSHI</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918136946" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>OKAZAKI SHUNTARO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918153004" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>OKAZAKI, SHUNTARO</last-name></addressbook></inventor><inventor mxw-id="PPAR918991593" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>OKAZAKI, SHUNTARO</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918154006" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>SHIBAYAMA MASASHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918133059" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>SHIBAYAMA, MASASHI</last-name></addressbook></inventor><inventor mxw-id="PPAR918991353" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>SHIBAYAMA, MASASHI</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918141591" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>SHOKATSU KAORU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918159530" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>SHOKATSU, KAORU</last-name></addressbook></inventor><inventor mxw-id="PPAR918983352" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>SHOKATSU, KAORU</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918149178" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>KAWAKAMI HAJIME</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918148026" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>KAWAKAMI, HAJIME</last-name></addressbook></inventor><inventor mxw-id="PPAR918993415" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>KAWAKAMI, HAJIME</last-name><address><street>c/o Toyota Jidosha Kabushiki Kaisha 1, Toyota-cho,</street><city>Toyota-shi, Aichi-ken, 471-8571</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918986804" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Kuhnen &amp; Wacker</last-name><iid>101158360</iid><address><street>Patent- und Rechtsanwaltsbüro Prinz-Ludwig-Strasse 40A</street><city>85354 Freising</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2011054140-W"><document-id><country>JP</country><doc-number>2011054140</doc-number><kind>W</kind><date>20110224</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012114495-A1"><document-id><country>WO</country><doc-number>2012114495</doc-number><kind>A1</kind><date>20120830</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548906585" load-source="docdb">AL</country><country mxw-id="DS548810528" load-source="docdb">AT</country><country mxw-id="DS548906590" load-source="docdb">BE</country><country mxw-id="DS548904994" load-source="docdb">BG</country><country mxw-id="DS548912201" load-source="docdb">CH</country><country mxw-id="DS548855615" load-source="docdb">CY</country><country mxw-id="DS548810529" load-source="docdb">CZ</country><country mxw-id="DS548906591" load-source="docdb">DE</country><country mxw-id="DS548855616" load-source="docdb">DK</country><country mxw-id="DS548855617" load-source="docdb">EE</country><country mxw-id="DS548902016" load-source="docdb">ES</country><country mxw-id="DS548904995" load-source="docdb">FI</country><country mxw-id="DS548904996" load-source="docdb">FR</country><country mxw-id="DS548906592" load-source="docdb">GB</country><country mxw-id="DS548855618" load-source="docdb">GR</country><country mxw-id="DS548906593" load-source="docdb">HR</country><country mxw-id="DS548810530" load-source="docdb">HU</country><country mxw-id="DS548912202" load-source="docdb">IE</country><country mxw-id="DS548855619" load-source="docdb">IS</country><country mxw-id="DS548904997" load-source="docdb">IT</country><country mxw-id="DS548855620" load-source="docdb">LI</country><country mxw-id="DS548824826" load-source="docdb">LT</country><country mxw-id="DS548892477" load-source="docdb">LU</country><country mxw-id="DS548824827" load-source="docdb">LV</country><country mxw-id="DS548824828" load-source="docdb">MC</country><country mxw-id="DS548892478" load-source="docdb">MK</country><country mxw-id="DS548892479" load-source="docdb">MT</country><country mxw-id="DS548906602" load-source="docdb">NL</country><country mxw-id="DS548904998" load-source="docdb">NO</country><country mxw-id="DS548824829" load-source="docdb">PL</country><country mxw-id="DS548912203" load-source="docdb">PT</country><country mxw-id="DS548906603" load-source="docdb">RO</country><country mxw-id="DS548912204" load-source="docdb">RS</country><country mxw-id="DS548824830" load-source="docdb">SE</country><country mxw-id="DS548902017" load-source="docdb">SI</country><country mxw-id="DS548904999" load-source="docdb">SK</country><country mxw-id="DS548824831" load-source="docdb">SM</country><country mxw-id="DS548855621" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670947" lang="EN" load-source="patent-office"><p id="pa01" num="0001">An object of this invention is, in an internal combustion engine control apparatus whose operations are controlled by a plurality of kinds of actuators, to make it possible to ensure realization of at least a performance that is demanded with highest priority among performances being demanded of the internal combustion engine even when any one of a demanded torque, a demanded efficiency, and a demanded air-fuel ratio that are demanded values of controlled variables changes at a fast rate that exceeds a response speed of the related controlled variable with respect to an actuator. To achieve this object, when a change amount of any one of a demanded torque, a demanded efficiency, and a demanded air-fuel ratio exceeds a predetermined threshold value, an internal combustion engine control apparatus provided by this invention makes a temporary adjustment to a value of any one of a demanded torque, a demanded efficiency and instructed efficiency, and a demanded air-fuel ratio in accordance with a type of demanded engine performance that is currently being given priority among various performances demanded of the internal combustion engine. In the present control apparatus, an actuator for air amount control is operated in accordance with a target air amount calculated based on a demanded torque and a demanded efficiency, an actuator for ignition timing control is operated in accordance with an instructed efficiency, and an actuator for fuel injection amount control is operated in accordance with a demanded air-fuel ratio.<img id="iaf01" file="imgaf001.tif" wi="78" he="65" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128500320" lang="EN" source="EPO" load-source="docdb"><p>An object of this invention is, in an internal combustion engine control apparatus whose operations are controlled by a plurality of kinds of actuators, to make it possible to ensure realization of at least a performance that is demanded with highest priority among performances being demanded of the internal combustion engine even when any one of a demanded torque, a demanded efficiency, and a demanded air-fuel ratio that are demanded values of controlled variables changes at a fast rate that exceeds a response speed of the related controlled variable with respect to an actuator. To achieve this object, when a change amount of any one of a demanded torque, a demanded efficiency, and a demanded air-fuel ratio exceeds a predetermined threshold value, an internal combustion engine control apparatus provided by this invention makes a temporary adjustment to a value of any one of a demanded torque, a demanded efficiency and instructed efficiency, and a demanded air-fuel ratio in accordance with a type of demanded engine performance that is currently being given priority among various performances demanded of the internal combustion engine. In the present control apparatus, an actuator for air amount control is operated in accordance with a target air amount calculated based on a demanded torque and a demanded efficiency, an actuator for ignition timing control is operated in accordance with an instructed efficiency, and an actuator for fuel injection amount control is operated in accordance with a demanded air-fuel ratio.</p></abstract><description mxw-id="PDES63956377" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Technical Field</b></heading><p id="p0001" num="0001">The present invention relates to an internal combustion engine control apparatus whose operations are controlled by a plurality of kinds of actuators.</p><heading id="h0002"><b>Background Art</b></heading><p id="p0002" num="0002">As one of the methods for controlling an internal combustion engine, for example, as disclosed in Japanese Patent Laid-Open No. <patcit id="pcit0001" dnum="JP2009047102A"><text>2009-047102</text></patcit>, a method is known that determines a manipulated variable of each actuator by using efficiency and an air-fuel ratio as well as torque as controlled variables. As used herein, the term "efficiency" refers to a ratio of torque that is actually outputted with respect to a potential torque that the internal combustion engine can output. Further, as used herein, the term "air-fuel ratio" refers to an air-fuel ratio of an air-fuel mixture provided for combustion in the internal combustion engine. There are demands from a variety of viewpoints with respect to the torque, the<!-- EPO <DP n="2"> --> efficiency, and the air-fuel ratio as controlled variables. In the case of torque, there is torque that is demanded to satisfy an acceleration demand of a driver, and torque that is demanded for driving control, such as skid prevention and the like. In the case of efficiency, there is efficiency that is demanded for warming up a catalyst, and efficiency that is demanded for ensuring reserve torque and the like. In the case of the air-fuel ratio, there is an air-fuel ratio that is demanded in order to restore the NOx reducing ability of a catalyst quickly at the time of reversion from a fuel cut, and an air-fuel ratio that is demanded in order to improve purification performance of a catalyst during operation of the internal combustion engine and the like. According to the control apparatus (hereunder, referred to as "preceding apparatus") that is described in the aforementioned patent publication, in a case where there are a plurality of demands with respect to a single controlled variable in this manner, the final demanded controlled variable is determined by mediation. As used herein, the term "mediation" refers to a computation process for obtaining a single numerical value from a plurality of numerical values that is performed in accordance with a predetermined rule. As examples of the specific computation rule, selecting the value selection,<!-- EPO <DP n="3"> --> selecting the minimum value, averaging, or superimposing may be mentioned.</p><p id="p0003" num="0003">Realization of the final demanded controlled variables obtained by mediation, that is, a demanded torque, a demanded efficiency, and a demanded air-fuel ratio, means realization of various kinds of performance (demanded engine performance) that are demanded of the internal combustion engine, namely, running performance, exhaust gas performance, and fuel consumption performance. According to the preceding apparatus, air amount control, ignition timing control, and fuel injection amount control are executed based on the aforementioned three kinds of demanded controlled variables. In the air amount control, a slot operation is performed in accordance with a target air amount that is calculated based on the demanded torque and demanded efficiency. In the ignition timing control, an operation of an ignition apparatus is performed in accordance with a ratio of a demanded torque with respect to an estimated torque (estimated potential torque) that is calculated based on a degree of throttle opening. Further, in the fuel injection amount control, an operation of a fuel injection apparatus is performed in accordance with a demanded air-fuel ratio. That is, according to the preceding apparatus, an attempt is made to realize each<!-- EPO <DP n="4"> --> demanded controlled variable by causing three kinds of actuators to co-operate based on three kinds of demanded controlled variables.</p><p id="p0004" num="0004">However, depending on the rate of change in the demanded controlled variables, it is not necessarily the case that an effect that realizes a demanded engine performance that is the aim of the preceding apparatus can always be achieved. This is because when an operation of an actuator is related to a certain controlled variable, a limit that depends on the kind of the actuator exists with respect to a response speed of the relevant controlled variable to the operation of the actuator. For example, in the case of a throttle, the response speed of an air amount when the throttle is moved at a maximum speed is a limit response speed of the torque with respect to an operation of the throttle. In the preceding apparatus, the throttle is used as the principal actuator for controlling torque, and in a case where a change in any demanded controlled variable is faster than the limit response speed of the torque with respect to an operation of the throttle, a fluctuation in the torque that accompanies that change can not be suppressed by torque control that is performed by means of the throttle. In this respect, if ignition timing control or fuel injection amount control can cause the<!-- EPO <DP n="5"> --> torque to change more quickly, the aforementioned kind of fluctuation in the torque can be suppressed and the demanded torque can be realized. However, in this case, it is no longer possible to realize, at least temporarily, one of the demanded controlled variables other than the demanded torque, that is, one of the demanded efficiency and the demanded air-fuel ratio. Thus, in this case, it is not possible to realize the demanded engine performance that relates to the demanded efficiency or the demanded air-fuel ratio that can not be realized among the various performances that are demanded of the internal combustion engine.</p><p id="p0005" num="0005">As described in the foregoing, running performance, exhaust gas performance, and fuel consumption performance are representative of the kinds of performances demanded of an internal combustion engine. However, there is an order of priority between these kinds of performances that depends on the state of the internal combustion engine or the circumstances in which the internal combustion engine is placed. For example, although exhaust gas performance is given priority at startup of the internal combustion engine, running performance is given priority when driving control such as skid prevention is performed. Even if it is not possible to realize all of the demanded engine<!-- EPO <DP n="6"> --> performances, it is desirable to enable realization of at least the demanded engine performance that has the highest priority. However, according to the above described preceding apparatus, if any demanded controlled variable changes at a fast rate that exceeds a response speed of the relevant controlled variable with respect to an operation of an actuator, even if a demanded engine performance has the highest priority, realization thereof has not been ensured.</p><heading id="h0003">Citation List</heading><heading id="h0004"><b>Patent Literature</b></heading><p id="p0006" num="0006"><ul><li>Patent Literature 1:<br/>
Japanese Unexamined Patent Publication No. <patcit id="pcit0002" dnum="JP2009299667A"><text>2009-299667</text></patcit></li><li>Patent Literature 2:<br/>
Japanese Unexamined Patent Publication No. <patcit id="pcit0003" dnum="JP2009047101A"><text>2009-047101</text></patcit></li><li>Patent Literature 3:<br/>
Japanese translation of <patcit id="pcit0004" dnum="JPT2003517138W"><text>PCT International Application Publication No. JP-T-2003-517138</text></patcit></li><li>Patent Literature 4:<br/>
Japanese Unexamined Patent Publication No. <patcit id="pcit0005" dnum="JP11141388A"><text>11-141388</text></patcit></li></ul><!-- EPO <DP n="7"> --></p><heading id="h0005"><b>Summary of Invention</b></heading><p id="p0007" num="0007">The present invention has been conceived in view of the above described problems, and an object of the present invention is to provide a control apparatus that, even when any one of a demanded torque, a demanded efficiency, and a demanded air-fuel ratio that are demanded values of controlled variables changes at a fast rate that exceeds a response speed of the related controlled variable with respect to an operation of an actuator, can ensure realization of at least a performance that is demanded with highest priority among performances demanded of an internal combustion engine.</p><p id="p0008" num="0008">An internal combustion engine control apparatus that is provided by the present invention decides a demanded value of a controlled variable based on a performance that is demanded of the internal combustion engine (hereunder, referred to as "demanded engine performance"). The present control apparatus uses three kinds of controlled variables, namely, a torque that the internal combustion engine generates, an efficiency that is a ratio of a torque that is actually output with respect to a torque that the internal combustion engine can potentially output, and an air-fuel ratio of an air-fuel mixture that is provided for<!-- EPO <DP n="8"> --> combustion in the internal combustion engine. The present control apparatus performs air amount control, ignition timing control, and injection amount control based on these three kinds of demanded controlled variables. In the air amount control, an actuator for air amount control is operated in accordance with a target air amount. The target air amount is an air amount for realizing a demanded potential torque at a demanded air-fuel ratio, and is calculated based on data in which a relationship between an air amount at an optimal ignition timing and a torque is defined in association with an air-fuel ratio. The demanded potential torque is calculated by dividing the demanded torque by the demanded efficiency. In the ignition timing control, an actuator for ignition timing control is operated in accordance with an instructed efficiency. A ratio of the demanded torque with respect to the estimated potential torque is calculated as the instructed efficiency. The estimated potential torque is a potential torque that is realized when an actuator for air amount control is operated in accordance with a target air amount at the demanded air-fuel ratio. In the fuel injection amount control, an actuator for fuel injection amount control is operated in accordance with the demanded air-fuel ratio.</p><p id="p0009" num="0009"><!-- EPO <DP n="9"> --> Thus, the present control apparatus performs air amount control, ignition timing control, and fuel injection amount control based on a demanded torque, a demanded efficiency and a demanded air-fuel ratio that are decided on the basis of a demanded engine performance. However, when a change amount of any one of the demanded torque, the demanded efficiency, and the demanded air-fuel ratio exceeds a predetermined threshold value, the present control apparatus makes a temporary adjustment to a value of any one of the demanded torque, the demanded efficiency and the instructed efficiency, and the demanded air-fuel ratio. Preferably, the threshold value that serves as the criterion for that decision is set for each demanded controlled variable, respectively, on the basis of a response speed of the relevant controlled variable with respect to an operation of an actuator to which the demanded controlled variable is most related. The present control apparatus selects an object that an adjustment should be made to in accordance with a type of the demanded engine performance that is currently being given priority among various kinds of demanded engine performance.</p><p id="p0010" num="0010">For example, when the types of demanded engine performance that are currently being given priority are exhaust gas performance and fuel consumption performance, a<!-- EPO <DP n="10"> --> temporary adjustment may be made to a value of the demanded efficiency and the instructed efficiency. Specifically, if a demanded controlled variable in which a change that exceeds a predetermined threshold value has occurred is the demanded air-fuel ratio, the demanded efficiency and the instructed efficiency may be fixed to a value of 1, respectively. In this case, although a temporary fluctuation arises in the torque, since a value that has been demanded is realized with respect to the efficiency and the air-fuel ratio, realization of both the exhaust gas performance, with which the air-fuel ratio is associated, and the fuel consumption performance, with which the efficiency is associated, are ensured.</p><p id="p0011" num="0011">A configuration may also be adopted that makes a temporary adjustment to the value of the demanded torque in addition to the demanded efficiency and the instructed efficiency. Specifically, when a change amount of the demanded air-fuel ratio exceeds a predetermined threshold value, the demanded efficiency and the instructed efficiency may be fixed to a value of 1, respectively, and a change in torque that arises accompanying a change in the demanded air-fuel ratio may be predicted and the predicted change in torque may be caused to be generated in the demanded torque. In this case also, although a temporary<!-- EPO <DP n="11"> --> fluctuation arises in the torque, since a value that has been demanded is realized with respect to the efficiency and the air-fuel ratio, realization of both the exhaust gas performance, with which the air-fuel ratio is associated, and the fuel consumption performance, with which the efficiency is associated, are ensured. Further, in this case, since it is possible to lengthen a convergence period of a target air amount and lessen the rate of fluctuation of a transient air amount, fluctuations in the air-fuel ratio can be suppressed to a greater degree.</p><p id="p0012" num="0012">Further, for example, when the types of demanded engine performance that are currently being given priority are the running performance and the fuel consumption performance, a temporary adjustment may be made to a value of the demanded air-fuel ratio. Specifically, if a demanded controlled variable in which a change that exceeds a predetermined threshold value has occurred is the demanded air-fuel ratio, a rate of change in the demanded air-fuel ratio may be lessened by means such as a low-pass filter. In this case, although a temporary divergence arises between the original demanded air-fuel ratio and the realized value of the air-fuel ratio, since a value that has been demanded is realized with respect to the torque and the efficiency, realization of both the running<!-- EPO <DP n="12"> --> performance, with which the torque is associated, and the fuel consumption performance, with which the efficiency is associated, are ensured.</p><p id="p0013" num="0013">On the other hand, for example, when the types of demanded engine performance that are currently being given priority are the running performance and the exhaust gas performance, an adjustment may be made to a demanded value of both thereof. In this case, if a demanded controlled variable in which a change that exceeds a predetermined threshold value has occurred is the demanded air-fuel ratio, the ignition timing is automatically changed so as to suppress fluctuations in the torque that accompany a change in the demanded air-fuel ratio. However, since a value that has been demanded is thereby realized with respect to the torque and the air-fuel ratio, realization of both the running performance, with which the torque is associated, and the exhaust gas performance, with which the air-fuel ratio is associated, are ensured.</p><p id="p0014" num="0014">As described above, according to the present control apparatus, even in a case where any one of the demanded torque, the demanded efficiency, and the demanded air-fuel ratio that are demanded values of controlled variables changes at a fast rate that exceeds a response speed of the<!-- EPO <DP n="13"> --> related controlled variable with respect to an operation of an actuator, realization of at least a performance that is demanded with highest priority among the performances demanded of an internal combustion engine can be ensured.</p><heading id="h0006"><b>Brief Description of Drawings</b></heading><p id="p0015" num="0015"><ul><li><figref idrefs="f0001">Figure 1</figref> is a block diagram that illustrates the configuration of a control apparatus of an embodiment of the present invention.</li><li><figref idrefs="f0002">Figure 2</figref> is a flowchart that illustrates processing performed by the control apparatus of the embodiment of the present invention.</li><li><figref idrefs="f0002">Figure 3</figref> is a time chart that illustrates specific examples of processing performed by the control apparatus of the embodiment of the present invention.</li><li><figref idrefs="f0003">Figure 4</figref> is a time chart that illustrates a specific example of processing performed by the control apparatus of the embodiment of the present invention.</li><li><figref idrefs="f0003">Figure 5</figref> is a time chart for describing the effect of the specific example illustrated in <figref idrefs="f0003">Figure 4</figref>.</li><li><figref idrefs="f0004">Figure 6</figref> is a time chart that illustrates a specific example of processing performed by the control apparatus of the embodiment of the present invention.</li></ul><!-- EPO <DP n="14"> --></p><heading id="h0007"><b>Description of Embodiments</b></heading><p id="p0016" num="0016">An embodiment of the present invention is described hereunder with reference to the drawings.</p><p id="p0017" num="0017">An internal combustion engine (hereinafter, referred to as "engine") which is a control object in the present embodiment is a spark-ignition type, four-cycle reciprocating engine. A three-way catalyst for purifying exhaust gas is provided in an exhaust passage of the engine. The control apparatus controls the operation of the engine by operating actuators included in the engine. The actuators which can be operated by the control apparatus include an ignition apparatus, a throttle, a fuel injection apparatus, a variable valve timing mechanism, an EGR apparatus and the like. However, in the present embodiment, the control apparatus operates the throttle, the ignition apparatus and the fuel injection apparatus, and controls the operation of the engine by operating these three actuators.</p><p id="p0018" num="0018">The control apparatus of the present embodiment uses torque, efficiency, and an air-fuel ratio as controlled variables of the engine. In a stricter sense, as used herein the term "torque" refers to an indicated torque<!-- EPO <DP n="15"> --> generated by the engine, and the term "air-fuel ratio" refers to the air-fuel ratio of an air-fuel mixture that is provided for combustion. In the present description, the term "efficiency" refers to the ratio of the torque which is actually outputted with respect to the torque (potential torque) which the engine can potentially output. The maximum value of the efficiency is 1, and at such time the potential torque which the engine can output is actually outputted intact. When the efficiency is lower than 1, the actually outputted torque is less than the potential torque that can be outputted from the engine, and the surplus is mainly outputted from the engine in the form of heat. The control apparatus of the present embodiment performs air amount control, ignition timing control, and fuel injection amount control based on demanded values of these three kinds of controlled variables. Torque is the fundamental controlled variable among the three kinds of controlled variables, and normally control of the engine is performed by giving priority to realization of the demanded torque. Note that, an actuator that is used for air amount control is the throttle, an actuator that is used for ignition timing control is the ignition apparatus, and an actuator that is used for fuel injection amount control is the fuel injection apparatus.</p><p id="p0019" num="0019"><!-- EPO <DP n="16"> --> A control apparatus 2 shown in the block diagram of <figref idrefs="f0001">Figure 1</figref> illustrates a configuration of the control apparatus of the present embodiment. The respective elements constituting the control apparatus 2 in <figref idrefs="f0001">Figure 1</figref> are illustrated as the result of especially illustrating in the drawing only elements relating to air amount control, ignition timing control and fuel injection amount control performed by operation of three kinds of actuators, that is, a throttle 4, an ignition apparatus 6, and a fuel injection apparatus 8, among various functional elements of the control apparatus 2. Accordingly, the illustration shown in <figref idrefs="f0001">Figure 1</figref> does not mean that the control apparatus 2 includes only these elements. Each of the elements may be respectively implemented by dedicated hardware, or may share hardware and may be virtually implemented by software.</p><p id="p0020" num="0020">The configuration of the control apparatus 2 illustrated in <figref idrefs="f0002">Figure 2</figref> is broadly divided into four units that are denoted by reference numerals 70, 10, 20, and 30.<br/>
A demand generation unit 70 is positioned at the most upstream position in the signal transmitting system in the control apparatus 2. A demand mediation unit 10 is position at the next position after the demand generation unit 70, and a demand adjustment unit 20 is positioned at the next position after the demand mediation unit 10. A<!-- EPO <DP n="17"> --> demand realization unit 30 is positioned after the demand adjustment unit 20, that is, at the most downstream position in the signal transmitting system. An operation signal is output from the demand realization unit 30 to each of the aforementioned actuators 4, 6, and 8. Note that, in addition to communication signals between blocks that are indicated by arrows in <figref idrefs="f0001">Figure 1</figref>, various kinds of signals flow through the control apparatus 2. An example of such signals is a signal that includes engine information relating to an operation condition or operation state of the engine. Engine information includes the number of engine revolutions, an output value of a degree of throttle opening sensor, an output value of an air-fuel ratio sensor, the actual ignition timing at the current time, the cooling water temperature, and the valve timing of an intake valve and an exhaust valve.</p><p id="p0021" num="0021">Hereunder, the configuration of each of the units 70, 10, 20, and 30 constituting the control apparatus 2 and the processing performed in the units 70, 10, 20, and 30 are described.</p><p id="p0022" num="0022">First, the demand generation unit 70 is described. The demand generation unit 70 includes a torque demand unit 72. The torque demand unit 72 converts a demand relating<!-- EPO <DP n="18"> --> to the torque that is the fundamental controlled variable into numerical value form and outputs the obtained value. The demanded torque that is outputted from the torque demand unit 72 includes two kinds of signals. One kind is a signal of demanded torque that is determined in accordance with an accelerator pedal operation performed by a driver that is a signal of a comparatively low frequency. The other kind of signal is a signal of demanded torque for driving control of the vehicle that is a signal of a comparatively high frequency. As used herein, the term "driving control of the vehicle" includes, in addition to skid prevention control, vibration suppression control for the purpose of suppressing spring vibrations of the vehicle by means of torque vibrations.</p><p id="p0023" num="0023">The demand generation unit 70 further includes a performance demand unit 80. The performance demand unit 80 determines a demand relating to a controlled variable based on performances demanded of the engine, and converts the demand into numerical value form and outputs the obtained value. The performances demanded of the engine include running performance, exhaust gas performance, and fuel consumption performance. In order to accurately reflect these demanded performances in the controlled variables, the performance demand unit 80 includes a plurality of<!-- EPO <DP n="19"> --> demanded output elements 81 to 86. The respective demanded output elements 81 to 86 are associated with any one of the functions that are demanded of the engine. For example, the demanded output element 81 is an element that is related to the running performance, and outputs a demanded torque for idle rotation control. The demanded output element 82 is an element that is related to fuel consumption, and outputs a demanded efficiency for improving fuel consumption. The demanded output element 83 is an element that is related to running performance, and when the torque demand unit 72 outputs a demanded torque of a high frequency, the demanded output element 83 operates in response thereto to output a demanded efficiency for supporting realization of the high frequency torque. The demanded output elements 84, 85, and 86 relate to exhaust gas performance. The demanded output element 84 outputs a demanded efficiency for warming up a catalyst. The demanded output element 85 outputs a demanded efficiency for suppressing catalyst deterioration. The demanded output element 86 outputs a demanded air-fuel ratio for restoring the purification rate of the catalyst. In addition to these demanded output elements, the performance demand unit 80 also includes a plurality of demanded output elements that are not shown in the drawings, and any one of a demanded torque, a demanded efficiency, and a demanded<!-- EPO <DP n="20"> --> air-fuel ratio are outputted by the unshown plurality of demanded output elements.</p><p id="p0024" num="0024">Next, the demand mediation unit 10 will be described. As described above, a plurality of demands relating to the respective controlled variables are outputted from the demand generation unit 70. However, since a plurality of demands that are outputted with respect to a single controlled variable can not all be realized simultaneously, processing is necessary that performs a mediation process with respect to the demands for each controlled variable. As used herein, the term "mediation" refers to a computation process for obtaining a single numerical value from a plurality of numerical values, such as, for example, selecting the maximum value selection, selecting the minimum value, averaging, or superimposing, and a configuration can be adopted in which the mediation process appropriately combines a plurality of kinds of computation processes. To execute such kind of mediation for each controlled variable, the demand mediation unit 10 includes three mediation elements 12, 14, and 16. The mediation element 12 collects various demanded torques that the demand generation unit 70 generated and performs a mediation process thereon, and outputs the mediation result as a final demanded torque. The mediation element 14<!-- EPO <DP n="21"> --> collects various demanded efficiencies that the demand generation unit 70 generated and performs a mediation process thereon, and outputs the mediation result as a final demanded efficiency. The mediation element 16 collects various demanded air-fuel ratios that the demand generation unit 70 generated and performs a mediation process thereon, and outputs the mediation result as a final demanded air-fuel ratio.</p><p id="p0025" num="0025">The three kinds of demanded controlled variables that are outputted from the demand mediation unit 10, that is, the demanded torque, the demanded efficiency, and the demanded air-fuel ratio, are inputted to the demand realization unit 30 via the demand adjustment unit 20. The demand adjustment unit 20 is a main unit of the control apparatus 2 that is most related to task and object of the present invention in the present embodiment. Therefore, here, the demand realization unit 30 will be described first, and after the overall configuration of the control apparatus 2 other than the demand adjustment unit 20 has been explained, the demand adjustment unit 20 will be described in detail.</p><p id="p0026" num="0026">The demand realization unit 30 includes a plurality of statistical models or physical models that are<!-- EPO <DP n="22"> --> represented by a map or function, that are inverse models of the engine. Based on three kinds of demanded controlled variables that are inputted via the demand adjustment unit 20, the demand realization unit 30 calculates manipulated variables of the respective actuators 4, 6, and 8 that are necessary to realize the three kinds of demanded controlled variables. The manipulated variables calculated by the demand realization unit 30 are a degree of throttle opening for operating the throttle 4, an ignition timing for operating the ignition apparatus 6, and a fuel injection amount for operating the fuel injection apparatus 8. To calculate these manipulated variables, the demand realization unit 30 includes a plurality of computing elements 32, 34, 36, 38, 40, 42, 44, 50, 52, 54, and 56.</p><p id="p0027" num="0027">First, calculation of the degree of throttle opening by the demand realization unit 30 will be described. The demand realization unit 30 includes a demanded potential torque calculation unit 44, a target air amount calculation unit 42, and a degree of throttle opening calculation unit 40 as computing elements for calculating the degree of throttle opening. The demanded potential torque calculation unit 44 calculates a demanded potential torque by dividing an inputted demanded torque by the demanded efficiency. If the demanded efficiency is a value that is<!-- EPO <DP n="23"> --> less than 1, the demanded potential torque becomes larger than the demanded torque. This means that a requirement with respect to air amount control by the throttle 4 is to enable the potential output of torque that is greater than the demanded torque. However, with respect to the demanded efficiency, a value that has passed through an upper/lower limit guard unit 34 is inputted to the demanded potential torque calculation unit 44. The upper/lower limit guard unit 34 is described later. The demanded potential torque that has been calculated by the demanded potential torque calculation unit 44 is inputted to the target air amount calculation unit 42.</p><p id="p0028" num="0028">The target air amount calculation unit 42 converts the demanded potential torque into a target air amount using a torque-air amount conversion map. The term "air amount" used here refers to the amount of air taken into a cylinder (a charging efficiency or a load factor, which are non-dimensional equivalents of the air amount, can also be used instead of the air amount). The torque-air amount conversion map is prepared on the presumption that the ignition timing is an optimal ignition timing (an ignition timing that is located further on a retarded side among an MBT and a trace knock ignition timing), and is a map in which the torque and the air amount are associated using<!-- EPO <DP n="24"> --> various engine status amounts, such as the number of engine revolutions and the air-fuel ratio as keys. This map is created on the basis of data obtained by testing the engine. Actual values or target values of the engine status amounts are used to search the torque-air amount conversion map. With regard to the air-fuel ratio, a demanded air-fuel ratio is used to search the map. Accordingly, at the target air amount calculation unit 42, the air amount of that is required to realize the demanded potential torque at the demanded air-fuel ratio is calculated as the target air amount. Note that the demanded air-fuel ratio that is used in this case is a demanded air-fuel ratio that passed through an upper/lower limit guard unit 38 that is described later, and is not exactly the same ratio as the demanded air-fuel ratio that was inputted to the demand realization unit 30. The target air amount calculated by the target air amount calculation unit 42 is inputted to the degree of throttle opening calculation unit 40.</p><p id="p0029" num="0029">The degree of throttle opening calculation unit 40 converts the target air amount into a degree of throttle opening using an inverse model of an air model. The air model is a physical model which is the result of modeling the response characteristic of the air amount with respect to the operation of the throttle 4, and hence the degree of<!-- EPO <DP n="25"> --> throttle opening required to achieve the target air amount can be back-calculated using the inverse model of the air model. The control apparatus 2 operates the throttle 4 in accordance with the degree of throttle opening calculated by the degree of throttle opening calculation unit 40.</p><p id="p0030" num="0030">Next, calculation of the ignition timing at the demand realization unit 30 is described. The demand realization unit 30 includes an estimated potential torque calculation unit 54, an instructed efficiency calculation unit 52, and an ignition timing calculation unit 50 as computing elements for computing the ignition timing. The estimated potential torque calculation unit 54 calculates the estimated potential torque based on the actual degree of throttle opening that is realized by the above described throttle operation. The term "estimated potential torque" as used in the present description refers to torque that can be outputted in a case where ignition timing is set to the optimal ignition timing based on the current degree of throttle opening and demanded air-fuel ratio, that is, an estimated value of the torque that the engine can potentially output. The estimated potential torque calculation unit 54 first converts the degree of throttle opening to an estimated air amount using a forward model of the aforementioned air model. The estimated air amount is<!-- EPO <DP n="26"> --> an estimated value of an air amount that is actually realized by the current degree of throttle opening. Next, estimated potential torque calculation unit 54 converts the estimated air amount into an estimated potential torque using the torque-air amount conversion map. A search of the torque-air amount conversion map is conducted by using a value of a demanded air-fuel ratio that has passed through the upper/lower limit guard unit 38, described later, as a search key. The estimated potential torque calculated by the estimated potential torque calculation unit 54 is inputted to the instructed efficiency calculation unit 52.</p><p id="p0031" num="0031">The instructed efficiency calculation unit 52 calculates a ratio between the demanded torque that was inputted to the demand realization unit 30 and the estimated potential torque. The calculated ratio represents the efficiency for realizing the demanded torque, and is used as an instructed efficiency for ignition timing control. The instructed efficiency for ignition timing control that was calculated by the instructed efficiency calculation unit 52 passes through an upper/lower limit guard unit 36, described later, and thereafter is inputted to the ignition timing calculation unit 50.</p><p id="p0032" num="0032"><!-- EPO <DP n="27"> --> The ignition timing calculation unit 50 calculates the ignition timing based on the inputted instructed efficiency for ignition timing control. Specifically, the ignition timing calculation unit 50 calculates the optimal ignition timing based on engine status amounts, such as the number of engine revolutions, the demanded torque, and the air-fuel ratio, and also calculates a retardation amount with respect to the optimal ignition timing based on the inputted instructed efficiency for ignition timing control. If the instructed efficiency is 1, the retardation amount is set as zero, and the retardation amount is increased as the instructed efficiency decreases from 1. Subsequently, the ignition timing calculation unit 50 calculates a value obtained by adding the retardation amount to the optimal ignition timing as a final ignition timing. A map in which an optimal ignition timing and various engine status amounts are associated can be used to calculate the optimal ignition timing. To calculate the retardation amount, a map in which a retardation amount, efficiency, and various engine status amounts are associated can be used. To search these maps, a value of a demanded air-fuel ratio that has passed through the upper/lower limit guard unit 38 that is described later is used as a search key. Operation of the ignition apparatus 6 by the control apparatus 2 is<!-- EPO <DP n="28"> --> performed in accordance with the ignition timing calculated by the ignition timing calculation unit 50.</p><p id="p0033" num="0033">Next, calculation of a fuel injection amount by the demand realization unit 30 is described. The demand realization unit 30 includes a fuel injection amount calculation unit 60 as a computing element for computing a fuel injection amount. When a timing for calculation of a fuel injection amount for injection into a certain cylinder is reached, the fuel injection amount calculation unit 60 calculates a fuel injection amount based on a demanded air-fuel ratio that has passed through the upper/lower limit guard unit 38, described later, and a predicted air amount at an intake valve closing timing of the relevant cylinder. Operation of the fuel injection apparatus 8 by the control apparatus 2 is performed in accordance with the fuel injection amount calculated by the fuel injection amount calculation unit 60.</p><p id="p0034" num="0034">Lastly, an adjustment function that the demand realization unit 30 is described. An adjustment that is performed by the demand realization unit 30 differs to an adjustment performed by the demand adjustment unit 20 that is described later. The adjustment performed by the demand realization unit 30 is a size adjustment among demanded<!-- EPO <DP n="29"> --> controlled variables in a steady state. The demand generation unit 70 generates various demands without taking into account a combustion limit condition of the engine, and the demand mediation unit 10 also performs mediation without taking into account the combustion limit condition. Consequently, depending on the relationship between the sizes of the respective demanded controlled variables that are finally decided, there is a possibility that it will not be possible to operate the engine appropriately. Therefore, the demand realization unit 30 adjusts a value of a demanded controlled variable for which the order of priority is low based on a demanded controlled variable for which the order of priority is high so as to enable appropriate operation of the engine. More specifically, the demanded torque is selected as the demanded controlled variable with the highest priority, and the demanded controlled variable that should be given the next highest priority is selected from the demanded efficiency and the demanded air-fuel ratio. Further, based on the value of either one of the demanded efficiency and the demanded air-fuel ratio that was selected, the demand realization unit 30 adjusts the value of the other demanded controlled variable that was not selected. Means for implementing this adjustment are the aforementioned various upper/lower<!-- EPO <DP n="30"> --> limit guard units 34, 36, and 38 and a combustion limit guard value calculation unit 32.</p><p id="p0035" num="0035">The upper/lower limit guard unit 34 limits a value of a demanded efficiency to a range that is defined by an upper limit guard value and a lower limit guard value. The upper/lower limit guard unit 36 limits a value of an instructed efficiency to a range that is defined by an upper limit guard value and a lower limit guard value. The respective guard values of the upper/lower limit guard unit 36 are set to the same values as the respective guard values of the upper/lower limit guard unit 34. Further, the upper/lower limit guard unit 38 limits a value of a demanded air-fuel ratio to a range that is defined by an upper limit guard value and a lower limit guard value. The respective guard values used by the upper/lower limit guard units 34, 36, and 38 are all variable, and the values thereof are calculated by the combustion limit guard value calculation unit 32.</p><p id="p0036" num="0036">When realization of the demanded air-fuel ratio is the operation mode that is given priority, the combustion limit guard value calculation unit 32 calculates an upper limit value and a lower limit value of an efficiency at which normal combustion can be secured at the demanded air-fuel<!-- EPO <DP n="31"> --> ratio using various kinds of engine information, and sets those values as the respective guard values of the upper/lower limit guard unit 34 and the upper/lower limit guard unit 36. In this case, the respective guard values of the upper/lower limit guard unit 38 are set to an uppermost limit value and a lowermost limit value of an air-fuel ratio at which normal combustion can be secured. On the other hand, when realization of the demanded efficiency is the operation mode that is given priority, the combustion limit guard value calculation unit 32 calculates an upper limit value and a lower limit value of an air-fuel ratio at which normal combustion can be secured at the demanded efficiency using various kinds of engine information, and sets those values as the respective guard values of the upper/lower limit guard unit 38. In this case, the respective guard values of the upper/lower limit guard unit 34 and the upper/lower limit guard unit 36 are set to an uppermost limit value and a lowermost limit value of an efficiency at which normal combustion can be secured. The demanded efficiency, instructed efficiency, and demanded air-fuel ratio that have been subjected to size adjustment in this manner are used for calculating the respective manipulated variables at the demand realization unit 30.</p><p id="p0037" num="0037"><!-- EPO <DP n="32"> --> Next, the demand adjustment unit 20 that is a main unit of the control apparatus 2 of the present embodiment is described in detail. The demand adjustment unit 20 fulfills the role of ensuring that at least a performance with the highest priority among the performances demanded of the engine is realized, even in a case where any one of a final demanded torque, a demanded efficiency, and a demanded air-fuel ratio that were decided by the demand mediation unit 10 changes at a fast rate that exceeds a response speed of an actuator. The term "actuator" used here refers to the throttle 4 that has the closest relationship with torque that is the principal controlled variable. The processing that is performed at the demand adjustment unit 20 is a temporary adjustment that is applied to a value of any one of the demanded torque, the demanded efficiency and instructed efficiency, and the demanded air-fuel ratio. This adjustment is made in accordance with the type of engine performance that is currently being given priority. To perform such processing, the demand adjustment unit 20 includes an adjustment determination unit 22, a demanded torque adjustment unit 24, an efficiency adjustment unit 26, and a demanded air-fuel ratio adjustment unit 28.</p><p id="p0038" num="0038"><!-- EPO <DP n="33"> --> The adjustment determination unit 22 has a function that determines whether or not the necessity to make an adjustment has arisen, and when it is determined that the necessity has arisen, selects an object to adjust in accordance with the engine performance that is given priority. The function of the adjustment determination unit 22 can be represented by the flowchart shown in <figref idrefs="f0002">Figure 2</figref>. In an initial step S2, the adjustment determination unit 22 fetches the values of the final demanded torque, the demanded efficiency and the demanded air-fuel ratio that were decided by the demand mediation unit 10, and determines whether or not a change amount of any of those values exceeds a corresponding threshold value. A threshold value that is used for the determination is set on the basis of a limit response speed of an air amount with respect to an operation of the throttle 4. That is, the adjustment determination unit 22 determines whether or not a sudden change to which a sufficient response could not be achieved by air amount control by means of an operation of the throttle 4 arises with respect to any of the demanded controlled variables. If it is predicted that such a change amount exceeds a threshold value with respect to any of the demanded controlled variables, or if it is detected that such a change amount has actually exceeded a threshold value, the adjustment determination unit 22<!-- EPO <DP n="34"> --> executes the processing in step S4 and step S6. In step S4, the adjustment determination unit 22 determines which demanded engine performance is currently being given priority based on information acquired from the performance demand unit 80. Next, in step S6, the adjustment determination unit 22 selects an object or objects that should be adjusted in accordance with the type of demanded engine performance that is given priority, and outputs an instruction to an element that is associated with a selected adjustment object. Specifically, if the demanded torque is included in the selected adjustment objects, the adjustment determination unit 22 outputs an instruction to temporarily adjust the value of the demanded torque to the demanded torque adjustment unit 24. If the demanded efficiency and instructed efficiency are included in the selected adjustment objects, the adjustment determination unit 22 outputs an instruction to temporarily adjust the value of the demanded efficiency and instructed efficiency to the efficiency adjustment unit 26. Further, if the demanded air-fuel ratio is included in the selected adjustment objects, the adjustment determination unit 22 outputs an instruction to temporarily adjust the value of the demanded air-fuel ratio to the demanded air-fuel ratio adjustment unit 28.</p><p id="p0039" num="0039"><!-- EPO <DP n="35"> --> Upon receiving an instruction from the adjustment determination unit 22, the demanded torque adjustment unit 24 temporarily adjusts the value of the demanded torque that was outputted from the demand mediation unit 10, and inputs the adjusted demanded torque to the demand realization unit 30. Regarding the method of adjusting the value of the demanded torque, the optimal method is appropriately selected from among previously registered adjustment methods in accordance with the type of the demanded controlled variable for which a change amount exceeded a threshold value or in accordance with the type of demanded engine performance that is being given priority.</p><p id="p0040" num="0040">Upon receiving an instruction from the adjustment determination unit 22, the efficiency adjustment unit 26 sets the respective guard values of the aforementioned upper/lower limit guard unit 34 and upper/lower limit guard unit 36. In this case, the respective values of the demanded efficiency and instructed efficiency are limited to within the range that is defined by the upper limit guard value and the lower limit guard value. If the upper limit guard value and the lower limit guard value are the same value, that value becomes the value of the demanded efficiency and the instructed efficiency after limitation, respectively. The upper limit guard value and the lower<!-- EPO <DP n="36"> --> limit guard value that are set by the efficiency adjustment unit 26 are given priority over the upper limit guard value and the lower limit guard value that are set by the combustion limit guard value calculation unit 32. Regarding the method of setting each guard value, the optimal method is appropriately selected from among previously registered setting methods in accordance with the type of the demanded controlled variable for which a change amount exceeded a threshold value or in accordance with the type of demanded engine performance that is being given priority.</p><p id="p0041" num="0041">Upon receiving an instruction from the adjustment determination unit 22, the demanded air-fuel ratio adjustment unit 28 temporarily adjusts the value of the demanded air-fuel ratio that was outputted from the demand mediation unit 10, and inputs the adjusted demanded air-fuel ratio to the demand realization unit 30. Regarding the method of adjusting the value of the demanded air-fuel ratio, the optimal method is appropriately selected from among previously registered adjustment methods in accordance with the type of the demanded controlled variable for which a change amount exceeded a threshold value or in accordance with the type of demanded engine performance that is being given priority.<!-- EPO <DP n="37"> --></p><p id="p0042" num="0042">Next, the contents of processing performed by the demand adjustment unit 20 and the effects thereof are described using specific examples. In this case, an example is described in which, at a certain timing, the demanded air-fuel ratio changes in a stepwise manner from a stoichiometric ratio to a ratio on the rich side of the stoichiometric ratio. Further, as a premise, it is assumed that the initial value of the demanded efficiency is set to 1. <figref idrefs="f0002">Figure 3</figref> illustrates a time chart in which, for three cases, namely, a case when exhaust gas performance and fuel consumption performance are given priority (case 1), a case when running performance and fuel consumption performance are given priority (case 2), and a case when running performance and exhaust gas performance are given priority (case 3), the respective temporal changes in a preadjustment demanded value, a post-adjustment demanded value, and an actual realized value of the three kinds of controlled variables are shown, respectively.</p><p id="p0043" num="0043">As described above, the target air amount calculation unit 42 calculates an air amount that is necessary to realize the demanded torque at the demanded air-fuel ratio as a target air amount. Therefore, in a case where the demanded air-fuel ratio became richer in a stepwise manner<!-- EPO <DP n="38"> --> as in the present example, the target air amount also changes in a stepwise manner in conformity therewith. Further, the degree of throttle opening is controlled in conformity with the change in the target air amount. The action of the throttle 4 at this time is an action to cancel out an increase in the torque accompanying enriching of the air-fuel ratio by decreasing the air amount. However, there is a delay in the response of the air amount with respect to the action of the throttle 4, and a decrease in the actual air amount is delayed relative to the target air amount. On the other hand, since the fuel injection amount is determined based on the actual air amount and the demanded air-fuel ratio, the fuel injection amount temporarily increases significantly due to the delay in the decrease of the air amount.</p><p id="p0044" num="0044">In case 1, the demanded efficiency and instructed efficiency are selected as the adjustment object, and a temporary adjustment is made to their respective values. Specifically, if a sudden change in the demanded air-fuel ratio is predicted, the respective guard values of the upper/lower limit guard unit 34 and the upper/lower limit guard unit 36 are changed to 1 by the efficiency adjustment unit 26, and the demanded efficiency and instructed efficiency are both fixed to 1. As a result of the<!-- EPO <DP n="39"> --> instructed efficiency being fixed to 1, the ignition timing is maintained at the optimal ignition timing. Consequently, the influence of the fuel injection amount being temporarily increased significantly is reflected directly in the torque, and the torque that is actually realized temporarily increases to an amount that is greater than the demanded torque. However, since the ignition timing is maintained at the optimal ignition timing, the efficiency that is actually realized is also maintained at 1 and realization of the desired fuel consumption performance is ensured. Further, since the air-fuel ratio that is actually realized also changes in accordance with the demanded air-fuel ratio, realization of the desired exhaust gas performance is also ensured.</p><p id="p0045" num="0045">In case 2, the demanded air-fuel ratio is selected as the adjustment object, and a temporary adjustment is made to the value thereof. Specifically, if a sudden change in the demanded air-fuel ratio is predicted, lessening of the rate of change of the demanded air-fuel ratio is performed by the demanded air-fuel ratio adjustment unit 28. A low-pass filter can be used as means therefor. If a low-pass filter is used, a time constant thereof is set so that a rate of change in the demanded air-fuel ratio stays within a range of a limit response speed of torque with respect to<!-- EPO <DP n="40"> --> an operation of the throttle 4. In addition, a moderation process can also be used as another means. Weighted averaging can be mentioned as one example of a moderation process. Alternatively, guard processing may be executed with respect to the rate of change in the demanded air-fuel ratio so as to lessen the rate of change thereof. By lessening the rate of change in the demanded air-fuel ratio by any of the aforementioned means, although a temporary divergence arises between the original demanded air-fuel ratio and the realized value of the air-fuel ratio, a delay in the actual air amount with respect to the target air amount disappears and a temporary increase in the fuel injection amount accompanying a delay in a decrease of the air amount is also suppressed. As a result, it is possible to cause the engine to generate torque in accordance with the demanded torque, and realization of the desired running performance is ensured. Further, in this case, since a difference between the demanded torque and the estimated potential torque does not arise, the ignition timing is maintained at the optimal ignition timing and realization of the desired fuel consumption performance is also ensured.</p><p id="p0046" num="0046">On the other hand, in case 3, an adjustment by the demand adjustment unit 20 is not made to any of the demanded torque, the demanded efficiency and instructed<!-- EPO <DP n="41"> --> efficiency, and the demanded air-fuel ratio. This is because, according to the demand realization unit 30, the demanded torque can also be realized while realizing the demanded air-fuel ratio by automatic adjustment of the efficiency. More specifically, in a case where the demanded air-fuel ratio became richer in a stepwise manner as in this example, the target air amount also decreases in a stepwise manner, and the throttle 4 is operated so as to realize such a change in the target air amount. However, since there is a delay in the response of the air amount with respect to an action of the throttle 4, an estimated air amount that is calculated based on the current degree of throttle opening using an air model decreases in a delayed manner relative to the target air amount. Consequently, the estimated potential torque that is calculated based on the estimated air amount increases temporarily to a value that is greater than the demanded torque, and during that time, the instructed efficiency that is a ratio between the demanded torque and the estimated potential torque is a value that is less than 1. As a result, it is possible to retard the ignition timing relative to the optimal ignition timing, suppress a temporary increase in torque that accompanies a delay in the decrease of the air amount, and cause the engine to generate torque in accordance with the demanded torque.<!-- EPO <DP n="42"> --> That is, realization of the desired running performance is ensured. Further, since the air-fuel ratio that is actually realized also changes in accordance with the demanded air-fuel ratio, realization of the desired exhaust gas performance is also ensured.</p><p id="p0047" num="0047">As will be understood from the above three specific examples, according to the control apparatus 2 of the present embodiment, even when the demanded air-fuel ratio changes at a fast rate that exceeds a limit response speed of torque with respect to an action of the throttle 4, it is possible to ensure the realization of a performance that should be given priority among the performances demanded of the engine.</p><p id="p0048" num="0048">However, processing that the demand adjustment unit 20 can perform in the control apparatus 2 of the present embodiment is not limited to the three specific examples described above. For example, in a case where a change amount of the demanded air-fuel ratio exceeds a predetermined threshold value, if the types of demanded engine performances that are currently being given priority are exhaust gas performance and fuel consumption performance, processing as shown in the time chart in <figref idrefs="f0003">Figure 4</figref> can also be performed. In the case of this<!-- EPO <DP n="43"> --> example, if a sudden change in the demanded air-fuel ratio is predicted, similarly to case 1 in the foregoing example, the demanded efficiency and instructed efficiency are each fixed to 1. In addition, in this example, a change in torque that arises accompanying a change in the demanded air-fuel ratio is predicted by means of the adjustment determination unit 22, and the predicted change in torque is caused to be generated in the demanded torque by means of the demanded torque adjustment unit 24.</p><p id="p0049" num="0049"><figref idrefs="f0003">Figure 5</figref> illustrates a comparison of the effects of this processing with the effects of the processing in the above described case 1. In <figref idrefs="f0003">Figure 5</figref>, with respect to each of case 1 of the foregoing example and the present example, a post-adjustment demanded value of the three kinds of controlled variables, a target air amount, a target degree of throttle opening, an actual air amount, and the respective temporal changes in the actual torque are shown in time charts. A chart A in <figref idrefs="f0003">Figure 5</figref> corresponds to case 1 of the foregoing example and chart B corresponds to the present example. According to the present example, when the demanded air-fuel ratio was enriched in a stepwise manner, first, the torque is calculated based on the target air amount at that time point and the enriched demanded air-fuel ratio, and the demanded torque is increased in a<!-- EPO <DP n="44"> --> stepwise manner up to that torque. Thereafter, the demanded torque is gradually decreased to the value thereof immediately prior to being increased in a stepwise manner. By changing the demanded torque in this way, the target air amount gradually decreases. Thus, an abrupt operation of the throttle 4 is suppressed, and a convergence period of the actual air amount (denoted by tt2 in <figref idrefs="f0003">Figure 5</figref>) becomes longer than a convergence period of the actual air amount (denoted by tt1 in <figref idrefs="f0003">Figure 5</figref>) in the case shown in chart A. As a result, although a period until the increased actual torque converges to the demanded torque also increases, it is possible to suppress fluctuations in the air-fuel ratio by lessening the rate of fluctuation of a transient air amount. That is, by the demand adjustment unit 20 performing the processing as described in the present example, it is possible to more reliably ensure realization of the desired exhaust gas performance.</p><p id="p0050" num="0050">Further, although a case where the demanded air-fuel ratio changes in a stepwise manner from the stoichiometric ratio to the rich side is described in the above example, the demand adjustment unit 20 can also correspond to a case where the demanded air-fuel ratio changes in a stepwise manner from the stoichiometric ratio to the lean side. Although such a change in the demanded air-fuel ratio is<!-- EPO <DP n="45"> --> based on a demand with respect to exhaust gas performance, if it is determined that the number of engine revolutions is decreasing, if it is determined that combustion is deteriorating, or if it is determined that a heavy fuel is being used, running performance is given priority over exhaust gas performance. In that case, as illustrated in a time chart shown in <figref idrefs="f0004">Figure 6</figref>, when a stepwise change to the lean side of the demanded air-fuel ratio is predicted, lessening of the rate of change in the demanded air-fuel ratio is performed by means such as a low-pass filter. Consequently, although a temporary divergence arises between the original demanded air-fuel ratio and the realized value of the air-fuel ratio, a delay in the actual air amount with respect to the target air amount disappears and a temporary deficiency in the fuel injection amount that accompanies a delay in the increase of the air amount is also suppressed. As a result, it is possible to cause the engine to generate torque in accordance with the demanded torque, and realization of the desired running performance is ensured.</p><p id="p0051" num="0051">An embodiment of the present invention is described above. However, the present invention is not limited to the above described embodiment, and various modifications can be made without departing from the spirit and scope of<!-- EPO <DP n="46"> --> the present invention. For example, although a throttle is used as the actuator for air amount control according to the above described embodiment an intake valve with a variable lift amount or a variable working angle can also be used.</p><heading id="h0008">Description of Reference Characters</heading><p id="p0052" num="0052"><dl id="dl0001"><dt>2</dt><dd>control apparatus</dd><dt>4</dt><dd>throttle</dd><dt>6</dt><dd>ignition apparatus</dd><dt>8</dt><dd>fuel injection apparatus</dd><dt>10</dt><dd>demand mediation unit</dd><dt>12, 14, 16</dt><dd>mediation elements</dd><dt>20</dt><dd>demand adjustment unit</dd><dt>22</dt><dd>adjustment determination unit</dd><dt>24</dt><dd>demanded torque adjustment unit</dd><dt>26</dt><dd>efficiency adjustment unit</dd><dt>28</dt><dd>demanded air-fuel ratio adjustment unit</dd><dt>30</dt><dd>demand realization unit</dd><dt>32</dt><dd>combustion limit guard value calculation unit</dd><dt>34</dt><dd>respective guard values of the upper/lower limit guard unit</dd><dt>36</dt><dd>upper/lower limit guard unit</dd><dt>38</dt><dd>upper/lower limit guard unit<!-- EPO <DP n="47"> --></dd><dt>40</dt><dd>degree of throttle opening calculation unit</dd><dt>42</dt><dd>target air amount calculation unit</dd><dt>44</dt><dd>demanded potential torque calculation unit</dd><dt>50</dt><dd>ignition timing calculation unit</dd><dt>52</dt><dd>instructed efficiency calculation unit</dd><dt>54</dt><dd>estimated potential torque calculation unit</dd><dt>60</dt><dd>fuel injection amount calculation unit</dd><dt>70</dt><dd>demand generation unit</dd><dt>72</dt><dd>torque demand unit</dd><dt>80</dt><dd>performance demand unit</dd><dt>81, 82, 83, 84, 85, 86</dt><dd>demanded output elements</dd></dl></p></description><claims mxw-id="PCLM56977309" lang="EN" load-source="patent-office"><!-- EPO <DP n="48"> --><claim id="c-en-0001" num="0001"><claim-text>An internal combustion engine control apparatus whose operations are controlled by a plurality of kinds of actuators, comprising:
<claim-text>demanded torque deciding means that decides a demanded value of a torque (hereunder, referred to as "demanded torque") that the internal combustion engine generates, based on a performance (hereunder, referred to as "demanded engine performance") that is demanded of the internal combustion engine;</claim-text>
<claim-text>demanded efficiency deciding means that, based on the demanded engine performance, decides a demanded value of an efficiency (hereunder, referred to as "demanded efficiency") that is a ratio of a torque that is actually output with respect to a torque that the internal combustion engine can potentially output;</claim-text>
<claim-text>demanded air-fuel ratio deciding means that, based on the demanded engine performance, decides a demanded value of an air-fuel ratio (hereunder, referred to as "demanded air-fuel ratio") of an air-fuel mixture that is provided for combustion in the internal combustion engine;</claim-text>
<claim-text>demanded potential torque calculation means that calculates a demanded potential torque by dividing the demanded torque by the demanded efficiency;<!-- EPO <DP n="49"> --></claim-text>
<claim-text>target air amount calculation means that, based on data in which a relationship between an air amount at an optimal ignition timing and a torque is defined in association with an air-fuel ratio, calculates a target air amount for realizing the demanded potential torque at the demanded air-fuel ratio;</claim-text>
<claim-text>air amount control means that operates an actuator for air amount control in accordance with the target air amount;</claim-text>
<claim-text>estimated potential torque calculation means that calculates a potential torque (hereunder, referred to as "estimated potential torque") that is realized when the actuator for air amount control is operated in accordance with the target air amount at the demanded air-fuel ratio;</claim-text>
<claim-text>instructed efficiency calculation means that calculates a ratio of the demanded torque with respect to the estimated potential torque as an instructed efficiency;</claim-text>
<claim-text>ignition timing control means that operates an actuator for ignition timing control in accordance with the instructed efficiency;</claim-text>
<claim-text>fuel injection amount control means that operates an actuator for fuel injection amount control in accordance with the demanded air-fuel ratio; and</claim-text>
<claim-text>adjustment means that, when a change amount of any one of the demanded torque, the demanded efficiency, and<!-- EPO <DP n="50"> --> the demanded air-fuel ratio exceeds a predetermined threshold value, makes a temporary adjustment to a value of any one of the demanded torque, the demanded efficiency and instructed efficiency, and the demanded air-fuel ratio in accordance with a type of the demanded engine performance that is currently being given priority.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The internal combustion engine control apparatus according to claim 1, wherein, in a case where a change amount of the demanded air-fuel ratio exceeds a predetermined threshold value, when the types of demanded engine performance that are currently being given priority are exhaust gas performance and fuel consumption performance, the adjustment means fixes the demanded efficiency and the instructed efficiency to a value of 1, respectively, and also predicts a change in torque that arises accompanying a change in the demanded air-fuel ratio and causes the predicted change in torque to be generated in the demanded torque.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The internal combustion engine control apparatus according to claim 2, wherein, in a case where a change amount of the demanded air-fuel ratio exceeds a predetermined threshold value, when the types of demanded engine performance that are currently being given priority<!-- EPO <DP n="51"> --> are running performance and fuel consumption performance, the adjustment means lessens a rate of change in the demanded air-fuel ratio.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The internal combustion engine control apparatus according to claim 2 or 3, wherein, in a case where a change amount of the demanded air-fuel ratio exceeds a predetermined threshold value, when the types of demanded engine performance that are currently being given priority are running performance and exhaust gas performance, the adjustment means does not adjust any demanded value.</claim-text></claim></claims><drawings mxw-id="PDW16668017" load-source="patent-office"><!-- EPO <DP n="52"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="145" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="53"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="165" he="228" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="54"> --><figure id="f0003" num="4,5"><img id="if0003" file="imgf0003.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="55"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="165" he="73" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="165" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
