<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679733-A1" country="EP" doc-number="2679733" kind="A1" date="20140101" family-id="46720572" file-reference-id="307894" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550337" ucid="EP-2679733-A1"><document-id><country>EP</country><doc-number>2679733</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12749824-A" is-representative="NO"><document-id mxw-id="PAPP154824260" load-source="docdb" format="epo"><country>EP</country><doc-number>12749824</doc-number><kind>A</kind><date>20120105</date><lang>JA</lang></document-id><document-id mxw-id="PAPP175868138" load-source="docdb" format="original"><country>EP</country><doc-number>12749824.4</doc-number><date>20120105</date><lang>JA</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140454378" ucid="JP-2011036400-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011036400</doc-number><kind>A</kind><date>20110222</date></document-id></priority-claim><priority-claim mxw-id="PPC140448499" ucid="JP-2012050127-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012050127</doc-number><kind>W</kind><date>20120105</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1915456651" load-source="ipcr">B60W  50/08        20120101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915456843" load-source="ipcr">B60W  20/15        20160101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915458594" load-source="ipcr">B60W  30/18        20120101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915461308" load-source="ipcr">B60W  10/30        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915461772" load-source="ipcr">B60W  10/08        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915462488" load-source="ipcr">E02F   9/20        20060101AFI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915462872" load-source="ipcr">E02F   9/22        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915463025" load-source="ipcr">B60W  10/06        20060101ALI20160725BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL-1915463088" load-source="ipcr">B60K   6/46        20071001ALI20160725BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1981043508" load-source="docdb" scheme="CPC">B60W  20/15        20160115 LI20160118BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047996155" load-source="docdb" scheme="CPC">E02F   9/2296      20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2047998643" load-source="docdb" scheme="CPC">E02F   9/2079      20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048000742" load-source="docdb" scheme="CPC">B60W  50/087       20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048001650" load-source="docdb" scheme="CPC">Y02T  10/6217      20130101 LA20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048001693" load-source="docdb" scheme="CPC">B60W2300/121       20130101 LA20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048002906" load-source="docdb" scheme="CPC">B60W  10/30        20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048003328" load-source="docdb" scheme="CPC">B60W  10/08        20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048003818" load-source="docdb" scheme="CPC">B60W  10/06        20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048005556" load-source="docdb" scheme="CPC">B60W  30/18        20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048005973" load-source="docdb" scheme="CPC">Y02T  10/6286      20130101 LA20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048007059" load-source="docdb" scheme="CPC">E02F   9/2235      20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2048007633" load-source="docdb" scheme="CPC">B60K   6/46        20130101 LI20150610BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988135369" load-source="docdb" scheme="CPC">E02F   9/2075      20130101 FI20131129BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988135484" load-source="docdb" scheme="CPC">Y10S 903/93        20130101 LA20131121BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132183495" lang="DE" load-source="patent-office">RADLADER</invention-title><invention-title mxw-id="PT132183496" lang="EN" load-source="patent-office">WHEEL LOADER</invention-title><invention-title mxw-id="PT132183497" lang="FR" load-source="patent-office">CHARGEUSE À PNEUS</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918151143" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>HITACHI CONSTRUCTION MACHINERY</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918161727" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>HITACHI CONSTRUCTION MACHINERY CO., LTD.</last-name></addressbook></applicant><applicant mxw-id="PPAR918985536" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Hitachi Construction Machinery Co., Ltd.</last-name><iid>100139876</iid><address><street>5-1, Koraku 2-chome</street><city>Bunkyo-ku, Tokyo 112-8563</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918146791" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KANEKO SATORU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918134331" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KANEKO SATORU</last-name></addressbook></inventor><inventor mxw-id="PPAR918982556" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>KANEKO SATORU</last-name><address><street>c/o Hitachi Research Laboratory HITACHI LTD. 1-1 Omika-cho 7-chome</street><city>Hitachi-shi Ibaraki 319-1292</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918158849" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>IKIMI TAKASHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918145772" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>IKIMI TAKASHI</last-name></addressbook></inventor><inventor mxw-id="PPAR918988149" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>IKIMI TAKASHI</last-name><address><street>c/o Hitachi Construction Machinery Co. Ltd. Tsuchiura Works Intellectual Property Department 650 Kandatsumachi</street><city>Tsuchiura-shi Ibaraki 300-0013</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918164645" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>MORIKI HIDEKAZU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918155366" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>MORIKI HIDEKAZU</last-name></addressbook></inventor><inventor mxw-id="PPAR918980244" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>MORIKI HIDEKAZU</last-name><address><street>c/o Hitachi Research Laboratory HITACHI LTD. 1-1 Omika-cho 7-chome</street><city>Hitachi-shi Ibaraki 319-1292</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918150931" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>ITO NORITAKA</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918167242" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>ITO NORITAKA</last-name></addressbook></inventor><inventor mxw-id="PPAR918981039" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>ITO NORITAKA</last-name><address><street>c/o Hitachi Construction Machinery Co. Ltd. Tsuchiura Works Intellectual Property Department 650 Kandatsumachi</street><city>Tsuchiura-shi Ibaraki 300-0013</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918172956" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>YANAGIMOTO HIROAKI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918159472" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>YANAGIMOTO HIROAKI</last-name></addressbook></inventor><inventor mxw-id="PPAR918983331" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>YANAGIMOTO HIROAKI</last-name><address><street>c/o Hitachi Construction Machinery Co. Ltd. Tsuchiura Works Intellectual Property Department 650 Kandatsumachi</street><city>Tsuchiura-shi Ibaraki 300-0013</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918989090" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Beetz &amp; Partner</last-name><iid>100060481</iid><address><street>Patentanwälte Steinsdorfstrasse 10</street><city>80538 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="JP-2012050127-W"><document-id><country>JP</country><doc-number>2012050127</doc-number><kind>W</kind><date>20120105</date><lang>JA</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012114782-A1"><document-id><country>WO</country><doc-number>2012114782</doc-number><kind>A1</kind><date>20120830</date><lang>JA</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548906770" load-source="docdb">AL</country><country mxw-id="DS548893016" load-source="docdb">AT</country><country mxw-id="DS548856717" load-source="docdb">BE</country><country mxw-id="DS548826806" load-source="docdb">BG</country><country mxw-id="DS548903067" load-source="docdb">CH</country><country mxw-id="DS548856718" load-source="docdb">CY</country><country mxw-id="DS548907986" load-source="docdb">CZ</country><country mxw-id="DS548906771" load-source="docdb">DE</country><country mxw-id="DS548856719" load-source="docdb">DK</country><country mxw-id="DS548856720" load-source="docdb">EE</country><country mxw-id="DS548913612" load-source="docdb">ES</country><country mxw-id="DS548826807" load-source="docdb">FI</country><country mxw-id="DS548826808" load-source="docdb">FR</country><country mxw-id="DS548906772" load-source="docdb">GB</country><country mxw-id="DS548856721" load-source="docdb">GR</country><country mxw-id="DS548906773" load-source="docdb">HR</country><country mxw-id="DS548907987" load-source="docdb">HU</country><country mxw-id="DS548903068" load-source="docdb">IE</country><country mxw-id="DS548856722" load-source="docdb">IS</country><country mxw-id="DS548826809" load-source="docdb">IT</country><country mxw-id="DS548856723" load-source="docdb">LI</country><country mxw-id="DS548826810" load-source="docdb">LT</country><country mxw-id="DS548893017" load-source="docdb">LU</country><country mxw-id="DS548826811" load-source="docdb">LV</country><country mxw-id="DS548826812" load-source="docdb">MC</country><country mxw-id="DS548893018" load-source="docdb">MK</country><country mxw-id="DS548893019" load-source="docdb">MT</country><country mxw-id="DS548893020" load-source="docdb">NL</country><country mxw-id="DS548903069" load-source="docdb">NO</country><country mxw-id="DS548893021" load-source="docdb">PL</country><country mxw-id="DS548913613" load-source="docdb">PT</country><country mxw-id="DS548810851" load-source="docdb">RO</country><country mxw-id="DS548913698" load-source="docdb">RS</country><country mxw-id="DS548893022" load-source="docdb">SE</country><country mxw-id="DS548906778" load-source="docdb">SI</country><country mxw-id="DS548903126" load-source="docdb">SK</country><country mxw-id="DS548903127" load-source="docdb">SM</country><country mxw-id="DS548856724" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128671004" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A hybrid wheel loader is provided, the hybrid wheel loader achieving high work efficiency even with a short supply of power to be output relative to a vehicle power requirement.</p><p id="pa02" num="0002">The hybrid wheel loader includes a motor generator 6 connected to an engine (1), a hydraulic pump (4) connected to the motor generator, a hydraulic actuator (51, 52, 53) driven by hydraulic oil supplied from the hydraulic pump, a travel electric motor (9) for driving wheels (61), and an electrical storage device (11) connected to each of the motor generator and the electrical storage device via respective inverters (7, 10). When a total requirement power value is greater than a hybrid output upper limit value, either one of a hydraulic requirement power value Pf and a travel requirement power value Prun is limited according to an operation of the wheel loader to thereby set the total requirement power value to a value equal to, or less than, the hybrid output upper limit value.<img id="iaf01" file="imgaf001.tif" wi="97" he="60" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128500377" lang="EN" source="EPO" load-source="docdb"><p>A hybrid wheel loader is provided, the hybrid wheel loader achieving high work efficiency even with a short supply of power to be output relative to a vehicle power requirement.  The hybrid wheel loader includes a motor generator 6 connected to an engine (1), a hydraulic pump (4) connected to the motor generator, a hydraulic actuator (51, 52, 53) driven by hydraulic oil supplied from the hydraulic pump, a travel electric motor (9) for driving wheels (61), and an electrical storage device (11) connected to each of the motor generator and the electrical storage device via respective inverters (7, 10). When a total requirement power value is greater than a hybrid output upper limit value, either one of a hydraulic requirement power value Pf and a travel requirement power value Prun is limited according to an operation of the wheel loader to thereby set the total requirement power value to a value equal to, or less than, the hybrid output upper limit value.</p></abstract><description mxw-id="PDES63956434" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">Technical Field</heading><p id="p0001" num="0001">The present invention relates to a wheel loader including an engine and an electrical storage device as power sources.</p><heading id="h0002">Background Art</heading><p id="p0002" num="0002">In recent years, industrial products are more and more oriented toward energy saving from the viewpoints of, for example, environmental issues and soaring crude oil prices. This trend is also true with the field of construction and work vehicles that have so far mainly used hydraulic drive systems operated by diesel engines. Many of these vehicles are increasingly electrified to yield higher efficiency and consume less amounts of energy. For example, if the drive parts of the abovementioned construction and work vehicles are electrified, specifically, if electric motors are used for their drive sources, a number of energy-saving effects can be expected, such as driving of engines with high efficiency (for a hybrid model), improved power transmission efficiency, and recovery of regenerative electricity, in addition to reduced amounts of exhaust<!-- EPO <DP n="2"> --> gases. In this field of construction and work vehicles, the electrification of forklift trucks is most advanced and what-is-called the "battery forklift trucks" that use electric power of a battery to drive a motor are put into practical use ahead of other types of vehicles and mainly compact forklift trucks are battery-powered. In even later years, following the battery forklift trucks, "hybrid vehicles" in which a diesel engine is combined with an electric motor begin to be available as commercial products in, for example, hydraulic excavators and engine-powered forklift trucks.</p><p id="p0003" num="0003">Among the construction and work vehicles that are being electrified in order to respond to environmental issues and energy-saving needs as described above, wheel loaders are expected to be a promising type of vehicle that, when hybridized, will yield a relatively significant effect of reduced fuel consumption. Conventional wheel loaders are a type of work vehicle that excavates and conveys, for example, earth and sand using a bucket portion of a work implement attached forwardly of the vehicle, while traveling along with power from an engine transmitted to its wheels via, for example, a torque converter and a transmission (T/M). Electrifying the Travel drive portion of such a wheel loader allows power transmission efficiency of the torque converter and transmission portion to be improved power transmission efficiency of electricity. In addition, the wheel loader repeatedly performs a traveling operation<!-- EPO <DP n="3"> --> involving frequent starts and stops during working. If the tarvel drive portion is electrified, therefore, regenerative electric power during braking can be expected to be gained from the electric motor for traveling.</p><p id="p0004" num="0004">One known control method for a wheel loader hybrid system is disclosed in, for example, <patcit id="pcit0001" dnum="JP2008247269A"><text>JP-2008-247269-A</text></patcit>. The wheel loader disclosed in this document includes an engine and an electrical storage device as drive power sources.<br/>
The wheel loader further includes a vehicular tavel drive portion to which a hybrid drive system combining a motor generator, a planetary gear, and a transmission is applied. An engine speed is controlled based on an accelerator operation amount and an amount of charge of the electrical storage device, changeover of a shift speed of the transmission is controlled based on the accelerator operation amount, an operating condition of the motor generator, and a condition of charge of the electrical storage device, and torque to be generated in the engine and the motor generator is determined based on the accelerator operation amount, the travel speed, and the shift speed of the transmission.</p><heading id="h0003">Prior Art Document</heading><heading id="h0004">Patent Document</heading><heading id="h0005">Patent Document 1</heading><p id="p0005" num="0005"><patcit id="pcit0002" dnum="JP2008247269A"><text>JP-2008-247269-A</text></patcit><!-- EPO <DP n="4"> --></p><heading id="h0006">Summary of the Invention</heading><heading id="h0007">Problem to be Solved by the Invention</heading><p id="p0006" num="0006">One vehicle control method according to the technique disclosed in the abovementioned document is performed as follows. Specifically, if an overall vehicle torque requirement exceeds torque that can be generated by the engine, a travel torque command is calculated backward from setting values of engine torque and cargo-handling engine torque that are set in advance according to priority given to a travel system and a cargo-handling system (front work implement) and a motor generator torque command is also corrected accordingly.</p><p id="p0007" num="0007">In the above technique, however, the torque command of the motor generator and the travel torque command are calculated based on the torque of the motor generator to be driven using the electric power charged in the electrical storage device when the overall vehicle torque requirement exceeds torque that can be generated by the engine. If the electrical storage device is not charged with a reasonable amount of electric power, therefore, vehicle work efficiency may be reduced. Moreover, values of torque for different driving portions are set according to the predetermined priority. As a result, well-balanced work is not necessarily performed in all of various operating patterns of the wheel loader and reduced work efficiency may result in specific operating patterns.<!-- EPO <DP n="5"> --></p><p id="p0008" num="0008">It is an object of the present invention to provide a hybrid wheel loader including an electrified travel drive portion, the hybrid wheel loader being capable of performing vehicle control with high work efficiency even with a short supply of power to be output by a hybrid system relative to a vehicle power requirement due to, for example, discharge of electrical storage means.</p><heading id="h0008">Means for Solving the Problem</heading><p id="p0009" num="0009">To achieve the foregoing object, an aspect of the present invention provides a wheel loader comprising: an engine; a motor generator connected to an output shaft of the engine; a hydraulic pump connected to a rotational shaft of the motor generator; at least one hydraulic actuator driven by hydraulic fluid supplied from the hydraulic pump; wheels; a travel electric motor for driving the wheels; an electrical storage device connected to each of the motor generator and the travel electric motor via respective inverters; and a controller for calculating a hybrid output upper limit value that represents a sum of output upper limit values of the engine and the electrical storage device, a hydraulic requirement power value required by the hydraulic pump, and a travel requirement power value required by the travel electric motor, wherein the controller limits either one of the hydraulic requirement power value and the travel requirement power value according to an operation of the wheel loader when a total requirement<!-- EPO <DP n="6"> --> power value that represents a sum of the hydraulic requirement power value and the travel requirement power value is greater than the hybrid output upper limit value, thereby setting the total requirement power value to a value equal to, or less than, the hybrid output upper limit value.</p><heading id="h0009">Effects of the Invention</heading><p id="p0010" num="0010">The present invention allows a hybrid wheel loader including an electrified travel drive portion to maintain high work efficiency even when an output upper limit of a hybrid system falls short of a power requirement required by the vehicle due to, for example, discharge of an electrical storage device.</p><heading id="h0010">Brief Description of the Drawings</heading><p id="p0011" num="0011"><ul><li><figref idrefs="f0001">Fig. 1</figref> is a system configuration diagram showing a hybrid wheel loader according to an embodiment of the present invention.</li><li><figref idrefs="f0001">Fig. 2</figref> is a diagram showing an exemplary configuration of a related-art wheel loader.</li><li><figref idrefs="f0002">Fig. 3</figref> is a configuration diagram showing a controller 200 mounted on the wheel loader according to the embodiment of the present invention.</li><li><figref idrefs="f0002">Fig. 4</figref> is a diagram showing an exemplary configuration within a hybrid control unit 20 according to the embodiment of the present invention.<!-- EPO <DP n="7"> --></li><li><figref idrefs="f0003">Fig. 5</figref> is a diagram showing a power flow in a hybrid system according to the embodiment of the present invention.</li><li><figref idrefs="f0003">Fig. 6</figref> is an illustration showing V-cycle excavation work as an exemplary work pattern of a wheel loader.</li><li><figref idrefs="f0004">Fig. 7</figref> is a diagram showing an input/output relation of an operation determining part and a power limit setting part in the embodiment of the present invention.</li><li><figref idrefs="f0004">Fig. 8</figref> is a matrix showing correspondence among basic operations of the wheel loader according to the embodiment of the present invention, input information used when a specific basic operation is to be detected, and power requirement values limited in the basic operation.</li><li><figref idrefs="f0005">Fig. 9</figref> is a flowchart showing steps performed by the operation determining part 40 and the power limit setting part 41 in the embodiment.</li><li><figref idrefs="f0006">Fig. 10</figref> is a flowchart showing detailed steps performed by the operation determining part 40 in the embodiment.</li></ul></p><heading id="h0011">Modes for Carrying Out the Invention</heading><p id="p0012" num="0012">An embodiment of the present invention will be described below with reference to the accompanying drawings.</p><p id="p0013" num="0013"><figref idrefs="f0001">Fig. 1</figref> is a system configuration diagram showing a hybrid wheel loader according to the embodiment of the present invention. The wheel loader shown in this figure includes an engine 1, a motor generator (motor/generator<!-- EPO <DP n="8"> --> (M/G)) 6, an inverter 7, a hydraulic pump 4, a work implement 50, hydraulic actuators (a bucket cylinder 51, a lift cylinder 52, and a steering cylinder 53), a track structure 60, a travel electric motor 9, an inverter 10, an electrical storage device 11, operating devices (a control lever 56 and a steering wheel (not shown)), and a controller 200. Specifically, the motor generator 6 is connected to an output shaft of the engine 1. The inverter 7 controls the motor generator 6. The hydraulic pump 4 is connected to a rotational shaft of the motor generator 6. The work implement 50 includes a bucket and a lift arm (not shown) and is mounted forwardly of the vehicle. The hydraulic actuators are driven by hydraulic fluid supplied from the hydraulic pump 4 via a control valve 55. The track structure 60 has four wheels 61. The travel electric motor 9 is mounted on a propeller shaft 8 of the track structure 60 and drives the four wheels 61. The inverter 10 controls the travel electric motor 9. The electrical storage device 11 is electrically connected to the inverters 7, 10 via a DC-DC converter 12 to transfer DC electric power to or from the inverters 7, 10. The operating devices output operating signals for driving the hydraulic actuators 51, 52, 53 according to operating amounts.</p><p id="p0014" num="0014">The bucket cylinder 51 and the lift cylinder 52 are each driven based on an operating signal (hydraulic signal) output according to an operating amount of the control lever 56 disposed in a cab. The lift cylinder 52 is mounted on a<!-- EPO <DP n="9"> --> lift arm rotatably fixed forwardly of the vehicle body. The lift cylinder 52 extends or contracts based on the operating signal from the control lever 56, thereby vertically rotating the lift arm. The bucket cylinder 51 is mounted on a bucket rotatably fixed to a leading end of the lift arm. The bucket cylinder 51 extends or contracts based on the operating signal from the control lever 56, thereby vertically rotating the bucket. The steering cylinder 53 is driven by an operating signal (hydraulic signal) output according to a steering amount of the steering wheel (not shown) disposed in the cab. The steering cylinder 53 is connected to each of the wheels 61 and extends or contracts based on the operating signal from the steering wheel, thereby changing a steering angle of the wheels 61.</p><p id="p0015" num="0015">Preferably, an electric double layer capacitor is used for the electrical storage device 11. The electrical storage device 11 according to the embodiment uses the DC-DC converter 12 to control an increase or a decrease in capacitor voltage, thereby transferring DC electric power to or from the inverters 7, 10 (specifically, the motor generator 6 and the travel electric motor 9).</p><p id="p0016" num="0016">The hybrid wheel loader having the arrangements as described above performs work according to its purpose by supplying the work implement 50 for excavating, for example, earth and sand with hydraulic pressure as appropriate using the hydraulic pump 4. A traveling operation of the track<!-- EPO <DP n="10"> --> structure 60 is performed by driving the travel electric motor 9 using electric power generated by the motor generator 6 mainly with the power of the engine 1. At this time, the electrical storage device 11 stores regenerative electric power generated by the travel electric motor 9 during vehicle braking and supplies the motor generator 6 or the travel electric motor 9 with stored electric power to thereby assist the engine 1 in producing a power output, thus contributing to reduced energy consumption of the vehicle. It is noted that the hybrid system to which the present invention is applied is not limited to the exemplary configuration shown in <figref idrefs="f0001">Fig. 1</figref> and the present invention can be applied to various system configurations including a parallel track type.</p><p id="p0017" num="0017"><figref idrefs="f0001">Fig. 2</figref> is a diagram showing an exemplary configuration of a related-art wheel loader. In the figure, like or corresponding parts are identified by the same reference numerals as those used in the earlier figure and descriptions for those parts will not be duplicated (the same applies to subsequent figures). The related-art wheel loader shown in this figure includes a track structure 60 and a work implement 50 (lift/bucket portion) as main drive portions. The wheel loader travels along by transmitting power of an engine 1 to wheels 61 via a torque converter 2 and a transmission (T/M) 3. The wheel loader further excavates and conveys, for example, earth and sand using the work implement 50 driven by the hydraulic pump 4. The<!-- EPO <DP n="11"> --> torque converter has a power transmission efficiency inferior to that of electricity. If a travel drive portion of the wheel loader shown in <figref idrefs="f0001">Fig. 2</figref> is electrified (including modification to a parallel hybrid configuration), therefore, the power transmission efficiency from the engine 1 can be improved. Furthermore, the wheel loader repeatedly performs the traveling operation involving frequent starts and stops during working. If the travel drive portion is electrified, therefore, regenerative electric power during braking can be expected to be recovered from a travel electric motor 9. Electrifying part of the drive unit of the wheel loader to make a hybrid configuration as described above generally allows fuel consumption to be reduced by about several tens of percent.</p><p id="p0018" num="0018"><figref idrefs="f0002">Fig. 3</figref> is a configuration diagram showing the controller 200 mounted on the wheel loader according to the embodiment of the present invention. As shown in this figure, the wheel loader (vehicle) according to the embodiment includes as the controller 200 a hybrid control unit 20, a hydraulic control unit 21, an engine control unit 22, an inverter control unit 23, and a converter control unit 24. Specifically, the hybrid control unit 20 controls, for example, an energy flow and a power flow of the entire hybrid system shown in <figref idrefs="f0001">Fig. 1</figref>. The hydraulic control unit 21 controls the control valve (C/V) 55 and the hydraulic pump 4. The engine control unit 22 controls the engine 1. The inverter control unit 23 controls the inverters 7, 10.<!-- EPO <DP n="12"> --> The converter control unit 24 controls the DC-DC converter 12.</p><p id="p0019" num="0019">Each of the control units 20, 21, 22, 23, 24 includes a storage (e.g., RAM, ROM) (not shown) that stores details and results of processing and a processor (e.g., CPU) (not shown) that performs processing stored in the storage. The control units 20, 21, 22, 23, 24 are connected to each other via a controller area network (CAN), mutually transmitting and receiving command values and state quantities of the units. As shown in <figref idrefs="f0002">Fig. 3</figref>, the hybrid control unit 20 is a host to the hydraulic control unit 21, the engine control unit 22, the inverter control unit 23, and the converter control unit 24, generally controlling the entire system and giving a specific operating command to each of the control units 21 to 24 to ensure that the entire system exhibits the best possible working performance.</p><p id="p0020" num="0020">The control units 20, 21, 22, 23, 24 shown in <figref idrefs="f0002">Fig. 3</figref> are only those required for controlling the various drive portions of the hybrid system shown in <figref idrefs="f0001">Fig. 1</figref>. Other control units for monitoring and information systems that are required to make an actual vehicle practical are not directly related to the present invention and thus not shown. Additionally, each of the control units 20, 21, 22, 23, 24 is not necessarily separate from each other as shown in <figref idrefs="f0002">Fig. 3</figref> and two or more control functions may be mounted on a single control unit.<!-- EPO <DP n="13"> --></p><p id="p0021" num="0021"><figref idrefs="f0002">Fig. 4</figref> is a diagram showing an exemplary configuration within the hybrid control unit 20 according to the embodiment of the present invention. The hybrid control unit 20 shown in this figure includes a system control section 30, a power distribution section 31, an engine control section 32, a M/G control section 33, a hydraulic control section 34, and a travel control section 35. Specifically, the system control section 30 generally controls the hybrid system. The power distribution section 31 distributes outputs from the engine 1 and the electrical storage device 11 to the hydraulic pump 4 and the travel electric motor 9. The engine control section 32 determines a speed command for the engine 1 according to a required power value (total requirement power value) in the entire vehicle that is obtained by adding a power value required by the hydraulic pump 4 (hydraulic requirement power value Pf) to a power value required by the travel electric motor 9 (travel requirement power value Prun). The M/G control section 33 determines a torque command for the motor generator 6 according to an electric power generation requirement value. The hydraulic control section 34 calculates a tilting angle command value of the hydraulic pump 4 from the hydraulic requirement power value Pf of the hydraulic pump 4 calculated from, for example, an operating amount of the control lever 56. The travel control section 35 calculates a torque command for the travel electric motor 9 from the travel requirement power value Prun calculated<!-- EPO <DP n="14"> --> from depression amounts of the accelerator/brake pedals and the current travel speed.</p><p id="p0022" num="0022">The hybrid control unit 20 receives inputs of an operating signal output from the control lever 56, depression amounts of the accelerator pedal and the brake pedal disposed inside the cab, a switch signal (F/R signal) output from a F/R switch (selector) 63 for selecting a forward or reverse motion as the travel direction of the vehicle, the switch signal indicating the position (forward or reverse) of the switch, a travel speed calculated from a speed of the wheels 61 detected by a speed sensor (wheel speed detecting means) 62, a speed of the travel electric motor 9 output from the inverter 10, a speed of the engine 1 (engine speed), and a stored electricity amount of the electrical storage device 11 (terminal voltage and output current of the electrical storage device 11). It is noted that the speed of the wheel loader may be calculated by the hybrid control unit 20 using a detected value of the speed sensor 62.</p><p id="p0023" num="0023">As described above, the hybrid system according to the embodiment of the present invention includes the engine 1 and the electrical storage device 11 as the power sources for driving the vehicle. For the engine 1, the power to be output (engine output upper limit value Pe) is determined according to the engine speed that varies from one timing to another and, for the electrical storage device 11, the power<!-- EPO <DP n="15"> --> to be output (electrical storage device output upper limit value Pc) is determined according to the stored electricity amount (charged condition) that varies from one timing to another. Specifically, the power to be output in the hybrid system is determined responsive to particular states.</p><p id="p0024" num="0024"><figref idrefs="f0003">Fig. 5</figref> is a diagram showing a power flow in the hybrid system according to the embodiment of the present invention. As shown in this figure, the power distribution section 31 performs a process of distributing the engine output Pe and the electrical storage device output Pc to the output Pf of the work implement 50 and the output Prun of the travel electric motor 9. It is noted that Pmg_in and Pmg_out in expressions (1) and (2) given below denote input power and output power of the motor generator 6, respectively.</p><p id="p0025" num="0025"><maths id="math0001" num="(Expression 1)"><math display="block"><mi>Pf</mi><mo>=</mo><mi>Pe</mi><mo>-</mo><mi>Pmg_in</mi></math><img id="ib0001" file="imgb0001.tif" wi="93" he="9" img-content="math" img-format="tif"/></maths><maths id="math0002" num="Expression (2)"><math display="block"><mi>Prun</mi><mo>=</mo><mi>Pmg_out</mi><mo>+</mo><mi>Pc</mi></math><img id="ib0002" file="imgb0002.tif" wi="105" he="9" img-content="math" img-format="tif"/></maths> If a sum (total requirement power value) of the power value required by the work implement 50 (hydraulic requirement power value Pf) and the power value required by the travel electric motor 9 (travel requirement power value Prun) is smaller than a sum (hybrid output upper limit value) of the output upper limit values Pe, Pc, the hybrid control unit 20 causes the system control section 30 to determine a manner that provides the highest fuel consumption for output and, accordingly, causes the power<!-- EPO <DP n="16"> --> distribution section 31 to issue a command value that meets the power requirement value of each of the work implement 50 and the travel electric motor 9, thereby operating the vehicle.</p><p id="p0026" num="0026">The wheel loader to which the present invention is applied has a number of basic operation patterns. The hybrid control unit 20 is required to operate the vehicle optimally according to each individual operation pattern. One of the most typical working patterns is, for example, V-cycle excavation work.</p><p id="p0027" num="0027"><figref idrefs="f0003">Fig. 6</figref> is an illustration showing the V-cycle excavation work as an exemplary work pattern of the wheel loader. The V-cycle excavation work assumes a major operation pattern, accounting for about 70% or more of all of operations of the actual wheel loader. The wheel loader first advances into the object to be excavated, such as a mound of earth and sand, and then captures the object with its bucket while inserting the bucket. Next, reversing back to the original position, the wheel loader raises its lift arm and bucket, with its steering wheel being turned as necessary, and advances toward a carrying vehicle, such as a dump truck. After having dumped the object onto the carrying vehicle from the bucket, the wheel loader reverses again to return to the original position. Drawing a V-shaped trace as described above, the vehicle repeats these steps. When letting the hybrid wheel loader shown in <figref idrefs="f0001">Fig. 1</figref><!-- EPO <DP n="17"> --> perform the sequence of operations described above, the hybrid control unit 20 distributes the outputs from the engine 1 and the electrical storage device 11 to the work implement 50 and the travel electric motor 9. The above is the control operation performed when the V-cycle excavation work as a standard operation pattern of the wheel loader is performed on the hybrid wheel loader shown in <figref idrefs="f0001">Fig. 1</figref> as required by the requirement power value.</p><p id="p0028" num="0028">In the hybrid system according to the embodiment, however, if the electrical storage device 11 is in an over-discharge condition or the speed of the engine 1 is lower than a predetermined value, the total requirement power value (the sum of the hydraulic requirement power value Pf and the travel requirement power value Prun) may exceed the hybrid output upper limit value (the sum of the engine output upper limit value Pe and the electrical storage device output upper limit value Pc). If the electrical storage device 11 is a capacitor and a vehicle operation involves a relatively heavy load, in particular, the electric power is repeatedly output from the electrical storage device 11, so that a short supply of output of the hybrid system is likely to occur relative to the total requirement power value as described above.</p><p id="p0029" num="0029">Being a construction vehicle that performs excavation work using the work implement 50 mounted at the front portion thereof, while traveling along with the four wheels<!-- EPO <DP n="18"> --> 61, the wheel loader performs a large variety of operations that vary according to external situations. As a result, the short supply of output of the hybrid system can affect work performance of the vehicle. For example, in a combined operation in which a lift arm raising operation in the work implement 50 and a vehicle starting operation are performed simultaneously (raising the lift arm, while moving the vehicle forward), raising the bucket to a required height is important before the vehicle reaches an intended location, even if the hybrid output upper limit value is lower than the total requirement power value. Thus, preferably, priority is given to the output to the work implement 50 as much as possible (specifically, the output to the travel electric motor 9 is limited).</p><p id="p0030" num="0030">In the hybrid wheel loader, the total requirement power value may exceed the hybrid output upper limit value due to the electrical storage device 11 being in an over-discharge condition or the engine speed being lower than a predetermined value, as described above. Even in such cases, preferably, the power is distributed optimally to each drive portion in the work implement 50 and the lower track structure 60 depending on specific operating details, thereby ensuring required work performance. In the hybrid wheel loader according to the embodiment, therefore, to enable such operations, the hybrid control unit 20 includes an operation determining part 40 and a power limit setting part 41 disposed thereinside.<!-- EPO <DP n="19"> --></p><p id="p0031" num="0031"><figref idrefs="f0004">Fig. 7</figref> is a diagram showing an input/output relation of the operation determining part 40 and the power limit setting part 41 in the embodiment of the present invention. A configuration of the operation determining part 40 will be first described below. The operation determining part 40 receives inputs of information on operations and work of the vehicle, specifically, the operating mount of the control lever 56, the depression amounts of the accelerator pedal and the brake pedal, the switch signal from the F/R switch 63, the speed of the travel electric motor 9, and the travel speed. The operation determining part 40 determines, based on these pieces of information input thereto, the specific detail of the current operation of the wheel loader. The operation of the operation determining part 40 is related to the work performance of the entire vehicle and, preferably, disposed in the system control section 30 within the hybrid control unit 20 as shown in <figref idrefs="f0002">Fig. 4</figref>.</p><p id="p0032" num="0032"><figref idrefs="f0004">Fig. 8</figref> is a matrix showing correspondence among basic operations of the wheel loader according to the embodiment of the present invention, input information used when a specific basic operation is to be detected, and power requirement values (travel requirement power value Prun / hydraulic requirement power value Pf) limited in the basic operation. Types of basic operations cited in the embodiment are mainly:<!-- EPO <DP n="20"> -->
<ul><li>(Operation 1) Starting the vehicle and, at the same time, raising the lift arm (combined operation): Raising the lift arm, while starting the vehicle from a standstill position;</li><li>(Operation 2) Excavation: Causing the vehicle to advance into the object to be excavated, such as a mound of earth, to thereby load the bucket with earth and sand, or causing the vehicle to climb up a slope of the mound, while letting the bucket cut into part of the slope, to thereby load the bucket with earth and sand; and</li><li>(Operation 3) Bucket scooping and dumping: Following the excavation (operation 2), raising the lift arm and tilting the bucket to scoop up earth and sand with the bucket and dumping to release the earth and sand.</li></ul></p><p id="p0033" num="0033">The (operation 2) is further divided into:
<ul><li>(Operation 2-1) Level ground excavation first-half operation: Causing the bucket to cut into the object to be excavated, such as a mound of earth and sand, to thereby load the bucket with earth and sand; and</li><li>(Operation 2-2) Scooping up first-half operation: Causing the vehicle to climb up a slope of the mound, while letting the bucket cut into part of the slope, to thereby load the bucket with earth and sand. The term "scooping up", as used herein, refers to the operation in which, while the wheel loader climbs up a slope of the mound of earth and sand, the bucket cuts into part of the slope.</li></ul></p><p id="p0034" num="0034"><!-- EPO <DP n="21"> --> Similarly, the (operation 3) is further divided into:
<ul><li>(Operation 3-1) Level ground excavation second-half operation: Causing the bucket to scoop up the earth and sand excavated in the level ground excavation first-half operation (operation 2-1) and dump to release the earth and sand; and</li><li>(Operation 3-2) Scooping up second-half operation: Causing the bucket to scoop up the earth and sand filled therein in the scooping up first-half operation (operation 2-2) and dump to release the earth and sand. Specifically, the operations are divided into five specific types.</li></ul></p><p id="p0035" num="0035">Understandably, the operations may be further subdivided, but any of these subtypes is similar to any of the above-described five types. Thus, these subtypes are considered to fall into any of the above five types.</p><p id="p0036" num="0036">A method for determining each of the basic three types of operations (operations 1, 2, and 3) will be described. These three types of operations can be basically determined with an operating amount L of the control lever 56 and a depression amount A of the accelerator pedal. Now, threshold values are to be set for the operating amount L of the control lever 56 and the depression amount A of the accelerator pedal. Specifically, let L1 be a first operating amount and L2 be a second operating amount, the first operating amount L1 being greater than the second operating amount L2 (L1 &gt; L2) and the first operating amount<!-- EPO <DP n="22"> --> L1 being close to a maximum operating amount. Let A1 be a first depression amount and A2 be a second depression amount, the first depression amount A1 being greater than the second depression amount A2 (A1 &gt; A2) and the first depression amount A1 being close to a maximum depression amount. Similarly, threshold values are to be set for a travel speed B of the wheel loader and a rotational speed R of the travel electric motor 9. Specifically, let V1 be a first travel speed and V2 be a second travel speed, the first travel speed V1 being greater than the second travel speed (V1 &gt; V2) and the second travel speed V2 being close to zero (stationary state). Let R1 be a first rotational speed and R2 be a second rotational speed, the first rotational speed R1 being greater than the second rotational speed R2 (R1 &gt; R2) and the second rotational speed R2 being close to zero (stationary state).</p><p id="p0037" num="0037">In operation 1, the lift arm is raised, while the vehicle is started from a stationary state. This involves the control lever 56 being operated to a point close to the maximum operating amount (or to the very maximum operating amount) and the accelerator pedal being depressed to a point close to the maximum depression amount (or to the very maximum depression amount). The operation determining part 40 then determines that operation 1 is being performed when the operating amount of the control lever 56 is set to the first operating amount L1 or more and the depression amount of the accelerator pedal is set to the first depression<!-- EPO <DP n="23"> --> amount A1 or more. When operation 1 is to be performed, the travel speed is accelerated from zero. From a viewpoint of making an even more accurate determination of operation, a change in the travel speed may further be detected to make the determination, in addition to the operating amount of the control lever 56 and the depression amount of the accelerator pedal.</p><p id="p0038" num="0038">Operation 2 involves capturing of, for example, earth and sand with the bucket. With an emptied bucket held in position and the lift arm held at a low level position, a large traction force (traveling drive power) is generated to make the vehicle advance into the mound of earth. Specifically, in operation 2, the operating amount of the control lever 56 is small and the depression amount of the accelerator pedal tends to be smaller than that in operation 1, but is relatively large. Thus, the operation determining part 40 determines that operation 2 is being performed when the operating amount of the control lever 56 is set to be smaller than the second operating amount L2 and the depression amount of the accelerator pedal is set to be smaller than the first depression amount A1 and the second depression amount A2 or more. During operation 2, the travel speed is low or zero and the F/R switch 63 is in the forward position. From the viewpoint of making an even more accurate determination of operation, a change in the travel speed and the position of the F/R switch 63 may further be detected, in addition to the operating amount of the control<!-- EPO <DP n="24"> --> lever 56 and the depression amount of the accelerator pedal, and the determination may be made that operation 2 is being performed when the travel speed is V1 or less and the F/R switch 63 is placed in the forward position.</p><p id="p0039" num="0039">In operation 3, the lift arm is raised, while the bucket loaded with, for example, earth and sand in operation 2 is tilted and the bucket is dumped at a required position to release the earth and sand. Specifically, in operation 3, the control lever 56 is operated in a direction in which the lift cylinder 52 is extended (a direction in which the lift arm) and the vehicle is held is a substantially stationary state. Then, the operation determining part 40 determines that operation 3 is being performed when the operating amount of the control lever 56 is set to be smaller than the first operating amount L1 and the second operating amount L2 or more and the depression amount of the accelerator pedal is set to be smaller than the second depression amount A2 after the determination that operation 2 is performed has been made. Instead of the foregoing, operation 3 may be determined to be being performed, if the control lever 56 is operated in a direction in which the lift arm is raised after the determination that operation 2 is performed has been made. Alternatively, when operation 3 is to be performed, the travel speed is nearly zero and the F/R switch 63 is placed in the forward position. Thus, from the viewpoint of making an even more accurate determination of operation, a change in the travel speed and the position<!-- EPO <DP n="25"> --> of the F/R switch 63 may further be detected, in addition to the operating amount of the control lever 56 and the depression amount of the accelerator pedal, and the determination may be made that operation 3 is being performed when the travel speed is V2 or less and the F/R switch 63 is placed in the forward position.</p><p id="p0040" num="0040">Cases in which operation 2 needs to be subdivided into two sub-operations (operation 2-1 and operation 2-2) will be described below. Unlike the level ground excavation first-half operation (operation 2-1), the scooping up first-half operation (operation 2-2) is excavation work performed on a slope. As a result, during the scooping up first-half operation, the vehicle body tends to be temporarily reversed despite the "forward" position in which the F/R switch 63 is placed; specifically, a situation develops in which the vehicle body is moved in a direction different from the position of the F/R switch 63. In this embodiment, therefore, a sign of the travel speed and a sign of a switch signal of the F/R switch 63 are detected and it is thereby determined whether the vehicle body is reversed despite the position of the F/R switch 63. It is noted that the sign of the travel speed is positive when the vehicle body moves forward and negative when the vehicle body moves backward. In addition, the sign of the switch signal is positive when the F/R switch 63 is placed in the forward position and negative when the F/R switch 63 is placed in the reverse position. Thus, the operation determining part 40 may<!-- EPO <DP n="26"> --> determine that the scooping up first-half operation (operation 2-2) is being performed and the wheel loader is operating on a slope, when, with the determination made that operation 2 is being performed, there is a mismatch between the sign of the switch signal output from the F/R switch 63 and the sign of the travel speed. In contrast, if there is a match between the signs, the operation determining part 40 determines that the level ground excavation first-half operation (operation 2-1) is being performed and the wheel loader is operating on a flat ground.</p><p id="p0041" num="0041">Cases in which operation 3 needs to be subdivided into two sub-operations (operation 3-1 and operation 3-2) will be described below. The scooping up second-half operation (operation 3-2) is performed on a slope as in the scooping up first-half operation. If the scooping up second-half operation needs to be differentiated from the level ground excavation second-half operation (operation 3-1), therefore, the sign of the travel speed and the position in which the F/R switch 63 is placed (sign of the switch signal) only need to be detected similar to operation 2. The scooping up second-half operation is further characterized in that the operation is set when the brake pedal is depressed to prevent the vehicle from being reversed. Thus, the operation determining part 40 may determine that the scooping up second-half operation is being performed when, with the determination made that operation 3 is being performed, the brake pedal is detected<!-- EPO <DP n="27"> --> to be depressed in addition to a mismatch between the position (forward) in which the F/R switch 63 is placed and the direction of the travel speed.</p><p id="p0042" num="0042">As described above, the operation determining part 40 determines the specific operation performed by the hybrid wheel loader based on the input information shown in <figref idrefs="f0004">Fig. 8</figref>. It is noted that, while the travel speed is in some cases used for determining the operation, the operation may nonetheless be determined based on the criteria shown in <figref idrefs="f0004">Fig. 8</figref> by detecting the speed of the travel electric motor 9, instead of the travel speed.</p><p id="p0043" num="0043">In <figref idrefs="f0004">Fig. 7</figref>, the power limit setting part 41 limits either the hydraulic requirement power value Pf or the travel requirement power value Prun to thereby cause the total requirement power value to fall within the hybrid output upper limit value according to the result of the determination made by the operation determining part 40, when the total requirement power value is greater than the hybrid output upper limit value. The power limit setting part 41 receives inputs of the specific operation determined by the operation determining part 40, the hydraulic requirement power value Pf and the travel requirement power value Prun output from the operation determining part 40, the engine output upper limit value Pe calculated from the engine speed, and the electrical storage device output upper limit value Pc (capacitor output) calculated from the amount<!-- EPO <DP n="28"> --> of electric power stored in the electrical storage device 11. The power limit setting part 41 in the embodiment is disposed in the power distribution section 31 in the hybrid control unit 20.</p><p id="p0044" num="0044">The rightmost column of <figref idrefs="f0004">Fig. 8</figref> shows a specific type of power to be limited by the power limit setting part 41, associated with a result of the determination made by the operation determining part 40. Specifically,<br/>
(Operation 1): travel requirement power value Prun;<br/>
(Operation 2): hydraulic requirement power value Pf; and<br/>
(Operation 3): travel requirement power value Prun. From the viewpoint of improved work efficiency, preferably, priority is given to the hydraulic requirement power value Pf in operation 1 and operation 3, and to the travel requirement power value Prun in operation 2.</p><p id="p0045" num="0045">For example, if the total requirement power value is greater than the hybrid output upper limit value while operation 1 is being performed, the power limit setting part 41 calculates a difference between the total requirement power value and the hybrid output upper limit value (a shortage) and, by subtracting the shortage from the travel requirement power value Prun, sets a new travel requirement power value Prun so that the total requirement power value falls within the hybrid output upper limit value.</p><p id="p0046" num="0046"><!-- EPO <DP n="29"> --> Specific steps to be performed by the operation determining part 40 and the power limit setting part 41 will be described below with reference to the accompanying drawings. <figref idrefs="f0005">Fig. 9</figref> is a flowchart showing steps performed by the operation determining part 40 and the power limit setting part 41 in the embodiment. As shown in the figure, the operation determining part 40 first receives inputs of various types of signals (S100).</p><p id="p0047" num="0047">Based on the depression amounts of the accelerator pedal and the brake pedal and the operating amount of the control lever 56, the operation determining part 40 calculates the hydraulic requirement power value Pf and the travel requirement power value Prun (S101). In S102, the hybrid control unit 20, receiving inputs of the engine speed, and the terminal voltage and output current of the electrical storage device 11, calculates the engine output upper limit value Pe and the electrical storage device output upper limit value Pc.</p><p id="p0048" num="0048">In S103, the power limit setting part 41 compares the total requirement power value that is the sum of the hydraulic requirement power value Pf and the travel requirement power value Prun with the hybrid output upper limit value that is the sum of the engine output upper limit value Pe and the engine output upper limit value Pe. If the total requirement power value exceeds the hybrid output<!-- EPO <DP n="30"> --> upper limit value, the process shifts to a power limiting mode and proceeds to S104.</p><p id="p0049" num="0049">In S104, the operation determining part 40 determines whether the current specific operation of the vehicle falls into operation 1, operation 2, or operation 3 based on the signals applied thereto in S100. The specific operation is here determined based on the criteria shown in <figref idrefs="f0004">Fig. 8</figref> described earlier. Specifically, the operation is determined based on the flowchart shown in <figref idrefs="f0006">Fig. 10</figref>.</p><p id="p0050" num="0050"><figref idrefs="f0006">Fig. 10</figref> is a flowchart showing detailed steps performed by the operation determining part 40 in the embodiment. As shown in this figure, the operation determining part 40 first compares the current lever operating amount with the setting value L1 (S200) and then compares the current accelerator depression amount with the setting value A1 (S201). If, as a result, the lever operating amount is equal to, or more than, the setting value L1 and the accelerator depression amount is equal to, or more than, the setting value A1, the operation determining part 40 determines operation (1) in S202 and the process proceeds to S105 (<figref idrefs="f0005">Fig. 9</figref>).</p><p id="p0051" num="0051">If it is determined in S200 or S201 that either the lever operating amount or the accelerator depression amount is less than the setting value L1 or A1, the lever operating amount is compared with the setting value L2 in S203. If<!-- EPO <DP n="31"> --> the lever operating amount is less than the setting value L2, the accelerator depression amount is compared with the setting value A2 in S204. If, as a result, the accelerator depression amount is equal to, or more than, the setting value A2, the operation determining part 40 determines operation (2) in S205 and performs S105.</p><p id="p0052" num="0052">In the above step of determining operation (2), if the lever operating amount is equal to, or more than, the setting value L2 in S203, the process proceeds to S206 and the accelerator depression amount is compared with the setting value A2. If, as a result, the accelerator depression amount is less than the setting value A2, the operation determining part 40 determines operation (3) in S207 and the process proceeds to S105.</p><p id="p0053" num="0053">If the accelerator depression amount is less than the setting value A2 in S204 (specifically, lever operating amount &lt; L2 and accelerator depression amount &lt; A2), and the accelerator depression amount is equal to, or more than, the setting value A2 in S206 (specifically, lever operating amount ≥ L2 and accelerator depression amount ≥ A2), the lever operating amount and the accelerator depression amount are considered to be operated at an identical ratio and the operation determining part 40 determines other operation in S208. In this case, output priority is not set between the hydraulic requirement power value and the travel requirement<!-- EPO <DP n="32"> --> power value in S105 and the output only needs to be limited at the identical ratio in S106.</p><p id="p0054" num="0054">It is noted that, after the steps of S205 and S207 have been performed, a step may be performed to determine a match between the sign of the switch signal of the F/R switch 63 and the sign of the current travel speed (sign of a detected value of the travel speed) (S209, S212) before performance of S105. If there is a match between the sign of the switch signal and the sign of the current travel speed in S209, operation (2-1) is determined in S210. In contrast, if a mismatch occurs between the two signs, the vehicle is determined to be reversed on a slope and operation (2-2) is determined in S211. If there is a match between the two signs in S212, operation (3-1) is determined in S213. In contrast, if a mismatch occurs between the two signs, the vehicle is determined to be reversed on a slope and operation (3-2) is determined in S214.</p><p id="p0055" num="0055">As noted, operation (2) and operation (3) are each subdivided into the level ground work and the scooping up work. This is because, during the scooping up work, in particular, shortage of the output of the travel electric motor 9 can result from power distribution, resulting in the vehicle being reversed, despite the F/R switch 63 being placed in the forward position. Specifically, if it is determined that the reversal of the vehicle (mismatch in sign between the switch signal and the travel speed) occurs,<!-- EPO <DP n="33"> --> preferably, control is performed so that, while the travel requirement power value is increased by a requirement for preventing the vehicle from being reversed (specifically, a requirement for causing the vehicle to advance or remain stationary), the hydraulic requirement power value is limited by the increase of the travel requirement power value, in addition to the limiting of the hydraulic requirement power value or the travel requirement power value performed in S205 or S207. Specifically, if operation (2-2) or (3-2) is determined, a power value required for avoiding the reversal is added to the travel requirement power value determined in S205 and S207, and a power value corresponding to the power value required for avoiding the reversal is subtracted from the hydraulic requirement power value determined in S205 and S207. The control performed as described above prevents the vehicle from being reversed during the scooping up work, thus improving work efficiency during the scooping up work.</p><p id="p0056" num="0056">Referring back to <figref idrefs="f0005">Fig. 9</figref>, the specific type of power to be limited is determined in S105 based on the specific operation determined in S104. The determination is here made based on the combination shown in <figref idrefs="f0004">Fig. 8</figref>. When the specific type of power to be limited is determined in S105, a step is performed to limit the power in S106. The power limiting step to be here performed may include, for example, calculating a difference between the total requirement power value and the hybrid output upper limit value and<!-- EPO <DP n="34"> --> subtracting the power equivalent to the thus-obtained difference from the specific type of power to be limited determined in S105. When the power limiting step is completed, the process returns to S100 and the steps from S100 and onward are repeated. If it is determined in S103 that the hybrid output upper limit value exceeds the total requirement power value, the process is terminated as a normal mode and the steps of S100 and onward are repeated.</p><p id="p0057" num="0057">The foregoing process allows the drive portion to which the power is preferentially distributed is determined according to the specific operation performed by the wheel loader even in shortage of output of the vehicle (e.g., the work implement 50 is heavily loaded or the voltage of the electrical storage device 11 falls below a set value and is in a discharged state (specifically, the electrical storage device 11 has a short amount of electric power stored therein)). The process thereby permits optimum allotment of the driving force to the thus-determined drive portion, making the most of vehicle work characteristics. Thus, the embodiment can maintain high work efficiency even when the hybrid output upper limit value is smaller than the total requirement power value due to, for example, discharge of the electrical storage device.</p><heading id="h0012">Description of Reference Numerals</heading><p id="p0058" num="0058"><dl id="dl0001"><dt>1</dt><dd>Engine</dd><dt>2</dt><dd>Torque converter<!-- EPO <DP n="35"> --></dd><dt>3</dt><dd>Transmission (T/M)</dd><dt>4</dt><dd>Hydraulic pump</dd><dt>6</dt><dd>Motor/generator (M/G)</dd><dt>7</dt><dd>Inverter</dd><dt>8</dt><dd>Propeller shaft</dd><dt>9</dt><dd>Travel electric motor</dd><dt>10</dt><dd>Inverter</dd><dt>11</dt><dd>Electrical storage device</dd><dt>12</dt><dd>DC-DC converter</dd><dt>20</dt><dd>Hybrid control unit</dd><dt>21</dt><dd>Engine control unit</dd><dt>22</dt><dd>Converter control unit</dd><dt>23</dt><dd>Hydraulic control unit</dd><dt>24</dt><dd>Inverter control unit</dd><dt>30</dt><dd>System control unit</dd><dt>31</dt><dd>Power distribution section</dd><dt>32</dt><dd>Engine control section</dd><dt>33</dt><dd>M/G control section</dd><dt>34</dt><dd>Hydraulic control section</dd><dt>35</dt><dd>Travel control section</dd><dt>40</dt><dd>Operation determining part</dd><dt>41</dt><dd>Power limit setting part</dd><dt>50</dt><dd>Work implement</dd><dt>60</dt><dd>Track structure</dd><dt>61</dt><dd>Wheel</dd><dt>200</dt><dd>Controller</dd><dt>Pf</dt><dd>Hydraulic requirement power value</dd><dt>Prun</dt><dd>Travel requirement power value<!-- EPO <DP n="36"> --></dd><dt>Pe</dt><dd>Engine output upper limit value</dd><dt>Pc</dt><dd>Electrical storage device output upper limit value</dd></dl></p></description><claims mxw-id="PCLM56977369" lang="EN" load-source="patent-office"><!-- EPO <DP n="37"> --><claim id="c-en-0001" num="0001"><claim-text>A wheel loader comprising:
<claim-text>an engine;</claim-text>
<claim-text>a motor generator connected to an output shaft of the engine;</claim-text>
<claim-text>a hydraulic pump connected to a rotational shaft of the motor generator;</claim-text>
<claim-text>at least one hydraulic actuator driven by hydraulic oil supplied from the hydraulic pump;</claim-text>
<claim-text>wheels;</claim-text>
<claim-text>a travel electric motor for driving the wheels;</claim-text>
<claim-text>an electrical storage device connected to each of the motor generator and the travel electric motor via respective inverters; and</claim-text>
<claim-text>a controller for calculating a hybrid output upper limit value that represents a sum of output upper limit values of the engine and the electrical storage device, a hydraulic requirement power value required by the hydraulic pump, and a travel requirement power value required by the travel electric motor, wherein</claim-text>
<claim-text>the controller limits either one of the hydraulic requirement power value and the travel requirement power value according to an operation of the wheel loader when a total requirement power value that represents a sum of the hydraulic requirement power value and the travel requirement power value is greater than the hybrid output upper limit value, thereby setting the total requirement power value to<!-- EPO <DP n="38"> --> a value equal to, or less than, the hybrid output upper limit value.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The wheel loader according to claim 1, wherein<br/>
the at least one hydraulic actuator comprises a bucket cylinder that extends and contracts to vertically rotate a bucket and a lift cylinder that extends and contracts to vertically rotate a lift arm, and<br/>
the controller limits the travel requirement power value when the total requirement power value is greater than the hybrid output upper limit value during a lift arm raising operation to be performed with the wheel loader being started.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The wheel loader according to claim 1 or 2,<br/>
wherein<br/>
the at least one hydraulic actuator comprises a bucket cylinder that extends and contracts to vertically rotate a bucket and a lift cylinder that extends and contracts to vertically rotate a lift arm, and<br/>
the controller limits the hydraulic requirement power value when the total requirement power value is greater than the hybrid output upper limit value during an excavation operation to be performed by the wheel loader.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The wheel loader according to any one of claims 1 to 3, wherein<br/>
the at least one hydraulic actuator comprises a bucket cylinder that extends and contracts to vertically rotate a bucket and a lift cylinder that extends and contracts to vertically rotate a lift arm, and<br/>
<!-- EPO <DP n="39"> -->the controller limits the travel requirement power value when the total requirement power value is greater than the hybrid output upper limit value during bucket scooping and bucket dumping operations to be performed following an excavation operation by the wheel loader.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The wheel loader according to any one of claims 1 to 4, further comprising:
<claim-text>an operating device that outputs an operating signal for driving the actuator according to an operating amount;</claim-text>
<claim-text>an accelerator pedal that controls a speed of the engine; and</claim-text>
<claim-text>a brake pedal that controls a brake unit of the wheels,</claim-text>
<claim-text>wherein the controller calculates an engine output upper limit value based on the speed of the engine, calculates an electrical storage device output upper limit value based on an amount of electric power stored in the electrical storage device, calculates the hydraulic requirement power value required by the hydraulic pump based on the operating amount of the operating device, and calculates the travel requirement power value required by the travel electric motor based on depression amounts of the accelerator pedal and the brake pedal, and a travel speed.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The wheel loader according to claim 1, further comprising:
<claim-text>an operating device that outputs an operating signal for driving the actuator according to an operating amount; and<!-- EPO <DP n="40"> --></claim-text>
<claim-text>an accelerator pedal that controls a speed of the engine, wherein</claim-text>
<claim-text>by having a first operating amount set in the operating amount of the operating device and a first depression amount set in the depression amount of the accelerator pedal, the controller limits the travel requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is equal to, or more than, the first operating amount and the depression amount of the accelerator pedal is equal to, or more than, the first depression amount.</claim-text></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The wheel loader according to claim 6, wherein by having a second operating amount smaller than the first operating amount set in the operating amount of the operating device and a second depression amount smaller than the first depression amount set in the depression amount of the accelerator pedal, the controller limits the hydraulic requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is less than the second operating amount and the depression amount of the accelerator pedal is less than the first depression amount and equal to, or more than, the second depression amount.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The wheel loader according to claim 6, wherein by having a second operating amount smaller than the first operating amount set in the operating amount of the operating device and a second depression amount smaller than<!-- EPO <DP n="41"> --> the first depression amount set in the depression amount of the accelerator pedal, the controller limits the travel requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is less than the first operating amount and equal to, or more than, the second operating amount and the depression amount of the accelerator pedal is less than the second depression amount.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The wheel loader according to claim 7 or 8,<br/>
further comprising:
<claim-text>means for detecting a travel speed of the wheel loader; and</claim-text>
<claim-text>a selector for selecting a forward or reverse motion as a travel directiontravel direction of the wheel loader,</claim-text>
wherein<br/>
when the wheel loader is being reversed as determined via a detected value of the travel speed detecting means despite a selection made with the selector of the forward motion as the travel directiontravel direction of the wheel loader,<br/>
the controller, while increasing the travel requirement power value by a requirement for preventing the wheel loader from being reversed, limits the hydraulic requirement power value by the increase of the travel requirement power value, in addition to the limiting of the hydraulic requirement power value or the travel requirement power value performed when the total requirement power value is greater than the hybrid output upper limit value.</claim-text></claim></claims><amended-claims mxw-id="PCLM56977368" lang="EN" load-source="patent-office" amended-claim-type="PCT"><!-- EPO <DP n="42"> --><heading id="h0013">Amended claims under Art. 19.1 PCT</heading><claim id="ac-en-0001" num="1"><claim-text><b>1.</b> (Amended) A wheel loader comprising:
<claim-text>an engine;</claim-text>
<claim-text>a motor generator connected to an output shaft of the engine;</claim-text>
<claim-text>a hydraulic pump connected to a rotational shaft of the motor generator;</claim-text>
<claim-text>at least one hydraulic actuator driven by hydraulic oil supplied from the hydraulic pump;</claim-text>
<claim-text>wheels;</claim-text>
<claim-text>a travel electric motor for driving the wheels;</claim-text>
<claim-text>an electrical storage device connected to each of the motor generator and the travel electric motor via respective inverters;</claim-text>
<claim-text>an operating device for outputting an operating signal that drives the hydraulic actuator according to an operating amount;</claim-text>
<claim-text>an accelerator pedal for controlling a speed of the engine;</claim-text>
<claim-text>a brake pedal for controlling a brake unit of the wheels; and</claim-text>
<claim-text>a controller for calculating an engine output upper limit value based on the speed of the engine, an electrical storage device output upper limit value based on an amount of electric power stored in the electrical storage device, a hydraulic requirement power value required by the hydraulic pump based on the operating amount of the operating device,<!-- EPO <DP n="43"> --> and a travel requirement power value required by the travel electric motor based on depression amounts of the accelerator pedal and the brake pedal, and a travel speed, wherein</claim-text>
<claim-text>the controller limits either one of the hydraulic requirement power value and the travel requirement power value according to an operation of the wheel loader when a total requirement power value that represents a sum of the hydraulic requirement power value and the travel requirement power value is greater than a hybrid output upper limit value that represents a sum of the engine output upper limit value and the electrical storage device output upper limit value, thereby setting the total requirement power value to a value equal to, or less than, the hybrid output upper limit value.</claim-text></claim-text></claim><claim id="ac-en-0002" num="2"><claim-text><b>2.</b> (Amended) The wheel loader according to claim 1, wherein the controller determines a specific operation being performed by the wheel loader based on the operating amount of the operating device and the depression amount of the accelerator pedal and, according to a result of the determination thus made, determines which one of the hydraulic requirement power and the travel requirement power should be limited.</claim-text></claim><claim id="ac-en-0003" num="3"><claim-text><b>3.</b> (Deleted)</claim-text></claim><claim id="ac-en-0004" num="4"><claim-text><b>4.</b> (Deleted)</claim-text></claim><claim id="ac-en-0005" num="5"><claim-text><b>5.</b> (Deleted)</claim-text></claim><claim id="ac-en-0006" num="6"><claim-text><b>6.</b> (Amended) The wheel loader according to claim 1, wherein<br/>
<!-- EPO <DP n="44"> -->by having a first operating amount set in the operating amount of the operating device and a first depression amount set in the depression amount of the accelerator pedal, the controller limits the travel requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is equal to, or more than, the first operating amount and the depression amount of the accelerator pedal is equal to, or more than, the first depression amount.</claim-text></claim><claim id="ac-en-0007" num="7"><claim-text><b>7.</b> The wheel loader according to claim 6, wherein by having a second operating amount smaller than the first operating amount set in the operating amount of the operating device and a second depression amount smaller than the first depression amount set in the depression amount of the accelerator pedal, the controller limits the hydraulic requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is less than the second operating amount and the depression amount of the accelerator pedal is less than the first depression amount and equal to, or more than, the second depression amount.</claim-text></claim><claim id="ac-en-0008" num="8"><claim-text><b>8.</b> The wheel loader according to claim 6, wherein by having a second operating amount smaller than the first operating amount set in the operating amount of the operating device and a second depression amount smaller than the first depression amount set in the depression amount of the accelerator pedal, the controller limits the travel<!-- EPO <DP n="45"> --> requirement power value, when the total requirement power value being greater than the hybrid output upper limit value, if the operating amount of the operating device is less than the first operating amount and equal to, or more than, the second operating amount and the depression amount of the accelerator pedal is less than the second depression amount.</claim-text></claim><claim id="ac-en-0009" num="9"><claim-text><b>9.</b> The wheel loader according to claim 7 or 8,<br/>
further comprising:
<claim-text>means for detecting a travel speed of the wheel loader; and</claim-text>
<claim-text>a selector for selecting a forward or reverse motion as a travel direction of the wheel loader, wherein</claim-text>
<claim-text>when the wheel loader is being reversed as determined via a detected value of the travel speed detecting means despite a selection made with the selector of the forward motion as the travel direction of the wheel loader,</claim-text>
<claim-text>the controller, while increasing the travel requirement power value by a requirement for preventing the wheel loader from being reversed, limits the hydraulic requirement power value by the increase of the travel requirement power value, in addition to the limiting of the hydraulic requirement power value or the travel requirement power value performed when the total requirement power value is greater than the hybrid output upper limit value.</claim-text></claim-text></claim><amended-claims-statement id="asclaims" lang="en"><claims-statement><!-- EPO <DP n="46"> --><heading id="h0014">Statement under Art. 19.1 PCT</heading><p id="pc0001" num="0001"><ol><li>A new claim 1 is the claim 5 before the amendment depending from the former claim 1. The subject matter of the new claim 1 is not described in Document 1 (JP2010-248870A) relating to the international search report, and is not obvious by even a person skilled in the art.</li><li>The claims 2 to 4 before the amendment are combined into a new claim 2 that depends from the new claim 1.</li><li>Portions newly incorporated in the new claim 1 are deleted from the claim 6 before the amendment, and the remainder in the former claim 6 is set as a new claim 6.</li></ol></p></claims-statement></amended-claims-statement></amended-claims><drawings mxw-id="PDW16668074" load-source="patent-office"><!-- EPO <DP n="47"> --><figure id="f0001" num="1,2"><img id="if0001" file="imgf0001.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0002" num="3,4"><img id="if0002" file="imgf0002.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0003" num="5,6"><img id="if0003" file="imgf0003.tif" wi="165" he="230" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0004" num="7,8"><img id="if0004" file="imgf0004.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="51"> --><figure id="f0005" num="9"><img id="if0005" file="imgf0005.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="52"> --><figure id="f0006" num="10"><img id="if0006" file="imgf0006.tif" wi="161" he="233" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="164" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
