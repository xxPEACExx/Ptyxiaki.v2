<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679085-A1" country="EP" doc-number="2679085" kind="A1" date="20140101" family-id="48656006" file-reference-id="205009" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550983" ucid="EP-2679085-A1"><document-id><country>EP</country><doc-number>2679085</doc-number><kind>A1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12173531-A" is-representative="NO"><document-id mxw-id="PAPP154824906" load-source="docdb" format="epo"><country>EP</country><doc-number>12173531</doc-number><kind>A</kind><date>20120626</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449220" ucid="EP-12173531-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>12173531</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988109826" load-source="docdb">A01M   7/00        20060101ALI20121109BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988134042" load-source="docdb">A01D  41/14        20060101AFI20121109BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2119723474" load-source="docdb" scheme="CPC">A01D  41/145       20130101 LI20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119724590" load-source="docdb" scheme="CPC">A01D  41/141       20130101 FI20140924BHEP        </classification-cpc><classification-cpc mxw-id="PCL2119727731" load-source="docdb" scheme="CPC">A01M   7/0057      20130101 LI20140924BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132185433" lang="DE" load-source="patent-office">HÃ¶henkontrolle</invention-title><invention-title mxw-id="PT132185434" lang="EN" load-source="patent-office">Height control</invention-title><invention-title mxw-id="PT132185435" lang="FR" load-source="patent-office">Commande de hauteur</invention-title><citations><patent-citations><patcit mxw-id="PCIT242658262" load-source="docdb" ucid="AU-5387473-A"><document-id format="epo"><country>AU</country><doc-number>5387473</doc-number><kind>A</kind><date>19741003</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242658265" load-source="docdb" ucid="EP-1978433-A2"><document-id format="epo"><country>EP</country><doc-number>1978433</doc-number><kind>A2</kind><date>20081008</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242658263" load-source="docdb" ucid="US-20030184747-A1"><document-id format="epo"><country>US</country><doc-number>20030184747</doc-number><kind>A1</kind><date>20031002</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242658264" load-source="docdb" ucid="US-20040129798-A1"><document-id format="epo"><country>US</country><doc-number>20040129798</doc-number><kind>A1</kind><date>20040708</date></document-id><sources><source name="SEA" category="A" created-by-npl="N"/></sources></patcit></patent-citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45134498" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918132200" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>NORAC SYSTEMS INTERNAT INC</last-name><address><country>CA</country></address></addressbook></applicant><applicant mxw-id="PPAR918165615" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>NORAC SYSTEMS INTERNATIONAL INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918993841" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Norac Systems International Inc.</last-name><iid>101320184</iid><address><street>3702 Kinnear Place</street><city>Saskatoon, Saskatchewan S7P 0A6</city><country>CA</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918159802" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>STRELIOFF WILLIAM</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918164059" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>STRELIOFF, WILLIAM</last-name></addressbook></inventor><inventor mxw-id="PPAR918992064" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>STRELIOFF, WILLIAM</last-name><address><street>Site 601 Box 3 RR6</street><city>Saskatoon, Saskatchewan S7k 3J9</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918154713" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>GRIFFITH JASON</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918172289" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Griffith, Jason</last-name></addressbook></inventor><inventor mxw-id="PPAR918983550" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Griffith, Jason</last-name><address><street>229 Albany Crescent</street><city>Saskatoon, Saskatchewan S7K 3X9</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918170843" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>SCHNAIDER JAMES</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918165279" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>SCHNAIDER, JAMES</last-name></addressbook></inventor><inventor mxw-id="PPAR918985823" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>SCHNAIDER, JAMES</last-name><address><street>Box 2264</street><city>Warman, Saskatchewan S0K 4S0</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918168232" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>LEE GORDON</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918160780" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>LEE, GORDON</last-name></addressbook></inventor><inventor mxw-id="PPAR918990451" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>LEE, GORDON</last-name><address><street>253 Langevin Crescent</street><city>Saskatoon, Saskatchewan S7L 5R2</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918150994" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>HOCKLEY DEAN</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918146112" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>HOCKLEY, DEAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918985228" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>HOCKLEY, DEAN</last-name><address><street>2505 Haultain Avenue</street><city>Saskatoon, Saskatchewan S7J 1R4</city><country>CA</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918980945" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Smee, Anthony James Michael</last-name><iid>100058313</iid><address><street>Gill Jennings &amp; Every LLP The Broadgate Tower 20 Primrose Street</street><city>London EC2A 2ES</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548921452" load-source="docdb">AL</country><country mxw-id="DS548923145" load-source="docdb">AT</country><country mxw-id="DS548921794" load-source="docdb">BE</country><country mxw-id="DS548814529" load-source="docdb">BG</country><country mxw-id="DS548908546" load-source="docdb">CH</country><country mxw-id="DS548835223" load-source="docdb">CY</country><country mxw-id="DS548923146" load-source="docdb">CZ</country><country mxw-id="DS548921795" load-source="docdb">DE</country><country mxw-id="DS548835224" load-source="docdb">DK</country><country mxw-id="DS548835225" load-source="docdb">EE</country><country mxw-id="DS548919364" load-source="docdb">ES</country><country mxw-id="DS548814530" load-source="docdb">FI</country><country mxw-id="DS548814531" load-source="docdb">FR</country><country mxw-id="DS548921796" load-source="docdb">GB</country><country mxw-id="DS548835230" load-source="docdb">GR</country><country mxw-id="DS548921797" load-source="docdb">HR</country><country mxw-id="DS548923147" load-source="docdb">HU</country><country mxw-id="DS548908547" load-source="docdb">IE</country><country mxw-id="DS548921934" load-source="docdb">IS</country><country mxw-id="DS548814532" load-source="docdb">IT</country><country mxw-id="DS548835231" load-source="docdb">LI</country><country mxw-id="DS548863217" load-source="docdb">LT</country><country mxw-id="DS548923148" load-source="docdb">LU</country><country mxw-id="DS548863218" load-source="docdb">LV</country><country mxw-id="DS548863219" load-source="docdb">MC</country><country mxw-id="DS548930645" load-source="docdb">MK</country><country mxw-id="DS548930742" load-source="docdb">MT</country><country mxw-id="DS548919365" load-source="docdb">NL</country><country mxw-id="DS548814533" load-source="docdb">NO</country><country mxw-id="DS548930743" load-source="docdb">PL</country><country mxw-id="DS548908548" load-source="docdb">PT</country><country mxw-id="DS548919438" load-source="docdb">RO</country><country mxw-id="DS548908549" load-source="docdb">RS</country><country mxw-id="DS548919439" load-source="docdb">SE</country><country mxw-id="DS548908554" load-source="docdb">SI</country><country mxw-id="DS548930744" load-source="docdb">SK</country><country mxw-id="DS548930745" load-source="docdb">SM</country><country mxw-id="DS548835232" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128671293" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A method and apparatus for controlling a height of an agricultural equipment component is described in which an average crop height is determined. In one embodiment, the agricultural equipment component is controlled to maintain a predetermined distance from a current top of crop level. If a current top of crop level cannot be determined, a virtual top of crop level is calculated using the average crop height value. The agricultural equipment component is controlled to maintain a predetermined distance from the virtual top of crop level. In another embodiment, the agricultural equipment component is controlled to maintain a predetermined distance from current ground level. If a current ground level cannot be determined, a virtual ground level is calculated using the average crop height value. The agricultural equipment component is controlled to maintain a predetermined distance from said virtual ground level. An ultrasonic sensor is also provided.
<img id="iaf01" file="imgaf001.tif" wi="155" he="73" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128500666" lang="EN" source="EPO" load-source="docdb"><p>A method and apparatus for controlling a height of an agricultural equipment component is described in which an average crop height is determined. In one embodiment, the agricultural equipment component is controlled to maintain a predetermined distance from a current top of crop level. If a current top of crop level cannot be determined, a virtual top of crop level is calculated using the average crop height value. The agricultural equipment component is controlled to maintain a predetermined distance from the virtual top of crop level. In another embodiment, the agricultural equipment component is controlled to maintain a predetermined distance from current ground level. If a current ground level cannot be determined, a virtual ground level is calculated using the average crop height value. The agricultural equipment component is controlled to maintain a predetermined distance from said virtual ground level. An ultrasonic sensor is also provided.</p></abstract><description mxw-id="PDES63956723" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><u>Field of the Invention</u></heading><p id="p0001" num="0001">This invention relates to a system and method for controlling the height of agricultural equipment components.</p><heading id="h0002"><u>Background of the Invention</u></heading><p id="p0002" num="0002">In agriculture, trailed or self propelled units such as sprayers, have booms which are towed behind tractors and are controlled to deliver insecticides and the like to crops through which the tractor drives. Sprayer boom height is typically dynamically positioned in order to maintain a fixed distance between the boom and the crop or soil. Booms are typically rotatable about an axis parallel to the longitudinal axis of the tractor so that they can rotate and remain substantially parallel to the crop even if the tractor drives over sloped ground. Precise control over the height of the boom on which the sprayer nozzles are mounted with respect to the crop is required to avoid damage to the crop by the boom itself as well as to ensure even and proper application of the sprayed chemicals to the crop. The height control of the boom above the crop can be manually or automatically controlled in a number of ways, some of which include the use of ultrasonic distance measuring to determine the height of the boom above the crop. Similarly, in agricultural harvesting operations, cutting blades on a cutter bar must be maintained at a certain height relative to the top of the crop or to the ground level so that crop is harvested accurately even if the crop height or ground level changes with respect to the cutting blades.</p><p id="p0003" num="0003">In ultrasonic distance measuring, ultrasonic signals are emitted from a transducer and the reflected echoes or return signals from objects in the path of the ultrasonic pulse are detected, after a time interval, by the transducer. The elapsed time between the transmission of the pulse and the receiving of a return pulse reflected off of an object (i.e. an echo) can then be used to calculate the distance to the objects causing each reflected return.</p><p id="p0004" num="0004">Because it is imperative that the sprayer boom does not come into contact with the top of the crop as the boom is being towed behind the tractor, or that cutting blades do not<!-- EPO <DP n="2"> --> cut too high or low on a crop, height control systems which use ultrasonic distance measuring have one or more ultrasonic sensors arranged on the sprayer boom or cutter bar which attempt to detect the distance between the boom or cutter bar and some reference datum by listening for the echoes which bounce back to the transducer after the pulse is transmitted.</p><p id="p0005" num="0005">Using the well known relationship between speed, distance and time, calculating the distance which the ultrasonic sound pulse has travelled before being reflected by objects in the path of the pulse is simple and thus the distance between the boom or cutter bar and a feature causing a reflection can be determined. Once the distance between the boom or cutter bar and a reference datum is known, the sprayer boom or cutter bar can be moved up or down automatically to maintain a predetermined separation distance between the sprayer boom or cutter bar and the reference datum (typically either the top of the crop or the ground level).</p><p id="p0006" num="0006">Controlling a sprayer boom so that it maintains a fixed distance from the top of the crop can result in a situation in which, in the absence of crops under the sprayer boom, the control system will interpret a reflection of the ultrasonic pulse from the ground under the sensor to be a reflection representative of the top of the non-existent crop because it is the first echo received. If the sprayer boom is being controlled such that a fixed separation between the top of the crop and the sprayer boom is being maintained then this erroneous interpretation of the reflection from the soil as a top of crop signal will cause the sprayer boom to be lowered to maintain the predetermined separation. However, the separation in this case would be between the sprayer boom and the ground level which has been erroneously interpreted as corresponding to the top of the crop.</p><p id="p0007" num="0007">This temporary absence of the crop in the transmission path of the ultrasonic sensor will result in the sprayer boom being lowered much further than would be the case if a true reflection had been received from the top of the crop. In some cases, the sprayer boom may be lowered to such an extent that part of it contacts the ground. In any case, it is likely the boom will have been lowered below the true level of the top of the crop and thus a collision between the boom and the approaching crop may occur.<!-- EPO <DP n="3"> --></p><p id="p0008" num="0008">If height control with respect to the local ground level is being carried out, such as in the example of a harvester cutter bar, then situations can arise in which a reliable ground level cannot be determined or where, due to either matter resting on the ground or vegetation and the like being present under the sensors, an erroneous ground level is determined. In the first case, a ground level controlled system can become inoperable if it cannot determine a reliable ground level. In the second case in which a ground level is determined which is not the true ground level then the sprayer boom/cutter bar can again be raised or lowered when it should not be.</p><p id="p0009" num="0009">Clearly, alternative systems and methods of controlling the height of a sprayer boom/cutter bar are required which do not suffer from these problems.</p><heading id="h0003"><u>Summary of the Invention</u></heading><p id="p0010" num="0010">According to the present invention there is provided a method of controlling a height of an agricultural equipment component comprising:
<ul><li>determining an average crop height:
<ul><li>controlling said component to maintain a predetermined distance from one of a current top of crop level or current ground level,</li><li>wherein if a current top of crop level or a current ground level cannot be determined:
<ul><li>calculating a virtual top of crop level or virtual ground level, respectively, using said average crop height value; and</li><li>controlling said agricultural equipment to maintain a predetermined distance from said virtual top of crop level or said virtual ground level, respectively.</li></ul></li></ul></li></ul></p><p id="p0011" num="0011">The invention also includes apparatus for carrying out the method, the apparatus comprising<br/>
a sensor unit for providing a signal indicative of a current top of crop level or a current ground level; and;<br/>
a control unit receiving said signal, calculating an average crop height, and providing a control signal to control the height of the component,<br/>
<!-- EPO <DP n="4"> -->wherein, if a current top of crop level or a current ground level cannot be determined by said sensor, said control unit<br/>
calculates a virtual top of crop level or virtual ground level, respectively, using said average crop height value; and<br/>
adjusts said control signal to control the height of the component to maintain a predetermined distance from said virtual top of crop level or said virtual ground level, respectively.</p><p id="p0012" num="0012">When the virtual top of crop level is calculated, it may be calculated by subtracting the average crop height from the current ground level.</p><p id="p0013" num="0013">When the virtual ground level is calculated, it may be calculated by adding the average crop height to the current top of crop level.</p><p id="p0014" num="0014">The current level of the top of a crop and the ground level may be determined by:
<ul><li>transmitting an ultrasonic pulse;</li><li>detecting return echoes of said pulse and characterising said return echoes to identify a return from the top of the crop and a return from the ground together with the time at which each echo is received;</li><li>using the known speed of the transmitted pulse and the time elapsed between the transmission of the pulse and the times of receipt of the return from the top of the crop and the return from the ground level to calculate the distance at which each respective return echo occurred.</li></ul></p><p id="p0015" num="0015">Additionally, the ambient air temperature may be measured at a time of transmission of the ultrasonic pulse, the ambient air temperature measurement used to determine the speed of the ultrasonic pulse corrected for temperature, and the corrected speed used as the known speed.</p><p id="p0016" num="0016">The average crop height comprises an average of historical crop heights which may be individual crop heights which have been determined by an ultrasonic sensor by subtracting an instantaneous distance of a top of crop detected under the ultrasonic sensor from the instantaneous ground distance which was also detected under the ultrasonic sensor at the same time.<!-- EPO <DP n="5"> --></p><p id="p0017" num="0017">Alternatively, the average crop height may be preset by a user.</p><p id="p0018" num="0018">The agricultural equipment may comprise a sprayer boom with the sensor unit mounted on the sprayer boom or the equipment may comprise a cutter bar with the sensor unit mounted on the cutter bar.</p><p id="p0019" num="0019">The sensor unit and said control unit may be integral with one another.</p><heading id="h0004"><u>Brief Description of the Drawings</u></heading><p id="p0020" num="0020">Embodiments of the invention will now be described, by way of example only, with reference to the attached drawings, in which:
<ul><li><figref idrefs="f0001">Figure 1</figref> illustrates an arrangement of an example sprayer boom height control system of the present invention;</li><li><figref idrefs="f0002">Figure 2</figref> illustrates an arrangement of an example cutter bar height control system of the present invention;</li><li><figref idrefs="f0002">Figure 3</figref> illustrates the arrangement of one of the ultrasonic sensor modules of the system depicted in <figref idrefs="f0001">Figure 1</figref>, in more detail;</li><li><figref idrefs="f0003">Figure 4</figref> illustrates the arrangement of part of the system depicted in <figref idrefs="f0001">Figure 1</figref>, in more detail;</li><li><figref idrefs="f0003">Figure 5a</figref> is a representative plot showing a signal received by a sensor in the example, over time;</li><li><figref idrefs="f0003">Figure 5b</figref> is a representative plot showing an interpretation of the signal illustrated in <figref idrefs="f0003">Figure 5a</figref>;</li><li><figref idrefs="f0004">Figure 6</figref> shows a process flow chart of a first method of operation of the example illustrated in <figref idrefs="f0001">Figure 1</figref>;</li><li><figref idrefs="f0005">Figures 7</figref> and <figref idrefs="f0006">8</figref> illustrate the operation of the first method of operation of the example;</li><li><figref idrefs="f0007">Figure 9</figref> shows a process flow chart of a second method of operation of an example illustrated in <figref idrefs="f0010">Figure 13</figref>;</li><li><figref idrefs="f0008">Figures 10</figref> and <figref idrefs="f0009">11</figref> illustrate the operation of the second method of the example;<!-- EPO <DP n="6"> --></li><li><figref idrefs="f0010">Figure 12</figref> illustrates an alternative example of a sprayer boom height control system of the present invention; and</li><li><figref idrefs="f0010">Figure 13</figref> illustrates an alternative example of a harvester cutter bar height control system in accordance with the present invention.</li></ul></p><heading id="h0005"><u>Detailed Description</u></heading><p id="p0021" num="0021"><figref idrefs="f0001">Figure 1</figref> shows a tractor unit 103 having variable geometry (VG) sprayer booms 101 arranged on each side of the tractor unit and which are used with and controlled by a control system and method of the present invention. Each of the two VG sprayer booms 101 is mounted to the tractor unit 103 at an end thereof via a well known coupling mechanism such as a hydraulic ram 106 and a pivot 104. The coupling mechanism allows each VG sprayer boom 101 to be tilted (as shown by the arrows in <figref idrefs="f0001">Figure 1</figref>) with respect to the tractor and also to rotate clockwise and anticlockwise about its mounting point with the tractor unit 103. Three ultrasonic sensor modules 105 are mounted on each of the VG sprayer booms 101 in positions in which they are able to project a pulse of ultrasound in a downwards facing cone towards the area directly underneath the VG sprayer boom on which it is mounted. In the preferred embodiment, the ultrasonic sensor modules 105 are mounted on, but in front of, the boom so that they are at the leading edge of the boom. The skilled person will appreciate that mounting the ultrasonic sensors in this way means that they will pass over the crop before the boom itself as the tractor moves forward through the crop. In the preferred embodiment, each ultrasonic sensor module 105 is a NORAC UC5 ultrasonic sensor (NORAC part #43750).</p><p id="p0022" num="0022"><figref idrefs="f0002">Figure 2</figref> shows a harvester unit 203 having a cutter bar 201 arranged on the front of the machine which is used with a control system and method of the present invention. The cutter bar 201 is mounted to the harvester unit 203 by a well known coupling mechanism such as a hydraulic ram 206 and a pivot 204. The coupling mechanism allows the cutter bar to be raised or lowered with respect to the ground. In this example two ultrasonic sensors 105 are mounted to each side of the cutter bar, in front of the leading edge of the cutter bar, but other numbers of sensors may also be appropriate. The skilled person will appreciate that mounting the ultrasonic sensors in<!-- EPO <DP n="7"> --> this way will mean they pass over the crop and ground before the cutter bar itself as the harvester moves through the crop. In the preferred embodiment, each ultrasonic sensor module 105 is a NORAC UC5 ultrasonic sensor (NORAC part # 43750).</p><p id="p0023" num="0023"><figref idrefs="f0002">Figure 3</figref> shows an ultrasonic sensor module 105 in greater detail. Each individual ultrasonic sensor module 105 consists of an ultrasonic transducer 301, operable to transmit and receive ultrasonic sound waves, connected to a pulse generator 303 which generates the ultrasonic pulse from a source voltage supplied from the electrical system (not shown) to which the ultrasonic sensor modules 105 are connected. The ultrasonic transducer 301 within the ultrasonic sensor module 105 is also connected to a receiving and amplifying circuit 305 inside the ultrasonic sensor module 105 and which converts ultrasonic sound waves received at the transducer into electrical signals as will be described in more detail below. Each ultrasonic sensor module 105 also includes a control circuit 307 connected in communication with each of the elements within the module 105 described above, and configured to control various aspects of the operation of the ultrasonic sensor module as will be described in more detail below. In the preferred embodiment of the present invention, the control circuit 307 is a microprocessor or CPU type device able to execute programmed instructions and either incorporates internal memory for data storage or is connected to an external memory device for data storage.</p><p id="p0024" num="0024">The control circuit 307 is connected to the controller unit 107 of the tractor unit thus allowing each ultrasonic sensor module 105 to communicate with the central controller unit 107. The connection between the ultrasonic sensor module 105 and the controller unit 107 may be by wired or wireless means. In the preferred embodiment, each of the ultrasonic sensor modules 105 and also the controller unit 107 are connected to the CAN (Controller Area Network) bus of the tractor unit 103 using appropriate connections and thus communication between the controller unit 107 and individual ones of the ultrasonic sensors is enabled. Communication between the controller unit 107 and each ultrasonic sensor 105 is based on the ISO 11783 communication protocol.</p><p id="p0025" num="0025">While embodiments of the present invention will generally be described with respect to one or more ultrasonic sensor modules 105 communicating with a central controller<!-- EPO <DP n="8"> --> unit 107, those skilled in the art will appreciate that embodiments of the present invention can be practiced with a single ultrasonic sensor module. In such embodiments, control circuit 307 must include suitable memory and processing abilities to maintain a moving average function, as will be described in greater detail below.</p><p id="p0026" num="0026">Each moving part of the boom constitutes an individual control channel of controller 107. The combination of more than one sensor module 105 may be used for controlling an individual channel.</p><p id="p0027" num="0027">As discussed above, the ultrasonic sensor modules 105 are capable of transmitting ultrasonic pulses and detecting reflected ultrasonic signals corresponding to echoes of the originally transmitted pulse. The operation of such sensor modules 105 will be explained in more detail with reference to the type of signals which will typically be generated and received in the course of operation of embodiments of the present invention.</p><p id="p0028" num="0028">In operation, the ultrasonic transducer 301 of the ultrasonic sensor module 105 periodically transmits a pulse of ultrasound lasting a few microseconds. Ultrasonic frequencies are used in the preferred embodiment because the beginning and end of the resulting pulse is better defined at ultrasonic frequencies than at sonic frequencies meaning that the echoes (reflections of the transmitted pulse) which will be produced by objects in the path of the pulse will also be better defined and hence their detection will be more accurate. Additionally, by using ultrasonic frequencies rather than sonic frequencies, the ultrasonic sensor module 105 will not be as affected by ambient noise, which typically occurs at sonic frequencies much more than at ultrasonic frequencies, when receiving the reflected echoes of the transmitted ultrasound pulse.</p><p id="p0029" num="0029">The radiation pattern of the pulses from the ultrasonic transducer typically takes the form of an expanding cone centered on the transducer 301, the pulse spreading out in the radial direction as it moves away from the transducer 301 along the transmission axis. Each ultrasonic sensor module 105 operates in a "transmit and receive cycle" whereby the control circuit 307 within the ultrasonic sensor module first triggers the ultrasonic pulse generator 303 to the transducer 301 to produce an ultrasonic pulse in<!-- EPO <DP n="9"> --> a manner well understood by the skilled person. Once the transducer 301 has transmitted its ultrasonic pulse, the control circuit 307 begins the "receive" part of the "transmit and receive cycle". This opens a receive window which defines a period of time during which echoes of the transmitted pulse are expected to be received by the transducer 301 and passed to the receiving and amplifying circuit 305. In the preferred embodiment, the control circuit may introduce a delay of approximately 1 millisecond after the ultrasonic pulse has been transmitted before measuring the received signal to allow any voltage spikes, present at the transducer caused by generating and transmitting the ultrasonic pulse, to subside.</p><p id="p0030" num="0030">Each ultrasonic pulse has a duration of approximately one millisecond. The receive window, which is opened after the ultrasonic pulse is transmitted, is approximately 10 milliseconds in duration which provides ample time for any reflections of the transmitted pulse to reach the transducer 301. In the preferred embodiment, ultrasonic pulses may be transmitted at discrete intervals of approximately 15 to 35 milliseconds.</p><p id="p0031" num="0031">While the receive window is open (i.e. whilst the amplifying circuit 305 is listening for echoes of the transmitted pulse), the control circuit 307 monitors the time that has elapsed since the pulse was transmitted. Any echoes collected at the transducer 301 are received and amplified by the amplifying circuit 305 and passed to the control circuit 307 where the signal parameters of the received echo are recorded. Recorded signal parameters include the time at which each reflection occurs and amplitude of the reflected signal as it changes over time.</p><p id="p0032" num="0032">In the preferred embodiment, during the receive window, the control circuit 307 automatically increases the signal gain of the receiving and amplifying circuit 305 in an exponential manner with increasing elapsed time from transmission of the pulse. This increasing of the receiver gain accounts for the fact that reflections received at increasing elapsed time since pulse transmission will have been reflected from objects further away from the ultrasonic sensor module 105 and hence will be weaker in amplitude than reflections caused by objects nearer to the ultrasonic sensor module 105 and which would naturally be received in a shorter time.<!-- EPO <DP n="10"> --></p><p id="p0033" num="0033">When a predetermined amount of time has elapsed from transmission of the ultrasonic pulse, the receive window is closed so that the transducer is then ready to transmit a further pulse after the appropriate time interval between pulses has elapsed.</p><p id="p0034" num="0034"><figref idrefs="f0003">Figure 4</figref> illustrates an exemplary arrangement of a part of the VG boom 101, and ultrasonic sensor module 105 thereon, in relation to an individual crop component 401 to better illustrate how the first example of present invention operates. The view is side on to the direction of travel of the boom (indicated by the large arrow) and the ultrasonic sensor module 105 is shown, mounted ahead of the boom 101. <figref idrefs="f0003">Figure 5a</figref> shows a representation of the echo or return signal which is typically generated by the ultrasonic transducer 301 and recorded by the control circuit 307 in its memory therein over the duration that the receive window is open following the transmission of an ultrasonic pulse and its reflection from the crop component 401 illustrated in <figref idrefs="f0003">Figure 4</figref>. A number of peaks in the amplitude of the signal generated by the ultrasonic transducer 301 during the receive window can clearly be seen occurring at various times during the receive window at positions 501, 503, and 505. These peaks correspond to reflections of the ultrasonic pulse from the top 403 of the crop component 401, an intermediate part of the crop (such as a leaf or fruit) 405, and the ground 407 as shown in <figref idrefs="f0003">Figure 4</figref>.</p><p id="p0035" num="0035">The control circuit 307 within the ultrasonic sensor module 105 analyses the signal produced by the receiving and amplifying circuit 305 while the receive window is open and converts the time at which each peak of interest occurs to a corresponding distance from the transducer of the ultrasonic sensor module 105 (because the distance from the transducer 301 at which a reflection occurred is equal to half of the speed of the transmitted pulse multiplied by the time between the pulse being transmitted and the reflection being received). Because the speed of sound in air is dependent on the temperature of the air through which the sound wave is passing, for each transmit and receive cycle of the ultrasonic sensor module 105, the control circuit 307 measures the instantaneous local air temperature using appropriate means such as a thermistor and calculates a temperature adjusted speed for the ultrasonic pulse to be used in the distance conversion described above, to improve accuracy.<!-- EPO <DP n="11"> --></p><p id="p0036" num="0036">The control circuit 307 in the ultrasonic sensor module 105 carries out signal analysis on the signal generated by the receiving and amplifying circuit 305 to interpret the analogue peaks occurring in the signal over time during the open receive window into discrete echoes originating from various distances from the transducer 301. To improve measurement accuracy the time measured to the leading-edge of the processed signal is used.</p><p id="p0037" num="0037"><figref idrefs="f0003">Figure 5a</figref> illustrates the recorded signal and <figref idrefs="f0003">Figure 5b</figref> illustrates how the signal can be interpreted. In <figref idrefs="f0003">Figure 5a</figref>, the first peaks 501 in the signal generated by the receiving and amplifying circuit 305 occurred at approximately 3 milliseconds elapsed time after the pulse was transmitted. The peaks at 501 correspond to the reflection of the transmitted pulse by the top section 403 of the crop component 401 and are obviously the first reflections to be received by the ultrasonic sensor module 105 during the receive window because the top of the crop is closest to the transducer 301. Converting the elapsed time into distance as described previously allows the control circuit 307 to determine that the first reflections occurred at a distance of approximately 0.5m from the transducer of the ultrasonic sensor module 105 in this example. Similarly, the last reflections, corresponding to peak 505 were received after approximately 8.5 milliseconds had elapsed since the pulse was transmitted. This corresponds to a distance of approximately 1.45m from the transducer of the ultrasonic sensor module 105.</p><p id="p0038" num="0038">The control circuit 307 in the ultrasonic sensor module 105 assumes that the peak 501 occurring closest to the transducer corresponds to a reflection of the ultrasonic pulse by the top of the crop 401 and thus that the top of the crop is approximately 0.5m from the level of the transducer of the ultrasonic sensor module. Because the transducer 301, in its ultrasonic sensor module 105, is rigidly mounted to the boom 101, the distances measured to the level of the transducer 301 can be interpreted to give a distance from the boom. If the bottom of the boom 101 and the transducer 301 are at the same height, as is the case in the preferred embodiment, then any distance determined relative to the transducer is also the distance relative to the boom. In a similar manner, the control circuit 307 is able to assume that the peak 505 occurring furthest from the transducer 301 corresponds to a reflection of the ultrasonic pulse<!-- EPO <DP n="12"> --> from the ground and thus the ground is approximately 1.45m from the transducer of the ultrasonic sensor module 105.</p><p id="p0039" num="0039">The control circuit 307 and memory in the ultrasonic sensor module 105 store the top of crop distance value generated over one or more previous transmit and receive cycles (in the preferred embodiment previous top of crop distance values recorded over the previous 70-100 milliseconds of operation are stored) and calculates a moving average for the previously recorded top of crop distance. For the current transmit and receive cycle, the control circuit 307 then compares the distance which it has currently determined for the top of crop to the moving average value of the previously recorded distances for the top of the crop ascertained over previous cycles. If the top of crop distance determined by the ultrasonic sensor module 105 for the current cycle is within a predetermined deviation from the moving average value determined from the previous cycles stored in the memory then the ultrasonic sensor module outputs to the controller 107 the value it has determined as the distance of the top of the crop from the transducer of the ultrasonic sensor module. If the top of crop distance determined by the ultrasonic sensor module 105 for the current cycle is not within the acceptable deviation from the moving average distance value determined from the previous cycles then the ultrasonic sensor module 105 outputs to the controller 107 a "no reading" error value for the top of the crop distance value.</p><p id="p0040" num="0040">In a similar manner, the control circuit in the ultrasonic sensor module 105 stores the ground distance value generated over one or more previous transmit and receive cycles (in the preferred embodiment previous ground distance values recorded over the previous 70-100 milliseconds of operation are stored) and calculates a moving average for the previously recorded ground distance. For the current transmit and receive cycle, the control circuit 107 compares the distance which it determines for the ground distance in the present cycle to the moving average value of the previously recorded distances for the ground level. If the ground distance determined by the ultrasonic sensor module 105 for the current cycle is within a predetermined deviation from the moving average value determined from the previous cycles then the ultrasonic sensor module 105 outputs to the controller 107 the value it has determined as a valid distance of the ground for that cycle. If the ground distance determined by the ultrasonic sensor module 107 for the current cycle is not within the acceptable<!-- EPO <DP n="13"> --> deviation from the moving average distance value determined from the previous cycles then the ultrasonic sensor module outputs to the controller 107 a "no reading" error value for the ground distance value.</p><p id="p0041" num="0041">If the sensor is not able to determine the top of crop distance and/or ground distance, no information is incorporated into the moving average of the top of crop distance and ground distance calculated for future transmit and receive cycles.</p><p id="p0042" num="0042">The skilled person will thus appreciate that, for each transmit and receive cycle, each individual ultrasonic sensor module 105 outputs to the controller unit 107 either a local top of crop distance value or a "no reading" error value for top of crop distance and a local ground distance value or "no reading" error value for ground distance value.</p><p id="p0043" num="0043">For each transmit and receive cycle, when the control circuit 307 in an individual ultrasonic sensor module 105 generates an acceptable/valid value for the top of the crop distance and also an acceptable/valid value for the ground distance value, in the manner described above, the control circuit 307 also calculates a local crop height value by subtracting the top of crop distance value for that cycle from the ground distance value for that cycle. If the control circuit 307 calculates a local crop height then it transmits this, together with the local top of crop distance value and the local ground distance value, to the controller unit 107.</p><p id="p0044" num="0044">In the example described with reference to <figref idrefs="f0003">Figures 4, 5a, and 5b</figref> the local crop height value calculated in this way would be 0.95m (1.45m for the ground distance minus 0.5m for the top of crop distance). This local crop height value is output to the controller 107 for each cycle where it can be calculated (obviously, if an error reading is reported for either the top of crop distance or ground distance value, or both, because the determined values do not fall within an acceptable deviation from the respective moving average values then there will be no crop height value calculated for that cycle and a "no reading" value provided to the controller 107 instead for the local crop height reading and at least one of the top of crop distance value or ground distance value).<!-- EPO <DP n="14"> --></p><p id="p0045" num="0045">The controller unit 107 continuously receives transmitted data from each of the individual ultrasonic sensor modules 105 and can record into its memory the transmitted data from each of the individual ultrasonic sensor modules 105 consisting of the individual top of crop distance values, ground distance values, and local crop height values, where available. The amount of data that the controller unit 107 is able to store depends on the size of the memory storage within the controller unit but, in the preferred embodiment, the controller unit 107 is able to store several minute's worth of data received from the ultrasonic sensor modules 105 before memory capacity is exceeded. If the memory of the controller unit 107 is exceeded then the controller unit 107 is configured to overwrite the oldest data in the memory with incoming new data.</p><p id="p0046" num="0046">When the user has set the controller unit 107 to record the data being received from the ultrasonic sensor modules 105 into its memory, any local crop height value received from each one of the ultrasonic sensor modules after each transmit and receive cycle is stored to the memory in the controller unit 107. Any "no reading" error values produced by any of the ultrasonic sensor modules 105 are not recorded into the memory buffer of the controller unit 107.</p><p id="p0047" num="0047">The skilled person will thus appreciate that the memory in the controller unit 107 stores all the previously transmitted local crop height values produced by the ultrasonic sensor modules over previous transmit and receive cycles. The controller unit 107 calculates a "virtual" crop height value which is the cumulative moving average of all of the previous local crop height values stored in the memory of the controller unit 107. The current cumulative moving average value of all of the local crop height values currently stored in the memory of the controller unit 107 is calculated at each transmit and receive cycle. After each transmit and receive cycle, when any newly transmitted local crop height values have been transmitted to the controller unit 107 from the individual ultrasonic sensor modules 105, the cumulative moving average value of the virtual crop height is updated to take account of the new local crop heights which have been received and stored.</p><p id="p0048" num="0048">The skilled person will appreciate that there are a number of ways in which the cumulative moving average can be calculated by the controller unit 107. In a more intensive approach, at each transmit and receive cycle, the controller unit 107 may<!-- EPO <DP n="15"> --> simply sum every single local crop height value in its memory and divide the sum by the number of local crop height values in its memory. This approach is obviously computationally heavy and rather than calculate the cumulative moving average anew at each transmit and receive cycle, the controller unit 107 may simply calculate the cumulative moving average once and then update the cumulative moving average with the new values of local crop height received at each cycle using the following formula: <maths id="math0001" num=""><math display="block"><msub><mi mathvariant="italic">CA</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi>h</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi mathvariant="italic">iCA</mi><mi>i</mi></msub></mrow><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></mfrac></math><img id="ib0001" file="imgb0001.tif" wi="46" he="19" img-content="math" img-format="tif"/></maths><br/>
where <i>CA</i><sub><i>i</i>+<i>1</i></sub> is the new cumulative moving average, <i>CA<sub>i</sub></i> is the previous value of the cumulative moving average, i is the number of values of local crop height stored in the memory, and <i>h</i><sub><i>i</i>+<i>1</i></sub> is a new value of local crop height. Thus the skilled person will see that the cumulative moving average can be updated as each new local crop height value in a current transmit and receive cycle is received in a manner which is computationally less intensive than using the more intensive averaging method.</p><p id="p0049" num="0049">The skilled person will appreciate that by obtaining the local crop height readings from a number of individual ultrasonic sensor modules and recording them over time, and then averaging them allows a more accurate crop height, which will in turn produce a more accurate virtual crop height.</p><p id="p0050" num="0050">The calculation of the virtual top of crop height or virtual ground level can be accomplished with controller unit 107 or control circuit 307 of each individual ultrasonic sensor. In embodiments where the ultrasonic sensor provides a virtual top of crop distance or virtual ground level, such parameters may be accompanied by an indication from control circuit 307 that the parameter is a virtual parameter. In such embodiments, the control circuit 307 will maintain a moving average of the local crop height. Then, when the sensor module is unable to measure one of an actual top of crop height or an actual ground level, the moving average of the local crop height can be used in conjunction with the other parameter (actual ground level or actual top of crop) to provide a calculated or virtual parameter to represent the missing measurement.<!-- EPO <DP n="16"> --></p><p id="p0051" num="0051">Embodiments of present invention are able to make use of the virtual crop height calculated in the manner described above to control the height of the boom or cutter bar (respectively) according to a number of different control methodologies. These control methodologies will be named "hybrid top of crop" controlled and "hybrid ground level" controlled.</p><heading id="h0006"><u>Hybrid Top of Crop Controlled Mode</u></heading><p id="p0052" num="0052">The hybrid top of crop controlled mode of operation is similar to known "conventional top of crop" controlled systems but is able to control the height of the boom even if no local top of crop distance value can be calculated. The system and method avoids misinterpreting ground return signals, caused by lack of crop under the sensors, as a top of crop reflection. In conventional top of crop controlled systems, not being able to ascertain a valid top of crop distance for whatever reason will mean that the boom control system will be inoperable until such time as a top of crop signal becomes available. In the worst case, if the system interprets the ground level reflection as being from the top of the crop (because the ground reflection will be the first pulse reflection received by the system) then a conventional top of crop controlled system will attempt to maintain separation of the boom from that incorrectly interpreted level. This will cause a lowering of the boom which may cause a collision with crop in the path of the boom.</p><p id="p0053" num="0053">In both the conventional top of crop controlled mode and the hybrid top of crop controlled mode of the present invention, whenever the controller unit 107 is able to calculate a local top of crop distance value c from the ultrasonic sensor modules 105 at each transmit and receive cycle, the controller unit 107 adjusts the height of the boom above the determined level of the top of the crop to maintain a predetermined separation distance <i>s</i> between the top of crop level and the ultrasonic sensor modules 105 (and consequently the boom 101 to which they are attached).</p><p id="p0054" num="0054"><figref idrefs="f0004">Figure 6</figref> is a process flow diagram illustrating the operation of the hybrid top of crop controlled mode in accordance with an embodiment of the present invention.<!-- EPO <DP n="17"> --></p><p id="p0055" num="0055">Calculations are performed for each channel (i.e. each section of the boom) as illustrated in step S601. As described in detail above, the ultrasonic sensor modules 105 each communicate their local top of crop distance c, local ground distance g, and local crop height value to the controller unit 107 for each channel. This is encapsulated in step S603 of the method in which crop data is obtained from the ultrasonic sensor modules to determine the crop data for each channel.</p><p id="p0056" num="0056">At step S605 of the hybrid top of crop controlled method, the controller unit 107 ascertains whether it has received valid values (i.e. no "no reading" error values) for both the local top of crop distance c and ground distance g from the ultrasonic sensor module(s) for that channel. If it has, then the method proceeds to step S607 where the controller 107 updates the virtual crop height value using the height information from the sensor(s) of the channel. The controller 107 will then proceed to step S609 where the controller 107 adjusts the boom height of the channel to maintain a set separation distance <i>s</i> between the boom and the top of crop as determined from the instantaneous local top of crop distance value.</p><p id="p0057" num="0057">If at S605 the controller does not receive both a valid crop and soil distance value for that channel, the controller unit 107 will proceed to S611 where it will determine if it has a valid top of crop distance c but does not have a valid ground distance g. If it has a valid top of crop distance c, then the method will proceed to step S609 where controller 107 adjusts the boom to maintain a set separation distance <i>s</i> to the top of crop as previously described. However, if at S611 controller 107 determines it is not able to determine the top of crop distance, it proceeds to step S613. If at this step the controller 107 determines neither the top of crop distance nor the ground distance can be measured, no control can occur. However if it determines that at S613 a valid ground distance, measurement can be obtained but not a valid top of crop distance the method will proceed to step S615 in which the controller unit 107 determines a virtual top of crop distance <i>c</i>'. It does this by subtracting the virtual crop height value (which it has calculated by determining the cumulative moving average of the individual local crop height values of previous transmit and receive cycles recorded in the memory of the controller unit 107) from the instantaneous ground distance value g for that particular transmit and receive cycle of that channel.<!-- EPO <DP n="18"> --></p><p id="p0058" num="0058">At step S617, the controller 107 controls the height of the boom to maintain a predetermined separation distance <i>s</i> between the boom and the top of the crop where the distance of the top of the crop is determined by the virtual top of crop distance rather than a real top of crop level determined from a reflected signal.</p><p id="p0059" num="0059">A new virtual top of crop level value will be calculated for each transmit and receive cycle for which there is no actual crop underneath the ultrasonic sensor module (i.e. whenever the controller unit 107 is unable to calculate an instantaneous top of crop distance value).</p><p id="p0060" num="0060">The memory in the controller unit 107 used to hold the local crop height values previously transmitted by the ultrasonic sensor modules 105 will not be updated with any further local crop height values until a valid top of crop distance reading (and hence also a local crop height value) is actually received at the controller unit 107 from any one of the ultrasonic sensor modules 105. Thus the virtual crop height value used to determine the virtual top of crop level will remain unchanged. Consequently, the height of the boom which is some offset from this virtual top of crop level will also remain fixed. Hence the only variable which will cause the boom to be moved up or down whenever the controller unit 107 is not receiving any valid local top of crop distance values (and hence also any local crop height values) from the ultrasonic sensor modules 105 would be a change in the determined instantaneous ground distance value g.</p><p id="p0061" num="0061">The skilled person will appreciate however that when the boom and the ultrasonic sensor modules 105 thereon travel from an area having continuous crop cover to a barren patch having no crop, the ultrasonic sensor modules 105 will not generate valid top of crop distance values during the first transmit and receive cycle occurring after the transition to the barren patch. This is because the new top of crop distance value determined by each of the ultrasonic sensor modules will not fall within the acceptable deviation from the previous local top of crop distance value that each sensor determined in the previous transmit and receive cycle.</p><p id="p0062" num="0062">The operation of the hybrid top of crop controlled system of the example of present invention will now be further illustrated with reference to an exemplary field of crop,<!-- EPO <DP n="19"> --> and will be compared to the operation of conventional "top of crop" mode of operation. In <figref idrefs="f0005">Figure 7</figref>, a field of crop is shown and the position of the boom (and ultrasonic sensor modules 105 on said boom) as controlled according to the conventional "top of crop" mode of operation is illustrated. <figref idrefs="f0006">Figure 8</figref> illustrates the equivalent position of the boom over the crop if it were being controlled according to the hybrid top of crop driven method of operation of the example of the present invention. Both figures illustrate the equivalent position of the boom as the boom moves from left to right over the crop.</p><p id="p0063" num="0063">In both <figref idrefs="f0005">Figure 7</figref> at position 7A and <figref idrefs="f0006">Figure 8</figref> at position 8A, the controller units in both systems receive local top of crop distance values c from the ultrasonic sensors. In addition, the controller unit 107 of the exemplary system of the present invention also receives local ground distance g values from the ultrasonic sensors 105. Both systems control the boom so that it maintains a predetermined separation distance <i>s</i> from the top of the crop.</p><p id="p0064" num="0064">In addition, the controller unit 107 of the embodiments of the present invention also receives a local crop height from any of the ultrasonic sensors 105 that are able to determine one. The controller 107 of embodiments of the present invention records the received local crop height values into memory and calculates the updated cumulative moving average for the "virtual" crop height (as shown by the dashed line in <figref idrefs="f0006">Figure 8</figref>) ready for use in the next transmit and receive cycle.</p><p id="p0065" num="0065">As the boom of the conventional top of crop and the hybrid top of crop system moves to position 7B' and 8B', respectively, the new crop underneath the ultrasonic sensor modules 105 is taller than the previous crop at position 7A and 8A. Again both of the systems obtain a signal from the top of the crop and ascertain an instantaneous top of the crop distance c. At this position, because the crop is higher than the previous crop, the distance between the boom and the top of the crop is less than the predetermined separation distance <i>s</i> and so the controller unit 107 of both the conventional top of crop and the hybrid top of crop system will raise the boom to position 7B and 8B, respectively, to maintain the separation distance <i>s</i> between the boom and the top of crop. As before, the system of embodiments of the present invention also receives local ground distance g from the ultrasonic sensor modules<!-- EPO <DP n="20"> --> 105 for that transmit and receive cycle. The controller 107 also records the local crop height values received from the ultrasonic sensor modules 105 into its memory and updates the cumulative moving average of the stored local crop heights to give the "virtual" crop height for use in the next transmit and receive cycle.</p><p id="p0066" num="0066">As the boom of the conventional top of crop system moves to position 7C', the new crop underneath it is shorter than the previous crop at position 7B. Similarly as the boom of the hybrid top of crop system in <figref idrefs="f0006">Figure 8</figref> moves to position 8C', the new crop underneath is shorter than the previous crop at position 8B. Again both of the systems obtain a signal from the top of the crop and ascertain a top of crop distance c from the local top of crop distance values received from the ultrasonic sensor modules 105. At this position, because the crop height is less than the previous crop, the distance between the boom and the top of the crop is larger than the predetermined separation distance <i>s</i> and so the controller unit 107 lowers the boom to position 7C and 8C (for the conventional top of crop system and the "hybrid top of crop system", respectively) so that the separation distance <i>s</i> is again maintained.</p><p id="p0067" num="0067">The skilled person will appreciate that <figref idrefs="f0005">Figures 7</figref> and <figref idrefs="f0006">8</figref> shows only a few positions for the sake of clarity - in reality there would not be a large adjustment of the boom between positions because the height control system adjusts the boom height at each transmit and receive cycle. Because there are many of these per second, the movement of the boom would not be abrupt and discontinuous but would appear smooth. When travelling between position 7B and 7C, for example, the boom would appear to track the contour of the crop canopy smoothly.</p><p id="p0068" num="0068">At position 8C', as before, the controller unit 107 of the present invention determines an instantaneous ground level distance g from the individual local ground distance values received from the ultrasonic sensor modules 105. It also records the latest local crop height values received from the ultrasonic sensors 105 into its memory and updates the cumulative moving average of the local crop heights stored in its memory to provide an updated virtual crop height value for use in the next transmit and receive cycle.<!-- EPO <DP n="21"> --></p><p id="p0069" num="0069">As each boom of the conventional top of crop and the hybrid top of crop system moves to position 7D and 8D, respectively, it passes over an area in which there is no crop under any of the ultrasonic sensor modules. In this case, both control systems receive a reflection of the ultrasonic pulse from the ground level only.</p><p id="p0070" num="0070">In the conventional "top of crop" level driven control system, the reflection from the ground, because it is the first reflection received by the ultrasonic sensor modules 105, is interpreted as the top of crop signal and hence the local top of crop distance c at the ultrasonic sensor module will be incorrectly interpreted as equal to the ground distance. Because this change in top of crop distance determined at each ultrasonic sensor is quite large compared to the previous top of crop distance determined for the previous transmit and receive cycle, one type of control logic may cause the ultrasonic sensor modules 105 to generate and send a "No Reading" value of top of crop distance to the controller unit because the new height determined for the top of crop level is outside of the acceptable deviation from the top of crop distance determined at position 7C'. If the controller unit only receives "No Reading" errors from the ultrasonic sensors then it will become incapable of controlling the height of the boom because it does not know the distance of the top of the crop from the boom for that transmit and receive cycle and will not respond to changes in terrain. This is illustrated in position 7D of <figref idrefs="f0005">Figure 7</figref>, where during this time no height control of the boom is possible.</p><p id="p0071" num="0071">Alternatively, if the ultrasonic sensors in a conventional top of crop controlled system use a different type of control logic which simply transmit the local top of crop distances which they have measured to the controller unit, and these values are actually the distance to the ground (because they have misinterpreted the reflection from the ground as the reflection from the top of crop as shown at position 7E' in <figref idrefs="f0005">Figure 7</figref>) then the controller unit will interpret an instantaneous top of crop distance value which is actually the ground distance. The controller will then lower the boom from position 7E' to position 7E to maintain the separation distance <i>s</i> from the determined top of crop level (only it will actually be maintaining separation distance <i>s</i> from the ground level). As the boom shown in <figref idrefs="f0005">Figure 7</figref> moves from 7E to 7F', the distance measured to the ground decreases and the boom is raised to maintain separation distance <i>s</i> from the ground level.<!-- EPO <DP n="22"> --></p><p id="p0072" num="0072">The skilled person will appreciate that because the boom is lowered to maintain separation distance from a level which is actually the ground level rather than the top of crop level the boom may potentially impact the next crop in the boom's path, as illustrated in position 7G of <figref idrefs="f0005">Figure 7</figref>.</p><p id="p0073" num="0073">In contrast, the hybrid top of crop controlled exemplary method and system of the present invention will not suffer from these problems. As the boom shown in <figref idrefs="f0006">Figure 8</figref> moves from position 8C to position 8D, the ultrasonic sensor modules 105 correctly interpret the reflections from the ground as being from the ground (because they are the reflections having the furthest distance from the ultrasonic sensor modules and, moreover, are within an acceptable deviation from the previously determined local ground level distances determined when the boom was at position 8C).</p><p id="p0074" num="0074">The controller unit 107 receives from the ultrasonic sensor modules local values for the ground distance g but receives "no reading" values for the top of crop distance value c nor a local crop height value. However, the controller 107 does have a virtual crop height value calculated from the local crop heights stored in its memory from previous transmit and receive cycles.</p><p id="p0075" num="0075">When the controller unit 107 determines that it does not receive any local crop height data, it instead determines a virtual top of crop distance by subtracting the virtual crop height value from the local ground distance value g determined at position 8D. The controller 107 then maintains the separation distance <i>s</i> from that calculated virtual top of crop distance.</p><p id="p0076" num="0076">Similarly, as the boom of the hybrid top of crop controlled method moves from position 8D to 8E, although local ground distances g will be supplied to the controller 107 from the ultrasonic sensor modules 105 no local top of crop distances or local crop height values will be supplied to the controller unit 107. Hence the controller unit 107 will again calculate a virtual top of crop distance at position 8E, based on subtracting the virtual crop height (which, because the controller unit has not updated its memory with any further local crop height values, will be the same as that determined at position 8D) from the local ground distance value g.<!-- EPO <DP n="23"> --></p><p id="p0077" num="0077">At position 8F' although no local crop distance is available, the boom will be raised to position 8F to maintain the predetermined separation distance <i>s</i> from the virtual top of crop because the instantaneous ground distance g has changed.</p><p id="p0078" num="0078">In the exemplary system of the present invention, as the boom moves to position 8G, the ultrasonic sensor modules 105 will receive a true echo from the top of the crop again and will send to the controller unit 107 local values of top of crop distance, ground distance, and crop height. The controller unit 107 will thus calculate both a top of crop distance and a ground distance value from the data supplied by the ultrasonic sensors 105 for that "transmit and receive" cycle. The controller unit 107 will thus once again raise or lower the boom to maintain the separation distance <i>s</i> between the boom and the top of the crop but this time the top of crop distance will be used for the top of crop level because it is available.</p><p id="p0079" num="0079">Clearly, using the hybrid top of crop controlled mode of operation, the controller unit is able to maintain height control of the boom even if top of crop distance values are not received from the ultrasonic sensor modules. In addition, there is no risk of the boom being lowered into the path of oncoming crops as the boom moves between positions 8C and 8G.</p><p id="p0080" num="0080">The skilled person will thus appreciate that by operating in the hybrid top of crop controlled mode, the height control system and method of the present invention allows the tractor and boom to traverse patchy areas of crop where normal "top of crop" level driven height control systems would potentially become inoperable or cause the boom to be lowered into the path of oncoming crop if the boom passed over an area free from crop.</p><heading id="h0007"><u>Hybrid Ground level Controlled Mode</u></heading><p id="p0081" num="0081">In both the known "conventional ground level" controlled mode and the "hybrid ground level" controlled mode of the example of present invention the controller unit 107 is used to adjust the height of a cutter bar above the determined level of the ground to maintain a predetermined separation distance <i>S</i> between the ground level and the cutter bar.<!-- EPO <DP n="24"> --></p><p id="p0082" num="0082"><figref idrefs="f0007">Figure 9</figref> is a process flow diagram illustrating the operation of the hybrid ground level controlled mode of the present invention.</p><p id="p0083" num="0083">Calculations are performed for each channel as illustrated in step S901. As described in detail above, each ultrasonic sensor module 105 communicates its local ground level distance g, local top of crop distance c, and local crop height value to the controller unit 107 for each channel. This is encapsulated in step S903 of the method in which crop data is obtained from the ultrasonic sensor modules 105 to determine the crop data for each channel.</p><p id="p0084" num="0084">The skilled person will appreciate however that when the cutter bar and the ultrasonic sensor modules 105 thereon travel to an area in which an echo from the true ground level cannot be obtained, the ultrasonic sensor modules 105 will not generate valid ground distance values during the first transmit and receive cycle occurring after the transition to that area. This is because the furthest echo received by the ultrasonic sensor modules would not be received from the true ground level but some object closer to the ultrasonic sensor modules than the ground level, such as a part of the crop, perhaps. This would particularly be the case if crop had been laid or bent over. In conventional ground level controlled systems, the ultrasonic sensor modules would interpret the reflection from the top of the laid over crop as being from the true ground and so indicate an erroneous ground level.</p><p id="p0085" num="0085">At step S905 the controller unit 107 determines if it has received valid values (i.e. no "no reading" error signals) for both the ground distance g and top of crop distance c from the ultrasonic sensor module(s) 105 for that channel. If it has received both signals, it will proceed to S907 where the controller 107 updates the virtual crop height value using the height information, and then the controller will then proceed to S909 where it adjusts the position of the cutter bar to maintain a set separation distance <i>S</i> between the cutter bar and the ground. However, if at S905 the controller determines it has not received valid signals for both the ground distance and the top of crop distance it will proceed to S911 where it will then determine if it has a valid ground distance g but not a valid top of crop distance c. If at S911 the controller determines it has a valid ground distance g but not a valid top of crop distance c, it will proceed to<!-- EPO <DP n="25"> --> S909 and control the position of the cutter bar to maintain separation distance <i>S</i>. However, if at S911 the controller 107 determines it is able to determine the top of crop distance but not able to determine the ground distance it proceeds to S913. If at S913 the controller 107 determines neither the ground distance g nor the top of crop distance c can be determined, no control can occur. However, if at S913 controller 107 determines a valid top of crop distance signal c can be obtained but not a valid ground distance g, the method will proceed to S915 in which the controller unit 107 determines a virtual ground distance g'. It does this by adding the virtual crop height value (which it has calculated by determining the cumulative moving average of the individual local crop height values of previous transmit and receive cycles recorded in the memory buffer of the controller 107) to the instantaneous top of crop distance value c for that particular transmit and receive cycle of that channel.</p><p id="p0086" num="0086">At step S917, the controller 107 will then control the height of the cutter bar to maintain a predetermined separation distance <i>S</i> between the cutter bar and the ground level where the distance of the ground is determined by the virtual ground distance rather than a real ground level determined from a reflected signal.</p><p id="p0087" num="0087">A new virtual ground distance will be calculated for each transmit and receive cycle for which the sensor module 105 is unable to determine an instantaneous local ground distance value.</p><p id="p0088" num="0088">The memory in the controller unit 107 used to hold the local crop height values previously transmitted by the ultrasonic sensor modules 105 will not be updated with any further local crop height values until a valid ground distance reading (and hence also a local crop height value) is actually received at the controller unit 107 from any one of the ultrasonic sensor modules 105. Thus the virtual crop height value used to determine the virtual ground distance will remain fixed. Consequently, the height of the cutter bar which is some offset from this virtual ground level will also remain fixed. Hence the only variable which will cause the cutter bar to be moved up or down whenever the controller unit 107 is not receiving any ground distance values (and hence also any crop height values) from the ultrasonic sensor modules 105 would be a change in the determined instantaneous top of crop distance value c.<!-- EPO <DP n="26"> --></p><p id="p0089" num="0089">The operation of the hybrid ground level controlled system of the example of present invention will now be further illustrated with reference to an exemplary field of crop, and will be compared to the operation of conventional "ground level" mode of operation. In <figref idrefs="f0008">Figure 10</figref>, a field of crop is shown and the position of the cutter bar (and ultrasonic sensor modules 105 on the cutter bar) as controlled by the conventional ground level mode of operation is illustrated. <figref idrefs="f0009">Figure 11</figref> illustrates the equivalent position of the cutter bar over the ground if it were being controlled with hybrid ground level controlled mode of operation of an example in accordance with the present invention. Both Figures illustrate the equivalent position of the cutter bar as the cutter bar moves left to right through the crop.</p><p id="p0090" num="0090">In both <figref idrefs="f0008">Figure 10</figref> at position 10A and <figref idrefs="f0009">Figure 11</figref> at 11A, the controller units in both systems receive local ground distance values g from the ultrasonic sensors. In addition, the controller unit 107 of the exemplary system of the present invention also receives local top of crop distance values c from the ultrasonic sensors 105. Both systems control the cutter bar so that it is a set distance <i>S</i> from the ground level. However, in <figref idrefs="f0008">Figures 10</figref> and <figref idrefs="f0009">11</figref> the distance g is illustrated as the distance to the ground from the sensor module 105 and not from the cutter bar for clarity, but the skilled person will realize that the difference in these two points of reference is a fixed offset in distance.</p><p id="p0091" num="0091">In addition, the controller unit 107 also receives a local crop height from any of the ultrasonic sensors 105 that are able to determine one. The controller 107 records the received local crop height values into memory and calculates the updated cumulative moving average for the virtual crop height ready for use in the next transmit and receive cycle (as shown by the dashed line in <figref idrefs="f0009">Figure 11</figref>).</p><p id="p0092" num="0092">As the cutter bar of the conventional ground level and the hybrid ground level system move to position 10B' and 11B', respectively, the ground level underneath the cutter bar and ultrasonic sensor modules 105 becomes higher than the ground level at previous position 10A and 11A. Again both of the systems obtain a true reflection from the ground and ascertain an instantaneous ground distance value g. At this position, because the distance between the cutter bar and the ground level is less than the predetermined separation distance <i>S</i>, the controller unit 107 of both the<!-- EPO <DP n="27"> --> conventional ground level and the hybrid ground level system will raise the cutter bar up to position to 10B and 11B for <figref idrefs="f0008">Figure 10</figref> and <figref idrefs="f0009">11</figref> respectively to maintain the separation distance, <i>S</i>, between cutter bar and ground. As before, the system of the present invention also determines an instantaneous local top of crop distance c from the individual local top of crop distance values received from the ultrasonic sensor modules 105 for that transmit and receive cycle. The controller 107 records the local crop height values received from the ultrasonic sensor modules 105 in its memory and updates the cumulative moving average of the stored local crop heights to give the virtual crop height for use in the next transmit and receive cycle.</p><p id="p0093" num="0093">As the cutter bar of the conventional ground level system illustrated in <figref idrefs="f0008">Figure 10</figref> moves from 10B to position 10C', the ground level drops away so that it is lower than the ground level at position 10B. Similarly as the cutter bar of the hybrid ground level system in <figref idrefs="f0009">Figure 11</figref> moves to position 11C', the ground level drops away so that it is lower than the ground level at position 11B. Again both of the systems obtain a true reflection from the ground level and ascertain an instantaneous ground distance value from the individual local ground distance values received from the ultrasonic sensor modules 105. At this position, because the distance to the ground level is larger than the predetermined separation distance <i>S</i> the controller unit 107 lowers the cutter bar to position 10C and 11C (for the conventional ground level system and the "hybrid ground system" respectively) so that the separation distance, <i>S</i>, is again maintained.</p><p id="p0094" num="0094">The skilled person will appreciate that <figref idrefs="f0008">Figures 10</figref> and <figref idrefs="f0009">11</figref> show only a few positions for the sake of clarity - in reality there would not be a large adjustment of the cutter bar between positions because the height control system adjusts the cutter bar height at each transmit and receive cycle. Because there are many of these per second, the movement of the cutter bar would not be abrupt and discontinuous but would appear smooth. When travelling between position 10B and 10C, for example, the cutter bar would appear to track the contour of the ground level smoothly.</p><p id="p0095" num="0095">At position 11C', as before, the controller unit 107 of the present invention also determines an instantaneous local top of crop distance c from the individual top of crop distance values received from the ultrasonic sensor modules 105 for that transmit and receive cycle. The controller 107 records the latest local crop height values received<!-- EPO <DP n="28"> --> from the ultrasonic sensors 105 into its memory and updates the cumulative moving average of the local crop heights stored in its memory to provide an updated virtual crop height value for use in the next transmit and receive cycle.</p><p id="p0096" num="0096">As the cutter bar of the conventional ground level mode system moves to position 10D in <figref idrefs="f0008">Figure 10</figref>, it might pass over an area in which the crop has a very thick canopy which blocks a sensor's view of the ground. The top of the crop would be well above the actual ground level. Due to the abrupt rise in the detected ground level (the ultrasonic sensor modules 105 would see the top of the crop as a false ground level) the ground distance that each of the ultrasonic sensor modules measured would likely be much smaller than the previously measured local ground distance value and thus outside of the acceptable deviation from the previous locally measured ground distance in which case the ultrasonic sensor modules would return a "no reading" value for the local ground distance value. Alternatively, if a ditch or rut in the ground was present at position 10D thus causing the locally measured ground distances to be much greater than the previously recorded ground distances, an ultrasonic sensor module would report a "no reading" error for local ground distance value.</p><p id="p0097" num="0097">If the ground distance measured (which is actually the measurement to the top of crop) is within the acceptable deviation from the previous local measured ground distance, or if the controller logic does not check the latest reading against the previously recorded ground distance, it is also possible that the controller will raise the cutter bar to maintain separation distance <i>S</i> between the sensor and top of crop rather than the ground.</p><p id="p0098" num="0098">In the conventional ground level driven control system, if the controller unit only receives "no reading" errors from the ultrasonic sensor modules for the local ground distance values then it will become incapable of controlling the height of the cutter bar because it does not know the distance of the ground from the cutter bar for that transmit and receive cycle. Typically, when this situation occurs the height control system has to be manually managed until such time as a reliable ground level can be determined. As illustrated in <figref idrefs="f0008">Figure 10</figref>, without manual intervention the cutter bar will make contact with the ground at position 10E.<!-- EPO <DP n="29"> --></p><p id="p0099" num="0099">In contrast, the hybrid ground level controlled method and system of the present invention does not suffer from this problem and control of the cutter bar height is always maintained by the controller unit 107. Illustrated in <figref idrefs="f0009">Figure 11</figref>, as the cutter bar moves from position 11C to position 11 D', the controller unit 107 receives from the ultrasonic sensor modules local values for the top of crop distances c but receives "no reading" values for the local ground distance values and also for the local crop height values. However, the controller unit 107 does have a virtual crop height value calculated from the local ground and top of crop distance measurements stored in its memory from previous transmit and receive cycles.</p><p id="p0100" num="0100">When the controller unit 107 determines that it cannot calculate an instantaneous local ground distance value, it instead determines a virtual ground distance, illustrated in <figref idrefs="f0009">Figure 11</figref> as a dotted line, by adding the virtual crop height value to the instantaneous local top of crop distance value determined at position 11C. The controller 107 then maintains the separation distance <i>S</i> from that calculated virtual ground distance.</p><p id="p0101" num="0101">For each subsequent transmit and receive cycle that the controller unit 107 is unable to calculate an instantaneous local ground distance it will again calculate a virtual ground distance based on adding the virtual crop height (which, because the controller unit 107 has not updated its memory with any further local crop height values, will be the same as that determined at position 11C') to the instantaneous local top of crop distance value (which might be the most recent successfully calculated instantaneous top of crop distance value if "no reading" values have been received at a given position).</p><p id="p0102" num="0102">In an embodiment of the present invention, when the cutter bar moves to a position where the ultrasonic sensor modules are able to determine a local ground distance which is within an acceptable deviation of the last acceptable local ground distance value transmitted to the controller unit 107 the sensor module 105 will once again begin transmitting local ground distance values to the controller unit 107 rather than "no reading" values. The controller unit 107 will thus once again raise or lower the cutter bar to maintain the separation distance <i>S</i> between the cutter bar and the ground level albeit that the instantaneous local ground distance g will now be used rather than<!-- EPO <DP n="30"> --> a virtual ground level because it is available. This is illustrated at position 11E in <figref idrefs="f0009">Figure 11</figref>.</p><p id="p0103" num="0103">Clearly, using the hybrid ground level controlled mode of operation, the controller unit is able to maintain height control of the cutter bar even if no useable ground distance values are received from the ultrasonic sensor modules 105.</p><p id="p0104" num="0104">The skilled person will thus appreciate that by operating in the hybrid ground level controlled mode, the height control system and method of the present invention allows the cutter bar to traverse areas of crop where normal "ground level" driven height control systems would potentially become inoperable if they could not obtain a satisfactory indication of the ground level from the ultrasonic sensors.</p><heading id="h0008">Modifications:</heading><p id="p0105" num="0105">Whilst the preferred embodiment of the present invention has been described as being used with two separate VG sprayer booms each mounted on a side of the tractor unit for hybrid top of crop control mode, and described as being a harvester cutter bar for hybrid ground level control mode, the skilled person will appreciate that other arrangements could be contemplated within the scope of the present invention. Indeed, the ultrasonic sensor modules could be placed in any arrangement with respect to the booms 101. Furthermore, a single large sprayer boom could be used in the present invention rather than the two separate VG sprayer booms described. A single large sprayer boom would be mounted at its mid-point to the tractor unit and would be coupled to the tractor unit by well known coupling mechanisms which allow the boom to be rotated about its mid-point and also raised and lowered towards and away from the ground. The ultrasonic sensor modules 105 would be arranged along the length of the single sprayer boom. <figref idrefs="f0010">Figure 12</figref> illustrates such a tractor and boom arrangement.</p><p id="p0106" num="0106">Similarly, an arrangement could be made to control the lateral inclination of a cutter bar by placing ultrasonic sensor modules on either side of the cutter bar as illustrated in <figref idrefs="f0010">Figure 13</figref>. The cutter bar would be coupled to the harvester unit using well known<!-- EPO <DP n="31"> --> coupling mechanisms not only to raise and lower the cutter bar but to be rotated about its midpoint.</p><p id="p0107" num="0107">Whilst the present method and system have been described with reference to using multiple ultrasonic sensor modules 105, the skilled person will appreciate that embodiments of the present invention could be equally well applied to a system having only a single ultrasonic sensor module. In such a case, the instantaneous representative crop height values calculated by the controller unit 107 would not be based on averaging the local values of the same from multiple ultrasonic sensor modules but would actually be the local values from the single ultrasonic sensor module. Such a system would still operate to record the local crop height values received by the controller unit 107 over time into its memory to form a virtual crop height value in the manner discussed above.</p><p id="p0108" num="0108">The skilled person will understand that, if receiving crop data from multiple ultrasonic sensor modules, other ways of interpreting the data (provided so that it could be used in the method of the present invention) could be considered. For example, a single ground distance value provided by any of the multiple ultrasonic sensor modules 105 could be considered by the controller 107 as the representative ground distance value for that particular transmit and receive cycle. Similarly, a single one of the top of crop distance values provided by any of the multiple ultrasonic sensor modules 105 could be considered by the controller 107 as the representative top of crop distance value for that particular transmit and receive cycle. A single one of the local crop height values supplied to the controller 107 for that particular transmit and receive cycle from all of the ultrasonic sensor modules 105 could be taken as the instantaneous representative crop height value for that cycle. The skilled person will appreciate that the criteria for selecting which single local value to take as the corresponding instantaneous representative value would depend on what mode of operation the system was in. For example, if in ground level controlled mode, the smallest individual local ground level distance might be selected as the instantaneous representative value as this would ensure that the separation distance was maintained from the nearest ground to any of the sensors.<!-- EPO <DP n="32"> --></p><p id="p0109" num="0109">The skilled person will appreciate that in the foregoing description, distances of the top of crop and the ground level have been determined from the ultrasonic sensor modules with increasing distance away from the sensor module having an increasing positive distance value. The skilled person will understand that it a different distance notation scheme is implemented (for example distances from the boom are given negative values say) then the virtual crop height, and virtual top of crop distance and virtual ground distance would be calculated using the different notion scheme.</p><p id="p0110" num="0110">The main embodiment of the invention describes opening a receive window for a preset period of time where the time chosen is sufficient to allow any reflections from the ground to reach the transducer. The skilled person will appreciate that the duration for which the receive window is opened could be automatically varied based on a range of factors such as the distance of the ground determined as part of the last transmit and receive cycle, plus some offset. This would mean that as the boom was moved closer to the ground, the receive window would be made shorter to reflect the fact that reflections will not take as long to reach the transducer whilst as the boom was moved further away from the ground the receive window would be increased. Alternatively, the duration for which the receive window is open could be varied manually and set by the operator of the system, via the controller 107. Manual setting may depend on crop type (because different crop types will have different heights), an average predetermined crop height, and the time of year (to reflect that crop being sprayed later in the growing season will generally be taller thus requiring the boom to be higher from the ground) and the controller 107 may present a suitable interface to the operator of the system to allow data regarding these variables to be input into the system and to set the receive window duration accordingly.</p><p id="p0111" num="0111">In the present embodiment the ultrasonic sensor modules 105 are described as transmitting an ultrasonic pulse at discrete intervals of 20 to 30 milliseconds. The skilled person will appreciate that the interval at which the ultrasonic pulses are transmitted could be varied. Such variation could depend on the type of crop over which the ultrasonic sensor modules will pass, the planting density or separation between plants of the crop over which the ultrasonic sensor modules will pass, the density of the individual plants over which the ultrasonic sensor modules will pass, the time of year at which the operation is being carried out (because if it is later in the<!-- EPO <DP n="33"> --> growing season then crop will naturally be larger and foliage will be denser) and the speed at which the boom (and hence ultrasonic sensor modules) is passing over the crop. As the boom moves faster over the crops, for example, a shorter interval between pulse transmissions will be required.</p><p id="p0112" num="0112">In the preferred embodiment discussed above, it is mentioned that the gain of the receiving and amplifying circuit is increased in an exponential fashion with increasing elapsed time since pulse transmission. The skilled person will appreciate that the gain of the receive and amplify circuit could be increased using any suitable relationship rather than simply an exponential relationship over time. The skilled person will also appreciate that no increase in gain over time might also be applied.</p><p id="p0113" num="0113">The skilled person will appreciate that a wide range of sound pulse frequencies could be used in the present invention. Although ultrasonic sensor modules have been described, the skilled person will appreciate that the sound generation and detection equipment of the present invention could be altered to produce and receive sound of any desired frequency.</p><p id="p0114" num="0114">Moreover, whilst individual ultrasonic sensor modules have been described as both transmitting the ultrasonic pulse and detecting/receiving the resulting echoes, appropriate separate components could be used for each of these steps.</p><p id="p0115" num="0115">The skilled person will appreciate that rather than each ultrasonic sensor module calculating the crop height value from the local ground distance value and local top of crop distance value it measures, the ultrasonic sensor module(s) 105 may simply transmit the ground distance value and the top of crop distance value to the controller 107 which will carry out the calculation of local crop height for the readings from each sensor itself. In such a case, the controller unit 107 would still record each of the local crop height values it calculates into its memory to form the basis for calculating the cumulative moving average of the local crop heights.</p><p id="p0116" num="0116">The number of individual crop height values stored in the memory buffer of the controller 107 for previous cycles may vary in dependence on the type of crop, the time of year (there is likely to be more and larger barren patches in autumn/winter than<!-- EPO <DP n="34"> --> spring or summer) at which the operation is being carried out, the age of the crop being sprayed, the density of planting of the crop, and the speed at which the ultrasonic sensors are travelling over the ground. In addition, the recording of local crop height values into the controller unit memory may be stopped and started by certain external triggers such as positional data (obtained from a global satellite positioning system or any other means) indicating that the tractor unit is at a desired location, or by a user operable control. Because the local crop height values recorded into the controller's memory form the basis for the cumulative moving average of crop height (i.e. the virtual crop height which drives the present system), providing control over when local crop heights are recorded into the memory of the controller unit 107 allows the user to ensure that the virtual crop height value being calculated is very accurate and relevant to the crop which is actually of interest. If the tractor has to transit to a target field of crop, then it is undesirable for any local values of crop height produced by the ultrasonic sensor modules along the way to the target field to be included in the cumulative moving average value and thus contribute to the virtual crop height value. Using positional data or a manual intervention by the user of the system to begin recording local crop height values from the ultrasonic sensor modules into the controller unit memory allows only relevant local crop heights to be recorded to the memory.</p><p id="p0117" num="0117">In addition, in a system which incorporates multiple ultrasonic sensors, the skilled person will appreciate that the controller unit 107 could be controlled to ignore the readings of local ground distance, local top of crop distance, and local crop height from certain ones of the ultrasonic sensor modules. In this way, certain ultrasonic sensor modules 105 could be "masked" so that their data is not included in any calculations carried out by the controller unit 107.</p><p id="p0118" num="0118">Although the height control system and method of the present invention has been described with reference to controlling the height of a sprayer boom which is towed behind a tractor, the skilled person will appreciate that the height control system of the present invention could be applied to any equipment requiring height control. Another example to which the height control system and method of the present invention could be applied includes, but is not limited to controlling the height of a cutting blade of a combine-harvester or to tillaging mechanisms where height control is required.</p></description><claims mxw-id="PCLM56977663" lang="EN" load-source="patent-office"><!-- EPO <DP n="35"> --><claim id="c-en-0001" num="0001"><claim-text>A method of controlling a height of an agricultural equipment component comprising:
<claim-text>determining an average crop height:
<claim-text>controlling said component to maintain a predetermined distance from one of a current top of crop level or current ground level,</claim-text>
<claim-text>wherein if a current top of crop level or a current ground level cannot be determined:
<claim-text>calculating a virtual top of crop level or virtual ground level, respectively, using said average crop height value; and</claim-text>
<claim-text>controlling said agricultural equipment to maintain a predetermined distance from said virtual top of crop level or said virtual ground level, respectively.</claim-text></claim-text></claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1 wherein said virtual top of crop level is calculated by subtracting said average crop height from the current ground level.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 1 wherein said virtual ground level is calculated by adding said average crop height to the current top of crop level.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of claim 1, wherein the current level of the top of a crop and the ground level is determined by:
<claim-text>transmitting an ultrasonic pulse;</claim-text>
<claim-text>detecting return echoes of said pulse and characterising said return echoes to identify a return from the top of the crop and a return from the ground together with the time at which each echo is received;</claim-text>
<claim-text>using the known speed of the transmitted pulse and the time elapsed between the transmission of the pulse and the times of receipt of the return from the top of the crop and the return from the ground level to calculate the distance at which each respective return echo occurred.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of claim 4, further comprising:<!-- EPO <DP n="36"> -->
<claim-text>measuring the ambient air temperature at a time of transmission of the ultrasonic pulse, using the ambient air temperature measurement to determine the speed of the ultrasonic pulse corrected for temperature, and using the corrected speed as the known speed.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of any preceding claim, wherein the average crop height comprises an average of historical crop heights.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 6, wherein said historical crop heights are individual crop heights which have been determined by an ultrasonic sensor by subtracting an instantaneous distance of a top of crop detected under the ultrasonic sensor from the instantaneous ground distance which was also detected under the ultrasonic sensor at the same time.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of any of claims 1 to 5 wherein the average crop height is preset by a user.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A method according to any of claims 1 to 8, wherein said agricultural equipment comprises a sprayer boom.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>A method according to any of claims 1 to 8, wherein said agricultural equipment comprises a cutter bar.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>Apparatus for carrying out the method of claim 1, comprising<br/>
a sensor unit for providing a signal indicative of a current top of crop level or a current ground level; and;<br/>
a control unit receiving said signal, calculating an average crop height, and providing a control signal to control the height of the component,<br/>
wherein, if a current top of crop level or a current ground level cannot be determined by said sensor, said control unit<br/>
calculates a virtual top of crop level or virtual ground level, respectively, using said average crop height value; and<br/>
<!-- EPO <DP n="37"> -->adjusts said control signal to control the height of the component to maintain a predetermined distance from said virtual top of crop level or said virtual ground level, respectively.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>Apparatus according to claim 11, wherein said sensor unit and said control unit are integral with one another.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>Agricultural equipment including an apparatus according to claim 11 or claim 12.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>Agricultural equipment according to claim 13, wherein said sensor unit is mounted on a sprayer boom.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>Agricultural equipment according to claim 13, wherein said sensor unit is mounted on a cutter bar.</claim-text></claim></claims><drawings mxw-id="PDW16668343" load-source="patent-office"><!-- EPO <DP n="38"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="88" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0002" num="2,3"><img id="if0002" file="imgf0002.tif" wi="165" he="207" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0003" num="4,5a,5b"><img id="if0003" file="imgf0003.tif" wi="165" he="205" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0004" num="6"><img id="if0004" file="imgf0004.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0005" num="7"><img id="if0005" file="imgf0005.tif" wi="129" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0006" num="8"><img id="if0006" file="imgf0006.tif" wi="127" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0007" num="9"><img id="if0007" file="imgf0007.tif" wi="156" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0008" num="10"><img id="if0008" file="imgf0008.tif" wi="127" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0009" num="11"><img id="if0009" file="imgf0009.tif" wi="135" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0010" num="12,13"><img id="if0010" file="imgf0010.tif" wi="165" he="202" img-content="drawing" img-format="tif"/></figure></drawings><search-report-data><doc-page id="srep0001" file="srep0001.tif" wi="158" he="233" type="tif"/><doc-page id="srep0002" file="srep0002.tif" wi="156" he="233" type="tif"/></search-report-data><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
