<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678937-A2" country="EP" doc-number="2678937" kind="A2" date="20140101" family-id="46652198" file-reference-id="295263" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550560" ucid="EP-2678937-A2"><document-id><country>EP</country><doc-number>2678937</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12757561-A" is-representative="NO"><document-id mxw-id="PAPP154824483" load-source="docdb" format="epo"><country>EP</country><doc-number>12757561</doc-number><kind>A</kind><date>20120220</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438184" load-source="docdb" format="original"><country>EP</country><doc-number>12757561.1</doc-number><date>20120220</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140450418" ucid="US-201113170216-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201113170216</doc-number><kind>A</kind><date>20110628</date></document-id></priority-claim><priority-claim mxw-id="PPC140448705" ucid="US-201161445632-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161445632</doc-number><kind>P</kind><date>20110223</date></document-id></priority-claim><priority-claim mxw-id="PPC140454704" ucid="US-2012025793-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012025793</doc-number><kind>W</kind><date>20120220</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988135035" load-source="docdb">H02P   6/14        20060101AFI20121001BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988106075" load-source="docdb" scheme="CPC">H02P   6/14        20130101 FI20130420BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184164" lang="DE" load-source="patent-office">VERFAHREN UND SYSTEM ZUR STEUERUNG EINES ELEKTROMOTORS MIT VARIABLER SCHALTFREQUENZ BEI VARIABLER ARBEITSGESCHWINDIGKEIT</invention-title><invention-title mxw-id="PT132184165" lang="EN" load-source="patent-office">METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH VARIABLE SWITCHING FREQUENCY AT VARIABLE OPERATING SPEEDS</invention-title><invention-title mxw-id="PT132184166" lang="FR" load-source="patent-office">PROCÉDÉ ET SYSTÈME PERMETTANT DE CONTRÔLER UN MOTEUR ÉLECTRIQUE AVEC UNE FRÉQUENCE DE COMMUTATION VARIABLE À DES VITESSES DE FONCTIONNEMENT VARIABLES</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918141351" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>DEERE &amp; CO</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918167258" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>DEERE &amp; COMPANY</last-name></addressbook></applicant><applicant mxw-id="PPAR918991877" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Deere &amp; Company</last-name><iid>101150216</iid><address><street>One John Deere Place</street><city>Moline, IL 61265</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918149363" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WU LONG</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918160728" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WU, LONG</last-name></addressbook></inventor><inventor mxw-id="PPAR918980016" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WU, LONG</last-name><address><street>2824 37th Avenue South</street><city>Fargo, ND 58104</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918155583" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>SHAW ROBERT</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918167663" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>SHAW, ROBERT</last-name></addressbook></inventor><inventor mxw-id="PPAR918983755" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>SHAW, ROBERT</last-name><address><street>1622 42nd Avenue South</street><city>Moorhead, MN 56560</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918984178" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Holst, Sönke</last-name><iid>101371590</iid><address><street>John Deere GmbH &amp; Co. KG Mannheim Regional Center Global Intellectual Property Services John-Deere-Strasse 70</street><city>68163 Mannheim</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012025793-W"><document-id><country>US</country><doc-number>2012025793</doc-number><kind>W</kind><date>20120220</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012125257-A2"><document-id><country>WO</country><doc-number>2012125257</doc-number><kind>A2</kind><date>20120920</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548919167" load-source="docdb">AL</country><country mxw-id="DS548831873" load-source="docdb">AT</country><country mxw-id="DS548919169" load-source="docdb">BE</country><country mxw-id="DS548894804" load-source="docdb">BG</country><country mxw-id="DS548812067" load-source="docdb">CH</country><country mxw-id="DS548911960" load-source="docdb">CY</country><country mxw-id="DS548831874" load-source="docdb">CZ</country><country mxw-id="DS548919170" load-source="docdb">DE</country><country mxw-id="DS548911961" load-source="docdb">DK</country><country mxw-id="DS548911966" load-source="docdb">EE</country><country mxw-id="DS548859292" load-source="docdb">ES</country><country mxw-id="DS548894805" load-source="docdb">FI</country><country mxw-id="DS548894806" load-source="docdb">FR</country><country mxw-id="DS548919171" load-source="docdb">GB</country><country mxw-id="DS548911967" load-source="docdb">GR</country><country mxw-id="DS548919172" load-source="docdb">HR</country><country mxw-id="DS548831875" load-source="docdb">HU</country><country mxw-id="DS548812068" load-source="docdb">IE</country><country mxw-id="DS548911968" load-source="docdb">IS</country><country mxw-id="DS548894807" load-source="docdb">IT</country><country mxw-id="DS548911969" load-source="docdb">LI</country><country mxw-id="DS548909241" load-source="docdb">LT</country><country mxw-id="DS548913224" load-source="docdb">LU</country><country mxw-id="DS548909246" load-source="docdb">LV</country><country mxw-id="DS548909247" load-source="docdb">MC</country><country mxw-id="DS548913225" load-source="docdb">MK</country><country mxw-id="DS548913226" load-source="docdb">MT</country><country mxw-id="DS548894808" load-source="docdb">NL</country><country mxw-id="DS548859293" load-source="docdb">NO</country><country mxw-id="DS548812069" load-source="docdb">PL</country><country mxw-id="DS548913227" load-source="docdb">PT</country><country mxw-id="DS548894809" load-source="docdb">RO</country><country mxw-id="DS548913228" load-source="docdb">RS</country><country mxw-id="DS548812070" load-source="docdb">SE</country><country mxw-id="DS548831876" load-source="docdb">SI</country><country mxw-id="DS548859374" load-source="docdb">SK</country><country mxw-id="DS548812071" load-source="docdb">SM</country><country mxw-id="DS548909249" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA100258184" ref-ucid="WO-2012125257-A2" lang="EN" load-source="patent-office"><p num="0000">A data processor establishes a first range of rotational speeds of a rotor of the motor from a first lower limit to a first higher limit (S300 in FIG. 3) and a second range of rotational speeds from a second lower limit to a second higher limit (S302). A hysteresis band or a rotational range of speeds is established such that during operation in the first range the first higher limit is adjusted (e.g., raised by a first amount to be greater than the second lower limit)(S304). A sensor detects or measures a rotational speed of a rotor of the motor (S306). The data processor determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range (S308). A switching frequency of a pulse-width modulation signal is varied in accordance with the selected speed range (S310).</p></abstract><abstract mxw-id="PA100507984" ref-ucid="WO-2012125257-A2" lang="EN" source="national office" load-source="docdb"><p>A data processor establishes a first range of rotational speeds of a rotor of the motor from a first lower limit to a first higher limit (S300 in FIG. 3) and a second range of rotational speeds from a second lower limit to a second higher limit (S302). A hysteresis band or a rotational range of speeds is established such that during operation in the first range the first higher limit is adjusted (e.g., raised by a first amount to be greater than the second lower limit)(S304). A sensor detects or measures a rotational speed of a rotor of the motor (S306). The data processor determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range (S308). A switching frequency of a pulse-width modulation signal is varied in accordance with the selected speed range (S310).</p></abstract><abstract mxw-id="PA100258185" ref-ucid="WO-2012125257-A2" lang="FR" load-source="patent-office"><p num="0000">Un processeur de données établit une première plage de vitesses de rotation d'un rotor du moteur depuis une première limite inférieure jusqu'à une première limite supérieure (S300 sur la FIG. 3) et une seconde plage de vitesses de rotation depuis une seconde limite inférieure jusqu'à une seconde limite supérieure (S302). Une bande d'hystérésis ou une plage de vitesses de rotation est établie de sorte qu'au cours du fonctionnement dans la première plage, la première limite supérieure est ajustée (par exemple, augmentée d'une première quantité de manière à être supérieure à la seconde limite inférieure) (S304). Un capteur détecte ou mesure la vitesse de rotation d'un rotor du moteur (S306). Le processeur de données détermine si la vitesse de rotation mesurée est comprise à l'intérieur de la première plage ou de la seconde plage, telle qu'ajustée par la bande d'hystérésis, de manière à identifier une plage de vitesses sélectionnée (S308). Une fréquence de commutation d'un signal de modulation d'impulsions en durée est modifiée en fonction de la plage de vitesses sélectionnée (S310).</p></abstract><abstract mxw-id="PA100507985" ref-ucid="WO-2012125257-A2" lang="FR" source="national office" load-source="docdb"><p>Un processeur de données établit une première plage de vitesses de rotation d'un rotor du moteur depuis une première limite inférieure jusqu'à une première limite supérieure (S300 sur la FIG. 3) et une seconde plage de vitesses de rotation depuis une seconde limite inférieure jusqu'à une seconde limite supérieure (S302). Une bande d'hystérésis ou une plage de vitesses de rotation est établie de sorte qu'au cours du fonctionnement dans la première plage, la première limite supérieure est ajustée (par exemple, augmentée d'une première quantité de manière à être supérieure à la seconde limite inférieure) (S304). Un capteur détecte ou mesure la vitesse de rotation d'un rotor du moteur (S306). Le processeur de données détermine si la vitesse de rotation mesurée est comprise à l'intérieur de la première plage ou de la seconde plage, telle qu'ajustée par la bande d'hystérésis, de manière à identifier une plage de vitesses sélectionnée (S308). Une fréquence de commutation d'un signal de modulation d'impulsions en durée est modifiée en fonction de la plage de vitesses sélectionnée (S310).</p></abstract><description mxw-id="PDES51502451" ref-ucid="WO-2012125257-A2" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH VARIABLE SWITCHING FREQUENCY AT VARIABLE OPERATING SPEEDS </p><p id="p0002" num="0002">This document claims priority based on U.S. provisional application serial number 61/445,632, filed on 23 February 2011 and entitled METHOD AND SYSTEM FOR CONTROLLING AN ELECTRIC MOTOR WITH VARIABLE SWITCHING FREQUENCY AT VARIABLE OPERATING SPEEDS, under 35 U.S.C. 119(e). </p><p id="p0003" num="0003">Field of the Invention </p><p id="p0004" num="0004"> This invention relates to a method and system for controlling an electric motor with variable switching frequency (e.g., pulse width modulation frequency) at variable operating speeds of a motor shaft. </p><p id="p0005" num="0005">Background of the Invention </p><p id="p0006" num="0006"> An electric motor may feature a rotor with permanent magnets and a stator, such as an interior permanent magnet (IPM) motor or an IPM synchronous motor. Application of the motor to a vehicle traction often requires a wide speed range of motor control. Although, to some extent, motor control performance can be increased with an increase in pulse width modulation switching frequency provided by the inverter, an excessively high switching frequency increases inverter switching losses, reduces inverter life from thermal impact, and increases the data processing burden of the data processor or digital signal processor within the inverter. Thus, there is a need for a method and system for controlling an electric motor with a wide varying operating speed such that a balanced or optimum pulse width modulation frequency is selected for the inverter. </p><p id="p0007" num="0007">Summary of the Invention </p><p id="p0008" num="0008"> In accordance with one embodiment, a method and system is presented for controlling an electric motor. A data processor establishes a first range of rotational speeds of a rotor of the motor from a first lower limit to a first higher limit. A data processor establishes a second range of rotational speeds of the rotor from a second lower limit to a second higher limit. A hysteresis band or a rotational range of speeds is established such that during operation in the first range the first higher limil is adjusted (e.g., raised by a first amount to be greater than the second lower limit). 
<!-- EPO <DP n="3"/>-->
 A sensor detects or measures a rotational speed of a rotor of the motor. The data processor determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range. The data processor, the PWM module, or the inverter circuit varies a switching frequency of a pulse-width modulation signal in accordance with the selected speed range. </p><p id="p0009" num="0009">Brief Description of the Drawings </p><p id="p0010" num="0010"> FIG. 1 is a block diagram of one embodiment of a system for controlling an electrical motor with variable speed control. </p><p id="p0011" num="0011"> FIG. 2 is a block diagram of an electronic data processing system consistent with FIG. 1. </p><p id="p0012" num="0012"> FIG. 3 is a flow chart of a first example of a method for controlling an electrical motor with variable speed control. </p><p id="p0013" num="0013"> FIG. 4 is a flow chart of a second example of a method for controlling an electrical motor with variable speed control. </p><p id="p0014" num="0014"> FIG. 5 is a flow chart of a third example of a method for controlling an electrical motor with variable speed control. </p><p id="p0015" num="0015"> FIG. 6 is a flow chart of a fourth example of a method for controlling an electrical motor with variable speed control. </p><p id="p0016" num="0016">Description of the Preferred Embodiment </p><p id="p0017" num="0017"> In accordance with one embodiment, FIG. 1 discloses system for controlling a motor 117 (e.g., an interior permanent magnet (IP ) motor) or another alternating current machine. The method and system described in this document can be equally applied to, interior permanent magnet motors, induction machines, or surfaced mounted permanent magnet (PM) machines with wide operating speeds. In one embodiment, the system, aside from the motor 117, may be referred to as an inverter or a motor controller. The system or inverter is well-suited for a widely varying operating speed of the motor shaft such that a balanced or optimum pulse width modulation frequency is selected for the inverter in one or more different speed ranges. </p><p id="p0018" num="0018"> The system comprises electronic modules, software modules, or both. In one embodiment, the motor controller comprises an electronic data processing system i 
<!-- EPO <DP n="4"/>-->
 120 to support storing, processing or execution of software instructions of one or more software modules. The electronic data processing system 120 is indicated by the dashed lines in FIG. 1 and is shown in greater detail in FIG. 2. </p><p id="p0019" num="0019"> The data processing system 120 is coupled to an inverter circuit 188. The inverter circuit 188 comprises a semiconductor drive circuit that drives or controls switching semiconductors (e.g., insulated gate bipolar transistors (IGBT) or other power transistors) to output control signals for the motor 117. In turn, the inverter circuit 188 is coupled to the motor 117. The motor 1 17 is associated with a sensor 115 (e.g., a position sensor, a resolver or encoder position sensor) that is associated with the motor shaft 126 or the rotor. The sensor 115 and the motor 117 are coupled to the data processing system 120 to provide feedback data (e.g., current feedback data, such as i<sub>a</sub>, ib, i<sub>c</sub>). raw position signals, among other possible feedback data or signals, for example. Other possible feedback data includes, but is not limited to, winding temperature readings, semiconductor temperature readings of the inverter circuit 188, three phase voltage data, or other thermal or performance information for the motor 117. </p><p id="p0020" num="0020"> In one embodiment, the torque command generation module 105 is coupled to a d-q axis current generation manager 109 (e.g., d-q axis current generation lookup tables). D-q axis current refers to the direct axis current and the quadrature axis current as applicable in the context of vector-controlled alternating current machines, such as the motor 117. The output of the d-q axis current generation manager 109 and the output of a current adjustment module 107 (e.g., d-q axis current adjustment module 107) are fed to a summer 119. In turn, one or more outputs (e.g., direct axis current data (i<sub>&lt;</sub>j<sup>*</sup>) and quadrature axis current data (i<sub>q</sub><sup>*</sup>)) of the summer 119 are provided or coupled to a current regulation controller 111. </p><p id="p0021" num="0021"> The current regulation controller 111 is capable of communicating with the pulse-width modulation (PWM) generation module 12 (e.g., space vector PW generation module). The current regulation controller 111 receives respective d-q axis current commands (e.g., i<sub>&lt;</sub>j<sup>*</sup> and i<sub>q</sub>*) and actual d-q axis currents (e.g., i<sub>&lt;</sub>j and i<sub>q</sub>) and outputs corresponding d-q axis voltage commands (e.g., v<sub>&lt;</sub>j<sup>*</sup> and v<sub>q</sub>* commands) for input to the PWM generation module 112. </p><p id="p0022" num="0022"> In one embodiment, the PWM generation module 112 converts the direct axis voltage and quadrature axis voltage data from two phase data representations into three phase representations (e.g., three phase voltage representations, such as v<sub>a</sub>\ 
<!-- EPO <DP n="5"/>-->
 v<sub>b</sub><sup>*</sup> and v<sub>c</sub><sup>*</sup>) for control of the motor 117, for example. Outputs of the PWM generation module 112 are coupled to the inverter 188. </p><p id="p0023" num="0023"> The inverter circuit 188 comprises power electronics, such as switching semiconductors to generate, modify and control pulse-width modulated signals or other alternating current signals (e.g., pulse, square wave, sinusoidal, or other waveforms) applied to the motor 117. The PWM generation module 1 12 provides inputs to a driver stage within the inverter circuit 188. An output stage of the inverter circuit 188 provides a pulse-width modulated signal, an alternating current signal, a pulse-width modulated voltage waveform, or other voltage signal for control of the motor. In one embodiment, the inverter 188 is powered by a direct current (DC) voltage bus. </p><p id="p0024" num="0024"> The motor 1 17 is associated with a sensor 115 (e.g., a resolver, encoder, speed sensor, or another position sensor or speed sensor) that estimates at least one of an angular position of the motor shaft 126, a speed or velocity of the motor shaft 126, and a direction of rotation of the motor shaft 126. The sensor 115 may be mounted on or integral with the motor shaft 126. The output of the sensor 115 is capable of communication with the primary processing module 1 14 (e.g., position and speed processing module). In one embodiment, the sensor 115 may be coupled to an analog-to-digital converter (not shown) that converts analog position data or velocity data to digital position or velocity data, respectively. In other embodiments, the sensor 115 (e.g., digital position encoder) may provide a digital data output of position data or velocity data for the motor shaft 126 or rotor. </p><p id="p0025" num="0025"> A first output (e.g., position data and speed data for the motor 1 17) of the primary processing module 114 is communicated to the phase converter 113 (e.g., three-phase to two-phase current Park transformation module) that converts respective three-phase digital representations of measured current into </p><p id="p0026" num="0026">corresponding two-phase digital representations of measured current. A second output (e.g., speed data) of the primary processing module 114 is communicated to the calculation module 110 (e.g., adjusted voltage over speed ratio module). </p><p id="p0027" num="0027"> An input of a sensing circuit 124 is coupled to terminals of the motor 117 for sensing at least the measured three-phase currents and a voltage level of the direct current (DC) bus (e.g., high voltage DC bus which may provide DC power to the inverter circuit 188). An output of the sensing circuit 124 is coupled to an analog-to- digital converter 122 for digitizing the output of the sensing circuit 124. In turn, the 
<!-- EPO <DP n="6"/>-->
 digital output of the analog-to-digital converter 122 is coupled to the secondary processing module 116 (e.g., Direct current (DC) bus and three phase current processing module). For example, the sensing circuit 124 is associated with the motor 117 for measuring three phase currents (e.g., current applied to the windings of the motor 117, back EMF induced into the windings, or both). </p><p id="p0028" num="0028"> Certain outputs of primary processing module 114 and the secondary processing module 116 feed the phase converter 113. For example, the phase converter 113 may apply a Park transformation or other conversion equations (e.g., certain conversion equations that are suitable are known to those of ordinary skill in the art) to convert the measured three-phase representations of current into two- phase representations of current based on the digital three-phase current data from the secondary processing module 116 and position data from the sensor 115. The output of the phase converter 113 module is coupled to the current regulation controller 111. </p><p id="p0029" num="0029"> Other outputs of the primary processing module 114 and the secondary processing module 116 may be coupled to inputs of the calculation module 110 (e.g., adjusted voltage over-speed ratio calculation module). For example, the primary processing module 114 may provide speed data (e.g., motor shaft 126 revolutions per minute), whereas the secondary processing module 116 may provide a measured level of direct current voltage (e.g., on the direct current (DC) bus of a vehicle). The direct current voltage level on the DC bus that supplies the inverter circuit 188 with electrical energy may fluctuate or vary because of various factors, including, but not limited to, ambient temperature, battery condition, battery charge state, battery resistance or reactance, fuel cell state (if applicable), motor load conditions, respective motor torque and corresponding operational speed, and vehicle electrical loads (e.g., electrically driven air-conditioning compressor). The calculation module 110 is connected as an intermediary between the secondary processing module 116 and the dq-axis current generation manager 109. The output of the calculation module 110 can adjust or impact current commands generated by the d-q axis current generation manager 109 to compensate for fluctuation or variation in direct current bus voltage, among other things. </p><p id="p0030" num="0030"> The rotor magnet temperature estimation module 104, the current shaping module 106, and the terminal voltage feedback module 108 are coupled to or are capable of communicating with the dq-axis current adjustment module 107. In turn, 
<!-- EPO <DP n="7"/>-->
 the d-q axis current module 107 may communicate with the dq-axis current generation manager or the summer 119. </p><p id="p0031" num="0031"> The rotor magnet temperature module 104 estimates or determines the temperature of the rotor permanent magnet or magnets. In one embodiment, the rotor magnet temperature estimation module 104 may estimate the temperature of the rotor magnets from internal control variables calculation, one or more sensors located on the stator, in thermal communication with the stator, or secured to the housing of the motor 117. </p><p id="p0032" num="0032"> In one alternate embodiment, the rotor magnet temperature estimation module 104 may be replaced by or may estimate the temperature of the rotor magnets from one or more sensors located on the stator, in thermal communication with the stator, or secured to the housing of the motor 117. </p><p id="p0033" num="0033"> In another alternative embodiment, the rotor magnet temperature estimation module 104 may be replaced with a temperature detector (e.g., a thermistor or infrared thermal sensor coupled to a wireless transmitter) mounted on the rotor or the magnet, where the detector provides a signal (e.g., wireless signal) indicative of the temperature of the magnet or magnets. </p><p id="p0034" num="0034"> In one embodiment, the method or system may operate in the following manner. The torque command generation module 105 receives an input control data message, such as a speed control data message, a voltage control data message, or a torque control data message, over a vehicle data bus 118. The torque command generation module 105 converts the received input control message into torque control command data 316. </p><p id="p0035" num="0035"> The d-q axis current generation manager 109 selects or determines the direct axis current command data and the quadrature axis current command data associated with respective torque control command data and respective detected motor shaft 126 speed data. For example, the d-q axis current generation manager 109 selects or determines the direct axis current command, the quadrature axis current command by accessing one or more of the following: (1) a look-up table, database or other data structure that relates respective torque commands to corresponding direct and quadrature axes currents, (2) a set of quadratic equations or linear equations that relate respective torque commands to corresponding direct and quadrature axes currents, or (3) a set of rules (e.g., if-then rules) that relates respective torque commands to corresponding direct and quadrature axes currents. 
<!-- EPO <DP n="8"/>-->
 The sensor 115 on the motor 117 facilitates provision of the detected speed data for the motor shaft 126, where the primary processing module 114 may convert position data provided by the sensor 115 into speed data. </p><p id="p0036" num="0036"> The current adjustment module 107 (e.g., d-q axis current adjustment module) provides current adjustment data to adjust the direct axis current command data and the quadrature axis current command data based on input data from the rotor magnet temperature estimation module 04, the current shaping module 106, and terminal voltage feedback module 108. </p><p id="p0037" num="0037"> The current shaping module 106 may determine a correction or preliminary adjustment of the quadrature axis (q-axis) current command and the direct axis (d- axis) current command based on one or more of the following factors: torque load on the motor 117 and speed of the motor 117, for example. The rotor magnet temperature estimation module 104 may generate a secondary adjustment of the q- axis current command and the d-axis current command based on an estimated change in rotor temperature or an estimated change in magnetic field strength of the rotor magnets with respect to a characterized rotor temperature or magnetic field strength at a known ambient temperature under known operational conditions, for example. The terminal voltage feedback module 108 may provide a third adjustment to the d-axis and q-axis current based on controller voltage command versus voltage limit. The current adjustment module 107 may provide an aggregate current adjustment that considers one or more of the following adjustments: a preliminary adjustment, a secondary adjustment, and a third adjustment. </p><p id="p0038" num="0038"> The sensor 115 (e.g., shaft or rotor speed detector) may comprise one or more of the following: a direct current motor, an optical encoder, a magnetic field sensor (e.g., Hall Effect sensor), magneto-resistive sensor, and a resolver (e.g., a brushless resolver). In one configuration, the sensor 115 comprises a position sensor, where position data and associated time data are processed to determine speed or velocity data for the motor shaft 126. In another configuration, the sensor 115 comprises a speed sensor, or the combination of a speed sensor and an integrator to determine the position of the motor shaft. </p><p id="p0039" num="0039"> In yet another configuration, the sensor 115 comprises an auxiliary, compact direct current generator that is coupled mechanically to the motor shaft 126 of the motor 117 to determine speed of the motor shaft 26, where the direct current generator produces an output voltage proportional to the rotational speed of the 
<!-- EPO <DP n="9"/>-->
 motor shaft 126. In still another configuration, the sensor 1 15 comprises an optical encoder with an optical source that transmits a signal toward a rotating object coupled to the shaft 126 and receives a reflected or diffracted signal at an optical detector, where the frequency of received signal pulses (e.g., square waves) may be proportional to a speed of the motor shaft 126. In an additional configuration, the sensor 115 comprises a resolver with a first winding and a second winding, where the first winding is fed with an alternating current, where the voltage induced in the second winding varies with the frequency of rotation of the rotor. </p><p id="p0040" num="0040"> In FIG. 2, the electronic data processing system 120 comprises an electronic data processor 264, a data bus 262, a data storage device 260, and one or more data ports (268, 270, 272, 274 and 276). The data processor 264, the data storage device 260 and one or more data ports are coupled to the data bus 262 to support communications of data between or among the data processor 264, the data storage device 260 and one or more data ports. </p><p id="p0041" num="0041"> In one embodiment, the data processor 264 may comprise one or more of the following electronic components', an electronic data processor, a microprocessor, a microcontroller, a programmable logic array, a field programmable gate array (FPGA), a logic circuit, an arithmetic logic unit, an application specific integrated circuit, a digital signal processor (DSP), a proportional-integral-derivative (PID) controller, or another data processing device. In one configuration, the above electronic components of the data processor 264 may be interconnected via one or more data buses, physical communication paths, or virtual communication paths. </p><p id="p0042" num="0042"> The data storage device 260 may comprise any magnetic, electronic, or optical device for storing data. For example, the data storage device 260 may comprise an electronic data storage device, an electronic memory, non-volatile electronic random access memory, one or more electronic data registers, data latches, a magnetic disc drive, a hard disc drive, an optical disc drive, or the like. </p><p id="p0043" num="0043"> As shown in FIG. 2, the data ports comprise a first data port 268, a second data port 270, a third data port 272, a fourth data port 274 and a fifth data port 276, although any suitable number of data ports may be used. Each data port may comprise a transceiver and buffer memory, for example. In one embodiment, each data port may comprise any serial or parallel input output port. </p><p id="p0044" num="0044"> In one embodiment as illustrated in FIG. 2, the first data port 268 is coupled to the vehicle data bus 118. In turn, the vehicle data bus 1 18 is coupled to the 
<!-- EPO <DP n="10"/>-->
 controller 266. In one configuration, the second data port 270 may be coupled to the inverter circuit 188; the third data port 272 may be coupled to the sensor 115; the fourth data port 274 may be coupled to the analog-to-digital converter 122; and the fifth data port 276 may be coupled to the terminal voltage feedback module 108. The analog-to-digital converter 122 is coupled to the sensing circuit 124. </p><p id="p0045" num="0045"> In one embodiment of the data processing system 120, the torque command generation module 105 is associated with or supported by the first data port 268 of the electronic data processing system 120. The first data port 268 may be coupled to a vehicle data bus 118, such as a controller area network (CAN) data bus. The vehicle data bus 1 18 may provide data bus messages with torque commands to the torque command generation module 105 via the first data port 268. The operator of a vehicle may generate the torque commands via a user interface, such as a throttle, a pedal, a controller 266, or other control device. </p><p id="p0046" num="0046"> In certain embodiments, the sensor 1 15 and the primary processing module 114 may be associated with or supported by a third data port 272 of the data processing system 120. </p><p id="p0047" num="0047"> FIG. 3 discloses a first illustrative example of a method for controlling a motor (e.g., 117) with variable speed control. The method of FIG. 3 begins in step S300. </p><p id="p0048" num="0048"> In step S300, a data processor 264 establishes a first range of rotational speeds of a rotor of the motor (e.g., 117) from a first lower limit to a first higher limit. </p><p id="p0049" num="0049"> In step S302, the data processor 264 establishes a second range of rotational speeds of the rotor from a second lower limit to a second higher limit. The second range of rotational speeds may be generally contiguous to the first range of rotational speeds. In an alternative embodiment, the second range of rotational speeds may overlap with the first range of rotational speeds, for example. </p><p id="p0050" num="0050"> In step S304, the data processor 264 establishes a hysteresis band or a rotational range of speeds such that during operation in the first range the first higher limit is adjusted or raised by a first amount to be greater than the second lower limit. Step S304 may be carried out in accordance with various techniques that may be applied alternately or cumulatively. Under a first technique, the data processor 264 establishes a hysteresis band or a rotational range of speeds such that during operation in the second range the second lower limit is lowered by a second amount to be less than the first higher limit. Under a second technique, the first amount is different than or less than the second amount. Under a third technique, the first 
<!-- EPO <DP n="11"/>-->
 amount is within a range of approximately fifty revolutions per minute to </p><p id="p0051" num="0051">approximately one-hundred and twenty revolutions per minute. </p><p id="p0052" num="0052"> In step S306, a sensor 115 detects or measures a rotational speed of a rotor of the motor (e.g., 1 17). For example, the sensor 1 5 may detect a measured rotational or angular position of the rotor from which the primary processing module 1 14 determines a rotational speed of the rotor. </p><p id="p0053" num="0053"> In step S308, the data processor 264 or the primary positioning module determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range. </p><p id="p0054" num="0054"> In step S310, the pulse width modulation generation module 1 2 or the data processor 264 varies a switching frequency of a pulse-width-modulation (PW ) signal in accordance with the selected speed range. Accordingly, the pulse width modulation generation module 1 12 and the inverter switching circuit 188 dynamically adjust the switching frequency or PWM frequency outputted to the motor (e.g., 1 17) in response to a material change in the motor (e.g., 1 17) shaft 126 speed. A material change in the motor shaft 126 speed occurs where the motor (e.g., 1 17) changes from one speed range or one stage to another stage (e.g., an adjacent higher or lower range). In practice, the PWM switching frequency may be changed from 4 KHz to 3 MHz, or over another suitable frequency spectrum, over a full operational speed range of a motor (e.g., 1 17), for example. </p><p id="p0055" num="0055"> Step S310 may be carried out in accordance with several techniques that may be applied separately or cumulatively. Under a first technique, the pulse width modulation generation module 112 or the data processor 264 varies the switching frequency consistent with a preferential switching frequency selected from a look-up table in accordance with the selected speed range and a previous speed range of the rotor, where the selected speed range is associated with a current speed intervaf and where the previous speed range is associated with a previous speed interval prior to the current speed interval. </p><p id="p0056" num="0056"> Under a second technique, the pulse width modulation generation module 1 12 or the data processor 264 selects the switching frequency for a corresponding selected speed range to optimize the following phase current imbalance factor or ratio in accordance with the following expression: 
<!-- EPO <DP n="12"/>-->

<img id="imgf000012_0001" he="11" wi="81" file="imgf000012_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="yes"/>
 </p><p id="p0057" num="0057">where i<sub>a</sub>_rms is root mean square current for phase a of measured three phase currents, i<sub>b</sub>_rms is root mean square current for phase a of measured three phase currents, and i<sub>c</sub>_fms is root mean square current for phase a of measured three phase currents. The above root mean square three phase currents may be available from the output of the secondary processing module 1 16 for example. The above phase current imbalance factor or a ratio can be optimized where it falls within a certain target range, or below a certain maximum ratio, for example. </p><p id="p0058" num="0058"> Under a third technique, the pulse width modulation generation module 12 or the data processor selects the switching frequency for a corresponding selected speed range to maintain a desired frequency ratio for the motor (e.g., 117) in accordance with the following equation: </p><p id="p0059" num="0059">, PWM switching freq </p><p id="p0060" num="0060">frequency ratio = —— -— </p><p id="p0061" num="0061"> electrical fiindamental freq where the PWM switching freq is the pulse width modulation frequency or the maximum pulse with modulation frequency provided by the pulse width modulation generation module 112 or the inverter switching circuit 188, and where the electrical fundamental freq is the electrical fundamental frequency of a particular motor (e.g., 117) or machine design, which may depend upon the number of pole pairs or the motor (e.g., 1 17) inductance. If the motor (e.g., 117) comprises an I PM motor, the frequency ratio may be selected to be between approximately 10 and approximately 12, for example. Alternatively, if the motor (e.g., 1 17) comprises an IPM motor (e.g., 117), the frequency ratio may be selected to be greater than 10 for lower motor (e.g., 117) speed ranges and lower than 12 for higher speed ranges. If the motor (e.g., 117) is a coreless permanent magnet machine or an axial flux pancake motor (e.g., 117), the frequency ratio may be greater than or equal to 15. </p><p id="p0062" num="0062"> Under a fourth technique, the data processor 264 or the pulse width modulation generation module 1 12 restricts the switching frequency from slot harmonic frequency defined as the product of a fundamental electrical frequency of 
<!-- EPO <DP n="13"/>-->
 the motor (e.g., 1 17) and the number of slots per pole pair of the motor (e.g., 117), where the fundamental electrical frequency is proportional to the rotational speed of the rotor. </p><p id="p0063" num="0063"> Under a fifth technique, the data processor 264 or the pulse width modulation generation module 112 selects a switching frequency for a corresponding selected speed range to further optimize current ripple component in accordance with a shaft torque ripple and an electric machine efficiency requirement. For example, the data processor 264 or the pulse width modulation generation module 112 selects a switching frequency for a corresponding selected speed range to optimize a current ripple component in accordance with a minimizing shaft torque ripple or limiting shaft torque ripple to a maximum limit (e.g., a percentage limit with respect to one or more operating torque and corresponding speeds of the motor), a maximum standard deviation from an average torque ripple, or otherwise. </p><p id="p0064" num="0064"> FIG. 4 discloses a second illustrative example of a method for controlling a motor (e.g., 117) with variable speed control. The method of FIG. 4 begins in step S300. </p><p id="p0065" num="0065"> In step S300, a data processor 264 establishes a first range of rotational speeds of a rotor of the motor (e.g., 1 17) from a first lower limit to a first higher limit. </p><p id="p0066" num="0066"> In step S302, the data processor 264 establishes a second range of rotational speeds of the rotor from a second lower limit to a second higher limit. </p><p id="p0067" num="0067"> In step S404, the data processor 264 establishes a hysteresis band or a rotational range of speeds such that during operation in the second range the second lower limit is adjusted or lowered by a second amount to be less than the first higher limit. In one embodiment, the data processor 264 sets or can set the first higher limit equal to the second lower limit, subject to adjustment by the hysteresis band in this step S404 or otherwise. </p><p id="p0068" num="0068"> In step S306, a sensor 1 15 detects or measures a rotational speed of a rotor of the motor (e.g., 17). For example, the sensor 115 may detect a measured rotational or angular position of the rotor from which the primary processing module 114 determines a rotational speed of the rotor. </p><p id="p0069" num="0069"> In step S308, the data processor 264 or the primary positioning module determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range. 
<!-- EPO <DP n="14"/>-->
 In step S310, the pulse width modulation generation module 1 12 or the data processor 264 varies a switching frequency of a pulse-width modulation signal in accordance with the selected speed range. Accordingly, the pulse width modulation generation module 112 and the inverter switching circuit 188 dynamically adjust the switching frequency or PWM frequency outputted to the motor (e.g., 117) in response to a material change in the motor (e.g., 117) shaft 126 speed. A material change in the motor shaft 126 speed occurs where the motor (e.g., 1 17) changes from one speed range or one stage to another stage (e.g., an adjacent higher or lower range). In practice, the PWM switching frequency may be changed from 4 KHz to 3 MHz, or over another suitable frequency spectrum, over a full operational speed range of a motor (e.g., 117), for example. </p><p id="p0070" num="0070"> Step S310 may be carried out in accordance with several techniques that may be applied separately or cumulatively. Under a first technique, the pulse width modulation generation module 112 or the data processor 264 varies the switching frequency consistent with a preferential switching frequency selected from a look-up table in accordance with the selected speed range and a previous speed range of the rotor, where the selected speed range is associated with a current speed interval and where the previous speed range is associated with a previous speed interval prior to the current speed interval. </p><p id="p0071" num="0071"> Under a second technique, the pulse width modulation generation module 1 12 or the data processor 264 selects the switching frequency for a corresponding selected speed range to optimize a phase current imbalance factor or ratio in accordance with the following expression: 
<img id="imgf000014_0001" he="13" wi="81" file="imgf000014_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0072" num="0072"> Where i<sub>a</sub>_rms is root mean square current for phase a of measured three phase currents, i _mis is root mean square current for phase a of measured three phase currents, and i<sub>c</sub>_rms is root mean square current for phase a of measured three phase currents. The above root mean square three phase currents may be available from the output of the secondary processing module 116 for example. The above phase current imbalance factor or a ratio can be optimized where it falls within a certain target range, or below a certain maximum ratio, for example. 
<!-- EPO <DP n="15"/>-->
 Under a third technique, the pulse width modulation generation module 112 or the data processor selects the switching frequency for a corresponding selected speed range to maintain a desired frequency ratio for the motor (e.g., 1 17) in accordance with the following equation: </p><p id="p0073" num="0073">, PWM switching freq </p><p id="p0074" num="0074">frequency ratio = —— -— </p><p id="p0075" num="0075"> electrical fundamental freq where the PWM switching freq is the pulse width modulation frequency or the maximum pulse with modulation frequency provided by the pulse width modulation generation module 1 12 or the inverter switching circuit 188, and where the electrical fundamental freq is the electrical fundamental frequency of a particular motor (e.g., 1 17) or machine design, which may depend upon the number of pole pairs or the motor (e.g., 1 7) inductance. If the motor (e.g., 117) comprises an IPM motor, the frequency ratio may be selected to be between approximately 10 and approximately 12, for example. Alternatively, if the motor (e.g., 1 17) comprises an IPM motor (e.g., 117), the frequency ratio may be selected to be greater than 10 for lower motor (e.g., 1 17) speed ranges and lower than 12 for higher speed ranges. If the motor (e.g., 117) is a coreless permanent magnet machine or an axial flux pancake motor (e.g., 117), the frequency ratio may be greater than or equal to 15. </p><p id="p0076" num="0076"> Under a fourth technique, the data processor 264 or the pulse width modulation generation module 1 12 restricts the switching frequency from slot harmonic frequency defined as the product of a fundamental electrical frequency of the motor (e.g., 1 17) and the number of slots per pole pair of the motor (e.g., 117), where the fundamental electrical frequency is proportional to the rotational speed of the rotor. </p><p id="p0077" num="0077"> FIG. 5 discloses a third illustrative example of a method for controlling a motor (e.g., 1 17) with variable speed control. The method of FIG. 5 begins in step S500. </p><p id="p0078" num="0078"> In step S500, a data processor 264 establishes a first speed range of rotational speeds of a rotor of the motor (e.g., 1 17) from a first lower limit to a first higher limit. </p><p id="p0079" num="0079"> In step S502, the data processor 264 establishes a second speed range of rotational speeds of the rotor from a second lower limit to a second higher limit. 
<!-- EPO <DP n="16"/>-->
 In step S504. the data processor 264 establishes or constructs a third speed range through an Nth speed range for the motor (e.g., 117) based on full speed range of the motor (e.g., 1 17) operation, where N is a positive integer greater than or equal to four and where each respective speed range has a lower limit and a higher limit. In one configuration, the full speed range of the motor (e.g., 117) operation ranges from approximately zero revolutions per minute to greater than or equal to 4,000 revolutions per minute. </p><p id="p0080" num="0080"> In one illustrative example, where N is equal to six, the following pairs of respective speed stages (or nominal speed ranges) and corresponding speed ranges apply: </p><p id="p0081" num="0081">Speed stage 0 corresponds to a first nominal speed range 0 rpm - lOOOrpm; </p><p id="p0082" num="0082">Speed stage 1 corresponds to a second nominal speed range 1000rpm - 2000rpm; Speed stage 2 corresponds to third nominal speed range 2000rpm - 3000rpm; </p><p id="p0083" num="0083">Speed stage 3 corresponds to fourth nominal speed range 3000rpm - 4000rpm; Speed stage 4 corresponds to fifth nominal speed range 4000rpm - 5000rpm; and Speed stage 5 corresponds to sixth nominal speed range 5000rpm - 6000rpm, where rpm means revolutions of the motor (e.g., 1 17) shaft 126 per minute. </p><p id="p0084" num="0084"> In step S506, the data processor 264 establishes a respective hysteresis band or a rotational range of speeds for each corresponding speed range, such that one or more of the above limits are adjusted based on the current speed range of operation of the motor (e.g., 117). Step S506 may be executed in accordance with various procedures that may be applied alternately or cumulatively. Under a first procedure, hysteresis speed band is set at the boundary of two adjacent speed intervals such that the first upper limit of the first range is higher than a second lower limit of the second range to avoid jitter or abrupt discontinuities in a change between selected switching frequencies during a series of successive intervals. </p><p id="p0085" num="0085"> Under a second procedure, the data processor 264 accesses an upper limit and a lower limit for a previous step selected speed range. The data processor 264 may determine a current speed range based on the current measured speed, where the accessed upper limit added by the hysteresis band and the accessed lower limit subtracted by the hysteresis band. </p><p id="p0086" num="0086"> Under a third procedure, at each boundary between adjacent speed stages (e.g., Stage 0 through Stage 5, inclusive) or adjacent speed ranges, the data 
<!-- EPO <DP n="17"/>-->
 processor 264 establishes or defines a fixed hysteresis speed band (e.g., 100rpm) that can adjust the boundaries of the above speed range or speed stage. For each hysteresis speed band, the values or amounts may be different or the same for low end point of a higher speed range and a high end point of a lower speed range. Although the above speed ranges are used, any suitable speed range boundaries or number of ranges can be used that are consistent with the machine application. </p><p id="p0087" num="0087"> During operation of the motor (e.g., 117), in one illustrative example, if the stage number in previous control iteration has been determined to be Stage 3, then the controller looks for its corresponding nominal low end and high end points of Stage 3 - 3000rpm and 4000rpm. Then, in the current control iteration, if the hysteresis amount is 100 rpm, the low end point is calculated as 3000 - 100 = 2900rpm and the high end point is calculated 4000 + 100 = 4100 rpm. The nominal end points, 3000rpm and 4000rpm, for stage 3, are modified or adjusted by the hysteresis band to determine newly calculated end points, 2900rpm and 4100rpm, for stage 3, for example. </p><p id="p0088" num="0088"> In step S508, the data processor 264 applies the respective hysteresis band to each transition between adjacent speed ranges of the motor (e.g., 117) within the N speed ranges. Step S508 may be explained with reference to the above example, where the motor (e.g., 1 17) and data processing system are operating in Stage 3. If the detected speed in current control iteration is between 2900rpm and 4100rpm, then the Stage number is 3 in current control iteration with consideration of the 100 rpm adjustment from the application for the hysteresis band to the nominal end points (e.g., 3000 rpm to 4,000 rpm) of the speed range of Stage 3. However, if the detected speed in current control iteration is below 2900pm, then the stage number becomes Stage 2 in current control iteration. If the detected speed in current control iteration is above 4100rpm, then the stage number becomes Stage 4 in current control iteration. </p><p id="p0089" num="0089"> In step S510, the sensor 115 detects or measures a rotational speed of the rotor of the motor (e.g., 117). </p><p id="p0090" num="0090"> In step S512, the data processor 264 determines whether the measured rotational speed falls within the first range or the second range, or another speed range, as adjusted by the hysteresis band, to identify a selected speed range. In one embodiment, if the measured speed of the motor (e.g., 117) shaft 126 is greater than an upper speed limit (adjusted for the hysteresis band) corresponding to a 
<!-- EPO <DP n="18"/>-->
 previous operational stage number, then the current operational stage number is the previous operational stage number plus one. However, if the measured speed of the motor (e.g., 117) shaft 126 is less than the lower speed limit (as adjusted by the hysteresis band) corresponding to the previous operational stage, then the current operational stage number is the previous stage number minus one. If the measured speed is within the above two boundaries (e.g., upper speed limit and the lower speed limit), as adjusted by hysteresis, for a current operational stage, then the current operational stage number is the same as the previous operational stage number. </p><p id="p0091" num="0091"> In step S514, the data processor 264 varies a switching frequency of the pulse-width modulation signal in accordance with the selected speed range. For example, based on the determined stage number in every control iteration, proper PWM switching frequency as well current regulation loop PI gains are selected for that particular stage. </p><p id="p0092" num="0092"> FIG. 6 discloses a first illustrative example of a method for controlling a motor (e.g., 17) with variable speed control. The method of FIG. 6 begins in step S300. </p><p id="p0093" num="0093"> In step S300, a data processor 264 establishes a first range of rotational speeds of a rotor of the motor (e.g., 117) from a first lower limit to a first higher limit. </p><p id="p0094" num="0094"> In step S302, the data processor 264 establishes a second range of rotational speeds of the rotor from a second lower limit to a second higher limit. </p><p id="p0095" num="0095"> In step S304, the data processor 264 establishes a hysteresis band or a rotational range of speeds such that during operation in the first range the first higher limit is adjusted or raised by a first amount to be greater than the second lower limit. </p><p id="p0096" num="0096"> In step S306, a sensor 115 detects or measures a rotational speed of a rotor of the motor (e.g., 117). For example, the sensor 115 may detect a measured rotational or angular position of the rotor from which the primary processing module 114 determines a rotational speed of the rotor. </p><p id="p0097" num="0097"> In step S308, the data processor 264 or the primary positioning module determines whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range. </p><p id="p0098" num="0098"> In step S310, the pulse width modulation generation module 1 12 or the data processor 264 varies a switching frequency of a pulse-width modulation signal in accordance with the selected speed range. Accordingly, the pulse width modulation 
<!-- EPO <DP n="19"/>-->
 generation module 112 and the inverter switching circuit 188 dynamically adjust the switching frequency or PWM frequency outputted to the motor (e.g., 117) in response to a material change in the motor (e.g., 117) shaft 126 speed. A material change in the motor shaft 126 speed occurs where the motor (e.g., 117) changes from one speed range or one stage to another stage (e.g., an adjacent higher or lower range). In practice, the PWM switching frequency may be changed from 4 KHz to 3 MHz, or over another suitable frequency spectrum, over a full operational speed range of a motor (e.g., 17), for example. </p><p id="p0099" num="0099"> Step S310 may be carried out in accordance with several techniques that may be applied separately or cumulatively. Under a first technique, the pulse width modulation generation module 112 or the data processor 264 varies the switching frequency consistent with a preferential switching frequency selected from a look-up table in accordance with the selected speed range and a previous speed range of the rotor, where the selected speed range is associated with a current speed interval and where the previous speed range is associated with a previous speed interval prior to the current speed interval. </p><p id="p0100" num="0100"> Under a second technique, the pulse width modulation generation module 112 or the data processor 264 selects the switching frequency for a corresponding selected speed range to optimize a phase current imbalance factor or ratio in accordance with the following expression: </p><p id="p0101" num="0101"> absQt ^ -i^ ^), abs{i<sub>e n i</sub> -i<sub>0</sub>_<sub>ml</sub> )) </p><p id="p0102" num="0102">Where i<sub>a</sub>_rms is root mean square current for phase a of measured three phase currents, i<sub>b</sub>_rm<sub>S</sub> is root mean square current for phase a of measured three phase currents, and i<sub>c</sub>_rms is root mean square current for phase a of measured three phase currents. The above root mea<sup>"</sup>n square three phase currents may be available from the output of the secondary processing module 1 6 for example. The above phase current imbalance factor or a ratio can be optimized where it falls within a certain target range, or below a certain maximum ratio, for example. </p><p id="p0103" num="0103"> Under a third technique, the pulse width modulation generation module 112 or the data processor selects the switching frequency for a corresponding selected speed range to maintain a desired frequency ratio for the motor (e.g., 117) in accordance with the following equation: 
<!-- EPO <DP n="20"/>-->
 PWM switching freq </p><p id="p0104" num="0104">frequency ratio - electrical fundamental freq where the PWM switching freq is the pulse width modulation frequency or the maximum pulse with modulation frequency provided by the pulse width modulation generation module 112 or the inverter switching circuit 188, and where the electrical fundamental freq is the electrical fundamental frequency of a particular motor (e.g., 117) or machine design, which may depend upon the number of pole pairs or the motor (e.g., 117) inductance. If the motor (e.g., 117) comprises an IP motor (e.g., 117), the frequency ratio may be selected to be between approximately 10 and approximately 12, for example. Alternatively, if the motor (e.g., 1 17) comprises an IPM motor (e.g., 1 17), the frequency ratio may be selected to be greater than 10 for lower motor (e.g., 117) speed ranges and lower than 12 for higher speed ranges. If the motor (e.g., 117) is a coreless permanent magnet machine or an axial flux pancake motor (e.g., 117), the frequency ratio may be greater than or equal to 15. </p><p id="p0105" num="0105"> Under a fourth technique, the data processor 264 or the pulse width modulation generation module 1 12 restricts the switching frequency from slot harmonic frequency defined as the product of a fundamental electrical frequency of the motor (e.g., 117) and the number of slots per pole pair of the motor (e.g., 117), where the fundamental electrical frequency is proportional to the rotational speed of the rotor. </p><p id="p0106" num="0106"> In step S321 , the pulse width modulation generation module 1 12, the current regulation controller 1 11 , or the data processor 264 varies a current regulation proportional integral gain for control of the motor (e.g., 1 17) in accordance with the selected speed range. </p><p id="p0107" num="0107"> The method and system disclosed herein is well suited for controlling motors with suitable peak or maximum frequencies for pulse width modulation switching frequencies that reduces inverter switching losses, avoids reduction in inverter life from thermal impact, and reduces or manages the data processing burden of the data processor 264 or digital signal processor within the inverter. Thus, the method and system for controlling an electric motor with speed control facilitates selection of a balanced or optimum pulse width modulation frequency for the inverter. By 
<!-- EPO <DP n="21"/>-->
 adjusting the switching frequency of the motor through the motor shaft speed range, the inverter switching losses can be decreased, while maintaining efficiency at lower speed ranges. Further, the inverter of the method and system disclosed herein can provide generally high current levels over a broad range of motor shaft speeds than otherwise possible for a fixed switching frequency of the inverter. </p><p id="p0108" num="0108"> Having described the preferred embodiment, it will become apparent that various modifications can be made without departing from the scope of the invention as defined in the accompanying claims. 
</p></description><claims mxw-id="PCLM45131974" ref-ucid="WO-2012125257-A2" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="22"/>-->The following is claimed: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A method for controlling a motor, the method comprising: </claim-text><claim-text> establishing a first range of rotational speeds of a rotor of the motor from a first lower limit to a first higher limit; </claim-text><claim-text> establishing a second range of rotational speeds of the rotor from a second lower limit to a second higher limit; </claim-text><claim-text> establishing a hysteresis band or a rotational range of speeds such that during operation in the first range the first higher limit is adjusted or raised by a first amount to be greater than the second lower limit; </claim-text><claim-text> detecting or measuring a rotational speed of a rotor of the motor; </claim-text><claim-text> determining whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range; and </claim-text><claim-text> varying a switching frequency of a pulse-width modulation signal in accordance with the selected speed range. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method according to claim 1 further comprising: </claim-text><claim-text> establishing a hysteresis band or a rotational range of speeds such that during operation in the second range the second lower limit is lowered by a second amount to be less than the first higher limit. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method according to claim 2 wherein the first amount is different than or less than the second amount. <!-- EPO <DP n="23"/>--> </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method according to claim 1 wherein the first amount is within a range of approximately fifty revolutions per minute to approximately one-hundred and twenty revolutions per minute. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method according to claim 1 further comprising: </claim-text><claim-text> setting the first higher limit equal to the second lower limit, subject to adjustment by the hysteresis band. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method according to claim 1 further comprising: </claim-text><claim-text> constructing a third speed range through Nth speed range for the motor based on full speed range of the motor operation, where N is an positive integer greater than or equal to four; and </claim-text><claim-text> applying one or more hysteresis bands to each transition between adjacent speed ranges of the motor within the N speed ranges. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The method according to claim 6 wherein the full speed range of the motor operation ranges from approximately zero revolutions per minute to greater than or equal to 4,000 revolutions per minute. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The method according to claim 1 wherein the varying of the switching frequency comprises varying the switching frequency consistent with a preferential switching frequency selected from a look-up table in accordance with the selected speed range and a previous speed range of the rotor, where the selected speed range is associated with a current speed interval and where the previous speed range is associated with a previous speed interval prior to the current speed interval. <!-- EPO <DP n="24"/>--> </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The method according to claim 1 wherein the switching frequency for a corresponding selected speed range is selected to optimize a phase current imbalance factor or ratio in accordance with the following expression: </claim-text><claim-text> <img id="imgf000024_0001" he="12" wi="83" file="imgf000024_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/> </claim-text><claim-text>where i<sub>8 rms</sub> is root mean square current for phase a of measured three phase currents, i<sub>b</sub>_m,<sub>s</sub> is root mean square current for phase b of measured three phase currents, and i<sub>c</sub>_ims is root mean square current for phase c of measured three phase currents. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The system according to claim 1 wherein the switching frequency for a corresponding selected speed range is selected to further optimize current ripple component in accordance with a shaft torque ripple and an electric machine efficiency requirement. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The method according to claim 1 wherein the switching frequency for a corresponding selected speed range is selected to maintain a desired frequency ratio for the motor in accordance with the following equation: </claim-text><claim-text> , , PWM switching freq </claim-text><claim-text>frequency ratio = —— </claim-text><claim-text> electrical fundamental freq </claim-text><claim-text>where the PWM switching freq is the pulse width modulation frequency, and where the electrical fundamental freq is the electrical fundamental frequency of the motor. <!-- EPO <DP n="25"/>--> </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The method according to claim 1 wherein the switching frequency is restricted from slot harmonic frequency defined as the product of a fundamental electrical frequency of the motor and the number of slots per pole pair of the motor, where the fundamental electrical frequency is proportional to the rotational speed of the rotor. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The method according to claim 1 wherein a hysteresis speed band is set at the boundary of two adjacent speed intervals such that the first upper limit of the first range is higher than a second lower limit of the second range to avoid jitter or abrupt discontinuities in a change between selected switching frequencies during a series of successive intervals. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method according to claim 1 further comprising: </claim-text><claim-text> accessing an upper limit and a lower limit for a previous step selected speed range; </claim-text><claim-text> determining a current speed range based on the current measured speed, the accessed upper limit added by the hysteresis band and the accessed lower limit subtracted by the hysteresis band. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method according to claim 1 further comprising: </claim-text><claim-text> varying a current regulation proportional and integral gains in accordance with the selected speed range. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. A system for controlling a motor, the system comprising: </claim-text><claim-text> a data storage device for storing a first range of rotational speeds of a rotor of the motor from a first lower limit to a first higher limit, the data storage device <!-- EPO <DP n="26"/>--> arranged to store a second range of rotational speeds of the rotor from a second lower limit to a second higher limit; </claim-text><claim-text> a data processor for establishing a hysteresis band or a rotational range of speeds such that during operation in the first range the first higher limit is adjusted or raised by a first amount to be greater than the second lower limit; </claim-text><claim-text> a sensor for detecting or measuring a rotational speed of a rotor of the motor; the data processor adapted to determine whether the measured rotational speed falls within the first range or the second range, as adjusted by the hysteresis band, to identify a selected speed range; and </claim-text><claim-text> a pulse width modulation generation module for varying a switching frequency of a pulse-width modulation signal in accordance with the selected speed range. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The system according to claim 16 further comprising: </claim-text><claim-text> the data processor configuring or controlling the hysteresis band or a rotational range of speeds such that during operation in the second range the second lower limit is lowered by a second amount to be less than the first higher limit. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The system according to claim 16 wherein the first amount is less than the second amount. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The system according to claim 16 wherein the switching frequency for a corresponding selected speed range is selected to optimize a phase current imbalance factor in accordance with the following equation: <!-- EPO <DP n="27"/>--> max(a&amp;<sup>f</sup>(i _,.r¾-«- -<sup>afa</sup>!¾ -'._„)) </claim-text><claim-text> ' min<sup>(</sup>'._,_,..4_.» .',_»J where i<sub>a</sub>_rms is root mean square current for phase a of measured three phase currents, it&gt;_rms is root mean square current for phase b of measured three phase currents, and \<sub>c ms</sub> is root mean square current for phase c of measured three phase currents. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The system according to claim 16 wherein the switching frequency for a corresponding selected speed range is selected to further optimize current ripple component in accordance with a shaft torque ripple and an electric machine efficiency requirement. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The system according to claim 16 wherein the switching frequency for a corresponding selected speed range is selected to maintain a desired frequency ratio for the motor in accordance with the following equation: </claim-text><claim-text> PWM switching freq </claim-text><claim-text>frequency ratio - electrical fundamental freq where the PWM switching freq is the pulse width modulation frequency, and where the electrical fundamental freq is the electrical fundamental frequency of the motor. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The system according to claim 16 wherein the switching frequency is restricted from slot harmonic frequency defined as the product of a fundamental electrical frequency of the motor and the number of slots per pole pair of the motor, where the fundamental electrical frequency is proportional to the rotational speed of the rotor. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
