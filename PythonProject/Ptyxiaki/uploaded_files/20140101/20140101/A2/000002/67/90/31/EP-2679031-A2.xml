<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679031-A2" country="EP" doc-number="2679031" kind="A2" date="20140101" family-id="46022620" file-reference-id="269055" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146551038" ucid="EP-2679031-A2"><document-id><country>EP</country><doc-number>2679031</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12717913-A" is-representative="NO"><document-id mxw-id="PAPP154824961" load-source="docdb" format="epo"><country>EP</country><doc-number>12717913</doc-number><kind>A</kind><date>20120224</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220438288" load-source="docdb" format="original"><country>EP</country><doc-number>12717913.3</doc-number><date>20120224</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140445352" ucid="US-201161446343-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161446343</doc-number><kind>P</kind><date>20110224</date></document-id></priority-claim><priority-claim mxw-id="PPC140449682" ucid="US-2012026435-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026435</doc-number><kind>W</kind><date>20120224</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988129593" load-source="docdb">H04W   8/08        20090101AFI20120913BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1806540599" load-source="docdb" scheme="CPC">H04W  80/04        20130101 LA20170531BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1806540600" load-source="docdb" scheme="CPC">H04W  28/08        20130101 LA20170531BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1806540601" load-source="docdb" scheme="CPC">H04W   8/26        20130101 LA20170531BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1806540602" load-source="docdb" scheme="CPC">H04W   8/082       20130101 LI20170531BHEP        </classification-cpc><classification-cpc mxw-id="PCL2104296968" load-source="docdb" scheme="CPC">H04W  36/22        20130101 FI20140807BHEP        </classification-cpc><classification-cpc mxw-id="PCL2104298218" load-source="docdb" scheme="CPC">H04W  84/12        20130101 LI20140807BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132185598" lang="DE" load-source="patent-office">STABILES LOKALES ANSCHLUSSKONZEPT UND VERWENDUNG</invention-title><invention-title mxw-id="PT132185599" lang="EN" load-source="patent-office">STABLE LOCAL BREAKOUT CONCEPT AND USAGE</invention-title><invention-title mxw-id="PT132185600" lang="FR" load-source="patent-office">CONCEPT ET UTILISATION DE CONNEXION LOCALE STABLE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918161243" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>INTERDIGITAL PATENT HOLDINGS</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918153777" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>INTERDIGITAL PATENT HOLDINGS, INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918982856" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Interdigital Patent Holdings, Inc.</last-name><iid>101364034</iid><address><street>200 Bellevue Parkway Suite 300</street><city>Wilmington, DE 19809</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918148687" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>PERRAS MICHELLE</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918133752" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>PERRAS, MICHELLE</last-name></addressbook></inventor><inventor mxw-id="PPAR918992422" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>PERRAS, MICHELLE</last-name><address><street>4434 Christphe-Colomb</street><city>Montreal Quebec H2J 3G5</city><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918167514" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>REZNIK ALEXANDER</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918160252" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>REZNIK, ALEXANDER</last-name></addressbook></inventor><inventor mxw-id="PPAR918988492" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>REZNIK, ALEXANDER</last-name><address><street>1212 River Road</street><city>Titusville NJ 08560</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918136826" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>LIVET CATHERINE</last-name><address><country>CA</country></address></addressbook></inventor><inventor mxw-id="PPAR918171186" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>LIVET, CATHERINE</last-name></addressbook></inventor><inventor mxw-id="PPAR918982044" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>LIVET, CATHERINE</last-name><address><street>5023 Rue De Brebeuf</street><city>Montreal Quebec H2J 3L6</city><country>CA</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918986850" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Forsblom, Mattias Henrik</last-name><iid>101282429</iid><address><street>Awapatent AB P.O. Box 45086</street><city>104 30 Stockholm</city><country>SE</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026435-W"><document-id><country>US</country><doc-number>2012026435</doc-number><kind>W</kind><date>20120224</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012116252-A2"><document-id><country>WO</country><doc-number>2012116252</doc-number><kind>A2</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548909891" load-source="docdb">AL</country><country mxw-id="DS548863723" load-source="docdb">AT</country><country mxw-id="DS548909892" load-source="docdb">BE</country><country mxw-id="DS548931745" load-source="docdb">BG</country><country mxw-id="DS548921237" load-source="docdb">CH</country><country mxw-id="DS548923067" load-source="docdb">CY</country><country mxw-id="DS548863724" load-source="docdb">CZ</country><country mxw-id="DS548814795" load-source="docdb">DE</country><country mxw-id="DS548909893" load-source="docdb">DK</country><country mxw-id="DS548923068" load-source="docdb">EE</country><country mxw-id="DS548835494" load-source="docdb">ES</country><country mxw-id="DS548931746" load-source="docdb">FI</country><country mxw-id="DS548931747" load-source="docdb">FR</country><country mxw-id="DS548814796" load-source="docdb">GB</country><country mxw-id="DS548909962" load-source="docdb">GR</country><country mxw-id="DS548909963" load-source="docdb">HR</country><country mxw-id="DS548923069" load-source="docdb">HU</country><country mxw-id="DS548921314" load-source="docdb">IE</country><country mxw-id="DS548909964" load-source="docdb">IS</country><country mxw-id="DS548931748" load-source="docdb">IT</country><country mxw-id="DS548923070" load-source="docdb">LI</country><country mxw-id="DS548814797" load-source="docdb">LT</country><country mxw-id="DS548863725" load-source="docdb">LU</country><country mxw-id="DS548814798" load-source="docdb">LV</country><country mxw-id="DS548814799" load-source="docdb">MC</country><country mxw-id="DS548924877" load-source="docdb">MK</country><country mxw-id="DS548924878" load-source="docdb">MT</country><country mxw-id="DS548863726" load-source="docdb">NL</country><country mxw-id="DS548909965" load-source="docdb">NO</country><country mxw-id="DS548863727" load-source="docdb">PL</country><country mxw-id="DS548909966" load-source="docdb">PT</country><country mxw-id="DS548863728" load-source="docdb">RO</country><country mxw-id="DS548909967" load-source="docdb">RS</country><country mxw-id="DS548863729" load-source="docdb">SE</country><country mxw-id="DS548814800" load-source="docdb">SI</country><country mxw-id="DS548923071" load-source="docdb">SK</country><country mxw-id="DS548923072" load-source="docdb">SM</country><country mxw-id="DS548924879" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99619418" ref-ucid="WO-2012116252-A2" lang="EN" load-source="patent-office"><p num="0000">Systems and methods are provided for routing internet protocol (IP) traffic flows when connected to a mobile network and a local network. A wireless transmit and receive unit (WTRU) determines whether to offload an IP traffic flow from the mobile network to the local network based on the destination address of the IP traffic flow. When the destination address is local, the WTRU routes the IP traffic flow through local network. The WTRU determines whether to offload IP traffic to the local network based on the stability state of the local network When the local network connection is sufficiently stable for the application associated with the IP traffic, the IP traffic is offloaded to the local network by selecting the local IP address as the source IP address.</p></abstract><abstract mxw-id="PA99819099" ref-ucid="WO-2012116252-A2" lang="EN" source="national office" load-source="docdb"><p>Systems and methods are provided for routing internet protocol (IP) traffic flows when connected to a mobile network and a local network. A wireless transmit and receive unit (WTRU) determines whether to offload an IP traffic flow from the mobile network to the local network based on the destination address of the IP traffic flow. When the destination address is local, the WTRU routes the IP traffic flow through local network. The WTRU determines whether to offload IP traffic to the local network based on the stability state of the local network When the local network connection is sufficiently stable for the application associated with the IP traffic, the IP traffic is offloaded to the local network by selecting the local IP address as the source IP address.</p></abstract><abstract mxw-id="PA99619419" ref-ucid="WO-2012116252-A2" lang="FR" load-source="patent-office"><p num="0000">L'invention concerne des systèmes et des procédés visant à acheminer des flux de trafic de protocole Internet (IP) lorsque ces systèmes sont connectés à un réseau mobile et à un réseau local. Un émetteur-récepteur sans fil détermine s'il est nécessaire de décharger un flux de trafic IP du réseau mobile sur le réseau local en fonction de l'adresse de destination du flux de trafic IP. Lorsque l'adresse de destination est locale, l'émetteur-récepteur sans fil achemine le flux de trafic IP par le réseau local. L'émetteur-récepteur sans fil détermine s'il est nécessaire de décharger le trafic IP sur le réseau local en fonction de l'état de stabilité de celui-ci. Lorsque la connexion du réseau local est suffisamment stable pour l'application associée au trafic IP, le trafic IP est déchargé sur le réseau local en sélectionnant l'adresse IP locale comme adresse IP source.</p></abstract><abstract mxw-id="PA99819100" ref-ucid="WO-2012116252-A2" lang="FR" source="national office" load-source="docdb"><p>L'invention concerne des systèmes et des procédés visant à acheminer des flux de trafic de protocole Internet (IP) lorsque ces systèmes sont connectés à un réseau mobile et à un réseau local. Un émetteur-récepteur sans fil détermine s'il est nécessaire de décharger un flux de trafic IP du réseau mobile sur le réseau local en fonction de l'adresse de destination du flux de trafic IP. Lorsque l'adresse de destination est locale, l'émetteur-récepteur sans fil achemine le flux de trafic IP par le réseau local. L'émetteur-récepteur sans fil détermine s'il est nécessaire de décharger le trafic IP sur le réseau local en fonction de l'état de stabilité de celui-ci. Lorsque la connexion du réseau local est suffisamment stable pour l'application associée au trafic IP, le trafic IP est déchargé sur le réseau local en sélectionnant l'adresse IP locale comme adresse IP source.</p></abstract><description mxw-id="PDES50930253" ref-ucid="WO-2012116252-A2" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> STABLE LOCAL BREAKOUT CONCEPT AND USAGE </p><p id="p0002" num="0002">CROSS-REFERENCE TO RELATED APPLICATIONS </p><p id="p0003" num="0003"> [0001] This application claims the benefit of U.S. Provisional Application No. </p><p id="p0004" num="0004">61/446,343, filed Feb 24, 2011, which is hereby incorporated by reference herein. </p><p id="p0005" num="0005">BACKGROUND </p><p id="p0006" num="0006"> [0002] A mobile device may simultaneously connect to a cellular network and a wireless local network (WLAN) and exchange IP flows belonging to the same Public Data Networks (PDN) connection through different accesses. The operator may indicate how the IP flows may be routed through the available access systems, and may selectively offload some traffic to WLAN while using UTRAN or E-UTRAN for other traffic. This may be referred to as WLAN offload. </p><p id="p0007" num="0007"> [0003] WLAN offload may be seamless or non-seamless. When WLAN offload is seamless, IP traffic flows belonging to the same or different applications may be moved seamlessly between a 3rd Generation Partnership Project (3GPP) access and WLAN. When WLAN offload is non-seamless, the local IP address changes each time the mobile device changes its location and connects to a different access point. The data session may need to be reestablished, and the correspondent node may need to learn the new local IP address for the data exchange to resume. </p><p id="p0008" num="0008"> [0004] Currently, certain services such as mobility services may require or prefer to use seamless WLAN offload. Mobility services may include, but not be limited to, voice over IP (VoIP), inter-technology handover (HO), IP flow mobility (IFOM), and/or bandwidth aggregation (BWA). Applications such as VoIP application and video streaming application may require mobility services. While it may be less costly and faster for the mobile device to use the local connection than using mobile network connections, mobility demanding applications may be forced to use mobile network connections even when the mobile device is substantially stationary. </p><p id="p0009" num="0009">SUMMARY </p><p id="p0010" num="0010"> [0005] Systems and methods for routing internet protocol (IP) traffic flows when connected to a mobile network and a local network stable local breakout are disclosed. </p><p id="p0011" num="0011">According to an aspect, a method includes a wireless transmit and receive unit (WTRU) 
<!-- EPO <DP n="3"/>-->
 determining whether to offload the IP traffic flow from the mobile network to the local network based on the destination address of the IP traffic flow. According to an aspect, a method includes offloading the IP traffic flow to the local network when the local network connection is sufficiently stable. </p><p id="p0012" num="0012"> [0006] In an embodiment, the destination address of the IP traffic flow may be identified. Whether to offload the IP traffic flow from the mobile network to the local network may be determined based on the destination address. For example, a filter rule may indicate that traffic shall be non-seamlessly offloaded to the local network when the destination address is local. When the destination address is local, for example, the WTRU is to communicate to a correspondence node in the same local network, the IP flows may be routed through the local access point. A local IP address allocated by the local network may be acquired and used for sending the IP traffic flow. For example, when the destination address is not part of the local network, the IP traffic flow may be routed through the mobile network. </p><p id="p0013" num="0013"> [0007] In an embodiment, whether to offload an IP traffic flow to the local network may be determined based on the stability state of the local network. For example, the stability of the local connection may be determined based on whether the local network connection is expected to be available to the WTRU for a predetermined period of time. The stability state may be preconfigured or input by the user or the network operator. The stability state may be heuristically identified. When the stability state of the local network connection meets the stability requirement associated with the IP traffic flow, the IP traffic flow may offloaded to the local network by selecting the local IP address as source IP address. </p><p id="p0014" num="0014"> [0008] The local network connection may serve as a local breakout connection. When a local breakout connection is in a stable state, mobility services and applications may be directed to use the local breakout connection. Mobility services and applications that may require seamless WLAN offload and would normally use a mobile connection may use the local breakout connection. A source IP address may be selected when local breakout connection(s) are to be used. </p><p id="p0015" num="0015"> [0009] The Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter, not is it intended to be used to limit the scope of the claimed subject matter. Furthermore, the claimed subject matter is not limited to any limitations that solve any or all disadvantages noted in any part of this disclosure. 
<!-- EPO <DP n="4"/>-->
 BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0016" num="0016"> [0010] A more detailed understanding may be had from the following description, given by way of example in conjunction with the accompanying drawings. </p><p id="p0017" num="0017"> [0011] FIG. 1A is a system diagram of an example communications system in which one or more disclosed embodiments may be implemented. </p><p id="p0018" num="0018"> [0012] FIG. IB is a system diagram of an example WTRU that may be used within the communications system illustrated in FIG. 1A. </p><p id="p0019" num="0019"> [0013] FIG. 1C is a system diagram of an example radio access network and an example core network that may be used within the communications system illustrated in FIG. 1A. </p><p id="p0020" num="0020"> [0014] FIG. ID is a system diagram of an example radio access network and an example core network that may be used within the communications system illustrated in FIG. 1A. </p><p id="p0021" num="0021"> [0015] FIG. IE is a system diagram of an example radio access network and an example core network that may be used within the communications system illustrated in FIG. 1A. </p><p id="p0022" num="0022"> [0016] FIG. 2 is an example logical interface implementation on a mobile network. </p><p id="p0023" num="0023"> [0017] FIG. 3 illustrates example traffic going through a stable local breakout session. </p><p id="p0024" num="0024"> [0018] FIG. 4 illustrates local traffic going through local breakout. </p><p id="p0025" num="0025"> [0019] FIG. 5 shows an example process for selecting a source IP address during a local breakout session. </p><p id="p0026" num="0026"> [0020] FIG. 6 illustrates an example method for routing IP traffic in a local breakout session. </p><p id="p0027" num="0027"> [0021] FIG. 7 illustrates an example method for routing IP traffic in a local breakout session. </p><p id="p0028" num="0028">DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS </p><p id="p0029" num="0029"> [0022] FIG. 1 A is a diagram of an example communications system 100 in which one or more disclosed embodiments may be implemented. The communications system 100 may be a multiple access system that provides content, such as voice, data, video, messaging, broadcast, etc., to multiple wireless users. The communications system 100 may enable multiple wireless users to access such content through the sharing of system resources, including wireless bandwidth. For example, the communications systems 100 may employ one or more channel access methods, such as code division multiple access (CDMA), time division multiple access 
<!-- EPO <DP n="5"/>-->
 (TDMA), frequency division multiple access (FDMA), orthogonal FDMA (OFDMA), single- carrier FDMA (SC-FDMA), and the like. </p><p id="p0030" num="0030"> [0023] As shown in FIG. 1 A, the communications system 100 may include wireless transmit/receive units (WTRUs) 102a, 102b, 102c, 102d, a radio access network (RAN) 104, a core network 106, a public switched telephone network (PSTN) 108, the Internet 110, and other networks 112, though it will be appreciated that the disclosed embodiments contemplate any number of WTRUs, base stations, networks, and/or network elements. Each of the WTRUs 102a, 102b, 102c, 102d may be any type of device configured to operate and/or communicate in a wireless environment. By way of example, the WTRUs 102a, 102b, 102c, 102d may be configured to transmit and/or receive wireless signals and may include user equipment (UE), a mobile station, a fixed or mobile subscriber unit, a pager, a cellular telephone, a personal digital assistant (PDA), a smartphone, a laptop, a netbook, a personal computer, a wireless sensor, consumer electronics, and the like. </p><p id="p0031" num="0031"> [0024] The communications systems 100 may also include a base station 114a and a base station 114b. Each of the base stations 114a, 114b may be any type of device configured to wirelessly interface with at least one of the WTRUs 102a, 102b, 102c, 102d to facilitate access to one or more communication networks, such as the core network 106, the Internet 110, and/or the networks 112. By way of example, the base stations 114a, 114b may be a base transceiver station (BTS), a Node-B, an eNode B, a Home Node B, a Home eNode B, a site controller, an access point (AP), a wireless router, and the like. While the base stations 114a, 114b are each depicted as a single element, it will be appreciated that the base stations 114a, 114b may include any number of interconnected base stations and/or network elements. </p><p id="p0032" num="0032"> [0025] The base station 114a may be part of the RAN 104, which may also include other base stations and/or network elements (not shown), such as a base station controller (BSC), a radio network controller (RNC), relay nodes, etc. The base station 114a and/or the base station 114b may be configured to transmit and/or receive wireless signals within a particular geographic region, which may be referred to as a cell (not shown). The cell may further be divided into cell sectors. For example, the cell associated with the base station 114a may be divided into three sectors. Thus, in an embodiment, the base station 114a may include three transceivers, i.e., one for each sector of the cell. In another embodiment, the base station 114a may employ multiple-input multiple output (MIMO) technology and, therefore, may utilize multiple transceivers for each sector of the cell. </p><p id="p0033" num="0033"> [0026] The base stations 114a, 114b may communicate with one or more of the</p><p id="p0034" num="0034">WTRUs 102a, 102b, 102c, 102d over an air interface 116, which may be any suitable wireless 
<!-- EPO <DP n="6"/>-->
 communication link (e.g., radio frequency (RF), microwave, infrared (IR), ultraviolet (UV), visible light, etc.). The air interface 116 may be established using any suitable radio access technology (RAT). </p><p id="p0035" num="0035"> [0027] More specifically, as noted above, the communications system 100 may be a multiple access system and may employ one or more channel access schemes, such as CDMA, TDMA, FDMA, OFDMA, SC-FDMA, and the like. For example, the base station 114a in the RAN 104 and the WTRUs 102a, 102b, 102c may implement a radio technology such as which may establish the air interface 116 using wideband CDMA (WCDMA). WCDMA may include communication protocols such as High-Speed Packet Access (HSPA) and/or Evolved HSPA (HSPA+). HSPA may include High-Speed Downlink Packet Access (HSDPA) and/or High- Speed Uplink Packet Access (HSUPA). </p><p id="p0036" num="0036"> [0028] In another embodiment, the base station 114a and the WTRUs 102a, 102b, 102c may implement a radio technology such as Evolved UMTS Terrestrial Radio Access (E-UTRA), which may establish the air interface 116 using Long Term Evolution (LTE) and/or LTE- Advanced (LTE-A). </p><p id="p0037" num="0037"> [0029] In other embodiments, the base station 114a and the WTRUs 102a, 102b, 102c may implement radio technologies such as IEEE 802.16 (i.e., Worldwide Interoperability for Microwave Access (WiMAX)), CDMA2000, CDMA2000 IX, CDMA2000 EV-DO, Interim Standard 2000 (IS-2000), Interim Standard 95 (IS-95), Interim Standard 856 (IS-856), Global System for Mobile communications (GSM), Enhanced Data rates for GSM Evolution (EDGE), GSM EDGE (GERAN), and the like. </p><p id="p0038" num="0038"> [0030] The base station 114b in FIG. 1 A may be a wireless router, Home Node B, Home eNode B, or AP, for example, and may utilize any suitable RAT for facilitating wireless connectivity in a localized area, such as a place of business, a home, a vehicle, a campus, and the like. In an embodiment, the base station 114b and the WTRUs 102c, 102d may implement a radio technology such as IEEE 802.11 to establish a wireless local area network (WLAN). In another embodiment, the base station 114b and the WTRUs 102c, 102d may implement a radio technology such as IEEE 802.15 to establish a wireless personal area network (WPAN). In yet another embodiment, the base station 114b and the WTRUs 102c, 102d may utilize a cellular- based RAT (e.g., WCDMA, CDMA2000, GSM, LTE, LTE-A, etc.) to establish a picocell or femtocell. As shown in FIG. 1 A, the base station 114b may have a direct connection to the Internet 110. Thus, the base station 114b may not be required to access the Internet 110 via the core network 106. 
<!-- EPO <DP n="7"/>-->
 [0031] The RAN 104 may be in communication with the core network 106, which may be any type of network configured to provide voice, data, applications, and/or voice over internet protocol (VoIP) services to one or more of the WTRUs 102a, 102b, 102c, 102d. For example, the core network 106 may provide call control, billing services, mobile location-based services, pre-paid calling, Internet connectivity, video distribution, etc., and/or perform high-level security functions, such as user authentication. Although not shown in FIG. 1 A, it will be appreciated that the RAN 104 and/or the core network 106 may be in direct or indirect communication with other RANs that employ the same RAT as the RAN 104 or a different RAT. For example, in addition to being connected to the RAN 104, which may be utilizing an E-UTRA radio technology, the core network 106 may also be in communication with another RAN (not shown) employing a GSM radio technology. </p><p id="p0039" num="0039"> [0032] The core network 106 may also serve as a gateway for the WTRUs 102a, 102b, 102c, 102d to access the PSTN 108, the Internet 110, and/or other networks 112. The core network 106 may include at least one transceiver and at least one processor. The PSTN 108 may include circuit-switched telephone networks that provide plain old telephone service (POTS). The Internet 110 may include a global system of interconnected computer networks and devices that use common communication protocols, such as the transmission control protocol (TCP), user datagram protocol (UDP) and the internet protocol (IP) in the TCP/IP internet protocol suite. The networks 112 may include wired or wireless communications networks owned and/or operated by other service providers. For example, the networks 112 may include another core network connected to one or more RANs, which may employ the same RAT as the RAN 104 or a different RAT. </p><p id="p0040" num="0040"> [0033] Some or all of the WTRUs 102a, 102b, 102c, 102d in the communications system 100 may include multi-mode capabilities, i.e., the WTRUs 102a, 102b, 102c, 102d may include multiple transceivers for communicating with different wireless networks over different wireless links. For example, the WTRU 102c shown in FIG. 1 A may be configured to communicate with the base station 114a, which may employ a cellular-based radio technology, and with the base station 114b, which may employ an IEEE 802 radio technology. </p><p id="p0041" num="0041"> [0034] FIG. IB is a system diagram of an example WTRU 102. As shown in FIG. IB, the WTRU 102 may include a processor 118, a transceiver 120, a transmit/receive element 122, a speaker/microphone 124, a keypad 126, a display/touchpad 128, non-removable memory 106, removable memory 132, a power source 134, a global positioning system (GPS) chipset 136, and other peripherals 138. It will be appreciated that the WTRU 102 may include any subcombination of the foregoing elements while remaining consistent with an embodiment. 
<!-- EPO <DP n="8"/>-->
 [0035] The processor 118 may be a general purpose processor, a special purpose processor, a conventional processor, a digital signal processor (DSP), a plurality of </p><p id="p0042" num="0042">microprocessors, one or more microprocessors in association with a DSP core, a controller, a microcontroller, Application Specific Integrated Circuits (ASICs), Field Programmable Gate Array (FPGAs) circuits, any other type of integrated circuit (IC), a state machine, and the like. The processor 118 may perform signal coding, data processing, power control, input/output processing, and/or any other functionality that enables the WTRU 102 to operate in a wireless environment. The processor 118 may be coupled to the transceiver 120, which may be coupled to the transmit/receive element 122. While FIG. IB depicts the processor 118 and the transceiver 120 as separate components, it will be appreciated that the processor 118 and the transceiver 120 may be integrated together in an electronic package or chip. </p><p id="p0043" num="0043"> [0036] The transmit/receive element 122 may be configured to transmit signals to, or receive signals from, a base station (e.g., the base station 114a) over the air interface 116. For example, in an embodiment, the transmit/receive element 122 may be an antenna configured to transmit and/or receive RF signals. In another embodiment, the transmit/receive element 122 may be an emitter/detector configured to transmit and/or receive IR, UV, or visible light signals, for example. In yet another embodiment, the transmit/receive element 122 may be configured to transmit and receive both RF and light signals. It will be appreciated that the transmit/receive element 122 may be configured to transmit and/or receive any combination of wireless signals. In addition, although the transmit receive element 122 is depicted in FIG. IB as a single element, the WTRU 102 may include any number of transmit/receive elements 122. More specifically, the WTRU 102 may employ MEVIO technology. Thus, in an embodiment, the WTRU 102 may include two or more transmit/receive elements 122 (e.g., multiple antennas) for transmitting and receiving wireless signals over the air interface 116. </p><p id="p0044" num="0044"> [0037] The transceiver 120 may be configured to modulate the signals that are to be transmitted by the transmit/receive element 122 and to demodulate the signals that are received by the transmit/receive element 122. As noted above, the WTRU 102 may have multi-mode capabilities. Thus, the transceiver 120 may include multiple transceivers for enabling the WTRU 102 to communicate via multiple RATs, such as UTRA and IEEE 802.11 , for example. </p><p id="p0045" num="0045"> [0038] The processor 118 of the WTRU 102 may be coupled to, and may receive user input data from, the speaker/microphone 124, the keypad 126, and/or the display/touchpad 128</p><p id="p0046" num="0046">(e.g., a liquid crystal display (LCD) display unit or organic light-emitting diode (OLED) display unit). The processor 118 may also output user data to the speaker/microphone 124, the keypad</p><p id="p0047" num="0047">126, and/or the display/touchpad 128. In addition, the processor 118 may access information 
<!-- EPO <DP n="9"/>-->
 from, and store data in, any type of suitable memory, such as the non-removable memory 106 and/or the removable memory 132. The non-removable memory 106 may include random- access memory (RAM), read-only memory (ROM), a hard disk, or any other type of memory storage device. The removable memory 132 may include a subscriber identity module (SIM) card, a memory stick, a secure digital (SD) memory card, and the like. In other embodiments, the processor 118 may access information from, and store data in, memory that is not physically located on the WTRU 102, such as on a server or a home computer (not shown). </p><p id="p0048" num="0048"> [0039] The processor 118 may receive power from the power source 134, and may be configured to distribute and/or control the power to the other components in the WTRU 102. The power source 134 may be any suitable device for powering the WTRU 102. For example, the power source 134 may include one or more dry cell batteries (e.g., nickel-cadmium (NiCd), nickel-zinc (NiZn), nickel metal hydride (NiMH), lithium-ion (Li-ion), etc.), solar cells, fuel cells, and the like. </p><p id="p0049" num="0049"> [0040] The processor 118 may also be coupled to the GPS chipset 136, which may be configured to provide location information (e.g., longitude and latitude) regarding the current location of the WTRU 102. In addition to, or in lieu of, the information from the GPS chipset 136, the WTRU 102 may receive location information over the air interface 116 from a base station (e.g., base stations 114a, 114b) and/or determine its location based on the timing of the signals being received from two or more nearby base stations. It will be appreciated that the WTRU 102 may acquire location information by way of any suitable location-determination method while remaining consistent with an embodiment. </p><p id="p0050" num="0050"> [0041] The processor 118 may further be coupled to other peripherals 138, which may include one or more software and/or hardware modules that provide additional features, functionality and/or wired or wireless connectivity. For example, the peripherals 138 may include an accelerometer, an e-compass, a satellite transceiver, a digital camera (for photographs or video), a universal serial bus (USB) port, a vibration device, a television transceiver, a hands free headset, a Bluetooth® module, a frequency modulated (FM) radio unit, a digital music player, a media player, a video game player module, an Internet browser, and the like. </p><p id="p0051" num="0051"> [0042] FIG. 1C is a system diagram of the RAN 104 and the core network 106 according to an embodiment. As noted above, the RAN 104 may employ a UTRA radio technology to communicate with the WTRUs 102a, 102b and 102c over the air interface 116.</p><p id="p0052" num="0052">The RAN 104 may also be in communication with the core network 106. As shown in FIG. 1C, the RAN 104 may include Node-Bs 140a, 140b, 140c, which may each include one or more transceivers for communicating with the WTRUs 102a, 102b, 102c over the air interface 116. 
<!-- EPO <DP n="10"/>-->
 The Node-Bs 140a, 140b, 140c may each be associated with a particular cell (not shown) within the RAN 104. The RAN 104 may also include RNCs 142a, 142b. It will be appreciated that the RAN 104 may include any number of Node-Bs and RNCs while remaining consistent with an embodiment. </p><p id="p0053" num="0053"> [0043] As shown in FIG. 1C, the Node-Bs 140a, 140b may be in communication with the RNC 142a. Additionally, the Node-B 140c may be in communication with the RNC142b. The Node-Bs 140a, 140b, 140c may communicate with the respective RNCs 142a, 142b via an Iub interface. The RNCs 142a, 142b may be in communication with one another via an Iur interface. Each of the RNCs 142a, 142b may be configured to control the respective Node-Bs 140a, 140b, 140c to which it is connected. In addition, each of the RNCs 142a, 142b may be configured to carry out or support other functionality, such as outer loop power control, load control, admission control, packet scheduling, handover control, macrodiversity, security functions, data encryption, and the like. </p><p id="p0054" num="0054"> [0044] The core network 106 shown in FIG. 1C may include a media gateway (MGW) 144, a mobile switching center (MSC) 146, a serving GPRS support node (SGSN) 148, and/or a gateway GPRS support node (GGSN) 150. While each of the foregoing elements are depicted as part of the core network 106, it will be appreciated that any one of these elements may be owned and/or operated by an entity other than the core network operator. </p><p id="p0055" num="0055"> [0045] The RNC 142a in the RAN 104 may be connected to the MSC 146 in the core network 106 via an IuCS interface. The MSC 146 may be connected to the MGW 144. The MSC 146 and the MGW 144 may provide the WTRUs 102a, 102b, 102c with access to circuit- switched networks, such as the PSTN 108, to facilitate communications between the WTRUs 102a, 102b, 102c and traditional land-line communications devices. </p><p id="p0056" num="0056"> [0046] The RNC 142a in the RAN 104 may also be connected to the SGSN 148 in the core network 106 via an IuPS interface. The SGSN 148 may be connected to the GGSN 150. The SGSN 148 and the GGSN 150 may provide the WTRUs 102a, 102b, 102c with access to packet-switched networks, such as the Internet 110, to facilitate communications between and the WTRUs 102a, 102b, 102c and IP-enabled devices. </p><p id="p0057" num="0057"> As noted above, the core network 106 may also be connected to the networks 112, which may include other wired or wireless networks that are owned and/or operated by other service providers. </p><p id="p0058" num="0058"> [0047] FIG. ID is a system diagram of the RAN 104 and the core network 106 according to an embodiment. As noted above, the RAN 104 may employ an E-UTRA radio 
<!-- EPO <DP n="11"/>-->
 technology to communicate with the WTRUs 102a, 102b and 102c over the air interface 116. The RAN 104 may also be in communication with the core network 106. </p><p id="p0059" num="0059"> [0048] The RAN 104 may include eNode-Bs 170a, 170b and 170c, though it will be appreciated that the RAN 104 may include any number of eNode-Bs while remaining consistent with an embodiment. The eNode-Bs 170a, 170b, 170c may each include one or more transceivers for communicating with the WTRUs 102a, 102b, 102c over the air interface 116. In an embodiment, the eNode-Bs 170a, 170b, 170c may implement MIMO technology. Thus, the eNode-B 140a, for example, may use multiple antennas to transmit wireless signals to, and receive wireless signals from, the WTRU 102a. </p><p id="p0060" num="0060"> [0049] Each of the eNode-Bs 170a, 170b and 170c may be associated with a particular cell (not shown) and may be configured to handle radio resource management decisions, handover decisions, scheduling of users in the uplink and/or downlink, and the like. As shown in FIG. ID, the eNode-Bs 170a, 170b, 170c may communicate with one another over an X2 interface. </p><p id="p0061" num="0061"> [0050] The core network (CN) 106 shown in FIG. ID may include a mobility management gateway (MME) 162, a serving gateway 164, and a packet data network (PDN) gateway 166. While each of the foregoing elements are depicted as part of the core network 106, it will be appreciated that any one of these elements may be owned and/or operated by an entity other than the core network operator. </p><p id="p0062" num="0062"> [0051] The MME 162 may be connected to each of the eNode-Bs 170a, 170b and 170c in the RAN 104 via an SI interface and may serve as a control node. For example, the MME 162 may be responsible for authenticating users of the WTRUs 102a, 102b, 102c, bearer activation/deactivation, selecting a particular serving gateway during an initial attach of the WTRUs 102a, 102b, 102c, and the like. The MME 162 may also provide a control plane function for switching between the RAN 104 and other RANs (not shown) that employ other radio technologies, such as GSM or WCDMA. </p><p id="p0063" num="0063"> [0052] The serving gateway 164 may be connected to each of the eNode Bs 170a, 170b, 170c in the RAN 104 via the SI interface. The serving gateway 164 may generally route and forward user data packets to/from the WTRUs 102a, 102b, 102c. The serving gateway 164 may also perform other functions, such as anchoring user planes during inter-eNode B handovers, triggering paging when downlink data is available for the WTRUs 102a, 102b, 102c, managing and storing contexts of the WTRUs 102a, 102b, 102c, and the like. </p><p id="p0064" num="0064"> [0053] The serving gateway 164 may also be connected to the PDN gateway 166, which may provide the WTRUs 102a, 102b, 102c with access to packet-switched networks, such 
<!-- EPO <DP n="12"/>-->
 as the Internet 110, to facilitate communications between the WTRUs 102a, 102b, 102c and IP- enabled devices. </p><p id="p0065" num="0065"> [0054] The core network 106 may facilitate communications with other networks. For example, the core network 106 may provide the WTRUs 102a, 102b, 102c with access to circuit- switched networks, such as the PSTN 108, to facilitate communications between the WTRUs 102a, 102b, 102c and traditional land-line communications devices. For example, the core network 106 may include, or may communicate with, an IP gateway (e.g., an IP multimedia subsystem (IMS) server) that serves as an interface between the core network 106 and the PSTN 108. In addition, the core network 106 may provide the WTRUs 102a, 102b, 102c with access to the networks 112, which may include other wired or wireless networks that are owned and/or operated by other service providers. </p><p id="p0066" num="0066"> [0055] FIG. IE is a system diagram of the RAN 104 and the core network 106 according to an embodiment. The RAN 104 may be an access service network (ASN) that employs IEEE 802.16 radio technology to communicate with the WTRUs 102a, 102b, 102c over the air interface 116. As will be further discussed below, the communication links between the different functional entities of the WTRUs 102a, 102b, 102c, the RAN 104, and the core network 106 may be defined as reference points. </p><p id="p0067" num="0067"> [0056] As shown in FIG. IE, the RAN 104 may include base stations 180a, 180b, 180c, and an ASN gateway 142, though it will be appreciated that the RAN 104 may include any number of base stations and ASN gateways while remaining consistent with an embodiment. The base stations 180a, 180b, 180c may each be associated with a particular cell (not shown) in the RAN 104 and may each include one or more transceivers for communicating with the WTRUs 102a, 102b, 102c over the air interface 116. In one embodiment, the base stations 180a, 180b, 180c may implement MIMO technology. Thus, the base station 140a, for example, may use multiple antennas to transmit wireless signals to, and receive wireless signals from, the WTRU 102a. The base stations 180a, 180b, 180c may also provide mobility management functions, such as handoff triggering, tunnel establishment, radio resource management, traffic classification, quality of service (QoS) policy enforcement, and the like. The ASN gateway 182 may serve as a traffic aggregation point and may be responsible for paging, caching of subscriber profiles, routing to the core network 106, and the like. </p><p id="p0068" num="0068"> [0057] The air interface 116 between the WTRUs 102a, 102b, 102c and the RAN 104 may be defined as an Rl reference point that implements the IEEE 802.16 specification. In addition, each of the WTRUs 102a, 102b, 102c may establish a logical interface (not shown) with the core network 106. The logical interface between the WTRUs 102a, 102b, 102c and the 
<!-- EPO <DP n="13"/>-->
 core network 106 may be defined as an R2 reference point, which may be used for </p><p id="p0069" num="0069">authentication, authorization, IP host configuration management, and/or mobility management. </p><p id="p0070" num="0070"> [0058] The communication link between each of the base stations 180a, 180b, 180c may be defined as an R8 reference point that includes protocols for facilitating WTRU handovers and the transfer of data between base stations. The communication link between the base stations 180a, 180b, 180c and the ASN gateway 215 may be defined as an R6 reference point. The R6 reference point may include protocols for facilitating mobility management based on mobility events associated with each of the WTRUs 102a, 102b, 100c. </p><p id="p0071" num="0071"> [0059] As shown in FIG. IE, the RAN 104 may be connected to the core network 106. The communication link between the RAN 104 and the core network 106 may defined as an R3 reference point that includes protocols for facilitating data transfer and mobility management capabilities, for example. The core network 106 may include a mobile IP home agent (MIP-HA) 184, an authentication, authorization, accounting (AAA) server 186, and a gateway 188. While each of the foregoing elements are depicted as part of the core network 106, it will be appreciated that any one of these elements may be owned and/or operated by an entity other than the core network operator. </p><p id="p0072" num="0072"> [0060] An Internet Protocol (IP) stack may be referred to as a software implementation of the IP suite. A logical interface (LIF) may refer to a construct internal to an operating system. In an LIF implementation, the link-layer may hide the physical interfaces from the IP stack and from network nodes. A LIF may allow the mobile node to provide a single interface view to the layers above IP. Upper layers may bind to the LIF, which may hide inner inter-access technology handovers or data flow transfers among different physical interfaces. An example of a logical interface implementation on a mobile network is illustrated by the diagram of FIG. 2. </p><p id="p0073" num="0073"> [0061] Physical interfaces may be assigned a unique set of home network prefixes (FfNPs) or a shared set of network prefixes. The LIF may be associated to HNPs that may be moved between interfaces transparently to the upper layers (e.g., IP and above). The LIF technique may support simultaneous attachment, in addition to sequential attachment. In an embodiment, a physical interface capable of attaching to a mobile access gateway (MAG) may include an IP interface. Multiple physical interfaces may be grouped under the same IP logical interface. </p><p id="p0074" num="0074"> [0062] Network-based IP flow mobility (IFOM) may initiate when the anchor decides to move a particular flow from its default path to a different path. The anchor may determine the access gateway for forwarding a particular flow when the flow is initiated. For example, the 
<!-- EPO <DP n="14"/>-->
 anchor may determine the access gateway based on application policy profiles and/or during the lifetime of the flow upon receiving a network-based or a mobile-based trigger. </p><p id="p0075" num="0075"> [0063] A WTRU supporting cellular radio access as well as local network access such as wireless local area network (WLAN) radio access may use local breakout technology to route IP traffic. For example, a WTRU may, while connected to a WLAN, route specific IP flows via the WLAN access without traversing the Evolved Packet Core (EPC). The EPC may be part of a mobile network or cellular radio access. The WTRU may be directed or indirectly connected to the local network. The WTRU may be connected to the local network via an access point, through a gateway, through another network, or the like. The connection may be wired or wireless. By routing certain IP flows through the WLAN, local breakout may offload IP traffic from the EPC. IP flows to be routed through the WLAN access may be identified via user preferences, local operating environment information, and/or via policies that may be statically pre-configured by the operator on the WTRU, or dynamically set by the operator via the access network discovery and selection function (ANDSF). The WTRU may use different IP addresses based on the access technology being used. Such offload may be referred to as non-seamless WLAN offload. </p><p id="p0076" num="0076"> [0064] In an embodiment, when the WLAN access is EPC connected, the WTRU may simultaneously perform seamless WLAN offload for some IP flows and non-seamless WLAN offload for some IP flows. </p><p id="p0077" num="0077"> [0065] The WTRU may use different IP addresses when connected to the mobile network and the WLAN network. For example, specific IP flows may use a mobile IP address allocated by the mobile network, and specific IP flows may use a local IP address allocated by the WLAN access network. Specifically, the local IP address may be used for the IP flows identified to be routed through the local network, and the mobile IP address may be used for the IP flows to be routed through the EPC. The WTRU may acquire the local IP address on WLAN access. The local IP address may be obtained by a local Dynamic Host Configuration Protocol (DHCP) server. </p><p id="p0078" num="0078"> [0066] FIG. 6 illustrates an example method for routing IP traffic in a local breakout session. At 610, the stability state of the local network connection may be determined. The stability state may describe whether the connection has been and/or is likely to remain available to the WTRU for a predetermined period of time. In an embodiment, the stability state may describe whether the WTRU has been connected to and/or is expected to stay connected to the connection for a predetermined period of time. 
<!-- EPO <DP n="15"/>-->
 [0067] In an embodiment, a local breakout connection may be in a stability state when the local connection is expected to be available to the WTRU for a predetermined period of time. In an embodiment, a local breakout connection may be in a stability state when the local IP address of the WTRU is expected to be available to the WTRU for a predetermined period of time. The predetermined period time may include a substantially long period, such as 5 minutes, 10 minutes, 30 minutes, 60 minutes, 90 minutes and the like. The predetermined time period may be preconfigured, dynamically set, or semi-dynamically set. The predetermined time period may be referred to as a stability threshold. </p><p id="p0079" num="0079"> [0068] One or more stability thresholds may also be configured. For example, a stability threshold may represent the minimal duration for a connection needs to be established before being considered stable. In an embodiment, a local connection may be considered stable after the connection is available to the WTRU for a predetermined duration with no or minimal interruptions. </p><p id="p0080" num="0080"> [0069] In an embodiment, stability state may be categorized into sub-states. For example, a connection may be in low stability state, medium stability state, or high stability state. Different stabilities thresholds may apply to different sub-states. For example, the stability threshold for a high stability state may be higher than the stability thresholds for low and medium stability states. Table 1 shows an example stability threshold configuration. </p><p id="p0081" num="0081"><img id="imgf000015_0001" he="44" wi="107" file="imgf000015_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="no"/></p><p id="p0082" num="0082"> [0070] In an embodiment, the local breakout connection may be determined to be in a stable state if the local breakout connection is identified as a stable connection. For example, the WTRU may maintain a list of local connections. Certain local connections may be identified as stable connections. In an embodiment, a user profile may contain access point (AP) identifiers known to be "stable." For example, the WTRU user's home AP may be listed as a stable connection, as the user typically stays at home for a long period of time. For example, the WTRU user's work or office AP may be listed as a stable connection, as the user is expected to stay at work and thereby connect the WTRU to the office AP for a long period of time. 
<!-- EPO <DP n="16"/>-->
 [0071] The local breakout connection may be determined to be in a stable state during a predetermined time frame. A local connection or AP may be associated with one or more expected stability periods. An expected stability period may include the day and/or expected duration during which local connection or AP may be available to the WTRU, and/or the WTRU may be expected to connect to the local connection or AP and stay substantially stationary. In an embodiment, the expected stability period(s) may be stored in the user profile associated with the WTRU. For example, the profile may identify a local connection to the home AP as being stable between 6:00PM to 7:00AM from Monday to Friday. </p><p id="p0083" num="0083"> [0072] In an embodiment, the stability period for a local connection or AP may be heuristically identified. A local connection may be monitored and cumulative statistics about the AP usage over time may be kept. The stability period for the local connection or AP may be derived based on the time and duration of when the WTRUA is connected to the local connection or AP. </p><p id="p0084" num="0084"> [0073] Stability information associated with one or more local connections or APs that the WTRU may access may be tracked. The stability information may be stored locally or remotely. For example, stability information may be stored in any type of suitable memory, such as the non-removable memory 106 and/or the removable memory 132. Stability information may be tracked and/or stored remotely, such as via a remote server. </p><p id="p0085" num="0085"> [0074] Table 2 shows an example stability table with example stability information. As shown, an AP may be assigned with an AP identifier that may uniquely identify an AP that the WTRU may connect to. Expected stability period(s) may be tracked and stored for each AP. In an embodiment, the expected stability period may include configured period(s) and/or derived period(s). Configured period(s) may be entered by the user. Derived period(s) for a local connection or AP may be derived or learned based on cumulative usage statistics over time as described above. For example, as shown below, if the WTRU is connected to the local connection or AP associated with the "FriendID" from 9:00PM to 12:00PM on Fridays, the stability information may include that time period as a derived expected stability period. </p><p id="p0086" num="0086"><img id="imgf000016_0001" he="49" wi="159" file="imgf000016_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="yes"/><!-- EPO <DP n="17"/>--></p><p id="p0087" num="0087"><img id="imgf000017_0001" he="63" wi="164" file="imgf000017_0001.tif" img-format="tif" img-content="table" orientation="portrait" inline="yes"/></p><p id="p0088" num="0088"> [0075] As shown in Table 2, stability information may include an indication of the current stability state. For example, potential values for the current stability state may include, but not limited to, stable (high), stable (medium), stable (low), unknown, and not connected. If the WTRU is presently connected to a local connection or AP, the stability information may also include an indication of connection time. As shown, stability information may include historical stability information and/or statistics, such as the date, time and/or duration of previous connection session(s). For example, historical statics for the local connection or AP associated with the "FriendED" may include connected from 8:55PM for 3 hours on last Friday, and connected from 9:10PM for 3 ½ hours on Friday 2 weeks ago. Based on the historical statistics, a stability period of 9:00PM to 12:00PM on Fridays may be derived. </p><p id="p0089" num="0089"> [0076] In an embodiment, a local connection may be identified as being stable using a global positioning system (GPS). For example, if the WTRU is substantially stationary, or does not move for a predetermined period of time, it may be determined that the local connection is stable. </p><p id="p0090" num="0090"> [0077] Referring to FIG. 6, at 620, the stability requirement associated with the IP traffic flow may be determined. In an embodiment, an application or mobile service may be associated with stability requirement, such as requires stability, or does not require stability. For example, an application requiring stability may use the local network if the local network is determined to be stable, and may use the cellular network if the local connection is determined to unstable. In an embodiment, an application or mobile service may be associated with a stability requirement, such as low, medium or high. For example, an application requiring medium stability may use the local connection provided the local connection is in a high or medium stability state. For example, a mobile service requiring high stability may not use the location connection if the connection is in a low or medium stability state. 
<!-- EPO <DP n="18"/>-->
 [0078] At 630, the IP traffic flow may be offloaded to the local network when the stability state of the local network connection meets the stability requirement of the IP traffic flow. IP traffic flow may be routed through the stable local breakout connection. For example, a local IP address may be allocated by the local network. When it is determined to offload the IP traffic flow, the local IP address may be used for sending the IP traffic flow. </p><p id="p0091" num="0091"> [0079] FIG. 3 illustrates a diagram of example traffic going through a stable local breakout session. As shown, a WTRU 302 may be connected to mobile network 306 via a cellular radio connection 308 and/or via the WLAN connection tunneled to the mobile network 306. The WTRU 302 may also be connected to AP 330 via a local wireless connection 307. The AP 330 may belong to local network or WLAN 312. As shown, IP flows 320 between the WTRU 302 and the correspondent node 340 may be routed via the cellular radio connection 308, the mobile network 306, and the Internet 310. IP flows 322 between the WTRU 302 and the correspondence node 340 may be routed via the local wireless connection 307 and the AP 330. By routing IP flows 322 through the WLAN 312, local breakout may offload traffic from the mobile core network. </p><p id="p0092" num="0092"> [0080] In an embodiment, a tunnel 304 may be established for the WTRU 302 to access the mobile network 306. As shown in FIG. 3, IP flows 324 between the WTRU 302 and the correspondent node 340 may be routed via tunnel 304, the mobile network 306, and the Internet 310. The tunnel may serve as a WLAN interface between the WTRU 302 and the mobile network 306/EPC. The WLAN interface may have an EPC IP address and a local IP address allocated by the local DHCP server. When the EPC IP address is used to send IP flows through the WLAN, the packets associates with the EP flows may be tunneled to the EPC. The local IP address may be used to bypass the EPC. </p><p id="p0093" num="0093"> [0081] Based on a determination that the local connection is in a stable state, applications may be used over a local breakout connection. IP flows related to mobility demanding applications may be routed via the local wireless connection 307 and the AP 330. Broadband wireless access (BWA) based on peer-to-peer concept such as Multipath </p><p id="p0094" num="0094">Transmission Control Protocol (MPTCP) may be used when connected to local breakout connection. </p><p id="p0095" num="0095"> [0082] In an embodiment, an IP traffic flow requiring mobility services may be routed through the mobile core network. In an embodiment, when the destination of the traffic flow is local, the traffic flows may stay on the local network instead of being routed through the mobile core network. It may be beneficial to keep local traffic in the local network because transmission 
<!-- EPO <DP n="19"/>-->
 may be faster than going through the mobile core network, the costs to the user may be lower, and traffic may be offloaded from the mobile core network. </p><p id="p0096" num="0096"> [0083] FIG. 7 illustrates an example method for routing IP traffic in a local breakout session. At 710, the destination address of an IP traffic flow may be identified. At 720, whether to offload the IP traffic flow from the cellular network to the local network may be determined based on the destination address of the IP traffic flow. The destination address may be compared to addresses associated with the local network. For example, a filter rule may identify traffic based on the destination address. If the destination address is part of the addresses associated with the local network, the filter rule may indicate that the IP traffic may be offloaded to the local network. In an embodiment, when the destination address is local, the ΓΡ traffic may be kept inside of the local network even when mobility services are required. At 730, the IP traffic flow may be routed based on the determination. For example, a local IP address may be allocated by the local network. When it is determined to offload the IP traffic flow, the local IP address may be used for sending the IP traffic flow. For example, when the destination address is determined to be local, the local IP address may be assigned as the source IP address, and the IP traffic flow may be routed through the local network. </p><p id="p0097" num="0097"> [0084] FIG. 4 illustrates a diagram of example local traffic going through local breakout. Referring to FIG. 4, a WTRU 302 may be connected to core network 306 via a cellular radio connection 308 and via a WLAN connection 304. The WTRU 302 may also be connected to AP 330 via a local wireless connection 307. The correspondent node 440 may also be connected to AP 330 via a local wireless connection 307. The AP 330 may be connected to local network or WLAN 312. </p><p id="p0098" num="0098"> [0085] In an embodiment, a tunnel 304 may be established for the WTRU 302 to access the mobile network 306. As shown in FIG. 3, IP flows 324 between the WTRU 302 and the correspondent node 340 may be routed via tunnel 304, the mobile network 306, and the Internet 310. The tunnel may serve as a WLAN interface between the WTRU 302 and the mobile network 306/EPC. The WLAN interface may have an EPC IP address and a local IP address allocated by the local DHCP server. When the EPC IP address is used to send IP flows through the WLAN, the packets associates with the IP flows may be tunneled to the EPC. The local IP address may be used to bypass the EPC. For example, when the destination IP address is from EPC, a packet sent through WLAN may be tunneled to the EPC. When the destination IP address is local, a packet may be sent locally bypassing the EPC. </p><p id="p0099" num="0099"> [0086] As shown in FIG. 4, the correspondence node 440 is connected to the local network 312. The local network 312 may include an enterprise network, or a user home network 
<!-- EPO <DP n="20"/>-->
 with an AP with a relatively stable IP address. IP flows 320 and 322 between the WTRU 302 and the correspondent node 440 may require mobility services. In an embodiment, the IP flows 320 may be routed via the cellular radio connection 308, the mobile network 306, and the Internet 310. The IP flows 320 may be routed via the WLAN connection 304, the core network 306, and the Internet 310. In an embodiment, based on a determination that the correspondence node 440 is connected to the same local network, the WTRU 302 may route the IP flows 322 to the correspondence node 440 via the local wireless connection 307 and the AP 330. By routing IP flows 322 through the WLAN 312, local breakout may offload traffic from the mobile core network. </p><p id="p0100" num="0100"> [0087] The WTRU 302 may correspond to or include the WTRU 102 described above with respect to FIGs. 1 A-1D. The mobile network 306 may correspond to or include the core network 106 described above with respect to FIGs. 1A, 1C and ID. The Internet 310 may correspond to or include the Internet 110 described above with respect to FIGs. 1 A, 1C and ID. While the AP 330 shown in FIGs. 3 and 4 is a wireless AP, any non-cellular AP may be used. </p><p id="p0101" num="0101"> [0088] An example procedure for determining whether and when to use a local breakout connection or the local network is described below. The decision may take into account the stability state of the local breakout connection. Depending on the determination, mobility demanding applications may use stable local breakout connections. Local traffic may be kept within the local network instead of going through the mobile core network. For example, IP traffic between two devices connected to the user's home network may be routed within the user's home network. The local breakout connection may be selected, for example, when the traffic requires low-speed or low-QoS traffic. </p><p id="p0102" num="0102"> [0089] In an embodiment, the local breakout connection may not be used when mobility services such as flow mobility are required. The local breakout connection may use a locally assigned IP address that may change each time the WTRU moves to new location. The change of IP address may interrupt the connectivity with a remote peer. For example, if a WTRU starts a voice over IP connection with a remote peer and the user is moving, the local IP address of the WTRU may change continuously. A mobile IP address allocated by the core network may be used to maintain the VoIP connection. In an embodiment, the local breakout connection may be used when even mobility services are required. </p><p id="p0103" num="0103"> [0090] In an embodiment, whether IP flows may be routed through the local breakout connection may be determined based on one or more policies. For example, whether IP traffic may be offloaded to WLAN may be determined via a filter rule of the inter-system mobility policy and/or inter-system routing policy. 
<!-- EPO <DP n="21"/>-->
 [0091] Inter-system mobility policy and/or inter-system routing policy may include policies for routing IP traffic simultaneously over multiple radio access interfaces. The policy may be set up to per the operator's routing preferences and/or mobile network offload preferences. The WTRU may use the policy to determine when the local breakout connection is restricted for a specific IP traffic flow, and/or select the access technology or network for routing the IP traffic flow. For example, the policy may be set by, for example, but not limited to, the mobile network operator, the operator of the WTRU, an application or service provider, and/or the local network administrator. </p><p id="p0104" num="0104"> [0092] IP flow class specific policies may enable the operator to indicate to the WTRU through which access technology IP flows are to be routed. Such policies may be defined per AP, per IP flow class, or per IP flow class under a specific AP. For IP flows that are routed over WLAN, the IP flow class specific policies may specify whether the traffic may be routed through the home agent (HA) or directly via the WLAN access, bypassing the HA. </p><p id="p0105" num="0105"> [0093] For example, the policy may limit local breakout sessions to use a subset of the available stable local connections. The policy may specify that certain connections may be preferable to others when multiple stable local connections are available to the WTRU. The policy may specify what type(s) of mobility services a local connection may or may not support. </p><p id="p0106" num="0106"> [0094] When the WTRU is connected to the cellular/mobile network and the local network, the WTRU may be configured with different IP addresses on the accesses. The local IP address may be assigned as the source IP address, and outgoing traffic may be routed through the local connection. Whether to assign the local IP address as the source IP address may be determined based on policies, destination IP address, whether the available local breakout connection(s) is in a stable state, radio environment information, quality of IP connection, service-specific requirements, application-specific requirements and/or the available cellular connections. For example, a local IP address may be assigned if the local connection is determined to be sufficiently stable for the application needs. A mobile IP address may otherwise be assigned, and traffic may be routed through the core network. To illustrate, BWA service may require the location connection to be in a high stability state to route related IP flows through the local connection. If the local connection is in a low or medium stability state, or IP flows related to the BWA service, or IP flows related to applications that require BWA service, may be routed through the core network. If multiple mobile connections exist, the choice of mobile connection may depend on, for example, policies, user preference, congestion, and the like. 
<!-- EPO <DP n="22"/>-->
 [0095] FIG. 5 shows an example process for selecting a source IP address during a local breakout session. While the example process is described in the context of outgoing traffic and selecting a source IP address, it should be understood that selecting a destination IP address for incoming traffic may follow the same process. </p><p id="p0107" num="0107"> [0096] As shown, at 510, an application may request a source IP address. For example, the application may use the source IP address to communicate with a correspondent node, such as correspondent node 340 in FIG. 3 or correspondent node 440 in FIG. 4. At 520, whether the application may function with a low-speed or low quality of service (QoS) connection may be determined. In an example, where the application is content with low-speed or low-QoS connection, at 570, a local IP address may be assigned as a source IP address, and outgoing traffic may be routed through local breakout. </p><p id="p0108" num="0108"> [0097] As shown, if the application needs more than low QoS, at 530, whether mobility service(s) is needed may be determined. In an example where an application does not require mobility services such as video streaming or VoIP, at 570, a local IP address may be assigned as a source IP address, and outgoing traffic may be routed through local breakout. If the application needs mobility services to function, at 540, whether the destination IP address is local may be determined. For example, if the IP address of the correspondent node is an IP address belonging to the local network, at 570, a local IP address may be assigned as a source IP address, and outgoing traffic may be routed through local breakout. </p><p id="p0109" num="0109"> [0098] As shown, in response to determining that the destination IP address is not local, whether the local connection is in a stable state may be determined at 550. In response to determining that the local connection is not in a stable state, at 580, a mobile IP address may be assigned. In response to determining that the local connection is in a stable state, at 560, whether the needed mobility service(s) is available on the stable local breakout may be determined. In response to determining that the mobility service(s) is available on the stable local breakout, at 570, the local IP address may be assigned. In response to determining that the mobility services are unavailable on the stable local breakout, at 580, a mobile IP address may be assigned. A preexisting tunnel may be used. </p><p id="p0110" num="0110">[0099] The techniques described herein may be applicable to local breakouts independently of the mobile core network type such as MCN using Dual Stack Mobile IP (DSMIP), or Proxy Mobile IP (PMIP) / GPRS Tunnelling Protocol (GTP), with or without LIF support. 
<!-- EPO <DP n="23"/>-->
 [0100] Although features and elements are described above in particular combinations, one of ordinary skill in the art will appreciate that each feature or element can be used alone or in any combination with the other program, software, or firmware incorporated in a computer- readable medium for execution by a computer or processor. Examples of computer-readable media include electronic signals (transmitted over wired or wireless connections) and computer- readable storage media. Examples of computer-readable storage media include, but are not limited to, a read only memory (ROM), a random access memory (RAM), a register, cache memory, semiconductor memory devices, magnetic media such as internal hard disks and removable disks, magneto-optical media, and optical media such as CD-ROM disks, and digital versatile disks (DVDs). A processor in association with software may be used to implement a radio frequency transceiver for use in a WTRU, UE, terminal, base station, RNC, or any host computer. 
</p></description><claims mxw-id="PCLM44726173" ref-ucid="WO-2012116252-A2" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="24"/>-->CLAIMS What is claimed: </claim-statement><claim id="clm-0001" num="1"><claim-text>1. A method for routing an internet protocol (IP) traffic flow when connected to a mobile network and a local network, the method comprising: </claim-text><claim-text> identifying a destination address of the IP traffic flow; </claim-text><claim-text> determining whether to offload the IP traffic flow from the mobile network to the local network based on the destination address; and </claim-text><claim-text> routing the IP traffic flow based on the determination. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The method of claim 1, wherein the IP traffic flow is routed through the local network when the destination address is local. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The method of claim 1, wherein the IP traffic flow is associated with an application requiring a mobility service, and the IP traffic flow is routed via the local network when the destination address is local. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The method of claim 1, wherein whether to offload the IP traffic flow is determined based on a filter rule indicating that traffic shall be non-seamlessly offloaded to the local network when the destination address is local. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The method of claim 1, further comprising: </claim-text><claim-text> acquiring a local IP address allocated by the local network; and </claim-text><claim-text> using the local IP address for sending the IP traffic flow based on a determination to offload the IP traffic flow from the mobile network to the local network. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The method of claim 1, further comprising: </claim-text><claim-text> acquiring a local IP address allocated by the local network; and </claim-text><claim-text> using the local IP address for sending the IP traffic flow when the destination address is local. </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. A wireless transmit and receive unit (WTRU) for routing an internet protocol (IP) traffic flow when connected to a mobile network and a local network, the WTRU comprising: </claim-text><claim-text> a processor configured to: <!-- EPO <DP n="25"/>--> identify a destination address of the IP traffic flow; </claim-text><claim-text> determine whether to offload the IP traffic flow from the mobile network to the local network based on the destination address; and </claim-text><claim-text> route the IP traffic flow based on the determination. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The WTRU of claim 7, wherein the IP traffic flow is routed through the local network when the destination address is local. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The WTRU of claim 7, wherein the IP traffic flow is associated with an application requiring a mobility service, and the IP traffic flow is routed via the local network when the destination address is local. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The WTRU of claim 7, wherein whether to offload the IP traffic flow is determined based on a filter rule indicating that traffic shall be non-seamlessly offloaded to the local network when the destination address is local. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>11. The WTRU of claim 7, wherein the processor is further configured to: </claim-text><claim-text> acquire a local IP address allocated by the local network; and </claim-text><claim-text> use the local IP address for sending the IP traffic flow based on a determination to offload the IP traffic flow from the mobile network to the local network. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The WTRU of claim 7, wherein the processor is further configured to: </claim-text><claim-text> acquire a mobile IP address; and </claim-text><claim-text> use the mobile IP address for sending the IP traffic flow when the destination address is outside of the local network. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. A method for routing an internet protocol (IP) traffic flow when connected to a mobile network and a local network, the method comprising: </claim-text><claim-text> determining a stability state of the local network connection; </claim-text><claim-text> identifying a stability requirement associated with a IP traffic flow; and </claim-text><claim-text> offloading the IP traffic flow to the local network when the stability state of the local network connection meets the stability requirement associated with the IP traffic flow. <!-- EPO <DP n="26"/>--> </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The method of claim 13, wherein the IP traffic is non-seamlessly offloaded to the local network. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The method of claim 13, further comprising: </claim-text><claim-text> receiving a request for a source IP address; and </claim-text><claim-text> assigning a local IP address when offloading the IP traffic flow to the local network. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The method of claim 13, further comprising: </claim-text><claim-text> receiving a request for a source IP address; and </claim-text><claim-text> assigning a mobile ΓΡ address when the stability state of the local network connection fails to meet the stability requirement associated with the IP traffic flow. </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. A wireless transmit and receive unit (WTRU) for routing an internet protocol (IP) traffic flow when connected to a mobile network and a local network, the WTRU comprising: </claim-text><claim-text> a processor configured to: </claim-text><claim-text> determine a stability state of the local network connection; </claim-text><claim-text> identify a stability requirement associated with a IP traffic flow; and offload the IP traffic flow to the local network when the stability state of the local network connection meets the stability requirement associated with the IP traffic flow. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The WTRU of claim 17, wherein the IP traffic flow is non-seamlessly offloaded to the local network by assigning a local IP address as the source IP address. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The WTRU of claim 17, wherein the stability state of the local network connection is determined based on whether the local network connection has been available to the WTRU for a predetermined period of time. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The WTRU of claim 17, wherein the stability state of the local network connection is preconfigured. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The WTRU of claim 17, wherein the stability state of the local network connection is heuristically identified by tracking stability information associated with the local connection. <!-- EPO <DP n="27"/>--> </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The WTRU of claim 17, further comprising a memory for storing stability information associated with the local connection. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The WTRU of claim 17, further comprising a memory for storing stability information associated with the local connection, the stability information comprising a stability period of the local connection, and the stability state of the local network connection is determined based on whether the IP traffic flow is transmitted during the stability period. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The WTRU of claim 17, wherein the stability requirement of the IP traffic flow is identified based on whether an application associated with the ΓΡ traffic flow is mobility demanding. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
