<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2679956-A2" country="EP" doc-number="2679956" kind="A2" date="20140101" family-id="46721682" file-reference-id="290550" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549612" ucid="EP-2679956-A2"><document-id><country>EP</country><doc-number>2679956</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174510-A" is-representative="YES"><document-id mxw-id="PAPP154823535" load-source="docdb" format="epo"><country>EP</country><doc-number>13174510</doc-number><kind>A</kind><date>20130701</date><lang>EN</lang></document-id><document-id mxw-id="PAPP199048019" load-source="docdb" format="original"><country>EP</country><doc-number>13174510.1</doc-number><date>20130701</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140446121" ucid="GB-201211636-A" load-source="docdb"><document-id format="epo"><country>GB</country><doc-number>201211636</doc-number><kind>A</kind><date>20120629</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2070350462" load-source="docdb">G01C  21/32        20060101AFI20140409BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL2060959537" load-source="docdb" scheme="CPC">G01C  21/26        20130101 FI20140306BHEP        </classification-cpc><classification-cpc mxw-id="PCL2060959554" load-source="docdb" scheme="CPC">G01C  21/32        20130101 LI20140314BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132181320" lang="DE" load-source="patent-office">Verfahren und Vorrichtung zur Erkennung von Abweichungen von Kartendaten</invention-title><invention-title mxw-id="PT132181321" lang="EN" load-source="patent-office">Method and Apparatus for Detecting Deviations from Map Data</invention-title><invention-title mxw-id="PT132181322" lang="FR" load-source="patent-office">Procédé et appareil pour détecter des déviations à partir des données de carte</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR1118174275" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>TOMTOM BELGIUM NV</last-name><address><country>BE</country></address></addressbook></applicant><applicant mxw-id="PPAR918161640" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>TOMTOM BELGIUM N.V.</last-name></addressbook></applicant><applicant mxw-id="PPAR918985618" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Tomtom Belgium N.V.</last-name><iid>101244775</iid><address><street>Zuiderpoort Office Park Gaston Crommenlaan 4 bus 0501</street><city>9050 Gent</city><country>BE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918132384" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MARTENS GAETAN</last-name><address><country>BE</country></address></addressbook></inventor><inventor mxw-id="PPAR918167771" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MARTENS, GAETAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918983365" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MARTENS, Gaëtan</last-name><address><street>Torenstraat 6</street><city>9500 Zarlardinge</city><country>BE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918986279" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Dobson, Adrian</last-name><iid>101318165</iid><address><street>TomTom International B.V. IP Creation De Ruyterkade 154</street><city>1011 AC Amsterdam</city><country>NL</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548877302" load-source="docdb">AL</country><country mxw-id="DS548805970" load-source="docdb">AT</country><country mxw-id="DS548877304" load-source="docdb">BE</country><country mxw-id="DS548892295" load-source="docdb">BG</country><country mxw-id="DS548898820" load-source="docdb">CH</country><country mxw-id="DS548846014" load-source="docdb">CY</country><country mxw-id="DS548805971" load-source="docdb">CZ</country><country mxw-id="DS548877305" load-source="docdb">DE</country><country mxw-id="DS548846015" load-source="docdb">DK</country><country mxw-id="DS548846016" load-source="docdb">EE</country><country mxw-id="DS548878155" load-source="docdb">ES</country><country mxw-id="DS548892296" load-source="docdb">FI</country><country mxw-id="DS548892297" load-source="docdb">FR</country><country mxw-id="DS548877306" load-source="docdb">GB</country><country mxw-id="DS548846017" load-source="docdb">GR</country><country mxw-id="DS548877307" load-source="docdb">HR</country><country mxw-id="DS548805972" load-source="docdb">HU</country><country mxw-id="DS548898821" load-source="docdb">IE</country><country mxw-id="DS548846018" load-source="docdb">IS</country><country mxw-id="DS548892438" load-source="docdb">IT</country><country mxw-id="DS548846019" load-source="docdb">LI</country><country mxw-id="DS548807978" load-source="docdb">LT</country><country mxw-id="DS548805973" load-source="docdb">LU</country><country mxw-id="DS548807979" load-source="docdb">LV</country><country mxw-id="DS548807980" load-source="docdb">MC</country><country mxw-id="DS548876474" load-source="docdb">MK</country><country mxw-id="DS548876475" load-source="docdb">MT</country><country mxw-id="DS548877308" load-source="docdb">NL</country><country mxw-id="DS548892439" load-source="docdb">NO</country><country mxw-id="DS548807982" load-source="docdb">PL</country><country mxw-id="DS548898826" load-source="docdb">PT</country><country mxw-id="DS548877309" load-source="docdb">RO</country><country mxw-id="DS548898827" load-source="docdb">RS</country><country mxw-id="DS548807983" load-source="docdb">SE</country><country mxw-id="DS548898828" load-source="docdb">SI</country><country mxw-id="DS548892440" load-source="docdb">SK</country><country mxw-id="DS548807984" load-source="docdb">SM</country><country mxw-id="DS548846020" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670281" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Embodiments of the present invention provide a method for identifying discrepancies in digital map data, comprising selecting one or more candidate locations as a subset of locations within positional data relating to the movement of a plurality of devices with respect to time in an area, allocating each of the candidate locations to one or more predetermined categories based upon a distribution of travel directions of the devices at each candidate location and comparing the candidate locations against a database of map data and identifying locations of possible discrepancies in the digital map data based upon the category of each candidate location.
<img id="iaf01" file="imgaf001.tif" wi="109" he="109" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499654" lang="EN" source="EPO" load-source="docdb"><p>Embodiments of the present invention provide a method for identifying discrepancies in digital map data, comprising selecting one or more candidate locations as a subset of locations within positional data relating to the movement of a plurality of devices with respect to time in an area, allocating each of the candidate locations to one or more predetermined categories based upon a distribution of travel directions of the devices at each candidate location and comparing the candidate locations against a database of map data and identifying locations of possible discrepancies in the digital map data based upon the category of each candidate location.</p></abstract><description mxw-id="PDES63955711" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b><u>Field of the Invention</u></b></heading><p id="p0001" num="0001">This invention relates to methods of identifying locations at which discrepancies or deviations exist between real world features and digital map data intended to represent those features. The real world features include navigable features (features traversable by a vehicle) such as road segments. Embodiments of the invention aim to automate a process of detecting and identifying such discrepancies to reduce a required intervention of an operator.</p><heading id="h0002"><b><u>Background to the Invention</u></b></heading><p id="p0002" num="0002">Electronic map data is used in a wide variety of applications. One particular application is routing, such as in navigation devices. The accuracy of the routing is consequently dependent upon the accuracy of the map data. However, real world features, such as the layout of road networks which the map data is intended to represent, continually change and it is therefore required to keep the map data up-to-date. The map data for a country such as the Netherlands or the United Kingdom is large in size and map data for the US is enormous. Attempting to maintain the map data manually is an extremely difficult, or near impossible, task.</p><p id="p0003" num="0003">Various technologies can be used to assist in maintaining map data. The technologies include satellite imagery and positional data relating to the movement of a plurality of devices with respect to time in an area. The devices may be carried by mapping vehicles intended to assist in maintaining or acquiring map data, or may be a vehicles carrying a navigation device.</p><p id="p0004" num="0004">It is an object of embodiments of the invention to at least mitigate one or more of the problems of the prior art.</p><heading id="h0003"><b><u>Summary of the Invention</u></b></heading><p id="p0005" num="0005">According to a first aspect of the invention, therein is provided a method for identifying discrepancies in digital map data, comprising:
<ul><li>selecting one or more candidate locations as a subset of locations within positional data relating to the movement of a plurality of devices with respect to time in an area;</li><li>allocating each of the candidate locations to one or more predetermined categories based upon a distribution of travel directions of the devices at each candidate location; and</li><li>comparing the candidate locations against a database of map data and identifying locations of possible discrepancies in the digital map data based upon the category of each candidate location.</li></ul></p><p id="p0006" num="0006">The method may further comprise determining the distribution of travel directions as a directional histogram. A rotation invariant histogram may be determined based upon the directional histogram. The step of allocating each of the candidate locations to one or more predetermined categories may be based upon the directional histogram or the invariant histogram, and in preferred embodiments is performed by a trained model.<!-- EPO <DP n="2"> --></p><p id="p0007" num="0007">The method may further comprise determining an association between proximate candidate locations based upon the distribution of travel directions at each candidate location. The association may be determined, at least in part, based upon a metric indicative of a similarity between the distribution of travel directions for adjacent candidate locations. The comparing of the candidate locations against the database of map data may comprise comparing the category and association of each candidate location against the map data.</p><p id="p0008" num="0008">The step of comparing the candidate locations against a database of map data may be performed by using a function <i>F</i>(<i>L,</i> {<i>c</i><sub>1</sub>...<i>c<sub>k</sub></i>}, {<i>L</i><sub>1</sub>...<i>L<sub>k</sub></i>}), wherein the association of a candidate location c may be identified as {<i>c</i><sub>1</sub>...<i>c<sub>k</sub></i>} having corresponding classifications of {<i>L<sub>1</sub>...L<sub>k</sub></i>} and an output of the function expresses a likelihood of a possible discrepancy in the digital map data at the candidate location. The function F may be a trained model.</p><p id="p0009" num="0009">The candidate locations may be selected by determining locations of local maxima in the positional data.</p><p id="p0010" num="0010">The method may further comprise a step of allocating the positional data to a pixel map corresponding to the area and determining, for at least pixels traversed by one or more devices, a value indicative of the number of devices traversing each pixel in the positional data. The candidate locations may be selected according to: <maths id="math0001" num=""><math display="inline"><msub><mi>x</mi><mi mathvariant="italic">cent</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="false"><mstyle displaystyle="false"><munder><mo>∑</mo><mi>i</mi></munder></mstyle><msub><mi>x</mi><mi>i</mi></msub><msub><mi>v</mi><mi>i</mi></msub></mstyle><mstyle displaystyle="false"><mstyle displaystyle="false"><munder><mo>∑</mo><mi>i</mi></munder></mstyle><msub><mi>v</mi><mi>i</mi></msub></mstyle></mfrac><mo>,</mo></math><img id="ib0001" file="imgb0001.tif" wi="30" he="15" img-content="math" img-format="tif" inline="yes"/></maths> and <maths id="math0002" num=""><math display="inline"><msub><mi>y</mi><mi mathvariant="italic">cent</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="false"><mstyle displaystyle="false"><munder><mo>∑</mo><mi>i</mi></munder></mstyle><msub><mi>y</mi><mi>i</mi></msub><msub><mi>v</mi><mi>i</mi></msub></mstyle><mstyle displaystyle="false"><mstyle displaystyle="false"><munder><mo>∑</mo><mi>i</mi></munder></mstyle><msub><mi>v</mi><mi>i</mi></msub></mstyle></mfrac><mo>,</mo></math><img id="ib0002" file="imgb0002.tif" wi="30" he="15" img-content="math" img-format="tif" inline="yes"/></maths> where <i>x<sub>i</sub></i>, <i>y<sub>i</sub></i> are the coordinates of a pixel in the pixel map having a greater value than its adjacent pixels and <i>v<sub>i</sub></i> is the value of the pixel.</p><p id="p0011" num="0011">According to a second aspect of the invention, there is provided a method of training a model to classify features in positional data, comprising:
<ul><li>providing a training set comprising a plurality of distributions of travel directions of navigation devices, each distribution having an associated category identifier; and</li><li>training a classification model to classify travel direction distributions based upon the training set.</li></ul></p><p id="p0012" num="0012">The category identifier may be indicative of each distribution of travel directions being one of a 1-way road, a 2-way road, a junction and clutter.</p><p id="p0013" num="0013">The method may comprise evaluating the trained classification model using a test set comprising a plurality of travel distributions having unknown category identifiers.</p><p id="p0014" num="0014">The method may comprise training a second classification model to identify possible discrepancies in digital map data based upon the category of each candidate location and an association of each candidate location with proximate candidate locations. The second classification model may provide a function <i>F</i>(<i>L,</i> {<i>c</i><sub>1</sub>...<i>c<sub>k</sub></i>}, {<i>L</i><sub>1</sub>...<i>L<sub>k</sub></i>}), wherein the association of a candidate location c may be identified as {<i>c<sub>1</sub></i>...<i>c<sub>k</sub></i>} having corresponding classifications of {<i>L<sub>1</sub>...L<sub>k</sub></i>} and an output of the function F expresses a likelihood of a possible discrepancy in the digital map data at the candidate location. An output of the function F may be indicative of a likelihood of a discrepancy in the map data.</p><p id="p0015" num="0015">The classification model or the second classification model may be one of a stochastic model, a decision tree classifiers, rule-based classifiers, neural networks, support vector machines.<!-- EPO <DP n="3"> --></p><p id="p0016" num="0016">The method of the first aspect of the invention, in any of its embodiments, may comprise using the classification model generated in the second aspect of the invention to allocate each of the candidate locations to the one or more predetermined categories.</p><p id="p0017" num="0017">Any of the methods described above may be implemented as software, and thus the invention extends to computer software which, when executed by a computer, is arranged to perform any of the described methods. The computer software may be stored on a, e.g. non-transitory, computer-readable medium.</p><heading id="h0004"><b><u>Brief Description of the Drawings</u></b></heading><p id="p0018" num="0018">Embodiments of the invention will now be described by way of example only, with reference to the accompanying figures, in which:
<ul><li><figref idrefs="f0001">Figure 1</figref> is a flowchart illustrating a method for identifying discrepancies in digital map data according to an embodiment of the invention;</li><li><figref idrefs="f0002">Figure 2</figref> illustrates an allocation of traces to a pixel map according to an embodiment of the invention;</li><li><figref idrefs="f0003">Figure 3</figref> is a heat map illustrating the pixel map according to an embodiment of the invention;</li><li><figref idrefs="f0003">Figure 4</figref> is a map of centroids according to an embodiment of the invention;</li><li><figref idrefs="f0004">Figure 5</figref> is a map of classified centroids according to an embodiment of the invention;</li><li><figref idrefs="f0005">Figure 6</figref> is an illustration of digital map data and centroids determined to correspond to discrepancies from the digital map data according to an embodiment of the invention; and</li><li><figref idrefs="f0006">Figure 7</figref> is a flowchart illustrating a method of training a model to classify features in positional data according to an embodiment of the invention.</li></ul></p><heading id="h0005"><b><u>Detailed Description of Preferred Embodiments</u></b></heading><p id="p0019" num="0019">Embodiments of the invention aim to identify locations at which discrepancies or deviations exist between real world features and digital map data intended to represent those features. The real world features include navigable features (features traversable by a vehicle) such as road segments. Embodiments of the invention aim to automate a process of detecting and identifying such discrepancies to reduce a required intervention of an operator.</p><p id="p0020" num="0020"><figref idrefs="f0001">Figure 1</figref> illustrates a method 100 according to an embodiment of the invention. The method 100, when executed by a processor of a computing device, determines locations at which map data may differ from real world features which the map data is intended to represent. The method determines the locations based upon trace data comprising one or more traces from location-aware mobile devices. Each trace indicates a geographic position of each mobile device against time i.e. traces the path of the device.</p><p id="p0021" num="0021">A location-aware mobile device, herein referred to simply as a mobile device, is any device capable of determining its geographic location from wirelessly received signals. The received signals may include received GPS signals. The mobile device may be a navigation device such as a portable navigation device (PND), in-vehicle navigation device, mobile phone, portable computing device, vehicle<!-- EPO <DP n="4"> --> tracking device, and the like. The following description will assume that the mobile device is a navigation device, although it will be realised that embodiments of the invention are not restricted in this respect.</p><p id="p0022" num="0022">The navigation device is arranged to record a trace of a path or route followed by the navigation device. The navigation device may store the trace in a local memory of the navigation device or may communicate the trace to a server computer, such as via a wireless data connection with the server computer. The trace may be formed from data indicative of a series of geographic locations at which the navigation device is located at periodic intervals. However in other embodiments the trace may be formed by data representing one or more curves indicative of the path of the navigation device. The method 100 may be used with trace data comprising one or more traces. In some embodiments of the invention the method 100 is used with a bundle comprising a plurality of traces. The plurality of traces may be received from one or more navigation devices. The method may comprise a step (not shown) of receiving the one or more traces from one or more mobile devices, such as navigation devices.</p><p id="p0023" num="0023">In step 110 the one or more traces are allocated to a pixel map. <figref idrefs="f0002">Figure 2</figref> illustrates the allocation of a trace 210 to a pixel map 200. The pixel map is a two-dimensional array comprising a plurality of pixels each representative of a geographic area. Each pixel may represent a geographic area of any shape, although in the embodiment shown in <figref idrefs="f0002">Figure 2</figref> the pixel map comprises rectangular or square pixels. Rectangular pixels may be the most convenient shape to process by the method 100 executed by the processor and to store in a memory. The geographic area represented by each pixel may be of any size. The size may be dependent upon an accuracy to which the navigation device providing the probe data may determine its location. The area may be 5 m by 5 m, 3.5 m by 3.5 m or 2 m by 2 m, although it will be realised that these are merely exemplary and, furthermore, in some embodiments the height and width of the area may not be equal.</p><p id="p0024" num="0024">Each pixel stores a value indicative of a number of times that pixel is crossed by a trace. When the pixel map is initialised each pixel is set to a predetermined value, such as 0. The pixel value is incremented each time the pixel is crossed by a trace. Referring to <figref idrefs="f0002">Figure 2</figref>, the value for pixels 220 and 230 is incremented, amongst others, to indicate that the trace 210 crosses those pixels. It will be noted that even in cases where the trace is formed from a plurality of location values each indicative of the location of the navigation device at periodic intervals, should the trace comprise two or more location values within one pixel the value for that pixel is only incremented once to indicate the trace crossing the pixel, rather than once for each location within the pixel area. The pixel map values are incremented to reflect the number of times each of one or more traces crosses each pixel. Thus step 110 results in pixels which are crossed a greater number of times by traces storing a greater value.</p><p id="p0025" num="0025">It will be appreciated that, in the real world, most navigation devices will travel routes along roads in a road network. Occasionally, navigation devices will follow routes across other types of navigable location including private areas such as parking lots and the like. However the traces crossing these locations will be expected to be more random i.e. less constrained to following a particular path. Therefore pixels having a higher probability of corresponding to road locations will be expected to store greater values following step 110.</p><p id="p0026" num="0026">Following step 110 a heat map may be displayed representative of the pixel map as shown in <figref idrefs="f0003">Figure 3</figref>. The heat map illustrates the values of the pixel map wherein brighter colours (those usually<!-- EPO <DP n="5"> --> associated with higher temperatures) represent greater pixel values, i.e. more frequented locations. The axes of <figref idrefs="f0003">Figure 3</figref> indicate a distance in meters from an origin point at a bottom left corner of <figref idrefs="f0003">Figure 3</figref>. It can be appreciated from <figref idrefs="f0003">Figure 3</figref> that most traces follow roads which appear in <figref idrefs="f0003">Figure 3</figref> in darker or similar "high temperature" colours whilst less traversed areas are indicated in lighter or similar "low temperature" colours. Based upon the pixel values it is possible to identify candidate locations having a relatively high probability of corresponding to navigable locations such as roadways, as will be described.</p><p id="p0027" num="0027">A direction map is also produced in step 110. The direction map represents, for each pixel traversed by at least one trace, the direction in which the trace(s) traversed the pixel.</p><p id="p0028" num="0028">A directional histogram is stored for each pixel of the pixel map. In some embodiments a directional histogram may only be stored for each pixel which is traversed by at least one trace i.e. a directional histogram may only be initialised for a pixel once it is traversed by a trace and its corresponding pixel value incremented. In other embodiments a directional histogram may be initialised for each pixel of the pixel map.</p><p id="p0029" num="0029">The directional histogram comprises a plurality of bins each representative of a direction of trace(s) across the corresponding pixel. Upon initialisation a value corresponding to each bin in the histogram is set to a predetermined value, such as 0. The value is incremented each time a trace traverses the corresponding pixel in that direction. In one embodiment the bins correspond to directions of 0° to 30°; 30° to 60°; ... 330° to 0°, although it will be realised that these angular divisions are merely exemplary and that other angular divisions may be envisaged.</p><p id="p0030" num="0030">Thus for each pixel in the pixel map 200 shown in <figref idrefs="f0002">Figure 2</figref> a value indicates the number of times the pixel is traversed by a trace and, for at least the pixels traversed once by one or more traces, a directional histogram stores data indicative of the direction of the trace traversing the pixel.</p><p id="p0031" num="0031">In step 120 candidate locations in the probe data having a high probability of corresponding to navigable features such as roadways are identified. In one embodiment, the candidate locations are identified by determining pixels corresponding to local maxima of traversal frequency in the trace data. In other words, pixels are identified which are most crossed in the trace data. The coordinates (x<i><sub>cent</sub>, y<sub>cent</sub></i>) of the local maxima in the pixel map may be determined as: <maths id="math0003" num=""><math display="block"><msub><mi>x</mi><mi mathvariant="italic">cent</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="false"><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>x</mi><mi>i</mi></msub><msub><mi>v</mi><mi>i</mi></msub></mstyle><mrow><msub><mo>∑</mo><mi>i</mi></msub><mo>⁢</mo><msub><mi>v</mi><mi>i</mi></msub></mrow></mfrac><mspace width="2em"/><msub><mi>y</mi><mi mathvariant="italic">cent</mi></msub><mo>=</mo><mfrac><mstyle displaystyle="false"><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>y</mi><mi>i</mi></msub><msub><mi>v</mi><mi>i</mi></msub></mstyle><mrow><msub><mo>∑</mo><mi>i</mi></msub><mo>⁢</mo><msub><mi>v</mi><mi>i</mi></msub></mrow></mfrac></math><img id="ib0003" file="imgb0003.tif" wi="77" he="23" img-content="math" img-format="tif"/></maths><br/>
wherein <i>x<sub>i</sub></i>, <i>y<sub>i</sub></i> are the coordinates of the centre of mass of a pixel with a higher value than its adjacent pixels and <i>v<sub>i</sub></i> is the value of the pixel.</p><p id="p0032" num="0032">The local maxima correspond to centroids which are pixel locations along roadway axles, or locations generally central along roads i.e. corresponding to a generally longitudinal axis of the road. Thus the centroids have a highest probability of corresponding to a spatial location of a road in the road network. <figref idrefs="f0003">Figure 4</figref> illustrates centroids identified from the pixel map illustrated in <figref idrefs="f0003">Figure 3</figref>.<!-- EPO <DP n="6"> --></p><p id="p0033" num="0033">In step 130 the centroids identified in step 120 are classified. That is, in step 130 the centroids are assigned to one or more of a plurality of classifications. The classifications indicate a type of navigable feature based upon the direction map produced in step 120.</p><p id="p0034" num="0034">In order to classify the centroids, firstly in in some embodiments of step 130, the directional histograms are normalised. The directional histograms may be normalised such that a sum of values in all bins of each directional histogram is unity.</p><p id="p0035" num="0035">The directional histograms are transformed into rotation invariant representations. The rotation invariant histogram is obtained by circularly shifting bin values of each directional histogram. The bins values may be shifted such that a predetermined bin, such as the first bin, contains a greatest value. These steps may be explained with reference to a histogram h comprising 12 bins:
<ul><li><i>h</i> = [0, 0, 0, 93, 0, 0, 26, 0, 0, 5, 0, 32]</li><li>Normalised histogram → h'= [0, 0, 0, 0.596, 0, 0, 0.167, 0, 0, 0.032, 0, 0.205]</li><li>Rotation invariant histogram → h"= [0.596, 0, 0, 0.167, 0, 0, 0.032, 0, 0.205, 0, 0, 0]</li></ul></p><p id="p0036" num="0036">The conversion to the rotation invariant histogram allows a comparison between directional histograms to be made. By comparing the rotation invariant histograms they may be assigned to one of the plurality of categories. In some embodiments the histograms are classified by a stochastic model, such a Bayesian network which is trained to distinguish between histograms of the various categories. Other models may be useful such as decision tree classifiers, rule-based classifiers, neural networks, support vector machines and naive Bayes classifiers.</p><p id="p0037" num="0037">The categories relate to a type of navigable area which each centroid represents. In some embodiments, the classifications correspond to 1-way (unidirectional), 2-way (bi-directional), junction and clutter. A 1-way histogram typically has a large value (close to 1) for the first bin in the rotation invariant representation, with other bin values substantially 0. A 2-way histogram typically has values around 0.5 for bins 1 and 7 (in a 12 bin histogram, otherwise approximately half-way i.e. opposite bin 1). A junction histogram has a pattern to the bin values. Typically the pattern comprises more than 2 substantially non-zero bin values. For example, a four way junction may be represented by a histogram having bin values of substantially 0.25 at 90° intervals, although other arrangements of junction can be envisaged having different intersection angles. In some embodiments more than one category may be provided for different types or angular arrangement of junctions. A clutter histogram represents an area having unstructured or undirected traffic flow, such as a car park and may have non-zero values in all bins, or substantially a majority of bins.</p><p id="p0038" num="0038">Prior to being used to classify the histogram, such a model is trained using the method 700 depicted in the flowchart of <figref idrefs="f0006">Figure 7</figref>. In the method, a training set having a plurality of histograms is obtained (step 710), each histogram having an associated category. Thus a learning algorithm may train the model to associate an input histogram with the appropriate classification based upon the training set (step 720). The associated category is indicative of the histogram being representative of, for example, a 1-way road, a 2-way road, a junction and a clutter location. When trained, the performance of the model may be verified by using a verification set of histograms without associated categories being provided to<!-- EPO <DP n="7"> --> the model, although the category of each histogram is known for comparison against the category assigned by the model. The model may be re-trained, if necessary, or to introduce additional categories i.e. representative of new junction layouts etc.</p><p id="p0039" num="0039"><figref idrefs="f0004">Figure 5</figref> illustrates classified centroids representing an area in the city of Flanders. The centroids marked 510 represent exemplary 1-way centroids 510. The centroids marked 520 represent exemplary 2-way centroids. The centroid marked 530 is an example of an intersection centroid. The centroid marked 540 is an example of a clutter centroid.</p><p id="p0040" num="0040">In step 140 centroids are connected to adjacent or spatially close centroids based upon one or more characteristics. The characteristics in one embodiment comprise the directional histograms associated with each centroid. Centroids having similar characteristics are connected in step 140. The similarity of centroids may be expressed by a metric. The metric may into account the fact that adjacent bins in the directional histograms are more indicative of similarity than distant bins. For example, that bins such as bin 11 and bin 0 (in a 12 bin histogram) are neighbouring bins, whereas bin 0 and bin 6 are opposite. Therefore the metric indicates the angular proximity of bins and similarity between directional histograms. Such a metric is used in the area of written text (character) recognition and has been applied by the present inventor to comparison of rotational histograms in the area of road network analysis. Further details are available in the publication <nplcit id="ncit0001" npl-type="s"><text>Distance between histograms of angular measurements and its application to handwritten character similarity, Sung-Hyuk Cha; Srihari, S. N.; 2000 (ISBN: 0-7695-0750-6</text></nplcit>).</p><p id="p0041" num="0041">In step 150 the centroids are compared against digital map data representative of an area for which the trace data was obtained. The map data indicates, amongst other things, the road network in the area. As a result of the comparison any discrepancies or deviations between the map data and the real world may be identified in step 160.</p><p id="p0042" num="0042">Step 150 comprises, in some embodiments, a first part in which centroids are identified which do not correspond to a location of a road in the map data. In some embodiments, the digital map data is scaled to match a scale of the pixel map in order to enable a comparison between the centroids and the map data. A location of each centroid is then compared against the map data to determine if a road exists at that geographic location. If no road exists at that location, or at a location within a predetermined distance of the centroid, then the centroid is marked or flagged for further analysis. If there is a road at the geographic location of the centroid then the centroid may be discarded, i.e. eliminated from further analysis. In other embodiments, all centroids are marked for further analysis, i.e. including those which correspond to the location of roads in the map data. This allows centroids corresponding to roads in the map data to be further analysed to detect changed road properties, such as a road having changed from 1-way to 2-way.</p><p id="p0043" num="0043">Marked or flagged centroids are analysed to determine whether they relate to a deviation from the map data i.e. a location at which the map data is potentially incorrect. In the second part of step 160 the marked centroids are analysed to determine with a greater degree of confidence whether they correspond to such a deviation.</p><p id="p0044" num="0044">In embodiments of the invention, a marked centroid is determined to correspond to a deviation from the map data based upon its classification and connections.<!-- EPO <DP n="8"> --></p><p id="p0045" num="0045">As explained above, centroids may be classified and the classification of a marked centroid <i>c</i> may be indicated as <i>L</i>. In some embodiments, as noted above, the classifications <i>L</i> may be 1-way, 2-way, intersection or clutter, although it will be realised that these are merely exemplary. The connections of the marked centroid <i>c</i> may be identified as {<i>c<sub>1</sub></i>...<i>c<sub>k</sub></i>} with corresponding classifications of {<i>L<sub>1</sub>...L<sub>k</sub></i>}.</p><p id="p0046" num="0046">A function <i>F</i> may be arranged to output true or false to indicate whether the marked centroid <i>c</i> corresponds to a change from the map data based upon the classification of the marked centroid and its connections as: <maths id="math0004" num=""><math display="block"><mi>F</mi><mfenced separators=""><mi>L</mi><mfenced open="{" close="}" separators=""><msub><mi>c</mi><mn>1</mn></msub><mo>…</mo><msub><mi>c</mi><mi>k</mi></msub></mfenced><mfenced open="{" close="}" separators=""><msub><mi>L</mi><mn>1</mn></msub><mo>…</mo><msub><mi>L</mi><mi>k</mi></msub></mfenced></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="51" he="13" img-content="math" img-format="tif"/></maths></p><p id="p0047" num="0047">For example, a marked centroid having no connections or being connected to only clutter centroids may be rejected. That is, the marked centroid may be determined not to represent a deviation or real-world change from the map data. This determination may be made on the basis that the classification and connections of the marked centroid do not indicate with significant reliability that the real world road network has changed from the map data. However, a marked centroid having a predetermined classification connected to a plurality of centroids of the same classification, e.g. a centroid classified as 1-way connected to four other similarly classified centroids, may be identified as a real-world change. As such the function <i>F</i> outputs true to indicate the determination of the marked centroid as a deviation from the map data. The function may be a heuristic function or be a trained model.</p><p id="p0048" num="0048"><figref idrefs="f0005">Figure 6</figref> illustrates centroids determined to correspond to deviations and not to correspond to deviations. First and second pluralities of centroids 610, 620 are identified to correspond to a change from the map data whereas a third plurality of centroids 630 (and others not specifically indicated in <figref idrefs="f0005">Figure 6</figref>) are identified not to correspond to changes from the map data.</p><p id="p0049" num="0049">It will be appreciated that embodiments of the present invention assist in detecting deviations of map data and the real world represented by the map data.</p><p id="p0050" num="0050">It will be appreciated that embodiments of the present invention can be realised in the form of hardware, software or a combination of hardware and software. Any such software may be stored in the form of volatile or non-volatile storage such as, for example, a storage device like a ROM, whether erasable or rewritable or not, or in the form of memory such as, for example, RAM, memory chips, device or integrated circuits or on an optically or magnetically readable medium such as, for example, a CD, DVD, magnetic disk or magnetic tape. It will be appreciated that the storage devices and storage media are embodiments of machine-readable storage that are suitable for storing a program or programs that, when executed, implement embodiments of the present invention. Accordingly, embodiments provide a program comprising code for implementing a system or method as claimed in any preceding claim and a machine readable storage storing such a program. Still further, embodiments of the present invention may be conveyed electronically via any medium such as a communication signal carried over a wired or wireless connection and embodiments suitably encompass the same.</p><p id="p0051" num="0051">All of the features disclosed in this specification (including any accompanying claims, abstract and drawings), and/or all of the steps of any method or process so disclosed, may be combined in any<!-- EPO <DP n="9"> --> combination, except combinations where at least some of such features and/or steps are mutually exclusive.</p><p id="p0052" num="0052">Each feature disclosed in this specification (including any accompanying claims, abstract and drawings), may be replaced by alternative features serving the same, equivalent or similar purpose, unless expressly stated otherwise. Thus, unless expressly stated otherwise, each feature disclosed is one example only of a generic series of equivalent or similar features.</p><p id="p0053" num="0053">The invention is not restricted to the details of any foregoing embodiments. The invention extends to any novel one, or any novel combination, of the features disclosed in this specification (including any accompanying claims, abstract and drawings), or to any novel one, or any novel combination, of the steps of any method or process so disclosed. The claims should not be construed to cover merely the foregoing embodiments, but also any embodiments which fall within the scope of the claims.</p></description><claims mxw-id="PCLM56976631" lang="EN" load-source="patent-office"><!-- EPO <DP n="10"> --><claim id="c-en-0001" num="0001"><claim-text>A method for identifying discrepancies in digital map data, comprising:
<claim-text>selecting one or more candidate locations as a subset of locations within positional data relating to the movement of a plurality of devices with respect to time in an area (110,120);</claim-text>
<claim-text>allocating each of the candidate locations to one or more predetermined categories based upon a distribution of travel directions of the devices at each candidate location (130); and</claim-text>
<claim-text>comparing the candidate locations against a database of map data and identifying locations of possible discrepancies in the digital map data based upon the category of each candidate location (150,160).</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, comprising determining the distribution of travel directions as a directional histogram, and wherein the allocating (130) is based upon the directional histogram.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 2, comprising determining a rotation invariant histogram based upon the directional histogram, and wherein the allocating (130) is based upon the rotation invariant histogram.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of any preceding claim, wherein the allocating (130) is performed by a trained model.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of any preceding claim, comprising determining an association between proximate candidate locations based upon the distribution of travel directions at each candidate location.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of claim 5, wherein the association is determined, at least in part, based upon a metric indicative of a similarity between the distribution of travel directions for adjacent candidate locations.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of claim 5 or 6, wherein the comparing of the candidate locations against the database of map data (150) comprises comparing the category and association of each candidate location against the map data.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of any preceding claim, wherein the comparing (150) results in a likelihood of a possible discrepancy in the digital map data at the candidate location.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>The method of any preceding claim, wherein the candidate locations are selected by determining locations of local maxima in the positional data.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of any preceding claim, comprising a step of allocating the positional data to a pixel map corresponding to the area (110) and determining, for at least pixels traversed by one or more devices, a value indicative of the number of devices traversing each pixel in the positional data (120).<!-- EPO <DP n="11"> --></claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A method of training a model to classify features in positional data, comprising:
<claim-text>providing a training set comprising a plurality of distributions of travel directions of navigation devices, each distribution having an associated category identifier (710); and</claim-text>
<claim-text>training a classification model to classify travel direction distributions based upon the training set (720).</claim-text></claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of claim 11, wherein the category identifier is indicative of each distribution of travel directions being one of a 1-way road, a 2-way road, a junction and clutter.</claim-text></claim><claim id="c-en-0013" num="0013"><claim-text>The method of claim 11 or 12, comprising training a second classification model to identify possible discrepancies in digital map data based upon the category of each candidate location and an association of each candidate location with proximate candidate locations.</claim-text></claim><claim id="c-en-0014" num="0014"><claim-text>The method of claims 11 to 13, comprising using the classification model in the method of any of claims 1 to 10 to allocate each of the candidate locations to the one or more predetermined categories.</claim-text></claim><claim id="c-en-0015" num="0015"><claim-text>Computer software which, when executed by a computer, is arranged to perform the method of any preceding claim, optionally stored on a non-transitory computer-readable medium.</claim-text></claim></claims><drawings mxw-id="PDW16667409" load-source="patent-office"><!-- EPO <DP n="12"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="126" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="13"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="161" he="190" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="14"> --><figure id="f0003" num="3,4"><img id="if0003" file="imgf0003.tif" wi="145" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="15"> --><figure id="f0004" num="5"><img id="if0004" file="imgf0004.tif" wi="165" he="161" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="16"> --><figure id="f0005" num="6"><img id="if0005" file="imgf0005.tif" wi="165" he="162" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="17"> --><figure id="f0006" num="7"><img id="if0006" file="imgf0006.tif" wi="123" he="140" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
