<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2678843-A2" country="EP" doc-number="2678843" kind="A2" date="20140101" family-id="46721501" file-reference-id="295263" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146550680" ucid="EP-2678843-A2"><document-id><country>EP</country><doc-number>2678843</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12750285-A" is-representative="NO"><document-id mxw-id="PAPP154824603" load-source="docdb" format="epo"><country>EP</country><doc-number>12750285</doc-number><kind>A</kind><date>20120227</date><lang>EN</lang></document-id><document-id mxw-id="PAPP172244707" load-source="docdb" format="original"><country>EP</country><doc-number>12750285.4</doc-number><date>20120227</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140449049" ucid="US-201161447025-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201161447025</doc-number><kind>P</kind><date>20110226</date></document-id></priority-claim><priority-claim mxw-id="PPC140451898" ucid="US-2012026783-W" linkage-type="W" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>2012026783</doc-number><kind>W</kind><date>20120227</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988104282" load-source="docdb">G08B  21/10        20060101AFI20120914BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988114127" load-source="docdb">G08B  27/00        20060101ALI20120914BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988137292" load-source="docdb">G08B  25/00        20060101ALI20120914BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2087960128" load-source="docdb" scheme="CPC">G08B  27/001       20130101 LI20150305BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2087960207" load-source="docdb" scheme="CPC">G08B  27/005       20130101 LI20150305BHEP        </classification-cpc><classification-cpc mxw-id="PCL-2087963991" load-source="docdb" scheme="CPC">G06Q  40/08        20130101 LI20150304BHEP        </classification-cpc><classification-cpc mxw-id="PCL2003767331" load-source="docdb" scheme="CPC">G08B  21/10        20130101 FI20140124BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132184524" lang="DE" load-source="patent-office">ENGINE MIT ANPASSBAREN RICHTLINIEN</invention-title><invention-title mxw-id="PT132184525" lang="EN" load-source="patent-office">CUSTOMIZABLE POLICY ENGINE</invention-title><invention-title mxw-id="PT132184526" lang="FR" load-source="patent-office">MOTEUR DE STRATÉGIES PERSONNALISABLE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918167872" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SEISMIC WARNING SYSTEMS INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918137355" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SEISMIC WARNING SYSTEMS, INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918980356" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Seismic Warning Systems, Inc.</last-name><iid>101412711</iid><address><street>5619 Scotts Valley Drive Suite 210</street><city>Scotts Valley, CA 95066</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918163621" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>PRICE MICHAEL JOHN</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918167746" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>PRICE, MICHAEL, JOHN</last-name></addressbook></inventor><inventor mxw-id="PPAR918983770" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>PRICE, MICHAEL, JOHN</last-name><address><street>5619 Scotts Valley Drive, Suite 210</street><city>Scotts Valley, CA 95066</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918172800" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>WURMAN GILEAD</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918173642" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>WURMAN, GILEAD</last-name></addressbook></inventor><inventor mxw-id="PPAR918992610" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>WURMAN, GILEAD</last-name><address><street>5619 Scotts Valley Drive, Suite 210</street><city>Scotts Valley, CA 95066</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918987146" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Price, Nigel John King</last-name><iid>101222790</iid><address><street>J A Kemp 14 South Square Gray's Inn</street><city>LONDON WC1R 5JJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="US-2012026783-W"><document-id><country>US</country><doc-number>2012026783</doc-number><kind>W</kind><date>20120227</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2012116367-A2"><document-id><country>WO</country><doc-number>2012116367</doc-number><kind>A2</kind><date>20120830</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548915022" load-source="docdb">AL</country><country mxw-id="DS548812932" load-source="docdb">AT</country><country mxw-id="DS548860629" load-source="docdb">BE</country><country mxw-id="DS548833478" load-source="docdb">BG</country><country mxw-id="DS548915373" load-source="docdb">CH</country><country mxw-id="DS548860630" load-source="docdb">CY</country><country mxw-id="DS548812933" load-source="docdb">CZ</country><country mxw-id="DS548915023" load-source="docdb">DE</country><country mxw-id="DS548860631" load-source="docdb">DK</country><country mxw-id="DS548860632" load-source="docdb">EE</country><country mxw-id="DS548922248" load-source="docdb">ES</country><country mxw-id="DS548833479" load-source="docdb">FI</country><country mxw-id="DS548915374" load-source="docdb">FR</country><country mxw-id="DS548915024" load-source="docdb">GB</country><country mxw-id="DS548860633" load-source="docdb">GR</country><country mxw-id="DS548915025" load-source="docdb">HR</country><country mxw-id="DS548812934" load-source="docdb">HU</country><country mxw-id="DS548915375" load-source="docdb">IE</country><country mxw-id="DS548860634" load-source="docdb">IS</country><country mxw-id="DS548833480" load-source="docdb">IT</country><country mxw-id="DS548860635" load-source="docdb">LI</country><country mxw-id="DS548833481" load-source="docdb">LT</country><country mxw-id="DS548896043" load-source="docdb">LU</country><country mxw-id="DS548833482" load-source="docdb">LV</country><country mxw-id="DS548833483" load-source="docdb">MC</country><country mxw-id="DS548896044" load-source="docdb">MK</country><country mxw-id="DS548896045" load-source="docdb">MT</country><country mxw-id="DS548833484" load-source="docdb">NL</country><country mxw-id="DS548915376" load-source="docdb">NO</country><country mxw-id="DS548833485" load-source="docdb">PL</country><country mxw-id="DS548922249" load-source="docdb">PT</country><country mxw-id="DS548915026" load-source="docdb">RO</country><country mxw-id="DS548922286" load-source="docdb">RS</country><country mxw-id="DS548833486" load-source="docdb">SE</country><country mxw-id="DS548912072" load-source="docdb">SI</country><country mxw-id="DS548915377" load-source="docdb">SK</country><country mxw-id="DS548915378" load-source="docdb">SM</country><country mxw-id="DS548860636" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><abstract mxw-id="PA99619188" ref-ucid="WO-2012116367-A2" lang="EN" load-source="patent-office"><p num="0000">Embodiments disclose a system and method that distributes warning with a description the probability of the severity of the hazardous condition producing the warning and incorporating a policy engine for expressing rules for responding to the warning.</p></abstract><abstract mxw-id="PA99818869" ref-ucid="WO-2012116367-A2" lang="EN" source="national office" load-source="docdb"><p>Embodiments disclose a system and method that distributes warning with a description the probability of the severity of the hazardous condition producing the warning and incorporating a policy engine for expressing rules for responding to the warning.</p></abstract><abstract mxw-id="PA99619189" ref-ucid="WO-2012116367-A2" lang="FR" load-source="patent-office"><p num="0000">Selon des modes de réalisation, l'invention porte sur un système et sur un procédé qui distribuent une alerte comportant une description de la probabilité de la gravité de l'état dangereux produisant l'alerte et incorporant un moteur de stratégies pour l'expression de règles afin de répondre à l'alerte.</p></abstract><abstract mxw-id="PA99818870" ref-ucid="WO-2012116367-A2" lang="FR" source="national office" load-source="docdb"><p>Selon des modes de réalisation, l'invention porte sur un système et sur un procédé qui distribuent une alerte comportant une description de la probabilité de la gravité de l'état dangereux produisant l'alerte et incorporant un moteur de stratégies pour l'expression de règles afin de répondre à l'alerte.</p></abstract><description mxw-id="PDES50930138" ref-ucid="WO-2012116367-A2" lang="EN" load-source="patent-office"><!-- EPO <DP n="2"/>--><p id="p0001" num="0001"> CUSTOMIZABLE POLICY ENGINE </p><p id="p0002" num="0002">CROSS REFERENCE TO RELATED APPLICATIONS </p><p id="p0003" num="0003">[0001] This application claims priority to U.S. Provisional Application No. 61/447,025, filed February 26, 2011, titled "Customizable Policy Engine." </p><p id="p0004" num="0004">INCORPORATION BY REFERENCE </p><p id="p0005" num="0005">[0002] All publications and patent applications mentioned in this specification are herein incorporated by reference to the same extent as if each individual publication or patent application was specifically and individually indicated to be incorporated by reference. </p><p id="p0006" num="0006">FIELD </p><p id="p0007" num="0007"> [0003] This application relates generally to systems and methods for processing hazard data. More specifically, this application relates to systems and methods for processing hazard data and probability data to generate warnings that can be used to initiate a hazard response. </p><p id="p0008" num="0008">BACKGROUND </p><p id="p0009" num="0009"> [0004] Earthquake Warning Systems (EWS) rely on rapid detection and characterization of earthquake ground motions to provide alerts in advance of hazardous shaking. Because the warning time afforded by EWS is short (on the order of a few seconds) there are very few actions that may be taken that have not been premeditated in advance of the event. These actions generally fall into two categories: automated, meaning electronically or electromechanically actuated in response to an electronic signal; or human-mediated, i.e. actuated as the reaction of a human receiving an auditory or visual signal. In general the auditory/visual signal in the latter category is itself an automated action initiated in response to an electronic warning. </p><p id="p0010" num="0010"> [0005] Existing EWS typically issue a binary warning ("hazard" or "no hazard"). However, because the cost of taking any action is not zero, it is important to consider, for each individual asset and each separate action, the potential benefit to taking action for a given level of anticipated ground motion (intensity) and a given estimated uncertainty in that level. This analysis can be performed at any desired level of sophistication, but it requires that the electronic warning issued by the EWS encode both the level of anticipated ground motion and the estimated uncertainty in that level. Because time is of the essence, this information must be communicated by the EWS in as compact a form as possible. 
<!-- EPO <DP n="3"/>-->
 [0006] The response to an EWS warning can encompass both human-mediated and automated actions. Automated actions must be based on a predetermined policy encoding what to do, and under what warning conditions. In the simplest policy, the only condition is whether a binary warning exists, and the action to undertake does not vary from warning to warning. A more sophisticated policy may encode many different actions, to be undertaken under varying conditions of estimated ground motion and confidence levels. In such a sophisticated system, even human-mediated responses are ultimately automated in that a decision must be made in advance as to what warning conditions trigger notification of the mediating persons. </p><p id="p0011" num="0011"> [0007] There is usually a cost with taking an action in response to an earthquake warning. This cost might be the productivity impact of personnel responding to an alert or the lost availability of equipment that is shut down. There may be a significant restart cost for equipment or processes that have been shut down. There is also a cost associated with taking no action to protect people and assets. In many cases, the decision to initiate a response to the earthquake warning is a balance between the expected cost of damage and the cost of a shutdown. </p><p id="p0012" num="0012">[0008] Because different users will have differing requirements for actions to undertake, and conditions under which to initiate those actions, a sophisticated policy engine is needed to encode the user's desired policies and to implement them in the event of a warning from the EWS. </p><p id="p0013" num="0013">SUMMARY OF THE DISCLOSURE </p><p id="p0014" num="0014">[0009] Embodiments of the present inventions relate to systems, methods and devices containing a customizable policy engine allowing the consumer of the earthquake warning to set threshold uncertainty and ground motion levels independently for each action the consumer wishes to consider in the event of an earthquake. The policy engine allows the consumer to set, according to any analysis the consumer chooses to perform, both an intensity level and a confidence level above which an action should be taken. Different actions may be assigned different intensity and confidence levels, and multiple intensity and confidence levels may be assigned to the same action (for example, a lower intensity but higher confidence may trigger the same action as a higher intensity with lower confidence). </p><p id="p0015" num="0015"> [00010] Under this policy engine any, all, or no actions may be initiated during an event depending on the level of anticipated ground motion and the uncertainty in that level. If the value of either of these quantities varies over the duration of the event, different actions may be initiated at different times, as their pre-determined thresholds for initiation are crossed. If emerging information about the event leads to a reduction in the confidence level at the threshold 
<!-- EPO <DP n="4"/>-->
 ground motion, already-initiated actions may be terminated or continued according to predetermined conditional policies. </p><p id="p0016" num="0016"> [00011] The policy engine may also incorporate information about the estimated time of onset of hazardous ground motion, provided by the EWS, in deciding whether to initiate actions or which action to initiate at a given threshold ground motion. </p><p id="p0017" num="0017"> [00012] The engine also accepts additional input data as desired for incorporation into policy decisions. For example the engine may allow for initiating actions based on actual observed hazardous ground motions at the site rather than predicted ground motions, for incorporating network connectivity information into policy decisions, or for meta-analysis of the encoded warning data, e.g., rate-of-change of encoded parameters as a policy criterion. The policy engine may also accept conditional thresholds based on known or assumed health status of assets following a major event, e.g. reducing threshold ground motions for aftershocks following a damaging earthquake. </p><p id="p0018" num="0018"> [00013] In addition, all recorded inputs to the policy engine and actions initiated by the policy engine are recorded in memory during an event and written to stable media as soon as practical following an event, for audit purposes. </p><p id="p0019" num="0019"> [00014] In some embodiments, a system for distributing warnings regarding an event is provided. The system includes a policy specification subsystem for generating one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; a change detection subsystem for receiving and monitoring data from a sensor system, the data including expected event parameter values and associated deviation metrics; a policy execution subsystem for executing the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule, wherein the policy execution subsystem initiates processing of the at least one rule after receiving instructions from the change detection subsystem, wherein the change detection subsystem sends instructions to the policy execution subsystem upon detection of a predetermined change in at least one of the expected event parameter values; and an action processing subsystem for generating an output for performing the at least one action triggered by the policy execution subsystem. </p><p id="p0020" num="0020"> [00015] In some embodiments, the system further includes a traceback subsystem that logs the operations of each subsystem to fixed media for evaluation following an event. 
<!-- EPO <DP n="5"/>-->
 [00016] In some embodiments, the policy specification subsystem can accept input from an end user or third party or a combination of the end user and third party to generate the machine readable policy. </p><p id="p0021" num="0021"> [00017] In some embodiments, the at least one rule comprises a Boolean predicate. </p><p id="p0022" num="0022">[00018] In some embodiments, the at least one rule comprises a fuzzy rule and the at least one action comprises a continuous action function. </p><p id="p0023" num="0023"> [00019] In some embodiments, the at least one rule is expressed as a probability of exceeding a predetermined value of one of the plurality of event parameters. </p><p id="p0024" num="0024"> [00020] In some embodiments, the probability of exceeding a predetermined value is computed based on a Gaussian distribution with a predetermined expected value and deviation. </p><p id="p0025" num="0025"> [00021] In some embodiments, the policy execution subsystem executes the at least one rule in serial order and resolves conflicts and triggers actions based on the resolved rules. </p><p id="p0026" num="0026"> [00022] In some embodiments, the action processing subsystem monitors the performance of triggered actions to verify that the actions have been executed to completion. </p><p id="p0027" num="0027">[00023] In some embodiments, the warning contains a parameterized summary of the event. </p><p id="p0028" num="0028"> [00024] In some embodiments, the parameterized summary includes a probability distribution or information for the computation of a probability distribution. </p><p id="p0029" num="0029"> [00025] In some embodiments, the output is produced periodically based upon detection of a predetermined change in at least one of the expected event parameter values. </p><p id="p0030" num="0030">[00026] In some embodiments, the policy comprises a predicate and an action or a continuous function of input parameters and a continuously varying control output. </p><p id="p0031" num="0031"> [00027] In some embodiments, the policy specification subsystem receives information regarding the status of a device that receives the output of the action processing subsystem and modifies the policy based on the status of the device. </p><p id="p0032" num="0032">[00028] In some embodiments, the policy specification subsystem adjusts the rules based on past data. </p><p id="p0033" num="0033"> [00029] In some embodiments, the rules are updated in real time. </p><p id="p0034" num="0034"> [00030] In some embodiments, the policy specification subsystem comprises a plurality of user interfaces tailored to a user's level of expertise that allows the user to customize the rules. </p><p id="p0035" num="0035">[00031] In some embodiments, the probability distribution represents the severity of the event. </p><p id="p0036" num="0036">[00032] In some embodiments, the output is sent to a speaker or a display to generate a warning message. </p><p id="p0037" num="0037"> [00033] In some embodiments, the output energizes a relay or controls the operation of a motor, engine or turbine. 
<!-- EPO <DP n="6"/>-->
 [00034] In some embodiments, the event is an earthquake and the event parameters include one or more of peak ground jerk, peak ground acceleration, peak ground velocity, peak ground displacement, modified Mercalli intensity, estimated time of arrival of hazardous shaking, and actual time of the arrival of S-waves. These parameters describe the anticipated shaking at some specific site and can include local effects (such as soil conditions) or not. Parameters may also describe actual measurements of ground shaking at some remote site or at the local site. The difference in a forecast of shaking intensity and the measurement of shaking intensity is represented in the confidence of the intensity estimate (an estimate based on a measurement will have high confidence both in expected value and standard deviation) but still involves estimating local intensity based on remote measurements. Should local measurements be available, these can be given higher significance in policy definitions. </p><p id="p0038" num="0038"> [00035] In some embodiments, each policy is assigned a priority. </p><p id="p0039" num="0039"> [00036] In some embodiments, the priority is specified through definition order, manually assigned by a user, or changed by the actions of a policy. </p><p id="p0040" num="0040">[00037] In some embodiments, the rules can reference action states and external system variables. </p><p id="p0041" num="0041"> [00038] In some embodiments, a computer implemented method for distributing warnings regarding an event is provided. The method includes generating one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; receiving and monitoring data from a sensor system, the data including expected event parameter values and associated deviation metrics; initiating processing of the at least one rule upon detection of a predetermined change in at least one of the expected event parameter values; executing the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule; and generating an output for performing the at least one action triggered by the policy execution subsystem. </p><p id="p0042" num="0042"> [00039] In some embodiments, the method further includes logging the operations of each subsystem to fixed media for evaluation following an event. </p><p id="p0043" num="0043"> [00040] In some embodiments, the method further includes accepting input from an end user or third party or a combination of the end user and third party to generate the machine readable policy. </p><p id="p0044" num="0044"> [00041] In some embodiments, the at least one rule comprises a Boolean predicate. 
<!-- EPO <DP n="7"/>-->
 [00042] In some embodiments, the at least one rule comprises a fuzzy rule and the at least one action comprises a continuous action function. </p><p id="p0045" num="0045"> [00043] In some embodiments, the at least one rule is expressed as a probability of exceeding a predetermined value of one of the plurality of event parameters. </p><p id="p0046" num="0046">[00044] In some embodiments, the probability of exceeding a predetermined value is computed based on a Gaussian distribution with a predetermined expected value and deviation. </p><p id="p0047" num="0047">[00045] In some embodiments, the method further includes executing the at least one rule in serial order and resolving conflicts and triggers actions based on the resolved rules. </p><p id="p0048" num="0048">[00046] In some embodiments, the method further includes monitoring the performance of triggered actions to verify that the actions have been executed to completion. </p><p id="p0049" num="0049"> [00047] In some embodiments, the warning contains a parameterized summary of the event. </p><p id="p0050" num="0050">[00048] In some embodiments, the parameterized summary includes a probability distribution or information for the computation of a probability distribution. </p><p id="p0051" num="0051"> [00049] In some embodiments, the output is produced periodically based upon detection of a predetermined change in at least one of the expected event parameter values. </p><p id="p0052" num="0052"> [00050] In some embodiments, the policy comprises a predicate and an action or a continuous function of input parameters and a continuously varying control output. </p><p id="p0053" num="0053"> [00051] In some embodiments, the method further includes receiving information regarding the status of a device that receives the output of the action processing subsystem and modifies the policy based on the status of the device. </p><p id="p0054" num="0054"> [00052] In some embodiments, the method further includes adjusting the rules based on past data. </p><p id="p0055" num="0055"> [00053] In some embodiments, the method further includes updating the rules in real time. </p><p id="p0056" num="0056">[00054] In some embodiments, the method further includes customizing the rules using a plurality of user interfaces tailored to a user's level of expertise. </p><p id="p0057" num="0057"> [00055] In some embodiments, the probability distribution represents the severity of the event. </p><p id="p0058" num="0058">[00056] In some embodiments, the method further includes sending the output to a speaker or a display to generate a warning message. </p><p id="p0059" num="0059"> [00057] In some embodiments, the method further includes sending the output to energize a relay or control the operation of a motor, engine or turbine. </p><p id="p0060" num="0060"> [00058] In some embodiments, the event is an earthquake and the event parameters include one or more of peak ground jerk, peak ground acceleration, peak ground velocity, peak ground displacement, modified Mercalli intensity, estimated time of arrival of hazardous shaking, and actual time of the arrival of S-waves. </p><p id="p0061" num="0061">[00059] In some embodiments, the method further includes assigning a priority to each policy. 
<!-- EPO <DP n="8"/>-->
 [00060] In some embodiments, the priority is specified through definition order, manually assigned by a user, or changed by the actions of a policy. </p><p id="p0062" num="0062"> [00061] In some embodiments, the rules can reference action states and external system variables. </p><p id="p0063" num="0063">[00062] In some embodiments, a device for distributing warnings regarding an event is provided. The device includes a processor and memory for storing instructions which when executed by the processor causes the processor to: generate one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; receive and monitor data from a sensor system, the data including expected event parameter values and associated deviation metrics; initiate processing of the at least one rule upon detection of a predetermined change in at least one of the expected event parameter values; execute the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule; and generate an output for performing the at least one action triggered by the policy execution subsystem. In some embodiments, the device can be one or more computers or servers. </p><p id="p0064" num="0064"> [00063] In other embodiments, some or all of the instructions described above and herein can be implemented on hardware such as an application-specific integrated circuit. </p><p id="p0065" num="0065">BRIEF DESCRIPTION OF THE DRAWINGS </p><p id="p0066" num="0066">[00064] The novel features of the invention are set forth with particularity in the claims that follow. A better understanding of the features and advantages of the present invention will be obtained by reference to the following detailed description that sets forth illustrative embodiments, in which the principles of the invention are utilized, and the accompanying drawings of which: </p><p id="p0067" num="0067"> [00065] Figure 1 is a data flow diagram depicting the processing of inputs and the generation of alert outputs. </p><p id="p0068" num="0068"> [00066] Figure 2 is a graphical representation of a hypothetical policy. </p><p id="p0069" num="0069">[00067] Figure 3 is a representation of the probability distribution of estimated ground motions in an example event, showing the mean and standard deviation of the estimate. </p><p id="p0070" num="0070">[00068] Figure 4 is a representation of the probability of exceeding any ground motion, superimposed on the hypothetical policy from Figure 2, showing actions which are initiated and actions which are not, based on the example probability curve. 
<!-- EPO <DP n="9"/>-->
 [00069] Figure 5 is a depiction of an example of the data flow through the Policy Engine showing the various inputs, policies, and control actions that may be defined for a particular application. </p><p id="p0071" num="0071"> [00070] Figure 6 is a graph illustrating fan speed as a function of expected intensity of an earthquake. </p><p id="p0072" num="0072">DETAILED DESCRIPTION </p><p id="p0073" num="0073">[00071] In some embodiments, a Policy Engine comprises five functional subsystems: a policy specification subsystem 1, a policy execution subsystem 4, a change detection subsystem 3, an action processing subsystem 5, and a traceback subsystem 6. Refer to the block diagram in Figure 1. The change detection subsystem can receive real-time event data from an earthquake warning system 30, which receives and processes data from an earthquake sensor 29, as described for example in International Patent Application No. PCT/US2011/065733, filed December 19, 2011 and titled "Earthquake Warning System," which is hereby incorporated by reference herein. The change detection subsystem can also receive local state and input data 31. Other earthquake sensors and other hazard sensors can be suitable as well. The action processing subsystem generates outputs 32 that can be sent to a variety of devices and systems as further described below. </p><p id="p0074" num="0074"> [00072] In some embodiments, the policy specification subsystem 1 can be implemented in an Alerting Device or on a server. In some embodiments, an application with a UI and file import (for text-based policy specification) runs on a web server or other app environment (e.g. mobile), or on a computer (desktop) and communicates with the Alerting Device either directly (USB) or through an Internet connection. Compilation of policies into the internal form needed by the Alerting Device or servers is done in the application (to provide immediate feedback to the user). Storage of the policies (and their internal representations) can be in a database, file, or any other suitable data storage structure, in the Alerting Device or on a server. </p><p id="p0075" num="0075">[00073] In some embodiments, the policy execution subsystem 4 can also reside in the Alerting Device or on a server. In some embodiments, the Alerting Device is a standalone hardware device that includes control outputs and information security features for </p><p id="p0076" num="0076">communication. The alerting device can also be some other dedicated hardware device, such as an industrial controller or computer, running the Policy Engine software. Except in cases where the control output is a software protocol (like an SNMP trap message), the Alerting Device has physical outputs, such as audio and/or relay contacts for example, used to communicate the alert to other devices to initiate their protective responses, as further described below. 
<!-- EPO <DP n="10"/>-->
 [00074] In some embodiments, the change detection subsystem 3 can also reside in the</p><p id="p0077" num="0077">Alerting Device to initiate the recomputation of the policies leading to updated control and alert outputs. This subsystem receives messages from the Earthquake Warning System (via the</p><p id="p0078" num="0078">Internet or other data communication system for example) or messages from other information sources whose outputs or states are referenced in the policies. This subsystem may also have physical inputs (digital, voltage, or current, etc.) that are used to monitor states or values referenced in the policies (this might include, for example, the running status of a machine to be controlled, such as fan speed - mentioned below). </p><p id="p0079" num="0079"> [00075] In some embodiments, the action processing subsystem 5 can be software running in the Alerting Device that executes policy actions and directly manages alert and control outputs as further described below. This software is responsible for manipulating the outputs to produce the desired control response in the equipment or system interfaced to the Alerting Device. </p><p id="p0080" num="0080">[00076] In some embodiments, the traceback subsystem 6 can be software running in the Alerting Device to monitor the operation of the other subsystems. It also can have access to all or some of the inputs (messages or polled) so that a complete record of the stimulus and response during the earthquake warning period can be recorded. The trace data is written into non-volatile storage (such as FLASH) in the Alerting Device and can be sent to remote systems (such as a server) for off-site archive. A database or log file is an example of a way the trace data can be stored, where the database can be on a server and the log file can be written in FLASH. </p><p id="p0081" num="0081"> Policies </p><p id="p0082" num="0082"> [00077] A policy defines an action to be taken under specific conditions. Each policy can comprise a rule and an associated action. A rule can be described as a Boolean predicate or a continuous function (referred to as a fuzzy rule). The action can take one of several forms: it assigns an internal state variable, it initiates an external process (such as energizing a relay, starting the streaming of an audio alert, or sending a message), it initiates an internal process (such as changing a device's operating parameters), or it modifies the policy engine itself (such as transitioning to a higher state of alert in which policies may be different), or any combination of these. </p><p id="p0083" num="0083"> [00078] A predicate is a Boolean rule which, when its value changes, causes some specified action or actions to be performed. The predicate is an arbitrary expression of input and state variables. A fuzzy rule is used to express a range of possible responses. For example, the speed of a rotating machine may be reduced for small events and eventually stopped for large events. A namespace defines available inputs for rules and outputs for actions. 
<!-- EPO <DP n="11"/>-->
 Policy Specification </p><p id="p0084" num="0084"> [00079] The policy specification subsystem 1 accepts policy definitions in human readable forms and converts them into an internal form used by the policy execution subsystem 4. Policies can be captured in several different representations including statements in a formal language, XML documents, graphical diagrams, or other forms. </p><p id="p0085" num="0085">[00080] Some typical examples include: </p><p id="p0086" num="0086"> if (predicate_specification) then action_specification </p><p id="p0087" num="0087"> continuous_function (fuzzy_specification) </p><p id="p0088" num="0088"> &lt;policy&gt; </p><p id="p0089" num="0089"> &lt;predicate&gt;predicate_specification&lt;/predicate&gt; </p><p id="p0090" num="0090"> &lt;action&gt;action_specification&lt;/action&gt; </p><p id="p0091" num="0091"> &lt;/policy&gt; </p><p id="p0092" num="0092"> &lt;policy&gt; </p><p id="p0093" num="0093"> &lt;fuzzy&gt;fuzzy_specification&lt;/ fuzzy&gt; </p><p id="p0094" num="0094"> &lt;action&gt;action_specification&lt;/action&gt; </p><p id="p0095" num="0095"> &lt;/policy&gt; </p><p id="p0096" num="0096"> [00081] In the example provided above, "predicate_specification" is a Boolean expression. The preferred embodiment uses the following general expression grammar: expression simpleExpression ( relationalOp simpleExpression )? </p><p id="p0097" num="0097"> relationalOp <sub>'&lt;</sub>» I -<sub>&lt;</sub>=<sub>'</sub> I ·==· I »;=» I <sub>'&gt;</sub>=<sub>'</sub> I ·<sub>&gt;</sub>- simpleExpression term ( addOperator simpleExpression )? </p><p id="p0098" num="0098"> addOperator '+' I '-' I Or' I ΊΓ </p><p id="p0099" num="0099"> term factor ( factor mulOperator term )? </p><p id="p0100" num="0100"> mulOperator <sup>■</sup>*<sup>■</sup> I '/' I 'di I 'mod' | 'and' | '&amp;&amp;' </p><p id="p0101" num="0101"> factor literalConstant | variable | function | </p><p id="p0102" num="0102"> unaryOperator factor | '(' expression ')' </p><p id="p0103" num="0103"> unaryOperator '+' I '-' I 'not' </p><p id="p0104" num="0104"> literalConstant integerLiteral | realLiteral | stringLiteral </p><p id="p0105" num="0105"> integerLiteral [0-9]+ </p><p id="p0106" num="0106"> realLiteral integerLiteral '.' integerLiteral | </p><p id="p0107" num="0107"> integerLiteral ( '.' integerLiteral )? Έ' scaleFactor </p><p id="p0108" num="0108"> scaleFactor [+-]? integerLiteral </p><p id="p0109" num="0109"> stringLiteral "" any_printing_character_or_escaped_quote+ "" 
<!-- EPO <DP n="12"/>-->
 variable = simpleVariable | compoundVariable </p><p id="p0110" num="0110"> simpleVariable = identifier </p><p id="p0111" num="0111"> identifier = [a-zA-Z] [a-zA-Z0-9J* </p><p id="p0112" num="0112"> compoundVariable = simpleVariable ( '.' propertyOrFunction )+ </p><p id="p0113" num="0113"> propertyOrFunction = identifier ( '(' expression ( ',' expression )? ')' )? </p><p id="p0114" num="0114">Rule Namespace </p><p id="p0115" num="0115"> [00082] The rule namespace contains an object, event, which contains all event parameters as reported by the EWS or obtained through local measurements. The event object has the following child objects: </p><p id="p0116" num="0116"> eventjerk - peak ground jerk (broadband or in a designated frequency band) </p><p id="p0117" num="0117"> eventacceleration - peak ground acceleration (broadband or in a designated frequency band) eventvelocity - peak ground velocity (broadband or in a designated frequency band) event.displacement - peak ground displacement (broadband or in a designated frequency band) </p><p id="p0118" num="0118"> eventmmi - Modified Mercalli Intensity or Instrumental Intensity, defined internally as a function of eventjerk, event.acceleration, eventvelocity and event.displacement event eta - estimated time in seconds until the arrival of hazardous shaking </p><p id="p0119" num="0119"> eventtoa - actual (detected) time of the arrival of S-waves. </p><p id="p0120" num="0120">[00083] Each of the physical objects (mmi, jerk, acceleration, velocity, and displacement) has the following methods: </p><p id="p0121" num="0121"> poe (level, [band]) - returns the probability of exceeding specified level in specified band or broadband </p><p id="p0122" num="0122"> roc ([band]) - returns the rate of change of a property in a specified band or broadband </p><p id="p0123" num="0123">[00084] The eta object also has a roc() method. </p><p id="p0124" num="0124"> [00085] Each of the event child objects has the following data series objects which are vectors assembled by the Policy Engine from data sent by the EWS in warning update messages: </p><p id="p0125" num="0125"> ev - a time series of expected values as reported by the EWS in a series of updates, </p><p id="p0126" num="0126"> dev - a time series of standard deviations as reported by the EWS in a series of updates. obs - a time series of observation times of ev and dev. </p><p id="p0127" num="0127"> [00086] These data series objects have the following properties and methods: </p><p id="p0128" num="0128"> Dum - number of elements in the time series, </p><p id="p0129" num="0129"> latest - the latest value received in an EWS update. 
<!-- EPO <DP n="13"/>-->
 mean - the mean of the values received. </p><p id="p0130" num="0130"> roc() - rate of change of the data. </p><p id="p0131" num="0131"> In some embodiments, num, latest, mean, and roc() data can be provided by a remote server rather than derived from a local history (i.e. offloaded to the server). </p><p id="p0132" num="0132">[00087] Some examples of the use of these objects in a predicate expression: </p><p id="p0133" num="0133"> /* probability of PGV exceeding 70cm/s is greater than 50% */ </p><p id="p0134" num="0134"> event. velocity. poe (70) &gt; 0.5 </p><p id="p0135" num="0135"> /* probability of PGA in the 3.0Hz band exceeding 0.7cm/s/s is greater than or equal to 65%</p><p id="p0136" num="0136">*/ </p><p id="p0137" num="0137"> event.acceleration.poe (0.7, 3.0) &gt;= 0.65 </p><p id="p0138" num="0138"> /* probability of PGA exceeding 120 cm/s/s or velocity exceeding 450 cm/s &gt; 50% */ event.acceleration.poe (120) &gt; 0.5 or event. velocity.poe (450) &gt; 0.5 </p><p id="p0139" num="0139"> [00088] Other equivalent ways of expressing these expressions can also be provided as required to assist users in expressing their intentions. </p><p id="p0140" num="0140">[00089] Figure 2 shows a graphical representation of a hypothetical policy. The policy is composed of three rules: </p><p id="p0141" num="0141"> 1. if event.acceleration.poe (3.16) &gt;= 0.8 then action_A see (7) </p><p id="p0142" num="0142"> 2. if event.acceleration.poe (31.6) &gt;= 0.6 then action_B see (8) </p><p id="p0143" num="0143"> 3. if event.acceleration.poe (100) &gt;= 0.1 then action_C see (9) </p><p id="p0144" num="0144">[00090] In any event, any number of these actions may be initiated depending on the combination of the estimated intensity of shaking and the uncertainty in the estimate. </p><p id="p0145" num="0145">[00091] Rate-of-change can be applied to any variable or input. Operators work on all classes of inputs. </p><p id="p0146" num="0146"> [00092] Policy priority is specified explicitly through definition order. Manual priority can also be assigned. Priorities can be changed by the actions of a policy (elevate some policies based on previous policies being triggered). </p><p id="p0147" num="0147"> [00093] Rules can refer to past history (useful, for example, for reducing the threshold for action once a large event has occurred under the assumption that damage has increased vulnerabilities). Past history including past data and historic data can be stored in a database that can be accessed by the policy specification subsystem or any other subsystem. In addition, realtime data can be added to the database so that the database is up to date. </p><p id="p0148" num="0148">[00094] Rules can refer to system variables in the system implementing the Policy Engine. This namespace can be extended by adding names from other namespaces along with access and monitoring functions. 
<!-- EPO <DP n="14"/>-->
 [00095] Rules can reference action states (what has already been initiated) and external system variables (such as switches and imported data). </p><p id="p0149" num="0149"> [00096] A policy can also describe a continuous function using a fuzzy rule. This rule defines a relationship between an output control variable (like fan speed) and the expected shaking intensity. One such rule is shown in Figure 6. In this example, the fan speed is gradually reduced to zero as the expected intensity goes to MMI IX. This approach balances the risk of damage with the benefits of continued operation. The policy definition for this might be: </p><p id="p0150" num="0150"> if (expected mmi &lt; 6 then fan_speed = normal; </p><p id="p0151" num="0151"> if (expected mmi &gt; 9 then fan speed = off; </p><p id="p0152" num="0152"> if (expected mmi &gt;= 6 then fan_speed = normal*(9-expected_value)/3 </p><p id="p0153" num="0153"> [00097] These become fuzzy because the truth of the expression "expected mmi &lt; 6" is not binary, but provided as a probability of exceedance. </p><p id="p0154" num="0154"> Change Detection Subsystem </p><p id="p0155" num="0155"> [00098] The change detection subsystem 3 monitors all variables for changes as messages are received from the local sensor analysis system or from remote systems. When new data arrives, if any of the values change, the rules execution subsystem is notified to process its rules. This allows rules to be updated as soon as conditions change so that actions can be initiated quickly.</p><p id="p0156" num="0156">The change detection subsystem monitors all variables that are referenced by existing rules, informing the rules execution subsystem that a change has occurred only for those variables. Changes in variables that do not affect existing rules do not cause the rules execution subsystem to be invoked. In some embodiments, the change detection system can be agnostic as to the magnitude of the change, but each rule can be written to only consider a certain level of change significant enough to act on. </p><p id="p0157" num="0157"> [00099] For example, in some embodiments, the new data arrives at the change detection subsystem through messages or input monitoring. In the case of a message or event of some kind, such as an update message, the change can be quantized in time due to the nature of the message, which provides a sample of the input at some discrete time. When a new message arrives, if the value of the input is different than the value received previously, then the policies using that value are updated and/or recomputed. </p><p id="p0158" num="0158">[000100] In the case of a monitored or polled input, the input may be noisy. In some embodiments, a polling interval can be used to quantize (in time) the impact of changes in much the same way as the input messages mentioned above. In some embodiments, polling using a rate-limiting approach is accomplished by sampling the data at a predetermined time interval or at predetermined points in time. Input sampling is usually periodic, such as once per second or greater or less than once per second, and this periodicity limits how often the input can have an 
<!-- EPO <DP n="15"/>-->
 affect regardless of how noisy the data is. In addition or alternatively, input filtering (like a low- pass filter), and minimum thresholds for initiating a change can also be used. In some embodiments, low-pass or band-pass filtering can be used to reduce the noise on an input. For example, if an input is expected to change no more frequently than once a second, a lHz low- pass filter will reduce or filter out any changes that occur more frequently. In some </p><p id="p0159" num="0159">embodiments, a hysteresis can also be specified to reduce the effect of a noisy input and prevent spurious change detections. In this context, hysteresis refers to a threshold that is higher when the input is increasing and lower when it is decreasing, which creates a dead-band between the two thresholds that prevents small changes from causing output changes. In some embodiments, both rate-limiting and hysteresis can be used. In other embodiments, different combinations of the above techniques of processing noisy data can be used. </p><p id="p0160" num="0160"> [000101] Figure 3 shows a probability distribution of estimated intensity for an example event. This represents a snapshot in time; the estimate will change and be updated over time. The change detection subsystem will identify these changes. In Figure 3, the curve represents the likelihood of a given level of peak ground acceleration and follows the form of a Gaussian</p><p id="p0161" num="0161">(normal) distribution. This is the preferred embodiment of the probability distribution, but others are possible. The expected value of ground motion is represented by the mean 10 of the probability distribution in the preferred embodiment. In the preferred embodiment the uncertainty in the estimated ground motion is represented by the standard deviation 11 of the probability distribution. Other metrics are possible, such as full-width-at-half-maximum 12 or 95% confidence interval 13. The EWS communicates the expected value metric and the deviation metric to the policy engine in real time, and the value of these metrics is monitored by the change detection subsystem. When the expected value or the deviation changes, the rules execution subsystem is notified to process its rules. </p><p id="p0162" num="0162"> Policy Execution Subsystem </p><p id="p0163" num="0163"> [000102] The policy execution subsystem 4 processes the policies and triggers actions as indicated. Policies may trigger actions that are contradictory. To detect this, all actions are aggregated and conflicts resolved before passing action events to the action processing subsystem 5. </p><p id="p0164" num="0164">[000103] Policy processing occurs whenever there is a change on any input referenced by any policy. This is only affected by the rate limiting specification. Fuzzy control updates can be further restricted to changing only when the change will exceed some threshold. In some embodiments, this can be handled in the change subsystem by quantizing the inputs either in time (rate-limiting) or value (through change thresholds or filtering). Hysteresis, as described 
<!-- EPO <DP n="16"/>-->
 similarly above, can also be specified in the policy execution subsystem for any control output to prevent small changes in policy inputs from causing the control to change state. </p><p id="p0165" num="0165"> Rule Specification </p><p id="p0166" num="0166"> [000104] Each rule is processed by evaluating the predefined methods outlined in the Policies Specification and comparing it with the threshold value in the predicate expression. The functional forms of the built-in methods in the preferred embodiment are: real prob = poe(real level, optional real band) { </p><p id="p0167" num="0167"> (real ev, real dev, real time) = get_metrics(l, band); </p><p id="p0168" num="0168"> prob = probabilify_function(ev, dev, level); </p><p id="p0169" num="0169"> } roc(int W, optional real band) { </p><p id="p0170" num="0170"> /* W = desired window length for rate calculations */ </p><p id="p0171" num="0171"> (real* ev, real* dev, real* time) = get_metrics(W, band); </p><p id="p0172" num="0172"> rate = rate_function(ev, dev, time); </p><p id="p0173" num="0173"> } </p><p id="p0174" num="0174">(real* ev, real* dev, real* time) = get_metrics(int window, real band) { </p><p id="p0175" num="0175"> for int J=l : window { </p><p id="p0176" num="0176"> int sample = [most recent sample] - J + 1 ; </p><p id="p0177" num="0177"> if (band == 0) { </p><p id="p0178" num="0178"> (ev(J), real maxband) = max([expected va/we](sample)); </p><p id="p0179" num="0179"> dev(J) = [deviation] (sample)(maxband); </p><p id="p0180" num="0180"> } else { </p><p id="p0181" num="0181"> ev(J) = [expected v«/«e](sample)(band); </p><p id="p0182" num="0182"> dev(J) = [ifevz<sup>'</sup>at o«](sample)(band); </p><p id="p0183" num="0183"> } </p><p id="p0184" num="0184"> time(J) = [observation time] (sample); </p><p id="p0185" num="0185"> } </p><p id="p0186" num="0186"> } </p><p id="p0187" num="0187"> [000105] The function probability_f unction takes three arguments: </p><p id="p0188" num="0188"> expected value: the most likely value of the object as determined by the EWS. In the </p><p id="p0189" num="0189"> preferred embodiment, expressed as an arithmetic mean. Other expressions are possible. 
<!-- EPO <DP n="17"/>-->
 deviation: an expression of the uncertainty in the measurement, as determined by the EWS.</p><p id="p0190" num="0190">In the preferred embodiment, expressed as a standard deviation. May also be expressed as variance, full width at half maximum, or 95% confidence interval. Other expressions are possible. </p><p id="p0191" num="0191"> level: the desired threshold value for the object, at which the probability of exceedance is calculated. </p><p id="p0192" num="0192"> [000106] The function returns the probability of exceedance, using one of the following techniques: </p><p id="p0193" num="0193"> function: any continuous function such as a cumulative distribution function that is defined over all possible values of level. In the preferred embodiment, the cumulative distribution function of a normal distribution: </p><p id="p0194" num="0194">P evel)</p><p id="p0195" num="0195"><img id="imgf000017_0001" he="19" wi="42" file="imgf000017_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0196" num="0196"> where level is expressed either in linear or logarithmic form. Other functions are possible. A Cauchy distribution follows the form </p><p id="p0197" num="0197"> 1 . level - ev 1</p><p id="p0198" num="0198"> (/eve/) = -tan + - π dev </p><p id="p0199" num="0199"> while a Laplace distribution follows the form </p><p id="p0200" num="0200"> 1 </p><p id="p0201" num="0201"> P(level) = - 1 + sgn (level - ev\ 1 - e table: a lookup table of probabilities and levels defined over all possible values of level. </p><p id="p0202" num="0202"> Example: </p><p id="p0203" num="0203"><img id="imgf000017_0002" he="21" wi="45" file="imgf000017_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/></p><p id="p0204" num="0204">[000107] This example is equivalent to a degenerate case in which the expected value is considered to be errorless (i.e., dev = 0). A more generic example might be: </p><p id="p0205" num="0205"><img id="imgf000017_0003" he="21" wi="56" file="imgf000017_0003.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/><!-- EPO <DP n="18"/>--><img id="imgf000018_0001" he="23" wi="57" file="imgf000018_0001.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="yes"/>
 which is an approximation of a normal distribution with mean 3.5 and standard deviation 1. interpolated table: similar to the table technique, except values of level between the values in the table are interpolated. Example: </p><p id="p0206" num="0206">Level Probability </p><p id="p0207" num="0207">&gt;ev - dev AND &lt;ev Linearly </p><p id="p0208" num="0208"> + dev interpolated 
<img id="imgf000018_0002" he="11" wi="72" file="imgf000018_0002.tif" img-format="tif" img-content="drawing" orientation="portrait" inline="no"/>
 </p><p id="p0209" num="0209">[000108] Other techniques are possible. </p><p id="p0210" num="0210"> [000109] The function rate_function takes three array arguments: </p><p id="p0211" num="0211"> expected value array: an array of the last W expected value metrics from the EWS. </p><p id="p0212" num="0212"> deviation array: an array of the last W deviation metrics from the EWS. </p><p id="p0213" num="0213"> time array: an array of times at which the EWS generated the above metrics. </p><p id="p0214" num="0214">[000110] The function returns the rate of change of the object based on the values of the arguments. </p><p id="p0215" num="0215"> [000111] Figure 4 shows the probability of exceedance function for the example event shown in Figure 3. The curve is the cumulative distribution function of the Gaussian in Figure 3, and the hypothetical policy from Figure 2 is superimposed on this curve. The curve represents the return value on the y-axis of event.acceleration.poe for input values along the x-axis. In this representation, any rules which fall to the left of the curve are executed and are plotted as circles, while rules which fall on the right of the curve are not executed and are plotted as diamonds. Using the example of the hypothetical policy from Figure 2: </p><p id="p0216" num="0216">1. event.acceleration.poe (3.16) = 0.97, therefore action_A is initiated (see 14) </p><p id="p0217" num="0217"> 2. event.acceleration.poe (31.6) = 0.5, therefore action_B is not initiated (see 15) 
<!-- EPO <DP n="19"/>-->
 3. event.acceleration.poe (100) = 0.15, therefore action_C is initiated (see 16) </p><p id="p0218" num="0218">[000112] As the expected value and deviation metrics are updated, these rules are re-evaluated. Actions which are not initiated in Figure 4 may be subsequently initiated when new information becomes available. Likewise, actions which are initiated in Figure 4 may be subsequently terminated, or may be allowed to proceed depending on the action definition (see below). </p><p id="p0219" num="0219"> Action Processing Subsystem </p><p id="p0220" num="0220">[000113] The actions processing subsystem 5 is responsible for performing the actions triggered by the policy execution subsystem 4. Many of these actions require sustained monitoring, such as streaming an audio alert message or controlling equipment requiring a multi- step interface. The actions processing subsystem is responsible for ensuring that all initiated actions are completed. The rules execution subsystem may initiate subsequent actions that cancel previous actions. One such example is a streaming audio alert message that may be replaced by a more urgent message if the estimated shaking greatly increases. The actions processing subsystem is responsible for terminating the streaming of the previous message and starting the new one. </p><p id="p0221" num="0221"> [000114] An action can be a continuous function of input parameters. </p><p id="p0222" num="0222">[000115] An example of continuous action: maintain a motor's speed for estimated intensities below MMI VI. At MMI VI begin to decrease the motor's speed until the motor is running at half speed at MMI VIII. If the intensity will be above MMI VIII, shut the motor down. The motor may be in a ventilation fan which should be kept running as long as possible, but can be damaged if running during high intensity shaking. </p><p id="p0223" num="0223"> [000116] Actions can be rate-limited to avoid initiating them too rapidly if inputs are changing rapidly. </p><p id="p0224" num="0224"> [000117] Hysteresis can be specified. </p><p id="p0225" num="0225">[000118] Actions can be bi-stable; once triggered they cannot be re-triggered without an explicit reset. </p><p id="p0226" num="0226"> [000119] Actions can have start, pause, re-trigger, and stop operations. </p><p id="p0227" num="0227">[000120] Actions can run local scripts. </p><p id="p0228" num="0228"> [000121] Actions can set local variables to be used by other policies. </p><p id="p0229" num="0229">[000122] Actions can send data to remote devices. </p><p id="p0230" num="0230"> [000123] Each action describes what is to be done to start and complete the task. Some examples: </p><p id="p0231" num="0231">/* turn a relay on for 1 second, then turn it off */ </p><p id="p0232" num="0232"> set relay on for 1 second then off 
<!-- EPO <DP n="20"/>-->
 /* stream an audio alert comprising a klaxon sound and a voice message, repeating until stopped */ </p><p id="p0233" num="0233"> loop ( play ( klaxon sound ); play ( voice_message ) ) until reset </p><p id="p0234" num="0234">[000124] Each action definition also includes what must be done to retrigger or terminate it. An example action to open a door might be defined as follows: door { </p><p id="p0235" num="0235"> start: set relay_l on for 1 second then off; </p><p id="p0236" num="0236"> retrigger: set relay l on for 1 second then off; </p><p id="p0237" num="0237"> stop: set relay 1 off; </p><p id="p0238" num="0238">In some embodiments, this is another way to handle the consequences of input changes that might cause a control to switch on/off/on. An action can be defined such that, once started, the only way to turn it off is a separate reset condition (like a manual input or a timer). This also reduces the consequences of noisy inputs. For example, once over the threshold, the action can be started and the inputs can be ignored until the reset condition is satisfied, such as waiting for predetermined period of time. </p><p id="p0239" num="0239"> [000125] An action to stream an audio alert message might be defined as follows: audio_alert { </p><p id="p0240" num="0240"> start: loop ( play ( klaxon_sound ); play ( voicejmessage ) ) until stop; </p><p id="p0241" num="0241"> retrigger: ; </p><p id="p0242" num="0242"> stop: ; </p><p id="p0243" num="0243"> } </p><p id="p0244" num="0244"> [000126] These definitions can be supplied with a formal language, XML format, or other representations. The preferred embodiment uses the following syntax (EBNF): </p><p id="p0245" num="0245">:= action_name ( '(' ( parameter )+ ')' )? '{' ( action_spec )+ '}' </p><p id="p0246" num="0246"> := identifier </p><p id="p0247" num="0247"> := identifier </p><p id="p0248" num="0248"> := start_spec | retrigger_spec | stop_spec </p><p id="p0249" num="0249"> := 'start' ':' compound_statement ';' 
<!-- EPO <DP n="21"/>-->
 retrigger_spec :: <sup>;</sup> 'retrigger' ':' compound_statement ';' </p><p id="p0250" num="0250"> stop_spec :: <sup>:</sup> 'stop' ':' compound_statement ';' </p><p id="p0251" num="0251"> compound statement ::= statement | statement_block </p><p id="p0252" num="0252"> statement block <sup>:</sup> '{' ( statement )+ '}' </p><p id="p0253" num="0253"> statement <sup>:</sup> set_statement | loop_statement | function_statement </p><p id="p0254" num="0254"> set statement 'set' variable '=' value ( 'for' duration ( 'then' value )? )? </p><p id="p0255" num="0255"> value <sup>:</sup> boolean | integer | real | string </p><p id="p0256" num="0256"> boolean On<sup>*</sup> I Off I 'true' | false' </p><p id="p0257" num="0257"> duration float </p><p id="p0258" num="0258"> loop statement 'loop' statement_block 'until' condition </p><p id="p0259" num="0259"> condition expression </p><p id="p0260" num="0260"> function_statement function_name '(' ( parameter )* ')' </p><p id="p0261" num="0261"> function name identifier </p><p id="p0262" num="0262">[000127] Functions can be defined within the Policy Engine or can reference external procedures either by executing programs in the local environment, using remote procedure calls, or some other similar method. For example: script ( bash, "snmptrap server -p alert 0 0 6" ) </p><p id="p0263" num="0263">Executes the command "snmptrap server -p 0 0 6" using the bash shell. </p><p id="p0264" num="0264"> Traceback Subsystem </p><p id="p0265" num="0265"> [000128] All operations of the Policy Engine are logged using the traceback subsystem 6 so that the behavior of the system can be examined later to evaluate its performance and provide an audit trail for control actions taken. This information is useful for updating rules and for validating system operation. </p><p id="p0266" num="0266"> [000129] In some embodiments, all or some of the above mentioned subsystems are integrated into a single application. In other embodiments, some or all of the above mentioned subsystems are run as independent processes or as threads. All such system partitions are included in this disclosure. </p><p id="p0267" num="0267"> Policy Inputs </p><p id="p0268" num="0268"> [000130] Policies can operate on parametric information provided by the EWS, as represented in the event object (see above). Policies can also generate local state which can be used by other policies. Policies can also monitor external variables, such as real-time equipment status. These are depicted in Figure 5. 
<!-- EPO <DP n="22"/>-->
 Multiple Policies </p><p id="p0269" num="0269"> [000131] Figure 5 shows one example of the data flow through the Policy Engine. Inputs (17-19) feed the policies (20-25) which initiate several control actions (26-28) for various conditions. Note that several policies may initiate the same action response. For example: </p><p id="p0270" num="0270"> if event.mmi.poe (9) &gt;= 0.8 then initiate action l </p><p id="p0271" num="0271"> — policy 1 </p><p id="p0272" num="0272"> if event.mmi.poe (9) &gt;= 0.5 and unsafe condition == true then initiate actionj </p><p id="p0273" num="0273"> — policy 2 </p><p id="p0274" num="0274"> if event.mmi.poe (7) &gt;= 0.8 and vulnerable_condition == true then initiate_action_l </p><p id="p0275" num="0275"> -- policy 3 </p><p id="p0276" num="0276"> [000132] In normal operation the equipment will be able to ride out very strong shaking without damage, so shut down is not initiated unless violent shaking is expected with high confidence (policy 1). However, if the equipment is in some unsafe state (such as interacting with an operator) shut down is initiated at lower confidence levels (policy 2), as failure is likely to cause injury to exposed personnel and the associated cost is greater. If the equipment is in a condition of heightened vulnerability (such as in some mode of operation, like self-calibration), shut down is initiated at a lower level of expected shaking (policy 3). </p><p id="p0277" num="0277"> Policy Conflict Resolution </p><p id="p0278" num="0278">[000133] When multiple policies control the same actions, control conflicts may arise. In the example above, the policies are defining different thresholds for initiating an action. A simple OR of the rule outputs is sufficient. In more complex scenarios, a more sophisticated approach is needed. Take the example of a commuter train. Normal deceleration can slow the train by 3.5km/hr/s and emergency deceleration can slow it by 5 km/hr/s. The goal is to reduce the speed of the train sufficiently to prevent derailments. Emergency deceleration of the train raises the likelihood of injuries to passengers, so normal deceleration is the default choice. However, if the time needed to slow the train is greater than the time until the arrival of the shock waves, emergency deceleration is warranted. The policies might look like: </p><p id="p0279" num="0279"> if event.mmi.poe (7) &gt;= 0.5 then decelerate(normal) </p><p id="p0280" num="0280"> — policy 1 </p><p id="p0281" num="0281"> if event.mmi.eta () &lt; ( current_velocity - safe_velocity ) / 3.5 then decelerate(emergency)</p><p id="p0282" num="0282">~ policy 2 </p><p id="p0283" num="0283"> [000134] The variables used in the rules are either real-time parameters from the system to be controlled (current_velocity) or predefined constants (safe_velocity). These two policies are in 
<!-- EPO <DP n="23"/>-->
 conflict since they are commanding the train to decelerate at different rates. A precedence policy can be defined that directs the proper response: </p><p id="p0284" num="0284"> precedence: decelerate(emergency &gt; normal) </p><p id="p0285" num="0285">[000135] Or precedence can be inferred from the order in which the policies are specified. Or each policy can be marked with an explicit precedence. </p><p id="p0286" num="0286"> User Policy Capture </p><p id="p0287" num="0287"> [000136] The detailed language and specification discussed above allows an expert to express flexible and sophisticated rules for alert policies. This level of detail is not needed for all users. Any number of simpler methods of capturing policies can be implemented that present the end user with a simpler set of choices. These are mapped into the underlying rules specifications automatically. Among such methods are: </p><p id="p0288" num="0288"> Selecting from pre-defined templates tailored for particular applications. </p><p id="p0289" num="0289"> Providing a graphical method for specifying policies. </p><p id="p0290" num="0290"> Showing a simulation of Policy Engine response to permit policy refinements. </p><p id="p0291" num="0291">[000137] Variations and modifications of the devices and methods disclosed herein will be readily apparent to persons skilled in the art. As such, it should be understood that the foregoing detailed description and the accompanying illustrations, are made for purposes of clarity and understanding, and are not intended to limit the scope of the invention, which is defined by the claims appended hereto. Any feature described in any one embodiment described herein can be combined with any other feature of any of the other embodiment whether preferred or not. </p><p id="p0292" num="0292">[000138] It is understood that the examples and embodiments described herein are for illustrative purposes only and that various modifications or changes in light thereof will be suggested to persons skilled in the art and are to be included within the spirit and purview of this application and scope of the appended claims. All publications, patents, and patent applications cited herein are hereby incorporated by reference for all purposes. 
</p></description><claims mxw-id="PCLM44726058" ref-ucid="WO-2012116367-A2" lang="EN" load-source="patent-office"><claim-statement><!-- EPO <DP n="24"/>-->CLAIMS What is claimed is: </claim-statement><claim id="clm-0001" num="1"><claim-text> 1. A system for distributing warnings regarding an event, the system comprising: a policy specification subsystem for generating one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; </claim-text><claim-text> a change detection subsystem for receiving and monitoring data from a sensor system, the data including expected event parameter values and associated deviation metrics; </claim-text><claim-text> a policy execution subsystem for executing the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule, wherein the policy execution subsystem initiates processing of the at least one rule after receiving instructions from the change detection subsystem, wherein the change detection subsystem sends instructions to the policy execution subsystem upon detection of a predetermined change in at least one of the expected event parameter values; and an action processing subsystem for generating an output for performing the at least one action triggered by the policy execution subsystem. </claim-text></claim><claim id="clm-0002" num="2"><claim-text>2. The system of claim 1 , further comprising a traceback subsystem that logs the operations of each subsystem to fixed media for evaluation following an event. </claim-text></claim><claim id="clm-0003" num="3"><claim-text>3. The system of claims 1 or 2, wherein the policy specification subsystem can accept input from an end user or third party or a combination of the end user and third party to generate the machine readable policy. </claim-text></claim><claim id="clm-0004" num="4"><claim-text>4. The system of any of the preceding claims, wherein the at least one rule comprises a Boolean predicate. </claim-text></claim><claim id="clm-0005" num="5"><claim-text>5. The system of claims 1-3, wherein the at least one rule comprises a fuzzy rule and the at least one action comprises a continuous action function. </claim-text></claim><claim id="clm-0006" num="6"><claim-text>6. The system of claims 4 or 5 wherein the at least one rule is expressed as a probability of exceeding a predetermined value of one of the plurality of event parameters. <!-- EPO <DP n="25"/>--> </claim-text></claim><claim id="clm-0007" num="7"><claim-text>7. The system of claim 6 wherein the probability of exceeding a predetermined value is computed based on a Gaussian distribution with a predetermined expected value and deviation. </claim-text></claim><claim id="clm-0008" num="8"><claim-text>8. The system of any of the preceding claims, wherein the policy execution subsystem executes the at least one rule in serial order and resolves conflicts and triggers actions based on the resolved rules. </claim-text></claim><claim id="clm-0009" num="9"><claim-text>9. The system of any of the preceding claims, wherein the action processing subsystem monitors the performance of triggered actions to verify that the actions have been executed to completion. </claim-text></claim><claim id="clm-0010" num="10"><claim-text>10. The system of any of the preceding claims, wherein the warning contains a parameterized summary of the event. </claim-text></claim><claim id="clm-0011" num="11"><claim-text>1 1. The system of claim 10 wherein the parameterized summary includes a probability distribution or information for the computation of a probability distribution. </claim-text></claim><claim id="clm-0012" num="12"><claim-text>12. The system of any of the preceding claims wherein the output is produced periodically based upon detection of a predetermined change in at least one of the expected event parameter values. </claim-text></claim><claim id="clm-0013" num="13"><claim-text>13. The system of any of the preceding claims wherein the policy comprises a predicate and an action or a continuous function of input parameters and a continuously varying control output. </claim-text></claim><claim id="clm-0014" num="14"><claim-text>14. The system of any of the preceding claims wherein the policy specification subsystem receives information regarding the status of a device that receives the output of the action processing subsystem and modifies the policy based on the status of the device. </claim-text></claim><claim id="clm-0015" num="15"><claim-text>15. The system of any of the preceding claims wherein the policy specification subsystem adjusts the rules based on past data. </claim-text></claim><claim id="clm-0016" num="16"><claim-text>16. The system of any of the preceding claims wherein the rules are updated in real time. <!-- EPO <DP n="26"/>--> </claim-text></claim><claim id="clm-0017" num="17"><claim-text>17. The system of any of the preceding claims wherein the policy specification subsystem comprises a plurality of user interfaces tailored to a user's level of expertise that allows the user to customize the rules. </claim-text></claim><claim id="clm-0018" num="18"><claim-text>18. The system of claim 11 , wherein the probability distribution represents the severity of the event. </claim-text></claim><claim id="clm-0019" num="19"><claim-text>19. The system of any of the preceding claims, wherein the output is sent to a speaker or a display to generate a warning message. </claim-text></claim><claim id="clm-0020" num="20"><claim-text>20. The system of any of claims 1-18, wherein the output energizes a relay or controls the operation of a motor, engine or turbine. </claim-text></claim><claim id="clm-0021" num="21"><claim-text>21. The system of any of the preceding claims wherein the event is an earthquake and the event parameters include one or more of peak ground jerk, peak ground acceleration, peak ground velocity, peak ground displacement, modified Mercalli intensity, estimated time of arrival of hazardous shaking, and actual time of the arrival of S-waves. </claim-text></claim><claim id="clm-0022" num="22"><claim-text>22. The system of any of the preceding claims wherein each policy is assigned a priority. </claim-text></claim><claim id="clm-0023" num="23"><claim-text>23. The system of claim 22 wherein the priority is specified through definition order, manually assigned by a user, or changed by the actions of a policy. </claim-text></claim><claim id="clm-0024" num="24"><claim-text>24. The system of any of the preceding claims wherein the rules can reference action states and external system variables. </claim-text></claim><claim id="clm-0025" num="25"><claim-text>25. A computer implemented method for distributing warnings regarding an event, the method comprising: </claim-text><claim-text> generating one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; <!-- EPO <DP n="27"/>--> receiving and monitoring data from a sensor system, the data including expected event parameter values and associated deviation metrics; </claim-text><claim-text> initiating processing of the at least one rule upon detection of a predetermined change in at least one of the expected event parameter values; </claim-text><claim-text> executing the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule; and </claim-text><claim-text> generating an output for performing the at least one action triggered by the policy execution subsystem. </claim-text></claim><claim id="clm-0026" num="26"><claim-text>26. The method of claim 25, further comprising logging the operations of each subsystem to fixed media for evaluation following an event. </claim-text></claim><claim id="clm-0027" num="27"><claim-text>27. The method of claims 25 or 26, further comprising accepting input from an end user or third party or a combination of the end user and third party to generate the machine readable policy. </claim-text></claim><claim id="clm-0028" num="28"><claim-text>28. The method of any of claims 25-27, wherein the at least one rule comprises a Boolean predicate. </claim-text></claim><claim id="clm-0029" num="29"><claim-text>29. The method of any of claims 25-27, wherein the at least one rule comprises a fuzzy rule and the at least one action comprises a continuous action function. </claim-text></claim><claim id="clm-0030" num="30"><claim-text>30. The method of claims 28 or 29 wherein the at least one rule is expressed as a probability of exceeding a predetermined value of one of the plurality of event parameters. </claim-text></claim><claim id="clm-0031" num="31"><claim-text>31. The method of claim 30 wherein the probability of exceeding a predetermined value is computed based on a Gaussian distribution with a predetermined expected value and deviation. </claim-text></claim><claim id="clm-0032" num="32"><claim-text>32. The method of any of claims 25-31, further comprising executing the at least one rule in serial order and resolving conflicts and triggers actions based on the resolved rules. <!-- EPO <DP n="28"/>--> </claim-text></claim><claim id="clm-0033" num="33"><claim-text>33. The method of any of claims 25-32, further comprising monitoring the performance of triggered actions to verify that the actions have been executed to completion. </claim-text></claim><claim id="clm-0034" num="34"><claim-text>34. The method of any of claims 25-33, wherein the warning contains a </claim-text><claim-text>parameterized summary of the event. </claim-text></claim><claim id="clm-0035" num="35"><claim-text>35. The method of claim 34 wherein the parameterized summary includes a probability distribution or information for the computation of a probability distribution. </claim-text></claim><claim id="clm-0036" num="36"><claim-text>36. The method of any of claims 25-35 wherein the output is produced periodically based upon detection of a predetermined change in at least one of the expected event parameter values. </claim-text></claim><claim id="clm-0037" num="37"><claim-text>37. The method of any of claims 25-36 wherein the policy comprises a predicate and an action or a continuous function of input parameters and a continuously varying control output. </claim-text></claim><claim id="clm-0038" num="38"><claim-text>38. The method of any of claims 25-37 further comprising receiving information regarding the status of a device that receives the output of the action processing subsystem and modifies the policy based on the status of the device. </claim-text></claim><claim id="clm-0039" num="39"><claim-text>39. The method of any of claims 25-38 further comprising adjusting the rules based on past data. </claim-text></claim><claim id="clm-0040" num="40"><claim-text>40. The method of any of claims 25-39 further comprising updating the rules in real time. </claim-text></claim><claim id="clm-0041" num="41"><claim-text>41. The method of any of claims 25-40 further comprising customizing the rules using a plurality of user interfaces tailored to a user's level of expertise. </claim-text></claim><claim id="clm-0042" num="42"><claim-text>42. The method of claim 25-41, wherein the probability distribution represents the severity of the event. </claim-text></claim><claim id="clm-0043" num="43"><claim-text>43. The method of any of claims 25-42, further comprising sending the output to a speaker or a display to generate a warning message. <!-- EPO <DP n="29"/>--> </claim-text></claim><claim id="clm-0044" num="44"><claim-text>44. The method of any of claims 25-42, further comprising sending the output to energize a relay or control the operation of a motor, engine or turbine. </claim-text></claim><claim id="clm-0045" num="45"><claim-text>45. The method of any of claims 25-44 wherein the event is an earthquake and the event parameters include one or more of peak ground jerk, peak ground acceleration, peak ground velocity, peak ground displacement, modified Mercalli intensity, estimated time of arrival of hazardous shaking, and actual time of the arrival of S-waves. </claim-text></claim><claim id="clm-0046" num="46"><claim-text>46. The method of any of claims 25-45 further comprising assigning a priority to each policy. </claim-text></claim><claim id="clm-0047" num="47"><claim-text>47. The method of claim 46 wherein the priority is specified through definition order, manually assigned by a user, or changed by the actions of a policy. </claim-text><claim-text>48. The method of any of claims 25-47 wherein the rules can reference action states and external system variables. </claim-text></claim><claim id="clm-0048" num="48"><claim-text>48. A device for distributing warnings regarding an event, the device comprising: a processor and memory for storing instructions which when executed by the processor causes the processor to: </claim-text><claim-text> generate one or more machine readable policies, each policy comprising at least one rule and at least one action associated with the at least one rule, wherein each rule includes a plurality of event parameters and an associated plurality of predetermined event parameter probabilities; receive and monitor data from a sensor system, the data including expected event parameter values and associated deviation metrics; </claim-text><claim-text> initiate processing of the at least one rule upon detection of a predetermined change in at least one of the expected event parameter values; </claim-text><claim-text> execute the at least one rule and triggering the at least one action based on a comparison of the expected event parameter values and associated deviation metrics with the event parameters and the associated predetermined event parameter probabilities of the at least one rule; and </claim-text><claim-text> generate an output for performing the at least one action triggered by the policy execution subsystem. </claim-text></claim></claims><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
