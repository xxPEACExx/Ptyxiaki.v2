<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680451-A2" country="EP" doc-number="2680451" kind="A2" date="20140101" family-id="48747373" file-reference-id="252638" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549237" ucid="EP-2680451-A2"><document-id><country>EP</country><doc-number>2680451</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13174591-A" is-representative="YES"><document-id mxw-id="PAPP154823160" load-source="docdb" format="epo"><country>EP</country><doc-number>13174591</doc-number><kind>A</kind><date>20130701</date><lang>EN</lang></document-id><document-id mxw-id="PAPP220439671" load-source="docdb" format="original"><country>EP</country><doc-number>13174591.1</doc-number><date>20130701</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140447517" ucid="US-201261666275-P" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201261666275</doc-number><kind>P</kind><date>20120629</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL2073952658" load-source="docdb">H04B   1/04        20060101ALI20140429BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2073952802" load-source="docdb">H04B   1/48        20060101ALI20140429BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL2073953810" load-source="docdb">H04B   1/52        20060101AFI20140429BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-2107891243" load-source="docdb" scheme="CPC">H04B  17/11        20130101 LI20150119BHEP        </classification-cpc><classification-cpc mxw-id="PCL2001016858" load-source="docdb" scheme="CPC">H04B   1/48        20130101 FI20140109BHEP        </classification-cpc><classification-cpc mxw-id="PCL2093537632" load-source="docdb" scheme="CPC">H04B   1/0475      20130101 LA20140630BHEP        </classification-cpc><classification-cpc mxw-id="PCL2093539878" load-source="docdb" scheme="CPC">H04B   1/30        20130101 LI20140630BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180195" lang="DE" load-source="patent-office">Sender-Empfänger-Vorrichtung</invention-title><invention-title mxw-id="PT132180196" lang="EN" load-source="patent-office">Transceiver device</invention-title><invention-title mxw-id="PT132180197" lang="FR" load-source="patent-office">Dispositif émetteur-récepteur</invention-title><citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45130895" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918134397" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SEQUANS COMM LTD</last-name><address><country>GB</country></address></addressbook></applicant><applicant mxw-id="PPAR918161445" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SEQUANS COMMUNICATIONS LIMITED</last-name></addressbook></applicant><applicant mxw-id="PPAR918981706" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Sequans Communications Limited</last-name><iid>101295552</iid><address><street>155 Wharfedale Road Winnersh Triangle</street><city>Reading, Berkshire RG41 5RB</city><country>GB</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918163786" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MODHA KULDIP</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918164619" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MODHA, KULDIP</last-name></addressbook></inventor><inventor mxw-id="PPAR918984410" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MODHA, KULDIP</last-name><address><street>45 Benning Way</street><city>Wokingham, Berkshire RG40 1XX</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918166595" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>HARVEY JACKSON</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918144509" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>HARVEY, JACKSON</last-name></addressbook></inventor><inventor mxw-id="PPAR918981959" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>HARVEY, JACKSON</last-name><address><street>13935 Aquila Avenue</street><city>Savage, MN Minnesota 55378</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918140789" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>WINIECKI THOMAS</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918170722" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>WINIECKI, THOMAS</last-name></addressbook></inventor><inventor mxw-id="PPAR918985641" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>WINIECKI, THOMAS</last-name><address><street>25 Denbeigh Place</street><city>Reading, Berkshire RG1 8QE</city><country>GB</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918984516" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Morrall, Jonathan Ian McLachlan</last-name><suffix>et al</suffix><iid>101280976</iid><address><street>Kilburn &amp; Strode LLP 20 Red Lion Street</street><city>London WC1R 4PJ</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548856051" load-source="docdb">AL</country><country mxw-id="DS548850690" load-source="docdb">AT</country><country mxw-id="DS548856053" load-source="docdb">BE</country><country mxw-id="DS548855820" load-source="docdb">BG</country><country mxw-id="DS548873798" load-source="docdb">CH</country><country mxw-id="DS548838595" load-source="docdb">CY</country><country mxw-id="DS548850691" load-source="docdb">CZ</country><country mxw-id="DS548802331" load-source="docdb">DE</country><country mxw-id="DS548856054" load-source="docdb">DK</country><country mxw-id="DS548838596" load-source="docdb">EE</country><country mxw-id="DS548803626" load-source="docdb">ES</country><country mxw-id="DS548855821" load-source="docdb">FI</country><country mxw-id="DS548856058" load-source="docdb">FR</country><country mxw-id="DS548856055" load-source="docdb">GB</country><country mxw-id="DS548856056" load-source="docdb">GR</country><country mxw-id="DS548856057" load-source="docdb">HR</country><country mxw-id="DS548838597" load-source="docdb">HU</country><country mxw-id="DS548873799" load-source="docdb">IE</country><country mxw-id="DS548856382" load-source="docdb">IS</country><country mxw-id="DS548856059" load-source="docdb">IT</country><country mxw-id="DS548838598" load-source="docdb">LI</country><country mxw-id="DS548802332" load-source="docdb">LT</country><country mxw-id="DS548850692" load-source="docdb">LU</country><country mxw-id="DS548802333" load-source="docdb">LV</country><country mxw-id="DS548802338" load-source="docdb">MC</country><country mxw-id="DS548852930" load-source="docdb">MK</country><country mxw-id="DS548852931" load-source="docdb">MT</country><country mxw-id="DS548803627" load-source="docdb">NL</country><country mxw-id="DS548856060" load-source="docdb">NO</country><country mxw-id="DS548803628" load-source="docdb">PL</country><country mxw-id="DS548856061" load-source="docdb">PT</country><country mxw-id="DS548803629" load-source="docdb">RO</country><country mxw-id="DS548873800" load-source="docdb">RS</country><country mxw-id="DS548803634" load-source="docdb">SE</country><country mxw-id="DS548873801" load-source="docdb">SI</country><country mxw-id="DS548852932" load-source="docdb">SK</country><country mxw-id="DS548852933" load-source="docdb">SM</country><country mxw-id="DS548838599" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128669907" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A transceiver for RF signals uses receiving circuitry to derive control signals to reduce undesired signal frequencies in the output of the transmitting circuitry.
<img id="iaf01" file="imgaf001.tif" wi="165" he="86" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499280" lang="EN" source="EPO" load-source="docdb"><p>A transceiver for RF signals uses receiving circuitry to derive control signals to reduce undesired signal frequencies in the output of the transmitting circuitry.</p></abstract><description mxw-id="PDES63955337" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">The present disclosure relates to the field of communications. Embodiments relate to transceivers and methods of transmitting and receiving radio frequency signals</p><heading id="h0001"><b><u>Background</u></b></heading><p id="p0002" num="0002">RF transmitters often have a so-called mixer for changing the frequency f1 of an information-carrying, for example baseband, signal to a desired transmission frequency. The mixer typically multiplies together the frequency f1 with a frequency f2 of a local oscillator to provide both a sum (f1+f2) and a difference (f2-f1) frequency. One of these, for example the sum frequency (f1+f2), is the desired frequency, and the other, in this example the difference frequency, must be discarded for example by filtering. Good mixer design can reduce other parasitic signals -for example f1 or f2, or harmonics- in the mixer output.</p><p id="p0003" num="0003">However where the mixer is supplied with an information-carrying signal having more than one component, each component being derived over a different signal path, path differences and different signal conditions in the paths may result in slight differences between the components, even where none should be present. Especially where two components are mutually orthogonal, these differences may give rise to significant amounts of local oscillator frequency signals at the output of the mixer.</p><p id="p0004" num="0004">Clearly it would be possible to filter undesired frequencies out. However it is desirable to minimise losses, which inevitably occur where unwanted signals are being produced and eliminated by filtering. Also many transmitters are required to be frequency-agile, and so will have a frequency-variant local oscillator. Hence relatively complex filters and control systems would be needed to track the changing local oscillator frequency to eliminate it from an output.</p><p id="p0005" num="0005">A receiver typically receives signals, e.g. radio-frequency signals, and processes the received signals to derive from them the information content.</p><p id="p0006" num="0006">One technique for producing a baseband signal from radio frequency signals is known as the superheterodyne technique and another is termed the homodyne technique.<!-- EPO <DP n="2"> --></p><p id="p0007" num="0007">As is well known, in a superheterodyne receiver, the RF signals are mixed with a first frequency signal to provide a so-called "IF" (intermediate frequency) signal. This in turn is then mixed with a second frequency signal to derive the baseband signal. In some cases more than two frequency conversion stages may be used in sequence.</p><p id="p0008" num="0008">Again, as is well known, in a homodyne receiver, a received RF signal is directly mixed with a single radio frequency signal to derive the baseband signals.</p><p id="p0009" num="0009">A transmitter performs an analogous process to a receiver but in reverse, i.e. it takes in information signals at a relatively low baseband frequency and transforms those signals so a derived signal can be emitted at a radio frequency.</p><p id="p0010" num="0010">In the communication art, it is often convenient to construct transmit signals from two separate baseband signals representing real and imaginary part of a complex signal. In such systems, the two baseband signals are independently filtered, amplified or otherwise manipulated before they are combined and up-converted onto a single high frequency carrier. The two signals are referred to as in-phase (I) and quadrature (Q) signals.</p><p id="p0011" num="0011">A transmitter for I and Q signals operating in a manner similar to a superheterodyne receiver can be termed an indirect up-conversion transmitter, although it is sometimes referred to as a superheterodyne transmitter.</p><p id="p0012" num="0012">Referring to <figref idrefs="f0001">Figure 1</figref>, an indirect up-conversion transmitter has an input (20) for information-carrying signals, in this case digital signals. The input (20) is provided to an IQ modulator (21) that has first and second outputs (22, 23) respectively for I (in-phase) and Q (quadrature) signals. The I and Q signals are provided as input to a DAC (24) which has two analogue outputs (31, 32) corresponding respectively to the digital I signal and the digital Q signal. The analog I signal (31) is input to a first two-input mixer (33) receiving a LO frequency signal at its second input (39). The analogue Q output (32) is provided to a second two-input mixer (35) receiving at its second input a<!-- EPO <DP n="3"> --> frequency (37) that is identical to the LO signal on input (39) but orthogonal to it. In other words there is a 90 degree phase shift between the two inputs (37) and (39).</p><p id="p0013" num="0013">As is known to those skilled in the art each mixer (33, 35) provides outputs at two frequencies, the two frequencies being i) the sum of the two input frequencies and ii) the difference between the two input frequencies. The four signals (two from each mixer) are combined in a combiner stage (41) to provide a combined signal in analog form (43). The analog combined signal (43) is provided to a bandpass filter (47) that selects the desired frequency from the input, in this case the sum frequencies. The difference frequencies are blocked.</p><p id="p0014" num="0014">The output of the bandpass filter (47) is referred to as the intermediate frequency (IF) and this is provided to a IF two-input mixer (48) having as its other input an RF signal (49) related to the desired frequency of the output RF signal from the transmitter. In this case the relationship is such that the sum of the frequencies at the two inputs to the third mixer (48) corresponds to the desired output frequency.</p><p id="p0015" num="0015">Again as known to those skilled in the art the mixer provides two output frequencies, namely i) the sum of the two input frequencies and ii) the difference between the two input frequencies. The IF mixer output is connected to a bandpass filter (51). The difference frequency is rejected by the band pass filter (51) while the sum frequency is passed by it. The sum frequency from the band pass filter (51) is provided as input to a power amplifier (53) whose output feeds a transmit aerial (59) via an RF filter (55).</p><p id="p0016" num="0016">Another type of transmitter is the homodyne or direct-conversion transmitter. This architecture may be considered favorable as it uses fewer components, and occupies les real-estate on chip.</p><p id="p0017" num="0017">Referring to <figref idrefs="f0002">Figure 2</figref>, an up-conversion IQ type transmitter has an input (50) of digital signals input to an IQ modulator (61) that converts the baseband information into<!-- EPO <DP n="4"> --> digital I (62) and Q (63) data. This is then converted into analog I (71) and analog Q (72) data using a respective digital to analogue converter (64; 65). The analog Q data (72) is input to a first mixer (73) receiving a mixing input (69); the analog I data (71) is input to a second mixer (75) receiving a mixing input (77). The mixing inputs are of identical frequency f2 but are mutually orthogonal. The outputs (f1+f2; f1-f2) of the two mixers (73, 75) are combined in a combiner (81) and then fed to a bandpass filter (87) that passes the desired frequency (f1+f2) and rejects the image frequency (F1-f2). The filter output is input to a high frequency power amplifier (91) and its output in turn is fed to an antenna (97) via an RF filter (93).</p><p id="p0018" num="0018">As an example of issues addressed by this disclosure, quadrature-signal type transmitters suffer from non idealities in converting I (In phase) and Q (Quadrature) signals to radio frequency (RF). There is gain and phase mismatch between the signals over the I and the Q path. These can cause less-than-optimal image rejection and consequently degradation of the signal-to-noise ratio. DC offsets between the two component signals can cause the local oscillator (LO) frequency to feed-through the mixer(s) to the transmitter output and appear as spectral spurs.</p><p id="p0019" num="0019">Referring to <figref idrefs="f0003">Figure 3</figref>, an exemplary transmitter circuit (100) has a modem (109) providing base-band digital in-phase (106) and quadrature (107) output signals for transmission. Each signal (106, 107) is converted to analog in a respective DAC (111,112) to provide analog outputs at a baseband frequency ω. The analog outputs are input to respectively an I-mixer (113) and a Q-mixer (114). Each mixer receives a frequency input (LO) at transmitter local oscillator frequency (Ω<i><sub>T</sub></i>), the I-mixer (113) receiving the LO as an in phase signal and the Q-mixer (114) receiving the LO signal with a 90 degree phase shift The mixer outputs are fed to a combiner (125) for power amplification and transmission. An envelope detector (121), shown figuratively as a diode and capacitor receives the output of the combiner (125) and is connected back to the modem (105) via an ADC (122)</p><p id="p0020" num="0020">The output of the combiner (125) contains at least three frequencies, including the desired frequency, the sum of the transmitter local oscillator frequency and the baseband frequency Ω<i><sub>T</sub></i>+ ω and undesired frequencies, the transmitter local oscillator frequency Ω<i><sub>T</sub></i> and the image<!-- EPO <DP n="5"> --> frequency Ω<i><sub>T</sub></i> - ω. The envelope detector (121) provides two frequencies, a first termed ftone equal to desired frequency Ω<i><sub>T</sub></i>+ ω - Ω<i><sub>T</sub></i>,(ω) and the second termed 2ftone equal to desired frequency Ω<i><sub>T</sub></i>+ ω - [Ω<i><sub>T</sub></i> - ω], the image frequency (=2 ω)</p><p id="p0021" num="0021">The amplitudes of the ftone and 2ftone signals will depend on the how big the LO feed-through and image tones are - keeping the wanted tone at the same level. Using the ftone and 2ftone signals can allow cancelling the LO feed-through and image tones. This is achieved by analysing the ftone and 2ftone signals by a fast Fourier transform (FFT) function in the modem. Minimizing the ftone and 2ftone while keeping the wanted tone constant effectively means cancelling the LO feed-through and image tones.</p><p id="p0022" num="0022">The ftone and 2ftone signals may be controlled by applying correction coefficients through the I and Q digital-to-analogue converters (111,112) at the transmitter input, in an effort to optimise the LO and image frequencies.</p><p id="p0023" num="0023">For long term evolution (LTE) the required output power range is from -40dBm to 23dBm. To achieve this radio frequency integrated circuit (RFIC) gain should have a wide range of analog baseband and RF gain with optimal LO feed-through and image frequency rejection for all of them. This requirement imposes tough performance specifications on the envelope detector such as wide dynamic operating range, stability over temperature and process variations. Additionally, to support multiple bands either one detector with complex frequency multiplexing scheme is required or multiple detectors are needed which would occupy large silicon area.</p><p id="p0024" num="0024">It is thus desirable to provide a transmitter where use of an envelope detector for this purpose is avoided.</p><heading id="h0002"><b><u>Brief summary</u></b></heading><p id="p0025" num="0025">In a general aspect there is provided a transceiver for RF signals in which receiving circuitry is used to derive control signals to reduce undesired signal frequencies in the output of transmitting circuitry.<!-- EPO <DP n="6"> --></p><p id="p0026" num="0026">In another general aspect, there is provided a transceiver for RF signals in which receiving circuitry is used to determine transmitter gain and phase imbalance, without the need for an envelope detector.</p><p id="p0027" num="0027">In another general aspect, there is provided a transceiver for RF signals in which receiving circuitry is used to determine I and Q offsets, without the need for an envelope detector.</p><p id="p0028" num="0028">In another general aspect there is provided a method of determining gain and phase imbalance in transmitting circuitry of a transceiver by using the receiving circuitry of the transceiver.</p><p id="p0029" num="0029">In another general aspect there is provided a method of determining I and Q offsets in transmitting circuitry of a transceiver by using the receiving circuitry of the transceiver.</p><p id="p0030" num="0030">In yet another general aspect there is provided a method of determining path imbalances in both the transmitter and the receiver of a transceiver by connecting an output signal of the transmitter to the input of the receiver, applying a test tone to the input of the transmitter, and processing down-converted frequencies related to the test tone.</p><p id="p0031" num="0031">In a more specific aspect there is provided an RF transceiver comprising a transmitter, an antenna and a receiver having receiving circuitry for receiving RF signals from the antenna, the transmitter having first and second analog signal paths for carrying in-phase and quadrature signals and the transmitter being arranged in use to provide RF signals to the antenna, the transceiver having means for coupling RF signals from the transmitter to an RF input of the receiving circuitry and means for causing the receiving circuitry to form signals related to undesired frequencies in the RF signals from the transmitter, the transceiver having processing circuitry adapted to respond to the signals related to the undesired frequencies to control the transmitter to reduce the undesired frequencies.<!-- EPO <DP n="7"> --></p><p id="p0032" num="0032">The undesired frequencies may be at least partly due to differences between the first and second analog signal paths.</p><p id="p0033" num="0033">In another more specific aspect there is provided an RF transceiver comprising a transmitter, an antenna and a receiver having receiving circuitry for receiving RF signals from the antenna, the transmitter having first and second analog signal paths for carrying in-phase and quadrature signals and the transmitter being arranged in use to provide RF signals to the antenna, the transceiver having means for coupling RF signals from the transmitter to an RF input of the receiving circuitry and means for causing the receiving circuitry to form downconverted signals related to undesired frequencies in the RF signals from the transmitter, the transceiver having processing circuitry adapted to respond to the downconverted signals to control the receiving circuitry to reduce the effect of path imbalances</p><p id="p0034" num="0034">The receiving circuitry may comprise first and second receive mixers arranged to down-convert the RF signals from the antenna by mixing with signals in phase-quadrature, the processing circuitry being responsive to the down-converted signals.</p><p id="p0035" num="0035">The transceiver may have a desired output frequency, and the receive mixers be configured to down-convert the undesired frequencies by mixing with a signal having the desired frequency.</p><p id="p0036" num="0036">The transceiver may have a desired output frequency, and the receive mixers be configured to down-convert the undesired frequencies by mixing with a frequency offset from the desired frequency.</p><p id="p0037" num="0037">The transmitter is a direct up-conversion transmitter. It may be an indirect up-conversion transmitter.</p><p id="p0038" num="0038">The means for coupling the RF signals of the transmitter to an RF input of the receiving circuitry may be an on-chip loopback path.</p><p id="p0039" num="0039">The transceiver may have a loopback path from an input of a transmit power amplifier and an input to a low-noise amplifier of the receiving circuitry.<!-- EPO <DP n="8"> --></p><p id="p0040" num="0040">In a further aspect there is disclosed a method of transmitting RF signals from a transceiver comprising a transmitter, an antenna and a receiver having receiving circuitry for receiving RF signals from the antenna, the method comprising providing respective phase-quadrature signals over first and second analog signal paths, and converting signals from the first and second analog signal paths to RF for the antenna, coupling RF signals from the transmitter to an RF input of the receiving circuitry; controlling the receiving circuitry to form signals related to undesired frequencies in the RF signals from the transmitter, and in response to the signals related to the undesired frequencies, controlling the transmitter to reduce the undesired frequencies.</p><p id="p0041" num="0041">The method may comprise mixing in-phase and quadrature information-carrying signals with respectively an in-phase transmitter LO signal and a quadrature transmitter LO signal to provide RF signals including a desired frequency.</p><p id="p0042" num="0042">The method may comprise mixing a signal from the RF input with an in-phase receiver LO signal and a quadrature receiver LO signal to down-convert undesired frequencies in the RF output from the amplifier to form in-phase and quadrature receiver signals; and using the in-phase and quadrature receiver signals, controlling the transmitter to reduce said undesired frequencies.</p><p id="p0043" num="0043">In a still more specific aspect there is provided an RF transceiver comprising a transmitter and a receiver, the transmitter having a first transmit mixer and a second transmit mixer, the first and second transmit mixers being configured to be driven in phase-quadrature, the transmitter having an RF output, the transceiver having means for coupling the RF signals from the transmitter to an RF input of the receiver, wherein the receiver has a first receive mixer and a second receive mixer, the receive mixers being configured to be driven in phase-quadrature, and adapted to provide in-phase and quadrature signals related to undesired frequencies in the RF signals from the transmitter, the transceiver having processing circuitry adapted to respond to the in-phase and quadrature signals related to undesired frequencies in the RF signals from the transmitter to control the transmitter to reduce the undesired frequencies in the RF signals from the transmitter.<!-- EPO <DP n="9"> --></p><p id="p0044" num="0044">In yet another aspect there is provided a method of transmitting RF signals, the method comprising mixing in-phase and quadrature information-carrying signals with respectively an in-phase transmitter LO signal and a quadrature transmitter LO signal to provide an RF signal having a desired frequency; coupling the RF signal of the transmitter to an RF input of a calibration device, having a calibration device LO signal, mixing a signal from the RF output with an in-phase calibration device LO signal and a quadrature calibration device LO signal to down-convert undesired frequencies in the RF output from the amplifier to form in-phase and quadrature calibration device signals; and using the in-phase and quadrature calibration device signals, controlling the transmitter to reduce the undesired frequencies at the RF output from the transmitter.</p><p id="p0045" num="0045">In a still further aspect there is provided a method of transmitting RF signals using an RF transceiver comprising a transmitter and a receiver, the method comprising mixing in-phase and quadrature information-carrying signals with respectively an in-phase transmitter LO signal and a quadrature transmitter LO signal to provide RF signals including a desired frequency; coupling the RF signals of the transmitter to an RF input of the receiver, mixing a signal from the RF output with an in-phase receiver LO signal and a quadrature receiver LO signal to down-convert undesired frequencies in the RF output from the amplifier to form in-phase and quadrature receiver signals; and using the in-phase and quadrature receiver signals, controlling the transmitter to reduce the undesired frequencies at the RF output from the transmitter.</p><p id="p0046" num="0046">In a further aspect there is provided a method of measuring gain and phase imbalance in the transmitter of a transceiver, which transmitter is configured to mix a baseband signal with a local oscillator frequency, the method comprising providing, as baseband signal, a test tone to the transmitter input, downconverting the transmitter output using the receiver of the transceiver, and evaluating the real and imaginary parts of a downconverted signal corresponding to a transmit image frequency to derive said gain and phase imbalance.</p><p id="p0047" num="0047">In a yet further aspect there is provided a method of measuring offsets in the transmitter of a transceiver, which transmitter is configured to mix a baseband signal with a local<!-- EPO <DP n="10"> --> oscillator frequency, the method comprising providing, as baseband signal, a test tone to the transmitter input, down-converting the transmitter output using the receiver of the transceiver, and evaluating the real and imaginary parts of a down-converted signal corresponding to local oscillator leakage to derive said offsets</p><heading id="h0003"><b><u>Brief description of the drawings.</u></b></heading><p id="p0048" num="0048">In the drawings:-
<ul><li><figref idrefs="f0001">Figure 1</figref> shows a partial block schematic diagram of an indirect up-conversion transmitter;</li><li><figref idrefs="f0002">Figure 2</figref> shows a partial block schematic diagram of a direct up-conversion transmitter;</li><li><figref idrefs="f0003">Figure 3</figref> shows a partial black schematic diagram of a transmitter using an envelope detector;</li><li><figref idrefs="f0004">Figure 4</figref> shows a partial block schematic diagram of a transceiver according to an embodiment; and</li><li><figref idrefs="f0005">Figure 5</figref> shows a schematic of an example of an on-chip loopback connection.</li></ul></p><heading id="h0004"><b><u>Detailed Description</u></b></heading><p id="p0049" num="0049">Referring <figref idrefs="f0004">Fig 4</figref>, a transceiver (200) has a first integrated circuit with a transmitter (201) and a receiver (202), and on a separate chip a modem (301) connected to both the transmitter and receiver. The transmitter (201) has first and second DACs (205,207) respectively receiving I and Q digital signals and-in this case-feeding analog versions of those signals to respective transmitter mixers (209, 211). For the sake of easy description, in this embodiment, the bit sequence from the modem is assumed to provide a 1 MHz baseband tone (ω=1 MHz) and direct up-conversion is employed in the transmitter.</p><p id="p0050" num="0050">The outputs of the transmitter mixers (209,211) are combined together in a combiner (213), and the resultant signal is fed via a pre-power amplifier (224) and splitter/duplexer (217) to an antenna (220). The signal consists of the desired frequency Ω<i><sub>T</sub></i>+ ω, [i.e. Ω<i><sub>T</sub></i> + 1 MHz] and undesired frequenciesΩ<i><sub>T</sub></i>, (the transmitter LO breakthrough signal) and Ω<i><sub>T</sub></i> - ω, [i.e. Ω<i><sub>T</sub></i> -1 MHz] (the image frequency).<!-- EPO <DP n="11"> --></p><p id="p0051" num="0051">The receiver (202) has a low noise amplifier (204) coupled to receive RF signals from the antenna (220) via the duplexer (217). The output of the LNA is fed to two receiver mixers (206, 208). The first receiver mixer (206) receives at its second input a signal at a first frequency -the receiver local oscillator signal Ω<i><sub>R</sub></i> as does the second receiver mixer (208) with however a 90 degree phase shift between the two second inputs, so that the second receiver mixer operates in phase-quadrature to the first.</p><p id="p0052" num="0052">Each receiver mixer (206, 208) has a respective output coupled via a respective analog signal processing path (210,212) to a respective ADC (214,216) whose digital outputs couple into the modem (301).</p><p id="p0053" num="0053">In some embodiments the output of the combiner (213), forming the input to the power amplifier (224) are coupled via an RF signal path (215) to the input of the LNA (204). The path (215) may be a switchable path- i.e. may contain active components that enable or disable it- or it may be a linked path, capable of being broken after a calibration step has been carried out. In the illustrated embodiment the RF signal path (215) is a connection from the input of the power amplifier to the input of the LNA (204).</p><p id="p0054" num="0054">For this class of embodiments the on-chip RF loop back connection connects the transmitter modulator output to the receiver low noise amplifier (204) input for the frequency band of interest with the pre-power amplifier (224) powered down. This path allows the scheme to be used for on-the-fly calibration in the field and for calibration, for example, on the production line.</p><p id="p0055" num="0055">The most straightforward loop-back is a resistive attenuator (such as a T or pi attenuator) that provides reasonably high impedance to the transmitter circuits and provides enough attenuation that the receiver circuits are not overloaded. Such an attenuator would need one switch or several switches that would be opened to allow the loop-back to be disabled during normal operation. It would be possible to use an active buffer to drive that attenuator, to load the transmitter circuits even less and provide even more isolation when off. That is, the buffer would be disabled when not needed. The buffer could be on either the upstream or downstream side of the attenuator, or both.<!-- EPO <DP n="12"> --></p><p id="p0056" num="0056">Referring to <figref idrefs="f0005">Figure 5</figref>, an example on-chip loop-back connection (215) consists of a first MOST (302) having one end of its current path connected to the output of the combiner (213), and the other end of the main current path connected via the series connection of first and second resistors (303, 304) to the input of the LNA(204). A common node (307) of the series resistors (303,304) is connected via a third resistor (305) to earth. The third resistor is bridged by a second MOST (306). The two MOSTs (302,306) are arranged to be driven by complementary signals. The first and third resistors (303,305) are selected to provide a reasonably high impedance to the transmitter, and their ratio is chosen to divide the potential at the combiner output to a suitable level for input to the LNA. The second resistor (304) is selected to provide a high impedance at the input to the LNA.</p><p id="p0057" num="0057">In use, in a first switching state the first MOST (302) is on and provides a low resistance, while the second MOST (306) is off and provides a high resistance. Signals from the combiner (213) are thus divided by the first and second resistors and input to the LNA.</p><p id="p0058" num="0058">In the second opposite switching state, the first MOST is off, substantially preventing signal flow through first resistor (303). The second MOST (306) is on, effectively clamping the common node (307) to earth.</p><p id="p0059" num="0059">The receiver mixers (206,208) are wideband down-converting mixers and, because of their use in the receive path of the receiver, are optimised for sensitive signals, process and temperature variations.</p><p id="p0060" num="0060">The receiver mixers (206,208) can be controlled to produce signals similar to those that would otherwise be generated by the envelope detector (121) at the transmitter output, if one had been present.</p><p id="p0061" num="0061">As noted above, there are three signal frequencies input from the transmitter, namely the desired frequency Ω<i><sub>T</sub></i>+ ω, and undesired frequenciesΩ<i><sub>T</sub></i>, the transmitter LO breakthrough signal and Ω<i><sub>T</sub></i> - ω, the image frequency. Thus after mixing with the receiver LO signal, there are three down-converted signal frequencies, S1, S2 and S3 defined as follows: <maths id="math0001" num=""><math display="block"><mi mathvariant="normal">S</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi mathvariant="normal">ω</mi><mo>-</mo><msub><mi>Ω</mi><mi>R</mi></msub><mspace width="2em"/><mfenced open="[" close="]" separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>R</mi></msub></mfenced><mo>+</mo><mn>1</mn><mspace width="1em"/><mi>MHz</mi></mfenced></math><img id="ib0001" file="imgb0001.tif" wi="81" he="8" img-content="math" img-format="tif"/></maths> <maths id="math0002" num=""><math display="block"><mi mathvariant="normal">S</mi><mo>⁢</mo><mn>2</mn><mo>=</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>R</mi></msub></math><img id="ib0002" file="imgb0002.tif" wi="25" he="9" img-content="math" img-format="tif"/></maths><br/>
and<!-- EPO <DP n="13"> --> <maths id="math0003" num=""><math display="block"><mi mathvariant="normal">S</mi><mo>⁢</mo><mn>3</mn><mo>=</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi mathvariant="normal">ω</mi><mo>-</mo><msub><mi>Ω</mi><mi>R</mi></msub><mspace width="2em"/><mfenced open="[" close="]" separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>R</mi></msub></mfenced><mo>-</mo><mn>1</mn><mspace width="1em"/><mi>MHz</mi></mfenced></math><img id="ib0003" file="imgb0003.tif" wi="79" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0062" num="0062">For S2 to be non-zero, it is required that the local oscillators frequencies of the transmitter and receiver be different. This can be achieved by controlling the LO of the receiver to be spaced by a predetermined arbitrarily selected amount from the LO of the transmitter. Alternatively it can be achieved by controlling the receiver LO to be at Ω<i><sub>T</sub></i>+ ω, the desired frequency.</p><p id="p0063" num="0063">Another constraint is that all of signals S1, S2 and S3 be within the analog baseband channel bandwidth supported by the receiver.</p><p id="p0064" num="0064">Signals S1, S2 and S3 are available on the receiver's I and Q path of the chain and then processed using a FFT function in the modem (301). Based on the information from the FFT step, the modem is arranged to control offsets to I and Q DAC inputs of the transmitter, for example aiming to reduce or completely annul S2 and S3.</p><p id="p0065" num="0065">Suppression of S2 and S3 indicates the complete cancelation of the transmitter LO feed-through and image signals. Any IQ mismatch in the receiver chain will not impair this scheme as these are second-order effects; the aim is to correct for large amplitudes of S2 and S3 signals in I and Q paths of the receiver chain.</p><p id="p0066" num="0066">The modem (301), since it is part of a radio that will receive OFDM or SC-FDM already has FFT circuitry as part of the normal signal path. However, in transceivers where such circuitry is not present, digital filters and peak detectors or power detectors can be used for the same purpose. That is, a narrow-band filter around each expected tone allows just that tone energy through. Then the amplitude or RMS value of that tone is measured with the peak or power detector. Equally, an FFT block could be added just for calibration if one were not already present.</p><p id="p0067" num="0067">Consider a test tone sent into the DACs (205,207) as follows <maths id="math0004" num=""><math display="block"><mo>•</mo><mfenced><mtable><mtr><mtd><mi>I</mi></mtd></mtr><mtr><mtd><mi>Q</mi></mtd></mtr></mtable></mfenced><mo>=</mo><mfenced><mtable><mtr><mtd><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mtd><mtd><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mtd></mtr><mtr><mtd><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mtd><mtd><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>c</mi></msub></mtd></mtr></mtable></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi></mtd></mtr><mtr><mtd><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi></mtd></mtr></mtable></mfenced><mo>-</mo><mfenced><mtable><mtr><mtd><msub><mi>I</mi><mi>c</mi></msub></mtd></mtr><mtr><mtd><msub><mi>Q</mi><mi>c</mi></msub></mtd></mtr></mtable></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="89" he="14" img-content="math" img-format="tif"/></maths></p><p id="p0068" num="0068">The quadrature transmitter is characterized by<!-- EPO <DP n="14"> -->
<ul><li>LO frequency Ω<i><sub>T</sub></i>, global phase Φ<i><sub>T</sub></i></li><li>Gain of I-branch (1 + ε<i><sub>T</sub></i>), gain of Q-branch is (1 - ε<i><sub>T</sub></i>)</li><li>Phase of I-branch -δ<i><sub>T</sub></i>, phase of Q-branch is +δ<i><sub>T</sub></i></li><li>DC offset of I-branch and Q branch are <maths id="math0005" num=""><math display="inline"><mfenced><mtable><mtr><mtd><msub><mi>I</mi><mi>T</mi></msub></mtd></mtr><mtr><mtd><msub><mi>Q</mi><mi>T</mi></msub></mtd></mtr></mtable></mfenced></math><img id="ib0005" file="imgb0005.tif" wi="10" he="13" img-content="math" img-format="tif" inline="yes"/></maths></li></ul></p><p id="p0069" num="0069">The quadrature receiver is characterized by
<ul><li>LO frequency Ω<i><sub>R</sub></i>, global phase Φ<i><sub>R</sub></i></li><li>Gain of I-branch (1 + ε<i><sub>R</sub></i>), gain of Q-branch is (1 - ε<i><sub>R</sub></i>)</li><li>Phase of I-branch -δ<i><sub>R</sub></i>, phase of Q-branch is +δ<i><sub>R</sub></i></li><li>DC offset is not considered, this simply leads to a DC contribution on the RX signal</li></ul></p><p id="p0070" num="0070">The calculations will assume that all frequencies are positive: Ω<i><sub>T</sub></i>,Ω<i><sub>R</sub></i>,ω &gt; 0.</p><p id="p0071" num="0071">First the RF signal at the transmit output is calculated. This calculation assumes all impairments and corrections are small (ε<i><sub>C</sub></i>,ε<i><sub>T</sub></i>,ε<i><sub>R</sub></i>,δ<i><sub>C</sub></i>,δ<i><sub>T</sub></i>,δ<i><sub>R</sub></i>,<i>I<sub>C</sub></i>,<i>I<sub>T</sub></i>,<i>Q<sub>C</sub></i>,<i>Q<sub>T</sub></i>«1). For example, the following approximations are used:
<ul><li>sin δ<i><sub>T</sub></i> ≈ δ<i><sub>T</sub></i>, cosδ<i><sub>T</sub></i> ≈ 1, or (1 - ε<i><sub>c</sub></i>)·(1 + ε<i><sub>T</sub></i>) ≈ 1 - ε<i><sub>c</sub></i> + ε<i><sub>T</sub></i>. Further, it is assumed that only frequencies close to Ω<i><sub>T</sub></i> will be amplified in the transmitter.</li></ul>
<maths id="math0006" num=""><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">RF</mi></mtd><mtd columnalign="left"><mo>=</mo><mfenced open="[" close="]" separators=""><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>C</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>δ</mi><mi>C</mi></msub><mo>⁢</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub><mo>+</mo><msub><mi>I</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>T</mi></msub></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd columnalign="left"><mo>+</mo><mfenced open="[" close="]" separators=""><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub><mo>⁢</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub><mo>+</mo><msub><mi>Q</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>T</mi></msub></mfenced></mtd></mtr></mtable></math><img id="ib0006" file="imgb0006.tif" wi="141" he="14" img-content="math" img-format="tif"/></maths> <maths id="math0007" num=""><math display="block"><mtable><mtr><mtd><mi mathvariant="italic">RF</mi></mtd><mtd columnalign="left"><mo>≈</mo><mfenced open="[" close="]" separators=""><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>C</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>δ</mi><mi>C</mi></msub><mo>⁢</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub><mo>+</mo><msub><mi>I</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>T</mi></msub><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd columnalign="left"><mo>+</mo><mfenced open="[" close="]" separators=""><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub><mo>⁢</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub><mo>+</mo><msub><mi>Q</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>T</mi></msub><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></math><img id="ib0007" file="imgb0007.tif" wi="165" he="10" img-content="math" img-format="tif"/></maths> <maths id="math0008" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mi mathvariant="italic">RF</mi></mtd><mtd><mo>≈</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>sin</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><mi>cos</mi><mi>ω</mi><mo>⁢</mo><mi>t</mi><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced open="[" close="]" separators=""><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></math><img id="ib0008" file="imgb0008.tif" wi="124" he="23" img-content="math" img-format="tif"/></maths> <maths id="math0009" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mi mathvariant="italic">RF</mi></mtd><mtd><mo>≈</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mtd></mtr></mtable></math><img id="ib0009" file="imgb0009.tif" wi="137" he="21" img-content="math" img-format="tif"/></maths></p><p id="p0072" num="0072">So as noted above there are three tones at RF, the wanted tone with frequency (Ω<i><sub>T</sub></i> - ω), the image at frequency (Ω<i><sub>T</sub></i> + ω) and LO leakage at frequency Ω<i><sub>T</sub></i>.<!-- EPO <DP n="15"> -->
<img id="ib0010" file="imgb0010.tif" wi="62" he="42" img-content="graph" img-format="tif"/></p><p id="p0073" num="0073">The power of the image tone is given by (ε<i><sub>T</sub></i> - ε<i><sub>c</sub></i>)<sup>2</sup> + (δ<i><sub>T</sub> -</i> δ<i><sub>c</sub></i>)<sup>2</sup>. This means both gain and phase imbalances contribute power to the image tone. Similarly, the power of the LO leakage tone is given by (<i>I<sub>T</sub></i> - <i>I<sub>c</sub></i>)<sup>2</sup> + (<i>Q<sub>T</sub></i> - <i>Q<sub>c</sub></i>)<sup>2</sup>, which means both DC offset in I and Q-branch contribute here.</p><p id="p0074" num="0074">Measuring the power in the unwanted tones does not allow direct separation of gain and phase imbalance or separation of I or Q DC offset.</p><p id="p0075" num="0075">However, in the method described, the three tones are down-converted using a quadrature mixer. This is expressed below. <maths id="math0010" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mi mathvariant="italic">BB</mi></mtd><mtd><mo>=</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>sin</mi><mrow><mo>(</mo><mfenced separators=""><msub><mi>Ω</mi><mi>T</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mrow><mo>⋅</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>⁢</mo><mi>t</mi><mo>+</mo><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr></mtable></math><img id="ib0011" file="imgb0011.tif" wi="128" he="56" img-content="math" img-format="tif"/></maths></p><p id="p0076" num="0076">Only frequencies near DC are considered: <maths id="math0011" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mn>2</mn><mo>⋅</mo><mi mathvariant="italic">BB</mi></mtd><mtd><mo>≈</mo><mfenced><mtable><mtr><mtd><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>+</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mfenced separators=""><mn>1</mn><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mfenced separators=""><mn>1</mn><mo>-</mo><msub><mi>ε</mi><mi>R</mi></msub></mfenced><mo>⁢</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced><mo>-</mo><msub><mi>δ</mi><mi>R</mi></msub></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr></mtable></math><img id="ib0012" file="imgb0012.tif" wi="139" he="61" img-content="math" img-format="tif"/></maths></p><p id="p0077" num="0077">Again, all impairments are assumed to be small which simplifies the equations further.<!-- EPO <DP n="16"> --> <maths id="math0012" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mn>2</mn><mo>⋅</mo><mi mathvariant="italic">BB</mi></mtd><mtd><mo>≈</mo><mfenced><mtable><mtr><mtd><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>+</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>-</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>-</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>+</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>+</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mfenced><mtable><mtr><mtd><mo>-</mo><mi>sin</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr><mtr><mtd><mo>+</mo><mi>cos</mi><mfenced separators=""><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mfenced separators=""><msub><mi>Φ</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Φ</mi><mi>T</mi></msub></mfenced></mfenced></mtd></mtr></mtable></mfenced></mtd></mtr></mtable></math><img id="ib0013" file="imgb0013.tif" wi="114" he="93" img-content="math" img-format="tif"/></maths></p><p id="p0078" num="0078">Assuming Ω<i><sub>R</sub></i> &gt; Ω<i><sub>T</sub></i> + ω &gt; Ω<i><sub>T</sub></i>. The I/Q vectors are written as complex number representations, and using an abbreviation Φ ≡ (Φ<i><sub>R</sub></i> - Φ<i><sub>T</sub></i>). The result is:- <maths id="math0013" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mn>2</mn><mo>⋅</mo><mi mathvariant="italic">BB</mi></mtd><mtd><mo>≈</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>+</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mi>Φ</mi></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><msub><mi>ε</mi><mi>R</mi></msub><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>-</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>-</mo><mi>Φ</mi></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><msub><mi>δ</mi><mi>R</mi></msub><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>-</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>-</mo><mi>Φ</mi><mo>+</mo><mi>π</mi><mo>/</mo><mn>2</mn></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>+</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mi>Φ</mi></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>+</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mi>Φ</mi><mo>+</mo><mi>π</mi><mo>/</mo><mn>2</mn></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>+</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mi>Φ</mi></mfenced></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><mo>+</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi><mo>+</mo><mi>Φ</mi><mo>+</mo><mi>π</mi><mo>/</mo><mn>2</mn></mfenced></mfenced></mtd></mtr></mtable></math><img id="ib0014" file="imgb0014.tif" wi="110" he="45" img-content="math" img-format="tif"/></maths></p><p id="p0079" num="0079">Hence there is a total of four different tones, three due to the original transmitter impairments and one due to receiver IQ imbalance as shown below. The RX DC component is shown as well (not shown in calculations).
<img id="ib0015" file="imgb0015.tif" wi="162" he="50" img-content="graph" img-format="tif"/><!-- EPO <DP n="17"> --></p><p id="p0080" num="0080">The phase relationship between all the tones allows separation of gain and phase imbalance and also of Dc offset in the I branch and the Q branch: Ignoring the receiver offset terms and using the identity exp(<i>j</i> · π/2) = <i>j</i> <maths id="math0014" num=""><math display="block"><mtable columnalign="left"><mtr><mtd><mn>2</mn><mo>⋅</mo><mi mathvariant="italic">BB</mi></mtd><mtd><mo>≈</mo><mfenced open="{" close="}" separators=""><mi>exp</mi><mrow><mo>(</mo><mi>j</mi><mrow><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>+</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi><mo>)</mo></mrow></mrow></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mfenced separators=""><mfenced separators=""><msub><mi>ε</mi><mi>T</mi></msub><mo>-</mo><msub><mi>ε</mi><mi>c</mi></msub></mfenced><mo>+</mo><mi>j</mi><mo>⋅</mo><mfenced separators=""><msub><mi>δ</mi><mi>T</mi></msub><mo>-</mo><msub><mi>δ</mi><mi>c</mi></msub></mfenced></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub><mo>-</mo><mi>ω</mi></mfenced><mo>⁢</mo><mi>t</mi></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>+</mo><mrow><mfenced separators=""><mfenced separators=""><msub><mi>I</mi><mi>T</mi></msub><mo>-</mo><msub><mi>I</mi><mi>c</mi></msub></mfenced><mo>+</mo><mi>j</mi><mo>⋅</mo><mfenced separators=""><msub><mi>Q</mi><mi>T</mi></msub><mo>-</mo><msub><mi>Q</mi><mi>c</mi></msub></mfenced></mfenced><mo>⋅</mo><mi>exp</mi><mfenced separators=""><mi>j</mi><mo>⁢</mo><mfenced separators=""><msub><mi>Ω</mi><mi>R</mi></msub><mo>-</mo><msub><mi>Ω</mi><mi>T</mi></msub></mfenced><mo>⁢</mo><mi>t</mi></mfenced><mo>}</mo></mrow><mo>⋅</mo><mi>exp</mi><mspace width="1em"/><mi>j</mi><mo>⁢</mo><mi>Φ</mi></mtd></mtr></mtable></math><img id="ib0016" file="imgb0016.tif" wi="124" he="25" img-content="math" img-format="tif"/></maths></p><p id="p0081" num="0081">That means that, apart from a global phase factor, the real and imaginary parts of the tone corresponding to the TX image represent the gain and phase imbalance, respectively. In the same way, I-offset and Q-offset can be obtained independently by evaluating the real and imaginary parts of the amplitude of the tone corresponding to LO leakage.</p><p id="p0082" num="0082">Therefore, this scheme allows direct calibration of all four quantities using a single measurement.</p><p id="p0083" num="0083">The algorithm is a follows:
<ul><li>Transmit a test tone using ε<i><sub>C</sub></i> = δ<i><sub>C</sub></i> = <i>I<sub>C</sub></i> = <i>Q<sub>C</sub></i> = 0</li><li>Receive the test tone using a quadrature receiver</li><li>Perform an FFT and determine the correct frequency bins</li><li>Find phase factor from wanted tone</li><li>Eliminate this phase factor from frequency bins corresponding to image and leakage</li><li>Measure real and imaginary parts</li><li>Calculate ε<i><sub>C</sub></i>,δ<i><sub>C</sub></i>,<i>I<sub>C</sub></i>,<i>Q<sub>C</sub></i> by dividing real and imaginary parts of relevant amplitudes by amplitude of wanted tone</li><li>Possible to validate calibration is working by using second measurement with pre-compensation applied</li></ul></p><p id="p0084" num="0084">Note that through this division the absolute gain through the loop is removed.<!-- EPO <DP n="18"> --></p><p id="p0085" num="0085">Note further that the scheme also allows measurement and calibration of receiver I/Q and DC offset imbalance using the same measurement, e.g. a single measurement, rather than requiring an iterative process.</p><p id="p0086" num="0086">If there is no on-chip RF loop back connection (215) available then an off-chip loopback through duplexer (217) or other component can be used with the transmitter pre-power amplifier (224) enabled. However this is only applicable for calibration at production line, due to restriction of test tone transmission in the field.</p><p id="p0087" num="0087">The digital DC signal level applied to the DACs (205,207) is controlled by the modem, as is the digital amplitude and phase matching of the I and Q signals applied to the DACs, for carrier leakage and image, respectively. This is using circuitry to control the DC level of the I and Q signals (an adder), and circuitry to control the phase and gain of the Q signal relative to the I signal. These parameters are varied to minimize carrier leakage and image. Note that the phase control is not merely a fixed sample delay; rather, the same phase delay is applied to all baseband frequencies.</p><p id="p0088" num="0088">It is also possible to calibrate the gain and phase at multiple baseband frequencies, in which case the phase and gain correction blocks become more complicated. It is possible to use make use of the IFFT present in an OFDM/SC-FDM system to perform the quadrature amplitude and gain control.</p><p id="p0089" num="0089">If the calibrated parameters vary significantly with RF frequency, and the transceiver is for a system operating at plural RF frequencies, then it will be necessary to calibrate at plural RF frequencies. This can be done at production time, where enough frequencies are calibrated to allow all operating frequencies to be interpolated.</p><p id="p0090" num="0090">It can also be done on-the-fly. In that case, at the time the operating frequency is changed, the calibration is performed at the new operating frequency. The calibration can also vary with gain settings; in that case the same options are available (production calibration or on-the-fly calibration). Whether on-the-fly calibration is feasible in either case depends on the timing of the specific system.<!-- EPO <DP n="19"> --></p><p id="p0091" num="0091">The drawings concentrate upon direct up-conversion and down-conversion However indirect up-conversion/down-conversion is also possible, so arrangements with non-zero intermediate frequencies (IF) are also envisaged.</p><p id="p0092" num="0092">In a further arrangement, a calibration device is provided. The calibration device is similar to a receiver, for instance the receiver (202) described above, or an indirect down-conversion receiver, and has first connections to enable it to be connected to receive an RF output of a quadrature-type RF transmitter, and second connections to enable it to be connected to the modulator of the transmitter</p><p id="p0093" num="0093">The description above discusses embodiments using I and Q signals. However the invention does not depend on the presence of such signals.</p><p id="p0094" num="0094">Embodiments may allow for reduction, or cancellation, of transmitter analogue non-idealities using already optimized full receiver chain without an envelope detector.</p></description><claims mxw-id="PCLM56976253" lang="EN" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-en-0001" num="0001"><claim-text>An RF transceiver comprising a transmitter, an antenna and a receiver having receiving circuitry for receiving RF signals from the antenna, the transmitter having first and second analog signal paths for carrying in-phase and quadrature signals and the transmitter being arranged in use to provide RF signals to the antenna, the transceiver having means for coupling RF signals from the transmitter to an RF input of the receiving circuitry and means for causing the receiving circuitry to form signals related to undesired frequencies in the RF signals from the transmitter, the transceiver having processing circuitry adapted to respond to the signals related to the undesired frequencies to control the transmitter to reduce the undesired frequencies.</claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The transceiver of claim 1, wherein the undesired frequencies are at least partly due to differences between the first and second analog signal paths.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The transceiver of claim 1, wherein the receiving circuitry comprises first and second receive mixers arranged to down-convert the RF signal from the antenna by mixing with a receiver signal in phase-quadrature, the processing circuitry being responsive to the down-converted signal.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The transceiver of claim 3, having a desired output frequency, wherein the receiver signal is selected so that the processing circuitry is responsive to the wanted and unwanted signals.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The transceiver of claim 1 wherein the transmitter is one of a direct up-conversion transmitter and an indirect up-conversion transmitter.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The transceiver of claim 1 wherein the means for coupling the RF signals of the transmitter to an RF input of the receiving circuitry is an on-chip loopback path.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The transceiver of claim 1 having a loopback path from an input to a transmit power amplifier and an input to a low-noise amplifier of the receiving circuitry.<!-- EPO <DP n="21"> --></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The transceiver of claim 1, wherein the processing circuitry is further adapted to compensate for impairments in the receiving circuitry using the signals related to the undesired frequencies.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A method of transmitting RF signals from a transceiver comprising a transmitter, an antenna and a receiver having receiving circuitry for receiving RF signals from the antenna, the method comprising:-<br/>
providing respective phase-quadrature signals over first and second analog signal paths, and converting signals from the first and second analog signal paths to RF for the antenna,<br/>
coupling RF signals from the transmitter to an RF input of the receiving circuitry;<br/>
controlling the receiving circuitry to form signals related to undesired frequencies in the RF signals from the transmitter, and<br/>
in response to the signals related to the undesired frequencies, controlling the transmitter to reduce the undesired frequencies.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The method of claim 9, comprising mixing in-phase and quadrature information-carrying signals with respectively an in-phase transmitter LO signal and a quadrature transmitter LO signal to provide RF signals including a desired frequency.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>The method of claim 9, comprising mixing a signal from the RF input with an in-phase receiver LO signal and a quadrature receiver LO signal to down-convert undesired frequencies in the RF output from the amplifier to form in-phase and quadrature receiver signals; and using the in-phase and quadrature receiver signals, controlling the transmitter to reduce said undesired frequencies.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>The method of claim 9, wherein the transceiver has processing circuitry for processing signals output from the receiving circuitry to derive information from them, the method further comprising in response to the signals related to the undesired frequencies, controlling the processing circuitry to compensate for imbalance.</claim-text></claim></claims><drawings mxw-id="PDW16667035" load-source="patent-office"><!-- EPO <DP n="22"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="142" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="137" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="136" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="26"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="147" he="114" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
