<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680234-A2" country="EP" doc-number="2680234" kind="A2" date="20140101" family-id="48745639" file-reference-id="298227" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549370" ucid="EP-2680234-A2"><document-id><country>EP</country><doc-number>2680234</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13172483-A" is-representative="YES"><document-id mxw-id="PAPP154823293" load-source="docdb" format="epo"><country>EP</country><doc-number>13172483</doc-number><kind>A</kind><date>20130618</date><lang>EN</lang></document-id><document-id mxw-id="PAPP191080934" load-source="docdb" format="original"><country>EP</country><doc-number>13172483.3</doc-number><date>20130618</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140451288" ucid="JP-2012146127-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2012146127</doc-number><kind>A</kind><date>20120628</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988118479" load-source="docdb">G06T  19/00        20110101AFI20131119BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1801309552" load-source="docdb" scheme="CPC">G06T2210/62        20130101 LA20170614BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1996936478" load-source="docdb" scheme="CPC">G06T  19/20        20130101 LI20151123BHEP        </classification-cpc><classification-cpc mxw-id="PCL1991311583" load-source="docdb" scheme="CPC">G06T  17/00        20130101 FI20131226BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180594" lang="DE" load-source="patent-office">Transparente Visualisierung eines inneren Organs</invention-title><invention-title mxw-id="PT132180595" lang="EN" load-source="patent-office">Transparent visualization of an internal organ</invention-title><invention-title mxw-id="PT132180596" lang="FR" load-source="patent-office">Visualisation transparente d'un organe interne</invention-title><citations><non-patent-citations><nplcit><text>SCHROEDER, W.; MARTIN, K.; LORENSEN, B.: "The Visualization Toolkit", January 1997, PRENTICE HALL PTR, pages: 360 - 362</text><sources><source mxw-id="PNPL72678596" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918153438" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>FUJITSU LTD</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918149018" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>FUJITSU LIMITED</last-name></addressbook></applicant><applicant mxw-id="PPAR918983652" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>FUJITSU LIMITED</last-name><iid>100126510</iid><address><street>1-1, Kamikodanaka 4-chome, Nakahara-ku</street><city>Kawasaki-shi, Kanagawa 211-8588</city><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918168522" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>UNIV TOKYO</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918149725" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>THE UNIVERSITY OF TOKYO</last-name></addressbook></applicant><applicant mxw-id="PPAR918983902" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>The University of Tokyo</last-name><iid>100237914</iid><address><street>3-1, Hongo 7-chome</street><city>Bunkyo-ku, Tokyo 113-8654</city><country>JP</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918133482" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WATANABE MASAHIRO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918149992" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WATANABE, MASAHIRO</last-name></addressbook></inventor><inventor mxw-id="PPAR918981349" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>WATANABE, MASAHIRO</last-name><address><street>c/o FUJITSU LIMITED 1-1, Kamikodanaka 4-chome Nakahara-ku Kawasaki-shi</street><city>Kanagawa, 211-8588</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918158890" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>FUCHIKAMI SATOSHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918137638" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Fuchikami, Satoshi</last-name></addressbook></inventor><inventor mxw-id="PPAR918981808" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Fuchikami, Satoshi</last-name><address><street>c/o FUJITSU KYUSHU SYSTEMS LIMITED 2-2-1 Momochihama Sawara-ku Fukuoka-shi</street><city>Fukuoka, 814-8589</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918159919" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>OHWADA AKIHIKO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918140199" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>OHWADA, AKIHIKO</last-name></addressbook></inventor><inventor mxw-id="PPAR918981823" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>OHWADA, AKIHIKO</last-name><address><street>c/o FUJITSU LIMITED 1-1, Kamikodanaka 4-chome Nakahara-ku Kawasaki-shi</street><city>Kanagawa, 211-8588</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918136434" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>KADOOKA YOSHIMASA</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918148341" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>KADOOKA, YOSHIMASA</last-name></addressbook></inventor><inventor mxw-id="PPAR918994115" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>KADOOKA, YOSHIMASA</last-name><address><street>c/o FUJITSU LIMITED 1-1, Kamikodanaka 4-chome Nakahara-ku Kawasaki-shi</street><city>Kanagawa, 211-8588</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918148803" load-source="docdb" sequence="5" format="epo"><addressbook><last-name>HISADA TOSHIAKI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918156921" load-source="docdb" sequence="5" format="intermediate"><addressbook><last-name>HISADA, TOSHIAKI</last-name></addressbook></inventor><inventor mxw-id="PPAR918989353" load-source="patent-office" sequence="5" format="original"><addressbook><last-name>HISADA, TOSHIAKI</last-name><address><street>c/o The University of Tokyo 3-1, Hongo 7-chome, Bunkyo-ku</street><city>TOKYO, 113-8654</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918159266" load-source="docdb" sequence="6" format="epo"><addressbook><last-name>SUGIURA SEIRYO</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918150126" load-source="docdb" sequence="6" format="intermediate"><addressbook><last-name>SUGIURA, SEIRYO</last-name></addressbook></inventor><inventor mxw-id="PPAR918993117" load-source="patent-office" sequence="6" format="original"><addressbook><last-name>SUGIURA, SEIRYO</last-name><address><street>c/o The University of Tokyo 3-1, Hongo 7-chome, Bunkyo-ku</street><city>TOKYO, 113-8654</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918155144" load-source="docdb" sequence="7" format="epo"><addressbook><last-name>WASHIO TAKUMI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918148520" load-source="docdb" sequence="7" format="intermediate"><addressbook><last-name>WASHIO, TAKUMI</last-name></addressbook></inventor><inventor mxw-id="PPAR918989429" load-source="patent-office" sequence="7" format="original"><addressbook><last-name>WASHIO, TAKUMI</last-name><address><street>c/o The University of Tokyo 3-1, Hongo 7-chome, Bunkyo-ku</street><city>TOKYO, 113-8654</city><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918156569" load-source="docdb" sequence="8" format="epo"><addressbook><last-name>OKADA JUN-ICHI</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918163187" load-source="docdb" sequence="8" format="intermediate"><addressbook><last-name>OKADA, JUN-ICHI</last-name></addressbook></inventor><inventor mxw-id="PPAR918982934" load-source="patent-office" sequence="8" format="original"><addressbook><last-name>OKADA, JUN-ICHI</last-name><address><street>c/o The University of Tokyo 3-1, Hongo 7-chome, Bunkyo-ku</street><city>TOKYO, 113-8654</city><country>JP</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918984721" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>HOFFMANN EITLE</last-name><iid>100061036</iid><address><street>Patent- und Rechtsanwälte Arabellastrasse 4</street><city>81925 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548804557" load-source="docdb">AL</country><country mxw-id="DS548857625" load-source="docdb">AT</country><country mxw-id="DS548804559" load-source="docdb">BE</country><country mxw-id="DS548863483" load-source="docdb">BG</country><country mxw-id="DS548803372" load-source="docdb">CH</country><country mxw-id="DS548860658" load-source="docdb">CY</country><country mxw-id="DS548857626" load-source="docdb">CZ</country><country mxw-id="DS548804560" load-source="docdb">DE</country><country mxw-id="DS548860659" load-source="docdb">DK</country><country mxw-id="DS548860660" load-source="docdb">EE</country><country mxw-id="DS548877339" load-source="docdb">ES</country><country mxw-id="DS548863484" load-source="docdb">FI</country><country mxw-id="DS548863485" load-source="docdb">FR</country><country mxw-id="DS548804561" load-source="docdb">GB</country><country mxw-id="DS548860661" load-source="docdb">GR</country><country mxw-id="DS548804562" load-source="docdb">HR</country><country mxw-id="DS548857627" load-source="docdb">HU</country><country mxw-id="DS548803373" load-source="docdb">IE</country><country mxw-id="DS548804563" load-source="docdb">IS</country><country mxw-id="DS548863486" load-source="docdb">IT</country><country mxw-id="DS548860662" load-source="docdb">LI</country><country mxw-id="DS548889296" load-source="docdb">LT</country><country mxw-id="DS548857628" load-source="docdb">LU</country><country mxw-id="DS548889297" load-source="docdb">LV</country><country mxw-id="DS548889478" load-source="docdb">MC</country><country mxw-id="DS548840667" load-source="docdb">MK</country><country mxw-id="DS548840668" load-source="docdb">MT</country><country mxw-id="DS548877340" load-source="docdb">NL</country><country mxw-id="DS548857629" load-source="docdb">NO</country><country mxw-id="DS548840669" load-source="docdb">PL</country><country mxw-id="DS548860663" load-source="docdb">PT</country><country mxw-id="DS548877341" load-source="docdb">RO</country><country mxw-id="DS548860664" load-source="docdb">RS</country><country mxw-id="DS548840670" load-source="docdb">SE</country><country mxw-id="DS548860665" load-source="docdb">SI</country><country mxw-id="DS548857630" load-source="docdb">SK</country><country mxw-id="DS548840671" load-source="docdb">SM</country><country mxw-id="DS548803378" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670040" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A visualization program renders an internal organ and causes a computer to execute generating along an input normal vector, a given stereoscopic shape; calculating an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ; changing a degree of transparency of the overlapping portion; and rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.
<img id="iaf01" file="imgaf001.tif" wi="63" he="84" img-content="drawing" img-format="tif"/>
<img id="iaf02" file="imgaf002.tif" wi="68" he="117" img-content="drawing" img-format="tif"/>
<img id="iaf03" file="imgaf003.tif" wi="65" he="117" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499413" lang="EN" source="EPO" load-source="docdb"><p>A visualization program renders an internal organ and causes a computer to execute generating along an input normal vector, a given stereoscopic shape; calculating an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ; changing a degree of transparency of the overlapping portion; and rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</p></abstract><description mxw-id="PDES63955470" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD</heading><p id="p0001" num="0001">The embodiments discussed herein are related to a visualization program, a visualization method, and a visualization apparatus.</p><heading id="h0002">BACKGROUND</heading><p id="p0002" num="0002">Conventionally, numerical analysis is performed to reproduce phenomena of the heart, which pumps blood throughout the entire body by contractions of the myocardium in response to electrical signals. In general, numerical analysis results are displayed by color coded plots using 3-dimensional computer graphics technology. Distribution of physical values such as stroke work and workrate can be interpreted through cross sectional and isosurface display areas. Techniques are conventionally known that use a computing device to perform numerical simulations related to internal organs such as the stomach, small intestine, large intestine, bladder, etc. in addition to the heart, and use a visualization device to display simulation results to thereby perform visualization of numerical simulations related to the internal organs. For example, refer to <nplcit id="ncit0001" npl-type="b"><text>Schroeder, W., Martin, K., and Lorensen, B., "The Visualization Toolkit", 2nd Edition, Jan. 1997, Prentice Hall PTR, pp. 360-362</text></nplcit>.</p><p id="p0003" num="0003">Nonetheless, with the conventional techniques above, when the interior of internal organs having a cavity such as the heart, stomach, small intestine, large intestine, and bladder, is to be viewed, a model of the organ has to again be created. Therefore, high-speed rendering of the interior of the organ is difficult. For example, to check<!-- EPO <DP n="2"> --> blood flow distribution within the heart, after creating a model of the heart having an opening at the location to be observed, rendering has to again be performed, and the direction of blood flow in the heart has to be rendered a high speed, processes that are difficult.</p><heading id="h0003">SUMMARY</heading><p id="p0004" num="0004">It is an object in one aspect of the embodiments to at least solve the above problems in the conventional technologies.</p><p id="p0005" num="0005">According to an aspect of an embodiment, a visualization program renders an internal organ and causes a computer to execute generating along an input normal vector, a given stereoscopic shape; calculating an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ; changing a degree of transparency of the overlapping portion; and rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</p><heading id="h0004">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p0006" num="0006"><ul><li><figref idrefs="f0001">FIGs. 1A, 1B, and 1C</figref> are diagrams depicting an example of heart model visualization according to a first embodiment;</li><li><figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref> are cross sectional views of heart models;</li><li><figref idrefs="f0003">FIG. 3</figref> is a block diagram of a hardware configuration of a visualization apparatus according to the first embodiment;</li><li><figref idrefs="f0004">FIG. 4</figref> is a diagram depicting an example of tetra-element-group data structures D1 to Dn, respectively for times t1 to tn;<!-- EPO <DP n="3"> --></li><li><figref idrefs="f0005">FIG. 5</figref> is a diagram depicting a tetra element Ej (ti) in a data structure Di;</li><li><figref idrefs="f0006">FIG. 6</figref> is a diagram depicting an example of blood-flow-vector data structures G1 to Gn, for each time t1 to tn;</li><li><figref idrefs="f0007">FIG. 7</figref> is a block diagram of a functional configuration of the visualization apparatus according to the first embodiment;</li><li><figref idrefs="f0008">FIG. 8</figref> is a flowchart depicting an example of a visualization process performed by a visualization apparatus 700 according to the first embodiment;</li><li><figref idrefs="f0009">FIG. 9</figref> is a flowchart depicting an example of a external-surface-element-group detection process (step S804) depicted in <figref idrefs="f0008">FIG. 8</figref>;</li><li><figref idrefs="f0010">FIG. 10</figref> is a flowchart depicting an example of a posterior-surface-element-group detection process (step S805) depicted in <figref idrefs="f0008">FIG. 8</figref>;</li><li><figref idrefs="f0011">FIGs. 11A, 11B, and 11C</figref> are diagrams depicting an example of heart model visualization according to a second embodiment;</li><li><figref idrefs="f0012">FIG. 12</figref> is a flowchart depicting an example of the visualization process performed by the visualization apparatus 700 according to the second embodiment;</li><li><figref idrefs="f0013">FIG. 13</figref> is a flowchart depicting an example of operations of the external-surface-element-group detection process (step S1204) depicted in <figref idrefs="f0012">FIG. 12</figref>;</li><li><figref idrefs="f0014">FIG. 14</figref> is a flowchart depicting an example of operations of the posterior-surface-element-group detection process (step S1205) depicted in <figref idrefs="f0012">FIG. 12</figref>; and</li><li><figref idrefs="f0015">FIG. 15</figref> is a flowchart depicting another example of the visualization process performed by the visualization apparatus 700 according to the second embodiment.</li></ul><!-- EPO <DP n="4"> --></p><heading id="h0005">DESCRIPTION OF EMBODIMENTS</heading><p id="p0007" num="0007">Embodiments of a visualization program, a visualization method, and a visualization apparatus according to the present invention will be explained with reference to the accompanying drawings. With internal organs such as the heart, physical values vary according to time. To express such types of internal organs, in the present embodiments, a 3-dimensional model of the internal organ is employed. The 3-dimensional model of the internal organ is a set of tetrahedral unstructured grid data called tetra elements. Each tetra element has a physical value corresponding to the position of the tetra element. A physical value is a value indicative of the behavior of the cardiac muscle corresponding to the tetra element; and, for example, pressure [KPa], work [J/ml], workrate [J/s·ml] are adopted as physical values.</p><p id="p0008" num="0008">In the present embodiments, although description is given using a 3-dimensional model of a heart as one example of an internal organ, implementation may be by a 3-dimensional model of another internal organ other than the heart. Herein, a 3-dimensional model of the heart will be referred to as a "heart model". Although the heart model exists for each unit of time, the heart, which is the basis of the model, is the heart of one individual.</p><p id="p0009" num="0009"><figref idrefs="f0001">FIGs. 1A, 1B, and 1C</figref> are diagrams depicting an example of heart model visualization according to a first embodiment. In <figref idrefs="f0001">FIGs. 1A, 1B, and 1C</figref>, since behavior of the heart is indicated in time series, a heart model at a given time t1 and a heart model at a. time t2 subsequent to time t1 are used to describe an example of heart model visualization of the interior of a heart.</p><p id="p0010" num="0010"><figref idrefs="f0001">FIG. 1A</figref> is a heart model M(t1) at time t1. Herein, a heart model at time ti (1≤i≤n) is indicated as M(ti). A<!-- EPO <DP n="5"> --> visualization apparatus, according to input via an input device such as a mouse, designates at an external surface of the heart model M(t1) at time t1, an aspect that is an area. The designated aspect is referred to as a "designated area R". The designated area R may have a rectangular or a circular shape. Further, the designated area R may be a free-form, closed curve drawn by user manipulation of the input device.</p><p id="p0011" num="0011">As depicted in <figref idrefs="f0001">FIG. 1B</figref>, the visualization apparatus processes a portion of the cardiac muscle posterior to the designated area R, to become transparent. Thus, by making the portion of cardiac muscle transparent without removing the portion of cardiac muscle, the interior of the heart becomes visible through the transparent portion of cardiac muscle. In the interior of the heart, blood flow is modeled by blood flow vectors at time t1. By merely processing the portion of cardiac muscle corresponding to the designated area R to be transparent, the directions of blood flow vectors at time t1 become visible.</p><p id="p0012" num="0012"><figref idrefs="f0001">FIG. 1C</figref> depicts a state where the portion of cardiac muscle corresponding to the designated area R of a heart model M(t2) at time t2 has been processed to become transparent. As compared to time t1, at time t2, the directions of the blood flow vectors have changed. In this manner, by periodically rendering heart models in which the cardiac muscle corresponding to the designated area R has been processed to become transparent, the directions of internal blood flow vectors become visible in time series</p><p id="p0013" num="0013">Thus, in <figref idrefs="f0001">FIGs. 1A to 1C</figref>, the data is left as is and made transparent without excluding data for the portion of cardiac muscle, making regeneration of a heart model in which the portion of cardiac muscle is removed and/or re-rendering, etc. unnecessary and thereby, enabling increased<!-- EPO <DP n="6"> --> rendering speed to be facilitated.</p><p id="p0014" num="0014"><figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref> are cross sectional views of heart models. <figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref> sequentially depict a cross sectional view of a heart model M(ti), respectively, in time series. Further, in <figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref>, the external side of each heart model M(ti) is oriented on the left side of each figure is and the interior side of each heart model M(ti) is oriented on the right side of each figure. In the interior of each heart model M(ti), although blood flow vectors are present, in <figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref>, the blood flow vectors are not depicted. Further in <figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref>, an arrow originating from a tetra element is a normal vector of the tetra element. A normal vector is an attribute of a tetra element forming a surface such as an external surface and an internal surface; tetra elements exclusive of these have no normal vector. Further in <figref idrefs="f0002">FIGs. 2A, 2B, 2C, 2D, and 2E</figref>, VP is a viewpoint; VD is a line of sight vector from the viewpoint VP.</p><p id="p0015" num="0015">As depicted in <figref idrefs="f0002">FIG. 2A</figref>, when a designated area R is set, the visualization apparatus detects a tetra element group that includes the designated area R. The visualization apparatus, from the detected tetra element group, extracts a tetra element group having normal vectors. The visualization apparatus, from an angle θ formed by the normal vector and the direction of the sight vector VD of each tetra element in the extracted tetra element group, identifies a tetra element group having normal vectors opposite in direction to the direction of the sight vectors VD. The identified tetra element group is referred to as an "external surface element group". In <figref idrefs="f0002">FIG. 2A</figref>, the external surface element group is a solid-fill-object tetra element group. Further, an opposite direction need not be<!-- EPO <DP n="7"> --> 180 degrees in an opposite direction and suffices to be, for example, 90 degrees&lt;θ&lt;270 degrees.</p><p id="p0016" num="0016">In <figref idrefs="f0002">FIGs. 2A and 2B</figref>, when an external surface element group is determined, the visualization apparatus pushes out the designated area R, a given distance in a posterior direction of the heart model and generates a stereoscopic shape S. Here, posterior direction is a direction from outside the heart model M(ti) toward the interior thereof and, for example, is a direction opposite to the normal vectors of the tetra element groups of the external surface element group. Further, the posterior direction may be the sight direction of a sight vector VD. The visualization apparatus detects a tetra element group included in a posterior aspect of the stereoscopic shape S formed by pushing the designated area R.</p><p id="p0017" num="0017">In <figref idrefs="f0002">FIG. 2B</figref>, the solid-fill-object tetra element group is the detected tetra element group. The posterior aspect is referred to as "extrusion face X". The visualization apparatus attempts to extract from the detected tetra element group, a tetra element group having normal vectors. In <figref idrefs="f0002">FIG. 2B</figref>, since no tetra elements included in the extrusion face X have a normal vector, the visualization apparatus further pushes the extrusion face X a given distance in the posterior direction.</p><p id="p0018" num="0018">After the extrusion face X has been pushed as depicted in <figref idrefs="f0002">FIG. 2B</figref>, as further depicted in <figref idrefs="f0002">FIG. 2C</figref>, the visualization apparatus again detects a tetra element group included in the extrusion face X. The visualization apparatus attempts to extract from the detected tetra element group, a tetra element group having normal vectors. In <figref idrefs="f0002">FIG. 2C</figref>, a tetra element group having normal vectors is present in the tetra element group included in the extrusion face X. The visualization apparatus, from the<!-- EPO <DP n="8"> --> angle θ formed by the normal vector and the direction of the sight vector VD of each tetra element in the tetra element group, identifies a tetra element group having normal vectors in a direction along the directions of the sight vectors VD. The identified tetra element group is referred to as a "posterior surface element group".</p><p id="p0019" num="0019">In <figref idrefs="f0002">FIG. 2C</figref>, the posterior surface element group is a solid-fill-object tetra element group. A direction along the direction of a sight vector VD need not be a direction identical to the direction of the sight vector VD and suffices to be, for example, 0 degrees≤θ&lt;90 degrees. The visualization apparatus pushes the extrusion face X a given distance in the posterior direction until tetra elements having normal vectors along the direction of the sight vectors VD are no longer detected.</p><p id="p0020" num="0020">Consequent to the pushing depicted in <figref idrefs="f0002">FIG. 2C</figref>, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, tetra elements having normal vectors in a direction along the directions of the sight vector VDs are no longer detected. In <figref idrefs="f0002">FIG. 2D</figref>, the posterior surface element group is a solid-fill-object tetra element group. The visualization apparatus identifies a tetra element group that overlaps the stereoscopic shape S. Here, the identified tetra element group is referred to as an "element group to be subject to transparency processing". An element group to be subject to transparency processing is a set of tetra element groups in the external surface element group, the posterior surface element group, and between the external surface element group and the posterior surface element group. The visualization apparatus may display the physical value distribution of tetra elements adjacent to the element group to be subject to transparency processing.</p><p id="p0021" num="0021">As depicted in <figref idrefs="f0002">FIG. 2E</figref>, when an element group to be<!-- EPO <DP n="9"> --> subject to transparency processing is identified by the operations depicted in <figref idrefs="f0002">FIG. 2D</figref>, the visualization apparatus executes, for example, by α blending, transparency processing on the element group to be subject to the transparency processing. In <figref idrefs="f0002">FIG. 2E</figref>, the transparent element group subjected to the transparency processing is indicated by a dotted line. Thus, when the viewpoint is the viewpoint VP, consequent to the element group subject to transparency processing becoming transparent, blood flow vectors inside the heart model and an internal wall surface of the heart model become visible from the element group subject to the transparency processing. Further, since the internal wall surface in the posterior direction is neither transparent nor removed, the user can view the interior of the heart where only the element group subject to the transparency processing is as if removed.</p><p id="p0022" num="0022"><figref idrefs="f0003">FIG. 3</figref> is a block diagram of a hardware configuration of the visualization apparatus according to the first embodiment. As depicted in <figref idrefs="f0003">FIG. 3</figref>, the visualization apparatus includes a central processing unit (CPU) 301, read-only memory (ROM) 302, random access memory (RAM) 303, a magnetic disk drive 304, a magnetic disk 305, an optical disk drive 306, an optical disk 307, a display 308, an interface (I/F) 309, a keypad 310, a mouse 311, a scanner 312, and a printer 313, respectively connected by a bus 300.</p><p id="p0023" num="0023">The CPU 301 governs overall control of the visualization apparatus. The ROM 302 stores various types of programs such as a boot program. The RAM 303 is used as a work area of the CPU 301. The magnetic disk drive 304, under the control of the CPU 301, controls the reading and writing of data with respect to the magnetic disk 305. The magnetic disk 305 stores data written thereto under the<!-- EPO <DP n="10"> --> control of the magnetic disk drive 304.</p><p id="p0024" num="0024">The optical disk drive 306, under the control of the CPU 301, controls the reading and writing of data with respect to the optical disk 307. The optical disk 307 stores data written thereto under the control of the optical disk drive 306, the data being read out from the optical disk 307 by a computer.</p><p id="p0025" num="0025">The display 308 displays, for example, data such as text, images, functional information, etc., in addition to a cursor, icons, and/or tool boxes. A liquid crystal display, a plasma display, etc., may be employed as the display 508.</p><p id="p0026" num="0026">The I/F 309 is connected to a network 314 such as a local area network (LAN), a wide area network (WAN), and the Internet through a communication line and is connected to other apparatuses through the network 314. The I/F 309 administers an internal interface with the network 314 and controls the input/output of data from/to external apparatuses. For example, a modem or a LAN adaptor may be employed as the I/F 309.</p><p id="p0027" num="0027">The keypad 310 includes, for example, keys for inputting letters, numerals, and various instructions and performs the input of data. Alternatively, a touch-panel-type input pad or numeric keypad, etc. may be adopted. The mouse 311 is used to move the cursor, select a region, or move and change the size of windows. A track ball or a joy stick may be adopted provided each respectively has a function similar to a pointing device.</p><p id="p0028" num="0028">The scanner 312 optically reads an image into the visualization apparatus. The scanner 312 may have an optical character reader (OCR) function. The printer 313 prints image data and text data. The printer 313 may be, for example, a laser printer, an inkjet printer, and the<!-- EPO <DP n="11"> --> like. Further, configuration may be such that at least any one among the optical disk drive 306, the optical disk 307, the display 308, the keypad 310, the mouse 311, the scanner 312, and the printer 313 is omitted.</p><p id="p0029" num="0029">The contents of a database (DB) of the visualization apparatus will be described. The DB has a tetra-element-group data structure and a blood-flow-vector data structure. A function of the DB is implemented by a storage device such as the ROM 302, the RAM 303, the magnetic disk 305, and the optical disk 307 depicted in <figref idrefs="f0003">FIG. 3</figref>.</p><p id="p0030" num="0030"><figref idrefs="f0004">FIG. 4</figref> is a diagram depicting an example of tetra-element-group data structures D1 to Dn, respectively for times t1 to tn. "n" is a time step count. The heart model M(ti) at time ti is constructed by the tetra-element-group data structure Di for time ti. "i" is an integer satisfying 1≤i≤n. Here, the tetra-element-group data structure Di for time ti is a data structure having for each tetra element, values of an ID field, a first vertex field to a fourth vertex field, a center of gravity field, a physical value field, a normal vector field, and a transparency field.</p><p id="p0031" num="0031">The ID field stores a tetra element ID: i(1≤j≤m). "m" is the total number of tetra elements. "j" is an integer satisfying 1≤j≤m. An ID is identifier information uniquely identifying a tetra element. The tetra element of the ID "j" is tetra element Ej(ti). The first vertex field to the fourth vertex field store vertex coordinate values of a first vertex v1(Ej(ti)) to a fourth vertex v4(Ej(ti)) for tetra element Ej(ti). For the sake of convenience, coordinate values will be indicated as v1(Ej(ti)) to v4(Ej(ti)). The first vertex v1(Ej(ti)) to the fourth vertex v4(Ej(ti)) are respectively the vertices of the<!-- EPO <DP n="12"> --> tetra element, which is a tetrahedron.</p><p id="p0032" num="0032">The center of gravity field stores center of gravity coordinate values for the center of gravity g(Ej(ti)) of the tetra element Ej(ti). For the sake of convenience, the coordinate values will be indicated as g(Ej(ti)). The physical value field stores a physical value p(Ej(tI)) assigned to center of gravity g(Ej(ti))the of tetra element Ej(ti). As described, a physical value p(Ej(ti)) is a value indicative of the behavior of the cardiac muscle corresponding to the tetra element; and, for example, pressure [KPa], work [J/ml], workrate [J/s-ml] are adopted as physical values.</p><p id="p0033" num="0033">The normal vector field stores a normal vector. A normal vector is not an attribute of all tetra elements, but rather an attribute of a tetra element forming a surface such as an external surface and an internal surface; tetra elements exclusive of these have no normal vector. The transparency field stores a transparency flag that indicates whether the tetra element is to be subject to transparency processing. The initial value of the transparency flag is "0", which indicates that the tetra element is not to be subject to transparency processing, whereas "1" indicates that the tetra element is to be subjected to transparency processing. The transparency flag is set to 1 when the tetra element is in the external surface element group, the posterior surface element group, or between the external surface element group and the posterior surface element group.</p><p id="p0034" num="0034"><figref idrefs="f0005">FIG. 5</figref> is a diagram depicting a tetra element Ej(ti) in the data structure Di. The shape of the tetra element Ej(ti) is a tetrahedron having the first vertex v1(Ej(ti)) to the fourth vertex v4(Ej(ti)). Further, physical value p(Ej(ti)) is assigned to the center of gravity g(Ej(ti)).<!-- EPO <DP n="13"> --></p><p id="p0035" num="0035"><figref idrefs="f0006">FIG. 6</figref> is a diagram depicting an example of blood-flow-vector data structures G1 to Gn, for each time t1 to tn. Blood flow in the heart model at time ti is constructed by the blood-flow-vector data structure Gi for time ti. Here, the blood-flow-vector data structure Gi for time ti is a data structure having values of an ID field, a first vertex field to a fourth vertex field, and a first blood flow field to a fourth blood flow field, for each tetra element having a blood flow vector.</p><p id="p0036" num="0036">The ID field stores the ID of a tetra element having a blood flow vector. An ID is identifier information uniquely identifying a tetra element. For example, the ID "B1(ti)" is tetra element B1 at time t1 and having a blood flow vector. Herein, an arbitrary tetra element at time ti and having a blood flow vector will be indicated as tetra element B(ti).</p><p id="p0037" num="0037">The first vertex field to the fourth vertex field store vertex coordinate values of a first vertex v1(B(ti)) to a fourth vertex v4(B(ti)) for tetra element B(ti). For the sake of convenience, coordinate values will be indicated as v1(B(ti)) to v4(B(ti)). The first vertex v1(B(ti)) to the fourth vertex v4(B(ti)) are respectively the vertices of the tetra element B(ti), which is a tetrahedron.</p><p id="p0038" num="0038">The first blood flow field to the fourth blood flow field store blood flow vectors bs1(B(ti)) to bs4(B(ti)) having the first vertex v1(B(ti)) to the fourth vertex v4(B(ti)) of tetra element B(ti). The vertices of tetra element B(ti) may be common to another tetra element B(ti), in which case, the blood flow vector is also common between the tetra elements B(ti).</p><p id="p0039" num="0039"><figref idrefs="f0007">FIG. 7</figref> is a block diagram of a functional configuration of the visualization apparatus according to<!-- EPO <DP n="14"> --> the first embodiment. A visualization apparatus 700 includes a generating unit 701, a calculating unit 702, a changing unit 703, a rendering unit 704, and a DB 705. Functions of the generating unit 701, the calculating unit 702, the changing unit 703, and the rendering unit 704, for example, are implemented by executing on the CPU 301, a program stored in a storage device such as the ROM 302, the RAM 303, the magnetic disk 305, and the optical disk 307 depicted in <figref idrefs="f0003">FIG. 3</figref>, or via the I/F 309. The DB 705 stores the data structures D1 to Dn and the blood-flow data structures G1 to Gn of the heart models M(t1) to M(tn).</p><p id="p0040" num="0040">The generating unit 701 refers to the DB 705 and generates a given stereoscopic shape S along an input normal vector. For example, the generating unit 701 has a designating unit 710, a first detecting unit 711, and a second detecting unit 712. The designating unit 710 designates an area of the external surface of an internal organ model. The designated area is the designated area R depicted in <figref idrefs="f0001">FIGs. 1</figref> and <figref idrefs="f0002">2</figref>. The first detecting unit 711, as depicted in <figref idrefs="f0002">FIG. 2A</figref>, detects an external surface element group. The second detecting unit 712, as depicted in <figref idrefs="f0002">FIGS. 2B to 2D</figref>, detects a posterior surface element group. The designating unit 710, the first detecting unit 711, and the second detecting unit 712 generate a stereoscopic shape S.</p><p id="p0041" num="0041">The calculating unit 702 calculates an overlapping portion of the stereoscopic shape S generated by the generating unit 701 and the shape of the internal organ. For example, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, the calculating unit 702 identifies, as an element group to be subject to transparency processing, a tetra element group overlapping the stereoscopic shape S.</p><p id="p0042" num="0042">The changing unit 703 changes the degree of transparency of the overlapping portion calculated by the<!-- EPO <DP n="15"> --> calculating unit 702. For example, the changing unit 703, as depicted in <figref idrefs="f0002">FIG. 2E</figref>, reduces an α value of the degree of transparency of the element group to be subject to transparency processing (i.e., overlapping portion). The α value is a numeric value representing the degree of transparency. When the maximum value is 255, as the numeric value becomes smaller from 255, the degree of transparency increases and when the α value is 0 the overlapping portion becomes completely transparent. The degree to which the α value is reduced is preliminarily set.</p><p id="p0043" num="0043">The rendering unit 704 renders the internal organ model after the changing unit 703 has changed the degree of transparency. For example, the rendering unit 704, at each time t1 to tn, uses the data structure Di of the heart model M(ti); and applies the degree of transparency to and renders, the element group subject to transparency processing, and renders other tetra elements by a known rendering process, using a preliminarily set color. Further, the rendering unit 704 refers to the data structure Bi of the blood flow vector and renders the blood flow vector. In this manner, as depicted in <figref idrefs="f0001">FIGs. 1A, 1B, 1C</figref> and <figref idrefs="f0002">2E</figref>, a configuration as if viewing the heart model from the position of the element group subject to transparency processing can be rendered, whereby the user can view from the position of element group subject to transparency processing, blood flow vectors inside the heart model. Further, the rendering unit 704 may be configured to render the distribution of the physical values of tetra elements adjacent to the element group subject to transparency processing.</p><p id="p0044" num="0044"><figref idrefs="f0008">FIG. 8</figref> is a flowchart depicting an example of a<!-- EPO <DP n="16"> --> visualization process performed by the visualization apparatus 700 according to the first embodiment. The visualization apparatus 700 designates a time step count n (step S801), and uses the data structure D1 of the heart model M(t1) at time t1 to further designate an area of the heart model M(t1) (step S802). Thus, the designated area R is set.</p><p id="p0045" num="0045">The visualization apparatus 700 sets an index i of a time step to be i=1 (step S803) and via the first detecting unit 711, executes an external-surface-element-group detection process (step S804). The external-surface-element-group detection process (step S804), as depicted in <figref idrefs="f0002">FIG. 2A</figref>, is a process of detecting an external surface element group. The external-surface-element-group detection process (step S804) will be described in detail with reference to <figref idrefs="f0009">FIG. 9</figref>.</p><p id="p0046" num="0046">The visualization apparatus 700, via the second detecting unit 712, executes a posterior-surface-element-group detection process (step S805). The posterior-surface-element-group detection process (step S805), as depicted in <figref idrefs="f0002">FIGs. 2B to 2D</figref>, is a process of detecting a posterior surface element group. The posterior-surface-element-group detection process (step S805) will be described in detail with reference to <figref idrefs="f0010">FIG. 10</figref>.</p><p id="p0047" num="0047">Detection of an external surface element group and a posterior surface element group is equivalent to the visualization apparatus 700 generating a stereoscopic shape S overlapping tetra element groups from the external surface element group to the posterior surface element group. The visualization apparatus 700, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, identifies, as an element group to be subject to transparency processing, a tetra element group that overlaps the stereoscopic shape S (step S806).<!-- EPO <DP n="17"> --></p><p id="p0048" num="0048">The visualization apparatus 700 lowers the degree of transparency of the element group to be subject to transparency processing (step S807), and renders the heart model using the resulting degree of transparency (step S808). Thus, as depicted in <figref idrefs="f0001">FIG. 1B</figref>, at time t1, a configuration of the heart model can be rendered as if the element group subjected to transparency processing has been removed, enabling blood flow vectors inside the heart model to be visible from the element group subjected to transparency processing.</p><p id="p0049" num="0049">The visualization apparatus 700 increments the index i of the time step count (step S809), and determines whether i&gt;n is true (step S810). If i&gt;n is not true (step S810: NO), the visualization apparatus 700 resets the designated area of the heart model M(ti) at time ti (step S811), and returns to step S804. For example, even with a transition from time t1 to time t2, the designated area R of the heart model M(t1) and the designated area R of the heart model M(t2) are at the same position.</p><p id="p0050" num="0050">Consequently, even if the shape of the heart model M(ti) varies temporally, in the heart model M(ti) at each time ti, the visualization apparatus 700 does not change the position of the element group subject to transparency processing and as a result, the user can view, from a fixed position, the blood flow vectors in each heart model M(ti). As step S810, if i&gt;n is true (step S810: YES), the visualization apparatus 700 ends the visualization process.</p><p id="p0051" num="0051"><figref idrefs="f0009">FIG. 9</figref> is a flowchart depicting an example of the external-surface-element-group detection process (step S804) depicted in <figref idrefs="f0008">FIG. 8</figref>. The visualization apparatus 700 detects a tetra element group that includes the designated area R (step S901). Herein, the detected tetra element group is referred to as a "detected tetra element group".<!-- EPO <DP n="18"> --></p><p id="p0052" num="0052">The visualization apparatus 700 refers to the data structure Di of time ti, and from among detected tetra element groups, extracts a tetra element group having normal vectors (step S902). Herein, the extracted tetra element group is referred to as an "extracted tetra element group".</p><p id="p0053" num="0053">The visualization apparatus 700 determines whether among the extracted tetra element group, a tetra element that has yet to be selected is present (step S903). If such a tetra element is present (step S903: YES), the visualization apparatus 700 selects one unselected tetra element from among unselected tetra elements in the extracted tetra element group (step S904). Herein, a tetra element is referred to as a "selected tetra element". The visualization apparatus 700 calculates cos θ for the angle θ formed with the line of sight vector VD (step S905). The visualization apparatus 700 determines whether cos θ&lt;0 is true (step S906)<i>.</i></p><p id="p0054" num="0054">If cos θ&lt;0 is not true (step S906: NO), the visualization apparatus 700 returns to step S903. On the other hand, if cos θ&lt;0 is true (step S906: YES), the visualization apparatus 700 determines the selected tetra element to be an external surface element (step S907). For example, the visualization apparatus 700 changes the transparency flag of the selected tetra element to "1". The visualization apparatus 700 transitions to step S907. Thereafter, if no unselected tetra element is present (step S903: NO), the visualization apparatus 700 ends the external-surface-element-group detection process (step S804). Thus, as depicted in <figref idrefs="f0002">FIG. 2A</figref>, an external surface element group is detected.</p><p id="p0055" num="0055"><figref idrefs="f0010">FIG. 10</figref> is a flowchart depicting an example of the<!-- EPO <DP n="19"> --> posterior-surface-element-group detection process (step S805) depicted in <figref idrefs="f0008">FIG. 8</figref>. The visualization apparatus 700 shifts the designated area R in a posterior direction by Δd, and generates an extrusion face X (step S1001). The visualization apparatus 700 detects a tetra element group included in the extrusion face X (step S1002). Herein, the detected tetra element group is referred to as a "detected tetra element group". The visualization apparatus 700 extracts from the detected tetra element group, a tetra element group having normal vectors (step S1003). Herein, this tetra element group is referred to as an "extracted tetra element group".</p><p id="p0056" num="0056">The visualization apparatus 700 determines whether an unselected tetra element is present in the extracted tetra element group (step S1004). If an unselected tetra element is present (step S1004: YES), the visualization apparatus 700 selects one unselected tetra element from among unselected tetra elements in the extracted tetra element group (step S1005). Herein, this tetra element is referred to as a "selected tetra element". The visualization apparatus 700 calculates cos θ for the angle θ formed with the line of sight vector VD (step S1006). The visualization apparatus 700 determines whether cos θ&gt;0 is true (step S1007).</p><p id="p0057" num="0057">If cos θ&lt;0 is not true (step S1006: NO), the visualization apparatus 700 returns to step S1004. On the other hand, if cos θ&gt;0 is true (step S1007: YES), the visualization apparatus 700 determines the selected tetra element to be a posterior surface element (step S1008). For example, the visualization apparatus 700 changes the transparency flag of the selected tetra element to "1". The visualization apparatus 700 determines whether a<!-- EPO <DP n="20"> --> determining flag F is F=0 (step S1009). Here, the determining flag F will be described.</p><p id="p0058" num="0058">The determining flag F is a flag for observing the state from when a tetra element determined as a posterior surface element first appears and the extrusion face X is successively shifted by Δd until the extrusion face X is no longer included in the tetra element group, in the data structure Di at time ti. The initial value of the determining flag F is F=0. F=0 represents a not-determined state. In other words, when a posterior surface element is first determined, the determining flag F is changed from F=0 to F=1. When the determining flag F is F=1 and if from the extracted tetra element group, no posterior surface element has been determined, the visualization apparatus 700 determines that transition has occurred to an internal cavity of the heart model in which the extrusion face X has passed beyond the cardiac muscle.</p><p id="p0059" num="0059">In other words, at step S1009, if the determining flag F is F=0 (step S1009: YES), the visualization apparatus 700 changes the determining flag F to F=1, indicating that the posterior surface element has first appeared (step S1010). The visualization apparatus 700 transitions to step S1004. On the other hand, if the determining flag F is F=1 (step S1009: NO), the visualization apparatus 700 transitions to step S1004.</p><p id="p0060" num="0060">At step S1004, if no unselected tetra element is present (step S1004: NO), the visualization apparatus 700 determines whether the determining flag F is F=1 (step S1011). If the determining flag F is not F=1 (step S1011: NO), no posterior surface element has been determined and therefore, the visualization apparatus 700 transitions to step S1002.</p><p id="p0061" num="0061">On the other hand, if the determining flag F is F=1<!-- EPO <DP n="21"> --> (step S1011: YES), the visualization apparatus 700 determines whether in the currently extracted tetra element group, no posterior surface element has been determined (step S1012). If even one posterior surface element has been determined (step S1012: NO), the visualization apparatus 700 transitions to step S1002. On the other hand, if no posterior surface element has been determined (step S1012: YES), the visualization apparatus 700 determines that the extrusion face X has passed beyond the cardiac muscle and a transition to an internal cavity of the heart model has occurred, and the visualization apparatus 700 ends the posterior-surface-element-group detection process (step S805). Thus, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, a tetra element group overlapping the stereoscopic shape S can be identified.</p><p id="p0062" num="0062">In this manner, according to the first embodiment, without excluding data for the portion of the cardiac muscle, the data remains as is and is subject to transparency processing, whereby regeneration of the heart model in which the portion of cardiac muscle is removed and re-rendering, etc. become unnecessary, enabling increased rendering speed to be facilitated.</p><p id="p0063" num="0063">A second embodiment will be described. The first embodiment describes an example where in heart models M(ti) at times ti, each heart model M(ti) at time ti is viewed in time series with the designated area R in a fixed state. In contrast, the second embodiment describes an example where heart models M(ti) at times ti are viewed in time series with a tetra element group included in the designated area R at time t1 being in a fixed state.</p><p id="p0064" num="0064">In other words, in the first embodiment, the shape of the element group corresponding to the designated area R and to be subject to transparency processing is<!-- EPO <DP n="22"> --> substantially the same, while in the second embodiment, since the tetra element group that includes the designated area R at time t1 is traced from time t2 and thereafter, the shape of the element group to be subject to transparency processing at each time ti differs. For example, if with respect to the heart model M(t1) at time t1, the user sets a given afflicted site as the designated area R, the state of the interior of the heart model as viewed from the tetra element group that represents the afflicted site and blood flow can be viewed as with the elapse of time.</p><p id="p0065" num="0065">As a result, how the interior of the heart is being affected by the problematic area can be viewed. Further, since the user does not have to designate the problematic area at each time ti, convenience and usability can be improved. In the second embodiment, only aspects differing from those of the first embodiment will be described and since aspects other than these are identical to the first embodiment, explanation thereof is omitted in the second embodiment.</p><p id="p0066" num="0066"><figref idrefs="f0011">FIGs. 11A, 11B, and 11C</figref> are diagrams depicting an example of heart model visualization according to the second embodiment. In <figref idrefs="f0011">FIGs. 11A, 11B, and 11C</figref>, since behavior of the heart is indicated in time series, a heart model of a given time t1 and a heart model at a time t2 subsequent to time t1 are used to describe an example of heart model visualization of the interior of a heart. Among <figref idrefs="f0011">FIGs. 11A, 11B, and 11C, FIGs. 11A and 11B</figref> depict the same contents as <figref idrefs="f0001">FIGs. 1A and 1B</figref> in the first embodiment and description thereof is omitted.</p><p id="p0067" num="0067"><figref idrefs="f0011">FIG. 11C</figref> depicts a transparent state at time t2. Compared to time t1, a transparent portion at time t2 is at a position different from that of the transparent portion<!-- EPO <DP n="23"> --> at time t1. In other words, the tetra element group that includes the designated area R at time t1 has moved to the position of the transparent portion at time t2 as depicted in <figref idrefs="f0011">FIG. 11C</figref>. In this manner, if the designated area R at time t1 is an afflicted site, the state of the interior of the heart model as viewed from the tetra element group that represents the afflicted site and blood flow can be viewed as with the elapse of time.</p><p id="p0068" num="0068">Further, similar to the first embodiment, without excluding data for the portion of the cardiac muscle, the data remains as is and is subject to transparency processing, whereby regeneration of the heart model in which the portion of cardiac muscle is removed and re-rendering, etc. become unnecessary, enabling increased rendering speed to be facilitated.</p><p id="p0069" num="0069"><figref idrefs="f0012">FIG. 12</figref> is a flowchart depicting an example of the visualization process performed by the visualization apparatus 700 according to the second embodiment. The visualization apparatus 700 designates the time step count n (step S1201), and uses the data structure D1 of the heart model M(t1) at time t1 to designate an area of the heart model M(t1) (step S1202). Thus, the designated area R is set.</p><p id="p0070" num="0070">The visualization apparatus 700 increments the index I of the time step to be i=1 (step S1203) and via the first detecting unit 711, executes the external-surface-element-group detection process (step S1204). The external-surface-element-group detection process (step S1204) is a process of detecting an external surface element group as depicted in <figref idrefs="f0002">FIG. 2A</figref>. The external-surface-element-group detection process (step S1204) will be described in detail with reference to <figref idrefs="f0013">FIG. 13</figref>.</p><p id="p0071" num="0071">The visualization apparatus 700, via the second<!-- EPO <DP n="24"> --> detecting unit 712, executes the posterior-surface-element-group detection process (step S1205). The posterior-surface-element-group detection process (step S1205) is a process of detecting a posterior surface element group as depicted in <figref idrefs="f0002">FIGs. 2B to 2D</figref>. The posterior-surface-element-group detection process (step S1205) will be described in detail with reference to <figref idrefs="f0014">FIG. 14</figref>.</p><p id="p0072" num="0072">Detection of an external surface element group and a posterior surface element group is equivalent to the visualization apparatus 700 generating a stereoscopic shape S overlapping tetra element groups from the external surface element group to posterior surface element group. The visualization apparatus 700, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, identifies as an element group to be subject to transparency processing, a tetra element group that overlaps the stereoscopic shape S (step S1206).</p><p id="p0073" num="0073">The visualization apparatus 700 lowers the degree of transparency of the element group to be subject to transparency processing (step S1207), and renders the heart model using the resulting degree of transparency (step S1208). Thus, as depicted in <figref idrefs="f0001">FIG. 1B</figref>, at time t1, a configuration of the heart model can be rendered as if the element group subjected to transparency processing has been removed, enabling blood flow vectors inside the heart model to be visible from the element group subjected to transparency processing.</p><p id="p0074" num="0074">The visualization apparatus 700 increments the index i of the time step count (step S1209), and determines whether i&gt;n is true (step S1210). If i&gt;n is not true (step S1210: NO), the visualization apparatus 700 returns to step S1204. On the other hand, if i&gt;n is true (step S1210: YES), the visualization apparatus 700 ends the visualization process.<!-- EPO <DP n="25"> --></p><p id="p0075" num="0075"><figref idrefs="f0013">FIG. 13</figref> is a flowchart depicting an example of operations of the external-surface-element-group detection process (step S1204) depicted in <figref idrefs="f0012">FIG. 12</figref>. The visualization apparatus 700 determines whether a designated area R is present (step S1301). For example, for the heart model M(t1) at time t1, a designated area R is present and for the heart models at time t2 and thereafter, no designated area R is present. Accordingly, in the case of time t1, a designated area R is present (step S1301: YES) and in the case of time t2 and times ti thereafter, no designated area R is present (step S1301: NO).</p><p id="p0076" num="0076">If a designated area R is present (step S1301: YES), the visualization apparatus 700 detects a tetra element group that includes the designated area R (step S1302). Herein, the detected tetra element group is referred to as a "detected tetra element group". The visualization apparatus 700 saves the element ID of the detected tetra element group (step S1303), and transitions to step S1305. An element ID is identifier information uniquely identifying a common detected tetra element at differing times ti, e.g., "Ej" of tetra element Ej(ti).</p><p id="p0077" num="0077">At step S1301, if the designated area R is not present (step S1301: NO), the visualization apparatus 700 detects from the data structure Di of the heart model M(ti) at time ti, a tetra element group of the same ID as the element ID saved at step S1303 for the heart model M(t1) at time t1 (step S1304), and transitions to step S1305. Thus, the same tetra element can be traced at each time ti.</p><p id="p0078" num="0078">At step S1305, the visualization apparatus 700 refers to the data structure Di at time ti, and extracts from the detected tetra element group, a tetra element group having normal vectors (step S1305). Herein, the extracted tetra element group is referred to as an<!-- EPO <DP n="26"> --> "extracted tetra element group".</p><p id="p0079" num="0079">The visualization apparatus 700 determines whether an unselected tetra element is present in the extracted tetra element group (step S1306). If an unselected tetra element is present (step S1306: YES), the visualization apparatus 700 selects one unselected tetra element from among the extracted tetra element group (step S1307). Herein, the selected tetra element is referred to as a "selected tetra element". The visualization apparatus 700 calculates cos θ for the angle θ formed with the line of sight vector VD (step S1308). The visualization apparatus 700 determines whether cos θ&lt;0 is true (step S1309).</p><p id="p0080" num="0080">If cos θ&lt;0 is not true (step S1309: NO), the visualization apparatus 700 returns to step S1306. On the other hand, if cos θ&lt;0 is true (step S1309: YES), the visualization apparatus 700 determines the selected tetra element to be an external surface element (step S1310). For example, the visualization apparatus 700 changes the transparency flag of the selected tetra element to "1", and transitions to step S1306. Thereafter, if no unselected tetra element is present (step S1306: NO), the visualization apparatus 700 ends the external-surface-element-group detection process (step S1204). Thus, as depicted in <figref idrefs="f0002">FIG. 2A</figref>, an external surface element group is detected.</p><p id="p0081" num="0081">In other words, in the case of time t1, similar to the first embodiment, the external surface element group is detected; however, at time t2 and thereafter, a tetra element group of an element ID identical to that of the tetra element group that includes the designated area R at time t1 is handled as a detected tetra element group. Accordingly, the position of the external surface element<!-- EPO <DP n="27"> --> group varies according to time ti.</p><p id="p0082" num="0082"><figref idrefs="f0014">FIG. 14</figref> is a flowchart depicting an example of operations of the posterior-surface-element-group detection process (step S1205) depicted in <figref idrefs="f0012">FIG. 12</figref>. The visualization apparatus 700 determines whether a designated area R is present (step S1401). For example, for the heart model M(t1) at time t1, a designated area R is present, for the heart models at time t2 and thereafter, a designated area R is not present. Accordingly, in the case of time t1, a designated area R is present (step S1401: YES) and in the case of time t2 and times ti thereafter, no designated area R is present (step S1401: NO).</p><p id="p0083" num="0083">If a designated area R is present (step S1401: YES), the visualization apparatus 700 transitions to step S1403. On the other hand, if no designated area R is present (step S1401: NO), the visualization apparatus 700 generates an area (step S1402). For example, the visualization apparatus 700 sets an area formed by the heart model surface identified by the external surface element group at time t(i-1).</p><p id="p0084" num="0084">The visualization apparatus 700 shifts the area in a posterior direction by Δd and generates the extrusion face X (step S1403). The visualization apparatus 700 detects a tetra element group included in the extrusion face X (step S1404). Herein, the detected tetra element group is referred to as a "detected tetra element group". The visualization apparatus 700 extracts from the detected tetra element group, a tetra element group having normal vectors (step S1405). Herein, the extracted tetra element group is referred to as an "extracted tetra element group".</p><p id="p0085" num="0085">The visualization apparatus 700 determines whether an unselected tetra element is present in the extracted tetra element group (step S1406). If an unselected tetra<!-- EPO <DP n="28"> --> element is present (step S1406: YES), the visualization apparatus 700 selects one unselected tetra element from the extracted tetra element group (step S1407). Herein, the selected tetra element is referred to as a "selected tetra element." The visualization apparatus 700 calculates cos θ for an angle θ formed with the line of sight vector VD (step S1408). The visualization apparatus 700 determines whether cos θ&gt;0 is true (step S1409).</p><p id="p0086" num="0086">If cos θ&gt;0 is not true (step S1409: NO), the visualization apparatus 700 returns to step S1406. On the other hand, if cos θ&gt;0 is true (step S1409: YES), the visualization apparatus 700 determines the selected tetra element to be a posterior surface element (step S1410). For example, the visualization apparatus 700 changes the transparency flag of the selected tetra element to "1". The visualization apparatus 700 determines whether the determining flag F is F=0 (step S1411). Here, the determining flag F is identical to that in the first embodiment and description thereof is omitted.</p><p id="p0087" num="0087">If determining flag F is F=0 (step S1411: YES), the visualization apparatus 700 changes determining flag F to F=1, indicating that the posterior surface element has first appeared (step S1412). The visualization apparatus 700 transitions to step S1406. On the other hand, if the determining flag F is F=1 (step S1411: NO), the visualization apparatus 700 transitions to step S1406.</p><p id="p0088" num="0088">At step S1406, is no unselected tetra element is present (step S1406: NO), the visualization apparatus 700 determines whether the determining flag F is F=1 (step S1413). If the determining flag F is not F=1 (step S1413: NO), since no posterior surface element has been determined, the visualization apparatus 700 transitions to step S1403.<!-- EPO <DP n="29"> --></p><p id="p0089" num="0089">On the other hand, if the determining flag F is F=1 (step S1413: YES), the visualization apparatus 700 determines whether in the currently extracted tetra element group, no posterior surface element has been determined (step S1414). If even one posterior surface element has been determined (step S1414: NO), the visualization apparatus 700 transitions to step S1403. On the other hand, if no posterior surface element has been determined (step S1414: YES), the visualization apparatus 700 determines that the extrusion face X has passed beyond the cardiac muscle and a transition to an internal of the heart model has occurred, and the visualization apparatus 700 ends the posterior-surface-element-group detection process(step S1205). Thus, as depicted in <figref idrefs="f0002">FIG. 2D</figref>, a tetra element group overlapping the stereoscopic shape S can be identified.</p><p id="p0090" num="0090">According to the second embodiment, temporal position changes of a tetra element group that includes the designated area R of the heart model M(t1) at time t1 are traced. In other words, the external surface element group of the heart model M(t1) prior to change is mapped onto heart models M(t(i)) after the change. Therefore, a tetra element group identical to the external surface element group of the heart model M(t1) prior to change is used and an external surface element group of a heart model M(t(i)) after the change is detected.</p><p id="p0091" num="0091">In this manner, an external surface element group at each time ti is detected by using the external surface element group at time t1, whereby if the designated area R at time t1 is an afflicted site, the user can view from the tetra element group representing the afflicted site that moves moment to moment, the state of the interior of the heart model and the blood flow as a factor of the afflicted<!-- EPO <DP n="30"> --> site.</p><p id="p0092" num="0092">The visualization apparatus may be configured to identify an element group for time ti and to be subject to transparency processing rather than store the element ID of each tetra element of the external surface element group for time ti. For example, at time t1, when an element group to be subject to transparency processing is identified, the element IDs for the tetra element groups of the element group (for time t1) to be subject to transparency processing are stored. At time t2 and thereafter, the element IDs of the tetra element groups of the element group (for time t1) to be subject to transparency processing are diverted for use in identifying an element group to be subject to transparency processing. This process is described in detail below.</p><p id="p0093" num="0093"><figref idrefs="f0015">FIG. 15</figref> is a flowchart depicting another example of the visualization process performed by the visualization apparatus 700 according to the second embodiment. In <figref idrefs="f0015">FIG. 15</figref>, operations identical to those depicted in <figref idrefs="f0012">FIG. 12</figref> are given the same step numbers used in <figref idrefs="f0012">FIG. 12</figref> and description thereof is omitted. At step S1210, if i&gt;n is not true, (step S1210: NO), the visualization apparatus 700 identifies as an element group (for time ti) to be subject to transparency processing, a tetra element group of an element ID identical to that of the element group (for time t1) to be subject to transparency processing and identified at step S1206 (step S1511). The visualization apparatus 700 transitions to step S1207. In other words, when an element group to be subject to transparency processing is determined by time t1, at time t2 and thereafter, the element group (for time t1) to be subject to transparency processing is mapped onto a heart model M(ti) at time ti.</p><p id="p0094" num="0094">As a result, at time t2 and thereafter, the<!-- EPO <DP n="31"> --> external-surface-element-group detection process (step S1204) and the posterior-surface-element-group detection process (step S1205) depicted in <figref idrefs="f0012">FIG. 12</figref> become unnecessary. Therefore, the volume of computation for identifying an element group to be subject to transparency processing can be reduced, enabling increased rendering speed to be facilitated.</p><p id="p0095" num="0095">Further, similar to the first embodiment, without excluding data for the portion of the cardiac muscle, the data remains as is and is subject to transparency processing, whereby regeneration of the heart model in which the portion of cardiac muscle is removed and re-rendering, etc. become unnecessary, enabling increased rendering speed to be facilitated.</p><p id="p0096" num="0096">In the first and second embodiments, by pushing an extrusion face X in a direction opposite to the direction of normal vectors of a designated area R, a stereoscopic shape S is generated. However, configuration may be such that by pushing the extrusion face X in a direction along the line of sight vector VD, the stereoscopic shape S is generated, whereby the user can view the interior of a heart model M(ti), along a line of sight vector VD, from a position of an element group subject to transparency processing.</p><p id="p0097" num="0097">Thus, the present embodiments enable the speed at which the interior of an internal organ is rendered to be increased.</p><p id="p0098" num="0098">All examples and conditional language provided herein are intended for pedagogical purposes of aiding the reader in understanding the invention and the concepts contributed by the inventor to further the art, and are not to be construed as limitations to such specifically recited examples and conditions, nor does the organization of such<!-- EPO <DP n="32"> --> examples in the specification relate to a showing of the superiority and inferiority of the invention. Although one or more embodiments of the present invention have been described in detail, it should be understood that the various changes, substitutions, and alterations could be made hereto without departing from the spirit and scope of the invention.</p></description><claims mxw-id="PCLM56976387" lang="EN" load-source="patent-office"><!-- EPO <DP n="33"> --><claim id="c-en-0001" num="0001"><claim-text>A visualization program that renders an internal organ and causes a computer to execute:
<claim-text>generating along an input normal vector, a given stereoscopic shape;</claim-text>
<claim-text>calculating an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ;</claim-text>
<claim-text>changing a degree of transparency of the overlapping portion; and</claim-text>
<claim-text>rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The visualization program according to claim 1, wherein when a change in the shape of the internal organ occurs,<br/>
the calculating includes calculating the overlapping portion irrespective of the change in the shape of the internal organ,<br/>
the changing includes changing the degree of transparency of the overlapping portion, and<br/>
the rendering includes rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The visualization program according to claim 1, wherein when a change in the shape of the internal organ occurs,<br/>
the calculating includes calculating an overlapping portion of the internal organ post-shape change, by mapping<!-- EPO <DP n="34"> --> onto the shape of the internal organ post-shape change, the overlapping portion of the internal organ pre-shape change,<br/>
the changing includes changing a degree of transparency of the overlapping portion of the internal organ post-shape change, and<br/>
the rendering includes rendering the shape of the internal organ to include the overlapping portion that is of the internal organ post-shape change and. for which the degree of transparency has been changed.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The visualization program according to claim 1, wherein when a change in the shape of the internal organ occurs,<br/>
the generating includes generating based on the shape of the internal organ before the change, the given stereoscopic shape in the internal organ post-shape change,<br/>
the calculating includes calculating an overlapping portion that overlaps the generated given stereoscopic shape and the shape of the internal organ after the change,<br/>
the changing includes changing a degree of transparency of the overlapping portion of the internal organ post-shape change, and<br/>
the rendering includes rendering the shape of the internal organ to include the overlapping portion that is of the internal organ post-shape change and for which the degree of transparency has been changed.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The visualization program according to any one of claims 1 to 4, wherein<br/>
the generating includes generating along a sight direction from a viewpoint, the given stereoscopic shape.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The visualization program according to any one of<!-- EPO <DP n="35"> --> claims 1 to 5, further comprising<br/>
displaying a physical value of a portion adjacent to the given stereoscopic shape.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>A visualization method of rendering an internal organ and executed by a computer, the visualization method comprising:
<claim-text>generating along an input normal vector, a given stereoscopic shape;</claim-text>
<claim-text>calculating an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ;</claim-text>
<claim-text>changing a degree of transparency of the overlapping portion; and</claim-text>
<claim-text>rendering the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>A visualization apparatus that renders an internal organ, the visualization apparatus comprising:
<claim-text>a storage unit storing shape data of the internal organ;</claim-text>
<claim-text>a generating unit (701) that generates along an input normal vector, a given stereoscopic shape;</claim-text>
<claim-text>a calculating unit (702) that calculates an overlapping portion that overlaps the given stereoscopic shape and the shape of the internal organ;</claim-text>
<claim-text>a changing unit that changes a degree of transparency of the overlapping portion; and</claim-text>
<claim-text>a rendering unit (703) that renders the shape of the internal organ to include the overlapping portion for which the degree of transparency has been changed.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667168" load-source="patent-office"><!-- EPO <DP n="36"> --><figure id="f0001" num="1A,1B,1C"><img id="if0001" file="imgf0001.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="37"> --><figure id="f0002" num="2A,2B,2C,2D,2E"><img id="if0002" file="imgf0002.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="38"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="39"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="40"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="165" he="110" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="41"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="165" he="222" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="42"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="165" he="133" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="165" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="165" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0010" num="10"><img id="if0010" file="imgf0010.tif" wi="165" he="209" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0011" num="11A,11B,11C"><img id="if0011" file="imgf0011.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0012" num="12"><img id="if0012" file="imgf0012.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0013" num="13"><img id="if0013" file="imgf0013.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0014" num="14"><img id="if0014" file="imgf0014.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0015" num="15"><img id="if0015" file="imgf0015.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
