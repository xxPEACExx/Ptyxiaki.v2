<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680167-A2" country="EP" doc-number="2680167" kind="A2" date="20140101" family-id="48745594" file-reference-id="315471" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549463" ucid="EP-2680167-A2"><document-id><country>EP</country><doc-number>2680167</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13003241-A" is-representative="YES"><document-id mxw-id="PAPP154823386" load-source="docdb" format="epo"><country>EP</country><doc-number>13003241</doc-number><kind>A</kind><date>20130625</date><lang>EN</lang></document-id><document-id mxw-id="PAPP180246537" load-source="docdb" format="original"><country>EP</country><doc-number>13003241.0</doc-number><date>20130625</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140447790" ucid="US-201213532646-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201213532646</doc-number><kind>A</kind><date>20120625</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-2123396472" load-source="docdb">G06F  17/30        20060101AFI20141216BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1925907054" load-source="docdb" scheme="CPC">G06F  17/30241     20130101 LI20160618BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1925908629" load-source="docdb" scheme="CPC">G06F  17/30412     20130101 FI20160618BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180873" lang="DE" load-source="patent-office">Spaltenweise räumliche Aggregation</invention-title><invention-title mxw-id="PT132180874" lang="EN" load-source="patent-office">Columnwise spatial aggregation</invention-title><invention-title mxw-id="PT132180875" lang="FR" load-source="patent-office">Agrégation spatiale sélon de colonnes</invention-title><citations><patent-citations><patcit mxw-id="PCIT377496695" load-source="docdb" ucid="US-201213488143-A" dnum-type="application"><document-id format="epo"><country>US</country><doc-number>201213488143</doc-number><kind>A</kind><date>20120604</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit><patcit mxw-id="PCIT242652504" load-source="docdb" ucid="US-8195643-B2"><document-id format="epo"><country>US</country><doc-number>8195643</doc-number><kind>B2</kind><date>20120605</date></document-id><sources><source name="APP" created-by-npl="N"/></sources></patcit></patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918138794" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SAP AG</last-name><address><country>DE</country></address></addressbook></applicant><applicant mxw-id="PPAR918153350" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SAP AG</last-name></addressbook></applicant><applicant mxw-id="PPAR918980994" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SAP AG</last-name><iid>100212555</iid><address><street>Dietmar-Hopp-Allee 16</street><city>69190 Walldorf</city><country>DE</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918147251" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WEYERHAEUSER CHRISTOPH</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918158191" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>Weyerhaeuser, Christoph</last-name></addressbook></inventor><inventor mxw-id="PPAR918991815" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Weyerhaeuser, Christoph</last-name><address><street>c/o SAP AG, Global IP Group, Dietmar-Hopp-Allee 16,</street><city>69190 Walldorf</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918146857" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>MINDNICH TOBIAS</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918156908" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>Mindnich, Tobias</last-name></addressbook></inventor><inventor mxw-id="PPAR918993850" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Mindnich, Tobias</last-name><address><street>c/o SAP AG, Global IP Group, Dietmar-Hopp-Allee 16,</street><city>69190 Walldorf</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918142796" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>BAEUMGES DANIEL</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918141709" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>Baeumges, Daniel</last-name></addressbook></inventor><inventor mxw-id="PPAR918991960" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Baeumges, Daniel</last-name><address><street>c/o SAP AG, Global IP Group, Dietmar-Hopp-Allee 16,</street><city>69190 Walldorf</city><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918144352" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>KAZMAIER GERRIT SIMON</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918160761" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>KAZMAIER, GERRIT SIMON</last-name></addressbook></inventor><inventor mxw-id="PPAR918984029" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>KAZMAIER, GERRIT SIMON</last-name><address><street>c/o SAP AG, Global IP Group, Dietmar-Hopp-Allee 16,</street><city>69190 Walldorf</city><country>DE</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918985321" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Müller-Boré &amp; Partner Patentanwälte</last-name><iid>100060440</iid><address><street>Grafinger Strasse 2</street><city>81671 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548870023" load-source="docdb">AL</country><country mxw-id="DS548805104" load-source="docdb">AT</country><country mxw-id="DS548870025" load-source="docdb">BE</country><country mxw-id="DS548882222" load-source="docdb">BG</country><country mxw-id="DS548805154" load-source="docdb">CH</country><country mxw-id="DS548866994" load-source="docdb">CY</country><country mxw-id="DS548805105" load-source="docdb">CZ</country><country mxw-id="DS548896083" load-source="docdb">DE</country><country mxw-id="DS548870026" load-source="docdb">DK</country><country mxw-id="DS548866995" load-source="docdb">EE</country><country mxw-id="DS548863552" load-source="docdb">ES</country><country mxw-id="DS548882223" load-source="docdb">FI</country><country mxw-id="DS548882224" load-source="docdb">FR</country><country mxw-id="DS548896084" load-source="docdb">GB</country><country mxw-id="DS548870027" load-source="docdb">GR</country><country mxw-id="DS548870028" load-source="docdb">HR</country><country mxw-id="DS548866996" load-source="docdb">HU</country><country mxw-id="DS548805155" load-source="docdb">IE</country><country mxw-id="DS548870029" load-source="docdb">IS</country><country mxw-id="DS548882225" load-source="docdb">IT</country><country mxw-id="DS548870278" load-source="docdb">LI</country><country mxw-id="DS548896085" load-source="docdb">LT</country><country mxw-id="DS548805106" load-source="docdb">LU</country><country mxw-id="DS548896090" load-source="docdb">LV</country><country mxw-id="DS548896091" load-source="docdb">MC</country><country mxw-id="DS548805107" load-source="docdb">MK</country><country mxw-id="DS548805108" load-source="docdb">MT</country><country mxw-id="DS548863553" load-source="docdb">NL</country><country mxw-id="DS548842432" load-source="docdb">NO</country><country mxw-id="DS548863890" load-source="docdb">PL</country><country mxw-id="DS548882226" load-source="docdb">PT</country><country mxw-id="DS548863891" load-source="docdb">RO</country><country mxw-id="DS548882227" load-source="docdb">RS</country><country mxw-id="DS548863892" load-source="docdb">SE</country><country mxw-id="DS548805156" load-source="docdb">SI</country><country mxw-id="DS548842433" load-source="docdb">SK</country><country mxw-id="DS548842434" load-source="docdb">SM</country><country mxw-id="DS548805109" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670132" lang="EN" load-source="patent-office"><p id="pa01" num="0001">A spatial aggregation query of a database is processed by receiving data specifying a maximum bounded rectangle for point data responsive to the query and specifying one or more grid partitions of the maximum bounded rectangle (in which at least one of the partitions is partially aggregated. Thereafter, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition is computed. Data characterizing the corresponding computed number of points and center of gravity is then provided (e.g,. persisted, loaded, transmitted, displayed, etc.). Related apparatus, systems, techniques and articles are also described.
<img id="iaf01" file="imgaf001.tif" wi="95" he="91" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499505" lang="EN" source="EPO" load-source="docdb"><p>A spatial aggregation query of a database is processed by receiving data specifying a maximum bounded rectangle for point data responsive to the query and specifying one or more grid partitions of the maximum bounded rectangle (in which at least one of the partitions is partially aggregated. Thereafter, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition is computed. Data characterizing the corresponding computed number of points and center of gravity is then provided (e.g,. persisted, loaded, transmitted, displayed, etc.). Related apparatus, systems, techniques and articles are also described.</p></abstract><description mxw-id="PDES63955562" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>TECHNICAL FIELD</b></heading><p id="p0001" num="0001">The current subject matter is directed columnwise spatial aggregation of data in a data source such as a column oriented database.</p><heading id="h0002"><b>BACKGROUND</b></heading><p id="p0002" num="0002">Spatial aggregation is a key functionality of spatial analysis of geographic data that allows users to start spatial analysis from an overview perspective and then narrow down to areas of interest. In order to enable navigation of such geographic data, it is necessary to aggregate geometries to a coarse grain level (i.e., a high level) in order to provide an overview to the user.</p><p id="p0003" num="0003">For example, a controller of a sales pipeline may want to find out in which region of the world a product is most frequently sold. Therefore, the controller, using a data exploration software application, starts on a world-wide perspective and display the sales of the product for each country. When she identifies an important area, she narrows down to this specific area for deeper analysis at a level that is higher than a most fine-grained level. In addition, the controller may want to compare different performance metrics such as sales of a particular product across each store within a particular city. Such data traversal can be processor intensive and/or require extended periods of time - thereby hampering overall performance.<!-- EPO <DP n="2"> --></p><heading id="h0003"><b>SUMMARY</b></heading><p id="p0004" num="0004">In one aspect, a spatial aggregation query of a database is processed by receiving data specifying a maximum bounded rectangle for point data responsive to the query and specifying one or more grid partitions of the maximum bounded rectangle (in which at least one of the partitions is partially aggregated. Thereafter, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition is computed. Data characterizing the corresponding computed number of points and center of gravity is then provided (e.g,. persisted, loaded, transmitted, displayed, etc.).</p><p id="p0005" num="0005">The data specifying the maximum bounded rectangle can include four coordinates corresponding to four corners of the maximum bounded rectangle. The data characterizing the corresponding computed number of points and the center of gravity can be computed in parallel for two or more partitions (i.e., the current subject matter provides a parallelized solution in some implementations). The database can be a columnwise database storing columnar data and in some cases it is an in-memory database.</p><p id="p0006" num="0006">Data specifying at least one key figure can be received so that aggregations of such key figure can be computed for each partition. The center of gravity can be computer for each partition by differently weighting one or more key figures of the points in each partition. A maximum bounded rectangle can also be computed for each partition (and data characterizing same can be provided).</p><p id="p0007" num="0007">Articles of manufacture (e.g., computer program products, etc.) are also described that comprise computer executable instructions permanently stored on<!-- EPO <DP n="3"> --> non-transitory computer readable media, which, when executed by a computer, causes the computer to perform operations herein. Similarly, computer systems are also described that may include a processor and a memory coupled to the processor. The memory may temporarily or permanently store one or more programs that cause the processor to perform one or more of the operations described herein. In addition, operations specified by methods can be implemented by one or more data processors either within a single computing system or distributed among two or more computing systems.</p><p id="p0008" num="0008">The subject matter described herein provides many advantages. For example, the current subject matter enables a spatial aggregation that leverages a column store data layout and combines fast scan performance on compressed data with the aggregation on geometries. Such an arrangement provides more rapid responses while, at the same time, consuming fewer processing resources.</p><p id="p0009" num="0009">The details of one or more variations of the subject matter described herein are set forth in the accompanying drawings and the description below. Other features and advantages of the subject matter described herein will be apparent from the description and drawings, and from the claims.</p><heading id="h0004"><b>DESCRIPTION OF DRAWINGS</b></heading><p id="p0010" num="0010"><figref idrefs="f0001">FIG. 1</figref> is a diagram illustrating a system including a data storage application;</p><p id="p0011" num="0011"><figref idrefs="f0002">FIG. 2</figref> is a diagram illustrating a software architecture including a data storage application;</p><p id="p0012" num="0012"><figref idrefs="f0003">FIG. 3</figref> is a process flow diagram illustrating a method for spatial aggregation; and<!-- EPO <DP n="4"> --></p><p id="p0013" num="0013"><figref idrefs="f0004">FIG. 4</figref> are diagrams illustrating spatially aggregated data.</p><heading id="h0005"><b>DETAILED DESCRIPTION</b></heading><p id="p0014" num="0014"><figref idrefs="f0001">FIG. 1</figref> shows an example of a system 100 in which a computing system 102, which can include one or more programmable processors that can be collocated, linked over one or more networks, etc., executes one or more modules, software components, or the like of a data storage application 104. The data storage application 104 can include one or more of a database, an enterprise resource program, a distributed storage system (e.g. NetApp Filer available from NetApp of Sunnyvale, CA), or the like.</p><p id="p0015" num="0015">The one or more modules, software components, or the like can be accessible to local users of the computing system 102 as well as to remote users accessing the computing system 102 from one or more client machines 106 over a network connection 110. One or more user interface screens produced by the one or more first modules can be displayed to a user, either via a local display or via a display associated with one of the client machines 106. Data units of the data storage application 104 can be transiently stored in a persistence layer 112 (e.g. a page buffer or other type of temporary persistency layer), which can write the data, in the form of storage pages, to one or more storages 114, for example via an input/output component 116. The one or more storages 114 can include one or more physical storage media or devices (e.g. hard disk drives, persistent flash memory, random access memory, optical media, magnetic media, and the like) configured for writing data for longer term storage. It should be noted that the storage 114 and the input/output component 116 can be included in the<!-- EPO <DP n="5"> --> computing system 102 despite their being shown as external to the computing system 102 in <figref idrefs="f0001">FIG. 1</figref>.</p><p id="p0016" num="0016">Data retained at the longer term storage 114 can be organized in pages, each of which has allocated to it a defined amount of storage space. In some implementations, the amount of storage space allocated to each page can be constant and fixed. However, other implementations in which the amount of storage space allocated to each page can vary are also within the scope of the current subject matter.</p><p id="p0017" num="0017"><figref idrefs="f0002">FIG. 2</figref> shows a software architecture 200 consistent with one or more features of the current subject matter. A data storage application 104, which can be implemented in one or more of hardware and software, can include one or more of a database application, a network-attached storage system, or the like. According to at least some implementations of the current subject matter, such a data storage application 104 can include or otherwise interface with a persistence layer 112 or other type of memory buffer, for example via a persistence interface 202. A page buffer 204 within the persistence layer 112 can store one or more logical pages 206, and optionally can include shadow pages 211, active pages 213, data pages of virtual files 215 (i.e., a data objects acting like a file) and the like. The logical pages 206 retained in the persistence layer 112 can be written to a storage (e.g. a longer term storage, etc.) 114 via an input/output component 116, which can be a software module, a sub-system implemented in one or more of software and hardware, or the like. The storage 114 can include one or more data volumes 210 where stored pages 212 are allocated at physical memory blocks.</p><p id="p0018" num="0018">In some implementations, the data storage application 104 can include a row store 203 and a column store 205. The row store 203 can comprise or be otherwise<!-- EPO <DP n="6"> --> in communication with a page manager 214 and/or a savepoint manager 216. The page manager 214 can communicate with a page management module 220 at the persistence layer 112 that can include a free block manager 222 that monitors page status information 224, for example the status of physical pages within the storage 114 and logical pages in the persistence layer 112 (and optionally in the page buffer 204). The savepoint manager 216 can communicate with a savepoint coordinator 226 at the persistence layer 204 to handle savepoints, which are used to create a consistent persistent state of the database for restart after a possible crash. The row store 203 can access the persistence interface 202 via an absolute page API 207. The column store 205 which can store columns in contiguous memory can access the persistence interface 202 via a virtual file API 209.</p><p id="p0019" num="0019">In some implementations of a data storage application 104, the page management module of the persistence layer 112 can implement shadow paging. The free block manager 222 within the page management module 220 can maintain the status of physical pages. The page buffer 204 can included a fixed page status buffer that operates as discussed herein. A converter component 240, which can be part of or in communication with the page management module 220, can be responsible for mapping between logical and physical pages written to the storage 114. The converter 240 can maintain the current mapping of logical pages to the corresponding physical pages in a converter table 242. The converter 240 can maintain a current mapping of logical pages 206 to the corresponding physical pages in one or more converter tables 242. When a logical page 206 is read from storage 114, the storage page to be loaded can be looked up from the one or more converter tables 242 using the converter 240. When a logical page is written to storage 114 the first time after a savepoint, a new free physical page is<!-- EPO <DP n="7"> --> assigned to the logical page. The free block manager 222 marks the new physical page as "used" and the new mapping is stored in the one or more converter tables 242.</p><p id="p0020" num="0020">The persistence layer 112 can ensure that changes made in the data storage application 104 are durable and that the data storage application 104 can be restored to a most recent committed state after a restart. Writing data to the storage 114 need not be synchronized with the end of the writing transaction. As such, uncommitted changes can be written to disk and committed changes may not yet be written to disk when a writing transaction is finished. After a system crash, changes made by transactions that were not finished can be rolled back. Changes occurring by already committed transactions should not be lost in this process. A logger component 244 can also be included to store the changes made to the data of the data storage application in a linear log. The logger component 244 can be used during recovery to replay operations since a last savepoint to ensure that all operations are applied to the data and that transactions with a logged "commit" record are committed before rolling back still-open transactions at the end of a recovery process.</p><p id="p0021" num="0021">With some data storage applications, writing data to a disk is not necessarily synchronized with the end of the writing transaction. Situations can occur in which uncommitted changes are written to disk and while, at the same time, committed changes are not yet written to disk when the writing transaction is finished. After a system crash, changes made by transactions that were not finished must be rolled back and changes by committed transaction must not be lost.</p><p id="p0022" num="0022">To ensure that committed changes are not lost, redo log information can be written by the logger component 244 whenever a change is made. This<!-- EPO <DP n="8"> --> information can be written to disk at latest when the transaction ends. The log entries can be persisted in separate log volumes 217 while normal data is written to data volumes 210. With a redo log, committed changes can be restored even if the corresponding data pages were not written to disk. For undoing uncommitted changes, the persistence layer 112 can use a combination of undo log entries (from one or more logs) and shadow paging.</p><p id="p0023" num="0023">The persistence interface 202 can handle read and write requests of stores (e.g., in-memory stores, etc.). The persistence interface 202 can also provide write methods for writing data both with logging and without logging. If the logged write operations are used, the persistence interface 202 invokes the logger 244. In addition, the logger 244 provides an interface that allows stores (e.g., in-memory stores, etc.) to directly add log entries into a log queue. The logger interface also provides methods to request that log entries in the in-memory log queue are flushed to disk.</p><p id="p0024" num="0024">Log entries contain a log sequence number, the type of the log entry and the identifier of the transaction. Depending on the operation type additional information is logged by the logger 244. For an entry of type "update", for example, this would be the identification of the affected record and the after image of the modified data.</p><p id="p0025" num="0025">When the data application 104 is restarted, the log entries need to be processed. To speed up this process the redo log is not always processed from the beginning. Instead, as stated above, savepoints can be periodically performed that write all changes to disk that were made (e.g., in memory, etc.) since the last savepoint. When starting up the system, only the logs created after the last savepoint need to be processed.<!-- EPO <DP n="9"> --> After the next backup operation the old log entries before the savepoint position can be removed.</p><p id="p0026" num="0026">When the logger 244 is invoked for writing log entries, it does not immediately write to disk. Instead it can put the log entries into a log queue in memory. The entries in the log queue can be written to disk at the latest when the corresponding transaction is finished (committed or aborted). To guarantee that the committed changes are not lost, the commit operation is not successfully finished before the corresponding log entries are flushed to disk. Writing log queue entries to disk can also be triggered by other events, for example when log queue pages are full or when a savepoint is performed.</p><p id="p0027" num="0027">The column store 205 can persist its tables to virtual files provided by the persistence layer 112 via the virtual file API 207. Internally the persistence layer 112 can map a virtual file to a chain of linked pages 215 stored in the page buffer 204. Data belonging to one columnar table can be stored in multiple virtual files: one virtual file per column for a main storage and one virtual file for a delta log. In addition, one virtual file can optionally be stored per column for the main storage of the history part of the table, and/or one virtual file can optionally be stored per table for the delta of the history part of the table. The persistence layer 112 can maintain a directory that stores for each virtual file the start page and additional information such as the size and the type of the virtual file.</p><p id="p0028" num="0028"><figref idrefs="f0003">FIG. 3</figref> process flow diagram illustrating a method 300 for processing a spatial aggregation query of a database. Data is received, at 310, that specifies a maximum bounded rectangle for point data responsive to the query and specifies one or<!-- EPO <DP n="10"> --> more grid partitions of the maximum bounded rectangle. In some cases, at least one of the partitions can be partially aggregated. Thereafter, at 320, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition are computed. Subsequently, at 330, data characterizing the corresponding computed number of points and the center of gravity is provided (e.g,. transmitted, persisted, loaded, displayed, etc.).</p><p id="p0029" num="0029">As stated above, to issue a spatial aggregation, a user / consumer defines an area as a maximum bounding rectangle (MBR). The MBR can be aggregated and additionally, a grid (see 400A of the diagram 400 of <figref idrefs="f0004">FIG. 4</figref>) defining a plurality of partitions can be provided that defines which areas within the MBR will be partly aggregated. The spatial aggregation returns the number of points in each part of the grid, the MBR of each grid, the center of gravity for each grid (see 400B of <figref idrefs="f0004">FIG. 4</figref>) and additional key figures aggregated along the grid.</p><p id="p0030" num="0030">In addition to counting the points contained in a grid, the points themselves must be aggregated, because the aggregated result needs to be associated to a map display (see <figref idrefs="f0004">FIG. 4</figref>). This is done by computing the gravity center of all points (a graphical representation of same is illustrated in 400B). The center of gravity can be influenced by giving certain points and/or attributes of points an additional weight factor such as turnover, amount due etc. Next, a bit vector for the points per grid cell can be returned to aggregate additional key figures; the spatial reference acts as a grouping criteria for other key figures.</p><p id="p0031" num="0031">The spatial aggregation can be embedded into a calculation engine, such as the calculation engine described in <patcit id="pcit0001" dnum="US8195643B"><text>U.S. Pat. 8,195,643</text></patcit>, the contents of which are<!-- EPO <DP n="11"> --> hereby fully incorporated by reference. In order to perform a spatial aggregation query, a user can define a calculation model that contains of a calculation node with a pre-defined operation (e.g., GeometryDS, etc.) and provide the parameters (e.g., MBR, number of partitions, partition size, etc.) for a spatial aggregation.</p><p id="p0032" num="0032">The MBR of the spatial aggregation can be defined by four parameters LL_X, LL_Y, UR_X and UR_Y. The parameters define the lower left point (LL_X,LL_Y) and the upper right (UR_X,UR_Y) point of an rectangle. In addition, to the MBR, granularity of the grid needs to be defined (e.g., by a user, etc.). Such granularity can be defined by specifying two parameters. A first parameter can define the number of partitions on the x-axis and a second parameter defines the number of partitions on the y-axis. With the example of <figref idrefs="f0004">FIG. 4</figref>, the number of partitions on the x-axis is three and the number of partitions on the y-axis is two.</p><p id="p0033" num="0033">The execution of the spatial aggregation can be done in three phases in order to harness parallel execution for the computational expensive spatial aggregation. In the first phase, a window-query can be issued on the window that covers all points. In the second phase the individual cells must be computed, this is done by spawning mutiple threads which are given a definition of the grid and a distinct part of the result of the first window-query. Each thread works on its piece of data and assigns every point to the respective cell by storing the x,y values in the cell and increments the cells' point counter. In the final phase, the results of all threads can be accumulated in a final grid and the center of gravity can be computed. This can either be done trivially by the arithmetic mean of all points in a cell or by applying an additional weighting factor to the points.<!-- EPO <DP n="12"> --></p><p id="p0034" num="0034">The current subject matter can utilize a window query such as one defined in <patcit id="pcit0002" dnum="US48814312A"><text>U.S. Pat. App. Ser. No. 13/488,143, filed June 4, 2012</text></patcit> entitled "Columnwise Storage of Point Data", the contents of which are hereby fully incorporated by reference. For spatial aggregation, the window query can be parallelized for the execution of each partition in the grid and can start the aggregation on compressed data. The parallelization enables a a more complete utilization of processing resources (e.g., CPUs, etc.) and work on compressed data reduces the memory consumption, which in turn enables the possibility to do a data driven parallelization.</p><p id="p0035" num="0035">Aspects of the subject matter described herein can be embodied in systems, apparatus, methods, and/or articles depending on the desired configuration. In particular, various implementations of the subject matter described herein can be realized in digital electronic circuitry, integrated circuitry, specially designed application specific integrated circuits (ASICs), computer hardware, firmware, software, and/or combinations thereof. These various implementations can include implementation in one or more computer programs that are executable and/or interpretable on a programmable system including at least one programmable processor, which can be special or general purpose, coupled to receive data and instructions from, and to transmit data and instructions to, a storage system, at least one input device, and at least one output device.</p><p id="p0036" num="0036">These computer programs, which can also be referred to programs, software, software applications, applications, components, or code, include machine instructions for a programmable processor, and can be implemented in a high-level procedural and/or object-oriented programming language, and/or in assembly/machine language. As used herein, the term "machine-readable medium" refers to any computer<!-- EPO <DP n="13"> --> program product, apparatus and/or device, such as for example magnetic discs, optical disks, memory, and Programmable Logic Devices (PLDs), used to provide machine instructions and/or data to a programmable processor, including a machine-readable medium that receives machine instructions as a machine-readable signal. The term "machine-readable signal" refers to any signal used to provide machine instructions and/or data to a programmable processor. The machine-readable medium can store such machine instructions non-transitorily, such as for example as would a non-transient solid state memory or a magnetic hard drive or any equivalent storage medium. The machine-readable medium can alternatively or additionally store such machine instructions in a transient manner, such as for example as would a processor cache or other random access memory associated with one or more physical processor cores.</p><p id="p0037" num="0037">To provide for interaction with a user, the subject matter described herein can be implemented on a computer having a display device, such as for example a cathode ray tube (CRT) or a liquid crystal display (LCD) monitor for displaying information to the user and a keyboard and a pointing device, such as for example a mouse or a trackball, by which the user may provide input to the computer. Other kinds of devices can be used to provide for interaction with a user as well. For example, feedback provided to the user can be any form of sensory feedback, such as for example visual feedback, auditory feedback, or tactile feedback; and input from the user may be received in any form, including, but not limited to, acoustic, speech, or tactile input. Other possible input devices include, but are not limited to, touch screens or other touch-sensitive devices such as single or multi-point resistive or capacitive trackpads, voice<!-- EPO <DP n="14"> --> recognition hardware and software, optical scanners, optical pointers, digital image capture devices and associated interpretation software, and the like.</p><p id="p0038" num="0038">The subject matter described herein can be implemented in a computing system that includes a back-end component, such as for example one or more data servers, or that includes a middleware component, such as for example one or more application servers, or that includes a front-end component, such as for example one or more client computers having a graphical user interface or a Web browser through which a user can interact with an implementation of the subject matter described herein, or any combination of such back-end, middleware, or front-end components. A client and server are generally, but not exclusively, remote from each other and typically interact through a communication network, although the components of the system can be interconnected by any form or medium of digital data communication. Examples of communication networks include, but are not limited to, a local area network ("LAN"), a wide area network ("WAN"), and the Internet. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client-server relationship to each other.</p><p id="p0039" num="0039">The implementations set forth in the foregoing description do not represent all implementations consistent with the subject matter described herein. Instead, they are merely some examples consistent with aspects related to the described subject matter. Although a few variations have been described in detail herein, other modifications or additions are possible. In particular, further features and/or variations can be provided in addition to those set forth herein. For example, the implementations described above can be directed to various combinations and sub-combinations of the<!-- EPO <DP n="15"> --> disclosed features and/or combinations and sub-combinations of one or more features further to those disclosed herein. In addition, the logic flows depicted in the accompanying figures and/or described herein do not necessarily require the particular order shown, or sequential order, to achieve desirable results. The scope of the following claims may include other implementations or embodiments.</p></description><claims mxw-id="PCLM56976480" lang="EN" load-source="patent-office"><!-- EPO <DP n="16"> --><claim id="c-en-0001" num="0001"><claim-text>A computer-implemented method for processing a spatial aggregation query of a database comprising:
<claim-text>receiving data specifying a maximum bounded rectangle for point data responsive to the query and specifying one or more grid partitions of the maximum bounded rectangle, at least one of the partitions being partially aggregated;</claim-text>
<claim-text>computing, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition; and</claim-text>
<claim-text>providing, for at least one partition, data characterizing the corresponding computed number of points and center of gravity.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>Method according to claim 1, wherein the data specifying the maximum bounded rectangle comprises four coordinates corresponding to four corners of the maximum bounded rectangle.</claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>Method according to claim 1 or 2, wherein the data characterizing the corresponding computed number of points and the center of gravity are computed in parallel for two or more partitions.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>Method according to any one of the preceding claims, wherein the database is a columnwise database storing columnar data.</claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>Method according to claim 4, wherein the database is an in-memory database.</claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>Method according to any one of the preceding claims, further comprising:
<claim-text>receiving data specifying at least one key figure; and</claim-text>
<claim-text>computing, for each partition, aggregations of the at least one key figure.</claim-text><!-- EPO <DP n="17"> --></claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>Method according to any one of the preceding claims, wherein computing the center of gravity for each partition comprises:
<claim-text>differently weighting one or more key figures of the points in each partition.</claim-text></claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>Method according to any one of the preceding claims, further comprising:
<claim-text>computing, for each partition, a maximum bounded rectangle; and</claim-text>
<claim-text>providing data characterizing the maximum bounded rectangle computed for each partition.</claim-text></claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>Method according to any one of the preceding claims, wherein the receiving, computing, and providing are implemented by at least one data processor of at least one computing system.</claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>Method according to any one of the preceding claims, wherein the providing data comprises one or more of: persisting the data, loading the data, transmitting the data, and displaying the data.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A computer program product, storing instructions for processing a spatial aggregation query of a database, which when executed, cause one or more data processors to perform a method according to any one of the preceding claims.</claim-text></claim><claim id="c-en-0012" num="0012"><claim-text>A system for processing a spatial aggregation query of a database comprising:
<claim-text>one or more data processors;</claim-text>
<claim-text>memory storing instructions, which when executed by at least one data processor, result in operations comprising:
<claim-text>receiving data specifying a maximum bounded rectangle for point data responsive to the query and specifying one or more grid partitions of the maximum bounded rectangle, at least one of the partitions being partially aggregated;</claim-text>
<claim-text>computing, for each partition, a number of points responsive to the query in each partition and a center of gravity of the points in each partition; and<!-- EPO <DP n="18"> --></claim-text>
<claim-text>providing, for at least one partition, data characterizing the corresponding computed number of points and center of gravity.</claim-text></claim-text></claim-text></claim></claims><drawings mxw-id="PDW16667260" load-source="patent-office"><!-- EPO <DP n="19"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="200" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="20"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="21"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="229" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="22"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="232" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
