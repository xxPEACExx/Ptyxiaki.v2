<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2680144-A2" country="EP" doc-number="2680144" kind="A2" date="20140101" family-id="48463733" file-reference-id="316601" date-produced="20180824" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146549486" ucid="EP-2680144-A2"><document-id><country>EP</country><doc-number>2680144</doc-number><kind>A2</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-13167218-A" is-representative="YES"><document-id mxw-id="PAPP154823409" load-source="docdb" format="epo"><country>EP</country><doc-number>13167218</doc-number><kind>A</kind><date>20130510</date><lang>EN</lang></document-id><document-id mxw-id="PAPP210683706" load-source="docdb" format="original"><country>EP</country><doc-number>13167218.0</doc-number><date>20130510</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140452605" ucid="US-201213533780-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>201213533780</doc-number><kind>A</kind><date>20120626</date></document-id></priority-claim></priority-claims><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL-1916230509" load-source="docdb">G06F   9/50        20060101AFI20160708BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1613217333" load-source="docdb" scheme="CPC">G06F2009/45595     20130101 LA20180725BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1613217334" load-source="docdb" scheme="CPC">G06F   9/5044      20130101 FI20180725BHEP        </classification-cpc><classification-cpc mxw-id="PCL-1613217335" load-source="docdb" scheme="CPC">G06F   9/45558     20130101 LI20180725BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132180942" lang="DE" load-source="patent-office">Verteilte Verarbeitung von Netzwerkvorrichtungsaufgaben</invention-title><invention-title mxw-id="PT132180943" lang="EN" load-source="patent-office">Distributed processing of network device tasks</invention-title><invention-title mxw-id="PT132180944" lang="FR" load-source="patent-office">Traitement réparti de tâches de dispositif de réseau</invention-title><citations><non-patent-citations><nplcit><text>None</text><sources><source mxw-id="PNPL45131134" load-source="docdb" name="APP"/></sources></nplcit></non-patent-citations></citations></technical-data><parties><applicants><applicant mxw-id="PPAR918150495" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>JUNIPER NETWORKS INC</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918153691" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>JUNIPER NETWORKS, INC.</last-name></addressbook></applicant><applicant mxw-id="PPAR918983142" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Juniper Networks, Inc.</last-name><iid>100153534</iid><address><street>1194 North Mathilda Avenue</street><city>Sunnyvale, CA 94089-1206</city><country>US</country></address></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918152376" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>OBSTFELD JOEL</last-name><address><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918135142" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>OBSTFELD, JOEL</last-name></addressbook></inventor><inventor mxw-id="PPAR918990281" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>OBSTFELD, JOEL</last-name><address><street>2 Rockingham Gate Bushey</street><city>Herts, WD23 4DQ</city><country>GB</country></address></addressbook></inventor><inventor mxw-id="PPAR918156138" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>WARD DAVID</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918142265" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>WARD, DAVID</last-name></addressbook></inventor><inventor mxw-id="PPAR918984042" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>WARD, DAVID</last-name><address><street>32460 Loma Chiquita Rd.</street><city>Los Gatos, CA 95033</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918142206" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>BARTH COLBY</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918140107" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>BARTH, Colby</last-name></addressbook></inventor><inventor mxw-id="PPAR918983110" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>BARTH, Colby</last-name><address><street>236 E. 7th Ave.</street><city>Collegeville, PA 19426</city><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918168740" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>LIN MU</last-name><address><country>US</country></address></addressbook></inventor><inventor mxw-id="PPAR918161295" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>LIN, MU</last-name></addressbook></inventor><inventor mxw-id="PPAR918993201" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>LIN, MU</last-name><address><street>1386 Fisher Hawk Dr.</street><city>Sunnyvale, CA 94087</city><country>US</country></address></addressbook></inventor></inventors><agents><agent mxw-id="PPAR918980760" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Meldrum, David James</last-name><iid>100052031</iid><address><street>D Young &amp; Co LLP 120 Holborn</street><city>London EC1N 2DY</city><country>GB</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548884041" load-source="docdb">AL</country><country mxw-id="DS548871334" load-source="docdb">AT</country><country mxw-id="DS548884043" load-source="docdb">BE</country><country mxw-id="DS548842934" load-source="docdb">BG</country><country mxw-id="DS548868721" load-source="docdb">CH</country><country mxw-id="DS548805918" load-source="docdb">CY</country><country mxw-id="DS548871335" load-source="docdb">CZ</country><country mxw-id="DS548884048" load-source="docdb">DE</country><country mxw-id="DS548805919" load-source="docdb">DK</country><country mxw-id="DS548805920" load-source="docdb">EE</country><country mxw-id="DS548805268" load-source="docdb">ES</country><country mxw-id="DS548842935" load-source="docdb">FI</country><country mxw-id="DS548864993" load-source="docdb">FR</country><country mxw-id="DS548884049" load-source="docdb">GB</country><country mxw-id="DS548805921" load-source="docdb">GR</country><country mxw-id="DS548884050" load-source="docdb">HR</country><country mxw-id="DS548871336" load-source="docdb">HU</country><country mxw-id="DS548868722" load-source="docdb">IE</country><country mxw-id="DS548805926" load-source="docdb">IS</country><country mxw-id="DS548864994" load-source="docdb">IT</country><country mxw-id="DS548805927" load-source="docdb">LI</country><country mxw-id="DS548842936" load-source="docdb">LT</country><country mxw-id="DS548896609" load-source="docdb">LU</country><country mxw-id="DS548842937" load-source="docdb">LV</country><country mxw-id="DS548842938" load-source="docdb">MC</country><country mxw-id="DS548896614" load-source="docdb">MK</country><country mxw-id="DS548896615" load-source="docdb">MT</country><country mxw-id="DS548805269" load-source="docdb">NL</country><country mxw-id="DS548871337" load-source="docdb">NO</country><country mxw-id="DS548896616" load-source="docdb">PL</country><country mxw-id="DS548805928" load-source="docdb">PT</country><country mxw-id="DS548805270" load-source="docdb">RO</country><country mxw-id="DS548805929" load-source="docdb">RS</country><country mxw-id="DS548896617" load-source="docdb">SE</country><country mxw-id="DS548884051" load-source="docdb">SI</country><country mxw-id="DS548871338" load-source="docdb">SK</country><country mxw-id="DS548896622" load-source="docdb">SM</country><country mxw-id="DS548868723" load-source="docdb">TR</country></ep-contracting-states><ep-extended-states><ep-extended-state-data><country>BA</country></ep-extended-state-data><ep-extended-state-data><country>ME</country></ep-extended-state-data></ep-extended-states></designated-states></international-convention-data></bibliographic-data><abstract mxw-id="PA128670155" lang="EN" load-source="patent-office"><p id="pa01" num="0001">Techniques are described for distributing network device tasks across virtual machines executing in a computing cloud. A network device includes a network interface to send and receive messages, a routing unit comprising one or more processors configured to execute a version of a network operating system, and a virtual machine agent. The virtual machine agent is configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task. The routing unit is configured to update the network device based on the result.
<img id="iaf01" file="imgaf001.tif" wi="109" he="82" img-content="drawing" img-format="tif"/></p></abstract><abstract mxw-id="PA128499528" lang="EN" source="EPO" load-source="docdb"><p>Techniques are described for distributing network device tasks across virtual machines executing in a computing cloud. A network device includes a network interface to send and receive messages, a routing unit comprising one or more processors configured to execute a version of a network operating system, and a virtual machine agent. The virtual machine agent is configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task. The routing unit is configured to update the network device based on the result.</p></abstract><description mxw-id="PDES63955585" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">TECHNICAL FIELD</heading><p id="p0001" num="0001">The disclosure relates to computer networks and, more particularly, to techniques for distributing network device tasks across virtual machines.</p><heading id="h0002">BACKGROUND</heading><p id="p0002" num="0002">A computer network is a collection of interconnected computing devices that exchange data and share resources. In a packet-based network, such as the Internet, the computing devices communicate data by dividing the data into small blocks called packets, which are individually routed across the network from a source device to a destination device. The destination device extracts the data from the packets and assembles the data into its original form. Dividing the data into packets enables the source device to resend only those individual packets that may be lost during transmission.</p><p id="p0003" num="0003">Certain devices within the network, such as routers, contain routing unit s that maintain routing information describing routes through the network. Each route defines a path between locations on the network. From the routing information, a forwarding engine of the routers generates forwarding information, which is used by the routers to relay packet flows through the network and, more particularly to relay the packet flows to a next hop. In reference to forwarding a packet, the "next hop" from a network router typically refers to a neighboring device along a given route. Upon receiving an incoming packet, the router examines information within the packet to identify the destination for the packet. Based on the destination, the router forwards the packet in accordance with the forwarding information.</p><p id="p0004" num="0004">Large computer networks, such as the Internet, often include many routers that exchange routing information according to a defined routing protocol, such as the Border Gateway Protocol (BGP). When two routers initially connect, the routers exchange routing information and generate forwarding information from the exchanged routing information. Particularly, the two routers initiate a routing communication "session" via which they exchange routing information according to the defined routing protocol. The routers continue to communicate via the routing protocol to incrementally update the routing information and, in turn, update their forwarding information in accordance with changes to a topology of the network indicated in the updated routing information. For example, the routers may send update messages to advertise newly available routes or to indicate routes that are no longer available. However, updating the routing information and performing other administrative tasks may consume significant computing resources, limiting the amount of computing resources available to forward traffic.<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">Conventionally, network administrators scale up the computing resources by adding processors, memory, etc. However, the number of computing resources that can be added within a single chassis is limited. As the number of processors and other computing resources increase, the amount of heat produced and the amount of electricity required also increase. The cooling and power capabilities of a single chassis of a network device may be overwhelmed, which has resulted in network administrators using a separate chassis to provide the additional computing power required to maintain the desired network throughput while the network device performs the various administrative tasks. The network administrator must manage each additional chassis as a separate device, increasing the complexity of managing the network devices. Further, the operating system executing on the network device can only support up to a maximum number of computing resources and software processes, limiting the total computing capacity that may be available to any network device.</p><heading id="h0003">SUMMARY</heading><p id="p0006" num="0006">Particular aspects are set out in the appended claims.</p><p id="p0007" num="0007">In general, the techniques of this disclosure are directed to increasing the computing resources available to a network device by enabling the network device to off-load tasks to one or more virtual machines executing in a computing cloud that is communicatively coupled to and managed separately from the network device. The network device executes an operating system that provides the software functionality of the network device. Each virtual machine executes its own instance of an operating system that corresponds to the operating system executed by the network device. A virtual machine manager registers the various virtual machines executing in the computing cloud. When the network device requests computing resources from the computing cloud, the virtual machine manager identifies one or more virtual machines capable of performing the tasks requested by the network device and establishes a network socket between the virtual machine and the network device. The network device sends task requests to the virtual machine and the virtual machine returns the results of the task to the network device. In this manner, the network device selectively offloads tasks to a virtual machine, freeing up computing resources of the network device to forward packets and perform other latency-sensitive tasks.</p><p id="p0008" num="0008">The virtual machines executing in the computing cloud may each execute a particular version of a network operating system, enabling the computing cloud to provide support for many different network devices and many different versions of network devices. Further, two or more different virtual machines may execute a particular version of a network operating system. By executing multiple instances of the operating system in separate virtual machines, the amount of computing resources available to the network device is bound by the capacity of the computing cloud, not by the limitations of the operating system. Thus, as the need for additional<!-- EPO <DP n="3"> --> computing resources increases, the computing resources of the computing cloud and the number of virtual machines can be increased without being restricted by the limitations of the operating system or specification of the network device, including resource, cooling, and power limitations.</p><p id="p0009" num="0009">In one embodiment, a method includes receiving, with a network device, a plurality of link-state messages from a plurality of other network devices communicatively coupled to the network device, sending, with a virtual machine agent executing at a network device and to a virtual machine manager executing at a computing cloud, a request for available computing resources of the computing cloud, and receiving, from the virtual machine manager, a response that includes a network socket to at least one virtual machine executing at the computing cloud. The method also includes sending, with the virtual machine agent and to the virtual machine using the network socket, a request to determine shortest paths between the network device and each of the plurality of other network devices, wherein the request includes the plurality of link-state messages, receiving, from the virtual machine, a response message that includes an indication of a respective shortest path between the network device and each of the plurality of other network devices, and updating, based on the response message, routing information stored at the network device.</p><p id="p0010" num="0010">In another embodiment, a method includes executing, by a network device, a version of a network operation system, and identifying, with a virtual machine agent executing at the network device, a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system. The method further includes sending, with the virtual machine agent to the virtual machine, a request to perform a task, receiving, with the virtual machine agent and from the virtual machine, a task response that includes a result of performing the task, and updating the network device based on the result included in the task response.</p><p id="p0011" num="0011">In another embodiment, a network device includes at least one network interface configured to send and receive messages, a routing unit comprising one or more processors configured to execute a version of a network operating system, and a virtual machine executable by the routing unit. The virtual machine agent is configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task. The routing unit is configured to update the network device based on the result included in the task response.</p><p id="p0012" num="0012">In another embodiment, a computer-readable storage medium encoded with instructions executable by one or more processors to execute a version of a network operation system, and<!-- EPO <DP n="4"> --> identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system. The instructions are further executable to send, to the identified virtual machine, a request to perform a task, receive, from the virtual machine, a task response that includes a result of performing the task, and update, based on the result included in the task response, the network device.</p><p id="p0013" num="0013">The details of one or more embodiments are set forth in the accompanying drawings and the description below. Other features, objects, and advantages will be apparent from the description and drawings, and from the claims.</p><heading id="h0004">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p0014" num="0014"><figref idrefs="f0001">FIG. 1</figref> is a block diagram illustrating an example system for distributing network device tasks across virtual machines, in accordance with one aspect of this disclosure.</p><p id="p0015" num="0015"><figref idrefs="f0002">FIG. 2</figref> is a block diagram illustrating further details of an example system for distributing network device tasks across virtual machines, in accordance with one aspect of this disclosure.</p><p id="p0016" num="0016"><figref idrefs="f0003">FIG. 3</figref> is a block diagram illustrating an example computing cloud, in accordance with one aspect of this disclosure.</p><p id="p0017" num="0017"><figref idrefs="f0004">FIG. 4</figref> is a flowchart illustrating an example process for distributing network device tasks across virtual machines, in accordance with one aspect of this disclosure.</p><heading id="h0005">DETAILED DESCRIPTION</heading><p id="p0018" num="0018"><figref idrefs="f0001">FIG. 1</figref> is a block diagram illustrating an example system for distributing network device tasks across virtual machines, in accordance with one aspect of this disclosure. As shown in <figref idrefs="f0001">FIG. 1</figref>, network system 2 includes computing cloud 10, routers 12A-12D (collectively, "routers 12"), virtual machine manager (VM MANAGER) 14, and virtual machines (VMs) 16A-16N (collectively, "virtual machines 16"). Computing cloud 10 hosts the computing resources that include virtual machine manager 14 and virtual machines 16. The computing resources of computing cloud 10 may be any computing resources capable of performing techniques of this disclosure. For example, computing cloud 10 may include server computers, desktop computers, portable computers, or any other device that, for example, includes a processor. While shown as distinct entities, virtual machine manager 14 and each of virtual machines 16 may be distributed across two or more different computing resources of computing cloud 10 and the number of virtual machines may be different from the number of different computing resources of computing cloud 10.</p><p id="p0019" num="0019">In some examples, two or more of virtual machines 16 may utilize, at least in part, the same computing resources. For example, virtual machine 16A may execute across three different servers and virtual machine 16B may execute on one of the three servers on which<!-- EPO <DP n="5"> --> virtual machine 16A is executing. In some examples, multiple computing resources of computing cloud 10 may be configured as a cluster, providing additional redundancy and scalability while supporting multiple virtual machines. In general, each virtual machine 16 executes an instance of a network operating system. Typically, each network operating system instance corresponds to an operating system executing on network devices (e.g., routers 12) communicatively coupled to computing cloud 10.</p><p id="p0020" num="0020">In general, routers 12 exchange routing information with each other to maintain an updated view of the topology of the network. For example, router 12B receives a packet from router 12A, and based on routing information maintained by router 12B, forwards the packet to a next hop, such as router 12C. The task distribution techniques described in this disclosure enable each of routers 12 to perform various configuration and administrative tasks (e.g., executing routing protocols to update stored routing and forwarding information) with minimal utilization of the computing resources of the respective router 12, thereby enabling more computing resources of the respective router 12 to be utilized in forwarding packets and performing other latency-sensitive tasks.</p><p id="p0021" num="0021">Each of routers 12 executes an operating system that provides certain functionality to facilitate the forwarding and routing of packets across a network. Various different processes (sometimes referred to as daemons) execute within or as part of the operating system. Example processes include a chassis process that controls the chassis and its components, a device control process (i.e., an interface control process) that configures and monitors network interfaces, a forwarding process that is responsible for packet transmission, a management process, and a routing protocol process. The management process provides communication between the other processes, provides an interface to a configuration database, populates the configuration database with configuration information, interacts with the other processes when commands are issued through one of the user interfaces of a router 12, among other things. The routing protocol process defines how routing protocols, such as the routing information protocol (RIP), open shortest path first (OSPF) protocol, constrained SPF (CSPF), virtual private local area network service (VPLS), and border gateway protocol (BGP) operate on the device, including selecting routers and maintaining forwarding tables.</p><p id="p0022" num="0022">As shown in <figref idrefs="f0001">FIG. 1</figref>, router 12B includes virtual machine agent 18. As router 12B performs various tasks that may be offloaded to one or more virtual machines 16, virtual machine agent 18 manages the interaction between router 12B and computing cloud 10. For example, if router 12B updates a network map stored by router 12B, the creation of the network map and the calculation of next hops may be offloaded to one or more virtual machines 16. Virtual machine agent 18 sends a message to virtual machine manager 14 (i.e., using link 20) to request computational resources managed by virtual machine manager 14.<!-- EPO <DP n="6"> --></p><p id="p0023" num="0023">Virtual machine manager 14 manages the tasks sent to virtual machines 16 and stores configuration information about virtual machines 16. In some examples, each of virtual machines 16 registers with virtual machine manager 14. In other examples, virtual machine manager 14 actively queries computing cloud 10 to identify available virtual machines (e.g., virtual machines 16). The confirmation information stored by virtual machine manager 14 includes a version of an operating system executed at each virtual machine 16. The configuration information may also include the tasks each virtual machine 16 is configured to perform (e.g., network map generation, next-hop determination, etc.).</p><p id="p0024" num="0024">When virtual machine agent 18 sends a request for computational resources to virtual machine manager 14, virtual machine manager 14 determines if computing cloud 10 has resources available to perform tasks. If there computer cloud 10 has available computing resources, virtual machine manager 14 sends a response to router 12B indicating that computing cloud 10 can help. Virtual machine agent 18 sends a specific request for computing resource that includes the version of the operating system executed at router 12B and the task router 12B is requesting computing cloud 10 to perform. Virtual machine manager 14 identifies one of virtual machines 16 that is executing the appropriate version of the operation system, has available computing resources to perform the requested task, and includes the functionality required to perform the requested task (e.g., virtual machine 16B). Once virtual machine manager 14 identifies one of virtual machines 16 as being able to perform the requested task, virtual machine manager 14 sends a response message to virtual machine agent 18 indicating that computing cloud 10 can help.</p><p id="p0025" num="0025">Virtual machine agent 18 generates and sends a second request message to send to virtual machine manager 14. The second request message includes at least the version of the operating system executed by router 12B and information about the task on which router 12B is requesting assistance. Virtual machine manager 14 receives the second request message and determines whether any of virtual machines 16 support the version of the operating system specified in the request message and can perform the requested task. To identify an appropriate virtual machine 16, virtual machine manager 14 accesses the stored configuration information or sends a request for configuration information to at least one of virtual machines 16 (e.g., virtual machine 16B). Based on the configuration information, virtual machine manager 14 identifies at least one of virtual machines 16 and establishes a socket connection at the identified virtual machine 16. Virtual machine manager 14 sends a response message to virtual machine agent 18 that includes the socket connection information.</p><p id="p0026" num="0026">After receiving the response message from virtual machine manager 14, virtual machine agent 18 has the required configuration information to exchange messages with the identifier virtual machine 16 (e.g., virtual machine 16B) without exchanging additional messages with<!-- EPO <DP n="7"> --> virtual machine manager 14. Using socket 22, virtual machine agent 18 exchanges messages with virtual machine 16B to cause virtual machine 16B to perform the requested tasks.</p><p id="p0027" num="0027">While the setup process described above includes two steps (first requesting if any computing resources are available and then providing the specific task requirements), in some examples, the setup process may be performed in a single step. For example, virtual machine agent 18 may send a single request message to virtual machine manager 14. The single request message includes the version of the operating system executed at router 12B and information about the task to be performed by computing cloud 10. Virtual machine manager 14 receives the single request message and determines if there are sufficient computing resources available within computing cloud 10. If there are not sufficient computing resources available, virtual machine manager 14 sends a response message to virtual machine agent 18 that computing cloud 10 cannot assist with the task at this time. If there are sufficient computing resources available, virtual machine manager 14 identifies one of virtual machines 16 (e.g., virtual machine 16B) that is executing the same version of the operation system and that can perform the requested task. Virtual machine manager 14 then establishes a socket (e.g., sets up a specific Internet Protocol (IP) address and port number) at virtual machine 16B for virtual machine agent 18 to use when exchanging messages required to perform the task, and sends a response message that includes the socket information. Virtual machine agent 18 can begin sending messages to virtual machine 16B, using the socket, in order to cause virtual machine 16B to perform the requested task without additional request and response messages exchanged between virtual machine agent 18 and virtual machine manager 14.</p><p id="p0028" num="0028">In some embodiments, virtual machine manager 14 may include socket information associated with two or more different virtual machines 16. In these embodiments, virtual machine agent 18 may divide up the task such that each of the two or more different virtual machines 16 perform at least one portion of the task. However, in some instances, even though virtual machine agent 18 received socket information for two or more different virtual machines 16, virtual machine agent 18 may select one of the virtual machines 16 to perform the entire task and discard or otherwise ignore the socket information included in the response for the other virtual machines.</p><p id="p0029" num="0029">In some examples, routers 12 may be included in one or more different logical segments of a network. For example, routers 12A and 12B may be part of a first logical segment while routers 12B, 12C, and 12D may be part of a second logical segment. In accordance with techniques of this disclosure, calculating the network map and shortest paths, in accordance with OSPF, for each logical segment may be performed by a different one of virtual machines 16. That is, when router 12B is configured to update the network map for each logical segment, virtual machine agent 18 may establish socket connections to two different virtual machines 16. Using the two different socket connections, virtual machine agent 18 sends a first set of<!-- EPO <DP n="8"> --> received link-state messages for the first logical segment to a first virtual machine 16 (e.g., virtual machine 16A) and sends a second set of received link-state messages for the second logical segment to a second virtual machine 16 (e.g., virtual machine 16B).</p><p id="p0030" num="0030">In this manner, techniques of this disclosure enable virtual machines to be employed to provide logical segmentation of computing resources among a set of forwarding device (e.g., routers 12). The virtual machines can be created and distributed across the available computing resources of a computing cloud as required. Each virtual machine may be tasked with specific functions, such as running particular routing protocols or interface controls for a set of forwarding devices, while other virtual machines may provide management functionality. Further, because operations can take place within each virtual machine, multiple instances of a particular function can be simultaneously executed by multiple different virtual machines. That is, multiple control plane, data plane, and management plane processes, each using individual virtual machines. Thus, techniques of this disclosure enable the more efficient use of computing resources present within a forwarding device through a greater level of resource segmentation. In addition, while described with respect to a router that performs routing and forwarding functionality, the techniques may be applicable to other network devices including a layer three ("L3") switch, a layer three ("L2") switch, an L2/L3 switch, an OpenFlow switch, or another network device. In such examples, routing unit 30 may not necessarily include RP daemon 40 and instead offload RP daemon 40 functionality to VMs 16.</p><p id="p0031" num="0031"><figref idrefs="f0002">FIG. 2</figref> is a block diagram illustrating further details of a portion of network system 2 shown in <figref idrefs="f0001">FIG. 1</figref>, in accordance with one aspect of this disclosure. As shown in <figref idrefs="f0002">FIG. 2</figref>, system 2 includes computing cloud 10, local area network (LAN) 11, and router 12B. Router 12B includes routing unit 30, forwarding unit 34, and switch fabric 36. Switch fabric 36 provides an interconnected set of flexible physical interface card ("PIC") concentrators 50A-50N ("FPCs 50"), each of which includes at least one of packet forwarding engines 52A-52N ("PFEs 52") that send and receive traffic by a set of interface cards ("IFCs") 54, 55, 56, and 57, respectively, that typically have one or more physical network interfaces (i.e., ports). Some of the PFEs 52 may send and receive traffic by tunnel PICs.</p><p id="p0032" num="0032">FPCs 50, components included in FPCs 50, and switch fabric 36 collectively provide a forwarding plane for forwarding transit network traffic. Although not shown in <figref idrefs="f0002">FIG. 2</figref>, PFEs 52 may each comprise a central processing unit (CPU), memory and one or more programmable packet-forwarding application-specific integrated circuits (ASICs). Switch fabric 36 provides a high-speed interconnect for forwarding incoming data packets between PFEs 52 for transmission over a network.</p><p id="p0033" num="0033">Routing unit 30 an operating environment for various protocols that perform control plane functions for router 12B. For example, daemons 38 comprise user-level processes that run network management software, execute routing protocols to communicate with peer routers,<!-- EPO <DP n="9"> --> maintain and update one or more routing tables, and create one or more forwarding tables for installation to PFEs 52, among other functions. In the example illustrated in <figref idrefs="f0002">FIG. 2</figref>, daemons 38 include a routing protocol (RP) daemon 40, management (MGMT) daemon 42, and virtual machine (VM) agent 18. In other embodiments, daemons 38 may include other daemons or software modules, such as a chassis daemon, a configuration daemon, and a device control daemon.</p><p id="p0034" num="0034">Daemons 38 operate over and interact with kernel 32, which provides a run-time operating environment for user-level processes. Kernel 32 may comprise, for example, a UNIX operating system derivative such as Linux or Berkeley Software Distribution (BSD). In general, kernel 32 corresponds to a particular version of a network operating system. Kernel 32 offers libraries and drivers by which daemons 38 may interact with the underlying system. Kernel 32 comprises a kernel-level library, e.g., a sockets library, by which daemons 38 and other user-level processes or user-level libraries may interact with PFEs 52.</p><p id="p0035" num="0035">Routing protocol daemon 40 executes one or more interior and/or exterior routing protocols to exchange routing information with other network devices, store received information in routing information 44, and store derived forwarding information in forwarding information 46. Routing protocol daemon 42 configures the forwarding plane to implement packet-forwarding services, add/modify/delete routes, and otherwise modify packet forwarding paths by installing forwarding structures representing forwarding information 46 in PFEs 52.</p><p id="p0036" num="0036">The architecture of router 12B illustrated in <figref idrefs="f0002">FIG. 2</figref> is shown for exemplary purposes only. The disclosure is not limited to this architecture. In other embodiments, router 12B may be configured in a variety of ways. In one embodiment, for example, some of the functionally of routing unit 30 may be distributed within PFEs 52. The operating environment of routing unit 30 may be implemented solely in software or hardware, or may be implemented as a combination of software, hardware or firmware. For example, routing unit 30 may include one or more processors that execute software instructions. In that case, routing unit 30 may include various software modules or daemons, e.g., daemons 38, executing on an operating system, and may include a computer-readable storage device, such as computer memory or hard disk, for storing executable instructions. The storage device may be non-transitory.</p><p id="p0037" num="0037">A hardware environment of routing unit 30 may include one or more processors (not shown in <figref idrefs="f0002">FIG. 2</figref>) that execute program instructions in order to execute both kernel 32 and the operating environment of routing unit 30. The processor may comprise one or more general- or special-purpose processors such as a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA), or any other equivalent logic device. Accordingly, the terms "processor" or "controller," as used herein, may refer to any one or more of the foregoing structures or any other structure operable to perform techniques described herein.<!-- EPO <DP n="10"> --></p><p id="p0038" num="0038">Computer-readable storage media may include random access memory (RAM), read only memory (ROM), programmable read only memory (PROM), erasable programmable read only memory (EPROM), electronically erasable programmable read only memory (EEPROM), non-volatile random access memory (NVRAM), flash memory, a hard disk, a CD-ROM, a floppy disk, a cassette, a solid state drive, magnetic media, optical media, or other computer-readable media. Computer-readable media may be encoded with instructions corresponding to various aspects of router 12B, e.g., protocols. Routing unit 30, in some examples, retrieves and executes the instructions from memory for these aspects.</p><p id="p0039" num="0039">The techniques of this disclosure enable router 12B to distribute administrative tasks, routing protocol updates, or other tasks to virtual machines executing at computing cloud 10. As one example, router 12B utilizes OSPF to gather link state information from available routers and constructs a topology map of the network. When router 12B executes the OSPF to update the network topology without implementing task distribution techniques of this disclosure, a majority (e.g., eighty percent) of the computing resources of router 12B may be consumed during the update. However, by distributing at least some portions of the OSPF calculations to one or more virtual machines 16 (shown in <figref idrefs="f0001">FIG. 1</figref>), computing resources of computing cloud 10 are used, thereby reducing the amount computing resources of router 12B required to update the network topology.</p><p id="p0040" num="0040">In order to update the network topology, router 12B periodically identifies all other nodes (e.g., routers) to which router 12B is directly connected (i.e., routers 12A, 12C, and 12D shown in <figref idrefs="f0001">FIG. 1</figref>) by exchanging link-state advertisement messages with other routers in the network. Using the complete set of received link-state messages, router 12B creates a map of the network by iterating over the collection of link-state messages. For each received link-state message, router 12B makes a link on the map of the network between the router that sent the message and all the routers indicated in the message as being neighbors of the sending node.</p><p id="p0041" num="0041">Rather than routing process daemon 40 itself iterating over the collection of link-state messages and generating the map within routing unit 30, virtual machine agent 18 identifies a virtual machine of computing cloud 10 (e.g., virtual machine 16B shown in <figref idrefs="f0001">FIG. 1</figref>) that can generate the network map. In identifying the virtual machine, virtual machine agent sends a message to virtual machine manager 14 (<figref idrefs="f0001">FIG. 1</figref>) requesting assistance with a task. If computing cloud 10 has sufficient computing resources available, virtual machine manager 14 sends a response indicating that computing cloud 10 can assist with the task. Virtual machine agent 18 then sends a task request message that includes the version of the operating system executing at router 12B (e.g., the version of kernel 32 executing at routing unit 30) and specific information about the task (e.g., update network topology in accordance with OSPF). Virtual machine manager 14 determines whether any of virtual machines 16 are properly configured to perform the specified task. If there is at least one virtual machine 16 that is properly configured,<!-- EPO <DP n="11"> --> virtual machine manager 14 establishes a socket at the virtual machine 16 (e.g., virtual machine 16B) and sends a response message to virtual machine agent 18 that includes the socket information.</p><p id="p0042" num="0042">Virtual machine agent 18 exchanges messages with each identified virtual machine 16 using the socket information received from virtual machine manager 14. That is, once the socket is established, virtual machine agent 18 may communicate with one or more of virtual machines 16 without having to send messages through virtual machine manager 14 (i.e., without virtual machine manager 14 acting as a relay). Continuing the example of updating the network map in accordance with OSPF, virtual machine agent 18 sends the received link-state messages to virtual machine 16B using the socket. Virtual machine 16B iterates over the link-state messages received from virtual machine agent 14 and generates a network map.</p><p id="p0043" num="0043">Once a complete map is generated, virtual machine 16B calculates the shortest paths between router 12B and other routers in the network. In one example, virtual machine agent 18 receives the complete map from virtual machine 16B. Typically, routing unit 30 and, more specifically, routing protocol daemon 40, applies an algorithm (e.g., Dijkstra's algorithm) to the map to determine the shortest path from router 12B to every other router in the network. In accordance with techniques of this disclosure, virtual machine agent 18 sends the complete network map to virtual machine 16B using the socket and requests that virtual machine 16B calculate the shortest paths, thereby freeing up computing resources of router 12B to perform other functions, such as packet forwarding. In another example, virtual machine 16B does not send the completed network map to virtual machine agent 18 and/or does not wait for additional instructions from virtual machine agent 18 and, instead, automatically begins determining the shortest paths once the network map generation process is complete. To calculate the shortest paths, virtual machine 16B generates a tree structure that contains all of the routers in the network and is organized such that the shortest path from router 12B to any other router is indicated by the list of nodes that are traversed to get from the root of the tree (i.e., router 12B) to the desired router. After the identified virtual machine 16 calculates the shortest paths, virtual machine 16B sends the completed tree of shortest paths to virtual machine agent 18. Virtual machine agent 18 receives the complete tree from virtual machine 16B and passes it to routing protocol daemon 40. Routing protocol daemon updates the routing information and forwarding information based on the completed tree.</p><p id="p0044" num="0044">While described with respect to calculating a network map and determining shortest paths to other routers in a network in accordance with OSPF, techniques of this disclosure may be applied to any administrative or other tasks including updating routing information in accordance with other routing protocols (e.g., RGP, BGP, IS-IS, spanning tree protocol, etc.) and performing various management tasks. Preferably, latency-sensitive tasks, such as determining next-hops during the forwarding of packets, are not distributed to one or more<!-- EPO <DP n="12"> --> virtual machines 16 in computing cloud 10. However, it is contemplated that any task may be performed by one or more virtual machines 16 that are communicatively or operatively coupled to router 12B.</p><p id="p0045" num="0045"><figref idrefs="f0003">FIG. 3</figref> is a block diagram illustrating an example computing cloud, in accordance with one aspect of this disclosure. Computing cloud 10 includes virtual machine manager 14 and virtual machines 16A-16N. In some embodiments, virtual machine manager 14 is a software processes executing within one of virtual machines 16. The computing resources of computing cloud 10 may include server computers, desktop computers, portable computers, or any other device that may execute a network operating system and perform one or more tasks associated with network devices. In some examples, two or more of virtual machines 16 may utilize, at least in part, the same computing resources. For example, virtual machine 16A and 16B may both be executing at a single server. A single virtual machine 16 may execute across two or more different computing resources. As an example, a plurality of conventional off-the-shelf computers may be configured as a cluster. The cluster of computers may execute a single virtual machine 16, providing additional redundancy and scalability while supporting multiple virtual machines. In general, each virtual machine 16 executes an instance of a network operating system, an instance of a networking device daemon (e.g., management daemon), and/or an instance of a routing protocol (e.g., OSPF, BGP, IS-IS, etc.).</p><p id="p0046" num="0046">Virtual machine manager 14 includes CPUs 60 and memory 62. CPUs 60 of virtual machine manager 14 are configured to execute instructions stored in memory 62. Memory 62 may comprise one or more computer-readable media, such as a computer-readable storage media. The computer-readable storage media may be non-transitory. Examples of such media include RAM, ROM, NVRAM, EEPROM, flash memory, and other computer-readable storage media. Memory 62 includes configuration (CONFIG) data 64 and virtual machine management module (VM MGMT MODULE) 66. Configuration data 64 is one example of a data repository configured to store configuration information for virtual machines 16, including the capabilities and configurations of each of virtual machines 16.</p><p id="p0047" num="0047">VM management module 66, in some embodiments, is a software module executable by CPUs 60. In general, VM management module 66 manages the registration of virtual machines 16 as each virtual machine 16 is established and terminated. In other words, VM management module 66 updates configuration data 64 with configuration information for each virtual machine 16. For example, when virtual machine 16A is instantiated, virtual machine 16A registers with virtual machine manager 14 (e.g., by sending a message that includes an indication that virtual machine 16A came online and the configuration and/or capabilities of virtual machine 16A). VM management module 66 processes the virtual machine registration and stores the capabilities (e.g., the version of the operating system executing at the virtual machine, the software processes executing at the virtual machine, etc.) in configuration data 64. In response to one of<!-- EPO <DP n="13"> --> virtual machines 16 terminating (i.e., shutting down), VM management module 66 removes the configuration information for the particular virtual machine 16 from configuration data 64.</p><p id="p0048" num="0048">In response to virtual machine manager 14 receiving a request from a network device (e.g., router 12B of <figref idrefs="f0001">FIG. 1</figref>), VM management module 66 queries configuration data 64 to determine if any virtual machines are currently executing. If there is no configuration information for virtual machines 16 in configuration data 64 (i.e., no virtual machines are currently executing), VM management module 66 generates a message indicating that computing cloud 10 cannot assist router 12B with the task. If there is configuration information for at least one virtual machine 16 in configuration data 64 (i.e., there is at least one virtual machine 16 executing), VM management module 66 generates a message indicating that computing cloud 10 has computing resources available and may be able to assist router 12B with the task. In some examples, even though no virtual machines 16 may be executing, if computing cloud 10 has available computing resources, VM management module 66 generates a message indicating that computing cloud 10 can assist router 12B with the task.</p><p id="p0049" num="0049">In examples where computing cloud 10 may assist router 12B with the task, virtual machine manager 14 receives a specific task request from router 12B. The specific task request includes details about the task for which router 12B is requesting assistance as well as the particular version of the network operating system executing at router 12B. VM management module 66 queries configuration date 64 to determine if any of virtual machines 16 are configured with the same version of the network operating system executed by router 12B and with the appropriate processes, daemons, or other capabilities required to complete the requested task.</p><p id="p0050" num="0050">If none of the virtual machines 16 are properly configured or if there are no virtual machines 16 currently executing, VM management module 66 may cause a new virtual machine 16 to be instantiated with the configuration required to perform the specified task. In general, virtual machines 16 are created and distributed across the computing resources of computing cloud 10 as required. Two or more of virtual machines 16 may each support an instance of a particular function (e.g., OSPF, interface control, etc.). Thus, router 12B may access multiple control planes, data planes, and management planes, each using an individual virtual machine 16.</p><p id="p0051" num="0051">If there is at least one virtual machine 16 (e.g., virtual machine 16A) that satisfies the requirements of the specified task, VM management module 66 establishes a socket to virtual machine 16A. In instances where there are two or more different virtual machines 16 that satisfy the requirements of the specified task (e.g., virtual machine 16A and 16B), virtual machine management module 66 may establish sockets at virtual machine 16A and 16B and pass all of the socket information back to virtual machine agent 18. As shown in <figref idrefs="f0003">FIG. 3</figref>, virtual machine 16A includes link-state routing protocol 70 and routing protocol (RP) daemon 72.<!-- EPO <DP n="14"> --> Similarly, virtual machine 16B includes link-state routing protocol 80 and routing protocol (RP) daemon 82. In the example of <figref idrefs="f0003">FIG. 3</figref>, both virtual machine 16A and 16B can assist with link-state routing protocol calculations (e.g., OSPF, IS-IS, etc.).</p><p id="p0052" num="0052">In examples where two or more virtual machines 16 are identified (e.g., virtual machines 16A and 16B) and the specified task is performing OSPF calculations, each virtual machine may receive a portion of the received link-state messages such that virtual machine 16A iterates over a first portion of link-state messages and returns a partial map of the network while virtual machine 16B iterates over a second portion of the link-state messages and returns another partial map of the network. In some examples, either of virtual machines 16A and 16B may receive both partial maps from virtual machine agent 18 (<figref idrefs="f0002">FIG. 2</figref>) along with a request to generate a complete map based on the partial maps. Similarly, each of virtual machines 16A and 16B may perform a portion of the shortest path calculations.</p><p id="p0053" num="0053">In some embodiments, computing cloud 10 supports an open virtual machine hosting infrastructure to integrate third party virtual machines. In these embodiments, the third party virtual machines are not part of the native network operation system. To enable communication between virtual machines 16 and the third party virtual machines, the third-party virtual machines are treated as separate devices communicates with the native virtual machines using an application programming interface (API). The third party virtual machines may provide additional functionality not supported by the native virtual machines.</p><p id="p0054" num="0054"><figref idrefs="f0004">FIG. 4</figref> is a flowchart illustrating an example process for distributing network device tasks across virtual machines, in accordance with one aspect of this disclosure. For purposes of clarity, the process shown in <figref idrefs="f0004">FIG. 4</figref> will be described with respect to system 2 of <figref idrefs="f0001">FIG. 1</figref> and router 12B of <figref idrefs="f0002">FIG. 2</figref>. While described below with respect to routers and routing protocols, other embodiments of techniques of this disclosure may use other network devices and other processes, daemons, or network protocols.</p><p id="p0055" num="0055">Router 12B determines that one or more tasks need to be completed and virtual machine agent 18 sends a request to computing cloud 10 to determine whether computing cloud 10 may be able to perform at least a portion of the task (100). In some embodiments, router 12B and virtual machine manager 14 utilize a two-stage setup process to establish a connection between router 12B and one or more virtual machines 16. In these embodiments, the initial request message is a request to determine if computing cloud 10 has any available computing resources. Virtual machine manager 14 receives the request (102) and determines whether there are any virtual machines 16 currently executing and/or whether virtual machine manager 14 can instantiate any additional virtual machines within computing cloud 10. Virtual machine manager 14 sends router 12B a response message indicating whether resources are available within computing cloud 10 (104).<!-- EPO <DP n="15"> --></p><p id="p0056" num="0056">Virtual machine agent 18 receives the response message from virtual machine manager 14 (106). If the response message indicates that there are no computing resources available in computing cloud 10, virtual machine agent 18 terminates the setup process and router 12B performs the task. If the response message indicates that there are computing resources available in computing cloud 10, virtual machine agent 18 generates a second request message that includes the version of the network operating system executing at router 12B and details of the requested task. In embodiments where router 12B and virtual machine manage 14 utilize a one-step setup process to establish a connection between router 12B and one or more virtual machines 16, the initial request message sent from router 12B to virtual machine manager 14 corresponds to the second request message. That is, in these embodiments, router 12B can skip the initial request message used in determining whether computing cloud 10 has sufficient computing resources available to assist in performing the task. Virtual machine agent 18 sends the second request message to virtual machine manager 14 (108).</p><p id="p0057" num="0057">Virtual machine manager 14 receives the second request message (110) and identifies one or more virtual machines 16 having the same version of the network operating system and capable of performing the task (112). One or more currently executing virtual machines 16 may be configured with the required version of the network operating system and with the required processes, daemons, or other capabilities needed to perform the task. However, if none of virtual machines 16 satisfy the requirements specified in the second requires message, virtual machine manager 14 can instantiate a new virtual machine 16 that satisfies the requirements and can perform the requested task. In response to identifying one or more virtual machines 16 that can perform the requested task, virtual machine manager 14 establishes a socket connection at each of the one or more identified virtual machines 16 and sends the socket information to router 12B (114).</p><p id="p0058" num="0058">In response to receiving the socket information (116), virtual machine agent 18 sends the specific task information (e.g., link-state messages, configuration information, etc.) to the one or more identified virtual machines 16 using the socket information (118). Each identified virtual machine 16 receives the task information (120) and performs the operations required to complete the task (122). After completing the task, the respective identified virtual machine 16 sends the task result to virtual machine agent 18 using the socket. Virtual machine agent 18 receives the result of the task (124) and router 12B applies the result of the task (e.g., routing unit 30 updates routing information 44 based on the result).</p><p id="p0059" num="0059">A network device configured in accordance with techniques of this disclosure may include at least one network interface configured to send and receive messages, a routing unit comprising one or more processors configured to execute a version of a network operating system, and a virtual machine agent configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual<!-- EPO <DP n="16"> --> machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task, wherein the routing unit is configured to update the network device based on the result included in the task response.</p><p id="p0060" num="0060">In some examples, the virtual machine is a first virtual machine, the instance of the version of the operating system is a first instance of the operating system executing in the first virtual machine, the task is a first task, and the task response is a first task response. In these examples, the virtual machine agent is configured identify a second virtual machine executing at the computing cloud, wherein the second virtual machine executes a second instance of the version of the network operating system, and wherein the first virtual machine and the second virtual machine are different virtual machines, to send a request to perform a second task to the second virtual machine, and to receive, from the second virtual machine, a second task response that includes a result of performing the second task, and the routing unit is configured to update the network device based on the first task response and the second task response.</p><p id="p0061" num="0061">In some examples, the first task is a first portion of a third task, and wherein the second task is a second portion of the third task.</p><p id="p0062" num="0062">In some examples, the virtual machine agent is configured to send a request for computing resources to a virtual machine manager, wherein the request includes an indication of the version of the network operating system executed at the network device and an indication of a task to be performed, to receive a response from the virtual machine manager, wherein the response includes an indication of a socket by which the virtual machine is reachable, to send the task request to the virtual machine using the socket, and to receive the task response from the virtual machine using the socket.</p><p id="p0063" num="0063">In some examples, the request for computing resources is a second request, the response is a second response, and the virtual machine agent is configured to, prior to sending the second request for computing resources, send a first request for computing resources to the virtual machine manager to determine whether a computing cloud has available computing resources to perform the task, to receive a first response indicating whether the computing cloud has available computing resources, to determine whether the computing cloud has available resources based on the first response, and, in response to determining that the computing cloud has available computing resources, to send the second request for computing resources to the virtual machine manager.</p><p id="p0064" num="0064">In some examples, the task is associated with a routing protocol executing at the routing unit , and wherein the routing protocol is one of open shortest path first, spanning tree protocol, border gateway protocol, intermediate system to intermediate system protocol, virtual private local area network service, and resource reservation protocol.<!-- EPO <DP n="17"> --></p><p id="p0065" num="0065">In some examples, a memory configured to store at least one of configuration information, forwarding information, and routing information, and the routing unit updates at least one of the configuration information, the forwarding information, and the routing information based on the result included in the task response.</p><p id="p0066" num="0066">In some examples, the virtual machine is one of a plurality of virtual machines executing at the computing cloud, and wherein at least a subset of the plurality of virtual machines is configured to execute one or more of a routing protocol, an interface control process, a management process, and a chassis process.</p><p id="p0067" num="0067">Therefore, from one perspective, there have been described techniques for distributing network device tasks across virtual machines executing in a computing cloud. An example network device includes a network interface to send and receive messages, a routing unit comprising one or more processors configured to execute a version of a network operating system, and a virtual machine agent. The virtual machine agent is configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task. The routing unit is configured to update the network device based on the result.</p><p id="p0068" num="0068">The techniques described in this disclosure may be implemented, at least in part, in hardware, software, firmware or any combination thereof. For example, various aspects of the described techniques may be implemented within one or more processors, including one or more microprocessors, digital signal processors (DSPs), application specific integrated circuits (ASICs), field programmable gate arrays (FPGAs), or any other equivalent integrated or discrete logic circuitry, as well as any combinations of such components. The term "processor" or "processing circuitry" may generally refer to any of the foregoing logic circuitry, alone or in combination with other logic circuitry, or any other equivalent circuitry. A control unit comprising hardware may also perform one or more of the techniques of this disclosure.</p><p id="p0069" num="0069">Such hardware, software, and firmware may be implemented within the same device or within separate devices to support the various operations and functions described in this disclosure. In addition, any of the described units, modules or components may be implemented together or separately as discrete but interoperable logic devices. Depiction of different features as modules or units is intended to highlight different functional aspects and does not necessarily imply that such modules or units must be realized by separate hardware or software components. Rather, functionality associated with one or more modules or units may be performed by separate hardware or software components, or integrated within common or separate hardware or software components.<!-- EPO <DP n="18"> --></p><p id="p0070" num="0070">The techniques described in this disclosure may also be embodied or encoded in a computer-readable medium, such as a computer-readable storage medium, containing instructions. Instructions embedded or encoded in a computer-readable medium may cause a programmable processor, or other processor, to perform the method, e.g., when the instructions are executed. Computer readable storage media may include random access memory (RAM), read only memory (ROM), programmable read only memory (PROM), erasable programmable read only memory (EPROM), electronically erasable programmable read only memory (EEPROM), flash memory, a hard disk, a CD-ROM, a floppy disk, a cassette, magnetic media, optical media, or other computer-readable storage media. It should be understood that the term "computer-readable storage media" can refer to physical storage media, (e.g., non-transitory media) and to signals, carrier waves, or other transient media.</p><p id="p0071" num="0071">Various embodiments have been described. These and other embodiments are within the scope of the following claims.</p></description><claims mxw-id="PCLM56976503" lang="EN" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-en-0001" num="0001"><claim-text>A method comprising:
<claim-text>executing, by a network device, a version of a network operation system;</claim-text>
<claim-text>identifying, with a virtual machine agent executing at the network device, a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system;</claim-text>
<claim-text>sending, with the virtual machine agent to the virtual machine, a request to perform a task;</claim-text>
<claim-text>receiving, with the virtual machine agent and from the virtual machine, a task response that includes a result of performing the task; and</claim-text>
<claim-text>updating, based on the result included in the task response, the network device.</claim-text></claim-text></claim><claim id="c-en-0002" num="0002"><claim-text>The method of claim 1, wherein the virtual machine is a first virtual machine, wherein the instance of the version of the network operating system is a first instance of the network operating system executing at the first virtual machine, wherein the task is a first task for a first logical segment, and wherein the task response is a first task response, the method further comprising:
<claim-text>identifying a second virtual machine executing at the computing cloud, wherein the second virtual machine executes a second instance of the version of the network operating system, and wherein the first virtual machine and the second virtual machine are different virtual machines;</claim-text>
<claim-text>sending, with the virtual machine agent and to the second virtual machine, a request to perform a second task, wherein the second task is for a second logical segment; and</claim-text>
<claim-text>receiving, with the virtual machine agent and from the virtual machine, a second task response that includes a result of performing the second task,</claim-text>
<claim-text>wherein updating the network device comprises updating the network device based on the result included in first task response and the result included in the second task response.</claim-text></claim-text></claim><claim id="c-en-0003" num="0003"><claim-text>The method of claim 2, wherein the first task is a first subtask of a third task, and wherein the second task is a second subtask of the third task.</claim-text></claim><claim id="c-en-0004" num="0004"><claim-text>The method of any of claims 1-3,<br/>
wherein identifying the virtual machine comprises:<!-- EPO <DP n="20"> -->
<claim-text>sending a request for computing resources to a virtual machine manager, wherein the request includes an indication of the version of the network operating system and an indication of a task to be performed; and</claim-text>
<claim-text>receiving a response from the virtual machine manager, wherein the response includes an indication of a socket by which the virtual machine is reachable,</claim-text>
<claim-text>wherein sending the task request to the virtual machine comprises sending the task request to the virtual machine using the socket, and</claim-text>
<claim-text>wherein receiving the task response comprises receiving the task response using the socket.</claim-text></claim-text></claim><claim id="c-en-0005" num="0005"><claim-text>The method of claim 4, wherein the request for computing resources is a second request, wherein the response is a second response, and wherein identifying the virtual machine comprises:
<claim-text>prior to sending the second request for computing resources, sending a first request for computing resources to the virtual machine manager to determine whether the computing cloud has computing resources available to perform the task; and</claim-text>
<claim-text>receiving, with the virtual machine agent, a first response indicating whether the computing cloud has available computing resources; and</claim-text>
<claim-text>determining whether the computing cloud has available computing resources based on the first response,</claim-text>
<claim-text>wherein the second request for computing resources is sent to the virtual machine manager in response to determining that the computing cloud has available computing resources.</claim-text></claim-text></claim><claim id="c-en-0006" num="0006"><claim-text>The method of any of claims 1-5, wherein the task is associated with a routing protocol executing at the network device, and wherein the routing protocol is one of open shortest path first, spanning tree protocol, border gateway protocol, intermediate system to intermediate system protocol, and virtual private local area network service.</claim-text></claim><claim id="c-en-0007" num="0007"><claim-text>The method of any of claims 1-6, wherein updating the network device comprises updating, based on the result included in the task response, at least one of updating configuration information, forwarding information, and routing information stored at the network device.</claim-text></claim><claim id="c-en-0008" num="0008"><claim-text>The method of any of claims 1-7, wherein the virtual machine is one of a plurality of virtual machines executing at the computing cloud, and wherein at least a subset of the plurality<!-- EPO <DP n="21"> --> of virtual machines is configured to execute one or more of a routing protocol, an interface control process, a management process, and a chassis process.</claim-text></claim><claim id="c-en-0009" num="0009"><claim-text>A network device comprising:
<claim-text>at least one network interface configured to send and receive messages;</claim-text>
<claim-text>a routing unit comprising one or more processors configured to execute a version of a network operating system; and</claim-text>
<claim-text>a virtual machine agent configured to identify a virtual machine executing at a computing cloud communicatively coupled to the network device, wherein the identified virtual machine executes an instance of the version of the network operating system, to send, using the at least one network interface and to the virtual machine, a request to perform a task, and to receive, using the at least one network interface and from the virtual machine, a task response that includes a result of performing the task,</claim-text>
<claim-text>wherein the routing unit is configured to update the network device based on the result included in the task response.</claim-text></claim-text></claim><claim id="c-en-0010" num="0010"><claim-text>The network device of claim 9, further comprising means for performing any of the methods of claims 1-8.</claim-text></claim><claim id="c-en-0011" num="0011"><claim-text>A computer-readable storage medium encoded with instructions for causing one or more programmable processors to perform the method recited by any of claims 1-8.</claim-text></claim></claims><drawings mxw-id="PDW16667283" load-source="patent-office"><!-- EPO <DP n="22"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="23"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="24"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="25"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
