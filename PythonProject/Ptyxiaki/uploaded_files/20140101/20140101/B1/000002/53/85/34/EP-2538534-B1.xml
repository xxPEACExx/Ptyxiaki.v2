<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2538534-B1" country="EP" doc-number="2538534" kind="B1" date="20140101" family-id="46507832" file-reference-id="315086" date-produced="20180823" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146552064" ucid="EP-2538534-B1"><document-id><country>EP</country><doc-number>2538534</doc-number><kind>B1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-12004272-A" is-representative="YES"><document-id mxw-id="PAPP154825987" load-source="docdb" format="epo"><country>EP</country><doc-number>12004272</doc-number><kind>A</kind><date>20120605</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140448906" ucid="JP-2011126037-A" load-source="docdb"><document-id format="epo"><country>JP</country><doc-number>2011126037</doc-number><kind>A</kind><date>20110606</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130716</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988108099" load-source="docdb">H02M   3/335       20060101AFI20130531BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988111852" load-source="docdb">G05F   1/44        20060101ALI20130531BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988109547" load-source="docdb" scheme="CPC">H02M   3/33507     20130101 LI20130426BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988134146" load-source="docdb" scheme="CPC">G05F   1/44        20130101 FI20130816BHEP        </classification-cpc><classification-cpc mxw-id="PCL2097032751" load-source="docdb" scheme="CPC">H05B  33/0815      20130101 LA20140716BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132188676" lang="DE" load-source="patent-office">Schaltstromversorgungsvorrichtung, Halbleitervorrichtung und LED-Beleuchtungsvorrichtung</invention-title><invention-title mxw-id="PT132188677" lang="EN" load-source="patent-office">Switching power supply circuit, semiconductor device, and LED lighting device</invention-title><invention-title mxw-id="PT132188678" lang="FR" load-source="patent-office">Circuit dýalimentation électrique de commutation, dispositif semi-conducteur et dispositif d'éclairage à DEL</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918169242" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SHARP KK</last-name><address><country>JP</country></address></addressbook></applicant><applicant mxw-id="PPAR918154007" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SHARP KABUSHIKI KAISHA</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918147455" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>IKEDA MASAKAZU</last-name><address><country>JP</country></address></addressbook></inventor><inventor mxw-id="PPAR918173331" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>IKEDA, MASAKAZU</last-name></addressbook></inventor><inventor mxw-id="PPAR918994600" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>IKEDA, MASAKAZU</last-name><address><street>c/o Sharp Kabushiki Kaisha 22-22, Nagaike-cho Abeno-ku</street><city>Osaka-shi Osaka 545-8522</city><country>JP</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR918994602" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Sharp Kabushiki Kaisha</last-name><iid>100219336</iid><address><street>22-22, Nagaike-cho Abeno-ku</street><city>Osaka-shi, Osaka 545-8522</city><country>JP</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR918994601" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Müller - Hoffmann &amp; Partner</last-name><iid>100061044</iid><address><street>Patentanwälte Innere Wiener Strasse 17</street><city>81667 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548945279" load-source="docdb">AL</country><country mxw-id="DS548844382" load-source="docdb">AT</country><country mxw-id="DS548945280" load-source="docdb">BE</country><country mxw-id="DS548932161" load-source="docdb">BG</country><country mxw-id="DS548820521" load-source="docdb">CH</country><country mxw-id="DS548947993" load-source="docdb">CY</country><country mxw-id="DS548844383" load-source="docdb">CZ</country><country mxw-id="DS548945281" load-source="docdb">DE</country><country mxw-id="DS548947998" load-source="docdb">DK</country><country mxw-id="DS548947999" load-source="docdb">EE</country><country mxw-id="DS548872162" load-source="docdb">ES</country><country mxw-id="DS548942906" load-source="docdb">FI</country><country mxw-id="DS548932162" load-source="docdb">FR</country><country mxw-id="DS548945354" load-source="docdb">GB</country><country mxw-id="DS548948000" load-source="docdb">GR</country><country mxw-id="DS548945355" load-source="docdb">HR</country><country mxw-id="DS548844384" load-source="docdb">HU</country><country mxw-id="DS548820522" load-source="docdb">IE</country><country mxw-id="DS548948001" load-source="docdb">IS</country><country mxw-id="DS548932163" load-source="docdb">IT</country><country mxw-id="DS548948006" load-source="docdb">LI</country><country mxw-id="DS548942907" load-source="docdb">LT</country><country mxw-id="DS548954116" load-source="docdb">LU</country><country mxw-id="DS548942908" load-source="docdb">LV</country><country mxw-id="DS548942909" load-source="docdb">MC</country><country mxw-id="DS548954117" load-source="docdb">MK</country><country mxw-id="DS548954122" load-source="docdb">MT</country><country mxw-id="DS548932164" load-source="docdb">NL</country><country mxw-id="DS548872163" load-source="docdb">NO</country><country mxw-id="DS548820523" load-source="docdb">PL</country><country mxw-id="DS548954123" load-source="docdb">PT</country><country mxw-id="DS548932165" load-source="docdb">RO</country><country mxw-id="DS548954124" load-source="docdb">RS</country><country mxw-id="DS548820524" load-source="docdb">SE</country><country mxw-id="DS548844385" load-source="docdb">SI</country><country mxw-id="DS548872164" load-source="docdb">SK</country><country mxw-id="DS548820525" load-source="docdb">SM</country><country mxw-id="DS548942910" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63956736" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>BACKGROUND OF THE INVENTION</b></heading><heading id="h0002"><b>Field of the Invention</b></heading><p id="p0001" num="0001">The present invention relates to a switching power supply circuit, a semiconductor device used for the same, and an LED lighting device using the same.</p><heading id="h0003"><b>Description of Related Art</b></heading><p id="p0002" num="0002">Conventionally, in the field of switching power supply circuits, there is disclosed a technique for stabilizing output current with respect to load change, including the steps of detecting time period during which secondary current of a transformer is flowing, and setting a ratio of the time period to a switching period, namely an on-duty ratio of a switching element (see <patcit id="pcit0001" dnum="JP2009011073A"><text>JP-A-2009-11073</text></patcit>, which is referred to as Patent document 1 hereinafter).</p><p id="p0003" num="0003"><figref idrefs="f0011">Fig. 11</figref> is a block diagram illustrating a conventional example of a switching power supply device (<figref idrefs="f0001">Fig. 1</figref> of Patent document 1). A switching power supply device X of this conventional example includes a semiconductor device X100, a transformer X110, diodes X121 and X141, capacitors X122 and X142, and resistors X151 and X152, which constitute a flyback-type switching power supply circuit generating a predetermined DC output voltage Vout from an AC input voltage Vin so as to supply the DC output voltage Vout to a load X130. The transformer X110 includes a primary winding X111, a secondary winding X112, and an auxiliary winding X113.</p><p id="p0004" num="0004">In the semiconductor device X100, there are integrated a switching element X1, a drain current detection circuit X2, a drain current limiter circuit X3, an error amplifier X4, a pulse frequency modulation (PFM) control circuit X5, a secondary current on-period detection circuit X6, a secondary current detection delay time correction circuit X7, a secondary current on-duty control circuit X8, a clock signal selection circuit X9, a flip-flop circuit X10, a NAND circuit X11, a gate driver X12, a on-time blanking pulse generation circuit X13, an AND circuit X14, and a regulator X15.</p><p id="p0005" num="0005"><figref idrefs="f0012">Fig. 12</figref> is a circuit diagram illustrating a principal part of the semiconductor device X100 (<figref idrefs="f0002">Fig. 2</figref> of Patent document 1). The secondary current on-period detection circuit X6 includes one-pulse signal generation circuits X21 and X23, a comparator X22, and a flip-flop circuit X24. The secondary current detection delay time correction circuit X7 includes a constant current source X31, a capacitor X32, an inverter X33, and a switch X34. The secondary current on-duty control circuit X8 includes switches X41 and X42, a capacitor<!-- EPO <DP n="2"> --> X43, a constant current source X44, N-channel metal oxide semiconductor (MOS) field effect transistors X45 and X46, a comparator X47, a reference voltage source X48, an AND circuit X49, and a one-pulse signal generation circuit X50.</p><p id="p0006" num="0006"><figref idrefs="f0013">Fig. 13</figref> is a timing chart illustrating voltage waveforms and current waveforms of individual portions of the switching power supply device X, which includes in order from the upper, an auxiliary winding voltage VTR obtained by dividing a voltage at an end of the auxiliary winding X113, primary current Ids flowing in the switching element X1, and secondary current I2p flowing in the secondary winding X112. Concerning symbols in <figref idrefs="f0013">Fig. 13</figref>, T1 denotes a first period during which the secondary current I2p is flowing, T2 denotes a second period during which the secondary current I2p does not flow, T3 denotes a third period as a sum of the first period T1 and the second period T2, Ipk1 denotes a peak value of the primary current Ids, and Ipk2 denotes a peak value of the secondary current I2p.</p><p id="p0007" num="0007">Average output current Iout supplied from the switching power supply device X to the load X130 is an average value of the secondary current I2p. The average value of the secondary current I2p in the first period T1 is 1/2 of the peak current Ipk2 of the secondary current I2p. The average value of the secondary current I2p in the third period T3 is a value obtained by multiplying the average value of the secondary current I2p in the first period T1 by an on-duty ratio of the switching element X1. Therefore, when the number of turns of the primary winding X111 is denoted by N1, and the number of turns of the secondary winding X112 is denoted by N2, the average output current Iout is expressed by the following expression (1).</p><p id="p0008" num="0008"><maths id="math0001" num="(1)"><math display="block"><mi>Iout</mi><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">3</mn></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn></math><img id="ib0001" file="imgb0001.tif" wi="76" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0009" num="0009">The conventional switching power supply device X controls the peak current Ipk1 of the switching element X1 to be constant using the drain current limiter circuit X3 so that T1/T3 in the expression (1) becomes constant, and hence controls the average output current Iout to be constant.</p><p id="p0010" num="0010">The comparator X22 included in the secondary current on-period detection circuit X6 sets an comparison output signal to a high level (logical level when the secondary current is detected to be off) when the auxiliary winding voltage VTR applied to an inverting input terminal (-) becomes a reference voltage or lower applied to the non-inverting input terminal (+). A waveform of the auxiliary winding voltage VTR gradually drops as time passes after the switching element X1 is turned off as illustrated in <figref idrefs="f0013">Fig. 13</figref>. Therefore, there is a delay time ΔT1 from time when the secondary current I2p becomes an actual off state (zero value) until the auxiliary winding voltage VTR becomes lower than the reference voltage of the<!-- EPO <DP n="3"> --> comparator X22. As a result, in the secondary current on-period detection circuit X6, there occurs the delay time ΔT1 until detection of the off state of the secondary current I2p.</p><p id="p0011" num="0011">Therefore, in the conventional switching power supply device X, a delay correction period ΔT2 corresponding to the delay time ΔT1 is subtracted from an on-period of the secondary current I2p detected by the comparator X22 in advance. Thus, the on-period of the secondary current I2p is corrected so that accuracy of the average output current Iout is enhanced.</p><p id="p0012" num="0012">Here, as illustrated in <figref idrefs="f0013">Fig. 13</figref>, when an on-period of the switching element X1 is denoted by T4, in one period of switching drive, an average input current Iin flowing into the switching power supply device X is expressed by the following expression (2).</p><p id="p0013" num="0013"><maths id="math0002" num="(2)"><math display="block"><mtable columnalign="left"><mtr><mtd><mi>Iin</mi></mtd><mtd><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>×</mo><mfenced separators=""><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">4</mn><mo>/</mo><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">3</mn></mfenced></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>×</mo><mfenced separators=""><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">T</mi><mo>⁢</mo><mn mathvariant="normal">3</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi>Vout</mi><mo>/</mo><mi>Vin</mi></mfenced></mtd></mtr></mtable></math><img id="ib0002" file="imgb0002.tif" wi="100" he="15" img-content="math" img-format="tif"/></maths></p><p id="p0014" num="0014">Here, it is supposed that the input voltage Vin of the switching power supply device X is changed. As described above, the conventional switching power supply device X controls the peak current Ipk1 of the switching element X1 to be constant using the drain current limiter circuit X3 so that T1/T3 in the above expression (1) is constant, and hence controls the average output current Iout to be constant. In addition, N1/N2 is also constant. Further, because the average output current Iout flowing in the load X130 is constant, the output voltage Vout is also constant. Therefore, it is understood that if the input voltage Vin of the switching power supply device X is changed, the average input current Iin of the switching power supply device X changes inversely proportional to the input voltage Vin.</p><p id="p0015" num="0015">However, in a power supply circuit supplied with AC power, a power factor thereof is important. In order to obtain a high power factor, it is desirable that the power supply circuit should look like a pure resistance viewed from the AC power supply side. In other words, it is necessary that input current of the power supply circuit is proportional to the input voltage.</p><p id="p0016" num="0016">In view of the above discussion, the conventional switching power supply device X has a problem that the power factor is bad when the AC power is input, and hence power loss in a power supply system from a power station to a terminal product (load) is increased, and further noise jamming occurs in other devices.<!-- EPO <DP n="4"> --></p><p id="p0017" num="0017"><patcit id="pcit0002" dnum="US5369472A"><text>US 5 369 472 A</text></patcit> describes a power supply apparatus capable of providing one or more individually controllable high voltage outputs for various components within an electrophotographic printing machine. Receiving power from an input power source, the power supply apparatus produces various high voltage outputs, wherein each output is capable of providing a range of high voltage potentials. The individual high voltage outputs are regulated by a microcontroller which receives an analog voltage signal from a voltage sensor and produces a voltage control signal which is then used to regulate the outputs in a conventional manner for resonant- or switching-type power supplies. The microcontroller regulates the output potentials by varying the voltage control signals for each of the outputs as a function of the difference in magnitude between the analog voltage signal and a voltage set-point value associated with the output.<!-- EPO <DP n="5"> --></p><heading id="h0004"><b>SUMMARY OF THE INVENTION</b></heading><p id="p0018" num="0018">In view of the above-mentioned problem, it is an object of the present invention to provide a switching power supply circuit capable of achieving higher power factor than<!-- EPO <DP n="6"> --> conventional one while maintaining the current flowing in the load to be constant, and an LED lighting device using them.</p><p id="p0019" num="0019">In order to achieve the above-mentioned object, a switching power supply circuit according to the present invention includes a full-wave rectification circuit that performs full-wave rectification of an AC input voltage so as to generate a primary voltage, a transformer that transforms the primary voltage into a secondary voltage utilizing electromagnetic induction between first and second isolated windings, a rectifying and smoothing circuit that generates a DC output voltage from the secondary voltage so as to supply the DC output voltage to a load, a primary current control circuit that performs on/off control of primary current based on a result of comparison between a primary current detection voltage corresponding to the primary current flowing in the first winding and a first reference voltage, and a reference voltage correction circuit for monitoring an on-duty ratio of secondary current flowing in the second winding so as to correct the first reference voltage.</p><p id="p0020" num="0020">Note that other feature, elements, steps, merits, and characteristics of the present invention will be more apparent from the following specific description of the most preferred embodiment and the relevant attached drawings.</p><heading id="h0005"><b>BRIEF DESCRIPTION OF THE DRAWINGS</b></heading><p id="p0021" num="0021"><ul><li><figref idrefs="f0001">Fig. 1</figref> is a block diagram illustrating a structural example of an LED lighting device.</li><li><figref idrefs="f0002">Fig. 2</figref> is a timing chart illustrating voltage waveforms and current waveforms of individual portions of a switching power supply circuit 1.</li><li><figref idrefs="f0003">Fig. 3</figref> is a circuit diagram illustrating a structural example of a secondary current time detection circuit 107.</li><li><figref idrefs="f0004">Fig. 4</figref> is a block diagram illustrating a structural example of a first multiplying circuit 108.</li><li><figref idrefs="f0005">Fig. 5</figref> is a circuit diagram illustrating a structural example of a chopping circuit B2.</li><li><figref idrefs="f0006">Fig. 6</figref> is a timing chart illustrating voltage waveforms of individual portions of the first multiplying circuit 108.</li><li><figref idrefs="f0007">Fig. 7</figref> is a block diagram illustrating a structural example of an error amplifier 109.</li><li><figref idrefs="f0008">Fig. 8</figref> is a circuit diagram illustrating a first structural example of a second multiplying circuit 111.<!-- EPO <DP n="7"> --></li><li><figref idrefs="f0009">Fig. 9</figref> is a circuit diagram illustrating a second structural example of the second multiplying circuit 111.</li><li><figref idrefs="f0010">Fig. 10</figref> is a circuit diagram illustrating a structural example of an oscillator circuit 105.</li><li><figref idrefs="f0011">Fig. 11</figref> is a block diagram illustrating a conventional example of the switching power supply device.</li><li><figref idrefs="f0012">Fig. 12</figref> is a circuit diagram illustrating a principal part of a semiconductor device X100.</li><li><figref idrefs="f0013">Fig. 13</figref> is a timing chart illustrating a voltage waveform and current waveforms of individual portions of a switching power supply device X.</li></ul></p><heading id="h0006"><b>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</b></heading><heading id="h0007">&lt;Light Emitting Diode (LED) lighting device&gt;</heading><p id="p0022" num="0022"><figref idrefs="f0001">Fig. 1</figref> is a block diagram illustrating a structural example of the LED lighting device. The LED lighting device of this structural example includes a switching power supply circuit 1, an AC power supply 2, and an LED (load) 3.</p><p id="p0023" num="0023">The switching power supply circuit 1 generates the DC output voltage Vout by AC/DC conversion of the AC input voltage Vin supplied from the AC power supply 2 (for example, a commercial AC power supply of AC 100 V), and supplies this DC output voltage Vout to the LED 3. The switching power supply circuit 1 is provided as a module including a semiconductor device 100, a full-wave rectification circuit 200, a voltage dividing circuit 300, a transformer 400, and a rectifying and smoothing circuit 500.</p><p id="p0024" num="0024">In the semiconductor device 100, there are integrated a switching element 101, a primary current detection circuit 102, a buffer circuit 103, an RS flip-flop 104, an oscillator circuit 105, a voltage comparator circuit 106, a secondary current time detection circuit 107, a first multiplying circuit 108, an error amplifier 109, a reference voltage source 110, and a second multiplying circuit 111.</p><p id="p0025" num="0025">The full-wave rectification circuit 200 performs full-wave rectification of the AC input voltage Vin and generates a primary voltage V1. The primary voltage V1 is a pulsating voltage.</p><p id="p0026" num="0026">The voltage dividing circuit 300 generates a divided voltage V1' by dividing the primary voltage V1. A dividing ratio of the voltage dividing circuit 300 should be appropriately set considering a voltage value of the divided voltage V1' that can be input to the semiconductor device 100 (particularly the second multiplying circuit 111). The voltage<!-- EPO <DP n="8"> --> dividing circuit 300 is usually constituted of a resistor ladder, but it may be constituted of a combination of a resistor and other impedance element (capacitor or coil).</p><p id="p0027" num="0027">The transformer 400 transforms the primary voltage V1 to the secondary voltage V2 utilizing electromagnetic induction between a first winding (primary winding) 401 and a second winding (secondary winding) 402 isolated from each other. Note that the transformer 400 includes a third winding 403 in addition to the first winding 401 and the second winding 402.</p><p id="p0028" num="0028">The rectifying and smoothing circuit 500 generates the DC output voltage Vout by rectifying and smoothing the secondary voltage V2 at an end of the second winding 402.</p><heading id="h0008">&lt;Semiconductor device&gt;</heading><p id="p0029" num="0029">The switching element 101 performs on/off control of primary current I1 flowing in the first winding 401 of the transformer 400 based on a switching control signal S9' input from the RS flip-flop 104 via the buffer circuit 103. Specifically, the switching element 101 is turned on when the switching control signal S9' is high level and is turned off when the switching control signal S9' is low level. When the switching element 101 is turned on, the primary current I1 flows in the first winding 401 of the transformer 400 via the switching element 101. A field effect transistor or a bipolar transistor can be used as the switching element 101.</p><p id="p0030" num="0030">The primary current detection circuit 102 lets the primary current I1 flow in a resistor to converts it to a primary current detection voltage S6, and outputs this primary current detection voltage S6 to the voltage comparator circuit 106.</p><p id="p0031" num="0031">The buffer circuit 103 amplifies current capability of the switching control signal S9 input from the RS flip-flop 104 so as to generate the switching control signal S9' having a voltage value and a current value necessary for driving the switching element 101.</p><p id="p0032" num="0032">The reset/set (RS) flip-flop 104 switches a logical level of the switching control signal S9 output from an output terminal Q based on a set signal S7 input to a set terminal S and a reset signal S8 input to a reset terminal R. Specifically, the RS flip-flop 104 sets the switching control signal S9 to high level at the rising edge (L to H) of the set signal S7 and resets the switching control signal S9 to low level at the rising edge (L to H) of the reset signal S8. In addition, the RS flip-flop 104 maintains the switching control signal S9 at low level during a period during which the set signal S7 is at low level regardless of a logical level of the reset signal S8. Therefore, the RS flip-flop 104 resets the switching control signal S9 to low level not only at the rising edge of the reset signal S8 but also at a falling edge of the set signal S7.<!-- EPO <DP n="9"> --></p><p id="p0033" num="0033">The oscillator circuit 105 generates the set signal S7 (reference clock signal) driven by pulse at a predetermined switching frequency.</p><p id="p0034" num="0034">The voltage comparator circuit 106 compares the primary current detection voltage S6 input from the primary current detection circuit 102 with a first reference voltage S2 input from the second multiplying circuit 111 so as to generate the reset signal S8. The reset signal S8 is high level if the primary current detection voltage S6 is higher than the first reference voltage S2 and is low level if the primary current detection voltage S6 is not higher than the first reference voltage S2.</p><p id="p0035" num="0035">The secondary current time detection circuit 107 detects a time period during which a secondary current I2 is flowing in the second winding 402 of the transformer 400 from a waveform of the winding voltage S1 at one end of the third winding 403, and outputs a secondary current time detection signal S3 in accordance with the detection result. The secondary current time detection signal S3 becomes low level when the secondary current 12 flows and becomes high level when the secondary current 12 does not flow.</p><p id="p0036" num="0036">The first multiplying circuit 108 multiplies the secondary current time detection signal S3 input from the secondary current time detection circuit 107 by the first reference voltage S2 input from the second multiplying circuit 111 so as to generate a multiplied voltage S4, and outputs this multiplied voltage S4 to the error amplifier 109. The multiplied voltage S4 becomes a voltage value proportional to a product of a ratio of the low level period of the secondary current time detection signal S3 in the switching period (namely, the on-duty ratio of the secondary current I2) and a maximum value Ipk1 of the primary current I1.</p><p id="p0037" num="0037">The error amplifier 109 amplifies a difference between the multiplied voltage S4 input from the first multiplying circuit 108 and a second reference voltage Vref input from the reference voltage source 110, so as to generate an error voltage S5.</p><p id="p0038" num="0038">The reference voltage source 110 generates the second reference voltage Vref that does not depends on variations of power supply voltage and ambient temperature.</p><p id="p0039" num="0039">The second multiplying circuit 111 generates the first reference voltage S2 proportional to the product of the divided voltage V1' input from the voltage dividing circuit 300 and the error voltage S5 input from the error amplifier 109.</p><p id="p0040" num="0040">Among the above-mentioned components, the switching element 101, the primary current detection circuit 102, the buffer circuit 103, the RS flip-flop 104, the oscillator circuit 105, and the voltage comparator circuit 106 constitute the primary current control circuit that performs on/off control of the primary current I1 based on a comparison result between the primary current detection voltage S6 corresponding to the primary current I1 flowing in the<!-- EPO <DP n="10"> --> first winding 401 and the first reference voltage S2.</p><p id="p0041" num="0041">In addition, the secondary current time detection circuit 107, the first multiplying circuit 108, the error amplifier 109, the reference voltage source 110, the second multiplying circuit 111, and the voltage dividing circuit 300 constitute the reference voltage correction circuit that monitors the on-duty ratio of the secondary current I2 flowing in the second winding 402 so as to correct the first reference voltage S2.</p><heading id="h0009">&lt;Operations&gt;</heading><p id="p0042" num="0042">Now, a period of the set signal (reference clock signal) S7 is denoted by Tc, a low level period of the secondary current time detection signal S3 (period during which the secondary current 12 flows) is denoted by Tres, a maximum value of the primary current I1 is denoted by Ipk1, a maximum value of the secondary current I2 is denoted by Ipk2, the number of turns of the first winding 401 is denoted by N1, and the number of turns of the second winding 402 is denoted by N2. Then, the average output current Iout flowing in the LED 3 is expressed by the following expression (3). <maths id="math0003" num="(3)"><math display="block"><mi>Iout</mi><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi>Tres</mi><mo>/</mo><mi>Tc</mi></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn></math><img id="ib0003" file="imgb0003.tif" wi="84" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0043" num="0043">Note that N1/N2 in the above expression (3) is a fixed value. Therefore, in order to keep the average output current Iout to be constant, (Tres/Tc)×Ipk1 should be constant. Therefore, the switching power supply circuit 1 works as follows in order to obtain output constant current characteristics.</p><p id="p0044" num="0044">The first multiplying circuit 108 outputs the multiplied voltage S4 proportional to a product of the duty ratio of the secondary current time detection signal S3 (namely, the on-duty ratio of the secondary current I2) and the first reference voltage S2 used as the reference voltage for the voltage comparator circuit 106 (namely, the maximum value Ipk1 of the primary current I1). The first multiplying circuit 108 performs a chopping process of the first reference voltage S2 in accordance with a logical level of the secondary current time detection signal S3 as its internal operation. More specifically, the first multiplying circuit 108 outputs the first reference voltage S2 as a chopping voltage Sx when the secondary current time detection signal S3 is low level (when the secondary current 12 is flowing), and outputs 0 V as the chopping voltage Sx when the secondary current time detection signal S3 is high level (when the secondary current 12 is not flowing). Therefore, by smoothing this chopping voltage Sx sufficiently, it is possible to generate the multiplied voltage S4 proportional to a product of the on-duty ratio of the secondary current I2 and the maximum value Ipk1 of the primary current I1.</p><p id="p0045" num="0045">The error amplifier 109 amplifies a difference between the multiplied voltage S4<!-- EPO <DP n="11"> --> and the second reference voltage Vref so as to generate the error voltage S5. If the multiplied voltage S4 is lower than the second reference voltage Vref, namely if the average output current Iout is smaller than a target value, the error voltage S5 becomes high. If the error voltage S5 input to the second multiplying circuit 111 becomes high, the first reference voltage S2 also becomes high, and hence the maximum value Ipk1 of the primary current I1 becomes large. On the other hand, if the multiplied voltage S4 is higher than the second reference voltage Vref, namely if the average output current Iout is larger than the target value, the error voltage S5 becomes low. If the error voltage S5 input to the second multiplying circuit 111 becomes low, the first reference voltage S2 also becomes low, and hence the maximum value Ipk1 of the primary current I1 becomes small.</p><p id="p0046" num="0046">According to the operation described above, feedback works so that the multiplied voltage S4 proportional to the product of the on-duty ratio of the secondary current 12 and the maximum value Ipk1 of the primary current I1, namely the multiplied voltage S4 proportional to the average output current Iout, converges to the second reference voltage Vref. Therefore, it is possible to maintain the average output current Iout to be constant.</p><p id="p0047" num="0047"><figref idrefs="f0002">Fig. 2</figref> is a timing chart illustrating voltage waveforms and current waveforms of individual portions of the switching power supply circuit 1, which includes in order from the upper, the winding voltage S1, the primary current I1, the secondary current 12, the first reference voltage S2, the secondary current time detection signal S3, and the multiplied voltage S4.</p><p id="p0048" num="0048">As illustrated in <figref idrefs="f0002">Fig. 2</figref>, the waveform of the primary current I1 increases substantially linearly in the period during which the switching element 101 is turned on. The primary current detection circuit 102 lets the primary current I1 flow in a resistor to convert the current into the primary current detection voltage S6, and outputs this primary current detection voltage S6 to the voltage comparator circuit 106. Note that a waveform of the primary current detection voltage S6 is similar to the waveform of the primary current I1 (illustration is omitted).</p><p id="p0049" num="0049">Here, a resistance value of the primary current detection circuit 102 is denoted by R. Then, a voltage value Vpk1 of the primary current detection voltage S6 when the primary current I1 reaches the maximum value Ipk1 is expressed by the following expression (4).</p><p id="p0050" num="0050"><maths id="math0004" num="(4)"><math display="block"><mi>Vpk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>=</mo><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>×</mo><mi mathvariant="normal">R</mi></math><img id="ib0004" file="imgb0004.tif" wi="46" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0051" num="0051">The voltage comparator circuit 106 compares the primary current detection voltage S6 with the first reference voltage S2 so as to generate the reset signal S8. The reset signal S8 is high level if the primary current detection voltage S6 is higher than the first<!-- EPO <DP n="12"> --> reference voltage S2, and is low level if the primary current detection voltage S6 is not higher than the first reference voltage S2.</p><p id="p0052" num="0052">After the switching element 101 is turned on, if the primary current detection voltage S6 becomes higher than the first reference voltage S2, the reset signal S8 rises from low level to high level. The RS flip-flop 104 resets the switching control signal S9 to low level at the rising edge of the reset signal S8. The buffer circuit 103 amplifies the switching control signal S9 so as to send the result to the switching element 101. As a result, the switching element 101 is turned off. Therefore, both the primary current I1 and the primary current detection voltage S6 become zero value, and the reset signal S8 falls from high level to low level.</p><p id="p0053" num="0053">After that, when the set signal S7 generated by the oscillator circuit 105 is raised from low level to high level, the RS flip-flop 104 sets the switching control signal S9 to high level. The buffer circuit 103 amplifies the switching control signal S9 and sends the result to the switching element 101. As a result, the switching element 101 is turned on, and hence the primary current I1 starts to flow. From now on, operations similar to the above operations are repeated.</p><p id="p0054" num="0054">In synchronization with the above switching operation, the winding voltage S1 is generated at one end of the third winding 403. The winding voltage S1 rises rapidly when the secondary current I2 starts to flow, and then decreases gradually along with a decrease of the secondary current 12. When the secondary current I2 becomes zero, the winding voltage S1 drops rapidly and becomes an unstable state in which increase and decrease are repeated.</p><p id="p0055" num="0055">The secondary current time detection circuit 107 compares the winding voltage S1 with a predetermined threshold value voltage so as to generate the secondary current time detection signal S3. The secondary current time detection signal S3 is high level when the winding voltage S1 is lower than the predetermined threshold value voltage, and is low level when the winding voltage S1 is higher than the predetermined threshold value voltage. Therefore, the secondary current time detection signal S3 becomes low level in the period Tres during which the secondary current I2 is flowing.</p><p id="p0056" num="0056">The first multiplying circuit 108 outputs the multiplied voltage S4 proportional to the product of the duty ratio of the secondary current time detection signal S3 (namely, the on-duty ratio of the secondary current I2) and the first reference voltage S2 used as the reference voltage of the voltage comparator circuit 106 (namely, the maximum value Ipk1 of the primary current I1). When a voltage value of the first reference voltage S2 is denoted by Vm2, a voltage value Vp of the multiplied voltage S4 is expressed by the following expression (5).<!-- EPO <DP n="13"> --> Note that an internal circuit of the first multiplying circuit 108 will be described later.</p><p id="p0057" num="0057"><maths id="math0005" num="(5)"><math display="block"><mi>Vp</mi><mo>=</mo><mfenced separators=""><mi>Tres</mi><mo>/</mo><mi>Tc</mi></mfenced><mo>×</mo><mi>Vm</mi><mo>⁢</mo><mn>2</mn></math><img id="ib0005" file="imgb0005.tif" wi="56" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0058" num="0058">The error amplifier 109 amplifies a difference between the multiplied voltage S4 and the second reference voltage Vref so as to generate the error voltage S5. The error voltage S5 becomes high if the multiplied voltage S4 is lower than the second reference voltage Vref, and becomes low if the multiplied voltage S4 is higher than the second reference voltage Vref. If the multiplied voltage S4 is equal to the second reference voltage Vref, the error voltage S5 is maintained because the output current does not flow from the error amplifier 109.</p><p id="p0059" num="0059">In addition, an output portion of the error amplifier 109 includes a smoothing circuit. A time constant of the smoothing circuit is set to a value sufficiently larger than the period of the AC power supply 2. If the AC power supply 2 is a commercial power supply, its frequency is 50 to 60Hz, and therefore, its period is 16 to 20 ms. In this case, the time constant of the smoothing circuit incorporated in the output portion of the error amplifier 109 is preferably set to approximately 100 ms. By this setting of the time constant, the multiplied voltage S4 is smoothed in a time period longer than the period of the AC power supply 2. Therefore, the error voltage S5 becomes a substantially constant voltage value in one period of the AC power supply 2. In other words, the error amplifier 109 outputs the average value of the secondary current I2 averaged in one period of the AC power supply 2 as the error voltage S5. An internal circuit of the error amplifier 109 will be described later.</p><p id="p0060" num="0060">The second multiplying circuit 111 generates the first reference voltage S2 proportional to the product of the divided voltage V1' input from the voltage dividing circuit 300 and the error voltage S5 input from the error amplifier 109. Because the smoothing circuit having the time constant sufficiently larger than the period of the AC power supply 2 is incorporated in the output portion of the error voltage S5 as described above, the first reference voltage S2 generated by the second multiplying circuit 111 also becomes a substantially constant voltage value in one period of the AC power supply 2. Therefore, as the first reference voltage S2, a voltage proportional to the divided voltage V I' (therefore to the AC input voltage Vin) is output. Thus, feedback control is performed so that the average output current Iout of the switching power supply circuit 1 becomes constant.</p><p id="p0061" num="0061">Here, the first reference voltage S2 is used as the reference voltage of the voltage comparator circuit 106 and is also used as the input to the first multiplying circuit 108. If the average output current Iout in one period of the AC power supply 2 is larger than a predetermined target value, an average value of the multiplied voltage S4 (voltage value Vp)<!-- EPO <DP n="14"> --> in one period of the AC power supply 2 is higher than the second reference voltage Vref. Therefore, because a voltage value Veo of the error voltage S5 is lowered and the maximum value Ipk1 of the primary current I1 is controlled to be decreased, the average output current Iout is decreased. On the other hand, if the average output current Iout in one period of the AC power supply 2 is smaller than a predetermined target value, an average value of the multiplied voltage S4 (voltage value Vp) in one period of the AC power supply 2 becomes lower than the second reference voltage Vref. Therefore, because the voltage value Veo of the error voltage S5 is increased and the maximum value Ipk1 of the primary current I1 is controlled to be increased, the average output current Iout is increased. By this feedback control, the voltage value Vp of the multiplied voltage S4 converges to the second reference voltage Vref, and thus the average output current Iout converges to a predetermined target value.</p><p id="p0062" num="0062">Because the voltage value Vp of the multiplied voltage S4 converges to the second reference voltage Vref as described above, when the voltage value of the first reference voltage S2 is denoted by Vm2, the following expression (6) is satisfied.</p><p id="p0063" num="0063"><maths id="math0006" num="(6)"><math display="block"><mi>Vref</mi><mo>=</mo><mfenced separators=""><mi>Tres</mi><mo>/</mo><mi>Tc</mi></mfenced><mo>×</mo><mi>Vm</mi><mo>⁢</mo><mn>2</mn></math><img id="ib0006" file="imgb0006.tif" wi="57" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0064" num="0064">In addition, when a resistance value of the primary current detection circuit 102 is denoted by R, the following expression (7) is satisfied between the maximum value Ipk1 of the primary current I1 and the voltage value Vm2 of the first reference voltage S2.</p><p id="p0065" num="0065"><maths id="math0007" num="(7)"><math display="block"><mi>Ipk</mi><mo>⁢</mo><mn>1</mn><mo>×</mo><mi mathvariant="normal">R</mi><mo>=</mo><mi>Vm</mi><mo>⁢</mo><mn>2</mn></math><img id="ib0007" file="imgb0007.tif" wi="45" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0066" num="0066">Further, the following expression (8) is derived from the above expressions (6) and (7).</p><p id="p0067" num="0067"><maths id="math0008" num="(8)"><math display="block"><mi>Vref</mi><mo>=</mo><mfenced separators=""><mi>Tres</mi><mo>/</mo><mi>Tc</mi></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn>1</mn><mo>×</mo><mi mathvariant="normal">R</mi></math><img id="ib0008" file="imgb0008.tif" wi="62" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0068" num="0068">Therefore, based on the above expressions (3) and (8), the average output current Iout is expressed by the following expression (9).</p><p id="p0069" num="0069"><maths id="math0009" num="(9)"><math display="block"><mtable columnalign="left"><mtr><mtd><mi>Iout</mi></mtd><mtd><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">N</mi><mo>⁢</mo><mn>1</mn><mo>/</mo><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi>Tres</mi><mo>/</mo><mi>Tc</mi></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn>1</mn></mtd></mtr><mtr><mtd><mspace width="1em"/></mtd><mtd><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>/</mo><mi mathvariant="normal">N</mi><mo>⁢</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi>Vref</mi><mo>/</mo><mi mathvariant="normal">R</mi></mfenced></mtd></mtr></mtable></math><img id="ib0009" file="imgb0009.tif" wi="74" he="15" img-content="math" img-format="tif"/></maths></p><p id="p0070" num="0070">The right side of the above expression (9) is a constant value. In this way, the switching power supply circuit 1 monitors a waveform of the winding voltage S1 at one end of the third winding 403 included in the transformer 400 so as to detect the on-duty ratio of the secondary current I2, and it is possible to achieve a characteristic of constant average output current Iout regardless of load change (so-called constant current drooping characteristic) based on the detection result.</p><p id="p0071" num="0071">The above description is made about the case where the output current Iout is<!-- EPO <DP n="15"> --> averaged in one period of the AC power supply 2. In the following description, the average input current Iin is considered, which flows in the switching power supply circuit 1 in one period of the switching drive.</p><p id="p0072" num="0072">A drive period of the switching element 101 is denoted by Tc, and the on period of the switching element 101 is denoted by Ton. Then, the average input current Iin flowing in the switching power supply device 1 in one period of the switching drive is expressed by the following expression (10).</p><p id="p0073" num="0073"><maths id="math0010" num="(10)"><math display="block"><mi>Iin</mi><mo>=</mo><mfenced separators=""><mn>1</mn><mo>/</mo><mn>2</mn></mfenced><mo>×</mo><mi>Ipk</mi><mo>⁢</mo><mn>1</mn><mo>×</mo><mfenced separators=""><mi>Ton</mi><mo>/</mo><mi>Tc</mi></mfenced></math><img id="ib0010" file="imgb0010.tif" wi="63" he="9" img-content="math" img-format="tif"/></maths></p><p id="p0074" num="0074">The second multiplying circuit 111 generates the first reference voltage S2 proportional to the product of the divided voltage V1' input from the voltage dividing circuit 300 and the error voltage S5 input from the error amplifier 109. As described above, the output portion of the error voltage S5 includes the smoothing circuit having the time constant sufficiently larger than the period of the AC power supply 2. Therefore, the first reference voltage S2 generated in the second multiplying circuit 111 also becomes a substantially constant voltage value in one period of the AC power supply 2. Therefore, because a voltage proportional to the divided voltage V1' (namely to the AC input voltage Vin) is output as the first reference voltage S2, feedback control is performed so that the average output current Iout of the switching power supply circuit 1 becomes constant.</p><p id="p0075" num="0075">The maximum value Ipk1 of the primary current I1 is controlled to be equal to the first reference voltage S2. Therefore, the maximum value Ipk1 of the primary current I1 is proportional to the AC input voltage Vin. When a proportionality factor is denoted by α, the maximum value Ipk1 of the primary current I1 is expressed by the following expression (11).</p><p id="p0076" num="0076"><maths id="math0011" num="(11)"><math display="block"><mi>Ipk</mi><mo>⁢</mo><mn>1</mn><mo>=</mo><mi mathvariant="normal">α</mi><mo>×</mo><mi>Vin</mi></math><img id="ib0011" file="imgb0011.tif" wi="45" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0077" num="0077">In addition, when a primary inductance of the transformer 400 is denoted by L1, the maximum value Ipk1 of the primary current I1 is expressed by the following expression (12).</p><p id="p0078" num="0078"><maths id="math0012" num="(12)"><math display="block"><mi>Ipk</mi><mo>⁢</mo><mn mathvariant="normal">1</mn><mo>=</mo><mfenced separators=""><mi>Vin</mi><mo>×</mo><mi>Ton</mi></mfenced><mo>/</mo><mi mathvariant="normal">L</mi><mo>⁢</mo><mn mathvariant="normal">1</mn></math><img id="ib0012" file="imgb0012.tif" wi="57" he="8" img-content="math" img-format="tif"/></maths></p><p id="p0079" num="0079">Therefore, the following expression (13) is derived from the above expressions (11) and (12).</p><p id="p0080" num="0080"><maths id="math0013" num="(13)"><math display="block"><mi>Ton</mi><mo>=</mo><mi mathvariant="normal">α</mi><mo>×</mo><mi mathvariant="normal">L</mi><mo>⁢</mo><mn mathvariant="normal">1</mn></math><img id="ib0013" file="imgb0013.tif" wi="39" he="7" img-content="math" img-format="tif"/></maths></p><p id="p0081" num="0081">Further, the following expression (14) is derived from the above expressions (10), (11), and (13).</p><p id="p0082" num="0082"><maths id="math0014" num="(14)"><math display="block"><mi>Iin</mi><mo>=</mo><mfenced separators=""><mn mathvariant="normal">1</mn><mo>/</mo><mn mathvariant="normal">2</mn></mfenced><mo>×</mo><mfenced separators=""><mi mathvariant="normal">α</mi><mo>×</mo><mi>Vin</mi></mfenced><mo>×</mo><mfenced open="{" close="}" separators=""><mfenced separators=""><mi mathvariant="normal">α</mi><mo>×</mo><mi mathvariant="normal">L</mi><mo>⁢</mo><mn mathvariant="normal">1</mn></mfenced><mo>/</mo><mi>Tc</mi></mfenced><mo>=</mo><mi mathvariant="normal">β</mi><mo>×</mo><mi>Vin</mi></math><img id="ib0014" file="imgb0014.tif" wi="93" he="8" img-content="math" img-format="tif"/></maths><br/>
(Here, β=(1/2)×(L1/Tc)×α×α holds.)<!-- EPO <DP n="16"> --></p><p id="p0083" num="0083">It is understood from the above expression (14) that the average input current Iin flowing in the switching power supply device 1 in one period of the switching drive is proportional to the AC input voltage Vin. Therefore, viewing from the AC power supply 2 side, the switching power supply circuit 1 looks like a pure resistor. Therefore, it is possible to achieve a high power factor.</p><p id="p0084" num="0084">In addition, if the switching power supply circuit 1 of this structural example is used as a power supply of the LED lighting device for performing constant current drive of the LED 3 with power supply from the AC power supply 2, it is possible to perform the constant current drive of the LED 3 and thus to suppress a variation of luminance of the LED lighting device, even if the AC input voltage Vin changes or if Vf (forward drop voltage) of the LED 3 changes. In addition, the switching power supply circuit 1 of this structural example can achieve a higher power factor than the conventional one, and it is possible to suppress a power loss in a power supply system from a power station to a terminal product and to suppress noise jamming to other devices.</p><heading id="h0010">&lt;Secondary current time detection circuit&gt;</heading><p id="p0085" num="0085"><figref idrefs="f0003">Fig. 3</figref> is a circuit diagram illustrating a structural example of the secondary current time detection circuit 107. The secondary current time detection circuit 107 of this structural example includes resistors A1 and A2, a comparator A3, and a DC voltage source A4. A first end of the resistor A1 is connected to an application end of the winding voltage S 1. A second end of the resistor A1 and a first end of the resistor A2 are connected to each other. A second end of the resistor A2 is connected to the ground end. An inverting input terminal (-) of the comparator A3 is connected to a connection node between the resistor A1 and the resistor A2 (application end of the divided voltage Vx corresponding to the winding voltage S1). A non-inverting input terminal (+) of the comparator A3 is connected to a positive electrode end of the DC voltage source A4 (application end of a threshold value voltage Vy). A negative electrode end of the DC voltage source A4 is connected to the ground end. An output end of the comparator A3 is connected to an application end of the secondary current time detection signal S3.</p><p id="p0086" num="0086">The comparator A3 compares the divided voltage Vx with the threshold value voltage Vy so as to generate the secondary current time detection signal S3. The secondary current time detection signal S3 becomes low level when the divided voltage Vx is higher than the threshold value voltage Vy (when the winding voltage S1 is higher than a predetermined value), and becomes high level when the divided voltage Vx is lower than the threshold value voltage Vy (when the winding voltage S1 is lower than the predetermined value) (see <figref idrefs="f0002">Fig. 2</figref>).<!-- EPO <DP n="17"> --></p><p id="p0087" num="0087">In this way, the secondary current time detection circuit 107 utilizes the fact that the winding voltage S1 is generated in the third winding 403 of the transformer 400 in the period during which the secondary current 12 is flowing in the second winding 402 of the transformer 400, so as to detect a time period during which the secondary current 12 is flowing.</p><heading id="h0011">&lt;First multiplying circuit&gt;</heading><p id="p0088" num="0088"><figref idrefs="f0004">Fig. 4</figref> is a block diagram illustrating a structural example of the first multiplying circuit 108. The first multiplying circuit 108 of this structural example includes a buffer circuit B1, a chopping circuit B2, and a smoothing circuit B3.</p><p id="p0089" num="0089">The buffer circuit B1 generates a first reference voltage S2' obtained by amplifying the current capability of the first reference voltage S2 (voltage value Vm2), and outputs this first reference voltage S2' to the chopping circuit B2.</p><p id="p0090" num="0090">The chopping circuit B2 includes an N-channel MOS field effect transistor B21 and a resistor B22 as illustrated in <figref idrefs="f0005">Fig. 5</figref>. A drain of the transistor B21 is connected to an application end of the chopping voltage Sx and is also connected to an application end of the first reference voltage S2' via the resistor B22. A source and a back gate of the transistor B21 are connected to the ground end. A gate of the transistor B21 is connected to an application end of the secondary current time detection signal S3.</p><p id="p0091" num="0091">A resistance value of the resistor B22 should be set to a value smaller than or equal to 1 /10 of the input impedance of the smoothing circuit B3. If the secondary current time detection signal S3 is high level, the transistor B21 is turned on, and the chopping voltage Sx becomes low level (0 V). On the other hand, if the secondary current time detection signal S3 is low level, the transistor B21 is turned off, and the chopping voltage Sx becomes high level (Vm2). Therefore, the chopping voltage Sx becomes a rectangular wave corresponding to the secondary current time detection signal S3 as illustrated in <figref idrefs="f0006">Fig. 6</figref>.</p><p id="p0092" num="0092">The smoothing circuit B3 smoothes (averages) the chopping voltage Sx like a rectangular wave so as to generate the multiplied voltage S4. As the smoothing circuit B3, it is possible to use a low-pass filter constituted of a resistor, a capacitor, and the like. As illustrated in <figref idrefs="f0006">Fig. 6</figref>, the multiplied voltage S4 increases slowly during a low level period of the secondary current time detection signal S3, and decreases slowly during a high level period of the secondary current time detection signal S3. As the time constant of the smoothing circuit B3 is larger, the change of the multiplied voltage S4 becomes slower, and thus a voltage waveform similar to a direct current is obtained. It is preferred that the time constant of the smoothing circuit B3 should have a value larger than or equal to ten times the period of the switching drive (period of the set signal S7 generated by oscillator circuit 105).<!-- EPO <DP n="18"> --></p><p id="p0093" num="0093">As described above, the first multiplying circuit 108 performs the chopping process of the first reference voltage S2 in accordance with a logical level of the secondary current time detection signal S3 so as to generate the chopping voltage Sx like a rectangular wave, and further smoothes the chopping voltage Sx so as to generate the multiplied voltage S4. By this internal operation, the first multiplying circuit 108 outputs the multiplied voltage S4 proportional to the product of the duty ratio of the secondary current time detection signal S3 (namely, the on-duty ratio of the secondary current I2) and the first reference voltage S2 used as the reference voltage of the voltage comparator circuit 106 (namely, the maximum value Ipk1 of the primary current I1). Note that the voltage value Vp of the multiplied voltage S4 is calculated by the above expression (5) (Vp=(Tres/Tc)×Vm2).</p><heading id="h0012">&lt;Error amplifier&gt;</heading><p id="p0094" num="0094"><figref idrefs="f0007">Fig. 7</figref> is a block diagram illustrating a structural example of the error amplifier 109. The error amplifier 109 of this structural example includes a voltage comparator circuit C1 and a smoothing circuit C2.</p><p id="p0095" num="0095">The voltage comparator circuit C1 compares the multiplied voltage S4 with the second reference voltage Vref so as to generate a comparison voltage Sy. The comparison voltage Sy becomes low level when the multiplied voltage S4 is higher than the second reference voltage Vref, and becomes high level when the multiplied voltage S4 is lower than the second reference voltage Vref.</p><p id="p0096" num="0096">The smoothing circuit C2 smoothes (averages) the comparison voltage Sy so as to generate the error voltage S5. As the smoothing circuit C2, it is possible to use a low-pass filter constituted of a resistor, a capacitor, and the like. It is preferred that the time constant of the smoothing circuit C2 should have a value larger than or equal to ten times the period of the switching drive (period of the set signal S7 generated by oscillator circuit 105). By this setting of the time constant, it is possible to reduce a ripple component of the error voltage S5 to a level causing no problem for practical use.</p><heading id="h0013">&lt;Second multiplying circuit&gt;</heading><p id="p0097" num="0097"><figref idrefs="f0008">Fig. 8</figref> is a circuit diagram illustrating a first structural example of the second multiplying circuit 111. The second multiplying circuit 111 of the first structural example includes a P-channel MOS field effect transistor D1, an N-channel MOS field effect transistor D2, a comparator D3, a triangular wave generation circuit D4, a resistor D5, and a capacitor D6.</p><p id="p0098" num="0098">A source and a back gate of the transistor D1 are both connected to an application end of the divided voltage V1'. A source and a back gate of the transistor D2 are both<!-- EPO <DP n="19"> --> connected to the ground end. Drains of the transistors D1 and D2 are both connected to a first end of the resistor D5. Gates of the transistors D1 and D2 are both connected to an output end of the comparator D3. An inverting input terminal (-) of the comparator D3 is connected to an application end of the error voltage S5. A non-inverting input terminal (+) of the comparator D3 is connected to the triangular wave generation circuit D4. A second end of the resistor D5 is connected to an application end of the first reference voltage S2 and is also connected to the ground end via the capacitor D6.</p><p id="p0099" num="0099">It is desirable to set the oscillation frequency of the triangular wave generation circuit D4 to a value larger than or equal to ten times the switching frequency (frequency of the set signal S7 generated by the oscillator circuit 105). A peak value of a triangular wave voltage Sa is set to be lower than the maximum value of the error voltage S5. A lowest voltage of the triangular wave voltage Sa is set to 0 V.</p><p id="p0100" num="0100">The comparator D3 compares the error voltage S5 with a triangular wave voltage Sat so as to generate a comparison signal Sb. The comparison signal Sb becomes low level when the error voltage S5 is higher than the triangular wave voltage Sa, and becomes high level when the error voltage S5 is lower than triangular wave voltage Sa. Therefore, as the error voltage S5 is higher, the duty ratio of the comparison signal Sb (ratio of the high level period in one period) becomes smaller. On the contrary, as the error voltage S5 is lower, the duty ratio of the comparison signal Sb becomes larger. In other words, the duty ratio of the comparison signal Sb is modulated so as to be inversely proportional to the voltage value of the error voltage S5 by pulse width modulation (PWM).</p><p id="p0101" num="0101">The transistors D1 and D2 correspond to first and second switches that are connected in series between the application end of the divided voltage V1 and the ground end, and are turned on and off exclusively in accordance with a logical level of the comparison signal Sb. The transistors D1 and D2 function as the chopping circuit that generates a chopping voltage Sc driven by pulse between the divided voltage V1' and the ground voltage (logically inverted signal of the comparison signal Sb). If the comparison signal Sb is high level, the transistor D1 is turned off, and the transistor D2 is turned on. Therefore, the chopping voltage Sc becomes low level (0 V). On the other hand, if the comparison signal Sb is low level, the transistor D1 is turned on, and the transistor D2 is turned off. Therefore, the chopping voltage Sc becomes high level (V1'). By this operation, the divided voltage V1' is chopped in accordance with a logical level of the comparison signal Sb, and the chopping voltage Sc like a rectangular wave is generated from the connection node of the transistors D1 and D2. Therefore, the chopping voltage Sc has a voltage value according to a product of the<!-- EPO <DP n="20"> --> divided voltage V1' and the error voltage S5 (value that is further decreased from the divided voltage V1' in proportion to the error voltage S5).</p><p id="p0102" num="0102">The resistor D5 and the capacitor D6 constitute the low-pass filter, which smoothes (averages) the chopping voltage Sc like a rectangular wave so as to generate the first reference voltage S2. It is preferred that the time constant of the low-pass filter should have a value more than or equal to ten times the oscillation period of the triangular wave generation circuit D4.</p><p id="p0103" num="0103"><figref idrefs="f0009">Fig. 9</figref> is a circuit diagram illustrating a second structural example of the second multiplying circuit 111. The second structural example has substantially the same structure as the first structural example described above, in which the transistor D1 is removed from the components described in the first structural example. In other words, in the second structural example, the application end of the divided voltage V1 is directly connected to the drain of the transistor D2 without using the transistor D1. Note that the second structural example has the structure suitable for the case where the voltage dividing circuit 300 is formed using a resistor ladder.</p><p id="p0104" num="0104">The transistor D2 functions as a chopping circuit that makes and breaks the connection between the application end of the divided voltage V1 and the ground end so as to generate the chopping voltage Sc. If the comparison signal Sb is high level, the transistor D2 is turned on. Therefore, the chopping voltage Sc becomes low level (0 V). On the other hand, if the comparison signal Sb is low level, the transistor D2 is turned off. Therefore, the chopping voltage Sc becomes high level (V1'). By this operation, the divided voltage V1' is chopped in accordance with a logical level of the comparison signal Sb so that the chopping voltage Sc like a rectangular wave is generated. Therefore, the chopping voltage Sc has a voltage value corresponding to the product of the divided voltage V1' and the error voltage S5 similarly to the first structural example.</p><heading id="h0014">&lt;Oscillator circuit&gt;</heading><p id="p0105" num="0105"><figref idrefs="f0010">Fig. 10</figref> is a circuit diagram illustrating a structural example of the oscillator circuit 105. The oscillator circuit 105 of this structural example includes an N-channel MOS field effect transistor E1, a hysteresis comparator (Schmitt trigger) E2, a triangular wave generation circuit E3, a constant current circuit E4, a resistor E5, and a capacitor E6.</p><p id="p0106" num="0106">A drain of the transistor E1 is connected to an input end of the hysteresis comparator E2. A source and a back gate of the transistor E1 are both connected to the ground end. A gate of the transistor E1 is connected to an output end of the hysteresis comparator E2 and an application end of the set signal S7. A first end of the capacitor E6 is<!-- EPO <DP n="21"> --> connected to the input end of the hysteresis comparator E2. A second end of the capacitor E6 is connected to the ground end. The constant current circuit E4 is connected between a power supply end and the first end of the capacitor E6. The resistor E5 and the triangular wave generation circuit E3 are connected in series between the input end of the hysteresis comparator E2 and the ground end.</p><p id="p0107" num="0107">The constant current circuit E4 generates charging current of the capacitor E6. The hysteresis comparator E2 compares a charging voltage Vz at the first end of the capacitor E6 with an internal threshold value voltage Vhys so as to generate the set signal S7. The set signal S7 becomes high level when the charging voltage Vz is higher than the internal threshold value voltage Vhys, and becomes low level when the charging voltage Vz is lower than the internal threshold value voltage Vhys. The transistor E1 functions as a discharge switch that makes and breaks the connection between both ends of the capacitor E6. The transistor E1 is turned on to make the connection between both ends of the capacitor E6 when the set signal S7 is high level, and is tuned off to break the connection between both ends of the capacitor E6 when the set signal S7 is low level.</p><p id="p0108" num="0108">A basic oscillation operation of the oscillator circuit 105 is described. If the set signal S7 is low level, the transistor E1 is turned off so that the connection between the both ends of the capacitor E6 is broken. Therefore, the capacitor E6 is charged by the constant current circuit E4 so that the charging voltage Vz is gradually increased. After that, when the charging voltage Vz becomes larger than the internal threshold value voltage Vhys of the hysteresis comparator E2, the set signal S7 is raised from low level to high level. As a result, the transistor E1 is turned on, and the both ends of the capacitor E6 are connected. Therefore, the capacitor E6 is discharged by the transistor E1 so that the charging voltage Vz is reset to 0 V. By repeating this operation, pulse oscillation of the set signal S7 is continued. In other words, the transistor E1, the hysteresis comparator E2, the constant current circuit E4, and the capacitor E6 correspond to a charge/discharge circuit that utilizes a charge/discharge operation of the capacitor E6 charged by constant current generate by the constant current circuit E4, so as to generate the set signal S7.</p><p id="p0109" num="0109">In addition, the oscillator circuit 105 has a function of performing frequency modulation (FM) on the oscillation frequency of the set signal S7 so as to break up the spectrum of the oscillation frequency for suppressing peak power of a switching noise generated from the switching power supply circuit I (so-called frequency jitter function). In the oscillator circuit 105, a triangular wave voltage Vt generated by the triangular wave generation circuit E3 is applied to the first end of the capacitor E6 via the resistor E5. The<!-- EPO <DP n="22"> --> resistor E5 corresponds to a voltage adding resistor that generates the triangular wave voltage Vt to be added to the charging voltage Vz of the capacitor E6. Therefore, charging speed (voltage increasing speed) of the charging voltage Vz changes in accordance with the triangular wave voltage Vt. Specifically, as the triangular wave voltage Vt is higher, the charging speed of the charging voltage Vz becomes higher. On the contrary, as the triangular wave voltage Vt is lower, the charging speed of the charging voltage Vz becomes lower. In other words, as the triangular wave voltage Vt is higher, charging time until the charging voltage Vz reaches the internal threshold value voltage Vhys becomes shorter. On the contrary, as the triangular wave voltage Vt is lower, the charging time until the charging voltage Vz reaches the internal threshold value voltage Vhys becomes longer. A voltage value of the triangular wave voltage Vt changes at a predetermined oscillation period. Therefore, the oscillation frequency of the set signal S7 is modulated in accordance with the triangular wave voltage Vt by FM modulation. Note that an oscillation frequency of the triangular wave oscillator circuit E3 should be set to 1 to 10 kHz. In addition, a resistance value of the resistor E5 should be adjusted so that a frequency deviation becomes 9 kHz or higher.</p><heading id="h0015">&lt;Summary&gt;</heading><p id="p0110" num="0110">In the following description, various technical features disclosed in this specification are summarized.</p><p id="p0111" num="0111">The switching power supply circuit disclosed in this specification includes a full-wave rectification circuit that performs full-wave rectification of an AC input voltage so as to generate a primary voltage, a transformer that transforms the primary voltage into a secondary voltage utilizing electromagnetic induction between first and second isolated windings, a rectifying and smoothing circuit that generates a DC output voltage from the secondary voltage so as to supply the DC output voltage to a load, a primary current control circuit that performs on/off control of primary current based on a result of comparison between a primary current detection voltage corresponding to the primary current flowing in the first winding and a first reference voltage, and a reference voltage correction circuit for monitoring an on-duty ratio of secondary current flowing in the second winding so as to correct the first reference voltage (first structure).</p><p id="p0112" num="0112">Note that in the switching power supply circuit having the first structure described above, it is preferred to adopt a structure in which the transformer includes a third winding besides the first winding and the second winding, and the reference voltage correction circuit includes a secondary current time detection circuit that monitors a winding voltage in the third<!-- EPO <DP n="23"> --> winding so as to output a secondary current time detection signal corresponding to an on-duty ratio of the secondary current, a first multiplying circuit that multiplies the secondary current time detection signal by the first reference voltage so as to generate a multiplied voltage, an error amplifier that generates an error voltage corresponding to a difference between the multiplied voltage and the second reference voltage, a voltage dividing circuit that divides the primary voltage so as to generate a divided voltage, and a second multiplying circuit that multiplies the divided voltage by the error voltage so as to generate the first reference voltage (second structure).</p><p id="p0113" num="0113">In addition, in the switching power supply circuit having the second structure described above, it is preferred to adopt a structure in which the primary current control circuit includes a switching element connected to the first winding, a primary current detection circuit that generates a primary current detection voltage corresponding to the primary current, an oscillator circuit that generates a set signal driven by pulse at a predetermined switching frequency, a voltage comparator circuit that compares the primary current detection voltage with the first reference voltage so as to generate a reset signal, an RS flip-flop that generates a switching control signal based on the set signal and the reset signal, and a buffer circuit that amplifies current capability of the switching control signal so as to output the result to the switching element (third structure).</p><p id="p0114" num="0114">In addition, in the switching power supply circuit having the third structure described above, it is preferred to adopt a structure in which the first multiplying circuit includes a chopping circuit that performs a chopping process on the first reference voltage in accordance with a logical level of the secondary current time detection signal so as to generate a chopping voltage, and a smoothing circuit that smoothes the chopping voltage so as to generate the multiplied voltage (fourth structure).</p><p id="p0115" num="0115">In addition, in the switching power supply circuit having the fourth structure described above, it is preferred to adopt a structure in which the chopping circuit includes a switch that is connected between an application end of the chopping voltage and the ground end, and is controlled to be turned on and off in accordance with the secondary current time detection signal; and a resistor connected between an application end of the first reference voltage and the application end of the chopping voltage (fifth structure).</p><p id="p0116" num="0116">In addition, in the switching power supply circuit having the third structure described above, it is preferred to adopt a structure in which the second multiplying circuit includes a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency, a comparator that compares the error voltage with the<!-- EPO <DP n="24"> --> triangular wave voltage so as to generate a comparison signal, a chopping circuit that performs a chopping process on the divided voltage in accordance with a logical level of the comparison signal so as to generate a chopping voltage obtained by chopping the divided voltage like a rectangular wave, and a smoothing circuit that smoothes the chopping voltage so as to generate the first reference voltage (sixth structure).</p><p id="p0117" num="0117">In addition, in the switching power supply circuit having the sixth structure described above, it is preferred to adopt a structure in which the chopping circuit includes a first switch and a second switch that are connected in series between an application end of the divided voltage and the ground end and are exclusively turned on and off in accordance with a logical level of the comparison signal, and the chopping voltage is output from a connection node of the first switch and the second switch (seventh structure).</p><p id="p0118" num="0118">In addition, in the switching power supply circuit having the sixth structure described above, it is preferred to adopt a structure in which the voltage dividing circuit is formed using a resistor ladder, the chopping circuit includes a first switch connected between an application end of the divided voltage and the ground end, and the first switch is turned on and off in accordance with the comparison signal so that the chopping voltage is output from an application end of the divided voltage (eighth structure).</p><p id="p0119" num="0119">In addition, in the switching power supply circuit having the third structure described above, it is preferred to adopt a structure in which the oscillator circuit includes a charge/discharge circuit that generates the set signal using a charge/discharge operation of a capacitor charged by constant current, a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency, and a voltage adding resistor that generates a triangular wave voltage to be added to a charging voltage of the capacitor (ninth structure).</p><p id="p0120" num="0120">In addition, an LED lighting device according to the present invention includes an LED, and a switching power supply circuit that generates a DC output voltage from an AC input voltage supplied from an AC power supply and supplies the DC output voltage to the LED, having any one of the above-mentioned first to ninth structures (tenth structure).</p><p id="p0121" num="0121">In addition, a semiconductor device according to the present invention has an integrated structure including a primary current control circuit that performs on/off control of primary current based on a result of comparison between a primary current detection voltage corresponding to the primary current flowing in a first winding and a first reference voltage, in a transformer that transforms a primary voltage to a secondary voltage using electromagnetic induction between isolated first and second windings, and a reference voltage correction circuit<!-- EPO <DP n="25"> --> for monitoring an on-duty ratio of secondary current flowing in the second winding so as to correct the first reference voltage (eleventh structure).</p><p id="p0122" num="0122">Note that in the semiconductor device having the eleventh structure described above, it is preferred to adopt a structure in which the reference voltage correction circuit includes a secondary current time detection circuit that monitors a winding voltage in the third winding of the transformer so as to output a secondary current time detection signal corresponding to an on-duty ratio of the secondary current, a first multiplying circuit that multiplies the secondary current time detection signal by the first reference voltage so as to generate a multiplied voltage, an error amplifier that generates an error voltage corresponding to a difference between the multiplied voltage and the second reference voltage, and a second multiplying circuit that multiplies a divided voltage obtained by dividing the primary voltage by the error voltage so as to generate the first reference voltage (twelfth structure).</p><p id="p0123" num="0123">In addition, in the semiconductor device having the twelfth structure described above, it is preferred to adopt a structure in which the primary current control circuit includes a switching element connected to the first winding, a primary current detection circuit that generates a primary current detection voltage corresponding to the primary current, an oscillator circuit that generates a set signal driven by pulse at a predetermined switching frequency, a voltage comparator circuit that compares the primary current detection voltage with the first reference voltage so as to generate a reset signal, an RS flip-flop that generates a switching control signal based on the set signal and the reset signal, and a buffer circuit that amplifies current capability of the switching control signal so as to output the result to the switching element (thirteenth structure).</p><p id="p0124" num="0124">In addition, in the semiconductor device having the thirteenth structure described above, it is preferred to adopt a structure in which the first multiplying circuit includes a chopping circuit that performs a chopping process on the first reference voltage in accordance with a logical level of the secondary current time detection signal so as to generate a chopping voltage, and a smoothing circuit that smoothes the chopping voltage so as to generate the multiplied voltage (fourteenth structure).</p><p id="p0125" num="0125">In addition, in the semiconductor device having the fourteenth structure described above, it is preferred to adopt a structure in which the chopping circuit includes a switch that is connected between an application end of the chopping voltage and the ground end, and is controlled to be turned on and off in accordance with the secondary current time detection signal; and a resistor connected between an application end of the first reference voltage and the application end of the chopping voltage (fifteenth structure).<!-- EPO <DP n="26"> --></p><p id="p0126" num="0126">In addition, in the semiconductor device having the thirteenth structure described above, it is preferred to adopt a structure in which the second multiplying circuit includes a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency, a comparator that compares the error voltage with the triangular wave voltage so as to generate a comparison signal, a chopping circuit that performs a chopping process on the divided voltage in accordance with a logical level of the comparison signal so as to generate the chopping voltage, and a smoothing circuit that smoothes the chopping voltage so as to generate the first reference voltage (sixteenth structure).</p><p id="p0127" num="0127">In addition, in the semiconductor device having the sixteenth structure described above, it is preferred to adopt a structure in which the chopping circuit includes a first switch and a second switch connected in series between an application end of the divided voltage and the ground end, and the first switch and the second switch are exclusively turned on and off in accordance with the comparison signal so that the chopping voltage is output from a connection node of the first switch and the second switch (seventeenth structure).</p><p id="p0128" num="0128">In addition, in the semiconductor device having the sixteenth structure described above, it is preferred to adopt a structure in which the chopping circuit includes a first switch connected between an application end of the divided voltage and the ground end, and the first switch is turned on and off in accordance with the comparison signal so that the chopping voltage is output from an application end of the divided voltage (eighteenth structure).</p><p id="p0129" num="0129">In addition, in the semiconductor device having the thirteenth structure described above, it is preferred to adopt a structure in which the oscillator circuit includes a charge/discharge circuit that generates the set signal using a charge/discharge operation of a capacitor charged by constant current, a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency, and a voltage adding resistor that adds the triangular wave voltage to a charging voltage of the capacitor (nineteenth structure).</p><p id="p0130" num="0130">In addition, the LED lighting device according to the present invention includes an LED, a full-wave rectification circuit that performs full-wave rectification of an AC input voltage so as to generate a primary voltage, a transformer that transforms the primary voltage into a secondary voltage utilizing electromagnetic induction between first and second isolated windings, a rectifying and smoothing circuit that generates a DC output voltage from the secondary voltage and supplies the DC output voltage to the LED, a voltage dividing circuit that divides the primary voltage so as to generate a divided voltage, and the semiconductor device having any one of the above-mentioned eleventh to nineteenth structures (twentieth<!-- EPO <DP n="27"> --> structure).</p><heading id="h0016">&lt;Effects&gt;</heading><p id="p0131" num="0131">Using the technique disclosed in this specification, it is possible to provide the switching power supply circuit that can achieve a higher power factor than the conventional one while maintaining current flowing in the load to be constant, and the semiconductor device used for the switching power supply circuit, and the LED lighting device using them.</p><p id="p0132" num="0132">In other words, the switching power supply circuit disclosed in this specification can achieve constant current characteristics without causing a drop of output current even if the input voltage is dropped. In addition, the switching power supply circuit disclosed in this specification can achieve a high power factor by one switching element so as to contribute to lower cost of the switching power supply circuit. In addition, the switching power supply circuit disclosed in this specification can realize a high power factor so that losses in an electric power transmission line can be reduced and that noise jamming to other devices can be suppressed.</p><p id="p0133" num="0133">Note that in order to achieve a high power factor, in general, two electric power conversion systems are necessary, which includes a power factor improving circuit using a step-up converter or passive components for improving the power factor, and a voltage conversion circuit for generating DC voltage from AC voltage (so-called two-converter system). In contrast, the switching power supply circuit disclosed in this specification adopts a system in which the power factor improving function is incorporated (one-converter system) so that a smaller size and lower cost of the system can be achieved.</p><heading id="h0017">&lt;Industrial applicability&gt;</heading><p id="p0134" num="0134">The switching power supply circuit disclosed in this specification can maintain output current flowing in the load to be constant while achieving a high power factor than the conventional one. Therefore, the switching power supply circuit disclosed in this specification can be used appropriately as a power supply for a load driving device that performs constant current drive of the load by being supplied with electric power from a commercial AC power supply (for example, an LED lighting device).</p><heading id="h0018">&lt;Other variations&gt;</heading><p id="p0135" num="0135">Note that in the embodiments described above, there are described examples of the structure in which the present invention is applied to the switching power supply circuit that is used as the power supply for the LED lighting device. However, applications of the present invention are not limited to this. The present invention can be widely applied to switching power supply circuits for other applications.<!-- EPO <DP n="28"> --></p><heading id="h0019">LIST OF REFERENCE NUMERALS</heading><p id="p0136" num="0136"><dl id="dl0001"><dt>1</dt><dd>switching power supply circuit</dd><dt>2</dt><dd>AC power supply</dd><dt>3</dt><dd>load (LED)</dd><dt>100</dt><dd>semiconductor device</dd><dt>101</dt><dd>switching element</dd><dt>102</dt><dd>primary current detection circuit</dd><dt>103</dt><dd>buffer circuit</dd><dt>104</dt><dd>RS flip-flop</dd><dt>105</dt><dd>oscillator circuit</dd><dt>106</dt><dd>voltage comparator circuit</dd><dt>107</dt><dd>secondary current time detection circuit</dd><dt>108</dt><dd>first multiplier circuit</dd><dt>109</dt><dd>error amplifier</dd><dt>110</dt><dd>reference voltage source</dd><dt>111</dt><dd>second multiplier circuit</dd><dt>200</dt><dd>full-wave rectification circuit</dd><dt>300</dt><dd>voltage dividing circuit</dd><dt>400</dt><dd>transformer</dd><dt>401</dt><dd>first winding</dd><dt>402</dt><dd>second winding</dd><dt>403</dt><dd>third winding</dd><dt>500</dt><dd>rectifying and smoothing circuit</dd><dt>A1, A2</dt><dd>resistor</dd><dt>A3</dt><dd>comparator</dd><dt>A4</dt><dd>DC voltage source</dd><dt>B1</dt><dd>buffer circuit<!-- EPO <DP n="29"> --></dd><dt>B2</dt><dd>chopping circuit</dd><dt>B21</dt><dd>N-channel MOS field effect transistor</dd><dt>B22</dt><dd>resistor</dd><dt>B3</dt><dd>smoothing circuit</dd><dt>C1</dt><dd>voltage comparator circuit</dd><dt>C2</dt><dd>smoothing circuit</dd><dt>D1</dt><dd>P-channel MOS field effect transistor</dd><dt>D2</dt><dd>N-channel MOS field effect transistor</dd><dt>D3</dt><dd>comparator</dd><dt>D4</dt><dd>triangular wave generation circuit</dd><dt>D5</dt><dd>resistor</dd><dt>D6</dt><dd>capacitor</dd><dt>E1</dt><dd>N-channel MOS field effect transistor</dd><dt>E2</dt><dd>hysteresis comparator</dd><dt>E3</dt><dd>triangular wave generation circuit</dd><dt>E4</dt><dd>constant current circuit</dd><dt>E5</dt><dd>resistor</dd><dt>E6</dt><dd>capacitor</dd></dl></p></description><claims mxw-id="PCLM56977697" lang="DE" load-source="patent-office"><!-- EPO <DP n="33"> --><claim id="c-de-01-0001" num="0001"><claim-text>Schalt-Stromversorgungsschaltkreis (1),<br/>
mit:
<claim-text>einem Vollweggleichrichtungsschaltkreis (200), welcher eine Vollweggleichrichtung einer AC-Eingangsspannung (Vin) ausführt, um eine Primärspannung (V1) zu erzeugen,</claim-text>
<claim-text>einem Transformator (400), der unter Verwendung elektromagnetischer Induktion zwischen ersten und zweiten isolierten Wicklungen (401, 402) die Primärspannung (V1) in eine Sekundärspannung (V2) transformiert,</claim-text>
<claim-text>einem Gleichrichtungs- und Glättungsschaltkreis (500), welcher aus der Sekundärspannung (V2) eine DC-Ausgabespannung (Vout) erzeugt, um die DC-Ausgabespannung einer Last (3) zuzuführen, und</claim-text>
<claim-text>einem Primärstromsteuerschaltkreis (101 - 106), welcher eine An/Aus-Steuerung eines Primärstroms (I1) auf der Grundlage eines Ergebnisses eines Vergleichs zwischen einer Primärstromdetektionsspannung (S6), welche zu dem in der ersten Wicklung fließenden Primärstrom korrespondiert, und einer ersten Referenzspannung (S2) ausführt,</claim-text>
<claim-text><b>dadurch gekennzeichnet,</b></claim-text>
<claim-text><b>dass</b> der Schalt-Stromversorgungsschaltkreis (1) des Weiteren einen Referenzspannungskorrekturschaltkreis (107 - 111) zum Überwachen eines Ein-Schaltzeitverhältnisses eines in der zweiten Wicklung fließenden Sekundärstroms (I2) aufweist, um die erste Referenzspannung (S2) zu korrigieren.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 1,<br/>
wobei der Transformator (400) neben der ersten Wicklung und der zweiten Wicklung eine dritte Wicklung aufweist, und<br/>
wobei der Referenzspannungskorrekturschaltkreis (107 - 111) aufweist:
<claim-text>einen Sekundärstromzeitdetektionsschaltkreis, welcher eine Wicklungsspannung in der dritten Wicklung überwacht, um ein Sekundärstromzeitdetektionssignal korrespondierend zu einem Ein-Schaltzeitverhältnis des Sekundärstroms auszugeben,<!-- EPO <DP n="34"> --></claim-text>
<claim-text>einen ersten Multiplizierschaltkreis, welcher das Sekundärstromzeitdetektionssignal mit der ersten Referenzspannung multipliziert, um eine multiplizierte Spannung zu erzeugen,</claim-text>
<claim-text>einen Fehlerverstärker, welcher eine Fehlerspannung korrespondierend zu einer Differenz zwischen der multiplizierten Spannung und der zweiten Referenzspannung erzeugt,</claim-text>
<claim-text>einen Spannungsteilungsschaltkreis, welcher die Primärspannung (V1) teilt, um eine geteilte Spannung zu erzeugen, und</claim-text>
<claim-text>einen zweiten Multiplizierschaltkreis, welcher die geteilte Spannung mit der Fehlerspannung multipliziert, um die erste Referenzspannung zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 1,<br/>
wobei der Primärstromsteuerschaltkreis (101 - 106) aufweist:
<claim-text>ein an die erste Wicklung angeschlossenes Schaltelement,</claim-text>
<claim-text>einen Primärstromdetektionsschaltkreis, welcher eine zum Primärstrom korrespondierende Primärstromdetektionsspannung erzeugt,</claim-text>
<claim-text>einen Oszillatorschaltkreis, welcher ein pulsgesteuertes Einstellsignal mit einer bestimmten Schaltfrequenz erzeugt,</claim-text>
<claim-text>einen Spannungskomparatorschaltkreis, welcher die Primärstromdetektionsspannung mit der ersten Referenzspannung vergleicht, um ein Rücksetzsignal zu erzeugen,</claim-text>
<claim-text>ein RS-Flipflop, welches auf der Grundlage des Einstellsignals und des Rücksetzsignals ein Schaltsteuersignal erzeugt, und</claim-text>
<claim-text>einen Pufferschaltkreis, welcher die Belastbarkeit des Schaltsteuersignals verstärkt, um das Ergebnis an das Schaltelement auszugeben.</claim-text></claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 3,<br/>
wobei der erste Multiplikationsschaltkreis aufweist:
<claim-text>einen Taktschaltkreis, welcher einen Taktvorgang auf der ersten Referenzspannung gemäß einem Logikpegel des Sekundärstromzeitdetektionssignals ausführt, um eine Taktspannung zu erzeugen, und</claim-text>
<claim-text>einen Glättungsschaltkreis, welcher die Taktspannung glättet, um die multiplizierte Spannung zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 4,<br/>
wobei der Taktschaltkreis aufweist:
<claim-text>einen Schalter, welcher zwischen einem Anschlussende der Taktspannung und einem Erdungsende angeschlossen ist und welcher so<!-- EPO <DP n="35"> --> gesteuert wird, dass er gemäß dem Sekundärstromzeitdetektionssignal einund ausgeschaltet wird, und</claim-text>
<claim-text>einen Widerstand, der zwischen einem Anschlussende der ersten Referenzspannung und einem Anschlussende der Taktspannung angeschlossen ist.</claim-text></claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 1,<br/>
wobei der zweite Multiplikationsschaltkreis aufweist:
<claim-text>einen Dreieckswellenerzeugungsschaltkreis, welcher eine Dreieckswellenspannung mit einer bestimmten Oszillationsfrequenz erzeugt,</claim-text>
<claim-text>einen Komparator, welcher die Fehlerspannung mit der Dreieckswellenspannung vergleicht, um ein Vergleichssignal zu erzeugen,</claim-text>
<claim-text>einen Taktschaltkreis, welcher einen Taktvorgang auf der geteilten Spannung gemäß einem Logikpegel des Vergleichssignals ausführt, um eine Taktspannung zu erzeugen, die erhalten wird durch Takten der geteilten Spannung, und zwar nach Art einer Reckeckwelle, und</claim-text>
<claim-text>einen Glättungsschaltkreis, welcher die Taktspannung glättet, um die erste Referenzspannung zu erzeugen.</claim-text></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 6,<br/>
wobei der Taktschaltkreis einen ersten Schalter und einen zweiten Schalter aufweist, welche in Reihe zwischen einem Anschlussende der geteilten Spannung und einem Massenende angeschlossen sind und welche gemäß einem Logikpegel des Vergleichssignals exklusiv ein- und ausgeschaltet werden, und<br/>
wobei die Taktspannung von einem Anschlussknoten des ersten Schalters und des zweiten Schalters ausgegeben wird.</claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 6,<br/>
wobei:
<claim-text>der Spannungsteilungsschaltkreis unter Verwendung eines Widerstandsnetzwerks ausgebildet ist,</claim-text>
<claim-text>der Taktschaltkreis einen ersten Schalter aufweist, welcher zwischen einem Anschlussende der geteilten Spannung und dem Massenende angeschlossen ist, und</claim-text>
<claim-text>der erste Schalter gemäß dem Vergleichssignal derart ein- und ausgeschaltet wird, dass die Taktspannung von einem Anschlussende der geteilten Spannung ausgegeben wird.</claim-text><!-- EPO <DP n="36"> --></claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 3,<br/>
wobei der Oszillationsschaltkreis aufweist:
<claim-text>einen Lade-/Entladeschaltkreis, welcher das Einstellsignal unter Verwendung eines Lade-/Entladevorgangs eines Kondensators, der durch einen konstanten Strom geladen wird, erzeugt,</claim-text>
<claim-text>einen Dreieckswellenerzeugungsschaltkreis, welcher eine Dreieckswellenspannung mit einer bestimmten Oszillationsfrequenz erzeugt, und</claim-text>
<claim-text>einen Spannungsadditionswiderstand, welcher eine zur Ladespannung des Kondensators zu addierende Dreieckswellenspannung erzeugt.</claim-text></claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 1,<br/>
wobei der Primärstromsteuerschaltkreis (101 - 106) und der Referenzspannungskorrekturschaltkreis (107 - 111) in einer Halbleitereinrichtung (100) integriert sind.</claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>LED-Beleuchtungseinrichtung,<br/>
mit:
<claim-text>einer LED (3) und</claim-text>
<claim-text>dem Schalt-Stromversorgungsschaltkreis (1) nach Anspruch 1, welcher die DC-Ausgabespannung (Vout) aus der AC-Eingangsspannung (Vin) erzeugt, welche von einer AC-Stromversorgung (2) zugeführt wird, und welcher die DC-Ausgabespannung an eine LED als Last zuführt.</claim-text></claim-text></claim></claims><claims mxw-id="PCLM56977698" lang="EN" load-source="patent-office"><!-- EPO <DP n="30"> --><claim id="c-en-01-0001" num="0001"><claim-text>A switching power supply circuit (1) comprising:
<claim-text>a full-wave rectification circuit (200) that performs full-wave rectification of an AC input voltage (Vin) so as to generate a primary voltage (V1);</claim-text>
<claim-text>a transformer (400) that transforms the primary voltage (V1) into a secondary voltage (V2) utilizing electromagnetic induction between first and second isolated windings (401, 402);</claim-text>
<claim-text>a rectifying and smoothing circuit (500) that generates a DC output voltage (Vout) from the secondary voltage (V2) so as to supply the DC output voltage to a load (3); and</claim-text>
<claim-text>a primary current control circuit (101-106) that performs on/off control of primary current (I1) based on a result of comparison between a primary current detection voltage (S6) corresponding to the primary current flowing in the first winding and a first reference voltage (S2), characeterized in that</claim-text>
<claim-text>the switching power supply circuit (1) further comprises a reference voltage correction circuit (107-111) for monitoring an on-duty ratio of secondary current (I2) flowing in the second winding so as to correct the first reference voltage (S2).</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The switching power supply circuit (1) according to claim 1, wherein the transformer (400) includes a third winding besides the first winding and the second winding, and the reference voltage correction circuit (107-111) includes<br/>
a secondary current time detection circuit that monitors a winding voltage in the third winding so as to output a secondary current time detection signal corresponding to an on-duty ratio of the secondary current,<br/>
a first multiplier circuit that multiplies the secondary current time detection signal by the first reference voltage so as to generate a multiplied voltage,<br/>
an error amplifier that generates an error voltage corresponding to a difference between the multiplied voltage and the second reference voltage,<br/>
a voltage dividing circuit that divides the primary voltage (V1) so as to generate a divided voltage, and<br/>
a second multiplying circuit that multiplies the divided voltage by the error voltage so as to generate the first reference voltage.</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The switching power supply circuit (1) according to claim 2, wherein the primary current control circuit (101-106) includes<br/>
a switching element connected to the first winding,<br/>
<!-- EPO <DP n="31"> -->a primary current detection circuit that generates a primary current detection voltage corresponding to the primary current,<br/>
an oscillator circuit that generates a set signal driven by pulse at a predetermined switching frequency,<br/>
a voltage comparator circuit that compares the primary current detection voltage with the first reference voltage so as to generate a reset signal,<br/>
an RS flip-flop that generates a switching control signal based on the set signal and the reset signal, and<br/>
a buffer circuit that amplifies current capability of the switching control signal so as to output the result to the switching element.</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The switching power supply circuit (1) according to claim 3, wherein the first multiplying circuit includes<br/>
a chopping circuit that performs a chopping process on the first reference voltage in accordance with a logical level of the secondary current time detection signal so as to generate a chopping voltage, and<br/>
a smoothing circuit that smoothes the chopping voltage so as to generate the multiplied voltage.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The switching power supply circuit (1) according to claim 4, wherein the chopping circuit includes<br/>
a switch that is connected between an application end of the chopping voltage and the ground end, and is controlled to be turned on and off in accordance with the secondary current time detection signal, and<br/>
a resistor connected between an application end of the first reference voltage and the application end of the chopping voltage.</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>The switching power supply circuit (1) according to claim 3, wherein the second multiplying circuit includes<br/>
a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency,<br/>
a comparator that compares the error voltage with the triangular wave voltage so as to generate a comparison signal,<br/>
a chopping circuit that performs a chopping process on the divided voltage in accordance with a logical level of the comparison signal so as to generate a chopping voltage obtained by chopping the divided voltage like a rectangular wave, and<br/>
a smoothing circuit that smoothes the chopping voltage so as to generate the first reference voltage.<!-- EPO <DP n="32"> --></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The switching power supply circuit (1) according to claim 6, wherein the chopping circuit includes a first switch and a second switch that are connected in series between an application end of the divided voltage and the ground end and are exclusively turned on and off in accordance with a logical level of the comparison signal, and the chopping voltage is output from a connection node of the first switch and the second switch.</claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The switching power supply circuit (1) according to claim 6, wherein<br/>
the voltage dividing circuit is formed using a resistor ladder.<br/>
the chopping circuit includes a first switch connected between an application end of the divided voltage and the ground end, and<br/>
the first switch is turned on and off in accordance with the comparison signal so that the chopping voltage is output from an application end of the divided voltage.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>The switching power supply circuit (1) according to claim 3, wherein the oscillator circuit includes<br/>
a charge/discharge circuit that generates the set signal using a charge/discharge operation of a capacitor charged by constant current,<br/>
a triangular wave generation circuit that generates a triangular wave voltage at a predetermined oscillation frequency, and<br/>
a voltage adding resistor that generates a triangular wave voltage to be added to a charging voltage of the capacitor.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>The switching power supply circuit (1) according to claim 1, wherein the primary current control circuit (101-106) and the reference voltage correction circuit (107-111) are integrated into a semiconductor device (100).</claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>An LED lighting device comprising:
<claim-text>an LED (3); and</claim-text>
<claim-text>the switching power supply circuit (1) according to claim 1 which generates the DC output voltage (Vout) from the AC input voltage (Vin) supplied from an AC power supply (2) and supplies the DC output voltage to the LED as a load.</claim-text></claim-text></claim></claims><claims mxw-id="PCLM56977699" lang="FR" load-source="patent-office"><!-- EPO <DP n="37"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Circuit d'alimentation électrique de commutation (1) comprenant :
<claim-text>un circuit de redressement pleine onde (200) qui réalise un redressement pleine onde d'une tension alternative d'entrée (Vin) de manière à générer une tension primaire (V1) ;</claim-text>
<claim-text>un transformateur (400) qui transforme la tension primaire (V1) en tension secondaire (V2) à l'aide d'une induction électromagnétique entre des premier et deuxième enroulements isolés (401, 402) ;</claim-text>
<claim-text>un circuit de redressement et de lissage (500) qui génère une tension continue de sortie (Vout) à partir de la tension secondaire (V2) de manière à fournir la tension continue de sortie à une charge (3) ; et</claim-text>
<claim-text>un circuit de commande de courant primaire (101-106) qui effectue une commande par tout ou rien du courant primaire (I1) sur la base d'un résultat de comparaison entre une tension de détection de courant primaire (S6) correspondant au courant primaire qui passe dans le premier enroulement, et une première tension de référence (S2), <b>caractérisé en ce que</b></claim-text>
<claim-text>le circuit d'alimentation électrique de commutation (1) comprend par ailleurs un circuit de correction de tension de référence (107-111) pour surveiller un facteur de marche du courant secondaire (12) qui passe dans le deuxième enroulement, de manière à corriger la première tension de référence (S2).</claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 1, étant précisé que le transformateur (400) contient un troisième enroulement, en plus du premier enroulement et du deuxième enroulement, et que le circuit de correction de tension de référence (107-111) contient<br/>
un circuit de détection de temps de courant secondaire qui surveille une tension d'enroulement dans le troisième enroulement de manière à émettre un signal de détection de<!-- EPO <DP n="38"> --> temps de courant secondaire correspondant à un facteur de fonctionnement du courant secondaire,<br/>
un premier circuit multiplicateur qui multiplie le signal de détection de temps de courant secondaire par la première tension de référence de manière à générer une tension multipliée,<br/>
un amplificateur d'erreur qui génère une tension d'erreur correspondant à une différence entre la tension multipliée et la seconde tension de référence,<br/>
un circuit diviseur de tension qui divise la tension primaire (V1) de manière à générer une tension divisée, et<br/>
un second circuit multiplicateur qui multiplie par la tension d'erreur la tension divisée, de manière à générer la première tension de référence.</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 2, étant précisé que le circuit de commande de courant primaire (101-106) contient<br/>
un élément de commutation qui est relié au premier enroulement,<br/>
un circuit de détection de courant primaire qui génère une tension de détection de courant primaire correspondant au courant primaire,<br/>
un circuit oscillateur qui génère un signal de réglage commandé par impulsion à une fréquence de commutation prédéterminée,<br/>
un circuit comparateur de tension qui compare la tension de détection de courant primaire à la première tension de référence de manière à générer un signal de réinitialisation,<br/>
une bascule RS qui génère un signal de commande de commutation sur la base du signal de réglage et du signal de réinitialisation, et<br/>
un circuit tampon qui amplifie la capacité de courant du signal de commande de commutation de manière à transmettre le résultat à l'élément de commutation.<!-- EPO <DP n="39"> --></claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 3, étant précisé que le premier circuit multiplicateur contient<br/>
un circuit de découpage qui réalise une opération de découpage sur la première tension de référence selon un niveau logique du signal de détection de temps de courant secondaire, de manière à générer une tension de découpage, et<br/>
un circuit de lissage qui lisse la tension de découpage de manière à générer la tension multipliée.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 4, étant précisé que le circuit de découpage contient<br/>
un commutateur qui est monté entre une extrémité d'application de la tension de découpage et l'extrémité de terre et qui est commandé pour être ouvert et fermé selon le signal de détection de temps de courant secondaire, et<br/>
une résistance qui est montée entre une extrémité d'application de la première tension de référence et l'extrémité d'application de la tension de découpage.</claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 3, étant précisé que le second circuit multiplicateur contient<br/>
un circuit générateur d'onde triangulaire qui génère une tension triangulaire à une fréquence d'oscillation prédéterminée,<br/>
un comparateur qui compare la tension d'erreur à la tension triangulaire, de manière à générer un signal de comparaison,<br/>
un circuit de découpage qui réalise une opération de découpage sur la tension divisée, selon un niveau logique du signal de comparaison, de manière à générer une tension de découpage obtenue en découpant la tension divisée comme une onde rectangulaire, et<br/>
un circuit de lissage qui lisse la tension de découpage de manière à générer la première tension de référence.<!-- EPO <DP n="40"> --></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 6, étant précisé que le circuit de découpage contient un premier commutateur et un second commutateur, qui sont montés en série entre une extrémité d'application de la tension divisée et l'extrémité de terre, et qui sont exclusivement ouverts et fermés selon un niveau logique du signal de comparaison, et que la tension de découpage est émise à partir d'un noeud de connexion du premier commutateur et du second commutateur.</claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 6, étant précisé<br/>
que le circuit diviseur de tension est formé à l'aide d'une échelle de résistances,<br/>
que le circuit de découpage contient un premier commutateur qui est monté entre une extrémité d'application de la tension divisée et l'extrémité de terre, et<br/>
que le premier commutateur est ouvert et fermé selon le signal de comparaison, de sorte que la tension de découpage est émise à partir d'une extrémité d'application de la tension divisée.</claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 3, étant précisé que le circuit oscillateur contient<br/>
un circuit de charge/décharge qui génère le signal de réglage à l'aide d'une opération de charge/décharge d'un condensateur chargé par un courant constant,<br/>
un circuit générateur d'onde triangulaire qui génère une tension triangulaire à une fréquence d'oscillation prédéterminée, et<br/>
une résistance d'addition de tension qui génère une tension triangulaire à ajouter à une tension de charge du condensateur.</claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Circuit d'alimentation électrique de commutation (1) selon la revendication 1, étant précisé que le circuit de commande de courant primaire (101-106) et le circuit de correction de tension de référence (107-111) sont intégrés dans un dispositif semi-conducteur (100).<!-- EPO <DP n="41"> --></claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Dispositif d'éclairage à diode électroluminescente comprenant :
<claim-text>une diode électroluminescente (3) ; et</claim-text>
<claim-text>le circuit d'alimentation électrique de commutation (1) selon la revendication 1, qui génère la tension continue de sortie (Vout) à partir de la tension alternative d'entrée (Vin) fournie par une alimentation électrique alternative (2), et qui fournit la tension continue de sortie à la diode électroluminescente comme charge.</claim-text></claim-text></claim></claims><drawings mxw-id="PDW16668355" load-source="patent-office"><!-- EPO <DP n="42"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="162" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="43"> --><figure id="f0002" num="2"><img id="if0002" file="imgf0002.tif" wi="165" he="166" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="44"> --><figure id="f0003" num="3"><img id="if0003" file="imgf0003.tif" wi="119" he="97" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="45"> --><figure id="f0004" num="4"><img id="if0004" file="imgf0004.tif" wi="141" he="89" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="46"> --><figure id="f0005" num="5"><img id="if0005" file="imgf0005.tif" wi="113" he="77" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="47"> --><figure id="f0006" num="6"><img id="if0006" file="imgf0006.tif" wi="165" he="112" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="48"> --><figure id="f0007" num="7"><img id="if0007" file="imgf0007.tif" wi="142" he="88" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="49"> --><figure id="f0008" num="8"><img id="if0008" file="imgf0008.tif" wi="119" he="102" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="50"> --><figure id="f0009" num="9"><img id="if0009" file="imgf0009.tif" wi="117" he="101" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="51"> --><figure id="f0010" num="10"><img id="if0010" file="imgf0010.tif" wi="121" he="98" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="52"> --><figure id="f0011" num="11"><img id="if0011" file="imgf0011.tif" wi="165" he="227" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="53"> --><figure id="f0012" num="12"><img id="if0012" file="imgf0012.tif" wi="165" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="54"> --><figure id="f0013" num="13"><img id="if0013" file="imgf0013.tif" wi="165" he="148" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
