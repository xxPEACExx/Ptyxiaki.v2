<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-2478745-B1" country="EP" doc-number="2478745" kind="B1" date="20140101" family-id="43466448" file-reference-id="315055" date-produced="20180826" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146552974" ucid="EP-2478745-B1"><document-id><country>EP</country><doc-number>2478745</doc-number><kind>B1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-10763015-A" is-representative="NO"><document-id mxw-id="PAPP154826897" load-source="docdb" format="epo"><country>EP</country><doc-number>10763015</doc-number><kind>A</kind><date>20100908</date><lang>EN</lang></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140448581" ucid="EP-09170179-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>09170179</doc-number><kind>A</kind><date>20090914</date></document-id></priority-claim><priority-claim mxw-id="PPC140448075" ucid="EP-10763015-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>10763015</doc-number><kind>A</kind><date>20100908</date></document-id></priority-claim><priority-claim mxw-id="PPC140445345" ucid="IB-2010054039-W" load-source="docdb"><document-id format="epo"><country>IB</country><doc-number>2010054039</doc-number><kind>W</kind><date>20100908</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130725</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988109043" load-source="ipcr">H05B  37/02        20060101AFI20110329BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL1988126347" load-source="docdb" scheme="CPC">H05B  37/0272      20130101 FI20130101BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132191406" lang="DE" load-source="patent-office">CODIERTE LICHTÜBERTRAGUNG UND EMPFANG</invention-title><invention-title mxw-id="PT132191407" lang="EN" load-source="patent-office">CODED LIGHT TRANSMISSION AND RECEPTION</invention-title><invention-title mxw-id="PT132191408" lang="FR" load-source="patent-office">TRANSMISSION ET RÉCEPTION DE LUMIÈRE CODÉE</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918144255" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>KONINKL PHILIPS NV</last-name><address><country>NL</country></address></addressbook></applicant><applicant mxw-id="PPAR918153120" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>KONINKLIJKE PHILIPS N.V.</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918148192" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SCHENK TIM CORNEEL WILHELMUS</last-name><address><country>NL</country></address></addressbook></inventor><inventor mxw-id="PPAR918164525" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SCHENK, TIM CORNEEL WILHELMUS</last-name></addressbook></inventor><inventor mxw-id="PPAR918995937" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>SCHENK, TIM CORNEEL WILHELMUS</last-name><address><street>c/o High Tech Campus Building 44</street><city>NL-5656 AE Eindhoven</city><country>NL</country></address></addressbook></inventor><inventor mxw-id="PPAR918139594" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>YANG HONGMING</last-name><address><country>NL</country></address></addressbook></inventor><inventor mxw-id="PPAR918136658" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>YANG, HONGMING</last-name></addressbook></inventor><inventor mxw-id="PPAR918995936" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>YANG, HONGMING</last-name><address><street>c/o High Tech Campus Building 44</street><city>NL-5656 AE Eindhoven</city><country>NL</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR918995939" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Koninklijke Philips N.V.</last-name><iid>101391185</iid><address><street>High Tech Campus 5</street><city>5656 AE Eindhoven</city><country>NL</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR918995938" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Van Eeuwijk, Alexander Henricus Waltherus</last-name><iid>100822969</iid><address><street>Philips Intellectual Property &amp; Standards P.O. Box 220</street><city>5600 AE Eindhoven</city><country>NL</country></address></addressbook></agent></agents></parties><international-convention-data><pct-or-regional-filing-data ucid="IB-2010054039-W"><document-id><country>IB</country><doc-number>2010054039</doc-number><kind>W</kind><date>20100908</date><lang>EN</lang></document-id></pct-or-regional-filing-data><pct-or-regional-publishing-data ucid="WO-2011030292-A1"><document-id><country>WO</country><doc-number>2011030292</doc-number><kind>A1</kind><date>20110317</date><lang>EN</lang></document-id></pct-or-regional-publishing-data><designated-states><ep-contracting-states><country mxw-id="DS548963420" load-source="docdb">AL</country><country mxw-id="DS548880602" load-source="docdb">AT</country><country mxw-id="DS548971185" load-source="docdb">BE</country><country mxw-id="DS548826037" load-source="docdb">BG</country><country mxw-id="DS548963575" load-source="docdb">CH</country><country mxw-id="DS548971186" load-source="docdb">CY</country><country mxw-id="DS548880603" load-source="docdb">CZ</country><country mxw-id="DS548963421" load-source="docdb">DE</country><country mxw-id="DS548971187" load-source="docdb">DK</country><country mxw-id="DS548971188" load-source="docdb">EE</country><country mxw-id="DS548964418" load-source="docdb">ES</country><country mxw-id="DS548826038" load-source="docdb">FI</country><country mxw-id="DS548963576" load-source="docdb">FR</country><country mxw-id="DS548963422" load-source="docdb">GB</country><country mxw-id="DS548971189" load-source="docdb">GR</country><country mxw-id="DS548963423" load-source="docdb">HR</country><country mxw-id="DS548880648" load-source="docdb">HU</country><country mxw-id="DS548964419" load-source="docdb">IE</country><country mxw-id="DS548971190" load-source="docdb">IS</country><country mxw-id="DS548826039" load-source="docdb">IT</country><country mxw-id="DS548971191" load-source="docdb">LI</country><country mxw-id="DS548826040" load-source="docdb">LT</country><country mxw-id="DS548973453" load-source="docdb">LU</country><country mxw-id="DS548826041" load-source="docdb">LV</country><country mxw-id="DS548826042" load-source="docdb">MC</country><country mxw-id="DS548973454" load-source="docdb">MK</country><country mxw-id="DS548973455" load-source="docdb">MT</country><country mxw-id="DS548971192" load-source="docdb">NL</country><country mxw-id="DS548963424" load-source="docdb">NO</country><country mxw-id="DS548971193" load-source="docdb">PL</country><country mxw-id="DS548826043" load-source="docdb">PT</country><country mxw-id="DS548880649" load-source="docdb">RO</country><country mxw-id="DS548971194" load-source="docdb">SE</country><country mxw-id="DS548963577" load-source="docdb">SI</country><country mxw-id="DS548963425" load-source="docdb">SK</country><country mxw-id="DS548963790" load-source="docdb">SM</country><country mxw-id="DS548973456" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data><office-specific-data><eptags><ep-no-a-document-published>*</ep-no-a-document-published></eptags></office-specific-data></bibliographic-data><description mxw-id="PDES63957017" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001">FIELD OF THE INVENTION</heading><p id="p0001" num="0001">The present invention relates to a coded light system. Particularly it relates to methods and devices for assigning identifiers to light sources in a coded light system and detection of the identifiers.</p><heading id="h0002">BACKGROUND OF THE INVENTION</heading><p id="p0002" num="0002">Light sources are nowadays applied in lighting systems consisting of a large number of light sources. Since the introduction of solid state lighting several parameters of these light sources can be varied and controlled in a system of light sources. Such parameters include light intensity, light color, light color temperature and even light direction. By varying and controlling these parameters of the different light sources, a light designer or user of the system is enabled to generate lighting scenes. This process is often referred to as scene setting, and is typically quite a complex process due to the multitude of light sources and parameters to be controlled. Typically one controller, or control channel, is required for each light source. This makes it difficult to control a system of more than ten light sources.</p><p id="p0003" num="0003">To enable a more intuitive and simpler control of the light sources, and to create scenes, the embedding of invisible identifiers in the light output of luminaires has been previously proposed. This embedding of identifiers can be based on unique modulation of the visible light (VL) of the luminaire or by placing of an additional infra-red (IR) light source in the luminaire and uniquely modulate this IR light. The embedding of identifiers in the light will be referred to as coded light (CL).</p><p id="p0004" num="0004">For the transmission of CL, mostly, light emitting diodes (LEDs) are considered, which allow for a reasonable high modulation frequency and bandwidth. This in turn may result in a fast response of the control system. The identifiers can, however, also be embedded in the light of other light sources, such as incandescent, halogen, fluorescent (FL) and high-intensity discharge (HID) lamps.</p><p id="p0005" num="0005">These light source identifiers, also referred to as codes, allow for the identification and strength estimation of the individual local illumination contributions. This can be applied in light control applications such as commissioning, light source selection and<!-- EPO <DP n="2"> --> interactive scene setting. These applications have use in, for example, homes, offices, shops and hospitals. These light source identifiers hence enable a simple and intuitive control operation of a light system, which might otherwise be very complex.</p><p id="p0006" num="0006">Illumination systems based on LEDs normally consist of a large number, e.g. hundreds, of spatially distributed LEDs. This is partly because a single state-of-the-art LED still cannot provide sufficient illumination and since LEDs are point sources. Due to the large number of LEDs and the broad range of illumination levels that can be supported by each LED, the complexity to calibrate and control such a lighting system is quite high. According to state-of-the-art techniques only a limited number (e.g. up to 100) light sources can be identified in a coded light system.</p><p id="p0007" num="0007"><patcit id="pcit0001" dnum="US2008297070A1"><text>US 2008/297070 A1</text></patcit> relates to a radio remote control and a programmable lighting unit which includes a radio interface. Parameters for the programmable lighting units which relate to the basic adjustment of programmable lighting units or the set up of programmable lighting units, are thereby adjusted via the radio remote control. In this manner the lighting unit is remote controlled by the radio remote control.</p><p id="p0008" num="0008"><patcit id="pcit0002" dnum="WO2006134122A1"><text>WO 2006/134122 A1</text></patcit> discloses to a radio-communication system which uses at least two frequency bands comprising a plurality of sub-frequency bands for transmitting signals from and/or to subscriber terminals according to a similar transmission method. The sub-frequency bands have a different frequency width in the at least two frequency bands.</p><p id="p0009" num="0009"><patcit id="pcit0003" dnum="EP1538802A2"><text>EP 1 538 802 A2</text></patcit> relates to an OFDM communication system and for assigning sub-carriers adaptively according to channel conditions. The OFDM communication system is described in the context of mobile communications. Particularly, the issue of assigning sub-carriers to a mobile station in a base station is addressed.</p><p id="p0010" num="0010"><patcit id="pcit0004" dnum="US6195341B1"><text>US 6 195 341 B1</text></patcit> discloses a communication method for carrying out communication in a multi-carrier format using a plurality of sub-carriers. Particularly there is disclosed a communication method suitable for application to, for example, a base station and a terminal apparatus in a radio telephone system. It is an object to allow a satisfactory transmission of an access request to a base station and so on when communication in a radio telephone system or the like can be carried out in an efficient system.</p><p id="p0011" num="0011"><patcit id="pcit0005" dnum="WO2007095740A1"><text>WO 2007/095740 A1</text></patcit> pertains to lighting systems and in particular to identification of light sources associated with lighting systems. A light source is configured to send a beacon signal representative of the unique identifier thereof. The beacon signal is integrated into the light emitted by the light source. Through the use of electronic data<!-- EPO <DP n="3"> --> transfer from the remote detection unit to the controller, the provision of the one or more unique identifiers to the controller are said to be enabled in an efficient and accurate manner.</p><p id="p0012" num="0012">According to <patcit id="pcit0006" dnum="WO2008080071A1"><text>WO 2008/080071 A1</text></patcit> there is provided a source of optical power, a source of optical lighting, and a source of optically encoded data. The outputs of these various sources are then multiplexed together such that the optical power the optical lighting, and the optically-encoded data all share a common optical conduit.</p><heading id="h0003">SUMMARY OF THE INVENTION</heading><p id="p0013" num="0013">It is an object of the present invention to overcome this problem, and to provide methods, devices and system concepts which mitigate the dependency of the number of light sources in the coded light system during assignment and detection of light source identifiers.</p><p id="p0014" num="0014">Generally, the above objectives are achieved by methods and devices according to the attached independent claims.</p><p id="p0015" num="0015">According to a first aspect, the above objects are achieved by a method for assigning identifiers to light sources in a coded lighting system, the method comprising the steps of: dividing an available frequency band into <i>N</i> non-uniform frequency regions, and selecting, for each light source, a unique frequency from a set of uniformly spaced frequencies in one of the non-uniform frequency regions, wherein the unique frequency is used to modulate light to be outputted by the each light source, thereby assigning an identifier to the each light source. This provides an efficient assignment process which allows a large number of unique identifiers to be assigned. Thereby a large number of light sources having unique identifiers can be used in a lighting system. In general, the assignment process is done such that multiple harmonics may be used during detection of the identifiers. This enables for efficient estimation for the assigned identifiers.</p><p id="p0016" num="0016">A spacing between the uniformly spaced frequencies may differ between different ones of the frequency regions. This provides for a flexible assignment method.</p><p id="p0017" num="0017">A spacing between the uniformly spaced frequencies may be greater for a low frequency region than for a high frequency region. Since a greater spacing may allow for more accurate estimation, this may provide an assignment process which enables un-equal<!-- EPO <DP n="4"> --> error-robustness. However, depending on the receiver, equal error-robustness may be achieved.</p><p id="p0018" num="0018">The frequency band may, between normalized frequency values 0 and 1, be divided into the N frequency regions. For 1 ≤ <i>n</i> ≤ <i>N-</i>1a width of frequency region <i>n</i> may be given by normalized frequency value 2/((<i>n</i>+1)(<i>n</i>+2)). Such widths correspond to widths of harmonics.</p><p id="p0019" num="0019">For 1 ≤ <i>n</i> ≤ <i>N-</i>1 a lower limit for frequency region <i>n</i> may be given by normalized frequency value (<i>n</i>-1)/(<i>n</i>+1). This provides each frequency region to correspond to ordered harmonics.</p><p id="p0020" num="0020">Light to be outputted may be modulated according to pulse width modulation, and a duty cycle of the pulse width modulation may depend on at least one of the unique frequency and a dimming level of the light source. This provides the identifiers to be associated with the modulation method of the light sources.</p><p id="p0021" num="0021">According to a second aspect, the above objects are achieved by a method for estimating identifiers assigned to light sources in a coded lighting system, wherein the identifiers have been assigned according to the above, the method comprising the steps of: receiving light; determining a unique frequency selected from a set of uniformly spaced frequencies in one of <i>N</i> non-uniform frequency regions of an available frequency band by, for frequency region <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>,</i> estimating the unique frequency based on harmonic (<i>n</i>+1) of received light, and determining the identifiers from the unique frequencies. This provides an efficient and low computational method for estimating identifiers assigned according to the above.</p><p id="p0022" num="0022">The method may further comprise, from the received light, estimating an amplitude of the received light. The method may further comprise, from the received light, estimating a phase of the received light. The amplitude and phase may be used to more accurately determine the identifiers from the unique frequencies.</p><p id="p0023" num="0023">The method may further comprise, based on the amplitude, determining individual illumination contributions.</p><p id="p0024" num="0024">The method may further comprise subtracting a total estimated signal assigned a frequency in frequency region <i>n</i> before estimating the unique frequency for frequency region <i>n</i>+1. This provides a method for successively estimating the identifiers. In general the harmonics of frequency region <i>n</i> will be correlated with the harmonics of frequency region <i>n</i>+1. However, by subtracting the total estimated signal for frequency region <i>n</i> before estimating the unique frequencies for frequency region <i>n</i>+1 the influence of harmonics of<!-- EPO <DP n="5"> --> frequency region <i>n</i> when estimating frequencies of frequency region <i>n</i>+1 is minimized. Therefore an estimation process requiring modest computational requirement whilst still providing accurate estimation results is enabled.</p><p id="p0025" num="0025">According to a third aspect, the above objects are achieved by a light driver for assigning identifiers to light sources in a coded lighting system, comprising: a processing unit arranged to assign an identifier to the light sources whereby, for each light source, the identifier determines a unique frequency to be used to modulate light to be outputted by the each light source, by performing the steps of: dividing an available frequency band into N non-uniform frequency regions, and selecting the unique frequency from a set of uniformly spaced frequencies in one of the non-uniform frequency regions.</p><p id="p0026" num="0026">The light driver enables an efficient implementation of a method for assigning identifiers to light sources in a coded lighting system.</p><p id="p0027" num="0027">According to a fourth aspect, the above objects are achieved by a receiver for estimating identifiers assigned to light sources in a coded lighting system, comprising: a light receiver; a processing unit arranged to perform the steps of: determining a unique frequency selected from a set of uniformly spaced frequencies in one of <i>N</i> non-uniform frequency regions of an available frequency band by, for frequency region <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>,</i> estimating the unique frequency based on harmonic (<i>n</i>+1) of light received by the light receiver, and determining the identifiers from the unique frequencies.</p><p id="p0028" num="0028">The receiver enables an efficient implementation of a method for estimating identifiers assigned to light sources in a coded lighting system.</p><p id="p0029" num="0029">It is noted that the invention relates to all possible combinations of features recited in the claims. Likewise, the advantages of the first aspect applies to the second aspect, the third aspect and the fourth aspect, and vice versa.</p><heading id="h0004">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p0030" num="0030">This and other aspects of the present invention will now be described in more detail, with reference to the appended drawings showing embodiment(s) of the invention.
<ul><li><figref idrefs="f0001">Fig. 1</figref> is a lighting system according to an embodiment;</li><li><figref idrefs="f0002">Fig. 2(a)</figref> is a light source according to an embodiment;</li><li><figref idrefs="f0002">Fig. 2(b)</figref> is a light source according to an embodiment;</li><li><figref idrefs="f0002">Fig. 3</figref> is a receiver according to an embodiment;</li><li><figref idrefs="f0003">Fig. 4</figref> is a flowchart according to an embodiment;</li><li><figref idrefs="f0004">Fig. 5</figref> is a flowchart according to an embodiment;<!-- EPO <DP n="6"> --></li><li><figref idrefs="f0005">Fig. 6</figref> illustrates examples of pulse width modulation signals;</li><li><figref idrefs="f0006">Fig. 7</figref> is an illustration of frequency ranges for different harmonics; and</li><li><figref idrefs="f0007">Fig. 8</figref> illustrates a successive iteration process.</li></ul></p><heading id="h0005">DETAILED DESCRIPTION</heading><p id="p0031" num="0031">The below embodiments are provided by way of example so that this disclosure will be thorough and complete, and will fully convey the scope of the invention to those skilled in the art. Like numbers refer to like elements throughout.</p><p id="p0032" num="0032"><figref idrefs="f0001">Fig. 1</figref> illustrates a lighting system 100 comprises at least one light source, schematically denoted by the reference numeral 102. The light source 102 may be part of a lighting control system, thus the lighting system 100 may be denoted as a coded lighting system. It should be noted that the term "light source" means a device that is used for providing light in a room, for purpose of illuminating objects in the room. Examples of such light providing devices include lighting devices and luminaires. A room is in this context typically an apartment room or an office room, a gym hall, a room in a public place or a part of an outdoor environment, such as a part of a street. Each light source 102 is capable of emitting light, as schematically illustrated by the arrow 106.</p><p id="p0033" num="0033">Due to the large number of light sources 102 and the broad range of illumination levels that can be supported by each light source 102, the complexity to calibrate and control such a lighting system 100 is quite high. According to state-of-the-art techniques only a limited number (e.g. up to 100) light sources 102 can be identified in a lighting system 100 based on coded lighting. This problem can be overcome by methods, devices and system concepts as disclosed below which mitigates the dependency of the number of light sources in the lighting system 100 during assignment and detection of identifiers of the light sources 102.</p><p id="p0034" num="0034">The emitted light comprises a modulated part associated with coded light comprising a light source identifier. A method for assigning identifiers to light sources will be disclosed below. The emitted light may also comprise an un-modulated part associated with an illumination contribution. Each light source 102 may be associated with a number of lighting settings, <i>inter alia</i> pertaining to the illumination contribution of the light source, such as color, color temperature and intensity of the emitted light. In general terms the illumination contribution of the light source may be defined as a time-averaged output of the light emitted by the light source 102.<!-- EPO <DP n="7"> --></p><p id="p0035" num="0035">The lighting system 100 further comprises an apparatus 104, termed a receiver, for detecting and receiving light, such as the coded light comprising the light source identifier emitted by the light source 102 as well as the light emitted by light sources outside the lighting system 100 (not shown).</p><p id="p0036" num="0036">The lighting system 100 may further comprise an apparatus 110 termed a light driver for assigning an identifier to the light sources 102. In order to achieve such an assignment, as schematically indicated by arrow 112, the light driver 110 may be arranged to perform a number of functionalities. These functionalities will be described below with reference to the flowchart of <figref idrefs="f0004">Fig. 5</figref>. The light driver 110 may be part of a central controller. It may comprise or be part of a processing unit. For example, the functionality of the light driver 110 may be performed during manufacturing of the light sources 102.</p><p id="p0037" num="0037">With reference to <figref idrefs="f0001">Fig. 1</figref>, a user may want to select and control a light source 102 in the lighting system 100 by using the receiver 104. To this end, the light sources 102 emit a unique identifier via the visible light 106. The receiver 104 has a (directional optical) light sensor, which while pointing can distinguish the light contributions of the different light sources and select the relevant light source 102. This light source 102 may then be controlled over a communications link, for example a radio frequency link 108, e.g. based on ZigBee.</p><p id="p0038" num="0038">Alternatively, with reference to <figref idrefs="f0001">Fig. 1</figref>, the user may want to control light sources 102 in the lighting system 100 in order to create light in a certain position and/or with a required intensity and/or light color. To this end, the light sources 102 emit a unique identifier via the visible light 106. The receiver 104 has a light receiver, and is able to distinguish and estimate the magnitude of the light contributions of the different light sources 102 in that location. The receiver 104 can then estimate the required contributions of the identified light sources 102 and communicate the new light setting to the light sources 102, as indicated by arrow 108 in <figref idrefs="f0001">Fig. 1</figref>.</p><p id="p0039" num="0039"><figref idrefs="f0002">Fig. 2(a) and Fig. 2(b)</figref> schematically illustrate functional block diagrams of a light source 200a, 200b, such as the light source 102 of <figref idrefs="f0001">Fig. 1</figref> disclosed above. The light source 200a, 200b may thus be configured to emit illumination light as well as coded light, wherein the coded light comprises a light source identifier of the light source 200a, 200b. The light source 200a, 200b comprises an emitter 202 for emitting the coded light. The emitter 202 may comprise one or more LEDs, but it could as very well comprise one or more FL or HID sources, etc. In the IR case, typically an IR LED will be placed in proximity of the primary light source. The primary light source is associated with the illumination function of the light source (i.e. for emitting the illumination light) and can be any light source, and the<!-- EPO <DP n="8"> --> secondary light source is associated with the light source identifier (i.e. for emitting the coded light). Preferably this secondary light source is a LED. The light source 200a, 200b further comprises a receiver 208 for receiving information, such as an identifier, to assign a modified light source identifier to the light source 200a, 200b. The receiver 208 may be a receiver configured to receive coded light. The receiver 208 may comprise an infrared interface for receiving infrared light. Alternatively the receiver 208 may be a radio receiver for receiving wirelessly transmitted information. Yet alternatively the receiver 208 may comprise a connector for receiving information transmitted by wire. The wire may be a powerline cable. The wire may be a computer cable.</p><p id="p0040" num="0040">The light source 200a, 200b may further comprise other components such as a processing unit 204 such as a central processing unit (CPU) and a memory 206. As illustrated in <figref idrefs="f0002">Fig. 2(b)</figref> a light driver 210 may be part of the processing unit 204. Alternatively, as illustrated in <figref idrefs="f0002">Fig. 2(a)</figref> the light source 200a does not comprise a light driver. The light driver may then be part of the lighting system 100, as disclosed above with reference to <figref idrefs="f0001">Fig. 1</figref>. Yet alternatively, the light source 200a, 200b may have been provided with identifiers during manufacturing of the light source 200a, 200b. As illustrated in <figref idrefs="f0002">Fig. 2(b)</figref> the light driver 210 may be operatively connected to the receiver 208, the memory 206 and the emitter 202. The light driver 210 may receive information from the receiver 208 pertaining to assigning an identifier to the light source 200. By e.g. utilizing the processing unit 204 the light driver 210 may change the encoding of the coded light such that the coded light emitted by the emitter 202 comprises the identifier. In order to achieve such an assignment the light driver 210 may be arranged to perform a number of functionalities. These functionalities will be described below with reference to the flowchart of <figref idrefs="f0004">Fig. 5</figref>. Information pertaining to the identifiers, such as identifiers and code parameters may be stored in the memory 206. Thus, in the example of light source 200a of <figref idrefs="f0002">Fig. 2(a)</figref>, which does not comprise a light driver, the light source 200a may assign new identifiers to the light source 200a based on information received by the receiver 208 pertaining to identifiers and code parameters stored in the memory 206.</p><p id="p0041" num="0041">A luminaire (not shown) may comprise at least one light source 200a, 200b, wherein each light source may be assigned individual light source identifiers. Preferably this light source is an LED-based light source.</p><p id="p0042" num="0042"><figref idrefs="f0005">Fig. 6</figref> shows an example of a pulse width modulation (PWM) driving signal for exemplary light sources 1 and 2. PWM is an efficient way to dim the light output of a light source. In the PWM method the light source is driven (i.e. outputting light) at a nominal current level for a part of the time and not driven (i.e. not outputting light) in the remainder of<!-- EPO <DP n="9"> --> the time. The PWM signal consequently consists of a repeated pulse train. The on-ratio is often referred to as duty cycle <i>p</i>. In the upper part of <figref idrefs="f0005">Fig. 6</figref> the duty cycle for ligh source 1 (denoted <i>p</i><sub>1</sub>) is identical to the duty cycle of light source 2 (denoted <i>p</i><sub>2</sub><i>).</i> More particularly, <i>p</i><sub>1</sub>= <i>p</i><sub>2</sub>=0.5. In the lower part of <figref idrefs="f0005">Fig. 6</figref> the duty cycles are <i>p</i><sub>1</sub> = <i>p</i><sub>2</sub> = 0.25.With a high duty cycle, more current is on average delivered to the light source and light with a higher intensity is thus outputted from the light source. The light output of the light source closely follows the current signal, and will be similar to the signal depicted in the figure. Typically the frequency of the PWM signal is larger than several hundred Hertz (Hz), such that the on and off switching of the light is invisible to the human visual system. For light source 1 in <figref idrefs="f0005">Fig. 6</figref> the frequency of the PWM signal is denoted <i>f</i><sub>1</sub>. Likewise, for light source 2 in <figref idrefs="f0005">Fig. 6</figref> the frequency of the PWM signal is denoted <i>f</i><sub>2</sub>. In this illustrative example <i>f</i><sub>1</sub>&lt;<i>f</i><sub>2</sub>.</p><p id="p0043" num="0043"><figref idrefs="f0005">Fig. 6</figref> illustrates that LEDs can be assigned a unique frequency <i>f</i><sub>i</sub>, of the PWM signal, which acts as a coded light identifier for the light source. This unique frequency makes the light originating from the light source uniquely identifiable. This method of coded light is referred to as frequency division multiplexing (FDM). Since the light output is only regulated by the duty cycle, i.e. not by the frequency, the light source can be dimmed by varying this duty cycle.</p><p id="p0044" num="0044">A functional block diagram for a receiver 300 according to an embodiment of the present invention is given in <figref idrefs="f0002">Fig. 3</figref>. The receiver 300 comprises a processing unit, schematically illustrated by reference numeral 302, arranged to estimate an assigned identifier to the light source 102 based on light received by a light receiver 304 of the receiver 300. In order to achieve such detection the processing unit 300 is arranged to perform a number of functionalities. These functionalities will be described below with reference to the flowchart of <figref idrefs="f0004">Fig. 5</figref>. The receiver 300 further comprises a memory 306 and a transmitter 308. The memory 306 may store instructions pertaining to the functionalities to estimate an assigned identifier. The transmitter 308 may be utilized in order to communicate updated identifiers to light sources 102 in lighting system 100.</p><p id="p0045" num="0045">A method for assigning identifiers to light sources in a coded lighting system will now be described with reference to the flowchart of <figref idrefs="f0003">Fig. 4</figref>. The disclosed method is presented in a FDM context.</p><p id="p0046" num="0046">An available frequency band is divided into N non-uniform (non-overlapping) frequency regions, step 402. The available frequency band may thus be defined by an available bandwidth. The available frequency band is defined between a lower-limit frequency and a upper-limit frequency. By dividing the frequency band in N (non-overlapping)<!-- EPO <DP n="10"> --> frequency regions the frequency range up to the entire Nth harmonic range can be used in the detection and estimation in the receiver 300. The lower-limit frequency may include frequency value zero. For VL coded light, however, typically the lower frequency will be higher than 100 Hz to avoid visibility. The higher frequency is limited by the bandwidth of the light driver 110, 210 and properties of the light sources, and is typically in the order of 1-10 MHz. Practical values for the lower-limit and upper-limit frequencies of the lower-most frequency region are 2 and 4 kHz, respectively. The light sources may also be divided into N (non-overlapping) groups correspondingly.</p><p id="p0047" num="0047">In general, the frequency width of each such non-uniform frequency region may differ from frequency region to frequency region. That is, the frequency regions may be associated with a specific width. To simplify the notation and without losing generality, in the following normalized frequency values will be assumed. More particularly the (normalized) lower-limit frequency value will be assumed to take value 0 and the (normalized) upper-limit frequency value will be assumed to take value 1.</p><p id="p0048" num="0048">Moreover, the width of the non-uniform frequency regions may be higher for a low frequency region than the width of the high frequency region. That is, the frequency regions may be associated with a specific order. Even more so, the width of the non-uniform frequency regions may decrease as the frequency content therein increases. That is, the frequency regions may be associated with a specific width and order. Particularly, a width of frequency region <i>n</i>, where 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>,</i> may be given by normalized frequency value 2/((n+1)(<i>n</i>+2)). The width of frequency region N is for this case given by 2/(N+1). Particularly, the lower limit for frequency region <i>n</i> may for 1 ≤ <i>n</i> ≤ <i>N-</i>1 be given by normalized frequency value <i>(n-</i>1<i>)l(n+</i>1<i>).</i> Since the width of frequency region N may be given by 2/(<i>N</i>+1) and the width of the (normalized) total available frequency band is 1, the lower limit for frequency region <i>N</i> may be given by 1-2/(<i>N</i>+1).</p><p id="p0049" num="0049">A unique frequency for each light source is then selected from a set of uniformly spaced frequencies in one of the non-uniform frequency regions, step 404. That is, the frequencies are uniformly spaced within each frequency region. However, the spacing between the uniformly spaced frequencies may differ between different ones of the frequency regions. Particularly, the spacing between the uniformly frequency spacing may be greater for a low frequency region than for a high frequency region.</p><p id="p0050" num="0050">In general, the number of frequency values in each non-uniform frequency region may differ from frequency region to frequency region. Particularly, denote by <i>L<sub>n</sub></i> the number of uniformly spaced frequencies in region <i>n</i>. A ratio between the <i>L<sub>n</sub></i> and <i>L<sub>n+1</sub></i> may be<!-- EPO <DP n="11"> --> given as <i>L<sub>n</sub></i>/<i>L<sub>n+1</sub> =</i> (<i>2+n)</i>/(1+<i>n</i>)<i>.</i> Thus, given the number of uniformly spaced frequencies in region <i>n</i> the number of uniformly spaced frequencies in region <i>n</i>+1 can be found, or vice versa. Particularly, by defining a value for the number of uniformly spaced frequency values <i>L</i><sub>1</sub> in region 1 the number of uniformly spaced frequency values for the remaining <i>N</i>-1 regions may be found. Typically each region may comprise up to a few hundred uniformly spaced frequency values.</p><p id="p0051" num="0051">The unique frequency is then used to modulate light to be outputted by each light source. Thereby an identifier is assigned to each light source, step 406. Light to be emitted by the light sources may be modulated according to pulse width modulation. A duty cycle of the pulse width modulation may depend on the unique frequency associated with the identifier assigned to each light source. Denote by <i>p</i><sub>i</sub> the duty cycle of light source i in frequency region <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>.</i> Then it may be required that sin(π(<i>n</i>+1)<i>p<sub>i</sub></i>) ≠ 0. For group <i>N</i> it may be required that sin(π<i>Np<sub>i</sub></i>) ≠ 0. One reason for these conditions may be that it may be desirable to detect the identifiers of the <i>n</i>th group based on the (<i>n</i>+1)th harmonic of the signal. For sin(<i>π(n</i>+1<i>)p<sub>i</sub>)</i> = 0, however, the contribution of source <i>i</i> in the (<i>n</i>+1)th harmonic is zero. Consequently, detection would be impossible. For example, the duty cycle of any light source in group 1 should not be equal to 1/2, since this would result in a second harmonic for which the amplitude equals zero. This does not allow its estimation.</p><p id="p0052" num="0052">However, if it is required that the duty cycle of a light source <i>p<sub>i</sub></i> is set to be the value that is not allowed, the duty cycle may be adjusted by a small value <i>δ<sub>p</sub>.</i> In this case duty cycle <i>p<sub>i</sub></i> of light source i in frequency region <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1, may be adjusted to <i>p<sub>i</sub></i>+<i>δ<sub>p</sub>,</i> such that |(sin(π(<i>n</i>+1)<i>p<sub>i</sub></i>))/(π(<i>n</i>+1))|&gt;<i>δ<sub>p</sub></i>. Similarly, for frequency band N duty cycle <i>p<sub>i</sub></i> of light source <i>i</i> in frequency band <i>N</i>, may be adjusted to <i>p<sub>i</sub>+δ<sub>p</sub>,</i> such that |(sin(π<i>Np<sub>i</sub></i>))/(π<i>N</i>)&gt;<i>δ<sub>p</sub></i>. A typical value of <i>δ<sub>p</sub></i> is <i>δ<sub>p</sub>≈</i>0.001.</p><p id="p0053" num="0053">The light to be emitted by the light sources may also be associated with a dimming level, corresponding to the relative light intensity of the light source. The duty cycle of the pulse width modulation may depend on the dimming level of the light source.</p><p id="p0054" num="0054"><figref idrefs="f0006">Fig. 7</figref> shows the frequency range of different harmonics of light received by the receiver. It can be seen that the frequency ranges are overlapping. For instance, the third harmonic range is partially overlapping the second harmonic range. This overlapping behavior indicates that the signals from different light sources are correlated. Hence, an estimator of identifiers of the light sources exploiting these harmonics could suffer from this correlation and the estimation performance could therefore be limited. Moreover, the<!-- EPO <DP n="12"> --> correlation between different light sources signals may be dependent on unknown parameters such as phase and frequency.</p><p id="p0055" num="0055">Hence it is not straightforward to generate a well performing estimator. A further inspection of <figref idrefs="f0006">Fig. 7</figref> indicates that there is no frequency overlapping in the first half (approximately) of the second harmonic range. This means that there is no interference from other harmonics of other light sources in the first half of the second harmonic range. In other words, an estimator may be developed in this frequency range only based on this harmonic, without considering the influence of other identifiers. This we will refer to as an individual estimator. In addition, as long as the frequency separation between the second harmonics from different light sources is set to be 2/<i>T</i>, where <i>T</i> is the response time of the receiver, an individual estimator, e.g. based on a filterbank, using a triangular windowing function may be used. Equivalently, the frequency separation between the fundamental frequencies is 1/<i>T</i>. Hence, through the use of the second harmonic, the light sources are closer packed by a factor of two compared to a system applying the detection based on the fundamental frequency. Further, if the fourth harmonic signal of the light sources in the first half can be estimated from the corresponding second harmonics, these fourth harmonic signals can be subtracted from the total received light signal and some part of the third harmonic frequency range will be released from frequency overlapping.</p><p id="p0056" num="0056">Multiple harmonics may be considered because the frequencies are spaced further apart in the harmonics in the fundamental frequency, thereby enabling the parameters of the frequency identifiers to be distinguished and accurately estimated. The estimation process is based on the following general principles. The parameters of the light sources in the frequency range 1 may be estimated by use of the second harmonics (as is illustrated in the upper part of <figref idrefs="f0006">Fig. 7</figref>). The total received light signal, including all the harmonics, may then be subtracted from the total received signal. After that, the estimation process may continue with estimation of identifiers for light sources in the second group of light sources with the use of the third harmonics. The width of the frequency range for the first group may hence be determined such that overlapping between the third and second harmonic range can be removed, as illustrated by the dark regions in <figref idrefs="f0006">Fig. 7</figref>. In the illustrative example of <figref idrefs="f0006">Fig. 7</figref> the first frequency range takes about the first one third of the entire frequency band. Similarly, the frequency range from about the one third to the about one half of the entire frequency band, i.e. about 1/6 of the entire spectrum, is allocated to the second group. The parameters of the light source signals in the second group can be estimated based on the third harmonics (as is illustrated in the lower part of <figref idrefs="f0006">Fig. 7</figref>). The signal parameters of the<!-- EPO <DP n="13"> --> following light sources can then be estimated based on at least the forth harmonics. This procedure can be extended to all <i>N</i> groups systematically.</p><p id="p0057" num="0057">A method for estimating identifiers assigned to light sources in a coded lighting system will now be described with reference to the flowchart of <figref idrefs="f0004">Fig. 5</figref>.</p><p id="p0058" num="0058">Light is received by the receiver 104, 300, step 501. A unique frequency selected from a set of uniformly spaced frequencies in one of <i>N</i> non-uniform frequency regions of the available frequency band is estimated, step 502. This step has a number of substeps. For each frequency region <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>,</i> the unique frequency is estimated based on harmonic (<i>n</i>+1) of received light, step 504. The estimation of the exact frequency may be required due to frequency offsets occurring in the light source driver 204. These may e.g. be caused by non-idealities in the components of the light source driver 204. In general, the estimation of the received light signal, or illumination contribution may be said to be undertaken successively. Starting from <i>n</i> = 1 to <i>n</i> = <i>N-</i>1 a number of parameters, such as frequency, amplitude and/or phase of each light source in group <i>n</i> can be estimated based on harmonic (<i>n</i>+1) of the received light signal. For <i>n</i> = <i>N</i> the parameters of each light source in group <i>N</i> may be estimated based on harmonic <i>N</i>. The identifiers are determined from the unique frequencies, step 506.</p><p id="p0059" num="0059">A total estimated signal assigned a frequency in frequency region <i>n</i>, may be subtracted before estimating the unique frequency for frequency region <i>n</i>+1. This iterative process is illustrated in <figref idrefs="f0007">Fig. 8</figref>. Particularly, each unique frequency in the frequency region <i>n</i> may be estimated, by for each identifier <i>i</i> in frequency region <i>n</i>, subtracting the estimated harmonic (<i>n</i>+1) with neighboring frequencies,</p><p id="p0060" num="0060">The unique frequency may be re-estimated by locating a frequency peak within a predefined distance from (<i>n</i>+1)<i>f</i>, where <i>f</i> is a previous estimate of the unique frequency, step 508.</p><p id="p0061" num="0061">In the above, a successive estimator may be used. In each step of the estimator, the signal parameters of the light sources in a group <i>n</i> are estimated on one of the harmonics and then all the harmonics of the light source signals are subtracted from the total received signal. In order to make such subtraction, all the signal parameters may have to be estimated with high accuracy. In this section, we explain how each of such component parameter estimator works.</p><p id="p0062" num="0062">Consider frequency region <i>n</i>, 1 <i>≤ n ≤ N-</i>1<i>.</i> The signals from the previous groups from 1 to <i>n</i>-1 have thus been subtracted. Only the frequency spectrum, denoted by <i>F<sub>n</sub></i>(<i>f</i>), within the (<i>n</i>+1)th harmonics of light sources in the <i>n</i>th group needs to be considered.<!-- EPO <DP n="14"> --> For this a filter can be applied to the resulting signal after the subtraction. In an initial step the estimated frequency, <i>f̂</i>, of each light source is assumed to be equal to the ideal frequency <i>f̂<sub>i</sub></i>; without frequency offset. The Fourier transform <i>F</i>( ) of the received signal is then determined and <i>F</i>(<i>f̂</i><sub>i</sub>) is considered.</p><p id="p0063" num="0063">Further, an amplitude of the received light may be estimated, step 510. A phase of the received light may also be estimated, step 512. The estimated value for amplitude is <i>α̂<sub>i</sub></i> = |<i>F</i>(<i>f̂</i>i)|/<i>b</i><sub><i>i,n</i>+1</sub>) where <i>b<sub>i,n</sub></i> is the magnitude of the <i>n</i>th harmonic, and the phase of the (<i>n</i>+1)th harmonic is <i>ϕ̂</i><sub><i>i,n</i>+1</sub> = angle(<i>F</i>(<i>f̂<sub>i</sub></i>)). This estimator is basically an individual estimator, which implements the proposed receiver.</p><p id="p0064" num="0064">To improve the performance of the estimation process proposed, one can extend with the following approach. This approach considers the use of an iterative algorithm, where the following iteration may be run for <i>N<sub>I</sub></i> times: At each iteration, the following steps may be performed from <i>i</i> = 1 to <i>L<sub>n</sub>.</i> For each ith light source, the estimated (<i>n</i>+1)th harmonic signals of the light sources is subtracted with neighboring light sources. Specifically, for <i>j</i> with |<i>j-i</i>|&lt;<i>L</i><sub>neighbor</sub>, the (<i>n</i>+1)th harmonic spectrum, <i>F̂<sub>j</sub></i>(<i>f</i>), of the jth light sources can be reconstructed based on <i>α̂<sub>i</sub></i>,<i>f̂</i>,_<i>i</i> and <i>ϕ̂</i><sub><i>i,n</i>+1</sub>. <i>F̂,<sub>i</sub></i>(<i>f</i>) = <i>F<sub>n</sub></i>(<i>f</i>) - ∑<sub>j</sub><i>F̂<sub>j</sub></i>(<i>f</i>) may then be obtained.</p><p id="p0065" num="0065">The peak of |<i>F̂<sub>i</sub></i>(<i>f</i>)| is located and the corresponding frequency is the updated <i>f̂</i><sub>i</sub>. Then <i>α̂<sub>i</sub></i>= |<i>F̂<sub>i</sub></i>(<i>f̂<sub>i</sub></i>)|/<i>b</i><sub><i>i,n</i>+1</sub> can be updated and <i>ϕ̂</i><sub><i>i,n</i>+1</sub> = angle(<i>F̂<sub>i</sub></i>(<i>f̂<sub>i</sub></i>)). If a fast Fourier transform (FFT) is used, |<i>F̂i</i>(<i>f</i>)| only takes values at discrete frequency bins. In this case, the peak of the frequency may be located through the following interpolation procedure.</p><p id="p0066" num="0066">The two frequency bins <i>f</i><sub>1</sub> and <i>f</i><sub>2</sub> may be located such that |<i>F̂<sub>i</sub></i>(<i>f</i><sub>1</sub>)| and [<i>F̂<sub>i</sub></i>(<i>f</i><sub>2</sub>)| are of the value that is closest to the value, say, ε max |<i>F̂<sub>i</sub></i>(<i>f</i>)|, where max|<i>F̂<sub>i</sub></i>(<i>f</i>)| is estimated from all frequency bins and where 0 &lt; ε &lt; 0 is a constant. This could be used to detect edges. A typical value of ε, is ε = 0.8.Then <i>f̂<sub>i</sub></i> = (<i>f</i><sub>1</sub>+<i>f</i><sub>2</sub>)/2.</p><p id="p0067" num="0067">Since the phase is estimated at a higher harmonics, phase ambiguity may occur for the corresponding lower harmonics and fundamental frequency. The phase ambiguity may be resolved as follows. With access to <i>ϕ̂</i><sub><i>i,</i>n+1</sub> for each i in the <i>n</i>th group, <i>ϕ̂<sub>i</sub></i> may still not be determined since there are <i>n</i>+1 possible candidate phases due to the phase ambiguity. The estimation <i>ϕ̂<sub>i</sub></i> can be used to reconstruct other harmonic signals so that the signal parameter of the successive frequency regions can be estimated. The phase ambiguity can be resolved by<!-- EPO <DP n="15"> --> using the <i>n</i>th harmonic range of the <i>n</i>th group. Based on <i>ϕ̂</i><sub><i>i,n+</i>1,</sub> <i>ϕ̂</i><sub>i-1</sub>, <sub><i>n</i>+1</sub> and <i>ϕ̂</i><sub>i+1,<i>n</i>+1</sub>, all the possible combination of candidate phases for on <i>ϕ̂<sub>i,n</sub></i>, <i>ϕ̂<sub>i-1,n</sub></i>, and <i>ϕ̂</i><sub><i>i</i>+1,<i>n</i></sub> can be listed. Then, for each of the combination, with access to <i>α̂<sub>i</sub>;</i>, <i>α̂</i><sub><i>i-</i>1<i>,</i></sub> <i>α̂<sub>i</sub></i>+1, <i>f̂<sub>i</sub></i>, <i>f̂</i><sub><i>i-</i>1,</sub> and <i>f̂</i><sub><i>i</i>+1</sub>, the spectrum around <i>nf̂<sub>i</sub></i> can be reconstructed. The spectrum around <i>nf̂<sub>i</sub></i> can also be obtained by subtracting the spectrum due to previous groups in this frequency range. These two estimated spectrum may be compared. From the combination which gives the best match of two spectra, the candidate phase with respect to the ith light source may be determined as the updated <i>ϕ̂<sub>i</sub></i>.</p><p id="p0068" num="0068">The (estimate of the) amplitude <i>α̂<sub>i</sub></i> may be used to determine individual illumination contributions of the light sources, step 514. From the phase of harmonic (<i>n</i>+1) of each light source, (<i>n</i>+1) candidate phases for the fundamental frequency component can be obtained, and thus (<i>n</i>+1) candidate phases for harmonic <i>n</i>. The candidate phase for each light source may be selected according to a criterion. The criterion may specify that the reconstructed signal of harmonic <i>n</i> should best match the received signal. The best match may be defined by a distance criterion.</p><p id="p0069" num="0069">Further, the above steps may be repeated iteratively from the first till the last light sources in each frequency region <i>n</i> (i.e. from the light source associated with the lowest frequency in frequency region <i>n</i> to the light source associated with the highest frequency in frequency region <i>n</i>). Moreover, the iteration steps may be repeated a number of times in order to improve the estimation result. The number of estimations may be given by a predefined number or the estimation may continue until the results from two successive iterations differ less than a predefined threshold.</p></description><claims mxw-id="PCLM56978540" lang="DE" load-source="patent-office"><!-- EPO <DP n="19"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zum Zuweisen von Identifiern zu Lichtquellen (102, 200a, 200b) in einem codierten Beleuchtungssystem (100), wobei das Verfahren <b><u>dadurch gekennzeichnet</u> ist, dass</b> es die folgenden Schritte umfasst, wonach:
<claim-text>ein zur Verfügung stehendes Frequenzband in N nicht-einheitliche Frequenzbereiche unterteilt wird (402),</claim-text>
<claim-text>für jede Lichtquelle eine eindeutige Frequenz aus einem Satz von gleichmäßig beabstandeten Frequenzen in einem jeweiligen der nicht-einheitlichen Frequenzbereiche ausgewählt wird (404), und</claim-text>
<claim-text>die eindeutige Frequenz verwendet wird (406), um von jeder Lichtquelle abzugebendes Licht zu modulieren und um dadurch jeder Lichtquelle einen Identifier zuzuweisen.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, wobei ein Abstand zwischen den gleichmäßig beabstandeten Frequenzen zwischen verschiedenen der Frequenzbereiche differiert.</claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach Anspruch 1, wobei ein Abstand zwischen den gleichmäßig beabstandeten Frequenzen bei einem unteren Frequenzbereich größer als bei einem oberen Frequenzbereich ist.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach einem der Ansprüche 1 bis 3, wobei eine Breite des nicht-einheitlichen Frequenzbereichs bei einem unteren Frequenzbereich größer als bei einem oberen Frequenzbereich ist.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach einem der Ansprüche 1 bis 4, wobei das Frequenzband zwischen normierten Frequenzwerten 0 und 1 in die N Frequenzbereiche unterteilt wird, und wobei für 1 ≤ <i>n ≤ N-</i>1 eine Breite von Frequenzbereich <i>n</i> durch den normierten Frequenzwert 2/((<i>n</i>+1)(<i>n</i>+2)) gegeben ist.<!-- EPO <DP n="20"> --></claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Verfahren nach einem der Ansprüche 1 bis 4, wobei das Frequenzband zwischen normierten Frequenzwerten 0 und 1 in die N Frequenzbereiche unterteilt wird, und wobei für 1 ≤ <i>n ≤ N-</i>1 eine untere Grenze für Frequenzbereich <i>n</i> durch den normierten Frequenzwert (<i>n-</i>1)/<i>(n+</i>1) gegeben ist.</claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Verfahren nach einem der Ansprüche 1 bis 6, wobei ein Verhältnis zwischen einer Anzahl <i>L<sub>1</sub></i> gleichmäßig beabstandeter Frequenzen in Bereich <i>n</i> und einer Anzahl <i>L<sub>2</sub></i> gleichmäßig beabstandeter Frequenzen in Bereich <i>n</i>+1 bei <i>L<sub>1</sub></i>/<i>L<sub>2</sub>=(</i>2<i>+n)</i>/<i>(</i>1<i>+n)</i> liegt.</claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Verfahren nach einem der Ansprüche 1 bis 7, wobei abzugebendes Licht gemäß Pulsbreitenmodulation moduliert wird, und wobei ein Tastverhältnis der Pulsbreitenmodulation von zumindest der eindeutigen Frequenz oder einer Dimmungsstufe der Lichtquelle abhängig ist.</claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Verfahren nach Anspruch 8, wobei Tastverhältnis <i>p<sub>i</sub></i> von Lichtquelle <i>i</i> in Frequenzband <i>n</i>, 1 ≤ <i>n ≤ N-</i>1<i>,</i> so festgelegt wird, dass sin(π(<i>n</i>+1)<i>p<sub>i</sub>) ≠</i> 0.</claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Verfahren zum Ermitteln von Lichtquellen (102, 200a, 200b) zugewiesenen Identifiern in einem codierten Beleuchtungssystem (100), wobei die Identifier entsprechend dem Verfahren nach einem der Ansprüche 1 bis 9 zugewiesen wurden, wobei das Verfahren die folgenden Schritte umfasst, wonach:
<claim-text>Licht empfangen wird (501);</claim-text>
<claim-text>die eindeutige Frequenz für jede der Lichtquellen ermittelt wird (502), wobei die eindeutige Frequenz aus dem Satz gleichmäßig beabstandeter Frequenzen in einem jeweiligen der N nicht-einheitlichen Frequenzbereiche des zur Verfügung stehenden Frequenzbandes für Frequenzbereich <i>n</i> durch 1 ≤ <i>n ≤ N-</i>1 ausgewählt wird;</claim-text>
<claim-text>die eindeutige Frequenz aufgrund von Oberschwingung (<i>n</i>+1) des empfangenen Lichts geschätzt wird (504); und</claim-text>
<claim-text>der Identifier für jede der Lichtquellen aus der eindeutigen Frequenz ermittelt wird (506).</claim-text><!-- EPO <DP n="21"> --></claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Verfahren nach Anspruch 10, wonach weiterhin anhand des empfangenen Lichts zumindest eine Amplitude oder eine Phase des empfangenen Lichts geschätzt wird (510,512).</claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>Verfahren nach Anspruch 11, wonach weiterhin aufgrund der Amplitude einzelne Beleuchtungsbeiträge der Lichtquellen so festgelegt werden (514), dass ein rekonstruiertes Signal von Oberschwingung <i>n</i> mit dem empfangenen Licht am besten übereinstimmt.</claim-text></claim><claim id="c-de-01-0013" num="0013"><claim-text>Verfahren nach einem der Ansprüche 10 bis 12, wonach weiterhin vor Schätzen der eindeutigen Frequenz für Frequenzbereich <i>n</i>+1: von dem empfangenen Licht ein Signal subtrahiert wird, dem die Frequenz in Frequenzbereich <i>n</i> zugewiesen wurde.</claim-text></claim><claim id="c-de-01-0014" num="0014"><claim-text>Lichttreiber (110, 210) zum Zuweisen von Identifiern zu Lichtquellen (102, 200a, 200b) in einem codierten Beleuchtungssystem (100), mit:
<claim-text>einer Verarbeitungseinheit (204), die so eingerichtet ist, dass sie den Lichtquellen einen Identifier zuweist, wobei der Identifier für jede Lichtquelle eine eindeutige Frequenz ermittelt, die dazu zu verwenden ist, um von jeder Lichtquelle abzugebendes Licht zu modulieren,</claim-text>
<b><u>dadurch gekennzeichnet,</u> dass</b> die Verarbeitungseinheit (204) so eingerichtet ist, dass sie den Identifier durch Ausführen der folgenden Schritte zuweist, wonach:
<claim-text>sie ein zur Verfügung stehendes Frequenzband in N nicht-einheitliche Frequenzbereiche unterteilt und</claim-text>
<claim-text>die eine eindeutige Frequenz aus einem Satz von gleichmäßig beabstandeten Frequenzen in einem jeweiligen der nicht-einheitlichen Frequenzbereiche auswählt.</claim-text></claim-text></claim><claim id="c-de-01-0015" num="0015"><claim-text>Empfänger (104, 300) zum Schätzen von Lichtquellen (102, 200a, 200b) zugewiesenen Identifiern in einem codierten Beleuchtungssystem (100), wobei die Identifier durch die Lichttreiber (110, 210) nach Anspruch 14 zugewiesen wurden, wobei der Empfänger (104, 300) umfasst:
<claim-text>einen Lichtempfänger (304);</claim-text>
<claim-text>eine Verarbeitungseinheit (302), die so eingerichtet ist, dass sie die folgenden Schritte ausführt, wonach:<!-- EPO <DP n="22"> -->
<claim-text>sie die eindeutige Frequenz für jede der Lichtquellen ermittelt, wobei die eindeutige Frequenz aus dem Satz gleichmäßig beabstandeter Frequenzen in einem jeweiligen von N nicht-einheitlichen Frequenzbereichen des zur Verfügung stehenden Frequenzbandes für Frequenzbereich <i>n</i> durch 1 ≤ <i>n ≤ N</i>-1 ausgewählt wird;</claim-text>
<claim-text>sie die eindeutige Frequenz aufgrund von Oberschwingung (<i>n</i>+1) von, von dem Lichtempfänger empfangenem Licht schätzt, und</claim-text>
<claim-text>sie den Identifier für jede der Lichtquellen aus der eindeutigen Frequenz ermittelt.</claim-text></claim-text></claim-text></claim></claims><claims mxw-id="PCLM56978541" lang="EN" load-source="patent-office"><!-- EPO <DP n="16"> --><claim id="c-en-01-0001" num="0001"><claim-text>A method for assigning identifiers to light sources (102, 200a, 200b) in a coded lighting system (100), said method being <b>characterised by</b> the steps of:
<claim-text>dividing (402) an available frequency band into <i>N</i> non-uniform frequency regions,</claim-text>
<claim-text>selecting (404), for each light source, a unique frequency from a set of uniformly spaced frequencies in a respective one of said non-uniform frequency regions, and</claim-text>
<claim-text>using (406) said unique frequency to modulate light to be outputted by said each light source, thereby assigning an identifier to said each light source.</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The method according to claim 1, wherein a spacing between said uniformly spaced frequencies differs between different ones of said frequency regions.</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The method according to claim 1, wherein a spacing between said uniformly spaced frequencies is greater for a low frequency region than for a high frequency region.</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The method according to any one of claims 1 to 3, wherein a width of said non-uniform frequency region is greater for a low frequency region than for a high frequency region.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The method according to any one of claims 1 to 4, wherein said frequency band is, between normalized frequency values 0 and 1, divided into said N frequency regions and wherein for 1 ≤ <i>n</i> ≤ <i>N-</i>1 a width of frequency region <i>n</i> is given by normalized frequency value 2/((n+1)(<i>n</i>+2)).</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>The method according to any one of claims 1 to 4, wherein said frequency band is, between normalized frequency values 0 and 1, divided into said N frequency regions and wherein for 1 ≤ <i>n ≤ N-</i>1 a lower limit for frequency region <i>n</i> is given by normalized frequency value (<i>n</i>-1)/(<i>n</i>+1).<!-- EPO <DP n="17"> --></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The method according to any one of claims 1 to 6, wherein a ratio between a number <i>L<sub>1</sub></i> of uniformly spaced frequencies in region <i>n</i> and a number <i>L<sub>2</sub></i> of uniformly spaced frequencies in region <i>n</i>+1 is <i>L<sub>1</sub></i>/<i>L<sub>2</sub>=</i>(2<i>+n)</i>/(1+<i>n).</i></claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The method according to any one of claims 1 to 7, wherein light to be outputted is modulated according to pulse width modulation, and wherein a duty cycle of said pulse width modulation depends on at least one of said unique frequency and a dimming level of said light source.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>The method according to claim 8, wherein duty cycle <i>p<sub>i</sub></i> of light source <i>i</i> in frequency band <i>n</i>, 1 ≤ <i>n</i> ≤ <i>N-</i>1<i>,</i> is set such that sin(π(n+1)<i>p<sub>i</sub></i>) ≠ 0.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>A method for estimating identifiers assigned to light sources (102, 200a, 200b) in a coded lighting system (100), wherein said identifiers have been assigned according to the method of any one of claims 1 to 9, comprising the steps of:
<claim-text>receiving light (501);</claim-text>
<claim-text>determining (502) said unique frequency for each of said light sources, said unique frequency being selected from said set of uniformly spaced frequencies in a respective one of said <i>N</i> non-uniform frequency regions of said available frequency band by, for frequency region <i>n,</i> 1 ≤ <i>n ≤ N-</i>1:
<claim-text>estimating (504) said unique frequency based on harmonic (<i>n</i>+1) of said received light, and</claim-text>
<claim-text>determining (506) said identifier for each of said light sources from said unique frequency.</claim-text></claim-text></claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>The method according to claim 10, further comprising, from said received light, estimating (510, 512) at least one of an amplitude and a phase of said received light.</claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>The method according to claim 11, further comprising, based on said amplitude, determining (514) individual illumination contributions of said light sources such that a reconstructed signal of harmonic <i>n</i> best match the received light.<!-- EPO <DP n="18"> --></claim-text></claim><claim id="c-en-01-0013" num="0013"><claim-text>The method according to any one of claims 10 to 12, further comprising before estimating said unique frequency for frequency region <i>n</i>+1: subtracting, from said received light, a signal for which said frequency in frequency region <i>n</i> has been assigned.</claim-text></claim><claim id="c-en-01-0014" num="0014"><claim-text>A light driver (110, 210) for assigning identifiers to light sources (102, 200a, 200b) in a coded lighting system (100), comprising:
<claim-text>a processing unit (204) arranged to assign an identifier to said light sources whereby, for each light source, said identifier determines a unique frequency to be used to modulate light to be outputted by said each light source,</claim-text>
<claim-text><b>characterised in that</b> the processing unit (204) is arranged to assign said identifier by performing the steps of:
<claim-text>dividing an available frequency band into N non-uniform frequency regions, and</claim-text>
<claim-text>selecting said unique frequency from a set of uniformly spaced frequencies in a respective one of said non-uniform frequency regions.</claim-text></claim-text></claim-text></claim><claim id="c-en-01-0015" num="0015"><claim-text>A receiver (104, 300) for estimating identifiers assigned to light sources (102, 200a, 200b) in a coded lighting system (100), wherein said identifiers have been assigned by the light driver (110, 210) according to claim 14, the receiver (104, 300) comprising:
<claim-text>a light receiver (304);</claim-text>
<claim-text>a processing unit (302) arranged to perform the steps of:
<claim-text>determining said unique frequency for each of said light sources, said unique frequency being selected from said set of uniformly spaced frequencies in a respective one of <i>N</i> non-uniform frequency regions of said available frequency band by, for frequency region <i>n</i>, 1 <i>≤ n ≤ N-</i>1<i>:</i>
<claim-text>estimating said unique frequency based on harmonic (<i>n</i>+1) of light received by said light receiver, and</claim-text>
<claim-text>determining said identifier for each of said light sources from said unique frequency.</claim-text></claim-text></claim-text></claim-text></claim></claims><claims mxw-id="PCLM56978542" lang="FR" load-source="patent-office"><!-- EPO <DP n="23"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé d'attribution d'identificateurs à des sources lumineuses (102, 200a, 200b) dans un système d'éclairage codé (100), ledit procédé étant <b>caractérisé par</b> les étapes suivantes :
<claim-text>la division (402) d'une bande de fréquences disponible en N régions de fréquences non uniformes,</claim-text>
<claim-text>la sélection (404), pour chaque source lumineuse, d'une fréquence unique à partir d'un ensemble de fréquences espacées uniformément dans l'une desdites régions de fréquences non uniformes respectives, et</claim-text>
<claim-text>l'utilisation (406) de ladite fréquence unique pour moduler la lumière qui sera générée par chaque dite source lumineuse, permettant ainsi d'attribuer un identificateur à chaque dite source lumineuse.</claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, dans lequel un espacement entre lesdites fréquences espacées uniformément diffère entre les différentes régions parmi lesdites régions de fréquences.</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon la revendication 1, dans lequel un espacement entre lesdites fréquences espacées uniformément est plus grand pour une région de basse fréquence que pour une région de haute fréquence.</claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon l'une quelconque des revendications 1 à 3, dans lequel une largeur de ladite région de fréquences non uniforme est plus grande pour une région de basse fréquence que pour une région de haute fréquence.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon l'une quelconque des revendications 1 à 4, dans lequel ladite bande de fréquences est, entre des valeurs de fréquences normalisées 0 et 1, divisée en N régions de fréquences et dans lequel pour 1 ≤ n ≤ N - 1 une largeur de région de fréquences n est donnée par la valeur de fréquence normalisée 2/((n + 1) (n + 2)).<!-- EPO <DP n="24"> --></claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Procédé selon l'une quelconque des revendications 1 à 4, dans lequel ladite bande de fréquences est, entre des valeurs de fréquences normalisées 0 et 1, divisée en N dites régions de fréquences et dans lequel pour 1 ≤ n ≤ N - 1 une limite inférieure pour la région de fréquences n est donnée par la valeur de fréquence normalisée (n - 1)/(n + 1).</claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Procédé selon l'une quelconque des revendications 1 à 6, dans lequel un rapport entre un nombre L<sub>1</sub> de fréquences espacées uniformément dans une région n et un nombre L<sub>2</sub> de fréquences espacées uniformément dans la région n + 1 est L<sub>1</sub>/L<sub>2</sub> = (2 + n)/(1 + n).</claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Procédé selon l'une quelconque des revendications 1 à 7, dans lequel la lumière devant être générée sera modulée selon une modulation de largeur d'impulsion, et dans lequel un cycle de service de ladite modulation de largeur d'impulsion dépend d'au moins un de ladite fréquence unique et d'un niveau de gradation de ladite source lumineuse.</claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Procédé selon la revendication 8, dans lequel le cycle de service p<sub>i</sub> de la source lumineuse i dans la bande de fréquences n, 1 ≤ n ≤ N - 1, est défini de telle sorte que sin(π(n + 1)p<sub>i</sub>) ≠ 0.</claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Procédé d'estimation d'identificateurs attribués à des sources de lumière (102, 200a, 200b) dans un système d'éclairage codé (100), dans lequel lesdits identificateurs ont été attribués en fonction du procédé selon l'une quelconque des revendications 1 à 9, comprenant les étapes suivantes :
<claim-text>la réception de lumière (501) ;</claim-text>
<claim-text>la détermination (502) de ladite fréquence unique pour chacune desdites sources lumineuses, ladite fréquence unique étant sélectionnée à partir dudit ensemble de fréquences espacées uniformément dans l'une desdites N régions de fréquences non uniformes respectives de ladite bande de fréquences disponible par, pour la région de fréquence n, 1 ≤ n ≤ N - 1 :
<claim-text>en estimant (504) ladite fréquence unique sur la base de l'harmonique (n + 1) de ladite lumière reçue, et<!-- EPO <DP n="25"> --></claim-text>
<claim-text>en déterminant (506) ledit identificateur pour chacune desdites sources lumineuses à partir de ladite fréquence unique.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Procédé selon la revendication 10, comprenant en outre, à partir de ladite lumière reçue, l'estimation (510, 512) d'au moins l'une d'une amplitude et d'une phase de ladite lumière reçue.</claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>Procédé selon la revendication 11, comprenant en outre, sur la base de ladite amplitude, la détermination (514) des contributions d'éclairement individuelles desdites sources lumineuses telles qu'un signal reconstitué de l'harmonique n qui s'adaptent le mieux à la lumière reçue.</claim-text></claim><claim id="c-fr-01-0013" num="0013"><claim-text>Procédé selon l'une quelconque des revendications 10 à 12, comprenant en outre avant l'estimation de ladite fréquence unique pour la région de fréquences n + 1 : la soustraction, de ladite lumière reçue, d'un signal pour lequel ladite fréquence de la région de fréquences n a été attribuée.</claim-text></claim><claim id="c-fr-01-0014" num="0014"><claim-text>Pilote de lumière (110, 210) destiné à affecter des identificateurs à des sources lumineuses (102, 200a, 200b) dans un système d'éclairage codé (100), comprenant :
<claim-text>une unité de traitement (204) conçue pour affecter un identificateur auxdites sources lumineuses moyennant quoi, pour chaque source lumineuse, ledit identificateur détermine une fréquence unique qui sera utilisée pour moduler la lumière qui sera générée par chaque dite source lumineuse, <b>caractérisé en ce que</b> l'unité de traitement (204) est conçue pour attribuer ledit identificateur en réalisant les étapes suivantes :
<claim-text>la division d'une bande de fréquences disponible en N régions de fréquences non uniformes,</claim-text>
<claim-text>la sélection de ladite fréquence unique à partir d'un ensemble de fréquences espacées uniformément dans l'une desdites régions de fréquences non uniformes respectives.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0015" num="0015"><claim-text>Récepteur (104, 300) pour estimer les identificateurs attribués aux sources lumineuses (102, 200a, 200b) dans un système d'éclairage codé (100), dans lequel lesdits<!-- EPO <DP n="26"> --> identificateurs ont été attribués par le pilote de lumière (110, 210) selon la revendication 14, le récepteur (104, 300) comprenant :
<claim-text>un récepteur de lumière (304) ;</claim-text>
<claim-text>une unité de traitement (302) conçue pour réaliser les étapes suivantes :
<claim-text>la détermination de ladite fréquence unique pour chacune desdites sources lumineuses, ladite fréquence unique étant choisie à partir dudit ensemble de fréquences espacées uniformément dans l'une des N régions de fréquences non uniformes respectives de ladite bande de fréquences disponible par, pour la région de fréquence n, 1 ≤ n ≤ N - 1 :
<claim-text>l'estimation de ladite fréquence unique sur la base de l'harmonique (n+1) de la lumière reçue par ledit récepteur de lumière, et</claim-text>
<claim-text>la détermination dudit identificateur pour chacune desdites sources lumineuses à partir de ladite fréquence unique.</claim-text></claim-text></claim-text></claim-text></claim></claims><drawings mxw-id="PDW16668607" load-source="patent-office"><!-- EPO <DP n="27"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="135" he="157" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0002" num="2a,2b,3"><img id="if0002" file="imgf0002.tif" wi="121" he="233" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0003" num="4"><img id="if0003" file="imgf0003.tif" wi="74" he="185" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0004" num="5"><img id="if0004" file="imgf0004.tif" wi="157" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0005" num="6"><img id="if0005" file="imgf0005.tif" wi="165" he="217" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0006" num="7"><img id="if0006" file="imgf0006.tif" wi="165" he="197" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="108" he="218" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
