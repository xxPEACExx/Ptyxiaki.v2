<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-1309146-B1" country="EP" doc-number="1309146" kind="B1" date="20140101" family-id="8179162" file-reference-id="306722" date-produced="20180822" status="corrected" lang="DE"><bibliographic-data><publication-reference fvid="146554331" ucid="EP-1309146-B1"><document-id><country>EP</country><doc-number>1309146</doc-number><kind>B1</kind><date>20140101</date><lang>DE</lang></document-id></publication-reference><application-reference ucid="EP-01126246-A" is-representative="YES"><document-id mxw-id="PAPP154828254" load-source="docdb" format="epo"><country>EP</country><doc-number>01126246</doc-number><kind>A</kind><date>20011105</date><lang>DE</lang></document-id><document-id mxw-id="PAPP232906062" load-source="docdb" format="original"><country>EP</country><doc-number>01126246.6</doc-number><date>20011105</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140447052" ucid="EP-01126246-A" load-source="docdb"><document-id format="epo"><country>EP</country><doc-number>01126246</doc-number><kind>A</kind><date>20011105</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130731</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988098662" load-source="docdb">H04M  17/00        20060101ALI20020531BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988103288" load-source="docdb">H04L  29/08        20060101A I20070721RMEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988109061" load-source="docdb">H04L  29/06        20060101AFI20020531BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988123638" load-source="docdb">H04L  12/24        20060101A I20051008RMEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988132214" load-source="docdb">H04L  12/56        20060101A I20051008RMEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988137745" load-source="docdb">H04L  12/14        20060101ALI20020531BHEP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1699733822" load-source="docdb" scheme="CPC">H04W  76/30        20180201 LA20180203BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988097418" load-source="docdb" scheme="CPC">H04M2215/0116      20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988100209" load-source="docdb" scheme="CPC">H04M2215/202       20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988102703" load-source="docdb" scheme="CPC">H04L  41/00        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988103983" load-source="docdb" scheme="CPC">H04M2215/22        20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988104368" load-source="docdb" scheme="CPC">H04L  67/146       20130101 LI20131017BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988104449" load-source="docdb" scheme="CPC">H04M2215/48        20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988105107" load-source="docdb" scheme="CPC">H04W  88/182       20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988107429" load-source="docdb" scheme="CPC">H04L  65/1006      20130101 FI20131025BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988108377" load-source="docdb" scheme="CPC">H04M  15/56        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988111515" load-source="docdb" scheme="CPC">H04M  15/88        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988113865" load-source="docdb" scheme="CPC">H04M2215/0176      20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988119073" load-source="docdb" scheme="CPC">H04L  12/14        20130101 LI20131025BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988123059" load-source="docdb" scheme="CPC">H04M2215/32        20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988126316" load-source="docdb" scheme="CPC">H04M  17/00        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988129848" load-source="docdb" scheme="CPC">H04M  15/67        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988130201" load-source="docdb" scheme="CPC">H04L  67/14        20130101 LI20131017BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988131997" load-source="docdb" scheme="CPC">H04M2215/2026      20130101 LA20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988136365" load-source="docdb" scheme="CPC">H04W   4/24        20130101 LI20130915BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988136667" load-source="docdb" scheme="CPC">H04L  29/06027     20130101 LA20130915BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132195477" lang="DE" load-source="patent-office">Verfahren zur Kommunikation zweier Netzeinrichtungen auf Basis einer Ende-zu-Ende-Verbindung und Netzeinrichtung dafür</invention-title><invention-title mxw-id="PT132195478" lang="EN" load-source="patent-office">Method of communication between two network devices based on an end-to-end connection and network device adapted to carry out the method</invention-title><invention-title mxw-id="PT132195479" lang="FR" load-source="patent-office">Procédé de communication entre deux dispositifs de réseau basée sur une connection de bout en bout et dispositif adapté au procédé</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918165938" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>SIEMENS AG</last-name><address><country>DE</country></address></addressbook></applicant><applicant mxw-id="PPAR918139101" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>SIEMENS AKTIENGESELLSCHAFT</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918149385" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MAYER GEORG</last-name><address><country>DE</country></address></addressbook></inventor><inventor mxw-id="PPAR918135812" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MAYER, GEORG</last-name></addressbook></inventor><inventor mxw-id="PPAR918999456" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MAYER, GEORG</last-name><address><street>Griesser 2A</street><city>83714 Miesbach</city><country>DE</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR918999457" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Siemens Aktiengesellschaft</last-name><iid>101362070</iid><address><street>Wittelsbacherplatz 2</street><city>80333 München</city><country>DE</country></address></addressbook></assignee></assignees></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548876383" load-source="docdb">AT</country><country mxw-id="DS548888291" load-source="docdb">BE</country><country mxw-id="DS548989386" load-source="docdb">CH</country><country mxw-id="DS548888292" load-source="docdb">CY</country><country mxw-id="DS548832858" load-source="docdb">DE</country><country mxw-id="DS548888293" load-source="docdb">DK</country><country mxw-id="DS548988517" load-source="docdb">ES</country><country mxw-id="DS548991968" load-source="docdb">FI</country><country mxw-id="DS548991969" load-source="docdb">FR</country><country mxw-id="DS548832859" load-source="docdb">GB</country><country mxw-id="DS548888294" load-source="docdb">GR</country><country mxw-id="DS548989387" load-source="docdb">IE</country><country mxw-id="DS548991970" load-source="docdb">IT</country><country mxw-id="DS548888295" load-source="docdb">LI</country><country mxw-id="DS548876384" load-source="docdb">LU</country><country mxw-id="DS548832860" load-source="docdb">MC</country><country mxw-id="DS548876385" load-source="docdb">NL</country><country mxw-id="DS548988518" load-source="docdb">PT</country><country mxw-id="DS548876386" load-source="docdb">SE</country><country mxw-id="DS548888296" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63957738" lang="DE" load-source="patent-office"><!-- EPO <DP n="1"> --><p id="p0001" num="0001">Die Erfindung bezieht sich auf ein Verfahren zur Kommunikation zweier Netzeinrichtungen auf Basis einer Ende-zu-Ende-Verbindung mit den oberbegrifflichen Merkmalen des Patentanspruchs 1 bzw. Netzeinrichtungen dafür.</p><p id="p0002" num="0002">Bei paketorientierten Netzen mit einer Teilnehmerorientierten Struktur sind Verbindungsprotokolle bekannt, die spezielle Ende-zu-Ende-Verbindungen zwischen zwei miteinander kommunizierenden Stationen bzw. Endpunkten ermöglichen, bei denen ausschließlich die Endpunkte - im Gegensatz zu den Netzelementen - Signalisierungs-Nachrichten generieren können.</p><p id="p0003" num="0003">Beispielhaft für ein derartiges Protokoll ist das sogenannte Session Initiation Protocol (SIP (Sitzungsinitialisierungsprotokoll)), das im RFC2543bis-05 Draft der IETF Internet Engineering Task Force)beschrieben ist. Das SIP erlaubt nur den Aufbau von Ende-zu-Ende-Verbindungen, bei denen in den Kopfabschnitten von zu übertragenden Datenpaketen eine feste Ruf-Identifizierungskennung bzw. Call-ID sowie feste Zu- und Von-Kopfabschnittsinformationen bzw. To und From Header eingetragen sind. Eine Verbindung bzw. darüber zu übertragende Datenpakete werden somit aus der Kombination To/From/Call-ID-Kopfabschnitten eindeutig festgelegt.</p><p id="p0004" num="0004">Zusätzlich wird bei SIP jeder Nachricht, die auf einer solchen Verbindung in eine Richtung gesendet wird, eine fortlaufende, sich erhöhende Nummer zugewiesen, die sogenannte CSeq. Aus diesem Grund können Netzelemente zwischen den Endpunkten keine Nachrichten auf einer bestehenden Call-ID senden, da die sich erhöhende Nummer sonst aus der Synchronisation laufen würden.<!-- EPO <DP n="2"> --></p><p id="p0005" num="0005">SIP erlaubt daher ausschließlich den Endpunkten einer Verbindung, neue Nachrichten zu senden. Ein zwischen Endpunkten liegendes Netzelement ("Proxy") kann somit nicht über die gleiche Verbindung mit einem der Endpunkte oder einem anderen Netzelement dazwischen kommunizieren. Zwischen diesen Endpunkten befindliche Netzelemente, die also keine Endpunkte der Verbindung darstellen, haben folglich keine oder nur bedingte Berechtigung zur Manipulation der Verbindung oder der auf ihr gesendeten Nachrichten.</p><p id="p0006" num="0006">Bei SIP wird davon ausgegangen, dass im Netz besondere angebotene Dienste bei Anwendungsservern bereit gestellt werden, die dann einen Endpunkt einer speziellen Verbindung zwischen dem Dienstnutzer und dem Anwendungsserver darstellen müssen.</p><p id="p0007" num="0007">Bei Tele-Kommunikationsnetzen gemäß z.B. dem von der 3GPP spezifizierten IMS (3GPP IMS: 3rd Generation Partnership Project Internet Multimedia Subsystem) sind hingegen auf diesen Vorstellungen aufbauende Dienste geplant. Im 3GPP IMS gibt es für jeden Teilnehmer einen Heimat- bzw. Home-Proxy, der die Basissteuerung für die Rufe, Registrierung, Authentifizierung etc. des Teilnehmers übernimmt. An diesem Home-Proxy, der auch als dienende Verbindungszustands- und/oder Dienstezustands-Steuerfunktion S-CSCF (Serving Call State Control Function) bezeichnet wird, sind über SIP auch alle Anwendungs-Server angeschlossen, die dieser Teilnehmer nutzen kann bzw. darf.</p><p id="p0008" num="0008">Kritisch sind z.B. Pre-Paid-Anwendungs-Server, die vorbezahlte, sogenannte Pre-Paid-Karten und Konten verwalten. Alle Rufe eines Teilnehmers werden über den Home-Proxy zum Pre-Paid-Server geleitet und von dort wieder zurück zum Home-Proxy, damit dieser die Verbindung gegebenenfalls an weitere Server weiterleiten kann. Dabei gibt es Lösungen, bei denen der Pre-Paid-Server selbst nicht die Budgetverwaltung für jede Ruf des Teilnehmers steuert sondern lediglich den Kontostand bekannt gibt und es dem Home-Proxy erlaubt, einen Teilbetrag<!-- EPO <DP n="3"> --> von diesem Konto abzubuchen. Dieses Geld kann dann vom User verbraucht werden. Geht der Teilbetrag zur Neige fordert der Home-Proxy neue Beträge vom Pre-Paid-Server an. Ist auch dort kein Geld mehr vorhanden, teilt dieser dem Home-Proxy mit, den Call auszulösen. Problematisch ist dies jedoch bei reinen Endpunkt-zu-Endpunkt-Verbindungen, da für die Auslösung bzw. Beendigung der Hauptverbindung ein entsprechender Eingriff von einem zwischen oder abseits der Endpunkte liegenden Proxy vorgenommen werden müsste, was jedoch aus vorstehenden Gründen nicht möglich ist. Insbesondere kann keine sogenannte BYE-Nachricht zum Auslösen einer Verbindung abgesendet werden. Darüberhinaus ist auch bereits die Kommunikation zwischen dem Home-Proxy und dem Pre-Paid-Server über die Call-ID der Endepunkt-zu-Endpunkt-Verbindung nicht möglich.</p><p id="p0009" num="0009">In vielen Fällen ist daher eine Generierung von Nachrichten durch Netzelemente wünschenswert. Ein Beispiel ist eine solche Vergebührung von Rufen, welche für gewöhnlich von mehreren Netzelementen durchgeführt wird, die notwendigerweise untereinander auf Basis einer bestehenden Ende-zu-Ende-Verbindung kommunizieren müssen ohne dass die dafür generierten Nachrichten zwingend an die Endpunkte weitergeleitet werden.</p><p id="p0010" num="0010">Weiterhin wäre es in einigen Netzen vorteilhaft, wenn Netzelemente bestehende Verbindungen zwischen zwei Endpunkten auslösen können.</p><p id="p0011" num="0011">Eine mögliche Lösung des Problems wäre ein sogenannter Backto-Back-User-Agent (B2BUA), der aber in seiner Implementierung sehr aufwendig ist und den Aufbau und die Abwicklung von Rufen unnötig verlangsamt.</p><p id="p0012" num="0012">Eine weitere alternative Lösung wäre die Verwendung der sogenannten REFER-Nachricht. Über diese Nachricht kann ein Netzelement in einer speziellen Verbindung ein Endgerät dazu auffordern, eine bestimmte, vom Netzelement festgelegte SIP-Nachricht<!-- EPO <DP n="4"> --> für eine eindeutig identifizierte Verbindung zu senden. Über diesen Mechanismus kann ein Netzelement ein Endgerät dazu auffordern, eine BYE-Nachricht zu senden. Aus Sicherheitsgründen, z.B. zur Vermeidung von Manipulationsmöglichkeiten von Endgeräten durch den Benutzer, ist es in einigen Netzumgebungen, z.B. 3GPP IMS notwendig, dass die Verbindungsauslösungs-Nachricht (BYE) in diesen Fällen nicht vom Endgerät erwartet wird.</p><p id="p0013" num="0013">Aus der Druckschrift <patcit id="pcit0001" dnum="EP1134962A1"><text>EP1134962A1</text></patcit> ist ein Verfahren zum Erfassen von Kosten in einem Kommunikationsnetz bekannt. Hierzu baut ein sog. Service Switching Point Verbindungen zu einem Dienstanbieter und einem Kontoknoten auf.</p><p id="p0014" num="0014">Weiterhin ist ein Verfahren zur Vergebührung von Internet-Diensten aus dem Dokument <patcit id="pcit0002" dnum="EP0905961A2"><text>EP0905961A2</text></patcit> bekannt. Hierbei wird bei Zugriff auf einen Internet-Dienst zwischen diesem und einer Diensteinheit eine zusätzliche Steuerverbindung aufgebaut, über die Gebührendaten übertragen werden.</p><p id="p0015" num="0015">Ferner ist aus dem Internet-Draft "3pcc using the REFER method" von M. Bhatia vom 16. Okober 2001 bekannt, mittels einer sog. REFER-Nachricht ein Endgerät dazu aufzufordern eine SIP-Nachricht für eine eindeutig identifizierte Verbindung zu senden.</p><p id="p0016" num="0016">Aus dem Thread der SIP Implementor's Mailing List "[Simple] Questions on draft-rosenberg-impp-presence-01 (was: RE: [SIP] Informing UA after network initiated deregistration?)" von R. Zwart et al. vom 23. 3. 2001 ist darüber hinaus die Verwendung eines Registrars als SIP-Proxy bekannt.</p><p id="p0017" num="0017">Den vorgenannten Dokumenten ist jedoch kein Hinweis auf die oben diskutierte, bei SIP-Verbindungen auftretende Problematik zu entnehmen.</p><p id="p0018" num="0018">Die Aufgabe der Erfindung besteht darin, ein Verfahren vorzuschlagen, das Kommunikationen zwischen Netzeinrichtungen<!-- EPO <DP n="5"> --> einer reinen Endpunkt-zu-Endpunkt-Verbindung ermöglicht, wobei zumindest eine dieser Netzeinrichtungen keiner der Endpunkte ist.</p><p id="p0019" num="0019">Diese Aufgabe wird durch das Verfahren zur Kommunikation von Netzeinrichtungen auf Basis einer Ende-zu-Ende-Verbindung mit den Merkmalen des Patentanspruchs 1 bzw. eine Netzeinrichtung dafür mit den Merkmalen des Patentanspruchs 6 gelöst.</p><p id="p0020" num="0020">Vorteilhafte Ausgestaltungen sind Gegenstand von abhängigen Ansprüchen.</p><p id="p0021" num="0021">Unter Netzeinrichtung sind dabei verschiedenartigste Einrichtungen und Netzelemente zu verstehen, insbesondere eigenständige Datenendgeräte, Server, Telefone, Computer, Netzschnittstellen und dergleichen. Die Verbindungen können leitungsgebundene oder funkgestützte Verbindungen sein.</p><p id="p0022" num="0022">Das Verfahren ermöglicht die Korrelation zweier Ende-zu-Ende-Verbindungen in einem Paket-basierten Netz. Das verwendete Verbindungsprotokoll ist dabei ein Ende-zu-Ende-Protokoll, d.h. Netzelemente, die keine Endpunkte der Verbindung darstellen, haben für gewöhnlich nur bedingte Berechtigung zur Manipulation der eigentlichen Verbindung oder der auf ihr gesendeten Nachrichten.<!-- EPO <DP n="6"> --></p><p id="p0023" num="0023">Die Korrelation von zwei Ende-zu-Ende-Verbindungen ist dabei unabhängig vom Zweck der Korrelation möglich. Eine unabhängige Kommunikation von Netzelementen ist auf Basis einer bereits parallel bestehenden Haupt-Verbindung oder auf Basis neu aufzubauender Verbindungen möglich. Insbesondere ist für die Kommunikation von Netzelementen auch die Verwendung eines eigenen, insbesondere neuen Verbindungstyps möglich.</p><p id="p0024" num="0024">Besonders vorteilhaft und von eigenständigem erfinderischen Gehalt ist auch die Möglichkeit des Auslösens, d.h. Beendens einer Ende-zu-Ende-Verbindung zwischen zwei Endpunkten durch ein Netzelement zwischen diesen.</p><p id="p0025" num="0025">Beim Anfordern der Korrelierung der weiteren Verbindung mit der ersten Verbindung eine Anweisung zu übertragen, welche die empfangende Netzeinrichtung anweist, die Verbindung nicht anzunehmen bzw. nicht aufzubauen, wenn die Funktionalität der Verbindungs-Korrelation von der empfangenen Netzeinrichtung nicht unterstützt wird, ist besonders vorteilhaft, da dadurch falsche Interpretationen bzw. Auswertungen vermieden werden. Dazu können bei SIP dort für sich bekannte Mechanismen verwendet werden.</p><p id="p0026" num="0026">Eine Netzeinrichtung zum Durchführen eines solchen Verfahrens weist vorzugsweise zumindest eine Schnittstelle zum Aufbauen von zumindest zwei voneinander unabhängigen Verbindungen und eine Steuereinrichtung zum Verarbeiten und/oder Bereitstellen von über die Verbindungen übertragenen bzw. zu übertragenden Informationen und/oder Anweisungen und zum Steuern des Funktionen der Netzeinrichtung auf, wobei die Steuereinrichtung die Informationen und/oder Anweisungen auf einer der Verbindungen unter Bezug auf die andere Verbindung verarbeitet bzw. bereitstellt.</p><p id="p0027" num="0027">Insbesondere ist mit diesen Verfahren und Netzeinrichtungen der Aufbau von Vergebührungssystemen möglich, bei denen die<!-- EPO <DP n="7"> --> eigentlichen Vergebührungseinrichtungen nicht direkt bei oder in den Netzeinrichtungen bereit stehen müssen.</p><p id="p0028" num="0028">Ausführungsbeispiele werden nachfolgend anhand der Zeichnung näher erläutert. Es zeigen:
<dl id="dl0001"><dt>Fig. 1</dt><dd>zwei Endpunkte und eine Vielzahl von dazwischen angeordneten Netzelementen gemäß einem ersten Ausführungsbeispiel für eine Kommunikation zwischen solchen Netzelementen über eine zur Hauptverbindung korrelierte Verbindung;</dd><dt>Fig. 2</dt><dd>ein dazu alternatives Ausführungsbeispiel und</dd><dt>Fig. 3</dt><dd>eine derartige Anordnung mit einem Netzelement, welches eine Verbindung zwischen den Endpunkten beenden lässt.</dd></dl></p><p id="p0029" num="0029">Wie aus <figref idrefs="f0001">Fig. 1</figref> ersichtlich, findet eine Kommunikation in einem Netz zwischen zwei Endpunkten UA-A und UA-B gemäß einem Ende-zu-Ende-Protokoll statt, wobei eine Verbindung, nachfolgend auch als Session-AB bezeichnet, über eine Vielzahl dazwischen liegender Netzelemente P1 - P5 führt. Die Netzelemente P1 - P5 können nicht direkt auf die Verbindung Session-AB einwirken bzw. keine eigenen Datenpakete auf dieser Verbindung Session-AB versenden. Die Endpunkte UA-A, UA-B und die Netzelemente P1 - P5 können dabei je nach Netztyp verschiedenartigste Einrichtungen sein, z.B. zellulare Funkstationen, Datenserver, vernetzte Computer, Proxys und/oder Netzknoten zur Verwaltung und Steuerung von Netzressourcen. Die nachfolgende Unterscheidung zwischen Endpunkten und Netzelementen dient lediglich zur einfacheren Unterscheidbarkeit.</p><p id="p0030" num="0030">Als Beispiel für ein derartiges Ende-zu-Ende-Protokoll sei das SIP aufgeführt, bei dem in den Kopfabschnitten von zu übertragenden<!-- EPO <DP n="8"> --> Datenpaketen die feste Ruf-Identifizierungskennung bzw. Call-ID sowie feste Zu- und Von-Kopfabschnittsinformationen bzw. To und From Header eingetragen werden. Zusätzlich wird bei jeder Nachricht bzw. jedem Datenpaket eine fortlaufende, sich erhöhende Nummer im Kopfabschnitt eingetragen, die sogenannte CSeq.</p><p id="p0031" num="0031">Gemäß dem ersten Ausführungsbeispiel soll vom Endpunkt UA-A ausgehend eine Verbindung Session-AB zwischen den beiden Endpunkten UA-A und UA-B aufgebaut werden. Dazu ruft der erste Endpunkt UA-A den zweiten Endpunkt UA-B, woraufhin die gewünschte Verbindung Session-AB über die Netzelemente P1, P2, P3, P4 und P5 aufgebaut wird. Die Netzelemente P1 - P5, sogenannte Proxys, erzwingen, dass alle Nachrichten bzw. Datenpakete der Verbindung Session-AB über sie weitergeleitet werden. Dazu tragen sie sich bei der ersten Verbindungsanforderung, bei SIP einer sogenannten INVITE-Nachricht bzw. einem INVITE-Protokollelement, in den Datensatz-Leitinformation-Aufzeichnungs-Kopfabschnitt bzw. Record-Route Header ein. Die Verbindung Session-AB wird mit den Methoden des verwendeten Signalisierungsprotokolls aufgebaut, im Falle von SIP dem Senden von INVITE, Abwarten einer sogenannten 200 OK-Nachricht und dem Senden einer Bestätigungsnachricht der sogenannten ACK-Nachricht.</p><p id="p0032" num="0032">Anstelle der Eintragung der einzelnen Netzelementadressen in den Datensatz-Leitinformations-Kopfabschnitt können auch entsprechende Informationen, z.B. die Verbindungs-Identifizierungsinformation Call-ID mit Absender- und Zieladresse in einem entsprechenden Speicher der Netzelemente P1 - P5 eingetragen und beim späteren Eintreffen von Datenpaketen zu deren Weiterleitung verwendet werden.</p><p id="p0033" num="0033">Die Verbindung Session-AB wird bei SIP durch folgende beispielhaften Daten im Kopfabschnitt von Datenpaketen eindeutig identifiziert:<br/>
<!-- EPO <DP n="9"> -->From: ua-a@home1.net;tag=123<br/>
To: ua-b@home2.net;tag=456<br/>
Call-ID: session-ab@home1.net<br/>
UA-A --- P1 ---- P2 ---- P3 ---- P4 ---- P5 ---- UA-B.</p><p id="p0034" num="0034">Dabei beinhaltet die Von- bzw. From-Information die Adresse des ersten Endpunktes UA-A, von dem das Datenpaket stammt, hier im Format einer Internetadresse, und ein sogenanntes Tag, also eine Kennzeichnung in Art einer Fahne bzw. eines Etiketts. Die Zu- bzw. To-Information beinhaltet die Zieladresse, also die Adresse des zweiten Endpunkts UA-B. Das Tag der To-Adresse wird dabei vom Zielknoten generiert und angefügt. Dies geschieht, um verschiedene aufgesplittete (forked) Verbindungen, die aus einer Verbindung hervorgingen, eindeutig voneinander unterscheiden zu können. Die Ruf-Identifizierungsinformation Call-ID dient zum Zuordnen des Datenpakets zu einer bestimmten Verbindung, hier also der Verbindung Session-AB. Außerdem wird im Kopfabschnitt beim dargestellten Beispiel eine Information über die einzelnen Stationen und Netzelemente P1 - P5 auf der Verbindung Session-AB mitgeführt.</p><p id="p0035" num="0035">Beim vorliegenden Ausführungsbeispiel soll nun zwischen den Netzelementen P3 und P4 ein Austausch von Nachrichten stattfinden, wobei die Nachrichten einen direkten Bezug zu der Verbindung Session-AB haben, aber aufgrund der SIP-Beschränkungen nicht direkt über die Verbindung Session-AB übertragen werden können.</p><p id="p0036" num="0036">Um den Nachrichtenaustausch zu ermöglichen, baut das erste (in der Fig. das dritte von links) dieser Netzelemente P3 eine neue Verbindung zum zweiten (in der Fig. dem vierten von links) dieser Netzelemente P4 auf. Beim Verbindungsaufbau werden zusammen mit den üblichen Informationen, insbesondere Kopfabschnittinformationen, Zusatzinformationen übertragen, die eine Korrelation mit der Verbindung Session-AB herstellen.<!-- EPO <DP n="10"> --> Dabei handelt es sich bei beispielsweise einer Umsetzung bei SIP um-neue Protokollerweiterungen-gegenüber dem derzeitigen Protokoll.</p><p id="p0037" num="0037">Zusätzlich kann der Kopfabschnitt beim Verbindungsaufbau mittels z.B. der INVITE-Nachricht gemäß SIP vorteilhafterweise ein Feld (Require: Header) enthalten, welches das zweite Netzelement P4 anweist, die Verbindung nicht anzunehmen, wenn die Funktionalität der Verbindungs-Korrelation nicht unterstützt wird. Die Korrelations-verbindung zwischen den beiden Netzelementen P3 und P4 wird nachfolgend auch als Session-P34 bezeichnet.</p><p id="p0038" num="0038">Die Verbindung Session-P34 wird dann beispielsweise durch folgende Daten im Kopfabschnitt von Datenpaketen eindeutig identifiziert:
<ul><li>INVITE p4.home1.net</li><li>From: p3.home1.net;tag=789</li><li>To: p4.homel.net</li><li>Call-ID: session-p34@p3.homel.net</li><li>Require: correlate</li><li>Correlate-From: ua-a@homel.net;tag=123</li><li>Correlate-To: ua-b@home2.net;tag=456</li><li>Correlate-Call-ID: session-ab@home1.net</li></ul></p><p id="p0039" num="0039">Dabei folgt der INVITE-Nachricht die Adresse oder der Name des gerufenen Netzelements P4. Die Felder From, To und Call-ID sind entsprechend dem vorstehenden Kopfabschnittsbeispiel mit hier den Daten der beiden Netzelemente P3 bzw. P4 belegt.</p><p id="p0040" num="0040">Es folgt ein Block mit zusätzlichen Informationen, die zum Korrelieren der neu aufzubauenden Verbindung Session-P34 mit der bestehenden Verbindung Session-AB dienen. Diese Informationen sind vorzugsweise eine Anforderung "Require" der Korrelation "correlate" mit einer anderen Verbindung, Daten, insbesondere Adressen der Endpunkte UA-A und UA-B der zu korrelierenden<!-- EPO <DP n="11"> --> Verbindung Session-AB und eine Korrelierungs-Ruf-Identifizierungsinformation Correlate-Call-ID zum Zuordnen des Datenpakets zu der bestimmten Korrelations-verbindung Session-P34.</p><p id="p0041" num="0041">Natürlich sind auch andere Arten von Informationen einsetzbar, sofern diese eine eindeutige Zuordnung der Datenpakete zu einerseits der parallelen Verbindung Session-P34 und andererseits der Hauptverbindung Session-AB ermöglichen. Im einfachsten Fall reicht auch ein einziges Feld, z.B. die Korrelierungs-Ruf-Identifizierungsinformation Correlate-Call-ID, wenn entsprechende Verbindungs- und/oder Zuordnungsdaten in den einzelnen Netzelementen P1 - P5 und/oder den Endpunkten UA-A, UA-B bereitstehen.</p><p id="p0042" num="0042">Nach dem Empfang der Verbindungsanforderung "INVITE P4.home1.net" führt das zweite Netzelement P4 den Verbindungsaufbau nun zu Ende und sendet eine positive Antwort an das erste Netzelement P3 zurück. Die Antwort, bei SIP z.B. eine "200 OK"-Nachricht kann dann beispielsweise durch folgende Daten im Kopfabschnitt eindeutig identifiziert werden, wobei die Inhalte entsprechend den vorstehenden Kopfabschnitten belegt sind:
<ul><li>200 OK</li><li>From: p3.homel.net;tag=789</li><li>To: p4.home1.net;tag=098</li><li>Call-ID: session-p34@p3.homel.net</li><li>Correlate-From: ua-a@home1.net;tag=123</li><li>Correlate-To: ua-b@home2.net;tag=456</li><li>Correlate-Call-ID: session-ab@home1.net.</li></ul></p><p id="p0043" num="0043">Dadurch sind die beiden Verbindungen Session-AB und Session-P34 miteinander verbunden.</p><p id="p0044" num="0044">Nachrichten die nun auf Session-P34 zwischen den beiden Netzelementen P3 und P4 ausgetauscht werden, sind nun von allen<!-- EPO <DP n="12"> --> beteiligten Netzelementen als zusätzliche Bestandteile von Session-AB zu sehen.</p><p id="p0045" num="0045">Insbesondere werden beide Verbindungen Session-AB und Session-P34 unabhängig voneinander mit entsprechenden Nachrichten, bei SIP BYE-Nachrichten, ausgelöst bzw. beendet.</p><p id="p0046" num="0046">Neben der Möglichkeit, zu einer bestehenden Verbindung Session-AB eine neue Verbindung über zumindest einen Teil der Strecke parallel aufzubauen, ist es z.B. auch möglich, zwei bestehende Verbindungen im Nachhinein zu korrelieren, wie dies anhand des zweiten Ausführungsbeispiels unter Bezug auf <figref idrefs="f0001">Fig. 2</figref> dargelegt wird.</p><p id="p0047" num="0047">Bestehen bereits zwei unabhängige Verbindungen, so kann eine neue Nachricht, die bei SIP ebenfalls einer entsprechenden Protokollerweiterung bedarf, auf einer der beiden Verbindungen gesendet werden.</p><p id="p0048" num="0048">Beim SIP könnte diese Verfahrensweise bzw. eine entsprechende Nachricht z.B. als CORRELATE bezeichnet werden. Um zwei unabhängige Verbindungen Session-AB und Session-P34 miteinander zu korrelieren würde dann auf einer der beiden Verbindungen Session-AB bzw. Session-P34 eine Nachricht übertragen, die z.B. folgende Informationen enthält, die wieder entsprechend den vorstehend beschriebenen Beispielen mit Daten belegt werden:
<ul><li>CORRELATE p2.home2.net</li><li>From: p1.home1.net;tag=898</li><li>To: p2.home2.net;tag=767</li><li>Call-ID: session-p12@home1.net</li><li>Correlate-From: ua-a@home1.net;tag=123</li><li>Correlate-To: ua-b@home2.net;tag=456</li><li>Correlate-Call-ID: session-ab@home1.net</li></ul><!-- EPO <DP n="13"> --></p><p id="p0049" num="0049">Auch bei diesem Beispiel werden die beiden Verbindungen vorzugsweise wieder unabhängig voneinander ausgelöst.</p><p id="p0050" num="0050">Alternativ oder zusätzlich können auch Verbindungen unterschiedlichen Typs miteinander korreliert werden. So kann eine Verbindung, die über INVITE aufgebaut wurde, mit einer Verbindung, die mit SUBSCRIBE aufgebaut wurde, korreliert werden. Die SUBSCRIBE-Nachricht erlaubt bei SIP, dass sich ein Benutzer bei einem Anwendungsserver für die Zustellung bestimmter ereignisabhängiger Informationen (Events) anmeldet (subskribiert). Tritt ein Ereignis ein, für das der Benutzer sich angemeldet hat, so benachrichtigt der Anwendungsserver den Benutzer über eine NOTIFY-Nachricht, die zusätzliche Ereignisinformationen enthalten kann.<br/>
Auch bei diesem Beispiel werden die beiden Verbindungen vorzugsweise wieder unabhängig voneinander ausgelöst bzw. laufen unabhängig voneinander aus.</p><p id="p0051" num="0051">Gemäß einem weiteren Ausführungsbeispiel kann die in der ersten Alternative beschriebene CORRELATE-Methode zur nachträglichen Korrelierung zweier oder mehr bestehender Verbindungen auch dazu verwendet werden, einen eigenen Verbindungstyp zu initiieren. Dies wäre analog zu anderen für sich bekannten SIP-requests bzw. SIP-Anforderungen, wie z.B. INVITE (Verbindungsaufbau für parallele Medienströme), SUBSCRIBE (Anmeldung für Ereignis-Informationen), REGISTER (Bekanntgabe des momentanen Aufenthaltsortes des Benutzers, d.h. die Adresse des Endgerätes, an dem er sich angemeldet hat), MESSAGE (Kurznachrichten per Instant-Messaging) oder REFER (Anrufumleitung und Anfordern von individuellen SIP-Nachrichten). möglich. Diese Art des Verbindungsaufbaus würde besonders dann bevorzugt, wenn die Zusatzverbindung rein auf Signalisierungsebene abgehandelt werden kann und keine SIP-Methoden benötigt, die eine Übertragung ausschließlich innerhalb von anderen Verbindungstypen zulassen, wie z.B. die aus SIP bekannte INFO-Methode, die zur Signalisierung von Zusatzinformation während einer bereits aufgebauten Verbindung dient.<!-- EPO <DP n="14"> --></p><p id="p0052" num="0052">Für diese Alternative werden nachfolgend drei beispielhafte Auslösemechanismen zum Beenden der Verbindungen und/oder Korrelationen vorgestellt:</p><p id="p0053" num="0053">Beispielsweise ist ein automatisches Auslösen der CORRELATE-Verbindung möglich, wenn die Hauptverbindung Session-AB, auf die sich die CORRELATE-Verbindung Session-P34 bezieht, auch ausgelöst wird. Diese Vorgehensweise wird bevorzugt. Wurde die Hauptverbindung gemäß SIP z.B. mit INVITE aufgebaut, so löst die auf der Hauptverbindung Session-AB übertragene SIP-Anweisung BYE / 200 OK auch die korrelierte CORRELATE-Verbindung Session-P34 aus.</p><p id="p0054" num="0054">Bezieht sich die CORRELATE-Verbindung auf eine SUBSCRIBE-Verbindung, so wird die CORRELATE-Verbindung vorzugsweise automatisch bei Ablauf des Zeitgebers für die gültige Verbindungsdauer bzw. des sogenannten SUBSCRIBE-Expires-Timers ausgelöst.</p><p id="p0055" num="0055">Falls die korrelierte Verbindung Session-P34 mit der CORRELATE-Anweisung in Verbindung mit Verlaufkopfabschnitten bzw. sogenannten Expires Header aufgebaut wird, so wird sie damit unabhängig von der Hauptverbindung beim Ablauf des Zeitgebers für die gültige Verbindungsdauer bzw. des Expires-Timer ausgelöst.</p><p id="p0056" num="0056">Gemäß einem besonders bevorzugten Ausführungsbeispiel, das anhand <figref idrefs="f0001">Fig. 3</figref> veranschaulicht ist, ist auch ein vom Netz bzw. dessen Netzelementen P1 - P5 initiiertes Verbindungs-Auslösen der Hauptverbindung Session-AB möglich.</p><p id="p0057" num="0057">Über beispielsweise den zusätzlichen Kopfabschnitteintrag oder Kopfabschnitt "Correlate-Method" kann die parallele bzw. korrelierte Verbindung Session-P31 bzw. Session-P35 dazu verwendet werden, Nachrichten anstelle der Hauptverbindung zu<!-- EPO <DP n="15"> --> transportieren. Diese Nachrichten auf der korrelierten Verbindung Session-P31-bzw. Session-P35 müssen dann von der empfangenden Einrichtung wie eine Nachricht auf der Hauptverbindung Session-AB behandelt werden. Dieser Mechanismus ist ähnlich dem der sogenannten REFER-Methode beim SIP.</p><p id="p0058" num="0058">Dadurch wird insbesondere auch ein vom Netz initiiertes Verbindungs-Auslösen der Hauptverbindung Session-AB durch ein Netzelement P3 ermöglicht, wie dies dargestellt ist.</p><p id="p0059" num="0059">Die Verbindung Session-AB zwischen den Endpunkten UA-A und UA-B wird wie beim ersten Ausführungsbeispiel gemäß <figref idrefs="f0001">Fig. 1</figref> aufgebaut.</p><p id="p0060" num="0060">Wenn eine zwischen diesen Endpunkten UA-A und UA-B liegendes Netzelement P3 zu einem späteren Zeitpunkt P1 erkennt, dass die Verbindung Session-AB auszulösen ist, sendet das Netzelement P3 zwei CORRELATE-Nachrichten aus, eine zum ersten Endpunkt UA-A und eine zum zweiten Endpunkt UA-B. Dazu werden im Prinzip zwei kurzzeitige parallele Verbindungen Session-P3A bzw. Session-P3B aufgebaut, die im einfachsten Fall ohne eine Aufbaubestätigung nur zur einmaligen Übertragung der Auslöseinformation bzw. Auslösenachricht dienen. Die Nachrichten können z.B. aufgebaut sein, wie folgt:
<ul><li>CORRELATE ua-a</li><li>From: p3;tag=999</li><li>To: ua-a</li><li>Call-ID session-P3A</li><li>Expires: 0</li><li>Correlate-To: ua-a@home1.net;tag=123</li><li>Correlate-From: ua-b@home2.net;tag=456</li><li>Correlate-Call-ID: session-ab@home1.net</li><li>Correlate-Method: BYE</li></ul>
<ul><li>CORRELATE ua-b</li><li>From: p3;tag=777<!-- EPO <DP n="16"> --></li><li>To: ua-b</li><li>Call-ID session-P3B</li><li>Expires: 0</li><li>Correlate-From: ua-a@home1.net;tag=123</li><li>Correlate-To: ua-b@home2.net;tag=456</li><li>Correlate-Call-ID: session-ab@home1.net</li><li>Correlate-Method: BYE</li></ul></p><p id="p0061" num="0061">Die CORRELATE-Anweisung gibt eine Verbindungsgrundinformation an, das Feld mit der Gültigkeitsdauer EXPIRES gibt eine verbleibende Gültigkeitsdauer von in diesem Falle 0 an, d.h. eine Anweisung zum sofortigen Beenden der korrelierten Verbindung, und als Korrelierungsverfahren Correlate-Method wird das Auslösen bzw. Beenden der Hauptverbindung mit dem Befehl "BYE" angegeben.</p><p id="p0062" num="0062">Ein Endpunkt UA-A bzw. UA-B oder ein Netzelement P1 - P5, insbesondere Proxy, das diese Nachricht erhält, soll sie behandeln, als wäre es eine BYE-Nachricht, die direkt für die Hauptverbindung Session-AB empfangen wurden bzw. über die Hauptverbindung Session-AB übertragen wurde. Die CORRELATE-Anweisung wird vorzugsweise von den beiden Endpunkten UA-A und UA-B mit einer abschließenden Antwort bzw. final response beantwortet. Damit wird dann auch die korrelierte Verbindung beendet, da der Gültigkeits-Kopfabschnitt bzw. Expires Header auf den Wert 0 gesetzt wurde, soweit diese korrelierte Verbindung nicht automatisch beendet wird.</p><p id="p0063" num="0063">Eine praktische Anwendung findet sich beispielsweise im Bereich der Vergebührung von beanspruchten Diensten. Mit der vorstehenden Verfahrensweise ist es bei Netzen mit einem Protokoll für Ende-zu-Ende-Verbindungen durch die Erweiterung nicht mehr zwingend erforderlich, dass alle Funktionen, die direkt auf die Hauptverbindung einwirken können müssen, bei bzw. in den Endpunkten UA-A bzw. UA-B bereit stehen.<!-- EPO <DP n="17"> --></p><p id="p0064" num="0064">Möglich ist z.B. der Einsatz eines Anwendungsservers, der Pre-Paid-Karten und Konten verwaltet. Alle Rufe eines Teilnehmers werden über den Heimat- bzw. Home-Proxy, z.B. ein erstes Netzelement P1, zum Pre-Paid-Server, beispielsweise einem weiteren Netzelement P3, geleitet und von dort wieder zurück zum Home-Proxy, damit dieser die Verbindung gegebenenfalls an weitere Server weiterleiten kann. Möglich ist dabei auch, dass der Pre-Paid-Server selbst nicht die Budgetverwaltung für jeden Ruf des Teilnehmers steuert sondern lediglich den Kontostand bekannt gibt und es dem Home-Proxy erlaubt, Geld von diesem Konto abzubuchen. Dieses Geld kann dann vom Teilnehmer bzw. dessen Station verbraucht werden. Ist das Geld aufgebraucht, fordert der Home-Proxy einen neuen Betrag vom Pre-Paid-Server an. Ist auch dort das Geld bzw. Guthaben verbraucht, teilt dieser dem Home-Proxy mit, den Call auszulösen. Bei diesem Beispiel werden die erweiterten Funktionen des Aufbaus paralleler, korrelierter Verbindungen sowohl zum Verwalten des Guthabens als auch zum Auslösen der Hauptverbindung verwendet.</p></description><claims mxw-id="PCLM56980703" lang="DE" load-source="patent-office"><!-- EPO <DP n="18"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zum Durchführen einer Kommunikation zweier Endpunkte als Netzeinrichtungen (UA-A bzw. UA-B) über eine erste Verbindung (Session-AB) in einem Netz auf Basis einer Ende-zu-Ende-Verbindung gemäß dem SIP-Protokoll, welche keine direkten Datenübertragungen durch zumindest eine weitere Netzeinrichtung (P1 - P5) über zumindest Teile der ersten Verbindung (Session-AB) zwischen diesen Endpunkten (UA-A und UA-B) ermöglicht,<br/>
<b>dadurch gekennzeichnet, dass</b>
<claim-text>- eine weitere Verbindung (Session-P34; Session-P12; Session-P3A, Session-P3B) gemäß dem SIP-Protokoll von einer ersten der Netzeinrichtungen (P3, P1) zu einer zweiten der Netzeinrichtungen (P4, P2, UA-A, UA-B) aufgebaut wird, und die weitere Verbindung mit der ersten Verbindung (Session-AB) korreliert wird,</claim-text>
<claim-text>- wobei eine der Netzeinrichtungen der weiteren Verbindung als Netzeinrichtung auf der ersten Verbindung (Session-AB) zwischen den Endpunkten (UA-A bzw. UA-B) der ersten Verbindung (Session-AB) angeordnet ist,</claim-text>
<claim-text>- beim Aufbau der weiteren Verbindung (Session-P34; Session-P3A, Session-P3B) von der ersten Netzeinrichtung eine Information zum Anfordern einer Korrelierung mit der ersten Verbindung (Session-AB) zur zweiten Netzeinrichtung übertragen wird, und</claim-text>
<claim-text>- die Anforderung der Korrelierung der weiteren Verbindung (Session-P34; Session-P12; Session-P3A, Session-P3B) mit der ersten Verbindung (Session-AB) als erweiterte Kopfabschnittdaten (Correlate-From; Correlate-To; Correlate-Call-ID) oder mit einem eigenständigen Kopfabschnitt (Correlate) von der ersten zur zweiten Netzeinrichtung übertragen wird.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, bei dem<br/>
als weitere Verbindung eine Verbindung eines anderen Verbindungstyps mit der ersten Verbindung (Session-AB) korreliert oder erzeugt und korreliert wird.<!-- EPO <DP n="19"> --></claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach einem vorstehenden Anspruch, bei dem<br/>
auf der weiteren Verbindung (Session-P3A, Session-P3B) übertragene Nachrichten und Informationen (Correlate-Method) von der empfangenden Netzeinrichtung (UA-A, UA-B) als eine der ersten Verbindung (Session-AB) zugehörige Anweisung behandelt werden.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach einem vorstehenden Anspruch, bei dem<br/>
auf der weiteren Verbindung (Session-P3A, Session-P3B) übertragene Nachrichten und Informationen (Correlate-Method: BYE) von der empfangenden Netzeinrichtung (UA-A, UA-B) als Anweisung zum Beenden der ersten Verbindung (Session-AB) behandelt werden.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach einem vorstehenden Anspruch, bei dem<br/>
die weitere Verbindung für die Übertragung von Vergebührungsrelevanten Daten und/oder Anweisungen mit Bezug auf die erste Verbindung als zu vergebührende Verbindung verwendet wird.</claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Netzeinrichtung (P1 - P5) zum Durchführen eines Verfahrens nach einem vorstehenden Anspruch mit
<claim-text>- einer Schnittstelle zum Aufbauen einer weiteren Verbindung zu einer weiteren Netzeinrichtung gemäß dem SIP-Protokoll (Session-P34), wenn eine erste Verbindung (Session-AB) in einem Netz zwischen zwei Endpunkten (UA-A und UA-B) auf Basis einer Ende-zu-Ende-Verbindung gemäß dem SIP-Protokoll besteht, welche Ende-zu-Ende-Verbindung keine direkten Datenübertragungen durch die Netzeinrichtung (P1 - P5) über zumindest Teile der ersten Verbindung (Session-AB) zwischen diesen Endpunkten (UA-A und UA-B) ermöglicht,<br/>
<b>dadurch gekennzeichnet,</b></claim-text>
<claim-text>- <b>dass</b> die Netzeinrichtung im Betrieb die weitere Verbindung (Session-P34; Session-P12; Session-P3A, Session-P3B) mit der ersten Verbindung (Session-AB) korreliert,</claim-text>
<claim-text>- <b>dass</b> die Netzeinrichtung auf der ersten Verbindung (Session-AB) zwischen den Endpunkten (UA-A bzw. UA-B) der ersten Verbindung (Session-AB) angeordnet ist,<!-- EPO <DP n="20"> --></claim-text>
<claim-text>- <b>dass</b> beim Aufbau der weiteren Verbindung (Session-P34; Session-P3A, Session-P3B) von der Netzeinrichtung eine Information zum Anfordern einer Korrelierung mit der ersten Verbindung (Session-AB) zur weiteren Netzeinrichtung übertragen wird, und</claim-text>
<claim-text>- <b>dass</b> die Anforderung der Korrelierung der weiteren Verbindung (Session-P34; Session-P12; Session-P3A, Session-P3B) mit der ersten Verbindung (Session-AB) als erweiterte Kopfabschnittdaten (Correlate-From; Correlate-To; Correlate-Call-ID) oder mit einem eigenständigen Kopfabschnitt (Correlate) von der Netzeinrichtung zur weiteren Netzeinrichtung übertragen wird.</claim-text></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Netzeinrichtung nach Anspruch 6, wobei<br/>
die Netzeinrichtung als Vorvergebührungs-Server und/oder Heimat-Proxy ausgebildet ist.</claim-text></claim></claims><claims mxw-id="PCLM56980704" lang="EN" load-source="patent-office"><!-- EPO <DP n="21"> --><claim id="c-en-01-0001" num="0001"><claim-text>Method for carrying out communication between two terminal points as network devices (UA-A and UA-B) via a first connection (Session-AB) in a network on the basis of an end-to-end connection based on the SIP protocol, which end-to-end connection does not allow direct data transmissions by at least one further network device (P1 - P5) via at least portions of the first connection (Session-AB) between these terminal points (UA-A and UA-B),<br/>
<b>characterized in that</b>
<claim-text>- a further connection (Session-P34; Session-P12; Session-P3A, Session-P3B) based on the SIP protocol is set up from a first of the network devices (P3, P1) to a second of the network devices (P4, P2, UA-A, UA-B), and the further connection is correlated to the first connection (Session-AB),</claim-text>
<claim-text>- wherein one of the network devices on the further connection is arranged as a network device on the first connection (Session-AB) between the terminal points (UA-A and UA-B) of the first connection (Session-AB),</claim-text>
<claim-text>- setup of the further connection (Session-P34; Session-P3A, Session-P3B) prompts the first network device to transmit a piece of information to request correlation to the first connection (Session-AB) to the second network device, and</claim-text>
<claim-text>- the request for correlation of the further connection (Session-P34; Session-P12; Session-P3A, Session-P3B) to the first connection (Session-AB) is transmitted from the first to the second network device as extended header data (Correlate-From;<!-- EPO <DP n="22"> --> Correlate-To; Correlate-Call-ID) or with a separate header (Correlate).</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>Method according to Claim 1, in which<br/>
the further connection correlated to the first connection (Session-AB) or produced and correlated is a connection of a different connection type.</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>Method according to either of the preceding claims, in which<br/>
messages and information (Correlate-Method) transmitted on the further connection (Session-P3A, Session-P3B) are treated by the receiving network device (UA-A, UA-B) as an instruction that is associated with the first connection (Session-AB).</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>Method according to one of the preceding claims, in which<br/>
messages and information (Correlate-Method: BYE) transmitted on the further connection (Sesion-P3A; Session-P3B) are treated by the receiving network device (UA-A, UA-B) as an instruction to terminate the first connection (Session-AB).</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>Method according to one of the preceding claims, in which<br/>
the further connection is used for transmitting charging-related data and/or instructions with reference to the first connection as a charge-incurring connection.</claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>Network device (P1 - P5) for carrying out a method according to one of the preceding claims having
<claim-text>- an interface for setting up a further connection to a further network device based on the SIP protocol (Session-P34) when a first connection (Session-AB) exists in a network between two terminal points (UA-A and UA-B) on the basis of an end-to-end connection based on the SIP protocol, which end-to-end connection does not allow direct data transmissions by the network device (P1 - P5) via at least portions of the first<!-- EPO <DP n="23"> --> connection (Session-AB) between these terminal points (UA-A and UA-B),<br/>
<b>characterized</b></claim-text>
<claim-text>- <b>in that</b> the network device correlates the further connection (Session-P34; Session-P12; Session-P3A, Session-P3B) to the first connection (Session-AB) during operation,</claim-text>
<claim-text>- <b>in that</b> the network device is arranged on the first connection (Session-AB) between the terminal points (UA-A and UA-B) of the first connection (Session-AB),</claim-text>
<claim-text>- <b>in that</b> setup of the further connection (Session-P34; Session-P3A, Session-P3B) prompts the network device to transmit a piece of information to request correlation to the first connection (Session-AB) to the further network device, and</claim-text>
<claim-text>- <b>in that</b> the request for correlation of the further connection (Session-P34; Session-P12; Session-P3A, Session-P3B) to the first connection (Session-AB) is transmitted from the network device to the further network device as extended header data (Correlate-From; Correlate-To; Correlate-Call-ID) or with a separate header (Correlate).</claim-text></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>Network device according to Claim 6, wherein<br/>
the network device is in the form of a prepaid-charging server and/or home proxy.</claim-text></claim></claims><claims mxw-id="PCLM56980705" lang="FR" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé pour exécuter une communication entre deux points terminaux en tant que dispositifs de réseau (resp. UA-A et UA-B) via une première liaison (Session-AB) dans un réseau sur la base d'une liaison de bout en bout conformément au protocole SIP, laquelle ne permet pas de transmissions directes de données par au moins un autre dispositif de réseau (P1 - P5) via au moins des parties de la première liaison (Session-AB) entre ces points terminaux (UA-A et UA-B), <b>caractérisé en ce que</b> :
<claim-text>- une autre liaison (Session-P34 ; Session-P12 ; Session P3A, Session P3B) est établie, conformément au protocole SIP, d'un premier des dispositifs de réseau (P3, P1) vers un deuxième des dispositifs de réseau (P4, P2, UA-A, UA-B) et l'autre liaison est corrélée avec la première liaison (Session-AB),</claim-text>
<claim-text>- l'un des dispositifs de réseau de l'autre liaison étant situé en tant que dispositif de réseau sur la première liaison (Session-AB) entre les points terminaux (resp. UA-A et UA-B) de la première liaison (Session-AB),</claim-text>
<claim-text>- lors de l'établissement de l'autre liaison (Session-P34 ; Session-P3A, Session P3B), le premier dispositif de réseau transmet au deuxième dispositif de réseau une information pour demander une corrélation avec la première liaison (Session-AB) et</claim-text>
<claim-text>- la demande de corrélation de l'autre liaison (Session-P34 ; Session-P12 ; Session P3A, Session P3B) avec la première liaison (Session-AB) est transmise sous la forme de données élargies de champ d'en-tête (Correlate-From ; Correlate-To ; Correlate-Call-ID) ou avec un champ d'en-tête autonome (Correlate) du premier au deuxième dispositif de réseau.</claim-text><!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, selon lequel une liaison d'un autre type de liaison est corrélée avec la première liaison (Session-AB), ou générée et corrélée, en tant qu'autre liaison.</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon une revendication précédente, selon lequel des messages et informations (Correlate-Method) transmis sur l'autre liaison (Session-P3A, Session-P3B) sont traités par le dispositif de réseau récepteur (UA-A, UA-B) en tant qu'instruction associée à la première liaison (Session-AB).</claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon une revendication précédente, selon lequel des messages et informations (Correlate-Method : BYE) transmis sur l'autre liaison (Session-P3A, Session-P3B) sont traités par le dispositif de réseau récepteur (UA-A, UA-B) en tant qu'instruction pour terminer la première liaison (Session-AB).</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon une revendication précédente, selon lequel l'autre liaison est utilisée pour la transmission de données et/ou d'instructions pertinentes pour la facturation en référence à la première liaison en tant que liaison à facturer.</claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Dispositif de réseau (P1 - P5) pour exécuter un procédé selon une revendication précédente, comportant :
<claim-text>- une interface pour établir une autre liaison vers un autre dispositif de réseau conformément au protocole SIP (Session-P34) lorsqu'une première liaison (Session-AB) existe dans un réseau entre deux points terminaux (UA-A et UA-B) sur la base d'une liaison de bout en bout conformément au protocole SIP, laquelle<!-- EPO <DP n="26"> --> liaison de bout en bout ne permet pas de transmissions directes de données par le dispositif de réseau (P1 - P5) via au moins des parties de la première liaison (Session-AB) entre ces points terminaux (UA-A et UA-B),<br/>
<b>caractérisé en ce que</b> :
<claim-text>- le dispositif de réseau corrèle, en service, l'autre liaison (Session-P34 ; Session-P12 ; Session-P3A, Session-P3B) avec la première liaison (Session-AB) ;</claim-text>
<claim-text>- le dispositif de réseau est situé sur la première liaison (Session-AB) entre les points terminaux (resp. UA-A et UA-B) de la première liaison (Session-AB) ;</claim-text>
<claim-text>- lors de l'établissement de l'autre liaison (Session-P34 ; Session-P3A, Session P3B), le dispositif de réseau transmet à l'autre dispositif de réseau une information pour demander une corrélation avec la première liaison (Session-AB) et</claim-text>
<claim-text>- la demande de corrélation de l'autre liaison (Session-P34 ; Session-P12 ; Session P3A, Session P3B) avec la première liaison (Session-AB) est transmise sous la forme de données élargies de champ d'en-tête (Correlate-From ; Correlate-To ; Correlate-Call-ID) ou avec un champ d'en-tête autonome (Correlate) du dispositif de réseau à l'autre dispositif de réseau.</claim-text></claim-text></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Dispositif de réseau selon la revendication 6, le dispositif de réseau se présentant sous la forme d'un serveur de préfacturation et/ou d'un home proxy.</claim-text></claim></claims><drawings mxw-id="PDW16669240" load-source="patent-office"><!-- EPO <DP n="27"> --><figure id="f0001" num="1,2,3"><img id="if0001" file="imgf0001.tif" wi="159" he="233" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
