<?xml version="1.0" encoding="UTF-8"?>
<patent-document ucid="EP-1416433-B1" country="EP" doc-number="1416433" kind="B1" date="20140101" family-id="32093520" file-reference-id="287167" date-produced="20180822" status="corrected" lang="EN"><bibliographic-data><publication-reference fvid="146553900" ucid="EP-1416433-B1"><document-id><country>EP</country><doc-number>1416433</doc-number><kind>B1</kind><date>20140101</date><lang>EN</lang></document-id></publication-reference><application-reference ucid="EP-03021224-A" is-representative="YES"><document-id mxw-id="PAPP154827823" load-source="docdb" format="epo"><country>EP</country><doc-number>03021224</doc-number><kind>A</kind><date>20030918</date><lang>EN</lang></document-id><document-id mxw-id="PAPP204138188" load-source="docdb" format="original"><country>EP</country><doc-number>03021224.5</doc-number><date>20030918</date></document-id></application-reference><priority-claims><priority-claim mxw-id="PPC140453318" ucid="US-28441202-A" load-source="docdb"><document-id format="epo"><country>US</country><doc-number>28441202</doc-number><kind>A</kind><date>20021031</date></document-id></priority-claim></priority-claims><dates-of-public-availability><intention-to-grant-date><date>20130712</date></intention-to-grant-date></dates-of-public-availability><technical-data><classifications-ipcr><classification-ipcr mxw-id="PCL1988100740" load-source="docdb">G06K   9/22        20060101ALI20130627BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988106863" load-source="docdb">G06F  17/22        20060101ALI20060101BMKR        </classification-ipcr><classification-ipcr mxw-id="PCL1988121320" load-source="docdb">G06F   3/033       20060101AFI20060310RMJP        </classification-ipcr><classification-ipcr mxw-id="PCL1988121495" load-source="docdb">G06F   3/03        20060101AFI20130627BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988121931" load-source="docdb">G06K  19/06        20060101ALI20130627BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988128591" load-source="docdb">G06F   3/0354      20130101ALI20130627BHEP        </classification-ipcr><classification-ipcr mxw-id="PCL1988138423" load-source="docdb">G06F   3/038       20060101ALI20060310RMJP        </classification-ipcr></classifications-ipcr><classifications-cpc><classification-cpc mxw-id="PCL-1949027303" load-source="docdb" scheme="CPC">G06F   3/0321      20130101 LI20160418BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988099661" load-source="docdb" scheme="CPC">G06K  19/06037     20130101 LI20130914BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988118896" load-source="docdb" scheme="CPC">G06F   3/03545     20130101 LI20130914BHEP        </classification-cpc><classification-cpc mxw-id="PCL1988122629" load-source="docdb" scheme="CPC">G06K   9/228       20130101 FI20130914BHEP        </classification-cpc></classifications-cpc><invention-title mxw-id="PT132194184" lang="DE" load-source="patent-office">Aktive eingebettete Interaktion Kodierung</invention-title><invention-title mxw-id="PT132194185" lang="EN" load-source="patent-office">Active embedded interaction coding</invention-title><invention-title mxw-id="PT132194186" lang="FR" load-source="patent-office">Codage d'interaction intégrée actif</invention-title></technical-data><parties><applicants><applicant mxw-id="PPAR918158720" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>MICROSOFT CORP</last-name><address><country>US</country></address></addressbook></applicant><applicant mxw-id="PPAR918162316" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>MICROSOFT CORPORATION</last-name></addressbook></applicant></applicants><inventors><inventor mxw-id="PPAR918138456" load-source="docdb" sequence="1" format="epo"><addressbook><last-name>WANG JIAN</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918145666" load-source="docdb" sequence="1" format="intermediate"><addressbook><last-name>WANG, JIAN</last-name></addressbook></inventor><inventor mxw-id="PPAR918998396" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Wang, Jian c/o Microsoft Research Asia</last-name><address><street>5F, Beijing Sigma Center 49 Zhichun Road</street><city>Haidian District Beijing 100080</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918172268" load-source="docdb" sequence="2" format="epo"><addressbook><last-name>WANG QIANG</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918171939" load-source="docdb" sequence="2" format="intermediate"><addressbook><last-name>WANG, QIANG</last-name></addressbook></inventor><inventor mxw-id="PPAR918998397" load-source="patent-office" sequence="2" format="original"><addressbook><last-name>Wang, Qiang c/o Microsoft Research Asia</last-name><address><street>5F, Beijing Sigma Center 49 Zhichun Road</street><city>Haidian District Beijing 100080</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918166536" load-source="docdb" sequence="3" format="epo"><addressbook><last-name>ZHANG CHUNHUI</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918167295" load-source="docdb" sequence="3" format="intermediate"><addressbook><last-name>ZHANG, CHUNHUI</last-name></addressbook></inventor><inventor mxw-id="PPAR918998398" load-source="patent-office" sequence="3" format="original"><addressbook><last-name>Zhang, Chunhui c/o Microsoft Research Asia</last-name><address><street>5F, Beijing Sigma Center 49 Zhichun Road</street><city>Haidian District Beijing 100080</city><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918161995" load-source="docdb" sequence="4" format="epo"><addressbook><last-name>LI YUE</last-name><address><country>CN</country></address></addressbook></inventor><inventor mxw-id="PPAR918137872" load-source="docdb" sequence="4" format="intermediate"><addressbook><last-name>LI, YUE</last-name></addressbook></inventor><inventor mxw-id="PPAR918998395" load-source="patent-office" sequence="4" format="original"><addressbook><last-name>Li, Yue c/o Microsoft Research Asia</last-name><address><street>5F, Beijing Sigma Center 49 Zhichun Road</street><city>Haidian District Beijing 100080</city><country>CN</country></address></addressbook></inventor></inventors><assignees><assignee mxw-id="PPAR918998400" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>MICROSOFT CORPORATION</last-name><iid>100178266</iid><address><street>One Microsoft Way</street><city>Redmond, Washington 98052-6399</city><country>US</country></address></addressbook></assignee></assignees><agents><agent mxw-id="PPAR918998399" load-source="patent-office" sequence="1" format="original"><addressbook><last-name>Grünecker, Kinkeldey, Stockmair &amp; Schwanhäusser Anwaltssozietät</last-name><iid>100060488</iid><address><street>Leopoldstrasse 4</street><city>80802 München</city><country>DE</country></address></addressbook></agent></agents></parties><international-convention-data><designated-states><ep-contracting-states><country mxw-id="DS548990840" load-source="docdb">AT</country><country mxw-id="DS548981091" load-source="docdb">BE</country><country mxw-id="DS548984106" load-source="docdb">BG</country><country mxw-id="DS548987719" load-source="docdb">CH</country><country mxw-id="DS548869218" load-source="docdb">CY</country><country mxw-id="DS548990841" load-source="docdb">CZ</country><country mxw-id="DS548981135" load-source="docdb">DE</country><country mxw-id="DS548981092" load-source="docdb">DK</country><country mxw-id="DS548869219" load-source="docdb">EE</country><country mxw-id="DS548830402" load-source="docdb">ES</country><country mxw-id="DS548984107" load-source="docdb">FI</country><country mxw-id="DS548984108" load-source="docdb">FR</country><country mxw-id="DS548981136" load-source="docdb">GB</country><country mxw-id="DS548981093" load-source="docdb">GR</country><country mxw-id="DS548869220" load-source="docdb">HU</country><country mxw-id="DS548987720" load-source="docdb">IE</country><country mxw-id="DS548984109" load-source="docdb">IT</country><country mxw-id="DS548869221" load-source="docdb">LI</country><country mxw-id="DS548990842" load-source="docdb">LU</country><country mxw-id="DS548981137" load-source="docdb">MC</country><country mxw-id="DS548830403" load-source="docdb">NL</country><country mxw-id="DS548990843" load-source="docdb">PT</country><country mxw-id="DS548830404" load-source="docdb">RO</country><country mxw-id="DS548830405" load-source="docdb">SE</country><country mxw-id="DS548869222" load-source="docdb">SI</country><country mxw-id="DS548885759" load-source="docdb">SK</country><country mxw-id="DS548987725" load-source="docdb">TR</country></ep-contracting-states></designated-states></international-convention-data></bibliographic-data><description mxw-id="PDES63957516" lang="EN" load-source="patent-office"><!-- EPO <DP n="1"> --><heading id="h0001"><b>Technical Field</b></heading><p id="p0001" num="0001">The present invention relates to interacting with a medium using a digital pen. More particularly, the present invention relates to determining the location of a digital pen during interaction with one or more surfaces.</p><heading id="h0002"><b>Background</b></heading><p id="p0002" num="0002">Computer users are accustomed to using a mouse and keyboard as a way of interacting with a personal computer. While personal computers provide a number of advantages over written documents, most users continue to perform certain functions using printed paper. Some of these functions include reading and annotating written documents. In the case of annotations, the printed document assumes a greater significance because of the annotations placed on it by the user. One of the difficulties, however, with having a printed document with annotations is the later need to have the annotations entered back into the electronic form of the document. This requires the original user or another user to wade through the annotations and enter them into a personal computer. In some cases, a user will scan in the annotations and the original text, thereby creating a new document. These multiple steps make the interaction between the printed document and the electronic version of the document difficult to handle on a repeated basis. Further, scanned-in images are frequently non-modifiable. There may be no way to separate the annotations from the original text. This makes using the annotations difficult. Accordingly, an improved way of handling annotations is needed.</p><p id="p0003" num="0003">One image pattern is shown in <figref idrefs="f0009">Figure 10</figref>. This pattern is used by the Anoto pen (by Anoto Inc.) to determine a location of a pen on a piece of paper. The pattern as shown in <figref idrefs="f0009">Figure 10</figref> is difficult to easily orient from any portion and determine the accurate rotation of the pattern. If the determination of the rotation is based on the decoding of the pattern itself to find information encoded in the data stream, this determination requires significant processing for decoding the data stream<!-- EPO <DP n="2"> --> itself to determine the proper orientation of the pattern. This labor-intensive decoding approach impedes quick adoption of the pattern, as it requires substantial hardware resources just to locate a captured portion of the image. Scaling of the use of the pattern beyond a short note becomes difficult (for example, composing a large document by handwriting only) as each camera image relating to an ink stroke may need to be completely processed in all orientations to determine the proper orientation of the pattern. An improved pattern is needed to represent data streams.<!-- EPO <DP n="3"> --></p><p id="p0004" num="0004"><patcit id="pcit0001" dnum="US5726435A"><text>US-A-5 726 435</text></patcit> relates to a two-dimensional code consisting of three at least two identical positioning symbols, a data region, timing cells, and an apex detecting cell.</p><heading id="h0003"><b>Summary</b></heading><p id="p0005" num="0005">It is the object of the invention to provide an improved method for encoding a data stream into an image, a method for decoding an encoded image, and corresponding computer-readable media and systems, allowing for determining the location of a digital pen during interaction with one or more surfaces.</p><p id="p0006" num="0006">This object is solved by the present invention as claimed in the independent claims.</p><p id="p0007" num="0007">Preferred embodiments are defined by the dependent claims.<!-- EPO <DP n="4"> --></p><p id="p0008" num="0008">Aspects of the present invention provide solutions to at least one of the issues mentioned above, thereby enabling one to locate a position or positions on a viewed image. The viewed image may be on printed paper or may be on a displayed computer image. Aspects of the present invention include an encoding pattern represented by rows and columns of dark images. The images may be solid over a row or column, may alternate in the rows or columns, may alternate over many rows or columns, and variations thereof.</p><p id="p0009" num="0009">These and other aspects of the present invention will become known through the following drawings and associated description.</p><heading id="h0004"><b>Brief Description of Drawings</b></heading><p id="p0010" num="0010">The foregoing summary of the invention, as well as the following detailed description of preferred embodiments, is better understood when read in conjunction with the accompanying drawings, which are included by way of example, and not by way of limitation with regard to the claimed invention.</p><p id="p0011" num="0011"><figref idrefs="f0001">Figure 1</figref> shows a general description of a computer that may be used in conjunction with embodiments of the present invention.</p><p id="p0012" num="0012"><figref idrefs="f0002 f0003">Figures 2A through 2E</figref> show various encoding systems.<!-- EPO <DP n="5"> --></p><p id="p0013" num="0013"><figref idrefs="f0003">Figures 3A through 3D</figref> show four possible resultant comers associated with the encoding system according to <figref idrefs="f0002">Figures 2A and 2B</figref>.</p><p id="p0014" num="0014"><figref idrefs="f0004">Figure 4</figref> shows rotation of a captured image portion in accordance with embodiments of the present invention.</p><p id="p0015" num="0015"><figref idrefs="f0004">Figure 5</figref> shows various angles of rotation used in conjunction with the coding system of <figref idrefs="f0002 f0003">Figures 2A through 2E</figref>.</p><p id="p0016" num="0016"><figref idrefs="f0005">Figures 6A and 6B</figref> show an image capture system and corresponding captured image.</p><p id="p0017" num="0017"><figref idrefs="f0006">Figure 7</figref> shows a method for determining the location of a captured image.</p><p id="p0018" num="0018"><figref idrefs="f0007">Figure 8</figref> shows the method for determining the location of captured image of <figref idrefs="f0006">Figure 7</figref> in greater detail.</p><p id="p0019" num="0019"><figref idrefs="f0008">Figure 9</figref> shows a process for encoding data in accordance with embodiments of the present invention.</p><p id="p0020" num="0020"><figref idrefs="f0009">Figure 10</figref> shows a conventional scheme for encoding space in a document.</p><heading id="h0005"><b>Detailed Description</b></heading><p id="p0021" num="0021">Aspects of the present invention relate to determining the location of a captured image in relation to a larger image. The location determination method and system described herein may be used in combination with a multi-function pen.</p><p id="p0022" num="0022">The following is separated by subheadings four of the reader. The subheadings include: terms, general-purpose computer, image capturing pen, bit representations, representation analysis, location determination, data stream encoding, and applications.<!-- EPO <DP n="6"> --></p><heading id="h0006"><b><i>Terms</i></b></heading><p id="p0023" num="0023">Pen - any writing implement that may or may not include the ability to store ink. In some examples, a stylus with no ink capability may be used as a pen.</p><p id="p0024" num="0024">Camera - an image capture system.</p><heading id="h0007"><b><i>General Purpose Computer</i></b></heading><p id="p0025" num="0025"><figref idrefs="f0001">Figure 1</figref> is a functional block diagram of an example of a conventional general-purpose digital computing environment that can be used to implement various aspects of the present invention. In <figref idrefs="f0001">Figure 1</figref>, a computer 100 includes a processing unit 110, a system memory 120, and a system bus 130 that couples various system components including the system memory to the processing unit 110. The system bus 130 may be any of several types of bus structures including a memory bus or memory controller, a peripheral bus, and a local bus using any of a variety of bus architectures. The system memory 120 includes read only memory (ROM) 140 and random access memory (RAM) 150.</p><p id="p0026" num="0026">A basic input/output system 160 (BIOS), containing the basic routines that help to transfer information between elements within the computer 100, such as during start-up, is stored in the ROM 140. The computer 100 also includes a hard disk drive 170 for reading from and writing to a hard disk (not shown), a magnetic disk drive 180 for reading from or writing to a removable magnetic disk 190, and an optical disk drive 191 for reading from or writing to a removable optical disk 199 such as a CD ROM or other optical media. The hard disk drive 170, magnetic disk drive 180, and optical disk drive 191 are connected to the system bus 130 by a hard disk drive interface 192, a magnetic disk drive interface 193, and an optical disk drive interface 194, respectively. The drives and their associated computer-readable media provide nonvolatile storage of computer readable instructions, data structures, program modules and other data for the personal computer 100. It will be appreciated by those skilled in the art that other types of computer<!-- EPO <DP n="7"> --> readable media that can store data that is accessible by a computer, such as magnetic cassettes, flash memory cards, digital video disks, Bernoulli cartridges, random access memories (RAMs), read only memories (ROMs), and the like, may also be used in the example operating environment.</p><p id="p0027" num="0027">A number of program modules can be stored on the hard disk drive 170, magnetic disk 190, optical disk 199, ROM 140 or RAM 150, including an operating system 195, one or more application programs 196, other program modules 197, and program data 198. A user can enter commands and information into the computer 100 through input devices such as a keyboard 101 and pointing device 102. Other input devices (not shown) may include a microphone, joystick, game pad, satellite dish, scanner or the like. These and other input devices are often connected to the processing unit 110 through a serial port interface 106 that is coupled to the system bus, but may be connected by other interfaces, such as a parallel port, game port or a universal serial bus (USB). Further still, these devices may be coupled directly to the system bus 130 via an appropriate interface (not shown). A monitor 107 or other type of display device is also connected to the system bus 130 via an interface, such as a video adapter 108. In addition to the monitor, personal computers typically include other peripheral output devices (not shown), such as speakers and printers. In an example, a pen digitizer 165 and accompanying pen or stylus 166 are provided in order to digitally capture freehand input. Although a direct connection between the pen digitizer 165 and the serial port is shown, in practice, the pen digitizer 165 may be coupled to the processing unit 110 directly, via a parallel port or other interface and the system bus 130 as known in the art. Furthermore, although the digitizer 165 is shown apart from the monitor 107, it is preferred that the usable input area of the digitizer 165 be co-extensive with the display area of the monitor 107. Further still, the digitizer 165 may be integrated in the monitor 107, or may exist as a separate device overlaying or otherwise appended to the monitor 107.<!-- EPO <DP n="8"> --></p><p id="p0028" num="0028">The computer 100 can operate in a networked environment using logical connections to one or more remote computers, such as a remote computer 109. The remote computer 109 can be a server, a router, a network PC, a peer device or other common network node, and typically includes many or all of the elements described above relative to the computer 100, although only a memory storage device 111 has been illustrated in <figref idrefs="f0001">Figure 1</figref>. The logical connections depicted in <figref idrefs="f0001">Figure 1</figref> include a local area network (LAN) 112 and a wide area network (WAN) 113. Such networking environments are commonplace in offices, enterprise-wide computer networks, intranets and the Internet.</p><p id="p0029" num="0029">When used in a LAN networking environment, the computer 100 is connected to the local network 112 through a network interface or adapter 114. When used in a WAN networking environment, the personal computer 100 typically includes a modem 115 or other means for establishing a communications over the wide area network 113, such as the Internet. The modem 115, which may be internal or external, is connected to the system bus 130 via the serial port interface 106. In a networked environment, program modules depicted relative to the personal computer 100, or portions thereof, may be stored in the remote memory storage device.</p><p id="p0030" num="0030">It will be appreciated that the network connections shown are illustrative and other techniques for establishing a communications link between the computers can be used. The existence of any of various well-known protocols such as TCP/IP, Ethernet, FTP, HTTP, Bluetooth, IEEE 802.11x and the like is presumed, and the system can be operated in a client-server configuration to permit a user to retrieve web pages from a web-based server. Any of various conventional web browsers can be used to display and manipulate data on web pages.</p><heading id="h0008"><b><i>Image Capturing Pen</i></b></heading><p id="p0031" num="0031">Aspects of the present invention include placing an encoded data stream in a displayed form. The displayed form may be printed paper (or other physical<!-- EPO <DP n="9"> --> medium) or may be a display projecting the encoded data stream in conjunction with another image or set of images. For example, the encoded data stream may be represented as a physical image on the paper or an image overlying the displayed image or may be a physical encoded pattern (non-modifiable pattern) combined with or overlaying a display screen (so any image portion captured by a pen is locatable on the display screen).</p><p id="p0032" num="0032">This determination of the location of a captured image may be used to determine the location of a user's interaction with the paper, medium, or display screen. In some aspects of the present invention, the pen may be an ink pen writing on paper. In other aspects, the pen may be a stylus with the user writing on the surface of a computer display. Any interaction may be provided back to the system with knowledge of the encoded image on the document or supporting the document displayed on the computer screen. By repeatedly capturing the location of the camera, the system can track movement of the stylus being controlled by the user.</p><p id="p0033" num="0033"><figref idrefs="f0005">Figures 6A and 6B</figref> show an illustrative example of pen 601 with a camera 603. Pen 601 includes a tip 602 that may or may not include an ink reservoir. Camera 603 captures an image 604 from surface 607. Pen 601 may further include additional sensors and/or processors as represented in broken box 606. These sensors and/or processors 606 may also include the ability to transmit information to another pen 601 and/or a personal computer (for example, via Bluetooth or other wireless protocols).</p><p id="p0034" num="0034"><figref idrefs="f0005">Figure 6B</figref> represents an image as viewed by camera 603. In one illustrative example, the field of view of camera 603 is 32x32 pixels (where N=32). Accordingly, <figref idrefs="f0005">Figure 6B</figref> shows a field of view of 32 pixels long by 32 pixels wide. The size of N is adjustable based on the degree of image resolution desired. Also, while the field of view of the camera 603 is shown as a square for illustrative purposes here, the field of view may include other shapes as is known in the art.<!-- EPO <DP n="10"> --></p><p id="p0035" num="0035">The input to the pen 601 from the camera 603 may be defined as a sequence of image frames {Ii}, i = 1, 2, ... , A, where Ii is captured by the pen 601 at sampling time ti. The sampling rate may be fixed or may be variable based on the size of the document. The size of the captured image frame may be large or small, depending on the size of the document and the degree of exactness required. Also, the camera image size may be determined based on the size of the document to be searched.</p><p id="p0036" num="0036">The image captured by camera 603 may be used directly by the processing system or may undergo pre-filtering. This pre-filtering may occur in pen 601 or may occur outside of pen 601 (for example, in a personal computer).</p><p id="p0037" num="0037">The image size of <figref idrefs="f0005">Figure 6B</figref> is 32x32 pixels. If each encoding unit size is 3×3 pixels, then the number of captured encoded units would be approximately 100 units. If the encoding unit size is 5x5, then the number of captured encoded units is approximately 36.</p><p id="p0038" num="0038"><figref idrefs="f0005">Figure 6A</figref> also shows the image plane 609 on which an image 610 of the pattern from location 604 is formed. Light received from the pattern on the object plane 607 is focused by lens 608. Lens 608 may be a single lens or a multi-part lens system, but is represented here as a single lens for simplicity. Image capturing sensor 611 captures the image 610.</p><p id="p0039" num="0039">The image sensor 611 may be large enough to capture the image 610. Alternatively, the image sensor 611 may be large enough to capture an image of the pen tip 602 at location 612. For reference, the image at location 612 is referred to as the virtual pen tip. It is noted that the virtual pen tip location with respect to image sensor 611 is fixed because of the constant relationship between the pen tip, the lens 608, and the image sensor 611. Because the transformation from the location of the virtual pen tip 612 (represented by <i>L<sub>virtual-pentip</sub>)</i> to the location of<!-- EPO <DP n="11"> --> the real pen tip 602 (represented by <i>L<sub>pentip</sub>),</i> one can determine the location of the real pen tip in relation to a captured image 610.</p><p id="p0040" num="0040">The following transformation <i>F<sub>S→P</sub></i> transforms the image captured by camera to the real image on the paper:<maths id="math0001" num=""><math display="block"><msub><mi>L</mi><mi mathvariant="italic">paper</mi></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>S</mi><mo>→</mo><mi>P</mi></mrow></msub><mfenced><msub><mi>L</mi><mi mathvariant="italic">Sensor</mi></msub></mfenced></math><img id="ib0001" file="imgb0001.tif" wi="41" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0041" num="0041">During writing, the pen tip and the paper are on the same plane. Accordingly, the transformation from the virtual pen tip to the real pen tip is also <i>F<sub>S→P</sub>:</i><maths id="math0002" num=""><math display="block"><msub><mi>L</mi><mi mathvariant="italic">pentip</mi></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>S</mi><mo>→</mo><mi>P</mi></mrow></msub><mo>⁢</mo><mfenced><msub><mi>L</mi><mrow><mi mathvariant="italic">virtual</mi><mo>-</mo><mi mathvariant="italic">pentip</mi></mrow></msub></mfenced></math><img id="ib0002" file="imgb0002.tif" wi="48" he="10" img-content="math" img-format="tif"/></maths></p><p id="p0042" num="0042">The transformation <i>F<sub>S→P</sub></i> may be referred to as a perspective transformation. This simplifies as: <maths id="math0003" num=""><math display="block"><msub><mi mathvariant="italic">Fʹ</mi><mrow><mi>S</mi><mo>→</mo><mi>P</mi></mrow></msub><mo>=</mo><mfenced open="{" close="}"><mtable><mtr><mtd><msub><mi>s</mi><mi>x</mi></msub><mspace width="1em"/><mi>cos</mi><mspace width="1em"/><mi>θ</mi><mo>,</mo></mtd><mtd><msub><mi>s</mi><mi>y</mi></msub><mspace width="1em"/><mi>sin</mi><mspace width="1em"/><mi>θ</mi><mo>,</mo></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mo>-</mo><msub><mi>s</mi><mi>x</mi></msub><mspace width="1em"/><mi>sin</mi><mspace width="1em"/><mi>θ</mi><mo>,</mo></mtd><mtd><msub><mi>s</mi><mi>y</mi></msub><mspace width="1em"/><mi>cos</mi><mspace width="1em"/><mi>θ</mi><mo>,</mo></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mn>0</mn><mo>,</mo></mtd><mtd><mn>0</mn><mo>,</mo></mtd><mtd><mn>1</mn></mtd></mtr></mtable></mfenced></math><img id="ib0003" file="imgb0003.tif" wi="67" he="24" img-content="math" img-format="tif"/></maths> as the estimation of <i>F</i><sub><i>S</i>→<i>P</i></sub>, in which <i>θ, s<sub>x</sub>,</i> and <i>s<sub>y</sub></i> are the rotation and scale of two orientations of the pattern captured at location 604. Further, one can refine <i>F</i>'<sub><i>S</i>→<i>P</i></sub> to <i>F<sub>S→P</sub></i> by matching the captured image with the corresponding background image on paper. "Refine" means to get a more precise perspective matrix <i>F<sub>S→P</sub></i> (8 parameters) by a kind of optimization algorithm referred to as a recursive method. The recursive method treats the matrix <i>F'<sub>S→P</sub></i> as the initial value. <i>F<sub>S→P</sub></i> describes the transformation between S and P more precisely than <i>F'</i><sub><i>S</i>→P</sub>.</p><p id="p0043" num="0043">Next, one can determine the location of virtual pen tip by calibration.</p><p id="p0044" num="0044">One places the pen tip 602 on a known location <i>L<sub>pentip</sub></i> on paper. Next, one tilts the pen, allowing the camera 603 to capture a series of images with different pen<!-- EPO <DP n="12"> --> poses. For each image captured, one may receive the transform <i>F<sub>S→P</sub>.</i> From this transform, one can obtain the location of the virtual image of pen tip <i>L<sub>virtual-pentip</sub></i> : <maths id="math0004" num=""><math display="block"><msub><mi>L</mi><mrow><mi mathvariant="italic">virtual</mi><mo>-</mo><mi mathvariant="italic">pentip</mi></mrow></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>P</mi><mo>→</mo><mi>S</mi></mrow></msub><mfenced><msub><mi>L</mi><mi mathvariant="italic">pentip</mi></msub></mfenced></math><img id="ib0004" file="imgb0004.tif" wi="54" he="11" img-content="math" img-format="tif"/></maths></p><p id="p0045" num="0045">And, <maths id="math0005" num=""><math display="block"><msub><mi>F</mi><mrow><mi>P</mi><mo>→</mo><mi>S</mi></mrow></msub><mo>=</mo><mn>1</mn><mo>/</mo><msub><mi>F</mi><mrow><mi>S</mi><mo>→</mo><mi>P</mi></mrow></msub></math><img id="ib0005" file="imgb0005.tif" wi="41" he="13" img-content="math" img-format="tif"/></maths></p><p id="p0046" num="0046">By averaging the <i>L<sub>virtual-pentip</sub></i> received from every image, an accurate location of the virtual pen tip <i>L<sub>virtual-pentip</sub></i> may be determined.</p><p id="p0047" num="0047">The location of the virtual pen tip <i>L<sub>virtual-pentip</sub></i> is now known. One can also obtain the transformation <i>F<sub>S→P</sub></i> from image captured. Finally, one can use this information to determine the location of the real pen tip <i>L<sub>pentip</sub></i> : <maths id="math0006" num=""><math display="block"><msub><mi>L</mi><mi mathvariant="italic">pentip</mi></msub><mo>=</mo><msub><mi>F</mi><mrow><mi>S</mi><mo>→</mo><mi>P</mi></mrow></msub><mo>⁢</mo><mfenced><msub><mi>L</mi><mrow><mi mathvariant="italic">virtual</mi><mo>-</mo><mi mathvariant="italic">pentip</mi></mrow></msub></mfenced></math><img id="ib0006" file="imgb0006.tif" wi="60" he="12" img-content="math" img-format="tif"/></maths></p><heading id="h0009"><b><i>Bit Representations</i></b></heading><p id="p0048" num="0048"><figref idrefs="f0002">Figure 2A</figref> shows sample encoding techniques for a first bit and a second bit. A first bit 201 (for example, "1") is represented by a column of dark ink. A second bit 202 (for example, "0") is represented by a row of dark ink. It is appreciated that any color ink may be used to represent the various bits. The only requirement in the color of the ink chosen is that it provides a significant contrast with the background of the medium to be differentiable by an image capture system. The bits in <figref idrefs="f0002">Figure 2A</figref> are represented by a 3x3 matrix of cells. The size of the matrix may be modified to be any size as based on the size and resolution of an image capture system. Alternative representation of bits 0 and 1 are shown in <figref idrefs="f0003">Figures 2C-2E</figref>. It is appreciated that the representation of a one or a zero for the sample encodings of <figref idrefs="f0002 f0003">Figures 2A-2E</figref> may be switched without effect. <figref idrefs="f0003">Figure 2C</figref> shows bit representations occupying two rows or columns in an interleaved arrangement. <figref idrefs="f0003">Figure 2D</figref> shows an alternative arrangement of the pixels in rows and columns in a dashed form. Finally <figref idrefs="f0003">Figure 2E</figref> show pixel representations in columns and rows in an irregular spacing format (e.g., two dark blocks followed by a light block).<!-- EPO <DP n="13"> --></p><p id="p0049" num="0049">Referring back to <figref idrefs="f0002">Figure 2A</figref>, if a bit is represented by a 3 by 3 matrix and an imaging system detects a dark row and two white rows in the 3x3 region, then a zero is represented (or a one). If an image is detected with dark column and two white columns, then a one is represented (or a zero).</p><p id="p0050" num="0050">Here, more than one block or pixel or dot is used to represent a bit. Using a single pixel (or block or bit) to represent a bit is fragile. Dust, creases in paper, nonplanar surfaces, and the like create difficulties in reading single bit representations of data units.</p><p id="p0051" num="0051">A bit stream is used to create the graphical pattern 203 of <figref idrefs="f0002">Figure 2B</figref>. Graphical pattern 203 includes 12 rows and 18 columns. The rows and columns are formed by a bit stream being converted into a graphical representation using bit representations 201 and 202. <figref idrefs="f0002">Figure 2B</figref> may be viewed as having the following bit representation: <maths id="math0007" num=""><math display="block"><mfenced open="[" close="]"><mtable><mtr><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd></mtr><mtr><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>1</mn></mtd><mtd><mn>0</mn></mtd><mtd><mn>0</mn></mtd></mtr></mtable></mfenced></math><img id="ib0007" file="imgb0007.tif" wi="66" he="30" img-content="math" img-format="tif"/></maths></p><p id="p0052" num="0052">Various bit streams may be used to create the image 203 shown in <figref idrefs="f0002">Figure 2B</figref>. For example, a random or pseudo-random sequence of ones and zeros may be used. The bit sequence may be arranged in rows, in columns, diagonally, or following any other formulaic ordering. For example, the above matrix may be formed by the following bit stream if run left to right then down:
<ul><li>0101 0111 0110 1100 1000 1010 0111 1110 1100.</li></ul></p><p id="p0053" num="0053">The above matrix may be formed by the following bit stream if run top to bottom then right:
<ul><li>0101 1101 0011 1101 0110 1001 1001 1110 0010.</li></ul><!-- EPO <DP n="14"> --></p><p id="p0054" num="0054">The above matrix may represent the following bit stream if run diagonally then wrapped:
<ul><li>0111 0000 0101 1101 1001 0111 1111 1000 1010.</li></ul></p><heading id="h0010"><b><i>Representation Analysis</i></b></heading><p id="p0055" num="0055"><figref idrefs="f0002">Figure 2B</figref> also includes representations of the pixel blocks from image 203. The displayed images 204-211 show 5x5 pixel blocks. Pixel block 204 shows a dark row between white rows. Pixel block 205 shows a dark column between white columns. Pixel block 206 shows a bottom left corner. Pixel block 207 shows a top right corner. The pixel block 208 shows a dark column with half a dark row on the left. Pixel block 209 shows a dark row with half a dark column above the row. The pixel block 210 shows half a dark row. Pixel block 211 shows half a dark column. Analyzing the combination of pixel blocks, one appreciates that all combinations of pixel may be formed by the image segments found in pixel blocks 204 - 211.</p><p id="p0056" num="0056">The pattern created in <figref idrefs="f0002">Figure 2B</figref> may be referred to as a maze pattern in that the line segments form a maze, with no area being completely enclosed on all four sides by the maze.</p><p id="p0057" num="0057">Further, one may attempt to represent all possible pixel combinations with a smaller set of pixel blocks. Without more, one would expect that each of the four blocks shown in <figref idrefs="f0003">Figures 3A-3D</figref> to be found in the image 203. However, only three types of corners exist in the eight pixel blocks 204 - 211. In this example, there is no pixel block represented as <figref idrefs="f0003">Figure 3A</figref>. By the fact that the image segments 201 and 202 may be chosen to eliminate a type of corner, this presents the opportunity to determine the orientation of a captured image based on the missing type of corner.</p><p id="p0058" num="0058">Continuing to <figref idrefs="f0004">Figure 4</figref>, the image as captured by a camera 401 may be analyzed and its orientation determined so as to be interpretable as to the position actually<!-- EPO <DP n="15"> --> represented by the image 401. First, image 401 is reviewed to determine the angle θ needed to rotate the image so that the pixels are horizontally and vertically aligned. It is noted that alternative grid alignments are possible including a rotation of the underlying grid to a non-horizontal and vertical arrangement (for example, 45 degrees). Using a non-horizontal and vertical arrangement may provide the probable benefit of eliminating visual distractions from the user, as users may tend to notice horizontal and vertical patterns before others. For purposes of simplicity, the orientation of the grid (horizontal and vertical and any other rotation of the underlying grid) is referred to collectively as the predefined grid orientation.</p><p id="p0059" num="0059">Next, image 401 is analyzed to determine which comer is missing. The rotation amount o needed to rotate image 401 to an image ready for decoding 403 is shown as o = (θ plus a rotation amount {defined by which comer missing}). The rotation amount is shown by the equation in <figref idrefs="f0004">Figure 5</figref>. Referring back to <figref idrefs="f0004">Figure 4</figref>, angle θ is first determined by the layout of the pixels to arrive at a horizontal and vertical (or other predefined grid orientation) arrangement of the pixels and the image is rotated as shown in 402. An analysis is then conducted to determine the missing comer and the image 402 rotated to present the image as 403 to set up the image for decoding. Here, the image is rotated 90 degrees counterclockwise so location of image 403 may be recovered.</p><p id="p0060" num="0060">It is appreciated that the rotation angle θ may be applied before or after rotation of the image 401 to account for the missing comer.</p><p id="p0061" num="0061">Finally, the code in image 403 is read out and correlated with the original bit stream used to create image 203. The correlation may be performed in a number of ways. For example, it may be performed by a recursive approach in which a recovered bit stream is compared against all other bit stream fragments within the original bit stream. Second, a statistical analysis may be performed between the recovered bit stream and the original bit stream, for example, by using a hamming<!-- EPO <DP n="16"> --> distance between the two bit streams. It is appreciated that a variety of approaches may be used to determine the location of the recovered bit stream within the original bit stream.</p><heading id="h0011"><b><i>Location Determination</i></b></heading><p id="p0062" num="0062"><figref idrefs="f0006">Figure 7</figref> shows a process for determining the location of a pen tip. The input is an image captured by a camera and the output may be a position coordinate of the image compared with the total image. Also, the output may include (or not) a rotation angle of the captured image.</p><p id="p0063" num="0063">In step 701, an image is received from a camera. Next, the received image may be optionally preprocessed in step 702 (as shown by the broken outline of step 702) to adjust, the contrast between the light and dark pixels, in an attempt to determine the rotation angle of the captured image, and the like.</p><p id="p0064" num="0064">Next, in step 703, the image is analyzed to determine the bit stream within it.</p><p id="p0065" num="0065">Next, in step 704, the bit stream is compared against the original bit stream and the location of the received bit stream within the original bit stream is determined. This comparison may be made when the system is aware of how the original bit stream is wrapped to create the image 203. Finally, once the location of the captured image has been determined in step 704, the location of the pen tip may be determined in step 705.</p><p id="p0066" num="0066"><figref idrefs="f0007">Figure 8</figref> shows the approach of <figref idrefs="f0006">Figure 7</figref> in greater detail to determining the location of the pen tip. First, an image is received from the camera in step 801. The image then may optionally undergo image preprocessing in step 802 (as shown by the broken outline of step 802). The pattern is extracted in step 803. Here, pixels on the various lines may be extracted to find the orientation of the pattern and determine the angle θ.</p><p id="p0067" num="0067">Next, the received image is analyzed in step 804 to determine the underlying distribution of pixels and grid lines. If grid lines are found in step 805, then the<!-- EPO <DP n="17"> --> code is extracted from the pattern in step 806. The code is then decoded in step 807 and the location of the pen tip determined in step 808. If no grid lines were found in step 805, then an error is returned in step 809.</p><heading id="h0012"><b><i>Data Stream Encoding</i></b></heading><p id="p0068" num="0068"><figref idrefs="f0008">Figure 9</figref> shows a process for encoding a data stream using a stored scheme. In step 901 a data stream is received by a processor. In step 902, the data stream is encoded with the bit representations from storage 903. Next, the processor outputs the resultant image as output 904. The output may then be optionally printed in step 905 or may be optionally displayed on a display in step 906. To be associated with a page to be printed in step 905 or a display in step 906, the resultant image may be rendered in graphical form and sent to the printer (step 905) as an image to be printed or overlaid onto another image or document content. Similarly, the resultant image may be combined with other information and rendered for display in step 906. The process of associating the rendered form of the resultant image with other content may generally be referred to as watermarking. For instance, the image may be displayed as a watermark on the display or may be encoded into the display itself (for example, during the forming process of the display or applied later as a transparent layer).</p><heading id="h0013"><b><i>Applications</i></b></heading><p id="p0069" num="0069">The coding system described herein may be used in a number of ways. First, the coding system may be incorporated into printed paper as an image combined with an existing image or as an image printed on paper. The image representing the coding system may be printed on blank sheets of paper or may be added to other sheets with other information (for example, forms). The process for adding the image with the embedded information may include watermarking a document or page. This may include photocopying a watermark onto an image, printing paper with the embedded watermark; combining the watermark with another image and printing together, and various combinations thereof. Also, the coded information used by the system may also be incorporated within a transparent sheet laid over<!-- EPO <DP n="18"> --> the display screen of a device or system or incorporated within a surface that may be used in combination with a display, including protective films.</p><p id="p0070" num="0070">In one example, one may embed the coding system into a liquid crystal display. As is known in the LCD art, each pixel pitch of LCD has its frame, and the frames of whole LCD pixels may be pieced together to a grid. Adding the presently described system permits one to add the encoded information on the grid. One may apply a film to the grid in which the film contains the encoded information. The film may provide adjusted to provide the information in visible light, provide the information in a film that selectively absorbs IR light, or provide the information in a film that fluoresces under various light wavelengths. Further, the LCD may be controlled to emit or absorb light to project the information pattern to a pen or camera.</p><p id="p0071" num="0071">For example, an IR reflective film with specific spectrum such as 800-900nm may be placed on the LCD grid, with the film having encoded information. Next, the pen with an IR diode and camera (which may have an IR filter) may capture IR images as the pen moves across the LCD surface. In this instance, only the patterns on the LCD grid reflect the specific infrared light, such as 800-900nm. So the pattern in IR image can be distinguished from other areas. The IR image can be processed and decoded to determine the location of the pen tip.</p><p id="p0072" num="0072">The size of a pattern may be selected according to lens design parameters and resolution requirements. For example, to achieve a 0.213 mm x 0.213 mm pixel pitch and 5 mm * 5 mm lens field of view of the camera, the pattern size may be set to 2*2 pixels, where each 2*2 pixel contains a code.</p><p id="p0073" num="0073">The coding system may be embodied in the monitor of a laptop, in the monitor of a tablet/stylus-based input computer, in the monitor of a personal data assistant, a monitor of a telephone, or any device with a display.<!-- EPO <DP n="19"> --></p><p id="p0074" num="0074">Another application includes associating a document identification with a document. Commonly, one may print a document's title or reference number on a document. One may print an encoded version of a document's reference number or other information (generally referred to as a document identifier) in a portion of the document (for example, in a comer). One may then capture the document number encoded image with the pen's camera, decode the encoded image to obtain the document number, then associate the annotations to be received with the document identified by the document number.</p></description><claims mxw-id="PCLM56980037" lang="DE" load-source="patent-office"><!-- EPO <DP n="22"> --><claim id="c-de-01-0001" num="0001"><claim-text>Verfahren zum Codieren eines Datenstromes in ein Bild, umfassend die nachfolgenden Schritte:
<claim-text>Empfangen (901) eines Bitstromes;</claim-text>
<claim-text>Erstellen (902) eines grafischen Musters (203) durch Codieren des empfangenen Bitstromes unter Verwendung einer ersten und zweiten visuellen Bitdarstellung aus einem Speicher (903), wobei die erste visuelle Bitdarstellung (201) ein erstes Bit durch eine Spalte von Blöcken in einer Matrix darstellt, die zweite visuelle Bitdarstellung (202) ein zweites Bit durch eine Reihe von Blöcken in einer Matrix darstellt, die ersten und</claim-text>
<claim-text>zweiten visuellen Bitdarstellungen derart gewählt werden, dass sie einen Typ von Ecke in dem grafischen Muster beseitigen und das grafische Muster eine durch den fehlenden Typ von Ecke bestimmte Orientierung aufweist; und</claim-text>
<claim-text>Ausgeben (904) des grafischen Musters.</claim-text></claim-text></claim><claim id="c-de-01-0002" num="0002"><claim-text>Verfahren nach Anspruch 1, wobei das grafische Muster an einen Papierdrucker (905) ausgegeben wird.</claim-text></claim><claim id="c-de-01-0003" num="0003"><claim-text>Verfahren nach Anspruch 1, wobei das grafische Muster an eine Computeranzeige (906) ausgegeben wird.</claim-text></claim><claim id="c-de-01-0004" num="0004"><claim-text>Verfahren nach Anspruch 1, wobei eine von den ersten und zweiten visuellen Bitdarstellungen eine Leiste von dunklen Pixeln ist.</claim-text></claim><claim id="c-de-01-0005" num="0005"><claim-text>Verfahren nach Anspruch 1, wobei das grafische Muster eine einem Dokument zugeordnete Dokumentkennung ist, des Weiteren umfassend den nachfolgenden Schritt:
<claim-text>Drucken des grafischen Musters mit einer gedruckten Fassung des Dokumentes.</claim-text></claim-text></claim><claim id="c-de-01-0006" num="0006"><claim-text>Verfahren zum Decodieren eines codierten Bildes, umfassend die nachfolgenden Schritte:
<claim-text>Erfassen des codierten Bildes (401);</claim-text>
<claim-text>Bestimmen einer Drehung des codierten Bildes, das mit einer vordefinierten<br/>
<!-- EPO <DP n="23"> -->Gitterorientierung ausgerichtet sein soll;<br/>
Abrufen eines grafischen Musters (203) aus dem codierten Bild auf Grundlage der Bestimmung eines Drehungsschrittes;<br/>
Bestimmen einer Orientierung des grafischen Musters durch Bestimmen, welcher Typ von Ecke in dem grafischen Muster nicht auftritt;<br/>
Drehen des Musters auf Grundlage der Bestimmung eines Orientierungsschrittes; und Decodieren des gedrehten grafischen Musters zum Extrahieren eines Datenstromes unter Verwendung einer ersten und zweiten visuellen Bitdarstellung, wobei die erste visuelle Bitdarstellung (201) ein erstes Bit durch eine Spalte von Blöcken in einer Matrix darstellt und die zweite visuelle Bitdarstellung (202) ein zweites Bit durch eine Reihe von Blöcken in einer Matrix darstellt.</claim-text></claim-text></claim><claim id="c-de-01-0007" num="0007"><claim-text>Verfahren nach Anspruch 6, wobei das Bestimmen eines Drehungsschrittes ein Bestimmen der Drehung des codierten Bildes aus wenigstens einem von horizontal und vertikal beinhaltet.</claim-text></claim><claim id="c-de-01-0008" num="0008"><claim-text>Verfahren nach Anspruch 6, wobei das grafische Muster um einen dem fehlenden Typ von Ecke zugeordneten Winkel gedreht wird.</claim-text></claim><claim id="c-de-01-0009" num="0009"><claim-text>Verfahren nach Anspruch 6, wobei das grafische Muster um einen Winkel gedreht wird, bis der in dem grafischen Muster nicht auftretende Typ von Ecke identisch zu einer vordefinierten fehlenden Ecke ist.</claim-text></claim><claim id="c-de-01-0010" num="0010"><claim-text>Verfahren nach Anspruch 6, wobei das grafische Muster eine einem Dokument zugeordnete Dokumentkennung ist, des Weiteren umfassend die nachfolgenden Schritte:
<claim-text>Erfassen des grafischen Musters mit einer einem Stift zugeordneten Kamera;</claim-text>
<claim-text>Decodieren des grafischen Musters; und</claim-text>
<claim-text>Zuordnen von mit dem Stift erstellten Anwendungen an das durch die Dokumentkennung identifizierte Dokument.</claim-text></claim-text></claim><claim id="c-de-01-0011" num="0011"><claim-text>Computerlesbares Medium, umfassend computerimplementierte Anweisungen zur Durchführung des Verfahrens nach einem der Ansprüche 1 bis 5 oder einem der Ansprüche 6 bis 10.</claim-text></claim><claim id="c-de-01-0012" num="0012"><claim-text>System, das zum Durchführen des Verfahrens nach einem der Ansprüche 1 bis 5 oder einem der Ansprüche 6 bis 10 ausgelegt ist.</claim-text></claim></claims><claims mxw-id="PCLM56980038" lang="EN" load-source="patent-office"><!-- EPO <DP n="20"> --><claim id="c-en-01-0001" num="0001"><claim-text>A method for encoding a data stream into an image, comprising the steps of:
<claim-text>receiving (901) a bit stream;</claim-text>
<claim-text>creating (902) a graphical pattern (203) by encoding the received bit stream using a first and second visual bit representation from a storage (903), the first visual bit representation (201) representing a first bit by a column of blocks in a matrix, the second visual bit representation (202) representing a second bit by a row of blocks in a matrix,</claim-text>
<claim-text>the first and second visual bit representations being chosen to eliminate a type of corner in the graphical pattern, said graphical pattern having an orientation determined by the missing type of corner; and</claim-text>
<claim-text>outputting (904) the graphical pattern.</claim-text></claim-text></claim><claim id="c-en-01-0002" num="0002"><claim-text>The method according to claim 1, wherein the graphical pattern is output to a paper printer (905).</claim-text></claim><claim id="c-en-01-0003" num="0003"><claim-text>The method according to claim 1, wherein the graphical pattern is output to a computer display (906).</claim-text></claim><claim id="c-en-01-0004" num="0004"><claim-text>The method according to claim 1, wherein one of said first and second visual bit representations is a bar of dark pixels.</claim-text></claim><claim id="c-en-01-0005" num="0005"><claim-text>The method according to claim 1, wherein said graphical pattern is a document identifier associated with a document, further comprising the step of:
<claim-text>printing said graphical pattern with a printed version of said document.</claim-text></claim-text></claim><claim id="c-en-01-0006" num="0006"><claim-text>A method for decoding an encoded image, comprising the steps of:
<claim-text>capturing said encoded image (401);</claim-text>
<claim-text>determining a rotation of said encoded image to be aligned with a predefined grid orientation;<!-- EPO <DP n="21"> --></claim-text>
<claim-text>retrieving a graphical pattern (203) from said encoded image based on said determination of rotation step;</claim-text>
<claim-text>determining an orientation of said graphical pattern by determining which type of corner does not occur in said graphical pattern;</claim-text>
<claim-text>rotating said pattern based on said determining an orientation step; and</claim-text>
<claim-text>decoding the rotated graphical pattern to extract a data stream using a first and second visual bit representation, the first visual bit representation (201) representing a first bit by a column of blocks in a matrix, the second visual bit representation (202) representing a second bit by a row of blocks in a matrix.</claim-text></claim-text></claim><claim id="c-en-01-0007" num="0007"><claim-text>The method according to claim 6, wherein said determining a rotation step includes determining the rotation of said encoded image from at least one of horizontal and vertical.</claim-text></claim><claim id="c-en-01-0008" num="0008"><claim-text>The method according to claim 6, wherein said graphical pattern is rotated by an angle associated with said missing type of corner.</claim-text></claim><claim id="c-en-01-0009" num="0009"><claim-text>The method according to claim 6, wherein said graphical pattern is rotated by an angle until the type of corner not occurring in said graphical pattern is identical to a predefined missing corner.</claim-text></claim><claim id="c-en-01-0010" num="0010"><claim-text>The method according to claim 6, wherein said graphical pattern is a document identifier associated with a document, further comprising the steps of:
<claim-text>capturing said graphical pattern with a camera associated with a pen;</claim-text>
<claim-text>decoding said graphical pattern; and</claim-text>
<claim-text>associating annotations created by said pen with said document identified by said document identifier.</claim-text></claim-text></claim><claim id="c-en-01-0011" num="0011"><claim-text>A computer-readable medium comprising computer-implemented instructions to perform the method of one of claims 1 to 5 or one of claims 6 to 10.</claim-text></claim><claim id="c-en-01-0012" num="0012"><claim-text>A system adapted to perform the method of one of claims 1 to 5 or one of claims 6 to 10.</claim-text></claim></claims><claims mxw-id="PCLM56980039" lang="FR" load-source="patent-office"><!-- EPO <DP n="24"> --><claim id="c-fr-01-0001" num="0001"><claim-text>Procédé permettant de coder un flux de données dans une image comprenant les étapes suivantes :
<claim-text>la réception (901) d'un flux binaire,</claim-text>
<claim-text>la création (902) d'un motif graphique (203) en codant le flux binaire reçu en utilisant une première et une seconde représentation visuelle d'un bit à partir d'une unité de stockage (903), la première représentation visuelle d'un bit (201) représentant un premier bit par une colonne de blocs dans une matrice, la seconde représentation visuelle d'un bit (202) représentant un second bit par une rangée de bloc dans une matrice, les première et seconde représentations visuelles de bits étant choisies pour éliminer un certain type de coin dans le motif graphique, ledit motif graphique présentant une orientation déterminée par le type manquant de coin, et</claim-text>
<claim-text>la fourniture en sortie (904) du motif graphique.</claim-text></claim-text></claim><claim id="c-fr-01-0002" num="0002"><claim-text>Procédé selon la revendication 1, dans lequel le motif graphique est fourni en sortie à une imprimante papier (905).</claim-text></claim><claim id="c-fr-01-0003" num="0003"><claim-text>Procédé selon la revendication 1, dans lequel le motif graphique est fourni en sortie à un écran d'ordinateur (906).<!-- EPO <DP n="25"> --></claim-text></claim><claim id="c-fr-01-0004" num="0004"><claim-text>Procédé selon la revendication 1, dans lequel l'une desdites première et seconde représentations visuelles de bits est une barre de pixels sombres.</claim-text></claim><claim id="c-fr-01-0005" num="0005"><claim-text>Procédé selon la revendication 1, dans lequel ledit motif graphique est un identificateur de document associé à un document, comprenant en outre l'étape suivante :
<claim-text>l'impression dudit motif graphique en une version imprimée dudit document.</claim-text></claim-text></claim><claim id="c-fr-01-0006" num="0006"><claim-text>Procédé permettant de décoder une image codée, comprenant les étapes suivantes :
<claim-text>la capture de ladite image codée (401),</claim-text>
<claim-text>la détermination d'une rotation de ladite image codée pour qu'elle soit alignée avec une orientation de grille prédéfinie,</claim-text>
<claim-text>la récupération d'un motif graphique (203) à partir de ladite image codée sur la base de ladite détermination de l'étape de rotation,</claim-text>
<claim-text>la détermination d'une orientation dudit motif graphique en déterminant quel type de coin n'apparaît pas dans ledit motif graphique,</claim-text>
<claim-text>la rotation dudit motif sur la base de ladite détermination de l'étape d'orientation, et</claim-text>
<claim-text>le décodage du motif graphique pivoté afin d'extraire un flux de données en utilisant une première et une seconde représentation visuelle d'un bit, la première représentation visuelle d'un bit (201) représentant un premier bit par une colonne de blocs dans une matrice, la seconde représentation visuelle d'un bit (202) représentant un second bit par une rangée de blocs dans une matrice.</claim-text><!-- EPO <DP n="26"> --></claim-text></claim><claim id="c-fr-01-0007" num="0007"><claim-text>Procédé selon la revendication 6, dans lequel ladite détermination d'une étape de rotation inclut la détermination de la rotation de ladite image codée à partir d'au moins l'une de l'horizontale et de la verticale.</claim-text></claim><claim id="c-fr-01-0008" num="0008"><claim-text>Procédé selon la revendication 6, dans lequel ledit motif graphique est tourné d'un angle associé au dit type manquant de coin.</claim-text></claim><claim id="c-fr-01-0009" num="0009"><claim-text>Procédé selon la revendication 6 dans lequel ledit motif graphique est tourné d'un angle jusqu'à ce que le type de coin, n'apparaissant pas dans ledit motif graphique, soit identique à un coin manquant prédéfini.</claim-text></claim><claim id="c-fr-01-0010" num="0010"><claim-text>Procédé selon la revendication 6, dans lequel ledit motif graphique est un identificateur de document associé à un document, comprenant en outre les étapes suivantes :
<claim-text>la capture dudit motif graphique avec un appareil de prise de vues associé à un crayon,</claim-text>
<claim-text>le décodage dudit motif graphique, et</claim-text>
<claim-text>l'association des annotations, crées par ledit crayon, ledit document étant identifié par ledit identificateur de document.</claim-text></claim-text></claim><claim id="c-fr-01-0011" num="0011"><claim-text>Support pouvant être lu par un ordinateur comprenant des instructions insérées dans un ordinateur afin d'exécuter le procédé de l'une des revendications 1 à 5 ou de l'une des revendications 6 à 10.</claim-text></claim><claim id="c-fr-01-0012" num="0012"><claim-text>Système conçu pour exécuter le procédé de l'une des revendications 1 à 5 ou de l'une des revendications 6 à 10.</claim-text></claim></claims><drawings mxw-id="PDW16669041" load-source="patent-office"><!-- EPO <DP n="27"> --><figure id="f0001" num="1"><img id="if0001" file="imgf0001.tif" wi="165" he="221" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="28"> --><figure id="f0002" num="2A,2B"><img id="if0002" file="imgf0002.tif" wi="165" he="210" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="29"> --><figure id="f0003" num="2C,2D,2E,3A,3B,3C,3D"><img id="if0003" file="imgf0003.tif" wi="165" he="220" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="30"> --><figure id="f0004" num="4,5"><img id="if0004" file="imgf0004.tif" wi="164" he="225" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="31"> --><figure id="f0005" num="6A,6B"><img id="if0005" file="imgf0005.tif" wi="165" he="213" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="32"> --><figure id="f0006" num="7"><img id="if0006" file="imgf0006.tif" wi="165" he="158" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="33"> --><figure id="f0007" num="8"><img id="if0007" file="imgf0007.tif" wi="165" he="208" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="34"> --><figure id="f0008" num="9"><img id="if0008" file="imgf0008.tif" wi="165" he="173" img-content="drawing" img-format="tif"/></figure><!-- EPO <DP n="35"> --><figure id="f0009" num="10"><img id="if0009" file="imgf0009.tif" wi="117" he="137" img-content="drawing" img-format="tif"/></figure></drawings><copyright>User acknowledges that Fairview Research LLC and its third party providers retain all right, title and interest in and to this xml under applicable copyright laws.  User acquires no ownership rights to this xml including but not limited to its format.  User hereby accepts the terms and conditions of the Licence Agreement</copyright></patent-document>
